var G6=Object.defineProperty;var K6=(i,t,e)=>t in i?G6(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e;var Y6=(i,t)=>()=>(t||i((t={exports:{}}).exports,t),t.exports);var b=(i,t,e)=>K6(i,typeof t!="symbol"?t+"":t,e);var uye=Y6((fs,ms)=>{function Z6(i,t){for(var e=0;e<t.length;e++){const n=t[e];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in i)){const r=Object.getOwnPropertyDescriptor(n,s);r&&Object.defineProperty(i,s,r.get?r:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function e(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(s){if(s.ep)return;s.ep=!0;const r=e(s);fetch(s.href,r)}})();function L_(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var e0={exports:{}},$d={},t0={exports:{}},Ct={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rk;function X6(){if(rk)return Ct;rk=1;var i=Symbol.for("react.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),r=Symbol.for("react.provider"),o=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;function m(U){return U===null||typeof U!="object"?null:(U=f&&U[f]||U["@@iterator"],typeof U=="function"?U:null)}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,_={};function E(U,re,Be){this.props=U,this.context=re,this.refs=_,this.updater=Be||p}E.prototype.isReactComponent={},E.prototype.setState=function(U,re){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,re,"setState")},E.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function x(){}x.prototype=E.prototype;function k(U,re,Be){this.props=U,this.context=re,this.refs=_,this.updater=Be||p}var A=k.prototype=new x;A.constructor=k,v(A,E.prototype),A.isPureReactComponent=!0;var S=Array.isArray,O=Object.prototype.hasOwnProperty,P={current:null},N={key:!0,ref:!0,__self:!0,__source:!0};function L(U,re,Be){var He,fe={},Ue=null,ut=null;if(re!=null)for(He in re.ref!==void 0&&(ut=re.ref),re.key!==void 0&&(Ue=""+re.key),re)O.call(re,He)&&!N.hasOwnProperty(He)&&(fe[He]=re[He]);var et=arguments.length-2;if(et===1)fe.children=Be;else if(1<et){for(var ht=Array(et),bt=0;bt<et;bt++)ht[bt]=arguments[bt+2];fe.children=ht}if(U&&U.defaultProps)for(He in et=U.defaultProps,et)fe[He]===void 0&&(fe[He]=et[He]);return{$$typeof:i,type:U,key:Ue,ref:ut,props:fe,_owner:P.current}}function M(U,re){return{$$typeof:i,type:U.type,key:re,ref:U.ref,props:U.props,_owner:U._owner}}function F(U){return typeof U=="object"&&U!==null&&U.$$typeof===i}function q(U){var re={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(Be){return re[Be]})}var K=/\/+/g;function te(U,re){return typeof U=="object"&&U!==null&&U.key!=null?q(""+U.key):re.toString(36)}function ve(U,re,Be,He,fe){var Ue=typeof U;(Ue==="undefined"||Ue==="boolean")&&(U=null);var ut=!1;if(U===null)ut=!0;else switch(Ue){case"string":case"number":ut=!0;break;case"object":switch(U.$$typeof){case i:case t:ut=!0}}if(ut)return ut=U,fe=fe(ut),U=He===""?"."+te(ut,0):He,S(fe)?(Be="",U!=null&&(Be=U.replace(K,"$&/")+"/"),ve(fe,re,Be,"",function(bt){return bt})):fe!=null&&(F(fe)&&(fe=M(fe,Be+(!fe.key||ut&&ut.key===fe.key?"":(""+fe.key).replace(K,"$&/")+"/")+U)),re.push(fe)),1;if(ut=0,He=He===""?".":He+":",S(U))for(var et=0;et<U.length;et++){Ue=U[et];var ht=He+te(Ue,et);ut+=ve(Ue,re,Be,ht,fe)}else if(ht=m(U),typeof ht=="function")for(U=ht.call(U),et=0;!(Ue=U.next()).done;)Ue=Ue.value,ht=He+te(Ue,et++),ut+=ve(Ue,re,Be,ht,fe);else if(Ue==="object")throw re=String(U),Error("Objects are not valid as a React child (found: "+(re==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":re)+"). If you meant to render a collection of children, use an array instead.");return ut}function Se(U,re,Be){if(U==null)return U;var He=[],fe=0;return ve(U,He,"","",function(Ue){return re.call(Be,Ue,fe++)}),He}function _e(U){if(U._status===-1){var re=U._result;re=re(),re.then(function(Be){(U._status===0||U._status===-1)&&(U._status=1,U._result=Be)},function(Be){(U._status===0||U._status===-1)&&(U._status=2,U._result=Be)}),U._status===-1&&(U._status=0,U._result=re)}if(U._status===1)return U._result.default;throw U._result}var be={current:null},he={transition:null},ce={ReactCurrentDispatcher:be,ReactCurrentBatchConfig:he,ReactCurrentOwner:P};function le(){throw Error("act(...) is not supported in production builds of React.")}return Ct.Children={map:Se,forEach:function(U,re,Be){Se(U,function(){re.apply(this,arguments)},Be)},count:function(U){var re=0;return Se(U,function(){re++}),re},toArray:function(U){return Se(U,function(re){return re})||[]},only:function(U){if(!F(U))throw Error("React.Children.only expected to receive a single React element child.");return U}},Ct.Component=E,Ct.Fragment=e,Ct.Profiler=s,Ct.PureComponent=k,Ct.StrictMode=n,Ct.Suspense=l,Ct.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ce,Ct.act=le,Ct.cloneElement=function(U,re,Be){if(U==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+U+".");var He=v({},U.props),fe=U.key,Ue=U.ref,ut=U._owner;if(re!=null){if(re.ref!==void 0&&(Ue=re.ref,ut=P.current),re.key!==void 0&&(fe=""+re.key),U.type&&U.type.defaultProps)var et=U.type.defaultProps;for(ht in re)O.call(re,ht)&&!N.hasOwnProperty(ht)&&(He[ht]=re[ht]===void 0&&et!==void 0?et[ht]:re[ht])}var ht=arguments.length-2;if(ht===1)He.children=Be;else if(1<ht){et=Array(ht);for(var bt=0;bt<ht;bt++)et[bt]=arguments[bt+2];He.children=et}return{$$typeof:i,type:U.type,key:fe,ref:Ue,props:He,_owner:ut}},Ct.createContext=function(U){return U={$$typeof:o,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},U.Provider={$$typeof:r,_context:U},U.Consumer=U},Ct.createElement=L,Ct.createFactory=function(U){var re=L.bind(null,U);return re.type=U,re},Ct.createRef=function(){return{current:null}},Ct.forwardRef=function(U){return{$$typeof:a,render:U}},Ct.isValidElement=F,Ct.lazy=function(U){return{$$typeof:h,_payload:{_status:-1,_result:U},_init:_e}},Ct.memo=function(U,re){return{$$typeof:c,type:U,compare:re===void 0?null:re}},Ct.startTransition=function(U){var re=he.transition;he.transition={};try{U()}finally{he.transition=re}},Ct.unstable_act=le,Ct.useCallback=function(U,re){return be.current.useCallback(U,re)},Ct.useContext=function(U){return be.current.useContext(U)},Ct.useDebugValue=function(){},Ct.useDeferredValue=function(U){return be.current.useDeferredValue(U)},Ct.useEffect=function(U,re){return be.current.useEffect(U,re)},Ct.useId=function(){return be.current.useId()},Ct.useImperativeHandle=function(U,re,Be){return be.current.useImperativeHandle(U,re,Be)},Ct.useInsertionEffect=function(U,re){return be.current.useInsertionEffect(U,re)},Ct.useLayoutEffect=function(U,re){return be.current.useLayoutEffect(U,re)},Ct.useMemo=function(U,re){return be.current.useMemo(U,re)},Ct.useReducer=function(U,re,Be){return be.current.useReducer(U,re,Be)},Ct.useRef=function(U){return be.current.useRef(U)},Ct.useState=function(U){return be.current.useState(U)},Ct.useSyncExternalStore=function(U,re,Be){return be.current.useSyncExternalStore(U,re,Be)},Ct.useTransition=function(){return be.current.useTransition()},Ct.version="18.3.1",Ct}var ok;function yf(){return ok||(ok=1,t0.exports=X6()),t0.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ak;function J6(){if(ak)return $d;ak=1;var i=yf(),t=Symbol.for("react.element"),e=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,s=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,r={key:!0,ref:!0,__self:!0,__source:!0};function o(a,l,c){var h,f={},m=null,p=null;c!==void 0&&(m=""+c),l.key!==void 0&&(m=""+l.key),l.ref!==void 0&&(p=l.ref);for(h in l)n.call(l,h)&&!r.hasOwnProperty(h)&&(f[h]=l[h]);if(a&&a.defaultProps)for(h in l=a.defaultProps,l)f[h]===void 0&&(f[h]=l[h]);return{$$typeof:t,type:a,key:m,ref:p,props:f,_owner:s.current}}return $d.Fragment=e,$d.jsx=o,$d.jsxs=o,$d}var lk;function Q6(){return lk||(lk=1,e0.exports=J6()),e0.exports}var y=Q6(),Si="top",bs="bottom",ws="right",Ai="left",gb="auto",Gu=[Si,bs,ws,Ai],$l="start",ku="end",rR="clippingParents",V_="viewport",iu="popper",oR="reference",J1=Gu.reduce(function(i,t){return i.concat([t+"-"+$l,t+"-"+ku])},[]),D_=[].concat(Gu,[gb]).reduce(function(i,t){return i.concat([t,t+"-"+$l,t+"-"+ku])},[]),aR="beforeRead",lR="read",cR="afterRead",uR="beforeMain",dR="main",hR="afterMain",fR="beforeWrite",mR="write",gR="afterWrite",pR=[aR,lR,cR,uR,dR,hR,fR,mR,gR];function oo(i){return i?(i.nodeName||"").toLowerCase():null}function vs(i){if(i==null)return window;if(i.toString()!=="[object Window]"){var t=i.ownerDocument;return t&&t.defaultView||window}return i}function zl(i){var t=vs(i).Element;return i instanceof t||i instanceof Element}function zs(i){var t=vs(i).HTMLElement;return i instanceof t||i instanceof HTMLElement}function B_(i){if(typeof ShadowRoot>"u")return!1;var t=vs(i).ShadowRoot;return i instanceof t||i instanceof ShadowRoot}function eB(i){var t=i.state;Object.keys(t.elements).forEach(function(e){var n=t.styles[e]||{},s=t.attributes[e]||{},r=t.elements[e];!zs(r)||!oo(r)||(Object.assign(r.style,n),Object.keys(s).forEach(function(o){var a=s[o];a===!1?r.removeAttribute(o):r.setAttribute(o,a===!0?"":a)}))})}function tB(i){var t=i.state,e={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,e.popper),t.styles=e,t.elements.arrow&&Object.assign(t.elements.arrow.style,e.arrow),function(){Object.keys(t.elements).forEach(function(n){var s=t.elements[n],r=t.attributes[n]||{},o=Object.keys(t.styles.hasOwnProperty(n)?t.styles[n]:e[n]),a=o.reduce(function(l,c){return l[c]="",l},{});!zs(s)||!oo(s)||(Object.assign(s.style,a),Object.keys(r).forEach(function(l){s.removeAttribute(l)}))})}}const F_={name:"applyStyles",enabled:!0,phase:"write",fn:eB,effect:tB,requires:["computeStyles"]};function no(i){return i.split("-")[0]}var Rl=Math.max,fp=Math.min,Su=Math.round;function Q1(){var i=navigator.userAgentData;return i!=null&&i.brands&&Array.isArray(i.brands)?i.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function bR(){return!/^((?!chrome|android).)*safari/i.test(Q1())}function Au(i,t,e){t===void 0&&(t=!1),e===void 0&&(e=!1);var n=i.getBoundingClientRect(),s=1,r=1;t&&zs(i)&&(s=i.offsetWidth>0&&Su(n.width)/i.offsetWidth||1,r=i.offsetHeight>0&&Su(n.height)/i.offsetHeight||1);var o=zl(i)?vs(i):window,a=o.visualViewport,l=!bR()&&e,c=(n.left+(l&&a?a.offsetLeft:0))/s,h=(n.top+(l&&a?a.offsetTop:0))/r,f=n.width/s,m=n.height/r;return{width:f,height:m,top:h,right:c+f,bottom:h+m,left:c,x:c,y:h}}function $_(i){var t=Au(i),e=i.offsetWidth,n=i.offsetHeight;return Math.abs(t.width-e)<=1&&(e=t.width),Math.abs(t.height-n)<=1&&(n=t.height),{x:i.offsetLeft,y:i.offsetTop,width:e,height:n}}function wR(i,t){var e=t.getRootNode&&t.getRootNode();if(i.contains(t))return!0;if(e&&B_(e)){var n=t;do{if(n&&i.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function zo(i){return vs(i).getComputedStyle(i)}function nB(i){return["table","td","th"].indexOf(oo(i))>=0}function Ha(i){return((zl(i)?i.ownerDocument:i.document)||window.document).documentElement}function pb(i){return oo(i)==="html"?i:i.assignedSlot||i.parentNode||(B_(i)?i.host:null)||Ha(i)}function ck(i){return!zs(i)||zo(i).position==="fixed"?null:i.offsetParent}function iB(i){var t=/firefox/i.test(Q1()),e=/Trident/i.test(Q1());if(e&&zs(i)){var n=zo(i);if(n.position==="fixed")return null}var s=pb(i);for(B_(s)&&(s=s.host);zs(s)&&["html","body"].indexOf(oo(s))<0;){var r=zo(s);if(r.transform!=="none"||r.perspective!=="none"||r.contain==="paint"||["transform","perspective"].indexOf(r.willChange)!==-1||t&&r.willChange==="filter"||t&&r.filter&&r.filter!=="none")return s;s=s.parentNode}return null}function _f(i){for(var t=vs(i),e=ck(i);e&&nB(e)&&zo(e).position==="static";)e=ck(e);return e&&(oo(e)==="html"||oo(e)==="body"&&zo(e).position==="static")?t:e||iB(i)||t}function z_(i){return["top","bottom"].indexOf(i)>=0?"x":"y"}function Eh(i,t,e){return Rl(i,fp(t,e))}function sB(i,t,e){var n=Eh(i,t,e);return n>e?e:n}function vR(){return{top:0,right:0,bottom:0,left:0}}function yR(i){return Object.assign({},vR(),i)}function _R(i,t){return t.reduce(function(e,n){return e[n]=i,e},{})}var rB=function(t,e){return t=typeof t=="function"?t(Object.assign({},e.rects,{placement:e.placement})):t,yR(typeof t!="number"?t:_R(t,Gu))};function oB(i){var t,e=i.state,n=i.name,s=i.options,r=e.elements.arrow,o=e.modifiersData.popperOffsets,a=no(e.placement),l=z_(a),c=[Ai,ws].indexOf(a)>=0,h=c?"height":"width";if(!(!r||!o)){var f=rB(s.padding,e),m=$_(r),p=l==="y"?Si:Ai,v=l==="y"?bs:ws,_=e.rects.reference[h]+e.rects.reference[l]-o[l]-e.rects.popper[h],E=o[l]-e.rects.reference[l],x=_f(r),k=x?l==="y"?x.clientHeight||0:x.clientWidth||0:0,A=_/2-E/2,S=f[p],O=k-m[h]-f[v],P=k/2-m[h]/2+A,N=Eh(S,P,O),L=l;e.modifiersData[n]=(t={},t[L]=N,t.centerOffset=N-P,t)}}function aB(i){var t=i.state,e=i.options,n=e.element,s=n===void 0?"[data-popper-arrow]":n;s!=null&&(typeof s=="string"&&(s=t.elements.popper.querySelector(s),!s)||wR(t.elements.popper,s)&&(t.elements.arrow=s))}const ER={name:"arrow",enabled:!0,phase:"main",fn:oB,effect:aB,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Pu(i){return i.split("-")[1]}var lB={top:"auto",right:"auto",bottom:"auto",left:"auto"};function cB(i,t){var e=i.x,n=i.y,s=t.devicePixelRatio||1;return{x:Su(e*s)/s||0,y:Su(n*s)/s||0}}function uk(i){var t,e=i.popper,n=i.popperRect,s=i.placement,r=i.variation,o=i.offsets,a=i.position,l=i.gpuAcceleration,c=i.adaptive,h=i.roundOffsets,f=i.isFixed,m=o.x,p=m===void 0?0:m,v=o.y,_=v===void 0?0:v,E=typeof h=="function"?h({x:p,y:_}):{x:p,y:_};p=E.x,_=E.y;var x=o.hasOwnProperty("x"),k=o.hasOwnProperty("y"),A=Ai,S=Si,O=window;if(c){var P=_f(e),N="clientHeight",L="clientWidth";if(P===vs(e)&&(P=Ha(e),zo(P).position!=="static"&&a==="absolute"&&(N="scrollHeight",L="scrollWidth")),P=P,s===Si||(s===Ai||s===ws)&&r===ku){S=bs;var M=f&&P===O&&O.visualViewport?O.visualViewport.height:P[N];_-=M-n.height,_*=l?1:-1}if(s===Ai||(s===Si||s===bs)&&r===ku){A=ws;var F=f&&P===O&&O.visualViewport?O.visualViewport.width:P[L];p-=F-n.width,p*=l?1:-1}}var q=Object.assign({position:a},c&&lB),K=h===!0?cB({x:p,y:_},vs(e)):{x:p,y:_};if(p=K.x,_=K.y,l){var te;return Object.assign({},q,(te={},te[S]=k?"0":"",te[A]=x?"0":"",te.transform=(O.devicePixelRatio||1)<=1?"translate("+p+"px, "+_+"px)":"translate3d("+p+"px, "+_+"px, 0)",te))}return Object.assign({},q,(t={},t[S]=k?_+"px":"",t[A]=x?p+"px":"",t.transform="",t))}function uB(i){var t=i.state,e=i.options,n=e.gpuAcceleration,s=n===void 0?!0:n,r=e.adaptive,o=r===void 0?!0:r,a=e.roundOffsets,l=a===void 0?!0:a,c={placement:no(t.placement),variation:Pu(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:s,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,uk(Object.assign({},c,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:o,roundOffsets:l})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,uk(Object.assign({},c,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const j_={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:uB,data:{}};var tg={passive:!0};function dB(i){var t=i.state,e=i.instance,n=i.options,s=n.scroll,r=s===void 0?!0:s,o=n.resize,a=o===void 0?!0:o,l=vs(t.elements.popper),c=[].concat(t.scrollParents.reference,t.scrollParents.popper);return r&&c.forEach(function(h){h.addEventListener("scroll",e.update,tg)}),a&&l.addEventListener("resize",e.update,tg),function(){r&&c.forEach(function(h){h.removeEventListener("scroll",e.update,tg)}),a&&l.removeEventListener("resize",e.update,tg)}}const H_={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:dB,data:{}};var hB={left:"right",right:"left",bottom:"top",top:"bottom"};function zg(i){return i.replace(/left|right|bottom|top/g,function(t){return hB[t]})}var fB={start:"end",end:"start"};function dk(i){return i.replace(/start|end/g,function(t){return fB[t]})}function U_(i){var t=vs(i),e=t.pageXOffset,n=t.pageYOffset;return{scrollLeft:e,scrollTop:n}}function W_(i){return Au(Ha(i)).left+U_(i).scrollLeft}function mB(i,t){var e=vs(i),n=Ha(i),s=e.visualViewport,r=n.clientWidth,o=n.clientHeight,a=0,l=0;if(s){r=s.width,o=s.height;var c=bR();(c||!c&&t==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}return{width:r,height:o,x:a+W_(i),y:l}}function gB(i){var t,e=Ha(i),n=U_(i),s=(t=i.ownerDocument)==null?void 0:t.body,r=Rl(e.scrollWidth,e.clientWidth,s?s.scrollWidth:0,s?s.clientWidth:0),o=Rl(e.scrollHeight,e.clientHeight,s?s.scrollHeight:0,s?s.clientHeight:0),a=-n.scrollLeft+W_(i),l=-n.scrollTop;return zo(s||e).direction==="rtl"&&(a+=Rl(e.clientWidth,s?s.clientWidth:0)-r),{width:r,height:o,x:a,y:l}}function q_(i){var t=zo(i),e=t.overflow,n=t.overflowX,s=t.overflowY;return/auto|scroll|overlay|hidden/.test(e+s+n)}function CR(i){return["html","body","#document"].indexOf(oo(i))>=0?i.ownerDocument.body:zs(i)&&q_(i)?i:CR(pb(i))}function Ch(i,t){var e;t===void 0&&(t=[]);var n=CR(i),s=n===((e=i.ownerDocument)==null?void 0:e.body),r=vs(n),o=s?[r].concat(r.visualViewport||[],q_(n)?n:[]):n,a=t.concat(o);return s?a:a.concat(Ch(pb(o)))}function ey(i){return Object.assign({},i,{left:i.x,top:i.y,right:i.x+i.width,bottom:i.y+i.height})}function pB(i,t){var e=Au(i,!1,t==="fixed");return e.top=e.top+i.clientTop,e.left=e.left+i.clientLeft,e.bottom=e.top+i.clientHeight,e.right=e.left+i.clientWidth,e.width=i.clientWidth,e.height=i.clientHeight,e.x=e.left,e.y=e.top,e}function hk(i,t,e){return t===V_?ey(mB(i,e)):zl(t)?pB(t,e):ey(gB(Ha(i)))}function bB(i){var t=Ch(pb(i)),e=["absolute","fixed"].indexOf(zo(i).position)>=0,n=e&&zs(i)?_f(i):i;return zl(n)?t.filter(function(s){return zl(s)&&wR(s,n)&&oo(s)!=="body"}):[]}function wB(i,t,e,n){var s=t==="clippingParents"?bB(i):[].concat(t),r=[].concat(s,[e]),o=r[0],a=r.reduce(function(l,c){var h=hk(i,c,n);return l.top=Rl(h.top,l.top),l.right=fp(h.right,l.right),l.bottom=fp(h.bottom,l.bottom),l.left=Rl(h.left,l.left),l},hk(i,o,n));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function xR(i){var t=i.reference,e=i.element,n=i.placement,s=n?no(n):null,r=n?Pu(n):null,o=t.x+t.width/2-e.width/2,a=t.y+t.height/2-e.height/2,l;switch(s){case Si:l={x:o,y:t.y-e.height};break;case bs:l={x:o,y:t.y+t.height};break;case ws:l={x:t.x+t.width,y:a};break;case Ai:l={x:t.x-e.width,y:a};break;default:l={x:t.x,y:t.y}}var c=s?z_(s):null;if(c!=null){var h=c==="y"?"height":"width";switch(r){case $l:l[c]=l[c]-(t[h]/2-e[h]/2);break;case ku:l[c]=l[c]+(t[h]/2-e[h]/2);break}}return l}function Iu(i,t){t===void 0&&(t={});var e=t,n=e.placement,s=n===void 0?i.placement:n,r=e.strategy,o=r===void 0?i.strategy:r,a=e.boundary,l=a===void 0?rR:a,c=e.rootBoundary,h=c===void 0?V_:c,f=e.elementContext,m=f===void 0?iu:f,p=e.altBoundary,v=p===void 0?!1:p,_=e.padding,E=_===void 0?0:_,x=yR(typeof E!="number"?E:_R(E,Gu)),k=m===iu?oR:iu,A=i.rects.popper,S=i.elements[v?k:m],O=wB(zl(S)?S:S.contextElement||Ha(i.elements.popper),l,h,o),P=Au(i.elements.reference),N=xR({reference:P,element:A,strategy:"absolute",placement:s}),L=ey(Object.assign({},A,N)),M=m===iu?L:P,F={top:O.top-M.top+x.top,bottom:M.bottom-O.bottom+x.bottom,left:O.left-M.left+x.left,right:M.right-O.right+x.right},q=i.modifiersData.offset;if(m===iu&&q){var K=q[s];Object.keys(F).forEach(function(te){var ve=[ws,bs].indexOf(te)>=0?1:-1,Se=[Si,bs].indexOf(te)>=0?"y":"x";F[te]+=K[Se]*ve})}return F}function vB(i,t){t===void 0&&(t={});var e=t,n=e.placement,s=e.boundary,r=e.rootBoundary,o=e.padding,a=e.flipVariations,l=e.allowedAutoPlacements,c=l===void 0?D_:l,h=Pu(n),f=h?a?J1:J1.filter(function(v){return Pu(v)===h}):Gu,m=f.filter(function(v){return c.indexOf(v)>=0});m.length===0&&(m=f);var p=m.reduce(function(v,_){return v[_]=Iu(i,{placement:_,boundary:s,rootBoundary:r,padding:o})[no(_)],v},{});return Object.keys(p).sort(function(v,_){return p[v]-p[_]})}function yB(i){if(no(i)===gb)return[];var t=zg(i);return[dk(i),t,dk(t)]}function _B(i){var t=i.state,e=i.options,n=i.name;if(!t.modifiersData[n]._skip){for(var s=e.mainAxis,r=s===void 0?!0:s,o=e.altAxis,a=o===void 0?!0:o,l=e.fallbackPlacements,c=e.padding,h=e.boundary,f=e.rootBoundary,m=e.altBoundary,p=e.flipVariations,v=p===void 0?!0:p,_=e.allowedAutoPlacements,E=t.options.placement,x=no(E),k=x===E,A=l||(k||!v?[zg(E)]:yB(E)),S=[E].concat(A).reduce(function(He,fe){return He.concat(no(fe)===gb?vB(t,{placement:fe,boundary:h,rootBoundary:f,padding:c,flipVariations:v,allowedAutoPlacements:_}):fe)},[]),O=t.rects.reference,P=t.rects.popper,N=new Map,L=!0,M=S[0],F=0;F<S.length;F++){var q=S[F],K=no(q),te=Pu(q)===$l,ve=[Si,bs].indexOf(K)>=0,Se=ve?"width":"height",_e=Iu(t,{placement:q,boundary:h,rootBoundary:f,altBoundary:m,padding:c}),be=ve?te?ws:Ai:te?bs:Si;O[Se]>P[Se]&&(be=zg(be));var he=zg(be),ce=[];if(r&&ce.push(_e[K]<=0),a&&ce.push(_e[be]<=0,_e[he]<=0),ce.every(function(He){return He})){M=q,L=!1;break}N.set(q,ce)}if(L)for(var le=v?3:1,U=function(fe){var Ue=S.find(function(ut){var et=N.get(ut);if(et)return et.slice(0,fe).every(function(ht){return ht})});if(Ue)return M=Ue,"break"},re=le;re>0;re--){var Be=U(re);if(Be==="break")break}t.placement!==M&&(t.modifiersData[n]._skip=!0,t.placement=M,t.reset=!0)}}const TR={name:"flip",enabled:!0,phase:"main",fn:_B,requiresIfExists:["offset"],data:{_skip:!1}};function fk(i,t,e){return e===void 0&&(e={x:0,y:0}),{top:i.top-t.height-e.y,right:i.right-t.width+e.x,bottom:i.bottom-t.height+e.y,left:i.left-t.width-e.x}}function mk(i){return[Si,ws,bs,Ai].some(function(t){return i[t]>=0})}function EB(i){var t=i.state,e=i.name,n=t.rects.reference,s=t.rects.popper,r=t.modifiersData.preventOverflow,o=Iu(t,{elementContext:"reference"}),a=Iu(t,{altBoundary:!0}),l=fk(o,n),c=fk(a,s,r),h=mk(l),f=mk(c);t.modifiersData[e]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:h,hasPopperEscaped:f},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":h,"data-popper-escaped":f})}const kR={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:EB};function CB(i,t,e){var n=no(i),s=[Ai,Si].indexOf(n)>=0?-1:1,r=typeof e=="function"?e(Object.assign({},t,{placement:i})):e,o=r[0],a=r[1];return o=o||0,a=(a||0)*s,[Ai,ws].indexOf(n)>=0?{x:a,y:o}:{x:o,y:a}}function xB(i){var t=i.state,e=i.options,n=i.name,s=e.offset,r=s===void 0?[0,0]:s,o=D_.reduce(function(h,f){return h[f]=CB(f,t.rects,r),h},{}),a=o[t.placement],l=a.x,c=a.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=c),t.modifiersData[n]=o}const SR={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:xB};function TB(i){var t=i.state,e=i.name;t.modifiersData[e]=xR({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}const G_={name:"popperOffsets",enabled:!0,phase:"read",fn:TB,data:{}};function kB(i){return i==="x"?"y":"x"}function SB(i){var t=i.state,e=i.options,n=i.name,s=e.mainAxis,r=s===void 0?!0:s,o=e.altAxis,a=o===void 0?!1:o,l=e.boundary,c=e.rootBoundary,h=e.altBoundary,f=e.padding,m=e.tether,p=m===void 0?!0:m,v=e.tetherOffset,_=v===void 0?0:v,E=Iu(t,{boundary:l,rootBoundary:c,padding:f,altBoundary:h}),x=no(t.placement),k=Pu(t.placement),A=!k,S=z_(x),O=kB(S),P=t.modifiersData.popperOffsets,N=t.rects.reference,L=t.rects.popper,M=typeof _=="function"?_(Object.assign({},t.rects,{placement:t.placement})):_,F=typeof M=="number"?{mainAxis:M,altAxis:M}:Object.assign({mainAxis:0,altAxis:0},M),q=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,K={x:0,y:0};if(P){if(r){var te,ve=S==="y"?Si:Ai,Se=S==="y"?bs:ws,_e=S==="y"?"height":"width",be=P[S],he=be+E[ve],ce=be-E[Se],le=p?-L[_e]/2:0,U=k===$l?N[_e]:L[_e],re=k===$l?-L[_e]:-N[_e],Be=t.elements.arrow,He=p&&Be?$_(Be):{width:0,height:0},fe=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:vR(),Ue=fe[ve],ut=fe[Se],et=Eh(0,N[_e],He[_e]),ht=A?N[_e]/2-le-et-Ue-F.mainAxis:U-et-Ue-F.mainAxis,bt=A?-N[_e]/2+le+et+ut+F.mainAxis:re+et+ut+F.mainAxis,zt=t.elements.arrow&&_f(t.elements.arrow),vn=zt?S==="y"?zt.clientTop||0:zt.clientLeft||0:0,Dn=(te=q==null?void 0:q[S])!=null?te:0,kn=be+ht-Dn-vn,Jn=be+bt-Dn,Ji=Eh(p?fp(he,kn):he,be,p?Rl(ce,Jn):ce);P[S]=Ji,K[S]=Ji-be}if(a){var Qn,z=S==="x"?Si:Ai,X=S==="x"?bs:ws,se=P[O],xe=O==="y"?"height":"width",Ee=se+E[z],ue=se-E[X],Me=[Si,Ai].indexOf(x)!==-1,Qe=(Qn=q==null?void 0:q[O])!=null?Qn:0,Ne=Me?Ee:se-N[xe]-L[xe]-Qe+F.altAxis,Le=Me?se+N[xe]+L[xe]-Qe-F.altAxis:ue,je=p&&Me?sB(Ne,se,Le):Eh(p?Ne:Ee,se,p?Le:ue);P[O]=je,K[O]=je-se}t.modifiersData[n]=K}}const AR={name:"preventOverflow",enabled:!0,phase:"main",fn:SB,requiresIfExists:["offset"]};function AB(i){return{scrollLeft:i.scrollLeft,scrollTop:i.scrollTop}}function PB(i){return i===vs(i)||!zs(i)?U_(i):AB(i)}function IB(i){var t=i.getBoundingClientRect(),e=Su(t.width)/i.offsetWidth||1,n=Su(t.height)/i.offsetHeight||1;return e!==1||n!==1}function RB(i,t,e){e===void 0&&(e=!1);var n=zs(t),s=zs(t)&&IB(t),r=Ha(t),o=Au(i,s,e),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(n||!n&&!e)&&((oo(t)!=="body"||q_(r))&&(a=PB(t)),zs(t)?(l=Au(t,!0),l.x+=t.clientLeft,l.y+=t.clientTop):r&&(l.x=W_(r))),{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function OB(i){var t=new Map,e=new Set,n=[];i.forEach(function(r){t.set(r.name,r)});function s(r){e.add(r.name);var o=[].concat(r.requires||[],r.requiresIfExists||[]);o.forEach(function(a){if(!e.has(a)){var l=t.get(a);l&&s(l)}}),n.push(r)}return i.forEach(function(r){e.has(r.name)||s(r)}),n}function NB(i){var t=OB(i);return pR.reduce(function(e,n){return e.concat(t.filter(function(s){return s.phase===n}))},[])}function MB(i){var t;return function(){return t||(t=new Promise(function(e){Promise.resolve().then(function(){t=void 0,e(i())})})),t}}function LB(i){var t=i.reduce(function(e,n){var s=e[n.name];return e[n.name]=s?Object.assign({},s,n,{options:Object.assign({},s.options,n.options),data:Object.assign({},s.data,n.data)}):n,e},{});return Object.keys(t).map(function(e){return t[e]})}var gk={placement:"bottom",modifiers:[],strategy:"absolute"};function pk(){for(var i=arguments.length,t=new Array(i),e=0;e<i;e++)t[e]=arguments[e];return!t.some(function(n){return!(n&&typeof n.getBoundingClientRect=="function")})}function bb(i){i===void 0&&(i={});var t=i,e=t.defaultModifiers,n=e===void 0?[]:e,s=t.defaultOptions,r=s===void 0?gk:s;return function(a,l,c){c===void 0&&(c=r);var h={placement:"bottom",orderedModifiers:[],options:Object.assign({},gk,r),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},f=[],m=!1,p={state:h,setOptions:function(x){var k=typeof x=="function"?x(h.options):x;_(),h.options=Object.assign({},r,h.options,k),h.scrollParents={reference:zl(a)?Ch(a):a.contextElement?Ch(a.contextElement):[],popper:Ch(l)};var A=NB(LB([].concat(n,h.options.modifiers)));return h.orderedModifiers=A.filter(function(S){return S.enabled}),v(),p.update()},forceUpdate:function(){if(!m){var x=h.elements,k=x.reference,A=x.popper;if(pk(k,A)){h.rects={reference:RB(k,_f(A),h.options.strategy==="fixed"),popper:$_(A)},h.reset=!1,h.placement=h.options.placement,h.orderedModifiers.forEach(function(F){return h.modifiersData[F.name]=Object.assign({},F.data)});for(var S=0;S<h.orderedModifiers.length;S++){if(h.reset===!0){h.reset=!1,S=-1;continue}var O=h.orderedModifiers[S],P=O.fn,N=O.options,L=N===void 0?{}:N,M=O.name;typeof P=="function"&&(h=P({state:h,options:L,name:M,instance:p})||h)}}}},update:MB(function(){return new Promise(function(E){p.forceUpdate(),E(h)})}),destroy:function(){_(),m=!0}};if(!pk(a,l))return p;p.setOptions(c).then(function(E){!m&&c.onFirstUpdate&&c.onFirstUpdate(E)});function v(){h.orderedModifiers.forEach(function(E){var x=E.name,k=E.options,A=k===void 0?{}:k,S=E.effect;if(typeof S=="function"){var O=S({state:h,name:x,instance:p,options:A}),P=function(){};f.push(O||P)}})}function _(){f.forEach(function(E){return E()}),f=[]}return p}}var VB=bb(),DB=[H_,G_,j_,F_],BB=bb({defaultModifiers:DB}),FB=[H_,G_,j_,F_,SR,TR,AR,ER,kR],K_=bb({defaultModifiers:FB});const PR=Object.freeze(Object.defineProperty({__proto__:null,afterMain:hR,afterRead:cR,afterWrite:gR,applyStyles:F_,arrow:ER,auto:gb,basePlacements:Gu,beforeMain:uR,beforeRead:aR,beforeWrite:fR,bottom:bs,clippingParents:rR,computeStyles:j_,createPopper:K_,createPopperBase:VB,createPopperLite:BB,detectOverflow:Iu,end:ku,eventListeners:H_,flip:TR,hide:kR,left:Ai,main:dR,modifierPhases:pR,offset:SR,placements:D_,popper:iu,popperGenerator:bb,popperOffsets:G_,preventOverflow:AR,read:lR,reference:oR,right:ws,start:$l,top:Si,variationPlacements:J1,viewport:V_,write:mR},Symbol.toStringTag,{value:"Module"}));/*!
  * Bootstrap v5.3.3 (https://getbootstrap.com/)
  * Copyright 2011-2024 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */const ya=new Map,n0={set(i,t,e){ya.has(i)||ya.set(i,new Map);const n=ya.get(i);if(!n.has(t)&&n.size!==0){console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(n.keys())[0]}.`);return}n.set(t,e)},get(i,t){return ya.has(i)&&ya.get(i).get(t)||null},remove(i,t){if(!ya.has(i))return;const e=ya.get(i);e.delete(t),e.size===0&&ya.delete(i)}},$B=1e6,zB=1e3,ty="transitionend",IR=i=>(i&&window.CSS&&window.CSS.escape&&(i=i.replace(/#([^\s"#']+)/g,(t,e)=>`#${CSS.escape(e)}`)),i),jB=i=>i==null?`${i}`:Object.prototype.toString.call(i).match(/\s([a-z]+)/i)[1].toLowerCase(),HB=i=>{do i+=Math.floor(Math.random()*$B);while(document.getElementById(i));return i},UB=i=>{if(!i)return 0;let{transitionDuration:t,transitionDelay:e}=window.getComputedStyle(i);const n=Number.parseFloat(t),s=Number.parseFloat(e);return!n&&!s?0:(t=t.split(",")[0],e=e.split(",")[0],(Number.parseFloat(t)+Number.parseFloat(e))*zB)},RR=i=>{i.dispatchEvent(new Event(ty))},Lo=i=>!i||typeof i!="object"?!1:(typeof i.jquery<"u"&&(i=i[0]),typeof i.nodeType<"u"),La=i=>Lo(i)?i.jquery?i[0]:i:typeof i=="string"&&i.length>0?document.querySelector(IR(i)):null,Ku=i=>{if(!Lo(i)||i.getClientRects().length===0)return!1;const t=getComputedStyle(i).getPropertyValue("visibility")==="visible",e=i.closest("details:not([open])");if(!e)return t;if(e!==i){const n=i.closest("summary");if(n&&n.parentNode!==e||n===null)return!1}return t},Va=i=>!i||i.nodeType!==Node.ELEMENT_NODE||i.classList.contains("disabled")?!0:typeof i.disabled<"u"?i.disabled:i.hasAttribute("disabled")&&i.getAttribute("disabled")!=="false",OR=i=>{if(!document.documentElement.attachShadow)return null;if(typeof i.getRootNode=="function"){const t=i.getRootNode();return t instanceof ShadowRoot?t:null}return i instanceof ShadowRoot?i:i.parentNode?OR(i.parentNode):null},mp=()=>{},Ef=i=>{i.offsetHeight},NR=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,i0=[],WB=i=>{document.readyState==="loading"?(i0.length||document.addEventListener("DOMContentLoaded",()=>{for(const t of i0)t()}),i0.push(i)):i()},js=()=>document.documentElement.dir==="rtl",Ys=i=>{WB(()=>{const t=NR();if(t){const e=i.NAME,n=t.fn[e];t.fn[e]=i.jQueryInterface,t.fn[e].Constructor=i,t.fn[e].noConflict=()=>(t.fn[e]=n,i.jQueryInterface)}})},qi=(i,t=[],e=i)=>typeof i=="function"?i(...t):e,MR=(i,t,e=!0)=>{if(!e){qi(i);return}const s=UB(t)+5;let r=!1;const o=({target:a})=>{a===t&&(r=!0,t.removeEventListener(ty,o),qi(i))};t.addEventListener(ty,o),setTimeout(()=>{r||RR(t)},s)},Y_=(i,t,e,n)=>{const s=i.length;let r=i.indexOf(t);return r===-1?!e&&n?i[s-1]:i[0]:(r+=e?1:-1,n&&(r=(r+s)%s),i[Math.max(0,Math.min(r,s-1))])},qB=/[^.]*(?=\..*)\.|.*/,GB=/\..*/,KB=/::\d+$/,s0={};let bk=1;const LR={mouseenter:"mouseover",mouseleave:"mouseout"},YB=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function VR(i,t){return t&&`${t}::${bk++}`||i.uidEvent||bk++}function DR(i){const t=VR(i);return i.uidEvent=t,s0[t]=s0[t]||{},s0[t]}function ZB(i,t){return function e(n){return Z_(n,{delegateTarget:i}),e.oneOff&&ye.off(i,n.type,t),t.apply(i,[n])}}function XB(i,t,e){return function n(s){const r=i.querySelectorAll(t);for(let{target:o}=s;o&&o!==this;o=o.parentNode)for(const a of r)if(a===o)return Z_(s,{delegateTarget:o}),n.oneOff&&ye.off(i,s.type,t,e),e.apply(o,[s])}}function BR(i,t,e=null){return Object.values(i).find(n=>n.callable===t&&n.delegationSelector===e)}function FR(i,t,e){const n=typeof t=="string",s=n?e:t||e;let r=$R(i);return YB.has(r)||(r=i),[n,s,r]}function wk(i,t,e,n,s){if(typeof t!="string"||!i)return;let[r,o,a]=FR(t,e,n);t in LR&&(o=(v=>function(_){if(!_.relatedTarget||_.relatedTarget!==_.delegateTarget&&!_.delegateTarget.contains(_.relatedTarget))return v.call(this,_)})(o));const l=DR(i),c=l[a]||(l[a]={}),h=BR(c,o,r?e:null);if(h){h.oneOff=h.oneOff&&s;return}const f=VR(o,t.replace(qB,"")),m=r?XB(i,e,o):ZB(i,o);m.delegationSelector=r?e:null,m.callable=o,m.oneOff=s,m.uidEvent=f,c[f]=m,i.addEventListener(a,m,r)}function ny(i,t,e,n,s){const r=BR(t[e],n,s);r&&(i.removeEventListener(e,r,!!s),delete t[e][r.uidEvent])}function JB(i,t,e,n){const s=t[e]||{};for(const[r,o]of Object.entries(s))r.includes(n)&&ny(i,t,e,o.callable,o.delegationSelector)}function $R(i){return i=i.replace(GB,""),LR[i]||i}const ye={on(i,t,e,n){wk(i,t,e,n,!1)},one(i,t,e,n){wk(i,t,e,n,!0)},off(i,t,e,n){if(typeof t!="string"||!i)return;const[s,r,o]=FR(t,e,n),a=o!==t,l=DR(i),c=l[o]||{},h=t.startsWith(".");if(typeof r<"u"){if(!Object.keys(c).length)return;ny(i,l,o,r,s?e:null);return}if(h)for(const f of Object.keys(l))JB(i,l,f,t.slice(1));for(const[f,m]of Object.entries(c)){const p=f.replace(KB,"");(!a||t.includes(p))&&ny(i,l,o,m.callable,m.delegationSelector)}},trigger(i,t,e){if(typeof t!="string"||!i)return null;const n=NR(),s=$R(t),r=t!==s;let o=null,a=!0,l=!0,c=!1;r&&n&&(o=n.Event(t,e),n(i).trigger(o),a=!o.isPropagationStopped(),l=!o.isImmediatePropagationStopped(),c=o.isDefaultPrevented());const h=Z_(new Event(t,{bubbles:a,cancelable:!0}),e);return c&&h.preventDefault(),l&&i.dispatchEvent(h),h.defaultPrevented&&o&&o.preventDefault(),h}};function Z_(i,t={}){for(const[e,n]of Object.entries(t))try{i[e]=n}catch{Object.defineProperty(i,e,{configurable:!0,get(){return n}})}return i}function vk(i){if(i==="true")return!0;if(i==="false")return!1;if(i===Number(i).toString())return Number(i);if(i===""||i==="null")return null;if(typeof i!="string")return i;try{return JSON.parse(decodeURIComponent(i))}catch{return i}}function r0(i){return i.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}const Vo={setDataAttribute(i,t,e){i.setAttribute(`data-bs-${r0(t)}`,e)},removeDataAttribute(i,t){i.removeAttribute(`data-bs-${r0(t)}`)},getDataAttributes(i){if(!i)return{};const t={},e=Object.keys(i.dataset).filter(n=>n.startsWith("bs")&&!n.startsWith("bsConfig"));for(const n of e){let s=n.replace(/^bs/,"");s=s.charAt(0).toLowerCase()+s.slice(1,s.length),t[s]=vk(i.dataset[n])}return t},getDataAttribute(i,t){return vk(i.getAttribute(`data-bs-${r0(t)}`))}};let Cf=class{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(t){return t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t}_mergeConfigObj(t,e){const n=Lo(e)?Vo.getDataAttribute(e,"config"):{};return{...this.constructor.Default,...typeof n=="object"?n:{},...Lo(e)?Vo.getDataAttributes(e):{},...typeof t=="object"?t:{}}}_typeCheckConfig(t,e=this.constructor.DefaultType){for(const[n,s]of Object.entries(e)){const r=t[n],o=Lo(r)?"element":jB(r);if(!new RegExp(s).test(o))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${n}" provided type "${o}" but expected type "${s}".`)}}};const QB="5.3.3";class Sr extends Cf{constructor(t,e){super(),t=La(t),t&&(this._element=t,this._config=this._getConfig(e),n0.set(this._element,this.constructor.DATA_KEY,this))}dispose(){n0.remove(this._element,this.constructor.DATA_KEY),ye.off(this._element,this.constructor.EVENT_KEY);for(const t of Object.getOwnPropertyNames(this))this[t]=null}_queueCallback(t,e,n=!0){MR(t,e,n)}_getConfig(t){return t=this._mergeConfigObj(t,this._element),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}static getInstance(t){return n0.get(La(t),this.DATA_KEY)}static getOrCreateInstance(t,e={}){return this.getInstance(t)||new this(t,typeof e=="object"?e:null)}static get VERSION(){return QB}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(t){return`${t}${this.EVENT_KEY}`}}const o0=i=>{let t=i.getAttribute("data-bs-target");if(!t||t==="#"){let e=i.getAttribute("href");if(!e||!e.includes("#")&&!e.startsWith("."))return null;e.includes("#")&&!e.startsWith("#")&&(e=`#${e.split("#")[1]}`),t=e&&e!=="#"?e.trim():null}return t?t.split(",").map(e=>IR(e)).join(","):null},nt={find(i,t=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(t,i))},findOne(i,t=document.documentElement){return Element.prototype.querySelector.call(t,i)},children(i,t){return[].concat(...i.children).filter(e=>e.matches(t))},parents(i,t){const e=[];let n=i.parentNode.closest(t);for(;n;)e.push(n),n=n.parentNode.closest(t);return e},prev(i,t){let e=i.previousElementSibling;for(;e;){if(e.matches(t))return[e];e=e.previousElementSibling}return[]},next(i,t){let e=i.nextElementSibling;for(;e;){if(e.matches(t))return[e];e=e.nextElementSibling}return[]},focusableChildren(i){const t=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(e=>`${e}:not([tabindex^="-"])`).join(",");return this.find(t,i).filter(e=>!Va(e)&&Ku(e))},getSelectorFromElement(i){const t=o0(i);return t&&nt.findOne(t)?t:null},getElementFromSelector(i){const t=o0(i);return t?nt.findOne(t):null},getMultipleElementsFromSelector(i){const t=o0(i);return t?nt.find(t):[]}},wb=(i,t="hide")=>{const e=`click.dismiss${i.EVENT_KEY}`,n=i.NAME;ye.on(document,e,`[data-bs-dismiss="${n}"]`,function(s){if(["A","AREA"].includes(this.tagName)&&s.preventDefault(),Va(this))return;const r=nt.getElementFromSelector(this)||this.closest(`.${n}`);i.getOrCreateInstance(r)[t]()})},e7="alert",t7="bs.alert",zR=`.${t7}`,n7=`close${zR}`,i7=`closed${zR}`,s7="fade",r7="show";class vb extends Sr{static get NAME(){return e7}close(){if(ye.trigger(this._element,n7).defaultPrevented)return;this._element.classList.remove(r7);const e=this._element.classList.contains(s7);this._queueCallback(()=>this._destroyElement(),this._element,e)}_destroyElement(){this._element.remove(),ye.trigger(this._element,i7),this.dispose()}static jQueryInterface(t){return this.each(function(){const e=vb.getOrCreateInstance(this);if(typeof t=="string"){if(e[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);e[t](this)}})}}wb(vb,"close");Ys(vb);const o7="button",a7="bs.button",l7=`.${a7}`,c7=".data-api",u7="active",yk='[data-bs-toggle="button"]',d7=`click${l7}${c7}`;let jR=class HR extends Sr{static get NAME(){return o7}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle(u7))}static jQueryInterface(t){return this.each(function(){const e=HR.getOrCreateInstance(this);t==="toggle"&&e[t]()})}};ye.on(document,d7,yk,i=>{i.preventDefault();const t=i.target.closest(yk);jR.getOrCreateInstance(t).toggle()});Ys(jR);const h7="swipe",Yu=".bs.swipe",f7=`touchstart${Yu}`,m7=`touchmove${Yu}`,g7=`touchend${Yu}`,p7=`pointerdown${Yu}`,b7=`pointerup${Yu}`,w7="touch",v7="pen",y7="pointer-event",_7=40,E7={endCallback:null,leftCallback:null,rightCallback:null},C7={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class gp extends Cf{constructor(t,e){super(),this._element=t,!(!t||!gp.isSupported())&&(this._config=this._getConfig(e),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return E7}static get DefaultType(){return C7}static get NAME(){return h7}dispose(){ye.off(this._element,Yu)}_start(t){if(!this._supportPointerEvents){this._deltaX=t.touches[0].clientX;return}this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX)}_end(t){this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX-this._deltaX),this._handleSwipe(),qi(this._config.endCallback)}_move(t){this._deltaX=t.touches&&t.touches.length>1?0:t.touches[0].clientX-this._deltaX}_handleSwipe(){const t=Math.abs(this._deltaX);if(t<=_7)return;const e=t/this._deltaX;this._deltaX=0,e&&qi(e>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(ye.on(this._element,p7,t=>this._start(t)),ye.on(this._element,b7,t=>this._end(t)),this._element.classList.add(y7)):(ye.on(this._element,f7,t=>this._start(t)),ye.on(this._element,m7,t=>this._move(t)),ye.on(this._element,g7,t=>this._end(t)))}_eventIsPointerPenTouch(t){return this._supportPointerEvents&&(t.pointerType===v7||t.pointerType===w7)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const x7="carousel",T7="bs.carousel",Ua=`.${T7}`,UR=".data-api",k7="ArrowLeft",S7="ArrowRight",A7=500,zd="next",Hc="prev",su="left",jg="right",P7=`slide${Ua}`,a0=`slid${Ua}`,I7=`keydown${Ua}`,R7=`mouseenter${Ua}`,O7=`mouseleave${Ua}`,N7=`dragstart${Ua}`,M7=`load${Ua}${UR}`,L7=`click${Ua}${UR}`,WR="carousel",ng="active",V7="slide",D7="carousel-item-end",B7="carousel-item-start",F7="carousel-item-next",$7="carousel-item-prev",qR=".active",GR=".carousel-item",z7=qR+GR,j7=".carousel-item img",H7=".carousel-indicators",U7="[data-bs-slide], [data-bs-slide-to]",W7='[data-bs-ride="carousel"]',q7={[k7]:jg,[S7]:su},G7={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},K7={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class xf extends Sr{constructor(t,e){super(t,e),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=nt.findOne(H7,this._element),this._addEventListeners(),this._config.ride===WR&&this.cycle()}static get Default(){return G7}static get DefaultType(){return K7}static get NAME(){return x7}next(){this._slide(zd)}nextWhenVisible(){!document.hidden&&Ku(this._element)&&this.next()}prev(){this._slide(Hc)}pause(){this._isSliding&&RR(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){if(this._config.ride){if(this._isSliding){ye.one(this._element,a0,()=>this.cycle());return}this.cycle()}}to(t){const e=this._getItems();if(t>e.length-1||t<0)return;if(this._isSliding){ye.one(this._element,a0,()=>this.to(t));return}const n=this._getItemIndex(this._getActive());if(n===t)return;const s=t>n?zd:Hc;this._slide(s,e[t])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(t){return t.defaultInterval=t.interval,t}_addEventListeners(){this._config.keyboard&&ye.on(this._element,I7,t=>this._keydown(t)),this._config.pause==="hover"&&(ye.on(this._element,R7,()=>this.pause()),ye.on(this._element,O7,()=>this._maybeEnableCycle())),this._config.touch&&gp.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const n of nt.find(j7,this._element))ye.on(n,N7,s=>s.preventDefault());const e={leftCallback:()=>this._slide(this._directionToOrder(su)),rightCallback:()=>this._slide(this._directionToOrder(jg)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),A7+this._config.interval))}};this._swipeHelper=new gp(this._element,e)}_keydown(t){if(/input|textarea/i.test(t.target.tagName))return;const e=q7[t.key];e&&(t.preventDefault(),this._slide(this._directionToOrder(e)))}_getItemIndex(t){return this._getItems().indexOf(t)}_setActiveIndicatorElement(t){if(!this._indicatorsElement)return;const e=nt.findOne(qR,this._indicatorsElement);e.classList.remove(ng),e.removeAttribute("aria-current");const n=nt.findOne(`[data-bs-slide-to="${t}"]`,this._indicatorsElement);n&&(n.classList.add(ng),n.setAttribute("aria-current","true"))}_updateInterval(){const t=this._activeElement||this._getActive();if(!t)return;const e=Number.parseInt(t.getAttribute("data-bs-interval"),10);this._config.interval=e||this._config.defaultInterval}_slide(t,e=null){if(this._isSliding)return;const n=this._getActive(),s=t===zd,r=e||Y_(this._getItems(),n,s,this._config.wrap);if(r===n)return;const o=this._getItemIndex(r),a=p=>ye.trigger(this._element,p,{relatedTarget:r,direction:this._orderToDirection(t),from:this._getItemIndex(n),to:o});if(a(P7).defaultPrevented||!n||!r)return;const c=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(o),this._activeElement=r;const h=s?B7:D7,f=s?F7:$7;r.classList.add(f),Ef(r),n.classList.add(h),r.classList.add(h);const m=()=>{r.classList.remove(h,f),r.classList.add(ng),n.classList.remove(ng,f,h),this._isSliding=!1,a(a0)};this._queueCallback(m,n,this._isAnimated()),c&&this.cycle()}_isAnimated(){return this._element.classList.contains(V7)}_getActive(){return nt.findOne(z7,this._element)}_getItems(){return nt.find(GR,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(t){return js()?t===su?Hc:zd:t===su?zd:Hc}_orderToDirection(t){return js()?t===Hc?su:jg:t===Hc?jg:su}static jQueryInterface(t){return this.each(function(){const e=xf.getOrCreateInstance(this,t);if(typeof t=="number"){e.to(t);return}if(typeof t=="string"){if(e[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);e[t]()}})}}ye.on(document,L7,U7,function(i){const t=nt.getElementFromSelector(this);if(!t||!t.classList.contains(WR))return;i.preventDefault();const e=xf.getOrCreateInstance(t),n=this.getAttribute("data-bs-slide-to");if(n){e.to(n),e._maybeEnableCycle();return}if(Vo.getDataAttribute(this,"slide")==="next"){e.next(),e._maybeEnableCycle();return}e.prev(),e._maybeEnableCycle()});ye.on(window,M7,()=>{const i=nt.find(W7);for(const t of i)xf.getOrCreateInstance(t)});Ys(xf);const Y7="collapse",Z7="bs.collapse",Tf=`.${Z7}`,X7=".data-api",J7=`show${Tf}`,Q7=`shown${Tf}`,eF=`hide${Tf}`,tF=`hidden${Tf}`,nF=`click${Tf}${X7}`,l0="show",fu="collapse",ig="collapsing",iF="collapsed",sF=`:scope .${fu} .${fu}`,rF="collapse-horizontal",oF="width",aF="height",lF=".collapse.show, .collapse.collapsing",iy='[data-bs-toggle="collapse"]',cF={parent:null,toggle:!0},uF={parent:"(null|element)",toggle:"boolean"};class Uh extends Sr{constructor(t,e){super(t,e),this._isTransitioning=!1,this._triggerArray=[];const n=nt.find(iy);for(const s of n){const r=nt.getSelectorFromElement(s),o=nt.find(r).filter(a=>a===this._element);r!==null&&o.length&&this._triggerArray.push(s)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return cF}static get DefaultType(){return uF}static get NAME(){return Y7}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let t=[];if(this._config.parent&&(t=this._getFirstLevelChildren(lF).filter(a=>a!==this._element).map(a=>Uh.getOrCreateInstance(a,{toggle:!1}))),t.length&&t[0]._isTransitioning||ye.trigger(this._element,J7).defaultPrevented)return;for(const a of t)a.hide();const n=this._getDimension();this._element.classList.remove(fu),this._element.classList.add(ig),this._element.style[n]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const s=()=>{this._isTransitioning=!1,this._element.classList.remove(ig),this._element.classList.add(fu,l0),this._element.style[n]="",ye.trigger(this._element,Q7)},o=`scroll${n[0].toUpperCase()+n.slice(1)}`;this._queueCallback(s,this._element,!0),this._element.style[n]=`${this._element[o]}px`}hide(){if(this._isTransitioning||!this._isShown()||ye.trigger(this._element,eF).defaultPrevented)return;const e=this._getDimension();this._element.style[e]=`${this._element.getBoundingClientRect()[e]}px`,Ef(this._element),this._element.classList.add(ig),this._element.classList.remove(fu,l0);for(const s of this._triggerArray){const r=nt.getElementFromSelector(s);r&&!this._isShown(r)&&this._addAriaAndCollapsedClass([s],!1)}this._isTransitioning=!0;const n=()=>{this._isTransitioning=!1,this._element.classList.remove(ig),this._element.classList.add(fu),ye.trigger(this._element,tF)};this._element.style[e]="",this._queueCallback(n,this._element,!0)}_isShown(t=this._element){return t.classList.contains(l0)}_configAfterMerge(t){return t.toggle=!!t.toggle,t.parent=La(t.parent),t}_getDimension(){return this._element.classList.contains(rF)?oF:aF}_initializeChildren(){if(!this._config.parent)return;const t=this._getFirstLevelChildren(iy);for(const e of t){const n=nt.getElementFromSelector(e);n&&this._addAriaAndCollapsedClass([e],this._isShown(n))}}_getFirstLevelChildren(t){const e=nt.find(sF,this._config.parent);return nt.find(t,this._config.parent).filter(n=>!e.includes(n))}_addAriaAndCollapsedClass(t,e){if(t.length)for(const n of t)n.classList.toggle(iF,!e),n.setAttribute("aria-expanded",e)}static jQueryInterface(t){const e={};return typeof t=="string"&&/show|hide/.test(t)&&(e.toggle=!1),this.each(function(){const n=Uh.getOrCreateInstance(this,e);if(typeof t=="string"){if(typeof n[t]>"u")throw new TypeError(`No method named "${t}"`);n[t]()}})}}ye.on(document,nF,iy,function(i){(i.target.tagName==="A"||i.delegateTarget&&i.delegateTarget.tagName==="A")&&i.preventDefault();for(const t of nt.getMultipleElementsFromSelector(this))Uh.getOrCreateInstance(t,{toggle:!1}).toggle()});Ys(Uh);const _k="dropdown",dF="bs.dropdown",Xl=`.${dF}`,X_=".data-api",hF="Escape",Ek="Tab",fF="ArrowUp",Ck="ArrowDown",mF=2,gF=`hide${Xl}`,pF=`hidden${Xl}`,bF=`show${Xl}`,wF=`shown${Xl}`,KR=`click${Xl}${X_}`,YR=`keydown${Xl}${X_}`,vF=`keyup${Xl}${X_}`,ru="show",yF="dropup",_F="dropend",EF="dropstart",CF="dropup-center",xF="dropdown-center",xl='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',TF=`${xl}.${ru}`,Hg=".dropdown-menu",kF=".navbar",SF=".navbar-nav",AF=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",PF=js()?"top-end":"top-start",IF=js()?"top-start":"top-end",RF=js()?"bottom-end":"bottom-start",OF=js()?"bottom-start":"bottom-end",NF=js()?"left-start":"right-start",MF=js()?"right-start":"left-start",LF="top",VF="bottom",DF={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},BF={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class io extends Sr{constructor(t,e){super(t,e),this._popper=null,this._parent=this._element.parentNode,this._menu=nt.next(this._element,Hg)[0]||nt.prev(this._element,Hg)[0]||nt.findOne(Hg,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return DF}static get DefaultType(){return BF}static get NAME(){return _k}toggle(){return this._isShown()?this.hide():this.show()}show(){if(Va(this._element)||this._isShown())return;const t={relatedTarget:this._element};if(!ye.trigger(this._element,bF,t).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(SF))for(const n of[].concat(...document.body.children))ye.on(n,"mouseover",mp);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(ru),this._element.classList.add(ru),ye.trigger(this._element,wF,t)}}hide(){if(Va(this._element)||!this._isShown())return;const t={relatedTarget:this._element};this._completeHide(t)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(t){if(!ye.trigger(this._element,gF,t).defaultPrevented){if("ontouchstart"in document.documentElement)for(const n of[].concat(...document.body.children))ye.off(n,"mouseover",mp);this._popper&&this._popper.destroy(),this._menu.classList.remove(ru),this._element.classList.remove(ru),this._element.setAttribute("aria-expanded","false"),Vo.removeDataAttribute(this._menu,"popper"),ye.trigger(this._element,pF,t)}}_getConfig(t){if(t=super._getConfig(t),typeof t.reference=="object"&&!Lo(t.reference)&&typeof t.reference.getBoundingClientRect!="function")throw new TypeError(`${_k.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return t}_createPopper(){if(typeof PR>"u")throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let t=this._element;this._config.reference==="parent"?t=this._parent:Lo(this._config.reference)?t=La(this._config.reference):typeof this._config.reference=="object"&&(t=this._config.reference);const e=this._getPopperConfig();this._popper=K_(t,this._menu,e)}_isShown(){return this._menu.classList.contains(ru)}_getPlacement(){const t=this._parent;if(t.classList.contains(_F))return NF;if(t.classList.contains(EF))return MF;if(t.classList.contains(CF))return LF;if(t.classList.contains(xF))return VF;const e=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return t.classList.contains(yF)?e?IF:PF:e?OF:RF}_detectNavbar(){return this._element.closest(kF)!==null}_getOffset(){const{offset:t}=this._config;return typeof t=="string"?t.split(",").map(e=>Number.parseInt(e,10)):typeof t=="function"?e=>t(e,this._element):t}_getPopperConfig(){const t={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(Vo.setDataAttribute(this._menu,"popper","static"),t.modifiers=[{name:"applyStyles",enabled:!1}]),{...t,...qi(this._config.popperConfig,[t])}}_selectMenuItem({key:t,target:e}){const n=nt.find(AF,this._menu).filter(s=>Ku(s));n.length&&Y_(n,e,t===Ck,!n.includes(e)).focus()}static jQueryInterface(t){return this.each(function(){const e=io.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof e[t]>"u")throw new TypeError(`No method named "${t}"`);e[t]()}})}static clearMenus(t){if(t.button===mF||t.type==="keyup"&&t.key!==Ek)return;const e=nt.find(TF);for(const n of e){const s=io.getInstance(n);if(!s||s._config.autoClose===!1)continue;const r=t.composedPath(),o=r.includes(s._menu);if(r.includes(s._element)||s._config.autoClose==="inside"&&!o||s._config.autoClose==="outside"&&o||s._menu.contains(t.target)&&(t.type==="keyup"&&t.key===Ek||/input|select|option|textarea|form/i.test(t.target.tagName)))continue;const a={relatedTarget:s._element};t.type==="click"&&(a.clickEvent=t),s._completeHide(a)}}static dataApiKeydownHandler(t){const e=/input|textarea/i.test(t.target.tagName),n=t.key===hF,s=[fF,Ck].includes(t.key);if(!s&&!n||e&&!n)return;t.preventDefault();const r=this.matches(xl)?this:nt.prev(this,xl)[0]||nt.next(this,xl)[0]||nt.findOne(xl,t.delegateTarget.parentNode),o=io.getOrCreateInstance(r);if(s){t.stopPropagation(),o.show(),o._selectMenuItem(t);return}o._isShown()&&(t.stopPropagation(),o.hide(),r.focus())}}ye.on(document,YR,xl,io.dataApiKeydownHandler);ye.on(document,YR,Hg,io.dataApiKeydownHandler);ye.on(document,KR,io.clearMenus);ye.on(document,vF,io.clearMenus);ye.on(document,KR,xl,function(i){i.preventDefault(),io.getOrCreateInstance(this).toggle()});Ys(io);const ZR="backdrop",FF="fade",xk="show",Tk=`mousedown.bs.${ZR}`,$F={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},zF={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class XR extends Cf{constructor(t){super(),this._config=this._getConfig(t),this._isAppended=!1,this._element=null}static get Default(){return $F}static get DefaultType(){return zF}static get NAME(){return ZR}show(t){if(!this._config.isVisible){qi(t);return}this._append();const e=this._getElement();this._config.isAnimated&&Ef(e),e.classList.add(xk),this._emulateAnimation(()=>{qi(t)})}hide(t){if(!this._config.isVisible){qi(t);return}this._getElement().classList.remove(xk),this._emulateAnimation(()=>{this.dispose(),qi(t)})}dispose(){this._isAppended&&(ye.off(this._element,Tk),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const t=document.createElement("div");t.className=this._config.className,this._config.isAnimated&&t.classList.add(FF),this._element=t}return this._element}_configAfterMerge(t){return t.rootElement=La(t.rootElement),t}_append(){if(this._isAppended)return;const t=this._getElement();this._config.rootElement.append(t),ye.on(t,Tk,()=>{qi(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(t){MR(t,this._getElement(),this._config.isAnimated)}}const jF="focustrap",HF="bs.focustrap",pp=`.${HF}`,UF=`focusin${pp}`,WF=`keydown.tab${pp}`,qF="Tab",GF="forward",kk="backward",KF={autofocus:!0,trapElement:null},YF={autofocus:"boolean",trapElement:"element"};class JR extends Cf{constructor(t){super(),this._config=this._getConfig(t),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return KF}static get DefaultType(){return YF}static get NAME(){return jF}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),ye.off(document,pp),ye.on(document,UF,t=>this._handleFocusin(t)),ye.on(document,WF,t=>this._handleKeydown(t)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,ye.off(document,pp))}_handleFocusin(t){const{trapElement:e}=this._config;if(t.target===document||t.target===e||e.contains(t.target))return;const n=nt.focusableChildren(e);n.length===0?e.focus():this._lastTabNavDirection===kk?n[n.length-1].focus():n[0].focus()}_handleKeydown(t){t.key===qF&&(this._lastTabNavDirection=t.shiftKey?kk:GF)}}const Sk=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",Ak=".sticky-top",sg="padding-right",Pk="margin-right";class sy{constructor(){this._element=document.body}getWidth(){const t=document.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}hide(){const t=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,sg,e=>e+t),this._setElementAttributes(Sk,sg,e=>e+t),this._setElementAttributes(Ak,Pk,e=>e-t)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,sg),this._resetElementAttributes(Sk,sg),this._resetElementAttributes(Ak,Pk)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(t,e,n){const s=this.getWidth(),r=o=>{if(o!==this._element&&window.innerWidth>o.clientWidth+s)return;this._saveInitialAttribute(o,e);const a=window.getComputedStyle(o).getPropertyValue(e);o.style.setProperty(e,`${n(Number.parseFloat(a))}px`)};this._applyManipulationCallback(t,r)}_saveInitialAttribute(t,e){const n=t.style.getPropertyValue(e);n&&Vo.setDataAttribute(t,e,n)}_resetElementAttributes(t,e){const n=s=>{const r=Vo.getDataAttribute(s,e);if(r===null){s.style.removeProperty(e);return}Vo.removeDataAttribute(s,e),s.style.setProperty(e,r)};this._applyManipulationCallback(t,n)}_applyManipulationCallback(t,e){if(Lo(t)){e(t);return}for(const n of nt.find(t,this._element))e(n)}}const ZF="modal",XF="bs.modal",Hs=`.${XF}`,JF=".data-api",QF="Escape",e8=`hide${Hs}`,t8=`hidePrevented${Hs}`,QR=`hidden${Hs}`,eO=`show${Hs}`,n8=`shown${Hs}`,i8=`resize${Hs}`,s8=`click.dismiss${Hs}`,r8=`mousedown.dismiss${Hs}`,o8=`keydown.dismiss${Hs}`,a8=`click${Hs}${JF}`,Ik="modal-open",l8="fade",Rk="show",c0="modal-static",c8=".modal.show",u8=".modal-dialog",d8=".modal-body",h8='[data-bs-toggle="modal"]',f8={backdrop:!0,focus:!0,keyboard:!0},m8={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class Er extends Sr{constructor(t,e){super(t,e),this._dialog=nt.findOne(u8,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new sy,this._addEventListeners()}static get Default(){return f8}static get DefaultType(){return m8}static get NAME(){return ZF}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){this._isShown||this._isTransitioning||ye.trigger(this._element,eO,{relatedTarget:t}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(Ik),this._adjustDialog(),this._backdrop.show(()=>this._showElement(t)))}hide(){!this._isShown||this._isTransitioning||ye.trigger(this._element,e8).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(Rk),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){ye.off(window,Hs),ye.off(this._dialog,Hs),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new XR({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new JR({trapElement:this._element})}_showElement(t){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const e=nt.findOne(d8,this._dialog);e&&(e.scrollTop=0),Ef(this._element),this._element.classList.add(Rk);const n=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,ye.trigger(this._element,n8,{relatedTarget:t})};this._queueCallback(n,this._dialog,this._isAnimated())}_addEventListeners(){ye.on(this._element,o8,t=>{if(t.key===QF){if(this._config.keyboard){this.hide();return}this._triggerBackdropTransition()}}),ye.on(window,i8,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),ye.on(this._element,r8,t=>{ye.one(this._element,s8,e=>{if(!(this._element!==t.target||this._element!==e.target)){if(this._config.backdrop==="static"){this._triggerBackdropTransition();return}this._config.backdrop&&this.hide()}})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(Ik),this._resetAdjustments(),this._scrollBar.reset(),ye.trigger(this._element,QR)})}_isAnimated(){return this._element.classList.contains(l8)}_triggerBackdropTransition(){if(ye.trigger(this._element,t8).defaultPrevented)return;const e=this._element.scrollHeight>document.documentElement.clientHeight,n=this._element.style.overflowY;n==="hidden"||this._element.classList.contains(c0)||(e||(this._element.style.overflowY="hidden"),this._element.classList.add(c0),this._queueCallback(()=>{this._element.classList.remove(c0),this._queueCallback(()=>{this._element.style.overflowY=n},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const t=this._element.scrollHeight>document.documentElement.clientHeight,e=this._scrollBar.getWidth(),n=e>0;if(n&&!t){const s=js()?"paddingLeft":"paddingRight";this._element.style[s]=`${e}px`}if(!n&&t){const s=js()?"paddingRight":"paddingLeft";this._element.style[s]=`${e}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(t,e){return this.each(function(){const n=Er.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof n[t]>"u")throw new TypeError(`No method named "${t}"`);n[t](e)}})}}ye.on(document,a8,h8,function(i){const t=nt.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&i.preventDefault(),ye.one(t,eO,s=>{s.defaultPrevented||ye.one(t,QR,()=>{Ku(this)&&this.focus()})});const e=nt.findOne(c8);e&&Er.getInstance(e).hide(),Er.getOrCreateInstance(t).toggle(this)});wb(Er);Ys(Er);const g8="offcanvas",p8="bs.offcanvas",Yo=`.${p8}`,tO=".data-api",b8=`load${Yo}${tO}`,w8="Escape",Ok="show",Nk="showing",Mk="hiding",v8="offcanvas-backdrop",nO=".offcanvas.show",y8=`show${Yo}`,_8=`shown${Yo}`,E8=`hide${Yo}`,Lk=`hidePrevented${Yo}`,iO=`hidden${Yo}`,C8=`resize${Yo}`,x8=`click${Yo}${tO}`,T8=`keydown.dismiss${Yo}`,k8='[data-bs-toggle="offcanvas"]',S8={backdrop:!0,keyboard:!0,scroll:!1},A8={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class Da extends Sr{constructor(t,e){super(t,e),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return S8}static get DefaultType(){return A8}static get NAME(){return g8}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){if(this._isShown||ye.trigger(this._element,y8,{relatedTarget:t}).defaultPrevented)return;this._isShown=!0,this._backdrop.show(),this._config.scroll||new sy().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(Nk);const n=()=>{(!this._config.scroll||this._config.backdrop)&&this._focustrap.activate(),this._element.classList.add(Ok),this._element.classList.remove(Nk),ye.trigger(this._element,_8,{relatedTarget:t})};this._queueCallback(n,this._element,!0)}hide(){if(!this._isShown||ye.trigger(this._element,E8).defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(Mk),this._backdrop.hide();const e=()=>{this._element.classList.remove(Ok,Mk),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new sy().reset(),ye.trigger(this._element,iO)};this._queueCallback(e,this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const t=()=>{if(this._config.backdrop==="static"){ye.trigger(this._element,Lk);return}this.hide()},e=!!this._config.backdrop;return new XR({className:v8,isVisible:e,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:e?t:null})}_initializeFocusTrap(){return new JR({trapElement:this._element})}_addEventListeners(){ye.on(this._element,T8,t=>{if(t.key===w8){if(this._config.keyboard){this.hide();return}ye.trigger(this._element,Lk)}})}static jQueryInterface(t){return this.each(function(){const e=Da.getOrCreateInstance(this,t);if(typeof t=="string"){if(e[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);e[t](this)}})}}ye.on(document,x8,k8,function(i){const t=nt.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&i.preventDefault(),Va(this))return;ye.one(t,iO,()=>{Ku(this)&&this.focus()});const e=nt.findOne(nO);e&&e!==t&&Da.getInstance(e).hide(),Da.getOrCreateInstance(t).toggle(this)});ye.on(window,b8,()=>{for(const i of nt.find(nO))Da.getOrCreateInstance(i).show()});ye.on(window,C8,()=>{for(const i of nt.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(i).position!=="fixed"&&Da.getOrCreateInstance(i).hide()});wb(Da);Ys(Da);const P8=/^aria-[\w-]*$/i,sO={"*":["class","dir","id","lang","role",P8],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},I8=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),R8=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,O8=(i,t)=>{const e=i.nodeName.toLowerCase();return t.includes(e)?I8.has(e)?!!R8.test(i.nodeValue):!0:t.filter(n=>n instanceof RegExp).some(n=>n.test(e))};function N8(i,t,e){if(!i.length)return i;if(e&&typeof e=="function")return e(i);const s=new window.DOMParser().parseFromString(i,"text/html"),r=[].concat(...s.body.querySelectorAll("*"));for(const o of r){const a=o.nodeName.toLowerCase();if(!Object.keys(t).includes(a)){o.remove();continue}const l=[].concat(...o.attributes),c=[].concat(t["*"]||[],t[a]||[]);for(const h of l)O8(h,c)||o.removeAttribute(h.nodeName)}return s.body.innerHTML}const M8="TemplateFactory",L8={allowList:sO,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},V8={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},D8={entry:"(string|element|function|null)",selector:"(string|element)"};class B8 extends Cf{constructor(t){super(),this._config=this._getConfig(t)}static get Default(){return L8}static get DefaultType(){return V8}static get NAME(){return M8}getContent(){return Object.values(this._config.content).map(t=>this._resolvePossibleFunction(t)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(t){return this._checkContent(t),this._config.content={...this._config.content,...t},this}toHtml(){const t=document.createElement("div");t.innerHTML=this._maybeSanitize(this._config.template);for(const[s,r]of Object.entries(this._config.content))this._setContent(t,r,s);const e=t.children[0],n=this._resolvePossibleFunction(this._config.extraClass);return n&&e.classList.add(...n.split(" ")),e}_typeCheckConfig(t){super._typeCheckConfig(t),this._checkContent(t.content)}_checkContent(t){for(const[e,n]of Object.entries(t))super._typeCheckConfig({selector:e,entry:n},D8)}_setContent(t,e,n){const s=nt.findOne(n,t);if(s){if(e=this._resolvePossibleFunction(e),!e){s.remove();return}if(Lo(e)){this._putElementInTemplate(La(e),s);return}if(this._config.html){s.innerHTML=this._maybeSanitize(e);return}s.textContent=e}}_maybeSanitize(t){return this._config.sanitize?N8(t,this._config.allowList,this._config.sanitizeFn):t}_resolvePossibleFunction(t){return qi(t,[this])}_putElementInTemplate(t,e){if(this._config.html){e.innerHTML="",e.append(t);return}e.textContent=t.textContent}}const F8="tooltip",$8=new Set(["sanitize","allowList","sanitizeFn"]),u0="fade",z8="modal",rg="show",j8=".tooltip-inner",Vk=`.${z8}`,Dk="hide.bs.modal",jd="hover",d0="focus",H8="click",U8="manual",W8="hide",q8="hidden",G8="show",K8="shown",Y8="inserted",Z8="click",X8="focusin",J8="focusout",Q8="mouseenter",e9="mouseleave",t9={AUTO:"auto",TOP:"top",RIGHT:js()?"left":"right",BOTTOM:"bottom",LEFT:js()?"right":"left"},n9={allowList:sO,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},i9={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class Zu extends Sr{constructor(t,e){if(typeof PR>"u")throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(t,e),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return n9}static get DefaultType(){return i9}static get NAME(){return F8}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){if(this._isEnabled){if(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()){this._leave();return}this._enter()}}dispose(){clearTimeout(this._timeout),ye.off(this._element.closest(Vk),Dk,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!(this._isWithContent()&&this._isEnabled))return;const t=ye.trigger(this._element,this.constructor.eventName(G8)),n=(OR(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(t.defaultPrevented||!n)return;this._disposePopper();const s=this._getTipElement();this._element.setAttribute("aria-describedby",s.getAttribute("id"));const{container:r}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(r.append(s),ye.trigger(this._element,this.constructor.eventName(Y8))),this._popper=this._createPopper(s),s.classList.add(rg),"ontouchstart"in document.documentElement)for(const a of[].concat(...document.body.children))ye.on(a,"mouseover",mp);const o=()=>{ye.trigger(this._element,this.constructor.eventName(K8)),this._isHovered===!1&&this._leave(),this._isHovered=!1};this._queueCallback(o,this.tip,this._isAnimated())}hide(){if(!this._isShown()||ye.trigger(this._element,this.constructor.eventName(W8)).defaultPrevented)return;if(this._getTipElement().classList.remove(rg),"ontouchstart"in document.documentElement)for(const s of[].concat(...document.body.children))ye.off(s,"mouseover",mp);this._activeTrigger[H8]=!1,this._activeTrigger[d0]=!1,this._activeTrigger[jd]=!1,this._isHovered=null;const n=()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),ye.trigger(this._element,this.constructor.eventName(q8)))};this._queueCallback(n,this.tip,this._isAnimated())}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(t){const e=this._getTemplateFactory(t).toHtml();if(!e)return null;e.classList.remove(u0,rg),e.classList.add(`bs-${this.constructor.NAME}-auto`);const n=HB(this.constructor.NAME).toString();return e.setAttribute("id",n),this._isAnimated()&&e.classList.add(u0),e}setContent(t){this._newContent=t,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(t){return this._templateFactory?this._templateFactory.changeContent(t):this._templateFactory=new B8({...this._config,content:t,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[j8]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(t){return this.constructor.getOrCreateInstance(t.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(u0)}_isShown(){return this.tip&&this.tip.classList.contains(rg)}_createPopper(t){const e=qi(this._config.placement,[this,t,this._element]),n=t9[e.toUpperCase()];return K_(this._element,t,this._getPopperConfig(n))}_getOffset(){const{offset:t}=this._config;return typeof t=="string"?t.split(",").map(e=>Number.parseInt(e,10)):typeof t=="function"?e=>t(e,this._element):t}_resolvePossibleFunction(t){return qi(t,[this._element])}_getPopperConfig(t){const e={placement:t,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:n=>{this._getTipElement().setAttribute("data-popper-placement",n.state.placement)}}]};return{...e,...qi(this._config.popperConfig,[e])}}_setListeners(){const t=this._config.trigger.split(" ");for(const e of t)if(e==="click")ye.on(this._element,this.constructor.eventName(Z8),this._config.selector,n=>{this._initializeOnDelegatedTarget(n).toggle()});else if(e!==U8){const n=e===jd?this.constructor.eventName(Q8):this.constructor.eventName(X8),s=e===jd?this.constructor.eventName(e9):this.constructor.eventName(J8);ye.on(this._element,n,this._config.selector,r=>{const o=this._initializeOnDelegatedTarget(r);o._activeTrigger[r.type==="focusin"?d0:jd]=!0,o._enter()}),ye.on(this._element,s,this._config.selector,r=>{const o=this._initializeOnDelegatedTarget(r);o._activeTrigger[r.type==="focusout"?d0:jd]=o._element.contains(r.relatedTarget),o._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},ye.on(this._element.closest(Vk),Dk,this._hideModalHandler)}_fixTitle(){const t=this._element.getAttribute("title");t&&(!this._element.getAttribute("aria-label")&&!this._element.textContent.trim()&&this._element.setAttribute("aria-label",t),this._element.setAttribute("data-bs-original-title",t),this._element.removeAttribute("title"))}_enter(){if(this._isShown()||this._isHovered){this._isHovered=!0;return}this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show)}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(t,e){clearTimeout(this._timeout),this._timeout=setTimeout(t,e)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(t){const e=Vo.getDataAttributes(this._element);for(const n of Object.keys(e))$8.has(n)&&delete e[n];return t={...e,...typeof t=="object"&&t?t:{}},t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t.container=t.container===!1?document.body:La(t.container),typeof t.delay=="number"&&(t.delay={show:t.delay,hide:t.delay}),typeof t.title=="number"&&(t.title=t.title.toString()),typeof t.content=="number"&&(t.content=t.content.toString()),t}_getDelegateConfig(){const t={};for(const[e,n]of Object.entries(this._config))this.constructor.Default[e]!==n&&(t[e]=n);return t.selector=!1,t.trigger="manual",t}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(t){return this.each(function(){const e=Zu.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof e[t]>"u")throw new TypeError(`No method named "${t}"`);e[t]()}})}}Ys(Zu);const s9="popover",r9=".popover-header",o9=".popover-body",a9={...Zu.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},l9={...Zu.DefaultType,content:"(null|string|element|function)"};class J_ extends Zu{static get Default(){return a9}static get DefaultType(){return l9}static get NAME(){return s9}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[r9]:this._getTitle(),[o9]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(t){return this.each(function(){const e=J_.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof e[t]>"u")throw new TypeError(`No method named "${t}"`);e[t]()}})}}Ys(J_);const c9="scrollspy",u9="bs.scrollspy",Q_=`.${u9}`,d9=".data-api",h9=`activate${Q_}`,Bk=`click${Q_}`,f9=`load${Q_}${d9}`,m9="dropdown-item",Uc="active",g9='[data-bs-spy="scroll"]',h0="[href]",p9=".nav, .list-group",Fk=".nav-link",b9=".nav-item",w9=".list-group-item",v9=`${Fk}, ${b9} > ${Fk}, ${w9}`,y9=".dropdown",_9=".dropdown-toggle",E9={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},C9={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class yb extends Sr{constructor(t,e){super(t,e),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return E9}static get DefaultType(){return C9}static get NAME(){return c9}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const t of this._observableSections.values())this._observer.observe(t)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(t){return t.target=La(t.target)||document.body,t.rootMargin=t.offset?`${t.offset}px 0px -30%`:t.rootMargin,typeof t.threshold=="string"&&(t.threshold=t.threshold.split(",").map(e=>Number.parseFloat(e))),t}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(ye.off(this._config.target,Bk),ye.on(this._config.target,Bk,h0,t=>{const e=this._observableSections.get(t.target.hash);if(e){t.preventDefault();const n=this._rootElement||window,s=e.offsetTop-this._element.offsetTop;if(n.scrollTo){n.scrollTo({top:s,behavior:"smooth"});return}n.scrollTop=s}}))}_getNewObserver(){const t={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(e=>this._observerCallback(e),t)}_observerCallback(t){const e=o=>this._targetLinks.get(`#${o.target.id}`),n=o=>{this._previousScrollData.visibleEntryTop=o.target.offsetTop,this._process(e(o))},s=(this._rootElement||document.documentElement).scrollTop,r=s>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=s;for(const o of t){if(!o.isIntersecting){this._activeTarget=null,this._clearActiveClass(e(o));continue}const a=o.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(r&&a){if(n(o),!s)return;continue}!r&&!a&&n(o)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const t=nt.find(h0,this._config.target);for(const e of t){if(!e.hash||Va(e))continue;const n=nt.findOne(decodeURI(e.hash),this._element);Ku(n)&&(this._targetLinks.set(decodeURI(e.hash),e),this._observableSections.set(e.hash,n))}}_process(t){this._activeTarget!==t&&(this._clearActiveClass(this._config.target),this._activeTarget=t,t.classList.add(Uc),this._activateParents(t),ye.trigger(this._element,h9,{relatedTarget:t}))}_activateParents(t){if(t.classList.contains(m9)){nt.findOne(_9,t.closest(y9)).classList.add(Uc);return}for(const e of nt.parents(t,p9))for(const n of nt.prev(e,v9))n.classList.add(Uc)}_clearActiveClass(t){t.classList.remove(Uc);const e=nt.find(`${h0}.${Uc}`,t);for(const n of e)n.classList.remove(Uc)}static jQueryInterface(t){return this.each(function(){const e=yb.getOrCreateInstance(this,t);if(typeof t=="string"){if(e[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);e[t]()}})}}ye.on(window,f9,()=>{for(const i of nt.find(g9))yb.getOrCreateInstance(i)});Ys(yb);const x9="tab",T9="bs.tab",Jl=`.${T9}`,k9=`hide${Jl}`,S9=`hidden${Jl}`,A9=`show${Jl}`,P9=`shown${Jl}`,I9=`click${Jl}`,R9=`keydown${Jl}`,O9=`load${Jl}`,N9="ArrowLeft",$k="ArrowRight",M9="ArrowUp",zk="ArrowDown",f0="Home",jk="End",Tl="active",Hk="fade",m0="show",L9="dropdown",rO=".dropdown-toggle",V9=".dropdown-menu",g0=`:not(${rO})`,D9='.list-group, .nav, [role="tablist"]',B9=".nav-item, .list-group-item",F9=`.nav-link${g0}, .list-group-item${g0}, [role="tab"]${g0}`,oO='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',p0=`${F9}, ${oO}`,$9=`.${Tl}[data-bs-toggle="tab"], .${Tl}[data-bs-toggle="pill"], .${Tl}[data-bs-toggle="list"]`;class Ru extends Sr{constructor(t){super(t),this._parent=this._element.closest(D9),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),ye.on(this._element,R9,e=>this._keydown(e)))}static get NAME(){return x9}show(){const t=this._element;if(this._elemIsActive(t))return;const e=this._getActiveElem(),n=e?ye.trigger(e,k9,{relatedTarget:t}):null;ye.trigger(t,A9,{relatedTarget:e}).defaultPrevented||n&&n.defaultPrevented||(this._deactivate(e,t),this._activate(t,e))}_activate(t,e){if(!t)return;t.classList.add(Tl),this._activate(nt.getElementFromSelector(t));const n=()=>{if(t.getAttribute("role")!=="tab"){t.classList.add(m0);return}t.removeAttribute("tabindex"),t.setAttribute("aria-selected",!0),this._toggleDropDown(t,!0),ye.trigger(t,P9,{relatedTarget:e})};this._queueCallback(n,t,t.classList.contains(Hk))}_deactivate(t,e){if(!t)return;t.classList.remove(Tl),t.blur(),this._deactivate(nt.getElementFromSelector(t));const n=()=>{if(t.getAttribute("role")!=="tab"){t.classList.remove(m0);return}t.setAttribute("aria-selected",!1),t.setAttribute("tabindex","-1"),this._toggleDropDown(t,!1),ye.trigger(t,S9,{relatedTarget:e})};this._queueCallback(n,t,t.classList.contains(Hk))}_keydown(t){if(![N9,$k,M9,zk,f0,jk].includes(t.key))return;t.stopPropagation(),t.preventDefault();const e=this._getChildren().filter(s=>!Va(s));let n;if([f0,jk].includes(t.key))n=e[t.key===f0?0:e.length-1];else{const s=[$k,zk].includes(t.key);n=Y_(e,t.target,s,!0)}n&&(n.focus({preventScroll:!0}),Ru.getOrCreateInstance(n).show())}_getChildren(){return nt.find(p0,this._parent)}_getActiveElem(){return this._getChildren().find(t=>this._elemIsActive(t))||null}_setInitialAttributes(t,e){this._setAttributeIfNotExists(t,"role","tablist");for(const n of e)this._setInitialAttributesOnChild(n)}_setInitialAttributesOnChild(t){t=this._getInnerElement(t);const e=this._elemIsActive(t),n=this._getOuterElement(t);t.setAttribute("aria-selected",e),n!==t&&this._setAttributeIfNotExists(n,"role","presentation"),e||t.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(t,"role","tab"),this._setInitialAttributesOnTargetPanel(t)}_setInitialAttributesOnTargetPanel(t){const e=nt.getElementFromSelector(t);e&&(this._setAttributeIfNotExists(e,"role","tabpanel"),t.id&&this._setAttributeIfNotExists(e,"aria-labelledby",`${t.id}`))}_toggleDropDown(t,e){const n=this._getOuterElement(t);if(!n.classList.contains(L9))return;const s=(r,o)=>{const a=nt.findOne(r,n);a&&a.classList.toggle(o,e)};s(rO,Tl),s(V9,m0),n.setAttribute("aria-expanded",e)}_setAttributeIfNotExists(t,e,n){t.hasAttribute(e)||t.setAttribute(e,n)}_elemIsActive(t){return t.classList.contains(Tl)}_getInnerElement(t){return t.matches(p0)?t:nt.findOne(p0,t)}_getOuterElement(t){return t.closest(B9)||t}static jQueryInterface(t){return this.each(function(){const e=Ru.getOrCreateInstance(this);if(typeof t=="string"){if(e[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);e[t]()}})}}ye.on(document,I9,oO,function(i){["A","AREA"].includes(this.tagName)&&i.preventDefault(),!Va(this)&&Ru.getOrCreateInstance(this).show()});ye.on(window,O9,()=>{for(const i of nt.find($9))Ru.getOrCreateInstance(i)});Ys(Ru);const z9="toast",j9="bs.toast",Wa=`.${j9}`,H9=`mouseover${Wa}`,U9=`mouseout${Wa}`,W9=`focusin${Wa}`,q9=`focusout${Wa}`,G9=`hide${Wa}`,K9=`hidden${Wa}`,Y9=`show${Wa}`,Z9=`shown${Wa}`,X9="fade",Uk="hide",og="show",ag="showing",J9={animation:"boolean",autohide:"boolean",delay:"number"},Q9={animation:!0,autohide:!0,delay:5e3};let eE=class aO extends Sr{constructor(t,e){super(t,e),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return Q9}static get DefaultType(){return J9}static get NAME(){return z9}show(){if(ye.trigger(this._element,Y9).defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add(X9);const e=()=>{this._element.classList.remove(ag),ye.trigger(this._element,Z9),this._maybeScheduleHide()};this._element.classList.remove(Uk),Ef(this._element),this._element.classList.add(og,ag),this._queueCallback(e,this._element,this._config.animation)}hide(){if(!this.isShown()||ye.trigger(this._element,G9).defaultPrevented)return;const e=()=>{this._element.classList.add(Uk),this._element.classList.remove(ag,og),ye.trigger(this._element,K9)};this._element.classList.add(ag),this._queueCallback(e,this._element,this._config.animation)}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(og),super.dispose()}isShown(){return this._element.classList.contains(og)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(t,e){switch(t.type){case"mouseover":case"mouseout":{this._hasMouseInteraction=e;break}case"focusin":case"focusout":{this._hasKeyboardInteraction=e;break}}if(e){this._clearTimeout();return}const n=t.relatedTarget;this._element===n||this._element.contains(n)||this._maybeScheduleHide()}_setListeners(){ye.on(this._element,H9,t=>this._onInteraction(t,!0)),ye.on(this._element,U9,t=>this._onInteraction(t,!1)),ye.on(this._element,W9,t=>this._onInteraction(t,!0)),ye.on(this._element,q9,t=>this._onInteraction(t,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(t){return this.each(function(){const e=aO.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof e[t]>"u")throw new TypeError(`No method named "${t}"`);e[t](this)}})}};wb(eE);Ys(eE);var lg={},b0={exports:{}},$i={},w0={exports:{}},v0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wk;function e$(){return Wk||(Wk=1,function(i){function t(he,ce){var le=he.length;he.push(ce);e:for(;0<le;){var U=le-1>>>1,re=he[U];if(0<s(re,ce))he[U]=ce,he[le]=re,le=U;else break e}}function e(he){return he.length===0?null:he[0]}function n(he){if(he.length===0)return null;var ce=he[0],le=he.pop();if(le!==ce){he[0]=le;e:for(var U=0,re=he.length,Be=re>>>1;U<Be;){var He=2*(U+1)-1,fe=he[He],Ue=He+1,ut=he[Ue];if(0>s(fe,le))Ue<re&&0>s(ut,fe)?(he[U]=ut,he[Ue]=le,U=Ue):(he[U]=fe,he[He]=le,U=He);else if(Ue<re&&0>s(ut,le))he[U]=ut,he[Ue]=le,U=Ue;else break e}}return ce}function s(he,ce){var le=he.sortIndex-ce.sortIndex;return le!==0?le:he.id-ce.id}if(typeof performance=="object"&&typeof performance.now=="function"){var r=performance;i.unstable_now=function(){return r.now()}}else{var o=Date,a=o.now();i.unstable_now=function(){return o.now()-a}}var l=[],c=[],h=1,f=null,m=3,p=!1,v=!1,_=!1,E=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A(he){for(var ce=e(c);ce!==null;){if(ce.callback===null)n(c);else if(ce.startTime<=he)n(c),ce.sortIndex=ce.expirationTime,t(l,ce);else break;ce=e(c)}}function S(he){if(_=!1,A(he),!v)if(e(l)!==null)v=!0,_e(O);else{var ce=e(c);ce!==null&&be(S,ce.startTime-he)}}function O(he,ce){v=!1,_&&(_=!1,x(L),L=-1),p=!0;var le=m;try{for(A(ce),f=e(l);f!==null&&(!(f.expirationTime>ce)||he&&!q());){var U=f.callback;if(typeof U=="function"){f.callback=null,m=f.priorityLevel;var re=U(f.expirationTime<=ce);ce=i.unstable_now(),typeof re=="function"?f.callback=re:f===e(l)&&n(l),A(ce)}else n(l);f=e(l)}if(f!==null)var Be=!0;else{var He=e(c);He!==null&&be(S,He.startTime-ce),Be=!1}return Be}finally{f=null,m=le,p=!1}}var P=!1,N=null,L=-1,M=5,F=-1;function q(){return!(i.unstable_now()-F<M)}function K(){if(N!==null){var he=i.unstable_now();F=he;var ce=!0;try{ce=N(!0,he)}finally{ce?te():(P=!1,N=null)}}else P=!1}var te;if(typeof k=="function")te=function(){k(K)};else if(typeof MessageChannel<"u"){var ve=new MessageChannel,Se=ve.port2;ve.port1.onmessage=K,te=function(){Se.postMessage(null)}}else te=function(){E(K,0)};function _e(he){N=he,P||(P=!0,te())}function be(he,ce){L=E(function(){he(i.unstable_now())},ce)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(he){he.callback=null},i.unstable_continueExecution=function(){v||p||(v=!0,_e(O))},i.unstable_forceFrameRate=function(he){0>he||125<he?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<he?Math.floor(1e3/he):5},i.unstable_getCurrentPriorityLevel=function(){return m},i.unstable_getFirstCallbackNode=function(){return e(l)},i.unstable_next=function(he){switch(m){case 1:case 2:case 3:var ce=3;break;default:ce=m}var le=m;m=ce;try{return he()}finally{m=le}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(he,ce){switch(he){case 1:case 2:case 3:case 4:case 5:break;default:he=3}var le=m;m=he;try{return ce()}finally{m=le}},i.unstable_scheduleCallback=function(he,ce,le){var U=i.unstable_now();switch(typeof le=="object"&&le!==null?(le=le.delay,le=typeof le=="number"&&0<le?U+le:U):le=U,he){case 1:var re=-1;break;case 2:re=250;break;case 5:re=1073741823;break;case 4:re=1e4;break;default:re=5e3}return re=le+re,he={id:h++,callback:ce,priorityLevel:he,startTime:le,expirationTime:re,sortIndex:-1},le>U?(he.sortIndex=le,t(c,he),e(l)===null&&he===e(c)&&(_?(x(L),L=-1):_=!0,be(S,le-U))):(he.sortIndex=re,t(l,he),v||p||(v=!0,_e(O))),he},i.unstable_shouldYield=q,i.unstable_wrapCallback=function(he){var ce=m;return function(){var le=m;m=ce;try{return he.apply(this,arguments)}finally{m=le}}}}(v0)),v0}var qk;function t$(){return qk||(qk=1,w0.exports=e$()),w0.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gk;function n$(){if(Gk)return $i;Gk=1;var i=yf(),t=t$();function e(u){for(var d="https://reactjs.org/docs/error-decoder.html?invariant="+u,g=1;g<arguments.length;g++)d+="&args[]="+encodeURIComponent(arguments[g]);return"Minified React error #"+u+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,s={};function r(u,d){o(u,d),o(u+"Capture",d)}function o(u,d){for(s[u]=d,u=0;u<d.length;u++)n.add(d[u])}var a=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),l=Object.prototype.hasOwnProperty,c=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h={},f={};function m(u){return l.call(f,u)?!0:l.call(h,u)?!1:c.test(u)?f[u]=!0:(h[u]=!0,!1)}function p(u,d,g,w){if(g!==null&&g.type===0)return!1;switch(typeof d){case"function":case"symbol":return!0;case"boolean":return w?!1:g!==null?!g.acceptsBooleans:(u=u.toLowerCase().slice(0,5),u!=="data-"&&u!=="aria-");default:return!1}}function v(u,d,g,w){if(d===null||typeof d>"u"||p(u,d,g,w))return!0;if(w)return!1;if(g!==null)switch(g.type){case 3:return!d;case 4:return d===!1;case 5:return isNaN(d);case 6:return isNaN(d)||1>d}return!1}function _(u,d,g,w,C,T,I){this.acceptsBooleans=d===2||d===3||d===4,this.attributeName=w,this.attributeNamespace=C,this.mustUseProperty=g,this.propertyName=u,this.type=d,this.sanitizeURL=T,this.removeEmptyString=I}var E={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(u){E[u]=new _(u,0,!1,u,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(u){var d=u[0];E[d]=new _(d,1,!1,u[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(u){E[u]=new _(u,2,!1,u.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(u){E[u]=new _(u,2,!1,u,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(u){E[u]=new _(u,3,!1,u.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(u){E[u]=new _(u,3,!0,u,null,!1,!1)}),["capture","download"].forEach(function(u){E[u]=new _(u,4,!1,u,null,!1,!1)}),["cols","rows","size","span"].forEach(function(u){E[u]=new _(u,6,!1,u,null,!1,!1)}),["rowSpan","start"].forEach(function(u){E[u]=new _(u,5,!1,u.toLowerCase(),null,!1,!1)});var x=/[\-:]([a-z])/g;function k(u){return u[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(u){var d=u.replace(x,k);E[d]=new _(d,1,!1,u,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(u){var d=u.replace(x,k);E[d]=new _(d,1,!1,u,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(u){var d=u.replace(x,k);E[d]=new _(d,1,!1,u,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(u){E[u]=new _(u,1,!1,u.toLowerCase(),null,!1,!1)}),E.xlinkHref=new _("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(u){E[u]=new _(u,1,!1,u.toLowerCase(),null,!0,!0)});function A(u,d,g,w){var C=E.hasOwnProperty(d)?E[d]:null;(C!==null?C.type!==0:w||!(2<d.length)||d[0]!=="o"&&d[0]!=="O"||d[1]!=="n"&&d[1]!=="N")&&(v(d,g,C,w)&&(g=null),w||C===null?m(d)&&(g===null?u.removeAttribute(d):u.setAttribute(d,""+g)):C.mustUseProperty?u[C.propertyName]=g===null?C.type===3?!1:"":g:(d=C.attributeName,w=C.attributeNamespace,g===null?u.removeAttribute(d):(C=C.type,g=C===3||C===4&&g===!0?"":""+g,w?u.setAttributeNS(w,d,g):u.setAttribute(d,g))))}var S=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,O=Symbol.for("react.element"),P=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),L=Symbol.for("react.strict_mode"),M=Symbol.for("react.profiler"),F=Symbol.for("react.provider"),q=Symbol.for("react.context"),K=Symbol.for("react.forward_ref"),te=Symbol.for("react.suspense"),ve=Symbol.for("react.suspense_list"),Se=Symbol.for("react.memo"),_e=Symbol.for("react.lazy"),be=Symbol.for("react.offscreen"),he=Symbol.iterator;function ce(u){return u===null||typeof u!="object"?null:(u=he&&u[he]||u["@@iterator"],typeof u=="function"?u:null)}var le=Object.assign,U;function re(u){if(U===void 0)try{throw Error()}catch(g){var d=g.stack.trim().match(/\n( *(at )?)/);U=d&&d[1]||""}return`
`+U+u}var Be=!1;function He(u,d){if(!u||Be)return"";Be=!0;var g=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(d)if(d=function(){throw Error()},Object.defineProperty(d.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(d,[])}catch(ne){var w=ne}Reflect.construct(u,[],d)}else{try{d.call()}catch(ne){w=ne}u.call(d.prototype)}else{try{throw Error()}catch(ne){w=ne}u()}}catch(ne){if(ne&&w&&typeof ne.stack=="string"){for(var C=ne.stack.split(`
`),T=w.stack.split(`
`),I=C.length-1,D=T.length-1;1<=I&&0<=D&&C[I]!==T[D];)D--;for(;1<=I&&0<=D;I--,D--)if(C[I]!==T[D]){if(I!==1||D!==1)do if(I--,D--,0>D||C[I]!==T[D]){var H=`
`+C[I].replace(" at new "," at ");return u.displayName&&H.includes("<anonymous>")&&(H=H.replace("<anonymous>",u.displayName)),H}while(1<=I&&0<=D);break}}}finally{Be=!1,Error.prepareStackTrace=g}return(u=u?u.displayName||u.name:"")?re(u):""}function fe(u){switch(u.tag){case 5:return re(u.type);case 16:return re("Lazy");case 13:return re("Suspense");case 19:return re("SuspenseList");case 0:case 2:case 15:return u=He(u.type,!1),u;case 11:return u=He(u.type.render,!1),u;case 1:return u=He(u.type,!0),u;default:return""}}function Ue(u){if(u==null)return null;if(typeof u=="function")return u.displayName||u.name||null;if(typeof u=="string")return u;switch(u){case N:return"Fragment";case P:return"Portal";case M:return"Profiler";case L:return"StrictMode";case te:return"Suspense";case ve:return"SuspenseList"}if(typeof u=="object")switch(u.$$typeof){case q:return(u.displayName||"Context")+".Consumer";case F:return(u._context.displayName||"Context")+".Provider";case K:var d=u.render;return u=u.displayName,u||(u=d.displayName||d.name||"",u=u!==""?"ForwardRef("+u+")":"ForwardRef"),u;case Se:return d=u.displayName||null,d!==null?d:Ue(u.type)||"Memo";case _e:d=u._payload,u=u._init;try{return Ue(u(d))}catch{}}return null}function ut(u){var d=u.type;switch(u.tag){case 24:return"Cache";case 9:return(d.displayName||"Context")+".Consumer";case 10:return(d._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return u=d.render,u=u.displayName||u.name||"",d.displayName||(u!==""?"ForwardRef("+u+")":"ForwardRef");case 7:return"Fragment";case 5:return d;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ue(d);case 8:return d===L?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof d=="function")return d.displayName||d.name||null;if(typeof d=="string")return d}return null}function et(u){switch(typeof u){case"boolean":case"number":case"string":case"undefined":return u;case"object":return u;default:return""}}function ht(u){var d=u.type;return(u=u.nodeName)&&u.toLowerCase()==="input"&&(d==="checkbox"||d==="radio")}function bt(u){var d=ht(u)?"checked":"value",g=Object.getOwnPropertyDescriptor(u.constructor.prototype,d),w=""+u[d];if(!u.hasOwnProperty(d)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var C=g.get,T=g.set;return Object.defineProperty(u,d,{configurable:!0,get:function(){return C.call(this)},set:function(I){w=""+I,T.call(this,I)}}),Object.defineProperty(u,d,{enumerable:g.enumerable}),{getValue:function(){return w},setValue:function(I){w=""+I},stopTracking:function(){u._valueTracker=null,delete u[d]}}}}function zt(u){u._valueTracker||(u._valueTracker=bt(u))}function vn(u){if(!u)return!1;var d=u._valueTracker;if(!d)return!0;var g=d.getValue(),w="";return u&&(w=ht(u)?u.checked?"true":"false":u.value),u=w,u!==g?(d.setValue(u),!0):!1}function Dn(u){if(u=u||(typeof document<"u"?document:void 0),typeof u>"u")return null;try{return u.activeElement||u.body}catch{return u.body}}function kn(u,d){var g=d.checked;return le({},d,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:g??u._wrapperState.initialChecked})}function Jn(u,d){var g=d.defaultValue==null?"":d.defaultValue,w=d.checked!=null?d.checked:d.defaultChecked;g=et(d.value!=null?d.value:g),u._wrapperState={initialChecked:w,initialValue:g,controlled:d.type==="checkbox"||d.type==="radio"?d.checked!=null:d.value!=null}}function Ji(u,d){d=d.checked,d!=null&&A(u,"checked",d,!1)}function Qn(u,d){Ji(u,d);var g=et(d.value),w=d.type;if(g!=null)w==="number"?(g===0&&u.value===""||u.value!=g)&&(u.value=""+g):u.value!==""+g&&(u.value=""+g);else if(w==="submit"||w==="reset"){u.removeAttribute("value");return}d.hasOwnProperty("value")?X(u,d.type,g):d.hasOwnProperty("defaultValue")&&X(u,d.type,et(d.defaultValue)),d.checked==null&&d.defaultChecked!=null&&(u.defaultChecked=!!d.defaultChecked)}function z(u,d,g){if(d.hasOwnProperty("value")||d.hasOwnProperty("defaultValue")){var w=d.type;if(!(w!=="submit"&&w!=="reset"||d.value!==void 0&&d.value!==null))return;d=""+u._wrapperState.initialValue,g||d===u.value||(u.value=d),u.defaultValue=d}g=u.name,g!==""&&(u.name=""),u.defaultChecked=!!u._wrapperState.initialChecked,g!==""&&(u.name=g)}function X(u,d,g){(d!=="number"||Dn(u.ownerDocument)!==u)&&(g==null?u.defaultValue=""+u._wrapperState.initialValue:u.defaultValue!==""+g&&(u.defaultValue=""+g))}var se=Array.isArray;function xe(u,d,g,w){if(u=u.options,d){d={};for(var C=0;C<g.length;C++)d["$"+g[C]]=!0;for(g=0;g<u.length;g++)C=d.hasOwnProperty("$"+u[g].value),u[g].selected!==C&&(u[g].selected=C),C&&w&&(u[g].defaultSelected=!0)}else{for(g=""+et(g),d=null,C=0;C<u.length;C++){if(u[C].value===g){u[C].selected=!0,w&&(u[C].defaultSelected=!0);return}d!==null||u[C].disabled||(d=u[C])}d!==null&&(d.selected=!0)}}function Ee(u,d){if(d.dangerouslySetInnerHTML!=null)throw Error(e(91));return le({},d,{value:void 0,defaultValue:void 0,children:""+u._wrapperState.initialValue})}function ue(u,d){var g=d.value;if(g==null){if(g=d.children,d=d.defaultValue,g!=null){if(d!=null)throw Error(e(92));if(se(g)){if(1<g.length)throw Error(e(93));g=g[0]}d=g}d==null&&(d=""),g=d}u._wrapperState={initialValue:et(g)}}function Me(u,d){var g=et(d.value),w=et(d.defaultValue);g!=null&&(g=""+g,g!==u.value&&(u.value=g),d.defaultValue==null&&u.defaultValue!==g&&(u.defaultValue=g)),w!=null&&(u.defaultValue=""+w)}function Qe(u){var d=u.textContent;d===u._wrapperState.initialValue&&d!==""&&d!==null&&(u.value=d)}function Ne(u){switch(u){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Le(u,d){return u==null||u==="http://www.w3.org/1999/xhtml"?Ne(d):u==="http://www.w3.org/2000/svg"&&d==="foreignObject"?"http://www.w3.org/1999/xhtml":u}var je,Et=function(u){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(d,g,w,C){MSApp.execUnsafeLocalFunction(function(){return u(d,g,w,C)})}:u}(function(u,d){if(u.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in u)u.innerHTML=d;else{for(je=je||document.createElement("div"),je.innerHTML="<svg>"+d.valueOf().toString()+"</svg>",d=je.firstChild;u.firstChild;)u.removeChild(u.firstChild);for(;d.firstChild;)u.appendChild(d.firstChild)}});function cn(u,d){if(d){var g=u.firstChild;if(g&&g===u.lastChild&&g.nodeType===3){g.nodeValue=d;return}}u.textContent=d}var It={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},yt=["Webkit","ms","Moz","O"];Object.keys(It).forEach(function(u){yt.forEach(function(d){d=d+u.charAt(0).toUpperCase()+u.substring(1),It[d]=It[u]})});function Je(u,d,g){return d==null||typeof d=="boolean"||d===""?"":g||typeof d!="number"||d===0||It.hasOwnProperty(u)&&It[u]?(""+d).trim():d+"px"}function Sn(u,d){u=u.style;for(var g in d)if(d.hasOwnProperty(g)){var w=g.indexOf("--")===0,C=Je(g,d[g],w);g==="float"&&(g="cssFloat"),w?u.setProperty(g,C):u[g]=C}}var Qi=le({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ni(u,d){if(d){if(Qi[u]&&(d.children!=null||d.dangerouslySetInnerHTML!=null))throw Error(e(137,u));if(d.dangerouslySetInnerHTML!=null){if(d.children!=null)throw Error(e(60));if(typeof d.dangerouslySetInnerHTML!="object"||!("__html"in d.dangerouslySetInnerHTML))throw Error(e(61))}if(d.style!=null&&typeof d.style!="object")throw Error(e(62))}}function Xs(u,d){if(u.indexOf("-")===-1)return typeof d.is=="string";switch(u){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var mo=null;function Or(u){return u=u.target||u.srcElement||window,u.correspondingUseElement&&(u=u.correspondingUseElement),u.nodeType===3?u.parentNode:u}var ta=null,ks=null,Js=null;function na(u){if(u=Td(u)){if(typeof ta!="function")throw Error(e(280));var d=u.stateNode;d&&(d=pm(d),ta(u.stateNode,u.type,d))}}function Nr(u){ks?Js?Js.push(u):Js=[u]:ks=u}function Mr(){if(ks){var u=ks,d=Js;if(Js=ks=null,na(u),d)for(u=0;u<d.length;u++)na(d[u])}}function Ja(u,d){return u(d)}function Qa(){}var j=!1;function G(u,d,g){if(j)return u(d,g);j=!0;try{return Ja(u,d,g)}finally{j=!1,(ks!==null||Js!==null)&&(Qa(),Mr())}}function Q(u,d){var g=u.stateNode;if(g===null)return null;var w=pm(g);if(w===null)return null;g=w[d];e:switch(d){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(w=!w.disabled)||(u=u.type,w=!(u==="button"||u==="input"||u==="select"||u==="textarea")),u=!w;break e;default:u=!1}if(u)return null;if(g&&typeof g!="function")throw Error(e(231,d,typeof g));return g}var me=!1;if(a)try{var Ae={};Object.defineProperty(Ae,"passive",{get:function(){me=!0}}),window.addEventListener("test",Ae,Ae),window.removeEventListener("test",Ae,Ae)}catch{me=!1}function Ye(u,d,g,w,C,T,I,D,H){var ne=Array.prototype.slice.call(arguments,3);try{d.apply(g,ne)}catch(we){this.onError(we)}}var tt=!1,Ve=null,$e=!1,Ie=null,dt={onError:function(u){tt=!0,Ve=u}};function pt(u,d,g,w,C,T,I,D,H){tt=!1,Ve=null,Ye.apply(dt,arguments)}function jt(u,d,g,w,C,T,I,D,H){if(pt.apply(this,arguments),tt){if(tt){var ne=Ve;tt=!1,Ve=null}else throw Error(e(198));$e||($e=!0,Ie=ne)}}function qt(u){var d=u,g=u;if(u.alternate)for(;d.return;)d=d.return;else{u=d;do d=u,d.flags&4098&&(g=d.return),u=d.return;while(u)}return d.tag===3?g:null}function Ht(u){if(u.tag===13){var d=u.memoizedState;if(d===null&&(u=u.alternate,u!==null&&(d=u.memoizedState)),d!==null)return d.dehydrated}return null}function At(u){if(qt(u)!==u)throw Error(e(188))}function un(u){var d=u.alternate;if(!d){if(d=qt(u),d===null)throw Error(e(188));return d!==u?null:u}for(var g=u,w=d;;){var C=g.return;if(C===null)break;var T=C.alternate;if(T===null){if(w=C.return,w!==null){g=w;continue}break}if(C.child===T.child){for(T=C.child;T;){if(T===g)return At(C),u;if(T===w)return At(C),d;T=T.sibling}throw Error(e(188))}if(g.return!==w.return)g=C,w=T;else{for(var I=!1,D=C.child;D;){if(D===g){I=!0,g=C,w=T;break}if(D===w){I=!0,w=C,g=T;break}D=D.sibling}if(!I){for(D=T.child;D;){if(D===g){I=!0,g=T,w=C;break}if(D===w){I=!0,w=T,g=C;break}D=D.sibling}if(!I)throw Error(e(189))}}if(g.alternate!==w)throw Error(e(190))}if(g.tag!==3)throw Error(e(188));return g.stateNode.current===g?u:d}function Ss(u){return u=un(u),u!==null?Qs(u):null}function Qs(u){if(u.tag===5||u.tag===6)return u;for(u=u.child;u!==null;){var d=Qs(u);if(d!==null)return d;u=u.sibling}return null}var Mi=t.unstable_scheduleCallback,li=t.unstable_cancelCallback,ia=t.unstable_shouldYield,Lr=t.unstable_requestPaint,Nt=t.unstable_now,sa=t.unstable_getCurrentPriorityLevel,Vr=t.unstable_ImmediatePriority,Mt=t.unstable_UserBlockingPriority,dn=t.unstable_NormalPriority,ra=t.unstable_LowPriority,Dr=t.unstable_IdlePriority,Gt=null,Bn=null;function fc(u){if(Bn&&typeof Bn.onCommitFiberRoot=="function")try{Bn.onCommitFiberRoot(Gt,u,void 0,(u.current.flags&128)===128)}catch{}}var _i=Math.clz32?Math.clz32:xw,Ew=Math.log,Cw=Math.LN2;function xw(u){return u>>>=0,u===0?32:31-(Ew(u)/Cw|0)|0}var mc=64,gc=4194304;function el(u){switch(u&-u){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return u&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return u}}function pc(u,d){var g=u.pendingLanes;if(g===0)return 0;var w=0,C=u.suspendedLanes,T=u.pingedLanes,I=g&268435455;if(I!==0){var D=I&~C;D!==0?w=el(D):(T&=I,T!==0&&(w=el(T)))}else I=g&~C,I!==0?w=el(I):T!==0&&(w=el(T));if(w===0)return 0;if(d!==0&&d!==w&&!(d&C)&&(C=w&-w,T=d&-d,C>=T||C===16&&(T&4194240)!==0))return d;if(w&4&&(w|=g&16),d=u.entangledLanes,d!==0)for(u=u.entanglements,d&=w;0<d;)g=31-_i(d),C=1<<g,w|=u[g],d&=~C;return w}function Tw(u,d){switch(u){case 1:case 2:case 4:return d+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function kw(u,d){for(var g=u.suspendedLanes,w=u.pingedLanes,C=u.expirationTimes,T=u.pendingLanes;0<T;){var I=31-_i(T),D=1<<I,H=C[I];H===-1?(!(D&g)||D&w)&&(C[I]=Tw(D,d)):H<=d&&(u.expiredLanes|=D),T&=~D}}function ad(u){return u=u.pendingLanes&-1073741825,u!==0?u:u&1073741824?1073741824:0}function Zf(){var u=mc;return mc<<=1,!(mc&4194240)&&(mc=64),u}function ld(u){for(var d=[],g=0;31>g;g++)d.push(u);return d}function tl(u,d,g){u.pendingLanes|=d,d!==536870912&&(u.suspendedLanes=0,u.pingedLanes=0),u=u.eventTimes,d=31-_i(d),u[d]=g}function Sw(u,d){var g=u.pendingLanes&~d;u.pendingLanes=d,u.suspendedLanes=0,u.pingedLanes=0,u.expiredLanes&=d,u.mutableReadLanes&=d,u.entangledLanes&=d,d=u.entanglements;var w=u.eventTimes;for(u=u.expirationTimes;0<g;){var C=31-_i(g),T=1<<C;d[C]=0,w[C]=-1,u[C]=-1,g&=~T}}function cd(u,d){var g=u.entangledLanes|=d;for(u=u.entanglements;g;){var w=31-_i(g),C=1<<w;C&d|u[w]&d&&(u[w]|=d),g&=~C}}var Lt=0;function Xf(u){return u&=-u,1<u?4<u?u&268435455?16:536870912:4:1}var Jf,ud,Qf,em,tm,dd=!1,bc=[],Br=null,Fr=null,$r=null,nl=new Map,il=new Map,zr=[],Aw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function nm(u,d){switch(u){case"focusin":case"focusout":Br=null;break;case"dragenter":case"dragleave":Fr=null;break;case"mouseover":case"mouseout":$r=null;break;case"pointerover":case"pointerout":nl.delete(d.pointerId);break;case"gotpointercapture":case"lostpointercapture":il.delete(d.pointerId)}}function sl(u,d,g,w,C,T){return u===null||u.nativeEvent!==T?(u={blockedOn:d,domEventName:g,eventSystemFlags:w,nativeEvent:T,targetContainers:[C]},d!==null&&(d=Td(d),d!==null&&ud(d)),u):(u.eventSystemFlags|=w,d=u.targetContainers,C!==null&&d.indexOf(C)===-1&&d.push(C),u)}function im(u,d,g,w,C){switch(d){case"focusin":return Br=sl(Br,u,d,g,w,C),!0;case"dragenter":return Fr=sl(Fr,u,d,g,w,C),!0;case"mouseover":return $r=sl($r,u,d,g,w,C),!0;case"pointerover":var T=C.pointerId;return nl.set(T,sl(nl.get(T)||null,u,d,g,w,C)),!0;case"gotpointercapture":return T=C.pointerId,il.set(T,sl(il.get(T)||null,u,d,g,w,C)),!0}return!1}function sm(u){var d=rl(u.target);if(d!==null){var g=qt(d);if(g!==null){if(d=g.tag,d===13){if(d=Ht(g),d!==null){u.blockedOn=d,tm(u.priority,function(){Qf(g)});return}}else if(d===3&&g.stateNode.current.memoizedState.isDehydrated){u.blockedOn=g.tag===3?g.stateNode.containerInfo:null;return}}}u.blockedOn=null}function Y(u){if(u.blockedOn!==null)return!1;for(var d=u.targetContainers;0<d.length;){var g=yc(u.domEventName,u.eventSystemFlags,d[0],u.nativeEvent);if(g===null){g=u.nativeEvent;var w=new g.constructor(g.type,g);mo=w,g.target.dispatchEvent(w),mo=null}else return d=Td(g),d!==null&&ud(d),u.blockedOn=g,!1;d.shift()}return!0}function V(u,d,g){Y(u)&&g.delete(d)}function $(){dd=!1,Br!==null&&Y(Br)&&(Br=null),Fr!==null&&Y(Fr)&&(Fr=null),$r!==null&&Y($r)&&($r=null),nl.forEach(V),il.forEach(V)}function oe(u,d){u.blockedOn===d&&(u.blockedOn=null,dd||(dd=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,$)))}function ge(u){function d(C){return oe(C,u)}if(0<bc.length){oe(bc[0],u);for(var g=1;g<bc.length;g++){var w=bc[g];w.blockedOn===u&&(w.blockedOn=null)}}for(Br!==null&&oe(Br,u),Fr!==null&&oe(Fr,u),$r!==null&&oe($r,u),nl.forEach(d),il.forEach(d),g=0;g<zr.length;g++)w=zr[g],w.blockedOn===u&&(w.blockedOn=null);for(;0<zr.length&&(g=zr[0],g.blockedOn===null);)sm(g),g.blockedOn===null&&zr.shift()}var mt=S.ReactCurrentBatchConfig,en=!0;function ci(u,d,g,w){var C=Lt,T=mt.transition;mt.transition=null;try{Lt=1,hd(u,d,g,w)}finally{Lt=C,mt.transition=T}}function wc(u,d,g,w){var C=Lt,T=mt.transition;mt.transition=null;try{Lt=4,hd(u,d,g,w)}finally{Lt=C,mt.transition=T}}function hd(u,d,g,w){if(en){var C=yc(u,d,g,w);if(C===null)Uw(u,d,w,vc,g),nm(u,w);else if(im(C,u,d,g,w))w.stopPropagation();else if(nm(u,w),d&4&&-1<Aw.indexOf(u)){for(;C!==null;){var T=Td(C);if(T!==null&&Jf(T),T=yc(u,d,g,w),T===null&&Uw(u,d,w,vc,g),T===C)break;C=T}C!==null&&w.stopPropagation()}else Uw(u,d,w,null,g)}}var vc=null;function yc(u,d,g,w){if(vc=null,u=Or(w),u=rl(u),u!==null)if(d=qt(u),d===null)u=null;else if(g=d.tag,g===13){if(u=Ht(d),u!==null)return u;u=null}else if(g===3){if(d.stateNode.current.memoizedState.isDehydrated)return d.tag===3?d.stateNode.containerInfo:null;u=null}else d!==u&&(u=null);return vc=u,null}function fd(u){switch(u){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(sa()){case Vr:return 1;case Mt:return 4;case dn:case ra:return 16;case Dr:return 536870912;default:return 16}default:return 16}}var er=null,_c=null,rm=null;function qC(){if(rm)return rm;var u,d=_c,g=d.length,w,C="value"in er?er.value:er.textContent,T=C.length;for(u=0;u<g&&d[u]===C[u];u++);var I=g-u;for(w=1;w<=I&&d[g-w]===C[T-w];w++);return rm=C.slice(u,1<w?1-w:void 0)}function om(u){var d=u.keyCode;return"charCode"in u?(u=u.charCode,u===0&&d===13&&(u=13)):u=d,u===10&&(u=13),32<=u||u===13?u:0}function am(){return!0}function GC(){return!1}function es(u){function d(g,w,C,T,I){this._reactName=g,this._targetInst=C,this.type=w,this.nativeEvent=T,this.target=I,this.currentTarget=null;for(var D in u)u.hasOwnProperty(D)&&(g=u[D],this[D]=g?g(T):T[D]);return this.isDefaultPrevented=(T.defaultPrevented!=null?T.defaultPrevented:T.returnValue===!1)?am:GC,this.isPropagationStopped=GC,this}return le(d.prototype,{preventDefault:function(){this.defaultPrevented=!0;var g=this.nativeEvent;g&&(g.preventDefault?g.preventDefault():typeof g.returnValue!="unknown"&&(g.returnValue=!1),this.isDefaultPrevented=am)},stopPropagation:function(){var g=this.nativeEvent;g&&(g.stopPropagation?g.stopPropagation():typeof g.cancelBubble!="unknown"&&(g.cancelBubble=!0),this.isPropagationStopped=am)},persist:function(){},isPersistent:am}),d}var Ec={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(u){return u.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Pw=es(Ec),md=le({},Ec,{view:0,detail:0}),_D=es(md),Iw,Rw,gd,lm=le({},md,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Nw,button:0,buttons:0,relatedTarget:function(u){return u.relatedTarget===void 0?u.fromElement===u.srcElement?u.toElement:u.fromElement:u.relatedTarget},movementX:function(u){return"movementX"in u?u.movementX:(u!==gd&&(gd&&u.type==="mousemove"?(Iw=u.screenX-gd.screenX,Rw=u.screenY-gd.screenY):Rw=Iw=0,gd=u),Iw)},movementY:function(u){return"movementY"in u?u.movementY:Rw}}),KC=es(lm),ED=le({},lm,{dataTransfer:0}),CD=es(ED),xD=le({},md,{relatedTarget:0}),Ow=es(xD),TD=le({},Ec,{animationName:0,elapsedTime:0,pseudoElement:0}),kD=es(TD),SD=le({},Ec,{clipboardData:function(u){return"clipboardData"in u?u.clipboardData:window.clipboardData}}),AD=es(SD),PD=le({},Ec,{data:0}),YC=es(PD),ID={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},RD={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},OD={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ND(u){var d=this.nativeEvent;return d.getModifierState?d.getModifierState(u):(u=OD[u])?!!d[u]:!1}function Nw(){return ND}var MD=le({},md,{key:function(u){if(u.key){var d=ID[u.key]||u.key;if(d!=="Unidentified")return d}return u.type==="keypress"?(u=om(u),u===13?"Enter":String.fromCharCode(u)):u.type==="keydown"||u.type==="keyup"?RD[u.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Nw,charCode:function(u){return u.type==="keypress"?om(u):0},keyCode:function(u){return u.type==="keydown"||u.type==="keyup"?u.keyCode:0},which:function(u){return u.type==="keypress"?om(u):u.type==="keydown"||u.type==="keyup"?u.keyCode:0}}),LD=es(MD),VD=le({},lm,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ZC=es(VD),DD=le({},md,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Nw}),BD=es(DD),FD=le({},Ec,{propertyName:0,elapsedTime:0,pseudoElement:0}),$D=es(FD),zD=le({},lm,{deltaX:function(u){return"deltaX"in u?u.deltaX:"wheelDeltaX"in u?-u.wheelDeltaX:0},deltaY:function(u){return"deltaY"in u?u.deltaY:"wheelDeltaY"in u?-u.wheelDeltaY:"wheelDelta"in u?-u.wheelDelta:0},deltaZ:0,deltaMode:0}),jD=es(zD),HD=[9,13,27,32],Mw=a&&"CompositionEvent"in window,pd=null;a&&"documentMode"in document&&(pd=document.documentMode);var UD=a&&"TextEvent"in window&&!pd,XC=a&&(!Mw||pd&&8<pd&&11>=pd),JC=" ",QC=!1;function ex(u,d){switch(u){case"keyup":return HD.indexOf(d.keyCode)!==-1;case"keydown":return d.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function tx(u){return u=u.detail,typeof u=="object"&&"data"in u?u.data:null}var Cc=!1;function WD(u,d){switch(u){case"compositionend":return tx(d);case"keypress":return d.which!==32?null:(QC=!0,JC);case"textInput":return u=d.data,u===JC&&QC?null:u;default:return null}}function qD(u,d){if(Cc)return u==="compositionend"||!Mw&&ex(u,d)?(u=qC(),rm=_c=er=null,Cc=!1,u):null;switch(u){case"paste":return null;case"keypress":if(!(d.ctrlKey||d.altKey||d.metaKey)||d.ctrlKey&&d.altKey){if(d.char&&1<d.char.length)return d.char;if(d.which)return String.fromCharCode(d.which)}return null;case"compositionend":return XC&&d.locale!=="ko"?null:d.data;default:return null}}var GD={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function nx(u){var d=u&&u.nodeName&&u.nodeName.toLowerCase();return d==="input"?!!GD[u.type]:d==="textarea"}function ix(u,d,g,w){Nr(w),d=fm(d,"onChange"),0<d.length&&(g=new Pw("onChange","change",null,g,w),u.push({event:g,listeners:d}))}var bd=null,wd=null;function KD(u){_x(u,0)}function cm(u){var d=Ac(u);if(vn(d))return u}function YD(u,d){if(u==="change")return d}var sx=!1;if(a){var Lw;if(a){var Vw="oninput"in document;if(!Vw){var rx=document.createElement("div");rx.setAttribute("oninput","return;"),Vw=typeof rx.oninput=="function"}Lw=Vw}else Lw=!1;sx=Lw&&(!document.documentMode||9<document.documentMode)}function ox(){bd&&(bd.detachEvent("onpropertychange",ax),wd=bd=null)}function ax(u){if(u.propertyName==="value"&&cm(wd)){var d=[];ix(d,wd,u,Or(u)),G(KD,d)}}function ZD(u,d,g){u==="focusin"?(ox(),bd=d,wd=g,bd.attachEvent("onpropertychange",ax)):u==="focusout"&&ox()}function XD(u){if(u==="selectionchange"||u==="keyup"||u==="keydown")return cm(wd)}function JD(u,d){if(u==="click")return cm(d)}function QD(u,d){if(u==="input"||u==="change")return cm(d)}function e6(u,d){return u===d&&(u!==0||1/u===1/d)||u!==u&&d!==d}var tr=typeof Object.is=="function"?Object.is:e6;function vd(u,d){if(tr(u,d))return!0;if(typeof u!="object"||u===null||typeof d!="object"||d===null)return!1;var g=Object.keys(u),w=Object.keys(d);if(g.length!==w.length)return!1;for(w=0;w<g.length;w++){var C=g[w];if(!l.call(d,C)||!tr(u[C],d[C]))return!1}return!0}function lx(u){for(;u&&u.firstChild;)u=u.firstChild;return u}function cx(u,d){var g=lx(u);u=0;for(var w;g;){if(g.nodeType===3){if(w=u+g.textContent.length,u<=d&&w>=d)return{node:g,offset:d-u};u=w}e:{for(;g;){if(g.nextSibling){g=g.nextSibling;break e}g=g.parentNode}g=void 0}g=lx(g)}}function ux(u,d){return u&&d?u===d?!0:u&&u.nodeType===3?!1:d&&d.nodeType===3?ux(u,d.parentNode):"contains"in u?u.contains(d):u.compareDocumentPosition?!!(u.compareDocumentPosition(d)&16):!1:!1}function dx(){for(var u=window,d=Dn();d instanceof u.HTMLIFrameElement;){try{var g=typeof d.contentWindow.location.href=="string"}catch{g=!1}if(g)u=d.contentWindow;else break;d=Dn(u.document)}return d}function Dw(u){var d=u&&u.nodeName&&u.nodeName.toLowerCase();return d&&(d==="input"&&(u.type==="text"||u.type==="search"||u.type==="tel"||u.type==="url"||u.type==="password")||d==="textarea"||u.contentEditable==="true")}function t6(u){var d=dx(),g=u.focusedElem,w=u.selectionRange;if(d!==g&&g&&g.ownerDocument&&ux(g.ownerDocument.documentElement,g)){if(w!==null&&Dw(g)){if(d=w.start,u=w.end,u===void 0&&(u=d),"selectionStart"in g)g.selectionStart=d,g.selectionEnd=Math.min(u,g.value.length);else if(u=(d=g.ownerDocument||document)&&d.defaultView||window,u.getSelection){u=u.getSelection();var C=g.textContent.length,T=Math.min(w.start,C);w=w.end===void 0?T:Math.min(w.end,C),!u.extend&&T>w&&(C=w,w=T,T=C),C=cx(g,T);var I=cx(g,w);C&&I&&(u.rangeCount!==1||u.anchorNode!==C.node||u.anchorOffset!==C.offset||u.focusNode!==I.node||u.focusOffset!==I.offset)&&(d=d.createRange(),d.setStart(C.node,C.offset),u.removeAllRanges(),T>w?(u.addRange(d),u.extend(I.node,I.offset)):(d.setEnd(I.node,I.offset),u.addRange(d)))}}for(d=[],u=g;u=u.parentNode;)u.nodeType===1&&d.push({element:u,left:u.scrollLeft,top:u.scrollTop});for(typeof g.focus=="function"&&g.focus(),g=0;g<d.length;g++)u=d[g],u.element.scrollLeft=u.left,u.element.scrollTop=u.top}}var n6=a&&"documentMode"in document&&11>=document.documentMode,xc=null,Bw=null,yd=null,Fw=!1;function hx(u,d,g){var w=g.window===g?g.document:g.nodeType===9?g:g.ownerDocument;Fw||xc==null||xc!==Dn(w)||(w=xc,"selectionStart"in w&&Dw(w)?w={start:w.selectionStart,end:w.selectionEnd}:(w=(w.ownerDocument&&w.ownerDocument.defaultView||window).getSelection(),w={anchorNode:w.anchorNode,anchorOffset:w.anchorOffset,focusNode:w.focusNode,focusOffset:w.focusOffset}),yd&&vd(yd,w)||(yd=w,w=fm(Bw,"onSelect"),0<w.length&&(d=new Pw("onSelect","select",null,d,g),u.push({event:d,listeners:w}),d.target=xc)))}function um(u,d){var g={};return g[u.toLowerCase()]=d.toLowerCase(),g["Webkit"+u]="webkit"+d,g["Moz"+u]="moz"+d,g}var Tc={animationend:um("Animation","AnimationEnd"),animationiteration:um("Animation","AnimationIteration"),animationstart:um("Animation","AnimationStart"),transitionend:um("Transition","TransitionEnd")},$w={},fx={};a&&(fx=document.createElement("div").style,"AnimationEvent"in window||(delete Tc.animationend.animation,delete Tc.animationiteration.animation,delete Tc.animationstart.animation),"TransitionEvent"in window||delete Tc.transitionend.transition);function dm(u){if($w[u])return $w[u];if(!Tc[u])return u;var d=Tc[u],g;for(g in d)if(d.hasOwnProperty(g)&&g in fx)return $w[u]=d[g];return u}var mx=dm("animationend"),gx=dm("animationiteration"),px=dm("animationstart"),bx=dm("transitionend"),wx=new Map,vx="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function oa(u,d){wx.set(u,d),r(d,[u])}for(var zw=0;zw<vx.length;zw++){var jw=vx[zw],i6=jw.toLowerCase(),s6=jw[0].toUpperCase()+jw.slice(1);oa(i6,"on"+s6)}oa(mx,"onAnimationEnd"),oa(gx,"onAnimationIteration"),oa(px,"onAnimationStart"),oa("dblclick","onDoubleClick"),oa("focusin","onFocus"),oa("focusout","onBlur"),oa(bx,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),r("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),r("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),r("onBeforeInput",["compositionend","keypress","textInput","paste"]),r("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),r("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),r("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _d="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),r6=new Set("cancel close invalid load scroll toggle".split(" ").concat(_d));function yx(u,d,g){var w=u.type||"unknown-event";u.currentTarget=g,jt(w,d,void 0,u),u.currentTarget=null}function _x(u,d){d=(d&4)!==0;for(var g=0;g<u.length;g++){var w=u[g],C=w.event;w=w.listeners;e:{var T=void 0;if(d)for(var I=w.length-1;0<=I;I--){var D=w[I],H=D.instance,ne=D.currentTarget;if(D=D.listener,H!==T&&C.isPropagationStopped())break e;yx(C,D,ne),T=H}else for(I=0;I<w.length;I++){if(D=w[I],H=D.instance,ne=D.currentTarget,D=D.listener,H!==T&&C.isPropagationStopped())break e;yx(C,D,ne),T=H}}}if($e)throw u=Ie,$e=!1,Ie=null,u}function tn(u,d){var g=d[Zw];g===void 0&&(g=d[Zw]=new Set);var w=u+"__bubble";g.has(w)||(Ex(d,u,2,!1),g.add(w))}function Hw(u,d,g){var w=0;d&&(w|=4),Ex(g,u,w,d)}var hm="_reactListening"+Math.random().toString(36).slice(2);function Ed(u){if(!u[hm]){u[hm]=!0,n.forEach(function(g){g!=="selectionchange"&&(r6.has(g)||Hw(g,!1,u),Hw(g,!0,u))});var d=u.nodeType===9?u:u.ownerDocument;d===null||d[hm]||(d[hm]=!0,Hw("selectionchange",!1,d))}}function Ex(u,d,g,w){switch(fd(d)){case 1:var C=ci;break;case 4:C=wc;break;default:C=hd}g=C.bind(null,d,g,u),C=void 0,!me||d!=="touchstart"&&d!=="touchmove"&&d!=="wheel"||(C=!0),w?C!==void 0?u.addEventListener(d,g,{capture:!0,passive:C}):u.addEventListener(d,g,!0):C!==void 0?u.addEventListener(d,g,{passive:C}):u.addEventListener(d,g,!1)}function Uw(u,d,g,w,C){var T=w;if(!(d&1)&&!(d&2)&&w!==null)e:for(;;){if(w===null)return;var I=w.tag;if(I===3||I===4){var D=w.stateNode.containerInfo;if(D===C||D.nodeType===8&&D.parentNode===C)break;if(I===4)for(I=w.return;I!==null;){var H=I.tag;if((H===3||H===4)&&(H=I.stateNode.containerInfo,H===C||H.nodeType===8&&H.parentNode===C))return;I=I.return}for(;D!==null;){if(I=rl(D),I===null)return;if(H=I.tag,H===5||H===6){w=T=I;continue e}D=D.parentNode}}w=w.return}G(function(){var ne=T,we=Or(g),Ce=[];e:{var pe=wx.get(u);if(pe!==void 0){var De=Pw,We=u;switch(u){case"keypress":if(om(g)===0)break e;case"keydown":case"keyup":De=LD;break;case"focusin":We="focus",De=Ow;break;case"focusout":We="blur",De=Ow;break;case"beforeblur":case"afterblur":De=Ow;break;case"click":if(g.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":De=KC;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":De=CD;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":De=BD;break;case mx:case gx:case px:De=kD;break;case bx:De=$D;break;case"scroll":De=_D;break;case"wheel":De=jD;break;case"copy":case"cut":case"paste":De=AD;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":De=ZC}var Ge=(d&4)!==0,An=!Ge&&u==="scroll",Z=Ge?pe!==null?pe+"Capture":null:pe;Ge=[];for(var W=ne,J;W!==null;){J=W;var Te=J.stateNode;if(J.tag===5&&Te!==null&&(J=Te,Z!==null&&(Te=Q(W,Z),Te!=null&&Ge.push(Cd(W,Te,J)))),An)break;W=W.return}0<Ge.length&&(pe=new De(pe,We,null,g,we),Ce.push({event:pe,listeners:Ge}))}}if(!(d&7)){e:{if(pe=u==="mouseover"||u==="pointerover",De=u==="mouseout"||u==="pointerout",pe&&g!==mo&&(We=g.relatedTarget||g.fromElement)&&(rl(We)||We[go]))break e;if((De||pe)&&(pe=we.window===we?we:(pe=we.ownerDocument)?pe.defaultView||pe.parentWindow:window,De?(We=g.relatedTarget||g.toElement,De=ne,We=We?rl(We):null,We!==null&&(An=qt(We),We!==An||We.tag!==5&&We.tag!==6)&&(We=null)):(De=null,We=ne),De!==We)){if(Ge=KC,Te="onMouseLeave",Z="onMouseEnter",W="mouse",(u==="pointerout"||u==="pointerover")&&(Ge=ZC,Te="onPointerLeave",Z="onPointerEnter",W="pointer"),An=De==null?pe:Ac(De),J=We==null?pe:Ac(We),pe=new Ge(Te,W+"leave",De,g,we),pe.target=An,pe.relatedTarget=J,Te=null,rl(we)===ne&&(Ge=new Ge(Z,W+"enter",We,g,we),Ge.target=J,Ge.relatedTarget=An,Te=Ge),An=Te,De&&We)t:{for(Ge=De,Z=We,W=0,J=Ge;J;J=kc(J))W++;for(J=0,Te=Z;Te;Te=kc(Te))J++;for(;0<W-J;)Ge=kc(Ge),W--;for(;0<J-W;)Z=kc(Z),J--;for(;W--;){if(Ge===Z||Z!==null&&Ge===Z.alternate)break t;Ge=kc(Ge),Z=kc(Z)}Ge=null}else Ge=null;De!==null&&Cx(Ce,pe,De,Ge,!1),We!==null&&An!==null&&Cx(Ce,An,We,Ge,!0)}}e:{if(pe=ne?Ac(ne):window,De=pe.nodeName&&pe.nodeName.toLowerCase(),De==="select"||De==="input"&&pe.type==="file")var Ze=YD;else if(nx(pe))if(sx)Ze=QD;else{Ze=XD;var it=ZD}else(De=pe.nodeName)&&De.toLowerCase()==="input"&&(pe.type==="checkbox"||pe.type==="radio")&&(Ze=JD);if(Ze&&(Ze=Ze(u,ne))){ix(Ce,Ze,g,we);break e}it&&it(u,pe,ne),u==="focusout"&&(it=pe._wrapperState)&&it.controlled&&pe.type==="number"&&X(pe,"number",pe.value)}switch(it=ne?Ac(ne):window,u){case"focusin":(nx(it)||it.contentEditable==="true")&&(xc=it,Bw=ne,yd=null);break;case"focusout":yd=Bw=xc=null;break;case"mousedown":Fw=!0;break;case"contextmenu":case"mouseup":case"dragend":Fw=!1,hx(Ce,g,we);break;case"selectionchange":if(n6)break;case"keydown":case"keyup":hx(Ce,g,we)}var st;if(Mw)e:{switch(u){case"compositionstart":var ft="onCompositionStart";break e;case"compositionend":ft="onCompositionEnd";break e;case"compositionupdate":ft="onCompositionUpdate";break e}ft=void 0}else Cc?ex(u,g)&&(ft="onCompositionEnd"):u==="keydown"&&g.keyCode===229&&(ft="onCompositionStart");ft&&(XC&&g.locale!=="ko"&&(Cc||ft!=="onCompositionStart"?ft==="onCompositionEnd"&&Cc&&(st=qC()):(er=we,_c="value"in er?er.value:er.textContent,Cc=!0)),it=fm(ne,ft),0<it.length&&(ft=new YC(ft,u,null,g,we),Ce.push({event:ft,listeners:it}),st?ft.data=st:(st=tx(g),st!==null&&(ft.data=st)))),(st=UD?WD(u,g):qD(u,g))&&(ne=fm(ne,"onBeforeInput"),0<ne.length&&(we=new YC("onBeforeInput","beforeinput",null,g,we),Ce.push({event:we,listeners:ne}),we.data=st))}_x(Ce,d)})}function Cd(u,d,g){return{instance:u,listener:d,currentTarget:g}}function fm(u,d){for(var g=d+"Capture",w=[];u!==null;){var C=u,T=C.stateNode;C.tag===5&&T!==null&&(C=T,T=Q(u,g),T!=null&&w.unshift(Cd(u,T,C)),T=Q(u,d),T!=null&&w.push(Cd(u,T,C))),u=u.return}return w}function kc(u){if(u===null)return null;do u=u.return;while(u&&u.tag!==5);return u||null}function Cx(u,d,g,w,C){for(var T=d._reactName,I=[];g!==null&&g!==w;){var D=g,H=D.alternate,ne=D.stateNode;if(H!==null&&H===w)break;D.tag===5&&ne!==null&&(D=ne,C?(H=Q(g,T),H!=null&&I.unshift(Cd(g,H,D))):C||(H=Q(g,T),H!=null&&I.push(Cd(g,H,D)))),g=g.return}I.length!==0&&u.push({event:d,listeners:I})}var o6=/\r\n?/g,a6=/\u0000|\uFFFD/g;function xx(u){return(typeof u=="string"?u:""+u).replace(o6,`
`).replace(a6,"")}function mm(u,d,g){if(d=xx(d),xx(u)!==d&&g)throw Error(e(425))}function gm(){}var Ww=null,qw=null;function Gw(u,d){return u==="textarea"||u==="noscript"||typeof d.children=="string"||typeof d.children=="number"||typeof d.dangerouslySetInnerHTML=="object"&&d.dangerouslySetInnerHTML!==null&&d.dangerouslySetInnerHTML.__html!=null}var Kw=typeof setTimeout=="function"?setTimeout:void 0,l6=typeof clearTimeout=="function"?clearTimeout:void 0,Tx=typeof Promise=="function"?Promise:void 0,c6=typeof queueMicrotask=="function"?queueMicrotask:typeof Tx<"u"?function(u){return Tx.resolve(null).then(u).catch(u6)}:Kw;function u6(u){setTimeout(function(){throw u})}function Yw(u,d){var g=d,w=0;do{var C=g.nextSibling;if(u.removeChild(g),C&&C.nodeType===8)if(g=C.data,g==="/$"){if(w===0){u.removeChild(C),ge(d);return}w--}else g!=="$"&&g!=="$?"&&g!=="$!"||w++;g=C}while(g);ge(d)}function aa(u){for(;u!=null;u=u.nextSibling){var d=u.nodeType;if(d===1||d===3)break;if(d===8){if(d=u.data,d==="$"||d==="$!"||d==="$?")break;if(d==="/$")return null}}return u}function kx(u){u=u.previousSibling;for(var d=0;u;){if(u.nodeType===8){var g=u.data;if(g==="$"||g==="$!"||g==="$?"){if(d===0)return u;d--}else g==="/$"&&d++}u=u.previousSibling}return null}var Sc=Math.random().toString(36).slice(2),jr="__reactFiber$"+Sc,xd="__reactProps$"+Sc,go="__reactContainer$"+Sc,Zw="__reactEvents$"+Sc,d6="__reactListeners$"+Sc,h6="__reactHandles$"+Sc;function rl(u){var d=u[jr];if(d)return d;for(var g=u.parentNode;g;){if(d=g[go]||g[jr]){if(g=d.alternate,d.child!==null||g!==null&&g.child!==null)for(u=kx(u);u!==null;){if(g=u[jr])return g;u=kx(u)}return d}u=g,g=u.parentNode}return null}function Td(u){return u=u[jr]||u[go],!u||u.tag!==5&&u.tag!==6&&u.tag!==13&&u.tag!==3?null:u}function Ac(u){if(u.tag===5||u.tag===6)return u.stateNode;throw Error(e(33))}function pm(u){return u[xd]||null}var Xw=[],Pc=-1;function la(u){return{current:u}}function nn(u){0>Pc||(u.current=Xw[Pc],Xw[Pc]=null,Pc--)}function Zt(u,d){Pc++,Xw[Pc]=u.current,u.current=d}var ca={},ui=la(ca),Li=la(!1),ol=ca;function Ic(u,d){var g=u.type.contextTypes;if(!g)return ca;var w=u.stateNode;if(w&&w.__reactInternalMemoizedUnmaskedChildContext===d)return w.__reactInternalMemoizedMaskedChildContext;var C={},T;for(T in g)C[T]=d[T];return w&&(u=u.stateNode,u.__reactInternalMemoizedUnmaskedChildContext=d,u.__reactInternalMemoizedMaskedChildContext=C),C}function Vi(u){return u=u.childContextTypes,u!=null}function bm(){nn(Li),nn(ui)}function Sx(u,d,g){if(ui.current!==ca)throw Error(e(168));Zt(ui,d),Zt(Li,g)}function Ax(u,d,g){var w=u.stateNode;if(d=d.childContextTypes,typeof w.getChildContext!="function")return g;w=w.getChildContext();for(var C in w)if(!(C in d))throw Error(e(108,ut(u)||"Unknown",C));return le({},g,w)}function wm(u){return u=(u=u.stateNode)&&u.__reactInternalMemoizedMergedChildContext||ca,ol=ui.current,Zt(ui,u),Zt(Li,Li.current),!0}function Px(u,d,g){var w=u.stateNode;if(!w)throw Error(e(169));g?(u=Ax(u,d,ol),w.__reactInternalMemoizedMergedChildContext=u,nn(Li),nn(ui),Zt(ui,u)):nn(Li),Zt(Li,g)}var po=null,vm=!1,Jw=!1;function Ix(u){po===null?po=[u]:po.push(u)}function f6(u){vm=!0,Ix(u)}function ua(){if(!Jw&&po!==null){Jw=!0;var u=0,d=Lt;try{var g=po;for(Lt=1;u<g.length;u++){var w=g[u];do w=w(!0);while(w!==null)}po=null,vm=!1}catch(C){throw po!==null&&(po=po.slice(u+1)),Mi(Vr,ua),C}finally{Lt=d,Jw=!1}}return null}var Rc=[],Oc=0,ym=null,_m=0,As=[],Ps=0,al=null,bo=1,wo="";function ll(u,d){Rc[Oc++]=_m,Rc[Oc++]=ym,ym=u,_m=d}function Rx(u,d,g){As[Ps++]=bo,As[Ps++]=wo,As[Ps++]=al,al=u;var w=bo;u=wo;var C=32-_i(w)-1;w&=~(1<<C),g+=1;var T=32-_i(d)+C;if(30<T){var I=C-C%5;T=(w&(1<<I)-1).toString(32),w>>=I,C-=I,bo=1<<32-_i(d)+C|g<<C|w,wo=T+u}else bo=1<<T|g<<C|w,wo=u}function Qw(u){u.return!==null&&(ll(u,1),Rx(u,1,0))}function ev(u){for(;u===ym;)ym=Rc[--Oc],Rc[Oc]=null,_m=Rc[--Oc],Rc[Oc]=null;for(;u===al;)al=As[--Ps],As[Ps]=null,wo=As[--Ps],As[Ps]=null,bo=As[--Ps],As[Ps]=null}var ts=null,ns=null,hn=!1,nr=null;function Ox(u,d){var g=Ns(5,null,null,0);g.elementType="DELETED",g.stateNode=d,g.return=u,d=u.deletions,d===null?(u.deletions=[g],u.flags|=16):d.push(g)}function Nx(u,d){switch(u.tag){case 5:var g=u.type;return d=d.nodeType!==1||g.toLowerCase()!==d.nodeName.toLowerCase()?null:d,d!==null?(u.stateNode=d,ts=u,ns=aa(d.firstChild),!0):!1;case 6:return d=u.pendingProps===""||d.nodeType!==3?null:d,d!==null?(u.stateNode=d,ts=u,ns=null,!0):!1;case 13:return d=d.nodeType!==8?null:d,d!==null?(g=al!==null?{id:bo,overflow:wo}:null,u.memoizedState={dehydrated:d,treeContext:g,retryLane:1073741824},g=Ns(18,null,null,0),g.stateNode=d,g.return=u,u.child=g,ts=u,ns=null,!0):!1;default:return!1}}function tv(u){return(u.mode&1)!==0&&(u.flags&128)===0}function nv(u){if(hn){var d=ns;if(d){var g=d;if(!Nx(u,d)){if(tv(u))throw Error(e(418));d=aa(g.nextSibling);var w=ts;d&&Nx(u,d)?Ox(w,g):(u.flags=u.flags&-4097|2,hn=!1,ts=u)}}else{if(tv(u))throw Error(e(418));u.flags=u.flags&-4097|2,hn=!1,ts=u}}}function Mx(u){for(u=u.return;u!==null&&u.tag!==5&&u.tag!==3&&u.tag!==13;)u=u.return;ts=u}function Em(u){if(u!==ts)return!1;if(!hn)return Mx(u),hn=!0,!1;var d;if((d=u.tag!==3)&&!(d=u.tag!==5)&&(d=u.type,d=d!=="head"&&d!=="body"&&!Gw(u.type,u.memoizedProps)),d&&(d=ns)){if(tv(u))throw Lx(),Error(e(418));for(;d;)Ox(u,d),d=aa(d.nextSibling)}if(Mx(u),u.tag===13){if(u=u.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(e(317));e:{for(u=u.nextSibling,d=0;u;){if(u.nodeType===8){var g=u.data;if(g==="/$"){if(d===0){ns=aa(u.nextSibling);break e}d--}else g!=="$"&&g!=="$!"&&g!=="$?"||d++}u=u.nextSibling}ns=null}}else ns=ts?aa(u.stateNode.nextSibling):null;return!0}function Lx(){for(var u=ns;u;)u=aa(u.nextSibling)}function Nc(){ns=ts=null,hn=!1}function iv(u){nr===null?nr=[u]:nr.push(u)}var m6=S.ReactCurrentBatchConfig;function kd(u,d,g){if(u=g.ref,u!==null&&typeof u!="function"&&typeof u!="object"){if(g._owner){if(g=g._owner,g){if(g.tag!==1)throw Error(e(309));var w=g.stateNode}if(!w)throw Error(e(147,u));var C=w,T=""+u;return d!==null&&d.ref!==null&&typeof d.ref=="function"&&d.ref._stringRef===T?d.ref:(d=function(I){var D=C.refs;I===null?delete D[T]:D[T]=I},d._stringRef=T,d)}if(typeof u!="string")throw Error(e(284));if(!g._owner)throw Error(e(290,u))}return u}function Cm(u,d){throw u=Object.prototype.toString.call(d),Error(e(31,u==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":u))}function Vx(u){var d=u._init;return d(u._payload)}function Dx(u){function d(Z,W){if(u){var J=Z.deletions;J===null?(Z.deletions=[W],Z.flags|=16):J.push(W)}}function g(Z,W){if(!u)return null;for(;W!==null;)d(Z,W),W=W.sibling;return null}function w(Z,W){for(Z=new Map;W!==null;)W.key!==null?Z.set(W.key,W):Z.set(W.index,W),W=W.sibling;return Z}function C(Z,W){return Z=wa(Z,W),Z.index=0,Z.sibling=null,Z}function T(Z,W,J){return Z.index=J,u?(J=Z.alternate,J!==null?(J=J.index,J<W?(Z.flags|=2,W):J):(Z.flags|=2,W)):(Z.flags|=1048576,W)}function I(Z){return u&&Z.alternate===null&&(Z.flags|=2),Z}function D(Z,W,J,Te){return W===null||W.tag!==6?(W=Kv(J,Z.mode,Te),W.return=Z,W):(W=C(W,J),W.return=Z,W)}function H(Z,W,J,Te){var Ze=J.type;return Ze===N?we(Z,W,J.props.children,Te,J.key):W!==null&&(W.elementType===Ze||typeof Ze=="object"&&Ze!==null&&Ze.$$typeof===_e&&Vx(Ze)===W.type)?(Te=C(W,J.props),Te.ref=kd(Z,W,J),Te.return=Z,Te):(Te=Gm(J.type,J.key,J.props,null,Z.mode,Te),Te.ref=kd(Z,W,J),Te.return=Z,Te)}function ne(Z,W,J,Te){return W===null||W.tag!==4||W.stateNode.containerInfo!==J.containerInfo||W.stateNode.implementation!==J.implementation?(W=Yv(J,Z.mode,Te),W.return=Z,W):(W=C(W,J.children||[]),W.return=Z,W)}function we(Z,W,J,Te,Ze){return W===null||W.tag!==7?(W=pl(J,Z.mode,Te,Ze),W.return=Z,W):(W=C(W,J),W.return=Z,W)}function Ce(Z,W,J){if(typeof W=="string"&&W!==""||typeof W=="number")return W=Kv(""+W,Z.mode,J),W.return=Z,W;if(typeof W=="object"&&W!==null){switch(W.$$typeof){case O:return J=Gm(W.type,W.key,W.props,null,Z.mode,J),J.ref=kd(Z,null,W),J.return=Z,J;case P:return W=Yv(W,Z.mode,J),W.return=Z,W;case _e:var Te=W._init;return Ce(Z,Te(W._payload),J)}if(se(W)||ce(W))return W=pl(W,Z.mode,J,null),W.return=Z,W;Cm(Z,W)}return null}function pe(Z,W,J,Te){var Ze=W!==null?W.key:null;if(typeof J=="string"&&J!==""||typeof J=="number")return Ze!==null?null:D(Z,W,""+J,Te);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case O:return J.key===Ze?H(Z,W,J,Te):null;case P:return J.key===Ze?ne(Z,W,J,Te):null;case _e:return Ze=J._init,pe(Z,W,Ze(J._payload),Te)}if(se(J)||ce(J))return Ze!==null?null:we(Z,W,J,Te,null);Cm(Z,J)}return null}function De(Z,W,J,Te,Ze){if(typeof Te=="string"&&Te!==""||typeof Te=="number")return Z=Z.get(J)||null,D(W,Z,""+Te,Ze);if(typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case O:return Z=Z.get(Te.key===null?J:Te.key)||null,H(W,Z,Te,Ze);case P:return Z=Z.get(Te.key===null?J:Te.key)||null,ne(W,Z,Te,Ze);case _e:var it=Te._init;return De(Z,W,J,it(Te._payload),Ze)}if(se(Te)||ce(Te))return Z=Z.get(J)||null,we(W,Z,Te,Ze,null);Cm(W,Te)}return null}function We(Z,W,J,Te){for(var Ze=null,it=null,st=W,ft=W=0,Wn=null;st!==null&&ft<J.length;ft++){st.index>ft?(Wn=st,st=null):Wn=st.sibling;var Rt=pe(Z,st,J[ft],Te);if(Rt===null){st===null&&(st=Wn);break}u&&st&&Rt.alternate===null&&d(Z,st),W=T(Rt,W,ft),it===null?Ze=Rt:it.sibling=Rt,it=Rt,st=Wn}if(ft===J.length)return g(Z,st),hn&&ll(Z,ft),Ze;if(st===null){for(;ft<J.length;ft++)st=Ce(Z,J[ft],Te),st!==null&&(W=T(st,W,ft),it===null?Ze=st:it.sibling=st,it=st);return hn&&ll(Z,ft),Ze}for(st=w(Z,st);ft<J.length;ft++)Wn=De(st,Z,ft,J[ft],Te),Wn!==null&&(u&&Wn.alternate!==null&&st.delete(Wn.key===null?ft:Wn.key),W=T(Wn,W,ft),it===null?Ze=Wn:it.sibling=Wn,it=Wn);return u&&st.forEach(function(va){return d(Z,va)}),hn&&ll(Z,ft),Ze}function Ge(Z,W,J,Te){var Ze=ce(J);if(typeof Ze!="function")throw Error(e(150));if(J=Ze.call(J),J==null)throw Error(e(151));for(var it=Ze=null,st=W,ft=W=0,Wn=null,Rt=J.next();st!==null&&!Rt.done;ft++,Rt=J.next()){st.index>ft?(Wn=st,st=null):Wn=st.sibling;var va=pe(Z,st,Rt.value,Te);if(va===null){st===null&&(st=Wn);break}u&&st&&va.alternate===null&&d(Z,st),W=T(va,W,ft),it===null?Ze=va:it.sibling=va,it=va,st=Wn}if(Rt.done)return g(Z,st),hn&&ll(Z,ft),Ze;if(st===null){for(;!Rt.done;ft++,Rt=J.next())Rt=Ce(Z,Rt.value,Te),Rt!==null&&(W=T(Rt,W,ft),it===null?Ze=Rt:it.sibling=Rt,it=Rt);return hn&&ll(Z,ft),Ze}for(st=w(Z,st);!Rt.done;ft++,Rt=J.next())Rt=De(st,Z,ft,Rt.value,Te),Rt!==null&&(u&&Rt.alternate!==null&&st.delete(Rt.key===null?ft:Rt.key),W=T(Rt,W,ft),it===null?Ze=Rt:it.sibling=Rt,it=Rt);return u&&st.forEach(function(q6){return d(Z,q6)}),hn&&ll(Z,ft),Ze}function An(Z,W,J,Te){if(typeof J=="object"&&J!==null&&J.type===N&&J.key===null&&(J=J.props.children),typeof J=="object"&&J!==null){switch(J.$$typeof){case O:e:{for(var Ze=J.key,it=W;it!==null;){if(it.key===Ze){if(Ze=J.type,Ze===N){if(it.tag===7){g(Z,it.sibling),W=C(it,J.props.children),W.return=Z,Z=W;break e}}else if(it.elementType===Ze||typeof Ze=="object"&&Ze!==null&&Ze.$$typeof===_e&&Vx(Ze)===it.type){g(Z,it.sibling),W=C(it,J.props),W.ref=kd(Z,it,J),W.return=Z,Z=W;break e}g(Z,it);break}else d(Z,it);it=it.sibling}J.type===N?(W=pl(J.props.children,Z.mode,Te,J.key),W.return=Z,Z=W):(Te=Gm(J.type,J.key,J.props,null,Z.mode,Te),Te.ref=kd(Z,W,J),Te.return=Z,Z=Te)}return I(Z);case P:e:{for(it=J.key;W!==null;){if(W.key===it)if(W.tag===4&&W.stateNode.containerInfo===J.containerInfo&&W.stateNode.implementation===J.implementation){g(Z,W.sibling),W=C(W,J.children||[]),W.return=Z,Z=W;break e}else{g(Z,W);break}else d(Z,W);W=W.sibling}W=Yv(J,Z.mode,Te),W.return=Z,Z=W}return I(Z);case _e:return it=J._init,An(Z,W,it(J._payload),Te)}if(se(J))return We(Z,W,J,Te);if(ce(J))return Ge(Z,W,J,Te);Cm(Z,J)}return typeof J=="string"&&J!==""||typeof J=="number"?(J=""+J,W!==null&&W.tag===6?(g(Z,W.sibling),W=C(W,J),W.return=Z,Z=W):(g(Z,W),W=Kv(J,Z.mode,Te),W.return=Z,Z=W),I(Z)):g(Z,W)}return An}var Mc=Dx(!0),Bx=Dx(!1),xm=la(null),Tm=null,Lc=null,sv=null;function rv(){sv=Lc=Tm=null}function ov(u){var d=xm.current;nn(xm),u._currentValue=d}function av(u,d,g){for(;u!==null;){var w=u.alternate;if((u.childLanes&d)!==d?(u.childLanes|=d,w!==null&&(w.childLanes|=d)):w!==null&&(w.childLanes&d)!==d&&(w.childLanes|=d),u===g)break;u=u.return}}function Vc(u,d){Tm=u,sv=Lc=null,u=u.dependencies,u!==null&&u.firstContext!==null&&(u.lanes&d&&(Di=!0),u.firstContext=null)}function Is(u){var d=u._currentValue;if(sv!==u)if(u={context:u,memoizedValue:d,next:null},Lc===null){if(Tm===null)throw Error(e(308));Lc=u,Tm.dependencies={lanes:0,firstContext:u}}else Lc=Lc.next=u;return d}var cl=null;function lv(u){cl===null?cl=[u]:cl.push(u)}function Fx(u,d,g,w){var C=d.interleaved;return C===null?(g.next=g,lv(d)):(g.next=C.next,C.next=g),d.interleaved=g,vo(u,w)}function vo(u,d){u.lanes|=d;var g=u.alternate;for(g!==null&&(g.lanes|=d),g=u,u=u.return;u!==null;)u.childLanes|=d,g=u.alternate,g!==null&&(g.childLanes|=d),g=u,u=u.return;return g.tag===3?g.stateNode:null}var da=!1;function cv(u){u.updateQueue={baseState:u.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function $x(u,d){u=u.updateQueue,d.updateQueue===u&&(d.updateQueue={baseState:u.baseState,firstBaseUpdate:u.firstBaseUpdate,lastBaseUpdate:u.lastBaseUpdate,shared:u.shared,effects:u.effects})}function yo(u,d){return{eventTime:u,lane:d,tag:0,payload:null,callback:null,next:null}}function ha(u,d,g){var w=u.updateQueue;if(w===null)return null;if(w=w.shared,Pt&2){var C=w.pending;return C===null?d.next=d:(d.next=C.next,C.next=d),w.pending=d,vo(u,g)}return C=w.interleaved,C===null?(d.next=d,lv(w)):(d.next=C.next,C.next=d),w.interleaved=d,vo(u,g)}function km(u,d,g){if(d=d.updateQueue,d!==null&&(d=d.shared,(g&4194240)!==0)){var w=d.lanes;w&=u.pendingLanes,g|=w,d.lanes=g,cd(u,g)}}function zx(u,d){var g=u.updateQueue,w=u.alternate;if(w!==null&&(w=w.updateQueue,g===w)){var C=null,T=null;if(g=g.firstBaseUpdate,g!==null){do{var I={eventTime:g.eventTime,lane:g.lane,tag:g.tag,payload:g.payload,callback:g.callback,next:null};T===null?C=T=I:T=T.next=I,g=g.next}while(g!==null);T===null?C=T=d:T=T.next=d}else C=T=d;g={baseState:w.baseState,firstBaseUpdate:C,lastBaseUpdate:T,shared:w.shared,effects:w.effects},u.updateQueue=g;return}u=g.lastBaseUpdate,u===null?g.firstBaseUpdate=d:u.next=d,g.lastBaseUpdate=d}function Sm(u,d,g,w){var C=u.updateQueue;da=!1;var T=C.firstBaseUpdate,I=C.lastBaseUpdate,D=C.shared.pending;if(D!==null){C.shared.pending=null;var H=D,ne=H.next;H.next=null,I===null?T=ne:I.next=ne,I=H;var we=u.alternate;we!==null&&(we=we.updateQueue,D=we.lastBaseUpdate,D!==I&&(D===null?we.firstBaseUpdate=ne:D.next=ne,we.lastBaseUpdate=H))}if(T!==null){var Ce=C.baseState;I=0,we=ne=H=null,D=T;do{var pe=D.lane,De=D.eventTime;if((w&pe)===pe){we!==null&&(we=we.next={eventTime:De,lane:0,tag:D.tag,payload:D.payload,callback:D.callback,next:null});e:{var We=u,Ge=D;switch(pe=d,De=g,Ge.tag){case 1:if(We=Ge.payload,typeof We=="function"){Ce=We.call(De,Ce,pe);break e}Ce=We;break e;case 3:We.flags=We.flags&-65537|128;case 0:if(We=Ge.payload,pe=typeof We=="function"?We.call(De,Ce,pe):We,pe==null)break e;Ce=le({},Ce,pe);break e;case 2:da=!0}}D.callback!==null&&D.lane!==0&&(u.flags|=64,pe=C.effects,pe===null?C.effects=[D]:pe.push(D))}else De={eventTime:De,lane:pe,tag:D.tag,payload:D.payload,callback:D.callback,next:null},we===null?(ne=we=De,H=Ce):we=we.next=De,I|=pe;if(D=D.next,D===null){if(D=C.shared.pending,D===null)break;pe=D,D=pe.next,pe.next=null,C.lastBaseUpdate=pe,C.shared.pending=null}}while(!0);if(we===null&&(H=Ce),C.baseState=H,C.firstBaseUpdate=ne,C.lastBaseUpdate=we,d=C.shared.interleaved,d!==null){C=d;do I|=C.lane,C=C.next;while(C!==d)}else T===null&&(C.shared.lanes=0);hl|=I,u.lanes=I,u.memoizedState=Ce}}function jx(u,d,g){if(u=d.effects,d.effects=null,u!==null)for(d=0;d<u.length;d++){var w=u[d],C=w.callback;if(C!==null){if(w.callback=null,w=g,typeof C!="function")throw Error(e(191,C));C.call(w)}}}var Sd={},Hr=la(Sd),Ad=la(Sd),Pd=la(Sd);function ul(u){if(u===Sd)throw Error(e(174));return u}function uv(u,d){switch(Zt(Pd,d),Zt(Ad,u),Zt(Hr,Sd),u=d.nodeType,u){case 9:case 11:d=(d=d.documentElement)?d.namespaceURI:Le(null,"");break;default:u=u===8?d.parentNode:d,d=u.namespaceURI||null,u=u.tagName,d=Le(d,u)}nn(Hr),Zt(Hr,d)}function Dc(){nn(Hr),nn(Ad),nn(Pd)}function Hx(u){ul(Pd.current);var d=ul(Hr.current),g=Le(d,u.type);d!==g&&(Zt(Ad,u),Zt(Hr,g))}function dv(u){Ad.current===u&&(nn(Hr),nn(Ad))}var mn=la(0);function Am(u){for(var d=u;d!==null;){if(d.tag===13){var g=d.memoizedState;if(g!==null&&(g=g.dehydrated,g===null||g.data==="$?"||g.data==="$!"))return d}else if(d.tag===19&&d.memoizedProps.revealOrder!==void 0){if(d.flags&128)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===u)break;for(;d.sibling===null;){if(d.return===null||d.return===u)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}var hv=[];function fv(){for(var u=0;u<hv.length;u++)hv[u]._workInProgressVersionPrimary=null;hv.length=0}var Pm=S.ReactCurrentDispatcher,mv=S.ReactCurrentBatchConfig,dl=0,gn=null,Fn=null,Hn=null,Im=!1,Id=!1,Rd=0,g6=0;function di(){throw Error(e(321))}function gv(u,d){if(d===null)return!1;for(var g=0;g<d.length&&g<u.length;g++)if(!tr(u[g],d[g]))return!1;return!0}function pv(u,d,g,w,C,T){if(dl=T,gn=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,Pm.current=u===null||u.memoizedState===null?v6:y6,u=g(w,C),Id){T=0;do{if(Id=!1,Rd=0,25<=T)throw Error(e(301));T+=1,Hn=Fn=null,d.updateQueue=null,Pm.current=_6,u=g(w,C)}while(Id)}if(Pm.current=Nm,d=Fn!==null&&Fn.next!==null,dl=0,Hn=Fn=gn=null,Im=!1,d)throw Error(e(300));return u}function bv(){var u=Rd!==0;return Rd=0,u}function Ur(){var u={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Hn===null?gn.memoizedState=Hn=u:Hn=Hn.next=u,Hn}function Rs(){if(Fn===null){var u=gn.alternate;u=u!==null?u.memoizedState:null}else u=Fn.next;var d=Hn===null?gn.memoizedState:Hn.next;if(d!==null)Hn=d,Fn=u;else{if(u===null)throw Error(e(310));Fn=u,u={memoizedState:Fn.memoizedState,baseState:Fn.baseState,baseQueue:Fn.baseQueue,queue:Fn.queue,next:null},Hn===null?gn.memoizedState=Hn=u:Hn=Hn.next=u}return Hn}function Od(u,d){return typeof d=="function"?d(u):d}function wv(u){var d=Rs(),g=d.queue;if(g===null)throw Error(e(311));g.lastRenderedReducer=u;var w=Fn,C=w.baseQueue,T=g.pending;if(T!==null){if(C!==null){var I=C.next;C.next=T.next,T.next=I}w.baseQueue=C=T,g.pending=null}if(C!==null){T=C.next,w=w.baseState;var D=I=null,H=null,ne=T;do{var we=ne.lane;if((dl&we)===we)H!==null&&(H=H.next={lane:0,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null}),w=ne.hasEagerState?ne.eagerState:u(w,ne.action);else{var Ce={lane:we,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null};H===null?(D=H=Ce,I=w):H=H.next=Ce,gn.lanes|=we,hl|=we}ne=ne.next}while(ne!==null&&ne!==T);H===null?I=w:H.next=D,tr(w,d.memoizedState)||(Di=!0),d.memoizedState=w,d.baseState=I,d.baseQueue=H,g.lastRenderedState=w}if(u=g.interleaved,u!==null){C=u;do T=C.lane,gn.lanes|=T,hl|=T,C=C.next;while(C!==u)}else C===null&&(g.lanes=0);return[d.memoizedState,g.dispatch]}function vv(u){var d=Rs(),g=d.queue;if(g===null)throw Error(e(311));g.lastRenderedReducer=u;var w=g.dispatch,C=g.pending,T=d.memoizedState;if(C!==null){g.pending=null;var I=C=C.next;do T=u(T,I.action),I=I.next;while(I!==C);tr(T,d.memoizedState)||(Di=!0),d.memoizedState=T,d.baseQueue===null&&(d.baseState=T),g.lastRenderedState=T}return[T,w]}function Ux(){}function Wx(u,d){var g=gn,w=Rs(),C=d(),T=!tr(w.memoizedState,C);if(T&&(w.memoizedState=C,Di=!0),w=w.queue,yv(Kx.bind(null,g,w,u),[u]),w.getSnapshot!==d||T||Hn!==null&&Hn.memoizedState.tag&1){if(g.flags|=2048,Nd(9,Gx.bind(null,g,w,C,d),void 0,null),Un===null)throw Error(e(349));dl&30||qx(g,d,C)}return C}function qx(u,d,g){u.flags|=16384,u={getSnapshot:d,value:g},d=gn.updateQueue,d===null?(d={lastEffect:null,stores:null},gn.updateQueue=d,d.stores=[u]):(g=d.stores,g===null?d.stores=[u]:g.push(u))}function Gx(u,d,g,w){d.value=g,d.getSnapshot=w,Yx(d)&&Zx(u)}function Kx(u,d,g){return g(function(){Yx(d)&&Zx(u)})}function Yx(u){var d=u.getSnapshot;u=u.value;try{var g=d();return!tr(u,g)}catch{return!0}}function Zx(u){var d=vo(u,1);d!==null&&or(d,u,1,-1)}function Xx(u){var d=Ur();return typeof u=="function"&&(u=u()),d.memoizedState=d.baseState=u,u={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Od,lastRenderedState:u},d.queue=u,u=u.dispatch=w6.bind(null,gn,u),[d.memoizedState,u]}function Nd(u,d,g,w){return u={tag:u,create:d,destroy:g,deps:w,next:null},d=gn.updateQueue,d===null?(d={lastEffect:null,stores:null},gn.updateQueue=d,d.lastEffect=u.next=u):(g=d.lastEffect,g===null?d.lastEffect=u.next=u:(w=g.next,g.next=u,u.next=w,d.lastEffect=u)),u}function Jx(){return Rs().memoizedState}function Rm(u,d,g,w){var C=Ur();gn.flags|=u,C.memoizedState=Nd(1|d,g,void 0,w===void 0?null:w)}function Om(u,d,g,w){var C=Rs();w=w===void 0?null:w;var T=void 0;if(Fn!==null){var I=Fn.memoizedState;if(T=I.destroy,w!==null&&gv(w,I.deps)){C.memoizedState=Nd(d,g,T,w);return}}gn.flags|=u,C.memoizedState=Nd(1|d,g,T,w)}function Qx(u,d){return Rm(8390656,8,u,d)}function yv(u,d){return Om(2048,8,u,d)}function eT(u,d){return Om(4,2,u,d)}function tT(u,d){return Om(4,4,u,d)}function nT(u,d){if(typeof d=="function")return u=u(),d(u),function(){d(null)};if(d!=null)return u=u(),d.current=u,function(){d.current=null}}function iT(u,d,g){return g=g!=null?g.concat([u]):null,Om(4,4,nT.bind(null,d,u),g)}function _v(){}function sT(u,d){var g=Rs();d=d===void 0?null:d;var w=g.memoizedState;return w!==null&&d!==null&&gv(d,w[1])?w[0]:(g.memoizedState=[u,d],u)}function rT(u,d){var g=Rs();d=d===void 0?null:d;var w=g.memoizedState;return w!==null&&d!==null&&gv(d,w[1])?w[0]:(u=u(),g.memoizedState=[u,d],u)}function oT(u,d,g){return dl&21?(tr(g,d)||(g=Zf(),gn.lanes|=g,hl|=g,u.baseState=!0),d):(u.baseState&&(u.baseState=!1,Di=!0),u.memoizedState=g)}function p6(u,d){var g=Lt;Lt=g!==0&&4>g?g:4,u(!0);var w=mv.transition;mv.transition={};try{u(!1),d()}finally{Lt=g,mv.transition=w}}function aT(){return Rs().memoizedState}function b6(u,d,g){var w=pa(u);if(g={lane:w,action:g,hasEagerState:!1,eagerState:null,next:null},lT(u))cT(d,g);else if(g=Fx(u,d,g,w),g!==null){var C=Ci();or(g,u,w,C),uT(g,d,w)}}function w6(u,d,g){var w=pa(u),C={lane:w,action:g,hasEagerState:!1,eagerState:null,next:null};if(lT(u))cT(d,C);else{var T=u.alternate;if(u.lanes===0&&(T===null||T.lanes===0)&&(T=d.lastRenderedReducer,T!==null))try{var I=d.lastRenderedState,D=T(I,g);if(C.hasEagerState=!0,C.eagerState=D,tr(D,I)){var H=d.interleaved;H===null?(C.next=C,lv(d)):(C.next=H.next,H.next=C),d.interleaved=C;return}}catch{}finally{}g=Fx(u,d,C,w),g!==null&&(C=Ci(),or(g,u,w,C),uT(g,d,w))}}function lT(u){var d=u.alternate;return u===gn||d!==null&&d===gn}function cT(u,d){Id=Im=!0;var g=u.pending;g===null?d.next=d:(d.next=g.next,g.next=d),u.pending=d}function uT(u,d,g){if(g&4194240){var w=d.lanes;w&=u.pendingLanes,g|=w,d.lanes=g,cd(u,g)}}var Nm={readContext:Is,useCallback:di,useContext:di,useEffect:di,useImperativeHandle:di,useInsertionEffect:di,useLayoutEffect:di,useMemo:di,useReducer:di,useRef:di,useState:di,useDebugValue:di,useDeferredValue:di,useTransition:di,useMutableSource:di,useSyncExternalStore:di,useId:di,unstable_isNewReconciler:!1},v6={readContext:Is,useCallback:function(u,d){return Ur().memoizedState=[u,d===void 0?null:d],u},useContext:Is,useEffect:Qx,useImperativeHandle:function(u,d,g){return g=g!=null?g.concat([u]):null,Rm(4194308,4,nT.bind(null,d,u),g)},useLayoutEffect:function(u,d){return Rm(4194308,4,u,d)},useInsertionEffect:function(u,d){return Rm(4,2,u,d)},useMemo:function(u,d){var g=Ur();return d=d===void 0?null:d,u=u(),g.memoizedState=[u,d],u},useReducer:function(u,d,g){var w=Ur();return d=g!==void 0?g(d):d,w.memoizedState=w.baseState=d,u={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:u,lastRenderedState:d},w.queue=u,u=u.dispatch=b6.bind(null,gn,u),[w.memoizedState,u]},useRef:function(u){var d=Ur();return u={current:u},d.memoizedState=u},useState:Xx,useDebugValue:_v,useDeferredValue:function(u){return Ur().memoizedState=u},useTransition:function(){var u=Xx(!1),d=u[0];return u=p6.bind(null,u[1]),Ur().memoizedState=u,[d,u]},useMutableSource:function(){},useSyncExternalStore:function(u,d,g){var w=gn,C=Ur();if(hn){if(g===void 0)throw Error(e(407));g=g()}else{if(g=d(),Un===null)throw Error(e(349));dl&30||qx(w,d,g)}C.memoizedState=g;var T={value:g,getSnapshot:d};return C.queue=T,Qx(Kx.bind(null,w,T,u),[u]),w.flags|=2048,Nd(9,Gx.bind(null,w,T,g,d),void 0,null),g},useId:function(){var u=Ur(),d=Un.identifierPrefix;if(hn){var g=wo,w=bo;g=(w&~(1<<32-_i(w)-1)).toString(32)+g,d=":"+d+"R"+g,g=Rd++,0<g&&(d+="H"+g.toString(32)),d+=":"}else g=g6++,d=":"+d+"r"+g.toString(32)+":";return u.memoizedState=d},unstable_isNewReconciler:!1},y6={readContext:Is,useCallback:sT,useContext:Is,useEffect:yv,useImperativeHandle:iT,useInsertionEffect:eT,useLayoutEffect:tT,useMemo:rT,useReducer:wv,useRef:Jx,useState:function(){return wv(Od)},useDebugValue:_v,useDeferredValue:function(u){var d=Rs();return oT(d,Fn.memoizedState,u)},useTransition:function(){var u=wv(Od)[0],d=Rs().memoizedState;return[u,d]},useMutableSource:Ux,useSyncExternalStore:Wx,useId:aT,unstable_isNewReconciler:!1},_6={readContext:Is,useCallback:sT,useContext:Is,useEffect:yv,useImperativeHandle:iT,useInsertionEffect:eT,useLayoutEffect:tT,useMemo:rT,useReducer:vv,useRef:Jx,useState:function(){return vv(Od)},useDebugValue:_v,useDeferredValue:function(u){var d=Rs();return Fn===null?d.memoizedState=u:oT(d,Fn.memoizedState,u)},useTransition:function(){var u=vv(Od)[0],d=Rs().memoizedState;return[u,d]},useMutableSource:Ux,useSyncExternalStore:Wx,useId:aT,unstable_isNewReconciler:!1};function ir(u,d){if(u&&u.defaultProps){d=le({},d),u=u.defaultProps;for(var g in u)d[g]===void 0&&(d[g]=u[g]);return d}return d}function Ev(u,d,g,w){d=u.memoizedState,g=g(w,d),g=g==null?d:le({},d,g),u.memoizedState=g,u.lanes===0&&(u.updateQueue.baseState=g)}var Mm={isMounted:function(u){return(u=u._reactInternals)?qt(u)===u:!1},enqueueSetState:function(u,d,g){u=u._reactInternals;var w=Ci(),C=pa(u),T=yo(w,C);T.payload=d,g!=null&&(T.callback=g),d=ha(u,T,C),d!==null&&(or(d,u,C,w),km(d,u,C))},enqueueReplaceState:function(u,d,g){u=u._reactInternals;var w=Ci(),C=pa(u),T=yo(w,C);T.tag=1,T.payload=d,g!=null&&(T.callback=g),d=ha(u,T,C),d!==null&&(or(d,u,C,w),km(d,u,C))},enqueueForceUpdate:function(u,d){u=u._reactInternals;var g=Ci(),w=pa(u),C=yo(g,w);C.tag=2,d!=null&&(C.callback=d),d=ha(u,C,w),d!==null&&(or(d,u,w,g),km(d,u,w))}};function dT(u,d,g,w,C,T,I){return u=u.stateNode,typeof u.shouldComponentUpdate=="function"?u.shouldComponentUpdate(w,T,I):d.prototype&&d.prototype.isPureReactComponent?!vd(g,w)||!vd(C,T):!0}function hT(u,d,g){var w=!1,C=ca,T=d.contextType;return typeof T=="object"&&T!==null?T=Is(T):(C=Vi(d)?ol:ui.current,w=d.contextTypes,T=(w=w!=null)?Ic(u,C):ca),d=new d(g,T),u.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=Mm,u.stateNode=d,d._reactInternals=u,w&&(u=u.stateNode,u.__reactInternalMemoizedUnmaskedChildContext=C,u.__reactInternalMemoizedMaskedChildContext=T),d}function fT(u,d,g,w){u=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(g,w),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(g,w),d.state!==u&&Mm.enqueueReplaceState(d,d.state,null)}function Cv(u,d,g,w){var C=u.stateNode;C.props=g,C.state=u.memoizedState,C.refs={},cv(u);var T=d.contextType;typeof T=="object"&&T!==null?C.context=Is(T):(T=Vi(d)?ol:ui.current,C.context=Ic(u,T)),C.state=u.memoizedState,T=d.getDerivedStateFromProps,typeof T=="function"&&(Ev(u,d,T,g),C.state=u.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof C.getSnapshotBeforeUpdate=="function"||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(d=C.state,typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount(),d!==C.state&&Mm.enqueueReplaceState(C,C.state,null),Sm(u,g,C,w),C.state=u.memoizedState),typeof C.componentDidMount=="function"&&(u.flags|=4194308)}function Bc(u,d){try{var g="",w=d;do g+=fe(w),w=w.return;while(w);var C=g}catch(T){C=`
Error generating stack: `+T.message+`
`+T.stack}return{value:u,source:d,stack:C,digest:null}}function xv(u,d,g){return{value:u,source:null,stack:g??null,digest:d??null}}function Tv(u,d){try{console.error(d.value)}catch(g){setTimeout(function(){throw g})}}var E6=typeof WeakMap=="function"?WeakMap:Map;function mT(u,d,g){g=yo(-1,g),g.tag=3,g.payload={element:null};var w=d.value;return g.callback=function(){zm||(zm=!0,$v=w),Tv(u,d)},g}function gT(u,d,g){g=yo(-1,g),g.tag=3;var w=u.type.getDerivedStateFromError;if(typeof w=="function"){var C=d.value;g.payload=function(){return w(C)},g.callback=function(){Tv(u,d)}}var T=u.stateNode;return T!==null&&typeof T.componentDidCatch=="function"&&(g.callback=function(){Tv(u,d),typeof w!="function"&&(ma===null?ma=new Set([this]):ma.add(this));var I=d.stack;this.componentDidCatch(d.value,{componentStack:I!==null?I:""})}),g}function pT(u,d,g){var w=u.pingCache;if(w===null){w=u.pingCache=new E6;var C=new Set;w.set(d,C)}else C=w.get(d),C===void 0&&(C=new Set,w.set(d,C));C.has(g)||(C.add(g),u=V6.bind(null,u,d,g),d.then(u,u))}function bT(u){do{var d;if((d=u.tag===13)&&(d=u.memoizedState,d=d!==null?d.dehydrated!==null:!0),d)return u;u=u.return}while(u!==null);return null}function wT(u,d,g,w,C){return u.mode&1?(u.flags|=65536,u.lanes=C,u):(u===d?u.flags|=65536:(u.flags|=128,g.flags|=131072,g.flags&=-52805,g.tag===1&&(g.alternate===null?g.tag=17:(d=yo(-1,1),d.tag=2,ha(g,d,1))),g.lanes|=1),u)}var C6=S.ReactCurrentOwner,Di=!1;function Ei(u,d,g,w){d.child=u===null?Bx(d,null,g,w):Mc(d,u.child,g,w)}function vT(u,d,g,w,C){g=g.render;var T=d.ref;return Vc(d,C),w=pv(u,d,g,w,T,C),g=bv(),u!==null&&!Di?(d.updateQueue=u.updateQueue,d.flags&=-2053,u.lanes&=~C,_o(u,d,C)):(hn&&g&&Qw(d),d.flags|=1,Ei(u,d,w,C),d.child)}function yT(u,d,g,w,C){if(u===null){var T=g.type;return typeof T=="function"&&!Gv(T)&&T.defaultProps===void 0&&g.compare===null&&g.defaultProps===void 0?(d.tag=15,d.type=T,_T(u,d,T,w,C)):(u=Gm(g.type,null,w,d,d.mode,C),u.ref=d.ref,u.return=d,d.child=u)}if(T=u.child,!(u.lanes&C)){var I=T.memoizedProps;if(g=g.compare,g=g!==null?g:vd,g(I,w)&&u.ref===d.ref)return _o(u,d,C)}return d.flags|=1,u=wa(T,w),u.ref=d.ref,u.return=d,d.child=u}function _T(u,d,g,w,C){if(u!==null){var T=u.memoizedProps;if(vd(T,w)&&u.ref===d.ref)if(Di=!1,d.pendingProps=w=T,(u.lanes&C)!==0)u.flags&131072&&(Di=!0);else return d.lanes=u.lanes,_o(u,d,C)}return kv(u,d,g,w,C)}function ET(u,d,g){var w=d.pendingProps,C=w.children,T=u!==null?u.memoizedState:null;if(w.mode==="hidden")if(!(d.mode&1))d.memoizedState={baseLanes:0,cachePool:null,transitions:null},Zt($c,is),is|=g;else{if(!(g&1073741824))return u=T!==null?T.baseLanes|g:g,d.lanes=d.childLanes=1073741824,d.memoizedState={baseLanes:u,cachePool:null,transitions:null},d.updateQueue=null,Zt($c,is),is|=u,null;d.memoizedState={baseLanes:0,cachePool:null,transitions:null},w=T!==null?T.baseLanes:g,Zt($c,is),is|=w}else T!==null?(w=T.baseLanes|g,d.memoizedState=null):w=g,Zt($c,is),is|=w;return Ei(u,d,C,g),d.child}function CT(u,d){var g=d.ref;(u===null&&g!==null||u!==null&&u.ref!==g)&&(d.flags|=512,d.flags|=2097152)}function kv(u,d,g,w,C){var T=Vi(g)?ol:ui.current;return T=Ic(d,T),Vc(d,C),g=pv(u,d,g,w,T,C),w=bv(),u!==null&&!Di?(d.updateQueue=u.updateQueue,d.flags&=-2053,u.lanes&=~C,_o(u,d,C)):(hn&&w&&Qw(d),d.flags|=1,Ei(u,d,g,C),d.child)}function xT(u,d,g,w,C){if(Vi(g)){var T=!0;wm(d)}else T=!1;if(Vc(d,C),d.stateNode===null)Vm(u,d),hT(d,g,w),Cv(d,g,w,C),w=!0;else if(u===null){var I=d.stateNode,D=d.memoizedProps;I.props=D;var H=I.context,ne=g.contextType;typeof ne=="object"&&ne!==null?ne=Is(ne):(ne=Vi(g)?ol:ui.current,ne=Ic(d,ne));var we=g.getDerivedStateFromProps,Ce=typeof we=="function"||typeof I.getSnapshotBeforeUpdate=="function";Ce||typeof I.UNSAFE_componentWillReceiveProps!="function"&&typeof I.componentWillReceiveProps!="function"||(D!==w||H!==ne)&&fT(d,I,w,ne),da=!1;var pe=d.memoizedState;I.state=pe,Sm(d,w,I,C),H=d.memoizedState,D!==w||pe!==H||Li.current||da?(typeof we=="function"&&(Ev(d,g,we,w),H=d.memoizedState),(D=da||dT(d,g,D,w,pe,H,ne))?(Ce||typeof I.UNSAFE_componentWillMount!="function"&&typeof I.componentWillMount!="function"||(typeof I.componentWillMount=="function"&&I.componentWillMount(),typeof I.UNSAFE_componentWillMount=="function"&&I.UNSAFE_componentWillMount()),typeof I.componentDidMount=="function"&&(d.flags|=4194308)):(typeof I.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=w,d.memoizedState=H),I.props=w,I.state=H,I.context=ne,w=D):(typeof I.componentDidMount=="function"&&(d.flags|=4194308),w=!1)}else{I=d.stateNode,$x(u,d),D=d.memoizedProps,ne=d.type===d.elementType?D:ir(d.type,D),I.props=ne,Ce=d.pendingProps,pe=I.context,H=g.contextType,typeof H=="object"&&H!==null?H=Is(H):(H=Vi(g)?ol:ui.current,H=Ic(d,H));var De=g.getDerivedStateFromProps;(we=typeof De=="function"||typeof I.getSnapshotBeforeUpdate=="function")||typeof I.UNSAFE_componentWillReceiveProps!="function"&&typeof I.componentWillReceiveProps!="function"||(D!==Ce||pe!==H)&&fT(d,I,w,H),da=!1,pe=d.memoizedState,I.state=pe,Sm(d,w,I,C);var We=d.memoizedState;D!==Ce||pe!==We||Li.current||da?(typeof De=="function"&&(Ev(d,g,De,w),We=d.memoizedState),(ne=da||dT(d,g,ne,w,pe,We,H)||!1)?(we||typeof I.UNSAFE_componentWillUpdate!="function"&&typeof I.componentWillUpdate!="function"||(typeof I.componentWillUpdate=="function"&&I.componentWillUpdate(w,We,H),typeof I.UNSAFE_componentWillUpdate=="function"&&I.UNSAFE_componentWillUpdate(w,We,H)),typeof I.componentDidUpdate=="function"&&(d.flags|=4),typeof I.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof I.componentDidUpdate!="function"||D===u.memoizedProps&&pe===u.memoizedState||(d.flags|=4),typeof I.getSnapshotBeforeUpdate!="function"||D===u.memoizedProps&&pe===u.memoizedState||(d.flags|=1024),d.memoizedProps=w,d.memoizedState=We),I.props=w,I.state=We,I.context=H,w=ne):(typeof I.componentDidUpdate!="function"||D===u.memoizedProps&&pe===u.memoizedState||(d.flags|=4),typeof I.getSnapshotBeforeUpdate!="function"||D===u.memoizedProps&&pe===u.memoizedState||(d.flags|=1024),w=!1)}return Sv(u,d,g,w,T,C)}function Sv(u,d,g,w,C,T){CT(u,d);var I=(d.flags&128)!==0;if(!w&&!I)return C&&Px(d,g,!1),_o(u,d,T);w=d.stateNode,C6.current=d;var D=I&&typeof g.getDerivedStateFromError!="function"?null:w.render();return d.flags|=1,u!==null&&I?(d.child=Mc(d,u.child,null,T),d.child=Mc(d,null,D,T)):Ei(u,d,D,T),d.memoizedState=w.state,C&&Px(d,g,!0),d.child}function TT(u){var d=u.stateNode;d.pendingContext?Sx(u,d.pendingContext,d.pendingContext!==d.context):d.context&&Sx(u,d.context,!1),uv(u,d.containerInfo)}function kT(u,d,g,w,C){return Nc(),iv(C),d.flags|=256,Ei(u,d,g,w),d.child}var Av={dehydrated:null,treeContext:null,retryLane:0};function Pv(u){return{baseLanes:u,cachePool:null,transitions:null}}function ST(u,d,g){var w=d.pendingProps,C=mn.current,T=!1,I=(d.flags&128)!==0,D;if((D=I)||(D=u!==null&&u.memoizedState===null?!1:(C&2)!==0),D?(T=!0,d.flags&=-129):(u===null||u.memoizedState!==null)&&(C|=1),Zt(mn,C&1),u===null)return nv(d),u=d.memoizedState,u!==null&&(u=u.dehydrated,u!==null)?(d.mode&1?u.data==="$!"?d.lanes=8:d.lanes=1073741824:d.lanes=1,null):(I=w.children,u=w.fallback,T?(w=d.mode,T=d.child,I={mode:"hidden",children:I},!(w&1)&&T!==null?(T.childLanes=0,T.pendingProps=I):T=Km(I,w,0,null),u=pl(u,w,g,null),T.return=d,u.return=d,T.sibling=u,d.child=T,d.child.memoizedState=Pv(g),d.memoizedState=Av,u):Iv(d,I));if(C=u.memoizedState,C!==null&&(D=C.dehydrated,D!==null))return x6(u,d,I,w,D,C,g);if(T){T=w.fallback,I=d.mode,C=u.child,D=C.sibling;var H={mode:"hidden",children:w.children};return!(I&1)&&d.child!==C?(w=d.child,w.childLanes=0,w.pendingProps=H,d.deletions=null):(w=wa(C,H),w.subtreeFlags=C.subtreeFlags&14680064),D!==null?T=wa(D,T):(T=pl(T,I,g,null),T.flags|=2),T.return=d,w.return=d,w.sibling=T,d.child=w,w=T,T=d.child,I=u.child.memoizedState,I=I===null?Pv(g):{baseLanes:I.baseLanes|g,cachePool:null,transitions:I.transitions},T.memoizedState=I,T.childLanes=u.childLanes&~g,d.memoizedState=Av,w}return T=u.child,u=T.sibling,w=wa(T,{mode:"visible",children:w.children}),!(d.mode&1)&&(w.lanes=g),w.return=d,w.sibling=null,u!==null&&(g=d.deletions,g===null?(d.deletions=[u],d.flags|=16):g.push(u)),d.child=w,d.memoizedState=null,w}function Iv(u,d){return d=Km({mode:"visible",children:d},u.mode,0,null),d.return=u,u.child=d}function Lm(u,d,g,w){return w!==null&&iv(w),Mc(d,u.child,null,g),u=Iv(d,d.pendingProps.children),u.flags|=2,d.memoizedState=null,u}function x6(u,d,g,w,C,T,I){if(g)return d.flags&256?(d.flags&=-257,w=xv(Error(e(422))),Lm(u,d,I,w)):d.memoizedState!==null?(d.child=u.child,d.flags|=128,null):(T=w.fallback,C=d.mode,w=Km({mode:"visible",children:w.children},C,0,null),T=pl(T,C,I,null),T.flags|=2,w.return=d,T.return=d,w.sibling=T,d.child=w,d.mode&1&&Mc(d,u.child,null,I),d.child.memoizedState=Pv(I),d.memoizedState=Av,T);if(!(d.mode&1))return Lm(u,d,I,null);if(C.data==="$!"){if(w=C.nextSibling&&C.nextSibling.dataset,w)var D=w.dgst;return w=D,T=Error(e(419)),w=xv(T,w,void 0),Lm(u,d,I,w)}if(D=(I&u.childLanes)!==0,Di||D){if(w=Un,w!==null){switch(I&-I){case 4:C=2;break;case 16:C=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:C=32;break;case 536870912:C=268435456;break;default:C=0}C=C&(w.suspendedLanes|I)?0:C,C!==0&&C!==T.retryLane&&(T.retryLane=C,vo(u,C),or(w,u,C,-1))}return qv(),w=xv(Error(e(421))),Lm(u,d,I,w)}return C.data==="$?"?(d.flags|=128,d.child=u.child,d=D6.bind(null,u),C._reactRetry=d,null):(u=T.treeContext,ns=aa(C.nextSibling),ts=d,hn=!0,nr=null,u!==null&&(As[Ps++]=bo,As[Ps++]=wo,As[Ps++]=al,bo=u.id,wo=u.overflow,al=d),d=Iv(d,w.children),d.flags|=4096,d)}function AT(u,d,g){u.lanes|=d;var w=u.alternate;w!==null&&(w.lanes|=d),av(u.return,d,g)}function Rv(u,d,g,w,C){var T=u.memoizedState;T===null?u.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:w,tail:g,tailMode:C}:(T.isBackwards=d,T.rendering=null,T.renderingStartTime=0,T.last=w,T.tail=g,T.tailMode=C)}function PT(u,d,g){var w=d.pendingProps,C=w.revealOrder,T=w.tail;if(Ei(u,d,w.children,g),w=mn.current,w&2)w=w&1|2,d.flags|=128;else{if(u!==null&&u.flags&128)e:for(u=d.child;u!==null;){if(u.tag===13)u.memoizedState!==null&&AT(u,g,d);else if(u.tag===19)AT(u,g,d);else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===d)break e;for(;u.sibling===null;){if(u.return===null||u.return===d)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}w&=1}if(Zt(mn,w),!(d.mode&1))d.memoizedState=null;else switch(C){case"forwards":for(g=d.child,C=null;g!==null;)u=g.alternate,u!==null&&Am(u)===null&&(C=g),g=g.sibling;g=C,g===null?(C=d.child,d.child=null):(C=g.sibling,g.sibling=null),Rv(d,!1,C,g,T);break;case"backwards":for(g=null,C=d.child,d.child=null;C!==null;){if(u=C.alternate,u!==null&&Am(u)===null){d.child=C;break}u=C.sibling,C.sibling=g,g=C,C=u}Rv(d,!0,g,null,T);break;case"together":Rv(d,!1,null,null,void 0);break;default:d.memoizedState=null}return d.child}function Vm(u,d){!(d.mode&1)&&u!==null&&(u.alternate=null,d.alternate=null,d.flags|=2)}function _o(u,d,g){if(u!==null&&(d.dependencies=u.dependencies),hl|=d.lanes,!(g&d.childLanes))return null;if(u!==null&&d.child!==u.child)throw Error(e(153));if(d.child!==null){for(u=d.child,g=wa(u,u.pendingProps),d.child=g,g.return=d;u.sibling!==null;)u=u.sibling,g=g.sibling=wa(u,u.pendingProps),g.return=d;g.sibling=null}return d.child}function T6(u,d,g){switch(d.tag){case 3:TT(d),Nc();break;case 5:Hx(d);break;case 1:Vi(d.type)&&wm(d);break;case 4:uv(d,d.stateNode.containerInfo);break;case 10:var w=d.type._context,C=d.memoizedProps.value;Zt(xm,w._currentValue),w._currentValue=C;break;case 13:if(w=d.memoizedState,w!==null)return w.dehydrated!==null?(Zt(mn,mn.current&1),d.flags|=128,null):g&d.child.childLanes?ST(u,d,g):(Zt(mn,mn.current&1),u=_o(u,d,g),u!==null?u.sibling:null);Zt(mn,mn.current&1);break;case 19:if(w=(g&d.childLanes)!==0,u.flags&128){if(w)return PT(u,d,g);d.flags|=128}if(C=d.memoizedState,C!==null&&(C.rendering=null,C.tail=null,C.lastEffect=null),Zt(mn,mn.current),w)break;return null;case 22:case 23:return d.lanes=0,ET(u,d,g)}return _o(u,d,g)}var IT,Ov,RT,OT;IT=function(u,d){for(var g=d.child;g!==null;){if(g.tag===5||g.tag===6)u.appendChild(g.stateNode);else if(g.tag!==4&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===d)break;for(;g.sibling===null;){if(g.return===null||g.return===d)return;g=g.return}g.sibling.return=g.return,g=g.sibling}},Ov=function(){},RT=function(u,d,g,w){var C=u.memoizedProps;if(C!==w){u=d.stateNode,ul(Hr.current);var T=null;switch(g){case"input":C=kn(u,C),w=kn(u,w),T=[];break;case"select":C=le({},C,{value:void 0}),w=le({},w,{value:void 0}),T=[];break;case"textarea":C=Ee(u,C),w=Ee(u,w),T=[];break;default:typeof C.onClick!="function"&&typeof w.onClick=="function"&&(u.onclick=gm)}Ni(g,w);var I;g=null;for(ne in C)if(!w.hasOwnProperty(ne)&&C.hasOwnProperty(ne)&&C[ne]!=null)if(ne==="style"){var D=C[ne];for(I in D)D.hasOwnProperty(I)&&(g||(g={}),g[I]="")}else ne!=="dangerouslySetInnerHTML"&&ne!=="children"&&ne!=="suppressContentEditableWarning"&&ne!=="suppressHydrationWarning"&&ne!=="autoFocus"&&(s.hasOwnProperty(ne)?T||(T=[]):(T=T||[]).push(ne,null));for(ne in w){var H=w[ne];if(D=C!=null?C[ne]:void 0,w.hasOwnProperty(ne)&&H!==D&&(H!=null||D!=null))if(ne==="style")if(D){for(I in D)!D.hasOwnProperty(I)||H&&H.hasOwnProperty(I)||(g||(g={}),g[I]="");for(I in H)H.hasOwnProperty(I)&&D[I]!==H[I]&&(g||(g={}),g[I]=H[I])}else g||(T||(T=[]),T.push(ne,g)),g=H;else ne==="dangerouslySetInnerHTML"?(H=H?H.__html:void 0,D=D?D.__html:void 0,H!=null&&D!==H&&(T=T||[]).push(ne,H)):ne==="children"?typeof H!="string"&&typeof H!="number"||(T=T||[]).push(ne,""+H):ne!=="suppressContentEditableWarning"&&ne!=="suppressHydrationWarning"&&(s.hasOwnProperty(ne)?(H!=null&&ne==="onScroll"&&tn("scroll",u),T||D===H||(T=[])):(T=T||[]).push(ne,H))}g&&(T=T||[]).push("style",g);var ne=T;(d.updateQueue=ne)&&(d.flags|=4)}},OT=function(u,d,g,w){g!==w&&(d.flags|=4)};function Md(u,d){if(!hn)switch(u.tailMode){case"hidden":d=u.tail;for(var g=null;d!==null;)d.alternate!==null&&(g=d),d=d.sibling;g===null?u.tail=null:g.sibling=null;break;case"collapsed":g=u.tail;for(var w=null;g!==null;)g.alternate!==null&&(w=g),g=g.sibling;w===null?d||u.tail===null?u.tail=null:u.tail.sibling=null:w.sibling=null}}function hi(u){var d=u.alternate!==null&&u.alternate.child===u.child,g=0,w=0;if(d)for(var C=u.child;C!==null;)g|=C.lanes|C.childLanes,w|=C.subtreeFlags&14680064,w|=C.flags&14680064,C.return=u,C=C.sibling;else for(C=u.child;C!==null;)g|=C.lanes|C.childLanes,w|=C.subtreeFlags,w|=C.flags,C.return=u,C=C.sibling;return u.subtreeFlags|=w,u.childLanes=g,d}function k6(u,d,g){var w=d.pendingProps;switch(ev(d),d.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return hi(d),null;case 1:return Vi(d.type)&&bm(),hi(d),null;case 3:return w=d.stateNode,Dc(),nn(Li),nn(ui),fv(),w.pendingContext&&(w.context=w.pendingContext,w.pendingContext=null),(u===null||u.child===null)&&(Em(d)?d.flags|=4:u===null||u.memoizedState.isDehydrated&&!(d.flags&256)||(d.flags|=1024,nr!==null&&(Hv(nr),nr=null))),Ov(u,d),hi(d),null;case 5:dv(d);var C=ul(Pd.current);if(g=d.type,u!==null&&d.stateNode!=null)RT(u,d,g,w,C),u.ref!==d.ref&&(d.flags|=512,d.flags|=2097152);else{if(!w){if(d.stateNode===null)throw Error(e(166));return hi(d),null}if(u=ul(Hr.current),Em(d)){w=d.stateNode,g=d.type;var T=d.memoizedProps;switch(w[jr]=d,w[xd]=T,u=(d.mode&1)!==0,g){case"dialog":tn("cancel",w),tn("close",w);break;case"iframe":case"object":case"embed":tn("load",w);break;case"video":case"audio":for(C=0;C<_d.length;C++)tn(_d[C],w);break;case"source":tn("error",w);break;case"img":case"image":case"link":tn("error",w),tn("load",w);break;case"details":tn("toggle",w);break;case"input":Jn(w,T),tn("invalid",w);break;case"select":w._wrapperState={wasMultiple:!!T.multiple},tn("invalid",w);break;case"textarea":ue(w,T),tn("invalid",w)}Ni(g,T),C=null;for(var I in T)if(T.hasOwnProperty(I)){var D=T[I];I==="children"?typeof D=="string"?w.textContent!==D&&(T.suppressHydrationWarning!==!0&&mm(w.textContent,D,u),C=["children",D]):typeof D=="number"&&w.textContent!==""+D&&(T.suppressHydrationWarning!==!0&&mm(w.textContent,D,u),C=["children",""+D]):s.hasOwnProperty(I)&&D!=null&&I==="onScroll"&&tn("scroll",w)}switch(g){case"input":zt(w),z(w,T,!0);break;case"textarea":zt(w),Qe(w);break;case"select":case"option":break;default:typeof T.onClick=="function"&&(w.onclick=gm)}w=C,d.updateQueue=w,w!==null&&(d.flags|=4)}else{I=C.nodeType===9?C:C.ownerDocument,u==="http://www.w3.org/1999/xhtml"&&(u=Ne(g)),u==="http://www.w3.org/1999/xhtml"?g==="script"?(u=I.createElement("div"),u.innerHTML="<script><\/script>",u=u.removeChild(u.firstChild)):typeof w.is=="string"?u=I.createElement(g,{is:w.is}):(u=I.createElement(g),g==="select"&&(I=u,w.multiple?I.multiple=!0:w.size&&(I.size=w.size))):u=I.createElementNS(u,g),u[jr]=d,u[xd]=w,IT(u,d,!1,!1),d.stateNode=u;e:{switch(I=Xs(g,w),g){case"dialog":tn("cancel",u),tn("close",u),C=w;break;case"iframe":case"object":case"embed":tn("load",u),C=w;break;case"video":case"audio":for(C=0;C<_d.length;C++)tn(_d[C],u);C=w;break;case"source":tn("error",u),C=w;break;case"img":case"image":case"link":tn("error",u),tn("load",u),C=w;break;case"details":tn("toggle",u),C=w;break;case"input":Jn(u,w),C=kn(u,w),tn("invalid",u);break;case"option":C=w;break;case"select":u._wrapperState={wasMultiple:!!w.multiple},C=le({},w,{value:void 0}),tn("invalid",u);break;case"textarea":ue(u,w),C=Ee(u,w),tn("invalid",u);break;default:C=w}Ni(g,C),D=C;for(T in D)if(D.hasOwnProperty(T)){var H=D[T];T==="style"?Sn(u,H):T==="dangerouslySetInnerHTML"?(H=H?H.__html:void 0,H!=null&&Et(u,H)):T==="children"?typeof H=="string"?(g!=="textarea"||H!=="")&&cn(u,H):typeof H=="number"&&cn(u,""+H):T!=="suppressContentEditableWarning"&&T!=="suppressHydrationWarning"&&T!=="autoFocus"&&(s.hasOwnProperty(T)?H!=null&&T==="onScroll"&&tn("scroll",u):H!=null&&A(u,T,H,I))}switch(g){case"input":zt(u),z(u,w,!1);break;case"textarea":zt(u),Qe(u);break;case"option":w.value!=null&&u.setAttribute("value",""+et(w.value));break;case"select":u.multiple=!!w.multiple,T=w.value,T!=null?xe(u,!!w.multiple,T,!1):w.defaultValue!=null&&xe(u,!!w.multiple,w.defaultValue,!0);break;default:typeof C.onClick=="function"&&(u.onclick=gm)}switch(g){case"button":case"input":case"select":case"textarea":w=!!w.autoFocus;break e;case"img":w=!0;break e;default:w=!1}}w&&(d.flags|=4)}d.ref!==null&&(d.flags|=512,d.flags|=2097152)}return hi(d),null;case 6:if(u&&d.stateNode!=null)OT(u,d,u.memoizedProps,w);else{if(typeof w!="string"&&d.stateNode===null)throw Error(e(166));if(g=ul(Pd.current),ul(Hr.current),Em(d)){if(w=d.stateNode,g=d.memoizedProps,w[jr]=d,(T=w.nodeValue!==g)&&(u=ts,u!==null))switch(u.tag){case 3:mm(w.nodeValue,g,(u.mode&1)!==0);break;case 5:u.memoizedProps.suppressHydrationWarning!==!0&&mm(w.nodeValue,g,(u.mode&1)!==0)}T&&(d.flags|=4)}else w=(g.nodeType===9?g:g.ownerDocument).createTextNode(w),w[jr]=d,d.stateNode=w}return hi(d),null;case 13:if(nn(mn),w=d.memoizedState,u===null||u.memoizedState!==null&&u.memoizedState.dehydrated!==null){if(hn&&ns!==null&&d.mode&1&&!(d.flags&128))Lx(),Nc(),d.flags|=98560,T=!1;else if(T=Em(d),w!==null&&w.dehydrated!==null){if(u===null){if(!T)throw Error(e(318));if(T=d.memoizedState,T=T!==null?T.dehydrated:null,!T)throw Error(e(317));T[jr]=d}else Nc(),!(d.flags&128)&&(d.memoizedState=null),d.flags|=4;hi(d),T=!1}else nr!==null&&(Hv(nr),nr=null),T=!0;if(!T)return d.flags&65536?d:null}return d.flags&128?(d.lanes=g,d):(w=w!==null,w!==(u!==null&&u.memoizedState!==null)&&w&&(d.child.flags|=8192,d.mode&1&&(u===null||mn.current&1?$n===0&&($n=3):qv())),d.updateQueue!==null&&(d.flags|=4),hi(d),null);case 4:return Dc(),Ov(u,d),u===null&&Ed(d.stateNode.containerInfo),hi(d),null;case 10:return ov(d.type._context),hi(d),null;case 17:return Vi(d.type)&&bm(),hi(d),null;case 19:if(nn(mn),T=d.memoizedState,T===null)return hi(d),null;if(w=(d.flags&128)!==0,I=T.rendering,I===null)if(w)Md(T,!1);else{if($n!==0||u!==null&&u.flags&128)for(u=d.child;u!==null;){if(I=Am(u),I!==null){for(d.flags|=128,Md(T,!1),w=I.updateQueue,w!==null&&(d.updateQueue=w,d.flags|=4),d.subtreeFlags=0,w=g,g=d.child;g!==null;)T=g,u=w,T.flags&=14680066,I=T.alternate,I===null?(T.childLanes=0,T.lanes=u,T.child=null,T.subtreeFlags=0,T.memoizedProps=null,T.memoizedState=null,T.updateQueue=null,T.dependencies=null,T.stateNode=null):(T.childLanes=I.childLanes,T.lanes=I.lanes,T.child=I.child,T.subtreeFlags=0,T.deletions=null,T.memoizedProps=I.memoizedProps,T.memoizedState=I.memoizedState,T.updateQueue=I.updateQueue,T.type=I.type,u=I.dependencies,T.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),g=g.sibling;return Zt(mn,mn.current&1|2),d.child}u=u.sibling}T.tail!==null&&Nt()>zc&&(d.flags|=128,w=!0,Md(T,!1),d.lanes=4194304)}else{if(!w)if(u=Am(I),u!==null){if(d.flags|=128,w=!0,g=u.updateQueue,g!==null&&(d.updateQueue=g,d.flags|=4),Md(T,!0),T.tail===null&&T.tailMode==="hidden"&&!I.alternate&&!hn)return hi(d),null}else 2*Nt()-T.renderingStartTime>zc&&g!==1073741824&&(d.flags|=128,w=!0,Md(T,!1),d.lanes=4194304);T.isBackwards?(I.sibling=d.child,d.child=I):(g=T.last,g!==null?g.sibling=I:d.child=I,T.last=I)}return T.tail!==null?(d=T.tail,T.rendering=d,T.tail=d.sibling,T.renderingStartTime=Nt(),d.sibling=null,g=mn.current,Zt(mn,w?g&1|2:g&1),d):(hi(d),null);case 22:case 23:return Wv(),w=d.memoizedState!==null,u!==null&&u.memoizedState!==null!==w&&(d.flags|=8192),w&&d.mode&1?is&1073741824&&(hi(d),d.subtreeFlags&6&&(d.flags|=8192)):hi(d),null;case 24:return null;case 25:return null}throw Error(e(156,d.tag))}function S6(u,d){switch(ev(d),d.tag){case 1:return Vi(d.type)&&bm(),u=d.flags,u&65536?(d.flags=u&-65537|128,d):null;case 3:return Dc(),nn(Li),nn(ui),fv(),u=d.flags,u&65536&&!(u&128)?(d.flags=u&-65537|128,d):null;case 5:return dv(d),null;case 13:if(nn(mn),u=d.memoizedState,u!==null&&u.dehydrated!==null){if(d.alternate===null)throw Error(e(340));Nc()}return u=d.flags,u&65536?(d.flags=u&-65537|128,d):null;case 19:return nn(mn),null;case 4:return Dc(),null;case 10:return ov(d.type._context),null;case 22:case 23:return Wv(),null;case 24:return null;default:return null}}var Dm=!1,fi=!1,A6=typeof WeakSet=="function"?WeakSet:Set,ze=null;function Fc(u,d){var g=u.ref;if(g!==null)if(typeof g=="function")try{g(null)}catch(w){yn(u,d,w)}else g.current=null}function Nv(u,d,g){try{g()}catch(w){yn(u,d,w)}}var NT=!1;function P6(u,d){if(Ww=en,u=dx(),Dw(u)){if("selectionStart"in u)var g={start:u.selectionStart,end:u.selectionEnd};else e:{g=(g=u.ownerDocument)&&g.defaultView||window;var w=g.getSelection&&g.getSelection();if(w&&w.rangeCount!==0){g=w.anchorNode;var C=w.anchorOffset,T=w.focusNode;w=w.focusOffset;try{g.nodeType,T.nodeType}catch{g=null;break e}var I=0,D=-1,H=-1,ne=0,we=0,Ce=u,pe=null;t:for(;;){for(var De;Ce!==g||C!==0&&Ce.nodeType!==3||(D=I+C),Ce!==T||w!==0&&Ce.nodeType!==3||(H=I+w),Ce.nodeType===3&&(I+=Ce.nodeValue.length),(De=Ce.firstChild)!==null;)pe=Ce,Ce=De;for(;;){if(Ce===u)break t;if(pe===g&&++ne===C&&(D=I),pe===T&&++we===w&&(H=I),(De=Ce.nextSibling)!==null)break;Ce=pe,pe=Ce.parentNode}Ce=De}g=D===-1||H===-1?null:{start:D,end:H}}else g=null}g=g||{start:0,end:0}}else g=null;for(qw={focusedElem:u,selectionRange:g},en=!1,ze=d;ze!==null;)if(d=ze,u=d.child,(d.subtreeFlags&1028)!==0&&u!==null)u.return=d,ze=u;else for(;ze!==null;){d=ze;try{var We=d.alternate;if(d.flags&1024)switch(d.tag){case 0:case 11:case 15:break;case 1:if(We!==null){var Ge=We.memoizedProps,An=We.memoizedState,Z=d.stateNode,W=Z.getSnapshotBeforeUpdate(d.elementType===d.type?Ge:ir(d.type,Ge),An);Z.__reactInternalSnapshotBeforeUpdate=W}break;case 3:var J=d.stateNode.containerInfo;J.nodeType===1?J.textContent="":J.nodeType===9&&J.documentElement&&J.removeChild(J.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(e(163))}}catch(Te){yn(d,d.return,Te)}if(u=d.sibling,u!==null){u.return=d.return,ze=u;break}ze=d.return}return We=NT,NT=!1,We}function Ld(u,d,g){var w=d.updateQueue;if(w=w!==null?w.lastEffect:null,w!==null){var C=w=w.next;do{if((C.tag&u)===u){var T=C.destroy;C.destroy=void 0,T!==void 0&&Nv(d,g,T)}C=C.next}while(C!==w)}}function Bm(u,d){if(d=d.updateQueue,d=d!==null?d.lastEffect:null,d!==null){var g=d=d.next;do{if((g.tag&u)===u){var w=g.create;g.destroy=w()}g=g.next}while(g!==d)}}function Mv(u){var d=u.ref;if(d!==null){var g=u.stateNode;switch(u.tag){case 5:u=g;break;default:u=g}typeof d=="function"?d(u):d.current=u}}function MT(u){var d=u.alternate;d!==null&&(u.alternate=null,MT(d)),u.child=null,u.deletions=null,u.sibling=null,u.tag===5&&(d=u.stateNode,d!==null&&(delete d[jr],delete d[xd],delete d[Zw],delete d[d6],delete d[h6])),u.stateNode=null,u.return=null,u.dependencies=null,u.memoizedProps=null,u.memoizedState=null,u.pendingProps=null,u.stateNode=null,u.updateQueue=null}function LT(u){return u.tag===5||u.tag===3||u.tag===4}function VT(u){e:for(;;){for(;u.sibling===null;){if(u.return===null||LT(u.return))return null;u=u.return}for(u.sibling.return=u.return,u=u.sibling;u.tag!==5&&u.tag!==6&&u.tag!==18;){if(u.flags&2||u.child===null||u.tag===4)continue e;u.child.return=u,u=u.child}if(!(u.flags&2))return u.stateNode}}function Lv(u,d,g){var w=u.tag;if(w===5||w===6)u=u.stateNode,d?g.nodeType===8?g.parentNode.insertBefore(u,d):g.insertBefore(u,d):(g.nodeType===8?(d=g.parentNode,d.insertBefore(u,g)):(d=g,d.appendChild(u)),g=g._reactRootContainer,g!=null||d.onclick!==null||(d.onclick=gm));else if(w!==4&&(u=u.child,u!==null))for(Lv(u,d,g),u=u.sibling;u!==null;)Lv(u,d,g),u=u.sibling}function Vv(u,d,g){var w=u.tag;if(w===5||w===6)u=u.stateNode,d?g.insertBefore(u,d):g.appendChild(u);else if(w!==4&&(u=u.child,u!==null))for(Vv(u,d,g),u=u.sibling;u!==null;)Vv(u,d,g),u=u.sibling}var ei=null,sr=!1;function fa(u,d,g){for(g=g.child;g!==null;)DT(u,d,g),g=g.sibling}function DT(u,d,g){if(Bn&&typeof Bn.onCommitFiberUnmount=="function")try{Bn.onCommitFiberUnmount(Gt,g)}catch{}switch(g.tag){case 5:fi||Fc(g,d);case 6:var w=ei,C=sr;ei=null,fa(u,d,g),ei=w,sr=C,ei!==null&&(sr?(u=ei,g=g.stateNode,u.nodeType===8?u.parentNode.removeChild(g):u.removeChild(g)):ei.removeChild(g.stateNode));break;case 18:ei!==null&&(sr?(u=ei,g=g.stateNode,u.nodeType===8?Yw(u.parentNode,g):u.nodeType===1&&Yw(u,g),ge(u)):Yw(ei,g.stateNode));break;case 4:w=ei,C=sr,ei=g.stateNode.containerInfo,sr=!0,fa(u,d,g),ei=w,sr=C;break;case 0:case 11:case 14:case 15:if(!fi&&(w=g.updateQueue,w!==null&&(w=w.lastEffect,w!==null))){C=w=w.next;do{var T=C,I=T.destroy;T=T.tag,I!==void 0&&(T&2||T&4)&&Nv(g,d,I),C=C.next}while(C!==w)}fa(u,d,g);break;case 1:if(!fi&&(Fc(g,d),w=g.stateNode,typeof w.componentWillUnmount=="function"))try{w.props=g.memoizedProps,w.state=g.memoizedState,w.componentWillUnmount()}catch(D){yn(g,d,D)}fa(u,d,g);break;case 21:fa(u,d,g);break;case 22:g.mode&1?(fi=(w=fi)||g.memoizedState!==null,fa(u,d,g),fi=w):fa(u,d,g);break;default:fa(u,d,g)}}function BT(u){var d=u.updateQueue;if(d!==null){u.updateQueue=null;var g=u.stateNode;g===null&&(g=u.stateNode=new A6),d.forEach(function(w){var C=B6.bind(null,u,w);g.has(w)||(g.add(w),w.then(C,C))})}}function rr(u,d){var g=d.deletions;if(g!==null)for(var w=0;w<g.length;w++){var C=g[w];try{var T=u,I=d,D=I;e:for(;D!==null;){switch(D.tag){case 5:ei=D.stateNode,sr=!1;break e;case 3:ei=D.stateNode.containerInfo,sr=!0;break e;case 4:ei=D.stateNode.containerInfo,sr=!0;break e}D=D.return}if(ei===null)throw Error(e(160));DT(T,I,C),ei=null,sr=!1;var H=C.alternate;H!==null&&(H.return=null),C.return=null}catch(ne){yn(C,d,ne)}}if(d.subtreeFlags&12854)for(d=d.child;d!==null;)FT(d,u),d=d.sibling}function FT(u,d){var g=u.alternate,w=u.flags;switch(u.tag){case 0:case 11:case 14:case 15:if(rr(d,u),Wr(u),w&4){try{Ld(3,u,u.return),Bm(3,u)}catch(Ge){yn(u,u.return,Ge)}try{Ld(5,u,u.return)}catch(Ge){yn(u,u.return,Ge)}}break;case 1:rr(d,u),Wr(u),w&512&&g!==null&&Fc(g,g.return);break;case 5:if(rr(d,u),Wr(u),w&512&&g!==null&&Fc(g,g.return),u.flags&32){var C=u.stateNode;try{cn(C,"")}catch(Ge){yn(u,u.return,Ge)}}if(w&4&&(C=u.stateNode,C!=null)){var T=u.memoizedProps,I=g!==null?g.memoizedProps:T,D=u.type,H=u.updateQueue;if(u.updateQueue=null,H!==null)try{D==="input"&&T.type==="radio"&&T.name!=null&&Ji(C,T),Xs(D,I);var ne=Xs(D,T);for(I=0;I<H.length;I+=2){var we=H[I],Ce=H[I+1];we==="style"?Sn(C,Ce):we==="dangerouslySetInnerHTML"?Et(C,Ce):we==="children"?cn(C,Ce):A(C,we,Ce,ne)}switch(D){case"input":Qn(C,T);break;case"textarea":Me(C,T);break;case"select":var pe=C._wrapperState.wasMultiple;C._wrapperState.wasMultiple=!!T.multiple;var De=T.value;De!=null?xe(C,!!T.multiple,De,!1):pe!==!!T.multiple&&(T.defaultValue!=null?xe(C,!!T.multiple,T.defaultValue,!0):xe(C,!!T.multiple,T.multiple?[]:"",!1))}C[xd]=T}catch(Ge){yn(u,u.return,Ge)}}break;case 6:if(rr(d,u),Wr(u),w&4){if(u.stateNode===null)throw Error(e(162));C=u.stateNode,T=u.memoizedProps;try{C.nodeValue=T}catch(Ge){yn(u,u.return,Ge)}}break;case 3:if(rr(d,u),Wr(u),w&4&&g!==null&&g.memoizedState.isDehydrated)try{ge(d.containerInfo)}catch(Ge){yn(u,u.return,Ge)}break;case 4:rr(d,u),Wr(u);break;case 13:rr(d,u),Wr(u),C=u.child,C.flags&8192&&(T=C.memoizedState!==null,C.stateNode.isHidden=T,!T||C.alternate!==null&&C.alternate.memoizedState!==null||(Fv=Nt())),w&4&&BT(u);break;case 22:if(we=g!==null&&g.memoizedState!==null,u.mode&1?(fi=(ne=fi)||we,rr(d,u),fi=ne):rr(d,u),Wr(u),w&8192){if(ne=u.memoizedState!==null,(u.stateNode.isHidden=ne)&&!we&&u.mode&1)for(ze=u,we=u.child;we!==null;){for(Ce=ze=we;ze!==null;){switch(pe=ze,De=pe.child,pe.tag){case 0:case 11:case 14:case 15:Ld(4,pe,pe.return);break;case 1:Fc(pe,pe.return);var We=pe.stateNode;if(typeof We.componentWillUnmount=="function"){w=pe,g=pe.return;try{d=w,We.props=d.memoizedProps,We.state=d.memoizedState,We.componentWillUnmount()}catch(Ge){yn(w,g,Ge)}}break;case 5:Fc(pe,pe.return);break;case 22:if(pe.memoizedState!==null){jT(Ce);continue}}De!==null?(De.return=pe,ze=De):jT(Ce)}we=we.sibling}e:for(we=null,Ce=u;;){if(Ce.tag===5){if(we===null){we=Ce;try{C=Ce.stateNode,ne?(T=C.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none"):(D=Ce.stateNode,H=Ce.memoizedProps.style,I=H!=null&&H.hasOwnProperty("display")?H.display:null,D.style.display=Je("display",I))}catch(Ge){yn(u,u.return,Ge)}}}else if(Ce.tag===6){if(we===null)try{Ce.stateNode.nodeValue=ne?"":Ce.memoizedProps}catch(Ge){yn(u,u.return,Ge)}}else if((Ce.tag!==22&&Ce.tag!==23||Ce.memoizedState===null||Ce===u)&&Ce.child!==null){Ce.child.return=Ce,Ce=Ce.child;continue}if(Ce===u)break e;for(;Ce.sibling===null;){if(Ce.return===null||Ce.return===u)break e;we===Ce&&(we=null),Ce=Ce.return}we===Ce&&(we=null),Ce.sibling.return=Ce.return,Ce=Ce.sibling}}break;case 19:rr(d,u),Wr(u),w&4&&BT(u);break;case 21:break;default:rr(d,u),Wr(u)}}function Wr(u){var d=u.flags;if(d&2){try{e:{for(var g=u.return;g!==null;){if(LT(g)){var w=g;break e}g=g.return}throw Error(e(160))}switch(w.tag){case 5:var C=w.stateNode;w.flags&32&&(cn(C,""),w.flags&=-33);var T=VT(u);Vv(u,T,C);break;case 3:case 4:var I=w.stateNode.containerInfo,D=VT(u);Lv(u,D,I);break;default:throw Error(e(161))}}catch(H){yn(u,u.return,H)}u.flags&=-3}d&4096&&(u.flags&=-4097)}function I6(u,d,g){ze=u,$T(u)}function $T(u,d,g){for(var w=(u.mode&1)!==0;ze!==null;){var C=ze,T=C.child;if(C.tag===22&&w){var I=C.memoizedState!==null||Dm;if(!I){var D=C.alternate,H=D!==null&&D.memoizedState!==null||fi;D=Dm;var ne=fi;if(Dm=I,(fi=H)&&!ne)for(ze=C;ze!==null;)I=ze,H=I.child,I.tag===22&&I.memoizedState!==null?HT(C):H!==null?(H.return=I,ze=H):HT(C);for(;T!==null;)ze=T,$T(T),T=T.sibling;ze=C,Dm=D,fi=ne}zT(u)}else C.subtreeFlags&8772&&T!==null?(T.return=C,ze=T):zT(u)}}function zT(u){for(;ze!==null;){var d=ze;if(d.flags&8772){var g=d.alternate;try{if(d.flags&8772)switch(d.tag){case 0:case 11:case 15:fi||Bm(5,d);break;case 1:var w=d.stateNode;if(d.flags&4&&!fi)if(g===null)w.componentDidMount();else{var C=d.elementType===d.type?g.memoizedProps:ir(d.type,g.memoizedProps);w.componentDidUpdate(C,g.memoizedState,w.__reactInternalSnapshotBeforeUpdate)}var T=d.updateQueue;T!==null&&jx(d,T,w);break;case 3:var I=d.updateQueue;if(I!==null){if(g=null,d.child!==null)switch(d.child.tag){case 5:g=d.child.stateNode;break;case 1:g=d.child.stateNode}jx(d,I,g)}break;case 5:var D=d.stateNode;if(g===null&&d.flags&4){g=D;var H=d.memoizedProps;switch(d.type){case"button":case"input":case"select":case"textarea":H.autoFocus&&g.focus();break;case"img":H.src&&(g.src=H.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(d.memoizedState===null){var ne=d.alternate;if(ne!==null){var we=ne.memoizedState;if(we!==null){var Ce=we.dehydrated;Ce!==null&&ge(Ce)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(e(163))}fi||d.flags&512&&Mv(d)}catch(pe){yn(d,d.return,pe)}}if(d===u){ze=null;break}if(g=d.sibling,g!==null){g.return=d.return,ze=g;break}ze=d.return}}function jT(u){for(;ze!==null;){var d=ze;if(d===u){ze=null;break}var g=d.sibling;if(g!==null){g.return=d.return,ze=g;break}ze=d.return}}function HT(u){for(;ze!==null;){var d=ze;try{switch(d.tag){case 0:case 11:case 15:var g=d.return;try{Bm(4,d)}catch(H){yn(d,g,H)}break;case 1:var w=d.stateNode;if(typeof w.componentDidMount=="function"){var C=d.return;try{w.componentDidMount()}catch(H){yn(d,C,H)}}var T=d.return;try{Mv(d)}catch(H){yn(d,T,H)}break;case 5:var I=d.return;try{Mv(d)}catch(H){yn(d,I,H)}}}catch(H){yn(d,d.return,H)}if(d===u){ze=null;break}var D=d.sibling;if(D!==null){D.return=d.return,ze=D;break}ze=d.return}}var R6=Math.ceil,Fm=S.ReactCurrentDispatcher,Dv=S.ReactCurrentOwner,Os=S.ReactCurrentBatchConfig,Pt=0,Un=null,Rn=null,ti=0,is=0,$c=la(0),$n=0,Vd=null,hl=0,$m=0,Bv=0,Dd=null,Bi=null,Fv=0,zc=1/0,Eo=null,zm=!1,$v=null,ma=null,jm=!1,ga=null,Hm=0,Bd=0,zv=null,Um=-1,Wm=0;function Ci(){return Pt&6?Nt():Um!==-1?Um:Um=Nt()}function pa(u){return u.mode&1?Pt&2&&ti!==0?ti&-ti:m6.transition!==null?(Wm===0&&(Wm=Zf()),Wm):(u=Lt,u!==0||(u=window.event,u=u===void 0?16:fd(u.type)),u):1}function or(u,d,g,w){if(50<Bd)throw Bd=0,zv=null,Error(e(185));tl(u,g,w),(!(Pt&2)||u!==Un)&&(u===Un&&(!(Pt&2)&&($m|=g),$n===4&&ba(u,ti)),Fi(u,w),g===1&&Pt===0&&!(d.mode&1)&&(zc=Nt()+500,vm&&ua()))}function Fi(u,d){var g=u.callbackNode;kw(u,d);var w=pc(u,u===Un?ti:0);if(w===0)g!==null&&li(g),u.callbackNode=null,u.callbackPriority=0;else if(d=w&-w,u.callbackPriority!==d){if(g!=null&&li(g),d===1)u.tag===0?f6(WT.bind(null,u)):Ix(WT.bind(null,u)),c6(function(){!(Pt&6)&&ua()}),g=null;else{switch(Xf(w)){case 1:g=Vr;break;case 4:g=Mt;break;case 16:g=dn;break;case 536870912:g=Dr;break;default:g=dn}g=QT(g,UT.bind(null,u))}u.callbackPriority=d,u.callbackNode=g}}function UT(u,d){if(Um=-1,Wm=0,Pt&6)throw Error(e(327));var g=u.callbackNode;if(jc()&&u.callbackNode!==g)return null;var w=pc(u,u===Un?ti:0);if(w===0)return null;if(w&30||w&u.expiredLanes||d)d=qm(u,w);else{d=w;var C=Pt;Pt|=2;var T=GT();(Un!==u||ti!==d)&&(Eo=null,zc=Nt()+500,ml(u,d));do try{M6();break}catch(D){qT(u,D)}while(!0);rv(),Fm.current=T,Pt=C,Rn!==null?d=0:(Un=null,ti=0,d=$n)}if(d!==0){if(d===2&&(C=ad(u),C!==0&&(w=C,d=jv(u,C))),d===1)throw g=Vd,ml(u,0),ba(u,w),Fi(u,Nt()),g;if(d===6)ba(u,w);else{if(C=u.current.alternate,!(w&30)&&!O6(C)&&(d=qm(u,w),d===2&&(T=ad(u),T!==0&&(w=T,d=jv(u,T))),d===1))throw g=Vd,ml(u,0),ba(u,w),Fi(u,Nt()),g;switch(u.finishedWork=C,u.finishedLanes=w,d){case 0:case 1:throw Error(e(345));case 2:gl(u,Bi,Eo);break;case 3:if(ba(u,w),(w&130023424)===w&&(d=Fv+500-Nt(),10<d)){if(pc(u,0)!==0)break;if(C=u.suspendedLanes,(C&w)!==w){Ci(),u.pingedLanes|=u.suspendedLanes&C;break}u.timeoutHandle=Kw(gl.bind(null,u,Bi,Eo),d);break}gl(u,Bi,Eo);break;case 4:if(ba(u,w),(w&4194240)===w)break;for(d=u.eventTimes,C=-1;0<w;){var I=31-_i(w);T=1<<I,I=d[I],I>C&&(C=I),w&=~T}if(w=C,w=Nt()-w,w=(120>w?120:480>w?480:1080>w?1080:1920>w?1920:3e3>w?3e3:4320>w?4320:1960*R6(w/1960))-w,10<w){u.timeoutHandle=Kw(gl.bind(null,u,Bi,Eo),w);break}gl(u,Bi,Eo);break;case 5:gl(u,Bi,Eo);break;default:throw Error(e(329))}}}return Fi(u,Nt()),u.callbackNode===g?UT.bind(null,u):null}function jv(u,d){var g=Dd;return u.current.memoizedState.isDehydrated&&(ml(u,d).flags|=256),u=qm(u,d),u!==2&&(d=Bi,Bi=g,d!==null&&Hv(d)),u}function Hv(u){Bi===null?Bi=u:Bi.push.apply(Bi,u)}function O6(u){for(var d=u;;){if(d.flags&16384){var g=d.updateQueue;if(g!==null&&(g=g.stores,g!==null))for(var w=0;w<g.length;w++){var C=g[w],T=C.getSnapshot;C=C.value;try{if(!tr(T(),C))return!1}catch{return!1}}}if(g=d.child,d.subtreeFlags&16384&&g!==null)g.return=d,d=g;else{if(d===u)break;for(;d.sibling===null;){if(d.return===null||d.return===u)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function ba(u,d){for(d&=~Bv,d&=~$m,u.suspendedLanes|=d,u.pingedLanes&=~d,u=u.expirationTimes;0<d;){var g=31-_i(d),w=1<<g;u[g]=-1,d&=~w}}function WT(u){if(Pt&6)throw Error(e(327));jc();var d=pc(u,0);if(!(d&1))return Fi(u,Nt()),null;var g=qm(u,d);if(u.tag!==0&&g===2){var w=ad(u);w!==0&&(d=w,g=jv(u,w))}if(g===1)throw g=Vd,ml(u,0),ba(u,d),Fi(u,Nt()),g;if(g===6)throw Error(e(345));return u.finishedWork=u.current.alternate,u.finishedLanes=d,gl(u,Bi,Eo),Fi(u,Nt()),null}function Uv(u,d){var g=Pt;Pt|=1;try{return u(d)}finally{Pt=g,Pt===0&&(zc=Nt()+500,vm&&ua())}}function fl(u){ga!==null&&ga.tag===0&&!(Pt&6)&&jc();var d=Pt;Pt|=1;var g=Os.transition,w=Lt;try{if(Os.transition=null,Lt=1,u)return u()}finally{Lt=w,Os.transition=g,Pt=d,!(Pt&6)&&ua()}}function Wv(){is=$c.current,nn($c)}function ml(u,d){u.finishedWork=null,u.finishedLanes=0;var g=u.timeoutHandle;if(g!==-1&&(u.timeoutHandle=-1,l6(g)),Rn!==null)for(g=Rn.return;g!==null;){var w=g;switch(ev(w),w.tag){case 1:w=w.type.childContextTypes,w!=null&&bm();break;case 3:Dc(),nn(Li),nn(ui),fv();break;case 5:dv(w);break;case 4:Dc();break;case 13:nn(mn);break;case 19:nn(mn);break;case 10:ov(w.type._context);break;case 22:case 23:Wv()}g=g.return}if(Un=u,Rn=u=wa(u.current,null),ti=is=d,$n=0,Vd=null,Bv=$m=hl=0,Bi=Dd=null,cl!==null){for(d=0;d<cl.length;d++)if(g=cl[d],w=g.interleaved,w!==null){g.interleaved=null;var C=w.next,T=g.pending;if(T!==null){var I=T.next;T.next=C,w.next=I}g.pending=w}cl=null}return u}function qT(u,d){do{var g=Rn;try{if(rv(),Pm.current=Nm,Im){for(var w=gn.memoizedState;w!==null;){var C=w.queue;C!==null&&(C.pending=null),w=w.next}Im=!1}if(dl=0,Hn=Fn=gn=null,Id=!1,Rd=0,Dv.current=null,g===null||g.return===null){$n=1,Vd=d,Rn=null;break}e:{var T=u,I=g.return,D=g,H=d;if(d=ti,D.flags|=32768,H!==null&&typeof H=="object"&&typeof H.then=="function"){var ne=H,we=D,Ce=we.tag;if(!(we.mode&1)&&(Ce===0||Ce===11||Ce===15)){var pe=we.alternate;pe?(we.updateQueue=pe.updateQueue,we.memoizedState=pe.memoizedState,we.lanes=pe.lanes):(we.updateQueue=null,we.memoizedState=null)}var De=bT(I);if(De!==null){De.flags&=-257,wT(De,I,D,T,d),De.mode&1&&pT(T,ne,d),d=De,H=ne;var We=d.updateQueue;if(We===null){var Ge=new Set;Ge.add(H),d.updateQueue=Ge}else We.add(H);break e}else{if(!(d&1)){pT(T,ne,d),qv();break e}H=Error(e(426))}}else if(hn&&D.mode&1){var An=bT(I);if(An!==null){!(An.flags&65536)&&(An.flags|=256),wT(An,I,D,T,d),iv(Bc(H,D));break e}}T=H=Bc(H,D),$n!==4&&($n=2),Dd===null?Dd=[T]:Dd.push(T),T=I;do{switch(T.tag){case 3:T.flags|=65536,d&=-d,T.lanes|=d;var Z=mT(T,H,d);zx(T,Z);break e;case 1:D=H;var W=T.type,J=T.stateNode;if(!(T.flags&128)&&(typeof W.getDerivedStateFromError=="function"||J!==null&&typeof J.componentDidCatch=="function"&&(ma===null||!ma.has(J)))){T.flags|=65536,d&=-d,T.lanes|=d;var Te=gT(T,D,d);zx(T,Te);break e}}T=T.return}while(T!==null)}YT(g)}catch(Ze){d=Ze,Rn===g&&g!==null&&(Rn=g=g.return);continue}break}while(!0)}function GT(){var u=Fm.current;return Fm.current=Nm,u===null?Nm:u}function qv(){($n===0||$n===3||$n===2)&&($n=4),Un===null||!(hl&268435455)&&!($m&268435455)||ba(Un,ti)}function qm(u,d){var g=Pt;Pt|=2;var w=GT();(Un!==u||ti!==d)&&(Eo=null,ml(u,d));do try{N6();break}catch(C){qT(u,C)}while(!0);if(rv(),Pt=g,Fm.current=w,Rn!==null)throw Error(e(261));return Un=null,ti=0,$n}function N6(){for(;Rn!==null;)KT(Rn)}function M6(){for(;Rn!==null&&!ia();)KT(Rn)}function KT(u){var d=JT(u.alternate,u,is);u.memoizedProps=u.pendingProps,d===null?YT(u):Rn=d,Dv.current=null}function YT(u){var d=u;do{var g=d.alternate;if(u=d.return,d.flags&32768){if(g=S6(g,d),g!==null){g.flags&=32767,Rn=g;return}if(u!==null)u.flags|=32768,u.subtreeFlags=0,u.deletions=null;else{$n=6,Rn=null;return}}else if(g=k6(g,d,is),g!==null){Rn=g;return}if(d=d.sibling,d!==null){Rn=d;return}Rn=d=u}while(d!==null);$n===0&&($n=5)}function gl(u,d,g){var w=Lt,C=Os.transition;try{Os.transition=null,Lt=1,L6(u,d,g,w)}finally{Os.transition=C,Lt=w}return null}function L6(u,d,g,w){do jc();while(ga!==null);if(Pt&6)throw Error(e(327));g=u.finishedWork;var C=u.finishedLanes;if(g===null)return null;if(u.finishedWork=null,u.finishedLanes=0,g===u.current)throw Error(e(177));u.callbackNode=null,u.callbackPriority=0;var T=g.lanes|g.childLanes;if(Sw(u,T),u===Un&&(Rn=Un=null,ti=0),!(g.subtreeFlags&2064)&&!(g.flags&2064)||jm||(jm=!0,QT(dn,function(){return jc(),null})),T=(g.flags&15990)!==0,g.subtreeFlags&15990||T){T=Os.transition,Os.transition=null;var I=Lt;Lt=1;var D=Pt;Pt|=4,Dv.current=null,P6(u,g),FT(g,u),t6(qw),en=!!Ww,qw=Ww=null,u.current=g,I6(g),Lr(),Pt=D,Lt=I,Os.transition=T}else u.current=g;if(jm&&(jm=!1,ga=u,Hm=C),T=u.pendingLanes,T===0&&(ma=null),fc(g.stateNode),Fi(u,Nt()),d!==null)for(w=u.onRecoverableError,g=0;g<d.length;g++)C=d[g],w(C.value,{componentStack:C.stack,digest:C.digest});if(zm)throw zm=!1,u=$v,$v=null,u;return Hm&1&&u.tag!==0&&jc(),T=u.pendingLanes,T&1?u===zv?Bd++:(Bd=0,zv=u):Bd=0,ua(),null}function jc(){if(ga!==null){var u=Xf(Hm),d=Os.transition,g=Lt;try{if(Os.transition=null,Lt=16>u?16:u,ga===null)var w=!1;else{if(u=ga,ga=null,Hm=0,Pt&6)throw Error(e(331));var C=Pt;for(Pt|=4,ze=u.current;ze!==null;){var T=ze,I=T.child;if(ze.flags&16){var D=T.deletions;if(D!==null){for(var H=0;H<D.length;H++){var ne=D[H];for(ze=ne;ze!==null;){var we=ze;switch(we.tag){case 0:case 11:case 15:Ld(8,we,T)}var Ce=we.child;if(Ce!==null)Ce.return=we,ze=Ce;else for(;ze!==null;){we=ze;var pe=we.sibling,De=we.return;if(MT(we),we===ne){ze=null;break}if(pe!==null){pe.return=De,ze=pe;break}ze=De}}}var We=T.alternate;if(We!==null){var Ge=We.child;if(Ge!==null){We.child=null;do{var An=Ge.sibling;Ge.sibling=null,Ge=An}while(Ge!==null)}}ze=T}}if(T.subtreeFlags&2064&&I!==null)I.return=T,ze=I;else e:for(;ze!==null;){if(T=ze,T.flags&2048)switch(T.tag){case 0:case 11:case 15:Ld(9,T,T.return)}var Z=T.sibling;if(Z!==null){Z.return=T.return,ze=Z;break e}ze=T.return}}var W=u.current;for(ze=W;ze!==null;){I=ze;var J=I.child;if(I.subtreeFlags&2064&&J!==null)J.return=I,ze=J;else e:for(I=W;ze!==null;){if(D=ze,D.flags&2048)try{switch(D.tag){case 0:case 11:case 15:Bm(9,D)}}catch(Ze){yn(D,D.return,Ze)}if(D===I){ze=null;break e}var Te=D.sibling;if(Te!==null){Te.return=D.return,ze=Te;break e}ze=D.return}}if(Pt=C,ua(),Bn&&typeof Bn.onPostCommitFiberRoot=="function")try{Bn.onPostCommitFiberRoot(Gt,u)}catch{}w=!0}return w}finally{Lt=g,Os.transition=d}}return!1}function ZT(u,d,g){d=Bc(g,d),d=mT(u,d,1),u=ha(u,d,1),d=Ci(),u!==null&&(tl(u,1,d),Fi(u,d))}function yn(u,d,g){if(u.tag===3)ZT(u,u,g);else for(;d!==null;){if(d.tag===3){ZT(d,u,g);break}else if(d.tag===1){var w=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof w.componentDidCatch=="function"&&(ma===null||!ma.has(w))){u=Bc(g,u),u=gT(d,u,1),d=ha(d,u,1),u=Ci(),d!==null&&(tl(d,1,u),Fi(d,u));break}}d=d.return}}function V6(u,d,g){var w=u.pingCache;w!==null&&w.delete(d),d=Ci(),u.pingedLanes|=u.suspendedLanes&g,Un===u&&(ti&g)===g&&($n===4||$n===3&&(ti&130023424)===ti&&500>Nt()-Fv?ml(u,0):Bv|=g),Fi(u,d)}function XT(u,d){d===0&&(u.mode&1?(d=gc,gc<<=1,!(gc&130023424)&&(gc=4194304)):d=1);var g=Ci();u=vo(u,d),u!==null&&(tl(u,d,g),Fi(u,g))}function D6(u){var d=u.memoizedState,g=0;d!==null&&(g=d.retryLane),XT(u,g)}function B6(u,d){var g=0;switch(u.tag){case 13:var w=u.stateNode,C=u.memoizedState;C!==null&&(g=C.retryLane);break;case 19:w=u.stateNode;break;default:throw Error(e(314))}w!==null&&w.delete(d),XT(u,g)}var JT;JT=function(u,d,g){if(u!==null)if(u.memoizedProps!==d.pendingProps||Li.current)Di=!0;else{if(!(u.lanes&g)&&!(d.flags&128))return Di=!1,T6(u,d,g);Di=!!(u.flags&131072)}else Di=!1,hn&&d.flags&1048576&&Rx(d,_m,d.index);switch(d.lanes=0,d.tag){case 2:var w=d.type;Vm(u,d),u=d.pendingProps;var C=Ic(d,ui.current);Vc(d,g),C=pv(null,d,w,u,C,g);var T=bv();return d.flags|=1,typeof C=="object"&&C!==null&&typeof C.render=="function"&&C.$$typeof===void 0?(d.tag=1,d.memoizedState=null,d.updateQueue=null,Vi(w)?(T=!0,wm(d)):T=!1,d.memoizedState=C.state!==null&&C.state!==void 0?C.state:null,cv(d),C.updater=Mm,d.stateNode=C,C._reactInternals=d,Cv(d,w,u,g),d=Sv(null,d,w,!0,T,g)):(d.tag=0,hn&&T&&Qw(d),Ei(null,d,C,g),d=d.child),d;case 16:w=d.elementType;e:{switch(Vm(u,d),u=d.pendingProps,C=w._init,w=C(w._payload),d.type=w,C=d.tag=$6(w),u=ir(w,u),C){case 0:d=kv(null,d,w,u,g);break e;case 1:d=xT(null,d,w,u,g);break e;case 11:d=vT(null,d,w,u,g);break e;case 14:d=yT(null,d,w,ir(w.type,u),g);break e}throw Error(e(306,w,""))}return d;case 0:return w=d.type,C=d.pendingProps,C=d.elementType===w?C:ir(w,C),kv(u,d,w,C,g);case 1:return w=d.type,C=d.pendingProps,C=d.elementType===w?C:ir(w,C),xT(u,d,w,C,g);case 3:e:{if(TT(d),u===null)throw Error(e(387));w=d.pendingProps,T=d.memoizedState,C=T.element,$x(u,d),Sm(d,w,null,g);var I=d.memoizedState;if(w=I.element,T.isDehydrated)if(T={element:w,isDehydrated:!1,cache:I.cache,pendingSuspenseBoundaries:I.pendingSuspenseBoundaries,transitions:I.transitions},d.updateQueue.baseState=T,d.memoizedState=T,d.flags&256){C=Bc(Error(e(423)),d),d=kT(u,d,w,g,C);break e}else if(w!==C){C=Bc(Error(e(424)),d),d=kT(u,d,w,g,C);break e}else for(ns=aa(d.stateNode.containerInfo.firstChild),ts=d,hn=!0,nr=null,g=Bx(d,null,w,g),d.child=g;g;)g.flags=g.flags&-3|4096,g=g.sibling;else{if(Nc(),w===C){d=_o(u,d,g);break e}Ei(u,d,w,g)}d=d.child}return d;case 5:return Hx(d),u===null&&nv(d),w=d.type,C=d.pendingProps,T=u!==null?u.memoizedProps:null,I=C.children,Gw(w,C)?I=null:T!==null&&Gw(w,T)&&(d.flags|=32),CT(u,d),Ei(u,d,I,g),d.child;case 6:return u===null&&nv(d),null;case 13:return ST(u,d,g);case 4:return uv(d,d.stateNode.containerInfo),w=d.pendingProps,u===null?d.child=Mc(d,null,w,g):Ei(u,d,w,g),d.child;case 11:return w=d.type,C=d.pendingProps,C=d.elementType===w?C:ir(w,C),vT(u,d,w,C,g);case 7:return Ei(u,d,d.pendingProps,g),d.child;case 8:return Ei(u,d,d.pendingProps.children,g),d.child;case 12:return Ei(u,d,d.pendingProps.children,g),d.child;case 10:e:{if(w=d.type._context,C=d.pendingProps,T=d.memoizedProps,I=C.value,Zt(xm,w._currentValue),w._currentValue=I,T!==null)if(tr(T.value,I)){if(T.children===C.children&&!Li.current){d=_o(u,d,g);break e}}else for(T=d.child,T!==null&&(T.return=d);T!==null;){var D=T.dependencies;if(D!==null){I=T.child;for(var H=D.firstContext;H!==null;){if(H.context===w){if(T.tag===1){H=yo(-1,g&-g),H.tag=2;var ne=T.updateQueue;if(ne!==null){ne=ne.shared;var we=ne.pending;we===null?H.next=H:(H.next=we.next,we.next=H),ne.pending=H}}T.lanes|=g,H=T.alternate,H!==null&&(H.lanes|=g),av(T.return,g,d),D.lanes|=g;break}H=H.next}}else if(T.tag===10)I=T.type===d.type?null:T.child;else if(T.tag===18){if(I=T.return,I===null)throw Error(e(341));I.lanes|=g,D=I.alternate,D!==null&&(D.lanes|=g),av(I,g,d),I=T.sibling}else I=T.child;if(I!==null)I.return=T;else for(I=T;I!==null;){if(I===d){I=null;break}if(T=I.sibling,T!==null){T.return=I.return,I=T;break}I=I.return}T=I}Ei(u,d,C.children,g),d=d.child}return d;case 9:return C=d.type,w=d.pendingProps.children,Vc(d,g),C=Is(C),w=w(C),d.flags|=1,Ei(u,d,w,g),d.child;case 14:return w=d.type,C=ir(w,d.pendingProps),C=ir(w.type,C),yT(u,d,w,C,g);case 15:return _T(u,d,d.type,d.pendingProps,g);case 17:return w=d.type,C=d.pendingProps,C=d.elementType===w?C:ir(w,C),Vm(u,d),d.tag=1,Vi(w)?(u=!0,wm(d)):u=!1,Vc(d,g),hT(d,w,C),Cv(d,w,C,g),Sv(null,d,w,!0,u,g);case 19:return PT(u,d,g);case 22:return ET(u,d,g)}throw Error(e(156,d.tag))};function QT(u,d){return Mi(u,d)}function F6(u,d,g,w){this.tag=u,this.key=g,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=w,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ns(u,d,g,w){return new F6(u,d,g,w)}function Gv(u){return u=u.prototype,!(!u||!u.isReactComponent)}function $6(u){if(typeof u=="function")return Gv(u)?1:0;if(u!=null){if(u=u.$$typeof,u===K)return 11;if(u===Se)return 14}return 2}function wa(u,d){var g=u.alternate;return g===null?(g=Ns(u.tag,d,u.key,u.mode),g.elementType=u.elementType,g.type=u.type,g.stateNode=u.stateNode,g.alternate=u,u.alternate=g):(g.pendingProps=d,g.type=u.type,g.flags=0,g.subtreeFlags=0,g.deletions=null),g.flags=u.flags&14680064,g.childLanes=u.childLanes,g.lanes=u.lanes,g.child=u.child,g.memoizedProps=u.memoizedProps,g.memoizedState=u.memoizedState,g.updateQueue=u.updateQueue,d=u.dependencies,g.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},g.sibling=u.sibling,g.index=u.index,g.ref=u.ref,g}function Gm(u,d,g,w,C,T){var I=2;if(w=u,typeof u=="function")Gv(u)&&(I=1);else if(typeof u=="string")I=5;else e:switch(u){case N:return pl(g.children,C,T,d);case L:I=8,C|=8;break;case M:return u=Ns(12,g,d,C|2),u.elementType=M,u.lanes=T,u;case te:return u=Ns(13,g,d,C),u.elementType=te,u.lanes=T,u;case ve:return u=Ns(19,g,d,C),u.elementType=ve,u.lanes=T,u;case be:return Km(g,C,T,d);default:if(typeof u=="object"&&u!==null)switch(u.$$typeof){case F:I=10;break e;case q:I=9;break e;case K:I=11;break e;case Se:I=14;break e;case _e:I=16,w=null;break e}throw Error(e(130,u==null?u:typeof u,""))}return d=Ns(I,g,d,C),d.elementType=u,d.type=w,d.lanes=T,d}function pl(u,d,g,w){return u=Ns(7,u,w,d),u.lanes=g,u}function Km(u,d,g,w){return u=Ns(22,u,w,d),u.elementType=be,u.lanes=g,u.stateNode={isHidden:!1},u}function Kv(u,d,g){return u=Ns(6,u,null,d),u.lanes=g,u}function Yv(u,d,g){return d=Ns(4,u.children!==null?u.children:[],u.key,d),d.lanes=g,d.stateNode={containerInfo:u.containerInfo,pendingChildren:null,implementation:u.implementation},d}function z6(u,d,g,w,C){this.tag=d,this.containerInfo=u,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ld(0),this.expirationTimes=ld(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ld(0),this.identifierPrefix=w,this.onRecoverableError=C,this.mutableSourceEagerHydrationData=null}function Zv(u,d,g,w,C,T,I,D,H){return u=new z6(u,d,g,D,H),d===1?(d=1,T===!0&&(d|=8)):d=0,T=Ns(3,null,null,d),u.current=T,T.stateNode=u,T.memoizedState={element:w,isDehydrated:g,cache:null,transitions:null,pendingSuspenseBoundaries:null},cv(T),u}function j6(u,d,g){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:P,key:w==null?null:""+w,children:u,containerInfo:d,implementation:g}}function ek(u){if(!u)return ca;u=u._reactInternals;e:{if(qt(u)!==u||u.tag!==1)throw Error(e(170));var d=u;do{switch(d.tag){case 3:d=d.stateNode.context;break e;case 1:if(Vi(d.type)){d=d.stateNode.__reactInternalMemoizedMergedChildContext;break e}}d=d.return}while(d!==null);throw Error(e(171))}if(u.tag===1){var g=u.type;if(Vi(g))return Ax(u,g,d)}return d}function tk(u,d,g,w,C,T,I,D,H){return u=Zv(g,w,!0,u,C,T,I,D,H),u.context=ek(null),g=u.current,w=Ci(),C=pa(g),T=yo(w,C),T.callback=d??null,ha(g,T,C),u.current.lanes=C,tl(u,C,w),Fi(u,w),u}function Ym(u,d,g,w){var C=d.current,T=Ci(),I=pa(C);return g=ek(g),d.context===null?d.context=g:d.pendingContext=g,d=yo(T,I),d.payload={element:u},w=w===void 0?null:w,w!==null&&(d.callback=w),u=ha(C,d,I),u!==null&&(or(u,C,I,T),km(u,C,I)),I}function Zm(u){if(u=u.current,!u.child)return null;switch(u.child.tag){case 5:return u.child.stateNode;default:return u.child.stateNode}}function nk(u,d){if(u=u.memoizedState,u!==null&&u.dehydrated!==null){var g=u.retryLane;u.retryLane=g!==0&&g<d?g:d}}function Xv(u,d){nk(u,d),(u=u.alternate)&&nk(u,d)}var ik=typeof reportError=="function"?reportError:function(u){console.error(u)};function Jv(u){this._internalRoot=u}Xm.prototype.render=Jv.prototype.render=function(u){var d=this._internalRoot;if(d===null)throw Error(e(409));Ym(u,d,null,null)},Xm.prototype.unmount=Jv.prototype.unmount=function(){var u=this._internalRoot;if(u!==null){this._internalRoot=null;var d=u.containerInfo;fl(function(){Ym(null,u,null,null)}),d[go]=null}};function Xm(u){this._internalRoot=u}Xm.prototype.unstable_scheduleHydration=function(u){if(u){var d=em();u={blockedOn:null,target:u,priority:d};for(var g=0;g<zr.length&&d!==0&&d<zr[g].priority;g++);zr.splice(g,0,u),g===0&&sm(u)}};function Qv(u){return!(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)}function Jm(u){return!(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11&&(u.nodeType!==8||u.nodeValue!==" react-mount-point-unstable "))}function sk(){}function H6(u,d,g,w,C){if(C){if(typeof w=="function"){var T=w;w=function(){var ne=Zm(I);T.call(ne)}}var I=tk(d,w,u,0,null,!1,!1,"",sk);return u._reactRootContainer=I,u[go]=I.current,Ed(u.nodeType===8?u.parentNode:u),fl(),I}for(;C=u.lastChild;)u.removeChild(C);if(typeof w=="function"){var D=w;w=function(){var ne=Zm(H);D.call(ne)}}var H=Zv(u,0,!1,null,null,!1,!1,"",sk);return u._reactRootContainer=H,u[go]=H.current,Ed(u.nodeType===8?u.parentNode:u),fl(function(){Ym(d,H,g,w)}),H}function Qm(u,d,g,w,C){var T=g._reactRootContainer;if(T){var I=T;if(typeof C=="function"){var D=C;C=function(){var H=Zm(I);D.call(H)}}Ym(d,I,u,C)}else I=H6(g,d,u,C,w);return Zm(I)}Jf=function(u){switch(u.tag){case 3:var d=u.stateNode;if(d.current.memoizedState.isDehydrated){var g=el(d.pendingLanes);g!==0&&(cd(d,g|1),Fi(d,Nt()),!(Pt&6)&&(zc=Nt()+500,ua()))}break;case 13:fl(function(){var w=vo(u,1);if(w!==null){var C=Ci();or(w,u,1,C)}}),Xv(u,1)}},ud=function(u){if(u.tag===13){var d=vo(u,134217728);if(d!==null){var g=Ci();or(d,u,134217728,g)}Xv(u,134217728)}},Qf=function(u){if(u.tag===13){var d=pa(u),g=vo(u,d);if(g!==null){var w=Ci();or(g,u,d,w)}Xv(u,d)}},em=function(){return Lt},tm=function(u,d){var g=Lt;try{return Lt=u,d()}finally{Lt=g}},ta=function(u,d,g){switch(d){case"input":if(Qn(u,g),d=g.name,g.type==="radio"&&d!=null){for(g=u;g.parentNode;)g=g.parentNode;for(g=g.querySelectorAll("input[name="+JSON.stringify(""+d)+'][type="radio"]'),d=0;d<g.length;d++){var w=g[d];if(w!==u&&w.form===u.form){var C=pm(w);if(!C)throw Error(e(90));vn(w),Qn(w,C)}}}break;case"textarea":Me(u,g);break;case"select":d=g.value,d!=null&&xe(u,!!g.multiple,d,!1)}},Ja=Uv,Qa=fl;var U6={usingClientEntryPoint:!1,Events:[Td,Ac,pm,Nr,Mr,Uv]},Fd={findFiberByHostInstance:rl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},W6={bundleType:Fd.bundleType,version:Fd.version,rendererPackageName:Fd.rendererPackageName,rendererConfig:Fd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:S.ReactCurrentDispatcher,findHostInstanceByFiber:function(u){return u=Ss(u),u===null?null:u.stateNode},findFiberByHostInstance:Fd.findFiberByHostInstance,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var eg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!eg.isDisabled&&eg.supportsFiber)try{Gt=eg.inject(W6),Bn=eg}catch{}}return $i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=U6,$i.createPortal=function(u,d){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Qv(d))throw Error(e(200));return j6(u,d,null,g)},$i.createRoot=function(u,d){if(!Qv(u))throw Error(e(299));var g=!1,w="",C=ik;return d!=null&&(d.unstable_strictMode===!0&&(g=!0),d.identifierPrefix!==void 0&&(w=d.identifierPrefix),d.onRecoverableError!==void 0&&(C=d.onRecoverableError)),d=Zv(u,1,!1,null,null,g,!1,w,C),u[go]=d.current,Ed(u.nodeType===8?u.parentNode:u),new Jv(d)},$i.findDOMNode=function(u){if(u==null)return null;if(u.nodeType===1)return u;var d=u._reactInternals;if(d===void 0)throw typeof u.render=="function"?Error(e(188)):(u=Object.keys(u).join(","),Error(e(268,u)));return u=Ss(d),u=u===null?null:u.stateNode,u},$i.flushSync=function(u){return fl(u)},$i.hydrate=function(u,d,g){if(!Jm(d))throw Error(e(200));return Qm(null,u,d,!0,g)},$i.hydrateRoot=function(u,d,g){if(!Qv(u))throw Error(e(405));var w=g!=null&&g.hydratedSources||null,C=!1,T="",I=ik;if(g!=null&&(g.unstable_strictMode===!0&&(C=!0),g.identifierPrefix!==void 0&&(T=g.identifierPrefix),g.onRecoverableError!==void 0&&(I=g.onRecoverableError)),d=tk(d,null,u,1,g??null,C,!1,T,I),u[go]=d.current,Ed(u),w)for(u=0;u<w.length;u++)g=w[u],C=g._getVersion,C=C(g._source),d.mutableSourceEagerHydrationData==null?d.mutableSourceEagerHydrationData=[g,C]:d.mutableSourceEagerHydrationData.push(g,C);return new Xm(d)},$i.render=function(u,d,g){if(!Jm(d))throw Error(e(200));return Qm(null,u,d,!1,g)},$i.unmountComponentAtNode=function(u){if(!Jm(u))throw Error(e(40));return u._reactRootContainer?(fl(function(){Qm(null,null,u,!1,function(){u._reactRootContainer=null,u[go]=null})}),!0):!1},$i.unstable_batchedUpdates=Uv,$i.unstable_renderSubtreeIntoContainer=function(u,d,g,w){if(!Jm(g))throw Error(e(200));if(u==null||u._reactInternals===void 0)throw Error(e(38));return Qm(u,d,g,!1,w)},$i.version="18.3.1-next-f1338f8080-20240426",$i}var Kk;function i$(){if(Kk)return b0.exports;Kk=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(t){console.error(t)}}return i(),b0.exports=n$(),b0.exports}var Yk;function s$(){if(Yk)return lg;Yk=1;var i=i$();return lg.createRoot=i.createRoot,lg.hydrateRoot=i.hydrateRoot,lg}var r$=s$(),R=yf();const ot=L_(R);var y0={exports:{}},_0={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zk;function o$(){if(Zk)return _0;Zk=1;var i=yf();function t(l,c){return l===c&&(l!==0||1/l===1/c)||l!==l&&c!==c}var e=typeof Object.is=="function"?Object.is:t,n=i.useSyncExternalStore,s=i.useRef,r=i.useEffect,o=i.useMemo,a=i.useDebugValue;return _0.useSyncExternalStoreWithSelector=function(l,c,h,f,m){var p=s(null);if(p.current===null){var v={hasValue:!1,value:null};p.current=v}else v=p.current;p=o(function(){function E(O){if(!x){if(x=!0,k=O,O=f(O),m!==void 0&&v.hasValue){var P=v.value;if(m(P,O))return A=P}return A=O}if(P=A,e(k,O))return P;var N=f(O);return m!==void 0&&m(P,N)?(k=O,P):(k=O,A=N)}var x=!1,k,A,S=h===void 0?null:h;return[function(){return E(c())},S===null?void 0:function(){return E(S())}]},[c,h,f,m]);var _=n(l,p[0],p[1]);return r(function(){v.hasValue=!0,v.value=_},[_]),a(_),_},_0}var Xk;function a$(){return Xk||(Xk=1,y0.exports=o$()),y0.exports}var l$=a$();function c$(i){i()}function u$(){let i=null,t=null;return{clear(){i=null,t=null},notify(){c$(()=>{let e=i;for(;e;)e.callback(),e=e.next})},get(){const e=[];let n=i;for(;n;)e.push(n),n=n.next;return e},subscribe(e){let n=!0;const s=t={callback:e,next:null,prev:t};return s.prev?s.prev.next=s:i=s,function(){!n||i===null||(n=!1,s.next?s.next.prev=s.prev:t=s.prev,s.prev?s.prev.next=s.next:i=s.next)}}}}var Jk={notify(){},get:()=>[]};function d$(i,t){let e,n=Jk,s=0,r=!1;function o(_){h();const E=n.subscribe(_);let x=!1;return()=>{x||(x=!0,E(),f())}}function a(){n.notify()}function l(){v.onStateChange&&v.onStateChange()}function c(){return r}function h(){s++,e||(e=i.subscribe(l),n=u$())}function f(){s--,e&&s===0&&(e(),e=void 0,n.clear(),n=Jk)}function m(){r||(r=!0,h())}function p(){r&&(r=!1,f())}const v={addNestedSub:o,notifyNestedSubs:a,handleChangeWrapper:l,isSubscribed:c,trySubscribe:m,tryUnsubscribe:p,getListeners:()=>n};return v}var h$=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",f$=h$(),m$=()=>typeof navigator<"u"&&navigator.product==="ReactNative",g$=m$(),p$=()=>f$||g$?R.useLayoutEffect:R.useEffect,b$=p$(),E0=Symbol.for("react-redux-context"),C0=typeof globalThis<"u"?globalThis:{};function w$(){if(!R.createContext)return{};const i=C0[E0]??(C0[E0]=new Map);let t=i.get(R.createContext);return t||(t=R.createContext(null),i.set(R.createContext,t)),t}var Ba=w$();function v$(i){const{children:t,context:e,serverState:n,store:s}=i,r=R.useMemo(()=>{const l=d$(s);return{store:s,subscription:l,getServerState:n?()=>n:void 0}},[s,n]),o=R.useMemo(()=>s.getState(),[s]);b$(()=>{const{subscription:l}=r;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),o!==s.getState()&&l.notifyNestedSubs(),()=>{l.tryUnsubscribe(),l.onStateChange=void 0}},[r,o]);const a=e||Ba;return R.createElement(a.Provider,{value:r},t)}var y$=v$;function tE(i=Ba){return function(){return R.useContext(i)}}var lO=tE();function cO(i=Ba){const t=i===Ba?lO:tE(i),e=()=>{const{store:n}=t();return n};return Object.assign(e,{withTypes:()=>e}),e}var _$=cO();function E$(i=Ba){const t=i===Ba?_$:cO(i),e=()=>t().dispatch;return Object.assign(e,{withTypes:()=>e}),e}var C$=E$(),x$=(i,t)=>i===t;function T$(i=Ba){const t=i===Ba?lO:tE(i),e=(n,s={})=>{const{equalityFn:r=x$}=typeof s=="function"?{equalityFn:s}:s,o=t(),{store:a,subscription:l,getServerState:c}=o;R.useRef(!0);const h=R.useCallback({[n.name](m){return n(m)}}[n.name],[n]),f=l$.useSyncExternalStoreWithSelector(l.addNestedSub,a.getState,c||a.getState,h,r);return R.useDebugValue(f),f};return Object.assign(e,{withTypes:()=>e}),e}var _b=T$(),Hd={},Qk;function k$(){if(Qk)return Hd;Qk=1,Object.defineProperty(Hd,"__esModule",{value:!0}),Hd.parse=o,Hd.serialize=c;const i=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,t=/^[\u0021-\u003A\u003C-\u007E]*$/,e=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,n=/^[\u0020-\u003A\u003D-\u007E]*$/,s=Object.prototype.toString,r=(()=>{const m=function(){};return m.prototype=Object.create(null),m})();function o(m,p){const v=new r,_=m.length;if(_<2)return v;const E=(p==null?void 0:p.decode)||h;let x=0;do{const k=m.indexOf("=",x);if(k===-1)break;const A=m.indexOf(";",x),S=A===-1?_:A;if(k>S){x=m.lastIndexOf(";",k-1)+1;continue}const O=a(m,x,k),P=l(m,k,O),N=m.slice(O,P);if(v[N]===void 0){let L=a(m,k+1,S),M=l(m,S,L);const F=E(m.slice(L,M));v[N]=F}x=S+1}while(x<_);return v}function a(m,p,v){do{const _=m.charCodeAt(p);if(_!==32&&_!==9)return p}while(++p<v);return v}function l(m,p,v){for(;p>v;){const _=m.charCodeAt(--p);if(_!==32&&_!==9)return p+1}return v}function c(m,p,v){const _=(v==null?void 0:v.encode)||encodeURIComponent;if(!i.test(m))throw new TypeError(`argument name is invalid: ${m}`);const E=_(p);if(!t.test(E))throw new TypeError(`argument val is invalid: ${p}`);let x=m+"="+E;if(!v)return x;if(v.maxAge!==void 0){if(!Number.isInteger(v.maxAge))throw new TypeError(`option maxAge is invalid: ${v.maxAge}`);x+="; Max-Age="+v.maxAge}if(v.domain){if(!e.test(v.domain))throw new TypeError(`option domain is invalid: ${v.domain}`);x+="; Domain="+v.domain}if(v.path){if(!n.test(v.path))throw new TypeError(`option path is invalid: ${v.path}`);x+="; Path="+v.path}if(v.expires){if(!f(v.expires)||!Number.isFinite(v.expires.valueOf()))throw new TypeError(`option expires is invalid: ${v.expires}`);x+="; Expires="+v.expires.toUTCString()}if(v.httpOnly&&(x+="; HttpOnly"),v.secure&&(x+="; Secure"),v.partitioned&&(x+="; Partitioned"),v.priority)switch(typeof v.priority=="string"?v.priority.toLowerCase():void 0){case"low":x+="; Priority=Low";break;case"medium":x+="; Priority=Medium";break;case"high":x+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${v.priority}`)}if(v.sameSite)switch(typeof v.sameSite=="string"?v.sameSite.toLowerCase():v.sameSite){case!0:case"strict":x+="; SameSite=Strict";break;case"lax":x+="; SameSite=Lax";break;case"none":x+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${v.sameSite}`)}return x}function h(m){if(m.indexOf("%")===-1)return m;try{return decodeURIComponent(m)}catch{return m}}function f(m){return s.call(m)==="[object Date]"}return Hd}k$();/**
 * react-router v7.1.5
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var eS="popstate";function S$(i={}){function t(s,r){let{pathname:o="/",search:a="",hash:l=""}=Zo(s.location.hash.substring(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),Wh("",{pathname:o,search:a,hash:l},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function e(s,r){let o=s.document.querySelector("base"),a="";if(o&&o.getAttribute("href")){let l=s.location.href,c=l.indexOf("#");a=c===-1?l:l.slice(0,c)}return a+"#"+(typeof r=="string"?r:Fa(r))}function n(s,r){Yn(s.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(r)})`)}return P$(t,e,n,i)}function kt(i,t){if(i===!1||i===null||typeof i>"u")throw new Error(t)}function Yn(i,t){if(!i){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function A$(){return Math.random().toString(36).substring(2,10)}function tS(i,t){return{usr:i.state,key:i.key,idx:t}}function Wh(i,t,e=null,n){return{pathname:typeof i=="string"?i:i.pathname,search:"",hash:"",...typeof t=="string"?Zo(t):t,state:e,key:t&&t.key||n||A$()}}function Fa({pathname:i="/",search:t="",hash:e=""}){return t&&t!=="?"&&(i+=t.charAt(0)==="?"?t:"?"+t),e&&e!=="#"&&(i+=e.charAt(0)==="#"?e:"#"+e),i}function Zo(i){let t={};if(i){let e=i.indexOf("#");e>=0&&(t.hash=i.substring(e),i=i.substring(0,e));let n=i.indexOf("?");n>=0&&(t.search=i.substring(n),i=i.substring(0,n)),i&&(t.pathname=i)}return t}function P$(i,t,e,n={}){let{window:s=document.defaultView,v5Compat:r=!1}=n,o=s.history,a="POP",l=null,c=h();c==null&&(c=0,o.replaceState({...o.state,idx:c},""));function h(){return(o.state||{idx:null}).idx}function f(){a="POP";let E=h(),x=E==null?null:E-c;c=E,l&&l({action:a,location:_.location,delta:x})}function m(E,x){a="PUSH";let k=Wh(_.location,E,x);e(k,E),c=h()+1;let A=tS(k,c),S=_.createHref(k);try{o.pushState(A,"",S)}catch(O){if(O instanceof DOMException&&O.name==="DataCloneError")throw O;s.location.assign(S)}r&&l&&l({action:a,location:_.location,delta:1})}function p(E,x){a="REPLACE";let k=Wh(_.location,E,x);e(k,E),c=h();let A=tS(k,c),S=_.createHref(k);o.replaceState(A,"",S),r&&l&&l({action:a,location:_.location,delta:0})}function v(E){let x=s.location.origin!=="null"?s.location.origin:s.location.href,k=typeof E=="string"?E:Fa(E);return k=k.replace(/ $/,"%20"),kt(x,`No window.location.(origin|href) available to create URL for href: ${k}`),new URL(k,x)}let _={get action(){return a},get location(){return i(s,o)},listen(E){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(eS,f),l=E,()=>{s.removeEventListener(eS,f),l=null}},createHref(E){return t(s,E)},createURL:v,encodeLocation(E){let x=v(E);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:m,replace:p,go(E){return o.go(E)}};return _}var I$=new Set(["lazy","caseSensitive","path","id","index","children"]);function R$(i){return i.index===!0}function bp(i,t,e=[],n={}){return i.map((s,r)=>{let o=[...e,String(r)],a=typeof s.id=="string"?s.id:o.join("-");if(kt(s.index!==!0||!s.children,"Cannot specify children on an index route"),kt(!n[a],`Found a route id collision on id "${a}".  Route id's must be globally unique within Data Router usages`),R$(s)){let l={...s,...t(s),id:a};return n[a]=l,l}else{let l={...s,...t(s),id:a,children:void 0};return n[a]=l,s.children&&(l.children=bp(s.children,t,o,n)),l}})}function Sa(i,t,e="/"){return Ug(i,t,e,!1)}function Ug(i,t,e,n){let s=typeof t=="string"?Zo(t):t,r=Cr(s.pathname||"/",e);if(r==null)return null;let o=uO(i);N$(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=U$(r);a=j$(o[l],c,n)}return a}function O$(i,t){let{route:e,pathname:n,params:s}=i;return{id:e.id,pathname:n,params:s,data:t[e.id],handle:e.handle}}function uO(i,t=[],e=[],n=""){let s=(r,o,a)=>{let l={relativePath:a===void 0?r.path||"":a,caseSensitive:r.caseSensitive===!0,childrenIndex:o,route:r};l.relativePath.startsWith("/")&&(kt(l.relativePath.startsWith(n),`Absolute route path "${l.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),l.relativePath=l.relativePath.slice(n.length));let c=so([n,l.relativePath]),h=e.concat(l);r.children&&r.children.length>0&&(kt(r.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${c}".`),uO(r.children,t,h,c)),!(r.path==null&&!r.index)&&t.push({path:c,score:$$(c,r.index),routesMeta:h})};return i.forEach((r,o)=>{var a;if(r.path===""||!((a=r.path)!=null&&a.includes("?")))s(r,o);else for(let l of dO(r.path))s(r,o,l)}),t}function dO(i){let t=i.split("/");if(t.length===0)return[];let[e,...n]=t,s=e.endsWith("?"),r=e.replace(/\?$/,"");if(n.length===0)return s?[r,""]:[r];let o=dO(n.join("/")),a=[];return a.push(...o.map(l=>l===""?r:[r,l].join("/"))),s&&a.push(...o),a.map(l=>i.startsWith("/")&&l===""?"/":l)}function N$(i){i.sort((t,e)=>t.score!==e.score?e.score-t.score:z$(t.routesMeta.map(n=>n.childrenIndex),e.routesMeta.map(n=>n.childrenIndex)))}var M$=/^:[\w-]+$/,L$=3,V$=2,D$=1,B$=10,F$=-2,nS=i=>i==="*";function $$(i,t){let e=i.split("/"),n=e.length;return e.some(nS)&&(n+=F$),t&&(n+=V$),e.filter(s=>!nS(s)).reduce((s,r)=>s+(M$.test(r)?L$:r===""?D$:B$),n)}function z$(i,t){return i.length===t.length&&i.slice(0,-1).every((n,s)=>n===t[s])?i[i.length-1]-t[t.length-1]:0}function j$(i,t,e=!1){let{routesMeta:n}=i,s={},r="/",o=[];for(let a=0;a<n.length;++a){let l=n[a],c=a===n.length-1,h=r==="/"?t:t.slice(r.length)||"/",f=wp({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},h),m=l.route;if(!f&&c&&e&&!n[n.length-1].route.index&&(f=wp({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},h)),!f)return null;Object.assign(s,f.params),o.push({params:s,pathname:so([r,f.pathname]),pathnameBase:G$(so([r,f.pathnameBase])),route:m}),f.pathnameBase!=="/"&&(r=so([r,f.pathnameBase]))}return o}function wp(i,t){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[e,n]=H$(i.path,i.caseSensitive,i.end),s=t.match(e);if(!s)return null;let r=s[0],o=r.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:n.reduce((c,{paramName:h,isOptional:f},m)=>{if(h==="*"){let v=a[m]||"";o=r.slice(0,r.length-v.length).replace(/(.)\/+$/,"$1")}const p=a[m];return f&&!p?c[h]=void 0:c[h]=(p||"").replace(/%2F/g,"/"),c},{}),pathname:r,pathnameBase:o,pattern:i}}function H$(i,t=!1,e=!0){Yn(i==="*"||!i.endsWith("*")||i.endsWith("/*"),`Route path "${i}" will be treated as if it were "${i.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${i.replace(/\*$/,"/*")}".`);let n=[],s="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(n.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return i.endsWith("*")?(n.push({paramName:"*"}),s+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):e?s+="\\/*$":i!==""&&i!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),n]}function U$(i){try{return i.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Yn(!1,`The URL path "${i}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),i}}function Cr(i,t){if(t==="/")return i;if(!i.toLowerCase().startsWith(t.toLowerCase()))return null;let e=t.endsWith("/")?t.length-1:t.length,n=i.charAt(e);return n&&n!=="/"?null:i.slice(e)||"/"}function W$(i,t="/"){let{pathname:e,search:n="",hash:s=""}=typeof i=="string"?Zo(i):i;return{pathname:e?e.startsWith("/")?e:q$(e,t):t,search:K$(n),hash:Y$(s)}}function q$(i,t){let e=t.replace(/\/+$/,"").split("/");return i.split("/").forEach(s=>{s===".."?e.length>1&&e.pop():s!=="."&&e.push(s)}),e.length>1?e.join("/"):"/"}function x0(i,t,e,n){return`Cannot include a '${i}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${e}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function hO(i){return i.filter((t,e)=>e===0||t.route.path&&t.route.path.length>0)}function nE(i){let t=hO(i);return t.map((e,n)=>n===t.length-1?e.pathname:e.pathnameBase)}function iE(i,t,e,n=!1){let s;typeof i=="string"?s=Zo(i):(s={...i},kt(!s.pathname||!s.pathname.includes("?"),x0("?","pathname","search",s)),kt(!s.pathname||!s.pathname.includes("#"),x0("#","pathname","hash",s)),kt(!s.search||!s.search.includes("#"),x0("#","search","hash",s)));let r=i===""||s.pathname==="",o=r?"/":s.pathname,a;if(o==null)a=e;else{let f=t.length-1;if(!n&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),f-=1;s.pathname=m.join("/")}a=f>=0?t[f]:"/"}let l=W$(s,a),c=o&&o!=="/"&&o.endsWith("/"),h=(r||o===".")&&e.endsWith("/");return!l.pathname.endsWith("/")&&(c||h)&&(l.pathname+="/"),l}var so=i=>i.join("/").replace(/\/\/+/g,"/"),G$=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),K$=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,Y$=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i,Z$=(i,t=302)=>{let e=t;typeof e=="number"?e={status:e}:typeof e.status>"u"&&(e.status=302);let n=new Headers(e.headers);return n.set("Location",i),new Response(null,{...e,headers:n})},vp=class{constructor(i,t,e,n=!1){this.status=i,this.statusText=t||"",this.internal=n,e instanceof Error?(this.data=e.toString(),this.error=e):this.data=e}};function qh(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}var fO=["POST","PUT","PATCH","DELETE"],X$=new Set(fO),J$=["GET",...fO],Q$=new Set(J$),ez=new Set([301,302,303,307,308]),tz=new Set([307,308]),T0={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},nz={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Ud={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},sE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,iz=i=>({hasErrorBoundary:!!i.hasErrorBoundary}),mO="remix-router-transitions",gO=Symbol("ResetLoaderData");function sz(i){const t=i.window?i.window:typeof window<"u"?window:void 0,e=typeof t<"u"&&typeof t.document<"u"&&typeof t.document.createElement<"u";kt(i.routes.length>0,"You must provide a non-empty routes array to createRouter");let n=i.mapRouteProperties||iz,s={},r=bp(i.routes,n,void 0,s),o,a=i.basename||"/",l=i.dataStrategy||cz,c=i.patchRoutesOnNavigation,h={...i.future},f=null,m=new Set,p=null,v=null,_=null,E=i.hydrationData!=null,x=Sa(r,i.history.location,a),k=!1,A=null;if(x==null&&!c){let j=Bs(404,{pathname:i.history.location.pathname}),{matches:G,route:Q}=fS(r);x=G,A={[Q.id]:j}}x&&!i.hydrationData&&Nr(x,r,i.history.location.pathname).active&&(x=null);let S;if(x)if(x.some(j=>j.route.lazy))S=!1;else if(!x.some(j=>j.route.loader))S=!0;else{let j=i.hydrationData?i.hydrationData.loaderData:null,G=i.hydrationData?i.hydrationData.errors:null;if(G){let Q=x.findIndex(me=>G[me.route.id]!==void 0);S=x.slice(0,Q+1).every(me=>!oy(me.route,j,G))}else S=x.every(Q=>!oy(Q.route,j,G))}else{S=!1,x=[];let j=Nr(null,r,i.history.location.pathname);j.active&&j.matches&&(k=!0,x=j.matches)}let O,P={historyAction:i.history.action,location:i.history.location,matches:x,initialized:S,navigation:T0,restoreScrollPosition:i.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:i.hydrationData&&i.hydrationData.loaderData||{},actionData:i.hydrationData&&i.hydrationData.actionData||null,errors:i.hydrationData&&i.hydrationData.errors||A,fetchers:new Map,blockers:new Map},N="POP",L=!1,M,F=!1,q=new Map,K=null,te=!1,ve=!1,Se=new Set,_e=new Map,be=0,he=-1,ce=new Map,le=new Set,U=new Map,re=new Map,Be=new Set,He=new Map,fe,Ue=null;function ut(){if(f=i.history.listen(({action:j,location:G,delta:Q})=>{if(fe){fe(),fe=void 0;return}Yn(He.size===0||Q!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let me=mo({currentLocation:P.location,nextLocation:G,historyAction:j});if(me&&Q!=null){let Ae=new Promise(Ye=>{fe=Ye});i.history.go(Q*-1),Xs(me,{state:"blocked",location:G,proceed(){Xs(me,{state:"proceeding",proceed:void 0,reset:void 0,location:G}),Ae.then(()=>i.history.go(Q))},reset(){let Ye=new Map(P.blockers);Ye.set(me,Ud),bt({blockers:Ye})}});return}return kn(j,G)}),e){yz(t,q);let j=()=>_z(t,q);t.addEventListener("pagehide",j),K=()=>t.removeEventListener("pagehide",j)}return P.initialized||kn("POP",P.location,{initialHydration:!0}),O}function et(){f&&f(),K&&K(),m.clear(),M&&M.abort(),P.fetchers.forEach((j,G)=>Et(G)),P.blockers.forEach((j,G)=>Ni(G))}function ht(j){return m.add(j),()=>m.delete(j)}function bt(j,G={}){P={...P,...j};let Q=[],me=[];P.fetchers.forEach((Ae,Ye)=>{Ae.state==="idle"&&(Be.has(Ye)?Q.push(Ye):me.push(Ye))}),Be.forEach(Ae=>{!P.fetchers.has(Ae)&&!_e.has(Ae)&&Q.push(Ae)}),[...m].forEach(Ae=>Ae(P,{deletedFetchers:Q,viewTransitionOpts:G.viewTransitionOpts,flushSync:G.flushSync===!0})),Q.forEach(Ae=>Et(Ae)),me.forEach(Ae=>P.fetchers.delete(Ae))}function zt(j,G,{flushSync:Q}={}){var Ie,dt;let me=P.actionData!=null&&P.navigation.formMethod!=null&&ur(P.navigation.formMethod)&&P.navigation.state==="loading"&&((Ie=j.state)==null?void 0:Ie._isRedirect)!==!0,Ae;G.actionData?Object.keys(G.actionData).length>0?Ae=G.actionData:Ae=null:me?Ae=P.actionData:Ae=null;let Ye=G.loaderData?dS(P.loaderData,G.loaderData,G.matches||[],G.errors):P.loaderData,tt=P.blockers;tt.size>0&&(tt=new Map(tt),tt.forEach((pt,jt)=>tt.set(jt,Ud)));let Ve=L===!0||P.navigation.formMethod!=null&&ur(P.navigation.formMethod)&&((dt=j.state)==null?void 0:dt._isRedirect)!==!0;o&&(r=o,o=void 0),te||N==="POP"||(N==="PUSH"?i.history.push(j,j.state):N==="REPLACE"&&i.history.replace(j,j.state));let $e;if(N==="POP"){let pt=q.get(P.location.pathname);pt&&pt.has(j.pathname)?$e={currentLocation:P.location,nextLocation:j}:q.has(j.pathname)&&($e={currentLocation:j,nextLocation:P.location})}else if(F){let pt=q.get(P.location.pathname);pt?pt.add(j.pathname):(pt=new Set([j.pathname]),q.set(P.location.pathname,pt)),$e={currentLocation:P.location,nextLocation:j}}bt({...G,actionData:Ae,loaderData:Ye,historyAction:N,location:j,initialized:!0,navigation:T0,revalidation:"idle",restoreScrollPosition:na(j,G.matches||P.matches),preventScrollReset:Ve,blockers:tt},{viewTransitionOpts:$e,flushSync:Q===!0}),N="POP",L=!1,F=!1,te=!1,ve=!1,Ue==null||Ue.resolve(),Ue=null}async function vn(j,G){if(typeof j=="number"){i.history.go(j);return}let Q=ry(P.location,P.matches,a,j,G==null?void 0:G.fromRouteId,G==null?void 0:G.relative),{path:me,submission:Ae,error:Ye}=iS(!1,Q,G),tt=P.location,Ve=Wh(P.location,me,G&&G.state);Ve={...Ve,...i.history.encodeLocation(Ve)};let $e=G&&G.replace!=null?G.replace:void 0,Ie="PUSH";$e===!0?Ie="REPLACE":$e===!1||Ae!=null&&ur(Ae.formMethod)&&Ae.formAction===P.location.pathname+P.location.search&&(Ie="REPLACE");let dt=G&&"preventScrollReset"in G?G.preventScrollReset===!0:void 0,pt=(G&&G.flushSync)===!0,jt=mo({currentLocation:tt,nextLocation:Ve,historyAction:Ie});if(jt){Xs(jt,{state:"blocked",location:Ve,proceed(){Xs(jt,{state:"proceeding",proceed:void 0,reset:void 0,location:Ve}),vn(j,G)},reset(){let qt=new Map(P.blockers);qt.set(jt,Ud),bt({blockers:qt})}});return}await kn(Ie,Ve,{submission:Ae,pendingError:Ye,preventScrollReset:dt,replace:G&&G.replace,enableViewTransition:G&&G.viewTransition,flushSync:pt})}function Dn(){Ue||(Ue=Ez()),Qe(),bt({revalidation:"loading"});let j=Ue.promise;return P.navigation.state==="submitting"?j:P.navigation.state==="idle"?(kn(P.historyAction,P.location,{startUninterruptedRevalidation:!0}),j):(kn(N||P.historyAction,P.navigation.location,{overrideNavigation:P.navigation,enableViewTransition:F===!0}),j)}async function kn(j,G,Q){M&&M.abort(),M=null,N=j,te=(Q&&Q.startUninterruptedRevalidation)===!0,Js(P.location,P.matches),L=(Q&&Q.preventScrollReset)===!0,F=(Q&&Q.enableViewTransition)===!0;let me=o||r,Ae=Q&&Q.overrideNavigation,Ye=Q!=null&&Q.initialHydration&&P.matches&&P.matches.length>0&&!k?P.matches:Sa(me,G,a),tt=(Q&&Q.flushSync)===!0;if(Ye&&P.initialized&&!ve&&gz(P.location,G)&&!(Q&&Q.submission&&ur(Q.submission.formMethod))){zt(G,{matches:Ye},{flushSync:tt});return}let Ve=Nr(Ye,me,G.pathname);if(Ve.active&&Ve.matches&&(Ye=Ve.matches),!Ye){let{error:Ht,notFoundMatches:At,route:un}=Or(G.pathname);zt(G,{matches:At,loaderData:{},errors:{[un.id]:Ht}},{flushSync:tt});return}M=new AbortController;let $e=Wc(i.history,G,M.signal,Q&&Q.submission),Ie;if(Q&&Q.pendingError)Ie=[Cl(Ye).route.id,{type:"error",error:Q.pendingError}];else if(Q&&Q.submission&&ur(Q.submission.formMethod)){let Ht=await Jn($e,G,Q.submission,Ye,Ve.active,{replace:Q.replace,flushSync:tt});if(Ht.shortCircuited)return;if(Ht.pendingActionResult){let[At,un]=Ht.pendingActionResult;if(as(un)&&qh(un.error)&&un.error.status===404){M=null,zt(G,{matches:Ht.matches,loaderData:{},errors:{[At]:un.error}});return}}Ye=Ht.matches||Ye,Ie=Ht.pendingActionResult,Ae=k0(G,Q.submission),tt=!1,Ve.active=!1,$e=Wc(i.history,$e.url,$e.signal)}let{shortCircuited:dt,matches:pt,loaderData:jt,errors:qt}=await Ji($e,G,Ye,Ve.active,Ae,Q&&Q.submission,Q&&Q.fetcherSubmission,Q&&Q.replace,Q&&Q.initialHydration===!0,tt,Ie);dt||(M=null,zt(G,{matches:pt||Ye,...hS(Ie),loaderData:jt,errors:qt}))}async function Jn(j,G,Q,me,Ae,Ye={}){Qe();let tt=wz(G,Q);if(bt({navigation:tt},{flushSync:Ye.flushSync===!0}),Ae){let Ie=await Mr(me,G.pathname,j.signal);if(Ie.type==="aborted")return{shortCircuited:!0};if(Ie.type==="error"){let dt=Cl(Ie.partialMatches).route.id;return{matches:Ie.partialMatches,pendingActionResult:[dt,{type:"error",error:Ie.error}]}}else if(Ie.matches)me=Ie.matches;else{let{notFoundMatches:dt,error:pt,route:jt}=Or(G.pathname);return{matches:dt,pendingActionResult:[jt.id,{type:"error",error:pt}]}}}let Ve,$e=uh(me,G);if(!$e.route.action&&!$e.route.lazy)Ve={type:"error",error:Bs(405,{method:j.method,pathname:G.pathname,routeId:$e.route.id})};else if(Ve=(await ue("action",P,j,[$e],me,null))[$e.route.id],j.signal.aborted)return{shortCircuited:!0};if(kl(Ve)){let Ie;return Ye&&Ye.replace!=null?Ie=Ye.replace:Ie=lS(Ve.response.headers.get("Location"),new URL(j.url),a)===P.location.pathname+P.location.search,await Ee(j,Ve,!0,{submission:Q,replace:Ie}),{shortCircuited:!0}}if(as(Ve)){let Ie=Cl(me,$e.route.id);return(Ye&&Ye.replace)!==!0&&(N="PUSH"),{matches:me,pendingActionResult:[Ie.route.id,Ve]}}return{matches:me,pendingActionResult:[$e.route.id,Ve]}}async function Ji(j,G,Q,me,Ae,Ye,tt,Ve,$e,Ie,dt){let pt=Ae||k0(G,Ye),jt=Ye||tt||gS(pt),qt=!te&&!$e;if(me){if(qt){let dn=Qn(dt);bt({navigation:pt,...dn!==void 0?{actionData:dn}:{}},{flushSync:Ie})}let Mt=await Mr(Q,G.pathname,j.signal);if(Mt.type==="aborted")return{shortCircuited:!0};if(Mt.type==="error"){let dn=Cl(Mt.partialMatches).route.id;return{matches:Mt.partialMatches,loaderData:{},errors:{[dn]:Mt.error}}}else if(Mt.matches)Q=Mt.matches;else{let{error:dn,notFoundMatches:ra,route:Dr}=Or(G.pathname);return{matches:ra,loaderData:{},errors:{[Dr.id]:dn}}}}let Ht=o||r,[At,un]=rS(i.history,P,Q,jt,G,$e===!0,ve,Se,Be,U,le,Ht,a,dt);if(he=++be,At.length===0&&un.length===0){let Mt=Je();return zt(G,{matches:Q,loaderData:{},errors:dt&&as(dt[1])?{[dt[0]]:dt[1].error}:null,...hS(dt),...Mt?{fetchers:new Map(P.fetchers)}:{}},{flushSync:Ie}),{shortCircuited:!0}}if(qt){let Mt={};if(!me){Mt.navigation=pt;let dn=Qn(dt);dn!==void 0&&(Mt.actionData=dn)}un.length>0&&(Mt.fetchers=z(un)),bt(Mt,{flushSync:Ie})}un.forEach(Mt=>{It(Mt.key),Mt.controller&&_e.set(Mt.key,Mt.controller)});let Ss=()=>un.forEach(Mt=>It(Mt.key));M&&M.signal.addEventListener("abort",Ss);let{loaderResults:Qs,fetcherResults:Mi}=await Me(P,Q,At,un,j);if(j.signal.aborted)return{shortCircuited:!0};M&&M.signal.removeEventListener("abort",Ss),un.forEach(Mt=>_e.delete(Mt.key));let li=cg(Qs);if(li)return await Ee(j,li.result,!0,{replace:Ve}),{shortCircuited:!0};if(li=cg(Mi),li)return le.add(li.key),await Ee(j,li.result,!0,{replace:Ve}),{shortCircuited:!0};let{loaderData:ia,errors:Lr}=uS(P,Q,Qs,dt,un,Mi);$e&&P.errors&&(Lr={...P.errors,...Lr});let Nt=Je(),sa=Sn(he),Vr=Nt||sa||un.length>0;return{matches:Q,loaderData:ia,errors:Lr,...Vr?{fetchers:new Map(P.fetchers)}:{}}}function Qn(j){if(j&&!as(j[1]))return{[j[0]]:j[1].data};if(P.actionData)return Object.keys(P.actionData).length===0?null:P.actionData}function z(j){return j.forEach(G=>{let Q=P.fetchers.get(G.key),me=Wd(void 0,Q?Q.data:void 0);P.fetchers.set(G.key,me)}),new Map(P.fetchers)}async function X(j,G,Q,me){It(j);let Ae=(me&&me.flushSync)===!0,Ye=o||r,tt=ry(P.location,P.matches,a,Q,G,me==null?void 0:me.relative),Ve=Sa(Ye,tt,a),$e=Nr(Ve,Ye,tt);if($e.active&&$e.matches&&(Ve=$e.matches),!Ve){Le(j,G,Bs(404,{pathname:tt}),{flushSync:Ae});return}let{path:Ie,submission:dt,error:pt}=iS(!0,tt,me);if(pt){Le(j,G,pt,{flushSync:Ae});return}let jt=uh(Ve,Ie),qt=(me&&me.preventScrollReset)===!0;if(dt&&ur(dt.formMethod)){await se(j,G,Ie,jt,Ve,$e.active,Ae,qt,dt);return}U.set(j,{routeId:G,path:Ie}),await xe(j,G,Ie,jt,Ve,$e.active,Ae,qt,dt)}async function se(j,G,Q,me,Ae,Ye,tt,Ve,$e){Qe(),U.delete(j);function Ie(Gt){if(!Gt.route.action&&!Gt.route.lazy){let Bn=Bs(405,{method:$e.formMethod,pathname:Q,routeId:G});return Le(j,G,Bn,{flushSync:tt}),!0}return!1}if(!Ye&&Ie(me))return;let dt=P.fetchers.get(j);Ne(j,vz($e,dt),{flushSync:tt});let pt=new AbortController,jt=Wc(i.history,Q,pt.signal,$e);if(Ye){let Gt=await Mr(Ae,Q,jt.signal);if(Gt.type==="aborted")return;if(Gt.type==="error"){Le(j,G,Gt.error,{flushSync:tt});return}else if(Gt.matches){if(Ae=Gt.matches,me=uh(Ae,Q),Ie(me))return}else{Le(j,G,Bs(404,{pathname:Q}),{flushSync:tt});return}}_e.set(j,pt);let qt=be,At=(await ue("action",P,jt,[me],Ae,j))[me.route.id];if(jt.signal.aborted){_e.get(j)===pt&&_e.delete(j);return}if(Be.has(j)){if(kl(At)||as(At)){Ne(j,Ca(void 0));return}}else{if(kl(At))if(_e.delete(j),he>qt){Ne(j,Ca(void 0));return}else return le.add(j),Ne(j,Wd($e)),Ee(jt,At,!1,{fetcherSubmission:$e,preventScrollReset:Ve});if(as(At)){Le(j,G,At.error);return}}let un=P.navigation.location||P.location,Ss=Wc(i.history,un,pt.signal),Qs=o||r,Mi=P.navigation.state!=="idle"?Sa(Qs,P.navigation.location,a):P.matches;kt(Mi,"Didn't find any matches after fetcher action");let li=++be;ce.set(j,li);let ia=Wd($e,At.data);P.fetchers.set(j,ia);let[Lr,Nt]=rS(i.history,P,Mi,$e,un,!1,ve,Se,Be,U,le,Qs,a,[me.route.id,At]);Nt.filter(Gt=>Gt.key!==j).forEach(Gt=>{let Bn=Gt.key,fc=P.fetchers.get(Bn),_i=Wd(void 0,fc?fc.data:void 0);P.fetchers.set(Bn,_i),It(Bn),Gt.controller&&_e.set(Bn,Gt.controller)}),bt({fetchers:new Map(P.fetchers)});let sa=()=>Nt.forEach(Gt=>It(Gt.key));pt.signal.addEventListener("abort",sa);let{loaderResults:Vr,fetcherResults:Mt}=await Me(P,Mi,Lr,Nt,Ss);if(pt.signal.aborted)return;pt.signal.removeEventListener("abort",sa),ce.delete(j),_e.delete(j),Nt.forEach(Gt=>_e.delete(Gt.key));let dn=cg(Vr);if(dn)return Ee(Ss,dn.result,!1,{preventScrollReset:Ve});if(dn=cg(Mt),dn)return le.add(dn.key),Ee(Ss,dn.result,!1,{preventScrollReset:Ve});let{loaderData:ra,errors:Dr}=uS(P,Mi,Vr,void 0,Nt,Mt);if(P.fetchers.has(j)){let Gt=Ca(At.data);P.fetchers.set(j,Gt)}Sn(li),P.navigation.state==="loading"&&li>he?(kt(N,"Expected pending action"),M&&M.abort(),zt(P.navigation.location,{matches:Mi,loaderData:ra,errors:Dr,fetchers:new Map(P.fetchers)})):(bt({errors:Dr,loaderData:dS(P.loaderData,ra,Mi,Dr),fetchers:new Map(P.fetchers)}),ve=!1)}async function xe(j,G,Q,me,Ae,Ye,tt,Ve,$e){let Ie=P.fetchers.get(j);Ne(j,Wd($e,Ie?Ie.data:void 0),{flushSync:tt});let dt=new AbortController,pt=Wc(i.history,Q,dt.signal);if(Ye){let At=await Mr(Ae,Q,pt.signal);if(At.type==="aborted")return;if(At.type==="error"){Le(j,G,At.error,{flushSync:tt});return}else if(At.matches)Ae=At.matches,me=uh(Ae,Q);else{Le(j,G,Bs(404,{pathname:Q}),{flushSync:tt});return}}_e.set(j,dt);let jt=be,Ht=(await ue("loader",P,pt,[me],Ae,j))[me.route.id];if(_e.get(j)===dt&&_e.delete(j),!pt.signal.aborted){if(Be.has(j)){Ne(j,Ca(void 0));return}if(kl(Ht))if(he>jt){Ne(j,Ca(void 0));return}else{le.add(j),await Ee(pt,Ht,!1,{preventScrollReset:Ve});return}if(as(Ht)){Le(j,G,Ht.error);return}Ne(j,Ca(Ht.data))}}async function Ee(j,G,Q,{submission:me,fetcherSubmission:Ae,preventScrollReset:Ye,replace:tt}={}){G.response.headers.has("X-Remix-Revalidate")&&(ve=!0);let Ve=G.response.headers.get("Location");kt(Ve,"Expected a Location header on the redirect Response"),Ve=lS(Ve,new URL(j.url),a);let $e=Wh(P.location,Ve,{_isRedirect:!0});if(e){let Ht=!1;if(G.response.headers.has("X-Remix-Reload-Document"))Ht=!0;else if(sE.test(Ve)){const At=i.history.createURL(Ve);Ht=At.origin!==t.location.origin||Cr(At.pathname,a)==null}if(Ht){tt?t.location.replace(Ve):t.location.assign(Ve);return}}M=null;let Ie=tt===!0||G.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:dt,formAction:pt,formEncType:jt}=P.navigation;!me&&!Ae&&dt&&pt&&jt&&(me=gS(P.navigation));let qt=me||Ae;if(tz.has(G.response.status)&&qt&&ur(qt.formMethod))await kn(Ie,$e,{submission:{...qt,formAction:Ve},preventScrollReset:Ye||L,enableViewTransition:Q?F:void 0});else{let Ht=k0($e,me);await kn(Ie,$e,{overrideNavigation:Ht,fetcherSubmission:Ae,preventScrollReset:Ye||L,enableViewTransition:Q?F:void 0})}}async function ue(j,G,Q,me,Ae,Ye){let tt,Ve={};try{tt=await uz(l,j,G,Q,me,Ae,Ye,s,n)}catch($e){return me.forEach(Ie=>{Ve[Ie.route.id]={type:"error",error:$e}}),Ve}for(let[$e,Ie]of Object.entries(tt))if(pz(Ie)){let dt=Ie.result;Ve[$e]={type:"redirect",response:fz(dt,Q,$e,Ae,a)}}else Ve[$e]=await hz(Ie);return Ve}async function Me(j,G,Q,me,Ae){let Ye=ue("loader",j,Ae,Q,G,null),tt=Promise.all(me.map(async Ie=>{if(Ie.matches&&Ie.match&&Ie.controller){let pt=(await ue("loader",j,Wc(i.history,Ie.path,Ie.controller.signal),[Ie.match],Ie.matches,Ie.key))[Ie.match.route.id];return{[Ie.key]:pt}}else return Promise.resolve({[Ie.key]:{type:"error",error:Bs(404,{pathname:Ie.path})}})})),Ve=await Ye,$e=(await tt).reduce((Ie,dt)=>Object.assign(Ie,dt),{});return{loaderResults:Ve,fetcherResults:$e}}function Qe(){ve=!0,U.forEach((j,G)=>{_e.has(G)&&Se.add(G),It(G)})}function Ne(j,G,Q={}){P.fetchers.set(j,G),bt({fetchers:new Map(P.fetchers)},{flushSync:(Q&&Q.flushSync)===!0})}function Le(j,G,Q,me={}){let Ae=Cl(P.matches,G);Et(j),bt({errors:{[Ae.route.id]:Q},fetchers:new Map(P.fetchers)},{flushSync:(me&&me.flushSync)===!0})}function je(j){return re.set(j,(re.get(j)||0)+1),Be.has(j)&&Be.delete(j),P.fetchers.get(j)||nz}function Et(j){let G=P.fetchers.get(j);_e.has(j)&&!(G&&G.state==="loading"&&ce.has(j))&&It(j),U.delete(j),ce.delete(j),le.delete(j),Be.delete(j),Se.delete(j),P.fetchers.delete(j)}function cn(j){let G=(re.get(j)||0)-1;G<=0?(re.delete(j),Be.add(j)):re.set(j,G),bt({fetchers:new Map(P.fetchers)})}function It(j){let G=_e.get(j);G&&(G.abort(),_e.delete(j))}function yt(j){for(let G of j){let Q=je(G),me=Ca(Q.data);P.fetchers.set(G,me)}}function Je(){let j=[],G=!1;for(let Q of le){let me=P.fetchers.get(Q);kt(me,`Expected fetcher: ${Q}`),me.state==="loading"&&(le.delete(Q),j.push(Q),G=!0)}return yt(j),G}function Sn(j){let G=[];for(let[Q,me]of ce)if(me<j){let Ae=P.fetchers.get(Q);kt(Ae,`Expected fetcher: ${Q}`),Ae.state==="loading"&&(It(Q),ce.delete(Q),G.push(Q))}return yt(G),G.length>0}function Qi(j,G){let Q=P.blockers.get(j)||Ud;return He.get(j)!==G&&He.set(j,G),Q}function Ni(j){P.blockers.delete(j),He.delete(j)}function Xs(j,G){let Q=P.blockers.get(j)||Ud;kt(Q.state==="unblocked"&&G.state==="blocked"||Q.state==="blocked"&&G.state==="blocked"||Q.state==="blocked"&&G.state==="proceeding"||Q.state==="blocked"&&G.state==="unblocked"||Q.state==="proceeding"&&G.state==="unblocked",`Invalid blocker state transition: ${Q.state} -> ${G.state}`);let me=new Map(P.blockers);me.set(j,G),bt({blockers:me})}function mo({currentLocation:j,nextLocation:G,historyAction:Q}){if(He.size===0)return;He.size>1&&Yn(!1,"A router only supports one blocker at a time");let me=Array.from(He.entries()),[Ae,Ye]=me[me.length-1],tt=P.blockers.get(Ae);if(!(tt&&tt.state==="proceeding")&&Ye({currentLocation:j,nextLocation:G,historyAction:Q}))return Ae}function Or(j){let G=Bs(404,{pathname:j}),Q=o||r,{matches:me,route:Ae}=fS(Q);return{notFoundMatches:me,route:Ae,error:G}}function ta(j,G,Q){if(p=j,_=G,v=Q||null,!E&&P.navigation===T0){E=!0;let me=na(P.location,P.matches);me!=null&&bt({restoreScrollPosition:me})}return()=>{p=null,_=null,v=null}}function ks(j,G){return v&&v(j,G.map(me=>O$(me,P.loaderData)))||j.key}function Js(j,G){if(p&&_){let Q=ks(j,G);p[Q]=_()}}function na(j,G){if(p){let Q=ks(j,G),me=p[Q];if(typeof me=="number")return me}return null}function Nr(j,G,Q){if(c)if(j){if(Object.keys(j[0].params).length>0)return{active:!0,matches:Ug(G,Q,a,!0)}}else return{active:!0,matches:Ug(G,Q,a,!0)||[]};return{active:!1,matches:null}}async function Mr(j,G,Q){if(!c)return{type:"success",matches:j};let me=j;for(;;){let Ae=o==null,Ye=o||r,tt=s;try{await c({path:G,matches:me,patch:(Ie,dt)=>{Q.aborted||aS(Ie,dt,Ye,tt,n)}})}catch(Ie){return{type:"error",error:Ie,partialMatches:me}}finally{Ae&&!Q.aborted&&(r=[...r])}if(Q.aborted)return{type:"aborted"};let Ve=Sa(Ye,G,a);if(Ve)return{type:"success",matches:Ve};let $e=Ug(Ye,G,a,!0);if(!$e||me.length===$e.length&&me.every((Ie,dt)=>Ie.route.id===$e[dt].route.id))return{type:"success",matches:null};me=$e}}function Ja(j){s={},o=bp(j,n,void 0,s)}function Qa(j,G){let Q=o==null;aS(j,G,o||r,s,n),Q&&(r=[...r],bt({}))}return O={get basename(){return a},get future(){return h},get state(){return P},get routes(){return r},get window(){return t},initialize:ut,subscribe:ht,enableScrollRestoration:ta,navigate:vn,fetch:X,revalidate:Dn,createHref:j=>i.history.createHref(j),encodeLocation:j=>i.history.encodeLocation(j),getFetcher:je,deleteFetcher:cn,dispose:et,getBlocker:Qi,deleteBlocker:Ni,patchRoutes:Qa,_internalFetchControllers:_e,_internalSetRoutes:Ja},O}function rz(i){return i!=null&&("formData"in i&&i.formData!=null||"body"in i&&i.body!==void 0)}function ry(i,t,e,n,s,r){let o,a;if(s){o=[];for(let c of t)if(o.push(c),c.route.id===s){a=c;break}}else o=t,a=t[t.length-1];let l=iE(n||".",nE(o),Cr(i.pathname,e)||i.pathname,r==="path");if(n==null&&(l.search=i.search,l.hash=i.hash),(n==null||n===""||n===".")&&a){let c=rE(l.search);if(a.route.index&&!c)l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index";else if(!a.route.index&&c){let h=new URLSearchParams(l.search),f=h.getAll("index");h.delete("index"),f.filter(p=>p).forEach(p=>h.append("index",p));let m=h.toString();l.search=m?`?${m}`:""}}return e!=="/"&&(l.pathname=l.pathname==="/"?e:so([e,l.pathname])),Fa(l)}function iS(i,t,e){if(!e||!rz(e))return{path:t};if(e.formMethod&&!bz(e.formMethod))return{path:t,error:Bs(405,{method:e.formMethod})};let n=()=>({path:t,error:Bs(400,{type:"invalid-body"})}),r=(e.formMethod||"get").toUpperCase(),o=bO(t);if(e.body!==void 0){if(e.formEncType==="text/plain"){if(!ur(r))return n();let f=typeof e.body=="string"?e.body:e.body instanceof FormData||e.body instanceof URLSearchParams?Array.from(e.body.entries()).reduce((m,[p,v])=>`${m}${p}=${v}
`,""):String(e.body);return{path:t,submission:{formMethod:r,formAction:o,formEncType:e.formEncType,formData:void 0,json:void 0,text:f}}}else if(e.formEncType==="application/json"){if(!ur(r))return n();try{let f=typeof e.body=="string"?JSON.parse(e.body):e.body;return{path:t,submission:{formMethod:r,formAction:o,formEncType:e.formEncType,formData:void 0,json:f,text:void 0}}}catch{return n()}}}kt(typeof FormData=="function","FormData is not available in this environment");let a,l;if(e.formData)a=ay(e.formData),l=e.formData;else if(e.body instanceof FormData)a=ay(e.body),l=e.body;else if(e.body instanceof URLSearchParams)a=e.body,l=cS(a);else if(e.body==null)a=new URLSearchParams,l=new FormData;else try{a=new URLSearchParams(e.body),l=cS(a)}catch{return n()}let c={formMethod:r,formAction:o,formEncType:e&&e.formEncType||"application/x-www-form-urlencoded",formData:l,json:void 0,text:void 0};if(ur(c.formMethod))return{path:t,submission:c};let h=Zo(t);return i&&h.search&&rE(h.search)&&a.append("index",""),h.search=`?${a}`,{path:Fa(h),submission:c}}function sS(i,t,e=!1){let n=i.findIndex(s=>s.route.id===t);return n>=0?i.slice(0,e?n+1:n):i}function rS(i,t,e,n,s,r,o,a,l,c,h,f,m,p){let v=p?as(p[1])?p[1].error:p[1].data:void 0,_=i.createURL(t.location),E=i.createURL(s),x=e;r&&t.errors?x=sS(e,Object.keys(t.errors)[0],!0):p&&as(p[1])&&(x=sS(e,p[0]));let k=p?p[1].statusCode:void 0,A=k&&k>=400,S=x.filter((P,N)=>{let{route:L}=P;if(L.lazy)return!0;if(L.loader==null)return!1;if(r)return oy(L,t.loaderData,t.errors);if(oz(t.loaderData,t.matches[N],P))return!0;let M=t.matches[N],F=P;return oS(P,{currentUrl:_,currentParams:M.params,nextUrl:E,nextParams:F.params,...n,actionResult:v,actionStatus:k,defaultShouldRevalidate:A?!1:o||_.pathname+_.search===E.pathname+E.search||_.search!==E.search||az(M,F)})}),O=[];return c.forEach((P,N)=>{if(r||!e.some(K=>K.route.id===P.routeId)||l.has(N))return;let L=Sa(f,P.path,m);if(!L){O.push({key:N,routeId:P.routeId,path:P.path,matches:null,match:null,controller:null});return}let M=t.fetchers.get(N),F=uh(L,P.path),q=!1;h.has(N)?q=!1:a.has(N)?(a.delete(N),q=!0):M&&M.state!=="idle"&&M.data===void 0?q=o:q=oS(F,{currentUrl:_,currentParams:t.matches[t.matches.length-1].params,nextUrl:E,nextParams:e[e.length-1].params,...n,actionResult:v,actionStatus:k,defaultShouldRevalidate:A?!1:o}),q&&O.push({key:N,routeId:P.routeId,path:P.path,matches:L,match:F,controller:new AbortController})}),[S,O]}function oy(i,t,e){if(i.lazy)return!0;if(!i.loader)return!1;let n=t!=null&&t[i.id]!==void 0,s=e!=null&&e[i.id]!==void 0;return!n&&s?!1:typeof i.loader=="function"&&i.loader.hydrate===!0?!0:!n&&!s}function oz(i,t,e){let n=!t||e.route.id!==t.route.id,s=!i.hasOwnProperty(e.route.id);return n||s}function az(i,t){let e=i.route.path;return i.pathname!==t.pathname||e!=null&&e.endsWith("*")&&i.params["*"]!==t.params["*"]}function oS(i,t){if(i.route.shouldRevalidate){let e=i.route.shouldRevalidate(t);if(typeof e=="boolean")return e}return t.defaultShouldRevalidate}function aS(i,t,e,n,s){let r;if(i){let l=n[i];kt(l,`No route found to patch children into: routeId = ${i}`),l.children||(l.children=[]),r=l.children}else r=e;let o=t.filter(l=>!r.some(c=>pO(l,c))),a=bp(o,s,[i||"_","patch",String((r==null?void 0:r.length)||"0")],n);r.push(...a)}function pO(i,t){return"id"in i&&"id"in t&&i.id===t.id?!0:i.index===t.index&&i.path===t.path&&i.caseSensitive===t.caseSensitive?(!i.children||i.children.length===0)&&(!t.children||t.children.length===0)?!0:i.children.every((e,n)=>{var s;return(s=t.children)==null?void 0:s.some(r=>pO(e,r))}):!1}async function lz(i,t,e){if(!i.lazy)return;let n=await i.lazy();if(!i.lazy)return;let s=e[i.id];kt(s,"No route found in manifest");let r={};for(let o in n){let l=s[o]!==void 0&&o!=="hasErrorBoundary";Yn(!l,`Route "${s.id}" has a static property "${o}" defined but its lazy function is also returning a value for this property. The lazy route property "${o}" will be ignored.`),!l&&!I$.has(o)&&(r[o]=n[o])}Object.assign(s,r),Object.assign(s,{...t(s),lazy:void 0})}async function cz({matches:i}){let t=i.filter(n=>n.shouldLoad);return(await Promise.all(t.map(n=>n.resolve()))).reduce((n,s,r)=>Object.assign(n,{[t[r].route.id]:s}),{})}async function uz(i,t,e,n,s,r,o,a,l,c){let h=r.map(p=>p.route.lazy?lz(p.route,l,a):void 0),f=r.map((p,v)=>{let _=h[v],E=s.some(k=>k.route.id===p.route.id);return{...p,shouldLoad:E,resolve:async k=>(k&&n.method==="GET"&&(p.route.lazy||p.route.loader)&&(E=!0),E?dz(t,n,p,_,k,c):Promise.resolve({type:"data",result:void 0}))}}),m=await i({matches:f,request:n,params:r[0].params,fetcherKey:o,context:c});try{await Promise.all(h)}catch{}return m}async function dz(i,t,e,n,s,r){let o,a,l=c=>{let h,f=new Promise((v,_)=>h=_);a=()=>h(),t.signal.addEventListener("abort",a);let m=v=>typeof c!="function"?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${i}" [routeId: ${e.route.id}]`)):c({request:t,params:e.params,context:r},...v!==void 0?[v]:[]),p=(async()=>{try{return{type:"data",result:await(s?s(_=>m(_)):m())}}catch(v){return{type:"error",result:v}}})();return Promise.race([p,f])};try{let c=e.route[i];if(n)if(c){let h,[f]=await Promise.all([l(c).catch(m=>{h=m}),n]);if(h!==void 0)throw h;o=f}else if(await n,c=e.route[i],c)o=await l(c);else if(i==="action"){let h=new URL(t.url),f=h.pathname+h.search;throw Bs(405,{method:t.method,pathname:f,routeId:e.route.id})}else return{type:"data",result:void 0};else if(c)o=await l(c);else{let h=new URL(t.url),f=h.pathname+h.search;throw Bs(404,{pathname:f})}}catch(c){return{type:"error",result:c}}finally{a&&t.signal.removeEventListener("abort",a)}return o}async function hz(i){var n,s,r,o,a,l;let{result:t,type:e}=i;if(wO(t)){let c;try{let h=t.headers.get("Content-Type");h&&/\bapplication\/json\b/.test(h)?t.body==null?c=null:c=await t.json():c=await t.text()}catch(h){return{type:"error",error:h}}return e==="error"?{type:"error",error:new vp(t.status,t.statusText,c),statusCode:t.status,headers:t.headers}:{type:"data",data:c,statusCode:t.status,headers:t.headers}}return e==="error"?mS(t)?t.data instanceof Error?{type:"error",error:t.data,statusCode:(n=t.init)==null?void 0:n.status,headers:(s=t.init)!=null&&s.headers?new Headers(t.init.headers):void 0}:{type:"error",error:new vp(((r=t.init)==null?void 0:r.status)||500,void 0,t.data),statusCode:qh(t)?t.status:void 0,headers:(o=t.init)!=null&&o.headers?new Headers(t.init.headers):void 0}:{type:"error",error:t,statusCode:qh(t)?t.status:void 0}:mS(t)?{type:"data",data:t.data,statusCode:(a=t.init)==null?void 0:a.status,headers:(l=t.init)!=null&&l.headers?new Headers(t.init.headers):void 0}:{type:"data",data:t}}function fz(i,t,e,n,s){let r=i.headers.get("Location");if(kt(r,"Redirects returned/thrown from loaders/actions must have a Location header"),!sE.test(r)){let o=n.slice(0,n.findIndex(a=>a.route.id===e)+1);r=ry(new URL(t.url),o,s,r),i.headers.set("Location",r)}return i}function lS(i,t,e){if(sE.test(i)){let n=i,s=n.startsWith("//")?new URL(t.protocol+n):new URL(n),r=Cr(s.pathname,e)!=null;if(s.origin===t.origin&&r)return s.pathname+s.search+s.hash}return i}function Wc(i,t,e,n){let s=i.createURL(bO(t)).toString(),r={signal:e};if(n&&ur(n.formMethod)){let{formMethod:o,formEncType:a}=n;r.method=o.toUpperCase(),a==="application/json"?(r.headers=new Headers({"Content-Type":a}),r.body=JSON.stringify(n.json)):a==="text/plain"?r.body=n.text:a==="application/x-www-form-urlencoded"&&n.formData?r.body=ay(n.formData):r.body=n.formData}return new Request(s,r)}function ay(i){let t=new URLSearchParams;for(let[e,n]of i.entries())t.append(e,typeof n=="string"?n:n.name);return t}function cS(i){let t=new FormData;for(let[e,n]of i.entries())t.append(e,n);return t}function mz(i,t,e,n=!1,s=!1){let r={},o=null,a,l=!1,c={},h=e&&as(e[1])?e[1].error:void 0;return i.forEach(f=>{if(!(f.route.id in t))return;let m=f.route.id,p=t[m];if(kt(!kl(p),"Cannot handle redirect results in processLoaderData"),as(p)){let v=p.error;if(h!==void 0&&(v=h,h=void 0),o=o||{},s)o[m]=v;else{let _=Cl(i,m);o[_.route.id]==null&&(o[_.route.id]=v)}n||(r[m]=gO),l||(l=!0,a=qh(p.error)?p.error.status:500),p.headers&&(c[m]=p.headers)}else r[m]=p.data,p.statusCode&&p.statusCode!==200&&!l&&(a=p.statusCode),p.headers&&(c[m]=p.headers)}),h!==void 0&&e&&(o={[e[0]]:h},r[e[0]]=void 0),{loaderData:r,errors:o,statusCode:a||200,loaderHeaders:c}}function uS(i,t,e,n,s,r){let{loaderData:o,errors:a}=mz(t,e,n);return s.forEach(l=>{let{key:c,match:h,controller:f}=l,m=r[c];if(kt(m,"Did not find corresponding fetcher result"),!(f&&f.signal.aborted))if(as(m)){let p=Cl(i.matches,h==null?void 0:h.route.id);a&&a[p.route.id]||(a={...a,[p.route.id]:m.error}),i.fetchers.delete(c)}else if(kl(m))kt(!1,"Unhandled fetcher revalidation redirect");else{let p=Ca(m.data);i.fetchers.set(c,p)}}),{loaderData:o,errors:a}}function dS(i,t,e,n){let s=Object.entries(t).filter(([,r])=>r!==gO).reduce((r,[o,a])=>(r[o]=a,r),{});for(let r of e){let o=r.route.id;if(!t.hasOwnProperty(o)&&i.hasOwnProperty(o)&&r.route.loader&&(s[o]=i[o]),n&&n.hasOwnProperty(o))break}return s}function hS(i){return i?as(i[1])?{actionData:{}}:{actionData:{[i[0]]:i[1].data}}:{}}function Cl(i,t){return(t?i.slice(0,i.findIndex(n=>n.route.id===t)+1):[...i]).reverse().find(n=>n.route.hasErrorBoundary===!0)||i[0]}function fS(i){let t=i.length===1?i[0]:i.find(e=>e.index||!e.path||e.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:t}],route:t}}function Bs(i,{pathname:t,routeId:e,method:n,type:s,message:r}={}){let o="Unknown Server Error",a="Unknown @remix-run/router error";return i===400?(o="Bad Request",n&&t&&e?a=`You made a ${n} request to "${t}" but did not provide a \`loader\` for route "${e}", so there is no way to handle the request.`:s==="invalid-body"&&(a="Unable to encode submission body")):i===403?(o="Forbidden",a=`Route "${e}" does not match URL "${t}"`):i===404?(o="Not Found",a=`No route matches URL "${t}"`):i===405&&(o="Method Not Allowed",n&&t&&e?a=`You made a ${n.toUpperCase()} request to "${t}" but did not provide an \`action\` for route "${e}", so there is no way to handle the request.`:n&&(a=`Invalid request method "${n.toUpperCase()}"`)),new vp(i||500,o,new Error(a),!0)}function cg(i){let t=Object.entries(i);for(let e=t.length-1;e>=0;e--){let[n,s]=t[e];if(kl(s))return{key:n,result:s}}}function bO(i){let t=typeof i=="string"?Zo(i):i;return Fa({...t,hash:""})}function gz(i,t){return i.pathname!==t.pathname||i.search!==t.search?!1:i.hash===""?t.hash!=="":i.hash===t.hash?!0:t.hash!==""}function pz(i){return wO(i.result)&&ez.has(i.result.status)}function as(i){return i.type==="error"}function kl(i){return(i&&i.type)==="redirect"}function mS(i){return typeof i=="object"&&i!=null&&"type"in i&&"data"in i&&"init"in i&&i.type==="DataWithResponseInit"}function wO(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.headers=="object"&&typeof i.body<"u"}function bz(i){return Q$.has(i.toUpperCase())}function ur(i){return X$.has(i.toUpperCase())}function rE(i){return new URLSearchParams(i).getAll("index").some(t=>t==="")}function uh(i,t){let e=typeof t=="string"?Zo(t).search:t.search;if(i[i.length-1].route.index&&rE(e||""))return i[i.length-1];let n=hO(i);return n[n.length-1]}function gS(i){let{formMethod:t,formAction:e,formEncType:n,text:s,formData:r,json:o}=i;if(!(!t||!e||!n)){if(s!=null)return{formMethod:t,formAction:e,formEncType:n,formData:void 0,json:void 0,text:s};if(r!=null)return{formMethod:t,formAction:e,formEncType:n,formData:r,json:void 0,text:void 0};if(o!==void 0)return{formMethod:t,formAction:e,formEncType:n,formData:void 0,json:o,text:void 0}}}function k0(i,t){return t?{state:"loading",location:i,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}:{state:"loading",location:i,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function wz(i,t){return{state:"submitting",location:i,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}}function Wd(i,t){return i?{state:"loading",formMethod:i.formMethod,formAction:i.formAction,formEncType:i.formEncType,formData:i.formData,json:i.json,text:i.text,data:t}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function vz(i,t){return{state:"submitting",formMethod:i.formMethod,formAction:i.formAction,formEncType:i.formEncType,formData:i.formData,json:i.json,text:i.text,data:t?t.data:void 0}}function Ca(i){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:i}}function yz(i,t){try{let e=i.sessionStorage.getItem(mO);if(e){let n=JSON.parse(e);for(let[s,r]of Object.entries(n||{}))r&&Array.isArray(r)&&t.set(s,new Set(r||[]))}}catch{}}function _z(i,t){if(t.size>0){let e={};for(let[n,s]of t)e[n]=[...s];try{i.sessionStorage.setItem(mO,JSON.stringify(e))}catch(n){Yn(!1,`Failed to save applied view transitions in sessionStorage (${n}).`)}}}function Ez(){let i,t,e=new Promise((n,s)=>{i=async r=>{n(r);try{await e}catch{}},t=async r=>{s(r);try{await e}catch{}}});return{promise:e,resolve:i,reject:t}}var Ql=R.createContext(null);Ql.displayName="DataRouter";var kf=R.createContext(null);kf.displayName="DataRouterState";var oE=R.createContext({isTransitioning:!1});oE.displayName="ViewTransition";var vO=R.createContext(new Map);vO.displayName="Fetchers";var Cz=R.createContext(null);Cz.displayName="Await";var uo=R.createContext(null);uo.displayName="Navigation";var Eb=R.createContext(null);Eb.displayName="Location";var Ar=R.createContext({outlet:null,matches:[],isDataRoute:!1});Ar.displayName="Route";var aE=R.createContext(null);aE.displayName="RouteError";function xz(i,{relative:t}={}){kt(Sf(),"useHref() may be used only in the context of a <Router> component.");let{basename:e,navigator:n}=R.useContext(uo),{hash:s,pathname:r,search:o}=Af(i,{relative:t}),a=r;return e!=="/"&&(a=r==="/"?e:so([e,r])),n.createHref({pathname:a,search:o,hash:s})}function Sf(){return R.useContext(Eb)!=null}function qa(){return kt(Sf(),"useLocation() may be used only in the context of a <Router> component."),R.useContext(Eb).location}var yO="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function _O(i){R.useContext(uo).static||R.useLayoutEffect(i)}function ec(){let{isDataRoute:i}=R.useContext(Ar);return i?Fz():Tz()}function Tz(){kt(Sf(),"useNavigate() may be used only in the context of a <Router> component.");let i=R.useContext(Ql),{basename:t,navigator:e}=R.useContext(uo),{matches:n}=R.useContext(Ar),{pathname:s}=qa(),r=JSON.stringify(nE(n)),o=R.useRef(!1);return _O(()=>{o.current=!0}),R.useCallback((l,c={})=>{if(Yn(o.current,yO),!o.current)return;if(typeof l=="number"){e.go(l);return}let h=iE(l,JSON.parse(r),s,c.relative==="path");i==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:so([t,h.pathname])),(c.replace?e.replace:e.push)(h,c.state,c)},[t,e,r,s,i])}var kz=R.createContext(null);function Sz(i){let t=R.useContext(Ar).outlet;return t&&R.createElement(kz.Provider,{value:i},t)}function lE(){let{matches:i}=R.useContext(Ar),t=i[i.length-1];return t?t.params:{}}function Af(i,{relative:t}={}){let{matches:e}=R.useContext(Ar),{pathname:n}=qa(),s=JSON.stringify(nE(e));return R.useMemo(()=>iE(i,JSON.parse(s),n,t==="path"),[i,s,n,t])}function Az(i,t,e,n){kt(Sf(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s,static:r}=R.useContext(uo),{matches:o}=R.useContext(Ar),a=o[o.length-1],l=a?a.params:{},c=a?a.pathname:"/",h=a?a.pathnameBase:"/",f=a&&a.route;{let k=f&&f.path||"";EO(c,!f||k.endsWith("*")||k.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${k}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${k}"> to <Route path="${k==="/"?"*":`${k}/*`}">.`)}let m=qa(),p;p=m;let v=p.pathname||"/",_=v;if(h!=="/"){let k=h.replace(/^\//,"").split("/");_="/"+v.replace(/^\//,"").split("/").slice(k.length).join("/")}let E=!r&&e&&e.matches&&e.matches.length>0?e.matches:Sa(i,{pathname:_});return Yn(f||E!=null,`No routes matched location "${p.pathname}${p.search}${p.hash}" `),Yn(E==null||E[E.length-1].route.element!==void 0||E[E.length-1].route.Component!==void 0||E[E.length-1].route.lazy!==void 0,`Matched leaf route at location "${p.pathname}${p.search}${p.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),Nz(E&&E.map(k=>Object.assign({},k,{params:Object.assign({},l,k.params),pathname:so([h,s.encodeLocation?s.encodeLocation(k.pathname).pathname:k.pathname]),pathnameBase:k.pathnameBase==="/"?h:so([h,s.encodeLocation?s.encodeLocation(k.pathnameBase).pathname:k.pathnameBase])})),o,e,n)}function Pz(){let i=Bz(),t=qh(i)?`${i.status} ${i.statusText}`:i instanceof Error?i.message:JSON.stringify(i),e=i instanceof Error?i.stack:null,n="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:n},r={padding:"2px 4px",backgroundColor:n},o=null;return console.error("Error handled by React Router default ErrorBoundary:",i),o=R.createElement(R.Fragment,null,R.createElement("p",null,"💿 Hey developer 👋"),R.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",R.createElement("code",{style:r},"ErrorBoundary")," or"," ",R.createElement("code",{style:r},"errorElement")," prop on your route.")),R.createElement(R.Fragment,null,R.createElement("h2",null,"Unexpected Application Error!"),R.createElement("h3",{style:{fontStyle:"italic"}},t),e?R.createElement("pre",{style:s},e):null,o)}var Iz=R.createElement(Pz,null),Rz=class extends R.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,t){return t.location!==i.location||t.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:t.error,location:t.location,revalidation:i.revalidation||t.revalidation}}componentDidCatch(i,t){console.error("React Router caught the following error during render",i,t)}render(){return this.state.error!==void 0?R.createElement(Ar.Provider,{value:this.props.routeContext},R.createElement(aE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Oz({routeContext:i,match:t,children:e}){let n=R.useContext(Ql);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),R.createElement(Ar.Provider,{value:i},e)}function Nz(i,t=[],e=null,n=null){if(i==null){if(!e)return null;if(e.errors)i=e.matches;else if(t.length===0&&!e.initialized&&e.matches.length>0)i=e.matches;else return null}let s=i,r=e==null?void 0:e.errors;if(r!=null){let l=s.findIndex(c=>c.route.id&&(r==null?void 0:r[c.route.id])!==void 0);kt(l>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(r).join(",")}`),s=s.slice(0,Math.min(s.length,l+1))}let o=!1,a=-1;if(e)for(let l=0;l<s.length;l++){let c=s[l];if((c.route.HydrateFallback||c.route.hydrateFallbackElement)&&(a=l),c.route.id){let{loaderData:h,errors:f}=e,m=c.route.loader&&!h.hasOwnProperty(c.route.id)&&(!f||f[c.route.id]===void 0);if(c.route.lazy||m){o=!0,a>=0?s=s.slice(0,a+1):s=[s[0]];break}}}return s.reduceRight((l,c,h)=>{let f,m=!1,p=null,v=null;e&&(f=r&&c.route.id?r[c.route.id]:void 0,p=c.route.errorElement||Iz,o&&(a<0&&h===0?(EO("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),m=!0,v=null):a===h&&(m=!0,v=c.route.hydrateFallbackElement||null)));let _=t.concat(s.slice(0,h+1)),E=()=>{let x;return f?x=p:m?x=v:c.route.Component?x=R.createElement(c.route.Component,null):c.route.element?x=c.route.element:x=l,R.createElement(Oz,{match:c,routeContext:{outlet:l,matches:_,isDataRoute:e!=null},children:x})};return e&&(c.route.ErrorBoundary||c.route.errorElement||h===0)?R.createElement(Rz,{location:e.location,revalidation:e.revalidation,component:p,error:f,children:E(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):E()},null)}function cE(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Mz(i){let t=R.useContext(Ql);return kt(t,cE(i)),t}function Lz(i){let t=R.useContext(kf);return kt(t,cE(i)),t}function Vz(i){let t=R.useContext(Ar);return kt(t,cE(i)),t}function uE(i){let t=Vz(i),e=t.matches[t.matches.length-1];return kt(e.route.id,`${i} can only be used on routes that contain a unique "id"`),e.route.id}function Dz(){return uE("useRouteId")}function Bz(){var n;let i=R.useContext(aE),t=Lz("useRouteError"),e=uE("useRouteError");return i!==void 0?i:(n=t.errors)==null?void 0:n[e]}function Fz(){let{router:i}=Mz("useNavigate"),t=uE("useNavigate"),e=R.useRef(!1);return _O(()=>{e.current=!0}),R.useCallback(async(s,r={})=>{Yn(e.current,yO),e.current&&(typeof s=="number"?i.navigate(s):await i.navigate(s,{fromRouteId:t,...r}))},[i,t])}var pS={};function EO(i,t,e){!t&&!pS[i]&&(pS[i]=!0,Yn(!1,e))}var bS={};function wS(i,t){!i&&!bS[t]&&(bS[t]=!0,console.warn(t))}function $z(i){let t={hasErrorBoundary:i.hasErrorBoundary||i.ErrorBoundary!=null||i.errorElement!=null};return i.Component&&(i.element&&Yn(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(t,{element:R.createElement(i.Component),Component:void 0})),i.HydrateFallback&&(i.hydrateFallbackElement&&Yn(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(t,{hydrateFallbackElement:R.createElement(i.HydrateFallback),HydrateFallback:void 0})),i.ErrorBoundary&&(i.errorElement&&Yn(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(t,{errorElement:R.createElement(i.ErrorBoundary),ErrorBoundary:void 0})),t}var zz=class{constructor(){this.status="pending",this.promise=new Promise((i,t)=>{this.resolve=e=>{this.status==="pending"&&(this.status="resolved",i(e))},this.reject=e=>{this.status==="pending"&&(this.status="rejected",t(e))}})}};function jz({router:i,flushSync:t}){let[e,n]=R.useState(i.state),[s,r]=R.useState(),[o,a]=R.useState({isTransitioning:!1}),[l,c]=R.useState(),[h,f]=R.useState(),[m,p]=R.useState(),v=R.useRef(new Map),_=R.useCallback((A,{deletedFetchers:S,flushSync:O,viewTransitionOpts:P})=>{A.fetchers.forEach((L,M)=>{L.data!==void 0&&v.current.set(M,L.data)}),S.forEach(L=>v.current.delete(L)),wS(O===!1||t!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let N=i.window!=null&&i.window.document!=null&&typeof i.window.document.startViewTransition=="function";if(wS(P==null||N,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!P||!N){t&&O?t(()=>n(A)):R.startTransition(()=>n(A));return}if(t&&O){t(()=>{h&&(l&&l.resolve(),h.skipTransition()),a({isTransitioning:!0,flushSync:!0,currentLocation:P.currentLocation,nextLocation:P.nextLocation})});let L=i.window.document.startViewTransition(()=>{t(()=>n(A))});L.finished.finally(()=>{t(()=>{c(void 0),f(void 0),r(void 0),a({isTransitioning:!1})})}),t(()=>f(L));return}h?(l&&l.resolve(),h.skipTransition(),p({state:A,currentLocation:P.currentLocation,nextLocation:P.nextLocation})):(r(A),a({isTransitioning:!0,flushSync:!1,currentLocation:P.currentLocation,nextLocation:P.nextLocation}))},[i.window,t,h,l]);R.useLayoutEffect(()=>i.subscribe(_),[i,_]),R.useEffect(()=>{o.isTransitioning&&!o.flushSync&&c(new zz)},[o]),R.useEffect(()=>{if(l&&s&&i.window){let A=s,S=l.promise,O=i.window.document.startViewTransition(async()=>{R.startTransition(()=>n(A)),await S});O.finished.finally(()=>{c(void 0),f(void 0),r(void 0),a({isTransitioning:!1})}),f(O)}},[s,l,i.window]),R.useEffect(()=>{l&&s&&e.location.key===s.location.key&&l.resolve()},[l,h,e.location,s]),R.useEffect(()=>{!o.isTransitioning&&m&&(r(m.state),a({isTransitioning:!0,flushSync:!1,currentLocation:m.currentLocation,nextLocation:m.nextLocation}),p(void 0))},[o.isTransitioning,m]);let E=R.useMemo(()=>({createHref:i.createHref,encodeLocation:i.encodeLocation,go:A=>i.navigate(A),push:(A,S,O)=>i.navigate(A,{state:S,preventScrollReset:O==null?void 0:O.preventScrollReset}),replace:(A,S,O)=>i.navigate(A,{replace:!0,state:S,preventScrollReset:O==null?void 0:O.preventScrollReset})}),[i]),x=i.basename||"/",k=R.useMemo(()=>({router:i,navigator:E,static:!1,basename:x}),[i,E,x]);return R.createElement(R.Fragment,null,R.createElement(Ql.Provider,{value:k},R.createElement(kf.Provider,{value:e},R.createElement(vO.Provider,{value:v.current},R.createElement(oE.Provider,{value:o},R.createElement(Wz,{basename:x,location:e.location,navigationType:e.historyAction,navigator:E},R.createElement(Hz,{routes:i.routes,future:i.future,state:e})))))),null)}var Hz=R.memo(Uz);function Uz({routes:i,future:t,state:e}){return Az(i,void 0,e,t)}function CO(i){return Sz(i.context)}function Wz({basename:i="/",children:t=null,location:e,navigationType:n="POP",navigator:s,static:r=!1}){kt(!Sf(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=i.replace(/^\/*/,"/"),a=R.useMemo(()=>({basename:o,navigator:s,static:r,future:{}}),[o,s,r]);typeof e=="string"&&(e=Zo(e));let{pathname:l="/",search:c="",hash:h="",state:f=null,key:m="default"}=e,p=R.useMemo(()=>{let v=Cr(l,o);return v==null?null:{location:{pathname:v,search:c,hash:h,state:f,key:m},navigationType:n}},[o,l,c,h,f,m,n]);return Yn(p!=null,`<Router basename="${o}"> is not able to match the URL "${l}${c}${h}" because it does not start with the basename, so the <Router> won't render anything.`),p==null?null:R.createElement(uo.Provider,{value:a},R.createElement(Eb.Provider,{children:t,value:p}))}var Wg="get",qg="application/x-www-form-urlencoded";function Cb(i){return i!=null&&typeof i.tagName=="string"}function qz(i){return Cb(i)&&i.tagName.toLowerCase()==="button"}function Gz(i){return Cb(i)&&i.tagName.toLowerCase()==="form"}function Kz(i){return Cb(i)&&i.tagName.toLowerCase()==="input"}function Yz(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function Zz(i,t){return i.button===0&&(!t||t==="_self")&&!Yz(i)}var ug=null;function Xz(){if(ug===null)try{new FormData(document.createElement("form"),0),ug=!1}catch{ug=!0}return ug}var Jz=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function S0(i){return i!=null&&!Jz.has(i)?(Yn(!1,`"${i}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${qg}"`),null):i}function Qz(i,t){let e,n,s,r,o;if(Gz(i)){let a=i.getAttribute("action");n=a?Cr(a,t):null,e=i.getAttribute("method")||Wg,s=S0(i.getAttribute("enctype"))||qg,r=new FormData(i)}else if(qz(i)||Kz(i)&&(i.type==="submit"||i.type==="image")){let a=i.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=i.getAttribute("formaction")||a.getAttribute("action");if(n=l?Cr(l,t):null,e=i.getAttribute("formmethod")||a.getAttribute("method")||Wg,s=S0(i.getAttribute("formenctype"))||S0(a.getAttribute("enctype"))||qg,r=new FormData(a,i),!Xz()){let{name:c,type:h,value:f}=i;if(h==="image"){let m=c?`${c}.`:"";r.append(`${m}x`,"0"),r.append(`${m}y`,"0")}else c&&r.append(c,f)}}else{if(Cb(i))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');e=Wg,n=null,s=qg,o=i}return r&&s==="text/plain"&&(o=r,r=void 0),{action:n,method:e.toLowerCase(),encType:s,formData:r,body:o}}function dE(i,t){if(i===!1||i===null||typeof i>"u")throw new Error(t)}async function ej(i,t){if(i.id in t)return t[i.id];try{let e=await import(i.module);return t[i.id]=e,e}catch(e){return console.error(`Error loading route module \`${i.module}\`, reloading page...`),console.error(e),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function tj(i){return i==null?!1:i.href==null?i.rel==="preload"&&typeof i.imageSrcSet=="string"&&typeof i.imageSizes=="string":typeof i.rel=="string"&&typeof i.href=="string"}async function nj(i,t,e){let n=await Promise.all(i.map(async s=>{let r=t.routes[s.route.id];if(r){let o=await ej(r,e);return o.links?o.links():[]}return[]}));return oj(n.flat(1).filter(tj).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function vS(i,t,e,n,s,r){let o=(l,c)=>e[c]?l.route.id!==e[c].route.id:!0,a=(l,c)=>{var h;return e[c].pathname!==l.pathname||((h=e[c].route.path)==null?void 0:h.endsWith("*"))&&e[c].params["*"]!==l.params["*"]};return r==="assets"?t.filter((l,c)=>o(l,c)||a(l,c)):r==="data"?t.filter((l,c)=>{var f;let h=n.routes[l.route.id];if(!h||!h.hasLoader)return!1;if(o(l,c)||a(l,c))return!0;if(l.route.shouldRevalidate){let m=l.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((f=e[0])==null?void 0:f.params)||{},nextUrl:new URL(i,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof m=="boolean")return m}return!0}):[]}function ij(i,t){return sj(i.map(e=>{let n=t.routes[e.route.id];if(!n)return[];let s=[n.module];return n.imports&&(s=s.concat(n.imports)),s}).flat(1))}function sj(i){return[...new Set(i)]}function rj(i){let t={},e=Object.keys(i).sort();for(let n of e)t[n]=i[n];return t}function oj(i,t){let e=new Set;return new Set(t),i.reduce((n,s)=>{let r=JSON.stringify(rj(s));return e.has(r)||(e.add(r),n.push({key:r,link:s})),n},[])}function aj(i){let t=typeof i=="string"?new URL(i,typeof window>"u"?"server://singlefetch/":window.location.origin):i;return t.pathname==="/"?t.pathname="_root.data":t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function lj(){let i=R.useContext(Ql);return dE(i,"You must render this element inside a <DataRouterContext.Provider> element"),i}function cj(){let i=R.useContext(kf);return dE(i,"You must render this element inside a <DataRouterStateContext.Provider> element"),i}var hE=R.createContext(void 0);hE.displayName="FrameworkContext";function xO(){let i=R.useContext(hE);return dE(i,"You must render this element inside a <HydratedRouter> element"),i}function uj(i,t){let e=R.useContext(hE),[n,s]=R.useState(!1),[r,o]=R.useState(!1),{onFocus:a,onBlur:l,onMouseEnter:c,onMouseLeave:h,onTouchStart:f}=t,m=R.useRef(null);R.useEffect(()=>{if(i==="render"&&o(!0),i==="viewport"){let _=x=>{x.forEach(k=>{o(k.isIntersecting)})},E=new IntersectionObserver(_,{threshold:.5});return m.current&&E.observe(m.current),()=>{E.disconnect()}}},[i]),R.useEffect(()=>{if(n){let _=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(_)}}},[n]);let p=()=>{s(!0)},v=()=>{s(!1),o(!1)};return e?i!=="intent"?[r,m,{}]:[r,m,{onFocus:qd(a,p),onBlur:qd(l,v),onMouseEnter:qd(c,p),onMouseLeave:qd(h,v),onTouchStart:qd(f,p)}]:[!1,m,{}]}function qd(i,t){return e=>{i&&i(e),e.defaultPrevented||t(e)}}function dj({page:i,...t}){let{router:e}=lj(),n=R.useMemo(()=>Sa(e.routes,i,e.basename),[e.routes,i,e.basename]);return n?R.createElement(fj,{page:i,matches:n,...t}):null}function hj(i){let{manifest:t,routeModules:e}=xO(),[n,s]=R.useState([]);return R.useEffect(()=>{let r=!1;return nj(i,t,e).then(o=>{r||s(o)}),()=>{r=!0}},[i,t,e]),n}function fj({page:i,matches:t,...e}){let n=qa(),{manifest:s,routeModules:r}=xO(),{loaderData:o,matches:a}=cj(),l=R.useMemo(()=>vS(i,t,a,s,n,"data"),[i,t,a,s,n]),c=R.useMemo(()=>vS(i,t,a,s,n,"assets"),[i,t,a,s,n]),h=R.useMemo(()=>{if(i===n.pathname+n.search+n.hash)return[];let p=new Set,v=!1;if(t.forEach(E=>{var k;let x=s.routes[E.route.id];!x||!x.hasLoader||(!l.some(A=>A.route.id===E.route.id)&&E.route.id in o&&((k=r[E.route.id])!=null&&k.shouldRevalidate)||x.hasClientLoader?v=!0:p.add(E.route.id))}),p.size===0)return[];let _=aj(i);return v&&p.size>0&&_.searchParams.set("_routes",t.filter(E=>p.has(E.route.id)).map(E=>E.route.id).join(",")),[_.pathname+_.search]},[o,n,s,l,t,i,r]),f=R.useMemo(()=>ij(c,s),[c,s]),m=hj(c);return R.createElement(R.Fragment,null,h.map(p=>R.createElement("link",{key:p,rel:"prefetch",as:"fetch",href:p,...e})),f.map(p=>R.createElement("link",{key:p,rel:"modulepreload",href:p,...e})),m.map(({key:p,link:v})=>R.createElement("link",{key:p,...v})))}function mj(...i){return t=>{i.forEach(e=>{typeof e=="function"?e(t):e!=null&&(e.current=t)})}}var TO=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{TO&&(window.__reactRouterVersion="7.1.5")}catch{}function gj(i,t){return sz({basename:t==null?void 0:t.basename,future:t==null?void 0:t.future,history:S$({window:t==null?void 0:t.window}),hydrationData:pj(),routes:i,mapRouteProperties:$z,dataStrategy:t==null?void 0:t.dataStrategy,patchRoutesOnNavigation:t==null?void 0:t.patchRoutesOnNavigation,window:t==null?void 0:t.window}).initialize()}function pj(){let i=window==null?void 0:window.__staticRouterHydrationData;return i&&i.errors&&(i={...i,errors:bj(i.errors)}),i}function bj(i){if(!i)return null;let t=Object.entries(i),e={};for(let[n,s]of t)if(s&&s.__type==="RouteErrorResponse")e[n]=new vp(s.status,s.statusText,s.data,s.internal===!0);else if(s&&s.__type==="Error"){if(s.__subType){let r=window[s.__subType];if(typeof r=="function")try{let o=new r(s.message);o.stack="",e[n]=o}catch{}}if(e[n]==null){let r=new Error(s.message);r.stack="",e[n]=r}}else e[n]=s;return e}var kO=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,SO=R.forwardRef(function({onClick:t,discover:e="render",prefetch:n="none",relative:s,reloadDocument:r,replace:o,state:a,target:l,to:c,preventScrollReset:h,viewTransition:f,...m},p){let{basename:v}=R.useContext(uo),_=typeof c=="string"&&kO.test(c),E,x=!1;if(typeof c=="string"&&_&&(E=c,TO))try{let M=new URL(window.location.href),F=c.startsWith("//")?new URL(M.protocol+c):new URL(c),q=Cr(F.pathname,v);F.origin===M.origin&&q!=null?c=q+F.search+F.hash:x=!0}catch{Yn(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let k=xz(c,{relative:s}),[A,S,O]=uj(n,m),P=yj(c,{replace:o,state:a,target:l,preventScrollReset:h,relative:s,viewTransition:f});function N(M){t&&t(M),M.defaultPrevented||P(M)}let L=R.createElement("a",{...m,...O,href:E||k,onClick:x||r?t:N,ref:mj(p,S),target:l,"data-discover":!_&&e==="render"?"true":void 0});return A&&!_?R.createElement(R.Fragment,null,L,R.createElement(dj,{page:k})):L});SO.displayName="Link";var Cn=R.forwardRef(function({"aria-current":t="page",caseSensitive:e=!1,className:n="",end:s=!1,style:r,to:o,viewTransition:a,children:l,...c},h){let f=Af(o,{relative:c.relative}),m=qa(),p=R.useContext(kf),{navigator:v,basename:_}=R.useContext(uo),E=p!=null&&Tj(f)&&a===!0,x=v.encodeLocation?v.encodeLocation(f).pathname:f.pathname,k=m.pathname,A=p&&p.navigation&&p.navigation.location?p.navigation.location.pathname:null;e||(k=k.toLowerCase(),A=A?A.toLowerCase():null,x=x.toLowerCase()),A&&_&&(A=Cr(A,_)||A);const S=x!=="/"&&x.endsWith("/")?x.length-1:x.length;let O=k===x||!s&&k.startsWith(x)&&k.charAt(S)==="/",P=A!=null&&(A===x||!s&&A.startsWith(x)&&A.charAt(x.length)==="/"),N={isActive:O,isPending:P,isTransitioning:E},L=O?t:void 0,M;typeof n=="function"?M=n(N):M=[n,O?"active":null,P?"pending":null,E?"transitioning":null].filter(Boolean).join(" ");let F=typeof r=="function"?r(N):r;return R.createElement(SO,{...c,"aria-current":L,className:M,ref:h,style:F,to:o,viewTransition:a},typeof l=="function"?l(N):l)});Cn.displayName="NavLink";var wj=R.forwardRef(({discover:i="render",fetcherKey:t,navigate:e,reloadDocument:n,replace:s,state:r,method:o=Wg,action:a,onSubmit:l,relative:c,preventScrollReset:h,viewTransition:f,...m},p)=>{let v=Cj(),_=xj(a,{relative:c}),E=o.toLowerCase()==="get"?"get":"post",x=typeof a=="string"&&kO.test(a),k=A=>{if(l&&l(A),A.defaultPrevented)return;A.preventDefault();let S=A.nativeEvent.submitter,O=(S==null?void 0:S.getAttribute("formmethod"))||o;v(S||A.currentTarget,{fetcherKey:t,method:O,navigate:e,replace:s,state:r,relative:c,preventScrollReset:h,viewTransition:f})};return R.createElement("form",{ref:p,method:E,action:_,onSubmit:n?l:k,...m,"data-discover":!x&&i==="render"?"true":void 0})});wj.displayName="Form";function vj(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function AO(i){let t=R.useContext(Ql);return kt(t,vj(i)),t}function yj(i,{target:t,replace:e,state:n,preventScrollReset:s,relative:r,viewTransition:o}={}){let a=ec(),l=qa(),c=Af(i,{relative:r});return R.useCallback(h=>{if(Zz(h,t)){h.preventDefault();let f=e!==void 0?e:Fa(l)===Fa(c);a(i,{replace:f,state:n,preventScrollReset:s,relative:r,viewTransition:o})}},[l,a,c,e,n,t,i,s,r,o])}var _j=0,Ej=()=>`__${String(++_j)}__`;function Cj(){let{router:i}=AO("useSubmit"),{basename:t}=R.useContext(uo),e=Dz();return R.useCallback(async(n,s={})=>{let{action:r,method:o,encType:a,formData:l,body:c}=Qz(n,t);if(s.navigate===!1){let h=s.fetcherKey||Ej();await i.fetch(h,e,s.action||r,{preventScrollReset:s.preventScrollReset,formData:l,body:c,formMethod:s.method||o,formEncType:s.encType||a,flushSync:s.flushSync})}else await i.navigate(s.action||r,{preventScrollReset:s.preventScrollReset,formData:l,body:c,formMethod:s.method||o,formEncType:s.encType||a,replace:s.replace,state:s.state,fromRouteId:e,flushSync:s.flushSync,viewTransition:s.viewTransition})},[i,t,e])}function xj(i,{relative:t}={}){let{basename:e}=R.useContext(uo),n=R.useContext(Ar);kt(n,"useFormAction must be used inside a RouteContext");let[s]=n.matches.slice(-1),r={...Af(i||".",{relative:t})},o=qa();if(i==null){r.search=o.search;let a=new URLSearchParams(r.search),l=a.getAll("index");if(l.some(h=>h==="")){a.delete("index"),l.filter(f=>f).forEach(f=>a.append("index",f));let h=a.toString();r.search=h?`?${h}`:""}}return(!i||i===".")&&s.route.index&&(r.search=r.search?r.search.replace(/^\?/,"?index&"):"?index"),e!=="/"&&(r.pathname=r.pathname==="/"?e:so([e,r.pathname])),Fa(r)}function Tj(i,t={}){let e=R.useContext(oE);kt(e!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=AO("useViewTransitionState"),s=Af(i,{relative:t.relative});if(!e.isTransitioning)return!1;let r=Cr(e.currentLocation.pathname,n)||e.currentLocation.pathname,o=Cr(e.nextLocation.pathname,n)||e.nextLocation.pathname;return wp(s.pathname,o)!=null||wp(s.pathname,r)!=null}new TextEncoder;function ni(i){return`Minified Redux error #${i}; visit https://redux.js.org/Errors?code=${i} for the full message or use the non-minified dev environment for full errors. `}var kj=typeof Symbol=="function"&&Symbol.observable||"@@observable",yS=kj,A0=()=>Math.random().toString(36).substring(7).split("").join("."),Sj={INIT:`@@redux/INIT${A0()}`,REPLACE:`@@redux/REPLACE${A0()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${A0()}`},yp=Sj;function fE(i){if(typeof i!="object"||i===null)return!1;let t=i;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(i)===t||Object.getPrototypeOf(i)===null}function PO(i,t,e){if(typeof i!="function")throw new Error(ni(2));if(typeof t=="function"&&typeof e=="function"||typeof e=="function"&&typeof arguments[3]=="function")throw new Error(ni(0));if(typeof t=="function"&&typeof e>"u"&&(e=t,t=void 0),typeof e<"u"){if(typeof e!="function")throw new Error(ni(1));return e(PO)(i,t)}let n=i,s=t,r=new Map,o=r,a=0,l=!1;function c(){o===r&&(o=new Map,r.forEach((E,x)=>{o.set(x,E)}))}function h(){if(l)throw new Error(ni(3));return s}function f(E){if(typeof E!="function")throw new Error(ni(4));if(l)throw new Error(ni(5));let x=!0;c();const k=a++;return o.set(k,E),function(){if(x){if(l)throw new Error(ni(6));x=!1,c(),o.delete(k),r=null}}}function m(E){if(!fE(E))throw new Error(ni(7));if(typeof E.type>"u")throw new Error(ni(8));if(typeof E.type!="string")throw new Error(ni(17));if(l)throw new Error(ni(9));try{l=!0,s=n(s,E)}finally{l=!1}return(r=o).forEach(k=>{k()}),E}function p(E){if(typeof E!="function")throw new Error(ni(10));n=E,m({type:yp.REPLACE})}function v(){const E=f;return{subscribe(x){if(typeof x!="object"||x===null)throw new Error(ni(11));function k(){const S=x;S.next&&S.next(h())}return k(),{unsubscribe:E(k)}},[yS](){return this}}}return m({type:yp.INIT}),{dispatch:m,subscribe:f,getState:h,replaceReducer:p,[yS]:v}}function Aj(i){Object.keys(i).forEach(t=>{const e=i[t];if(typeof e(void 0,{type:yp.INIT})>"u")throw new Error(ni(12));if(typeof e(void 0,{type:yp.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(ni(13))})}function Pj(i){const t=Object.keys(i),e={};for(let r=0;r<t.length;r++){const o=t[r];typeof i[o]=="function"&&(e[o]=i[o])}const n=Object.keys(e);let s;try{Aj(e)}catch(r){s=r}return function(o={},a){if(s)throw s;let l=!1;const c={};for(let h=0;h<n.length;h++){const f=n[h],m=e[f],p=o[f],v=m(p,a);if(typeof v>"u")throw a&&a.type,new Error(ni(14));c[f]=v,l=l||v!==p}return l=l||n.length!==Object.keys(o).length,l?c:o}}function _p(...i){return i.length===0?t=>t:i.length===1?i[0]:i.reduce((t,e)=>(...n)=>t(e(...n)))}function Ij(...i){return t=>(e,n)=>{const s=t(e,n);let r=()=>{throw new Error(ni(15))};const o={getState:s.getState,dispatch:(l,...c)=>r(l,...c)},a=i.map(l=>l(o));return r=_p(...a)(s.dispatch),{...s,dispatch:r}}}function Rj(i){return fE(i)&&"type"in i&&typeof i.type=="string"}var IO=Symbol.for("immer-nothing"),_S=Symbol.for("immer-draftable"),ys=Symbol.for("immer-state");function fr(i,...t){throw new Error(`[Immer] minified error nr: ${i}. Full error at: https://bit.ly/3cXEKWf`)}var Ou=Object.getPrototypeOf;function jl(i){return!!i&&!!i[ys]}function jo(i){var t;return i?RO(i)||Array.isArray(i)||!!i[_S]||!!((t=i.constructor)!=null&&t[_S])||Tb(i)||kb(i):!1}var Oj=Object.prototype.constructor.toString();function RO(i){if(!i||typeof i!="object")return!1;const t=Ou(i);if(t===null)return!0;const e=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return e===Object?!0:typeof e=="function"&&Function.toString.call(e)===Oj}function Ep(i,t){xb(i)===0?Reflect.ownKeys(i).forEach(e=>{t(e,i[e],i)}):i.forEach((e,n)=>t(n,e,i))}function xb(i){const t=i[ys];return t?t.type_:Array.isArray(i)?1:Tb(i)?2:kb(i)?3:0}function ly(i,t){return xb(i)===2?i.has(t):Object.prototype.hasOwnProperty.call(i,t)}function OO(i,t,e){const n=xb(i);n===2?i.set(t,e):n===3?i.add(e):i[t]=e}function Nj(i,t){return i===t?i!==0||1/i===1/t:i!==i&&t!==t}function Tb(i){return i instanceof Map}function kb(i){return i instanceof Set}function El(i){return i.copy_||i.base_}function cy(i,t){if(Tb(i))return new Map(i);if(kb(i))return new Set(i);if(Array.isArray(i))return Array.prototype.slice.call(i);const e=RO(i);if(t===!0||t==="class_only"&&!e){const n=Object.getOwnPropertyDescriptors(i);delete n[ys];let s=Reflect.ownKeys(n);for(let r=0;r<s.length;r++){const o=s[r],a=n[o];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(n[o]={configurable:!0,writable:!0,enumerable:a.enumerable,value:i[o]})}return Object.create(Ou(i),n)}else{const n=Ou(i);if(n!==null&&e)return{...i};const s=Object.create(n);return Object.assign(s,i)}}function mE(i,t=!1){return Sb(i)||jl(i)||!jo(i)||(xb(i)>1&&(i.set=i.add=i.clear=i.delete=Mj),Object.freeze(i),t&&Object.entries(i).forEach(([e,n])=>mE(n,!0))),i}function Mj(){fr(2)}function Sb(i){return Object.isFrozen(i)}var Lj={};function Hl(i){const t=Lj[i];return t||fr(0,i),t}var Gh;function NO(){return Gh}function Vj(i,t){return{drafts_:[],parent_:i,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function ES(i,t){t&&(Hl("Patches"),i.patches_=[],i.inversePatches_=[],i.patchListener_=t)}function uy(i){dy(i),i.drafts_.forEach(Dj),i.drafts_=null}function dy(i){i===Gh&&(Gh=i.parent_)}function CS(i){return Gh=Vj(Gh,i)}function Dj(i){const t=i[ys];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function xS(i,t){t.unfinalizedDrafts_=t.drafts_.length;const e=t.drafts_[0];return i!==void 0&&i!==e?(e[ys].modified_&&(uy(t),fr(4)),jo(i)&&(i=Cp(t,i),t.parent_||xp(t,i)),t.patches_&&Hl("Patches").generateReplacementPatches_(e[ys].base_,i,t.patches_,t.inversePatches_)):i=Cp(t,e,[]),uy(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),i!==IO?i:void 0}function Cp(i,t,e){if(Sb(t))return t;const n=t[ys];if(!n)return Ep(t,(s,r)=>TS(i,n,t,s,r,e)),t;if(n.scope_!==i)return t;if(!n.modified_)return xp(i,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const s=n.copy_;let r=s,o=!1;n.type_===3&&(r=new Set(s),s.clear(),o=!0),Ep(r,(a,l)=>TS(i,n,s,a,l,e,o)),xp(i,s,!1),e&&i.patches_&&Hl("Patches").generatePatches_(n,e,i.patches_,i.inversePatches_)}return n.copy_}function TS(i,t,e,n,s,r,o){if(jl(s)){const a=r&&t&&t.type_!==3&&!ly(t.assigned_,n)?r.concat(n):void 0,l=Cp(i,s,a);if(OO(e,n,l),jl(l))i.canAutoFreeze_=!1;else return}else o&&e.add(s);if(jo(s)&&!Sb(s)){if(!i.immer_.autoFreeze_&&i.unfinalizedDrafts_<1)return;Cp(i,s),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&Object.prototype.propertyIsEnumerable.call(e,n)&&xp(i,s)}}function xp(i,t,e=!1){!i.parent_&&i.immer_.autoFreeze_&&i.canAutoFreeze_&&mE(t,e)}function Bj(i,t){const e=Array.isArray(i),n={type_:e?1:0,scope_:t?t.scope_:NO(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:i,draft_:null,copy_:null,revoke_:null,isManual_:!1};let s=n,r=gE;e&&(s=[n],r=Kh);const{revoke:o,proxy:a}=Proxy.revocable(s,r);return n.draft_=a,n.revoke_=o,a}var gE={get(i,t){if(t===ys)return i;const e=El(i);if(!ly(e,t))return Fj(i,e,t);const n=e[t];return i.finalized_||!jo(n)?n:n===P0(i.base_,t)?(I0(i),i.copy_[t]=fy(n,i)):n},has(i,t){return t in El(i)},ownKeys(i){return Reflect.ownKeys(El(i))},set(i,t,e){const n=MO(El(i),t);if(n!=null&&n.set)return n.set.call(i.draft_,e),!0;if(!i.modified_){const s=P0(El(i),t),r=s==null?void 0:s[ys];if(r&&r.base_===e)return i.copy_[t]=e,i.assigned_[t]=!1,!0;if(Nj(e,s)&&(e!==void 0||ly(i.base_,t)))return!0;I0(i),hy(i)}return i.copy_[t]===e&&(e!==void 0||t in i.copy_)||Number.isNaN(e)&&Number.isNaN(i.copy_[t])||(i.copy_[t]=e,i.assigned_[t]=!0),!0},deleteProperty(i,t){return P0(i.base_,t)!==void 0||t in i.base_?(i.assigned_[t]=!1,I0(i),hy(i)):delete i.assigned_[t],i.copy_&&delete i.copy_[t],!0},getOwnPropertyDescriptor(i,t){const e=El(i),n=Reflect.getOwnPropertyDescriptor(e,t);return n&&{writable:!0,configurable:i.type_!==1||t!=="length",enumerable:n.enumerable,value:e[t]}},defineProperty(){fr(11)},getPrototypeOf(i){return Ou(i.base_)},setPrototypeOf(){fr(12)}},Kh={};Ep(gE,(i,t)=>{Kh[i]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Kh.deleteProperty=function(i,t){return Kh.set.call(this,i,t,void 0)};Kh.set=function(i,t,e){return gE.set.call(this,i[0],t,e,i[0])};function P0(i,t){const e=i[ys];return(e?El(e):i)[t]}function Fj(i,t,e){var s;const n=MO(t,e);return n?"value"in n?n.value:(s=n.get)==null?void 0:s.call(i.draft_):void 0}function MO(i,t){if(!(t in i))return;let e=Ou(i);for(;e;){const n=Object.getOwnPropertyDescriptor(e,t);if(n)return n;e=Ou(e)}}function hy(i){i.modified_||(i.modified_=!0,i.parent_&&hy(i.parent_))}function I0(i){i.copy_||(i.copy_=cy(i.base_,i.scope_.immer_.useStrictShallowCopy_))}var $j=class{constructor(i){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,e,n)=>{if(typeof t=="function"&&typeof e!="function"){const r=e;e=t;const o=this;return function(l=r,...c){return o.produce(l,h=>e.call(this,h,...c))}}typeof e!="function"&&fr(6),n!==void 0&&typeof n!="function"&&fr(7);let s;if(jo(t)){const r=CS(this),o=fy(t,void 0);let a=!0;try{s=e(o),a=!1}finally{a?uy(r):dy(r)}return ES(r,n),xS(s,r)}else if(!t||typeof t!="object"){if(s=e(t),s===void 0&&(s=t),s===IO&&(s=void 0),this.autoFreeze_&&mE(s,!0),n){const r=[],o=[];Hl("Patches").generateReplacementPatches_(t,s,r,o),n(r,o)}return s}else fr(1,t)},this.produceWithPatches=(t,e)=>{if(typeof t=="function")return(o,...a)=>this.produceWithPatches(o,l=>t(l,...a));let n,s;return[this.produce(t,e,(o,a)=>{n=o,s=a}),n,s]},typeof(i==null?void 0:i.autoFreeze)=="boolean"&&this.setAutoFreeze(i.autoFreeze),typeof(i==null?void 0:i.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(i.useStrictShallowCopy)}createDraft(i){jo(i)||fr(8),jl(i)&&(i=zj(i));const t=CS(this),e=fy(i,void 0);return e[ys].isManual_=!0,dy(t),e}finishDraft(i,t){const e=i&&i[ys];(!e||!e.isManual_)&&fr(9);const{scope_:n}=e;return ES(n,t),xS(void 0,n)}setAutoFreeze(i){this.autoFreeze_=i}setUseStrictShallowCopy(i){this.useStrictShallowCopy_=i}applyPatches(i,t){let e;for(e=t.length-1;e>=0;e--){const s=t[e];if(s.path.length===0&&s.op==="replace"){i=s.value;break}}e>-1&&(t=t.slice(e+1));const n=Hl("Patches").applyPatches_;return jl(i)?n(i,t):this.produce(i,s=>n(s,t))}};function fy(i,t){const e=Tb(i)?Hl("MapSet").proxyMap_(i,t):kb(i)?Hl("MapSet").proxySet_(i,t):Bj(i,t);return(t?t.scope_:NO()).drafts_.push(e),e}function zj(i){return jl(i)||fr(10,i),LO(i)}function LO(i){if(!jo(i)||Sb(i))return i;const t=i[ys];let e;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,e=cy(i,t.scope_.immer_.useStrictShallowCopy_)}else e=cy(i,!0);return Ep(e,(n,s)=>{OO(e,n,LO(s))}),t&&(t.finalized_=!1),e}var _s=new $j,VO=_s.produce;_s.produceWithPatches.bind(_s);_s.setAutoFreeze.bind(_s);_s.setUseStrictShallowCopy.bind(_s);_s.applyPatches.bind(_s);_s.createDraft.bind(_s);_s.finishDraft.bind(_s);function DO(i){return({dispatch:e,getState:n})=>s=>r=>typeof r=="function"?r(e,n,i):s(r)}var jj=DO(),Hj=DO,Uj=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?_p:_p.apply(null,arguments)},Wj=i=>i&&typeof i.match=="function";function xh(i,t){function e(...n){if(t){let s=t(...n);if(!s)throw new Error(Do(0));return{type:i,payload:s.payload,..."meta"in s&&{meta:s.meta},..."error"in s&&{error:s.error}}}return{type:i,payload:n[0]}}return e.toString=()=>`${i}`,e.type=i,e.match=n=>Rj(n)&&n.type===i,e}var BO=class dh extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,dh.prototype)}static get[Symbol.species](){return dh}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new dh(...t[0].concat(this)):new dh(...t.concat(this))}};function kS(i){return jo(i)?VO(i,()=>{}):i}function SS(i,t,e){return i.has(t)?i.get(t):i.set(t,e(t)).get(t)}function qj(i){return typeof i=="boolean"}var Gj=()=>function(t){const{thunk:e=!0,immutableCheck:n=!0,serializableCheck:s=!0,actionCreatorCheck:r=!0}=t??{};let o=new BO;return e&&(qj(e)?o.push(jj):o.push(Hj(e.extraArgument))),o},Kj="RTK_autoBatch",AS=i=>t=>{setTimeout(t,i)},Yj=(i={type:"raf"})=>t=>(...e)=>{const n=t(...e);let s=!0,r=!1,o=!1;const a=new Set,l=i.type==="tick"?queueMicrotask:i.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:AS(10):i.type==="callback"?i.queueNotification:AS(i.timeout),c=()=>{o=!1,r&&(r=!1,a.forEach(h=>h()))};return Object.assign({},n,{subscribe(h){const f=()=>s&&h(),m=n.subscribe(f);return a.add(h),()=>{m(),a.delete(h)}},dispatch(h){var f;try{return s=!((f=h==null?void 0:h.meta)!=null&&f[Kj]),r=!s,r&&(o||(o=!0,l(c))),n.dispatch(h)}finally{s=!0}}})},Zj=i=>function(e){const{autoBatch:n=!0}=e??{};let s=new BO(i);return n&&s.push(Yj(typeof n=="object"?n:void 0)),s};function Xj(i){const t=Gj(),{reducer:e=void 0,middleware:n,devTools:s=!0,preloadedState:r=void 0,enhancers:o=void 0}=i;let a;if(typeof e=="function")a=e;else if(fE(e))a=Pj(e);else throw new Error(Do(1));let l;typeof n=="function"?l=n(t):l=t();let c=_p;s&&(c=Uj({trace:!1,...typeof s=="object"&&s}));const h=Ij(...l),f=Zj(h);let m=typeof o=="function"?o(f):f();const p=c(...m);return PO(a,r,p)}function FO(i){const t={},e=[];let n;const s={addCase(r,o){const a=typeof r=="string"?r:r.type;if(!a)throw new Error(Do(28));if(a in t)throw new Error(Do(29));return t[a]=o,s},addMatcher(r,o){return e.push({matcher:r,reducer:o}),s},addDefaultCase(r){return n=r,s}};return i(s),[t,e,n]}function Jj(i){return typeof i=="function"}function Qj(i,t){let[e,n,s]=FO(t),r;if(Jj(i))r=()=>kS(i());else{const a=kS(i);r=()=>a}function o(a=r(),l){let c=[e[l.type],...n.filter(({matcher:h})=>h(l)).map(({reducer:h})=>h)];return c.filter(h=>!!h).length===0&&(c=[s]),c.reduce((h,f)=>{if(f)if(jl(h)){const p=f(h,l);return p===void 0?h:p}else{if(jo(h))return VO(h,m=>f(m,l));{const m=f(h,l);if(m===void 0){if(h===null)return h;throw Error("A case reducer on a non-draftable value must not return undefined")}return m}}return h},a)}return o.getInitialState=r,o}var eH=(i,t)=>Wj(i)?i.match(t):i(t);function tH(...i){return t=>i.some(e=>eH(e,t))}var nH="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",iH=(i=21)=>{let t="",e=i;for(;e--;)t+=nH[Math.random()*64|0];return t},sH=["name","message","stack","code"],R0=class{constructor(i,t){b(this,"_type");this.payload=i,this.meta=t}},PS=class{constructor(i,t){b(this,"_type");this.payload=i,this.meta=t}},rH=i=>{if(typeof i=="object"&&i!==null){const t={};for(const e of sH)typeof i[e]=="string"&&(t[e]=i[e]);return t}return{message:String(i)}},pE=(()=>{function i(t,e,n){const s=xh(t+"/fulfilled",(l,c,h,f)=>({payload:l,meta:{...f||{},arg:h,requestId:c,requestStatus:"fulfilled"}})),r=xh(t+"/pending",(l,c,h)=>({payload:void 0,meta:{...h||{},arg:c,requestId:l,requestStatus:"pending"}})),o=xh(t+"/rejected",(l,c,h,f,m)=>({payload:f,error:(n&&n.serializeError||rH)(l||"Rejected"),meta:{...m||{},arg:h,requestId:c,rejectedWithValue:!!f,requestStatus:"rejected",aborted:(l==null?void 0:l.name)==="AbortError",condition:(l==null?void 0:l.name)==="ConditionError"}}));function a(l){return(c,h,f)=>{const m=n!=null&&n.idGenerator?n.idGenerator(l):iH(),p=new AbortController;let v,_;function E(k){_=k,p.abort()}const x=async function(){var S,O;let k;try{let P=(S=n==null?void 0:n.condition)==null?void 0:S.call(n,l,{getState:h,extra:f});if(aH(P)&&(P=await P),P===!1||p.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};const N=new Promise((L,M)=>{v=()=>{M({name:"AbortError",message:_||"Aborted"})},p.signal.addEventListener("abort",v)});c(r(m,l,(O=n==null?void 0:n.getPendingMeta)==null?void 0:O.call(n,{requestId:m,arg:l},{getState:h,extra:f}))),k=await Promise.race([N,Promise.resolve(e(l,{dispatch:c,getState:h,extra:f,requestId:m,signal:p.signal,abort:E,rejectWithValue:(L,M)=>new R0(L,M),fulfillWithValue:(L,M)=>new PS(L,M)})).then(L=>{if(L instanceof R0)throw L;return L instanceof PS?s(L.payload,m,l,L.meta):s(L,m,l)})])}catch(P){k=P instanceof R0?o(null,m,l,P.payload,P.meta):o(P,m,l)}finally{v&&p.signal.removeEventListener("abort",v)}return n&&!n.dispatchConditionRejection&&o.match(k)&&k.meta.condition||c(k),k}();return Object.assign(x,{abort:E,requestId:m,arg:l,unwrap(){return x.then(oH)}})}}return Object.assign(a,{pending:r,rejected:o,fulfilled:s,settled:tH(o,s),typePrefix:t})}return i.withTypes=()=>i,i})();function oH(i){if(i.meta&&i.meta.rejectedWithValue)throw i.payload;if(i.error)throw i.error;return i.payload}function aH(i){return i!==null&&typeof i=="object"&&typeof i.then=="function"}var lH=Symbol.for("rtk-slice-createasyncthunk");function cH(i,t){return`${i}/${t}`}function uH({creators:i}={}){var e;const t=(e=i==null?void 0:i.asyncThunk)==null?void 0:e[lH];return function(s){const{name:r,reducerPath:o=r}=s;if(!r)throw new Error(Do(11));const a=(typeof s.reducers=="function"?s.reducers(hH()):s.reducers)||{},l=Object.keys(a),c={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},h={addCase(A,S){const O=typeof A=="string"?A:A.type;if(!O)throw new Error(Do(12));if(O in c.sliceCaseReducersByType)throw new Error(Do(13));return c.sliceCaseReducersByType[O]=S,h},addMatcher(A,S){return c.sliceMatchers.push({matcher:A,reducer:S}),h},exposeAction(A,S){return c.actionCreators[A]=S,h},exposeCaseReducer(A,S){return c.sliceCaseReducersByName[A]=S,h}};l.forEach(A=>{const S=a[A],O={reducerName:A,type:cH(r,A),createNotation:typeof s.reducers=="function"};mH(S)?pH(O,S,h,t):fH(O,S,h)});function f(){const[A={},S=[],O=void 0]=typeof s.extraReducers=="function"?FO(s.extraReducers):[s.extraReducers],P={...A,...c.sliceCaseReducersByType};return Qj(s.initialState,N=>{for(let L in P)N.addCase(L,P[L]);for(let L of c.sliceMatchers)N.addMatcher(L.matcher,L.reducer);for(let L of S)N.addMatcher(L.matcher,L.reducer);O&&N.addDefaultCase(O)})}const m=A=>A,p=new Map;let v;function _(A,S){return v||(v=f()),v(A,S)}function E(){return v||(v=f()),v.getInitialState()}function x(A,S=!1){function O(N){let L=N[A];return typeof L>"u"&&S&&(L=E()),L}function P(N=m){const L=SS(p,S,()=>new WeakMap);return SS(L,N,()=>{const M={};for(const[F,q]of Object.entries(s.selectors??{}))M[F]=dH(q,N,E,S);return M})}return{reducerPath:A,getSelectors:P,get selectors(){return P(O)},selectSlice:O}}const k={name:r,reducer:_,actions:c.actionCreators,caseReducers:c.sliceCaseReducersByName,getInitialState:E,...x(o),injectInto(A,{reducerPath:S,...O}={}){const P=S??o;return A.inject({reducerPath:P,reducer:_},O),{...k,...x(P,!0)}}};return k}}function dH(i,t,e,n){function s(r,...o){let a=t(r);return typeof a>"u"&&n&&(a=e()),i(a,...o)}return s.unwrapped=i,s}var bE=uH();function hH(){function i(t,e){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...e}}return i.withTypes=()=>i,{reducer(t){return Object.assign({[t.name](...e){return t(...e)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,e){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:e}},asyncThunk:i}}function fH({type:i,reducerName:t,createNotation:e},n,s){let r,o;if("reducer"in n){if(e&&!gH(n))throw new Error(Do(17));r=n.reducer,o=n.prepare}else r=n;s.addCase(i,r).exposeCaseReducer(t,r).exposeAction(t,o?xh(i,o):xh(i))}function mH(i){return i._reducerDefinitionType==="asyncThunk"}function gH(i){return i._reducerDefinitionType==="reducerWithPrepare"}function pH({type:i,reducerName:t},e,n,s){if(!s)throw new Error(Do(18));const{payloadCreator:r,fulfilled:o,pending:a,rejected:l,settled:c,options:h}=e,f=s(i,r,h);n.exposeAction(t,f),o&&n.addCase(f.fulfilled,o),a&&n.addCase(f.pending,a),l&&n.addCase(f.rejected,l),c&&n.addMatcher(f.settled,c),n.exposeCaseReducer(t,{fulfilled:o||dg,pending:a||dg,rejected:l||dg,settled:c||dg})}function dg(){}function Do(i){return`Minified Redux Toolkit error #${i}; visit https://redux-toolkit.js.org/Errors?code=${i} for the full message or use the non-minified dev environment for full errors. `}const $O=bE({name:"loading",initialState:{isFullPageLoading:!1},reducers:{setIsFullPageLoading(i,t){i.isFullPageLoading=t.payload}}}),{setIsFullPageLoading:ct}=$O.actions,bH=i=>i.loading,wH=$O.reducer,vH=()=>{const{isFullPageLoading:i}=_b(bH);return y.jsx(y.Fragment,{children:i&&y.jsx("div",{className:"fixed-top w-100 h-100 bg-white bg-opacity-75 d-flex justify-content-center align-items-center",style:{zIndex:"2000"},children:y.jsx("div",{className:"spinner-border text-primary",children:y.jsx("span",{className:"visually-hidden",children:"Loading..."})})})})},zO=bE({name:"toast",initialState:{text:"",type:"",id:""},reducers:{setMessage(i,t){return t.payload}}}),bn=pE("toast/asyncSetMessage",(i,{dispatch:t,requestId:e})=>{t(zO.actions.setMessage({...i,id:e}))}),yH=i=>i.toast,_H=zO.reducer,EH=R.memo(()=>{const i=R.useRef(null),t=R.useRef(null),{text:e,type:n,id:s}=_b(yH);R.useEffect(()=>{i.current&&(t.current=new eE(i.current))},[]);const r=R.useCallback(()=>{var o;(o=t.current)==null||o.show()},[]);return R.useEffect(()=>{s&&r()},[r,s]),y.jsx("div",{className:"toast-container position-fixed bottom-0 end-0 p-3",children:y.jsx("div",{id:"toast",className:`toast text-bg-${n}`,role:"alert","aria-live":"assertive","aria-atomic":"true",ref:i,children:y.jsxs("div",{className:"toast-body d-flex",children:[e,y.jsx("button",{type:"button",className:"btn-close ms-auto flex-shrink-0","data-bs-dismiss":"toast","aria-label":"Close"})]})})})});function jO(i,t){return function(){return i.apply(t,arguments)}}const{toString:CH}=Object.prototype,{getPrototypeOf:wE}=Object,Ab=(i=>t=>{const e=CH.call(t);return i[e]||(i[e]=e.slice(8,-1).toLowerCase())})(Object.create(null)),Pr=i=>(i=i.toLowerCase(),t=>Ab(t)===i),Pb=i=>t=>typeof t===i,{isArray:Xu}=Array,Yh=Pb("undefined");function xH(i){return i!==null&&!Yh(i)&&i.constructor!==null&&!Yh(i.constructor)&&gs(i.constructor.isBuffer)&&i.constructor.isBuffer(i)}const HO=Pr("ArrayBuffer");function TH(i){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(i):t=i&&i.buffer&&HO(i.buffer),t}const kH=Pb("string"),gs=Pb("function"),UO=Pb("number"),Ib=i=>i!==null&&typeof i=="object",SH=i=>i===!0||i===!1,Gg=i=>{if(Ab(i)!=="object")return!1;const t=wE(i);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in i)&&!(Symbol.iterator in i)},AH=Pr("Date"),PH=Pr("File"),IH=Pr("Blob"),RH=Pr("FileList"),OH=i=>Ib(i)&&gs(i.pipe),NH=i=>{let t;return i&&(typeof FormData=="function"&&i instanceof FormData||gs(i.append)&&((t=Ab(i))==="formdata"||t==="object"&&gs(i.toString)&&i.toString()==="[object FormData]"))},MH=Pr("URLSearchParams"),[LH,VH,DH,BH]=["ReadableStream","Request","Response","Headers"].map(Pr),FH=i=>i.trim?i.trim():i.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Pf(i,t,{allOwnKeys:e=!1}={}){if(i===null||typeof i>"u")return;let n,s;if(typeof i!="object"&&(i=[i]),Xu(i))for(n=0,s=i.length;n<s;n++)t.call(null,i[n],n,i);else{const r=e?Object.getOwnPropertyNames(i):Object.keys(i),o=r.length;let a;for(n=0;n<o;n++)a=r[n],t.call(null,i[a],a,i)}}function WO(i,t){t=t.toLowerCase();const e=Object.keys(i);let n=e.length,s;for(;n-- >0;)if(s=e[n],t===s.toLowerCase())return s;return null}const Sl=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,qO=i=>!Yh(i)&&i!==Sl;function my(){const{caseless:i}=qO(this)&&this||{},t={},e=(n,s)=>{const r=i&&WO(t,s)||s;Gg(t[r])&&Gg(n)?t[r]=my(t[r],n):Gg(n)?t[r]=my({},n):Xu(n)?t[r]=n.slice():t[r]=n};for(let n=0,s=arguments.length;n<s;n++)arguments[n]&&Pf(arguments[n],e);return t}const $H=(i,t,e,{allOwnKeys:n}={})=>(Pf(t,(s,r)=>{e&&gs(s)?i[r]=jO(s,e):i[r]=s},{allOwnKeys:n}),i),zH=i=>(i.charCodeAt(0)===65279&&(i=i.slice(1)),i),jH=(i,t,e,n)=>{i.prototype=Object.create(t.prototype,n),i.prototype.constructor=i,Object.defineProperty(i,"super",{value:t.prototype}),e&&Object.assign(i.prototype,e)},HH=(i,t,e,n)=>{let s,r,o;const a={};if(t=t||{},i==null)return t;do{for(s=Object.getOwnPropertyNames(i),r=s.length;r-- >0;)o=s[r],(!n||n(o,i,t))&&!a[o]&&(t[o]=i[o],a[o]=!0);i=e!==!1&&wE(i)}while(i&&(!e||e(i,t))&&i!==Object.prototype);return t},UH=(i,t,e)=>{i=String(i),(e===void 0||e>i.length)&&(e=i.length),e-=t.length;const n=i.indexOf(t,e);return n!==-1&&n===e},WH=i=>{if(!i)return null;if(Xu(i))return i;let t=i.length;if(!UO(t))return null;const e=new Array(t);for(;t-- >0;)e[t]=i[t];return e},qH=(i=>t=>i&&t instanceof i)(typeof Uint8Array<"u"&&wE(Uint8Array)),GH=(i,t)=>{const n=(i&&i[Symbol.iterator]).call(i);let s;for(;(s=n.next())&&!s.done;){const r=s.value;t.call(i,r[0],r[1])}},KH=(i,t)=>{let e;const n=[];for(;(e=i.exec(t))!==null;)n.push(e);return n},YH=Pr("HTMLFormElement"),ZH=i=>i.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,n,s){return n.toUpperCase()+s}),IS=(({hasOwnProperty:i})=>(t,e)=>i.call(t,e))(Object.prototype),XH=Pr("RegExp"),GO=(i,t)=>{const e=Object.getOwnPropertyDescriptors(i),n={};Pf(e,(s,r)=>{let o;(o=t(s,r,i))!==!1&&(n[r]=o||s)}),Object.defineProperties(i,n)},JH=i=>{GO(i,(t,e)=>{if(gs(i)&&["arguments","caller","callee"].indexOf(e)!==-1)return!1;const n=i[e];if(gs(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+e+"'")})}})},QH=(i,t)=>{const e={},n=s=>{s.forEach(r=>{e[r]=!0})};return Xu(i)?n(i):n(String(i).split(t)),e},eU=()=>{},tU=(i,t)=>i!=null&&Number.isFinite(i=+i)?i:t,O0="abcdefghijklmnopqrstuvwxyz",RS="0123456789",KO={DIGIT:RS,ALPHA:O0,ALPHA_DIGIT:O0+O0.toUpperCase()+RS},nU=(i=16,t=KO.ALPHA_DIGIT)=>{let e="";const{length:n}=t;for(;i--;)e+=t[Math.random()*n|0];return e};function iU(i){return!!(i&&gs(i.append)&&i[Symbol.toStringTag]==="FormData"&&i[Symbol.iterator])}const sU=i=>{const t=new Array(10),e=(n,s)=>{if(Ib(n)){if(t.indexOf(n)>=0)return;if(!("toJSON"in n)){t[s]=n;const r=Xu(n)?[]:{};return Pf(n,(o,a)=>{const l=e(o,s+1);!Yh(l)&&(r[a]=l)}),t[s]=void 0,r}}return n};return e(i,0)},rU=Pr("AsyncFunction"),oU=i=>i&&(Ib(i)||gs(i))&&gs(i.then)&&gs(i.catch),YO=((i,t)=>i?setImmediate:t?((e,n)=>(Sl.addEventListener("message",({source:s,data:r})=>{s===Sl&&r===e&&n.length&&n.shift()()},!1),s=>{n.push(s),Sl.postMessage(e,"*")}))(`axios@${Math.random()}`,[]):e=>setTimeout(e))(typeof setImmediate=="function",gs(Sl.postMessage)),aU=typeof queueMicrotask<"u"?queueMicrotask.bind(Sl):typeof process<"u"&&process.nextTick||YO,ae={isArray:Xu,isArrayBuffer:HO,isBuffer:xH,isFormData:NH,isArrayBufferView:TH,isString:kH,isNumber:UO,isBoolean:SH,isObject:Ib,isPlainObject:Gg,isReadableStream:LH,isRequest:VH,isResponse:DH,isHeaders:BH,isUndefined:Yh,isDate:AH,isFile:PH,isBlob:IH,isRegExp:XH,isFunction:gs,isStream:OH,isURLSearchParams:MH,isTypedArray:qH,isFileList:RH,forEach:Pf,merge:my,extend:$H,trim:FH,stripBOM:zH,inherits:jH,toFlatObject:HH,kindOf:Ab,kindOfTest:Pr,endsWith:UH,toArray:WH,forEachEntry:GH,matchAll:KH,isHTMLForm:YH,hasOwnProperty:IS,hasOwnProp:IS,reduceDescriptors:GO,freezeMethods:JH,toObjectSet:QH,toCamelCase:ZH,noop:eU,toFiniteNumber:tU,findKey:WO,global:Sl,isContextDefined:qO,ALPHABET:KO,generateString:nU,isSpecCompliantForm:iU,toJSONObject:sU,isAsyncFn:rU,isThenable:oU,setImmediate:YO,asap:aU};function wt(i,t,e,n,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=i,this.name="AxiosError",t&&(this.code=t),e&&(this.config=e),n&&(this.request=n),s&&(this.response=s,this.status=s.status?s.status:null)}ae.inherits(wt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ae.toJSONObject(this.config),code:this.code,status:this.status}}});const ZO=wt.prototype,XO={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(i=>{XO[i]={value:i}});Object.defineProperties(wt,XO);Object.defineProperty(ZO,"isAxiosError",{value:!0});wt.from=(i,t,e,n,s,r)=>{const o=Object.create(ZO);return ae.toFlatObject(i,o,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),wt.call(o,i.message,t,e,n,s),o.cause=i,o.name=i.name,r&&Object.assign(o,r),o};const lU=null;function gy(i){return ae.isPlainObject(i)||ae.isArray(i)}function JO(i){return ae.endsWith(i,"[]")?i.slice(0,-2):i}function OS(i,t,e){return i?i.concat(t).map(function(s,r){return s=JO(s),!e&&r?"["+s+"]":s}).join(e?".":""):t}function cU(i){return ae.isArray(i)&&!i.some(gy)}const uU=ae.toFlatObject(ae,{},null,function(t){return/^is[A-Z]/.test(t)});function Rb(i,t,e){if(!ae.isObject(i))throw new TypeError("target must be an object");t=t||new FormData,e=ae.toFlatObject(e,{metaTokens:!0,dots:!1,indexes:!1},!1,function(_,E){return!ae.isUndefined(E[_])});const n=e.metaTokens,s=e.visitor||h,r=e.dots,o=e.indexes,l=(e.Blob||typeof Blob<"u"&&Blob)&&ae.isSpecCompliantForm(t);if(!ae.isFunction(s))throw new TypeError("visitor must be a function");function c(v){if(v===null)return"";if(ae.isDate(v))return v.toISOString();if(!l&&ae.isBlob(v))throw new wt("Blob is not supported. Use a Buffer instead.");return ae.isArrayBuffer(v)||ae.isTypedArray(v)?l&&typeof Blob=="function"?new Blob([v]):Buffer.from(v):v}function h(v,_,E){let x=v;if(v&&!E&&typeof v=="object"){if(ae.endsWith(_,"{}"))_=n?_:_.slice(0,-2),v=JSON.stringify(v);else if(ae.isArray(v)&&cU(v)||(ae.isFileList(v)||ae.endsWith(_,"[]"))&&(x=ae.toArray(v)))return _=JO(_),x.forEach(function(A,S){!(ae.isUndefined(A)||A===null)&&t.append(o===!0?OS([_],S,r):o===null?_:_+"[]",c(A))}),!1}return gy(v)?!0:(t.append(OS(E,_,r),c(v)),!1)}const f=[],m=Object.assign(uU,{defaultVisitor:h,convertValue:c,isVisitable:gy});function p(v,_){if(!ae.isUndefined(v)){if(f.indexOf(v)!==-1)throw Error("Circular reference detected in "+_.join("."));f.push(v),ae.forEach(v,function(x,k){(!(ae.isUndefined(x)||x===null)&&s.call(t,x,ae.isString(k)?k.trim():k,_,m))===!0&&p(x,_?_.concat(k):[k])}),f.pop()}}if(!ae.isObject(i))throw new TypeError("data must be an object");return p(i),t}function NS(i){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(i).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function vE(i,t){this._pairs=[],i&&Rb(i,this,t)}const QO=vE.prototype;QO.append=function(t,e){this._pairs.push([t,e])};QO.toString=function(t){const e=t?function(n){return t.call(this,n,NS)}:NS;return this._pairs.map(function(s){return e(s[0])+"="+e(s[1])},"").join("&")};function dU(i){return encodeURIComponent(i).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function e3(i,t,e){if(!t)return i;const n=e&&e.encode||dU;ae.isFunction(e)&&(e={serialize:e});const s=e&&e.serialize;let r;if(s?r=s(t,e):r=ae.isURLSearchParams(t)?t.toString():new vE(t,e).toString(n),r){const o=i.indexOf("#");o!==-1&&(i=i.slice(0,o)),i+=(i.indexOf("?")===-1?"?":"&")+r}return i}class MS{constructor(){this.handlers=[]}use(t,e,n){return this.handlers.push({fulfilled:t,rejected:e,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){ae.forEach(this.handlers,function(n){n!==null&&t(n)})}}const t3={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},hU=typeof URLSearchParams<"u"?URLSearchParams:vE,fU=typeof FormData<"u"?FormData:null,mU=typeof Blob<"u"?Blob:null,gU={isBrowser:!0,classes:{URLSearchParams:hU,FormData:fU,Blob:mU},protocols:["http","https","file","blob","url","data"]},yE=typeof window<"u"&&typeof document<"u",py=typeof navigator=="object"&&navigator||void 0,pU=yE&&(!py||["ReactNative","NativeScript","NS"].indexOf(py.product)<0),bU=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",wU=yE&&window.location.href||"http://localhost",vU=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:yE,hasStandardBrowserEnv:pU,hasStandardBrowserWebWorkerEnv:bU,navigator:py,origin:wU},Symbol.toStringTag,{value:"Module"})),bi={...vU,...gU};function yU(i,t){return Rb(i,new bi.classes.URLSearchParams,Object.assign({visitor:function(e,n,s,r){return bi.isNode&&ae.isBuffer(e)?(this.append(n,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}function _U(i){return ae.matchAll(/\w+|\[(\w*)]/g,i).map(t=>t[0]==="[]"?"":t[1]||t[0])}function EU(i){const t={},e=Object.keys(i);let n;const s=e.length;let r;for(n=0;n<s;n++)r=e[n],t[r]=i[r];return t}function n3(i){function t(e,n,s,r){let o=e[r++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),l=r>=e.length;return o=!o&&ae.isArray(s)?s.length:o,l?(ae.hasOwnProp(s,o)?s[o]=[s[o],n]:s[o]=n,!a):((!s[o]||!ae.isObject(s[o]))&&(s[o]=[]),t(e,n,s[o],r)&&ae.isArray(s[o])&&(s[o]=EU(s[o])),!a)}if(ae.isFormData(i)&&ae.isFunction(i.entries)){const e={};return ae.forEachEntry(i,(n,s)=>{t(_U(n),s,e,0)}),e}return null}function CU(i,t,e){if(ae.isString(i))try{return(t||JSON.parse)(i),ae.trim(i)}catch(n){if(n.name!=="SyntaxError")throw n}return(0,JSON.stringify)(i)}const If={transitional:t3,adapter:["xhr","http","fetch"],transformRequest:[function(t,e){const n=e.getContentType()||"",s=n.indexOf("application/json")>-1,r=ae.isObject(t);if(r&&ae.isHTMLForm(t)&&(t=new FormData(t)),ae.isFormData(t))return s?JSON.stringify(n3(t)):t;if(ae.isArrayBuffer(t)||ae.isBuffer(t)||ae.isStream(t)||ae.isFile(t)||ae.isBlob(t)||ae.isReadableStream(t))return t;if(ae.isArrayBufferView(t))return t.buffer;if(ae.isURLSearchParams(t))return e.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let a;if(r){if(n.indexOf("application/x-www-form-urlencoded")>-1)return yU(t,this.formSerializer).toString();if((a=ae.isFileList(t))||n.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return Rb(a?{"files[]":t}:t,l&&new l,this.formSerializer)}}return r||s?(e.setContentType("application/json",!1),CU(t)):t}],transformResponse:[function(t){const e=this.transitional||If.transitional,n=e&&e.forcedJSONParsing,s=this.responseType==="json";if(ae.isResponse(t)||ae.isReadableStream(t))return t;if(t&&ae.isString(t)&&(n&&!this.responseType||s)){const o=!(e&&e.silentJSONParsing)&&s;try{return JSON.parse(t)}catch(a){if(o)throw a.name==="SyntaxError"?wt.from(a,wt.ERR_BAD_RESPONSE,this,null,this.response):a}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:bi.classes.FormData,Blob:bi.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ae.forEach(["delete","get","head","post","put","patch"],i=>{If.headers[i]={}});const xU=ae.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),TU=i=>{const t={};let e,n,s;return i&&i.split(`
`).forEach(function(o){s=o.indexOf(":"),e=o.substring(0,s).trim().toLowerCase(),n=o.substring(s+1).trim(),!(!e||t[e]&&xU[e])&&(e==="set-cookie"?t[e]?t[e].push(n):t[e]=[n]:t[e]=t[e]?t[e]+", "+n:n)}),t},LS=Symbol("internals");function Gd(i){return i&&String(i).trim().toLowerCase()}function Kg(i){return i===!1||i==null?i:ae.isArray(i)?i.map(Kg):String(i)}function kU(i){const t=Object.create(null),e=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=e.exec(i);)t[n[1]]=n[2];return t}const SU=i=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(i.trim());function N0(i,t,e,n,s){if(ae.isFunction(n))return n.call(this,t,e);if(s&&(t=e),!!ae.isString(t)){if(ae.isString(n))return t.indexOf(n)!==-1;if(ae.isRegExp(n))return n.test(t)}}function AU(i){return i.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,e,n)=>e.toUpperCase()+n)}function PU(i,t){const e=ae.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(i,n+e,{value:function(s,r,o){return this[n].call(this,t,s,r,o)},configurable:!0})})}let Ki=class{constructor(t){t&&this.set(t)}set(t,e,n){const s=this;function r(a,l,c){const h=Gd(l);if(!h)throw new Error("header name must be a non-empty string");const f=ae.findKey(s,h);(!f||s[f]===void 0||c===!0||c===void 0&&s[f]!==!1)&&(s[f||l]=Kg(a))}const o=(a,l)=>ae.forEach(a,(c,h)=>r(c,h,l));if(ae.isPlainObject(t)||t instanceof this.constructor)o(t,e);else if(ae.isString(t)&&(t=t.trim())&&!SU(t))o(TU(t),e);else if(ae.isHeaders(t))for(const[a,l]of t.entries())r(l,a,n);else t!=null&&r(e,t,n);return this}get(t,e){if(t=Gd(t),t){const n=ae.findKey(this,t);if(n){const s=this[n];if(!e)return s;if(e===!0)return kU(s);if(ae.isFunction(e))return e.call(this,s,n);if(ae.isRegExp(e))return e.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,e){if(t=Gd(t),t){const n=ae.findKey(this,t);return!!(n&&this[n]!==void 0&&(!e||N0(this,this[n],n,e)))}return!1}delete(t,e){const n=this;let s=!1;function r(o){if(o=Gd(o),o){const a=ae.findKey(n,o);a&&(!e||N0(n,n[a],a,e))&&(delete n[a],s=!0)}}return ae.isArray(t)?t.forEach(r):r(t),s}clear(t){const e=Object.keys(this);let n=e.length,s=!1;for(;n--;){const r=e[n];(!t||N0(this,this[r],r,t,!0))&&(delete this[r],s=!0)}return s}normalize(t){const e=this,n={};return ae.forEach(this,(s,r)=>{const o=ae.findKey(n,r);if(o){e[o]=Kg(s),delete e[r];return}const a=t?AU(r):String(r).trim();a!==r&&delete e[r],e[a]=Kg(s),n[a]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const e=Object.create(null);return ae.forEach(this,(n,s)=>{n!=null&&n!==!1&&(e[s]=t&&ae.isArray(n)?n.join(", "):n)}),e}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,e])=>t+": "+e).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...e){const n=new this(t);return e.forEach(s=>n.set(s)),n}static accessor(t){const n=(this[LS]=this[LS]={accessors:{}}).accessors,s=this.prototype;function r(o){const a=Gd(o);n[a]||(PU(s,o),n[a]=!0)}return ae.isArray(t)?t.forEach(r):r(t),this}};Ki.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ae.reduceDescriptors(Ki.prototype,({value:i},t)=>{let e=t[0].toUpperCase()+t.slice(1);return{get:()=>i,set(n){this[e]=n}}});ae.freezeMethods(Ki);function M0(i,t){const e=this||If,n=t||e,s=Ki.from(n.headers);let r=n.data;return ae.forEach(i,function(a){r=a.call(e,r,s.normalize(),t?t.status:void 0)}),s.normalize(),r}function i3(i){return!!(i&&i.__CANCEL__)}function Ju(i,t,e){wt.call(this,i??"canceled",wt.ERR_CANCELED,t,e),this.name="CanceledError"}ae.inherits(Ju,wt,{__CANCEL__:!0});function s3(i,t,e){const n=e.config.validateStatus;!e.status||!n||n(e.status)?i(e):t(new wt("Request failed with status code "+e.status,[wt.ERR_BAD_REQUEST,wt.ERR_BAD_RESPONSE][Math.floor(e.status/100)-4],e.config,e.request,e))}function IU(i){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(i);return t&&t[1]||""}function RU(i,t){i=i||10;const e=new Array(i),n=new Array(i);let s=0,r=0,o;return t=t!==void 0?t:1e3,function(l){const c=Date.now(),h=n[r];o||(o=c),e[s]=l,n[s]=c;let f=r,m=0;for(;f!==s;)m+=e[f++],f=f%i;if(s=(s+1)%i,s===r&&(r=(r+1)%i),c-o<t)return;const p=h&&c-h;return p?Math.round(m*1e3/p):void 0}}function OU(i,t){let e=0,n=1e3/t,s,r;const o=(c,h=Date.now())=>{e=h,s=null,r&&(clearTimeout(r),r=null),i.apply(null,c)};return[(...c)=>{const h=Date.now(),f=h-e;f>=n?o(c,h):(s=c,r||(r=setTimeout(()=>{r=null,o(s)},n-f)))},()=>s&&o(s)]}const Tp=(i,t,e=3)=>{let n=0;const s=RU(50,250);return OU(r=>{const o=r.loaded,a=r.lengthComputable?r.total:void 0,l=o-n,c=s(l),h=o<=a;n=o;const f={loaded:o,total:a,progress:a?o/a:void 0,bytes:l,rate:c||void 0,estimated:c&&a&&h?(a-o)/c:void 0,event:r,lengthComputable:a!=null,[t?"download":"upload"]:!0};i(f)},e)},VS=(i,t)=>{const e=i!=null;return[n=>t[0]({lengthComputable:e,total:i,loaded:n}),t[1]]},DS=i=>(...t)=>ae.asap(()=>i(...t)),NU=bi.hasStandardBrowserEnv?((i,t)=>e=>(e=new URL(e,bi.origin),i.protocol===e.protocol&&i.host===e.host&&(t||i.port===e.port)))(new URL(bi.origin),bi.navigator&&/(msie|trident)/i.test(bi.navigator.userAgent)):()=>!0,MU=bi.hasStandardBrowserEnv?{write(i,t,e,n,s,r){const o=[i+"="+encodeURIComponent(t)];ae.isNumber(e)&&o.push("expires="+new Date(e).toGMTString()),ae.isString(n)&&o.push("path="+n),ae.isString(s)&&o.push("domain="+s),r===!0&&o.push("secure"),document.cookie=o.join("; ")},read(i){const t=document.cookie.match(new RegExp("(^|;\\s*)("+i+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(i){this.write(i,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function LU(i){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(i)}function VU(i,t){return t?i.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):i}function r3(i,t){return i&&!LU(t)?VU(i,t):t}const BS=i=>i instanceof Ki?{...i}:i;function Ul(i,t){t=t||{};const e={};function n(c,h,f,m){return ae.isPlainObject(c)&&ae.isPlainObject(h)?ae.merge.call({caseless:m},c,h):ae.isPlainObject(h)?ae.merge({},h):ae.isArray(h)?h.slice():h}function s(c,h,f,m){if(ae.isUndefined(h)){if(!ae.isUndefined(c))return n(void 0,c,f,m)}else return n(c,h,f,m)}function r(c,h){if(!ae.isUndefined(h))return n(void 0,h)}function o(c,h){if(ae.isUndefined(h)){if(!ae.isUndefined(c))return n(void 0,c)}else return n(void 0,h)}function a(c,h,f){if(f in t)return n(c,h);if(f in i)return n(void 0,c)}const l={url:r,method:r,data:r,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(c,h,f)=>s(BS(c),BS(h),f,!0)};return ae.forEach(Object.keys(Object.assign({},i,t)),function(h){const f=l[h]||s,m=f(i[h],t[h],h);ae.isUndefined(m)&&f!==a||(e[h]=m)}),e}const o3=i=>{const t=Ul({},i);let{data:e,withXSRFToken:n,xsrfHeaderName:s,xsrfCookieName:r,headers:o,auth:a}=t;t.headers=o=Ki.from(o),t.url=e3(r3(t.baseURL,t.url),i.params,i.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let l;if(ae.isFormData(e)){if(bi.hasStandardBrowserEnv||bi.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((l=o.getContentType())!==!1){const[c,...h]=l?l.split(";").map(f=>f.trim()).filter(Boolean):[];o.setContentType([c||"multipart/form-data",...h].join("; "))}}if(bi.hasStandardBrowserEnv&&(n&&ae.isFunction(n)&&(n=n(t)),n||n!==!1&&NU(t.url))){const c=s&&r&&MU.read(r);c&&o.set(s,c)}return t},DU=typeof XMLHttpRequest<"u",BU=DU&&function(i){return new Promise(function(e,n){const s=o3(i);let r=s.data;const o=Ki.from(s.headers).normalize();let{responseType:a,onUploadProgress:l,onDownloadProgress:c}=s,h,f,m,p,v;function _(){p&&p(),v&&v(),s.cancelToken&&s.cancelToken.unsubscribe(h),s.signal&&s.signal.removeEventListener("abort",h)}let E=new XMLHttpRequest;E.open(s.method.toUpperCase(),s.url,!0),E.timeout=s.timeout;function x(){if(!E)return;const A=Ki.from("getAllResponseHeaders"in E&&E.getAllResponseHeaders()),O={data:!a||a==="text"||a==="json"?E.responseText:E.response,status:E.status,statusText:E.statusText,headers:A,config:i,request:E};s3(function(N){e(N),_()},function(N){n(N),_()},O),E=null}"onloadend"in E?E.onloadend=x:E.onreadystatechange=function(){!E||E.readyState!==4||E.status===0&&!(E.responseURL&&E.responseURL.indexOf("file:")===0)||setTimeout(x)},E.onabort=function(){E&&(n(new wt("Request aborted",wt.ECONNABORTED,i,E)),E=null)},E.onerror=function(){n(new wt("Network Error",wt.ERR_NETWORK,i,E)),E=null},E.ontimeout=function(){let S=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const O=s.transitional||t3;s.timeoutErrorMessage&&(S=s.timeoutErrorMessage),n(new wt(S,O.clarifyTimeoutError?wt.ETIMEDOUT:wt.ECONNABORTED,i,E)),E=null},r===void 0&&o.setContentType(null),"setRequestHeader"in E&&ae.forEach(o.toJSON(),function(S,O){E.setRequestHeader(O,S)}),ae.isUndefined(s.withCredentials)||(E.withCredentials=!!s.withCredentials),a&&a!=="json"&&(E.responseType=s.responseType),c&&([m,v]=Tp(c,!0),E.addEventListener("progress",m)),l&&E.upload&&([f,p]=Tp(l),E.upload.addEventListener("progress",f),E.upload.addEventListener("loadend",p)),(s.cancelToken||s.signal)&&(h=A=>{E&&(n(!A||A.type?new Ju(null,i,E):A),E.abort(),E=null)},s.cancelToken&&s.cancelToken.subscribe(h),s.signal&&(s.signal.aborted?h():s.signal.addEventListener("abort",h)));const k=IU(s.url);if(k&&bi.protocols.indexOf(k)===-1){n(new wt("Unsupported protocol "+k+":",wt.ERR_BAD_REQUEST,i));return}E.send(r||null)})},FU=(i,t)=>{const{length:e}=i=i?i.filter(Boolean):[];if(t||e){let n=new AbortController,s;const r=function(c){if(!s){s=!0,a();const h=c instanceof Error?c:this.reason;n.abort(h instanceof wt?h:new Ju(h instanceof Error?h.message:h))}};let o=t&&setTimeout(()=>{o=null,r(new wt(`timeout ${t} of ms exceeded`,wt.ETIMEDOUT))},t);const a=()=>{i&&(o&&clearTimeout(o),o=null,i.forEach(c=>{c.unsubscribe?c.unsubscribe(r):c.removeEventListener("abort",r)}),i=null)};i.forEach(c=>c.addEventListener("abort",r));const{signal:l}=n;return l.unsubscribe=()=>ae.asap(a),l}},$U=function*(i,t){let e=i.byteLength;if(e<t){yield i;return}let n=0,s;for(;n<e;)s=n+t,yield i.slice(n,s),n=s},zU=async function*(i,t){for await(const e of jU(i))yield*$U(e,t)},jU=async function*(i){if(i[Symbol.asyncIterator]){yield*i;return}const t=i.getReader();try{for(;;){const{done:e,value:n}=await t.read();if(e)break;yield n}}finally{await t.cancel()}},FS=(i,t,e,n)=>{const s=zU(i,t);let r=0,o,a=l=>{o||(o=!0,n&&n(l))};return new ReadableStream({async pull(l){try{const{done:c,value:h}=await s.next();if(c){a(),l.close();return}let f=h.byteLength;if(e){let m=r+=f;e(m)}l.enqueue(new Uint8Array(h))}catch(c){throw a(c),c}},cancel(l){return a(l),s.return()}},{highWaterMark:2})},Ob=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",a3=Ob&&typeof ReadableStream=="function",HU=Ob&&(typeof TextEncoder=="function"?(i=>t=>i.encode(t))(new TextEncoder):async i=>new Uint8Array(await new Response(i).arrayBuffer())),l3=(i,...t)=>{try{return!!i(...t)}catch{return!1}},UU=a3&&l3(()=>{let i=!1;const t=new Request(bi.origin,{body:new ReadableStream,method:"POST",get duplex(){return i=!0,"half"}}).headers.has("Content-Type");return i&&!t}),$S=64*1024,by=a3&&l3(()=>ae.isReadableStream(new Response("").body)),kp={stream:by&&(i=>i.body)};Ob&&(i=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!kp[t]&&(kp[t]=ae.isFunction(i[t])?e=>e[t]():(e,n)=>{throw new wt(`Response type '${t}' is not supported`,wt.ERR_NOT_SUPPORT,n)})})})(new Response);const WU=async i=>{if(i==null)return 0;if(ae.isBlob(i))return i.size;if(ae.isSpecCompliantForm(i))return(await new Request(bi.origin,{method:"POST",body:i}).arrayBuffer()).byteLength;if(ae.isArrayBufferView(i)||ae.isArrayBuffer(i))return i.byteLength;if(ae.isURLSearchParams(i)&&(i=i+""),ae.isString(i))return(await HU(i)).byteLength},qU=async(i,t)=>{const e=ae.toFiniteNumber(i.getContentLength());return e??WU(t)},GU=Ob&&(async i=>{let{url:t,method:e,data:n,signal:s,cancelToken:r,timeout:o,onDownloadProgress:a,onUploadProgress:l,responseType:c,headers:h,withCredentials:f="same-origin",fetchOptions:m}=o3(i);c=c?(c+"").toLowerCase():"text";let p=FU([s,r&&r.toAbortSignal()],o),v;const _=p&&p.unsubscribe&&(()=>{p.unsubscribe()});let E;try{if(l&&UU&&e!=="get"&&e!=="head"&&(E=await qU(h,n))!==0){let O=new Request(t,{method:"POST",body:n,duplex:"half"}),P;if(ae.isFormData(n)&&(P=O.headers.get("content-type"))&&h.setContentType(P),O.body){const[N,L]=VS(E,Tp(DS(l)));n=FS(O.body,$S,N,L)}}ae.isString(f)||(f=f?"include":"omit");const x="credentials"in Request.prototype;v=new Request(t,{...m,signal:p,method:e.toUpperCase(),headers:h.normalize().toJSON(),body:n,duplex:"half",credentials:x?f:void 0});let k=await fetch(v);const A=by&&(c==="stream"||c==="response");if(by&&(a||A&&_)){const O={};["status","statusText","headers"].forEach(M=>{O[M]=k[M]});const P=ae.toFiniteNumber(k.headers.get("content-length")),[N,L]=a&&VS(P,Tp(DS(a),!0))||[];k=new Response(FS(k.body,$S,N,()=>{L&&L(),_&&_()}),O)}c=c||"text";let S=await kp[ae.findKey(kp,c)||"text"](k,i);return!A&&_&&_(),await new Promise((O,P)=>{s3(O,P,{data:S,headers:Ki.from(k.headers),status:k.status,statusText:k.statusText,config:i,request:v})})}catch(x){throw _&&_(),x&&x.name==="TypeError"&&/fetch/i.test(x.message)?Object.assign(new wt("Network Error",wt.ERR_NETWORK,i,v),{cause:x.cause||x}):wt.from(x,x&&x.code,i,v)}}),wy={http:lU,xhr:BU,fetch:GU};ae.forEach(wy,(i,t)=>{if(i){try{Object.defineProperty(i,"name",{value:t})}catch{}Object.defineProperty(i,"adapterName",{value:t})}});const zS=i=>`- ${i}`,KU=i=>ae.isFunction(i)||i===null||i===!1,c3={getAdapter:i=>{i=ae.isArray(i)?i:[i];const{length:t}=i;let e,n;const s={};for(let r=0;r<t;r++){e=i[r];let o;if(n=e,!KU(e)&&(n=wy[(o=String(e)).toLowerCase()],n===void 0))throw new wt(`Unknown adapter '${o}'`);if(n)break;s[o||"#"+r]=n}if(!n){const r=Object.entries(s).map(([a,l])=>`adapter ${a} `+(l===!1?"is not supported by the environment":"is not available in the build"));let o=t?r.length>1?`since :
`+r.map(zS).join(`
`):" "+zS(r[0]):"as no adapter specified";throw new wt("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return n},adapters:wy};function L0(i){if(i.cancelToken&&i.cancelToken.throwIfRequested(),i.signal&&i.signal.aborted)throw new Ju(null,i)}function jS(i){return L0(i),i.headers=Ki.from(i.headers),i.data=M0.call(i,i.transformRequest),["post","put","patch"].indexOf(i.method)!==-1&&i.headers.setContentType("application/x-www-form-urlencoded",!1),c3.getAdapter(i.adapter||If.adapter)(i).then(function(n){return L0(i),n.data=M0.call(i,i.transformResponse,n),n.headers=Ki.from(n.headers),n},function(n){return i3(n)||(L0(i),n&&n.response&&(n.response.data=M0.call(i,i.transformResponse,n.response),n.response.headers=Ki.from(n.response.headers))),Promise.reject(n)})}const u3="1.7.9",Nb={};["object","boolean","number","function","string","symbol"].forEach((i,t)=>{Nb[i]=function(n){return typeof n===i||"a"+(t<1?"n ":" ")+i}});const HS={};Nb.transitional=function(t,e,n){function s(r,o){return"[Axios v"+u3+"] Transitional option '"+r+"'"+o+(n?". "+n:"")}return(r,o,a)=>{if(t===!1)throw new wt(s(o," has been removed"+(e?" in "+e:"")),wt.ERR_DEPRECATED);return e&&!HS[o]&&(HS[o]=!0,console.warn(s(o," has been deprecated since v"+e+" and will be removed in the near future"))),t?t(r,o,a):!0}};Nb.spelling=function(t){return(e,n)=>(console.warn(`${n} is likely a misspelling of ${t}`),!0)};function YU(i,t,e){if(typeof i!="object")throw new wt("options must be an object",wt.ERR_BAD_OPTION_VALUE);const n=Object.keys(i);let s=n.length;for(;s-- >0;){const r=n[s],o=t[r];if(o){const a=i[r],l=a===void 0||o(a,r,i);if(l!==!0)throw new wt("option "+r+" must be "+l,wt.ERR_BAD_OPTION_VALUE);continue}if(e!==!0)throw new wt("Unknown option "+r,wt.ERR_BAD_OPTION)}}const Yg={assertOptions:YU,validators:Nb},qr=Yg.validators;let Ol=class{constructor(t){this.defaults=t,this.interceptors={request:new MS,response:new MS}}async request(t,e){try{return await this._request(t,e)}catch(n){if(n instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const r=s.stack?s.stack.replace(/^.+\n/,""):"";try{n.stack?r&&!String(n.stack).endsWith(r.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+r):n.stack=r}catch{}}throw n}}_request(t,e){typeof t=="string"?(e=e||{},e.url=t):e=t||{},e=Ul(this.defaults,e);const{transitional:n,paramsSerializer:s,headers:r}=e;n!==void 0&&Yg.assertOptions(n,{silentJSONParsing:qr.transitional(qr.boolean),forcedJSONParsing:qr.transitional(qr.boolean),clarifyTimeoutError:qr.transitional(qr.boolean)},!1),s!=null&&(ae.isFunction(s)?e.paramsSerializer={serialize:s}:Yg.assertOptions(s,{encode:qr.function,serialize:qr.function},!0)),Yg.assertOptions(e,{baseUrl:qr.spelling("baseURL"),withXsrfToken:qr.spelling("withXSRFToken")},!0),e.method=(e.method||this.defaults.method||"get").toLowerCase();let o=r&&ae.merge(r.common,r[e.method]);r&&ae.forEach(["delete","get","head","post","put","patch","common"],v=>{delete r[v]}),e.headers=Ki.concat(o,r);const a=[];let l=!0;this.interceptors.request.forEach(function(_){typeof _.runWhen=="function"&&_.runWhen(e)===!1||(l=l&&_.synchronous,a.unshift(_.fulfilled,_.rejected))});const c=[];this.interceptors.response.forEach(function(_){c.push(_.fulfilled,_.rejected)});let h,f=0,m;if(!l){const v=[jS.bind(this),void 0];for(v.unshift.apply(v,a),v.push.apply(v,c),m=v.length,h=Promise.resolve(e);f<m;)h=h.then(v[f++],v[f++]);return h}m=a.length;let p=e;for(f=0;f<m;){const v=a[f++],_=a[f++];try{p=v(p)}catch(E){_.call(this,E);break}}try{h=jS.call(this,p)}catch(v){return Promise.reject(v)}for(f=0,m=c.length;f<m;)h=h.then(c[f++],c[f++]);return h}getUri(t){t=Ul(this.defaults,t);const e=r3(t.baseURL,t.url);return e3(e,t.params,t.paramsSerializer)}};ae.forEach(["delete","get","head","options"],function(t){Ol.prototype[t]=function(e,n){return this.request(Ul(n||{},{method:t,url:e,data:(n||{}).data}))}});ae.forEach(["post","put","patch"],function(t){function e(n){return function(r,o,a){return this.request(Ul(a||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:r,data:o}))}}Ol.prototype[t]=e(),Ol.prototype[t+"Form"]=e(!0)});let ZU=class d3{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let e;this.promise=new Promise(function(r){e=r});const n=this;this.promise.then(s=>{if(!n._listeners)return;let r=n._listeners.length;for(;r-- >0;)n._listeners[r](s);n._listeners=null}),this.promise.then=s=>{let r;const o=new Promise(a=>{n.subscribe(a),r=a}).then(s);return o.cancel=function(){n.unsubscribe(r)},o},t(function(r,o,a){n.reason||(n.reason=new Ju(r,o,a),e(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const e=this._listeners.indexOf(t);e!==-1&&this._listeners.splice(e,1)}toAbortSignal(){const t=new AbortController,e=n=>{t.abort(n)};return this.subscribe(e),t.signal.unsubscribe=()=>this.unsubscribe(e),t.signal}static source(){let t;return{token:new d3(function(s){t=s}),cancel:t}}};function XU(i){return function(e){return i.apply(null,e)}}function JU(i){return ae.isObject(i)&&i.isAxiosError===!0}const vy={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(vy).forEach(([i,t])=>{vy[t]=i});function h3(i){const t=new Ol(i),e=jO(Ol.prototype.request,t);return ae.extend(e,Ol.prototype,t,{allOwnKeys:!0}),ae.extend(e,t,null,{allOwnKeys:!0}),e.create=function(s){return h3(Ul(i,s))},e}const Ke=h3(If);Ke.Axios=Ol;Ke.CanceledError=Ju;Ke.CancelToken=ZU;Ke.isCancel=i3;Ke.VERSION=u3;Ke.toFormData=Rb;Ke.AxiosError=wt;Ke.Cancel=Ke.CanceledError;Ke.all=function(t){return Promise.all(t)};Ke.spread=XU;Ke.isAxiosError=JU;Ke.mergeConfig=Ul;Ke.AxiosHeaders=Ki;Ke.formToJSON=i=>n3(ae.isHTMLForm(i)?new FormData(i):i);Ke.getAdapter=c3.getAdapter;Ke.HttpStatusCode=vy;Ke.default=Ke;const{Axios:gye,AxiosError:$t,CanceledError:pye,isCancel:bye,CancelToken:wye,VERSION:vye,all:yye,Cancel:_ye,isAxiosError:Eye,spread:Cye,toFormData:xye,AxiosHeaders:Tye,HttpStatusCode:kye,formToJSON:Sye,getAdapter:Aye,mergeConfig:Pye}=Ke;var wi=function(){return wi=Object.assign||function(t){for(var e,n=1,s=arguments.length;n<s;n++){e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},wi.apply(this,arguments)};function Zh(i,t,e){if(e||arguments.length===2)for(var n=0,s=t.length,r;n<s;n++)(r||!(n in t))&&(r||(r=Array.prototype.slice.call(t,0,n)),r[n]=t[n]);return i.concat(r||Array.prototype.slice.call(t))}var sn="-ms-",Th="-moz-",Dt="-webkit-",f3="comm",Mb="rule",_E="decl",QU="@import",m3="@keyframes",eW="@layer",g3=Math.abs,EE=String.fromCharCode,yy=Object.assign;function tW(i,t){return Gn(i,0)^45?(((t<<2^Gn(i,0))<<2^Gn(i,1))<<2^Gn(i,2))<<2^Gn(i,3):0}function p3(i){return i.trim()}function Ro(i,t){return(i=t.exec(i))?i[0]:i}function _t(i,t,e){return i.replace(t,e)}function Zg(i,t,e){return i.indexOf(t,e)}function Gn(i,t){return i.charCodeAt(t)|0}function Nu(i,t,e){return i.slice(t,e)}function Jr(i){return i.length}function b3(i){return i.length}function hh(i,t){return t.push(i),i}function nW(i,t){return i.map(t).join("")}function US(i,t){return i.filter(function(e){return!Ro(e,t)})}var Lb=1,Mu=1,w3=0,Us=0,Ln=0,Qu="";function Vb(i,t,e,n,s,r,o,a){return{value:i,root:t,parent:e,type:n,props:s,children:r,line:Lb,column:Mu,length:o,return:"",siblings:a}}function xa(i,t){return yy(Vb("",null,null,"",null,null,0,i.siblings),i,{length:-i.length},t)}function qc(i){for(;i.root;)i=xa(i.root,{children:[i]});hh(i,i.siblings)}function iW(){return Ln}function sW(){return Ln=Us>0?Gn(Qu,--Us):0,Mu--,Ln===10&&(Mu=1,Lb--),Ln}function vr(){return Ln=Us<w3?Gn(Qu,Us++):0,Mu++,Ln===10&&(Mu=1,Lb++),Ln}function Nl(){return Gn(Qu,Us)}function Xg(){return Us}function Db(i,t){return Nu(Qu,i,t)}function _y(i){switch(i){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function rW(i){return Lb=Mu=1,w3=Jr(Qu=i),Us=0,[]}function oW(i){return Qu="",i}function V0(i){return p3(Db(Us-1,Ey(i===91?i+2:i===40?i+1:i)))}function aW(i){for(;(Ln=Nl())&&Ln<33;)vr();return _y(i)>2||_y(Ln)>3?"":" "}function lW(i,t){for(;--t&&vr()&&!(Ln<48||Ln>102||Ln>57&&Ln<65||Ln>70&&Ln<97););return Db(i,Xg()+(t<6&&Nl()==32&&vr()==32))}function Ey(i){for(;vr();)switch(Ln){case i:return Us;case 34:case 39:i!==34&&i!==39&&Ey(Ln);break;case 40:i===41&&Ey(i);break;case 92:vr();break}return Us}function cW(i,t){for(;vr()&&i+Ln!==57;)if(i+Ln===84&&Nl()===47)break;return"/*"+Db(t,Us-1)+"*"+EE(i===47?i:vr())}function uW(i){for(;!_y(Nl());)vr();return Db(i,Us)}function dW(i){return oW(Jg("",null,null,null,[""],i=rW(i),0,[0],i))}function Jg(i,t,e,n,s,r,o,a,l){for(var c=0,h=0,f=o,m=0,p=0,v=0,_=1,E=1,x=1,k=0,A="",S=s,O=r,P=n,N=A;E;)switch(v=k,k=vr()){case 40:if(v!=108&&Gn(N,f-1)==58){Zg(N+=_t(V0(k),"&","&\f"),"&\f",g3(c?a[c-1]:0))!=-1&&(x=-1);break}case 34:case 39:case 91:N+=V0(k);break;case 9:case 10:case 13:case 32:N+=aW(v);break;case 92:N+=lW(Xg()-1,7);continue;case 47:switch(Nl()){case 42:case 47:hh(hW(cW(vr(),Xg()),t,e,l),l);break;default:N+="/"}break;case 123*_:a[c++]=Jr(N)*x;case 125*_:case 59:case 0:switch(k){case 0:case 125:E=0;case 59+h:x==-1&&(N=_t(N,/\f/g,"")),p>0&&Jr(N)-f&&hh(p>32?qS(N+";",n,e,f-1,l):qS(_t(N," ","")+";",n,e,f-2,l),l);break;case 59:N+=";";default:if(hh(P=WS(N,t,e,c,h,s,a,A,S=[],O=[],f,r),r),k===123)if(h===0)Jg(N,t,P,P,S,r,f,a,O);else switch(m===99&&Gn(N,3)===110?100:m){case 100:case 108:case 109:case 115:Jg(i,P,P,n&&hh(WS(i,P,P,0,0,s,a,A,s,S=[],f,O),O),s,O,f,a,n?S:O);break;default:Jg(N,P,P,P,[""],O,0,a,O)}}c=h=p=0,_=x=1,A=N="",f=o;break;case 58:f=1+Jr(N),p=v;default:if(_<1){if(k==123)--_;else if(k==125&&_++==0&&sW()==125)continue}switch(N+=EE(k),k*_){case 38:x=h>0?1:(N+="\f",-1);break;case 44:a[c++]=(Jr(N)-1)*x,x=1;break;case 64:Nl()===45&&(N+=V0(vr())),m=Nl(),h=f=Jr(A=N+=uW(Xg())),k++;break;case 45:v===45&&Jr(N)==2&&(_=0)}}return r}function WS(i,t,e,n,s,r,o,a,l,c,h,f){for(var m=s-1,p=s===0?r:[""],v=b3(p),_=0,E=0,x=0;_<n;++_)for(var k=0,A=Nu(i,m+1,m=g3(E=o[_])),S=i;k<v;++k)(S=p3(E>0?p[k]+" "+A:_t(A,/&\f/g,p[k])))&&(l[x++]=S);return Vb(i,t,e,s===0?Mb:a,l,c,h,f)}function hW(i,t,e,n){return Vb(i,t,e,f3,EE(iW()),Nu(i,2,-2),0,n)}function qS(i,t,e,n,s){return Vb(i,t,e,_E,Nu(i,0,n),Nu(i,n+1,-1),n,s)}function v3(i,t,e){switch(tW(i,t)){case 5103:return Dt+"print-"+i+i;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Dt+i+i;case 4789:return Th+i+i;case 5349:case 4246:case 4810:case 6968:case 2756:return Dt+i+Th+i+sn+i+i;case 5936:switch(Gn(i,t+11)){case 114:return Dt+i+sn+_t(i,/[svh]\w+-[tblr]{2}/,"tb")+i;case 108:return Dt+i+sn+_t(i,/[svh]\w+-[tblr]{2}/,"tb-rl")+i;case 45:return Dt+i+sn+_t(i,/[svh]\w+-[tblr]{2}/,"lr")+i}case 6828:case 4268:case 2903:return Dt+i+sn+i+i;case 6165:return Dt+i+sn+"flex-"+i+i;case 5187:return Dt+i+_t(i,/(\w+).+(:[^]+)/,Dt+"box-$1$2"+sn+"flex-$1$2")+i;case 5443:return Dt+i+sn+"flex-item-"+_t(i,/flex-|-self/g,"")+(Ro(i,/flex-|baseline/)?"":sn+"grid-row-"+_t(i,/flex-|-self/g,""))+i;case 4675:return Dt+i+sn+"flex-line-pack"+_t(i,/align-content|flex-|-self/g,"")+i;case 5548:return Dt+i+sn+_t(i,"shrink","negative")+i;case 5292:return Dt+i+sn+_t(i,"basis","preferred-size")+i;case 6060:return Dt+"box-"+_t(i,"-grow","")+Dt+i+sn+_t(i,"grow","positive")+i;case 4554:return Dt+_t(i,/([^-])(transform)/g,"$1"+Dt+"$2")+i;case 6187:return _t(_t(_t(i,/(zoom-|grab)/,Dt+"$1"),/(image-set)/,Dt+"$1"),i,"")+i;case 5495:case 3959:return _t(i,/(image-set\([^]*)/,Dt+"$1$`$1");case 4968:return _t(_t(i,/(.+:)(flex-)?(.*)/,Dt+"box-pack:$3"+sn+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Dt+i+i;case 4200:if(!Ro(i,/flex-|baseline/))return sn+"grid-column-align"+Nu(i,t)+i;break;case 2592:case 3360:return sn+_t(i,"template-","")+i;case 4384:case 3616:return e&&e.some(function(n,s){return t=s,Ro(n.props,/grid-\w+-end/)})?~Zg(i+(e=e[t].value),"span",0)?i:sn+_t(i,"-start","")+i+sn+"grid-row-span:"+(~Zg(e,"span",0)?Ro(e,/\d+/):+Ro(e,/\d+/)-+Ro(i,/\d+/))+";":sn+_t(i,"-start","")+i;case 4896:case 4128:return e&&e.some(function(n){return Ro(n.props,/grid-\w+-start/)})?i:sn+_t(_t(i,"-end","-span"),"span ","")+i;case 4095:case 3583:case 4068:case 2532:return _t(i,/(.+)-inline(.+)/,Dt+"$1$2")+i;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Jr(i)-1-t>6)switch(Gn(i,t+1)){case 109:if(Gn(i,t+4)!==45)break;case 102:return _t(i,/(.+:)(.+)-([^]+)/,"$1"+Dt+"$2-$3$1"+Th+(Gn(i,t+3)==108?"$3":"$2-$3"))+i;case 115:return~Zg(i,"stretch",0)?v3(_t(i,"stretch","fill-available"),t,e)+i:i}break;case 5152:case 5920:return _t(i,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,function(n,s,r,o,a,l,c){return sn+s+":"+r+c+(o?sn+s+"-span:"+(a?l:+l-+r)+c:"")+i});case 4949:if(Gn(i,t+6)===121)return _t(i,":",":"+Dt)+i;break;case 6444:switch(Gn(i,Gn(i,14)===45?18:11)){case 120:return _t(i,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+Dt+(Gn(i,14)===45?"inline-":"")+"box$3$1"+Dt+"$2$3$1"+sn+"$2box$3")+i;case 100:return _t(i,":",":"+sn)+i}break;case 5719:case 2647:case 2135:case 3927:case 2391:return _t(i,"scroll-","scroll-snap-")+i}return i}function Sp(i,t){for(var e="",n=0;n<i.length;n++)e+=t(i[n],n,i,t)||"";return e}function fW(i,t,e,n){switch(i.type){case eW:if(i.children.length)break;case QU:case _E:return i.return=i.return||i.value;case f3:return"";case m3:return i.return=i.value+"{"+Sp(i.children,n)+"}";case Mb:if(!Jr(i.value=i.props.join(",")))return""}return Jr(e=Sp(i.children,n))?i.return=i.value+"{"+e+"}":""}function mW(i){var t=b3(i);return function(e,n,s,r){for(var o="",a=0;a<t;a++)o+=i[a](e,n,s,r)||"";return o}}function gW(i){return function(t){t.root||(t=t.return)&&i(t)}}function pW(i,t,e,n){if(i.length>-1&&!i.return)switch(i.type){case _E:i.return=v3(i.value,i.length,e);return;case m3:return Sp([xa(i,{value:_t(i.value,"@","@"+Dt)})],n);case Mb:if(i.length)return nW(e=i.props,function(s){switch(Ro(s,n=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":qc(xa(i,{props:[_t(s,/:(read-\w+)/,":"+Th+"$1")]})),qc(xa(i,{props:[s]})),yy(i,{props:US(e,n)});break;case"::placeholder":qc(xa(i,{props:[_t(s,/:(plac\w+)/,":"+Dt+"input-$1")]})),qc(xa(i,{props:[_t(s,/:(plac\w+)/,":"+Th+"$1")]})),qc(xa(i,{props:[_t(s,/:(plac\w+)/,sn+"input-$1")]})),qc(xa(i,{props:[s]})),yy(i,{props:US(e,n)});break}return""})}}var bW={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},os={},Lu=typeof process<"u"&&os!==void 0&&(os.REACT_APP_SC_ATTR||os.SC_ATTR)||"data-styled",y3="active",_3="data-styled-version",Bb="6.1.14",CE=`/*!sc*/
`,Ap=typeof window<"u"&&"HTMLElement"in window,wW=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&os!==void 0&&os.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&os.REACT_APP_SC_DISABLE_SPEEDY!==""?os.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&os.REACT_APP_SC_DISABLE_SPEEDY:typeof process<"u"&&os!==void 0&&os.SC_DISABLE_SPEEDY!==void 0&&os.SC_DISABLE_SPEEDY!==""&&os.SC_DISABLE_SPEEDY!=="false"&&os.SC_DISABLE_SPEEDY),vW={},Fb=Object.freeze([]),Vu=Object.freeze({});function E3(i,t,e){return e===void 0&&(e=Vu),i.theme!==e.theme&&i.theme||t||e.theme}var C3=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),yW=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,_W=/(^-|-$)/g;function GS(i){return i.replace(yW,"-").replace(_W,"")}var EW=/(a)(d)/gi,hg=52,KS=function(i){return String.fromCharCode(i+(i>25?39:97))};function Cy(i){var t,e="";for(t=Math.abs(i);t>hg;t=t/hg|0)e=KS(t%hg)+e;return(KS(t%hg)+e).replace(EW,"$1-$2")}var D0,x3=5381,mu=function(i,t){for(var e=t.length;e;)i=33*i^t.charCodeAt(--e);return i},T3=function(i){return mu(x3,i)};function k3(i){return Cy(T3(i)>>>0)}function CW(i){return i.displayName||i.name||"Component"}function B0(i){return typeof i=="string"&&!0}var S3=typeof Symbol=="function"&&Symbol.for,A3=S3?Symbol.for("react.memo"):60115,xW=S3?Symbol.for("react.forward_ref"):60112,TW={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},kW={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},P3={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},SW=((D0={})[xW]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},D0[A3]=P3,D0);function YS(i){return("type"in(t=i)&&t.type.$$typeof)===A3?P3:"$$typeof"in i?SW[i.$$typeof]:TW;var t}var AW=Object.defineProperty,PW=Object.getOwnPropertyNames,ZS=Object.getOwnPropertySymbols,IW=Object.getOwnPropertyDescriptor,RW=Object.getPrototypeOf,XS=Object.prototype;function I3(i,t,e){if(typeof t!="string"){if(XS){var n=RW(t);n&&n!==XS&&I3(i,n,e)}var s=PW(t);ZS&&(s=s.concat(ZS(t)));for(var r=YS(i),o=YS(t),a=0;a<s.length;++a){var l=s[a];if(!(l in kW||e&&e[l]||o&&l in o||r&&l in r)){var c=IW(t,l);try{AW(i,l,c)}catch{}}}}return i}function Du(i){return typeof i=="function"}function xE(i){return typeof i=="object"&&"styledComponentId"in i}function Al(i,t){return i&&t?"".concat(i," ").concat(t):i||t||""}function xy(i,t){if(i.length===0)return"";for(var e=i[0],n=1;n<i.length;n++)e+=i[n];return e}function Xh(i){return i!==null&&typeof i=="object"&&i.constructor.name===Object.name&&!("props"in i&&i.$$typeof)}function Ty(i,t,e){if(e===void 0&&(e=!1),!e&&!Xh(i)&&!Array.isArray(i))return t;if(Array.isArray(t))for(var n=0;n<t.length;n++)i[n]=Ty(i[n],t[n]);else if(Xh(t))for(var n in t)i[n]=Ty(i[n],t[n]);return i}function TE(i,t){Object.defineProperty(i,"toString",{value:t})}function Rf(i){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(i," for more information.").concat(t.length>0?" Args: ".concat(t.join(", ")):""))}var OW=function(){function i(t){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=t}return i.prototype.indexOfGroup=function(t){for(var e=0,n=0;n<t;n++)e+=this.groupSizes[n];return e},i.prototype.insertRules=function(t,e){if(t>=this.groupSizes.length){for(var n=this.groupSizes,s=n.length,r=s;t>=r;)if((r<<=1)<0)throw Rf(16,"".concat(t));this.groupSizes=new Uint32Array(r),this.groupSizes.set(n),this.length=r;for(var o=s;o<r;o++)this.groupSizes[o]=0}for(var a=this.indexOfGroup(t+1),l=(o=0,e.length);o<l;o++)this.tag.insertRule(a,e[o])&&(this.groupSizes[t]++,a++)},i.prototype.clearGroup=function(t){if(t<this.length){var e=this.groupSizes[t],n=this.indexOfGroup(t),s=n+e;this.groupSizes[t]=0;for(var r=n;r<s;r++)this.tag.deleteRule(n)}},i.prototype.getGroup=function(t){var e="";if(t>=this.length||this.groupSizes[t]===0)return e;for(var n=this.groupSizes[t],s=this.indexOfGroup(t),r=s+n,o=s;o<r;o++)e+="".concat(this.tag.getRule(o)).concat(CE);return e},i}(),Qg=new Map,Pp=new Map,ep=1,fg=function(i){if(Qg.has(i))return Qg.get(i);for(;Pp.has(ep);)ep++;var t=ep++;return Qg.set(i,t),Pp.set(t,i),t},NW=function(i,t){ep=t+1,Qg.set(i,t),Pp.set(t,i)},MW="style[".concat(Lu,"][").concat(_3,'="').concat(Bb,'"]'),LW=new RegExp("^".concat(Lu,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),VW=function(i,t,e){for(var n,s=e.split(","),r=0,o=s.length;r<o;r++)(n=s[r])&&i.registerName(t,n)},DW=function(i,t){for(var e,n=((e=t.textContent)!==null&&e!==void 0?e:"").split(CE),s=[],r=0,o=n.length;r<o;r++){var a=n[r].trim();if(a){var l=a.match(LW);if(l){var c=0|parseInt(l[1],10),h=l[2];c!==0&&(NW(h,c),VW(i,h,l[3]),i.getTag().insertRules(c,s)),s.length=0}else s.push(a)}}},JS=function(i){for(var t=document.querySelectorAll(MW),e=0,n=t.length;e<n;e++){var s=t[e];s&&s.getAttribute(Lu)!==y3&&(DW(i,s),s.parentNode&&s.parentNode.removeChild(s))}};function BW(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null}var R3=function(i){var t=document.head,e=i||t,n=document.createElement("style"),s=function(a){var l=Array.from(a.querySelectorAll("style[".concat(Lu,"]")));return l[l.length-1]}(e),r=s!==void 0?s.nextSibling:null;n.setAttribute(Lu,y3),n.setAttribute(_3,Bb);var o=BW();return o&&n.setAttribute("nonce",o),e.insertBefore(n,r),n},FW=function(){function i(t){this.element=R3(t),this.element.appendChild(document.createTextNode("")),this.sheet=function(e){if(e.sheet)return e.sheet;for(var n=document.styleSheets,s=0,r=n.length;s<r;s++){var o=n[s];if(o.ownerNode===e)return o}throw Rf(17)}(this.element),this.length=0}return i.prototype.insertRule=function(t,e){try{return this.sheet.insertRule(e,t),this.length++,!0}catch{return!1}},i.prototype.deleteRule=function(t){this.sheet.deleteRule(t),this.length--},i.prototype.getRule=function(t){var e=this.sheet.cssRules[t];return e&&e.cssText?e.cssText:""},i}(),$W=function(){function i(t){this.element=R3(t),this.nodes=this.element.childNodes,this.length=0}return i.prototype.insertRule=function(t,e){if(t<=this.length&&t>=0){var n=document.createTextNode(e);return this.element.insertBefore(n,this.nodes[t]||null),this.length++,!0}return!1},i.prototype.deleteRule=function(t){this.element.removeChild(this.nodes[t]),this.length--},i.prototype.getRule=function(t){return t<this.length?this.nodes[t].textContent:""},i}(),zW=function(){function i(t){this.rules=[],this.length=0}return i.prototype.insertRule=function(t,e){return t<=this.length&&(this.rules.splice(t,0,e),this.length++,!0)},i.prototype.deleteRule=function(t){this.rules.splice(t,1),this.length--},i.prototype.getRule=function(t){return t<this.length?this.rules[t]:""},i}(),QS=Ap,jW={isServer:!Ap,useCSSOMInjection:!wW},Ip=function(){function i(t,e,n){t===void 0&&(t=Vu),e===void 0&&(e={});var s=this;this.options=wi(wi({},jW),t),this.gs=e,this.names=new Map(n),this.server=!!t.isServer,!this.server&&Ap&&QS&&(QS=!1,JS(this)),TE(this,function(){return function(r){for(var o=r.getTag(),a=o.length,l="",c=function(f){var m=function(x){return Pp.get(x)}(f);if(m===void 0)return"continue";var p=r.names.get(m),v=o.getGroup(f);if(p===void 0||!p.size||v.length===0)return"continue";var _="".concat(Lu,".g").concat(f,'[id="').concat(m,'"]'),E="";p!==void 0&&p.forEach(function(x){x.length>0&&(E+="".concat(x,","))}),l+="".concat(v).concat(_,'{content:"').concat(E,'"}').concat(CE)},h=0;h<a;h++)c(h);return l}(s)})}return i.registerId=function(t){return fg(t)},i.prototype.rehydrate=function(){!this.server&&Ap&&JS(this)},i.prototype.reconstructWithOptions=function(t,e){return e===void 0&&(e=!0),new i(wi(wi({},this.options),t),this.gs,e&&this.names||void 0)},i.prototype.allocateGSInstance=function(t){return this.gs[t]=(this.gs[t]||0)+1},i.prototype.getTag=function(){return this.tag||(this.tag=(t=function(e){var n=e.useCSSOMInjection,s=e.target;return e.isServer?new zW(s):n?new FW(s):new $W(s)}(this.options),new OW(t)));var t},i.prototype.hasNameForId=function(t,e){return this.names.has(t)&&this.names.get(t).has(e)},i.prototype.registerName=function(t,e){if(fg(t),this.names.has(t))this.names.get(t).add(e);else{var n=new Set;n.add(e),this.names.set(t,n)}},i.prototype.insertRules=function(t,e,n){this.registerName(t,e),this.getTag().insertRules(fg(t),n)},i.prototype.clearNames=function(t){this.names.has(t)&&this.names.get(t).clear()},i.prototype.clearRules=function(t){this.getTag().clearGroup(fg(t)),this.clearNames(t)},i.prototype.clearTag=function(){this.tag=void 0},i}(),HW=/&/g,UW=/^\s*\/\/.*$/gm;function O3(i,t){return i.map(function(e){return e.type==="rule"&&(e.value="".concat(t," ").concat(e.value),e.value=e.value.replaceAll(",",",".concat(t," ")),e.props=e.props.map(function(n){return"".concat(t," ").concat(n)})),Array.isArray(e.children)&&e.type!=="@keyframes"&&(e.children=O3(e.children,t)),e})}function WW(i){var t,e,n,s=Vu,r=s.options,o=r===void 0?Vu:r,a=s.plugins,l=a===void 0?Fb:a,c=function(m,p,v){return v.startsWith(e)&&v.endsWith(e)&&v.replaceAll(e,"").length>0?".".concat(t):m},h=l.slice();h.push(function(m){m.type===Mb&&m.value.includes("&")&&(m.props[0]=m.props[0].replace(HW,e).replace(n,c))}),o.prefix&&h.push(pW),h.push(fW);var f=function(m,p,v,_){p===void 0&&(p=""),v===void 0&&(v=""),_===void 0&&(_="&"),t=_,e=p,n=new RegExp("\\".concat(e,"\\b"),"g");var E=m.replace(UW,""),x=dW(v||p?"".concat(v," ").concat(p," { ").concat(E," }"):E);o.namespace&&(x=O3(x,o.namespace));var k=[];return Sp(x,mW(h.concat(gW(function(A){return k.push(A)})))),k};return f.hash=l.length?l.reduce(function(m,p){return p.name||Rf(15),mu(m,p.name)},x3).toString():"",f}var qW=new Ip,ky=WW(),N3=ot.createContext({shouldForwardProp:void 0,styleSheet:qW,stylis:ky});N3.Consumer;ot.createContext(void 0);function Sy(){return R.useContext(N3)}var GW=function(){function i(t,e){var n=this;this.inject=function(s,r){r===void 0&&(r=ky);var o=n.name+r.hash;s.hasNameForId(n.id,o)||s.insertRules(n.id,o,r(n.rules,o,"@keyframes"))},this.name=t,this.id="sc-keyframes-".concat(t),this.rules=e,TE(this,function(){throw Rf(12,String(n.name))})}return i.prototype.getName=function(t){return t===void 0&&(t=ky),this.name+t.hash},i}(),KW=function(i){return i>="A"&&i<="Z"};function eA(i){for(var t="",e=0;e<i.length;e++){var n=i[e];if(e===1&&n==="-"&&i[0]==="-")return i;KW(n)?t+="-"+n.toLowerCase():t+=n}return t.startsWith("ms-")?"-"+t:t}var M3=function(i){return i==null||i===!1||i===""},L3=function(i){var t,e,n=[];for(var s in i){var r=i[s];i.hasOwnProperty(s)&&!M3(r)&&(Array.isArray(r)&&r.isCss||Du(r)?n.push("".concat(eA(s),":"),r,";"):Xh(r)?n.push.apply(n,Zh(Zh(["".concat(s," {")],L3(r),!1),["}"],!1)):n.push("".concat(eA(s),": ").concat((t=s,(e=r)==null||typeof e=="boolean"||e===""?"":typeof e!="number"||e===0||t in bW||t.startsWith("--")?String(e).trim():"".concat(e,"px")),";")))}return n};function Oa(i,t,e,n){if(M3(i))return[];if(xE(i))return[".".concat(i.styledComponentId)];if(Du(i)){if(!Du(r=i)||r.prototype&&r.prototype.isReactComponent||!t)return[i];var s=i(t);return Oa(s,t,e,n)}var r;return i instanceof GW?e?(i.inject(e,n),[i.getName(n)]):[i]:Xh(i)?L3(i):Array.isArray(i)?Array.prototype.concat.apply(Fb,i.map(function(o){return Oa(o,t,e,n)})):[i.toString()]}function V3(i){for(var t=0;t<i.length;t+=1){var e=i[t];if(Du(e)&&!xE(e))return!1}return!0}var YW=T3(Bb),ZW=function(){function i(t,e,n){this.rules=t,this.staticRulesId="",this.isStatic=(n===void 0||n.isStatic)&&V3(t),this.componentId=e,this.baseHash=mu(YW,e),this.baseStyle=n,Ip.registerId(e)}return i.prototype.generateAndInjectStyles=function(t,e,n){var s=this.baseStyle?this.baseStyle.generateAndInjectStyles(t,e,n):"";if(this.isStatic&&!n.hash)if(this.staticRulesId&&e.hasNameForId(this.componentId,this.staticRulesId))s=Al(s,this.staticRulesId);else{var r=xy(Oa(this.rules,t,e,n)),o=Cy(mu(this.baseHash,r)>>>0);if(!e.hasNameForId(this.componentId,o)){var a=n(r,".".concat(o),void 0,this.componentId);e.insertRules(this.componentId,o,a)}s=Al(s,o),this.staticRulesId=o}else{for(var l=mu(this.baseHash,n.hash),c="",h=0;h<this.rules.length;h++){var f=this.rules[h];if(typeof f=="string")c+=f;else if(f){var m=xy(Oa(f,t,e,n));l=mu(l,m+h),c+=m}}if(c){var p=Cy(l>>>0);e.hasNameForId(this.componentId,p)||e.insertRules(this.componentId,p,n(c,".".concat(p),void 0,this.componentId)),s=Al(s,p)}}return s},i}(),kE=ot.createContext(void 0);kE.Consumer;var F0={};function XW(i,t,e){var n=xE(i),s=i,r=!B0(i),o=t.attrs,a=o===void 0?Fb:o,l=t.componentId,c=l===void 0?function(S,O){var P=typeof S!="string"?"sc":GS(S);F0[P]=(F0[P]||0)+1;var N="".concat(P,"-").concat(k3(Bb+P+F0[P]));return O?"".concat(O,"-").concat(N):N}(t.displayName,t.parentComponentId):l,h=t.displayName,f=h===void 0?function(S){return B0(S)?"styled.".concat(S):"Styled(".concat(CW(S),")")}(i):h,m=t.displayName&&t.componentId?"".concat(GS(t.displayName),"-").concat(t.componentId):t.componentId||c,p=n&&s.attrs?s.attrs.concat(a).filter(Boolean):a,v=t.shouldForwardProp;if(n&&s.shouldForwardProp){var _=s.shouldForwardProp;if(t.shouldForwardProp){var E=t.shouldForwardProp;v=function(S,O){return _(S,O)&&E(S,O)}}else v=_}var x=new ZW(e,m,n?s.componentStyle:void 0);function k(S,O){return function(P,N,L){var M=P.attrs,F=P.componentStyle,q=P.defaultProps,K=P.foldedComponentIds,te=P.styledComponentId,ve=P.target,Se=ot.useContext(kE),_e=Sy(),be=P.shouldForwardProp||_e.shouldForwardProp,he=E3(N,Se,q)||Vu,ce=function(fe,Ue,ut){for(var et,ht=wi(wi({},Ue),{className:void 0,theme:ut}),bt=0;bt<fe.length;bt+=1){var zt=Du(et=fe[bt])?et(ht):et;for(var vn in zt)ht[vn]=vn==="className"?Al(ht[vn],zt[vn]):vn==="style"?wi(wi({},ht[vn]),zt[vn]):zt[vn]}return Ue.className&&(ht.className=Al(ht.className,Ue.className)),ht}(M,N,he),le=ce.as||ve,U={};for(var re in ce)ce[re]===void 0||re[0]==="$"||re==="as"||re==="theme"&&ce.theme===he||(re==="forwardedAs"?U.as=ce.forwardedAs:be&&!be(re,le)||(U[re]=ce[re]));var Be=function(fe,Ue){var ut=Sy(),et=fe.generateAndInjectStyles(Ue,ut.styleSheet,ut.stylis);return et}(F,ce),He=Al(K,te);return Be&&(He+=" "+Be),ce.className&&(He+=" "+ce.className),U[B0(le)&&!C3.has(le)?"class":"className"]=He,L&&(U.ref=L),R.createElement(le,U)}(A,S,O)}k.displayName=f;var A=ot.forwardRef(k);return A.attrs=p,A.componentStyle=x,A.displayName=f,A.shouldForwardProp=v,A.foldedComponentIds=n?Al(s.foldedComponentIds,s.styledComponentId):"",A.styledComponentId=m,A.target=n?s.target:i,Object.defineProperty(A,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(S){this._foldedDefaultProps=n?function(O){for(var P=[],N=1;N<arguments.length;N++)P[N-1]=arguments[N];for(var L=0,M=P;L<M.length;L++)Ty(O,M[L],!0);return O}({},s.defaultProps,S):S}}),TE(A,function(){return".".concat(A.styledComponentId)}),r&&I3(A,i,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),A}function tA(i,t){for(var e=[i[0]],n=0,s=t.length;n<s;n+=1)e.push(t[n],i[n+1]);return e}var nA=function(i){return Object.assign(i,{isCss:!0})};function D3(i){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];if(Du(i)||Xh(i))return nA(Oa(tA(Fb,Zh([i],t,!0))));var n=i;return t.length===0&&n.length===1&&typeof n[0]=="string"?Oa(n):nA(Oa(tA(n,t)))}function Ay(i,t,e){if(e===void 0&&(e=Vu),!t)throw Rf(1,t);var n=function(s){for(var r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];return i(t,e,D3.apply(void 0,Zh([s],r,!1)))};return n.attrs=function(s){return Ay(i,t,wi(wi({},e),{attrs:Array.prototype.concat(e.attrs,s).filter(Boolean)}))},n.withConfig=function(s){return Ay(i,t,wi(wi({},e),s))},n}var B3=function(i){return Ay(XW,i)},xt=B3;C3.forEach(function(i){xt[i]=B3(i)});var JW=function(){function i(t,e){this.rules=t,this.componentId=e,this.isStatic=V3(t),Ip.registerId(this.componentId+1)}return i.prototype.createStyles=function(t,e,n,s){var r=s(xy(Oa(this.rules,e,n,s)),""),o=this.componentId+t;n.insertRules(o,o,r)},i.prototype.removeStyles=function(t,e){e.clearRules(this.componentId+t)},i.prototype.renderStyles=function(t,e,n,s){t>2&&Ip.registerId(this.componentId+t),this.removeStyles(t,n),this.createStyles(t,e,n,s)},i}();function $b(i){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];var n=D3.apply(void 0,Zh([i],t,!1)),s="sc-global-".concat(k3(JSON.stringify(n))),r=new JW(n,s),o=function(l){var c=Sy(),h=ot.useContext(kE),f=ot.useRef(c.styleSheet.allocateGSInstance(s)).current;return c.styleSheet.server&&a(f,l,c.styleSheet,h,c.stylis),ot.useLayoutEffect(function(){if(!c.styleSheet.server)return a(f,l,c.styleSheet,h,c.stylis),function(){return r.removeStyles(f,c.styleSheet)}},[f,l,c.styleSheet,h,c.stylis]),null};function a(l,c,h,f,m){if(r.isStatic)r.renderStyles(l,vW,h,m);else{var p=wi(wi({},c),{theme:E3(c,f,o.defaultProps)});r.renderStyles(l,p,h,m)}}return ot.memo(o)}const QW={BASE_URL:"/react-and-bloom/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_BASE:"https://ec-course-api.hexschool.io/v2",VITE_API_PATH:"and-bloom"},{VITE_API_BASE:F3,VITE_API_PATH:$3}=QW,z3=bE({name:"cart",initialState:{cart:[],coupon:null,total:0,final_total:0},reducers:{setCart(i,t){i.cart=t.payload},setTotal(i,t){i.total=t.payload},setFinalTotal(i,t){i.final_total=t.payload},setCoupon(i,t){i.coupon=t.payload}}}),Of=pE("cart/asyncGetCart",async({isShowLoading:i=!0}={},{dispatch:t,requestId:e})=>{var n,s,r,o,a,l;try{i&&t(ct(!0));const c=await Ke.get(`${F3}/api/${$3}/cart`);t(eq((n=c.data.data)==null?void 0:n.carts)),t(tq((s=c.data.data)==null?void 0:s.total)),t(nq((r=c.data.data)==null?void 0:r.final_total)),(o=c.data.data)!=null&&o.carts.length&&t(iq((a=c.data.data)==null?void 0:a.carts[0].coupon))}catch(c){c instanceof $t&&console.log((l=c==null?void 0:c.response)==null?void 0:l.data.message)}finally{t(ct(!1))}}),SE=pE("cart/asyncAddCart",async(i,{dispatch:t,requestId:e})=>{var n,s;try{t(ct(!0));const r=await Ke.post(`${F3}/api/${$3}/cart`,{data:{product_id:i.productId,qty:i.qty||1}});t(bn({text:r==null?void 0:r.data.message,type:"success"})),await t(Of())}catch(r){r instanceof $t&&(console.log((n=r==null?void 0:r.response)==null?void 0:n.data.message),t(bn({text:(s=r==null?void 0:r.response)==null?void 0:s.data.message,type:"danger"})))}finally{t(ct(!1))}}),{setCart:eq,setTotal:tq,setFinalTotal:nq,setCoupon:iq}=z3.actions,j3=i=>i.cart,sq=z3.reducer,rq=Xj({reducer:{toast:_H,loading:wH,cart:sq}}),Vn=()=>C$(),an=R.memo(({type:i="button",children:t,btnStyle:e="btn-secondary",handleClick:n=()=>{},...s})=>y.jsx("button",{type:i,className:`btn rounded-pill px-3 ${e}`,onClick:n,...s,children:t})),oq=R.forwardRef(({children:i,nextFn:t},e)=>{const n=R.useRef(null),s=R.useRef(null);return R.useEffect(()=>{n.current&&(s.current=new Er(n.current))},[]),R.useImperativeHandle(e,()=>({show:()=>{var r;(r=s.current)==null||r.show()},hide:()=>{var r;(r=s.current)==null||r.hide()}})),y.jsx("div",{className:"modal fade",tabIndex:-1,ref:n,children:y.jsx("div",{className:"modal-dialog",children:y.jsxs("div",{className:"modal-content",children:[y.jsxs("div",{className:"modal-header",children:[y.jsx("h2",{className:"modal-title fs-5",children:"注意"}),y.jsx("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),y.jsx("div",{className:"modal-body",children:i}),y.jsxs("div",{className:"modal-footer",children:[y.jsx(an,{btnStyle:"btn btn-outline-secondary","data-bs-dismiss":"modal",children:"取消"}),y.jsx(an,{btnStyle:"btn btn-secondary",handleClick:t,children:"確認"})]})]})})})}),Nf=R.memo(oq),aq={BASE_URL:"/react-and-bloom/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_BASE:"https://ec-course-api.hexschool.io/v2",VITE_API_PATH:"and-bloom"},{VITE_API_BASE:lq}=aq,cq=xt("nav")`
  height: 70px;
  box-shadow: 0 1px 5px rgba(0,0,0,0.1);
  background-color: rgba(255,255,255,0.5);

  @supports (animation-timeline: scroll()) {
    background-color: rgba(255,255,255,0.1);
    backdrop-filter: blur(10px);
  }
`,mg=xt("span")`
  position: relative;
  padding-top: 1rem;
  padding-bottom: 1rem;

  &::before {
    content: '';
    height: 1px;
    width: 0;
    background-color: black;
    position: absolute;
    bottom: 10px;
    transition: width 0.3s ease-in-out;
  }

  &:hover::before {
    width: 100%;
  }
`,uq=xt("h1")`
  font-family: 'Cormorant Garamond', Didot, 'Bodoni MT', 'Noto Serif Display', 'URW Palladio L', P052, Sylfaen, serif;
  color: black;
  font-size: 32px;
  margin: 0;
`,dq=()=>{const i=Vn(),t=R.useRef(null),e=ec(),n=R.useCallback(()=>{var r;(r=t.current)==null||r.show()},[]),s=async()=>{var r,o,a;try{i(ct(!0)),await Ke.post(`${lq}/logout`),(r=t.current)==null||r.hide(),e("/login")}catch(l){l instanceof $t&&(console.log((o=l==null?void 0:l.response)==null?void 0:o.data.message),i(bn({text:(a=l==null?void 0:l.response)==null?void 0:a.data.message,type:"danger"})))}finally{i(ct(!1))}};return y.jsxs(y.Fragment,{children:[y.jsxs(cq,{className:"fixed-top py-3 px-5 d-flex align-items-center",children:[y.jsx(Cn,{to:"/admin",className:"d-flex align-items-center px-4",children:y.jsxs(uq,{children:["&",y.jsx("em",{children:"Bloom"})]})}),y.jsxs("div",{className:"d-flex align-items-center ms-auto",children:[y.jsx(Cn,{to:"/",className:"btn btn-outline-primary rounded-pill px-4 mx-4 py-1",children:"前台"}),y.jsx(Cn,{to:"/admin/products",className:"px-4",children:y.jsx(mg,{children:"產品管理"})}),y.jsx(Cn,{to:"/admin/orders",className:"px-4",children:y.jsx(mg,{children:"訂單管理"})}),y.jsx(Cn,{to:"/admin/coupons",className:"px-4",children:y.jsx(mg,{children:"優惠券管理"})}),y.jsx(Cn,{to:"/admin/articles",className:"px-4",children:y.jsx(mg,{children:"文章管理"})}),y.jsx("i",{className:"bi bi-box-arrow-right fs-4 cursor-pointer px-4",onClick:n})]})]}),y.jsx(Nf,{ref:t,nextFn:s,children:y.jsx("p",{className:"text-center py-4",children:"您確定登出系統嗎？"})})]})},hq={BASE_URL:"/react-and-bloom/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_BASE:"https://ec-course-api.hexschool.io/v2",VITE_API_PATH:"and-bloom"},{VITE_API_BASE:fq}=hq,mq=$b`
  body {
    padding-top: 70px;
    min-height: 100vh;
    overflow-x: hidden;
  }
`,gq=()=>{const i=ec();return R.useEffect(()=>{(async()=>{var t;try{const e=document.cookie.replace(/(?:(?:^|.*;\s*)andBloom\s*=\s*([^;]*).*$)|^.*$/,"$1");Ke.defaults.headers.common.Authorization=e,await Ke.post(`${fq}/api/user/check`)}catch(e){e instanceof $t&&console.log((t=e==null?void 0:e.response)==null?void 0:t.data.message),i("/login")}})()},[i]),y.jsxs(y.Fragment,{children:[y.jsx(mq,{}),y.jsx(dq,{}),y.jsx("div",{className:"container my-5",children:y.jsx(CO,{})})]})},pq=xt("div")`
  padding-top: max(env(safe-area-inset-top), 1rem);
  padding-bottom: max(env(safe-area-inset-bottom), 1rem);
  padding-left: max(env(safe-area-inset-left), 0.5rem);
  padding-right: max(env(safe-area-inset-right), 0.5rem);

  @media screen and (min-width: 768px) {
    padding-top: max(env(safe-area-inset-top), 1.5rem);
    padding-bottom: max(env(safe-area-inset-bottom), 1.5rem);
    padding-left: max(env(safe-area-inset-left), 1.5rem);
    padding-right: max(env(safe-area-inset-right), 1.5rem);
  }
`,H3=()=>y.jsx("div",{className:"fs-tiny d-block position-absolute bottom-0 w-100",children:y.jsxs(pq,{className:"mx-4 d-flex flex-column flex-md-row justify-content-between",children:[y.jsx("span",{children:"© &Bloom 2025 All Rights Reserved."}),y.jsx("span",{children:"所有資源為練習使用，無商業用途。"})]})}),bq=xt("nav")`
  height: 70px;
  box-shadow: 0 1px 5px rgba(0,0,0,0.1);
  background-color: rgba(255,255,255,0.5);
  transform: translateY(0);
  transition: 0.5s cubic-bezier(.77,0,.18,1) 0.15s;
  padding-top: max(env(safe-area-inset-top), 1rem);
  padding-bottom: max(env(safe-area-inset-bottom), 1rem);
  padding-left: max(env(safe-area-inset-left), 1.5rem);
  padding-right: max(env(safe-area-inset-right), 1.5rem);

  @media (min-width: 1200px) {
    padding-left: max(env(safe-area-inset-left), 3rem);
    padding-right: max(env(safe-area-inset-right), 3rem);
  }

  @supports (animation-timeline: scroll()) {
    background-color: rgba(255,255,255,0.1);
    backdrop-filter: blur(10px);
  }

  &.hidden:not(.active) {
    transform: translateY(-100%);
  }

  &.active {
    background-color: var(--background);
    backdrop-filter: none;
    box-shadow: none;
  }
`,$0=xt("span")`
  position: relative;
  padding-top: 1rem;
  padding-bottom: 1rem;
  font-size: 0.875rem;

  &::before {
    content: '';
    height: 1px;
    width: 0;
    background-color: black;
    position: absolute;
    bottom: 10px;
    transition: width 0.3s ease-in-out;
  }

  &:hover::before {
    width: 100%;
  }
`,wq=xt("h1")`
  font-family: 'Cormorant Garamond', Didot, 'Bodoni MT', 'Noto Serif Display', 'URW Palladio L', P052, Sylfaen, serif;
  color: black;
  font-size: 32px;
  margin: 0;
`,vq=xt("div")`
  position: relative;
  width: 25px;
  height: 17px;
  transform: scale(0.8);
  .line {
    position: absolute;
    width: 100%;
    height: 2px;
    border-radius: 1px;
    background-color: black;
    transition: opacity .3s, width .3s ease, top .3s ease, transform .3s .2s ease;
    &:nth-child(1) {
      top: 0;
    }
    &:nth-child(2) {
      top: 50%;
    }
    &:nth-child(3) {
      top: 100%;
      width: 50%;
    }
  }
  &:hover {
    .line {
      &:nth-child(2) {
        width: 50%;
      }
      &:nth-child(3) {
        width: 100%;
      }
    }
  }
  &.active {
    .line {
      &:nth-child(1) {
        top: 50%;
        transform: rotate(-135deg);
        transform-origin: center;
      }
      &:nth-child(2) {
        opacity: 0;
      }
      &:nth-child(3) {
        top: 50%;
        transform: rotate(135deg);
        transform-origin: center;
        width: 100%;
      }
    }
  }
`,yq=xt("div")`
  position: fixed;
  top: 70px;
  left: 0;
  bottom: 0;
  width: 100%;
  background-color: var(--background);
  transform: translateY(100%);
  transition: transform 0.5s cubic-bezier(.77,0,.18,1) 0.15s;
  trasition-origin: bottom;
  overflow-y: auto;
  z-index: 990;

  a {
    transform: translateY(-200%);
    opacity: 0;
    transition: 0.6s cubic-bezier(.77,0,.18,1) 0.3s;
  }

  &.active {
    transform: translateY(0);

    a {
      transform: translateY(0);
      opacity: 1;
    }
  }
`,iA=()=>{const{cart:i}=_b(j3),t=R.useMemo(()=>i==null?void 0:i.reduce((e,n)=>e+n.qty,0),[i]);return y.jsxs(y.Fragment,{children:[y.jsx(Cn,{to:"/products",className:"my-5 my-lg-0 px-4",children:y.jsx($0,{children:"PLANTS・所有植栽"})}),y.jsx(Cn,{to:"/articles",className:"my-5 my-lg-0 px-4",children:y.jsx($0,{children:"ARTICLES・植物專欄"})}),y.jsx(Cn,{to:"/cart",className:"my-5 my-lg-0 px-4",children:y.jsxs($0,{className:"position-relative",children:["CART・購物車",t?y.jsxs("span",{className:"position-absolute top-25 start-100 translate-middle badge rounded-pill text-bg-info ms-1",children:[t,y.jsx("span",{className:"visually-hidden",children:"unread messages"})]}):""]})}),y.jsx(Cn,{to:"/admin",className:"btn btn-sm btn-outline-primary rounded-pill px-4 mx-4 py-1 my-5 my-lg-0 ",children:"後台"})]})},U3=R.forwardRef((i,t)=>{const e=Vn(),n=qa(),[s,r]=R.useState(!1);R.useEffect(()=>{e(Of({isShowLoading:!1}))},[e]);const o=()=>{r(!s)};return R.useEffect(()=>{r(!1)},[n]),y.jsxs(y.Fragment,{children:[y.jsxs(bq,{ref:t,className:`fixed-top d-flex align-items-center ${s?"active":""}`,children:[y.jsx(Cn,{to:"/",className:"d-flex align-items-center px-lg-4",children:y.jsxs(wq,{children:["&",y.jsx("em",{children:"Bloom"})]})}),y.jsx("div",{className:"d-none d-lg-flex align-items-center ms-auto",children:y.jsx(iA,{})}),y.jsxs(vq,{onClick:o,className:`ms-auto cursor-pointer d-lg-none ${s?"active":""}`,children:[y.jsx("div",{className:"line"}),y.jsx("div",{className:"line"}),y.jsx("div",{className:"line"})]})]}),y.jsx(yq,{className:`d-lg-none d-flex flex-column align-items-center ${s?"active":""}`,children:y.jsx(iA,{})})]})}),_q=$b`
  body {
    padding-top: 70px;
    min-height: 100vh;
    overflow-x: hidden;
    background-color: var(--background);
  }

  .root {
    position: relative;
    display: flex;
    flex-direction: column;
    min-height: calc(100vh - 70px);
    padding-bottom: 73px;
  }

  .page-link {
    background-color: var(--background);
  }
`,Eq=()=>{const i=R.useRef(null),t=R.useRef(0);return R.useEffect(()=>{const e=()=>{var n,s;window.scrollY>t.current&&window.scrollY>100?(n=i.current)==null||n.classList.add("hidden"):(s=i.current)==null||s.classList.remove("hidden"),t.current=window.scrollY};return window.addEventListener("scroll",e),()=>{window.removeEventListener("scroll",e)}},[]),y.jsxs(y.Fragment,{children:[y.jsx(_q,{}),y.jsx(U3,{ref:i}),y.jsx(CO,{}),y.jsx(H3,{})]})},zb=R.memo(({isEnabled:i,labels:t=["停用","啟用"]})=>{const e=i?{icon:"bi-check-circle-fill",class:"text-success"}:{icon:"bi-x-circle-fill",class:"text-danger"};return y.jsxs("small",{className:`d-flex align-items-center ${e.class}`,children:[y.jsx("i",{className:`me-2 bi ${e.icon}`}),t[i?"1":"0"]]})}),Cq=xt("li")`
  margin-top: -1px;
  &:hover {
    background-color: #f8f9fa;
    z-index: 1000;
    border-color: rgba(0, 0, 0, 0.3);
  }
`,xq=R.memo(({showModal:i,order:t,setSelectedOrder:e,showAlertModal:n})=>{const{id:s,user:r,products:o,total:a,is_paid:l,message:c}=t,h=R.useMemo(()=>{var v;if(t!=null&&t.products)return((v=Object.values(t==null?void 0:t.products))==null?void 0:v.reduce((_,E)=>_+(E.total*100-E.final_total*100),0))/100},[t]),f=R.useMemo(()=>{var v,_,E,x;if(!(!(t!=null&&t.products)||!((_=(v=Object.values(t==null?void 0:t.products))==null?void 0:v[0])!=null&&_.coupon)))return(x=(E=Object.values(t==null?void 0:t.products))==null?void 0:E[0])==null?void 0:x.coupon},[t]),m=R.useCallback(v=>{e({...v,discount:h,coupon:f}),i()},[e,h,f,i]),p=R.useCallback(v=>{e(v),n()},[n,e]);return y.jsx(Cq,{className:"card mb-3",children:y.jsx("div",{className:"card-body",children:y.jsxs("div",{className:"row w-100 justify-content-between align-items-center",children:[y.jsx("div",{className:"col-md",children:y.jsx("p",{className:"mb-0 ms-4",children:r.name})}),y.jsxs("div",{className:"col-md-4",children:[y.jsx("span",{className:"badge rounded-pill bg-primary fs-sm mb-1",children:"訂購品項"}),Object.values(o).map((v,_)=>y.jsxs("small",{className:`d-flex py-1 my-1 border-bottom ${_===0&&"border-top"}`,children:[v.product.title," * ",v.qty,y.jsxs("span",{className:"ms-auto",children:["$",v.total]})]},`${s}-${v.id}`)),f?y.jsxs("small",{className:"d-flex pb-1 mb-1 border-bottom",children:[y.jsxs("span",{className:"flex-shrink-0",children:["優惠券折扣",`（${f.title} ${f.percent} 折）`]}),y.jsxs("span",{className:"ms-auto text-danger",children:["-$",h]})]}):"",y.jsxs("small",{className:"fw-bold d-flex pb-1 mb-1 border-bottom",children:["總金額",y.jsxs("span",{className:"ms-auto",children:["$",a]})]})]}),y.jsx("div",{className:"col-md d-flex justify-content-center",children:y.jsx(zb,{isEnabled:l,labels:["未付款","已付款"]})}),y.jsxs("div",{className:"col-md d-flex align-items-center justify-content-end",children:[y.jsx(an,{btnStyle:"btn-sm btn-secondary",handleClick:()=>m(t),children:"編輯"}),y.jsx(an,{btnStyle:"btn-sm btn-outline-primary ms-2",handleClick:()=>p(t),children:"刪除"})]})]})})})});var Mf=i=>i.type==="checkbox",Pl=i=>i instanceof Date,xi=i=>i==null;const W3=i=>typeof i=="object";var In=i=>!xi(i)&&!Array.isArray(i)&&W3(i)&&!Pl(i),Tq=i=>In(i)&&i.target?Mf(i.target)?i.target.checked:i.target.value:i,kq=i=>i.substring(0,i.search(/\.\d+(\.|$)/))||i,Sq=(i,t)=>i.has(kq(t)),Aq=i=>{const t=i.constructor&&i.constructor.prototype;return In(t)&&t.hasOwnProperty("isPrototypeOf")},AE=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function ss(i){let t;const e=Array.isArray(i),n=typeof FileList<"u"?i instanceof FileList:!1;if(i instanceof Date)t=new Date(i);else if(i instanceof Set)t=new Set(i);else if(!(AE&&(i instanceof Blob||n))&&(e||In(i)))if(t=e?[]:{},!e&&!Aq(i))t=i;else for(const s in i)i.hasOwnProperty(s)&&(t[s]=ss(i[s]));else return i;return t}var jb=i=>Array.isArray(i)?i.filter(Boolean):[],Nn=i=>i===void 0,qe=(i,t,e)=>{if(!t||!In(i))return e;const n=jb(t.split(/[,[\].]+?/)).reduce((s,r)=>xi(s)?s:s[r],i);return Nn(n)||n===i?Nn(i[t])?e:i[t]:n},Yr=i=>typeof i=="boolean",PE=i=>/^\w*$/.test(i),q3=i=>jb(i.replace(/["|']|\]/g,"").split(/\.|\[/)),rn=(i,t,e)=>{let n=-1;const s=PE(t)?[t]:q3(t),r=s.length,o=r-1;for(;++n<r;){const a=s[n];let l=e;if(n!==o){const c=i[a];l=In(c)||Array.isArray(c)?c:isNaN(+s[n+1])?{}:[]}if(a==="__proto__"||a==="constructor"||a==="prototype")return;i[a]=l,i=i[a]}return i};const sA={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},mr={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Co={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},Pq=ot.createContext(null),Iq=()=>ot.useContext(Pq);var Rq=(i,t,e,n=!0)=>{const s={defaultValues:t._defaultValues};for(const r in i)Object.defineProperty(s,r,{get:()=>{const o=r;return t._proxyFormState[o]!==mr.all&&(t._proxyFormState[o]=!n||mr.all),i[o]}});return s},zi=i=>In(i)&&!Object.keys(i).length,Oq=(i,t,e,n)=>{e(i);const{name:s,...r}=i;return zi(r)||Object.keys(r).length>=Object.keys(t).length||Object.keys(r).find(o=>t[o]===mr.all)},kh=i=>Array.isArray(i)?i:[i],Nq=(i,t,e)=>!i||!t||i===t||kh(i).some(n=>n&&(e?n===t:n.startsWith(t)||t.startsWith(n)));function G3(i){const t=ot.useRef(i);t.current=i,ot.useEffect(()=>{const e=!i.disabled&&t.current.subject&&t.current.subject.subscribe({next:t.current.next});return()=>{e&&e.unsubscribe()}},[i.disabled])}var to=i=>typeof i=="string",K3=(i,t,e,n,s)=>to(i)?(n&&t.watch.add(i),qe(e,i,s)):Array.isArray(i)?i.map(r=>(n&&t.watch.add(r),qe(e,r))):(n&&(t.watchAll=!0),e);function IE(i){const t=Iq(),{control:e=t.control,name:n,defaultValue:s,disabled:r,exact:o}=i||{},a=ot.useRef(n);a.current=n,G3({disabled:r,subject:e._subjects.values,next:h=>{Nq(a.current,h.name,o)&&c(ss(K3(a.current,e._names,h.values||e._formValues,!1,s)))}});const[l,c]=ot.useState(e._getWatch(n,s));return ot.useEffect(()=>e._removeUnmounted()),l}var Mq=(i,t,e,n,s)=>t?{...e[i],types:{...e[i]&&e[i].types?e[i].types:{},[n]:s||!0}}:{},rA=i=>({isOnSubmit:!i||i===mr.onSubmit,isOnBlur:i===mr.onBlur,isOnChange:i===mr.onChange,isOnAll:i===mr.all,isOnTouch:i===mr.onTouched}),oA=(i,t,e)=>!e&&(t.watchAll||t.watch.has(i)||[...t.watch].some(n=>i.startsWith(n)&&/^\.\w+/.test(i.slice(n.length))));const Sh=(i,t,e,n)=>{for(const s of e||Object.keys(i)){const r=qe(i,s);if(r){const{_f:o,...a}=r;if(o){if(o.refs&&o.refs[0]&&t(o.refs[0],s)&&!n)return!0;if(o.ref&&t(o.ref,o.name)&&!n)return!0;if(Sh(a,t))break}else if(In(a)&&Sh(a,t))break}}};var Lq=(i,t,e)=>{const n=kh(qe(i,e));return rn(n,"root",t[e]),rn(i,e,n),i},RE=i=>i.type==="file",Qr=i=>typeof i=="function",Rp=i=>{if(!AE)return!1;const t=i?i.ownerDocument:0;return i instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},tp=i=>to(i),OE=i=>i.type==="radio",Op=i=>i instanceof RegExp;const aA={value:!1,isValid:!1},lA={value:!0,isValid:!0};var Y3=i=>{if(Array.isArray(i)){if(i.length>1){const t=i.filter(e=>e&&e.checked&&!e.disabled).map(e=>e.value);return{value:t,isValid:!!t.length}}return i[0].checked&&!i[0].disabled?i[0].attributes&&!Nn(i[0].attributes.value)?Nn(i[0].value)||i[0].value===""?lA:{value:i[0].value,isValid:!0}:lA:aA}return aA};const cA={isValid:!1,value:null};var Z3=i=>Array.isArray(i)?i.reduce((t,e)=>e&&e.checked&&!e.disabled?{isValid:!0,value:e.value}:t,cA):cA;function uA(i,t,e="validate"){if(tp(i)||Array.isArray(i)&&i.every(tp)||Yr(i)&&!i)return{type:e,message:tp(i)?i:"",ref:t}}var Gc=i=>In(i)&&!Op(i)?i:{value:i,message:""},dA=async(i,t,e,n,s,r)=>{const{ref:o,refs:a,required:l,maxLength:c,minLength:h,min:f,max:m,pattern:p,validate:v,name:_,valueAsNumber:E,mount:x}=i._f,k=qe(e,_);if(!x||t.has(_))return{};const A=a?a[0]:o,S=K=>{s&&A.reportValidity&&(A.setCustomValidity(Yr(K)?"":K||""),A.reportValidity())},O={},P=OE(o),N=Mf(o),L=P||N,M=(E||RE(o))&&Nn(o.value)&&Nn(k)||Rp(o)&&o.value===""||k===""||Array.isArray(k)&&!k.length,F=Mq.bind(null,_,n,O),q=(K,te,ve,Se=Co.maxLength,_e=Co.minLength)=>{const be=K?te:ve;O[_]={type:K?Se:_e,message:be,ref:o,...F(K?Se:_e,be)}};if(r?!Array.isArray(k)||!k.length:l&&(!L&&(M||xi(k))||Yr(k)&&!k||N&&!Y3(a).isValid||P&&!Z3(a).isValid)){const{value:K,message:te}=tp(l)?{value:!!l,message:l}:Gc(l);if(K&&(O[_]={type:Co.required,message:te,ref:A,...F(Co.required,te)},!n))return S(te),O}if(!M&&(!xi(f)||!xi(m))){let K,te;const ve=Gc(m),Se=Gc(f);if(!xi(k)&&!isNaN(k)){const _e=o.valueAsNumber||k&&+k;xi(ve.value)||(K=_e>ve.value),xi(Se.value)||(te=_e<Se.value)}else{const _e=o.valueAsDate||new Date(k),be=le=>new Date(new Date().toDateString()+" "+le),he=o.type=="time",ce=o.type=="week";to(ve.value)&&k&&(K=he?be(k)>be(ve.value):ce?k>ve.value:_e>new Date(ve.value)),to(Se.value)&&k&&(te=he?be(k)<be(Se.value):ce?k<Se.value:_e<new Date(Se.value))}if((K||te)&&(q(!!K,ve.message,Se.message,Co.max,Co.min),!n))return S(O[_].message),O}if((c||h)&&!M&&(to(k)||r&&Array.isArray(k))){const K=Gc(c),te=Gc(h),ve=!xi(K.value)&&k.length>+K.value,Se=!xi(te.value)&&k.length<+te.value;if((ve||Se)&&(q(ve,K.message,te.message),!n))return S(O[_].message),O}if(p&&!M&&to(k)){const{value:K,message:te}=Gc(p);if(Op(K)&&!k.match(K)&&(O[_]={type:Co.pattern,message:te,ref:o,...F(Co.pattern,te)},!n))return S(te),O}if(v){if(Qr(v)){const K=await v(k,e),te=uA(K,A);if(te&&(O[_]={...te,...F(Co.validate,te.message)},!n))return S(te.message),O}else if(In(v)){let K={};for(const te in v){if(!zi(K)&&!n)break;const ve=uA(await v[te](k,e),A,te);ve&&(K={...ve,...F(te,ve.message)},S(ve.message),n&&(O[_]=K))}if(!zi(K)&&(O[_]={ref:A,...K},!n))return O}}return S(!0),O};function Vq(i,t){const e=t.slice(0,-1).length;let n=0;for(;n<e;)i=Nn(i)?n++:i[t[n++]];return i}function Dq(i){for(const t in i)if(i.hasOwnProperty(t)&&!Nn(i[t]))return!1;return!0}function zn(i,t){const e=Array.isArray(t)?t:PE(t)?[t]:q3(t),n=e.length===1?i:Vq(i,e),s=e.length-1,r=e[s];return n&&delete n[r],s!==0&&(In(n)&&zi(n)||Array.isArray(n)&&Dq(n))&&zn(i,e.slice(0,-1)),i}var z0=()=>{let i=[];return{get observers(){return i},next:s=>{for(const r of i)r.next&&r.next(s)},subscribe:s=>(i.push(s),{unsubscribe:()=>{i=i.filter(r=>r!==s)}}),unsubscribe:()=>{i=[]}}},Py=i=>xi(i)||!W3(i);function Aa(i,t){if(Py(i)||Py(t))return i===t;if(Pl(i)&&Pl(t))return i.getTime()===t.getTime();const e=Object.keys(i),n=Object.keys(t);if(e.length!==n.length)return!1;for(const s of e){const r=i[s];if(!n.includes(s))return!1;if(s!=="ref"){const o=t[s];if(Pl(r)&&Pl(o)||In(r)&&In(o)||Array.isArray(r)&&Array.isArray(o)?!Aa(r,o):r!==o)return!1}}return!0}var X3=i=>i.type==="select-multiple",Bq=i=>OE(i)||Mf(i),j0=i=>Rp(i)&&i.isConnected,J3=i=>{for(const t in i)if(Qr(i[t]))return!0;return!1};function Np(i,t={}){const e=Array.isArray(i);if(In(i)||e)for(const n in i)Array.isArray(i[n])||In(i[n])&&!J3(i[n])?(t[n]=Array.isArray(i[n])?[]:{},Np(i[n],t[n])):xi(i[n])||(t[n]=!0);return t}function Q3(i,t,e){const n=Array.isArray(i);if(In(i)||n)for(const s in i)Array.isArray(i[s])||In(i[s])&&!J3(i[s])?Nn(t)||Py(e[s])?e[s]=Array.isArray(i[s])?Np(i[s],[]):{...Np(i[s])}:Q3(i[s],xi(t)?{}:t[s],e[s]):e[s]=!Aa(i[s],t[s]);return e}var Kd=(i,t)=>Q3(i,t,Np(t)),eN=(i,{valueAsNumber:t,valueAsDate:e,setValueAs:n})=>Nn(i)?i:t?i===""?NaN:i&&+i:e&&to(i)?new Date(i):n?n(i):i;function H0(i){const t=i.ref;return RE(t)?t.files:OE(t)?Z3(i.refs).value:X3(t)?[...t.selectedOptions].map(({value:e})=>e):Mf(t)?Y3(i.refs).value:eN(Nn(t.value)?i.ref.value:t.value,i)}var Fq=(i,t,e,n)=>{const s={};for(const r of i){const o=qe(t,r);o&&rn(s,r,o._f)}return{criteriaMode:e,names:[...i],fields:s,shouldUseNativeValidation:n}},Yd=i=>Nn(i)?i:Op(i)?i.source:In(i)?Op(i.value)?i.value.source:i.value:i;const hA="AsyncFunction";var $q=i=>!!i&&!!i.validate&&!!(Qr(i.validate)&&i.validate.constructor.name===hA||In(i.validate)&&Object.values(i.validate).find(t=>t.constructor.name===hA)),zq=i=>i.mount&&(i.required||i.min||i.max||i.maxLength||i.minLength||i.pattern||i.validate);function fA(i,t,e){const n=qe(i,e);if(n||PE(e))return{error:n,name:e};const s=e.split(".");for(;s.length;){const r=s.join("."),o=qe(t,r),a=qe(i,r);if(o&&!Array.isArray(o)&&e!==r)return{name:e};if(a&&a.type)return{name:r,error:a};s.pop()}return{name:e}}var jq=(i,t,e,n,s)=>s.isOnAll?!1:!e&&s.isOnTouch?!(t||i):(e?n.isOnBlur:s.isOnBlur)?!i:(e?n.isOnChange:s.isOnChange)?i:!0,Hq=(i,t)=>!jb(qe(i,t)).length&&zn(i,t);const Uq={mode:mr.onSubmit,reValidateMode:mr.onChange,shouldFocusError:!0};function Wq(i={}){let t={...Uq,...i},e={submitCount:0,isDirty:!1,isLoading:Qr(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},n={},s=In(t.defaultValues)||In(t.values)?ss(t.defaultValues||t.values)||{}:{},r=t.shouldUnregister?{}:ss(s),o={action:!1,mount:!1,watch:!1},a={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},l,c=0;const h={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},f={values:z0(),array:z0(),state:z0()},m=rA(t.mode),p=rA(t.reValidateMode),v=t.criteriaMode===mr.all,_=z=>X=>{clearTimeout(c),c=setTimeout(z,X)},E=async z=>{if(!t.disabled&&(h.isValid||z)){const X=t.resolver?zi((await L()).errors):await F(n,!0);X!==e.isValid&&f.state.next({isValid:X})}},x=(z,X)=>{!t.disabled&&(h.isValidating||h.validatingFields)&&((z||Array.from(a.mount)).forEach(se=>{se&&(X?rn(e.validatingFields,se,X):zn(e.validatingFields,se))}),f.state.next({validatingFields:e.validatingFields,isValidating:!zi(e.validatingFields)}))},k=(z,X=[],se,xe,Ee=!0,ue=!0)=>{if(xe&&se&&!t.disabled){if(o.action=!0,ue&&Array.isArray(qe(n,z))){const Me=se(qe(n,z),xe.argA,xe.argB);Ee&&rn(n,z,Me)}if(ue&&Array.isArray(qe(e.errors,z))){const Me=se(qe(e.errors,z),xe.argA,xe.argB);Ee&&rn(e.errors,z,Me),Hq(e.errors,z)}if(h.touchedFields&&ue&&Array.isArray(qe(e.touchedFields,z))){const Me=se(qe(e.touchedFields,z),xe.argA,xe.argB);Ee&&rn(e.touchedFields,z,Me)}h.dirtyFields&&(e.dirtyFields=Kd(s,r)),f.state.next({name:z,isDirty:K(z,X),dirtyFields:e.dirtyFields,errors:e.errors,isValid:e.isValid})}else rn(r,z,X)},A=(z,X)=>{rn(e.errors,z,X),f.state.next({errors:e.errors})},S=z=>{e.errors=z,f.state.next({errors:e.errors,isValid:!1})},O=(z,X,se,xe)=>{const Ee=qe(n,z);if(Ee){const ue=qe(r,z,Nn(se)?qe(s,z):se);Nn(ue)||xe&&xe.defaultChecked||X?rn(r,z,X?ue:H0(Ee._f)):Se(z,ue),o.mount&&E()}},P=(z,X,se,xe,Ee)=>{let ue=!1,Me=!1;const Qe={name:z};if(!t.disabled){const Ne=!!(qe(n,z)&&qe(n,z)._f&&qe(n,z)._f.disabled);if(!se||xe){h.isDirty&&(Me=e.isDirty,e.isDirty=Qe.isDirty=K(),ue=Me!==Qe.isDirty);const Le=Ne||Aa(qe(s,z),X);Me=!!(!Ne&&qe(e.dirtyFields,z)),Le||Ne?zn(e.dirtyFields,z):rn(e.dirtyFields,z,!0),Qe.dirtyFields=e.dirtyFields,ue=ue||h.dirtyFields&&Me!==!Le}if(se){const Le=qe(e.touchedFields,z);Le||(rn(e.touchedFields,z,se),Qe.touchedFields=e.touchedFields,ue=ue||h.touchedFields&&Le!==se)}ue&&Ee&&f.state.next(Qe)}return ue?Qe:{}},N=(z,X,se,xe)=>{const Ee=qe(e.errors,z),ue=h.isValid&&Yr(X)&&e.isValid!==X;if(t.delayError&&se?(l=_(()=>A(z,se)),l(t.delayError)):(clearTimeout(c),l=null,se?rn(e.errors,z,se):zn(e.errors,z)),(se?!Aa(Ee,se):Ee)||!zi(xe)||ue){const Me={...xe,...ue&&Yr(X)?{isValid:X}:{},errors:e.errors,name:z};e={...e,...Me},f.state.next(Me)}},L=async z=>{x(z,!0);const X=await t.resolver(r,t.context,Fq(z||a.mount,n,t.criteriaMode,t.shouldUseNativeValidation));return x(z),X},M=async z=>{const{errors:X}=await L(z);if(z)for(const se of z){const xe=qe(X,se);xe?rn(e.errors,se,xe):zn(e.errors,se)}else e.errors=X;return X},F=async(z,X,se={valid:!0})=>{for(const xe in z){const Ee=z[xe];if(Ee){const{_f:ue,...Me}=Ee;if(ue){const Qe=a.array.has(ue.name),Ne=Ee._f&&$q(Ee._f);Ne&&h.validatingFields&&x([xe],!0);const Le=await dA(Ee,a.disabled,r,v,t.shouldUseNativeValidation&&!X,Qe);if(Ne&&h.validatingFields&&x([xe]),Le[ue.name]&&(se.valid=!1,X))break;!X&&(qe(Le,ue.name)?Qe?Lq(e.errors,Le,ue.name):rn(e.errors,ue.name,Le[ue.name]):zn(e.errors,ue.name))}!zi(Me)&&await F(Me,X,se)}}return se.valid},q=()=>{for(const z of a.unMount){const X=qe(n,z);X&&(X._f.refs?X._f.refs.every(se=>!j0(se)):!j0(X._f.ref))&&Ue(z)}a.unMount=new Set},K=(z,X)=>!t.disabled&&(z&&X&&rn(r,z,X),!Aa(U(),s)),te=(z,X,se)=>K3(z,a,{...o.mount?r:Nn(X)?s:to(z)?{[z]:X}:X},se,X),ve=z=>jb(qe(o.mount?r:s,z,t.shouldUnregister?qe(s,z,[]):[])),Se=(z,X,se={})=>{const xe=qe(n,z);let Ee=X;if(xe){const ue=xe._f;ue&&(!ue.disabled&&rn(r,z,eN(X,ue)),Ee=Rp(ue.ref)&&xi(X)?"":X,X3(ue.ref)?[...ue.ref.options].forEach(Me=>Me.selected=Ee.includes(Me.value)):ue.refs?Mf(ue.ref)?ue.refs.length>1?ue.refs.forEach(Me=>(!Me.defaultChecked||!Me.disabled)&&(Me.checked=Array.isArray(Ee)?!!Ee.find(Qe=>Qe===Me.value):Ee===Me.value)):ue.refs[0]&&(ue.refs[0].checked=!!Ee):ue.refs.forEach(Me=>Me.checked=Me.value===Ee):RE(ue.ref)?ue.ref.value="":(ue.ref.value=Ee,ue.ref.type||f.values.next({name:z,values:{...r}})))}(se.shouldDirty||se.shouldTouch)&&P(z,Ee,se.shouldTouch,se.shouldDirty,!0),se.shouldValidate&&le(z)},_e=(z,X,se)=>{for(const xe in X){const Ee=X[xe],ue=`${z}.${xe}`,Me=qe(n,ue);(a.array.has(z)||In(Ee)||Me&&!Me._f)&&!Pl(Ee)?_e(ue,Ee,se):Se(ue,Ee,se)}},be=(z,X,se={})=>{const xe=qe(n,z),Ee=a.array.has(z),ue=ss(X);rn(r,z,ue),Ee?(f.array.next({name:z,values:{...r}}),(h.isDirty||h.dirtyFields)&&se.shouldDirty&&f.state.next({name:z,dirtyFields:Kd(s,r),isDirty:K(z,ue)})):xe&&!xe._f&&!xi(ue)?_e(z,ue,se):Se(z,ue,se),oA(z,a)&&f.state.next({...e}),f.values.next({name:o.mount?z:void 0,values:{...r}})},he=async z=>{o.mount=!0;const X=z.target;let se=X.name,xe=!0;const Ee=qe(n,se),ue=()=>X.type?H0(Ee._f):Tq(z),Me=Qe=>{xe=Number.isNaN(Qe)||Pl(Qe)&&isNaN(Qe.getTime())||Aa(Qe,qe(r,se,Qe))};if(Ee){let Qe,Ne;const Le=ue(),je=z.type===sA.BLUR||z.type===sA.FOCUS_OUT,Et=!zq(Ee._f)&&!t.resolver&&!qe(e.errors,se)&&!Ee._f.deps||jq(je,qe(e.touchedFields,se),e.isSubmitted,p,m),cn=oA(se,a,je);rn(r,se,Le),je?(Ee._f.onBlur&&Ee._f.onBlur(z),l&&l(0)):Ee._f.onChange&&Ee._f.onChange(z);const It=P(se,Le,je,!1),yt=!zi(It)||cn;if(!je&&f.values.next({name:se,type:z.type,values:{...r}}),Et)return h.isValid&&(t.mode==="onBlur"&&je?E():je||E()),yt&&f.state.next({name:se,...cn?{}:It});if(!je&&cn&&f.state.next({...e}),t.resolver){const{errors:Je}=await L([se]);if(Me(Le),xe){const Sn=fA(e.errors,n,se),Qi=fA(Je,n,Sn.name||se);Qe=Qi.error,se=Qi.name,Ne=zi(Je)}}else x([se],!0),Qe=(await dA(Ee,a.disabled,r,v,t.shouldUseNativeValidation))[se],x([se]),Me(Le),xe&&(Qe?Ne=!1:h.isValid&&(Ne=await F(n,!0)));xe&&(Ee._f.deps&&le(Ee._f.deps),N(se,Ne,Qe,It))}},ce=(z,X)=>{if(qe(e.errors,X)&&z.focus)return z.focus(),1},le=async(z,X={})=>{let se,xe;const Ee=kh(z);if(t.resolver){const ue=await M(Nn(z)?z:Ee);se=zi(ue),xe=z?!Ee.some(Me=>qe(ue,Me)):se}else z?(xe=(await Promise.all(Ee.map(async ue=>{const Me=qe(n,ue);return await F(Me&&Me._f?{[ue]:Me}:Me)}))).every(Boolean),!(!xe&&!e.isValid)&&E()):xe=se=await F(n);return f.state.next({...!to(z)||h.isValid&&se!==e.isValid?{}:{name:z},...t.resolver||!z?{isValid:se}:{},errors:e.errors}),X.shouldFocus&&!xe&&Sh(n,ce,z?Ee:a.mount),xe},U=z=>{const X={...o.mount?r:s};return Nn(z)?X:to(z)?qe(X,z):z.map(se=>qe(X,se))},re=(z,X)=>({invalid:!!qe((X||e).errors,z),isDirty:!!qe((X||e).dirtyFields,z),error:qe((X||e).errors,z),isValidating:!!qe(e.validatingFields,z),isTouched:!!qe((X||e).touchedFields,z)}),Be=z=>{z&&kh(z).forEach(X=>zn(e.errors,X)),f.state.next({errors:z?e.errors:{}})},He=(z,X,se)=>{const xe=(qe(n,z,{_f:{}})._f||{}).ref,Ee=qe(e.errors,z)||{},{ref:ue,message:Me,type:Qe,...Ne}=Ee;rn(e.errors,z,{...Ne,...X,ref:xe}),f.state.next({name:z,errors:e.errors,isValid:!1}),se&&se.shouldFocus&&xe&&xe.focus&&xe.focus()},fe=(z,X)=>Qr(z)?f.values.subscribe({next:se=>z(te(void 0,X),se)}):te(z,X,!0),Ue=(z,X={})=>{for(const se of z?kh(z):a.mount)a.mount.delete(se),a.array.delete(se),X.keepValue||(zn(n,se),zn(r,se)),!X.keepError&&zn(e.errors,se),!X.keepDirty&&zn(e.dirtyFields,se),!X.keepTouched&&zn(e.touchedFields,se),!X.keepIsValidating&&zn(e.validatingFields,se),!t.shouldUnregister&&!X.keepDefaultValue&&zn(s,se);f.values.next({values:{...r}}),f.state.next({...e,...X.keepDirty?{isDirty:K()}:{}}),!X.keepIsValid&&E()},ut=({disabled:z,name:X,field:se,fields:xe})=>{(Yr(z)&&o.mount||z||a.disabled.has(X))&&(z?a.disabled.add(X):a.disabled.delete(X),P(X,H0(se?se._f:qe(xe,X)._f),!1,!1,!0))},et=(z,X={})=>{let se=qe(n,z);const xe=Yr(X.disabled)||Yr(t.disabled);return rn(n,z,{...se||{},_f:{...se&&se._f?se._f:{ref:{name:z}},name:z,mount:!0,...X}}),a.mount.add(z),se?ut({field:se,disabled:Yr(X.disabled)?X.disabled:t.disabled,name:z}):O(z,!0,X.value),{...xe?{disabled:X.disabled||t.disabled}:{},...t.progressive?{required:!!X.required,min:Yd(X.min),max:Yd(X.max),minLength:Yd(X.minLength),maxLength:Yd(X.maxLength),pattern:Yd(X.pattern)}:{},name:z,onChange:he,onBlur:he,ref:Ee=>{if(Ee){et(z,X),se=qe(n,z);const ue=Nn(Ee.value)&&Ee.querySelectorAll&&Ee.querySelectorAll("input,select,textarea")[0]||Ee,Me=Bq(ue),Qe=se._f.refs||[];if(Me?Qe.find(Ne=>Ne===ue):ue===se._f.ref)return;rn(n,z,{_f:{...se._f,...Me?{refs:[...Qe.filter(j0),ue,...Array.isArray(qe(s,z))?[{}]:[]],ref:{type:ue.type,name:z}}:{ref:ue}}}),O(z,!1,void 0,ue)}else se=qe(n,z,{}),se._f&&(se._f.mount=!1),(t.shouldUnregister||X.shouldUnregister)&&!(Sq(a.array,z)&&o.action)&&a.unMount.add(z)}}},ht=()=>t.shouldFocusError&&Sh(n,ce,a.mount),bt=z=>{Yr(z)&&(f.state.next({disabled:z}),Sh(n,(X,se)=>{const xe=qe(n,se);xe&&(X.disabled=xe._f.disabled||z,Array.isArray(xe._f.refs)&&xe._f.refs.forEach(Ee=>{Ee.disabled=xe._f.disabled||z}))},0,!1))},zt=(z,X)=>async se=>{let xe;se&&(se.preventDefault&&se.preventDefault(),se.persist&&se.persist());let Ee=ss(r);if(a.disabled.size)for(const ue of a.disabled)rn(Ee,ue,void 0);if(f.state.next({isSubmitting:!0}),t.resolver){const{errors:ue,values:Me}=await L();e.errors=ue,Ee=Me}else await F(n);if(zn(e.errors,"root"),zi(e.errors)){f.state.next({errors:{}});try{await z(Ee,se)}catch(ue){xe=ue}}else X&&await X({...e.errors},se),ht(),setTimeout(ht);if(f.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:zi(e.errors)&&!xe,submitCount:e.submitCount+1,errors:e.errors}),xe)throw xe},vn=(z,X={})=>{qe(n,z)&&(Nn(X.defaultValue)?be(z,ss(qe(s,z))):(be(z,X.defaultValue),rn(s,z,ss(X.defaultValue))),X.keepTouched||zn(e.touchedFields,z),X.keepDirty||(zn(e.dirtyFields,z),e.isDirty=X.defaultValue?K(z,ss(qe(s,z))):K()),X.keepError||(zn(e.errors,z),h.isValid&&E()),f.state.next({...e}))},Dn=(z,X={})=>{const se=z?ss(z):s,xe=ss(se),Ee=zi(z),ue=Ee?s:xe;if(X.keepDefaultValues||(s=se),!X.keepValues){if(X.keepDirtyValues){const Me=new Set([...a.mount,...Object.keys(Kd(s,r))]);for(const Qe of Array.from(Me))qe(e.dirtyFields,Qe)?rn(ue,Qe,qe(r,Qe)):be(Qe,qe(ue,Qe))}else{if(AE&&Nn(z))for(const Me of a.mount){const Qe=qe(n,Me);if(Qe&&Qe._f){const Ne=Array.isArray(Qe._f.refs)?Qe._f.refs[0]:Qe._f.ref;if(Rp(Ne)){const Le=Ne.closest("form");if(Le){Le.reset();break}}}}n={}}r=t.shouldUnregister?X.keepDefaultValues?ss(s):{}:ss(ue),f.array.next({values:{...ue}}),f.values.next({values:{...ue}})}a={mount:X.keepDirtyValues?a.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!h.isValid||!!X.keepIsValid||!!X.keepDirtyValues,o.watch=!!t.shouldUnregister,f.state.next({submitCount:X.keepSubmitCount?e.submitCount:0,isDirty:Ee?!1:X.keepDirty?e.isDirty:!!(X.keepDefaultValues&&!Aa(z,s)),isSubmitted:X.keepIsSubmitted?e.isSubmitted:!1,dirtyFields:Ee?{}:X.keepDirtyValues?X.keepDefaultValues&&r?Kd(s,r):e.dirtyFields:X.keepDefaultValues&&z?Kd(s,z):X.keepDirty?e.dirtyFields:{},touchedFields:X.keepTouched?e.touchedFields:{},errors:X.keepErrors?e.errors:{},isSubmitSuccessful:X.keepIsSubmitSuccessful?e.isSubmitSuccessful:!1,isSubmitting:!1})},kn=(z,X)=>Dn(Qr(z)?z(r):z,X);return{control:{register:et,unregister:Ue,getFieldState:re,handleSubmit:zt,setError:He,_executeSchema:L,_getWatch:te,_getDirty:K,_updateValid:E,_removeUnmounted:q,_updateFieldArray:k,_updateDisabledField:ut,_getFieldArray:ve,_reset:Dn,_resetDefaultValues:()=>Qr(t.defaultValues)&&t.defaultValues().then(z=>{kn(z,t.resetOptions),f.state.next({isLoading:!1})}),_updateFormState:z=>{e={...e,...z}},_disableForm:bt,_subjects:f,_proxyFormState:h,_setErrors:S,get _fields(){return n},get _formValues(){return r},get _state(){return o},set _state(z){o=z},get _defaultValues(){return s},get _names(){return a},set _names(z){a=z},get _formState(){return e},set _formState(z){e=z},get _options(){return t},set _options(z){t={...t,...z}}},trigger:le,register:et,handleSubmit:zt,watch:fe,setValue:be,getValues:U,reset:kn,resetField:vn,clearErrors:Be,unregister:Ue,setError:He,setFocus:(z,X={})=>{const se=qe(n,z),xe=se&&se._f;if(xe){const Ee=xe.refs?xe.refs[0]:xe.ref;Ee.focus&&(Ee.focus(),X.shouldSelect&&Qr(Ee.select)&&Ee.select())}},getFieldState:re}}function Lf(i={}){const t=ot.useRef(void 0),e=ot.useRef(void 0),[n,s]=ot.useState({isDirty:!1,isValidating:!1,isLoading:Qr(i.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:i.errors||{},disabled:i.disabled||!1,defaultValues:Qr(i.defaultValues)?void 0:i.defaultValues});t.current||(t.current={...Wq(i),formState:n});const r=t.current.control;return r._options=i,G3({subject:r._subjects.state,next:o=>{Oq(o,r._proxyFormState,r._updateFormState)&&s({...r._formState})}}),ot.useEffect(()=>r._disableForm(i.disabled),[r,i.disabled]),ot.useEffect(()=>{if(r._proxyFormState.isDirty){const o=r._getDirty();o!==n.isDirty&&r._subjects.state.next({isDirty:o})}},[r,n.isDirty]),ot.useEffect(()=>{i.values&&!Aa(i.values,e.current)?(r._reset(i.values,r._options.resetOptions),e.current=i.values,s(o=>({...o}))):r._resetDefaultValues()},[i.values,r]),ot.useEffect(()=>{i.errors&&r._setErrors(i.errors)},[i.errors,r]),ot.useEffect(()=>{r._state.mount||(r._updateValid(),r._state.mount=!0),r._state.watch&&(r._state.watch=!1,r._subjects.state.next({...r._formState})),r._removeUnmounted()}),ot.useEffect(()=>{i.shouldUnregister&&r._subjects.values.next({values:r._getWatch()})},[i.shouldUnregister,r]),t.current.formState=Rq(n,r),t.current}const gr=R.memo(({id:i,label:t,children:e,isRequired:n=!1,errors:s})=>{const r=i.includes(".")?i.split(".").reduce((o,a)=>o==null?void 0:o[a],s):s==null?void 0:s[i];return y.jsxs(y.Fragment,{children:[y.jsxs("label",{htmlFor:i,className:"form-label d-block mb-1",children:[t,n&&y.jsx("span",{className:"text-danger ms-1",children:"*"})]}),e,r&&y.jsx("small",{className:"text-danger",children:String(r==null?void 0:r.message)})]})}),Gi=R.memo(({id:i,label:t,type:e="text",placeholder:n="請輸入內容",register:s,rules:r,errors:o})=>{const a=i.includes(".")?i.split(".").reduce((l,c)=>l==null?void 0:l[c],o):o==null?void 0:o[i];return y.jsx(y.Fragment,{children:y.jsx(gr,{id:i,label:t,isRequired:!!r,errors:o,children:y.jsx("input",{id:i,type:e,placeholder:n,className:`form-control ${a&&"is-invalid"}`,...s(i,r)})})})}),gu=R.memo(({id:i,label:t,rows:e=3,placeholder:n="請輸入內容",register:s,rules:r,errors:o})=>y.jsx(y.Fragment,{children:y.jsx(gr,{id:i,label:t,isRequired:!!r,errors:o,children:y.jsx("textarea",{rows:e,id:i,placeholder:n,className:`form-control ${o[i]&&"is-invalid"}`,...s(i,r)})})})),qq={BASE_URL:"/react-and-bloom/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_BASE:"https://ec-course-api.hexschool.io/v2",VITE_API_PATH:"and-bloom"},{VITE_API_BASE:Gq,VITE_API_PATH:Kq}=qq,mA={create_at:"",id:"",is_paid:!1,message:"",products:{},user:{address:"",email:"",name:"",tel:""},num:0,total:0,remark:""},Yq=R.forwardRef(({selectedOrder:i,getOrders:t},e)=>{const n=Vn(),s=R.useRef(null),r=R.useRef(null),{register:o,handleSubmit:a,watch:l,getValues:c,setValue:h,reset:f,control:m,formState:{errors:p}}=Lf({mode:"onTouched",defaultValues:mA}),[v,_,E,x,k,A,S,O]=l(["id","products","user","total","message","is_paid","coupon","discount"]);R.useEffect(()=>{s.current&&(r.current=new Er(s.current))},[]);const P=async N=>{var L,M,F;try{n(ct(!0));const q=document.cookie.replace(/(?:(?:^|.*;\s*)andBloom\s*=\s*([^;]*).*$)|^.*$/,"$1");Ke.defaults.headers.common.Authorization=q;const K=await Ke.put(`${Gq}/api/${Kq}/admin/order/${i==null?void 0:i.id}`,{data:N});t(),(L=r.current)==null||L.hide(),n(bn({text:K==null?void 0:K.data.message,type:"success"}))}catch(q){q instanceof $t&&(console.log((M=q==null?void 0:q.response)==null?void 0:M.data.message),n(bn({text:(F=q==null?void 0:q.response)==null?void 0:F.data.message,type:"danger"})))}finally{n(ct(!1))}};return R.useEffect(()=>{const N=s.current,L=()=>{f(mA)};return N==null||N.addEventListener("hidden.bs.modal",L),()=>N==null?void 0:N.removeEventListener("hidden.bs.modal",L)},[s,f]),R.useEffect(()=>{const N=s.current,L=()=>{i&&f(i)};return N==null||N.addEventListener("shown.bs.modal",L),()=>N==null?void 0:N.removeEventListener("shown.bs.modal",L)},[i,s,f]),R.useImperativeHandle(e,()=>({show:()=>{var N;(N=r.current)==null||N.show()},hide:()=>{var N;(N=r.current)==null||N.hide()}})),y.jsx("div",{className:"modal fade","data-bs-backdrop":"static",tabIndex:-1,ref:s,children:y.jsx("div",{className:"modal-dialog modal-lg",children:y.jsxs("div",{className:"modal-content",children:[y.jsxs("div",{className:"modal-header",children:[y.jsx("h2",{className:"modal-title fs-5",children:"編輯訂單"}),y.jsx("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),y.jsxs("form",{onSubmit:a(P),children:[y.jsx("div",{className:"modal-body",children:y.jsxs("div",{className:"row",children:[y.jsxs("div",{className:"col-md-6 mb-3",children:[y.jsx("label",{className:"form-label d-block mb-1",children:"訂購者"}),y.jsx("input",{type:"text",className:"form-control-plaintext",value:E.name,readOnly:!0})]}),y.jsxs("div",{className:"col-md-6 mb-3",children:[y.jsx("label",{className:"form-label d-block mb-1",children:"Email"}),y.jsx("input",{type:"email",className:"form-control-plaintext",value:E.email,readOnly:!0})]}),y.jsx("div",{className:"col-md-6 mb-3",children:y.jsx(Gi,{id:"user.tel",label:"訂購者電話",type:"tel",placeholder:"請輸入訂購者電話",register:o,errors:p,rules:{required:"電話必填",minLength:{value:8,message:"電話不少於 8 碼"},maxLength:{value:12,message:"電話不大於 12 碼"},pattern:{value:/^[0-9]*$/,message:"電話需為數字"}}})}),y.jsx("div",{className:"col-md-6 mb-4",children:y.jsx(Gi,{id:"user.address",label:"收件地址",type:"text",placeholder:"請輸入收件地址",register:o,errors:p,rules:{required:"收件地址必填"}})}),y.jsxs("div",{className:"mb-3",children:[y.jsx("label",{className:"form-label d-block mb-1",children:"訂購品項"}),y.jsxs("div",{className:"row gx-2 text-dark",children:[y.jsx("div",{className:"col-4",children:y.jsx("small",{className:"d-block p-1 my-1 border-bottom",children:"產品名稱"})}),y.jsx("div",{className:"col-2",children:y.jsx("small",{className:"d-block p-1 my-1 border-bottom",children:"數量"})}),y.jsx("div",{className:"col-3",children:y.jsx("small",{className:"d-block p-1 my-1 border-bottom",children:"單價"})}),y.jsx("div",{className:"col-3",children:y.jsx("small",{className:"d-block p-1 my-1 border-bottom",children:"小計"})})]}),Object.values(_).map(N=>y.jsxs("div",{className:"row gx-2",children:[y.jsx("div",{className:"col-4",children:y.jsx("div",{className:"p-1 my-1 border-bottom",children:N.product.title})}),y.jsx("div",{className:"col-2",children:y.jsx("div",{className:"p-1 my-1 border-bottom",children:N.qty})}),y.jsx("div",{className:"col-3",children:y.jsxs("div",{className:"p-1 my-1 border-bottom",children:["$",N.product.price]})}),y.jsx("div",{className:"col-3",children:y.jsxs("div",{className:"p-1 my-1 border-bottom",children:["$",N.total]})})]},`modal-${v}-${N.id}`)),S?y.jsxs("div",{className:"row gx-2",children:[y.jsx("div",{className:"col-9",children:y.jsxs("div",{className:"d-block p-1 my-1 border-bottom",children:["優惠券折扣",`（${S.title} ${S.percent} 折）`]})}),y.jsx("div",{className:"col-3",children:y.jsxs("div",{className:"d-block p-1 my-1 border-bottom text-danger",children:["-$",O]})})]}):"",y.jsxs("div",{className:"row gx-2 fw-bold",children:[y.jsx("div",{className:"col-9",children:y.jsx("div",{className:"d-block p-1 my-1 border-bottom",children:"總金額"})}),y.jsx("div",{className:"col-3",children:y.jsxs("div",{className:"d-block p-1 my-1 border-bottom",children:["$",x]})})]})]}),y.jsx("div",{className:"mb-3",children:y.jsx(gr,{id:"is_paid",label:"是否付款",errors:p,children:y.jsxs("div",{className:`d-block ${p.is_paid&&"is-invalid"}`,role:"group",children:[y.jsx("input",{type:"checkbox",className:"btn-check",id:"paid",...o("is_paid")}),y.jsx("label",{className:`btn px-4 ${A?"btn-success":"btn-danger"}`,htmlFor:"paid",children:A?"已付款":"未付款"})]})})}),y.jsxs("div",{className:"mb-3",children:[y.jsx("label",{className:"form-label d-block mb-1",children:"訂單留言"}),y.jsx("textarea",{className:"form-control",rows:3,value:k,readOnly:!0,disabled:!0})]}),y.jsx("div",{className:"mb-3",children:y.jsx(gu,{id:"rematk",label:"管理者備註",placeholder:"請輸入管理者備註",register:o,errors:p})})]})}),y.jsxs("div",{className:"modal-footer",children:[y.jsx(an,{btnStyle:"btn btn-outline-secondary px-4","data-bs-dismiss":"modal",children:"取消"}),y.jsx(an,{type:"submit",btnStyle:"btn btn-secondary px-4",children:"儲存"})]})]})]})})})}),Zq=R.memo(Yq),ed=R.memo(({currentPage:i,totalPages:t=0,setCurrentPage:e})=>{let n=[];return t===0?n=[1]:t<=5?n=[...Array(t)].map((s,r)=>r+1):i<=4?n=[1,2,3,4,5,"...",t]:i>=t-3?n=[1,"...",...[...Array(5)].map((s,r)=>t-(4-r))]:n=[1,"...",...[...Array(3)].map((s,r)=>i-1+r),"...",t],y.jsx(y.Fragment,{children:y.jsx("nav",{"aria-label":"pagination navigation",children:y.jsxs("ul",{className:"pagination align-items-center",children:[y.jsx("li",{className:`page-item ${i===1?"disabled":""}`,children:y.jsx("span",{className:"page-link border-0 page-link-prev","aria-label":"Previous",onClick:()=>e(i-1),children:y.jsxs("span",{children:[y.jsx("i",{className:"bi bi-arrow-left-short"}),y.jsx("span",{className:"d-none d-sm-inline-block ms-1",children:"上一頁"})]})})}),n.map((s,r)=>y.jsx("li",{className:`page-item ${i===s?"active":""} ${s==="..."?"disabled":""}`,children:y.jsx("span",{className:"page-link border-0 rounded-3",onClick:()=>e(s),children:s})},`page_${r}`)),y.jsx("li",{className:`page-item ${i===t?"disabled":""}`,children:y.jsx("span",{className:"page-link border-0 page-link-next","aria-label":"Next",onClick:()=>e(i+1),children:y.jsxs("span",{children:[y.jsx("span",{className:"d-none d-sm-inline-block me-1",children:"下一頁"}),y.jsx("i",{className:"bi bi-arrow-right-short"})]})})})]})})})}),Xq={BASE_URL:"/react-and-bloom/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_BASE:"https://ec-course-api.hexschool.io/v2",VITE_API_PATH:"and-bloom"},{VITE_API_BASE:gA,VITE_API_PATH:pA}=Xq,Jq=()=>{const i=Vn(),[t,e]=R.useState([]),[n,s]=R.useState(1),[r,o]=R.useState(1),[a,l]=R.useState(null),c=R.useRef(null),h=R.useRef(null),f=R.useCallback(async()=>{var _,E,x;try{i(ct(!0));const k=document.cookie.replace(/(?:(?:^|.*;\s*)andBloom\s*=\s*([^;]*).*$)|^.*$/,"$1");Ke.defaults.headers.common.Authorization=k;const A=await Ke.get(`${gA}/api/${pA}/admin/orders?page=${n}`);e(A.data.orders),o((_=A.data.pagination)==null?void 0:_.total_pages),s((E=A.data.pagination)==null?void 0:E.current_page)}catch(k){k instanceof $t&&console.log((x=k==null?void 0:k.response)==null?void 0:x.data.message)}finally{i(ct(!1))}},[n,i]);R.useEffect(()=>{f()},[f]);const m=R.useCallback(()=>{var _;(_=c.current)==null||_.show()},[]),p=R.useCallback(()=>{var _;(_=h.current)==null||_.show()},[]),v=R.useCallback(async _=>{var E,x,k;if(_)try{i(ct(!0));const A=await Ke.delete(`${gA}/api/${pA}/admin/order/${_}`);i(bn({text:A==null?void 0:A.data.message,type:"success"})),f(),l(null),(E=h.current)==null||E.hide()}catch(A){A instanceof $t&&(console.log((x=A==null?void 0:A.response)==null?void 0:x.data.message),i(bn({text:(k=A==null?void 0:A.response)==null?void 0:k.data.message,type:"danger"})),l(null))}finally{i(ct(!1))}},[i,f]);return y.jsxs(y.Fragment,{children:[y.jsx("div",{className:"d-flex justify-content-between align-items-center pb-3 mb-3 border-bottom",children:y.jsx("h3",{className:"mb-0",children:"訂單列表"})}),t.length?y.jsxs(y.Fragment,{children:[t.map(_=>y.jsx(xq,{showModal:m,setSelectedOrder:l,showAlertModal:p,order:_},_.id)),y.jsx("div",{className:"d-flex justify-content-center my-5",children:y.jsx(ed,{currentPage:n,totalPages:r,setCurrentPage:s})})]}):y.jsx("p",{className:"text-center",children:"尚無訂單"}),y.jsx(Zq,{ref:c,selectedOrder:a,getOrders:f}),y.jsx(Nf,{ref:h,nextFn:()=>v((a==null?void 0:a.id)||""),children:y.jsx("p",{className:"text-center py-4",children:"刪除後無法復原，您確定刪除該筆訂單嗎？"})})]})},Qq=xt.div`
  width: 80px;
  height: 80px;
`,eG=xt("li")`
  margin-top: -1px;
  &:hover {
    background-color: #f8f9fa;
    z-index: 1000;
    border-color: rgba(0, 0, 0, 0.3);
  }
`,tG=R.memo(({showModal:i,product:t,setSelectedProduct:e,showAlertModal:n})=>{const{title:s,price:r,origin_price:o,is_enabled:a,category:l}=t,c=R.useCallback(f=>{e(f),i()},[i,e]),h=R.useCallback(f=>{e(f),n()},[n,e]);return y.jsx(eG,{className:"card mb-3",children:y.jsx("div",{className:"card-body",children:y.jsxs("div",{className:"row w-100 justify-content-between align-items-center",children:[y.jsx("div",{className:"col-auto",children:y.jsx(Qq,{className:"image-container rounded-circle overflow-hidden border",children:y.jsx("img",{src:t.imageUrl,alt:s,className:"w-100 h-100 object-fit-cover"})})}),y.jsxs("div",{className:"col-md-4",children:[y.jsx("span",{className:"badge rounded-pill bg-primary fs-sm mb-2",children:l}),y.jsx("h6",{className:"mt-1 mb-2",children:s})]}),y.jsxs("div",{className:"col-md d-flex justify-content-center align-items-center",children:[y.jsxs("p",{className:"mb-0 me-2",children:["$ ",r]}),y.jsxs("small",{className:"text-muted text-decoration-line-through",children:["$ ",o]})]}),y.jsx("div",{className:"col-md d-flex justify-content-center",children:y.jsx(zb,{isEnabled:a})}),y.jsxs("div",{className:"col-md d-flex align-items-center justify-content-end",children:[y.jsx(an,{btnStyle:"btn-sm btn-secondary",handleClick:()=>c(t),children:"編輯"}),y.jsx(an,{btnStyle:"btn-sm btn-outline-primary ms-2",handleClick:()=>h(t),children:"刪除"})]})]})})})}),nG={BASE_URL:"/react-and-bloom/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_BASE:"https://ec-course-api.hexschool.io/v2",VITE_API_PATH:"and-bloom"},{VITE_API_BASE:bA,VITE_API_PATH:wA}=nG,iG=xt("div")`
  right: 5px;
  top: 0;
  cursor: pointer;
`,vA={title:"",category:"",unit:"",origin_price:null,price:null,description:"",content:"",is_enabled:1,imageUrl:"",imagesUrl:[],petCareNotes:"",floriography:""},sG=R.forwardRef(({selectedProduct:i,getProducts:t},e)=>{const n=Vn(),[s,r]=R.useState(""),o=R.useRef(null),a=R.useRef(null),{register:l,handleSubmit:c,watch:h,getValues:f,setValue:m,reset:p,control:v,formState:{errors:_}}=Lf({mode:"onTouched",defaultValues:vA});R.useEffect(()=>{o.current&&(a.current=new Er(o.current))},[]);const[E,x,k]=IE({control:v,name:["imageUrl","imagesUrl","is_enabled"]}),A=async(P,N)=>{var F,q,K;const L=(F=P.target.files)==null?void 0:F[0],M=new FormData;if(L){M.append("file-to-upload",L),P.target.files=new DataTransfer().files;try{r(N);const te=document.cookie.replace(/(?:(?:^|.*;\s*)andBloom\s*=\s*([^;]*).*$)|^.*$/,"$1");Ke.defaults.headers.common.Authorization=te;const ve=await Ke.post(`${bA}/api/${wA}/admin/upload`,M,{headers:{"Content-Type":"multipart/form-data"}});N==="imageUrl"?m("imageUrl",ve.data.imageUrl,{shouldValidate:!0}):m("imagesUrl",[...x,ve.data.imageUrl],{shouldValidate:!0})}catch(te){te instanceof $t&&(console.log((q=te==null?void 0:te.response)==null?void 0:q.data.message),n(bn({text:(K=te==null?void 0:te.response)==null?void 0:K.data.message,type:"danger"})))}finally{r("")}}},S=P=>{const N=[...x];N.splice(P,1),m("imagesUrl",N)},O=async P=>{var N,L,M;try{n(ct(!0));const F=document.cookie.replace(/(?:(?:^|.*;\s*)andBloom\s*=\s*([^;]*).*$)|^.*$/,"$1");Ke.defaults.headers.common.Authorization=F;const q=await Ke[i?"put":"post"](`${bA}/api/${wA}/admin/product${i?`/${i.id}`:""}`,{data:P});t(),(N=a.current)==null||N.hide(),n(bn({text:q==null?void 0:q.data.message,type:"success"}))}catch(F){F instanceof $t&&(console.log((L=F==null?void 0:F.response)==null?void 0:L.data.message),n(bn({text:(M=F==null?void 0:F.response)==null?void 0:M.data.message,type:"danger"})))}finally{n(ct(!1))}};return R.useEffect(()=>{const P=o.current,N=()=>{p(vA)};return P==null||P.addEventListener("hidden.bs.modal",N),()=>P==null?void 0:P.removeEventListener("hidden.bs.modal",N)},[o,p]),R.useEffect(()=>{const P=o.current,N=()=>{i&&p(i)};return P==null||P.addEventListener("shown.bs.modal",N),()=>P==null?void 0:P.removeEventListener("shown.bs.modal",N)},[i,o,p]),R.useImperativeHandle(e,()=>({show:()=>{var P;(P=a.current)==null||P.show()},hide:()=>{var P;(P=a.current)==null||P.hide()}})),y.jsx("div",{className:"modal fade","data-bs-backdrop":"static",tabIndex:-1,ref:o,children:y.jsx("div",{className:"modal-dialog modal-lg",children:y.jsxs("div",{className:"modal-content",children:[y.jsxs("div",{className:"modal-header",children:[y.jsx("h2",{className:"modal-title fs-5",children:i?"編輯產品":"新增產品"}),y.jsx("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),y.jsxs("form",{onSubmit:c(O),children:[y.jsx("div",{className:"modal-body",children:y.jsxs("div",{className:"row",children:[y.jsx("div",{className:"mb-3",children:y.jsx(Gi,{id:"title",label:"產品名稱",type:"text",placeholder:"請輸入名稱",register:l,errors:_,rules:{required:"產品名稱必填"}})}),y.jsx("div",{className:"col-md-6 mb-3",children:y.jsx(Gi,{id:"category",label:"分類",type:"text",placeholder:"請輸入分類",register:l,errors:_,rules:{required:"分類必填"}})}),y.jsx("div",{className:"col-md-6 mb-3",children:y.jsx(Gi,{id:"unit",label:"單位",type:"text",placeholder:"請輸入單位",register:l,errors:_,rules:{required:"單位必填"}})}),y.jsx("div",{className:"col-md-6 mb-3",children:y.jsx(Gi,{id:"origin_price",label:"原價",type:"number",placeholder:"請輸入原價",register:l,errors:_,rules:{required:"原價必填",min:{value:0,message:"價格需大於 0"},valueAsNumber:!0}})}),y.jsx("div",{className:"col-md-6 mb-3",children:y.jsx(Gi,{id:"price",label:"售價",type:"number",placeholder:"請輸入售價",register:l,errors:_,rules:{required:"售價必填",min:{value:0,message:"價格需大於 0"},valueAsNumber:!0,validate:P=>Number(P)<=Number(f().origin_price)||"售價必須小於等於原價"}})}),y.jsx("div",{className:"mb-3",children:y.jsx(gu,{id:"description",label:"產品描述",placeholder:"請輸入產品描述",register:l,errors:_})}),y.jsx("div",{className:"mb-3",children:y.jsx(gu,{id:"content",label:"說明內容",placeholder:"請輸入說明內容",register:l,errors:_})}),y.jsx("div",{className:"mb-3",children:y.jsx(gu,{id:"petCareNotes",label:"寵物注意事項",placeholder:"請輸入注意事項",register:l,errors:_})}),y.jsx("div",{className:"mb-3",children:y.jsx(gu,{id:"floriography",label:"花語",placeholder:"請輸入花語",register:l,errors:_})}),y.jsx("div",{className:"mb-3",children:y.jsx(gr,{id:"is_enabled",label:"是否啟用",errors:_,children:y.jsxs("div",{className:`d-block ${_.is_enabled&&"is-invalid"}`,role:"group",children:[y.jsx("input",{type:"checkbox",className:"btn-check",id:"enabled",...l("is_enabled")}),y.jsx("label",{className:`btn px-4 ${k?"btn-success":"btn-danger"}`,htmlFor:"enabled",children:k?"啟用":"停用"})]})})}),y.jsx("div",{className:"col-md-6 mb-3",children:y.jsxs(gr,{id:"imageUrl",label:"主圖",isRequired:!0,errors:_,children:[y.jsxs("div",{children:[y.jsx("input",{id:"mainImage",type:"file",className:"form-control d-none",disabled:!!s,onChange:P=>A(P,"imageUrl")}),y.jsxs("label",{className:`btn btn-primary ${s&&"opacity-50"}`,htmlFor:"mainImage",children:[s==="imageUrl"&&y.jsx("span",{className:"spinner-grow spinner-grow-sm me-2"}),"上傳圖片"]})]}),E&&y.jsx("img",{src:E,alt:"主圖",className:"img-fluid mt-3"}),y.jsx("input",{id:"imageUrl",className:`form-control-sm form-control-plaintext ${E?"":"d-none"}`,readOnly:!0,...l("imageUrl",{required:"請上傳主圖"})})]})}),y.jsx("div",{className:"col-md-6 mb-3",children:y.jsxs(gr,{id:"imagesUrl",label:"副圖（最多三張）",errors:_,children:[y.jsxs("div",{children:[y.jsx("input",{id:"subImages",type:"file",className:"form-control d-none",disabled:(x==null?void 0:x.length)>=3||!!s,onChange:P=>A(P,"imagesUrl")}),y.jsxs("label",{className:`btn btn-primary ${((x==null?void 0:x.length)>=3||!!s)&&"opacity-50"}`,htmlFor:"subImages",children:[s==="imagesUrl"&&y.jsx("span",{className:"spinner-grow spinner-grow-sm me-2"}),"上傳圖片"]})]}),(x==null?void 0:x.length)>0&&x.map((P,N)=>y.jsxs("div",{className:"position-relative mt-3 mb-2",children:[y.jsx("img",{src:P,alt:"副圖",className:"img-fluid"}),y.jsx("input",{type:"text",className:"form-control-sm form-control-plaintext",value:P,readOnly:!0}),y.jsx(iG,{className:"position-absolute bi bi-x fs-2",onClick:()=>S(N)})]},N))]})})]})}),y.jsxs("div",{className:"modal-footer",children:[y.jsx(an,{btnStyle:"btn btn-outline-secondary px-4","data-bs-dismiss":"modal",children:"取消"}),y.jsx(an,{type:"submit",btnStyle:"btn btn-secondary px-4",children:"儲存"})]})]})]})})})}),rG=R.memo(sG),oG={BASE_URL:"/react-and-bloom/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_BASE:"https://ec-course-api.hexschool.io/v2",VITE_API_PATH:"and-bloom"},{VITE_API_BASE:yA,VITE_API_PATH:_A}=oG,aG=()=>{const i=Vn(),[t,e]=R.useState([]),[n,s]=R.useState(1),[r,o]=R.useState(1),[a,l]=R.useState(null),c=R.useRef(null),h=R.useRef(null),f=R.useCallback(async()=>{var E,x,k;try{i(ct(!0));const A=document.cookie.replace(/(?:(?:^|.*;\s*)andBloom\s*=\s*([^;]*).*$)|^.*$/,"$1");Ke.defaults.headers.common.Authorization=A;const S=await Ke.get(`${yA}/api/${_A}/admin/products?page=${n}`);e(S.data.products),o((E=S.data.pagination)==null?void 0:E.total_pages),s((x=S.data.pagination)==null?void 0:x.current_page)}catch(A){A instanceof $t&&console.log((k=A==null?void 0:A.response)==null?void 0:k.data.message)}finally{i(ct(!1))}},[n,i]);R.useEffect(()=>{f()},[f]);const m=R.useCallback(()=>{var E;(E=c.current)==null||E.show()},[]),p=R.useCallback(()=>{var E;(E=h.current)==null||E.show()},[]),v=R.useCallback(()=>{l(null),m()},[m]),_=R.useCallback(async E=>{var x,k,A;if(E)try{i(ct(!0));const S=await Ke.delete(`${yA}/api/${_A}/admin/product/${E}`);i(bn({text:S==null?void 0:S.data.message,type:"success"})),f(),(x=h.current)==null||x.hide()}catch(S){S instanceof $t&&(console.log((k=S==null?void 0:S.response)==null?void 0:k.data.message),i(bn({text:(A=S==null?void 0:S.response)==null?void 0:A.data.message,type:"danger"})))}finally{i(ct(!1)),l(null)}},[i,f]);return y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"d-flex justify-content-between align-items-center pb-3 mb-3 border-bottom",children:[y.jsx("h3",{className:"mb-0",children:"產品列表"}),y.jsx(an,{btnStyle:"btn-sm btn-secondary",handleClick:v,children:"新增"})]}),t.length?y.jsxs(y.Fragment,{children:[t.map(E=>y.jsx(tG,{showModal:m,setSelectedProduct:l,showAlertModal:p,product:E},E.id)),y.jsx("div",{className:"d-flex justify-content-center my-5",children:y.jsx(ed,{currentPage:n,totalPages:r,setCurrentPage:s})})]}):y.jsx("p",{className:"text-center",children:"尚無產品，請新增產品"}),y.jsx(rG,{ref:c,selectedProduct:a,getProducts:f}),y.jsx(Nf,{ref:h,nextFn:()=>_((a==null?void 0:a.id)||""),children:y.jsxs("p",{className:"text-center py-4",children:["刪除後無法復原，您確定刪除",y.jsx("strong",{children:a==null?void 0:a.title}),"嗎？"]})})]})};function EA(i){return i!==null&&typeof i=="object"&&"constructor"in i&&i.constructor===Object}function NE(i,t){i===void 0&&(i={}),t===void 0&&(t={});const e=["__proto__","constructor","prototype"];Object.keys(t).filter(n=>e.indexOf(n)<0).forEach(n=>{typeof i[n]>"u"?i[n]=t[n]:EA(t[n])&&EA(i[n])&&Object.keys(t[n]).length>0&&NE(i[n],t[n])})}const tN={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector(){return null},querySelectorAll(){return[]},getElementById(){return null},createEvent(){return{initEvent(){}}},createElement(){return{children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName(){return[]}}},createElementNS(){return{}},importNode(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function Ga(){const i=typeof document<"u"?document:{};return NE(i,tN),i}const lG={document:tN,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle(){return{getPropertyValue(){return""}}},Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia(){return{}},requestAnimationFrame(i){return typeof setTimeout>"u"?(i(),null):setTimeout(i,0)},cancelAnimationFrame(i){typeof setTimeout>"u"||clearTimeout(i)}};function Ii(){const i=typeof window<"u"?window:{};return NE(i,lG),i}function cG(i){return i===void 0&&(i=""),i.trim().split(" ").filter(t=>!!t.trim())}function uG(i){const t=i;Object.keys(t).forEach(e=>{try{t[e]=null}catch{}try{delete t[e]}catch{}})}function Iy(i,t){return t===void 0&&(t=0),setTimeout(i,t)}function Ml(){return Date.now()}function dG(i){const t=Ii();let e;return t.getComputedStyle&&(e=t.getComputedStyle(i,null)),!e&&i.currentStyle&&(e=i.currentStyle),e||(e=i.style),e}function hG(i,t){t===void 0&&(t="x");const e=Ii();let n,s,r;const o=dG(i);return e.WebKitCSSMatrix?(s=o.transform||o.webkitTransform,s.split(",").length>6&&(s=s.split(", ").map(a=>a.replace(",",".")).join(", ")),r=new e.WebKitCSSMatrix(s==="none"?"":s)):(r=o.MozTransform||o.OTransform||o.MsTransform||o.msTransform||o.transform||o.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),n=r.toString().split(",")),t==="x"&&(e.WebKitCSSMatrix?s=r.m41:n.length===16?s=parseFloat(n[12]):s=parseFloat(n[4])),t==="y"&&(e.WebKitCSSMatrix?s=r.m42:n.length===16?s=parseFloat(n[13]):s=parseFloat(n[5])),s||0}function fh(i){return typeof i=="object"&&i!==null&&i.constructor&&Object.prototype.toString.call(i).slice(8,-1)==="Object"}function fG(i){return typeof window<"u"&&typeof window.HTMLElement<"u"?i instanceof HTMLElement:i&&(i.nodeType===1||i.nodeType===11)}function ls(){const i=Object(arguments.length<=0?void 0:arguments[0]),t=["__proto__","constructor","prototype"];for(let e=1;e<arguments.length;e+=1){const n=e<0||arguments.length<=e?void 0:arguments[e];if(n!=null&&!fG(n)){const s=Object.keys(Object(n)).filter(r=>t.indexOf(r)<0);for(let r=0,o=s.length;r<o;r+=1){const a=s[r],l=Object.getOwnPropertyDescriptor(n,a);l!==void 0&&l.enumerable&&(fh(i[a])&&fh(n[a])?n[a].__swiper__?i[a]=n[a]:ls(i[a],n[a]):!fh(i[a])&&fh(n[a])?(i[a]={},n[a].__swiper__?i[a]=n[a]:ls(i[a],n[a])):i[a]=n[a])}}}return i}function gg(i,t,e){i.style.setProperty(t,e)}function nN(i){let{swiper:t,targetPosition:e,side:n}=i;const s=Ii(),r=-t.translate;let o=null,a;const l=t.params.speed;t.wrapperEl.style.scrollSnapType="none",s.cancelAnimationFrame(t.cssModeFrameID);const c=e>r?"next":"prev",h=(m,p)=>c==="next"&&m>=p||c==="prev"&&m<=p,f=()=>{a=new Date().getTime(),o===null&&(o=a);const m=Math.max(Math.min((a-o)/l,1),0),p=.5-Math.cos(m*Math.PI)/2;let v=r+p*(e-r);if(h(v,e)&&(v=e),t.wrapperEl.scrollTo({[n]:v}),h(v,e)){t.wrapperEl.style.overflow="hidden",t.wrapperEl.style.scrollSnapType="",setTimeout(()=>{t.wrapperEl.style.overflow="",t.wrapperEl.scrollTo({[n]:v})}),s.cancelAnimationFrame(t.cssModeFrameID);return}t.cssModeFrameID=s.requestAnimationFrame(f)};f()}function pr(i,t){t===void 0&&(t="");const e=Ii(),n=[...i.children];return e.HTMLSlotElement&&i instanceof HTMLSlotElement&&n.push(...i.assignedElements()),t?n.filter(s=>s.matches(t)):n}function mG(i,t){const e=[t];for(;e.length>0;){const n=e.shift();if(i===n)return!0;e.push(...n.children,...n.shadowRoot?n.shadowRoot.children:[],...n.assignedElements?n.assignedElements():[])}}function gG(i,t){const e=Ii();let n=t.contains(i);return!n&&e.HTMLSlotElement&&t instanceof HTMLSlotElement&&(n=[...t.assignedElements()].includes(i),n||(n=mG(i,t))),n}function Mp(i){try{console.warn(i);return}catch{}}function Lp(i,t){t===void 0&&(t=[]);const e=document.createElement(i);return e.classList.add(...Array.isArray(t)?t:cG(t)),e}function pG(i,t){const e=[];for(;i.previousElementSibling;){const n=i.previousElementSibling;t?n.matches(t)&&e.push(n):e.push(n),i=n}return e}function bG(i,t){const e=[];for(;i.nextElementSibling;){const n=i.nextElementSibling;t?n.matches(t)&&e.push(n):e.push(n),i=n}return e}function Ra(i,t){return Ii().getComputedStyle(i,null).getPropertyValue(t)}function CA(i){let t=i,e;if(t){for(e=0;(t=t.previousSibling)!==null;)t.nodeType===1&&(e+=1);return e}}function wG(i,t){const e=[];let n=i.parentElement;for(;n;)e.push(n),n=n.parentElement;return e}function U0(i,t){function e(n){n.target===i&&(t.call(i,n),i.removeEventListener("transitionend",e))}t&&i.addEventListener("transitionend",e)}function xA(i,t,e){const n=Ii();return i[t==="width"?"offsetWidth":"offsetHeight"]+parseFloat(n.getComputedStyle(i,null).getPropertyValue(t==="width"?"margin-right":"margin-top"))+parseFloat(n.getComputedStyle(i,null).getPropertyValue(t==="width"?"margin-left":"margin-bottom"))}function xo(i){return(Array.isArray(i)?i:[i]).filter(t=>!!t)}let W0;function vG(){const i=Ii(),t=Ga();return{smoothScroll:t.documentElement&&t.documentElement.style&&"scrollBehavior"in t.documentElement.style,touch:!!("ontouchstart"in i||i.DocumentTouch&&t instanceof i.DocumentTouch)}}function iN(){return W0||(W0=vG()),W0}let q0;function yG(i){let{userAgent:t}=i===void 0?{}:i;const e=iN(),n=Ii(),s=n.navigator.platform,r=t||n.navigator.userAgent,o={ios:!1,android:!1},a=n.screen.width,l=n.screen.height,c=r.match(/(Android);?[\s\/]+([\d.]+)?/);let h=r.match(/(iPad).*OS\s([\d_]+)/);const f=r.match(/(iPod)(.*OS\s([\d_]+))?/),m=!h&&r.match(/(iPhone\sOS|iOS)\s([\d_]+)/),p=s==="Win32";let v=s==="MacIntel";const _=["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"];return!h&&v&&e.touch&&_.indexOf(`${a}x${l}`)>=0&&(h=r.match(/(Version)\/([\d.]+)/),h||(h=[0,1,"13_0_0"]),v=!1),c&&!p&&(o.os="android",o.android=!0),(h||m||f)&&(o.os="ios",o.ios=!0),o}function sN(i){return i===void 0&&(i={}),q0||(q0=yG(i)),q0}let G0;function _G(){const i=Ii(),t=sN();let e=!1;function n(){const a=i.navigator.userAgent.toLowerCase();return a.indexOf("safari")>=0&&a.indexOf("chrome")<0&&a.indexOf("android")<0}if(n()){const a=String(i.navigator.userAgent);if(a.includes("Version/")){const[l,c]=a.split("Version/")[1].split(" ")[0].split(".").map(h=>Number(h));e=l<16||l===16&&c<2}}const s=/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(i.navigator.userAgent),r=n(),o=r||s&&t.ios;return{isSafari:e||r,needPerspectiveFix:e,need3dFix:o,isWebView:s}}function rN(){return G0||(G0=_G()),G0}function EG(i){let{swiper:t,on:e,emit:n}=i;const s=Ii();let r=null,o=null;const a=()=>{!t||t.destroyed||!t.initialized||(n("beforeResize"),n("resize"))},l=()=>{!t||t.destroyed||!t.initialized||(r=new ResizeObserver(f=>{o=s.requestAnimationFrame(()=>{const{width:m,height:p}=t;let v=m,_=p;f.forEach(E=>{let{contentBoxSize:x,contentRect:k,target:A}=E;A&&A!==t.el||(v=k?k.width:(x[0]||x).inlineSize,_=k?k.height:(x[0]||x).blockSize)}),(v!==m||_!==p)&&a()})}),r.observe(t.el))},c=()=>{o&&s.cancelAnimationFrame(o),r&&r.unobserve&&t.el&&(r.unobserve(t.el),r=null)},h=()=>{!t||t.destroyed||!t.initialized||n("orientationchange")};e("init",()=>{if(t.params.resizeObserver&&typeof s.ResizeObserver<"u"){l();return}s.addEventListener("resize",a),s.addEventListener("orientationchange",h)}),e("destroy",()=>{c(),s.removeEventListener("resize",a),s.removeEventListener("orientationchange",h)})}function CG(i){let{swiper:t,extendParams:e,on:n,emit:s}=i;const r=[],o=Ii(),a=function(h,f){f===void 0&&(f={});const m=o.MutationObserver||o.WebkitMutationObserver,p=new m(v=>{if(t.__preventObserver__)return;if(v.length===1){s("observerUpdate",v[0]);return}const _=function(){s("observerUpdate",v[0])};o.requestAnimationFrame?o.requestAnimationFrame(_):o.setTimeout(_,0)});p.observe(h,{attributes:typeof f.attributes>"u"?!0:f.attributes,childList:t.isElement||(typeof f.childList>"u"?!0:f).childList,characterData:typeof f.characterData>"u"?!0:f.characterData}),r.push(p)},l=()=>{if(t.params.observer){if(t.params.observeParents){const h=wG(t.hostEl);for(let f=0;f<h.length;f+=1)a(h[f])}a(t.hostEl,{childList:t.params.observeSlideChildren}),a(t.wrapperEl,{attributes:!1})}},c=()=>{r.forEach(h=>{h.disconnect()}),r.splice(0,r.length)};e({observer:!1,observeParents:!1,observeSlideChildren:!1}),n("init",l),n("destroy",c)}var xG={on(i,t,e){const n=this;if(!n.eventsListeners||n.destroyed||typeof t!="function")return n;const s=e?"unshift":"push";return i.split(" ").forEach(r=>{n.eventsListeners[r]||(n.eventsListeners[r]=[]),n.eventsListeners[r][s](t)}),n},once(i,t,e){const n=this;if(!n.eventsListeners||n.destroyed||typeof t!="function")return n;function s(){n.off(i,s),s.__emitterProxy&&delete s.__emitterProxy;for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];t.apply(n,o)}return s.__emitterProxy=t,n.on(i,s,e)},onAny(i,t){const e=this;if(!e.eventsListeners||e.destroyed||typeof i!="function")return e;const n=t?"unshift":"push";return e.eventsAnyListeners.indexOf(i)<0&&e.eventsAnyListeners[n](i),e},offAny(i){const t=this;if(!t.eventsListeners||t.destroyed||!t.eventsAnyListeners)return t;const e=t.eventsAnyListeners.indexOf(i);return e>=0&&t.eventsAnyListeners.splice(e,1),t},off(i,t){const e=this;return!e.eventsListeners||e.destroyed||!e.eventsListeners||i.split(" ").forEach(n=>{typeof t>"u"?e.eventsListeners[n]=[]:e.eventsListeners[n]&&e.eventsListeners[n].forEach((s,r)=>{(s===t||s.__emitterProxy&&s.__emitterProxy===t)&&e.eventsListeners[n].splice(r,1)})}),e},emit(){const i=this;if(!i.eventsListeners||i.destroyed||!i.eventsListeners)return i;let t,e,n;for(var s=arguments.length,r=new Array(s),o=0;o<s;o++)r[o]=arguments[o];return typeof r[0]=="string"||Array.isArray(r[0])?(t=r[0],e=r.slice(1,r.length),n=i):(t=r[0].events,e=r[0].data,n=r[0].context||i),e.unshift(n),(Array.isArray(t)?t:t.split(" ")).forEach(l=>{i.eventsAnyListeners&&i.eventsAnyListeners.length&&i.eventsAnyListeners.forEach(c=>{c.apply(n,[l,...e])}),i.eventsListeners&&i.eventsListeners[l]&&i.eventsListeners[l].forEach(c=>{c.apply(n,e)})}),i}};function TG(){const i=this;let t,e;const n=i.el;typeof i.params.width<"u"&&i.params.width!==null?t=i.params.width:t=n.clientWidth,typeof i.params.height<"u"&&i.params.height!==null?e=i.params.height:e=n.clientHeight,!(t===0&&i.isHorizontal()||e===0&&i.isVertical())&&(t=t-parseInt(Ra(n,"padding-left")||0,10)-parseInt(Ra(n,"padding-right")||0,10),e=e-parseInt(Ra(n,"padding-top")||0,10)-parseInt(Ra(n,"padding-bottom")||0,10),Number.isNaN(t)&&(t=0),Number.isNaN(e)&&(e=0),Object.assign(i,{width:t,height:e,size:i.isHorizontal()?t:e}))}function kG(){const i=this;function t(F,q){return parseFloat(F.getPropertyValue(i.getDirectionLabel(q))||0)}const e=i.params,{wrapperEl:n,slidesEl:s,size:r,rtlTranslate:o,wrongRTL:a}=i,l=i.virtual&&e.virtual.enabled,c=l?i.virtual.slides.length:i.slides.length,h=pr(s,`.${i.params.slideClass}, swiper-slide`),f=l?i.virtual.slides.length:h.length;let m=[];const p=[],v=[];let _=e.slidesOffsetBefore;typeof _=="function"&&(_=e.slidesOffsetBefore.call(i));let E=e.slidesOffsetAfter;typeof E=="function"&&(E=e.slidesOffsetAfter.call(i));const x=i.snapGrid.length,k=i.slidesGrid.length;let A=e.spaceBetween,S=-_,O=0,P=0;if(typeof r>"u")return;typeof A=="string"&&A.indexOf("%")>=0?A=parseFloat(A.replace("%",""))/100*r:typeof A=="string"&&(A=parseFloat(A)),i.virtualSize=-A,h.forEach(F=>{o?F.style.marginLeft="":F.style.marginRight="",F.style.marginBottom="",F.style.marginTop=""}),e.centeredSlides&&e.cssMode&&(gg(n,"--swiper-centered-offset-before",""),gg(n,"--swiper-centered-offset-after",""));const N=e.grid&&e.grid.rows>1&&i.grid;N?i.grid.initSlides(h):i.grid&&i.grid.unsetSlides();let L;const M=e.slidesPerView==="auto"&&e.breakpoints&&Object.keys(e.breakpoints).filter(F=>typeof e.breakpoints[F].slidesPerView<"u").length>0;for(let F=0;F<f;F+=1){L=0;let q;if(h[F]&&(q=h[F]),N&&i.grid.updateSlide(F,q,h),!(h[F]&&Ra(q,"display")==="none")){if(e.slidesPerView==="auto"){M&&(h[F].style[i.getDirectionLabel("width")]="");const K=getComputedStyle(q),te=q.style.transform,ve=q.style.webkitTransform;if(te&&(q.style.transform="none"),ve&&(q.style.webkitTransform="none"),e.roundLengths)L=i.isHorizontal()?xA(q,"width"):xA(q,"height");else{const Se=t(K,"width"),_e=t(K,"padding-left"),be=t(K,"padding-right"),he=t(K,"margin-left"),ce=t(K,"margin-right"),le=K.getPropertyValue("box-sizing");if(le&&le==="border-box")L=Se+he+ce;else{const{clientWidth:U,offsetWidth:re}=q;L=Se+_e+be+he+ce+(re-U)}}te&&(q.style.transform=te),ve&&(q.style.webkitTransform=ve),e.roundLengths&&(L=Math.floor(L))}else L=(r-(e.slidesPerView-1)*A)/e.slidesPerView,e.roundLengths&&(L=Math.floor(L)),h[F]&&(h[F].style[i.getDirectionLabel("width")]=`${L}px`);h[F]&&(h[F].swiperSlideSize=L),v.push(L),e.centeredSlides?(S=S+L/2+O/2+A,O===0&&F!==0&&(S=S-r/2-A),F===0&&(S=S-r/2-A),Math.abs(S)<1/1e3&&(S=0),e.roundLengths&&(S=Math.floor(S)),P%e.slidesPerGroup===0&&m.push(S),p.push(S)):(e.roundLengths&&(S=Math.floor(S)),(P-Math.min(i.params.slidesPerGroupSkip,P))%i.params.slidesPerGroup===0&&m.push(S),p.push(S),S=S+L+A),i.virtualSize+=L+A,O=L,P+=1}}if(i.virtualSize=Math.max(i.virtualSize,r)+E,o&&a&&(e.effect==="slide"||e.effect==="coverflow")&&(n.style.width=`${i.virtualSize+A}px`),e.setWrapperSize&&(n.style[i.getDirectionLabel("width")]=`${i.virtualSize+A}px`),N&&i.grid.updateWrapperSize(L,m),!e.centeredSlides){const F=[];for(let q=0;q<m.length;q+=1){let K=m[q];e.roundLengths&&(K=Math.floor(K)),m[q]<=i.virtualSize-r&&F.push(K)}m=F,Math.floor(i.virtualSize-r)-Math.floor(m[m.length-1])>1&&m.push(i.virtualSize-r)}if(l&&e.loop){const F=v[0]+A;if(e.slidesPerGroup>1){const q=Math.ceil((i.virtual.slidesBefore+i.virtual.slidesAfter)/e.slidesPerGroup),K=F*e.slidesPerGroup;for(let te=0;te<q;te+=1)m.push(m[m.length-1]+K)}for(let q=0;q<i.virtual.slidesBefore+i.virtual.slidesAfter;q+=1)e.slidesPerGroup===1&&m.push(m[m.length-1]+F),p.push(p[p.length-1]+F),i.virtualSize+=F}if(m.length===0&&(m=[0]),A!==0){const F=i.isHorizontal()&&o?"marginLeft":i.getDirectionLabel("marginRight");h.filter((q,K)=>!e.cssMode||e.loop?!0:K!==h.length-1).forEach(q=>{q.style[F]=`${A}px`})}if(e.centeredSlides&&e.centeredSlidesBounds){let F=0;v.forEach(K=>{F+=K+(A||0)}),F-=A;const q=F>r?F-r:0;m=m.map(K=>K<=0?-_:K>q?q+E:K)}if(e.centerInsufficientSlides){let F=0;v.forEach(K=>{F+=K+(A||0)}),F-=A;const q=(e.slidesOffsetBefore||0)+(e.slidesOffsetAfter||0);if(F+q<r){const K=(r-F-q)/2;m.forEach((te,ve)=>{m[ve]=te-K}),p.forEach((te,ve)=>{p[ve]=te+K})}}if(Object.assign(i,{slides:h,snapGrid:m,slidesGrid:p,slidesSizesGrid:v}),e.centeredSlides&&e.cssMode&&!e.centeredSlidesBounds){gg(n,"--swiper-centered-offset-before",`${-m[0]}px`),gg(n,"--swiper-centered-offset-after",`${i.size/2-v[v.length-1]/2}px`);const F=-i.snapGrid[0],q=-i.slidesGrid[0];i.snapGrid=i.snapGrid.map(K=>K+F),i.slidesGrid=i.slidesGrid.map(K=>K+q)}if(f!==c&&i.emit("slidesLengthChange"),m.length!==x&&(i.params.watchOverflow&&i.checkOverflow(),i.emit("snapGridLengthChange")),p.length!==k&&i.emit("slidesGridLengthChange"),e.watchSlidesProgress&&i.updateSlidesOffset(),i.emit("slidesUpdated"),!l&&!e.cssMode&&(e.effect==="slide"||e.effect==="fade")){const F=`${e.containerModifierClass}backface-hidden`,q=i.el.classList.contains(F);f<=e.maxBackfaceHiddenSlides?q||i.el.classList.add(F):q&&i.el.classList.remove(F)}}function SG(i){const t=this,e=[],n=t.virtual&&t.params.virtual.enabled;let s=0,r;typeof i=="number"?t.setTransition(i):i===!0&&t.setTransition(t.params.speed);const o=a=>n?t.slides[t.getSlideIndexByData(a)]:t.slides[a];if(t.params.slidesPerView!=="auto"&&t.params.slidesPerView>1)if(t.params.centeredSlides)(t.visibleSlides||[]).forEach(a=>{e.push(a)});else for(r=0;r<Math.ceil(t.params.slidesPerView);r+=1){const a=t.activeIndex+r;if(a>t.slides.length&&!n)break;e.push(o(a))}else e.push(o(t.activeIndex));for(r=0;r<e.length;r+=1)if(typeof e[r]<"u"){const a=e[r].offsetHeight;s=a>s?a:s}(s||s===0)&&(t.wrapperEl.style.height=`${s}px`)}function AG(){const i=this,t=i.slides,e=i.isElement?i.isHorizontal()?i.wrapperEl.offsetLeft:i.wrapperEl.offsetTop:0;for(let n=0;n<t.length;n+=1)t[n].swiperSlideOffset=(i.isHorizontal()?t[n].offsetLeft:t[n].offsetTop)-e-i.cssOverflowAdjustment()}const TA=(i,t,e)=>{t&&!i.classList.contains(e)?i.classList.add(e):!t&&i.classList.contains(e)&&i.classList.remove(e)};function PG(i){i===void 0&&(i=this&&this.translate||0);const t=this,e=t.params,{slides:n,rtlTranslate:s,snapGrid:r}=t;if(n.length===0)return;typeof n[0].swiperSlideOffset>"u"&&t.updateSlidesOffset();let o=-i;s&&(o=i),t.visibleSlidesIndexes=[],t.visibleSlides=[];let a=e.spaceBetween;typeof a=="string"&&a.indexOf("%")>=0?a=parseFloat(a.replace("%",""))/100*t.size:typeof a=="string"&&(a=parseFloat(a));for(let l=0;l<n.length;l+=1){const c=n[l];let h=c.swiperSlideOffset;e.cssMode&&e.centeredSlides&&(h-=n[0].swiperSlideOffset);const f=(o+(e.centeredSlides?t.minTranslate():0)-h)/(c.swiperSlideSize+a),m=(o-r[0]+(e.centeredSlides?t.minTranslate():0)-h)/(c.swiperSlideSize+a),p=-(o-h),v=p+t.slidesSizesGrid[l],_=p>=0&&p<=t.size-t.slidesSizesGrid[l],E=p>=0&&p<t.size-1||v>1&&v<=t.size||p<=0&&v>=t.size;E&&(t.visibleSlides.push(c),t.visibleSlidesIndexes.push(l)),TA(c,E,e.slideVisibleClass),TA(c,_,e.slideFullyVisibleClass),c.progress=s?-f:f,c.originalProgress=s?-m:m}}function IG(i){const t=this;if(typeof i>"u"){const h=t.rtlTranslate?-1:1;i=t&&t.translate&&t.translate*h||0}const e=t.params,n=t.maxTranslate()-t.minTranslate();let{progress:s,isBeginning:r,isEnd:o,progressLoop:a}=t;const l=r,c=o;if(n===0)s=0,r=!0,o=!0;else{s=(i-t.minTranslate())/n;const h=Math.abs(i-t.minTranslate())<1,f=Math.abs(i-t.maxTranslate())<1;r=h||s<=0,o=f||s>=1,h&&(s=0),f&&(s=1)}if(e.loop){const h=t.getSlideIndexByData(0),f=t.getSlideIndexByData(t.slides.length-1),m=t.slidesGrid[h],p=t.slidesGrid[f],v=t.slidesGrid[t.slidesGrid.length-1],_=Math.abs(i);_>=m?a=(_-m)/v:a=(_+v-p)/v,a>1&&(a-=1)}Object.assign(t,{progress:s,progressLoop:a,isBeginning:r,isEnd:o}),(e.watchSlidesProgress||e.centeredSlides&&e.autoHeight)&&t.updateSlidesProgress(i),r&&!l&&t.emit("reachBeginning toEdge"),o&&!c&&t.emit("reachEnd toEdge"),(l&&!r||c&&!o)&&t.emit("fromEdge"),t.emit("progress",s)}const K0=(i,t,e)=>{t&&!i.classList.contains(e)?i.classList.add(e):!t&&i.classList.contains(e)&&i.classList.remove(e)};function RG(){const i=this,{slides:t,params:e,slidesEl:n,activeIndex:s}=i,r=i.virtual&&e.virtual.enabled,o=i.grid&&e.grid&&e.grid.rows>1,a=f=>pr(n,`.${e.slideClass}${f}, swiper-slide${f}`)[0];let l,c,h;if(r)if(e.loop){let f=s-i.virtual.slidesBefore;f<0&&(f=i.virtual.slides.length+f),f>=i.virtual.slides.length&&(f-=i.virtual.slides.length),l=a(`[data-swiper-slide-index="${f}"]`)}else l=a(`[data-swiper-slide-index="${s}"]`);else o?(l=t.find(f=>f.column===s),h=t.find(f=>f.column===s+1),c=t.find(f=>f.column===s-1)):l=t[s];l&&(o||(h=bG(l,`.${e.slideClass}, swiper-slide`)[0],e.loop&&!h&&(h=t[0]),c=pG(l,`.${e.slideClass}, swiper-slide`)[0],e.loop&&!c===0&&(c=t[t.length-1]))),t.forEach(f=>{K0(f,f===l,e.slideActiveClass),K0(f,f===h,e.slideNextClass),K0(f,f===c,e.slidePrevClass)}),i.emitSlidesClasses()}const np=(i,t)=>{if(!i||i.destroyed||!i.params)return;const e=()=>i.isElement?"swiper-slide":`.${i.params.slideClass}`,n=t.closest(e());if(n){let s=n.querySelector(`.${i.params.lazyPreloaderClass}`);!s&&i.isElement&&(n.shadowRoot?s=n.shadowRoot.querySelector(`.${i.params.lazyPreloaderClass}`):requestAnimationFrame(()=>{n.shadowRoot&&(s=n.shadowRoot.querySelector(`.${i.params.lazyPreloaderClass}`),s&&s.remove())})),s&&s.remove()}},Y0=(i,t)=>{if(!i.slides[t])return;const e=i.slides[t].querySelector('[loading="lazy"]');e&&e.removeAttribute("loading")},Ry=i=>{if(!i||i.destroyed||!i.params)return;let t=i.params.lazyPreloadPrevNext;const e=i.slides.length;if(!e||!t||t<0)return;t=Math.min(t,e);const n=i.params.slidesPerView==="auto"?i.slidesPerViewDynamic():Math.ceil(i.params.slidesPerView),s=i.activeIndex;if(i.params.grid&&i.params.grid.rows>1){const o=s,a=[o-t];a.push(...Array.from({length:t}).map((l,c)=>o+n+c)),i.slides.forEach((l,c)=>{a.includes(l.column)&&Y0(i,c)});return}const r=s+n-1;if(i.params.rewind||i.params.loop)for(let o=s-t;o<=r+t;o+=1){const a=(o%e+e)%e;(a<s||a>r)&&Y0(i,a)}else for(let o=Math.max(s-t,0);o<=Math.min(r+t,e-1);o+=1)o!==s&&(o>r||o<s)&&Y0(i,o)};function OG(i){const{slidesGrid:t,params:e}=i,n=i.rtlTranslate?i.translate:-i.translate;let s;for(let r=0;r<t.length;r+=1)typeof t[r+1]<"u"?n>=t[r]&&n<t[r+1]-(t[r+1]-t[r])/2?s=r:n>=t[r]&&n<t[r+1]&&(s=r+1):n>=t[r]&&(s=r);return e.normalizeSlideIndex&&(s<0||typeof s>"u")&&(s=0),s}function NG(i){const t=this,e=t.rtlTranslate?t.translate:-t.translate,{snapGrid:n,params:s,activeIndex:r,realIndex:o,snapIndex:a}=t;let l=i,c;const h=p=>{let v=p-t.virtual.slidesBefore;return v<0&&(v=t.virtual.slides.length+v),v>=t.virtual.slides.length&&(v-=t.virtual.slides.length),v};if(typeof l>"u"&&(l=OG(t)),n.indexOf(e)>=0)c=n.indexOf(e);else{const p=Math.min(s.slidesPerGroupSkip,l);c=p+Math.floor((l-p)/s.slidesPerGroup)}if(c>=n.length&&(c=n.length-1),l===r&&!t.params.loop){c!==a&&(t.snapIndex=c,t.emit("snapIndexChange"));return}if(l===r&&t.params.loop&&t.virtual&&t.params.virtual.enabled){t.realIndex=h(l);return}const f=t.grid&&s.grid&&s.grid.rows>1;let m;if(t.virtual&&s.virtual.enabled&&s.loop)m=h(l);else if(f){const p=t.slides.find(_=>_.column===l);let v=parseInt(p.getAttribute("data-swiper-slide-index"),10);Number.isNaN(v)&&(v=Math.max(t.slides.indexOf(p),0)),m=Math.floor(v/s.grid.rows)}else if(t.slides[l]){const p=t.slides[l].getAttribute("data-swiper-slide-index");p?m=parseInt(p,10):m=l}else m=l;Object.assign(t,{previousSnapIndex:a,snapIndex:c,previousRealIndex:o,realIndex:m,previousIndex:r,activeIndex:l}),t.initialized&&Ry(t),t.emit("activeIndexChange"),t.emit("snapIndexChange"),(t.initialized||t.params.runCallbacksOnInit)&&(o!==m&&t.emit("realIndexChange"),t.emit("slideChange"))}function MG(i,t){const e=this,n=e.params;let s=i.closest(`.${n.slideClass}, swiper-slide`);!s&&e.isElement&&t&&t.length>1&&t.includes(i)&&[...t.slice(t.indexOf(i)+1,t.length)].forEach(a=>{!s&&a.matches&&a.matches(`.${n.slideClass}, swiper-slide`)&&(s=a)});let r=!1,o;if(s){for(let a=0;a<e.slides.length;a+=1)if(e.slides[a]===s){r=!0,o=a;break}}if(s&&r)e.clickedSlide=s,e.virtual&&e.params.virtual.enabled?e.clickedIndex=parseInt(s.getAttribute("data-swiper-slide-index"),10):e.clickedIndex=o;else{e.clickedSlide=void 0,e.clickedIndex=void 0;return}n.slideToClickedSlide&&e.clickedIndex!==void 0&&e.clickedIndex!==e.activeIndex&&e.slideToClickedSlide()}var LG={updateSize:TG,updateSlides:kG,updateAutoHeight:SG,updateSlidesOffset:AG,updateSlidesProgress:PG,updateProgress:IG,updateSlidesClasses:RG,updateActiveIndex:NG,updateClickedSlide:MG};function VG(i){i===void 0&&(i=this.isHorizontal()?"x":"y");const t=this,{params:e,rtlTranslate:n,translate:s,wrapperEl:r}=t;if(e.virtualTranslate)return n?-s:s;if(e.cssMode)return s;let o=hG(r,i);return o+=t.cssOverflowAdjustment(),n&&(o=-o),o||0}function DG(i,t){const e=this,{rtlTranslate:n,params:s,wrapperEl:r,progress:o}=e;let a=0,l=0;const c=0;e.isHorizontal()?a=n?-i:i:l=i,s.roundLengths&&(a=Math.floor(a),l=Math.floor(l)),e.previousTranslate=e.translate,e.translate=e.isHorizontal()?a:l,s.cssMode?r[e.isHorizontal()?"scrollLeft":"scrollTop"]=e.isHorizontal()?-a:-l:s.virtualTranslate||(e.isHorizontal()?a-=e.cssOverflowAdjustment():l-=e.cssOverflowAdjustment(),r.style.transform=`translate3d(${a}px, ${l}px, ${c}px)`);let h;const f=e.maxTranslate()-e.minTranslate();f===0?h=0:h=(i-e.minTranslate())/f,h!==o&&e.updateProgress(i),e.emit("setTranslate",e.translate,t)}function BG(){return-this.snapGrid[0]}function FG(){return-this.snapGrid[this.snapGrid.length-1]}function $G(i,t,e,n,s){i===void 0&&(i=0),t===void 0&&(t=this.params.speed),e===void 0&&(e=!0),n===void 0&&(n=!0);const r=this,{params:o,wrapperEl:a}=r;if(r.animating&&o.preventInteractionOnTransition)return!1;const l=r.minTranslate(),c=r.maxTranslate();let h;if(n&&i>l?h=l:n&&i<c?h=c:h=i,r.updateProgress(h),o.cssMode){const f=r.isHorizontal();if(t===0)a[f?"scrollLeft":"scrollTop"]=-h;else{if(!r.support.smoothScroll)return nN({swiper:r,targetPosition:-h,side:f?"left":"top"}),!0;a.scrollTo({[f?"left":"top"]:-h,behavior:"smooth"})}return!0}return t===0?(r.setTransition(0),r.setTranslate(h),e&&(r.emit("beforeTransitionStart",t,s),r.emit("transitionEnd"))):(r.setTransition(t),r.setTranslate(h),e&&(r.emit("beforeTransitionStart",t,s),r.emit("transitionStart")),r.animating||(r.animating=!0,r.onTranslateToWrapperTransitionEnd||(r.onTranslateToWrapperTransitionEnd=function(m){!r||r.destroyed||m.target===this&&(r.wrapperEl.removeEventListener("transitionend",r.onTranslateToWrapperTransitionEnd),r.onTranslateToWrapperTransitionEnd=null,delete r.onTranslateToWrapperTransitionEnd,r.animating=!1,e&&r.emit("transitionEnd"))}),r.wrapperEl.addEventListener("transitionend",r.onTranslateToWrapperTransitionEnd))),!0}var zG={getTranslate:VG,setTranslate:DG,minTranslate:BG,maxTranslate:FG,translateTo:$G};function jG(i,t){const e=this;e.params.cssMode||(e.wrapperEl.style.transitionDuration=`${i}ms`,e.wrapperEl.style.transitionDelay=i===0?"0ms":""),e.emit("setTransition",i,t)}function oN(i){let{swiper:t,runCallbacks:e,direction:n,step:s}=i;const{activeIndex:r,previousIndex:o}=t;let a=n;if(a||(r>o?a="next":r<o?a="prev":a="reset"),t.emit(`transition${s}`),e&&r!==o){if(a==="reset"){t.emit(`slideResetTransition${s}`);return}t.emit(`slideChangeTransition${s}`),a==="next"?t.emit(`slideNextTransition${s}`):t.emit(`slidePrevTransition${s}`)}}function HG(i,t){i===void 0&&(i=!0);const e=this,{params:n}=e;n.cssMode||(n.autoHeight&&e.updateAutoHeight(),oN({swiper:e,runCallbacks:i,direction:t,step:"Start"}))}function UG(i,t){i===void 0&&(i=!0);const e=this,{params:n}=e;e.animating=!1,!n.cssMode&&(e.setTransition(0),oN({swiper:e,runCallbacks:i,direction:t,step:"End"}))}var WG={setTransition:jG,transitionStart:HG,transitionEnd:UG};function qG(i,t,e,n,s){i===void 0&&(i=0),e===void 0&&(e=!0),typeof i=="string"&&(i=parseInt(i,10));const r=this;let o=i;o<0&&(o=0);const{params:a,snapGrid:l,slidesGrid:c,previousIndex:h,activeIndex:f,rtlTranslate:m,wrapperEl:p,enabled:v}=r;if(!v&&!n&&!s||r.destroyed||r.animating&&a.preventInteractionOnTransition)return!1;typeof t>"u"&&(t=r.params.speed);const _=Math.min(r.params.slidesPerGroupSkip,o);let E=_+Math.floor((o-_)/r.params.slidesPerGroup);E>=l.length&&(E=l.length-1);const x=-l[E];if(a.normalizeSlideIndex)for(let N=0;N<c.length;N+=1){const L=-Math.floor(x*100),M=Math.floor(c[N]*100),F=Math.floor(c[N+1]*100);typeof c[N+1]<"u"?L>=M&&L<F-(F-M)/2?o=N:L>=M&&L<F&&(o=N+1):L>=M&&(o=N)}if(r.initialized&&o!==f&&(!r.allowSlideNext&&(m?x>r.translate&&x>r.minTranslate():x<r.translate&&x<r.minTranslate())||!r.allowSlidePrev&&x>r.translate&&x>r.maxTranslate()&&(f||0)!==o))return!1;o!==(h||0)&&e&&r.emit("beforeSlideChangeStart"),r.updateProgress(x);let k;o>f?k="next":o<f?k="prev":k="reset";const A=r.virtual&&r.params.virtual.enabled;if(!(A&&s)&&(m&&-x===r.translate||!m&&x===r.translate))return r.updateActiveIndex(o),a.autoHeight&&r.updateAutoHeight(),r.updateSlidesClasses(),a.effect!=="slide"&&r.setTranslate(x),k!=="reset"&&(r.transitionStart(e,k),r.transitionEnd(e,k)),!1;if(a.cssMode){const N=r.isHorizontal(),L=m?x:-x;if(t===0)A&&(r.wrapperEl.style.scrollSnapType="none",r._immediateVirtual=!0),A&&!r._cssModeVirtualInitialSet&&r.params.initialSlide>0?(r._cssModeVirtualInitialSet=!0,requestAnimationFrame(()=>{p[N?"scrollLeft":"scrollTop"]=L})):p[N?"scrollLeft":"scrollTop"]=L,A&&requestAnimationFrame(()=>{r.wrapperEl.style.scrollSnapType="",r._immediateVirtual=!1});else{if(!r.support.smoothScroll)return nN({swiper:r,targetPosition:L,side:N?"left":"top"}),!0;p.scrollTo({[N?"left":"top"]:L,behavior:"smooth"})}return!0}const P=rN().isSafari;return A&&!s&&P&&r.isElement&&r.virtual.update(!1,!1,o),r.setTransition(t),r.setTranslate(x),r.updateActiveIndex(o),r.updateSlidesClasses(),r.emit("beforeTransitionStart",t,n),r.transitionStart(e,k),t===0?r.transitionEnd(e,k):r.animating||(r.animating=!0,r.onSlideToWrapperTransitionEnd||(r.onSlideToWrapperTransitionEnd=function(L){!r||r.destroyed||L.target===this&&(r.wrapperEl.removeEventListener("transitionend",r.onSlideToWrapperTransitionEnd),r.onSlideToWrapperTransitionEnd=null,delete r.onSlideToWrapperTransitionEnd,r.transitionEnd(e,k))}),r.wrapperEl.addEventListener("transitionend",r.onSlideToWrapperTransitionEnd)),!0}function GG(i,t,e,n){i===void 0&&(i=0),e===void 0&&(e=!0),typeof i=="string"&&(i=parseInt(i,10));const s=this;if(s.destroyed)return;typeof t>"u"&&(t=s.params.speed);const r=s.grid&&s.params.grid&&s.params.grid.rows>1;let o=i;if(s.params.loop)if(s.virtual&&s.params.virtual.enabled)o=o+s.virtual.slidesBefore;else{let a;if(r){const m=o*s.params.grid.rows;a=s.slides.find(p=>p.getAttribute("data-swiper-slide-index")*1===m).column}else a=s.getSlideIndexByData(o);const l=r?Math.ceil(s.slides.length/s.params.grid.rows):s.slides.length,{centeredSlides:c}=s.params;let h=s.params.slidesPerView;h==="auto"?h=s.slidesPerViewDynamic():(h=Math.ceil(parseFloat(s.params.slidesPerView,10)),c&&h%2===0&&(h=h+1));let f=l-a<h;if(c&&(f=f||a<Math.ceil(h/2)),n&&c&&s.params.slidesPerView!=="auto"&&!r&&(f=!1),f){const m=c?a<s.activeIndex?"prev":"next":a-s.activeIndex-1<s.params.slidesPerView?"next":"prev";s.loopFix({direction:m,slideTo:!0,activeSlideIndex:m==="next"?a+1:a-l+1,slideRealIndex:m==="next"?s.realIndex:void 0})}if(r){const m=o*s.params.grid.rows;o=s.slides.find(p=>p.getAttribute("data-swiper-slide-index")*1===m).column}else o=s.getSlideIndexByData(o)}return requestAnimationFrame(()=>{s.slideTo(o,t,e,n)}),s}function KG(i,t,e){t===void 0&&(t=!0);const n=this,{enabled:s,params:r,animating:o}=n;if(!s||n.destroyed)return n;typeof i>"u"&&(i=n.params.speed);let a=r.slidesPerGroup;r.slidesPerView==="auto"&&r.slidesPerGroup===1&&r.slidesPerGroupAuto&&(a=Math.max(n.slidesPerViewDynamic("current",!0),1));const l=n.activeIndex<r.slidesPerGroupSkip?1:a,c=n.virtual&&r.virtual.enabled;if(r.loop){if(o&&!c&&r.loopPreventsSliding)return!1;if(n.loopFix({direction:"next"}),n._clientLeft=n.wrapperEl.clientLeft,n.activeIndex===n.slides.length-1&&r.cssMode)return requestAnimationFrame(()=>{n.slideTo(n.activeIndex+l,i,t,e)}),!0}return r.rewind&&n.isEnd?n.slideTo(0,i,t,e):n.slideTo(n.activeIndex+l,i,t,e)}function YG(i,t,e){t===void 0&&(t=!0);const n=this,{params:s,snapGrid:r,slidesGrid:o,rtlTranslate:a,enabled:l,animating:c}=n;if(!l||n.destroyed)return n;typeof i>"u"&&(i=n.params.speed);const h=n.virtual&&s.virtual.enabled;if(s.loop){if(c&&!h&&s.loopPreventsSliding)return!1;n.loopFix({direction:"prev"}),n._clientLeft=n.wrapperEl.clientLeft}const f=a?n.translate:-n.translate;function m(k){return k<0?-Math.floor(Math.abs(k)):Math.floor(k)}const p=m(f),v=r.map(k=>m(k)),_=s.freeMode&&s.freeMode.enabled;let E=r[v.indexOf(p)-1];if(typeof E>"u"&&(s.cssMode||_)){let k;r.forEach((A,S)=>{p>=A&&(k=S)}),typeof k<"u"&&(E=_?r[k]:r[k>0?k-1:k])}let x=0;if(typeof E<"u"&&(x=o.indexOf(E),x<0&&(x=n.activeIndex-1),s.slidesPerView==="auto"&&s.slidesPerGroup===1&&s.slidesPerGroupAuto&&(x=x-n.slidesPerViewDynamic("previous",!0)+1,x=Math.max(x,0))),s.rewind&&n.isBeginning){const k=n.params.virtual&&n.params.virtual.enabled&&n.virtual?n.virtual.slides.length-1:n.slides.length-1;return n.slideTo(k,i,t,e)}else if(s.loop&&n.activeIndex===0&&s.cssMode)return requestAnimationFrame(()=>{n.slideTo(x,i,t,e)}),!0;return n.slideTo(x,i,t,e)}function ZG(i,t,e){t===void 0&&(t=!0);const n=this;if(!n.destroyed)return typeof i>"u"&&(i=n.params.speed),n.slideTo(n.activeIndex,i,t,e)}function XG(i,t,e,n){t===void 0&&(t=!0),n===void 0&&(n=.5);const s=this;if(s.destroyed)return;typeof i>"u"&&(i=s.params.speed);let r=s.activeIndex;const o=Math.min(s.params.slidesPerGroupSkip,r),a=o+Math.floor((r-o)/s.params.slidesPerGroup),l=s.rtlTranslate?s.translate:-s.translate;if(l>=s.snapGrid[a]){const c=s.snapGrid[a],h=s.snapGrid[a+1];l-c>(h-c)*n&&(r+=s.params.slidesPerGroup)}else{const c=s.snapGrid[a-1],h=s.snapGrid[a];l-c<=(h-c)*n&&(r-=s.params.slidesPerGroup)}return r=Math.max(r,0),r=Math.min(r,s.slidesGrid.length-1),s.slideTo(r,i,t,e)}function JG(){const i=this;if(i.destroyed)return;const{params:t,slidesEl:e}=i,n=t.slidesPerView==="auto"?i.slidesPerViewDynamic():t.slidesPerView;let s=i.clickedIndex,r;const o=i.isElement?"swiper-slide":`.${t.slideClass}`;if(t.loop){if(i.animating)return;r=parseInt(i.clickedSlide.getAttribute("data-swiper-slide-index"),10),t.centeredSlides?s<i.loopedSlides-n/2||s>i.slides.length-i.loopedSlides+n/2?(i.loopFix(),s=i.getSlideIndex(pr(e,`${o}[data-swiper-slide-index="${r}"]`)[0]),Iy(()=>{i.slideTo(s)})):i.slideTo(s):s>i.slides.length-n?(i.loopFix(),s=i.getSlideIndex(pr(e,`${o}[data-swiper-slide-index="${r}"]`)[0]),Iy(()=>{i.slideTo(s)})):i.slideTo(s)}else i.slideTo(s)}var QG={slideTo:qG,slideToLoop:GG,slideNext:KG,slidePrev:YG,slideReset:ZG,slideToClosest:XG,slideToClickedSlide:JG};function eK(i){const t=this,{params:e,slidesEl:n}=t;if(!e.loop||t.virtual&&t.params.virtual.enabled)return;const s=()=>{pr(n,`.${e.slideClass}, swiper-slide`).forEach((f,m)=>{f.setAttribute("data-swiper-slide-index",m)})},r=t.grid&&e.grid&&e.grid.rows>1,o=e.slidesPerGroup*(r?e.grid.rows:1),a=t.slides.length%o!==0,l=r&&t.slides.length%e.grid.rows!==0,c=h=>{for(let f=0;f<h;f+=1){const m=t.isElement?Lp("swiper-slide",[e.slideBlankClass]):Lp("div",[e.slideClass,e.slideBlankClass]);t.slidesEl.append(m)}};if(a){if(e.loopAddBlankSlides){const h=o-t.slides.length%o;c(h),t.recalcSlides(),t.updateSlides()}else Mp("Swiper Loop Warning: The number of slides is not even to slidesPerGroup, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");s()}else if(l){if(e.loopAddBlankSlides){const h=e.grid.rows-t.slides.length%e.grid.rows;c(h),t.recalcSlides(),t.updateSlides()}else Mp("Swiper Loop Warning: The number of slides is not even to grid.rows, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");s()}else s();t.loopFix({slideRealIndex:i,direction:e.centeredSlides?void 0:"next"})}function tK(i){let{slideRealIndex:t,slideTo:e=!0,direction:n,setTranslate:s,activeSlideIndex:r,byController:o,byMousewheel:a}=i===void 0?{}:i;const l=this;if(!l.params.loop)return;l.emit("beforeLoopFix");const{slides:c,allowSlidePrev:h,allowSlideNext:f,slidesEl:m,params:p}=l,{centeredSlides:v}=p;if(l.allowSlidePrev=!0,l.allowSlideNext=!0,l.virtual&&p.virtual.enabled){e&&(!p.centeredSlides&&l.snapIndex===0?l.slideTo(l.virtual.slides.length,0,!1,!0):p.centeredSlides&&l.snapIndex<p.slidesPerView?l.slideTo(l.virtual.slides.length+l.snapIndex,0,!1,!0):l.snapIndex===l.snapGrid.length-1&&l.slideTo(l.virtual.slidesBefore,0,!1,!0)),l.allowSlidePrev=h,l.allowSlideNext=f,l.emit("loopFix");return}let _=p.slidesPerView;_==="auto"?_=l.slidesPerViewDynamic():(_=Math.ceil(parseFloat(p.slidesPerView,10)),v&&_%2===0&&(_=_+1));const E=p.slidesPerGroupAuto?_:p.slidesPerGroup;let x=E;x%E!==0&&(x+=E-x%E),x+=p.loopAdditionalSlides,l.loopedSlides=x;const k=l.grid&&p.grid&&p.grid.rows>1;c.length<_+x?Mp("Swiper Loop Warning: The number of slides is not enough for loop mode, it will be disabled and not function properly. You need to add more slides (or make duplicates) or lower the values of slidesPerView and slidesPerGroup parameters"):k&&p.grid.fill==="row"&&Mp("Swiper Loop Warning: Loop mode is not compatible with grid.fill = `row`");const A=[],S=[];let O=l.activeIndex;typeof r>"u"?r=l.getSlideIndex(c.find(te=>te.classList.contains(p.slideActiveClass))):O=r;const P=n==="next"||!n,N=n==="prev"||!n;let L=0,M=0;const F=k?Math.ceil(c.length/p.grid.rows):c.length,K=(k?c[r].column:r)+(v&&typeof s>"u"?-_/2+.5:0);if(K<x){L=Math.max(x-K,E);for(let te=0;te<x-K;te+=1){const ve=te-Math.floor(te/F)*F;if(k){const Se=F-ve-1;for(let _e=c.length-1;_e>=0;_e-=1)c[_e].column===Se&&A.push(_e)}else A.push(F-ve-1)}}else if(K+_>F-x){M=Math.max(K-(F-x*2),E);for(let te=0;te<M;te+=1){const ve=te-Math.floor(te/F)*F;k?c.forEach((Se,_e)=>{Se.column===ve&&S.push(_e)}):S.push(ve)}}if(l.__preventObserver__=!0,requestAnimationFrame(()=>{l.__preventObserver__=!1}),N&&A.forEach(te=>{c[te].swiperLoopMoveDOM=!0,m.prepend(c[te]),c[te].swiperLoopMoveDOM=!1}),P&&S.forEach(te=>{c[te].swiperLoopMoveDOM=!0,m.append(c[te]),c[te].swiperLoopMoveDOM=!1}),l.recalcSlides(),p.slidesPerView==="auto"?l.updateSlides():k&&(A.length>0&&N||S.length>0&&P)&&l.slides.forEach((te,ve)=>{l.grid.updateSlide(ve,te,l.slides)}),p.watchSlidesProgress&&l.updateSlidesOffset(),e){if(A.length>0&&N){if(typeof t>"u"){const te=l.slidesGrid[O],Se=l.slidesGrid[O+L]-te;a?l.setTranslate(l.translate-Se):(l.slideTo(O+Math.ceil(L),0,!1,!0),s&&(l.touchEventsData.startTranslate=l.touchEventsData.startTranslate-Se,l.touchEventsData.currentTranslate=l.touchEventsData.currentTranslate-Se))}else if(s){const te=k?A.length/p.grid.rows:A.length;l.slideTo(l.activeIndex+te,0,!1,!0),l.touchEventsData.currentTranslate=l.translate}}else if(S.length>0&&P)if(typeof t>"u"){const te=l.slidesGrid[O],Se=l.slidesGrid[O-M]-te;a?l.setTranslate(l.translate-Se):(l.slideTo(O-M,0,!1,!0),s&&(l.touchEventsData.startTranslate=l.touchEventsData.startTranslate-Se,l.touchEventsData.currentTranslate=l.touchEventsData.currentTranslate-Se))}else{const te=k?S.length/p.grid.rows:S.length;l.slideTo(l.activeIndex-te,0,!1,!0)}}if(l.allowSlidePrev=h,l.allowSlideNext=f,l.controller&&l.controller.control&&!o){const te={slideRealIndex:t,direction:n,setTranslate:s,activeSlideIndex:r,byController:!0};Array.isArray(l.controller.control)?l.controller.control.forEach(ve=>{!ve.destroyed&&ve.params.loop&&ve.loopFix({...te,slideTo:ve.params.slidesPerView===p.slidesPerView?e:!1})}):l.controller.control instanceof l.constructor&&l.controller.control.params.loop&&l.controller.control.loopFix({...te,slideTo:l.controller.control.params.slidesPerView===p.slidesPerView?e:!1})}l.emit("loopFix")}function nK(){const i=this,{params:t,slidesEl:e}=i;if(!t.loop||i.virtual&&i.params.virtual.enabled)return;i.recalcSlides();const n=[];i.slides.forEach(s=>{const r=typeof s.swiperSlideIndex>"u"?s.getAttribute("data-swiper-slide-index")*1:s.swiperSlideIndex;n[r]=s}),i.slides.forEach(s=>{s.removeAttribute("data-swiper-slide-index")}),n.forEach(s=>{e.append(s)}),i.recalcSlides(),i.slideTo(i.realIndex,0)}var iK={loopCreate:eK,loopFix:tK,loopDestroy:nK};function sK(i){const t=this;if(!t.params.simulateTouch||t.params.watchOverflow&&t.isLocked||t.params.cssMode)return;const e=t.params.touchEventsTarget==="container"?t.el:t.wrapperEl;t.isElement&&(t.__preventObserver__=!0),e.style.cursor="move",e.style.cursor=i?"grabbing":"grab",t.isElement&&requestAnimationFrame(()=>{t.__preventObserver__=!1})}function rK(){const i=this;i.params.watchOverflow&&i.isLocked||i.params.cssMode||(i.isElement&&(i.__preventObserver__=!0),i[i.params.touchEventsTarget==="container"?"el":"wrapperEl"].style.cursor="",i.isElement&&requestAnimationFrame(()=>{i.__preventObserver__=!1}))}var oK={setGrabCursor:sK,unsetGrabCursor:rK};function aK(i,t){t===void 0&&(t=this);function e(n){if(!n||n===Ga()||n===Ii())return null;n.assignedSlot&&(n=n.assignedSlot);const s=n.closest(i);return!s&&!n.getRootNode?null:s||e(n.getRootNode().host)}return e(t)}function kA(i,t,e){const n=Ii(),{params:s}=i,r=s.edgeSwipeDetection,o=s.edgeSwipeThreshold;return r&&(e<=o||e>=n.innerWidth-o)?r==="prevent"?(t.preventDefault(),!0):!1:!0}function lK(i){const t=this,e=Ga();let n=i;n.originalEvent&&(n=n.originalEvent);const s=t.touchEventsData;if(n.type==="pointerdown"){if(s.pointerId!==null&&s.pointerId!==n.pointerId)return;s.pointerId=n.pointerId}else n.type==="touchstart"&&n.targetTouches.length===1&&(s.touchId=n.targetTouches[0].identifier);if(n.type==="touchstart"){kA(t,n,n.targetTouches[0].pageX);return}const{params:r,touches:o,enabled:a}=t;if(!a||!r.simulateTouch&&n.pointerType==="mouse"||t.animating&&r.preventInteractionOnTransition)return;!t.animating&&r.cssMode&&r.loop&&t.loopFix();let l=n.target;if(r.touchEventsTarget==="wrapper"&&!gG(l,t.wrapperEl)||"which"in n&&n.which===3||"button"in n&&n.button>0||s.isTouched&&s.isMoved)return;const c=!!r.noSwipingClass&&r.noSwipingClass!=="",h=n.composedPath?n.composedPath():n.path;c&&n.target&&n.target.shadowRoot&&h&&(l=h[0]);const f=r.noSwipingSelector?r.noSwipingSelector:`.${r.noSwipingClass}`,m=!!(n.target&&n.target.shadowRoot);if(r.noSwiping&&(m?aK(f,l):l.closest(f))){t.allowClick=!0;return}if(r.swipeHandler&&!l.closest(r.swipeHandler))return;o.currentX=n.pageX,o.currentY=n.pageY;const p=o.currentX,v=o.currentY;if(!kA(t,n,p))return;Object.assign(s,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),o.startX=p,o.startY=v,s.touchStartTime=Ml(),t.allowClick=!0,t.updateSize(),t.swipeDirection=void 0,r.threshold>0&&(s.allowThresholdMove=!1);let _=!0;l.matches(s.focusableElements)&&(_=!1,l.nodeName==="SELECT"&&(s.isTouched=!1)),e.activeElement&&e.activeElement.matches(s.focusableElements)&&e.activeElement!==l&&(n.pointerType==="mouse"||n.pointerType!=="mouse"&&!l.matches(s.focusableElements))&&e.activeElement.blur();const E=_&&t.allowTouchMove&&r.touchStartPreventDefault;(r.touchStartForcePreventDefault||E)&&!l.isContentEditable&&n.preventDefault(),r.freeMode&&r.freeMode.enabled&&t.freeMode&&t.animating&&!r.cssMode&&t.freeMode.onTouchStart(),t.emit("touchStart",n)}function cK(i){const t=Ga(),e=this,n=e.touchEventsData,{params:s,touches:r,rtlTranslate:o,enabled:a}=e;if(!a||!s.simulateTouch&&i.pointerType==="mouse")return;let l=i;if(l.originalEvent&&(l=l.originalEvent),l.type==="pointermove"&&(n.touchId!==null||l.pointerId!==n.pointerId))return;let c;if(l.type==="touchmove"){if(c=[...l.changedTouches].find(P=>P.identifier===n.touchId),!c||c.identifier!==n.touchId)return}else c=l;if(!n.isTouched){n.startMoving&&n.isScrolling&&e.emit("touchMoveOpposite",l);return}const h=c.pageX,f=c.pageY;if(l.preventedByNestedSwiper){r.startX=h,r.startY=f;return}if(!e.allowTouchMove){l.target.matches(n.focusableElements)||(e.allowClick=!1),n.isTouched&&(Object.assign(r,{startX:h,startY:f,currentX:h,currentY:f}),n.touchStartTime=Ml());return}if(s.touchReleaseOnEdges&&!s.loop){if(e.isVertical()){if(f<r.startY&&e.translate<=e.maxTranslate()||f>r.startY&&e.translate>=e.minTranslate()){n.isTouched=!1,n.isMoved=!1;return}}else if(h<r.startX&&e.translate<=e.maxTranslate()||h>r.startX&&e.translate>=e.minTranslate())return}if(t.activeElement&&t.activeElement.matches(n.focusableElements)&&t.activeElement!==l.target&&l.pointerType!=="mouse"&&t.activeElement.blur(),t.activeElement&&l.target===t.activeElement&&l.target.matches(n.focusableElements)){n.isMoved=!0,e.allowClick=!1;return}n.allowTouchCallbacks&&e.emit("touchMove",l),r.previousX=r.currentX,r.previousY=r.currentY,r.currentX=h,r.currentY=f;const m=r.currentX-r.startX,p=r.currentY-r.startY;if(e.params.threshold&&Math.sqrt(m**2+p**2)<e.params.threshold)return;if(typeof n.isScrolling>"u"){let P;e.isHorizontal()&&r.currentY===r.startY||e.isVertical()&&r.currentX===r.startX?n.isScrolling=!1:m*m+p*p>=25&&(P=Math.atan2(Math.abs(p),Math.abs(m))*180/Math.PI,n.isScrolling=e.isHorizontal()?P>s.touchAngle:90-P>s.touchAngle)}if(n.isScrolling&&e.emit("touchMoveOpposite",l),typeof n.startMoving>"u"&&(r.currentX!==r.startX||r.currentY!==r.startY)&&(n.startMoving=!0),n.isScrolling||l.type==="touchmove"&&n.preventTouchMoveFromPointerMove){n.isTouched=!1;return}if(!n.startMoving)return;e.allowClick=!1,!s.cssMode&&l.cancelable&&l.preventDefault(),s.touchMoveStopPropagation&&!s.nested&&l.stopPropagation();let v=e.isHorizontal()?m:p,_=e.isHorizontal()?r.currentX-r.previousX:r.currentY-r.previousY;s.oneWayMovement&&(v=Math.abs(v)*(o?1:-1),_=Math.abs(_)*(o?1:-1)),r.diff=v,v*=s.touchRatio,o&&(v=-v,_=-_);const E=e.touchesDirection;e.swipeDirection=v>0?"prev":"next",e.touchesDirection=_>0?"prev":"next";const x=e.params.loop&&!s.cssMode,k=e.touchesDirection==="next"&&e.allowSlideNext||e.touchesDirection==="prev"&&e.allowSlidePrev;if(!n.isMoved){if(x&&k&&e.loopFix({direction:e.swipeDirection}),n.startTranslate=e.getTranslate(),e.setTransition(0),e.animating){const P=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0,detail:{bySwiperTouchMove:!0}});e.wrapperEl.dispatchEvent(P)}n.allowMomentumBounce=!1,s.grabCursor&&(e.allowSlideNext===!0||e.allowSlidePrev===!0)&&e.setGrabCursor(!0),e.emit("sliderFirstMove",l)}let A;if(new Date().getTime(),s._loopSwapReset!==!1&&n.isMoved&&n.allowThresholdMove&&E!==e.touchesDirection&&x&&k&&Math.abs(v)>=1){Object.assign(r,{startX:h,startY:f,currentX:h,currentY:f,startTranslate:n.currentTranslate}),n.loopSwapReset=!0,n.startTranslate=n.currentTranslate;return}e.emit("sliderMove",l),n.isMoved=!0,n.currentTranslate=v+n.startTranslate;let S=!0,O=s.resistanceRatio;if(s.touchReleaseOnEdges&&(O=0),v>0?(x&&k&&!A&&n.allowThresholdMove&&n.currentTranslate>(s.centeredSlides?e.minTranslate()-e.slidesSizesGrid[e.activeIndex+1]-(s.slidesPerView!=="auto"&&e.slides.length-s.slidesPerView>=2?e.slidesSizesGrid[e.activeIndex+1]+e.params.spaceBetween:0)-e.params.spaceBetween:e.minTranslate())&&e.loopFix({direction:"prev",setTranslate:!0,activeSlideIndex:0}),n.currentTranslate>e.minTranslate()&&(S=!1,s.resistance&&(n.currentTranslate=e.minTranslate()-1+(-e.minTranslate()+n.startTranslate+v)**O))):v<0&&(x&&k&&!A&&n.allowThresholdMove&&n.currentTranslate<(s.centeredSlides?e.maxTranslate()+e.slidesSizesGrid[e.slidesSizesGrid.length-1]+e.params.spaceBetween+(s.slidesPerView!=="auto"&&e.slides.length-s.slidesPerView>=2?e.slidesSizesGrid[e.slidesSizesGrid.length-1]+e.params.spaceBetween:0):e.maxTranslate())&&e.loopFix({direction:"next",setTranslate:!0,activeSlideIndex:e.slides.length-(s.slidesPerView==="auto"?e.slidesPerViewDynamic():Math.ceil(parseFloat(s.slidesPerView,10)))}),n.currentTranslate<e.maxTranslate()&&(S=!1,s.resistance&&(n.currentTranslate=e.maxTranslate()+1-(e.maxTranslate()-n.startTranslate-v)**O))),S&&(l.preventedByNestedSwiper=!0),!e.allowSlideNext&&e.swipeDirection==="next"&&n.currentTranslate<n.startTranslate&&(n.currentTranslate=n.startTranslate),!e.allowSlidePrev&&e.swipeDirection==="prev"&&n.currentTranslate>n.startTranslate&&(n.currentTranslate=n.startTranslate),!e.allowSlidePrev&&!e.allowSlideNext&&(n.currentTranslate=n.startTranslate),s.threshold>0)if(Math.abs(v)>s.threshold||n.allowThresholdMove){if(!n.allowThresholdMove){n.allowThresholdMove=!0,r.startX=r.currentX,r.startY=r.currentY,n.currentTranslate=n.startTranslate,r.diff=e.isHorizontal()?r.currentX-r.startX:r.currentY-r.startY;return}}else{n.currentTranslate=n.startTranslate;return}!s.followFinger||s.cssMode||((s.freeMode&&s.freeMode.enabled&&e.freeMode||s.watchSlidesProgress)&&(e.updateActiveIndex(),e.updateSlidesClasses()),s.freeMode&&s.freeMode.enabled&&e.freeMode&&e.freeMode.onTouchMove(),e.updateProgress(n.currentTranslate),e.setTranslate(n.currentTranslate))}function uK(i){const t=this,e=t.touchEventsData;let n=i;n.originalEvent&&(n=n.originalEvent);let s;if(n.type==="touchend"||n.type==="touchcancel"){if(s=[...n.changedTouches].find(O=>O.identifier===e.touchId),!s||s.identifier!==e.touchId)return}else{if(e.touchId!==null||n.pointerId!==e.pointerId)return;s=n}if(["pointercancel","pointerout","pointerleave","contextmenu"].includes(n.type)&&!(["pointercancel","contextmenu"].includes(n.type)&&(t.browser.isSafari||t.browser.isWebView)))return;e.pointerId=null,e.touchId=null;const{params:o,touches:a,rtlTranslate:l,slidesGrid:c,enabled:h}=t;if(!h||!o.simulateTouch&&n.pointerType==="mouse")return;if(e.allowTouchCallbacks&&t.emit("touchEnd",n),e.allowTouchCallbacks=!1,!e.isTouched){e.isMoved&&o.grabCursor&&t.setGrabCursor(!1),e.isMoved=!1,e.startMoving=!1;return}o.grabCursor&&e.isMoved&&e.isTouched&&(t.allowSlideNext===!0||t.allowSlidePrev===!0)&&t.setGrabCursor(!1);const f=Ml(),m=f-e.touchStartTime;if(t.allowClick){const O=n.path||n.composedPath&&n.composedPath();t.updateClickedSlide(O&&O[0]||n.target,O),t.emit("tap click",n),m<300&&f-e.lastClickTime<300&&t.emit("doubleTap doubleClick",n)}if(e.lastClickTime=Ml(),Iy(()=>{t.destroyed||(t.allowClick=!0)}),!e.isTouched||!e.isMoved||!t.swipeDirection||a.diff===0&&!e.loopSwapReset||e.currentTranslate===e.startTranslate&&!e.loopSwapReset){e.isTouched=!1,e.isMoved=!1,e.startMoving=!1;return}e.isTouched=!1,e.isMoved=!1,e.startMoving=!1;let p;if(o.followFinger?p=l?t.translate:-t.translate:p=-e.currentTranslate,o.cssMode)return;if(o.freeMode&&o.freeMode.enabled){t.freeMode.onTouchEnd({currentPos:p});return}const v=p>=-t.maxTranslate()&&!t.params.loop;let _=0,E=t.slidesSizesGrid[0];for(let O=0;O<c.length;O+=O<o.slidesPerGroupSkip?1:o.slidesPerGroup){const P=O<o.slidesPerGroupSkip-1?1:o.slidesPerGroup;typeof c[O+P]<"u"?(v||p>=c[O]&&p<c[O+P])&&(_=O,E=c[O+P]-c[O]):(v||p>=c[O])&&(_=O,E=c[c.length-1]-c[c.length-2])}let x=null,k=null;o.rewind&&(t.isBeginning?k=o.virtual&&o.virtual.enabled&&t.virtual?t.virtual.slides.length-1:t.slides.length-1:t.isEnd&&(x=0));const A=(p-c[_])/E,S=_<o.slidesPerGroupSkip-1?1:o.slidesPerGroup;if(m>o.longSwipesMs){if(!o.longSwipes){t.slideTo(t.activeIndex);return}t.swipeDirection==="next"&&(A>=o.longSwipesRatio?t.slideTo(o.rewind&&t.isEnd?x:_+S):t.slideTo(_)),t.swipeDirection==="prev"&&(A>1-o.longSwipesRatio?t.slideTo(_+S):k!==null&&A<0&&Math.abs(A)>o.longSwipesRatio?t.slideTo(k):t.slideTo(_))}else{if(!o.shortSwipes){t.slideTo(t.activeIndex);return}t.navigation&&(n.target===t.navigation.nextEl||n.target===t.navigation.prevEl)?n.target===t.navigation.nextEl?t.slideTo(_+S):t.slideTo(_):(t.swipeDirection==="next"&&t.slideTo(x!==null?x:_+S),t.swipeDirection==="prev"&&t.slideTo(k!==null?k:_))}}function SA(){const i=this,{params:t,el:e}=i;if(e&&e.offsetWidth===0)return;t.breakpoints&&i.setBreakpoint();const{allowSlideNext:n,allowSlidePrev:s,snapGrid:r}=i,o=i.virtual&&i.params.virtual.enabled;i.allowSlideNext=!0,i.allowSlidePrev=!0,i.updateSize(),i.updateSlides(),i.updateSlidesClasses();const a=o&&t.loop;(t.slidesPerView==="auto"||t.slidesPerView>1)&&i.isEnd&&!i.isBeginning&&!i.params.centeredSlides&&!a?i.slideTo(i.slides.length-1,0,!1,!0):i.params.loop&&!o?i.slideToLoop(i.realIndex,0,!1,!0):i.slideTo(i.activeIndex,0,!1,!0),i.autoplay&&i.autoplay.running&&i.autoplay.paused&&(clearTimeout(i.autoplay.resizeTimeout),i.autoplay.resizeTimeout=setTimeout(()=>{i.autoplay&&i.autoplay.running&&i.autoplay.paused&&i.autoplay.resume()},500)),i.allowSlidePrev=s,i.allowSlideNext=n,i.params.watchOverflow&&r!==i.snapGrid&&i.checkOverflow()}function dK(i){const t=this;t.enabled&&(t.allowClick||(t.params.preventClicks&&i.preventDefault(),t.params.preventClicksPropagation&&t.animating&&(i.stopPropagation(),i.stopImmediatePropagation())))}function hK(){const i=this,{wrapperEl:t,rtlTranslate:e,enabled:n}=i;if(!n)return;i.previousTranslate=i.translate,i.isHorizontal()?i.translate=-t.scrollLeft:i.translate=-t.scrollTop,i.translate===0&&(i.translate=0),i.updateActiveIndex(),i.updateSlidesClasses();let s;const r=i.maxTranslate()-i.minTranslate();r===0?s=0:s=(i.translate-i.minTranslate())/r,s!==i.progress&&i.updateProgress(e?-i.translate:i.translate),i.emit("setTranslate",i.translate,!1)}function fK(i){const t=this;np(t,i.target),!(t.params.cssMode||t.params.slidesPerView!=="auto"&&!t.params.autoHeight)&&t.update()}function mK(){const i=this;i.documentTouchHandlerProceeded||(i.documentTouchHandlerProceeded=!0,i.params.touchReleaseOnEdges&&(i.el.style.touchAction="auto"))}const aN=(i,t)=>{const e=Ga(),{params:n,el:s,wrapperEl:r,device:o}=i,a=!!n.nested,l=t==="on"?"addEventListener":"removeEventListener",c=t;!s||typeof s=="string"||(e[l]("touchstart",i.onDocumentTouchStart,{passive:!1,capture:a}),s[l]("touchstart",i.onTouchStart,{passive:!1}),s[l]("pointerdown",i.onTouchStart,{passive:!1}),e[l]("touchmove",i.onTouchMove,{passive:!1,capture:a}),e[l]("pointermove",i.onTouchMove,{passive:!1,capture:a}),e[l]("touchend",i.onTouchEnd,{passive:!0}),e[l]("pointerup",i.onTouchEnd,{passive:!0}),e[l]("pointercancel",i.onTouchEnd,{passive:!0}),e[l]("touchcancel",i.onTouchEnd,{passive:!0}),e[l]("pointerout",i.onTouchEnd,{passive:!0}),e[l]("pointerleave",i.onTouchEnd,{passive:!0}),e[l]("contextmenu",i.onTouchEnd,{passive:!0}),(n.preventClicks||n.preventClicksPropagation)&&s[l]("click",i.onClick,!0),n.cssMode&&r[l]("scroll",i.onScroll),n.updateOnWindowResize?i[c](o.ios||o.android?"resize orientationchange observerUpdate":"resize observerUpdate",SA,!0):i[c]("observerUpdate",SA,!0),s[l]("load",i.onLoad,{capture:!0}))};function gK(){const i=this,{params:t}=i;i.onTouchStart=lK.bind(i),i.onTouchMove=cK.bind(i),i.onTouchEnd=uK.bind(i),i.onDocumentTouchStart=mK.bind(i),t.cssMode&&(i.onScroll=hK.bind(i)),i.onClick=dK.bind(i),i.onLoad=fK.bind(i),aN(i,"on")}function pK(){aN(this,"off")}var bK={attachEvents:gK,detachEvents:pK};const AA=(i,t)=>i.grid&&t.grid&&t.grid.rows>1;function wK(){const i=this,{realIndex:t,initialized:e,params:n,el:s}=i,r=n.breakpoints;if(!r||r&&Object.keys(r).length===0)return;const o=Ga(),a=n.breakpointsBase==="window"||!n.breakpointsBase?n.breakpointsBase:"container",l=["window","container"].includes(n.breakpointsBase)||!n.breakpointsBase?i.el:o.querySelector(n.breakpointsBase),c=i.getBreakpoint(r,a,l);if(!c||i.currentBreakpoint===c)return;const f=(c in r?r[c]:void 0)||i.originalParams,m=AA(i,n),p=AA(i,f),v=i.params.grabCursor,_=f.grabCursor,E=n.enabled;m&&!p?(s.classList.remove(`${n.containerModifierClass}grid`,`${n.containerModifierClass}grid-column`),i.emitContainerClasses()):!m&&p&&(s.classList.add(`${n.containerModifierClass}grid`),(f.grid.fill&&f.grid.fill==="column"||!f.grid.fill&&n.grid.fill==="column")&&s.classList.add(`${n.containerModifierClass}grid-column`),i.emitContainerClasses()),v&&!_?i.unsetGrabCursor():!v&&_&&i.setGrabCursor(),["navigation","pagination","scrollbar"].forEach(P=>{if(typeof f[P]>"u")return;const N=n[P]&&n[P].enabled,L=f[P]&&f[P].enabled;N&&!L&&i[P].disable(),!N&&L&&i[P].enable()});const x=f.direction&&f.direction!==n.direction,k=n.loop&&(f.slidesPerView!==n.slidesPerView||x),A=n.loop;x&&e&&i.changeDirection(),ls(i.params,f);const S=i.params.enabled,O=i.params.loop;Object.assign(i,{allowTouchMove:i.params.allowTouchMove,allowSlideNext:i.params.allowSlideNext,allowSlidePrev:i.params.allowSlidePrev}),E&&!S?i.disable():!E&&S&&i.enable(),i.currentBreakpoint=c,i.emit("_beforeBreakpoint",f),e&&(k?(i.loopDestroy(),i.loopCreate(t),i.updateSlides()):!A&&O?(i.loopCreate(t),i.updateSlides()):A&&!O&&i.loopDestroy()),i.emit("breakpoint",f)}function vK(i,t,e){if(t===void 0&&(t="window"),!i||t==="container"&&!e)return;let n=!1;const s=Ii(),r=t==="window"?s.innerHeight:e.clientHeight,o=Object.keys(i).map(a=>{if(typeof a=="string"&&a.indexOf("@")===0){const l=parseFloat(a.substr(1));return{value:r*l,point:a}}return{value:a,point:a}});o.sort((a,l)=>parseInt(a.value,10)-parseInt(l.value,10));for(let a=0;a<o.length;a+=1){const{point:l,value:c}=o[a];t==="window"?s.matchMedia(`(min-width: ${c}px)`).matches&&(n=l):c<=e.clientWidth&&(n=l)}return n||"max"}var yK={setBreakpoint:wK,getBreakpoint:vK};function _K(i,t){const e=[];return i.forEach(n=>{typeof n=="object"?Object.keys(n).forEach(s=>{n[s]&&e.push(t+s)}):typeof n=="string"&&e.push(t+n)}),e}function EK(){const i=this,{classNames:t,params:e,rtl:n,el:s,device:r}=i,o=_K(["initialized",e.direction,{"free-mode":i.params.freeMode&&e.freeMode.enabled},{autoheight:e.autoHeight},{rtl:n},{grid:e.grid&&e.grid.rows>1},{"grid-column":e.grid&&e.grid.rows>1&&e.grid.fill==="column"},{android:r.android},{ios:r.ios},{"css-mode":e.cssMode},{centered:e.cssMode&&e.centeredSlides},{"watch-progress":e.watchSlidesProgress}],e.containerModifierClass);t.push(...o),s.classList.add(...t),i.emitContainerClasses()}function CK(){const i=this,{el:t,classNames:e}=i;!t||typeof t=="string"||(t.classList.remove(...e),i.emitContainerClasses())}var xK={addClasses:EK,removeClasses:CK};function TK(){const i=this,{isLocked:t,params:e}=i,{slidesOffsetBefore:n}=e;if(n){const s=i.slides.length-1,r=i.slidesGrid[s]+i.slidesSizesGrid[s]+n*2;i.isLocked=i.size>r}else i.isLocked=i.snapGrid.length===1;e.allowSlideNext===!0&&(i.allowSlideNext=!i.isLocked),e.allowSlidePrev===!0&&(i.allowSlidePrev=!i.isLocked),t&&t!==i.isLocked&&(i.isEnd=!1),t!==i.isLocked&&i.emit(i.isLocked?"lock":"unlock")}var kK={checkOverflow:TK},Oy={init:!0,direction:"horizontal",oneWayMovement:!1,swiperElementNodeName:"SWIPER-CONTAINER",touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,eventsPrefix:"swiper",enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:5,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,loop:!1,loopAddBlankSlides:!0,loopAdditionalSlides:0,loopPreventsSliding:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-blank",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",slideFullyVisibleClass:"swiper-slide-fully-visible",slideNextClass:"swiper-slide-next",slidePrevClass:"swiper-slide-prev",wrapperClass:"swiper-wrapper",lazyPreloaderClass:"swiper-lazy-preloader",lazyPreloadPrevNext:0,runCallbacksOnInit:!0,_emitClasses:!1};function SK(i,t){return function(n){n===void 0&&(n={});const s=Object.keys(n)[0],r=n[s];if(typeof r!="object"||r===null){ls(t,n);return}if(i[s]===!0&&(i[s]={enabled:!0}),s==="navigation"&&i[s]&&i[s].enabled&&!i[s].prevEl&&!i[s].nextEl&&(i[s].auto=!0),["pagination","scrollbar"].indexOf(s)>=0&&i[s]&&i[s].enabled&&!i[s].el&&(i[s].auto=!0),!(s in i&&"enabled"in r)){ls(t,n);return}typeof i[s]=="object"&&!("enabled"in i[s])&&(i[s].enabled=!0),i[s]||(i[s]={enabled:!1}),ls(t,n)}}const Z0={eventsEmitter:xG,update:LG,translate:zG,transition:WG,slide:QG,loop:iK,grabCursor:oK,events:bK,breakpoints:yK,checkOverflow:kK,classes:xK},X0={};let ME=class Ao{constructor(){let t,e;for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];s.length===1&&s[0].constructor&&Object.prototype.toString.call(s[0]).slice(8,-1)==="Object"?e=s[0]:[t,e]=s,e||(e={}),e=ls({},e),t&&!e.el&&(e.el=t);const o=Ga();if(e.el&&typeof e.el=="string"&&o.querySelectorAll(e.el).length>1){const h=[];return o.querySelectorAll(e.el).forEach(f=>{const m=ls({},e,{el:f});h.push(new Ao(m))}),h}const a=this;a.__swiper__=!0,a.support=iN(),a.device=sN({userAgent:e.userAgent}),a.browser=rN(),a.eventsListeners={},a.eventsAnyListeners=[],a.modules=[...a.__modules__],e.modules&&Array.isArray(e.modules)&&a.modules.push(...e.modules);const l={};a.modules.forEach(h=>{h({params:e,swiper:a,extendParams:SK(e,l),on:a.on.bind(a),once:a.once.bind(a),off:a.off.bind(a),emit:a.emit.bind(a)})});const c=ls({},Oy,l);return a.params=ls({},c,X0,e),a.originalParams=ls({},a.params),a.passedParams=ls({},e),a.params&&a.params.on&&Object.keys(a.params.on).forEach(h=>{a.on(h,a.params.on[h])}),a.params&&a.params.onAny&&a.onAny(a.params.onAny),Object.assign(a,{enabled:a.params.enabled,el:t,classNames:[],slides:[],slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal(){return a.params.direction==="horizontal"},isVertical(){return a.params.direction==="vertical"},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,cssOverflowAdjustment(){return Math.trunc(this.translate/2**23)*2**23},allowSlideNext:a.params.allowSlideNext,allowSlidePrev:a.params.allowSlidePrev,touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:a.params.focusableElements,lastClickTime:0,clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,startMoving:void 0,pointerId:null,touchId:null},allowClick:!0,allowTouchMove:a.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),a.emit("_swiper"),a.params.init&&a.init(),a}getDirectionLabel(t){return this.isHorizontal()?t:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[t]}getSlideIndex(t){const{slidesEl:e,params:n}=this,s=pr(e,`.${n.slideClass}, swiper-slide`),r=CA(s[0]);return CA(t)-r}getSlideIndexByData(t){return this.getSlideIndex(this.slides.find(e=>e.getAttribute("data-swiper-slide-index")*1===t))}recalcSlides(){const t=this,{slidesEl:e,params:n}=t;t.slides=pr(e,`.${n.slideClass}, swiper-slide`)}enable(){const t=this;t.enabled||(t.enabled=!0,t.params.grabCursor&&t.setGrabCursor(),t.emit("enable"))}disable(){const t=this;t.enabled&&(t.enabled=!1,t.params.grabCursor&&t.unsetGrabCursor(),t.emit("disable"))}setProgress(t,e){const n=this;t=Math.min(Math.max(t,0),1);const s=n.minTranslate(),o=(n.maxTranslate()-s)*t+s;n.translateTo(o,typeof e>"u"?0:e),n.updateActiveIndex(),n.updateSlidesClasses()}emitContainerClasses(){const t=this;if(!t.params._emitClasses||!t.el)return;const e=t.el.className.split(" ").filter(n=>n.indexOf("swiper")===0||n.indexOf(t.params.containerModifierClass)===0);t.emit("_containerClasses",e.join(" "))}getSlideClasses(t){const e=this;return e.destroyed?"":t.className.split(" ").filter(n=>n.indexOf("swiper-slide")===0||n.indexOf(e.params.slideClass)===0).join(" ")}emitSlidesClasses(){const t=this;if(!t.params._emitClasses||!t.el)return;const e=[];t.slides.forEach(n=>{const s=t.getSlideClasses(n);e.push({slideEl:n,classNames:s}),t.emit("_slideClass",n,s)}),t.emit("_slideClasses",e)}slidesPerViewDynamic(t,e){t===void 0&&(t="current"),e===void 0&&(e=!1);const n=this,{params:s,slides:r,slidesGrid:o,slidesSizesGrid:a,size:l,activeIndex:c}=n;let h=1;if(typeof s.slidesPerView=="number")return s.slidesPerView;if(s.centeredSlides){let f=r[c]?Math.ceil(r[c].swiperSlideSize):0,m;for(let p=c+1;p<r.length;p+=1)r[p]&&!m&&(f+=Math.ceil(r[p].swiperSlideSize),h+=1,f>l&&(m=!0));for(let p=c-1;p>=0;p-=1)r[p]&&!m&&(f+=r[p].swiperSlideSize,h+=1,f>l&&(m=!0))}else if(t==="current")for(let f=c+1;f<r.length;f+=1)(e?o[f]+a[f]-o[c]<l:o[f]-o[c]<l)&&(h+=1);else for(let f=c-1;f>=0;f-=1)o[c]-o[f]<l&&(h+=1);return h}update(){const t=this;if(!t||t.destroyed)return;const{snapGrid:e,params:n}=t;n.breakpoints&&t.setBreakpoint(),[...t.el.querySelectorAll('[loading="lazy"]')].forEach(o=>{o.complete&&np(t,o)}),t.updateSize(),t.updateSlides(),t.updateProgress(),t.updateSlidesClasses();function s(){const o=t.rtlTranslate?t.translate*-1:t.translate,a=Math.min(Math.max(o,t.maxTranslate()),t.minTranslate());t.setTranslate(a),t.updateActiveIndex(),t.updateSlidesClasses()}let r;if(n.freeMode&&n.freeMode.enabled&&!n.cssMode)s(),n.autoHeight&&t.updateAutoHeight();else{if((n.slidesPerView==="auto"||n.slidesPerView>1)&&t.isEnd&&!n.centeredSlides){const o=t.virtual&&n.virtual.enabled?t.virtual.slides:t.slides;r=t.slideTo(o.length-1,0,!1,!0)}else r=t.slideTo(t.activeIndex,0,!1,!0);r||s()}n.watchOverflow&&e!==t.snapGrid&&t.checkOverflow(),t.emit("update")}changeDirection(t,e){e===void 0&&(e=!0);const n=this,s=n.params.direction;return t||(t=s==="horizontal"?"vertical":"horizontal"),t===s||t!=="horizontal"&&t!=="vertical"||(n.el.classList.remove(`${n.params.containerModifierClass}${s}`),n.el.classList.add(`${n.params.containerModifierClass}${t}`),n.emitContainerClasses(),n.params.direction=t,n.slides.forEach(r=>{t==="vertical"?r.style.width="":r.style.height=""}),n.emit("changeDirection"),e&&n.update()),n}changeLanguageDirection(t){const e=this;e.rtl&&t==="rtl"||!e.rtl&&t==="ltr"||(e.rtl=t==="rtl",e.rtlTranslate=e.params.direction==="horizontal"&&e.rtl,e.rtl?(e.el.classList.add(`${e.params.containerModifierClass}rtl`),e.el.dir="rtl"):(e.el.classList.remove(`${e.params.containerModifierClass}rtl`),e.el.dir="ltr"),e.update())}mount(t){const e=this;if(e.mounted)return!0;let n=t||e.params.el;if(typeof n=="string"&&(n=document.querySelector(n)),!n)return!1;n.swiper=e,n.parentNode&&n.parentNode.host&&n.parentNode.host.nodeName===e.params.swiperElementNodeName.toUpperCase()&&(e.isElement=!0);const s=()=>`.${(e.params.wrapperClass||"").trim().split(" ").join(".")}`;let o=n&&n.shadowRoot&&n.shadowRoot.querySelector?n.shadowRoot.querySelector(s()):pr(n,s())[0];return!o&&e.params.createElements&&(o=Lp("div",e.params.wrapperClass),n.append(o),pr(n,`.${e.params.slideClass}`).forEach(a=>{o.append(a)})),Object.assign(e,{el:n,wrapperEl:o,slidesEl:e.isElement&&!n.parentNode.host.slideSlots?n.parentNode.host:o,hostEl:e.isElement?n.parentNode.host:n,mounted:!0,rtl:n.dir.toLowerCase()==="rtl"||Ra(n,"direction")==="rtl",rtlTranslate:e.params.direction==="horizontal"&&(n.dir.toLowerCase()==="rtl"||Ra(n,"direction")==="rtl"),wrongRTL:Ra(o,"display")==="-webkit-box"}),!0}init(t){const e=this;if(e.initialized||e.mount(t)===!1)return e;e.emit("beforeInit"),e.params.breakpoints&&e.setBreakpoint(),e.addClasses(),e.updateSize(),e.updateSlides(),e.params.watchOverflow&&e.checkOverflow(),e.params.grabCursor&&e.enabled&&e.setGrabCursor(),e.params.loop&&e.virtual&&e.params.virtual.enabled?e.slideTo(e.params.initialSlide+e.virtual.slidesBefore,0,e.params.runCallbacksOnInit,!1,!0):e.slideTo(e.params.initialSlide,0,e.params.runCallbacksOnInit,!1,!0),e.params.loop&&e.loopCreate(),e.attachEvents();const s=[...e.el.querySelectorAll('[loading="lazy"]')];return e.isElement&&s.push(...e.hostEl.querySelectorAll('[loading="lazy"]')),s.forEach(r=>{r.complete?np(e,r):r.addEventListener("load",o=>{np(e,o.target)})}),Ry(e),e.initialized=!0,Ry(e),e.emit("init"),e.emit("afterInit"),e}destroy(t,e){t===void 0&&(t=!0),e===void 0&&(e=!0);const n=this,{params:s,el:r,wrapperEl:o,slides:a}=n;return typeof n.params>"u"||n.destroyed||(n.emit("beforeDestroy"),n.initialized=!1,n.detachEvents(),s.loop&&n.loopDestroy(),e&&(n.removeClasses(),r&&typeof r!="string"&&r.removeAttribute("style"),o&&o.removeAttribute("style"),a&&a.length&&a.forEach(l=>{l.classList.remove(s.slideVisibleClass,s.slideFullyVisibleClass,s.slideActiveClass,s.slideNextClass,s.slidePrevClass),l.removeAttribute("style"),l.removeAttribute("data-swiper-slide-index")})),n.emit("destroy"),Object.keys(n.eventsListeners).forEach(l=>{n.off(l)}),t!==!1&&(n.el&&typeof n.el!="string"&&(n.el.swiper=null),uG(n)),n.destroyed=!0),null}static extendDefaults(t){ls(X0,t)}static get extendedDefaults(){return X0}static get defaults(){return Oy}static installModule(t){Ao.prototype.__modules__||(Ao.prototype.__modules__=[]);const e=Ao.prototype.__modules__;typeof t=="function"&&e.indexOf(t)<0&&e.push(t)}static use(t){return Array.isArray(t)?(t.forEach(e=>Ao.installModule(e)),Ao):(Ao.installModule(t),Ao)}};Object.keys(Z0).forEach(i=>{Object.keys(Z0[i]).forEach(t=>{ME.prototype[t]=Z0[i][t]})});ME.use([EG,CG]);const lN=["eventsPrefix","injectStyles","injectStylesUrls","modules","init","_direction","oneWayMovement","swiperElementNodeName","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_enabled","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","breakpointsBase","_spaceBetween","_slidesPerView","maxBackfaceHiddenSlides","_grid","_slidesPerGroup","_slidesPerGroupSkip","_slidesPerGroupAuto","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_loop","loopAdditionalSlides","loopAddBlankSlides","loopPreventsSliding","_rewind","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideActiveClass","slideVisibleClass","slideFullyVisibleClass","slideNextClass","slidePrevClass","slideBlankClass","wrapperClass","lazyPreloaderClass","lazyPreloadPrevNext","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","_autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","creativeEffect","cardsEffect","hashNavigation","history","keyboard","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom","control"];function Wl(i){return typeof i=="object"&&i!==null&&i.constructor&&Object.prototype.toString.call(i).slice(8,-1)==="Object"&&!i.__swiper__}function Eu(i,t){const e=["__proto__","constructor","prototype"];Object.keys(t).filter(n=>e.indexOf(n)<0).forEach(n=>{typeof i[n]>"u"?i[n]=t[n]:Wl(t[n])&&Wl(i[n])&&Object.keys(t[n]).length>0?t[n].__swiper__?i[n]=t[n]:Eu(i[n],t[n]):i[n]=t[n]})}function cN(i){return i===void 0&&(i={}),i.navigation&&typeof i.navigation.nextEl>"u"&&typeof i.navigation.prevEl>"u"}function uN(i){return i===void 0&&(i={}),i.pagination&&typeof i.pagination.el>"u"}function dN(i){return i===void 0&&(i={}),i.scrollbar&&typeof i.scrollbar.el>"u"}function hN(i){i===void 0&&(i="");const t=i.split(" ").map(n=>n.trim()).filter(n=>!!n),e=[];return t.forEach(n=>{e.indexOf(n)<0&&e.push(n)}),e.join(" ")}function AK(i){return i===void 0&&(i=""),i?i.includes("swiper-wrapper")?i:`swiper-wrapper ${i}`:"swiper-wrapper"}function PK(i){let{swiper:t,slides:e,passedParams:n,changedParams:s,nextEl:r,prevEl:o,scrollbarEl:a,paginationEl:l}=i;const c=s.filter(M=>M!=="children"&&M!=="direction"&&M!=="wrapperClass"),{params:h,pagination:f,navigation:m,scrollbar:p,virtual:v,thumbs:_}=t;let E,x,k,A,S,O,P,N;s.includes("thumbs")&&n.thumbs&&n.thumbs.swiper&&!n.thumbs.swiper.destroyed&&h.thumbs&&(!h.thumbs.swiper||h.thumbs.swiper.destroyed)&&(E=!0),s.includes("controller")&&n.controller&&n.controller.control&&h.controller&&!h.controller.control&&(x=!0),s.includes("pagination")&&n.pagination&&(n.pagination.el||l)&&(h.pagination||h.pagination===!1)&&f&&!f.el&&(k=!0),s.includes("scrollbar")&&n.scrollbar&&(n.scrollbar.el||a)&&(h.scrollbar||h.scrollbar===!1)&&p&&!p.el&&(A=!0),s.includes("navigation")&&n.navigation&&(n.navigation.prevEl||o)&&(n.navigation.nextEl||r)&&(h.navigation||h.navigation===!1)&&m&&!m.prevEl&&!m.nextEl&&(S=!0);const L=M=>{t[M]&&(t[M].destroy(),M==="navigation"?(t.isElement&&(t[M].prevEl.remove(),t[M].nextEl.remove()),h[M].prevEl=void 0,h[M].nextEl=void 0,t[M].prevEl=void 0,t[M].nextEl=void 0):(t.isElement&&t[M].el.remove(),h[M].el=void 0,t[M].el=void 0))};s.includes("loop")&&t.isElement&&(h.loop&&!n.loop?O=!0:!h.loop&&n.loop?P=!0:N=!0),c.forEach(M=>{if(Wl(h[M])&&Wl(n[M]))Object.assign(h[M],n[M]),(M==="navigation"||M==="pagination"||M==="scrollbar")&&"enabled"in n[M]&&!n[M].enabled&&L(M);else{const F=n[M];(F===!0||F===!1)&&(M==="navigation"||M==="pagination"||M==="scrollbar")?F===!1&&L(M):h[M]=n[M]}}),c.includes("controller")&&!x&&t.controller&&t.controller.control&&h.controller&&h.controller.control&&(t.controller.control=h.controller.control),s.includes("children")&&e&&v&&h.virtual.enabled?(v.slides=e,v.update(!0)):s.includes("virtual")&&v&&h.virtual.enabled&&(e&&(v.slides=e),v.update(!0)),s.includes("children")&&e&&h.loop&&(N=!0),E&&_.init()&&_.update(!0),x&&(t.controller.control=h.controller.control),k&&(t.isElement&&(!l||typeof l=="string")&&(l=document.createElement("div"),l.classList.add("swiper-pagination"),l.part.add("pagination"),t.el.appendChild(l)),l&&(h.pagination.el=l),f.init(),f.render(),f.update()),A&&(t.isElement&&(!a||typeof a=="string")&&(a=document.createElement("div"),a.classList.add("swiper-scrollbar"),a.part.add("scrollbar"),t.el.appendChild(a)),a&&(h.scrollbar.el=a),p.init(),p.updateSize(),p.setTranslate()),S&&(t.isElement&&((!r||typeof r=="string")&&(r=document.createElement("div"),r.classList.add("swiper-button-next"),r.innerHTML=t.hostEl.constructor.nextButtonSvg,r.part.add("button-next"),t.el.appendChild(r)),(!o||typeof o=="string")&&(o=document.createElement("div"),o.classList.add("swiper-button-prev"),o.innerHTML=t.hostEl.constructor.prevButtonSvg,o.part.add("button-prev"),t.el.appendChild(o))),r&&(h.navigation.nextEl=r),o&&(h.navigation.prevEl=o),m.init(),m.update()),s.includes("allowSlideNext")&&(t.allowSlideNext=n.allowSlideNext),s.includes("allowSlidePrev")&&(t.allowSlidePrev=n.allowSlidePrev),s.includes("direction")&&t.changeDirection(n.direction,!1),(O||N)&&t.loopDestroy(),(P||N)&&t.loopCreate(),t.update()}function IK(i,t){i===void 0&&(i={}),t===void 0&&(t=!0);const e={on:{}},n={},s={};Eu(e,Oy),e._emitClasses=!0,e.init=!1;const r={},o=lN.map(l=>l.replace(/_/,"")),a=Object.assign({},i);return Object.keys(a).forEach(l=>{typeof i[l]>"u"||(o.indexOf(l)>=0?Wl(i[l])?(e[l]={},s[l]={},Eu(e[l],i[l]),Eu(s[l],i[l])):(e[l]=i[l],s[l]=i[l]):l.search(/on[A-Z]/)===0&&typeof i[l]=="function"?t?n[`${l[2].toLowerCase()}${l.substr(3)}`]=i[l]:e.on[`${l[2].toLowerCase()}${l.substr(3)}`]=i[l]:r[l]=i[l])}),["navigation","pagination","scrollbar"].forEach(l=>{e[l]===!0&&(e[l]={}),e[l]===!1&&delete e[l]}),{params:e,passedParams:s,rest:r,events:n}}function RK(i,t){let{el:e,nextEl:n,prevEl:s,paginationEl:r,scrollbarEl:o,swiper:a}=i;cN(t)&&n&&s&&(a.params.navigation.nextEl=n,a.originalParams.navigation.nextEl=n,a.params.navigation.prevEl=s,a.originalParams.navigation.prevEl=s),uN(t)&&r&&(a.params.pagination.el=r,a.originalParams.pagination.el=r),dN(t)&&o&&(a.params.scrollbar.el=o,a.originalParams.scrollbar.el=o),a.init(e)}function OK(i,t,e,n,s){const r=[];if(!t)return r;const o=l=>{r.indexOf(l)<0&&r.push(l)};if(e&&n){const l=n.map(s),c=e.map(s);l.join("")!==c.join("")&&o("children"),n.length!==e.length&&o("children")}return lN.filter(l=>l[0]==="_").map(l=>l.replace(/_/,"")).forEach(l=>{if(l in i&&l in t)if(Wl(i[l])&&Wl(t[l])){const c=Object.keys(i[l]),h=Object.keys(t[l]);c.length!==h.length?o(l):(c.forEach(f=>{i[l][f]!==t[l][f]&&o(l)}),h.forEach(f=>{i[l][f]!==t[l][f]&&o(l)}))}else i[l]!==t[l]&&o(l)}),r}const NK=i=>{!i||i.destroyed||!i.params.virtual||i.params.virtual&&!i.params.virtual.enabled||(i.updateSlides(),i.updateProgress(),i.updateSlidesClasses(),i.parallax&&i.params.parallax&&i.params.parallax.enabled&&i.parallax.setTranslate())};function Vp(){return Vp=Object.assign?Object.assign.bind():function(i){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},Vp.apply(this,arguments)}function fN(i){return i.type&&i.type.displayName&&i.type.displayName.includes("SwiperSlide")}function mN(i){const t=[];return ot.Children.toArray(i).forEach(e=>{fN(e)?t.push(e):e.props&&e.props.children&&mN(e.props.children).forEach(n=>t.push(n))}),t}function MK(i){const t=[],e={"container-start":[],"container-end":[],"wrapper-start":[],"wrapper-end":[]};return ot.Children.toArray(i).forEach(n=>{if(fN(n))t.push(n);else if(n.props&&n.props.slot&&e[n.props.slot])e[n.props.slot].push(n);else if(n.props&&n.props.children){const s=mN(n.props.children);s.length>0?s.forEach(r=>t.push(r)):e["container-end"].push(n)}else e["container-end"].push(n)}),{slides:t,slots:e}}function LK(i,t,e){if(!e)return null;const n=h=>{let f=h;return h<0?f=t.length+h:f>=t.length&&(f=f-t.length),f},s=i.isHorizontal()?{[i.rtlTranslate?"right":"left"]:`${e.offset}px`}:{top:`${e.offset}px`},{from:r,to:o}=e,a=i.params.loop?-t.length:0,l=i.params.loop?t.length*2:t.length,c=[];for(let h=a;h<l;h+=1)h>=r&&h<=o&&c.push(t[n(h)]);return c.map((h,f)=>ot.cloneElement(h,{swiper:i,style:s,key:h.props.virtualIndex||h.key||`slide-${f}`}))}function Ah(i,t){return typeof window>"u"?R.useEffect(i,t):R.useLayoutEffect(i,t)}const PA=R.createContext(null),VK=R.createContext(null),Dp=R.forwardRef(function(i,t){let{className:e,tag:n="div",wrapperTag:s="div",children:r,onSwiper:o,...a}=i===void 0?{}:i,l=!1;const[c,h]=R.useState("swiper"),[f,m]=R.useState(null),[p,v]=R.useState(!1),_=R.useRef(!1),E=R.useRef(null),x=R.useRef(null),k=R.useRef(null),A=R.useRef(null),S=R.useRef(null),O=R.useRef(null),P=R.useRef(null),N=R.useRef(null),{params:L,passedParams:M,rest:F,events:q}=IK(a),{slides:K,slots:te}=MK(r),ve=()=>{v(!p)};Object.assign(L.on,{_containerClasses(ce,le){h(le)}});const Se=()=>{Object.assign(L.on,q),l=!0;const ce={...L};if(delete ce.wrapperClass,x.current=new ME(ce),x.current.virtual&&x.current.params.virtual.enabled){x.current.virtual.slides=K;const le={cache:!1,slides:K,renderExternal:m,renderExternalUpdate:!1};Eu(x.current.params.virtual,le),Eu(x.current.originalParams.virtual,le)}};E.current||Se(),x.current&&x.current.on("_beforeBreakpoint",ve);const _e=()=>{l||!q||!x.current||Object.keys(q).forEach(ce=>{x.current.on(ce,q[ce])})},be=()=>{!q||!x.current||Object.keys(q).forEach(ce=>{x.current.off(ce,q[ce])})};R.useEffect(()=>()=>{x.current&&x.current.off("_beforeBreakpoint",ve)}),R.useEffect(()=>{!_.current&&x.current&&(x.current.emitSlidesClasses(),_.current=!0)}),Ah(()=>{if(t&&(t.current=E.current),!!E.current)return x.current.destroyed&&Se(),RK({el:E.current,nextEl:S.current,prevEl:O.current,paginationEl:P.current,scrollbarEl:N.current,swiper:x.current},L),o&&!x.current.destroyed&&o(x.current),()=>{x.current&&!x.current.destroyed&&x.current.destroy(!0,!1)}},[]),Ah(()=>{_e();const ce=OK(M,k.current,K,A.current,le=>le.key);return k.current=M,A.current=K,ce.length&&x.current&&!x.current.destroyed&&PK({swiper:x.current,slides:K,passedParams:M,changedParams:ce,nextEl:S.current,prevEl:O.current,scrollbarEl:N.current,paginationEl:P.current}),()=>{be()}}),Ah(()=>{NK(x.current)},[f]);function he(){return L.virtual?LK(x.current,K,f):K.map((ce,le)=>ot.cloneElement(ce,{swiper:x.current,swiperSlideIndex:le}))}return ot.createElement(n,Vp({ref:E,className:hN(`${c}${e?` ${e}`:""}`)},F),ot.createElement(VK.Provider,{value:x.current},te["container-start"],ot.createElement(s,{className:AK(L.wrapperClass)},te["wrapper-start"],he(),te["wrapper-end"]),cN(L)&&ot.createElement(ot.Fragment,null,ot.createElement("div",{ref:O,className:"swiper-button-prev"}),ot.createElement("div",{ref:S,className:"swiper-button-next"})),dN(L)&&ot.createElement("div",{ref:N,className:"swiper-scrollbar"}),uN(L)&&ot.createElement("div",{ref:P,className:"swiper-pagination"}),te["container-end"]))});Dp.displayName="Swiper";const pu=R.forwardRef(function(i,t){let{tag:e="div",children:n,className:s="",swiper:r,zoom:o,lazy:a,virtualIndex:l,swiperSlideIndex:c,...h}=i===void 0?{}:i;const f=R.useRef(null),[m,p]=R.useState("swiper-slide"),[v,_]=R.useState(!1);function E(S,O,P){O===f.current&&p(P)}Ah(()=>{if(typeof c<"u"&&(f.current.swiperSlideIndex=c),t&&(t.current=f.current),!(!f.current||!r)){if(r.destroyed){m!=="swiper-slide"&&p("swiper-slide");return}return r.on("_slideClass",E),()=>{r&&r.off("_slideClass",E)}}}),Ah(()=>{r&&f.current&&!r.destroyed&&p(r.getSlideClasses(f.current))},[r]);const x={isActive:m.indexOf("swiper-slide-active")>=0,isVisible:m.indexOf("swiper-slide-visible")>=0,isPrev:m.indexOf("swiper-slide-prev")>=0,isNext:m.indexOf("swiper-slide-next")>=0},k=()=>typeof n=="function"?n(x):n,A=()=>{_(!0)};return ot.createElement(e,Vp({ref:f,className:hN(`${m}${s?` ${s}`:""}`),"data-swiper-slide-index":l,onLoad:A},h),o&&ot.createElement(PA.Provider,{value:x},ot.createElement("div",{className:"swiper-zoom-container","data-swiper-zoom":typeof o=="number"?o:void 0},k(),a&&!v&&ot.createElement("div",{className:"swiper-lazy-preloader"}))),!o&&ot.createElement(PA.Provider,{value:x},k(),a&&!v&&ot.createElement("div",{className:"swiper-lazy-preloader"})))});pu.displayName="SwiperSlide";const DK={BASE_URL:"/react-and-bloom/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_BASE:"https://ec-course-api.hexschool.io/v2",VITE_API_PATH:"and-bloom"},{VITE_API_BASE:BK,VITE_API_PATH:FK}=DK,$K=({item:i})=>{const t=Vn(),{id:e,qty:n,total:s,product:r}=i,o=async(l,c,h)=>{var f;try{t(ct(!0)),await Ke[c?"put":"delete"](`${BK}/api/${FK}/cart/${l}`,c&&{data:{product_id:h,qty:c}}),await t(Of())}catch(m){m instanceof $t&&console.log((f=m==null?void 0:m.response)==null?void 0:f.data.message)}finally{t(ct(!1))}},a=l=>{const c=l.replace(/[^0-9]+/g,"");return c&&parseInt(c)?parseInt(c):1};return y.jsx(y.Fragment,{children:y.jsx("div",{className:"border-bottom px-0 py-4",children:y.jsxs("div",{className:"d-flex",children:[y.jsx("div",{className:"image-container rounded-circle overflow-hidden border me-3",style:{width:"50px",height:"50px"},children:y.jsx("img",{src:r.imageUrl,alt:r.title,className:"w-100 h-100 object-fit-cover"})}),y.jsxs("div",{className:"flex-grow-1 flex-shrink-0 ",children:[y.jsxs("div",{className:"d-flex justify-content-between",children:[y.jsx(Cn,{to:`/product/${r==null?void 0:r.id}`,children:y.jsx("h6",{className:"mb-2",children:r.title})}),y.jsx("i",{className:"bi bi-x-lg opacity-75 cursor-pointer",onClick:()=>o(e,0,r.id)})]}),y.jsxs("p",{className:"mb-0 d-flex align-items-center",children:[y.jsx("span",{className:"badge rounded-pill fw-normal text-bg-secondary me-2",children:"單價"}),y.jsxs("span",{children:["$",r.price]})]}),y.jsxs("div",{className:"d-flex align-items-center mt-2",children:[y.jsx("i",{className:`bi bi-dash-square-fill fs-3 ${n===1?"cursor-default opacity-50":"cursor-pointer"}`,onClick:()=>n>1&&o(e,n-1,r.id)}),y.jsx("input",{type:"number",className:"form-control form-control-sm mx-2",value:n,onChange:l=>o(e,a(l.target.value),r.id)}),y.jsx("i",{className:"bi bi-plus-square-fill fs-3 cursor-pointer",onClick:()=>o(e,n+1,r.id)})]})]})]})})})},gN=R.memo(({id:i,label:t,children:e,errors:n})=>{const s=i.includes(".")?i.split(".").reduce((r,o)=>r==null?void 0:r[o],n):n==null?void 0:n[i];return y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"form-floating border-0 border-bottom border-black rounded-0",children:[e,y.jsx("label",{htmlFor:i,children:t})]}),s&&y.jsx("small",{className:"text-danger",children:String(s==null?void 0:s.message)})]})}),pg=R.memo(({id:i,label:t,type:e="text",placeholder:n="請輸入內容",register:s,rules:r,errors:o})=>{const a=i.includes(".")?i.split(".").reduce((l,c)=>l==null?void 0:l[c],o):o==null?void 0:o[i];return y.jsx(y.Fragment,{children:y.jsx(gN,{id:i,label:t,errors:o,children:y.jsx("input",{id:i,type:e,placeholder:n,className:`form-control border-0 rounded-0 bg-transparent outline-0 px-0 ${a&&"is-invalid"}`,...s(i,r)})})})}),zK=R.memo(({id:i,label:t,rows:e=3,placeholder:n="請輸入內容",register:s,rules:r,errors:o})=>y.jsx(y.Fragment,{children:y.jsx(gN,{id:i,label:t,errors:o,children:y.jsx("textarea",{rows:e,id:i,placeholder:n,className:`form-control border-0 rounded-0 bg-transparent outline-0 px-0 ${o[i]&&"is-invalid"}`,...s(i,r)})})})),jK={BASE_URL:"/react-and-bloom/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_BASE:"https://ec-course-api.hexschool.io/v2",VITE_API_PATH:"and-bloom"},{VITE_API_BASE:HK,VITE_API_PATH:UK}=jK,IA={name:"",email:"",tel:"",address:"",message:""},WK=R.memo(()=>{const i=Vn(),t=ec(),{register:e,handleSubmit:n,watch:s,getValues:r,setValue:o,reset:a,control:l,formState:{errors:c}}=Lf({mode:"onTouched",defaultValues:IA}),h=async f=>{var v,_;const{message:m,...p}=f;try{i(ct(!0));const E=await Ke.post(`${HK}/api/${UK}/order`,{data:{user:p,message:m}});await i(Of()),a(IA),t(`/checkout/${E.data.orderId}`)}catch(E){E instanceof $t&&(console.log((v=E==null?void 0:E.response)==null?void 0:v.data.message),i(bn({text:(_=E==null?void 0:E.response)==null?void 0:_.data.message,type:"danger"})))}finally{i(ct(!1))}};return y.jsxs("form",{onSubmit:n(h),children:[y.jsxs("div",{className:"row",children:[y.jsx("div",{className:"mb-3",children:y.jsx(pg,{id:"name",label:"收件人",type:"text",placeholder:"收件人姓名",register:e,errors:c,rules:{required:"姓名必填"}})}),y.jsx("div",{className:"mb-3",children:y.jsx(pg,{id:"tel",label:"收件人電話",type:"tel",placeholder:"收件人電話",register:e,errors:c,rules:{required:"電話必填",minLength:{value:8,message:"電話不少於 8 碼"},maxLength:{value:12,message:"電話不大於 12 碼"},pattern:{value:/^[0-9]*$/,message:"電話需為數字"}}})}),y.jsx("div",{className:"mb-3",children:y.jsx(pg,{id:"address",label:"收件人地址",type:"text",placeholder:"收件人地址",register:e,errors:c,rules:{required:"收件人地址必填"}})}),y.jsx("div",{className:"mb-3",children:y.jsx(pg,{id:"email",label:"Email",type:"email",placeholder:" Email",register:e,errors:c,rules:{required:"Email 必填",pattern:{value:/^\S+@\S+$/,message:"Email 格式錯誤"}}})}),y.jsx("div",{className:"",children:y.jsx(zK,{id:"message",label:"備註",placeholder:"備註",register:e,errors:c})})]}),y.jsx(an,{type:"submit",btnStyle:"btn btn-secondary w-100 mt-5",children:"結帳"})]})}),qK=xt("div")`
  .card {
    height: 100%;
    border-radius: 20px;
    border-color: rgba(0, 0, 0, 0.3);
    background-color: white;
    overflow: hidden;
    box-shadow: 5px 5px rgba(136, 138, 140, 0.3);

    &:hover {
      background-color: #f8f9fa;
      z-index: 1000;
    }

    &:hover {
      .sub {
        opacity: 1;
      }
      .main {
        opacity: 0;
      }
    }
  }

  .main {
    opacity: 1;
    transition: opacity 0.3s ease-in;
  }

  .sub {
    opacity: 0;
    transition: opacity 0.3s ease-in;
    position: absolute;
    left: 0;
  }

  &.bg-none {
    .card {
      border-radius: 0;
      border: none;
      border-bottom: 1px solid rgba(0, 0, 0, 0.3);
      background-color: transparent;
      box-shadow: none;
      padding-bottom: 20px !important;

      &:hover {
        background-color: transparent;
      }
    }
  }
`,GK=xt("div")`
  position: relative;
  width: 30%;
  display: flex;
  align-items: stretch;
  overflow: hidden;

  img {
    object-fit: cover;
    width: 100%;
    height: 100%;
  }
`,RA=({item:i,children:t,isVerical:e,hasBg:n})=>{const{category:s,title:r,price:o,origin_price:a,imageUrl:l,imagesUrl:c}=i;return y.jsxs("div",{className:`card-body p-0 d-flex align-items-stretch ${e?"flex-column":"flex-row"}`,children:[y.jsxs(GK,{className:`flex-shrink-0 ${e?"w-100 ratio ratio-1x1":""}`,children:[y.jsx("img",{src:l,alt:`${r} image`,className:"main"}),y.jsx("img",{src:c[0],alt:`${r} image`,className:"sub"})]}),y.jsxs("div",{className:`d-flex flex-column align-items-start flex-fill ${n?"p-4":"px-4 pt-1"}`,children:[y.jsx("span",{className:"badge rounded-pill bg-primary fs-sm mb-2",children:s}),y.jsx("h5",{className:"mb-3 fw-light",children:r}),y.jsxs("div",{className:"d-flex align-items-center",children:[y.jsxs("h5",{className:`mb-0 me-3 ${o&&a&&o<a&&"text-danger"}`,children:["$ ",o]}),o&&a&&o<a?y.jsxs("small",{className:"text-muted text-decoration-line-through",children:["$ ",a]}):""]}),t]})]})},Hb=({item:i,children:t,isLink:e=!1,isVerical:n=!1,hasBg:s=!0})=>{const{id:r}=i;return y.jsx(qK,{className:`product-card mb-4 ${!s&&"bg-none"}`,children:e?y.jsx(Cn,{to:`/product/${r}`,className:"card",children:y.jsx(RA,{item:i,children:t,isVerical:n,hasBg:s})}):y.jsx("div",{className:"card",children:y.jsx(RA,{item:i,children:t,isVerical:n,hasBg:s})})},r)},KK={BASE_URL:"/react-and-bloom/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_BASE:"https://ec-course-api.hexschool.io/v2",VITE_API_PATH:"and-bloom"},{VITE_API_BASE:YK,VITE_API_PATH:ZK}=KK,Ub=({category:i,immediate:t=!0,isShowLoading:e=!0}={})=>{const n=Vn(),[s,r]=R.useState([]),[o,a]=R.useState(1),[l,c]=R.useState(1),h=R.useCallback(async()=>{var m,p,v;const f=new URLSearchParams;f.append("page",String(o)),i&&f.append("category",i);try{e&&n(ct(!0));const _=await Ke.get(`${YK}/api/${ZK}/products?${f.toString()}`);r(_.data.products),c((m=_.data.pagination)==null?void 0:m.total_pages),a((p=_.data.pagination)==null?void 0:p.current_page)}catch(_){_ instanceof $t&&console.log((v=_==null?void 0:_.response)==null?void 0:v.data.message)}finally{n(ct(!1))}},[i,o,n,e]);return R.useEffect(()=>{t&&h()},[h,i,o,t]),{products:s,getProducts:h,currentPage:o,setCurrentPage:a,totalPages:l}},XK={BASE_URL:"/react-and-bloom/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_BASE:"https://ec-course-api.hexschool.io/v2",VITE_API_PATH:"and-bloom"},{VITE_API_BASE:JK,VITE_API_PATH:QK}=XK,eY=()=>{const i=Vn(),{cart:t,total:e,final_total:n,coupon:s}=_b(j3),{products:r}=Ub(),o=R.useMemo(()=>(r==null?void 0:r.slice(0,3))||[],[r]),[a,l]=R.useState(""),[c,h]=R.useState({type:"",msg:""}),[f,m]=R.useState(!1),p={spaceBetween:16,slidesPerView:1,initialSlide:1,centeredSlides:!0,breakpoints:{575:{spaceBetween:32,slidesPerView:2},768:{spaceBetween:48,slidesPerView:2}}},v=(E,x)=>{E.preventDefault(),i(SE({productId:x}))},_=R.useCallback(async()=>{var E,x;try{m(!0);const k=await Ke.post(`${JK}/api/${QK}/coupon`,{data:{code:a}});h({type:"success",msg:k==null?void 0:k.data.message}),i(Of({isShowLoading:!1}))}catch(k){k instanceof $t&&(console.log((E=k==null?void 0:k.response)==null?void 0:E.data.message),h({type:"danger",msg:(x=k==null?void 0:k.response)==null?void 0:x.data.message}))}finally{m(!1)}},[i,a]);return y.jsx(y.Fragment,{children:y.jsxs("div",{className:"container my-5",children:[y.jsxs("div",{className:"row bg-white g-0",children:[y.jsxs("div",{className:`p-4 p-lg-5 ${t.length?"col-md-7":""}`,children:[y.jsxs("div",{className:"d-flex align-items-center pb-3 mb-4",children:[y.jsx("h3",{className:"title fs-2 mb-0 me-3",children:"Your Cart"}),y.jsx("small",{className:"mt-2",children:"購｜物｜車"})]}),t.length?y.jsxs("div",{className:"mb-4",children:[t.map(E=>y.jsx($K,{item:E},E.id)),y.jsxs("div",{className:"text-end mt-5 mb-3",children:[y.jsxs("div",{className:"input-group",children:[y.jsx("input",{type:"text",className:"form-control form-control-sm w-auto",placeholder:"請輸入優惠券代碼",value:a,onChange:E=>l(E.target.value)}),y.jsxs("button",{className:"btn btn-sm btn-secondary",type:"button",onClick:_,disabled:!a,children:["使用優惠券",f&&y.jsx("span",{className:"spinner-grow spinner-grow-sm ms-2"})]})]}),y.jsxs("div",{className:"d-flex align-items-center justify-content-between mt-1",children:[y.jsx("span",{className:"fs-tiny",children:"* 加入商品需重新套用優惠券"}),c.type?y.jsx("small",{className:`ms-auto fs-tiny text-${c.type}`,children:c.msg}):""]})]}),y.jsx("div",{className:"card",children:y.jsxs("div",{className:"card-body p-2",children:[y.jsxs("div",{className:"border-bottom mb-2 pb-2 d-flex align-items-center justify-content-between",children:[y.jsx("small",{children:"小計"}),y.jsxs("small",{children:["$",e]})]}),y.jsxs("div",{className:"border-bottom mb-2 pb-2 d-flex align-items-start justify-content-between",children:[y.jsxs("small",{children:["優惠券折扣",s?`（${s.title} ${s.percent} 折）`:""]}),y.jsx("small",{className:"text-danger",children:e-Math.round(n)>0?`-${e-Math.round(n)}`:""})]}),y.jsxs("div",{className:"d-flex align-items-center justify-content-between",children:[y.jsx("strong",{children:"總金額"}),y.jsxs("strong",{children:["$",Math.round(n)]})]})]})})]}):y.jsx("p",{className:"text-center opacity-75 mt-5",children:"購物車目前是空的，看看以下推薦商品 ↓"})]}),t.length?y.jsxs("div",{className:"p-4 p-lg-5 col-md-5",style:{backgroundColor:"var(--tertiary)"},children:[y.jsxs("div",{className:"d-flex align-items-center pb-3 mb-4",children:[y.jsx("h3",{className:"title fs-2 mb-0 me-3",children:"Checkout"}),y.jsx("small",{className:"mt-2",children:"結｜帳"})]}),y.jsx(WK,{})]}):""]}),y.jsxs("div",{className:"py-5 mt-2",children:[y.jsxs("div",{className:"d-flex flex-column align-items-center text-center",children:[y.jsx("h5",{className:"title text-center fs-4 mb-2",children:"＼ Recommendations ／"}),y.jsx("small",{className:"d-block",children:"精選商品"})]}),o.length?y.jsx(Dp,{...p,className:"py-4",children:o.map(E=>y.jsx(pu,{className:"align-self-center",children:y.jsx(Hb,{isLink:!0,item:E,children:y.jsx("button",{type:"button",className:"btn btn-sm btn-secondary rounded-pill px-4 mt-3",onClick:x=>v(x,E.id),children:"加入購物車"})})},E.id))}):""]})]})})};function Wb(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function tY(i,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(i,n.key,n)}}function qb(i,t,e){return t&&tY(i.prototype,t),i}function nY(i,t,e){return t in i?Object.defineProperty(i,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):i[t]=e,i}function OA(i,t){var e=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(i,s).enumerable})),e.push.apply(e,n)}return e}function J0(i){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?OA(Object(e),!0).forEach(function(n){nY(i,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(e)):OA(Object(e)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(e,n))})}return i}function pN(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(t&&t.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),t&&Ny(i,t)}function yr(i){return yr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},yr(i)}function Ny(i,t){return Ny=Object.setPrototypeOf||function(n,s){return n.__proto__=s,n},Ny(i,t)}function iY(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function bN(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function sY(i,t){return t&&(typeof t=="object"||typeof t=="function")?t:bN(i)}function wN(i){var t=iY();return function(){var n=yr(i),s;if(t){var r=yr(this).constructor;s=Reflect.construct(n,arguments,r)}else s=n.apply(this,arguments);return sY(this,s)}}function rY(i,t){for(;!Object.prototype.hasOwnProperty.call(i,t)&&(i=yr(i),i!==null););return i}function Bo(i,t,e){return typeof Reflect<"u"&&Reflect.get?Bo=Reflect.get:Bo=function(s,r,o){var a=rY(s,r);if(a){var l=Object.getOwnPropertyDescriptor(a,r);return l.get?l.get.call(o):l.value}},Bo(i,t,e||i)}function bu(i,t){return lY(i)||uY(i,t)||vN(i,t)||hY()}function oY(i){return aY(i)||cY(i)||vN(i)||dY()}function aY(i){if(Array.isArray(i))return My(i)}function lY(i){if(Array.isArray(i))return i}function cY(i){if(typeof Symbol<"u"&&Symbol.iterator in Object(i))return Array.from(i)}function uY(i,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(i)))){var e=[],n=!0,s=!1,r=void 0;try{for(var o=i[Symbol.iterator](),a;!(n=(a=o.next()).done)&&(e.push(a.value),!(t&&e.length===t));n=!0);}catch(l){s=!0,r=l}finally{try{!n&&o.return!=null&&o.return()}finally{if(s)throw r}}return e}}function vN(i,t){if(i){if(typeof i=="string")return My(i,t);var e=Object.prototype.toString.call(i).slice(8,-1);if(e==="Object"&&i.constructor&&(e=i.constructor.name),e==="Map"||e==="Set")return Array.from(i);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return My(i,t)}}function My(i,t){(t==null||t>i.length)&&(t=i.length);for(var e=0,n=new Array(t);e<t;e++)n[e]=i[e];return n}function dY(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hY(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Cu={el:document,name:"scroll",offset:[0,0],repeat:!1,smooth:!1,initPosition:{x:0,y:0},direction:"vertical",gestureDirection:"vertical",reloadOnContextChange:!1,lerp:.1,class:"is-inview",scrollbarContainer:!1,scrollbarClass:"c-scrollbar",scrollingClass:"has-scroll-scrolling",draggingClass:"has-scroll-dragging",smoothClass:"has-scroll-smooth",initClass:"has-scroll-init",getSpeed:!1,getDirection:!1,scrollFromAnywhere:!1,multiplier:1,firefoxMultiplier:50,touchMultiplier:2,resetNativeScroll:!0,tablet:{smooth:!1,direction:"vertical",gestureDirection:"vertical",breakpoint:1024},smartphone:{smooth:!1,direction:"vertical",gestureDirection:"vertical"}},yN=function(){function i(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Wb(this,i),Object.assign(this,Cu,t),this.smartphone=Cu.smartphone,t.smartphone&&Object.assign(this.smartphone,t.smartphone),this.tablet=Cu.tablet,t.tablet&&Object.assign(this.tablet,t.tablet),this.namespace="locomotive",this.html=document.documentElement,this.windowHeight=window.innerHeight,this.windowWidth=window.innerWidth,this.windowMiddle={x:this.windowWidth/2,y:this.windowHeight/2},this.els={},this.currentElements={},this.listeners={},this.hasScrollTicking=!1,this.hasCallEventSet=!1,this.checkScroll=this.checkScroll.bind(this),this.checkResize=this.checkResize.bind(this),this.checkEvent=this.checkEvent.bind(this),this.instance={scroll:{x:0,y:0},limit:{x:this.html.offsetWidth,y:this.html.offsetHeight},currentElements:this.currentElements},this.isMobile?this.isTablet?this.context="tablet":this.context="smartphone":this.context="desktop",this.isMobile&&(this.direction=this[this.context].direction),this.direction==="horizontal"?this.directionAxis="x":this.directionAxis="y",this.getDirection&&(this.instance.direction=null),this.getDirection&&(this.instance.speed=0),this.html.classList.add(this.initClass),window.addEventListener("resize",this.checkResize,!1)}return qb(i,[{key:"init",value:function(){this.initEvents()}},{key:"checkScroll",value:function(){this.dispatchScroll()}},{key:"checkResize",value:function(){var e=this;this.resizeTick||(this.resizeTick=!0,requestAnimationFrame(function(){e.resize(),e.resizeTick=!1}))}},{key:"resize",value:function(){}},{key:"checkContext",value:function(){if(this.reloadOnContextChange){this.isMobile=/Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1||this.windowWidth<this.tablet.breakpoint,this.isTablet=this.isMobile&&this.windowWidth>=this.tablet.breakpoint;var e=this.context;if(this.isMobile?this.isTablet?this.context="tablet":this.context="smartphone":this.context="desktop",e!=this.context){var n=e=="desktop"?this.smooth:this[e].smooth,s=this.context=="desktop"?this.smooth:this[this.context].smooth;n!=s&&window.location.reload()}}}},{key:"initEvents",value:function(){var e=this;this.scrollToEls=this.el.querySelectorAll("[data-".concat(this.name,"-to]")),this.setScrollTo=this.setScrollTo.bind(this),this.scrollToEls.forEach(function(n){n.addEventListener("click",e.setScrollTo,!1)})}},{key:"setScrollTo",value:function(e){e.preventDefault(),this.scrollTo(e.currentTarget.getAttribute("data-".concat(this.name,"-href"))||e.currentTarget.getAttribute("href"),{offset:e.currentTarget.getAttribute("data-".concat(this.name,"-offset"))})}},{key:"addElements",value:function(){}},{key:"detectElements",value:function(e){var n=this,s=this.instance.scroll.y,r=s+this.windowHeight,o=this.instance.scroll.x,a=o+this.windowWidth;Object.entries(this.els).forEach(function(l){var c=bu(l,2),h=c[0],f=c[1];if(f&&(!f.inView||e)&&(n.direction==="horizontal"?a>=f.left&&o<f.right&&n.setInView(f,h):r>=f.top&&s<f.bottom&&n.setInView(f,h)),f&&f.inView)if(n.direction==="horizontal"){var m=f.right-f.left;f.progress=(n.instance.scroll.x-(f.left-n.windowWidth))/(m+n.windowWidth),(a<f.left||o>f.right)&&n.setOutOfView(f,h)}else{var p=f.bottom-f.top;f.progress=(n.instance.scroll.y-(f.top-n.windowHeight))/(p+n.windowHeight),(r<f.top||s>f.bottom)&&n.setOutOfView(f,h)}}),this.hasScrollTicking=!1}},{key:"setInView",value:function(e,n){this.els[n].inView=!0,e.el.classList.add(e.class),this.currentElements[n]=e,e.call&&this.hasCallEventSet&&(this.dispatchCall(e,"enter"),e.repeat||(this.els[n].call=!1))}},{key:"setOutOfView",value:function(e,n){var s=this;this.els[n].inView=!1,Object.keys(this.currentElements).forEach(function(r){r===n&&delete s.currentElements[r]}),e.call&&this.hasCallEventSet&&this.dispatchCall(e,"exit"),e.repeat&&e.el.classList.remove(e.class)}},{key:"dispatchCall",value:function(e,n){this.callWay=n,this.callValue=e.call.split(",").map(function(r){return r.trim()}),this.callObj=e,this.callValue.length==1&&(this.callValue=this.callValue[0]);var s=new Event(this.namespace+"call");this.el.dispatchEvent(s)}},{key:"dispatchScroll",value:function(){var e=new Event(this.namespace+"scroll");this.el.dispatchEvent(e)}},{key:"setEvents",value:function(e,n){this.listeners[e]||(this.listeners[e]=[]);var s=this.listeners[e];s.push(n),s.length===1&&this.el.addEventListener(this.namespace+e,this.checkEvent,!1),e==="call"&&(this.hasCallEventSet=!0,this.detectElements(!0))}},{key:"unsetEvents",value:function(e,n){if(this.listeners[e]){var s=this.listeners[e],r=s.indexOf(n);r<0||(s.splice(r,1),s.index===0&&this.el.removeEventListener(this.namespace+e,this.checkEvent,!1))}}},{key:"checkEvent",value:function(e){var n=this,s=e.type.replace(this.namespace,""),r=this.listeners[s];!r||r.length===0||r.forEach(function(o){switch(s){case"scroll":return o(n.instance);case"call":return o(n.callValue,n.callWay,n.callObj);default:return o()}})}},{key:"startScroll",value:function(){}},{key:"stopScroll",value:function(){}},{key:"setScroll",value:function(e,n){this.instance.scroll={x:0,y:0}}},{key:"destroy",value:function(){var e=this;window.removeEventListener("resize",this.checkResize,!1),Object.keys(this.listeners).forEach(function(n){e.el.removeEventListener(e.namespace+n,e.checkEvent,!1)}),this.listeners={},this.scrollToEls.forEach(function(n){n.removeEventListener("click",e.setScrollTo,!1)}),this.html.classList.remove(this.initClass)}}]),i}(),fY=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function _N(i,t){return t={exports:{}},i(t,t.exports),t.exports}var EN=_N(function(i,t){(function(){function e(){var n=window,s=document;if("scrollBehavior"in s.documentElement.style&&n.__forceSmoothScrollPolyfill__!==!0)return;var r=n.HTMLElement||n.Element,o=468,a={scroll:n.scroll||n.scrollTo,scrollBy:n.scrollBy,elementScroll:r.prototype.scroll||f,scrollIntoView:r.prototype.scrollIntoView},l=n.performance&&n.performance.now?n.performance.now.bind(n.performance):Date.now;function c(S){var O=["MSIE ","Trident/","Edge/"];return new RegExp(O.join("|")).test(S)}var h=c(n.navigator.userAgent)?1:0;function f(S,O){this.scrollLeft=S,this.scrollTop=O}function m(S){return .5*(1-Math.cos(Math.PI*S))}function p(S){if(S===null||typeof S!="object"||S.behavior===void 0||S.behavior==="auto"||S.behavior==="instant")return!0;if(typeof S=="object"&&S.behavior==="smooth")return!1;throw new TypeError("behavior member of ScrollOptions "+S.behavior+" is not a valid value for enumeration ScrollBehavior.")}function v(S,O){if(O==="Y")return S.clientHeight+h<S.scrollHeight;if(O==="X")return S.clientWidth+h<S.scrollWidth}function _(S,O){var P=n.getComputedStyle(S,null)["overflow"+O];return P==="auto"||P==="scroll"}function E(S){var O=v(S,"Y")&&_(S,"Y"),P=v(S,"X")&&_(S,"X");return O||P}function x(S){for(;S!==s.body&&E(S)===!1;)S=S.parentNode||S.host;return S}function k(S){var O=l(),P,N,L,M=(O-S.startTime)/o;M=M>1?1:M,P=m(M),N=S.startX+(S.x-S.startX)*P,L=S.startY+(S.y-S.startY)*P,S.method.call(S.scrollable,N,L),(N!==S.x||L!==S.y)&&n.requestAnimationFrame(k.bind(n,S))}function A(S,O,P){var N,L,M,F,q=l();S===s.body?(N=n,L=n.scrollX||n.pageXOffset,M=n.scrollY||n.pageYOffset,F=a.scroll):(N=S,L=S.scrollLeft,M=S.scrollTop,F=f),k({scrollable:N,method:F,startTime:q,startX:L,startY:M,x:O,y:P})}n.scroll=n.scrollTo=function(){if(arguments[0]!==void 0){if(p(arguments[0])===!0){a.scroll.call(n,arguments[0].left!==void 0?arguments[0].left:typeof arguments[0]!="object"?arguments[0]:n.scrollX||n.pageXOffset,arguments[0].top!==void 0?arguments[0].top:arguments[1]!==void 0?arguments[1]:n.scrollY||n.pageYOffset);return}A.call(n,s.body,arguments[0].left!==void 0?~~arguments[0].left:n.scrollX||n.pageXOffset,arguments[0].top!==void 0?~~arguments[0].top:n.scrollY||n.pageYOffset)}},n.scrollBy=function(){if(arguments[0]!==void 0){if(p(arguments[0])){a.scrollBy.call(n,arguments[0].left!==void 0?arguments[0].left:typeof arguments[0]!="object"?arguments[0]:0,arguments[0].top!==void 0?arguments[0].top:arguments[1]!==void 0?arguments[1]:0);return}A.call(n,s.body,~~arguments[0].left+(n.scrollX||n.pageXOffset),~~arguments[0].top+(n.scrollY||n.pageYOffset))}},r.prototype.scroll=r.prototype.scrollTo=function(){if(arguments[0]!==void 0){if(p(arguments[0])===!0){if(typeof arguments[0]=="number"&&arguments[1]===void 0)throw new SyntaxError("Value could not be converted");a.elementScroll.call(this,arguments[0].left!==void 0?~~arguments[0].left:typeof arguments[0]!="object"?~~arguments[0]:this.scrollLeft,arguments[0].top!==void 0?~~arguments[0].top:arguments[1]!==void 0?~~arguments[1]:this.scrollTop);return}var S=arguments[0].left,O=arguments[0].top;A.call(this,this,typeof S>"u"?this.scrollLeft:~~S,typeof O>"u"?this.scrollTop:~~O)}},r.prototype.scrollBy=function(){if(arguments[0]!==void 0){if(p(arguments[0])===!0){a.elementScroll.call(this,arguments[0].left!==void 0?~~arguments[0].left+this.scrollLeft:~~arguments[0]+this.scrollLeft,arguments[0].top!==void 0?~~arguments[0].top+this.scrollTop:~~arguments[1]+this.scrollTop);return}this.scroll({left:~~arguments[0].left+this.scrollLeft,top:~~arguments[0].top+this.scrollTop,behavior:arguments[0].behavior})}},r.prototype.scrollIntoView=function(){if(p(arguments[0])===!0){a.scrollIntoView.call(this,arguments[0]===void 0?!0:arguments[0]);return}var S=x(this),O=S.getBoundingClientRect(),P=this.getBoundingClientRect();S!==s.body?(A.call(this,S,S.scrollLeft+P.left-O.left,S.scrollTop+P.top-O.top),n.getComputedStyle(S).position!=="fixed"&&n.scrollBy({left:O.left,top:O.top,behavior:"smooth"})):n.scrollBy({left:P.left,top:P.top,behavior:"smooth"})}}i.exports={polyfill:e}})()});EN.polyfill;var mY=function(i){pN(e,i);var t=wN(e);function e(){var n,s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Wb(this,e),n=t.call(this,s),n.resetNativeScroll&&(history.scrollRestoration&&(history.scrollRestoration="manual"),window.scrollTo(0,0)),window.addEventListener("scroll",n.checkScroll,!1),window.smoothscrollPolyfill===void 0&&(window.smoothscrollPolyfill=EN,window.smoothscrollPolyfill.polyfill()),n}return qb(e,[{key:"init",value:function(){this.instance.scroll.y=window.pageYOffset,this.addElements(),this.detectElements(),Bo(yr(e.prototype),"init",this).call(this)}},{key:"checkScroll",value:function(){var s=this;Bo(yr(e.prototype),"checkScroll",this).call(this),this.getDirection&&this.addDirection(),this.getSpeed&&(this.addSpeed(),this.speedTs=Date.now()),this.instance.scroll.y=window.pageYOffset,Object.entries(this.els).length&&(this.hasScrollTicking||(requestAnimationFrame(function(){s.detectElements()}),this.hasScrollTicking=!0))}},{key:"addDirection",value:function(){window.pageYOffset>this.instance.scroll.y?this.instance.direction!=="down"&&(this.instance.direction="down"):window.pageYOffset<this.instance.scroll.y&&this.instance.direction!=="up"&&(this.instance.direction="up")}},{key:"addSpeed",value:function(){window.pageYOffset!=this.instance.scroll.y?this.instance.speed=(window.pageYOffset-this.instance.scroll.y)/Math.max(1,Date.now()-this.speedTs):this.instance.speed=0}},{key:"resize",value:function(){Object.entries(this.els).length&&(this.windowHeight=window.innerHeight,this.updateElements())}},{key:"addElements",value:function(){var s=this;this.els={};var r=this.el.querySelectorAll("[data-"+this.name+"]");r.forEach(function(o,a){o.getBoundingClientRect();var l=o.dataset[s.name+"Class"]||s.class,c=typeof o.dataset[s.name+"Id"]=="string"?o.dataset[s.name+"Id"]:a,h,f,m=typeof o.dataset[s.name+"Offset"]=="string"?o.dataset[s.name+"Offset"].split(","):s.offset,p=o.dataset[s.name+"Repeat"],v=o.dataset[s.name+"Call"],_=o.dataset[s.name+"Target"],E;_!==void 0?E=document.querySelector("".concat(_)):E=o;var x=E.getBoundingClientRect();h=x.top+s.instance.scroll.y,f=x.left+s.instance.scroll.x;var k=h+E.offsetHeight,A=f+E.offsetWidth;p=="false"?p=!1:p!=null?p=!0:p=s.repeat;var S=s.getRelativeOffset(m);h=h+S[0],k=k-S[1];var O={el:o,targetEl:E,id:c,class:l,top:h,bottom:k,left:f,right:A,offset:m,progress:0,repeat:p,inView:!1,call:v};s.els[c]=O,o.classList.contains(l)&&s.setInView(s.els[c],c)})}},{key:"updateElements",value:function(){var s=this;Object.entries(this.els).forEach(function(r){var o=bu(r,2),a=o[0],l=o[1],c=l.targetEl.getBoundingClientRect().top+s.instance.scroll.y,h=c+l.targetEl.offsetHeight,f=s.getRelativeOffset(l.offset);s.els[a].top=c+f[0],s.els[a].bottom=h-f[1]}),this.hasScrollTicking=!1}},{key:"getRelativeOffset",value:function(s){var r=[0,0];if(s)for(var o=0;o<s.length;o++)typeof s[o]=="string"?s[o].includes("%")?r[o]=parseInt(s[o].replace("%","")*this.windowHeight/100):r[o]=parseInt(s[o]):r[o]=s[o];return r}},{key:"scrollTo",value:function(s){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=parseInt(r.offset)||0,a=r.callback?r.callback:!1;if(typeof s=="string"){if(s==="top")s=this.html;else if(s==="bottom")s=this.html.offsetHeight-window.innerHeight;else if(s=document.querySelector(s),!s)return}else if(typeof s=="number")s=parseInt(s);else if(!(s&&s.tagName)){console.warn("`target` parameter is not valid");return}typeof s!="number"?o=s.getBoundingClientRect().top+o+this.instance.scroll.y:o=s+o;var l=function(){return parseInt(window.pageYOffset)===parseInt(o)};if(a)if(l()){a();return}else{var c=function h(){l()&&(window.removeEventListener("scroll",h),a())};window.addEventListener("scroll",c)}window.scrollTo({top:o,behavior:r.duration===0?"auto":"smooth"})}},{key:"update",value:function(){this.addElements(),this.detectElements()}},{key:"destroy",value:function(){Bo(yr(e.prototype),"destroy",this).call(this),window.removeEventListener("scroll",this.checkScroll,!1)}}]),e}(yN);/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var NA=Object.getOwnPropertySymbols,gY=Object.prototype.hasOwnProperty,pY=Object.prototype.propertyIsEnumerable;function bY(i){if(i==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(i)}function wY(){try{if(!Object.assign)return!1;var i=new String("abc");if(i[5]="de",Object.getOwnPropertyNames(i)[0]==="5")return!1;for(var t={},e=0;e<10;e++)t["_"+String.fromCharCode(e)]=e;var n=Object.getOwnPropertyNames(t).map(function(r){return t[r]});if(n.join("")!=="0123456789")return!1;var s={};return"abcdefghijklmnopqrst".split("").forEach(function(r){s[r]=r}),Object.keys(Object.assign({},s)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var vY=wY()?Object.assign:function(i,t){for(var e,n=bY(i),s,r=1;r<arguments.length;r++){e=Object(arguments[r]);for(var o in e)gY.call(e,o)&&(n[o]=e[o]);if(NA){s=NA(e);for(var a=0;a<s.length;a++)pY.call(e,s[a])&&(n[s[a]]=e[s[a]])}}return n};function CN(){}CN.prototype={on:function(i,t,e){var n=this.e||(this.e={});return(n[i]||(n[i]=[])).push({fn:t,ctx:e}),this},once:function(i,t,e){var n=this;function s(){n.off(i,s),t.apply(e,arguments)}return s._=t,this.on(i,s,e)},emit:function(i){var t=[].slice.call(arguments,1),e=((this.e||(this.e={}))[i]||[]).slice(),n=0,s=e.length;for(n;n<s;n++)e[n].fn.apply(e[n].ctx,t);return this},off:function(i,t){var e=this.e||(this.e={}),n=e[i],s=[];if(n&&t)for(var r=0,o=n.length;r<o;r++)n[r].fn!==t&&n[r].fn._!==t&&s.push(n[r]);return s.length?e[i]=s:delete e[i],this}};var yY=CN,_Y=_N(function(i,t){(function(){var e;e=t!==null?t:this,e.Lethargy=function(){function n(s,r,o,a){this.stability=s!=null?Math.abs(s):8,this.sensitivity=r!=null?1+Math.abs(r):100,this.tolerance=o!=null?1+Math.abs(o):1.1,this.delay=a??150,this.lastUpDeltas=(function(){var l,c,h;for(h=[],l=1,c=this.stability*2;1<=c?l<=c:l>=c;1<=c?l++:l--)h.push(null);return h}).call(this),this.lastDownDeltas=(function(){var l,c,h;for(h=[],l=1,c=this.stability*2;1<=c?l<=c:l>=c;1<=c?l++:l--)h.push(null);return h}).call(this),this.deltasTimestamp=(function(){var l,c,h;for(h=[],l=1,c=this.stability*2;1<=c?l<=c:l>=c;1<=c?l++:l--)h.push(null);return h}).call(this)}return n.prototype.check=function(s){var r;return s=s.originalEvent||s,s.wheelDelta!=null?r=s.wheelDelta:s.deltaY!=null?r=s.deltaY*-40:(s.detail!=null||s.detail===0)&&(r=s.detail*-40),this.deltasTimestamp.push(Date.now()),this.deltasTimestamp.shift(),r>0?(this.lastUpDeltas.push(r),this.lastUpDeltas.shift(),this.isInertia(1)):(this.lastDownDeltas.push(r),this.lastDownDeltas.shift(),this.isInertia(-1))},n.prototype.isInertia=function(s){var r,o,a,l,c,h,f;return r=s===-1?this.lastDownDeltas:this.lastUpDeltas,r[0]===null?s:this.deltasTimestamp[this.stability*2-2]+this.delay>Date.now()&&r[0]===r[this.stability*2-1]?!1:(a=r.slice(0,this.stability),o=r.slice(this.stability,this.stability*2),f=a.reduce(function(m,p){return m+p}),c=o.reduce(function(m,p){return m+p}),h=f/a.length,l=c/o.length,Math.abs(h)<Math.abs(l*this.tolerance)&&this.sensitivity<Math.abs(l)?s:!1)},n.prototype.showLastUpDeltas=function(){return this.lastUpDeltas},n.prototype.showLastDownDeltas=function(){return this.lastDownDeltas},n}()}).call(fY)}),us=function(){return{hasWheelEvent:"onwheel"in document,hasMouseWheelEvent:"onmousewheel"in document,hasTouch:"ontouchstart"in window||window.TouchEvent||window.DocumentTouch&&document instanceof DocumentTouch,hasTouchWin:navigator.msMaxTouchPoints&&navigator.msMaxTouchPoints>1,hasPointer:!!window.navigator.msPointerEnabled,hasKeyDown:"onkeydown"in document,isFirefox:navigator.userAgent.indexOf("Firefox")>-1}}(),EY=Object.prototype.toString,CY=Object.prototype.hasOwnProperty,xY=function(i){if(!i)return console.warn("bindAll requires at least one argument.");var t=Array.prototype.slice.call(arguments,1);if(t.length===0)for(var e in i)CY.call(i,e)&&typeof i[e]=="function"&&EY.call(i[e])=="[object Function]"&&t.push(e);for(var n=0;n<t.length;n++){var s=t[n];i[s]=TY(i[s],i)}};function TY(i,t){return function(){return i.apply(t,arguments)}}var kY=_Y.Lethargy,Ll="virtualscroll",SY=Ts,Zd={LEFT:37,UP:38,RIGHT:39,DOWN:40,SPACE:32};function Ts(i){xY(this,"_onWheel","_onMouseWheel","_onTouchStart","_onTouchMove","_onKeyDown"),this.el=window,i&&i.el&&(this.el=i.el,delete i.el),this.options=vY({mouseMultiplier:1,touchMultiplier:2,firefoxMultiplier:15,keyStep:120,preventTouch:!1,unpreventTouchClass:"vs-touchmove-allowed",limitInertia:!1,useKeyboard:!0,useTouch:!0},i),this.options.limitInertia&&(this._lethargy=new kY),this._emitter=new yY,this._event={y:0,x:0,deltaX:0,deltaY:0},this.touchStartX=null,this.touchStartY=null,this.bodyTouchAction=null,this.options.passive!==void 0&&(this.listenerOptions={passive:this.options.passive})}Ts.prototype._notify=function(i){var t=this._event;t.x+=t.deltaX,t.y+=t.deltaY,this._emitter.emit(Ll,{x:t.x,y:t.y,deltaX:t.deltaX,deltaY:t.deltaY,originalEvent:i})};Ts.prototype._onWheel=function(i){var t=this.options;if(!(this._lethargy&&this._lethargy.check(i)===!1)){var e=this._event;e.deltaX=i.wheelDeltaX||i.deltaX*-1,e.deltaY=i.wheelDeltaY||i.deltaY*-1,us.isFirefox&&i.deltaMode==1&&(e.deltaX*=t.firefoxMultiplier,e.deltaY*=t.firefoxMultiplier),e.deltaX*=t.mouseMultiplier,e.deltaY*=t.mouseMultiplier,this._notify(i)}};Ts.prototype._onMouseWheel=function(i){if(!(this.options.limitInertia&&this._lethargy.check(i)===!1)){var t=this._event;t.deltaX=i.wheelDeltaX?i.wheelDeltaX:0,t.deltaY=i.wheelDeltaY?i.wheelDeltaY:i.wheelDelta,this._notify(i)}};Ts.prototype._onTouchStart=function(i){var t=i.targetTouches?i.targetTouches[0]:i;this.touchStartX=t.pageX,this.touchStartY=t.pageY};Ts.prototype._onTouchMove=function(i){var t=this.options;t.preventTouch&&!i.target.classList.contains(t.unpreventTouchClass)&&i.preventDefault();var e=this._event,n=i.targetTouches?i.targetTouches[0]:i;e.deltaX=(n.pageX-this.touchStartX)*t.touchMultiplier,e.deltaY=(n.pageY-this.touchStartY)*t.touchMultiplier,this.touchStartX=n.pageX,this.touchStartY=n.pageY,this._notify(i)};Ts.prototype._onKeyDown=function(i){var t=this._event;t.deltaX=t.deltaY=0;var e=window.innerHeight-40;switch(i.keyCode){case Zd.LEFT:case Zd.UP:t.deltaY=this.options.keyStep;break;case Zd.RIGHT:case Zd.DOWN:t.deltaY=-this.options.keyStep;break;case i.shiftKey:t.deltaY=e;break;case Zd.SPACE:t.deltaY=-e;break;default:return}this._notify(i)};Ts.prototype._bind=function(){us.hasWheelEvent&&this.el.addEventListener("wheel",this._onWheel,this.listenerOptions),us.hasMouseWheelEvent&&this.el.addEventListener("mousewheel",this._onMouseWheel,this.listenerOptions),us.hasTouch&&this.options.useTouch&&(this.el.addEventListener("touchstart",this._onTouchStart,this.listenerOptions),this.el.addEventListener("touchmove",this._onTouchMove,this.listenerOptions)),us.hasPointer&&us.hasTouchWin&&(this.bodyTouchAction=document.body.style.msTouchAction,document.body.style.msTouchAction="none",this.el.addEventListener("MSPointerDown",this._onTouchStart,!0),this.el.addEventListener("MSPointerMove",this._onTouchMove,!0)),us.hasKeyDown&&this.options.useKeyboard&&document.addEventListener("keydown",this._onKeyDown)};Ts.prototype._unbind=function(){us.hasWheelEvent&&this.el.removeEventListener("wheel",this._onWheel),us.hasMouseWheelEvent&&this.el.removeEventListener("mousewheel",this._onMouseWheel),us.hasTouch&&(this.el.removeEventListener("touchstart",this._onTouchStart),this.el.removeEventListener("touchmove",this._onTouchMove)),us.hasPointer&&us.hasTouchWin&&(document.body.style.msTouchAction=this.bodyTouchAction,this.el.removeEventListener("MSPointerDown",this._onTouchStart,!0),this.el.removeEventListener("MSPointerMove",this._onTouchMove,!0)),us.hasKeyDown&&this.options.useKeyboard&&document.removeEventListener("keydown",this._onKeyDown)};Ts.prototype.on=function(i,t){this._emitter.on(Ll,i,t);var e=this._emitter.e;e&&e[Ll]&&e[Ll].length===1&&this._bind()};Ts.prototype.off=function(i,t){this._emitter.off(Ll,i,t);var e=this._emitter.e;(!e[Ll]||e[Ll].length<=0)&&this._unbind()};Ts.prototype.reset=function(){var i=this._event;i.x=0,i.y=0};Ts.prototype.destroy=function(){this._emitter.off(),this._unbind()};function Q0(i,t,e){return(1-e)*i+e*t}function Ms(i){var t={};if(window.getComputedStyle){var e=getComputedStyle(i),n=e.transform||e.webkitTransform||e.mozTransform,s=n.match(/^matrix3d\((.+)\)$/);return s?(t.x=s?parseFloat(s[1].split(", ")[12]):0,t.y=s?parseFloat(s[1].split(", ")[13]):0):(s=n.match(/^matrix\((.+)\)$/),t.x=s?parseFloat(s[1].split(", ")[4]):0,t.y=s?parseFloat(s[1].split(", ")[5]):0),t}}function e1(i){for(var t=[];i&&i!==document;i=i.parentNode)t.push(i);return t}var AY=4,PY=.001,IY=1e-7,RY=10,mh=11,bg=1/(mh-1),OY=typeof Float32Array=="function";function xN(i,t){return 1-3*t+3*i}function TN(i,t){return 3*t-6*i}function kN(i){return 3*i}function Bp(i,t,e){return((xN(t,e)*i+TN(t,e))*i+kN(t))*i}function SN(i,t,e){return 3*xN(t,e)*i*i+2*TN(t,e)*i+kN(t)}function NY(i,t,e,n,s){var r,o,a=0;do o=t+(e-t)/2,r=Bp(o,n,s)-i,r>0?e=o:t=o;while(Math.abs(r)>IY&&++a<RY);return o}function MY(i,t,e,n){for(var s=0;s<AY;++s){var r=SN(t,e,n);if(r===0)return t;var o=Bp(t,e,n)-i;t-=o/r}return t}function LY(i){return i}var VY=function(t,e,n,s){if(!(0<=t&&t<=1&&0<=n&&n<=1))throw new Error("bezier x values must be in [0, 1] range");if(t===e&&n===s)return LY;for(var r=OY?new Float32Array(mh):new Array(mh),o=0;o<mh;++o)r[o]=Bp(o*bg,t,n);function a(l){for(var c=0,h=1,f=mh-1;h!==f&&r[h]<=l;++h)c+=bg;--h;var m=(l-r[h])/(r[h+1]-r[h]),p=c+m*bg,v=SN(p,t,n);return v>=PY?MY(l,p,t,n):v===0?p:NY(l,c,c+bg,t,n)}return function(c){return c===0?0:c===1?1:Bp(a(c),e,s)}},To={LEFT:37,UP:38,RIGHT:39,DOWN:40,SPACE:32,TAB:9,PAGEUP:33,PAGEDOWN:34,HOME:36,END:35},DY=function(i){pN(e,i);var t=wN(e);function e(){var n,s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Wb(this,e),history.scrollRestoration&&(history.scrollRestoration="manual"),window.scrollTo(0,0),n=t.call(this,s),n.inertia&&(n.lerp=n.inertia*.1),n.isScrolling=!1,n.isDraggingScrollbar=!1,n.isTicking=!1,n.hasScrollTicking=!1,n.parallaxElements={},n.stop=!1,n.scrollbarContainer=s.scrollbarContainer,n.checkKey=n.checkKey.bind(bN(n)),window.addEventListener("keydown",n.checkKey,!1),n}return qb(e,[{key:"init",value:function(){var s=this;this.html.classList.add(this.smoothClass),this.html.setAttribute("data-".concat(this.name,"-direction"),this.direction),this.instance=J0({delta:{x:this.initPosition.x,y:this.initPosition.y},scroll:{x:this.initPosition.x,y:this.initPosition.y}},this.instance),this.vs=new SY({el:this.scrollFromAnywhere?document:this.el,mouseMultiplier:navigator.platform.indexOf("Win")>-1?1:.4,firefoxMultiplier:this.firefoxMultiplier,touchMultiplier:this.touchMultiplier,useKeyboard:!1,passive:!0}),this.vs.on(function(r){s.stop||s.isDraggingScrollbar||requestAnimationFrame(function(){s.updateDelta(r),s.isScrolling||s.startScrolling()})}),this.setScrollLimit(),this.initScrollBar(),this.addSections(),this.addElements(),this.checkScroll(!0),this.transformElements(!0,!0),Bo(yr(e.prototype),"init",this).call(this)}},{key:"setScrollLimit",value:function(){if(this.instance.limit.y=this.el.offsetHeight-this.windowHeight,this.direction==="horizontal"){for(var s=0,r=this.el.children,o=0;o<r.length;o++)s+=r[o].offsetWidth;this.instance.limit.x=s-this.windowWidth}}},{key:"startScrolling",value:function(){this.startScrollTs=Date.now(),this.isScrolling=!0,this.checkScroll(),this.html.classList.add(this.scrollingClass)}},{key:"stopScrolling",value:function(){cancelAnimationFrame(this.checkScrollRaf),this.startScrollTs=void 0,this.scrollToRaf&&(cancelAnimationFrame(this.scrollToRaf),this.scrollToRaf=null),this.isScrolling=!1,this.instance.scroll.y=Math.round(this.instance.scroll.y),this.html.classList.remove(this.scrollingClass)}},{key:"checkKey",value:function(s){var r=this;if(this.stop){s.keyCode==To.TAB&&requestAnimationFrame(function(){r.html.scrollTop=0,document.body.scrollTop=0,r.html.scrollLeft=0,document.body.scrollLeft=0});return}switch(s.keyCode){case To.TAB:requestAnimationFrame(function(){r.html.scrollTop=0,document.body.scrollTop=0,r.html.scrollLeft=0,document.body.scrollLeft=0,r.scrollTo(document.activeElement,{offset:-window.innerHeight/2})});break;case To.UP:this.isActiveElementScrollSensitive()&&(this.instance.delta[this.directionAxis]-=240);break;case To.DOWN:this.isActiveElementScrollSensitive()&&(this.instance.delta[this.directionAxis]+=240);break;case To.PAGEUP:this.instance.delta[this.directionAxis]-=window.innerHeight;break;case To.PAGEDOWN:this.instance.delta[this.directionAxis]+=window.innerHeight;break;case To.HOME:this.instance.delta[this.directionAxis]-=this.instance.limit[this.directionAxis];break;case To.END:this.instance.delta[this.directionAxis]+=this.instance.limit[this.directionAxis];break;case To.SPACE:this.isActiveElementScrollSensitive()&&(s.shiftKey?this.instance.delta[this.directionAxis]-=window.innerHeight:this.instance.delta[this.directionAxis]+=window.innerHeight);break;default:return}this.instance.delta[this.directionAxis]<0&&(this.instance.delta[this.directionAxis]=0),this.instance.delta[this.directionAxis]>this.instance.limit[this.directionAxis]&&(this.instance.delta[this.directionAxis]=this.instance.limit[this.directionAxis]),this.stopScrolling(),this.isScrolling=!0,this.checkScroll(),this.html.classList.add(this.scrollingClass)}},{key:"isActiveElementScrollSensitive",value:function(){return!(document.activeElement instanceof HTMLInputElement)&&!(document.activeElement instanceof HTMLTextAreaElement)&&!(document.activeElement instanceof HTMLButtonElement)&&!(document.activeElement instanceof HTMLSelectElement)}},{key:"checkScroll",value:function(){var s=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(r||this.isScrolling||this.isDraggingScrollbar){this.hasScrollTicking||(this.checkScrollRaf=requestAnimationFrame(function(){return s.checkScroll()}),this.hasScrollTicking=!0),this.updateScroll();var o=Math.abs(this.instance.delta[this.directionAxis]-this.instance.scroll[this.directionAxis]),a=Date.now()-this.startScrollTs;if(!this.animatingScroll&&a>100&&(o<.5&&this.instance.delta[this.directionAxis]!=0||o<.5&&this.instance.delta[this.directionAxis]==0)&&this.stopScrolling(),Object.entries(this.sections).forEach(function(c){var h=bu(c,2);h[0];var f=h[1];f.persistent||s.instance.scroll[s.directionAxis]>f.offset[s.directionAxis]&&s.instance.scroll[s.directionAxis]<f.limit[s.directionAxis]?(s.direction==="horizontal"?s.transform(f.el,-s.instance.scroll[s.directionAxis],0):s.transform(f.el,0,-s.instance.scroll[s.directionAxis]),f.inView||(f.inView=!0,f.el.style.opacity=1,f.el.style.pointerEvents="all",f.el.setAttribute("data-".concat(s.name,"-section-inview"),""))):((f.inView||r)&&(f.inView=!1,f.el.style.opacity=0,f.el.style.pointerEvents="none",f.el.removeAttribute("data-".concat(s.name,"-section-inview"))),s.transform(f.el,0,0))}),this.getDirection&&this.addDirection(),this.getSpeed&&(this.addSpeed(),this.speedTs=Date.now()),this.detectElements(),this.transformElements(),this.hasScrollbar){var l=this.instance.scroll[this.directionAxis]/this.instance.limit[this.directionAxis]*this.scrollBarLimit[this.directionAxis];this.direction==="horizontal"?this.transform(this.scrollbarThumb,l,0):this.transform(this.scrollbarThumb,0,l)}Bo(yr(e.prototype),"checkScroll",this).call(this),this.hasScrollTicking=!1}}},{key:"resize",value:function(){this.windowHeight=window.innerHeight,this.windowWidth=window.innerWidth,this.checkContext(),this.windowMiddle={x:this.windowWidth/2,y:this.windowHeight/2},this.update()}},{key:"updateDelta",value:function(s){var r,o=this[this.context]&&this[this.context].gestureDirection?this[this.context].gestureDirection:this.gestureDirection;o==="both"?r=s.deltaX+s.deltaY:o==="vertical"?r=s.deltaY:o==="horizontal"?r=s.deltaX:r=s.deltaY,this.instance.delta[this.directionAxis]-=r*this.multiplier,this.instance.delta[this.directionAxis]<0&&(this.instance.delta[this.directionAxis]=0),this.instance.delta[this.directionAxis]>this.instance.limit[this.directionAxis]&&(this.instance.delta[this.directionAxis]=this.instance.limit[this.directionAxis])}},{key:"updateScroll",value:function(s){this.isScrolling||this.isDraggingScrollbar?this.instance.scroll[this.directionAxis]=Q0(this.instance.scroll[this.directionAxis],this.instance.delta[this.directionAxis],this.lerp):this.instance.scroll[this.directionAxis]>this.instance.limit[this.directionAxis]?this.setScroll(this.instance.scroll[this.directionAxis],this.instance.limit[this.directionAxis]):this.instance.scroll.y<0?this.setScroll(this.instance.scroll[this.directionAxis],0):this.setScroll(this.instance.scroll[this.directionAxis],this.instance.delta[this.directionAxis])}},{key:"addDirection",value:function(){this.instance.delta.y>this.instance.scroll.y?this.instance.direction!=="down"&&(this.instance.direction="down"):this.instance.delta.y<this.instance.scroll.y&&this.instance.direction!=="up"&&(this.instance.direction="up"),this.instance.delta.x>this.instance.scroll.x?this.instance.direction!=="right"&&(this.instance.direction="right"):this.instance.delta.x<this.instance.scroll.x&&this.instance.direction!=="left"&&(this.instance.direction="left")}},{key:"addSpeed",value:function(){this.instance.delta[this.directionAxis]!=this.instance.scroll[this.directionAxis]?this.instance.speed=(this.instance.delta[this.directionAxis]-this.instance.scroll[this.directionAxis])/Math.max(1,Date.now()-this.speedTs):this.instance.speed=0}},{key:"initScrollBar",value:function(){if(this.scrollbar=document.createElement("span"),this.scrollbarThumb=document.createElement("span"),this.scrollbar.classList.add("".concat(this.scrollbarClass)),this.scrollbarThumb.classList.add("".concat(this.scrollbarClass,"_thumb")),this.scrollbar.append(this.scrollbarThumb),this.scrollbarContainer?this.scrollbarContainer.append(this.scrollbar):document.body.append(this.scrollbar),this.getScrollBar=this.getScrollBar.bind(this),this.releaseScrollBar=this.releaseScrollBar.bind(this),this.moveScrollBar=this.moveScrollBar.bind(this),this.scrollbarThumb.addEventListener("mousedown",this.getScrollBar),window.addEventListener("mouseup",this.releaseScrollBar),window.addEventListener("mousemove",this.moveScrollBar),this.hasScrollbar=!1,this.direction=="horizontal"){if(this.instance.limit.x+this.windowWidth<=this.windowWidth)return}else if(this.instance.limit.y+this.windowHeight<=this.windowHeight)return;this.hasScrollbar=!0,this.scrollbarBCR=this.scrollbar.getBoundingClientRect(),this.scrollbarHeight=this.scrollbarBCR.height,this.scrollbarWidth=this.scrollbarBCR.width,this.direction==="horizontal"?this.scrollbarThumb.style.width="".concat(this.scrollbarWidth*this.scrollbarWidth/(this.instance.limit.x+this.scrollbarWidth),"px"):this.scrollbarThumb.style.height="".concat(this.scrollbarHeight*this.scrollbarHeight/(this.instance.limit.y+this.scrollbarHeight),"px"),this.scrollbarThumbBCR=this.scrollbarThumb.getBoundingClientRect(),this.scrollBarLimit={x:this.scrollbarWidth-this.scrollbarThumbBCR.width,y:this.scrollbarHeight-this.scrollbarThumbBCR.height}}},{key:"reinitScrollBar",value:function(){if(this.hasScrollbar=!1,this.direction=="horizontal"){if(this.instance.limit.x+this.windowWidth<=this.windowWidth)return}else if(this.instance.limit.y+this.windowHeight<=this.windowHeight)return;this.hasScrollbar=!0,this.scrollbarBCR=this.scrollbar.getBoundingClientRect(),this.scrollbarHeight=this.scrollbarBCR.height,this.scrollbarWidth=this.scrollbarBCR.width,this.direction==="horizontal"?this.scrollbarThumb.style.width="".concat(this.scrollbarWidth*this.scrollbarWidth/(this.instance.limit.x+this.scrollbarWidth),"px"):this.scrollbarThumb.style.height="".concat(this.scrollbarHeight*this.scrollbarHeight/(this.instance.limit.y+this.scrollbarHeight),"px"),this.scrollbarThumbBCR=this.scrollbarThumb.getBoundingClientRect(),this.scrollBarLimit={x:this.scrollbarWidth-this.scrollbarThumbBCR.width,y:this.scrollbarHeight-this.scrollbarThumbBCR.height}}},{key:"destroyScrollBar",value:function(){this.scrollbarThumb.removeEventListener("mousedown",this.getScrollBar),window.removeEventListener("mouseup",this.releaseScrollBar),window.removeEventListener("mousemove",this.moveScrollBar),this.scrollbar.remove()}},{key:"getScrollBar",value:function(s){this.isDraggingScrollbar=!0,this.checkScroll(),this.html.classList.remove(this.scrollingClass),this.html.classList.add(this.draggingClass)}},{key:"releaseScrollBar",value:function(s){this.isDraggingScrollbar=!1,this.isScrolling&&this.html.classList.add(this.scrollingClass),this.html.classList.remove(this.draggingClass)}},{key:"moveScrollBar",value:function(s){var r=this;this.isDraggingScrollbar&&requestAnimationFrame(function(){var o=(s.clientX-r.scrollbarBCR.left)*100/r.scrollbarWidth*r.instance.limit.x/100,a=(s.clientY-r.scrollbarBCR.top)*100/r.scrollbarHeight*r.instance.limit.y/100;a>0&&a<r.instance.limit.y&&(r.instance.delta.y=a),o>0&&o<r.instance.limit.x&&(r.instance.delta.x=o)})}},{key:"addElements",value:function(){var s=this;this.els={},this.parallaxElements={};var r=this.el.querySelectorAll("[data-".concat(this.name,"]"));r.forEach(function(o,a){var l=e1(o),c=Object.entries(s.sections).map(function(ce){var le=bu(ce,2);le[0];var U=le[1];return U}).find(function(ce){return l.includes(ce.el)}),h=o.dataset[s.name+"Class"]||s.class,f=typeof o.dataset[s.name+"Id"]=="string"?o.dataset[s.name+"Id"]:"el"+a,m,p,v=o.dataset[s.name+"Repeat"],_=o.dataset[s.name+"Call"],E=o.dataset[s.name+"Position"],x=o.dataset[s.name+"Delay"],k=o.dataset[s.name+"Direction"],A=typeof o.dataset[s.name+"Sticky"]=="string",S=o.dataset[s.name+"Speed"]?parseFloat(o.dataset[s.name+"Speed"])/10:!1,O=typeof o.dataset[s.name+"Offset"]=="string"?o.dataset[s.name+"Offset"].split(","):s.offset,P=o.dataset[s.name+"Target"],N;P!==void 0?N=document.querySelector("".concat(P)):N=o;var L=N.getBoundingClientRect();c===null||c.inView?(m=L.top+s.instance.scroll.y-Ms(N).y,p=L.left+s.instance.scroll.x-Ms(N).x):(m=L.top-Ms(c.el).y-Ms(N).y,p=L.left-Ms(c.el).x-Ms(N).x);var M=m+N.offsetHeight,F=p+N.offsetWidth,q={x:(F-p)/2+p,y:(M-m)/2+m};if(A){var K=o.getBoundingClientRect(),te=K.top,ve=K.left,Se={x:ve-p,y:te-m};m+=window.innerHeight,p+=window.innerWidth,M=te+N.offsetHeight-o.offsetHeight-Se[s.directionAxis],F=ve+N.offsetWidth-o.offsetWidth-Se[s.directionAxis],q={x:(F-p)/2+p,y:(M-m)/2+m}}v=="false"?v=!1:v!=null?v=!0:v=s.repeat;var _e=[0,0];if(O)if(s.direction==="horizontal"){for(var be=0;be<O.length;be++)typeof O[be]=="string"?O[be].includes("%")?_e[be]=parseInt(O[be].replace("%","")*s.windowWidth/100):_e[be]=parseInt(O[be]):_e[be]=O[be];p=p+_e[0],F=F-_e[1]}else{for(var be=0;be<O.length;be++)typeof O[be]=="string"?O[be].includes("%")?_e[be]=parseInt(O[be].replace("%","")*s.windowHeight/100):_e[be]=parseInt(O[be]):_e[be]=O[be];m=m+_e[0],M=M-_e[1]}var he={el:o,id:f,class:h,section:c,top:m,middle:q,bottom:M,left:p,right:F,offset:O,progress:0,repeat:v,inView:!1,call:_,speed:S,delay:x,position:E,target:N,direction:k,sticky:A};s.els[f]=he,o.classList.contains(h)&&s.setInView(s.els[f],f),(S!==!1||A)&&(s.parallaxElements[f]=he)})}},{key:"addSections",value:function(){var s=this;this.sections={};var r=this.el.querySelectorAll("[data-".concat(this.name,"-section]"));r.length===0&&(r=[this.el]),r.forEach(function(o,a){var l=typeof o.dataset[s.name+"Id"]=="string"?o.dataset[s.name+"Id"]:"section"+a,c=o.getBoundingClientRect(),h={x:c.left-window.innerWidth*1.5-Ms(o).x,y:c.top-window.innerHeight*1.5-Ms(o).y},f={x:h.x+c.width+window.innerWidth*2,y:h.y+c.height+window.innerHeight*2},m=typeof o.dataset[s.name+"Persistent"]=="string";o.setAttribute("data-scroll-section-id",l);var p={el:o,offset:h,limit:f,inView:!1,persistent:m,id:l};s.sections[l]=p})}},{key:"transform",value:function(s,r,o,a){var l;if(!a)l="matrix3d(1,0,0.00,0,0.00,1,0.00,0,0,0,1,0,".concat(r,",").concat(o,",0,1)");else{var c=Ms(s),h=Q0(c.x,r,a),f=Q0(c.y,o,a);l="matrix3d(1,0,0.00,0,0.00,1,0.00,0,0,0,1,0,".concat(h,",").concat(f,",0,1)")}s.style.webkitTransform=l,s.style.msTransform=l,s.style.transform=l}},{key:"transformElements",value:function(s){var r=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,a=this.instance.scroll.x+this.windowWidth,l=this.instance.scroll.y+this.windowHeight,c={x:this.instance.scroll.x+this.windowMiddle.x,y:this.instance.scroll.y+this.windowMiddle.y};Object.entries(this.parallaxElements).forEach(function(h){var f=bu(h,2);f[0];var m=f[1],p=!1;if(s&&(p=0),m.inView||o)switch(m.position){case"top":p=r.instance.scroll[r.directionAxis]*-m.speed;break;case"elementTop":p=(l-m.top)*-m.speed;break;case"bottom":p=(r.instance.limit[r.directionAxis]-l+r.windowHeight)*m.speed;break;case"left":p=r.instance.scroll[r.directionAxis]*-m.speed;break;case"elementLeft":p=(a-m.left)*-m.speed;break;case"right":p=(r.instance.limit[r.directionAxis]-a+r.windowHeight)*m.speed;break;default:p=(c[r.directionAxis]-m.middle[r.directionAxis])*-m.speed;break}m.sticky&&(m.inView?r.direction==="horizontal"?p=r.instance.scroll.x-m.left+window.innerWidth:p=r.instance.scroll.y-m.top+window.innerHeight:r.direction==="horizontal"?r.instance.scroll.x<m.left-window.innerWidth&&r.instance.scroll.x<m.left-window.innerWidth/2?p=0:r.instance.scroll.x>m.right&&r.instance.scroll.x>m.right+100?p=m.right-m.left+window.innerWidth:p=!1:r.instance.scroll.y<m.top-window.innerHeight&&r.instance.scroll.y<m.top-window.innerHeight/2?p=0:r.instance.scroll.y>m.bottom&&r.instance.scroll.y>m.bottom+100?p=m.bottom-m.top+window.innerHeight:p=!1),p!==!1&&(m.direction==="horizontal"||r.direction==="horizontal"&&m.direction!=="vertical"?r.transform(m.el,p,0,s?!1:m.delay):r.transform(m.el,0,p,s?!1:m.delay))})}},{key:"scrollTo",value:function(s){var r=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=parseInt(o.offset)||0,l=isNaN(parseInt(o.duration))?1e3:parseInt(o.duration),c=o.easing||[.25,0,.35,1],h=!!o.disableLerp,f=o.callback?o.callback:!1;if(c=VY.apply(void 0,oY(c)),typeof s=="string"){if(s==="top")s=0;else if(s==="bottom")s=this.instance.limit.y;else if(s==="left")s=0;else if(s==="right")s=this.instance.limit.x;else if(s=document.querySelector(s),!s)return}else if(typeof s=="number")s=parseInt(s);else if(!(s&&s.tagName)){console.warn("`target` parameter is not valid");return}if(typeof s!="number"){var m=e1(s).includes(this.el);if(!m)return;var p=s.getBoundingClientRect(),v=p.top,_=p.left,E=e1(s),x=E.find(function(M){return Object.entries(r.sections).map(function(F){var q=bu(F,2);q[0];var K=q[1];return K}).find(function(F){return F.el==M})}),k=0;x?k=Ms(x)[this.directionAxis]:k=-this.instance.scroll[this.directionAxis],this.direction==="horizontal"?a=_+a-k:a=v+a-k}else a=s+a;var A=parseFloat(this.instance.delta[this.directionAxis]),S=Math.max(0,Math.min(a,this.instance.limit[this.directionAxis])),O=S-A,P=function(F){h?r.direction==="horizontal"?r.setScroll(A+O*F,r.instance.delta.y):r.setScroll(r.instance.delta.x,A+O*F):r.instance.delta[r.directionAxis]=A+O*F};this.animatingScroll=!0,this.stopScrolling(),this.startScrolling();var N=Date.now(),L=function M(){var F=(Date.now()-N)/l;F>1?(P(1),r.animatingScroll=!1,l==0&&r.update(),f&&f()):(r.scrollToRaf=requestAnimationFrame(M),P(c(F)))};L()}},{key:"update",value:function(){this.setScrollLimit(),this.addSections(),this.addElements(),this.detectElements(),this.updateScroll(),this.transformElements(!0),this.reinitScrollBar(),this.checkScroll(!0)}},{key:"startScroll",value:function(){this.stop=!1}},{key:"stopScroll",value:function(){this.stop=!0}},{key:"setScroll",value:function(s,r){this.instance=J0(J0({},this.instance),{},{scroll:{x:s,y:r},delta:{x:s,y:r},speed:0})}},{key:"destroy",value:function(){Bo(yr(e.prototype),"destroy",this).call(this),this.stopScrolling(),this.html.classList.remove(this.smoothClass),this.vs.destroy(),this.destroyScrollBar(),window.removeEventListener("keydown",this.checkKey,!1)}}]),e}(yN),BY=function(){function i(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Wb(this,i),this.options=t,Object.assign(this,Cu,t),this.smartphone=Cu.smartphone,t.smartphone&&Object.assign(this.smartphone,t.smartphone),this.tablet=Cu.tablet,t.tablet&&Object.assign(this.tablet,t.tablet),!this.smooth&&this.direction=="horizontal"&&console.warn("🚨 `smooth:false` & `horizontal` direction are not yet compatible"),!this.tablet.smooth&&this.tablet.direction=="horizontal"&&console.warn("🚨 `smooth:false` & `horizontal` direction are not yet compatible (tablet)"),!this.smartphone.smooth&&this.smartphone.direction=="horizontal"&&console.warn("🚨 `smooth:false` & `horizontal` direction are not yet compatible (smartphone)"),this.init()}return qb(i,[{key:"init",value:function(){if(this.options.isMobile=/Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1||window.innerWidth<this.tablet.breakpoint,this.options.isTablet=this.options.isMobile&&window.innerWidth>=this.tablet.breakpoint,this.smooth&&!this.options.isMobile||this.tablet.smooth&&this.options.isTablet||this.smartphone.smooth&&this.options.isMobile&&!this.options.isTablet?this.scroll=new DY(this.options):this.scroll=new mY(this.options),this.scroll.init(),window.location.hash){var e=window.location.hash.slice(1,window.location.hash.length),n=document.getElementById(e);n&&this.scroll.scrollTo(n)}}},{key:"update",value:function(){this.scroll.update()}},{key:"start",value:function(){this.scroll.startScroll()}},{key:"stop",value:function(){this.scroll.stopScroll()}},{key:"scrollTo",value:function(e,n){this.scroll.scrollTo(e,n)}},{key:"setScroll",value:function(e,n){this.scroll.setScroll(e,n)}},{key:"on",value:function(e,n){this.scroll.setEvents(e,n)}},{key:"off",value:function(e,n){this.scroll.unsetEvents(e,n)}},{key:"destroy",value:function(){this.scroll.destroy()}}]),i}(),Fe={},gh={exports:{}},FY=gh.exports,MA;function $Y(){return MA||(MA=1,function(i,t){(function(e,n){var s="1.0.40",r="",o="?",a="function",l="undefined",c="object",h="string",f="major",m="model",p="name",v="type",_="vendor",E="version",x="architecture",k="console",A="mobile",S="tablet",O="smarttv",P="wearable",N="embedded",L=500,M="Amazon",F="Apple",q="ASUS",K="BlackBerry",te="Browser",ve="Chrome",Se="Edge",_e="Firefox",be="Google",he="Huawei",ce="LG",le="Microsoft",U="Motorola",re="Opera",Be="Samsung",He="Sharp",fe="Sony",Ue="Xiaomi",ut="Zebra",et="Facebook",ht="Chromium OS",bt="Mac OS",zt=" Browser",vn=function(Ne,Le){var je={};for(var Et in Ne)Le[Et]&&Le[Et].length%2===0?je[Et]=Le[Et].concat(Ne[Et]):je[Et]=Ne[Et];return je},Dn=function(Ne){for(var Le={},je=0;je<Ne.length;je++)Le[Ne[je].toUpperCase()]=Ne[je];return Le},kn=function(Ne,Le){return typeof Ne===h?Jn(Le).indexOf(Jn(Ne))!==-1:!1},Jn=function(Ne){return Ne.toLowerCase()},Ji=function(Ne){return typeof Ne===h?Ne.replace(/[^\d\.]/g,r).split(".")[0]:n},Qn=function(Ne,Le){if(typeof Ne===h)return Ne=Ne.replace(/^\s\s*/,r),typeof Le===l?Ne:Ne.substring(0,L)},z=function(Ne,Le){for(var je=0,Et,cn,It,yt,Je,Sn;je<Le.length&&!Je;){var Qi=Le[je],Ni=Le[je+1];for(Et=cn=0;Et<Qi.length&&!Je&&Qi[Et];)if(Je=Qi[Et++].exec(Ne),Je)for(It=0;It<Ni.length;It++)Sn=Je[++cn],yt=Ni[It],typeof yt===c&&yt.length>0?yt.length===2?typeof yt[1]==a?this[yt[0]]=yt[1].call(this,Sn):this[yt[0]]=yt[1]:yt.length===3?typeof yt[1]===a&&!(yt[1].exec&&yt[1].test)?this[yt[0]]=Sn?yt[1].call(this,Sn,yt[2]):n:this[yt[0]]=Sn?Sn.replace(yt[1],yt[2]):n:yt.length===4&&(this[yt[0]]=Sn?yt[3].call(this,Sn.replace(yt[1],yt[2])):n):this[yt]=Sn||n;je+=2}},X=function(Ne,Le){for(var je in Le)if(typeof Le[je]===c&&Le[je].length>0){for(var Et=0;Et<Le[je].length;Et++)if(kn(Le[je][Et],Ne))return je===o?n:je}else if(kn(Le[je],Ne))return je===o?n:je;return Le.hasOwnProperty("*")?Le["*"]:Ne},se={"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},xe={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},Ee={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[E,[p,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[E,[p,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[p,E],[/opios[\/ ]+([\w\.]+)/i],[E,[p,re+" Mini"]],[/\bop(?:rg)?x\/([\w\.]+)/i],[E,[p,re+" GX"]],[/\bopr\/([\w\.]+)/i],[E,[p,re]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[E,[p,"Baidu"]],[/\b(?:mxbrowser|mxios|myie2)\/?([-\w\.]*)\b/i],[E,[p,"Maxthon"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer|sleipnir)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim(?:browser|boat|jet))[\/ ]?([\d\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|duckduckgo|klar|helio|(?=comodo_)?dragon)\/([-\w\.]+)/i,/(heytap|ovi|115)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[p,E],[/quark(?:pc)?\/([-\w\.]+)/i],[E,[p,"Quark"]],[/\bddg\/([\w\.]+)/i],[E,[p,"DuckDuckGo"]],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[E,[p,"UC"+te]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[E,[p,"WeChat"]],[/konqueror\/([\w\.]+)/i],[E,[p,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[E,[p,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[E,[p,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[E,[p,"Smart Lenovo "+te]],[/(avast|avg)\/([\w\.]+)/i],[[p,/(.+)/,"$1 Secure "+te],E],[/\bfocus\/([\w\.]+)/i],[E,[p,_e+" Focus"]],[/\bopt\/([\w\.]+)/i],[E,[p,re+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[E,[p,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[E,[p,"Dolphin"]],[/coast\/([\w\.]+)/i],[E,[p,re+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[E,[p,"MIUI"+zt]],[/fxios\/([\w\.-]+)/i],[E,[p,_e]],[/\bqihoobrowser\/?([\w\.]*)/i],[E,[p,"360"]],[/\b(qq)\/([\w\.]+)/i],[[p,/(.+)/,"$1Browser"],E],[/(oculus|sailfish|huawei|vivo|pico)browser\/([\w\.]+)/i],[[p,/(.+)/,"$1"+zt],E],[/samsungbrowser\/([\w\.]+)/i],[E,[p,Be+" Internet"]],[/metasr[\/ ]?([\d\.]+)/i],[E,[p,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[p,"Sogou Mobile"],E],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345(?=browser|chrome|explorer))\w*[\/ ]?v?([\w\.]+)/i],[p,E],[/(lbbrowser|rekonq)/i,/\[(linkedin)app\]/i],[p],[/ome\/([\w\.]+) \w* ?(iron) saf/i,/ome\/([\w\.]+).+qihu (360)[es]e/i],[E,p],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[p,et],E],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(twitter)(?:and| f.+e\/([\w\.]+))/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[p,E],[/\bgsa\/([\w\.]+) .*safari\//i],[E,[p,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[E,[p,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[E,[p,ve+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[p,ve+" WebView"],E],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[E,[p,"Android "+te]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[p,E],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[E,[p,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[E,p],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[p,[E,X,se]],[/(webkit|khtml)\/([\w\.]+)/i],[p,E],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[p,"Netscape"],E],[/(wolvic|librewolf)\/([\w\.]+)/i],[p,E],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[E,[p,_e+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[p,[E,/_/g,"."]],[/(cobalt)\/([\w\.]+)/i],[p,[E,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[x,"amd64"]],[/(ia32(?=;))/i],[[x,Jn]],[/((?:i[346]|x)86)[;\)]/i],[[x,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[x,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[x,"armhf"]],[/windows (ce|mobile); ppc;/i],[[x,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[x,/ower/,r,Jn]],[/(sun4\w)[;\)]/i],[[x,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[x,Jn]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[m,[_,Be],[v,S]],[/\b((?:s[cgp]h|gt|sm)-(?![lr])\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]((?!sm-[lr])[-\w]+)/i,/sec-(sgh\w+)/i],[m,[_,Be],[v,A]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[m,[_,F],[v,A]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[m,[_,F],[v,S]],[/(macintosh);/i],[m,[_,F]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[m,[_,He],[v,A]],[/(?:honor)([-\w ]+)[;\)]/i],[m,[_,"Honor"],[v,A]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[m,[_,he],[v,S]],[/(?:huawei)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[m,[_,he],[v,A]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite|pro)?)(?: bui|\))/i],[[m,/_/g," "],[_,Ue],[v,A]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[m,/_/g," "],[_,Ue],[v,S]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[m,[_,"OPPO"],[v,A]],[/\b(opd2\d{3}a?) bui/i],[m,[_,"OPPO"],[v,S]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[m,[_,"Vivo"],[v,A]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[m,[_,"Realme"],[v,A]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[m,[_,U],[v,A]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[m,[_,U],[v,S]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[m,[_,ce],[v,S]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[m,[_,ce],[v,A]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[m,[_,"Lenovo"],[v,S]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[m,/_/g," "],[_,"Nokia"],[v,A]],[/(pixel c)\b/i],[m,[_,be],[v,S]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[m,[_,be],[v,A]],[/droid.+; (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[m,[_,fe],[v,A]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[m,"Xperia Tablet"],[_,fe],[v,S]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[m,[_,"OnePlus"],[v,A]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo(?!bc)\w\w)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[m,[_,M],[v,S]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[m,/(.+)/g,"Fire Phone $1"],[_,M],[v,A]],[/(playbook);[-\w\),; ]+(rim)/i],[m,_,[v,S]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[m,[_,K],[v,A]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[m,[_,q],[v,S]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[m,[_,q],[v,A]],[/(nexus 9)/i],[m,[_,"HTC"],[v,S]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[_,[m,/_/g," "],[v,A]],[/droid [\w\.]+; ((?:8[14]9[16]|9(?:0(?:48|60|8[01])|1(?:3[27]|66)|2(?:6[69]|9[56])|466))[gqswx])\w*(\)| bui)/i],[m,[_,"TCL"],[v,S]],[/(itel) ((\w+))/i],[[_,Jn],m,[v,X,{tablet:["p10001l","w7001"],"*":"mobile"}]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[m,[_,"Acer"],[v,S]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[m,[_,"Meizu"],[v,A]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[m,[_,"Ulefone"],[v,A]],[/; (energy ?\w+)(?: bui|\))/i,/; energizer ([\w ]+)(?: bui|\))/i],[m,[_,"Energizer"],[v,A]],[/; cat (b35);/i,/; (b15q?|s22 flip|s48c|s62 pro)(?: bui|\))/i],[m,[_,"Cat"],[v,A]],[/((?:new )?andromax[\w- ]+)(?: bui|\))/i],[m,[_,"Smartfren"],[v,A]],[/droid.+; (a(?:015|06[35]|142p?))/i],[m,[_,"Nothing"],[v,A]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno|micromax|advan)[-_ ]?([-\w]*)/i,/; (imo) ((?!tab)[\w ]+?)(?: bui|\))/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[_,m,[v,A]],[/(imo) (tab \w+)/i,/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[_,m,[v,S]],[/(surface duo)/i],[m,[_,le],[v,S]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[m,[_,"Fairphone"],[v,A]],[/(u304aa)/i],[m,[_,"AT&T"],[v,A]],[/\bsie-(\w*)/i],[m,[_,"Siemens"],[v,A]],[/\b(rct\w+) b/i],[m,[_,"RCA"],[v,S]],[/\b(venue[\d ]{2,7}) b/i],[m,[_,"Dell"],[v,S]],[/\b(q(?:mv|ta)\w+) b/i],[m,[_,"Verizon"],[v,S]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[m,[_,"Barnes & Noble"],[v,S]],[/\b(tm\d{3}\w+) b/i],[m,[_,"NuVision"],[v,S]],[/\b(k88) b/i],[m,[_,"ZTE"],[v,S]],[/\b(nx\d{3}j) b/i],[m,[_,"ZTE"],[v,A]],[/\b(gen\d{3}) b.+49h/i],[m,[_,"Swiss"],[v,A]],[/\b(zur\d{3}) b/i],[m,[_,"Swiss"],[v,S]],[/\b((zeki)?tb.*\b) b/i],[m,[_,"Zeki"],[v,S]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[_,"Dragon Touch"],m,[v,S]],[/\b(ns-?\w{0,9}) b/i],[m,[_,"Insignia"],[v,S]],[/\b((nxa|next)-?\w{0,9}) b/i],[m,[_,"NextBook"],[v,S]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[_,"Voice"],m,[v,A]],[/\b(lvtel\-)?(v1[12]) b/i],[[_,"LvTel"],m,[v,A]],[/\b(ph-1) /i],[m,[_,"Essential"],[v,A]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[m,[_,"Envizen"],[v,S]],[/\b(trio[-\w\. ]+) b/i],[m,[_,"MachSpeed"],[v,S]],[/\btu_(1491) b/i],[m,[_,"Rotor"],[v,S]],[/(shield[\w ]+) b/i],[m,[_,"Nvidia"],[v,S]],[/(sprint) (\w+)/i],[_,m,[v,A]],[/(kin\.[onetw]{3})/i],[[m,/\./g," "],[_,le],[v,A]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[m,[_,ut],[v,S]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[m,[_,ut],[v,A]],[/smart-tv.+(samsung)/i],[_,[v,O]],[/hbbtv.+maple;(\d+)/i],[[m,/^/,"SmartTV"],[_,Be],[v,O]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[_,ce],[v,O]],[/(apple) ?tv/i],[_,[m,F+" TV"],[v,O]],[/crkey/i],[[m,ve+"cast"],[_,be],[v,O]],[/droid.+aft(\w+)( bui|\))/i],[m,[_,M],[v,O]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[m,[_,He],[v,O]],[/(bravia[\w ]+)( bui|\))/i],[m,[_,fe],[v,O]],[/(mitv-\w{5}) bui/i],[m,[_,Ue],[v,O]],[/Hbbtv.*(technisat) (.*);/i],[_,m,[v,O]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[_,Qn],[m,Qn],[v,O]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[v,O]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[_,m,[v,k]],[/droid.+; (shield) bui/i],[m,[_,"Nvidia"],[v,k]],[/(playstation [345portablevi]+)/i],[m,[_,fe],[v,k]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[m,[_,le],[v,k]],[/\b(sm-[lr]\d\d[05][fnuw]?s?)\b/i],[m,[_,Be],[v,P]],[/((pebble))app/i],[_,m,[v,P]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[m,[_,F],[v,P]],[/droid.+; (glass) \d/i],[m,[_,be],[v,P]],[/droid.+; (wt63?0{2,3})\)/i],[m,[_,ut],[v,P]],[/droid.+; (glass) \d/i],[m,[_,be],[v,P]],[/(pico) (4|neo3(?: link|pro)?)/i],[_,m,[v,P]],[/; (quest( \d| pro)?)/i],[m,[_,et],[v,P]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[_,[v,N]],[/(aeobc)\b/i],[m,[_,M],[v,N]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[m,[v,A]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[m,[v,S]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[v,S]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[v,A]],[/(android[-\w\. ]{0,9});.+buil/i],[m,[_,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[E,[p,Se+"HTML"]],[/(arkweb)\/([\w\.]+)/i],[p,E],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[E,[p,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna|servo)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[p,E],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[E,p]],os:[[/microsoft (windows) (vista|xp)/i],[p,E],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[p,[E,X,xe]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[E,X,xe],[p,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[E,/_/g,"."],[p,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[p,bt],[E,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[E,p],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish|openharmony)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[p,E],[/\(bb(10);/i],[E,[p,K]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[E,[p,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[E,[p,_e+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[E,[p,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[E,[p,"watchOS"]],[/crkey\/([\d\.]+)/i],[E,[p,ve+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[p,ht],E],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[p,E],[/(sunos) ?([\w\.\d]*)/i],[[p,"Solaris"],E],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[p,E]]},ue=function(Ne,Le){if(typeof Ne===c&&(Le=Ne,Ne=n),!(this instanceof ue))return new ue(Ne,Le).getResult();var je=typeof e!==l&&e.navigator?e.navigator:n,Et=Ne||(je&&je.userAgent?je.userAgent:r),cn=je&&je.userAgentData?je.userAgentData:n,It=Le?vn(Ee,Le):Ee,yt=je&&je.userAgent==Et;return this.getBrowser=function(){var Je={};return Je[p]=n,Je[E]=n,z.call(Je,Et,It.browser),Je[f]=Ji(Je[E]),yt&&je&&je.brave&&typeof je.brave.isBrave==a&&(Je[p]="Brave"),Je},this.getCPU=function(){var Je={};return Je[x]=n,z.call(Je,Et,It.cpu),Je},this.getDevice=function(){var Je={};return Je[_]=n,Je[m]=n,Je[v]=n,z.call(Je,Et,It.device),yt&&!Je[v]&&cn&&cn.mobile&&(Je[v]=A),yt&&Je[m]=="Macintosh"&&je&&typeof je.standalone!==l&&je.maxTouchPoints&&je.maxTouchPoints>2&&(Je[m]="iPad",Je[v]=S),Je},this.getEngine=function(){var Je={};return Je[p]=n,Je[E]=n,z.call(Je,Et,It.engine),Je},this.getOS=function(){var Je={};return Je[p]=n,Je[E]=n,z.call(Je,Et,It.os),yt&&!Je[p]&&cn&&cn.platform&&cn.platform!="Unknown"&&(Je[p]=cn.platform.replace(/chrome os/i,ht).replace(/macos/i,bt)),Je},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return Et},this.setUA=function(Je){return Et=typeof Je===h&&Je.length>L?Qn(Je,L):Je,this},this.setUA(Et),this};ue.VERSION=s,ue.BROWSER=Dn([p,E,f]),ue.CPU=Dn([x]),ue.DEVICE=Dn([m,_,v,k,A,O,S,P,N]),ue.ENGINE=ue.OS=Dn([p,E]),i.exports&&(t=i.exports=ue),t.UAParser=ue;var Me=typeof e!==l&&(e.jQuery||e.Zepto);if(Me&&!Me.ua){var Qe=new ue;Me.ua=Qe.getResult(),Me.ua.get=function(){return Qe.getUA()},Me.ua.set=function(Ne){Qe.setUA(Ne);var Le=Qe.getResult();for(var je in Le)Me.ua[je]=Le[je]}}})(typeof window=="object"?window:FY)}(gh,gh.exports)),gh.exports}var LA;function zY(){if(LA)return Fe;LA=1,Object.defineProperty(Fe,"__esModule",{value:!0});function i(Y){return Y&&typeof Y=="object"&&"default"in Y?Y.default:Y}var t=yf(),e=i(t),n=$Y(),s=new n,r=s.getBrowser(),o=s.getCPU(),a=s.getDevice(),l=s.getEngine(),c=s.getOS(),h=s.getUA(),f=function(V){return s.setUA(V)},m=function(V){if(!V){console.error("No userAgent string was provided");return}var $=new n(V);return{UA:$,browser:$.getBrowser(),cpu:$.getCPU(),device:$.getDevice(),engine:$.getEngine(),os:$.getOS(),ua:$.getUA(),setUserAgent:function(ge){return $.setUA(ge)}}},p=Object.freeze({ClientUAInstance:s,browser:r,cpu:o,device:a,engine:l,os:c,ua:h,setUa:f,parseUserAgent:m});function v(Y,V){var $=Object.keys(Y);if(Object.getOwnPropertySymbols){var oe=Object.getOwnPropertySymbols(Y);V&&(oe=oe.filter(function(ge){return Object.getOwnPropertyDescriptor(Y,ge).enumerable})),$.push.apply($,oe)}return $}function _(Y){for(var V=1;V<arguments.length;V++){var $=arguments[V]!=null?arguments[V]:{};V%2?v(Object($),!0).forEach(function(oe){S(Y,oe,$[oe])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Y,Object.getOwnPropertyDescriptors($)):v(Object($)).forEach(function(oe){Object.defineProperty(Y,oe,Object.getOwnPropertyDescriptor($,oe))})}return Y}function E(Y){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?E=function(V){return typeof V}:E=function(V){return V&&typeof Symbol=="function"&&V.constructor===Symbol&&V!==Symbol.prototype?"symbol":typeof V},E(Y)}function x(Y,V){if(!(Y instanceof V))throw new TypeError("Cannot call a class as a function")}function k(Y,V){for(var $=0;$<V.length;$++){var oe=V[$];oe.enumerable=oe.enumerable||!1,oe.configurable=!0,"value"in oe&&(oe.writable=!0),Object.defineProperty(Y,oe.key,oe)}}function A(Y,V,$){return k(Y.prototype,V),Y}function S(Y,V,$){return V in Y?Object.defineProperty(Y,V,{value:$,enumerable:!0,configurable:!0,writable:!0}):Y[V]=$,Y}function O(){return O=Object.assign||function(Y){for(var V=1;V<arguments.length;V++){var $=arguments[V];for(var oe in $)Object.prototype.hasOwnProperty.call($,oe)&&(Y[oe]=$[oe])}return Y},O.apply(this,arguments)}function P(Y,V){if(typeof V!="function"&&V!==null)throw new TypeError("Super expression must either be null or a function");Y.prototype=Object.create(V&&V.prototype,{constructor:{value:Y,writable:!0,configurable:!0}}),V&&L(Y,V)}function N(Y){return N=Object.setPrototypeOf?Object.getPrototypeOf:function($){return $.__proto__||Object.getPrototypeOf($)},N(Y)}function L(Y,V){return L=Object.setPrototypeOf||function(oe,ge){return oe.__proto__=ge,oe},L(Y,V)}function M(Y,V){if(Y==null)return{};var $={},oe=Object.keys(Y),ge,mt;for(mt=0;mt<oe.length;mt++)ge=oe[mt],!(V.indexOf(ge)>=0)&&($[ge]=Y[ge]);return $}function F(Y,V){if(Y==null)return{};var $=M(Y,V),oe,ge;if(Object.getOwnPropertySymbols){var mt=Object.getOwnPropertySymbols(Y);for(ge=0;ge<mt.length;ge++)oe=mt[ge],!(V.indexOf(oe)>=0)&&Object.prototype.propertyIsEnumerable.call(Y,oe)&&($[oe]=Y[oe])}return $}function q(Y){if(Y===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Y}function K(Y,V){if(V&&(typeof V=="object"||typeof V=="function"))return V;if(V!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return q(Y)}function te(Y,V){return ve(Y)||Se(Y,V)||_e(Y,V)||he()}function ve(Y){if(Array.isArray(Y))return Y}function Se(Y,V){var $=Y==null?null:typeof Symbol<"u"&&Y[Symbol.iterator]||Y["@@iterator"];if($!=null){var oe=[],ge=!0,mt=!1,en,ci;try{for($=$.call(Y);!(ge=(en=$.next()).done)&&(oe.push(en.value),!(V&&oe.length===V));ge=!0);}catch(wc){mt=!0,ci=wc}finally{try{!ge&&$.return!=null&&$.return()}finally{if(mt)throw ci}}return oe}}function _e(Y,V){if(Y){if(typeof Y=="string")return be(Y,V);var $=Object.prototype.toString.call(Y).slice(8,-1);if($==="Object"&&Y.constructor&&($=Y.constructor.name),$==="Map"||$==="Set")return Array.from(Y);if($==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test($))return be(Y,V)}}function be(Y,V){(V==null||V>Y.length)&&(V=Y.length);for(var $=0,oe=new Array(V);$<V;$++)oe[$]=Y[$];return oe}function he(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ce={Mobile:"mobile",Tablet:"tablet",SmartTv:"smarttv",Console:"console",Wearable:"wearable",Embedded:"embedded",Browser:void 0},le={Chrome:"Chrome",Firefox:"Firefox",Opera:"Opera",Yandex:"Yandex",Safari:"Safari",InternetExplorer:"Internet Explorer",Edge:"Edge",Chromium:"Chromium",Ie:"IE",MobileSafari:"Mobile Safari",EdgeChromium:"Edge Chromium",MIUI:"MIUI Browser",SamsungBrowser:"Samsung Browser"},U={IOS:"iOS",Android:"Android",WindowsPhone:"Windows Phone",Windows:"Windows",MAC_OS:"Mac OS"},re={isMobile:!1,isTablet:!1,isBrowser:!1,isSmartTV:!1,isConsole:!1,isWearable:!1},Be=function(V){switch(V){case ce.Mobile:return{isMobile:!0};case ce.Tablet:return{isTablet:!0};case ce.SmartTv:return{isSmartTV:!0};case ce.Console:return{isConsole:!0};case ce.Wearable:return{isWearable:!0};case ce.Browser:return{isBrowser:!0};case ce.Embedded:return{isEmbedded:!0};default:return re}},He=function(V){return f(V)},fe=function(V){var $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"none";return V||$},Ue=function(){return typeof window<"u"&&(window.navigator||navigator)?window.navigator||navigator:!1},ut=function(V){var $=Ue();return $&&$.platform&&($.platform.indexOf(V)!==-1||$.platform==="MacIntel"&&$.maxTouchPoints>1&&!window.MSStream)},et=function(V,$,oe,ge,mt){return{isBrowser:V,browserMajorVersion:fe($.major),browserFullVersion:fe($.version),browserName:fe($.name),engineName:fe(oe.name),engineVersion:fe(oe.version),osName:fe(ge.name),osVersion:fe(ge.version),userAgent:fe(mt)}},ht=function(V,$,oe,ge){return _({},V,{vendor:fe($.vendor),model:fe($.model),os:fe(oe.name),osVersion:fe(oe.version),ua:fe(ge)})},bt=function(V,$,oe,ge){return{isSmartTV:V,engineName:fe($.name),engineVersion:fe($.version),osName:fe(oe.name),osVersion:fe(oe.version),userAgent:fe(ge)}},zt=function(V,$,oe,ge){return{isConsole:V,engineName:fe($.name),engineVersion:fe($.version),osName:fe(oe.name),osVersion:fe(oe.version),userAgent:fe(ge)}},vn=function(V,$,oe,ge){return{isWearable:V,engineName:fe($.name),engineVersion:fe($.version),osName:fe(oe.name),osVersion:fe(oe.version),userAgent:fe(ge)}},Dn=function(V,$,oe,ge,mt){return{isEmbedded:V,vendor:fe($.vendor),model:fe($.model),engineName:fe(oe.name),engineVersion:fe(oe.version),osName:fe(ge.name),osVersion:fe(ge.version),userAgent:fe(mt)}};function kn(Y){var V=Y?m(Y):p,$=V.device,oe=V.browser,ge=V.engine,mt=V.os,en=V.ua,ci=Be($.type),wc=ci.isBrowser,hd=ci.isMobile,vc=ci.isTablet,yc=ci.isSmartTV,fd=ci.isConsole,er=ci.isWearable,_c=ci.isEmbedded;if(wc)return et(wc,oe,ge,mt,en);if(yc)return bt(yc,ge,mt,en);if(fd)return zt(fd,ge,mt,en);if(hd||vc)return ht(ci,$,mt,en);if(er)return vn(er,ge,mt,en);if(_c)return Dn(_c,$,ge,mt,en)}var Jn=function(V){var $=V.type;return $===ce.Mobile},Ji=function(V){var $=V.type;return $===ce.Tablet},Qn=function(V){var $=V.type;return $===ce.Mobile||$===ce.Tablet},z=function(V){var $=V.type;return $===ce.SmartTv},X=function(V){var $=V.type;return $===ce.Browser},se=function(V){var $=V.type;return $===ce.Wearable},xe=function(V){var $=V.type;return $===ce.Console},Ee=function(V){var $=V.type;return $===ce.Embedded},ue=function(V){var $=V.vendor;return fe($)},Me=function(V){var $=V.model;return fe($)},Qe=function(V){var $=V.type;return fe($,"browser")},Ne=function(V){var $=V.name;return $===U.Android},Le=function(V){var $=V.name;return $===U.Windows},je=function(V){var $=V.name;return $===U.MAC_OS},Et=function(V){var $=V.name;return $===U.WindowsPhone},cn=function(V){var $=V.name;return $===U.IOS},It=function(V){var $=V.version;return fe($)},yt=function(V){var $=V.name;return fe($)},Je=function(V){var $=V.name;return $===le.Chrome},Sn=function(V){var $=V.name;return $===le.Firefox},Qi=function(V){var $=V.name;return $===le.Chromium},Ni=function(V){var $=V.name;return $===le.Edge},Xs=function(V){var $=V.name;return $===le.Yandex},mo=function(V){var $=V.name;return $===le.Safari||$===le.MobileSafari},Or=function(V){var $=V.name;return $===le.MobileSafari},ta=function(V){var $=V.name;return $===le.Opera},ks=function(V){var $=V.name;return $===le.InternetExplorer||$===le.Ie},Js=function(V){var $=V.name;return $===le.MIUI},na=function(V){var $=V.name;return $===le.SamsungBrowser},Nr=function(V){var $=V.version;return fe($)},Mr=function(V){var $=V.major;return fe($)},Ja=function(V){var $=V.name;return fe($)},Qa=function(V){var $=V.name;return fe($)},j=function(V){var $=V.version;return fe($)},G=function(){var V=Ue(),$=V&&V.userAgent&&V.userAgent.toLowerCase();return typeof $=="string"?/electron/.test($):!1},Q=function(V){return typeof V=="string"&&V.indexOf("Edg/")!==-1},me=function(){var V=Ue();return V&&(/iPad|iPhone|iPod/.test(V.platform)||V.platform==="MacIntel"&&V.maxTouchPoints>1)&&!window.MSStream},Ae=function(){return ut("iPad")},Ye=function(){return ut("iPhone")},tt=function(){return ut("iPod")},Ve=function(V){return fe(V)};function $e(Y){var V=Y||p,$=V.device,oe=V.browser,ge=V.os,mt=V.engine,en=V.ua;return{isSmartTV:z($),isConsole:xe($),isWearable:se($),isEmbedded:Ee($),isMobileSafari:Or(oe)||Ae(),isChromium:Qi(oe),isMobile:Qn($)||Ae(),isMobileOnly:Jn($),isTablet:Ji($)||Ae(),isBrowser:X($),isDesktop:X($),isAndroid:Ne(ge),isWinPhone:Et(ge),isIOS:cn(ge)||Ae(),isChrome:Je(oe),isFirefox:Sn(oe),isSafari:mo(oe),isOpera:ta(oe),isIE:ks(oe),osVersion:It(ge),osName:yt(ge),fullBrowserVersion:Nr(oe),browserVersion:Mr(oe),browserName:Ja(oe),mobileVendor:ue($),mobileModel:Me($),engineName:Qa(mt),engineVersion:j(mt),getUA:Ve(en),isEdge:Ni(oe)||Q(en),isYandex:Xs(oe),deviceType:Qe($),isIOS13:me(),isIPad13:Ae(),isIPhone13:Ye(),isIPod13:tt(),isElectron:G(),isEdgeChromium:Q(en),isLegacyEdge:Ni(oe)&&!Q(en),isWindows:Le(ge),isMacOs:je(ge),isMIUI:Js(oe),isSamsungBrowser:na(oe)}}var Ie=z(a),dt=xe(a),pt=se(a),jt=Ee(a),qt=Or(r)||Ae(),Ht=Qi(r),At=Qn(a)||Ae(),un=Jn(a),Ss=Ji(a)||Ae(),Qs=X(a),Mi=X(a),li=Ne(c),ia=Et(c),Lr=cn(c)||Ae(),Nt=Je(r),sa=Sn(r),Vr=mo(r),Mt=ta(r),dn=ks(r),ra=It(c),Dr=yt(c),Gt=Nr(r),Bn=Mr(r),fc=Ja(r),_i=ue(a),Ew=Me(a),Cw=Qa(l),xw=j(l),mc=Ve(h),gc=Ni(r)||Q(h),el=Xs(r),pc=Qe(a),Tw=me(),kw=Ae(),ad=Ye(),Zf=tt(),ld=G(),tl=Q(h),Sw=Ni(r)&&!Q(h),cd=Le(c),Lt=je(c),Xf=Js(r),Jf=na(r),ud=function(V){if(!V||typeof V!="string"){console.error("No valid user agent string was provided");return}var $=m(V),oe=$.device,ge=$.browser,mt=$.os,en=$.engine,ci=$.ua;return $e({device:oe,browser:ge,os:mt,engine:en,ua:ci})},Qf=function(V){var $=V.renderWithFragment,oe=V.children,ge=F(V,["renderWithFragment","children"]);return li?$?e.createElement(t.Fragment,null,oe):e.createElement("div",ge,oe):null},em=function(V){var $=V.renderWithFragment,oe=V.children,ge=F(V,["renderWithFragment","children"]);return Qs?$?e.createElement(t.Fragment,null,oe):e.createElement("div",ge,oe):null},tm=function(V){var $=V.renderWithFragment,oe=V.children,ge=F(V,["renderWithFragment","children"]);return dn?$?e.createElement(t.Fragment,null,oe):e.createElement("div",ge,oe):null},dd=function(V){var $=V.renderWithFragment,oe=V.children,ge=F(V,["renderWithFragment","children"]);return Lr?$?e.createElement(t.Fragment,null,oe):e.createElement("div",ge,oe):null},bc=function(V){var $=V.renderWithFragment,oe=V.children,ge=F(V,["renderWithFragment","children"]);return At?$?e.createElement(t.Fragment,null,oe):e.createElement("div",ge,oe):null},Br=function(V){var $=V.renderWithFragment,oe=V.children,ge=F(V,["renderWithFragment","children"]);return Ss?$?e.createElement(t.Fragment,null,oe):e.createElement("div",ge,oe):null},Fr=function(V){var $=V.renderWithFragment,oe=V.children,ge=F(V,["renderWithFragment","children"]);return ia?$?e.createElement(t.Fragment,null,oe):e.createElement("div",ge,oe):null},$r=function(V){var $=V.renderWithFragment,oe=V.children;V.viewClassName,V.style;var ge=F(V,["renderWithFragment","children","viewClassName","style"]);return un?$?e.createElement(t.Fragment,null,oe):e.createElement("div",ge,oe):null},nl=function(V){var $=V.renderWithFragment,oe=V.children,ge=F(V,["renderWithFragment","children"]);return Ie?$?e.createElement(t.Fragment,null,oe):e.createElement("div",ge,oe):null},il=function(V){var $=V.renderWithFragment,oe=V.children,ge=F(V,["renderWithFragment","children"]);return dt?$?e.createElement(t.Fragment,null,oe):e.createElement("div",ge,oe):null},zr=function(V){var $=V.renderWithFragment,oe=V.children,ge=F(V,["renderWithFragment","children"]);return pt?$?e.createElement(t.Fragment,null,oe):e.createElement("div",ge,oe):null},Aw=function(V){var $=V.renderWithFragment,oe=V.children;V.viewClassName,V.style;var ge=V.condition,mt=F(V,["renderWithFragment","children","viewClassName","style","condition"]);return ge?$?e.createElement(t.Fragment,null,oe):e.createElement("div",mt,oe):null};function nm(Y){return function(V){P($,V);function $(oe){var ge;return x(this,$),ge=K(this,N($).call(this,oe)),ge.isEventListenerAdded=!1,ge.handleOrientationChange=ge.handleOrientationChange.bind(q(ge)),ge.onOrientationChange=ge.onOrientationChange.bind(q(ge)),ge.onPageLoad=ge.onPageLoad.bind(q(ge)),ge.state={isLandscape:!1,isPortrait:!1},ge}return A($,[{key:"handleOrientationChange",value:function(){this.isEventListenerAdded||(this.isEventListenerAdded=!0);var ge=window.innerWidth>window.innerHeight?90:0;this.setState({isPortrait:ge===0,isLandscape:ge===90})}},{key:"onOrientationChange",value:function(){this.handleOrientationChange()}},{key:"onPageLoad",value:function(){this.handleOrientationChange()}},{key:"componentDidMount",value:function(){(typeof window>"u"?"undefined":E(window))!==void 0&&At&&(this.isEventListenerAdded?window.removeEventListener("load",this.onPageLoad,!1):(this.handleOrientationChange(),window.addEventListener("load",this.onPageLoad,!1)),window.addEventListener("resize",this.onOrientationChange,!1))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.onOrientationChange,!1)}},{key:"render",value:function(){return e.createElement(Y,O({},this.props,{isLandscape:this.state.isLandscape,isPortrait:this.state.isPortrait}))}}]),$}(e.Component)}function sl(){var Y=t.useState(function(){var mt=window.innerWidth>window.innerHeight?90:0;return{isPortrait:mt===0,isLandscape:mt===90,orientation:mt===0?"portrait":"landscape"}}),V=te(Y,2),$=V[0],oe=V[1],ge=t.useCallback(function(){var mt=window.innerWidth>window.innerHeight?90:0,en={isPortrait:mt===0,isLandscape:mt===90,orientation:mt===0?"portrait":"landscape"};$.orientation!==en.orientation&&oe(en)},[$.orientation]);return t.useEffect(function(){return(typeof window>"u"?"undefined":E(window))!==void 0&&At&&(ge(),window.addEventListener("load",ge,!1),window.addEventListener("resize",ge,!1)),function(){window.removeEventListener("resize",ge,!1),window.removeEventListener("load",ge,!1)}},[ge]),$}function im(Y){var V=Y||window.navigator.userAgent;return m(V)}function sm(Y){var V=Y||window.navigator.userAgent,$=im(V),oe=$e($);return[oe,$]}return Fe.AndroidView=Qf,Fe.BrowserTypes=le,Fe.BrowserView=em,Fe.ConsoleView=il,Fe.CustomView=Aw,Fe.IEView=tm,Fe.IOSView=dd,Fe.MobileOnlyView=$r,Fe.MobileView=bc,Fe.OsTypes=U,Fe.SmartTVView=nl,Fe.TabletView=Br,Fe.WearableView=zr,Fe.WinPhoneView=Fr,Fe.browserName=fc,Fe.browserVersion=Bn,Fe.deviceDetect=kn,Fe.deviceType=pc,Fe.engineName=Cw,Fe.engineVersion=xw,Fe.fullBrowserVersion=Gt,Fe.getSelectorsByUserAgent=ud,Fe.getUA=mc,Fe.isAndroid=li,Fe.isBrowser=Qs,Fe.isChrome=Nt,Fe.isChromium=Ht,Fe.isConsole=dt,Fe.isDesktop=Mi,Fe.isEdge=gc,Fe.isEdgeChromium=tl,Fe.isElectron=ld,Fe.isEmbedded=jt,Fe.isFirefox=sa,Fe.isIE=dn,Fe.isIOS=Lr,Fe.isIOS13=Tw,Fe.isIPad13=kw,Fe.isIPhone13=ad,Fe.isIPod13=Zf,Fe.isLegacyEdge=Sw,Fe.isMIUI=Xf,Fe.isMacOs=Lt,Fe.isMobile=At,Fe.isMobileOnly=un,Fe.isMobileSafari=qt,Fe.isOpera=Mt,Fe.isSafari=Vr,Fe.isSamsungBrowser=Jf,Fe.isSmartTV=Ie,Fe.isTablet=Ss,Fe.isWearable=pt,Fe.isWinPhone=ia,Fe.isWindows=cd,Fe.isYandex=el,Fe.mobileModel=Ew,Fe.mobileVendor=_i,Fe.osName=Dr,Fe.osVersion=ra,Fe.parseUserAgent=m,Fe.setUserAgent=He,Fe.useDeviceData=im,Fe.useDeviceSelectors=sm,Fe.useMobileOrientation=sl,Fe.withOrientationChange=nm,Fe}var Fp=zY();const jY=xt("div")`
  position: relative;
  background-image: url('./banner-01.jpg');
  background-position: center;
  background-size: cover;
  width: 100%;
  height: 100vh;
  font-size: 75px;
  transform-origin: top;
  transition: background-image 3s cubic-bezier(.77,0,.18,1);
  z-index: 800;

  @media screen and (min-width: 1000px) {
    font-size: 100px;
  }

  &.is-inview {
    &::after {
      opacity: 1;
    }
  }

  &::after {
    content: '';
    position: absolute;
    inset: 0;
    background-image: linear-gradient(to bottom, transparent, var(--background) 95%);
    background-size: cover;
    background-position: center;
    opacity: 0;
    transition: opacity 3s cubic-bezier(.77,0,.18,1);
    height: 101%;
  }
`,HY=()=>y.jsx(jY,{className:`d-flex align-items-center justify-content-center  ${Fp.isMobile&&"mb-5"}`,"data-scroll":!0,"data-scroll-offset":"120%","data-scroll-repeat":"true",children:y.jsxs("div",{className:"text-center text-white",style:{textShadow:"0 0 0.75rem rgba(0, 0, 0, 0.75)"},children:[y.jsxs("h2",{className:"title",style:{fontSize:"1em"},"data-scroll":!0,"data-scroll-speed":"3","data-scroll-position":"top",children:["&",y.jsx("em",{children:"Bloom"})]}),y.jsx("p",{style:{fontSize:"0.925rem"},children:Array.from("植｜物｜販｜賣｜所").map((i,t)=>y.jsx("span",{className:"d-inline-block","data-scroll":!0,"data-scroll-speed":"3.5","data-scroll-position":"top","data-scroll-delay":(.13-t*.01).toFixed(2),children:i},`char-${t}`))})]})}),t1=xt("a")`
  position: relative;
  padding: 1rem;
  transition: 0.5s cubic-bezier(0,.85,.45,1);
  overflow: hidden;

  &::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    transform: translateY(-101%);
    background-color: var(--light-gray);
    transition: transform 0.2s ease;
    z-index: -1;
  }

  &:hover {
    padding: 1rem 3rem;

    &::after {
      transform: translate(0);
    }
  }
`,UY=()=>y.jsx("div",{className:"bg-light",style:{marginTop:"2rem",marginBottom:"4rem"},"data-scroll":!0,"data-scroll-speed":"-1",children:y.jsxs("div",{className:"row",style:{height:"350px"},children:[y.jsx("div",{className:"d-none d-md-block col-md-6 position-relative",children:y.jsx("img",{src:"./banner-04.jpg",alt:"banner-04",className:"opacity-75 position-absolute object-fit-cover w-100 h-100"})}),y.jsxs("div",{className:"col-md-6 p-5",children:[y.jsxs("h5",{className:"title mb-4 fs-1",children:["Contact &",y.jsx("em",{children:"Bloom"})]}),y.jsxs(t1,{href:"mailto:service@andbloom.com",target:"_blank",rel:"noopener",className:"d-flex align-items-center justify-content-between border-bottom border-dark",children:[y.jsx("i",{className:"bi bi-envelope"}),y.jsx("span",{children:"service@andbloom.com"})]}),y.jsxs(t1,{href:"tel:0800-123-123",className:"d-flex align-items-center justify-content-between border-bottom border-dark",children:[y.jsx("i",{className:"bi bi-telephone"}),y.jsx("span",{children:"0800-123-123"})]}),y.jsxs(t1,{href:"https://www.instagram.com/&bloom",target:"_blank",rel:"noopener",className:"d-flex align-items-center justify-content-between border-bottom border-dark",children:[y.jsx("i",{className:"bi bi-instagram"}),y.jsx("span",{children:"Follow &Bloom on Instagram"})]})]})]})}),AN=xt("div")`
  max-width: 100%;
  width: 1000px;
  margin-left: auto;
  margin-right: auto;
  padding-top: env(safe-area-inset-top);
  padding-bottom: env(safe-area-inset-bottom);
  padding-left: max(env(safe-area-inset-left), 1rem);
  padding-right: max(env(safe-area-inset-right), 1rem);
`,WY=xt(AN)`
  width: 1280px;
`,n1=xt("div")`
  overflow: hidden;
  flex-shrink: 0;

  .image-outer {
    aspect-ratio: 3 / 4;
    overflow: hidden;
    will-change: transform, opacity;

    &.is-inview {
      img {
        opacity: 1;
        transform: scale(1);
      }
    }
  }

  img {
    width: 100%;
    opacity: 0;
    transform: scale(1.5);
    transform-origin: center;
    transition: opacity 1.2s cubic-bezier(.215,.61,.355,1), transform 1.2s cubic-bezier(.215,.61,.355,1);
  }
`,VA=xt("h2")`
  line-height: 1;
  font-weight: 300;
  font-size: calc(7vw + 0.5rem);

  @media screen and (min-width: 1000px) {
    font-size: 75px;
  }

  span {
    transform: translateY(100%) rotateX(-80deg);
    opacity: 0;
    transition: opacity .8s cubic-bezier(.215,.61,.355,1), transform .8s cubic-bezier(.215,.61,.355,1);
    transform-origin: center top;
    transform-style: preserve-3d;
    transition-delay: .4s;
    display: block;
  }

  &.is-inview {
    span {
      transform: none;
      opacity: 1;
    }
  }

  strong {
    color: var(--info);
  }
`,DA=xt("div")`
  small {
    transform: scale(0);
    transition: transform 0.6s cubic-bezier(.17,.67,.3,1.33);
    transition-delay: 0.6s;
    transform-origin: top left;
    display: block;
    line-height: 200%;
    position: relative;

    &::after {
      content: '';
      position: absolute;
      bottom: -10px;
      left: 0;
      width: 200px;
      height: 2px;
      background-color: black;
      transform: scaleX(0);
      transition: transform 1.2s cubic-bezier(.77,0,.18,1);
      transition-delay: 0.6s;
      transform-origin: left;
    }
  }

  &.is-inview small {
    transform: scale(1);

    &::after {
      transform: scaleX(1);
    }
  }
`,qY=()=>y.jsxs(y.Fragment,{children:[y.jsxs(AN,{className:"d-flex align-items-center justify-content-center",children:[y.jsxs("div",{className:"w-50",children:[y.jsxs(VA,{className:"title mb-4 mb-lg-5","data-scroll":!0,children:[y.jsx("span",{children:"Meet your "}),y.jsxs("span",{children:[y.jsx("strong",{className:"fw-bold",children:"plant"}),", ",y.jsx("em",{children:"bring"})," "]}),y.jsx("span",{children:"nature home"})]}),y.jsx(DA,{"data-scroll":!0,"data-scroll-speed":"1",children:y.jsxs("small",{children:["拾起一抹綠意",y.jsx("br",{}),"讓自然融入生活"]})})]}),y.jsx(n1,{className:"ms-auto w-40 w-lg-50","data-scroll":!0,"data-scroll-speed":"3",children:y.jsx("div",{className:"image-outer","data-scroll":!0,"data-scroll-speed":"-2",children:y.jsx("img",{src:"./plant-01.jpg",alt:"plant-01"})})})]}),y.jsxs(WY,{className:"d-flex align-items-center justify-content-center px-lg-5 mt-5 mt-lg-0",children:[y.jsx(n1,{className:"w-40 w-lg-30 mb-5","data-scroll":!0,"data-scroll-speed":"2",children:y.jsx("div",{className:"image-outer","data-scroll":!0,"data-scroll-speed":"-2",children:y.jsx("img",{src:"./plant-06.jpg",alt:"plant-06"})})}),y.jsxs("div",{className:"w-50 ms-auto",style:{verticalAlign:"bottom"},children:[y.jsxs(VA,{className:"title mb-4 mb-lg-5","data-scroll":!0,"data-scroll-speed":"1",children:[y.jsxs("span",{children:["Every ",y.jsx("strong",{className:"fw-bold",children:"plant"})," "]}),y.jsxs("span",{children:[y.jsx("em",{children:"whispers"})," a story "]}),y.jsx("span",{children:" of life"})]}),y.jsx(DA,{"data-scroll":!0,"data-scroll-speed":"3",children:y.jsxs("small",{children:["植物的細語",y.jsx("br",{}),"療癒生活每個角落"]})}),y.jsx(n1,{className:"d-none d-lg-block w-40 ms-auto pt-5","data-scroll":!0,"data-scroll-speed":"2",children:y.jsx("div",{className:"image-outer","data-scroll":!0,"data-scroll-speed":"-2",children:y.jsx("img",{src:"./plant-10.jpg",alt:"plant-10"})})})]})]})]}),Ho=i=>{const t=new Date(i*1e3);return new Intl.DateTimeFormat("zh-TW",{year:"numeric",month:"2-digit",day:"2-digit",timeZone:"Asia/Taipei"}).format(t).replace(/\//g,"-")},GY=xt("div")`
  max-width: 1000px;
  margin: 5rem auto;
  padding-left: env(safe-area-inset-left);
  padding-top: env(safe-area-inset-top);
  padding-right: env(safe-area-inset-right);
  padding-bottom: env(safe-area-inset-bottom);

  .tags-wrap {
    margin-bottom: 2.5rem;
    border-bottom: 2px solid black;
    padding-bottom: max(env(safe-area-inset-bottom), 2.5rem);
  }
`,KY=xt("div")`
  width: 100%;
  aspect-ratio: 1 / 1;
  overflow: hidden;
  margin-top: 4rem;

  @media screen and (min-width: 768px) {
    margin-top: 0rem;
  }
`,YY=({filterArticles:i})=>y.jsx(GY,{children:i.map((t,e)=>{const{tag:n,create_at:s,title:r,description:o,image:a,id:l}=t;return y.jsxs("div",{className:"row align-items-center my-5 py-5",children:[y.jsx("div",{className:`col-md-6 px-5 ${e%2===0?"order-md-1":"order-md-2"}`,children:y.jsxs("div",{"data-scroll":!0,"data-scroll-speed":"-1","data-scroll-delay":"0.1",children:[y.jsxs("div",{className:"tags-wrap d-flex justify-content-between align-items-center",children:[y.jsx("small",{className:"tags d-block",children:n.join("｜")}),y.jsx("small",{className:"badge rounded-pill bg-transparent border border-primary text-primary",children:Ho(s)})]}),y.jsx("h5",{className:"card-title fw-light fs-3 mb-3",children:r}),y.jsx("p",{className:"mb-5 lh-lg",style:{fontSize:"0.9rem"},children:o}),y.jsxs(Cn,{to:`/article/${l}`,className:"btn btn-secondary rounded-pill px-5 position-relative",children:["看更多",y.jsx("span",{className:"btn-arrow ms-3 position-absolute",children:"→"})]})]})}),y.jsx("div",{className:`col-md-6 px-5 ${e%2===0?"order-md-2":"order-md-1"}`,children:y.jsx(KY,{children:y.jsx("img",{src:a,alt:r,className:"object-fit-cover h-100 w-100"})})})]},`article-${e}`)})}),ZY=xt("div")`
  padding-left: env(safe-area-inset-left);
  padding-top: env(safe-area-inset-top);
  padding-right: env(safe-area-inset-right);
  padding-bottom: env(safe-area-inset-bottom);
`,XY=xt("div")`
  margin-top: 0;

  @media screen and (min-width: 992px) {
    margin-top: -5rem;
  }
`,JY=xt("div")`
  max-width: 750px;
  width: 100%;

  @media (min-width: 768px) {
    .product-card {
        margin-bottom: 3rem !important;
    }
  }
`,PN=xt("div")`
  left: 0;
  position: ${Fp.isMobile?"static":"absolute"};
  right: 0;
  top: 0;
`,QY=xt(PN)`
  bottom: 200px;
  top: -100px;
`,eZ=({filterProducts:i})=>y.jsxs(ZY,{className:"row",children:[y.jsxs("div",{className:`col-md-5 position-relative overflow-hidden ${Fp.isMobile&&"mb-5"}`,style:{marginTop:"100px"},children:[y.jsx(QY,{id:"fixed-target"}),y.jsxs(PN,{className:"d-flex flex-column align-items-center text-center","data-scroll":!0,"data-scroll-sticky":!0,"data-scroll-target":"#fixed-target",children:[y.jsx("h3",{className:"title fs-2 mb-3",children:"＼ New Items ／"}),y.jsxs("small",{className:"d-block",children:["最新植栽推薦 ",y.jsx("br",{}),"快來挑選你的居家綠色夥伴"]}),y.jsx("svg",{className:`text-white mt-4 ${Fp.isMobile?"d-none":"d-block"}`,xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"50px",version:"1.1",id:"Capa_1",viewBox:"0 0 227.096 227.096",xmlSpace:"preserve",children:y.jsx("g",{children:y.jsx("polygon",{points:"152.835,39.285 146.933,45.183 211.113,109.373 0,109.373 0,117.723 211.124,117.723 146.933,181.902 152.835,187.811 227.096,113.55   "})})})]})]}),y.jsx(XY,{className:"col-md-7 mb-5 mb-lg-0","data-scroll":!0,"data-scroll-delay":"0.04","data-scroll-speed":"5",children:y.jsxs(JY,{className:"text-center px-4 ps-lg-0 pe-lg-5",children:[y.jsx("div",{className:"row",children:i.length?y.jsx(y.Fragment,{children:i.map(t=>y.jsx(Hb,{item:t,isLink:!0,children:y.jsx("small",{className:"d-block mt-3 pt-3 border-top text-start text-dark",children:y.jsx("small",{children:t.description})})},t.id))}):""}),y.jsxs(Cn,{to:"/products",className:"btn btn-secondary rounded-pill px-5 mt-4 position-relative",children:["所有植栽",y.jsx("span",{className:"btn-arrow ms-3 position-absolute",children:"→"})]})]})})]}),tZ=xt("div")`
  padding-top: max(env(safe-area-inset-top), 5rem);
  padding-bottom: max(env(safe-area-inset-bottom), 5rem);
  padding-left: max(env(safe-area-inset-left), 1.5rem);
  padding-right: max(env(safe-area-inset-right), 1.5rem);
`,nZ=xt("div")`
  transition: 0.5s cubic-bezier(0,.85,.45,1) 0.5s;
  transform: translateY(100%);
  opacity: 0;

  &.is-inview {
    transform: translateY(0);
    opacity: 1;
  }
`,iZ=xt("div")`
  overflow: hidden;
  flex-shrink: 0;

  .image-outer {
    aspect-ratio: 3 / 4;
    overflow: hidden;
    will-change: transform, opacity;

    &.is-inview {
      img {
        opacity: 1;
        transform: scale(1);
      }
    }
  }

  img {
    width: 100%;
    opacity: 0;
    transform: scale(1.5);
    transform-origin: center;
    transition: opacity 1.2s cubic-bezier(.215,.61,.355,1), transform 1.2s cubic-bezier(.215,.61,.355,1);
  }
`,BA=[{icon:"./icon-03.svg",title:"觀花植物",description:"鮮豔花朵點綴空間，營造溫馨氛圍",plants:[{name:"火鶴花",id:"-OFw3pnPKDo3lBndVBjm"},{name:"櫻花苔玉",id:"-OG9J1VVDk-sqPl9qMdY"}]},{icon:"./icon-02.svg",title:"多肉植物",description:"迷你療癒系，輕鬆好養不費心",plants:[{name:"沙漠玫瑰",id:"-OG9FnB6iQqIoqAhZiVb"},{name:"香葉草",id:"-OKyt5dKRrMbX_vhHIOn"}]},{icon:"./icon-04.svg",title:"大型植栽",description:"打造空間綠意焦點，提升生活質感",plants:[{name:"旅人蕉",id:"-OG9KxW4iGCfQys4TP6W"},{name:"龜背芋",id:"-OFvzAWoPIh6KN0cWBbT"}]},{icon:"./icon-01.svg",title:"觀葉植物",description:"綠意盎然，輕鬆打造療癒空間",plants:[{name:"黑葉金錢樹",id:"-OG9HPsocFyozZZ3sRJl"},{name:"小葉欖仁",id:"-OG9B2gF0BH99VU5gpya"}]}],FA=({icon:i,title:t,description:e,plants:n})=>y.jsxs(nZ,{className:"py-5","data-scroll":!0,children:[y.jsx("img",{src:i,alt:t,className:"text-light mb-4",style:{maxHeight:"50px",maxWidth:"50px"}}),y.jsx("h6",{className:"fs-4 fw-light text-tertiary",children:t}),y.jsx("div",{className:"mx-auto my-3",style:{width:"1px",height:"35px",backgroundColor:"var(--gray)"}}),y.jsx("p",{className:"text-gray",children:e}),y.jsxs("small",{children:["推薦植栽：",n.map((s,r)=>y.jsxs("span",{children:[y.jsx(Cn,{to:`/product/${s.id}`,className:"text-white border-bottom border-white",children:s.name}),r!==n.length-1?"、":""]},`plant-${s.id}`))]})]}),sZ=()=>y.jsxs(tZ,{className:"text-white row align-items-center bg-secondary",children:[y.jsxs("div",{className:"col-12 text-center mb-5",children:[y.jsx("h3",{className:"title fs-2 mb-3",children:"＼ Plant Categories ／"}),y.jsxs("small",{className:"d-block",children:["探索不同植栽風格 ",y.jsx("br",{}),"為空間增添獨特氛圍"]})]}),y.jsx("div",{className:"col-md-4 d-flex flex-column align-items-center text-center",children:BA.slice(0,2).map(i=>y.jsx(FA,{...i},`category-${i.title}`))}),y.jsx("div",{className:"col-md-4 d-none d-md-block",children:y.jsx(iZ,{className:"w-100",children:y.jsx("div",{className:"image-outer","data-scroll":!0,"data-scroll-speed":"3",children:y.jsx("img",{src:"./plant-08.jpg",alt:"plant-08"})})})}),y.jsx("div",{className:"col-md-4 d-flex flex-column align-items-center text-center",children:BA.slice(2).map(i=>y.jsx(FA,{...i},`category-${i.title}`))})]}),rZ={BASE_URL:"/react-and-bloom/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_BASE:"https://ec-course-api.hexschool.io/v2",VITE_API_PATH:"and-bloom"},{VITE_API_BASE:oZ,VITE_API_PATH:aZ}=rZ,IN=({isShowLoading:i=!0}={})=>{const t=Vn(),[e,n]=R.useState([]),[s,r]=R.useState(1),[o,a]=R.useState(1),l=R.useCallback(async()=>{var c,h,f;try{i&&t(ct(!0));const m=await Ke.get(`${oZ}/api/${aZ}/articles?${s}`);n(m.data.articles),a((c=m.data.pagination)==null?void 0:c.total_pages),r((h=m.data.pagination)==null?void 0:h.current_page)}catch(m){m instanceof $t&&console.log((f=m==null?void 0:m.response)==null?void 0:f.data.message)}finally{t(ct(!1))}},[s,t,i]);return R.useEffect(()=>{l()},[l,s]),{articles:e,getArticles:l,currentPage:s,setCurrentPage:r,totalPages:o}},lZ=$b`
  body {
    background-color: var(--background);
  }
`,cZ=()=>{const i=R.useRef(null),t=R.useRef(null),e=R.useRef(null),n=R.useRef(0),{products:s}=Ub({isShowLoading:!1}),r=R.useMemo(()=>(s==null?void 0:s.slice(0,5))||[],[s]),{articles:o}=IN({isShowLoading:!1}),a=R.useMemo(()=>(o==null?void 0:o.slice(0,2))||[],[o]);return R.useEffect(()=>{if(i.current)return t.current=new BY({el:i.current,smooth:!0,lerp:.06,multiplier:.5}),t.current.on("scroll",({scroll:l})=>{var c,h;l.y>n.current&&l.y>75?(c=e.current)==null||c.classList.add("hidden"):(h=e.current)==null||h.classList.remove("hidden"),n.current=l.y}),()=>{var l;(l=t.current)==null||l.destroy()}},[]),R.useEffect(()=>{r.length&&setTimeout(()=>{var l;(l=t.current)==null||l.update()},500)},[r]),y.jsxs(y.Fragment,{children:[y.jsx(lZ,{}),y.jsx(U3,{ref:e}),y.jsxs("div",{className:"overflow-hidden position-relative",ref:i,children:[y.jsx(HY,{}),y.jsx(qY,{}),y.jsx(eZ,{filterProducts:r}),y.jsx(sZ,{}),y.jsx(YY,{filterArticles:a}),y.jsx(UY,{}),y.jsx(H3,{})]})]})};function uZ(i,t,e,n){return i.params.createElements&&Object.keys(n).forEach(s=>{if(!e[s]&&e.auto===!0){let r=pr(i.el,`.${n[s]}`)[0];r||(r=Lp("div",n[s]),r.className=n[s],i.el.append(r)),e[s]=r,t[s]=r}}),e}function $A(i){let{swiper:t,extendParams:e,on:n,emit:s}=i;e({navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock",navigationDisabledClass:"swiper-navigation-disabled"}}),t.navigation={nextEl:null,prevEl:null};function r(v){let _;return v&&typeof v=="string"&&t.isElement&&(_=t.el.querySelector(v)||t.hostEl.querySelector(v),_)?_:(v&&(typeof v=="string"&&(_=[...document.querySelectorAll(v)]),t.params.uniqueNavElements&&typeof v=="string"&&_&&_.length>1&&t.el.querySelectorAll(v).length===1?_=t.el.querySelector(v):_&&_.length===1&&(_=_[0])),v&&!_?v:_)}function o(v,_){const E=t.params.navigation;v=xo(v),v.forEach(x=>{x&&(x.classList[_?"add":"remove"](...E.disabledClass.split(" ")),x.tagName==="BUTTON"&&(x.disabled=_),t.params.watchOverflow&&t.enabled&&x.classList[t.isLocked?"add":"remove"](E.lockClass))})}function a(){const{nextEl:v,prevEl:_}=t.navigation;if(t.params.loop){o(_,!1),o(v,!1);return}o(_,t.isBeginning&&!t.params.rewind),o(v,t.isEnd&&!t.params.rewind)}function l(v){v.preventDefault(),!(t.isBeginning&&!t.params.loop&&!t.params.rewind)&&(t.slidePrev(),s("navigationPrev"))}function c(v){v.preventDefault(),!(t.isEnd&&!t.params.loop&&!t.params.rewind)&&(t.slideNext(),s("navigationNext"))}function h(){const v=t.params.navigation;if(t.params.navigation=uZ(t,t.originalParams.navigation,t.params.navigation,{nextEl:"swiper-button-next",prevEl:"swiper-button-prev"}),!(v.nextEl||v.prevEl))return;let _=r(v.nextEl),E=r(v.prevEl);Object.assign(t.navigation,{nextEl:_,prevEl:E}),_=xo(_),E=xo(E);const x=(k,A)=>{k&&k.addEventListener("click",A==="next"?c:l),!t.enabled&&k&&k.classList.add(...v.lockClass.split(" "))};_.forEach(k=>x(k,"next")),E.forEach(k=>x(k,"prev"))}function f(){let{nextEl:v,prevEl:_}=t.navigation;v=xo(v),_=xo(_);const E=(x,k)=>{x.removeEventListener("click",k==="next"?c:l),x.classList.remove(...t.params.navigation.disabledClass.split(" "))};v.forEach(x=>E(x,"next")),_.forEach(x=>E(x,"prev"))}n("init",()=>{t.params.navigation.enabled===!1?p():(h(),a())}),n("toEdge fromEdge lock unlock",()=>{a()}),n("destroy",()=>{f()}),n("enable disable",()=>{let{nextEl:v,prevEl:_}=t.navigation;if(v=xo(v),_=xo(_),t.enabled){a();return}[...v,..._].filter(E=>!!E).forEach(E=>E.classList.add(t.params.navigation.lockClass))}),n("click",(v,_)=>{let{nextEl:E,prevEl:x}=t.navigation;E=xo(E),x=xo(x);const k=_.target;let A=x.includes(k)||E.includes(k);if(t.isElement&&!A){const S=_.path||_.composedPath&&_.composedPath();S&&(A=S.find(O=>E.includes(O)||x.includes(O)))}if(t.params.navigation.hideOnClick&&!A){if(t.pagination&&t.params.pagination&&t.params.pagination.clickable&&(t.pagination.el===k||t.pagination.el.contains(k)))return;let S;E.length?S=E[0].classList.contains(t.params.navigation.hiddenClass):x.length&&(S=x[0].classList.contains(t.params.navigation.hiddenClass)),s(S===!0?"navigationShow":"navigationHide"),[...E,...x].filter(O=>!!O).forEach(O=>O.classList.toggle(t.params.navigation.hiddenClass))}});const m=()=>{t.el.classList.remove(...t.params.navigation.navigationDisabledClass.split(" ")),h(),a()},p=()=>{t.el.classList.add(...t.params.navigation.navigationDisabledClass.split(" ")),f()};Object.assign(t.navigation,{enable:m,disable:p,update:a,init:h,destroy:f})}function zA(i){let{swiper:t,extendParams:e,on:n}=i;e({thumbs:{swiper:null,multipleActiveThumbs:!0,autoScrollOffset:0,slideThumbActiveClass:"swiper-slide-thumb-active",thumbsContainerClass:"swiper-thumbs"}});let s=!1,r=!1;t.thumbs={swiper:null};function o(){const c=t.thumbs.swiper;if(!c||c.destroyed)return;const h=c.clickedIndex,f=c.clickedSlide;if(f&&f.classList.contains(t.params.thumbs.slideThumbActiveClass)||typeof h>"u"||h===null)return;let m;c.params.loop?m=parseInt(c.clickedSlide.getAttribute("data-swiper-slide-index"),10):m=h,t.params.loop?t.slideToLoop(m):t.slideTo(m)}function a(){const{thumbs:c}=t.params;if(s)return!1;s=!0;const h=t.constructor;if(c.swiper instanceof h)t.thumbs.swiper=c.swiper,Object.assign(t.thumbs.swiper.originalParams,{watchSlidesProgress:!0,slideToClickedSlide:!1}),Object.assign(t.thumbs.swiper.params,{watchSlidesProgress:!0,slideToClickedSlide:!1}),t.thumbs.swiper.update();else if(fh(c.swiper)){const f=Object.assign({},c.swiper);Object.assign(f,{watchSlidesProgress:!0,slideToClickedSlide:!1}),t.thumbs.swiper=new h(f),r=!0}return t.thumbs.swiper.el.classList.add(t.params.thumbs.thumbsContainerClass),t.thumbs.swiper.on("tap",o),!0}function l(c){const h=t.thumbs.swiper;if(!h||h.destroyed)return;const f=h.params.slidesPerView==="auto"?h.slidesPerViewDynamic():h.params.slidesPerView;let m=1;const p=t.params.thumbs.slideThumbActiveClass;if(t.params.slidesPerView>1&&!t.params.centeredSlides&&(m=t.params.slidesPerView),t.params.thumbs.multipleActiveThumbs||(m=1),m=Math.floor(m),h.slides.forEach(E=>E.classList.remove(p)),h.params.loop||h.params.virtual&&h.params.virtual.enabled)for(let E=0;E<m;E+=1)pr(h.slidesEl,`[data-swiper-slide-index="${t.realIndex+E}"]`).forEach(x=>{x.classList.add(p)});else for(let E=0;E<m;E+=1)h.slides[t.realIndex+E]&&h.slides[t.realIndex+E].classList.add(p);const v=t.params.thumbs.autoScrollOffset,_=v&&!h.params.loop;if(t.realIndex!==h.realIndex||_){const E=h.activeIndex;let x,k;if(h.params.loop){const A=h.slides.find(S=>S.getAttribute("data-swiper-slide-index")===`${t.realIndex}`);x=h.slides.indexOf(A),k=t.activeIndex>t.previousIndex?"next":"prev"}else x=t.realIndex,k=x>t.previousIndex?"next":"prev";_&&(x+=k==="next"?v:-1*v),h.visibleSlidesIndexes&&h.visibleSlidesIndexes.indexOf(x)<0&&(h.params.centeredSlides?x>E?x=x-Math.floor(f/2)+1:x=x+Math.floor(f/2)-1:x>E&&h.params.slidesPerGroup,h.slideTo(x,c?0:void 0))}}n("beforeInit",()=>{const{thumbs:c}=t.params;if(!(!c||!c.swiper))if(typeof c.swiper=="string"||c.swiper instanceof HTMLElement){const h=Ga(),f=()=>{const p=typeof c.swiper=="string"?h.querySelector(c.swiper):c.swiper;if(p&&p.swiper)c.swiper=p.swiper,a(),l(!0);else if(p){const v=`${t.params.eventsPrefix}init`,_=E=>{c.swiper=E.detail[0],p.removeEventListener(v,_),a(),l(!0),c.swiper.update(),t.update()};p.addEventListener(v,_)}return p},m=()=>{if(t.destroyed)return;f()||requestAnimationFrame(m)};requestAnimationFrame(m)}else a(),l(!0)}),n("slideChange update resize observerUpdate",()=>{l()}),n("setTransition",(c,h)=>{const f=t.thumbs.swiper;!f||f.destroyed||f.setTransition(h)}),n("beforeDestroy",()=>{const c=t.thumbs.swiper;!c||c.destroyed||r&&c.destroy()}),Object.assign(t.thumbs,{init:a,update:l})}function jA(i){let{swiper:t,extendParams:e,emit:n,once:s}=i;e({freeMode:{enabled:!1,momentum:!0,momentumRatio:1,momentumBounce:!0,momentumBounceRatio:1,momentumVelocityRatio:1,sticky:!1,minimumVelocity:.02}});function r(){if(t.params.cssMode)return;const l=t.getTranslate();t.setTranslate(l),t.setTransition(0),t.touchEventsData.velocities.length=0,t.freeMode.onTouchEnd({currentPos:t.rtl?t.translate:-t.translate})}function o(){if(t.params.cssMode)return;const{touchEventsData:l,touches:c}=t;l.velocities.length===0&&l.velocities.push({position:c[t.isHorizontal()?"startX":"startY"],time:l.touchStartTime}),l.velocities.push({position:c[t.isHorizontal()?"currentX":"currentY"],time:Ml()})}function a(l){let{currentPos:c}=l;if(t.params.cssMode)return;const{params:h,wrapperEl:f,rtlTranslate:m,snapGrid:p,touchEventsData:v}=t,E=Ml()-v.touchStartTime;if(c<-t.minTranslate()){t.slideTo(t.activeIndex);return}if(c>-t.maxTranslate()){t.slides.length<p.length?t.slideTo(p.length-1):t.slideTo(t.slides.length-1);return}if(h.freeMode.momentum){if(v.velocities.length>1){const L=v.velocities.pop(),M=v.velocities.pop(),F=L.position-M.position,q=L.time-M.time;t.velocity=F/q,t.velocity/=2,Math.abs(t.velocity)<h.freeMode.minimumVelocity&&(t.velocity=0),(q>150||Ml()-L.time>300)&&(t.velocity=0)}else t.velocity=0;t.velocity*=h.freeMode.momentumVelocityRatio,v.velocities.length=0;let x=1e3*h.freeMode.momentumRatio;const k=t.velocity*x;let A=t.translate+k;m&&(A=-A);let S=!1,O;const P=Math.abs(t.velocity)*20*h.freeMode.momentumBounceRatio;let N;if(A<t.maxTranslate())h.freeMode.momentumBounce?(A+t.maxTranslate()<-P&&(A=t.maxTranslate()-P),O=t.maxTranslate(),S=!0,v.allowMomentumBounce=!0):A=t.maxTranslate(),h.loop&&h.centeredSlides&&(N=!0);else if(A>t.minTranslate())h.freeMode.momentumBounce?(A-t.minTranslate()>P&&(A=t.minTranslate()+P),O=t.minTranslate(),S=!0,v.allowMomentumBounce=!0):A=t.minTranslate(),h.loop&&h.centeredSlides&&(N=!0);else if(h.freeMode.sticky){let L;for(let M=0;M<p.length;M+=1)if(p[M]>-A){L=M;break}Math.abs(p[L]-A)<Math.abs(p[L-1]-A)||t.swipeDirection==="next"?A=p[L]:A=p[L-1],A=-A}if(N&&s("transitionEnd",()=>{t.loopFix()}),t.velocity!==0){if(m?x=Math.abs((-A-t.translate)/t.velocity):x=Math.abs((A-t.translate)/t.velocity),h.freeMode.sticky){const L=Math.abs((m?-A:A)-t.translate),M=t.slidesSizesGrid[t.activeIndex];L<M?x=h.speed:L<2*M?x=h.speed*1.5:x=h.speed*2.5}}else if(h.freeMode.sticky){t.slideToClosest();return}h.freeMode.momentumBounce&&S?(t.updateProgress(O),t.setTransition(x),t.setTranslate(A),t.transitionStart(!0,t.swipeDirection),t.animating=!0,U0(f,()=>{!t||t.destroyed||!v.allowMomentumBounce||(n("momentumBounce"),t.setTransition(h.speed),setTimeout(()=>{t.setTranslate(O),U0(f,()=>{!t||t.destroyed||t.transitionEnd()})},0))})):t.velocity?(n("_freeModeNoMomentumRelease"),t.updateProgress(A),t.setTransition(x),t.setTranslate(A),t.transitionStart(!0,t.swipeDirection),t.animating||(t.animating=!0,U0(f,()=>{!t||t.destroyed||t.transitionEnd()}))):t.updateProgress(A),t.updateActiveIndex(),t.updateSlidesClasses()}else if(h.freeMode.sticky){t.slideToClosest();return}else h.freeMode&&n("_freeModeNoMomentumRelease");(!h.freeMode.momentum||E>=h.longSwipesMs)&&(n("_freeModeStaticRelease"),t.updateProgress(),t.updateActiveIndex(),t.updateSlidesClasses())}Object.assign(t,{freeMode:{onTouchStart:r,onTouchMove:o,onTouchEnd:a}})}const dZ={BASE_URL:"/react-and-bloom/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_BASE:"https://ec-course-api.hexschool.io/v2",VITE_API_PATH:"and-bloom"},{VITE_API_BASE:hZ,VITE_API_PATH:fZ}=dZ,mZ=$b`
  .main-swiper-side {
    aspect-ratio: 3 / 4;
    position: relative;
  }

  .main-swiper-side::after {
    content: "";
    position: absolute;
    inset: 0;
    background: linear-gradient(to bottom, transparent 75%, rgba(0, 0, 0, 0.05) 85%, rgba(0, 0, 0, 0.1));
    pointer-events: none;
  }

  .swiper-slide img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .swiper-navigation {
    z-index: 1000;
  }

  .thumb .swiper-slide {
    width: 25%;
    aspect-ratio: 1 / 1;
    opacity: 0.5;
    cursor: pointer;
  }

  .thumb .swiper-slide-thumb-active {
    opacity: 1;
  }
`,gZ=()=>{const i=Vn(),{id:t}=lE(),e=ec(),[n,s]=R.useState(null),[r,o]=R.useState(1),{products:a,getProducts:l}=Ub({category:n==null?void 0:n.category,immediate:!1}),c=R.useMemo(()=>(a==null?void 0:a.filter(k=>k.id!==(n==null?void 0:n.id)).slice(0,2))||[],[n==null?void 0:n.id,a]);R.useEffect(()=>{t||e("/products"),(async()=>{var k,A;try{i(ct(!0));const S=await Ke.get(`${hZ}/api/${fZ}/product/${t}`);s(S.data.product),await l()}catch(S){S instanceof $t&&(console.log((k=S==null?void 0:S.response)==null?void 0:k.data.message),((A=S==null?void 0:S.response)==null?void 0:A.status)===404&&e("*"))}finally{i(ct(!1))}})()},[i,l,t,e]);const h=k=>{const A=k.replace(/[^0-9]+/g,"");return A&&parseInt(A)?parseInt(A):1},[f,m]=R.useState(null),[p,v]=R.useState(null),_={spaceBetween:"10px",loop:!0,modules:[jA,$A,zA]},E={slidesPerView:4,spaceBetween:"10px",freeMode:!0,watchSlidesProgress:!0,modules:[jA,$A,zA],className:"thumb"},x={觀花植物:"./icon-dark-03.svg",多肉植物:"./icon-dark-02.svg",大型植栽:"./icon-dark-04.svg",觀葉植物:"./icon-dark-01.svg"};return y.jsxs(y.Fragment,{children:[y.jsx(mZ,{}),y.jsx("div",{className:"container my-5",children:y.jsxs("div",{className:"row",children:[y.jsx("div",{className:"col-md-5 col-lg-4 mb-3 mb-md-0",children:a.length?y.jsxs(y.Fragment,{children:[y.jsxs(Dp,{onSwiper:v,thumbs:{swiper:f},..._,className:"position-relative bg-background mb-2",children:[y.jsx(pu,{className:"main-swiper-side",children:y.jsx("img",{src:n==null?void 0:n.imageUrl,className:"w-100 object-fit-cover mask-img",alt:"主圖"})}),n==null?void 0:n.imagesUrl.map((k,A)=>y.jsx(pu,{className:"main-swiper-side",children:y.jsx("img",{src:k,alt:"附圖",className:"d-block w-100 object-fit-cover mask-img"})},`swiper-slide-${A}`)),y.jsxs("div",{className:"swiper-navigation position-absolute bottom-0 start-0 d-flex justify-content-between w-100 px-2",children:[y.jsx("i",{className:"bi bi-arrow-left fs-1 text-white cursor-pointer",onClick:()=>p==null?void 0:p.slidePrev()}),y.jsx("i",{className:"bi bi-arrow-right fs-1 text-white cursor-pointer",onClick:()=>p==null?void 0:p.slideNext()})]})]}),y.jsxs(Dp,{onSwiper:m,...E,children:[y.jsx(pu,{children:y.jsx("img",{src:n==null?void 0:n.imageUrl,className:"w-100 object-fit-cover mask-img",alt:"主圖"})}),n==null?void 0:n.imagesUrl.map((k,A)=>y.jsx(pu,{children:y.jsx("img",{src:k,alt:"附圖",className:"d-block w-100 object-fit-cover mask-img"})},`thumb-swiper-slide-${A}`))]})]}):""}),y.jsxs("div",{className:"col-md-7 col-lg-8 d-flex flex-column",children:[y.jsxs("div",{children:[y.jsx("span",{className:"badge rounded-pill bg-primary mb-3 align-self-start",children:n==null?void 0:n.category}),y.jsx("img",{src:n!=null&&n.category?x[n==null?void 0:n.category]:"",alt:`${n==null?void 0:n.category}-icon`,className:"ms-2",style:{maxWidth:"30px",maxHeight:"30px"}})]}),y.jsx("h2",{className:"fs-3 fw-light",children:n==null?void 0:n.title}),y.jsxs("div",{className:"my-4",children:[y.jsx("div",{className:"border-top border-bottom d-flex align-items-stretch",children:y.jsxs("div",{className:"row w-100",children:[y.jsx("div",{className:"col-3 col-lg-2 d-flex align-items-center border-end",children:y.jsx("h6",{className:"my-3 fs-sm",children:"商品描述"})}),y.jsx("div",{className:"col-9 col-lg-10 my-3",children:y.jsx("p",{className:"mb-0",children:n==null?void 0:n.description})})]})}),y.jsx("div",{className:"border-bottom d-flex align-items-stretch",children:y.jsxs("div",{className:"row w-100",children:[y.jsx("div",{className:"col-3 col-lg-2 d-flex align-items-center border-end",children:y.jsx("h6",{className:"my-3 fs-sm",children:"適合溫度"})}),y.jsx("div",{className:"col-9 col-lg-10 my-3",children:y.jsx("p",{className:"mb-0",children:n==null?void 0:n.content})})]})}),y.jsx("div",{className:"border-bottom d-flex align-items-stretch",children:y.jsxs("div",{className:"row w-100",children:[y.jsx("div",{className:"col-3 col-lg-2 d-flex align-items-center border-end",children:y.jsx("h6",{className:"my-3 fs-sm",children:"寵物注意"})}),y.jsx("div",{className:"col-9 col-lg-10 my-3",children:y.jsx("p",{className:"mb-0",children:n==null?void 0:n.petCareNotes})})]})}),y.jsx("div",{className:"border-bottom d-flex align-items-stretch",children:y.jsxs("div",{className:"row w-100",children:[y.jsx("div",{className:"col-3 col-lg-2 d-flex align-items-center border-end",children:y.jsx("h6",{className:"my-3 fs-sm",children:"花語"})}),y.jsx("div",{className:"col-9 col-lg-10 my-3",children:y.jsx("p",{className:"mb-0",children:n==null?void 0:n.floriography})})]})})]}),y.jsxs("div",{className:"d-flex align-items-center mb-4",children:[y.jsxs("h4",{className:`mb-0 fst-italic fw-normal ${((n==null?void 0:n.price)??0)<((n==null?void 0:n.origin_price)??0)&&"text-danger"}`,children:["$ ",n==null?void 0:n.price]}),((n==null?void 0:n.price)??0)<((n==null?void 0:n.origin_price)??0)?y.jsxs(y.Fragment,{children:[y.jsx("span",{className:"badge rounded-pill fst-italic fw-light text-bg-danger ms-2 me-3",children:"sale"}),y.jsxs("h6",{className:"text-decoration-line-through fw-light mb-0",children:["$ ",n==null?void 0:n.origin_price]})]}):""]}),y.jsxs("div",{className:"d-flex flex-column flex-md-row align-items-md-center mt-auto",children:[y.jsxs("div",{className:"d-flex align-items-center mb-3 mb-md-0",children:[y.jsx("i",{className:`bi bi-dash-square-fill fs-3 ${r===1?"cursor-default opacity-50":"cursor-pointer"}`,onClick:()=>r>1&&o(r-1)}),y.jsx("input",{type:"number",className:"form-control w-auto mx-2",value:r,onChange:k=>o(h(k.target.value))}),y.jsx("i",{className:"bi bi-plus-square-fill fs-3 cursor-pointer",onClick:()=>o(r+1)})]}),y.jsx(an,{type:"submit",btnStyle:"btn btn-secondary flex-shrink-0 ms-md-3",handleClick:()=>{i(SE({productId:n==null?void 0:n.id,qty:r}))},children:"加入購物車"})]})]}),c.length?y.jsx("div",{className:"mt-5",children:y.jsxs("div",{className:"border-top py-5 px-2 px-md-4 px-lg-5",children:[y.jsxs("div",{className:"d-flex flex-column align-items-center text-center",children:[y.jsx("h5",{className:"title text-center fs-2 mb-3",children:"＼ Recommendations ／"}),y.jsx("p",{className:"d-block",children:"精選商品"})]}),y.jsx("div",{className:"row row-cols-1 row-cols-md-2 gx-lg-5 my-4 my-lg-5",children:c.map(k=>y.jsx(Hb,{item:k,isLink:!0},k.id))})]})}):""]})})]})},pZ=()=>{const i=Vn(),[t,e]=R.useState(""),{products:n,currentPage:s,setCurrentPage:r,totalPages:o}=Ub({category:t});return y.jsxs("div",{className:"container my-5",children:[y.jsxs("div",{className:"d-flex justify-content-between align-items-center pb-3 mb-5 border-bottom",children:[y.jsxs("div",{className:"d-flex align-items-center",children:[y.jsx("h3",{className:"title fs-2 mb-0 me-3",children:"All Plants"}),y.jsx("small",{className:"mt-2",children:"產｜品｜列｜表"})]}),y.jsxs("select",{name:"category",id:"category",className:"form-select form-select-sm w-auto",value:t,onChange:a=>e(a.target.value),children:[y.jsx("option",{value:"",children:"所有商品"}),y.jsx("option",{value:"大型植栽",children:"大型植栽"}),y.jsx("option",{value:"觀花植物",children:"觀花植物"}),y.jsx("option",{value:"觀葉植物",children:"觀葉植物"}),y.jsx("option",{value:"多肉植物",children:"多肉植物"})]})]}),y.jsx("div",{className:"row row-cols-1 row-cols-md-2 gx-4",children:n.map(a=>y.jsx(Hb,{item:a,hasBg:!1,children:y.jsxs("div",{className:"w-100 d-flex flex-column flex-sm-row align-items-sm-center justify-content-end pt-4 mt-auto",children:[y.jsx(Cn,{to:`/product/${a.id}`,className:"btn btn-sm btn-outline-primary rounded-pill mb-2 mb-sm-0 me-sm-2 px-4",children:"查看更多"}),y.jsx(an,{btnStyle:"btn-sm btn-secondary",handleClick:()=>i(SE({productId:a.id})),children:"加入購物車"})]})},a.id))}),y.jsx("div",{className:"d-flex justify-content-center my-5",children:y.jsx(ed,{currentPage:s,totalPages:o,setCurrentPage:r})})]})},bZ={BASE_URL:"/react-and-bloom/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_BASE:"https://ec-course-api.hexschool.io/v2",VITE_API_PATH:"and-bloom"},{VITE_API_BASE:wZ}=bZ,vZ=()=>{const i=Vn(),[t,e]=R.useState({username:"",password:""}),n=ec(),s=R.useCallback(o=>{const{name:a,value:l}=o.target;e(c=>({...c,[a]:l}))},[]),r=async o=>{var a,l;o.preventDefault();try{i(ct(!0));const c=await Ke.post(`${wZ}/admin/signin`,t),{token:h,expired:f}=c.data;document.cookie=`andBloom=${h}; expires=${new Date(f)}; path=/;`,setTimeout(()=>{n("/admin/products")},100)}catch(c){c instanceof $t&&(console.log((a=c==null?void 0:c.response)==null?void 0:a.data.message),i(bn({text:(l=c==null?void 0:c.response)==null?void 0:l.data.message,type:"danger"})))}finally{i(ct(!1))}};return y.jsx("div",{className:"position-fixed top-0 bottom-0 start-0 end-0 d-flex align-items-center justify-content-center",children:y.jsxs("form",{id:"form",className:"form",onSubmit:r,children:[y.jsxs("div",{className:"mb-3",children:[y.jsx("label",{htmlFor:"username",className:"form-label",children:"Email"}),y.jsx("input",{type:"email",name:"username",className:"form-control",id:"username",placeholder:"email",onChange:s})]}),y.jsxs("div",{className:"mb-3",children:[y.jsx("label",{htmlFor:"password",className:"form-label",children:"Password"}),y.jsx("input",{type:"password",name:"password",className:"form-control",id:"password",placeholder:"password",onChange:s})]}),y.jsx("button",{type:"submit",className:"btn btn-primary w-100",children:"Login"})]})})},yZ=()=>y.jsxs("div",{className:"fixed-top vh-100 d-flex flex-column align-items-center justify-content-center text-center bg-secondary bg-opacity-25",children:[y.jsx("h2",{children:"404 Not Found"}),y.jsx("p",{className:"mt-2",children:"找不到頁面"}),y.jsx(Cn,{to:"/",className:"btn btn-secondary rounded-pill px-5 mt-3",children:"回首頁"})]}),_Z=xt("li")`
  margin-top: -1px;
  &:hover {
    background-color: #f8f9fa;
    z-index: 1000;
    border-color: rgba(0, 0, 0, 0.3);
  }
`,EZ=R.memo(({showModal:i,coupon:t,setSelectedCoupon:e,showAlertModal:n})=>{const{title:s,is_enabled:r,percent:o,due_date:a,code:l}=t,c=R.useCallback(f=>{e(f),i()},[i,e]),h=R.useCallback(f=>{e(f),n()},[n,e]);return y.jsx(_Z,{className:"card mb-3",children:y.jsx("div",{className:"card-body",children:y.jsxs("div",{className:"row w-100 justify-content-between align-items-center",children:[y.jsx("div",{className:"col-md-2",children:y.jsx("p",{className:"mb-0 ms-4",children:s})}),y.jsxs("div",{className:"col-md-2",children:[y.jsx("span",{className:"badge rounded-pill bg-primary fs-sm mb-1",children:"折扣碼"}),y.jsx("p",{className:"mb-0",children:l})]}),y.jsxs("div",{className:"col-md-2",children:[y.jsx("span",{className:"badge rounded-pill bg-primary fs-sm mb-1",children:"折扣數"}),y.jsxs("p",{className:"mb-0",children:[o," %"]})]}),y.jsxs("div",{className:"col-md-2",children:[y.jsx("span",{className:"badge rounded-pill bg-primary fs-sm mb-1",children:"到期日"}),y.jsx("p",{className:"mb-0",children:Ho(a)})]}),y.jsx("div",{className:"col-md d-flex justify-content-center",children:y.jsx(zb,{isEnabled:r})}),y.jsxs("div",{className:"col-md d-flex align-items-center justify-content-end",children:[y.jsx(an,{btnStyle:"btn-sm btn-secondary",handleClick:()=>c(t),children:"編輯"}),y.jsx(an,{btnStyle:"btn-sm btn-outline-primary ms-2",handleClick:()=>h(t),children:"刪除"})]})]})})})}),CZ={BASE_URL:"/react-and-bloom/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_BASE:"https://ec-course-api.hexschool.io/v2",VITE_API_PATH:"and-bloom"},{VITE_API_BASE:xZ,VITE_API_PATH:TZ}=CZ,HA={title:"",is_enabled:1,percent:100,due_date:"",code:""},kZ=R.forwardRef(({selectedCoupon:i,getCoupons:t},e)=>{const n=Vn(),s=R.useRef(null),r=R.useRef(null),{register:o,handleSubmit:a,watch:l,getValues:c,setValue:h,reset:f,control:m,formState:{errors:p}}=Lf({mode:"onTouched",defaultValues:HA});R.useEffect(()=>{s.current&&(r.current=new Er(s.current))},[]);const[v]=IE({control:m,name:["is_enabled"]}),_=async E=>{var x,k,A;try{n(ct(!0));const S=document.cookie.replace(/(?:(?:^|.*;\s*)andBloom\s*=\s*([^;]*).*$)|^.*$/,"$1");Ke.defaults.headers.common.Authorization=S;const O=await Ke[i?"put":"post"](`${xZ}/api/${TZ}/admin/coupon${i?`/${i.id}`:""}`,{data:{...E,is_enabled:E.is_enabled?1:0}});t(),(x=r.current)==null||x.hide(),n(bn({text:O==null?void 0:O.data.message,type:"success"}))}catch(S){S instanceof $t&&(console.log((k=S==null?void 0:S.response)==null?void 0:k.data.message),n(bn({text:(A=S==null?void 0:S.response)==null?void 0:A.data.message,type:"danger"})))}finally{n(ct(!1))}};return R.useEffect(()=>{const E=s.current,x=()=>{f(HA)};return E==null||E.addEventListener("hidden.bs.modal",x),()=>E==null?void 0:E.removeEventListener("hidden.bs.modal",x)},[s,f]),R.useEffect(()=>{const E=s.current,x=()=>{i&&f({...i,due_date:Ho(i.due_date)})};return E==null||E.addEventListener("shown.bs.modal",x),()=>E==null?void 0:E.removeEventListener("shown.bs.modal",x)},[i,s,f]),R.useImperativeHandle(e,()=>({show:()=>{var E;(E=r.current)==null||E.show()},hide:()=>{var E;(E=r.current)==null||E.hide()}})),y.jsx("div",{className:"modal fade","data-bs-backdrop":"static",tabIndex:-1,ref:s,children:y.jsx("div",{className:"modal-dialog modal-lg",children:y.jsxs("div",{className:"modal-content",children:[y.jsxs("div",{className:"modal-header",children:[y.jsx("h2",{className:"modal-title fs-5",children:i?"編輯優惠券":"新增優惠券"}),y.jsx("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),y.jsxs("form",{onSubmit:a(_),children:[y.jsx("div",{className:"modal-body",children:y.jsxs("div",{className:"row",children:[y.jsx("div",{className:"mb-3",children:y.jsx(Gi,{id:"title",label:"優惠券名稱",type:"text",placeholder:"請輸入名稱",register:o,errors:p,rules:{required:"優惠券名稱必填"}})}),y.jsx("div",{className:"mb-3",children:y.jsx(Gi,{id:"code",label:"優惠券代碼",type:"text",placeholder:"請輸入代碼",register:o,errors:p,rules:{required:"優惠券代碼必填"}})}),y.jsx("div",{className:"col-md-6 mb-3",children:y.jsx(Gi,{id:"percent",label:"折扣數",type:"number",placeholder:"請輸入折扣數",register:o,errors:p,rules:{required:"折扣數必填",min:{value:50,message:"折扣數需大於 50"},max:{value:100,message:"折扣數需小於等於 100"},valueAsNumber:!0}})}),y.jsx("div",{className:"col-md-6 mb-3",children:y.jsx(Gi,{id:"due_date",label:"到期日",type:"date",placeholder:"請輸入到期日",register:o,errors:p,rules:{required:"到期日必填",setValueAs:E=>E?new Date(E).getTime()/1e3:null}})}),y.jsx("div",{className:"mb-3",children:y.jsx(gr,{id:"is_enabled",label:"是否啟用",errors:p,children:y.jsxs("div",{className:`d-block ${p.is_enabled&&"is-invalid"}`,role:"group",children:[y.jsx("input",{type:"checkbox",className:"btn-check",id:"enabled",...o("is_enabled")}),y.jsx("label",{className:`btn px-4 ${v?"btn-success":"btn-danger"}`,htmlFor:"enabled",children:v?"啟用":"停用"})]})})})]})}),y.jsxs("div",{className:"modal-footer",children:[y.jsx(an,{btnStyle:"btn btn-outline-secondary px-4","data-bs-dismiss":"modal",children:"取消"}),y.jsx(an,{type:"submit",btnStyle:"btn btn-secondary px-4",children:"儲存"})]})]})]})})})}),SZ=R.memo(kZ),AZ={BASE_URL:"/react-and-bloom/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_BASE:"https://ec-course-api.hexschool.io/v2",VITE_API_PATH:"and-bloom"},{VITE_API_BASE:UA,VITE_API_PATH:WA}=AZ,PZ=()=>{const i=Vn(),[t,e]=R.useState([]),[n,s]=R.useState(1),[r,o]=R.useState(1),[a,l]=R.useState(null),c=R.useRef(null),h=R.useRef(null),f=R.useCallback(async()=>{var E,x,k;try{i(ct(!0));const A=document.cookie.replace(/(?:(?:^|.*;\s*)andBloom\s*=\s*([^;]*).*$)|^.*$/,"$1");Ke.defaults.headers.common.Authorization=A;const S=await Ke.get(`${UA}/api/${WA}/admin/coupons?page=${n}`);e(S.data.coupons),o((E=S.data.pagination)==null?void 0:E.total_pages),s((x=S.data.pagination)==null?void 0:x.current_page)}catch(A){A instanceof $t&&console.log((k=A==null?void 0:A.response)==null?void 0:k.data.message)}finally{i(ct(!1))}},[n,i]);R.useEffect(()=>{f()},[f]);const m=R.useCallback(()=>{var E;(E=c.current)==null||E.show()},[]),p=R.useCallback(()=>{var E;(E=h.current)==null||E.show()},[]),v=R.useCallback(()=>{l(null),m()},[m]),_=R.useCallback(async E=>{var x,k,A;if(E)try{i(ct(!0));const S=await Ke.delete(`${UA}/api/${WA}/admin/coupon/${E}`);i(bn({text:S==null?void 0:S.data.message,type:"success"})),f(),(x=h.current)==null||x.hide()}catch(S){S instanceof $t&&(console.log((k=S==null?void 0:S.response)==null?void 0:k.data.message),i(bn({text:(A=S==null?void 0:S.response)==null?void 0:A.data.message,type:"danger"})))}finally{i(ct(!1)),l(null)}},[i,f]);return y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"d-flex justify-content-between align-items-center pb-3 mb-3 border-bottom",children:[y.jsx("h3",{className:"mb-0",children:"優惠券列表"}),y.jsx(an,{btnStyle:"btn-sm btn-secondary",handleClick:v,children:"新增"})]}),t.length?y.jsxs(y.Fragment,{children:[t.map(E=>y.jsx(EZ,{showModal:m,setSelectedCoupon:l,showAlertModal:p,coupon:E},E.id)),y.jsx("div",{className:"d-flex justify-content-center my-5",children:y.jsx(ed,{currentPage:n,totalPages:r,setCurrentPage:s})})]}):y.jsx("p",{className:"text-center",children:"尚無優惠券"}),y.jsx(SZ,{ref:c,selectedCoupon:a,getCoupons:f}),y.jsx(Nf,{ref:h,nextFn:()=>_((a==null?void 0:a.id)||""),children:y.jsxs("p",{className:"text-center py-4",children:["刪除後無法復原，您確定刪除",y.jsx("strong",{children:a==null?void 0:a.title}),"嗎？"]})})]})},IZ={BASE_URL:"/react-and-bloom/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_BASE:"https://ec-course-api.hexschool.io/v2",VITE_API_PATH:"and-bloom"},{VITE_API_BASE:qA,VITE_API_PATH:GA}=IZ,RZ=xt("p")`
  position: relative;
  display: inline-block;

  &::before, &::after {
    content: '';
    position: absolute;
    width: 75px;
    height: 1px;
    background-color: black;
    top: 50%;
    transform: translateY(-50%);
  }

  &::before {
    left: -85px;
  }

  &::after {
    right: -85px;
  }
`,OZ=()=>{var c,h,f,m,p;const i=Vn(),{id:t}=lE(),[e,n]=R.useState({}),[s,r]=R.useState(!1);R.useEffect(()=>{t&&(async()=>{var v,_;try{i(ct(!0));const E=await Ke.get(`${qA}/api/${GA}/order/${t}`);n(E.data.order)}catch(E){E instanceof $t&&(console.log((v=E==null?void 0:E.response)==null?void 0:v.data.message),((_=E==null?void 0:E.response)==null?void 0:_.status)===404&&n({}))}finally{i(ct(!1))}})()},[i,t]);const o=R.useMemo(()=>{var v;if(e!=null&&e.products)return((v=Object.values(e==null?void 0:e.products))==null?void 0:v.reduce((_,E)=>_+(E.total*100-E.final_total*100),0))/100},[e]),a=R.useMemo(()=>{var v,_,E,x;if(!(!(e!=null&&e.products)||!((_=(v=Object.values(e==null?void 0:e.products))==null?void 0:v[0])!=null&&_.coupon)))return(x=(E=Object.values(e==null?void 0:e.products))==null?void 0:E[0])==null?void 0:x.coupon},[e]),l=async()=>{var v;try{i(ct(!0)),await Ke.post(`${qA}/api/${GA}/pay/${t}`),r(!0)}catch(_){_ instanceof $t&&console.log((v=_==null?void 0:_.response)==null?void 0:v.data.message)}finally{i(ct(!1))}};return y.jsx(y.Fragment,{children:s?y.jsxs("div",{className:"container text-center py-5 my-5",children:[y.jsx("img",{src:"./plant-01.svg",alt:"plant-icon",className:"mb-4",style:{width:"70px"}}),y.jsx("h3",{className:"title text-info fst-italic mb-3",style:{fontSize:"64px"},children:"Thank You!"}),y.jsxs(RZ,{children:["已收到您的訂單，",y.jsx("br",{className:"d-sm-none"}),"我們將儘速為您處理"]})]}):y.jsxs("div",{className:"container my-5",children:[y.jsxs("div",{className:"d-flex align-items-center pb-3 mb-4",children:[y.jsx("h3",{className:"title fs-2 mb-0 me-3",children:"Checkout"}),y.jsx("small",{className:"mt-2",children:"訂｜單｜結｜帳"})]}),e?y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"row",children:[y.jsxs("div",{className:"mb-4 d-flex flex-column flex-md-row align-items-start align-items-md-center",children:[y.jsx("span",{className:"badge rounded-pill bg-primary me-3",children:"訂單成立時間"}),y.jsx("p",{className:"mb-md-0 me-4",children:e.create_at&&Ho(e==null?void 0:e.create_at)}),y.jsx("span",{className:"badge rounded-pill bg-primary me-3",children:"付款狀態"}),y.jsx("p",{className:`mb-md-0 me-4 ${e.is_paid?"text-success":"text-danger"}`,children:e.is_paid?"已付款":"待付款"}),e.is_paid?y.jsxs(y.Fragment,{children:[y.jsx("span",{className:"badge rounded-pill bg-primary me-3",children:"付款時間"}),y.jsx("p",{className:"mb-md-0 me-4",children:e.paid_date&&Ho(e.paid_date)})]}):""]}),y.jsxs("div",{className:"col-md-6 mb-4",children:[y.jsx("span",{className:"badge rounded-pill bg-primary mb-1",children:"訂購資訊"}),y.jsxs("small",{className:"d-flex py-1 my-1 border-bottom border-top",children:[y.jsx("span",{className:"flex-shrink-0 me-4",children:"訂購大名"}),y.jsx("span",{className:"ms-auto",children:(c=e.user)==null?void 0:c.name})]}),y.jsxs("small",{className:"d-flex py-1 my-1 border-bottom",children:[y.jsx("span",{className:"flex-shrink-0 me-4",children:"聯絡電話"}),y.jsx("span",{className:"ms-auto",children:(h=e.user)==null?void 0:h.tel})]}),y.jsxs("small",{className:"d-flex py-1 my-1 border-bottom",children:[y.jsx("span",{className:"flex-shrink-0 me-4",children:"收件地址"}),y.jsx("span",{className:"ms-auto",children:(f=e.user)==null?void 0:f.address})]}),y.jsxs("small",{className:"d-flex py-1 my-1 border-bottom",children:[y.jsx("span",{className:"flex-shrink-0 me-4",children:"電子郵件"}),y.jsx("span",{className:"ms-auto",children:(m=e.user)==null?void 0:m.email})]}),y.jsxs("small",{className:"d-flex py-1 my-1 border-bottom",children:[y.jsx("span",{className:"flex-shrink-0 me-4",children:"訂單備註"}),y.jsx("span",{className:"ms-auto",children:e.message})]})]}),y.jsxs("div",{className:"col-md-6 mb-4",children:[y.jsx("span",{className:"badge rounded-pill bg-primary mb-1",children:"商品明細"}),(e==null?void 0:e.products)&&((p=Object.values(e==null?void 0:e.products))==null?void 0:p.map((v,_)=>y.jsxs("small",{className:`d-flex py-1 my-1 border-bottom ${_===0&&"border-top"}`,children:[y.jsxs("span",{className:"flex-shrink-0 me-4",children:[v.product.title," * ",v.qty]}),y.jsxs("span",{className:"ms-auto",children:["$",v.total]})]},`${t}-${v.id}`))),y.jsxs("small",{className:"d-flex pb-1 mb-1 border-bottom",children:[y.jsxs("span",{className:"flex-shrink-0 me-4",children:["優惠券折扣",a?`（${a.title} ${a.percent} 折）`:""]}),a?y.jsxs("span",{className:"ms-auto text-danger",children:["-$",o]}):""]}),y.jsxs("small",{className:"fw-bold d-flex pb-1 mb-1 border-bottom",children:[y.jsx("span",{className:"flex-shrink-0 me-4",children:"總金額"}),y.jsxs("span",{className:"ms-auto",children:["$",e.total]})]})]})]}),e.is_paid?"":y.jsx("div",{className:"text-center",children:y.jsx(an,{btnStyle:"btn btn-secondary px-5 mt-5",handleClick:l,children:"確認結帳"})})]}):y.jsxs("div",{className:"text-center",children:[y.jsx("h6",{className:"text-dark",children:"查無此訂單"}),y.jsxs(Cn,{to:"/cart",className:"btn btn-secondary rounded-pill px-5 mt-4 position-relative",children:["回到購物車",y.jsx("span",{className:"btn-arrow ms-3 position-absolute",children:"→"})]})]})]})})},NZ=xt("div")`
  aspect-ratio: 4 / 3;

  @media screen and (min-width: 768px) {
    aspect-ratio: 5 / 2;
  }
`,MZ=()=>{var s,r,o,a,l,c,h,f,m,p,v;const{articles:i,currentPage:t,setCurrentPage:e,totalPages:n}=IN();return y.jsxs("div",{className:"container my-5",children:[y.jsxs("div",{className:"row mb-5",children:[y.jsx(NZ,{className:"col-md-7 mb-3 mb-md-0",children:y.jsx("img",{src:(s=i[0])==null?void 0:s.image,alt:(r=i[0])==null?void 0:r.title,className:"object-fit-cover h-100 w-100"})}),y.jsxs("div",{className:"col-md-5",children:[y.jsx("div",{className:"mb-3",children:(a=(o=i[0])==null?void 0:o.tag)==null?void 0:a.map((_,E)=>y.jsx("span",{className:"badge rounded-pill bg-primary fs-sm mb-1 me-1",children:_},`tag-${E}`))}),y.jsx("h3",{className:"fw-light pb-3 mb-3 border-bottom",children:(l=i[0])==null?void 0:l.title}),y.jsxs("div",{className:"mb-3 d-flex align-items-end justify-content-between",children:[y.jsx("p",{className:"mb-0",children:((c=i[0])==null?void 0:c.create_at)&&Ho((h=i[0])==null?void 0:h.create_at)}),y.jsxs("p",{className:"mb-0",children:[y.jsx("small",{children:"Posted by_"})," ",(f=i[0])==null?void 0:f.author]})]}),y.jsx("p",{className:"mb-3 text-ellipsis lh-lg",style:{fontSize:"0.9rem"},children:(m=i[0])==null?void 0:m.description}),y.jsxs(Cn,{to:`/article/${(p=i[0])==null?void 0:p.id}`,className:"btn btn-secondary rounded-pill px-5 position-relative",children:["看更多",y.jsx("span",{className:"btn-arrow ms-3 position-absolute",children:"→"})]})]})]}),y.jsx("div",{className:"row row-cols-1 row-cols-md-2 row-cols-lg-3",children:(v=i==null?void 0:i.slice(1))==null?void 0:v.map(_=>{var E;return y.jsxs(Cn,{to:`/article/${_.id}`,className:"mb-4",children:[y.jsxs("div",{className:"position-relative mb-3",style:{aspectRatio:"4 / 3"},children:[y.jsx("img",{src:_.image,alt:_.title,className:"object-fit-cover h-100 w-100"}),y.jsx("div",{className:"position-absolute bg-white bg-opacity-50",style:{bottom:0,left:0,right:0},children:y.jsx("div",{className:"p-2",children:(E=_.tag)==null?void 0:E.map((x,k)=>y.jsx("span",{className:"badge rounded-pill bg-primary fs-sm mb-y me-1",children:x},`tag-${k}`))})})]}),y.jsxs("div",{className:"mb-2 d-flex align-items-end justify-content-between",children:[y.jsx("p",{className:"mb-0",children:_.create_at&&Ho(_.create_at)}),y.jsxs("p",{className:"mb-0",children:[y.jsx("small",{children:"Posted by_"})," ",_.author]})]}),y.jsx("h5",{className:"fw-light",children:_.title})]},_.id)})}),y.jsx("div",{className:"d-flex justify-content-center my-5",children:y.jsx(ed,{currentPage:t,totalPages:n,setCurrentPage:e})})]})},LZ={BASE_URL:"/react-and-bloom/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_BASE:"https://ec-course-api.hexschool.io/v2",VITE_API_PATH:"and-bloom"},{VITE_API_BASE:VZ,VITE_API_PATH:DZ}=LZ,BZ=xt("div")`
  aspect-ratio: 2 / 1;
  background: linear-gradient(135deg, #42b983, #ffed6e);
  margin-top: -70px;

  @media screen and (min-width: 768px) {
    aspect-ratio: 4 / 1;
  }
`,FZ=()=>{var r;const i=Vn(),{id:t}=lE(),e=ec(),[n,s]=R.useState(null);return R.useEffect(()=>{t||e("/articles"),(async()=>{var o,a;try{i(ct(!0));const l=await Ke.get(`${VZ}/api/${DZ}/article/${t}`);s(l.data.article)}catch(l){l instanceof $t&&(console.log((o=l==null?void 0:l.response)==null?void 0:o.data.message),((a=l==null?void 0:l.response)==null?void 0:a.status)===404&&e("*"))}finally{i(ct(!1))}})()},[i,t,e]),y.jsxs(y.Fragment,{children:[y.jsx(BZ,{className:"overflow-hidden",children:y.jsx("img",{src:n==null?void 0:n.image,alt:n==null?void 0:n.title,className:"object-fit-cover h-100 w-100 opacity-50",style:{filter:"grayscale(50%)"}})}),y.jsxs("div",{className:"container my-5",children:[y.jsx("div",{className:"mb-3",children:(r=n==null?void 0:n.tag)==null?void 0:r.map((o,a)=>y.jsx("span",{className:"badge rounded-pill bg-primary fs-sm mb-1 me-1",children:o},`tag-${a}`))}),y.jsxs("div",{className:"pb-3 mb-3 d-flex flex-column flex-lg-row align-items-lg-end justify-content-between border-bottom",children:[y.jsx("h2",{className:"fw-light mb-0 order-2 order-lg-1",children:n==null?void 0:n.title}),y.jsx("p",{className:"mb-lg-0 order-1 order-lg-2",children:(n==null?void 0:n.create_at)&&Ho(n.create_at)})]}),y.jsxs("p",{className:"mb-5",children:[y.jsx("small",{children:"Posted by_"})," ",n==null?void 0:n.author]}),n!=null&&n.content?y.jsx("div",{className:"ck-content",dangerouslySetInnerHTML:{__html:n.content}}):""]})]})},$Z=xt("li")`
  margin-top: -1px;

  &:hover {
    background-color: #f8f9fa;
    z-index: 1000;
    border-color: rgba(0, 0, 0, 0.3);
  }
`,zZ=R.memo(({showModal:i,article:t,setSelectedArticle:e,showAlertModal:n})=>{const{author:s,image:r,isPublic:o,tag:a,title:l}=t,c=R.useCallback(f=>{e(f),i()},[i,e]),h=R.useCallback(f=>{e(f),n()},[n,e]);return y.jsx($Z,{className:"card mb-3",children:y.jsx("div",{className:"card-body",children:y.jsxs("div",{className:"row w-100 justify-content-between align-items-center",children:[y.jsx("div",{className:"col-auto",children:y.jsx("div",{className:"image-container rounded-circle overflow-hidden border",style:{width:"80px",height:"80px"},children:y.jsx("img",{src:r,alt:l,className:"w-100 h-100 object-fit-cover"})})}),y.jsx("div",{className:"col-md",children:y.jsx("h6",{className:"mb-0",children:l})}),y.jsxs("div",{className:"col-md",children:[y.jsx("span",{className:"badge rounded-pill bg-primary fs-sm mb-1",children:"作者"}),y.jsx("p",{className:"mb-0",children:s})]}),y.jsxs("div",{className:"col-md",children:[y.jsx("span",{className:"badge rounded-pill bg-primary fs-sm mb-1",children:"標籤"}),y.jsx("p",{className:"mb-0",children:a.join(", ")})]}),y.jsx("div",{className:"col-md d-flex justify-content-center",children:y.jsx(zb,{isEnabled:o,labels:["隱藏","公開"]})}),y.jsxs("div",{className:"col-md d-flex align-items-center justify-content-end",children:[y.jsx(an,{btnStyle:"btn-sm btn-secondary",handleClick:()=>c(t),children:"編輯"}),y.jsx(an,{btnStyle:"btn-sm btn-outline-primary ms-2",handleClick:()=>h(t),children:"刪除"})]})]})})})});/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function jZ(){const i={resolve:null,promise:null};return i.promise=new Promise(t=>{i.resolve=t}),i}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function HZ(i){let t=null;return(...e)=>(t||(t={current:i(...e)}),t.current)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const mi=new Array(256).fill("").map((i,t)=>("0"+t.toString(16)).slice(-2));function UZ(){const[i,t,e,n]=crypto.getRandomValues(new Uint32Array(4));return"e"+mi[i>>0&255]+mi[i>>8&255]+mi[i>>16&255]+mi[i>>24&255]+mi[t>>0&255]+mi[t>>8&255]+mi[t>>16&255]+mi[t>>24&255]+mi[e>>0&255]+mi[e>>8&255]+mi[e>>16&255]+mi[e>>24&255]+mi[n>>0&255]+mi[n>>8&255]+mi[n>>16&255]+mi[n>>24&255]}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function WZ(i,t){const e=i.extraPlugins||[];return{...i,extraPlugins:[...e,...t.filter(n=>!e.includes(n))]}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function RN(i){return!!i&&/^\d+\.\d+\.\d+/.test(i)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function ON(i){return i?["nightly","alpha","internal","nightly-","staging"].some(t=>i.includes(t)):!1}function qZ(i){return RN(i)||ON(i)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function GZ(i){if(!RN(i))throw new Error(`Invalid semantic version: ${i||"<blank>"}.`);const[t,e,n]=i.split(".");return{major:Number.parseInt(t,10),minor:Number.parseInt(e,10),patch:Number.parseInt(n,10)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function KZ(i){if(ON(i))return 3;const{major:t}=GZ(i);switch(!0){case t>=44:return 3;case t>=38:return 2;default:return 1}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function YZ(){const{CKEDITOR_VERSION:i,CKEDITOR:t}=window;return qZ(i)?{source:t?"cdn":"npm",version:i}:null}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function ZZ(){const i=YZ();return i?KZ(i.version):null}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function NN(i,t){switch(t||(t=ZZ()||void 0),t){case 1:case 2:return i===void 0;case 3:return i==="GPL";default:return!1}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function XZ(i,t){return function(n){NN(n.config.get("licenseKey"))||n.on("collectUsageData",(s,{setUsageData:r})=>{r(`integration.${i}`,t)})}}var JZ=Object.defineProperty,QZ=(i,t,e)=>t in i?JZ(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e,Ui=(i,t,e)=>QZ(i,typeof t!="symbol"?t+"":t,e);/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const MN=class LN{constructor(t,e){Ui(this,"_lifecycle"),Ui(this,"_element"),Ui(this,"_releaseLock",null),Ui(this,"_value",null),Ui(this,"_afterMountCallbacks",[]),Ui(this,"_state",{destroyedBeforeInitialization:!1,mountingInProgress:null}),Ui(this,"release",HZ(()=>{const{_releaseLock:n,_state:s,_element:r,_lifecycle:o}=this;s.mountingInProgress?s.mountingInProgress.then(()=>o.unmount({element:r,mountResult:this.value})).catch(a=>{console.error("Semaphore unmounting error:",a)}).then(n.resolve).then(()=>{this._value=null}):(s.destroyedBeforeInitialization=!0,n.resolve())})),this._element=t,this._lifecycle=e,this._lock()}get value(){return this._value}unsafeSetValue(t){this._value=t,this._afterMountCallbacks.forEach(e=>e(t)),this._afterMountCallbacks=[]}runAfterMount(t){const{_value:e,_afterMountCallbacks:n}=this;e?t(e):n.push(t)}_lock(){const{_semaphores:t}=LN,{_state:e,_element:n,_lifecycle:s}=this,r=t.get(n)||Promise.resolve(null),o=jZ();this._releaseLock=o;const a=r.then(()=>e.destroyedBeforeInitialization?Promise.resolve(void 0):(e.mountingInProgress=s.mount().then(l=>(l&&this.unsafeSetValue(l),l)),e.mountingInProgress)).then(async l=>{l&&s.afterMount&&await s.afterMount({element:n,mountResult:l})}).then(()=>o.promise).catch(l=>{console.error("Semaphore mounting error:",l)}).then(()=>{t.get(n)===a&&t.delete(n)});t.set(n,a)}};Ui(MN,"_semaphores",new Map);let eX=MN;/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const tX="$__CKEditorReactContextMetadata";function nX(i,t){return{...t,[tX]:i}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const iX=ot.createContext(null),sX=i=>!!i&&typeof i=="object"&&"status"in i&&["initializing","initialized","error"].includes(i.status),VN=i=>t=>sX(t)&&t.status===i,KA=VN("initializing"),rX=i=>VN("initialized")(i)&&i.watchdog.state==="ready";/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const oX=XZ("react",{version:"9.5.0",frameworkVersion:ot.version});/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function aX(i){return NN(i.licenseKey)?i:WZ(i,[oX])}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const i1="Lock from React integration (@ckeditor/ckeditor5-react)";class DN extends ot.Component{constructor(t){super(t),Ui(this,"domContainer",ot.createRef()),Ui(this,"editorSemaphore",null),this._checkVersion()}_checkVersion(){const{CKEDITOR_VERSION:t}=window;if(!t)return console.warn('Cannot find the "CKEDITOR_VERSION" in the "window" scope.');const[e]=t.split(".").map(Number);e>=42||t.startsWith("0.0.0")||console.warn("The <CKEditor> component requires using CKEditor 5 in version 42+ or nightly build.")}get _semaphoreValue(){const{editorSemaphore:t}=this;return t?t.value:null}get watchdog(){const{_semaphoreValue:t}=this;return t?t.watchdog:null}get editor(){const{_semaphoreValue:t}=this;return t?t.instance:null}shouldComponentUpdate(t){const{props:e,editorSemaphore:n}=this;return t.id!==e.id||t.disableWatchdog!==e.disableWatchdog?!0:(n&&(n.runAfterMount(({instance:s})=>{this._shouldUpdateEditorData(e,t,s)&&s.data.set(t.data)}),"disabled"in t&&n.runAfterMount(({instance:s})=>{t.disabled?s.enableReadOnlyMode(i1):s.disableReadOnlyMode(i1)})),!1)}componentDidMount(){KA(this.context)||this._initLifeCycleSemaphore()}componentDidUpdate(){KA(this.context)||this._initLifeCycleSemaphore()}componentWillUnmount(){this._unlockLifeCycleSemaphore()}_unlockLifeCycleSemaphore(){this.editorSemaphore&&(this.editorSemaphore.release(),this.editorSemaphore=null)}_initLifeCycleSemaphore(){this._unlockLifeCycleSemaphore(),this.editorSemaphore=new eX(this.domContainer.current,{mount:async()=>this._initializeEditor(),afterMount:({mountResult:t})=>{const{onReady:e}=this.props;e&&this.domContainer.current!==null&&e(t.instance)},unmount:async({element:t,mountResult:e})=>{const{onAfterDestroy:n}=this.props;try{await this._destroyEditor(e),t.innerHTML=""}finally{n&&n(e.instance)}}})}render(){return ot.createElement("div",{ref:this.domContainer})}async _initializeEditor(){if(this.props.disableWatchdog)return{instance:await this._createEditor(this.domContainer.current,this._getConfig()),watchdog:null};const t=rX(this.context)?new lX(this.context.watchdog):new this.props.editor.EditorWatchdog(this.props.editor,this.props.watchdogConfig),e={current:0};return t.setCreator(async(n,s)=>{var r;const{editorSemaphore:o}=this,{onAfterDestroy:a}=this.props;e.current>0&&a&&((r=o==null?void 0:o.value)!=null&&r.instance)&&a(o.value.instance);const l=await this._createEditor(n,s);return o&&e.current>0&&(o.unsafeSetValue({instance:l,watchdog:t}),setTimeout(()=>{this.props.onReady&&this.props.onReady(t.editor)})),e.current++,l}),t.on("error",(n,{error:s,causesRestart:r})=>{(this.props.onError||console.error)(s,{phase:"runtime",willEditorRestart:r})}),await t.create(this.domContainer.current,this._getConfig()).catch(n=>{(this.props.onError||console.error)(n,{phase:"initialization",willEditorRestart:!1})}),{watchdog:t,instance:t.editor}}_createEditor(t,e){const{contextItemMetadata:n}=this.props;return n&&(e=nX(n,e)),this.props.editor.create(t,aX(e)).then(s=>{if("disabled"in this.props){/* istanbul ignore else -- @preserve */this.props.disabled&&s.enableReadOnlyMode(i1)}const r=s.model.document,o=s.editing.view.document;return r.on("change:data",a=>{/* istanbul ignore else -- @preserve */this.props.onChange&&this.props.onChange(a,s)}),o.on("focus",a=>{/* istanbul ignore else -- @preserve */this.props.onFocus&&this.props.onFocus(a,s)}),o.on("blur",a=>{/* istanbul ignore else -- @preserve */this.props.onBlur&&this.props.onBlur(a,s)}),s})}async _destroyEditor(t){const{watchdog:e,instance:n}=t;return new Promise((s,r)=>{/* istanbul ignore next -- @preserve */setTimeout(async()=>{try{if(e)return await e.destroy(),s();if(n)return await n.destroy(),s();s()}catch(o){console.error(o),r(o)}})})}_shouldUpdateEditorData(t,e,n){return!(t.data===e.data||n.data.get()===e.data)}_getConfig(){const t=this.props.config||{};return this.props.data&&t.initialData&&console.warn("Editor data should be provided either using `config.initialData` or `content` property. The config value takes precedence over `content` property and will be used when both are specified."),{...t,initialData:t.initialData||this.props.data||""}}}Ui(DN,"contextType",iX);class lX{constructor(t){Ui(this,"_contextWatchdog"),Ui(this,"_id"),Ui(this,"_creator"),this._contextWatchdog=t,this._id=UZ()}setCreator(t){this._creator=t}create(t,e){return this._contextWatchdog.add({sourceElementOrData:t,config:e,creator:this._creator,id:this._id,type:"editor"})}on(t,e){this._contextWatchdog.on("itemError",(n,{itemId:s,error:r})=>{s===this._id&&e(null,{error:r,causesRestart:void 0})})}destroy(){return this._contextWatchdog.state==="ready"?this._contextWatchdog.remove(this._id):Promise.resolve()}get editor(){return this._contextWatchdog.getItem(this._id)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function BN(...i){return t=>{i.forEach(e=>{typeof e=="function"?e(t):e!=null&&(e.current=t)})}}const cX=R.memo(R.forwardRef(({id:i,semaphore:t,rootName:e},n)=>{const s=R.useRef(null);return R.useEffect(()=>{let r,o;return t.runAfterMount(({instance:a})=>{if(!s.current)return;o=a;const{ui:l,model:c}=o,h=c.document.getRoot(e);h&&o.ui.getEditableElement(e)&&o.detachEditable(h),r=l.view.createEditable(e,s.current),l.addEditable(r),a.editing.view.forceRender()}),()=>{if(o&&o.state!=="destroyed"&&s.current){const a=o.model.document.getRoot(e);/* istanbul ignore else -- @preserve */a&&o.detachEditable(a)}}},[t.revision]),ot.createElement("div",{key:t.revision,id:i,ref:BN(n,s)})}));cX.displayName="EditorEditable";const uX=R.forwardRef(({editor:i},t)=>{const e=R.useRef(null);return R.useEffect(()=>{const n=e.current;if(!i||!n)return;const s=i.ui.view.toolbar.element;return n.appendChild(s),()=>{n.contains(s)&&n.removeChild(s)}},[i&&i.id]),ot.createElement("div",{ref:BN(e,t)})});uX.displayName="EditorToolbarWrapper";var FN=typeof global=="object"&&global&&global.Object===Object&&global,dX=typeof self=="object"&&self&&self.Object===Object&&self,Ir=FN||dX||Function("return this")(),ao=Ir.Symbol,$N=Object.prototype,hX=$N.hasOwnProperty,fX=$N.toString,Xd=ao?ao.toStringTag:void 0;function mX(i){var t=hX.call(i,Xd),e=i[Xd];try{i[Xd]=void 0;var n=!0}catch{}var s=fX.call(i);return n&&(t?i[Xd]=e:delete i[Xd]),s}var gX=Object.prototype,pX=gX.toString;function bX(i){return pX.call(i)}var wX="[object Null]",vX="[object Undefined]",YA=ao?ao.toStringTag:void 0;function Ka(i){return i==null?i===void 0?vX:wX:YA&&YA in Object(i)?mX(i):bX(i)}function Ws(i){return i!=null&&typeof i=="object"}var yX="[object Symbol]";function Gb(i){return typeof i=="symbol"||Ws(i)&&Ka(i)==yX}function zN(i,t){for(var e=-1,n=i==null?0:i.length,s=Array(n);++e<n;)s[e]=t(i[e],e,i);return s}var Xi=Array.isArray,_X=1/0,ZA=ao?ao.prototype:void 0,XA=ZA?ZA.toString:void 0;function jN(i){if(typeof i=="string")return i;if(Xi(i))return zN(i,jN)+"";if(Gb(i))return XA?XA.call(i):"";var t=i+"";return t=="0"&&1/i==-_X?"-0":t}var EX=/\s/;function CX(i){for(var t=i.length;t--&&EX.test(i.charAt(t)););return t}var xX=/^\s+/;function TX(i){return i&&i.slice(0,CX(i)+1).replace(xX,"")}function Yt(i){var t=typeof i;return i!=null&&(t=="object"||t=="function")}var JA=NaN,kX=/^[-+]0x[0-9a-f]+$/i,SX=/^0b[01]+$/i,AX=/^0o[0-7]+$/i,PX=parseInt;function QA(i){if(typeof i=="number")return i;if(Gb(i))return JA;if(Yt(i)){var t=typeof i.valueOf=="function"?i.valueOf():i;i=Yt(t)?t+"":t}if(typeof i!="string")return i===0?i:+i;i=TX(i);var e=SX.test(i);return e||AX.test(i)?PX(i.slice(2),e?2:8):kX.test(i)?JA:+i}function Pa(i){return i}var IX="[object AsyncFunction]",RX="[object Function]",OX="[object GeneratorFunction]",NX="[object Proxy]";function ql(i){if(!Yt(i))return!1;var t=Ka(i);return t==RX||t==OX||t==IX||t==NX}var s1=Ir["__core-js_shared__"],e2=function(){var i=/[^.]+$/.exec(s1&&s1.keys&&s1.keys.IE_PROTO||"");return i?"Symbol(src)_1."+i:""}();function MX(i){return!!e2&&e2 in i}var LX=Function.prototype,VX=LX.toString;function tc(i){if(i!=null){try{return VX.call(i)}catch{}try{return i+""}catch{}}return""}var DX=/[\\^$.*+?()[\]{}|]/g,BX=/^\[object .+?Constructor\]$/,FX=Function.prototype,$X=Object.prototype,zX=FX.toString,jX=$X.hasOwnProperty,HX=RegExp("^"+zX.call(jX).replace(DX,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function UX(i){if(!Yt(i)||MX(i))return!1;var t=ql(i)?HX:BX;return t.test(tc(i))}function WX(i,t){return i==null?void 0:i[t]}function nc(i,t){var e=WX(i,t);return UX(e)?e:void 0}var Ly=nc(Ir,"WeakMap"),t2=Object.create,qX=function(){function i(){}return function(t){if(!Yt(t))return{};if(t2)return t2(t);i.prototype=t;var e=new i;return i.prototype=void 0,e}}();function GX(i,t,e){switch(e.length){case 0:return i.call(t);case 1:return i.call(t,e[0]);case 2:return i.call(t,e[0],e[1]);case 3:return i.call(t,e[0],e[1],e[2])}return i.apply(t,e)}function HN(i,t){var e=-1,n=i.length;for(t||(t=Array(n));++e<n;)t[e]=i[e];return t}var KX=800,YX=16,ZX=Date.now;function XX(i){var t=0,e=0;return function(){var n=ZX(),s=YX-(n-e);if(e=n,s>0){if(++t>=KX)return arguments[0]}else t=0;return i.apply(void 0,arguments)}}function JX(i){return function(){return i}}var $p=function(){try{var i=nc(Object,"defineProperty");return i({},"",{}),i}catch{}}(),QX=$p?function(i,t){return $p(i,"toString",{configurable:!0,enumerable:!1,value:JX(t),writable:!0})}:Pa,eJ=XX(QX);function tJ(i,t){for(var e=-1,n=i==null?0:i.length;++e<n&&t(i[e],e,i)!==!1;);return i}var nJ=9007199254740991,iJ=/^(?:0|[1-9]\d*)$/;function Kb(i,t){var e=typeof i;return t=t??nJ,!!t&&(e=="number"||e!="symbol"&&iJ.test(i))&&i>-1&&i%1==0&&i<t}function Yb(i,t,e){t=="__proto__"&&$p?$p(i,t,{configurable:!0,enumerable:!0,value:e,writable:!0}):i[t]=e}function Vf(i,t){return i===t||i!==i&&t!==t}var sJ=Object.prototype,rJ=sJ.hasOwnProperty;function LE(i,t,e){var n=i[t];(!(rJ.call(i,t)&&Vf(n,e))||e===void 0&&!(t in i))&&Yb(i,t,e)}function td(i,t,e,n){var s=!e;e||(e={});for(var r=-1,o=t.length;++r<o;){var a=t[r],l=void 0;l===void 0&&(l=i[a]),s?Yb(e,a,l):LE(e,a,l)}return e}var n2=Math.max;function oJ(i,t,e){return t=n2(t===void 0?i.length-1:t,0),function(){for(var n=arguments,s=-1,r=n2(n.length-t,0),o=Array(r);++s<r;)o[s]=n[t+s];s=-1;for(var a=Array(t+1);++s<t;)a[s]=n[s];return a[t]=e(o),GX(i,this,a)}}function aJ(i,t){return eJ(oJ(i,t,Pa),i+"")}var lJ=9007199254740991;function VE(i){return typeof i=="number"&&i>-1&&i%1==0&&i<=lJ}function nd(i){return i!=null&&VE(i.length)&&!ql(i)}function cJ(i,t,e){if(!Yt(e))return!1;var n=typeof t;return(n=="number"?nd(e)&&Kb(t,e.length):n=="string"&&t in e)?Vf(e[t],i):!1}function UN(i){return aJ(function(t,e){var n=-1,s=e.length,r=s>1?e[s-1]:void 0,o=s>2?e[2]:void 0;for(r=i.length>3&&typeof r=="function"?(s--,r):void 0,o&&cJ(e[0],e[1],o)&&(r=s<3?void 0:r,s=1),t=Object(t);++n<s;){var a=e[n];a&&i(t,a,n,r)}return t})}var uJ=Object.prototype;function DE(i){var t=i&&i.constructor,e=typeof t=="function"&&t.prototype||uJ;return i===e}function dJ(i,t){for(var e=-1,n=Array(i);++e<i;)n[e]=t(e);return n}var hJ="[object Arguments]";function i2(i){return Ws(i)&&Ka(i)==hJ}var WN=Object.prototype,fJ=WN.hasOwnProperty,mJ=WN.propertyIsEnumerable,zp=i2(function(){return arguments}())?i2:function(i){return Ws(i)&&fJ.call(i,"callee")&&!mJ.call(i,"callee")};function gJ(){return!1}var qN=typeof fs=="object"&&fs&&!fs.nodeType&&fs,s2=qN&&typeof ms=="object"&&ms&&!ms.nodeType&&ms,pJ=s2&&s2.exports===qN,r2=pJ?Ir.Buffer:void 0,bJ=r2?r2.isBuffer:void 0,Jh=bJ||gJ,wJ="[object Arguments]",vJ="[object Array]",yJ="[object Boolean]",_J="[object Date]",EJ="[object Error]",CJ="[object Function]",xJ="[object Map]",TJ="[object Number]",kJ="[object Object]",SJ="[object RegExp]",AJ="[object Set]",PJ="[object String]",IJ="[object WeakMap]",RJ="[object ArrayBuffer]",OJ="[object DataView]",NJ="[object Float32Array]",MJ="[object Float64Array]",LJ="[object Int8Array]",VJ="[object Int16Array]",DJ="[object Int32Array]",BJ="[object Uint8Array]",FJ="[object Uint8ClampedArray]",$J="[object Uint16Array]",zJ="[object Uint32Array]",on={};on[NJ]=on[MJ]=on[LJ]=on[VJ]=on[DJ]=on[BJ]=on[FJ]=on[$J]=on[zJ]=!0;on[wJ]=on[vJ]=on[RJ]=on[yJ]=on[OJ]=on[_J]=on[EJ]=on[CJ]=on[xJ]=on[TJ]=on[kJ]=on[SJ]=on[AJ]=on[PJ]=on[IJ]=!1;function jJ(i){return Ws(i)&&VE(i.length)&&!!on[Ka(i)]}function BE(i){return function(t){return i(t)}}var GN=typeof fs=="object"&&fs&&!fs.nodeType&&fs,Ph=GN&&typeof ms=="object"&&ms&&!ms.nodeType&&ms,HJ=Ph&&Ph.exports===GN,r1=HJ&&FN.process,Bu=function(){try{var i=Ph&&Ph.require&&Ph.require("util").types;return i||r1&&r1.binding&&r1.binding("util")}catch{}}(),o2=Bu&&Bu.isTypedArray,FE=o2?BE(o2):jJ,UJ=Object.prototype,WJ=UJ.hasOwnProperty;function KN(i,t){var e=Xi(i),n=!e&&zp(i),s=!e&&!n&&Jh(i),r=!e&&!n&&!s&&FE(i),o=e||n||s||r,a=o?dJ(i.length,String):[],l=a.length;for(var c in i)(t||WJ.call(i,c))&&!(o&&(c=="length"||s&&(c=="offset"||c=="parent")||r&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||Kb(c,l)))&&a.push(c);return a}function YN(i,t){return function(e){return i(t(e))}}var qJ=YN(Object.keys,Object),GJ=Object.prototype,KJ=GJ.hasOwnProperty;function YJ(i){if(!DE(i))return qJ(i);var t=[];for(var e in Object(i))KJ.call(i,e)&&e!="constructor"&&t.push(e);return t}function Df(i){return nd(i)?KN(i):YJ(i)}function ZJ(i){var t=[];if(i!=null)for(var e in Object(i))t.push(e);return t}var XJ=Object.prototype,JJ=XJ.hasOwnProperty;function QJ(i){if(!Yt(i))return ZJ(i);var t=DE(i),e=[];for(var n in i)n=="constructor"&&(t||!JJ.call(i,n))||e.push(n);return e}function id(i){return nd(i)?KN(i,!0):QJ(i)}var ZN=UN(function(i,t){td(t,id(t),i)}),eQ=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,tQ=/^\w*$/;function $E(i,t){if(Xi(i))return!1;var e=typeof i;return e=="number"||e=="symbol"||e=="boolean"||i==null||Gb(i)?!0:tQ.test(i)||!eQ.test(i)||t!=null&&i in Object(t)}var Qh=nc(Object,"create");function nQ(){this.__data__=Qh?Qh(null):{},this.size=0}function iQ(i){var t=this.has(i)&&delete this.__data__[i];return this.size-=t?1:0,t}var sQ="__lodash_hash_undefined__",rQ=Object.prototype,oQ=rQ.hasOwnProperty;function aQ(i){var t=this.__data__;if(Qh){var e=t[i];return e===sQ?void 0:e}return oQ.call(t,i)?t[i]:void 0}var lQ=Object.prototype,cQ=lQ.hasOwnProperty;function uQ(i){var t=this.__data__;return Qh?t[i]!==void 0:cQ.call(t,i)}var dQ="__lodash_hash_undefined__";function hQ(i,t){var e=this.__data__;return this.size+=this.has(i)?0:1,e[i]=Qh&&t===void 0?dQ:t,this}function Gl(i){var t=-1,e=i==null?0:i.length;for(this.clear();++t<e;){var n=i[t];this.set(n[0],n[1])}}Gl.prototype.clear=nQ;Gl.prototype.delete=iQ;Gl.prototype.get=aQ;Gl.prototype.has=uQ;Gl.prototype.set=hQ;function fQ(){this.__data__=[],this.size=0}function Zb(i,t){for(var e=i.length;e--;)if(Vf(i[e][0],t))return e;return-1}var mQ=Array.prototype,gQ=mQ.splice;function pQ(i){var t=this.__data__,e=Zb(t,i);if(e<0)return!1;var n=t.length-1;return e==n?t.pop():gQ.call(t,e,1),--this.size,!0}function bQ(i){var t=this.__data__,e=Zb(t,i);return e<0?void 0:t[e][1]}function wQ(i){return Zb(this.__data__,i)>-1}function vQ(i,t){var e=this.__data__,n=Zb(e,i);return n<0?(++this.size,e.push([i,t])):e[n][1]=t,this}function Xo(i){var t=-1,e=i==null?0:i.length;for(this.clear();++t<e;){var n=i[t];this.set(n[0],n[1])}}Xo.prototype.clear=fQ;Xo.prototype.delete=pQ;Xo.prototype.get=bQ;Xo.prototype.has=wQ;Xo.prototype.set=vQ;var ef=nc(Ir,"Map");function yQ(){this.size=0,this.__data__={hash:new Gl,map:new(ef||Xo),string:new Gl}}function _Q(i){var t=typeof i;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?i!=="__proto__":i===null}function Xb(i,t){var e=i.__data__;return _Q(t)?e[typeof t=="string"?"string":"hash"]:e.map}function EQ(i){var t=Xb(this,i).delete(i);return this.size-=t?1:0,t}function CQ(i){return Xb(this,i).get(i)}function xQ(i){return Xb(this,i).has(i)}function TQ(i,t){var e=Xb(this,i),n=e.size;return e.set(i,t),this.size+=e.size==n?0:1,this}function Jo(i){var t=-1,e=i==null?0:i.length;for(this.clear();++t<e;){var n=i[t];this.set(n[0],n[1])}}Jo.prototype.clear=yQ;Jo.prototype.delete=EQ;Jo.prototype.get=CQ;Jo.prototype.has=xQ;Jo.prototype.set=TQ;var kQ="Expected a function";function zE(i,t){if(typeof i!="function"||t!=null&&typeof t!="function")throw new TypeError(kQ);var e=function(){var n=arguments,s=t?t.apply(this,n):n[0],r=e.cache;if(r.has(s))return r.get(s);var o=i.apply(this,n);return e.cache=r.set(s,o)||r,o};return e.cache=new(zE.Cache||Jo),e}zE.Cache=Jo;var SQ=500;function AQ(i){var t=zE(i,function(n){return e.size===SQ&&e.clear(),n}),e=t.cache;return t}var PQ=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,IQ=/\\(\\)?/g,RQ=AQ(function(i){var t=[];return i.charCodeAt(0)===46&&t.push(""),i.replace(PQ,function(e,n,s,r){t.push(s?r.replace(IQ,"$1"):n||e)}),t});function jE(i){return i==null?"":jN(i)}function Jb(i,t){return Xi(i)?i:$E(i,t)?[i]:RQ(jE(i))}var OQ=1/0;function sd(i){if(typeof i=="string"||Gb(i))return i;var t=i+"";return t=="0"&&1/i==-OQ?"-0":t}function HE(i,t){t=Jb(t,i);for(var e=0,n=t.length;i!=null&&e<n;)i=i[sd(t[e++])];return e&&e==n?i:void 0}function Fu(i,t,e){var n=i==null?void 0:HE(i,t);return n===void 0?e:n}function XN(i,t){for(var e=-1,n=t.length,s=i.length;++e<n;)i[s+e]=t[e];return i}var UE=YN(Object.getPrototypeOf,Object),NQ="[object Object]",MQ=Function.prototype,LQ=Object.prototype,JN=MQ.toString,VQ=LQ.hasOwnProperty,DQ=JN.call(Object);function eo(i){if(!Ws(i)||Ka(i)!=NQ)return!1;var t=UE(i);if(t===null)return!0;var e=VQ.call(t,"constructor")&&t.constructor;return typeof e=="function"&&e instanceof e&&JN.call(e)==DQ}function QN(i,t,e){var n=-1,s=i.length;t<0&&(t=-t>s?0:s+t),e=e>s?s:e,e<0&&(e+=s),s=t>e?0:e-t>>>0,t>>>=0;for(var r=Array(s);++n<s;)r[n]=i[n+t];return r}function BQ(i,t,e){var n=i.length;return e=e===void 0?n:e,!t&&e>=n?i:QN(i,t,e)}var FQ="\\ud800-\\udfff",$Q="\\u0300-\\u036f",zQ="\\ufe20-\\ufe2f",jQ="\\u20d0-\\u20ff",HQ=$Q+zQ+jQ,UQ="\\ufe0e\\ufe0f",WQ="\\u200d",qQ=RegExp("["+WQ+FQ+HQ+UQ+"]");function eM(i){return qQ.test(i)}function GQ(i){return i.split("")}var tM="\\ud800-\\udfff",KQ="\\u0300-\\u036f",YQ="\\ufe20-\\ufe2f",ZQ="\\u20d0-\\u20ff",XQ=KQ+YQ+ZQ,JQ="\\ufe0e\\ufe0f",QQ="["+tM+"]",Vy="["+XQ+"]",Dy="\\ud83c[\\udffb-\\udfff]",eee="(?:"+Vy+"|"+Dy+")",nM="[^"+tM+"]",iM="(?:\\ud83c[\\udde6-\\uddff]){2}",sM="[\\ud800-\\udbff][\\udc00-\\udfff]",tee="\\u200d",rM=eee+"?",oM="["+JQ+"]?",nee="(?:"+tee+"(?:"+[nM,iM,sM].join("|")+")"+oM+rM+")*",iee=oM+rM+nee,see="(?:"+[nM+Vy+"?",Vy,iM,sM,QQ].join("|")+")",ree=RegExp(Dy+"(?="+Dy+")|"+see+iee,"g");function oee(i){return i.match(ree)||[]}function aee(i){return eM(i)?oee(i):GQ(i)}function lee(i){return function(t){t=jE(t);var e=eM(t)?aee(t):void 0,n=e?e[0]:t.charAt(0),s=e?BQ(e,1).join(""):t.slice(1);return n[i]()+s}}var cee=lee("toUpperCase");function uee(){this.__data__=new Xo,this.size=0}function dee(i){var t=this.__data__,e=t.delete(i);return this.size=t.size,e}function hee(i){return this.__data__.get(i)}function fee(i){return this.__data__.has(i)}var mee=200;function gee(i,t){var e=this.__data__;if(e instanceof Xo){var n=e.__data__;if(!ef||n.length<mee-1)return n.push([i,t]),this.size=++e.size,this;e=this.__data__=new Jo(n)}return e.set(i,t),this.size=e.size,this}function _r(i){var t=this.__data__=new Xo(i);this.size=t.size}_r.prototype.clear=uee;_r.prototype.delete=dee;_r.prototype.get=hee;_r.prototype.has=fee;_r.prototype.set=gee;function pee(i,t){return i&&td(t,Df(t),i)}function bee(i,t){return i&&td(t,id(t),i)}var aM=typeof fs=="object"&&fs&&!fs.nodeType&&fs,a2=aM&&typeof ms=="object"&&ms&&!ms.nodeType&&ms,wee=a2&&a2.exports===aM,l2=wee?Ir.Buffer:void 0,c2=l2?l2.allocUnsafe:void 0;function lM(i,t){if(t)return i.slice();var e=i.length,n=c2?c2(e):new i.constructor(e);return i.copy(n),n}function vee(i,t){for(var e=-1,n=i==null?0:i.length,s=0,r=[];++e<n;){var o=i[e];t(o,e,i)&&(r[s++]=o)}return r}function cM(){return[]}var yee=Object.prototype,_ee=yee.propertyIsEnumerable,u2=Object.getOwnPropertySymbols,WE=u2?function(i){return i==null?[]:(i=Object(i),vee(u2(i),function(t){return _ee.call(i,t)}))}:cM;function Eee(i,t){return td(i,WE(i),t)}var Cee=Object.getOwnPropertySymbols,uM=Cee?function(i){for(var t=[];i;)XN(t,WE(i)),i=UE(i);return t}:cM;function xee(i,t){return td(i,uM(i),t)}function dM(i,t,e){var n=t(i);return Xi(i)?n:XN(n,e(i))}function By(i){return dM(i,Df,WE)}function Tee(i){return dM(i,id,uM)}var Fy=nc(Ir,"DataView"),$y=nc(Ir,"Promise"),zy=nc(Ir,"Set"),d2="[object Map]",kee="[object Object]",h2="[object Promise]",f2="[object Set]",m2="[object WeakMap]",g2="[object DataView]",See=tc(Fy),Aee=tc(ef),Pee=tc($y),Iee=tc(zy),Ree=tc(Ly),dr=Ka;(Fy&&dr(new Fy(new ArrayBuffer(1)))!=g2||ef&&dr(new ef)!=d2||$y&&dr($y.resolve())!=h2||zy&&dr(new zy)!=f2||Ly&&dr(new Ly)!=m2)&&(dr=function(i){var t=Ka(i),e=t==kee?i.constructor:void 0,n=e?tc(e):"";if(n)switch(n){case See:return g2;case Aee:return d2;case Pee:return h2;case Iee:return f2;case Ree:return m2}return t});var Oee=Object.prototype,Nee=Oee.hasOwnProperty;function Mee(i){var t=i.length,e=new i.constructor(t);return t&&typeof i[0]=="string"&&Nee.call(i,"index")&&(e.index=i.index,e.input=i.input),e}var jp=Ir.Uint8Array;function qE(i){var t=new i.constructor(i.byteLength);return new jp(t).set(new jp(i)),t}function Lee(i,t){var e=t?qE(i.buffer):i.buffer;return new i.constructor(e,i.byteOffset,i.byteLength)}var Vee=/\w*$/;function Dee(i){var t=new i.constructor(i.source,Vee.exec(i));return t.lastIndex=i.lastIndex,t}var p2=ao?ao.prototype:void 0,b2=p2?p2.valueOf:void 0;function Bee(i){return b2?Object(b2.call(i)):{}}function hM(i,t){var e=t?qE(i.buffer):i.buffer;return new i.constructor(e,i.byteOffset,i.length)}var Fee="[object Boolean]",$ee="[object Date]",zee="[object Map]",jee="[object Number]",Hee="[object RegExp]",Uee="[object Set]",Wee="[object String]",qee="[object Symbol]",Gee="[object ArrayBuffer]",Kee="[object DataView]",Yee="[object Float32Array]",Zee="[object Float64Array]",Xee="[object Int8Array]",Jee="[object Int16Array]",Qee="[object Int32Array]",ete="[object Uint8Array]",tte="[object Uint8ClampedArray]",nte="[object Uint16Array]",ite="[object Uint32Array]";function ste(i,t,e){var n=i.constructor;switch(t){case Gee:return qE(i);case Fee:case $ee:return new n(+i);case Kee:return Lee(i,e);case Yee:case Zee:case Xee:case Jee:case Qee:case ete:case tte:case nte:case ite:return hM(i,e);case zee:return new n;case jee:case Wee:return new n(i);case Hee:return Dee(i);case Uee:return new n;case qee:return Bee(i)}}function fM(i){return typeof i.constructor=="function"&&!DE(i)?qX(UE(i)):{}}var rte="[object Map]";function ote(i){return Ws(i)&&dr(i)==rte}var w2=Bu&&Bu.isMap,ate=w2?BE(w2):ote,lte="[object Set]";function cte(i){return Ws(i)&&dr(i)==lte}var v2=Bu&&Bu.isSet,ute=v2?BE(v2):cte,dte=1,hte=2,fte=4,mM="[object Arguments]",mte="[object Array]",gte="[object Boolean]",pte="[object Date]",bte="[object Error]",gM="[object Function]",wte="[object GeneratorFunction]",vte="[object Map]",yte="[object Number]",pM="[object Object]",_te="[object RegExp]",Ete="[object Set]",Cte="[object String]",xte="[object Symbol]",Tte="[object WeakMap]",kte="[object ArrayBuffer]",Ste="[object DataView]",Ate="[object Float32Array]",Pte="[object Float64Array]",Ite="[object Int8Array]",Rte="[object Int16Array]",Ote="[object Int32Array]",Nte="[object Uint8Array]",Mte="[object Uint8ClampedArray]",Lte="[object Uint16Array]",Vte="[object Uint32Array]",Xt={};Xt[mM]=Xt[mte]=Xt[kte]=Xt[Ste]=Xt[gte]=Xt[pte]=Xt[Ate]=Xt[Pte]=Xt[Ite]=Xt[Rte]=Xt[Ote]=Xt[vte]=Xt[yte]=Xt[pM]=Xt[_te]=Xt[Ete]=Xt[Cte]=Xt[xte]=Xt[Nte]=Xt[Mte]=Xt[Lte]=Xt[Vte]=!0;Xt[bte]=Xt[gM]=Xt[Tte]=!1;function xu(i,t,e,n,s,r){var o,a=t&dte,l=t&hte,c=t&fte;if(e&&(o=s?e(i,n,s,r):e(i)),o!==void 0)return o;if(!Yt(i))return i;var h=Xi(i);if(h){if(o=Mee(i),!a)return HN(i,o)}else{var f=dr(i),m=f==gM||f==wte;if(Jh(i))return lM(i,a);if(f==pM||f==mM||m&&!s){if(o=l||m?{}:fM(i),!a)return l?xee(i,bee(o,i)):Eee(i,pee(o,i))}else{if(!Xt[f])return s?i:{};o=ste(i,f,a)}}r||(r=new _r);var p=r.get(i);if(p)return p;r.set(i,o),ute(i)?i.forEach(function(E){o.add(xu(E,t,e,E,i,r))}):ate(i)&&i.forEach(function(E,x){o.set(x,xu(E,t,e,x,i,r))});var v=c?l?Tee:By:l?id:Df,_=h?void 0:v(i);return tJ(_||i,function(E,x){_&&(x=E,E=i[x]),LE(o,x,xu(E,t,e,x,i,r))}),o}var Dte=4;function bM(i){return xu(i,Dte)}var Bte=1,Fte=4;function Rr(i){return xu(i,Bte|Fte)}var $te=1,zte=4;function GE(i,t){return t=typeof t=="function"?t:void 0,xu(i,$te|zte,t)}var jte="__lodash_hash_undefined__";function Hte(i){return this.__data__.set(i,jte),this}function Ute(i){return this.__data__.has(i)}function Hp(i){var t=-1,e=i==null?0:i.length;for(this.__data__=new Jo;++t<e;)this.add(i[t])}Hp.prototype.add=Hp.prototype.push=Hte;Hp.prototype.has=Ute;function Wte(i,t){for(var e=-1,n=i==null?0:i.length;++e<n;)if(t(i[e],e,i))return!0;return!1}function qte(i,t){return i.has(t)}var Gte=1,Kte=2;function wM(i,t,e,n,s,r){var o=e&Gte,a=i.length,l=t.length;if(a!=l&&!(o&&l>a))return!1;var c=r.get(i),h=r.get(t);if(c&&h)return c==t&&h==i;var f=-1,m=!0,p=e&Kte?new Hp:void 0;for(r.set(i,t),r.set(t,i);++f<a;){var v=i[f],_=t[f];if(n)var E=o?n(_,v,f,t,i,r):n(v,_,f,i,t,r);if(E!==void 0){if(E)continue;m=!1;break}if(p){if(!Wte(t,function(x,k){if(!qte(p,k)&&(v===x||s(v,x,e,n,r)))return p.push(k)})){m=!1;break}}else if(!(v===_||s(v,_,e,n,r))){m=!1;break}}return r.delete(i),r.delete(t),m}function Yte(i){var t=-1,e=Array(i.size);return i.forEach(function(n,s){e[++t]=[s,n]}),e}function Zte(i){var t=-1,e=Array(i.size);return i.forEach(function(n){e[++t]=n}),e}var Xte=1,Jte=2,Qte="[object Boolean]",ene="[object Date]",tne="[object Error]",nne="[object Map]",ine="[object Number]",sne="[object RegExp]",rne="[object Set]",one="[object String]",ane="[object Symbol]",lne="[object ArrayBuffer]",cne="[object DataView]",y2=ao?ao.prototype:void 0,o1=y2?y2.valueOf:void 0;function une(i,t,e,n,s,r,o){switch(e){case cne:if(i.byteLength!=t.byteLength||i.byteOffset!=t.byteOffset)return!1;i=i.buffer,t=t.buffer;case lne:return!(i.byteLength!=t.byteLength||!r(new jp(i),new jp(t)));case Qte:case ene:case ine:return Vf(+i,+t);case tne:return i.name==t.name&&i.message==t.message;case sne:case one:return i==t+"";case nne:var a=Yte;case rne:var l=n&Xte;if(a||(a=Zte),i.size!=t.size&&!l)return!1;var c=o.get(i);if(c)return c==t;n|=Jte,o.set(i,t);var h=wM(a(i),a(t),n,s,r,o);return o.delete(i),h;case ane:if(o1)return o1.call(i)==o1.call(t)}return!1}var dne=1,hne=Object.prototype,fne=hne.hasOwnProperty;function mne(i,t,e,n,s,r){var o=e&dne,a=By(i),l=a.length,c=By(t),h=c.length;if(l!=h&&!o)return!1;for(var f=l;f--;){var m=a[f];if(!(o?m in t:fne.call(t,m)))return!1}var p=r.get(i),v=r.get(t);if(p&&v)return p==t&&v==i;var _=!0;r.set(i,t),r.set(t,i);for(var E=o;++f<l;){m=a[f];var x=i[m],k=t[m];if(n)var A=o?n(k,x,m,t,i,r):n(x,k,m,i,t,r);if(!(A===void 0?x===k||s(x,k,e,n,r):A)){_=!1;break}E||(E=m=="constructor")}if(_&&!E){var S=i.constructor,O=t.constructor;S!=O&&"constructor"in i&&"constructor"in t&&!(typeof S=="function"&&S instanceof S&&typeof O=="function"&&O instanceof O)&&(_=!1)}return r.delete(i),r.delete(t),_}var gne=1,_2="[object Arguments]",E2="[object Array]",wg="[object Object]",pne=Object.prototype,C2=pne.hasOwnProperty;function bne(i,t,e,n,s,r){var o=Xi(i),a=Xi(t),l=o?E2:dr(i),c=a?E2:dr(t);l=l==_2?wg:l,c=c==_2?wg:c;var h=l==wg,f=c==wg,m=l==c;if(m&&Jh(i)){if(!Jh(t))return!1;o=!0,h=!1}if(m&&!h)return r||(r=new _r),o||FE(i)?wM(i,t,e,n,s,r):une(i,t,l,e,n,s,r);if(!(e&gne)){var p=h&&C2.call(i,"__wrapped__"),v=f&&C2.call(t,"__wrapped__");if(p||v){var _=p?i.value():i,E=v?t.value():t;return r||(r=new _r),s(_,E,e,n,r)}}return m?(r||(r=new _r),mne(i,t,e,n,s,r)):!1}function Bf(i,t,e,n,s){return i===t?!0:i==null||t==null||!Ws(i)&&!Ws(t)?i!==i&&t!==t:bne(i,t,e,n,Bf,s)}var wne=1,vne=2;function yne(i,t,e,n){var s=e.length,r=s;if(i==null)return!r;for(i=Object(i);s--;){var o=e[s];if(o[2]?o[1]!==i[o[0]]:!(o[0]in i))return!1}for(;++s<r;){o=e[s];var a=o[0],l=i[a],c=o[1];if(o[2]){if(l===void 0&&!(a in i))return!1}else{var h=new _r,f;if(!(f===void 0?Bf(c,l,wne|vne,n,h):f))return!1}}return!0}function vM(i){return i===i&&!Yt(i)}function _ne(i){for(var t=Df(i),e=t.length;e--;){var n=t[e],s=i[n];t[e]=[n,s,vM(s)]}return t}function yM(i,t){return function(e){return e==null?!1:e[i]===t&&(t!==void 0||i in Object(e))}}function Ene(i){var t=_ne(i);return t.length==1&&t[0][2]?yM(t[0][0],t[0][1]):function(e){return e===i||yne(e,i,t)}}function Cne(i,t){return i!=null&&t in Object(i)}function xne(i,t,e){t=Jb(t,i);for(var n=-1,s=t.length,r=!1;++n<s;){var o=sd(t[n]);if(!(r=i!=null&&e(i,o)))break;i=i[o]}return r||++n!=s?r:(s=i==null?0:i.length,!!s&&VE(s)&&Kb(o,s)&&(Xi(i)||zp(i)))}function Tne(i,t){return i!=null&&xne(i,t,Cne)}var kne=1,Sne=2;function Ane(i,t){return $E(i)&&vM(t)?yM(sd(i),t):function(e){var n=Fu(e,i);return n===void 0&&n===t?Tne(e,i):Bf(t,n,kne|Sne)}}function Pne(i){return function(t){return t==null?void 0:t[i]}}function Ine(i){return function(t){return HE(t,i)}}function Rne(i){return $E(i)?Pne(sd(i)):Ine(i)}function _M(i){return typeof i=="function"?i:i==null?Pa:typeof i=="object"?Xi(i)?Ane(i[0],i[1]):Ene(i):Rne(i)}function One(i){return function(t,e,n){for(var s=-1,r=Object(t),o=n(t),a=o.length;a--;){var l=o[++s];if(e(r[l],l,r)===!1)break}return t}}var EM=One();function CM(i,t){return i&&EM(i,t,Df)}function Nne(i,t){return function(e,n){if(e==null)return e;if(!nd(e))return i(e,n);for(var s=e.length,r=-1,o=Object(e);++r<s&&n(o[r],r,o)!==!1;);return e}}var Mne=Nne(CM),a1=function(){return Ir.Date.now()},Lne="Expected a function",Vne=Math.max,Dne=Math.min;function qs(i,t,e){var n,s,r,o,a,l,c=0,h=!1,f=!1,m=!0;if(typeof i!="function")throw new TypeError(Lne);t=QA(t)||0,Yt(e)&&(h=!!e.leading,f="maxWait"in e,r=f?Vne(QA(e.maxWait)||0,t):r,m="trailing"in e?!!e.trailing:m);function p(P){var N=n,L=s;return n=s=void 0,c=P,o=i.apply(L,N),o}function v(P){return c=P,a=setTimeout(x,t),h?p(P):o}function _(P){var N=P-l,L=P-c,M=t-N;return f?Dne(M,r-L):M}function E(P){var N=P-l,L=P-c;return l===void 0||N>=t||N<0||f&&L>=r}function x(){var P=a1();if(E(P))return k(P);a=setTimeout(x,_(P))}function k(P){return a=void 0,m&&n?p(P):(n=s=void 0,o)}function A(){a!==void 0&&clearTimeout(a),c=0,n=l=s=a=void 0}function S(){return a===void 0?o:k(a1())}function O(){var P=a1(),N=E(P);if(n=arguments,s=this,l=P,N){if(a===void 0)return v(l);if(f)return clearTimeout(a),a=setTimeout(x,t),p(l)}return a===void 0&&(a=setTimeout(x,t)),o}return O.cancel=A,O.flush=S,O}function jy(i,t,e){(e!==void 0&&!Vf(i[t],e)||e===void 0&&!(t in i))&&Yb(i,t,e)}function Bne(i){return Ws(i)&&nd(i)}function Hy(i,t){if(!(t==="constructor"&&typeof i[t]=="function")&&t!="__proto__")return i[t]}function Fne(i){return td(i,id(i))}function $ne(i,t,e,n,s,r,o){var a=Hy(i,e),l=Hy(t,e),c=o.get(l);if(c){jy(i,e,c);return}var h=r?r(a,l,e+"",i,t,o):void 0,f=h===void 0;if(f){var m=Xi(l),p=!m&&Jh(l),v=!m&&!p&&FE(l);h=l,m||p||v?Xi(a)?h=a:Bne(a)?h=HN(a):p?(f=!1,h=lM(l,!0)):v?(f=!1,h=hM(l,!0)):h=[]:eo(l)||zp(l)?(h=a,zp(a)?h=Fne(a):(!Yt(a)||ql(a))&&(h=fM(l))):f=!1}f&&(o.set(l,h),s(h,l,n,r,o),o.delete(l)),jy(i,e,h)}function xM(i,t,e,n,s){i!==t&&EM(t,function(r,o){if(s||(s=new _r),Yt(r))$ne(i,t,o,e,xM,n,s);else{var a=n?n(Hy(i,o),r,o+"",i,t,s):void 0;a===void 0&&(a=r),jy(i,o,a)}},id)}function zne(i){var t=i==null?0:i.length;return t?i[t-1]:void 0}var TM=/[\\^$.*+?()[\]{}|]/g,jne=RegExp(TM.source);function Hne(i){return i=jE(i),i&&jne.test(i)?i.replace(TM,"\\$&"):i}function Une(i,t){var e=-1,n=nd(i)?Array(i.length):[];return Mne(i,function(s,r,o){n[++e]=t(s,r,o)}),n}function Wne(i,t){var e=Xi(i)?zN:Une;return e(i,_M(t))}var qne="[object String]";function x2(i){return typeof i=="string"||!Xi(i)&&Ws(i)&&Ka(i)==qne}function Gne(i,t){return t.length<2?i:HE(i,QN(t,0,-1))}function $a(i){return Ws(i)&&i.nodeType===1&&!eo(i)}function Up(i,t){return Bf(i,t)}function Kne(i,t,e){e=typeof e=="function"?e:void 0;var n=e?e(i,t):void 0;return n===void 0?Bf(i,t,void 0,e):!!n}function Yne(i,t){var e={};return t=_M(t),CM(i,function(n,s,r){Yb(e,s,t(n,s,r))}),e}var KE=UN(function(i,t,e){xM(i,t,e)});function Zne(i,t){return t=Jb(t,i),i=Gne(i,t),i==null||delete i[sd(zne(t))]}function Xne(i,t,e,n){if(!Yt(i))return i;t=Jb(t,i);for(var s=-1,r=t.length,o=r-1,a=i;a!=null&&++s<r;){var l=sd(t[s]),c=e;if(l==="__proto__"||l==="constructor"||l==="prototype")return i;if(s!=o){var h=a[l];c=void 0,c===void 0&&(c=Yt(h)?h:Kb(t[s+1])?[]:{})}LE(a,l,c),a=a[l]}return i}function kM(i,t,e){return i==null?i:Xne(i,t,e)}var Jne="Expected a function";function $u(i,t,e){var n=!0,s=!0;if(typeof i!="function")throw new TypeError(Jne);return Yt(e)&&(n="leading"in e?!!e.leading:n,s="trailing"in e?!!e.trailing:s),qs(i,t,{leading:n,maxWait:t,trailing:s})}function Qne(i,t){return i==null?!0:Zne(i,t)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 *//**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */let Uy;try{Uy={window,document}}catch{/* istanbul ignore next -- @preserve */Uy={window:{},document:{}}}var Re=Uy;function eie(){try{return navigator.userAgent.toLowerCase()}catch{return""}}const bl=eie(),Xe={isMac:SM(bl),isWindows:tie(bl),isGecko:nie(bl),isSafari:iie(bl),isiOS:sie(bl),isAndroid:rie(bl),isBlink:oie(bl),get isMediaForcedColors(){return lie()},get isMotionReduced(){return cie()},features:{isRegExpUnicodePropertySupported:aie()}};function SM(i){return i.indexOf("macintosh")>-1}function tie(i){return i.indexOf("windows")>-1}function nie(i){return!!i.match(/gecko\/\d+/)}function iie(i){return i.indexOf(" applewebkit/")>-1&&i.indexOf("chrome")===-1}function sie(i){return!!i.match(/iphone|ipad/i)||SM(i)&&navigator.maxTouchPoints>0}function rie(i){return i.indexOf("android")>-1}function oie(i){return i.indexOf("chrome/")>-1&&i.indexOf("edge/")<0}function aie(){let i=!1;try{i="ć".search(new RegExp("[\\p{L}]","u"))===0}catch{}return i}function lie(){return Re.window.matchMedia?Re.window.matchMedia("(forced-colors: active)").matches:!1}function cie(){return Re.window.matchMedia?Re.window.matchMedia("(prefers-reduced-motion)").matches:!1}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function AM(i,t,e,n){e=e||function(l,c){return l===c};const s=Array.isArray(i)?i:Array.prototype.slice.call(i),r=Array.isArray(t)?t:Array.prototype.slice.call(t),o=uie(s,r,e);return n?hie(o,r.length):die(r,o)}function uie(i,t,e){const n=T2(i,t,e);if(n===-1)return{firstIndex:-1,lastIndexOld:-1,lastIndexNew:-1};const s=k2(i,n),r=k2(t,n),o=T2(s,r,e),a=i.length-o,l=t.length-o;return{firstIndex:n,lastIndexOld:a,lastIndexNew:l}}function T2(i,t,e){for(let n=0;n<Math.max(i.length,t.length);n++)if(i[n]===void 0||t[n]===void 0||!e(i[n],t[n]))return n;return-1}function k2(i,t){return i.slice(t).reverse()}function die(i,t){const e=[],{firstIndex:n,lastIndexOld:s,lastIndexNew:r}=t;return r-n>0&&e.push({index:n,type:"insert",values:i.slice(n,r)}),s-n>0&&e.push({index:n+(r-n),type:"delete",howMany:s-n}),e}function hie(i,t){const{firstIndex:e,lastIndexOld:n,lastIndexNew:s}=i;if(e===-1)return Array(t).fill("equal");let r=[];return e>0&&(r=r.concat(Array(e).fill("equal"))),s-e>0&&(r=r.concat(Array(s-e).fill("insert"))),n-e>0&&(r=r.concat(Array(n-e).fill("delete"))),s<t&&(r=r.concat(Array(t-s).fill("equal"))),r}function Ih(i,t,e){e=e||function(_,E){return _===E};const n=i.length,s=t.length;if(n>200||s>200||n+s>300)return Ih.fastDiff(i,t,e,!0);let r,o;if(s<n){const _=i;i=t,t=_,r="delete",o="insert"}else r="insert",o="delete";const a=i.length,l=t.length,c=l-a,h={},f={};function m(_){const E=(f[_-1]!==void 0?f[_-1]:-1)+1,x=f[_+1]!==void 0?f[_+1]:-1,k=E>x?-1:1;h[_+k]&&(h[_]=h[_+k].slice(0)),h[_]||(h[_]=[]),h[_].push(E>x?r:o);let A=Math.max(E,x),S=A-_;for(;S<a&&A<l&&e(i[S],t[A]);)S++,A++,h[_].push("equal");return A}let p=0,v;do{for(v=-p;v<c;v++)f[v]=m(v);for(v=c+p;v>c;v--)f[v]=m(v);f[c]=m(c),p++}while(f[c]!==l);return h[c].slice(1)}Ih.fastDiff=AM;/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function S2(){return function i(){i.called=!0}}class Uo{constructor(t,e){b(this,"source");b(this,"name");b(this,"path");b(this,"stop");b(this,"off");b(this,"return");this.source=t,this.name=e,this.path=[],this.stop=S2(),this.off=S2()}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const gi=new Array(256).fill("").map((i,t)=>("0"+t.toString(16)).slice(-2));function yi(){const[i,t,e,n]=crypto.getRandomValues(new Uint32Array(4));return"e"+gi[i>>0&255]+gi[i>>8&255]+gi[i>>16&255]+gi[i>>24&255]+gi[t>>0&255]+gi[t>>8&255]+gi[t>>16&255]+gi[t>>24&255]+gi[e>>0&255]+gi[e>>8&255]+gi[e>>16&255]+gi[e>>24&255]+gi[n>>0&255]+gi[n>>8&255]+gi[n>>16&255]+gi[n>>24&255]}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const Na={get(i="normal"){return typeof i!="number"?this[i]||this.normal:i},highest:1e5,high:1e3,normal:0,low:-1e3,lowest:-1e5};function PM(i,t){const e=Na.get(t.priority);let n=0,s=i.length;for(;n<s;){const r=n+s>>1;Na.get(i[r].priority)<e?s=r:n=r+1}i.splice(n,0,t)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const fie="https://ckeditor.com/docs/ckeditor5/latest/support/error-codes.html";class B extends Error{constructor(e,n,s){super(gie(e,s));b(this,"context");b(this,"data");this.name="CKEditorError",this.context=n,this.data=s}is(e){return e==="CKEditorError"}static rethrowUnexpectedError(e,n){if(e.is&&e.is("CKEditorError"))throw e;const s=new B(e.message,n);throw s.stack=e.stack,s}}function Tt(i,t){console.warn(...RM(i,t))}function mie(i,t){console.error(...RM(i,t))}function IM(i){return`
Read more: ${fie}#error-${i}`}function gie(i,t){const e=new WeakSet,s=t?` ${JSON.stringify(t,(o,a)=>{if(typeof a=="object"&&a!==null){if(e.has(a))return`[object ${a.constructor.name}]`;e.add(a)}return a})}`:"",r=IM(i);return i+s+r}function RM(i,t){const e=IM(i);return t?[i,t,e]:[i,e]}const pie="44.3.0",bie=new Date(2025,2,5);/* istanbul ignore next -- @preserve */if(globalThis.CKEDITOR_VERSION)throw new B("ckeditor-duplicated-modules",null);globalThis.CKEDITOR_VERSION=pie;const ou=Symbol("listeningTo"),Wy=Symbol("emitterId"),ko=Symbol("delegations"),OM=Ft(Object);function Ft(i){if(!i)return OM;class t extends i{on(n,s,r){this.listenTo(this,n,s,r)}once(n,s,r){let o=!1;const a=(l,...c)=>{o||(o=!0,l.off(),s.call(this,l,...c))};this.listenTo(this,n,a,r)}off(n,s){this.stopListening(this,n,s)}listenTo(n,s,r,o={}){let a,l;this[ou]||(this[ou]={});const c=this[ou];l1(n)||NM(n);const h=l1(n);(a=c[h])||(a=c[h]={emitter:n,callbacks:{}}),(l=a.callbacks[s])||(l=a.callbacks[s]=[]),l.push(r),Eie(this,n,s,r,o)}stopListening(n,s,r){const o=this[ou];let a=n&&l1(n);const l=o&&a?o[a]:void 0,c=l&&s?l.callbacks[s]:void 0;if(!(!o||n&&!l||s&&!c))if(r)c1(this,n,s,r),c.indexOf(r)!==-1&&(c.length===1?delete l.callbacks[s]:c1(this,n,s,r));else if(c){for(;r=c.pop();)c1(this,n,s,r);delete l.callbacks[s]}else if(l){for(s in l.callbacks)this.stopListening(n,s);delete o[a]}else{for(a in o)this.stopListening(o[a].emitter);delete this[ou]}}fire(n,...s){try{const r=n instanceof Uo?n:new Uo(this,n),o=r.name;let a=_ie(this,o);if(r.path.push(this),a){a=a.slice();for(let c=0;c<a.length;c++){const h=a[c].callback;if(h.call(this,r,...s),r.off.called&&(delete r.off.called,this._removeEventListener(o,h)),r.stop.called)break}}const l=this[ko];if(l){const c=l.get(o),h=l.get("*");c&&A2(c,r,s),h&&A2(h,r,s)}return r.return}catch(r){/* istanbul ignore next -- @preserve */B.rethrowUnexpectedError(r,this)}}delegate(...n){return{to:(s,r)=>{this[ko]||(this[ko]=new Map),n.forEach(o=>{const a=this[ko].get(o);a?a.set(s,r):this[ko].set(o,new Map([[s,r]]))})}}}stopDelegating(n,s){if(this[ko])if(!n)this[ko].clear();else if(!s)this[ko].delete(n);else{const r=this[ko].get(n);r&&r.delete(s)}}_addEventListener(n,s,r){yie(this,n);const o=qy(this,n),a=Na.get(r.priority),l={callback:s,priority:a};for(const c of o)PM(c,l)}_removeEventListener(n,s){const r=qy(this,n);for(const o of r)for(let a=0;a<o.length;a++)o[a].callback==s&&(o.splice(a,1),a--)}}return t}["on","once","off","listenTo","stopListening","fire","delegate","stopDelegating","_addEventListener","_removeEventListener"].forEach(i=>{Ft[i]=OM.prototype[i]});function wie(i,t){const e=i[ou];return e&&e[t]?e[t].emitter:null}function NM(i,t){i[Wy]||(i[Wy]=t||yi())}function l1(i){return i[Wy]}function MM(i){return i._events||Object.defineProperty(i,"_events",{value:{}}),i._events}function vie(){return{callbacks:[],childEvents:[]}}function yie(i,t){const e=MM(i);if(e[t])return;let n=t,s=null;const r=[];for(;n!==""&&!e[n];)e[n]=vie(),r.push(e[n]),s&&e[n].childEvents.push(s),s=n,n=n.substr(0,n.lastIndexOf(":"));if(n!==""){for(const o of r)o.callbacks=e[n].callbacks.slice();e[n].childEvents.push(s)}}function qy(i,t){const e=MM(i)[t];if(!e)return[];let n=[e.callbacks];for(let s=0;s<e.childEvents.length;s++){const r=qy(i,e.childEvents[s]);n=n.concat(r)}return n}function _ie(i,t){if(!i._events)return null;let e=t;do{const n=i._events[e];if(n&&n.callbacks&&n.callbacks.length)return n.callbacks;const s=e.lastIndexOf(":");e=s>-1?e.substring(0,s):""}while(e);return null}function A2(i,t,e){for(let[n,s]of i){s?typeof s=="function"&&(s=s(t.name)):s=t.name;const r=new Uo(t.source,s);r.path=[...t.path],n.fire(r,...e)}}function Eie(i,t,e,n,s){t._addEventListener?t._addEventListener(e,n,s):i._addEventListener.call(t,e,n,s)}function c1(i,t,e,n){t._removeEventListener?t._removeEventListener(e,n):i._removeEventListener.call(t,e,n)}const Rh=Symbol("observableProperties"),tf=Symbol("boundObservables"),Oh=Symbol("boundProperties"),wl=Symbol("decoratedMethods"),P2=Symbol("decoratedOriginal"),LM=Vt(Ft());function Vt(i){var e,n,s,r,o;if(!i)return LM;class t extends(o=i,r=Rh,s=wl,n=Oh,e=tf,o){constructor(){super(...arguments);b(this,r);b(this,s);b(this,n);b(this,e)}set(c,h){if(Yt(c)){Object.keys(c).forEach(m=>{this.set(m,c[m])},this);return}u1(this);const f=this[Rh];if(c in this&&!f.has(c))throw new B("observable-set-cannot-override",this);Object.defineProperty(this,c,{enumerable:!0,configurable:!0,get(){return f.get(c)},set(m){const p=f.get(c);let v=this.fire(`set:${c}`,c,m,p);v===void 0&&(v=m),(p!==v||!f.has(c))&&(f.set(c,v),this.fire(`change:${c}`,c,v,p))}}),this[c]=h}bind(...c){if(!c.length||!I2(c))throw new B("observable-bind-wrong-properties",this);if(new Set(c).size!==c.length)throw new B("observable-bind-duplicate-properties",this);u1(this);const h=this[Oh];c.forEach(m=>{if(h.has(m))throw new B("observable-bind-rebind",this)});const f=new Map;return c.forEach(m=>{const p={property:m,to:[]};h.set(m,p),f.set(m,p)}),{to:Cie,toMany:xie,_observable:this,_bindProperties:c,_to:[],_bindings:f}}unbind(...c){if(!this[Rh])return;const h=this[Oh],f=this[tf];if(c.length){if(!I2(c))throw new B("observable-unbind-wrong-properties",this);c.forEach(m=>{const p=h.get(m);p&&(p.to.forEach(([v,_])=>{const E=f.get(v),x=E[_];x.delete(p),x.size||delete E[_],Object.keys(E).length||(f.delete(v),this.stopListening(v,"change"))}),h.delete(m))})}else f.forEach((m,p)=>{this.stopListening(p,"change")}),f.clear(),h.clear()}decorate(c){u1(this);const h=this[c];if(!h)throw new B("observablemixin-cannot-decorate-undefined",this,{object:this,methodName:c});this.on(c,(f,m)=>{f.return=h.apply(this,m)}),this[c]=function(...f){return this.fire(c,f)},this[c][P2]=h,this[wl]||(this[wl]=[]),this[wl].push(c)}stopListening(c,h,f){if(!c&&this[wl]){for(const m of this[wl])this[m]=this[m][P2];delete this[wl]}super.stopListening(c,h,f)}}return t}["set","bind","unbind","decorate","on","once","off","listenTo","stopListening","fire","delegate","stopDelegating","_addEventListener","_removeEventListener"].forEach(i=>{Vt[i]=LM.prototype[i]});function u1(i){i[Rh]||(Object.defineProperty(i,Rh,{value:new Map}),Object.defineProperty(i,tf,{value:new Map}),Object.defineProperty(i,Oh,{value:new Map}))}function Cie(...i){const t=kie(...i),e=Array.from(this._bindings.keys()),n=e.length;if(!t.callback&&t.to.length>1)throw new B("observable-bind-to-no-callback",this);if(n>1&&t.callback)throw new B("observable-bind-to-extra-callback",this);t.to.forEach(s=>{if(s.properties.length&&s.properties.length!==n)throw new B("observable-bind-to-properties-length",this);s.properties.length||(s.properties=this._bindProperties)}),this._to=t.to,t.callback&&(this._bindings.get(e[0]).callback=t.callback),Pie(this._observable,this._to),Aie(this),this._bindProperties.forEach(s=>{VM(this._observable,s)})}function xie(i,t,e){if(this._bindings.size>1)throw new B("observable-bind-to-many-not-one-binding",this);this.to(...Tie(i,t),e)}function Tie(i,t){const e=i.map(n=>[n,t]);return Array.prototype.concat.apply([],e)}function I2(i){return i.every(t=>typeof t=="string")}function kie(...i){if(!i.length)throw new B("observable-bind-to-parse-error",null);const t={to:[]};let e;return typeof i[i.length-1]=="function"&&(t.callback=i.pop()),i.forEach(n=>{if(typeof n=="string")e.properties.push(n);else if(typeof n=="object")e={observable:n,properties:[]},t.to.push(e);else throw new B("observable-bind-to-parse-error",null)}),t}function Sie(i,t,e,n){const s=i[tf],r=s.get(e),o=r||{};o[n]||(o[n]=new Set),o[n].add(t),r||s.set(e,o)}function Aie(i){let t;i._bindings.forEach((e,n)=>{i._to.forEach(s=>{t=s.properties[e.callback?0:i._bindProperties.indexOf(n)],e.to.push([s.observable,t]),Sie(i._observable,e,s.observable,t)})})}function VM(i,t){const n=i[Oh].get(t);let s;n.callback?s=n.callback.apply(i,n.to.map(r=>r[0][r[1]])):(s=n.to[0],s=s[0][s[1]]),Object.prototype.hasOwnProperty.call(i,t)?i[t]=s:i.set(t,s)}function Pie(i,t){t.forEach(e=>{const n=i[tf];let s;n.get(e.observable)||i.listenTo(e.observable,"change",(r,o)=>{s=n.get(e.observable)[o],s&&s.forEach(a=>{VM(i,a.property)})})})}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class Iie{constructor(){b(this,"_replacedElements");this._replacedElements=[]}replace(t,e){this._replacedElements.push({element:t,newElement:e}),t.style.display="none",e&&t.parentNode.insertBefore(e,t.nextSibling)}restore(){this._replacedElements.forEach(({element:t,newElement:e})=>{t.style.display="",e&&e.remove()}),this._replacedElements=[]}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Gy(i){let t=0;for(const e of i)t++;return t}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function pi(i,t){const e=Math.min(i.length,t.length);for(let n=0;n<e;n++)if(i[n]!=t[n])return n;return i.length==t.length?"same":i.length<t.length?"prefix":"extension"}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Es(i){return!!(i&&i[Symbol.iterator])}function cr(i,t,e={},n=[]){const s=e&&e.xmlns,r=s?i.createElementNS(s,t):i.createElement(t);for(const o in e)r.setAttribute(o,e[o]);(x2(n)||!Es(n))&&(n=[n]);for(let o of n)x2(o)&&(o=i.createTextNode(o)),r.appendChild(o);return r}class DM{constructor(t,e){b(this,"_config");this._config=Object.create(null),e&&this.define(R2(e)),t&&this._setObjectToTarget(this._config,t)}set(t,e){this._setToTarget(this._config,t,e)}define(t,e){this._setToTarget(this._config,t,e,!0)}get(t){return this._getFromSource(this._config,t)}*names(){for(const t of Object.keys(this._config))yield t}_setToTarget(t,e,n,s=!1){if(eo(e)){this._setObjectToTarget(t,e,s);return}const r=e.split(".");e=r.pop();for(const o of r)eo(t[o])||(t[o]=Object.create(null)),t=t[o];if(eo(n)){eo(t[e])||(t[e]=Object.create(null)),t=t[e],this._setObjectToTarget(t,n,s);return}s&&typeof t[e]<"u"||(t[e]=n)}_getFromSource(t,e){const n=e.split(".");e=n.pop();for(const s of n){if(!eo(t[s])){t=null;break}t=t[s]}return t?R2(t[e]):void 0}_setObjectToTarget(t,e,n){Object.keys(e).forEach(s=>{this._setToTarget(t,s,e[s],n)})}}function R2(i){return GE(i,Rie)}function Rie(i){return $a(i)||typeof i=="function"?i:void 0}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function za(i){if(i){if(i.defaultView)return i instanceof i.defaultView.Document;if(i.ownerDocument&&i.ownerDocument.defaultView)return i instanceof i.ownerDocument.defaultView.Node}return!1}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Wp(i){const t=Object.prototype.toString.apply(i);return t=="[object Window]"||t=="[object global]"}const BM=Ri(Ft());function Ri(i){if(!i)return BM;class t extends i{listenTo(n,s,r,o={}){if(za(n)||Wp(n)){const a={capture:!!o.useCapture,passive:!!o.usePassive},l=this._getProxyEmitter(n,a)||new Oie(n,a);this.listenTo(l,s,r,o)}else super.listenTo(n,s,r,o)}stopListening(n,s,r){if(za(n)||Wp(n)){const o=this._getAllProxyEmitters(n);for(const a of o)this.stopListening(a,s,r)}else super.stopListening(n,s,r)}_getProxyEmitter(n,s){return wie(this,FM(n,s))}_getAllProxyEmitters(n){return[{capture:!1,passive:!1},{capture:!1,passive:!0},{capture:!0,passive:!1},{capture:!0,passive:!0}].map(s=>this._getProxyEmitter(n,s)).filter(s=>!!s)}}return t}["_getProxyEmitter","_getAllProxyEmitters","on","once","off","listenTo","stopListening","fire","delegate","stopDelegating","_addEventListener","_removeEventListener"].forEach(i=>{Ri[i]=BM.prototype[i]});class Oie extends Ft(){constructor(e,n){super();b(this,"_domNode");b(this,"_options");b(this,"_domListeners");NM(this,FM(e,n)),this._domNode=e,this._options=n}attach(e){if(this._domListeners&&this._domListeners[e])return;const n=this._createDomListener(e);this._domNode.addEventListener(e,n,this._options),this._domListeners||(this._domListeners={}),this._domListeners[e]=n}detach(e){let n;this._domListeners[e]&&(!(n=this._events[e])||!n.callbacks.length)&&this._domListeners[e].removeListener()}_addEventListener(e,n,s){this.attach(e),Ft().prototype._addEventListener.call(this,e,n,s)}_removeEventListener(e,n){Ft().prototype._removeEventListener.call(this,e,n),this.detach(e)}_createDomListener(e){const n=s=>{this.fire(e,s)};return n.removeListener=()=>{this._domNode.removeEventListener(e,n,this._options),delete this._domListeners[e]},n}}function Nie(i){return i["data-ck-expando"]||(i["data-ck-expando"]=yi())}function FM(i,t){let e=Nie(i);for(const n of Object.keys(t).sort())t[n]&&(e+="-"+n);return e}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Mie(i){const t=[];let e=i;for(;e&&e.nodeType!=Node.DOCUMENT_NODE;)t.unshift(e),e=e.parentNode;return t}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Lie(i){return i instanceof HTMLTextAreaElement?i.value:i.innerHTML}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function $M(i){const t=i.ownerDocument.defaultView.getComputedStyle(i);return{top:parseInt(t.borderTopWidth,10),right:parseInt(t.borderRightWidth,10),bottom:parseInt(t.borderBottomWidth,10),left:parseInt(t.borderLeftWidth,10)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function zM(i){if(!i.target)return null;const t=i.target.ownerDocument,e=i.clientX,n=i.clientY;let s=null;return t.caretRangeFromPoint&&t.caretRangeFromPoint(e,n)?s=t.caretRangeFromPoint(e,n):i.rangeParent&&(s=t.createRange(),s.setStart(i.rangeParent,i.rangeOffset),s.collapse(!0)),s}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function pn(i){return Object.prototype.toString.call(i)=="[object Text]"}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Qb(i){return Object.prototype.toString.apply(i)=="[object Range]"}function jM(i){return!i||!i.parentNode||i.offsetParent===Re.document.body?null:i.offsetParent}const HM=["top","right","bottom","left","width","height"];class at{constructor(t){b(this,"top");b(this,"right");b(this,"bottom");b(this,"left");b(this,"width");b(this,"height");b(this,"_source");const e=Qb(t);if(Object.defineProperty(this,"_source",{value:t._source||t,writable:!0,enumerable:!1}),Ky(t)||e)if(e){const n=at.getDomRangeRects(t);vg(this,at.getBoundingRect(n))}else vg(this,t.getBoundingClientRect());else if(Wp(t)){const{innerWidth:n,innerHeight:s}=t;vg(this,{top:0,right:n,bottom:s,left:0,width:n,height:s})}else vg(this,t)}clone(){return new at(this)}moveTo(t,e){return this.top=e,this.right=t+this.width,this.bottom=e+this.height,this.left=t,this}moveBy(t,e){return this.top+=e,this.right+=t,this.left+=t,this.bottom+=e,this}getIntersection(t){const e={top:Math.max(this.top,t.top),right:Math.min(this.right,t.right),bottom:Math.min(this.bottom,t.bottom),left:Math.max(this.left,t.left),width:0,height:0};if(e.width=e.right-e.left,e.height=e.bottom-e.top,e.width<0||e.height<0)return null;{const n=new at(e);return n._source=this._source,n}}getIntersectionArea(t){const e=this.getIntersection(t);return e?e.getArea():0}getArea(){return this.width*this.height}getVisible(){const t=this._source;let e=this.clone();if(O2(t))return e;let n=t,s=t.parentNode||t.commonAncestorContainer,r;for(;s&&!O2(s);){const o=Vie(s)==="visible";n instanceof HTMLElement&&N2(n)==="absolute"&&(r=n);const a=N2(s);if(o||r&&(a==="relative"&&o||a!=="relative")){n=s,s=s.parentNode;continue}const l=new at(s),c=e.getIntersection(l);if(c)c.getArea()<e.getArea()&&(e=c);else return null;n=s,s=s.parentNode}return e}isEqual(t){for(const e of HM)if(this[e]!==t[e])return!1;return!0}contains(t){const e=this.getIntersection(t);return!!(e&&e.isEqual(t))}toAbsoluteRect(){const{scrollX:t,scrollY:e}=Re.window,n=this.clone().moveBy(t,e);if(Ky(n._source)){const s=jM(n._source);s&&Die(n,s)}return n}excludeScrollbarsAndBorders(){const t=this._source;let e,n,s;if(Wp(t))e=t.innerWidth-t.document.documentElement.clientWidth,n=t.innerHeight-t.document.documentElement.clientHeight,s=t.getComputedStyle(t.document.documentElement).direction;else{const r=$M(t);e=t.offsetWidth-t.clientWidth-r.left-r.right,n=t.offsetHeight-t.clientHeight-r.top-r.bottom,s=t.ownerDocument.defaultView.getComputedStyle(t).direction,this.left+=r.left,this.top+=r.top,this.right-=r.right,this.bottom-=r.bottom,this.width=this.right-this.left,this.height=this.bottom-this.top}return this.width-=e,s==="ltr"?this.right-=e:this.left+=e,this.height-=n,this.bottom-=n,this}static getDomRangeRects(t){const e=[],n=Array.from(t.getClientRects());if(n.length)for(const s of n)e.push(new at(s));else{let s=t.startContainer;pn(s)&&(s=s.parentNode);const r=new at(s.getBoundingClientRect());r.right=r.left,r.width=0,e.push(r)}return e}static getBoundingRect(t){const e={left:Number.POSITIVE_INFINITY,top:Number.POSITIVE_INFINITY,right:Number.NEGATIVE_INFINITY,bottom:Number.NEGATIVE_INFINITY,width:0,height:0};let n=0;for(const s of t)n++,e.left=Math.min(e.left,s.left),e.top=Math.min(e.top,s.top),e.right=Math.max(e.right,s.right),e.bottom=Math.max(e.bottom,s.bottom);return n==0?null:(e.width=e.right-e.left,e.height=e.bottom-e.top,new at(e))}}function vg(i,t){for(const e of HM)i[e]=t[e]}function O2(i){return Ky(i)?i===i.ownerDocument.body:!1}function Ky(i){return i!==null&&typeof i=="object"&&i.nodeType===1&&typeof i.getBoundingClientRect=="function"}function N2(i){return i instanceof HTMLElement?i.ownerDocument.defaultView.getComputedStyle(i).position:"static"}function Vie(i){return i instanceof HTMLElement?i.ownerDocument.defaultView.getComputedStyle(i).overflow:"visible"}function Die(i,t){const e=new at(t),n=$M(t);let s=0,r=0;s-=e.left,r-=e.top,s+=t.scrollLeft,r+=t.scrollTop,s-=n.left,r-=n.top,i.moveBy(s,r)}var Kt;let YE=(Kt=class{constructor(t,e){b(this,"_element");b(this,"_callback");Kt._observerInstance||Kt._createObserver(),this._element=t,this._callback=e,Kt._addElementCallback(t,e),Kt._observerInstance.observe(t)}get element(){return this._element}destroy(){Kt._deleteElementCallback(this._element,this._callback)}static _addElementCallback(t,e){Kt._elementCallbacks||(Kt._elementCallbacks=new Map);let n=Kt._elementCallbacks.get(t);n||(n=new Set,Kt._elementCallbacks.set(t,n)),n.add(e)}static _deleteElementCallback(t,e){const n=Kt._getElementCallbacks(t);n&&(n.delete(e),n.size||(Kt._elementCallbacks.delete(t),Kt._observerInstance.unobserve(t))),Kt._elementCallbacks&&!Kt._elementCallbacks.size&&(Kt._observerInstance=null,Kt._elementCallbacks=null)}static _getElementCallbacks(t){return Kt._elementCallbacks?Kt._elementCallbacks.get(t):null}static _createObserver(){Kt._observerInstance=new Re.window.ResizeObserver(t=>{for(const e of t){const n=Kt._getElementCallbacks(e.target);if(n)for(const s of n)s(e)}})}},b(Kt,"_observerInstance",null),b(Kt,"_elementCallbacks",null),Kt);/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function M2(i,t){i instanceof HTMLTextAreaElement&&(i.value=t),i.innerHTML=t}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Ff(i){return t=>t+i}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function ph(i){let t=0;for(;i.previousSibling;)i=i.previousSibling,t++;return t}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function UM(i,t,e){i.insertBefore(e,i.childNodes[t]||null)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Nh(i){return i&&i.nodeType===Node.COMMENT_NODE}function Bie(i){try{Re.document.createAttribute(i)}catch{return!1}return!0}function Wo(i){return i?pn(i)?Wo(i.parentElement):i.getClientRects?!!i.getClientRects().length:!1:!1}function ZE({element:i,target:t,positions:e,limiter:n,fitInViewport:s,viewportOffsetConfig:r}){ql(t)&&(t=t()),ql(n)&&(n=n());const o=jM(i),a=Fie(r),l=new at(i),c=L2(t,a);let h;if(!c||!a.getIntersection(c))return null;const f={targetRect:c,elementRect:l,positionedElementAncestor:o,viewportRect:a};if(!n&&!s)h=new WM(e[0],f);else{if(n){const m=L2(n,a);m&&(f.limiterRect=m)}h=$ie(e,f)}return h}function L2(i,t){const e=new at(i).getVisible();return e?e.getIntersection(t):null}function Fie(i){i=Object.assign({top:0,bottom:0,left:0,right:0},i);const t=new at(Re.window);return t.top+=i.top,t.height-=i.top,t.bottom-=i.bottom,t.height-=i.bottom,t}function $ie(i,t){const{elementRect:e}=t,n=e.getArea(),s=i.map(a=>new WM(a,t)).filter(a=>!!a.name);let r=0,o=null;for(const a of s){const{limiterIntersectionArea:l,viewportIntersectionArea:c}=a;if(l===n)return a;const h=c**2+l**2;h>r&&(r=h,o=a)}return o}class WM{constructor(t,e){b(this,"name");b(this,"config");b(this,"_positioningFunctionCoordinates");b(this,"_options");b(this,"_cachedRect");b(this,"_cachedAbsoluteRect");const n=t(e.targetRect,e.elementRect,e.viewportRect,e.limiterRect);if(!n)return;const{left:s,top:r,name:o,config:a}=n;this.name=o,this.config=a,this._positioningFunctionCoordinates={left:s,top:r},this._options=e}get left(){return this._absoluteRect.left}get top(){return this._absoluteRect.top}get limiterIntersectionArea(){const t=this._options.limiterRect;return t?t.getIntersectionArea(this._rect):0}get viewportIntersectionArea(){return this._options.viewportRect.getIntersectionArea(this._rect)}get _rect(){return this._cachedRect?this._cachedRect:(this._cachedRect=this._options.elementRect.clone().moveTo(this._positioningFunctionCoordinates.left,this._positioningFunctionCoordinates.top),this._cachedRect)}get _absoluteRect(){return this._cachedAbsoluteRect?this._cachedAbsoluteRect:(this._cachedAbsoluteRect=this._rect.toAbsoluteRect(),this._cachedAbsoluteRect)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function V2(i){const t=i.parentNode;t&&t.removeChild(i)}function zie({target:i,viewportOffset:t=0,ancestorOffset:e=0,alignToTop:n,forceScroll:s}){const r=XE(i);let o=r,a=null;for(t=Uie(t);o;){let l;o==r?l=D2(i):l=D2(a),Hie({parent:l,getRect:()=>d1(i,o),alignToTop:n,ancestorOffset:e,forceScroll:s});let c=d1(i,o);const h=d1(l,o);if(c.height>h.height){const f=c.getIntersection(h);f&&(c=f)}if(jie({window:o,rect:c,viewportOffset:t,alignToTop:n,forceScroll:s}),o.parent!=o){if(a=o.frameElement,o=o.parent,!a)return}else o=null}}function jie({window:i,rect:t,alignToTop:e,forceScroll:n,viewportOffset:s}){const r=t.clone().moveBy(0,s.bottom),o=t.clone().moveBy(0,-s.top),a=new at(i).excludeScrollbarsAndBorders(),l=[o,r],c=e&&n,h=l.every(_=>a.contains(_));let{scrollX:f,scrollY:m}=i;const p=f,v=m;c?m-=a.top-t.top+s.top:h||(GM(o,a)?m-=a.top-t.top+s.top:qM(r,a)&&(e?m+=t.top-a.top-s.top:m+=t.bottom-a.bottom+s.bottom)),h||(KM(t,a)?f-=a.left-t.left+s.left:YM(t,a)&&(f+=t.right-a.right+s.right)),(f!=p||m!==v)&&i.scrollTo(f,m)}function Hie({parent:i,getRect:t,alignToTop:e,forceScroll:n,ancestorOffset:s=0,limiterElement:r}){const o=XE(i),a=e&&n;let l,c,h;const f=r||o.document.body;for(;i!=f;)c=t(),l=new at(i).excludeScrollbarsAndBorders(),h=l.contains(c),a?i.scrollTop-=l.top-c.top+s:h||(GM(c,l)?i.scrollTop-=l.top-c.top+s:qM(c,l)&&(e?i.scrollTop+=c.top-l.top-s:i.scrollTop+=c.bottom-l.bottom+s)),h||(KM(c,l)?i.scrollLeft-=l.left-c.left+s:YM(c,l)&&(i.scrollLeft+=c.right-l.right+s)),i=i.parentNode}function qM(i,t){return i.bottom>t.bottom}function GM(i,t){return i.top<t.top}function KM(i,t){return i.left<t.left}function YM(i,t){return i.right>t.right}function XE(i){return Qb(i)?i.startContainer.ownerDocument.defaultView:i.ownerDocument.defaultView}function D2(i){if(Qb(i)){let t=i.commonAncestorContainer;return pn(t)&&(t=t.parentNode),t}else return i.parentNode}function d1(i,t){const e=XE(i),n=new at(i);if(e===t)return n;{let s=e;for(;s!=t;){const r=s.frameElement,o=new at(r).excludeScrollbarsAndBorders();n.moveBy(o.left,o.top),s=s.parent}}return n}function Uie(i){return typeof i=="number"?{top:i,bottom:i,left:i,right:i}:i}const Wie={ctrl:"⌃",cmd:"⌘",alt:"⌥",shift:"⇧"},qie={ctrl:"Ctrl+",alt:"Alt+",shift:"Shift+"},B2={37:"←",38:"↑",39:"→",40:"↓",9:"⇥",33:"Page Up",34:"Page Down"},gt=Xie(),Gie=Object.fromEntries(Object.entries(gt).map(([i,t])=>{let e;return t in B2?e=B2[t]:e=i.charAt(0).toUpperCase()+i.slice(1),[t,e]}));function Kl(i){let t;if(typeof i=="string"){if(t=gt[i.toLowerCase()],!t)throw new B("keyboard-unknown-key",null,{key:i})}else t=i.keyCode+(i.altKey?gt.alt:0)+(i.ctrlKey?gt.ctrl:0)+(i.shiftKey?gt.shift:0)+(i.metaKey?gt.cmd:0);return t}function ew(i){return typeof i=="string"&&(i=Jie(i)),i.map(t=>typeof t=="string"?Yie(t):t).reduce((t,e)=>e+t,0)}function qp(i,t){let e=ew(i);const n=Xe.isMac||Xe.isiOS;return Object.entries(n?Wie:qie).reduce((o,[a,l])=>(e&gt[a]&&(e&=~gt[a],o+=l),o),"")+(e?Gie[e]:"")}function Kie(i){return i==gt.arrowright||i==gt.arrowleft||i==gt.arrowup||i==gt.arrowdown}function tw(i,t){const e=t==="ltr";switch(i){case gt.arrowleft:return e?"left":"right";case gt.arrowright:return e?"right":"left";case gt.arrowup:return"up";case gt.arrowdown:return"down"}}function Yie(i){if(i.endsWith("!"))return Kl(i.slice(0,-1));const t=Kl(i);return(Xe.isMac||Xe.isiOS)&&t==gt.ctrl?gt.cmd:t}function Zie(i,t){const e=tw(i,t);return e==="down"||e==="right"}function Xie(){const i={pageup:33,pagedown:34,end:35,home:36,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,backspace:8,delete:46,enter:13,space:32,esc:27,tab:9,ctrl:1114112,shift:2228224,alt:4456448,cmd:8912896};for(let t=65;t<=90;t++){const e=String.fromCharCode(t);i[e.toLowerCase()]=t}for(let t=48;t<=57;t++)i[t-48]=t;for(let t=112;t<=123;t++)i["f"+(t-111)]=t;return Object.assign(i,{"'":222,",":108,"-":109,".":110,"/":111,";":186,"=":187,"[":219,"\\":220,"]":221,"`":223}),i}function Jie(i){return i.split("+").map(t=>t.trim())}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const Qie=["ar","ara","dv","div","fa","per","fas","he","heb","ku","kur","ug","uig"];function F2(i){return Qie.includes(i)?"rtl":"ltr"}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Qt(i){return Array.isArray(i)?i:[i]}/* istanbul ignore else -- @preserve */Re.window.CKEDITOR_TRANSLATIONS||(Re.window.CKEDITOR_TRANSLATIONS={});function ese(i,t,e=1,n){if(typeof e!="number")throw new B("translation-service-quantity-not-a-number",null,{quantity:e});const s=n||Re.window.CKEDITOR_TRANSLATIONS,r=ise(s);r===1&&(i=Object.keys(s)[0]);const o=t.id||t.string;if(r===0||!nse(i,o,s))return e!==1?t.plural:t.string;const a=s[i].dictionary,l=s[i].getPluralForm||(f=>f===1?0:1),c=a[o];if(typeof c=="string")return c;const h=Number(l(e));return c[h]}function tse(i){return Array.isArray(i)?i.reduce((t,e)=>KE(t,e)):i}function nse(i,t,e){return!!e[i]&&!!e[i].dictionary[t]}function ise(i){return Object.keys(i).length}class sse{constructor({uiLanguage:t="en",contentLanguage:e,translations:n}={}){b(this,"uiLanguage");b(this,"uiLanguageDirection");b(this,"contentLanguage");b(this,"contentLanguageDirection");b(this,"t");b(this,"translations");this.uiLanguage=t,this.contentLanguage=e||this.uiLanguage,this.uiLanguageDirection=F2(this.uiLanguage),this.contentLanguageDirection=F2(this.contentLanguage),this.translations=tse(n),this.t=(s,r)=>this._t(s,r)}get language(){return console.warn("locale-deprecated-language-property: The Locale#language property has been deprecated and will be removed in the near future. Please use #uiLanguage and #contentLanguage properties instead."),this.uiLanguage}_t(t,e=[]){e=Qt(e),typeof t=="string"&&(t={string:t});const s=!!t.plural?e[0]:1,r=ese(this.uiLanguage,t,s,this.translations);return rse(r,e)}}function rse(i,t){return i.replace(/%(\d+)/g,(e,n)=>n<t.length?t[n]:e)}class oi extends Ft(){constructor(e={},n={}){super();b(this,"_items");b(this,"_itemMap");b(this,"_idProperty");b(this,"_bindToCollection");b(this,"_bindToExternalToInternalMap");b(this,"_bindToInternalToExternalMap");b(this,"_skippedIndexesFromExternal");const s=Es(e);if(s||(n=e),this._items=[],this._itemMap=new Map,this._idProperty=n.idProperty||"id",this._bindToExternalToInternalMap=new WeakMap,this._bindToInternalToExternalMap=new WeakMap,this._skippedIndexesFromExternal=[],s)for(const r of e)this._items.push(r),this._itemMap.set(this._getItemIdBeforeAdding(r),r)}get length(){return this._items.length}get first(){return this._items[0]||null}get last(){return this._items[this.length-1]||null}add(e,n){return this.addMany([e],n)}addMany(e,n){if(n===void 0)n=this._items.length;else if(n>this._items.length||n<0)throw new B("collection-add-item-invalid-index",this);let s=0;for(const r of e){const o=this._getItemIdBeforeAdding(r),a=n+s;this._items.splice(a,0,r),this._itemMap.set(o,r),this.fire("add",r,a),s++}return this.fire("change",{added:e,removed:[],index:n}),this}get(e){let n;if(typeof e=="string")n=this._itemMap.get(e);else if(typeof e=="number")n=this._items[e];else throw new B("collection-get-invalid-arg",this);return n||null}has(e){if(typeof e=="string")return this._itemMap.has(e);{const n=this._idProperty,s=e[n];return s&&this._itemMap.has(s)}}getIndex(e){let n;return typeof e=="string"?n=this._itemMap.get(e):n=e,n?this._items.indexOf(n):-1}remove(e){const[n,s]=this._remove(e);return this.fire("change",{added:[],removed:[n],index:s}),n}map(e,n){return this._items.map(e,n)}forEach(e,n){this._items.forEach(e,n)}find(e,n){return this._items.find(e,n)}filter(e,n){return this._items.filter(e,n)}clear(){this._bindToCollection&&(this.stopListening(this._bindToCollection),this._bindToCollection=null);const e=Array.from(this._items);for(;this.length;)this._remove(0);this.fire("change",{added:[],removed:e,index:0})}bindTo(e){if(this._bindToCollection)throw new B("collection-bind-to-rebind",this);return this._bindToCollection=e,{as:n=>{this._setUpBindToBinding(s=>new n(s))},using:n=>{typeof n=="function"?this._setUpBindToBinding(n):this._setUpBindToBinding(s=>s[n])}}}_setUpBindToBinding(e){const n=this._bindToCollection,s=(r,o,a)=>{const l=n._bindToCollection==this,c=n._bindToInternalToExternalMap.get(o);if(l&&c)this._bindToExternalToInternalMap.set(o,c),this._bindToInternalToExternalMap.set(c,o);else{const h=e(o);if(!h){this._skippedIndexesFromExternal.push(a);return}let f=a;for(const m of this._skippedIndexesFromExternal)a>m&&f--;for(const m of n._skippedIndexesFromExternal)f>=m&&f++;this._bindToExternalToInternalMap.set(o,h),this._bindToInternalToExternalMap.set(h,o),this.add(h,f);for(let m=0;m<n._skippedIndexesFromExternal.length;m++)f<=n._skippedIndexesFromExternal[m]&&n._skippedIndexesFromExternal[m]++}};for(const r of n)s(null,r,n.getIndex(r));this.listenTo(n,"add",s),this.listenTo(n,"remove",(r,o,a)=>{const l=this._bindToExternalToInternalMap.get(o);l&&this.remove(l),this._skippedIndexesFromExternal=this._skippedIndexesFromExternal.reduce((c,h)=>(a<h&&c.push(h-1),a>h&&c.push(h),c),[])})}_getItemIdBeforeAdding(e){const n=this._idProperty;let s;if(n in e){if(s=e[n],typeof s!="string")throw new B("collection-add-invalid-id",this);if(this.get(s))throw new B("collection-add-item-already-exists",this)}else e[n]=s=yi();return s}_remove(e){let n,s,r,o=!1;const a=this._idProperty;if(typeof e=="string"?(s=e,r=this._itemMap.get(s),o=!r,r&&(n=this._items.indexOf(r))):typeof e=="number"?(n=e,r=this._items[n],o=!r,r&&(s=r[a])):(r=e,s=r[a],n=this._items.indexOf(r),o=n==-1||!this._itemMap.get(s)),o)throw new B("collection-remove-404",this);this._items.splice(n,1),this._itemMap.delete(s);const l=this._bindToInternalToExternalMap.get(r);return this._bindToInternalToExternalMap.delete(r),this._bindToExternalToInternalMap.delete(l),this.fire("remove",r,n),[r,n]}[Symbol.iterator](){return this._items[Symbol.iterator]()}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Tn(i){const t=i.next();return t.done?null:t.value}class ln extends Ri(Vt()){constructor(){super();b(this,"_elements",new Set);b(this,"_externalViews",new Set);b(this,"_blurTimeout",null);this.set("isFocused",!1),this.set("focusedElement",null)}get elements(){return Array.from(this._elements.values())}get externalViews(){return Array.from(this._externalViews.values())}add(e){if(z2(e))this._addElement(e);else if($2(e))this._addView(e);else{if(!e.element)throw new B("focustracker-add-view-missing-element",{focusTracker:this,view:e});this._addElement(e.element)}}remove(e){z2(e)?this._removeElement(e):$2(e)?this._removeView(e):this._removeElement(e.element)}_addElement(e){if(this._elements.has(e))throw new B("focustracker-add-element-already-exist",this);this.listenTo(e,"focus",()=>{const n=this.externalViews.find(s=>ose(e,s));n?this._focus(n.element):this._focus(e)},{useCapture:!0}),this.listenTo(e,"blur",()=>{this._blur()},{useCapture:!0}),this._elements.add(e)}_removeElement(e){this._elements.has(e)&&(this.stopListening(e),this._elements.delete(e)),e===this.focusedElement&&this._blur()}_addView(e){e.element&&this._addElement(e.element),this.listenTo(e.focusTracker,"change:focusedElement",()=>{e.focusTracker.focusedElement?e.element&&this._focus(e.element):this._blur()}),this._externalViews.add(e)}_removeView(e){e.element&&this._removeElement(e.element),this.stopListening(e.focusTracker),this._externalViews.delete(e)}destroy(){this.stopListening(),this._elements.clear(),this._externalViews.clear(),this.isFocused=!1,this.focusedElement=null}_focus(e){this._clearBlurTimeout(),this.focusedElement=e,this.isFocused=!0}_blur(){this.elements.find(s=>s.contains(document.activeElement))||this.externalViews.find(s=>s.focusTracker.isFocused&&!s.focusTracker._blurTimeout)||(this._clearBlurTimeout(),this._blurTimeout=setTimeout(()=>{this.focusedElement=null,this.isFocused=!1},0))}_clearBlurTimeout(){clearTimeout(this._blurTimeout),this._blurTimeout=null}}function $2(i){return"focusTracker"in i&&i.focusTracker instanceof ln}function z2(i){return $a(i)}function ose(i,t){return j2(i,t)?!0:!!t.focusTracker.externalViews.find(e=>j2(i,e))}function j2(i,t){return!!t.element&&t.element.contains(document.activeElement)&&i.contains(t.element)}class wn{constructor(){b(this,"_listener");this._listener=new(Ri())}listenTo(t){this._listener.listenTo(t,"keydown",(e,n)=>{this._listener.fire("_keydown:"+Kl(n),n)})}set(t,e,n={}){const s=ew(t),r=n.priority;this._listener.listenTo(this._listener,"_keydown:"+s,(o,a)=>{n.filter&&!n.filter(a)||(e(a,()=>{a.preventDefault(),a.stopPropagation(),o.stop()}),o.return=!0)},{priority:r})}press(t){return!!this._listener.fire("_keydown:"+Kl(t),t)}stopListening(t){this._listener.stopListening(t)}destroy(){this.stopListening()}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function ase(i){const t=new Map;for(const e in i)t.set(e,i[e]);return t}function xr(i){return Es(i)?new Map(i):ase(i)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function H2(i,t,e){const n=i.length,s=t.length;for(let r=n-1;r>=e;r--)i[r+s]=i[r];for(let r=0;r<s;r++)i[e+r]=t[r]}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function JE(i,t){let e;function n(...s){n.cancel(),e=setTimeout(()=>i(...s),t)}return n.cancel=()=>{clearTimeout(e)},n}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function QE(i){try{if(!i.startsWith("ey"))return null;const t=atob(i.replace(/-/g,"+").replace(/_/g,"/"));return JSON.parse(t)}catch{return null}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function lse(){const i=[];for(let t=0;t<256;t++){let e=t;for(let n=0;n<8;n++)e&1?e=3988292384^e>>>1:e=e>>>1;i[t]=e}return i}function cse(i){const t=Array.isArray(i)?i:[i],e=lse();let n=-1;const s=t.map(r=>Array.isArray(r)?r.join(""):String(r)).join("");for(let r=0;r<s.length;r++){const o=s.charCodeAt(r);n=n>>>8^e[(n^o)&255]}return n=(n^-1)>>>0,n.toString(16).padStart(8,"0")}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function use(i){return!!i&&i.length==1&&/[\u0300-\u036f\u1ab0-\u1aff\u1dc0-\u1dff\u20d0-\u20ff\ufe20-\ufe2f]/.test(i)}function dse(i){return!!i&&i.length==1&&/[\ud800-\udbff]/.test(i)}function hse(i){return!!i&&i.length==1&&/[\udc00-\udfff]/.test(i)}function eC(i,t){return dse(i.charAt(t-1))&&hse(i.charAt(t))}function tC(i,t){return use(i.charAt(t))}const fse=mse();function ZM(i,t){const e=String(i).matchAll(fse);return Array.from(e).some(n=>n.index<t&&t<n.index+n[0].length)}function mse(){const i=[new RegExp("\\p{Emoji}[\\u{E0020}-\\u{E007E}]+\\u{E007F}","u"),new RegExp("\\p{Emoji}\\u{FE0F}?\\u{20E3}","u"),new RegExp("\\p{Emoji}\\u{FE0F}","u"),new RegExp("(?=\\p{General_Category=Other_Symbol})\\p{Emoji}\\p{Emoji_Modifier}*","u")],t=new RegExp("\\p{Regional_Indicator}{2}","u").source,e="(?:"+i.map(s=>s.source).join("|")+")",n=`${t}|${e}(?:‍${e})*`;return new RegExp(n,"ug")}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const Jd=new WeakMap;let U2=!1;function nC({view:i,element:t,text:e,isDirectHost:n=!0,keepOnFocus:s=!1}){const r=i.document;Jd.has(r)||(Jd.set(r,new Map),r.registerPostFixer(a=>h1(Jd.get(r),a)),r.on("change:isComposing",()=>{i.change(a=>h1(Jd.get(r),a))},{priority:"high"})),t.is("editableElement")&&t.on("change:placeholder",(a,l,c)=>o(c)),t.placeholder?o(t.placeholder):e&&o(e),e&&yse();function o(a){const l={text:a,isDirectHost:n,keepOnFocus:s,hostElement:n?t:null};Jd.get(r).set(t,l),i.change(c=>h1([[t,l]],c))}}function gse(i,t){return t.hasClass("ck-placeholder")?!1:(i.addClass("ck-placeholder",t),!0)}function pse(i,t){return t.hasClass("ck-placeholder")?(i.removeClass("ck-placeholder",t),!0):!1}function bse(i,t){if(!i.isAttached()||wse(i))return!1;const e=i.document,s=e.selection.anchor;return e.isComposing&&s&&s.parent===i?!1:t||!e.isFocused?!0:!!s&&s.parent!==i}function wse(i){for(const t of i.getChildren())if(!t.is("uiElement"))return!0;return!1}function h1(i,t){const e=[];let n=!1;for(const[s,r]of i)r.isDirectHost&&(e.push(s),W2(t,s,r)&&(n=!0));for(const[s,r]of i){if(r.isDirectHost)continue;const o=vse(s);o&&(e.includes(o)||(r.hostElement=o,W2(t,s,r)&&(n=!0)))}return n}function W2(i,t,e){const{text:n,isDirectHost:s,hostElement:r}=e;let o=!1;return r.getAttribute("data-placeholder")!==n&&(i.setAttribute("data-placeholder",n,r),o=!0),(s||t.childCount==1)&&bse(r,e.keepOnFocus)?gse(i,r)&&(o=!0):pse(i,r)&&(o=!0),o}function vse(i){if(i.childCount){const t=i.getChild(0);if(t.is("element")&&!t.is("uiElement")&&!t.is("attributeElement"))return t}return null}function yse(){U2||Tt("enableplaceholder-deprecated-text-option"),U2=!0}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */let ic=class{is(){throw new Error("is() method is abstract")}},sc=class extends Ft(ic){constructor(e){super();b(this,"document");b(this,"parent");this.document=e,this.parent=null}get index(){let e;if(!this.parent)return null;if((e=this.parent.getChildIndex(this))==-1)throw new B("view-node-not-found-in-parent",this);return e}get nextSibling(){const e=this.index;return e!==null&&this.parent.getChild(e+1)||null}get previousSibling(){const e=this.index;return e!==null&&this.parent.getChild(e-1)||null}get root(){let e=this;for(;e.parent;)e=e.parent;return e}isAttached(){return this.root.is("rootElement")}getPath(){const e=[];let n=this;for(;n.parent;)e.unshift(n.index),n=n.parent;return e}getAncestors(e={}){const n=[];let s=e.includeSelf?this:this.parent;for(;s;)n[e.parentFirst?"push":"unshift"](s),s=s.parent;return n}getCommonAncestor(e,n={}){const s=this.getAncestors(n),r=e.getAncestors(n);let o=0;for(;s[o]==r[o]&&s[o];)o++;return o===0?null:s[o-1]}isBefore(e){if(this==e||this.root!==e.root)return!1;const n=this.getPath(),s=e.getPath(),r=pi(n,s);switch(r){case"prefix":return!0;case"extension":return!1;default:return n[r]<s[r]}}isAfter(e){return this==e||this.root!==e.root?!1:!this.isBefore(e)}_remove(){this.parent._removeChildren(this.index)}_fireChange(e,n,s){this.fire(`change:${e}`,n,s),this.parent&&this.parent._fireChange(e,n,s)}toJSON(){const e=bM(this);return delete e.parent,e}};sc.prototype.is=function(i){return i==="node"||i==="view:node"};let si=class Yy extends sc{constructor(e,n){super(e);b(this,"_textData");this._textData=n}get data(){return this._textData}get _data(){return this.data}set _data(e){this._fireChange("text",this),this._textData=e}isSimilar(e){return e instanceof Yy?this===e||this.data===e.data:!1}_clone(){return new Yy(this.document,this.data)}};si.prototype.is=function(i){return i==="$text"||i==="view:$text"||i==="text"||i==="view:text"||i==="node"||i==="view:node"};let Oo=class extends ic{constructor(e,n,s){super();b(this,"textNode");b(this,"data");b(this,"offsetInText");if(this.textNode=e,n<0||n>e.data.length)throw new B("view-textproxy-wrong-offsetintext",this);if(s<0||n+s>e.data.length)throw new B("view-textproxy-wrong-length",this);this.data=e.data.substring(n,n+s),this.offsetInText=n}get offsetSize(){return this.data.length}get isPartial(){return this.data.length!==this.textNode.data.length}get parent(){return this.textNode.parent}get root(){return this.textNode.root}get document(){return this.textNode.document}getAncestors(e={}){const n=[];let s=e.includeSelf?this.textNode:this.parent;for(;s!==null;)n[e.parentFirst?"push":"unshift"](s),s=s.parent;return n}};Oo.prototype.is=function(i){return i==="$textProxy"||i==="view:$textProxy"||i==="textProxy"||i==="view:textProxy"};class Gp{constructor(){b(this,"_consumables",new Map)}add(t,e){let n;if(t.is("$text")||t.is("documentFragment")){this._consumables.set(t,!0);return}this._consumables.has(t)?n=this._consumables.get(t):(n=new _se(t),this._consumables.set(t,n)),n.add(e?bh(e):t._getConsumables())}test(t,e){const n=this._consumables.get(t);return n===void 0?null:t.is("$text")||t.is("documentFragment")?n:n.test(bh(e))}consume(t,e){if(t.is("$text")||t.is("documentFragment"))return this.test(t,e)?(this._consumables.set(t,!1),!0):!1;const n=this._consumables.get(t);return n===void 0?!1:n.consume(bh(e))}revert(t,e){const n=this._consumables.get(t);n!==void 0&&(t.is("$text")||t.is("documentFragment")?this._consumables.set(t,!0):n.revert(bh(e)))}static createFrom(t,e){if(e||(e=new Gp),t.is("$text"))e.add(t);else if(t.is("element")||t.is("documentFragment")){e.add(t);for(const n of t.getChildren())Gp.createFrom(n,e)}return e}}class _se{constructor(t){b(this,"element");b(this,"_canConsumeName",null);b(this,"_attributes",new Map);this.element=t}add(t){t.name&&(this._canConsumeName=!0);for(const[e,n]of t.attributes)if(n){let s=this._attributes.get(e);(!s||typeof s=="boolean")&&(s=new Map,this._attributes.set(e,s)),s.set(n,!0)}else{if(e=="style"||e=="class")throw new B("viewconsumable-invalid-attribute",this);this._attributes.set(e,!0)}}test(t){if(t.name&&!this._canConsumeName)return this._canConsumeName;for(const[e,n]of t.attributes){const s=this._attributes.get(e);if(s===void 0)return null;if(s===!1)return!1;if(s!==!0){if(n){const r=s.get(n);if(r===void 0)return null;if(!r)return!1}else for(const r of s.values())if(!r)return!1}}return!0}consume(t){if(!this.test(t))return!1;t.name&&(this._canConsumeName=!1);for(const[e,n]of t.attributes){const s=this._attributes.get(e);if(typeof s=="boolean")for(const[r]of this.element._getConsumables(e,n).attributes)this._attributes.set(r,!1);else if(n)for(const[,r]of this.element._getConsumables(e,n).attributes)s.set(r,!1);else for(const r of s.keys())s.set(r,!1)}return!0}revert(t){t.name&&(this._canConsumeName=!0);for(const[e,n]of t.attributes){const s=this._attributes.get(e);if(s===!1){this._attributes.set(e,!0);continue}if(!(s===void 0||s===!0))if(n)s.get(n)===!1&&s.set(n,!0);else for(const r of s.keys())s.set(r,!0)}}}function bh(i){const t=[];return"attributes"in i&&i.attributes&&f1(t,i.attributes),"classes"in i&&i.classes&&f1(t,i.classes,"class"),"styles"in i&&i.styles&&f1(t,i.styles,"style"),{name:i.name||!1,attributes:t}}function f1(i,t,e){if(typeof t=="string"){i.push(e?[e,t]:[t]);return}for(const n of t)Array.isArray(n)?i.push(n):i.push(e?[e,n]:[n])}class Cs{constructor(...t){b(this,"_patterns",[]);this.add(...t)}add(...t){for(let e of t)(typeof e=="string"||e instanceof RegExp)&&(e={name:e}),this._patterns.push(e)}match(...t){for(const e of t)for(const n of this._patterns){const s=this._isElementMatching(e,n);if(s)return{element:e,pattern:n,match:s}}return null}matchAll(...t){const e=[];for(const n of t)for(const s of this._patterns){const r=this._isElementMatching(n,s);r&&e.push({element:n,pattern:s,match:r})}return e.length>0?e:null}getElementName(){if(this._patterns.length!==1)return null;const t=this._patterns[0],e=t.name;return typeof t!="function"&&e&&!(e instanceof RegExp)?e:null}_isElementMatching(t,e){if(typeof e=="function"){const r=e(t);return!r||typeof r!="object"?r:bh(r)}const n={};if(e.name&&(n.name=Ese(e.name,t.name),!n.name))return null;const s=[];return e.attributes&&!Cse(e.attributes,t,s)||e.classes&&!xse(e.classes,t,s)||e.styles&&!Tse(e.styles,t,s)?null:(s.length&&(n.attributes=s),n)}}function Kp(i,t){return i===!0||i===t||i instanceof RegExp&&!!String(t).match(i)}function Ese(i,t){return i instanceof RegExp?!!t.match(i):i===t}function iC(i,t){if(Array.isArray(i))return i.map(n=>typeof n!="object"||n instanceof RegExp?t?[t,n,!0]:[n,!0]:((n.key===void 0||n.value===void 0)&&Tt("matcher-pattern-missing-key-or-value",n),t?[t,n.key,n.value]:[n.key,n.value]));if(typeof i!="object"||i instanceof RegExp)return[t?[t,i,!0]:[i,!0]];const e=[];for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.push(t?[t,n,i[n]]:[n,i[n]]);return e}function Cse(i,t,e){let n;return typeof i=="object"&&!(i instanceof RegExp)&&!Array.isArray(i)?(i.style!==void 0&&Tt("matcher-pattern-deprecated-attributes-style-key",i),i.class!==void 0&&Tt("matcher-pattern-deprecated-attributes-class-key",i)):n=["class","style"],t._collectAttributesMatch(iC(i),e,n)}function xse(i,t,e){return t._collectAttributesMatch(iC(i,"class"),e)}function Tse(i,t,e){return t._collectAttributesMatch(iC(i,"style"),e)}class Mh{constructor(t){b(this,"_styles");b(this,"_cachedStyleNames",null);b(this,"_cachedExpandedStyleNames",null);b(this,"_styleProcessor");this._styles={},this._styleProcessor=t}get isEmpty(){return!Object.entries(this._styles).length}get size(){return this.isEmpty?0:this.getStyleNames().length}setTo(t){this.clear();const e=Sse(t);for(const[n,s]of e)this._styleProcessor.toNormalizedForm(n,s,this._styles);return this}has(t){if(this.isEmpty)return!1;const n=this._styleProcessor.getReducedForm(t,this._styles).find(([s])=>s===t);return Array.isArray(n)}set(t,e){if(this._cachedStyleNames=null,this._cachedExpandedStyleNames=null,Yt(t))for(const[n,s]of Object.entries(t))this._styleProcessor.toNormalizedForm(n,s,this._styles);else this._styleProcessor.toNormalizedForm(t,e,this._styles)}remove(t){for(const e of Qt(t)){this._cachedStyleNames=null,this._cachedExpandedStyleNames=null;const n=Zy(e);Qne(this._styles,n),delete this._styles[e],this._cleanEmptyObjectsOnPath(n)}}getNormalized(t){return this._styleProcessor.getNormalized(t,this._styles)}toString(){return this.isEmpty?"":this.getStylesEntries().map(t=>t.join(":")).sort().join(";")+";"}getAsString(t){if(this.isEmpty)return;if(this._styles[t]&&!Yt(this._styles[t]))return this._styles[t];const n=this._styleProcessor.getReducedForm(t,this._styles).find(([s])=>s===t);if(Array.isArray(n))return n[1]}getStyleNames(t=!1){return this.isEmpty?[]:t?(this._cachedExpandedStyleNames=this._cachedExpandedStyleNames||this._styleProcessor.getStyleNames(this._styles),this._cachedExpandedStyleNames):(this._cachedStyleNames=this._cachedStyleNames||this.getStylesEntries().map(([e])=>e),this._cachedStyleNames)}keys(){return this.getStyleNames()}clear(){this._styles={},this._cachedStyleNames=null,this._cachedExpandedStyleNames=null}isSimilar(t){if(this.size!==t.size)return!1;for(const e of this.getStyleNames())if(!t.has(e)||t.getAsString(e)!==this.getAsString(e))return!1;return!0}getStylesEntries(){const t=[],e=Object.keys(this._styles);for(const n of e)t.push(...this._styleProcessor.getReducedForm(n,this._styles));return t}_clone(){const t=new this.constructor(this._styleProcessor);return t.set(this.getNormalized()),t}_getTokensMatch(t,e){const n=[];for(const s of this.getStyleNames(!0))if(Kp(t,s)){if(e===!0){n.push(s);continue}const r=this.getAsString(s);Kp(e,r)&&n.push(s)}return n.length?n:void 0}_getConsumables(t){const e=[];if(t){e.push(t);for(const n of this._styleProcessor.getRelatedStyles(t))e.push(n)}else for(const n of this.getStyleNames()){for(const s of this._styleProcessor.getRelatedStyles(n))e.push(s);e.push(n)}return e}_canMergeFrom(t){for(const e of t.getStyleNames())if(this.has(e)&&this.getAsString(e)!==t.getAsString(e))return!1;return!0}_mergeFrom(t){for(const e of t.getStyleNames())this.has(e)||this.set(e,t.getAsString(e))}_isMatching(t){for(const e of t.getStyleNames())if(!this.has(e)||this.getAsString(e)!==t.getAsString(e))return!1;return!0}_cleanEmptyObjectsOnPath(t){const e=t.split(".");if(!(e.length>1))return;const s=e.splice(0,e.length-1).join("."),r=Fu(this._styles,s);if(!r)return;!Object.keys(r).length&&this.remove(s)}}class kse{constructor(){b(this,"_normalizers");b(this,"_extractors");b(this,"_reducers");b(this,"_consumables");this._normalizers=new Map,this._extractors=new Map,this._reducers=new Map,this._consumables=new Map}toNormalizedForm(t,e,n){if(Yt(e)){m1(n,Zy(t),e);return}if(this._normalizers.has(t)){const s=this._normalizers.get(t),{path:r,value:o}=s(e);m1(n,r,o)}else m1(n,t,e)}getNormalized(t,e){if(!t)return KE({},e);if(e[t]!==void 0)return e[t];if(this._extractors.has(t)){const n=this._extractors.get(t);if(typeof n=="string")return Fu(e,n);const s=n(t,e);if(s)return s}return Fu(e,Zy(t))}getReducedForm(t,e){const n=this.getNormalized(t,e);return n===void 0?[]:this._reducers.has(t)?this._reducers.get(t)(n):[[t,n]]}getStyleNames(t){const e=new Set;for(const n of this._consumables.keys()){const s=this.getNormalized(n,t);s&&(typeof s!="object"||Object.keys(s).length)&&e.add(n)}for(const n of Object.keys(t))e.add(n);return Array.from(e)}getRelatedStyles(t){return this._consumables.get(t)||[]}setNormalizer(t,e){this._normalizers.set(t,e)}setExtractor(t,e){this._extractors.set(t,e)}setReducer(t,e){this._reducers.set(t,e)}setStyleRelation(t,e){this._mapStyleNames(t,e);for(const n of e)this._mapStyleNames(n,[t])}_mapStyleNames(t,e){this._consumables.has(t)||this._consumables.set(t,[]),this._consumables.get(t).push(...e)}}function Sse(i){let t=null,e=0,n=0,s=null;const r=new Map;if(i==="")return r;i.charAt(i.length-1)!=";"&&(i=i+";");for(let o=0;o<i.length;o++){const a=i.charAt(o);if(t===null)switch(a){case":":s||(s=i.substr(e,o-e),n=o+1);break;case'"':case"'":t=a;break;case";":{const l=i.substr(n,o-n);s&&r.set(s.trim(),l.trim()),s=null,e=o+1;break}}else a===t&&(t=null)}return r}function Zy(i){return i.replace("-",".")}function m1(i,t,e){let n=e;Yt(e)&&(n=KE({},Fu(i,t),e)),kM(i,t,n)}class g1{constructor(){b(this,"_set",new Set)}get isEmpty(){return this._set.size==0}get size(){return this._set.size}has(t){return this._set.has(t)}keys(){return Array.from(this._set.keys())}setTo(t){this.clear();for(const e of t.split(/\s+/))e&&this._set.add(e);return this}set(t){for(const e of Qt(t))e&&this._set.add(e)}remove(t){for(const e of Qt(t))this._set.delete(e)}clear(){this._set.clear()}toString(){return Array.from(this._set).join(" ")}isSimilar(t){if(this.size!==t.size)return!1;for(const e of this.keys())if(!t.has(e))return!1;return!0}_clone(){const t=new this.constructor;return t._set=new Set(this._set),t}_getTokensMatch(t){const e=[];if(t===!0){for(const n of this._set.keys())e.push(n);return e}if(typeof t=="string"){for(const n of t.split(/\s+/))if(this._set.has(n))e.push(n);else return;return e}for(const n of this._set.keys())n.match(t)&&e.push(n);return e.length?e:void 0}_getConsumables(t){return t?[t]:this.keys()}_canMergeFrom(){return!0}_mergeFrom(t){for(const e of t._set.keys())this._set.has(e)||this._set.add(e)}_isMatching(t){for(const e of t._set.keys())if(!this._set.has(e))return!1;return!0}}let qo=class XM extends sc{constructor(e,n,s,r){super(e);b(this,"name");b(this,"_unsafeAttributesToRender",[]);b(this,"_attrs");b(this,"_children");b(this,"_customProperties",new Map);this.name=n,this._attrs=this._parseAttributes(s),this._children=[],r&&this._insertChild(0,r)}get _classes(){return this._attrs.get("class")}get _styles(){return this._attrs.get("style")}get childCount(){return this._children.length}get isEmpty(){return this._children.length===0}getChild(e){return this._children[e]}getChildIndex(e){return this._children.indexOf(e)}getChildren(){return this._children[Symbol.iterator]()}*getAttributeKeys(){this._classes&&(yield"class"),this._styles&&(yield"style");for(const e of this._attrs.keys())e!="class"&&e!="style"&&(yield e)}*getAttributes(){for(const[e,n]of this._attrs.entries())yield[e,String(n)]}getAttribute(e){return this._attrs.has(e)?String(this._attrs.get(e)):void 0}hasAttribute(e,n){return this._attrs.has(e)?n!==void 0?Kc(this.name,e)||Qd(this.name,e)?this._attrs.get(e).has(n):this._attrs.get(e)===n:!0:!1}isSimilar(e){if(!(e instanceof XM))return!1;if(this===e)return!0;if(this.name!=e.name||this._attrs.size!==e._attrs.size)return!1;for(const[n,s]of this._attrs){const r=e._attrs.get(n);if(r===void 0)return!1;if(typeof s=="string"||typeof r=="string"){if(r!==s)return!1}else if(!s.isSimilar(r))return!1}return!0}hasClass(...e){for(const n of e)if(!this._classes||!this._classes.has(n))return!1;return!0}getClassNames(){const e=this._classes?this._classes.keys():[],n=e[Symbol.iterator]();return Object.assign(e,{next:n.next.bind(n)})}getStyle(e){return this._styles&&this._styles.getAsString(e)}getNormalizedStyle(e){return this._styles&&this._styles.getNormalized(e)}getStyleNames(e){return this._styles?this._styles.getStyleNames(e):[]}hasStyle(...e){for(const n of e)if(!this._styles||!this._styles.has(n))return!1;return!0}findAncestor(...e){const n=new Cs(...e);let s=this.parent;for(;s&&!s.is("documentFragment");){if(n.match(s))return s;s=s.parent}return null}getCustomProperty(e){return this._customProperties.get(e)}*getCustomProperties(){yield*this._customProperties.entries()}getIdentity(){const e=this._classes?this._classes.keys().sort().join(","):"",n=this._styles&&String(this._styles),s=Array.from(this._attrs).filter(([r])=>r!="style"&&r!="class").map(r=>`${r[0]}="${r[1]}"`).sort().join(" ");return this.name+(e==""?"":` class="${e}"`)+(n?` style="${n}"`:"")+(s==""?"":` ${s}`)}shouldRenderUnsafeAttribute(e){return this._unsafeAttributesToRender.includes(e)}_clone(e=!1){const n=[];if(e)for(const r of this.getChildren())n.push(r._clone(e));const s=new this.constructor(this.document,this.name,this._attrs,n);return s._customProperties=new Map(this._customProperties),s.getFillerOffset=this.getFillerOffset,s._unsafeAttributesToRender=this._unsafeAttributesToRender,s}_appendChild(e){return this._insertChild(this.childCount,e)}_insertChild(e,n){this._fireChange("children",this,{index:e});let s=0;const r=Ase(this.document,n);for(const o of r)o.parent!==null&&o._remove(),o.parent=this,o.document=this.document,this._children.splice(e,0,o),e++,s++;return s}_removeChildren(e,n=1){this._fireChange("children",this,{index:e});for(let s=e;s<e+n;s++)this._children[s].parent=null;return this._children.splice(e,n)}_setAttribute(e,n,s=!0){if(this._fireChange("attributes",this),Kc(this.name,e)||Qd(this.name,e)){let r=this._attrs.get(e);r||(r=Kc(this.name,e)?new Mh(this.document.stylesProcessor):new g1,this._attrs.set(e,r)),s?r.setTo(String(n)):Kc(this.name,e)?Array.isArray(n)?r.set(n[0],n[1]):r.set(n):r.set(typeof n=="string"?n.split(/\s+/):n)}else this._attrs.set(e,String(n))}_removeAttribute(e,n){if(this._fireChange("attributes",this),n!==void 0&&(Kc(this.name,e)||Qd(this.name,e))){const s=this._attrs.get(e);return s?(Qd(this.name,e)&&typeof n=="string"&&(n=n.split(/\s+/)),s.remove(n),s.isEmpty?this._attrs.delete(e):!1):!1}return this._attrs.delete(e)}_addClass(e){this._setAttribute("class",e,!1)}_removeClass(e){this._removeAttribute("class",e)}_setStyle(e,n){typeof e!="string"?this._setAttribute("style",e,!1):this._setAttribute("style",[e,n],!1)}_removeStyle(e){this._removeAttribute("style",e)}_collectAttributesMatch(e,n,s){for(const[r,o,a]of e){let l=!1,c=!1;for(const[h,f]of this._attrs)if(!(s&&s.includes(h)||!Kp(r,h)))if(l=!0,typeof f=="string"){if(Kp(o,f))n.push([h]),c=!0;else if(!(r instanceof RegExp))return!1}else{const m=f._getTokensMatch(o,a||!0);if(m){c=!0;for(const p of m)n.push([h,p])}else if(!(r instanceof RegExp))return!1}if(!l||!c)return!1}return!0}_getConsumables(e,n){const s=[];if(e){const r=this._attrs.get(e);if(r!==void 0)if(typeof r=="string")s.push([e]);else for(const o of r._getConsumables(n))s.push([e,o])}else for(const[r,o]of this._attrs)if(typeof o=="string")s.push([r]);else for(const a of o._getConsumables())s.push([r,a]);return{name:!e,attributes:s}}_canMergeAttributesFrom(e){if(this.name!=e.name)return!1;for(const[n,s]of e._attrs){const r=this._attrs.get(n);if(r!==void 0){if(typeof r=="string"||typeof s=="string"){if(r!==s)return!1}else if(!r._canMergeFrom(s))return!1}}return!0}_mergeAttributesFrom(e){this._fireChange("attributes",this);for(const[n,s]of e._attrs){const r=this._attrs.get(n);r===void 0||typeof r=="string"||typeof s=="string"?this._setAttribute(n,s):r._mergeFrom(s)}}_canSubtractAttributesOf(e){if(this.name!=e.name)return!1;for(const[n,s]of e._attrs){const r=this._attrs.get(n);if(r===void 0)return!1;if(typeof r=="string"||typeof s=="string"){if(r!==s)return!1}else if(!r._isMatching(s))return!1}return!0}_subtractAttributesOf(e){this._fireChange("attributes",this);for(const[n,s]of e._attrs){const r=this._attrs.get(n);typeof r=="string"||typeof s=="string"?this._attrs.delete(n):(r.remove(s.keys()),r.isEmpty&&this._attrs.delete(n))}}_setCustomProperty(e,n){this._customProperties.set(e,n)}_removeCustomProperty(e){return this._customProperties.delete(e)}_parseAttributes(e){const n=xr(e);for(const[s,r]of n)if(r===null)n.delete(s);else if(Kc(this.name,s)){const o=r instanceof Mh?r._clone():new Mh(this.document.stylesProcessor).setTo(String(r));n.set(s,o)}else if(Qd(this.name,s)){const o=r instanceof g1?r._clone():new g1().setTo(String(r));n.set(s,o)}else typeof r!="string"&&n.set(s,String(r));return n}};qo.prototype.is=function(i,t){return t?t===this.name&&(i==="element"||i==="view:element"):i==="element"||i==="view:element"||i==="node"||i==="view:node"};function Ase(i,t){if(typeof t=="string")return[new si(i,t)];Es(t)||(t=[t]);const e=[];for(const n of t)typeof n=="string"?e.push(new si(i,n)):n instanceof Oo?e.push(new si(i,n.data)):e.push(n);return e}function Qd(i,t){return t=="class"||i=="a"&&t=="rel"}function Kc(i,t){return t=="style"}class nf extends qo{constructor(t,e,n,s){super(t,e,n,s),this.getFillerOffset=Pse}}nf.prototype.is=function(i,t){return t?t===this.name&&(i==="containerElement"||i==="view:containerElement"||i==="element"||i==="view:element"):i==="containerElement"||i==="view:containerElement"||i==="element"||i==="view:element"||i==="node"||i==="view:node"};function Pse(){const i=[...this.getChildren()],t=i[this.childCount-1];if(t&&t.is("element","br"))return this.childCount;for(const e of i)if(!e.is("uiElement"))return null;return this.childCount}class nw extends Vt(nf){constructor(t,e,n,s){super(t,e,n,s),this.set("isReadOnly",!1),this.set("isFocused",!1),this.set("placeholder",void 0),this.bind("isReadOnly").to(t),this.bind("isFocused").to(t,"isFocused",r=>r&&t.selection.editableElement==this),this.listenTo(t.selection,"change",()=>{this.isFocused=t.isFocused&&t.selection.editableElement==this})}destroy(){this.stopListening()}}nw.prototype.is=function(i,t){return t?t===this.name&&(i==="editableElement"||i==="view:editableElement"||i==="containerElement"||i==="view:containerElement"||i==="element"||i==="view:element"):i==="editableElement"||i==="view:editableElement"||i==="containerElement"||i==="view:containerElement"||i==="element"||i==="view:element"||i==="node"||i==="view:node"};const q2=Symbol("rootName");class JM extends nw{constructor(t,e){super(t,e),this.rootName="main"}get rootName(){return this.getCustomProperty(q2)}set rootName(t){this._setCustomProperty(q2,t)}set _name(t){this.name=t}}JM.prototype.is=function(i,t){return t?t===this.name&&(i==="rootElement"||i==="view:rootElement"||i==="editableElement"||i==="view:editableElement"||i==="containerElement"||i==="view:containerElement"||i==="element"||i==="view:element"):i==="rootElement"||i==="view:rootElement"||i==="editableElement"||i==="view:editableElement"||i==="containerElement"||i==="view:containerElement"||i==="element"||i==="view:element"||i==="node"||i==="view:node"};let Il=class{constructor(t={}){b(this,"direction");b(this,"boundaries");b(this,"singleCharacters");b(this,"shallow");b(this,"ignoreElementEnd");b(this,"_position");b(this,"_boundaryStartParent");b(this,"_boundaryEndParent");if(!t.boundaries&&!t.startPosition)throw new B("view-tree-walker-no-start-position",null);if(t.direction&&t.direction!="forward"&&t.direction!="backward")throw new B("view-tree-walker-unknown-direction",t.startPosition,{direction:t.direction});this.boundaries=t.boundaries||null,t.startPosition?this._position=Pe._createAt(t.startPosition):this._position=Pe._createAt(t.boundaries[t.direction=="backward"?"end":"start"]),this.direction=t.direction||"forward",this.singleCharacters=!!t.singleCharacters,this.shallow=!!t.shallow,this.ignoreElementEnd=!!t.ignoreElementEnd,this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null,this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null}[Symbol.iterator](){return this}get position(){return this._position}skip(t){let e,n;do n=this.position,e=this.next();while(!e.done&&t(e.value));e.done||(this._position=n)}jumpTo(t){this._boundaryStartParent&&t.isBefore(this.boundaries.start)?t=this.boundaries.start:this._boundaryEndParent&&t.isAfter(this.boundaries.end)&&(t=this.boundaries.end),this._position=t.clone()}next(){return this.direction=="forward"?this._next():this._previous()}_next(){let t=this.position.clone();const e=this.position,n=t.parent;if(n.parent===null&&t.offset===n.childCount)return{done:!0,value:void 0};if(n===this._boundaryEndParent&&t.offset==this.boundaries.end.offset)return{done:!0,value:void 0};let s;if(n&&n.is("view:$text")){if(t.isAtEnd)return this._position=Pe._createAfter(n),this._next();s=n.data[t.offset]}else s=n.getChild(t.offset);if(typeof s=="string"){let r;this.singleCharacters?r=1:r=(n===this._boundaryEndParent?this.boundaries.end.offset:n.data.length)-t.offset;const o=new Oo(n,t.offset,r);return t.offset+=r,this._position=t,this._formatReturnValue("text",o,e,t,r)}if(s&&s.is("view:element")){if(!this.shallow)t=new Pe(s,0);else{if(this.boundaries&&this.boundaries.end.isBefore(t))return{done:!0,value:void 0};t.offset++}return this._position=t,this._formatReturnValue("elementStart",s,e,t,1)}if(s&&s.is("view:$text")){if(this.singleCharacters)return t=new Pe(s,0),this._position=t,this._next();let r=s.data.length,o;return s==this._boundaryEndParent?(r=this.boundaries.end.offset,o=new Oo(s,0,r),t=Pe._createAfter(o)):(o=new Oo(s,0,s.data.length),t.offset++),this._position=t,this._formatReturnValue("text",o,e,t,r)}return t=Pe._createAfter(n),this._position=t,this.ignoreElementEnd?this._next():this._formatReturnValue("elementEnd",n,e,t)}_previous(){let t=this.position.clone();const e=this.position,n=t.parent;if(n.parent===null&&t.offset===0)return{done:!0,value:void 0};if(n==this._boundaryStartParent&&t.offset==this.boundaries.start.offset)return{done:!0,value:void 0};let s;if(n.is("view:$text")){if(t.isAtStart)return this._position=Pe._createBefore(n),this._previous();s=n.data[t.offset-1]}else s=n.getChild(t.offset-1);if(typeof s=="string"){let r;if(this.singleCharacters)r=1;else{const a=n===this._boundaryStartParent?this.boundaries.start.offset:0;r=t.offset-a}t.offset-=r;const o=new Oo(n,t.offset,r);return this._position=t,this._formatReturnValue("text",o,e,t,r)}if(s&&s.is("view:element"))return this.shallow?(t.offset--,this._position=t,this._formatReturnValue("elementStart",s,e,t,1)):(t=new Pe(s,s.childCount),this._position=t,this.ignoreElementEnd?this._previous():this._formatReturnValue("elementEnd",s,e,t));if(s&&s.is("view:$text")){if(this.singleCharacters)return t=new Pe(s,s.data.length),this._position=t,this._previous();let r=s.data.length,o;if(s==this._boundaryStartParent){const a=this.boundaries.start.offset;o=new Oo(s,a,s.data.length-a),r=o.data.length,t=Pe._createBefore(o)}else o=new Oo(s,0,s.data.length),t.offset--;return this._position=t,this._formatReturnValue("text",o,e,t,r)}return t=Pe._createBefore(n),this._position=t,this._formatReturnValue("elementStart",n,e,t,1)}_formatReturnValue(t,e,n,s,r){return e.is("view:$textProxy")&&(e.offsetInText+e.data.length==e.textNode.data.length&&(this.direction=="forward"&&!(this.boundaries&&this.boundaries.end.isEqual(this.position))?(s=Pe._createAfter(e.textNode),this._position=s):n=Pe._createAfter(e.textNode)),e.offsetInText===0&&(this.direction=="backward"&&!(this.boundaries&&this.boundaries.start.isEqual(this.position))?(s=Pe._createBefore(e.textNode),this._position=s):n=Pe._createBefore(e.textNode))),{done:!1,value:{type:t,item:e,previousPosition:n,nextPosition:s,length:r}}}},Pe=class Po extends ic{constructor(e,n){super();b(this,"parent");b(this,"offset");this.parent=e,this.offset=n}get nodeAfter(){return this.parent.is("$text")?null:this.parent.getChild(this.offset)||null}get nodeBefore(){return this.parent.is("$text")?null:this.parent.getChild(this.offset-1)||null}get isAtStart(){return this.offset===0}get isAtEnd(){const e=this.parent.is("$text")?this.parent.data.length:this.parent.childCount;return this.offset===e}get root(){return this.parent.root}get editableElement(){let e=this.parent;for(;!(e instanceof nw);)if(e.parent)e=e.parent;else return null;return e}getShiftedBy(e){const n=Po._createAt(this),s=n.offset+e;return n.offset=s<0?0:s,n}getLastMatchingPosition(e,n={}){n.startPosition=this;const s=new Il(n);return s.skip(e),s.position}getAncestors(){return this.parent.is("documentFragment")?[this.parent]:this.parent.getAncestors({includeSelf:!0})}getCommonAncestor(e){const n=this.getAncestors(),s=e.getAncestors();let r=0;for(;n[r]==s[r]&&n[r];)r++;return r===0?null:n[r-1]}isEqual(e){return this.parent==e.parent&&this.offset==e.offset}isBefore(e){return this.compareWith(e)=="before"}isAfter(e){return this.compareWith(e)=="after"}compareWith(e){if(this.root!==e.root)return"different";if(this.isEqual(e))return"same";const n=this.parent.is("node")?this.parent.getPath():[],s=e.parent.is("node")?e.parent.getPath():[];n.push(this.offset),s.push(e.offset);const r=pi(n,s);switch(r){case"prefix":return"before";case"extension":return"after";default:return n[r]<s[r]?"before":"after"}}getWalker(e={}){return e.startPosition=this,new Il(e)}clone(){return new Po(this.parent,this.offset)}static _createAt(e,n){if(e instanceof Po)return new this(e.parent,e.offset);{const s=e;if(n=="end")n=s.is("$text")?s.data.length:s.childCount;else{if(n=="before")return this._createBefore(s);if(n=="after")return this._createAfter(s);if(n!==0&&!n)throw new B("view-createpositionat-offset-required",s)}return new Po(s,n)}}static _createAfter(e){if(e.is("$textProxy"))return new Po(e.textNode,e.offsetInText+e.data.length);if(!e.parent)throw new B("view-position-after-root",e,{root:e});return new Po(e.parent,e.index+1)}static _createBefore(e){if(e.is("$textProxy"))return new Po(e.textNode,e.offsetInText);if(!e.parent)throw new B("view-position-before-root",e,{root:e});return new Po(e.parent,e.index)}};Pe.prototype.is=function(i){return i==="position"||i==="view:position"};let vt=class Ta extends ic{constructor(e,n=null){super();b(this,"start");b(this,"end");this.start=e.clone(),this.end=n?n.clone():e.clone()}*[Symbol.iterator](){yield*new Il({boundaries:this,ignoreElementEnd:!0})}get isCollapsed(){return this.start.isEqual(this.end)}get isFlat(){return this.start.parent===this.end.parent}get root(){return this.start.root}getEnlarged(){let e=this.start.getLastMatchingPosition(yg,{direction:"backward"}),n=this.end.getLastMatchingPosition(yg);return e.parent.is("$text")&&e.isAtStart&&(e=Pe._createBefore(e.parent)),n.parent.is("$text")&&n.isAtEnd&&(n=Pe._createAfter(n.parent)),new Ta(e,n)}getTrimmed(){let e=this.start.getLastMatchingPosition(yg);if(e.isAfter(this.end)||e.isEqual(this.end))return new Ta(e,e);let n=this.end.getLastMatchingPosition(yg,{direction:"backward"});const s=e.nodeAfter,r=n.nodeBefore;return s&&s.is("$text")&&(e=new Pe(s,0)),r&&r.is("$text")&&(n=new Pe(r,r.data.length)),new Ta(e,n)}isEqual(e){return this==e||this.start.isEqual(e.start)&&this.end.isEqual(e.end)}containsPosition(e){return e.isAfter(this.start)&&e.isBefore(this.end)}containsRange(e,n=!1){e.isCollapsed&&(n=!1);const s=this.containsPosition(e.start)||n&&this.start.isEqual(e.start),r=this.containsPosition(e.end)||n&&this.end.isEqual(e.end);return s&&r}getDifference(e){const n=[];return this.isIntersecting(e)?(this.containsPosition(e.start)&&n.push(new Ta(this.start,e.start)),this.containsPosition(e.end)&&n.push(new Ta(e.end,this.end))):n.push(this.clone()),n}getIntersection(e){if(this.isIntersecting(e)){let n=this.start,s=this.end;return this.containsPosition(e.start)&&(n=e.start),this.containsPosition(e.end)&&(s=e.end),new Ta(n,s)}return null}getWalker(e={}){return e.boundaries=this,new Il(e)}getCommonAncestor(){return this.start.getCommonAncestor(this.end)}getContainedElement(){if(this.isCollapsed)return null;let e=this.start.nodeAfter,n=this.end.nodeBefore;return this.start.parent.is("$text")&&this.start.isAtEnd&&this.start.parent.nextSibling&&(e=this.start.parent.nextSibling),this.end.parent.is("$text")&&this.end.isAtStart&&this.end.parent.previousSibling&&(n=this.end.parent.previousSibling),e&&e.is("element")&&e===n?e:null}clone(){return new Ta(this.start,this.end)}*getItems(e={}){e.boundaries=this,e.ignoreElementEnd=!0;const n=new Il(e);for(const s of n)yield s.item}*getPositions(e={}){e.boundaries=this;const n=new Il(e);yield n.position;for(const s of n)yield s.nextPosition}isIntersecting(e){return this.start.isBefore(e.end)&&this.end.isAfter(e.start)}static _createFromParentsAndOffsets(e,n,s,r){return new this(new Pe(e,n),new Pe(s,r))}static _createFromPositionAndShift(e,n){const s=e,r=e.getShiftedBy(n);return n>0?new this(s,r):new this(r,s)}static _createIn(e){return this._createFromParentsAndOffsets(e,0,e,e.childCount)}static _createOn(e){const n=e.is("$textProxy")?e.offsetSize:1;return this._createFromPositionAndShift(Pe._createBefore(e),n)}};vt.prototype.is=function(i){return i==="range"||i==="view:range"};function yg(i){return!!(i.item.is("attributeElement")||i.item.is("uiElement"))}let Fo=class QM extends Ft(ic){constructor(...e){super();b(this,"_ranges");b(this,"_lastRangeBackward");b(this,"_isFake");b(this,"_fakeSelectionLabel");this._ranges=[],this._lastRangeBackward=!1,this._isFake=!1,this._fakeSelectionLabel="",e.length&&this.setTo(...e)}get isFake(){return this._isFake}get fakeSelectionLabel(){return this._fakeSelectionLabel}get anchor(){if(!this._ranges.length)return null;const e=this._ranges[this._ranges.length-1];return(this._lastRangeBackward?e.end:e.start).clone()}get focus(){if(!this._ranges.length)return null;const e=this._ranges[this._ranges.length-1];return(this._lastRangeBackward?e.start:e.end).clone()}get isCollapsed(){return this.rangeCount===1&&this._ranges[0].isCollapsed}get rangeCount(){return this._ranges.length}get isBackward(){return!this.isCollapsed&&this._lastRangeBackward}get editableElement(){return this.anchor?this.anchor.editableElement:null}*getRanges(){for(const e of this._ranges)yield e.clone()}getFirstRange(){let e=null;for(const n of this._ranges)(!e||n.start.isBefore(e.start))&&(e=n);return e?e.clone():null}getLastRange(){let e=null;for(const n of this._ranges)(!e||n.end.isAfter(e.end))&&(e=n);return e?e.clone():null}getFirstPosition(){const e=this.getFirstRange();return e?e.start.clone():null}getLastPosition(){const e=this.getLastRange();return e?e.end.clone():null}isEqual(e){if(this.isFake!=e.isFake||this.isFake&&this.fakeSelectionLabel!=e.fakeSelectionLabel||this.rangeCount!=e.rangeCount)return!1;if(this.rangeCount===0)return!0;if(!this.anchor.isEqual(e.anchor)||!this.focus.isEqual(e.focus))return!1;for(const n of this._ranges){let s=!1;for(const r of e._ranges)if(n.isEqual(r)){s=!0;break}if(!s)return!1}return!0}isSimilar(e){if(this.isBackward!=e.isBackward)return!1;const n=Gy(this.getRanges()),s=Gy(e.getRanges());if(n!=s)return!1;if(n==0)return!0;for(let r of this.getRanges()){r=r.getTrimmed();let o=!1;for(let a of e.getRanges())if(a=a.getTrimmed(),r.start.isEqual(a.start)&&r.end.isEqual(a.end)){o=!0;break}if(!o)return!1}return!0}getSelectedElement(){return this.rangeCount!==1?null:this.getFirstRange().getContainedElement()}setTo(...e){let[n,s,r]=e;if(typeof s=="object"&&(r=s,s=void 0),n===null)this._setRanges([]),this._setFakeOptions(r);else if(n instanceof QM||n instanceof sC)this._setRanges(n.getRanges(),n.isBackward),this._setFakeOptions({fake:n.isFake,label:n.fakeSelectionLabel});else if(n instanceof vt)this._setRanges([n],r&&r.backward),this._setFakeOptions(r);else if(n instanceof Pe)this._setRanges([new vt(n)]),this._setFakeOptions(r);else if(n instanceof sc){const o=!!r&&!!r.backward;let a;if(s===void 0)throw new B("view-selection-setto-required-second-parameter",this);s=="in"?a=vt._createIn(n):s=="on"?a=vt._createOn(n):a=new vt(Pe._createAt(n,s)),this._setRanges([a],o),this._setFakeOptions(r)}else if(Es(n))this._setRanges(n,r&&r.backward),this._setFakeOptions(r);else throw new B("view-selection-setto-not-selectable",this);this.fire("change")}setFocus(e,n){if(this.anchor===null)throw new B("view-selection-setfocus-no-ranges",this);const s=Pe._createAt(e,n);if(s.compareWith(this.focus)=="same")return;const r=this.anchor;this._ranges.pop(),s.compareWith(r)=="before"?this._addRange(new vt(s,r),!0):this._addRange(new vt(r,s)),this.fire("change")}_setRanges(e,n=!1){e=Array.from(e),this._ranges=[];for(const s of e)this._addRange(s);this._lastRangeBackward=!!n}_setFakeOptions(e={}){this._isFake=!!e.fake,this._fakeSelectionLabel=e.fake&&e.label||""}_addRange(e,n=!1){if(!(e instanceof vt))throw new B("view-selection-add-range-not-range",this);this._pushRange(e),this._lastRangeBackward=!!n}_pushRange(e){for(const n of this._ranges)if(e.isIntersecting(n))throw new B("view-selection-range-intersects",this,{addedRange:e,intersectingRange:n});this._ranges.push(new vt(e.start,e.end))}};Fo.prototype.is=function(i){return i==="selection"||i==="view:selection"};let sC=class extends Ft(ic){constructor(...e){super();b(this,"_selection");this._selection=new Fo,this._selection.delegate("change").to(this),e.length&&this._selection.setTo(...e)}get isFake(){return this._selection.isFake}get fakeSelectionLabel(){return this._selection.fakeSelectionLabel}get anchor(){return this._selection.anchor}get focus(){return this._selection.focus}get isCollapsed(){return this._selection.isCollapsed}get rangeCount(){return this._selection.rangeCount}get isBackward(){return this._selection.isBackward}get editableElement(){return this._selection.editableElement}get _ranges(){return this._selection._ranges}*getRanges(){yield*this._selection.getRanges()}getFirstRange(){return this._selection.getFirstRange()}getLastRange(){return this._selection.getLastRange()}getFirstPosition(){return this._selection.getFirstPosition()}getLastPosition(){return this._selection.getLastPosition()}getSelectedElement(){return this._selection.getSelectedElement()}isEqual(e){return this._selection.isEqual(e)}isSimilar(e){return this._selection.isSimilar(e)}_setTo(...e){this._selection.setTo(...e)}_setFocus(e,n){this._selection.setFocus(e,n)}};sC.prototype.is=function(i){return i==="selection"||i=="documentSelection"||i=="view:selection"||i=="view:documentSelection"};class rd extends Uo{constructor(e,n,s){super(e,n);b(this,"startRange");b(this,"_eventPhase");b(this,"_currentTarget");this.startRange=s,this._eventPhase="none",this._currentTarget=null}get eventPhase(){return this._eventPhase}get currentTarget(){return this._currentTarget}}const p1=Symbol("bubbling contexts");function Xy(i){class t extends i{fire(n,...s){try{const r=n instanceof Uo?n:new Uo(this,n),o=b1(this);if(!o.size)return;if(eh(r,"capturing",this),Yc(o,"$capture",r,...s))return r.return;const a=r.startRange||this.selection.getFirstRange(),l=a?a.getContainedElement():null,c=l?!!e4(o,l):!1;let h=l||Ise(a);if(eh(r,"atTarget",h),!c){if(Yc(o,"$text",r,...s))return r.return;eh(r,"bubbling",h)}for(;h;){if(h.is("rootElement")){if(Yc(o,"$root",r,...s))return r.return}else if(h.is("element")&&Yc(o,h.name,r,...s))return r.return;if(Yc(o,h,r,...s))return r.return;h=h.parent,eh(r,"bubbling",h)}return eh(r,"bubbling",this),Yc(o,"$document",r,...s),r.return}catch(r){/* istanbul ignore next -- @preserve */B.rethrowUnexpectedError(r,this)}}_addEventListener(n,s,r){const o=Qt(r.context||"$document"),a=b1(this);for(const l of o){let c=a.get(l);c||(c=new(Ft()),a.set(l,c)),this.listenTo(c,n,s,r)}}_removeEventListener(n,s){const r=b1(this);for(const o of r.values())this.stopListening(o,n,s)}}return t}{const i=Xy(Object);["fire","_addEventListener","_removeEventListener"].forEach(t=>{Xy[t]=i.prototype[t]})}function eh(i,t,e){i instanceof rd&&(i._eventPhase=t,i._currentTarget=e)}function Yc(i,t,e,...n){const s=typeof t=="string"?i.get(t):e4(i,t);return s?(s.fire(e,...n),e.stop.called):!1}function e4(i,t){for(const[e,n]of i)if(typeof e=="function"&&e(t))return n;return null}function b1(i){return i[p1]||(i[p1]=new Map),i[p1]}function Ise(i){if(!i)return null;const t=i.start.parent,e=i.end.parent,n=t.getPath(),s=e.getPath();return n.length>s.length?t:e}let iw=class extends Xy(Vt()){constructor(e){super();b(this,"selection");b(this,"roots");b(this,"stylesProcessor");b(this,"_postFixers",new Set);this.selection=new sC,this.roots=new oi({idProperty:"rootName"}),this.stylesProcessor=e,this.set("isReadOnly",!1),this.set("isFocused",!1),this.set("isSelecting",!1),this.set("isComposing",!1)}getRoot(e="main"){return this.roots.get(e)}registerPostFixer(e){this._postFixers.add(e)}destroy(){this.roots.forEach(e=>e.destroy()),this.stopListening()}_callPostFixers(e){let n=!1;do for(const s of this._postFixers)if(n=s(e),n)break;while(n)}};const G2=10;class Vl extends qo{constructor(e,n,s,r){super(e,n,s,r);b(this,"_priority",G2);b(this,"_id",null);b(this,"_clonesGroup",null);this.getFillerOffset=Rse}get priority(){return this._priority}get id(){return this._id}getElementsWithSameId(){if(this.id===null)throw new B("attribute-element-get-elements-with-same-id-no-id",this);return new Set(this._clonesGroup)}isSimilar(e){return this.id!==null||e.id!==null?this.id===e.id:super.isSimilar(e)&&this.priority==e.priority}_clone(e=!1){const n=super._clone(e);return n._priority=this._priority,n._id=this._id,n}_canMergeAttributesFrom(e){return this.id!==null||e.id!==null||this.priority!==e.priority?!1:super._canMergeAttributesFrom(e)}_canSubtractAttributesOf(e){return this.id!==null||e.id!==null||this.priority!==e.priority?!1:super._canSubtractAttributesOf(e)}}b(Vl,"DEFAULT_PRIORITY",G2);Vl.prototype.is=function(i,t){return t?t===this.name&&(i==="attributeElement"||i==="view:attributeElement"||i==="element"||i==="view:element"):i==="attributeElement"||i==="view:attributeElement"||i==="element"||i==="view:element"||i==="node"||i==="view:node"};function Rse(){if(w1(this))return null;let i=this.parent;for(;i&&i.is("attributeElement");){if(w1(i)>1)return null;i=i.parent}return!i||w1(i)>1?null:this.childCount}function w1(i){return Array.from(i.getChildren()).filter(t=>!t.is("uiElement")).length}class rC extends qo{constructor(t,e,n,s){super(t,e,n,s),this.getFillerOffset=Ose}_insertChild(t,e){if(e&&(e instanceof sc||Array.from(e).length>0))throw new B("view-emptyelement-cannot-add",[this,e]);return 0}}rC.prototype.is=function(i,t){return t?t===this.name&&(i==="emptyElement"||i==="view:emptyElement"||i==="element"||i==="view:element"):i==="emptyElement"||i==="view:emptyElement"||i==="element"||i==="view:element"||i==="node"||i==="view:node"};function Ose(){return null}class sw extends qo{constructor(t,e,n,s){super(t,e,n,s),this.getFillerOffset=Mse}_insertChild(t,e){if(e&&(e instanceof sc||Array.from(e).length>0))throw new B("view-uielement-cannot-add",[this,e]);return 0}render(t,e){return this.toDomElement(t)}toDomElement(t){const e=t.createElement(this.name);for(const n of this.getAttributeKeys())e.setAttribute(n,this.getAttribute(n));return e}}sw.prototype.is=function(i,t){return t?t===this.name&&(i==="uiElement"||i==="view:uiElement"||i==="element"||i==="view:element"):i==="uiElement"||i==="view:uiElement"||i==="element"||i==="view:element"||i==="node"||i==="view:node"};function Nse(i){i.document.on("arrowKey",(t,e)=>Lse(t,e,i.domConverter),{priority:"low"})}function Mse(){return null}function Lse(i,t,e){if(t.keyCode==gt.arrowright){const n=t.domTarget.ownerDocument.defaultView.getSelection(),s=n.rangeCount==1&&n.getRangeAt(0).collapsed;if(s||t.shiftKey){const r=n.focusNode,o=n.focusOffset,a=e.domPositionToView(r,o);if(a===null)return;let l=!1;const c=a.getLastMatchingPosition(h=>(h.item.is("uiElement")&&(l=!0),!!(h.item.is("uiElement")||h.item.is("attributeElement"))));if(l){const h=e.viewPositionToDom(c);s?n.collapse(h.parent,h.offset):n.extend(h.parent,h.offset)}}}}class oC extends qo{constructor(t,e,n,s){super(t,e,n,s),this.getFillerOffset=Vse}_insertChild(t,e){if(e&&(e instanceof sc||Array.from(e).length>0))throw new B("view-rawelement-cannot-add",[this,e]);return 0}render(t,e){}}oC.prototype.is=function(i,t){return t?t===this.name&&(i==="rawElement"||i==="view:rawElement"||i==="element"||i==="view:element"):i==="rawElement"||i==="view:rawElement"||i===this.name||i==="view:"+this.name||i==="element"||i==="view:element"||i==="node"||i==="view:node"};function Vse(){return null}let Dl=class extends Ft(ic){constructor(e,n){super();b(this,"document");b(this,"_children",[]);b(this,"_customProperties",new Map);this.document=e,n&&this._insertChild(0,n)}[Symbol.iterator](){return this._children[Symbol.iterator]()}get childCount(){return this._children.length}get isEmpty(){return this.childCount===0}get root(){return this}get parent(){return null}get name(){}get getFillerOffset(){}getCustomProperty(e){return this._customProperties.get(e)}*getCustomProperties(){yield*this._customProperties.entries()}_appendChild(e){return this._insertChild(this.childCount,e)}getChild(e){return this._children[e]}getChildIndex(e){return this._children.indexOf(e)}getChildren(){return this._children[Symbol.iterator]()}_insertChild(e,n){this._fireChange("children",this,{index:e});let s=0;const r=Dse(this.document,n);for(const o of r)o.parent!==null&&o._remove(),o.parent=this,this._children.splice(e,0,o),e++,s++;return s}_removeChildren(e,n=1){this._fireChange("children",this,{index:e});for(let s=e;s<e+n;s++)this._children[s].parent=null;return this._children.splice(e,n)}_fireChange(e,n,s){this.fire(`change:${e}`,n,s)}_setCustomProperty(e,n){this._customProperties.set(e,n)}_removeCustomProperty(e){return this._customProperties.delete(e)}};Dl.prototype.is=function(i){return i==="documentFragment"||i==="view:documentFragment"};function Dse(i,t){return typeof t=="string"?[new si(i,t)]:(Es(t)||(t=[t]),Array.from(t).map(e=>typeof e=="string"?new si(i,e):e instanceof Oo?new si(i,e.data):e))}class t4{constructor(t){b(this,"document");b(this,"_cloneGroups",new Map);b(this,"_slotFactory",null);this.document=t}setSelection(...t){this.document.selection._setTo(...t)}setSelectionFocus(t,e){this.document.selection._setFocus(t,e)}createDocumentFragment(t){return new Dl(this.document,t)}createText(t){return new si(this.document,t)}createAttributeElement(t,e,n={}){const s=new Vl(this.document,t,e);return typeof n.priority=="number"&&(s._priority=n.priority),n.id&&(s._id=n.id),n.renderUnsafeAttributes&&s._unsafeAttributesToRender.push(...n.renderUnsafeAttributes),s}createContainerElement(t,e,n={},s={}){let r=null;eo(n)?s=n:r=n;const o=new nf(this.document,t,e,r);return s.renderUnsafeAttributes&&o._unsafeAttributesToRender.push(...s.renderUnsafeAttributes),o}createEditableElement(t,e,n={}){const s=new nw(this.document,t,e);return n.renderUnsafeAttributes&&s._unsafeAttributesToRender.push(...n.renderUnsafeAttributes),s}createEmptyElement(t,e,n={}){const s=new rC(this.document,t,e);return n.renderUnsafeAttributes&&s._unsafeAttributesToRender.push(...n.renderUnsafeAttributes),s}createUIElement(t,e,n){const s=new sw(this.document,t,e);return n&&(s.render=n),s}createRawElement(t,e,n,s={}){const r=new oC(this.document,t,e);return n&&(r.render=n),s.renderUnsafeAttributes&&r._unsafeAttributesToRender.push(...s.renderUnsafeAttributes),r}setAttribute(t,e,n,s){s!==void 0?s._setAttribute(t,e,n):n._setAttribute(t,e)}removeAttribute(t,e,n){n!==void 0?n._removeAttribute(t,e):e._removeAttribute(t)}addClass(t,e){e._addClass(t)}removeClass(t,e){e._removeClass(t)}setStyle(t,e,n){eo(t)&&n===void 0?e._setStyle(t):n._setStyle(t,e)}removeStyle(t,e){e._removeStyle(t)}setCustomProperty(t,e,n){n._setCustomProperty(t,e)}removeCustomProperty(t,e){return e._removeCustomProperty(t)}breakAttributes(t){return t instanceof Pe?this._breakAttributes(t):this._breakAttributesRange(t)}breakContainer(t){const e=t.parent;if(!e.is("containerElement"))throw new B("view-writer-break-non-container-element",this.document);if(!e.parent)throw new B("view-writer-break-root",this.document);if(t.isAtStart)return Pe._createBefore(e);if(!t.isAtEnd){const n=e._clone(!1);this.insert(Pe._createAfter(e),n);const s=new vt(t,Pe._createAt(e,"end")),r=new Pe(n,0);this.move(s,r)}return Pe._createAfter(e)}mergeAttributes(t){const e=t.offset,n=t.parent;if(n.is("$text"))return t;if(n.is("attributeElement")&&n.childCount===0){const o=n.parent,a=n.index;return n._remove(),this._removeFromClonedElementsGroup(n),this.mergeAttributes(new Pe(o,a))}const s=n.getChild(e-1),r=n.getChild(e);if(!s||!r)return t;if(s.is("$text")&&r.is("$text"))return Y2(s,r);if(s.is("attributeElement")&&r.is("attributeElement")&&s.isSimilar(r)){const o=s.childCount;return s._appendChild(r.getChildren()),r._remove(),this._removeFromClonedElementsGroup(r),this.mergeAttributes(new Pe(s,o))}return t}mergeContainers(t){const e=t.nodeBefore,n=t.nodeAfter;if(!e||!n||!e.is("containerElement")||!n.is("containerElement"))throw new B("view-writer-merge-containers-invalid-position",this.document);const s=e.getChild(e.childCount-1),r=s instanceof si?Pe._createAt(s,"end"):Pe._createAt(e,"end");return this.move(vt._createIn(n),Pe._createAt(e,"end")),this.remove(vt._createOn(n)),r}insert(t,e){e=Es(e)?[...e]:[e],n4(e,this.document);const n=e.reduce((o,a)=>{const l=o[o.length-1],c=!a.is("uiElement");return!l||l.breakAttributes!=c?o.push({breakAttributes:c,nodes:[a]}):l.nodes.push(a),o},[]);let s=null,r=t;for(const{nodes:o,breakAttributes:a}of n){const l=this._insertNodes(r,o,a);s||(s=l.start),r=l.end}return s?new vt(s,r):new vt(t)}remove(t){const e=t instanceof vt?t:vt._createOn(t);if(th(e,this.document),e.isCollapsed)return new Dl(this.document);const{start:n,end:s}=this._breakAttributesRange(e,!0),r=n.parent,o=s.offset-n.offset,a=r._removeChildren(n.offset,o);for(const c of a)this._removeFromClonedElementsGroup(c);const l=this.mergeAttributes(n);return e.start=l,e.end=l.clone(),new Dl(this.document,a)}clear(t,e){th(t,this.document);const n=t.getWalker({direction:"backward",ignoreElementEnd:!0});for(const s of n){const r=s.item;let o;if(r.is("element")&&e.isSimilar(r))o=vt._createOn(r);else if(!s.nextPosition.isAfter(t.start)&&r.is("$textProxy")){const a=r.getAncestors().find(l=>l.is("element")&&e.isSimilar(l));a&&(o=vt._createIn(a))}o&&(o.end.isAfter(t.end)&&(o.end=t.end),o.start.isBefore(t.start)&&(o.start=t.start),this.remove(o))}}move(t,e){let n;if(e.isAfter(t.end)){e=this._breakAttributes(e,!0);const s=e.parent,r=s.childCount;t=this._breakAttributesRange(t,!0),n=this.remove(t),e.offset+=s.childCount-r}else n=this.remove(t);return this.insert(e,n)}wrap(t,e){if(!(e instanceof Vl))throw new B("view-writer-wrap-invalid-attribute",this.document);if(th(t,this.document),t.isCollapsed){let n=t.start;n.parent.is("element")&&!Bse(n.parent)&&(n=n.getLastMatchingPosition(r=>r.item.is("uiElement"))),n=this._wrapPosition(n,e);const s=this.document.selection;return s.isCollapsed&&s.getFirstPosition().isEqual(t.start)&&this.setSelection(n),new vt(n)}else return this._wrapRange(t,e)}unwrap(t,e){if(!(e instanceof Vl))throw new B("view-writer-unwrap-invalid-attribute",this.document);if(th(t,this.document),t.isCollapsed)return t;const{start:n,end:s}=this._breakAttributesRange(t,!0),r=n.parent,o=this._unwrapChildren(r,n.offset,s.offset,e),a=this.mergeAttributes(o.start);a.isEqual(o.start)||o.end.offset--;const l=this.mergeAttributes(o.end);return new vt(a,l)}rename(t,e){const n=new nf(this.document,t,e.getAttributes());return this.insert(Pe._createAfter(e),n),this.move(vt._createIn(e),Pe._createAt(n,0)),this.remove(vt._createOn(e)),n}clearClonedElementsGroup(t){this._cloneGroups.delete(t)}createPositionAt(t,e){return Pe._createAt(t,e)}createPositionAfter(t){return Pe._createAfter(t)}createPositionBefore(t){return Pe._createBefore(t)}createRange(t,e){return new vt(t,e)}createRangeOn(t){return vt._createOn(t)}createRangeIn(t){return vt._createIn(t)}createSelection(...t){return new Fo(...t)}createSlot(t="children"){if(!this._slotFactory)throw new B("view-writer-invalid-create-slot-context",this.document);return this._slotFactory(this,t)}_registerSlotFactory(t){this._slotFactory=t}_clearSlotFactory(){this._slotFactory=null}_insertNodes(t,e,n){let s;if(n?s=Jy(t):s=t.parent.is("$text")?t.parent.parent:t.parent,!s)throw new B("view-writer-invalid-position-container",this.document);let r;n?r=this._breakAttributes(t,!0):r=t.parent.is("$text")?v1(t):t;const o=s._insertChild(r.offset,e);for(const h of e)this._addToClonedElementsGroup(h);const a=r.getShiftedBy(o),l=this.mergeAttributes(r);l.isEqual(r)||a.offset--;const c=this.mergeAttributes(a);return new vt(l,c)}_wrapChildren(t,e,n,s){let r=e;const o=[];for(;r<n;){const l=t.getChild(r),c=l.is("$text"),h=l.is("attributeElement");if(h&&l._canMergeAttributesFrom(s))l._mergeAttributesFrom(s),o.push(new Pe(t,r));else if(c||!h||Fse(s,l)){const f=s._clone();l._remove(),f._appendChild(l),t._insertChild(r,f),this._addToClonedElementsGroup(f),o.push(new Pe(t,r))}else this._wrapChildren(l,0,l.childCount,s);r++}let a=0;for(const l of o){if(l.offset-=a,l.offset==e)continue;this.mergeAttributes(l).isEqual(l)||(a++,n--)}return vt._createFromParentsAndOffsets(t,e,t,n)}_unwrapChildren(t,e,n,s){let r=e;const o=[];for(;r<n;){const l=t.getChild(r);if(!l.is("attributeElement")){r++;continue}if(l.isSimilar(s)){const c=l.getChildren(),h=l.childCount;l._remove(),t._insertChild(r,c),this._removeFromClonedElementsGroup(l),o.push(new Pe(t,r),new Pe(t,r+h)),r+=h,n+=h-1;continue}if(l._canSubtractAttributesOf(s)){l._subtractAttributesOf(s),o.push(new Pe(t,r),new Pe(t,r+1)),r++;continue}this._unwrapChildren(l,0,l.childCount,s),r++}let a=0;for(const l of o){if(l.offset-=a,l.offset==e||l.offset==n)continue;this.mergeAttributes(l).isEqual(l)||(a++,n--)}return vt._createFromParentsAndOffsets(t,e,t,n)}_wrapRange(t,e){const{start:n,end:s}=this._breakAttributesRange(t,!0),r=n.parent,o=this._wrapChildren(r,n.offset,s.offset,e),a=this.mergeAttributes(o.start);a.isEqual(o.start)||o.end.offset--;const l=this.mergeAttributes(o.end);return new vt(a,l)}_wrapPosition(t,e){if(e.isSimilar(t.parent))return K2(t.clone());t.parent.is("$text")&&(t=v1(t));const n=this.createAttributeElement("_wrapPosition-fake-element");n._priority=Number.POSITIVE_INFINITY,n.isSimilar=()=>!1,t.parent._insertChild(t.offset,n);const s=new vt(t,t.getShiftedBy(1));this.wrap(s,e);const r=new Pe(n.parent,n.index);n._remove();const o=r.nodeBefore,a=r.nodeAfter;return o&&o.is("view:$text")&&a&&a.is("view:$text")?Y2(o,a):K2(r)}_breakAttributesRange(t,e=!1){const n=t.start,s=t.end;if(th(t,this.document),t.isCollapsed){const l=this._breakAttributes(t.start,e);return new vt(l,l)}const r=this._breakAttributes(s,e),o=r.parent.childCount,a=this._breakAttributes(n,e);return r.offset+=r.parent.childCount-o,new vt(a,r)}_breakAttributes(t,e=!1){const n=t.offset,s=t.parent;if(t.parent.is("emptyElement"))throw new B("view-writer-cannot-break-empty-element",this.document);if(t.parent.is("uiElement"))throw new B("view-writer-cannot-break-ui-element",this.document);if(t.parent.is("rawElement"))throw new B("view-writer-cannot-break-raw-element",this.document);if(!e&&s.is("$text")&&Qy(s.parent)||Qy(s))return t.clone();if(s.is("$text"))return this._breakAttributes(v1(t),e);const r=s.childCount;if(n==r){const o=new Pe(s.parent,s.index+1);return this._breakAttributes(o,e)}else if(n===0){const o=new Pe(s.parent,s.index);return this._breakAttributes(o,e)}else{const o=s.index+1,a=s._clone();s.parent._insertChild(o,a),this._addToClonedElementsGroup(a);const l=s.childCount-n,c=s._removeChildren(n,l);a._appendChild(c);const h=new Pe(s.parent,o);return this._breakAttributes(h,e)}}_addToClonedElementsGroup(t){if(!t.root.is("rootElement"))return;if(t.is("element"))for(const s of t.getChildren())this._addToClonedElementsGroup(s);const e=t.id;if(!e)return;let n=this._cloneGroups.get(e);n||(n=new Set,this._cloneGroups.set(e,n)),n.add(t),t._clonesGroup=n}_removeFromClonedElementsGroup(t){if(t.is("element"))for(const s of t.getChildren())this._removeFromClonedElementsGroup(s);const e=t.id;if(!e)return;const n=this._cloneGroups.get(e);n&&n.delete(t)}}function Bse(i){return Array.from(i.getChildren()).some(t=>!t.is("uiElement"))}function Jy(i){let t=i.parent;for(;!Qy(t);){if(!t)return;t=t.parent}return t}function Fse(i,t){return i.priority<t.priority?!0:i.priority>t.priority?!1:i.getIdentity()<t.getIdentity()}function K2(i){const t=i.nodeBefore;if(t&&t.is("$text"))return new Pe(t,t.data.length);const e=i.nodeAfter;return e&&e.is("$text")?new Pe(e,0):i}function v1(i){if(i.offset==i.parent.data.length)return new Pe(i.parent.parent,i.parent.index+1);if(i.offset===0)return new Pe(i.parent.parent,i.parent.index);const t=i.parent.data.slice(i.offset);return i.parent._data=i.parent.data.slice(0,i.offset),i.parent.parent._insertChild(i.parent.index+1,new si(i.root.document,t)),new Pe(i.parent.parent,i.parent.index+1)}function Y2(i,t){const e=i.data.length;return i._data+=t.data,t._remove(),new Pe(i,e)}const $se=[si,Vl,nf,rC,oC,sw];function n4(i,t){for(const e of i){if(!$se.some(n=>e instanceof n))throw new B("view-writer-insert-invalid-node-type",t);e.is("$text")||n4(e.getChildren(),t)}}function Qy(i){return i&&(i.is("containerElement")||i.is("documentFragment"))}function th(i,t){const e=Jy(i.start),n=Jy(i.end);if(!e||!n||e!==n)throw new B("view-writer-invalid-range-container",t)}const i4=i=>i.createTextNode(" "),s4=i=>{const t=i.createElement("span");return t.dataset.ckeFiller="true",t.innerText=" ",t},r4=i=>{const t=i.createElement("br");return t.dataset.ckeFiller="true",t},br=7,sf="⁠".repeat(br);function ds(i){return typeof i=="string"?i.substr(0,br)===sf:pn(i)&&i.data.substr(0,br)===sf}function wu(i){return i.data.length==br&&ds(i)}function Z2(i){const t=typeof i=="string"?i:i.data;return ds(i)?t.slice(br):t}function zse(i){i.document.on("arrowKey",jse,{priority:"low"})}function jse(i,t){if(t.keyCode==gt.arrowleft){const e=t.domTarget.ownerDocument.defaultView.getSelection();if(e.rangeCount==1&&e.getRangeAt(0).collapsed){const n=e.getRangeAt(0).startContainer,s=e.getRangeAt(0).startOffset;ds(n)&&s<=br&&e.collapse(n,0)}}}class Hse extends Vt(){constructor(e,n){super();b(this,"domDocuments",new Set);b(this,"domConverter");b(this,"markedAttributes",new Set);b(this,"markedChildren",new Set);b(this,"markedTexts",new Set);b(this,"selection");b(this,"_inlineFiller",null);b(this,"_fakeSelectionContainer",null);this.domConverter=e,this.selection=n,this.set("isFocused",!1),this.set("isSelecting",!1),this.set("isComposing",!1),Xe.isBlink&&!Xe.isAndroid&&this.on("change:isSelecting",()=>{this.isSelecting||this.render()})}markToSync(e,n){if(e==="text")this.domConverter.mapViewToDom(n.parent)&&this.markedTexts.add(n);else{if(!this.domConverter.mapViewToDom(n))return;if(e==="attributes")this.markedAttributes.add(n);else if(e==="children")this.markedChildren.add(n);else throw new B("view-renderer-unknown-type",this)}}render(){if(this.isComposing&&!Xe.isAndroid)return;let e=null;const n=Xe.isBlink&&!Xe.isAndroid?!this.isSelecting:!0;for(const s of this.markedChildren)this._updateChildrenMappings(s);n?(this._inlineFiller&&!this._isSelectionInInlineFiller()&&this._removeInlineFiller(),this._inlineFiller?e=this._getInlineFillerPosition():this._needsInlineFillerAtSelection()&&(e=this.selection.getFirstPosition(),this.markedChildren.add(e.parent))):this._inlineFiller&&this._inlineFiller.parentNode&&(e=this.domConverter.domPositionToView(this._inlineFiller),e&&e.parent.is("$text")&&(e=Pe._createBefore(e.parent)));for(const s of this.markedAttributes)this._updateAttrs(s);for(const s of this.markedChildren)this._updateChildren(s,{inlineFillerPosition:e});for(const s of this.markedTexts)!this.markedChildren.has(s.parent)&&this.domConverter.mapViewToDom(s.parent)&&this._updateText(s,{inlineFillerPosition:e});if(n)if(e){const s=this.domConverter.viewPositionToDom(e),r=s.parent.ownerDocument;ds(s.parent)?this._inlineFiller=s.parent:this._inlineFiller=X2(r,s.parent,s.offset)}else this._inlineFiller=null;this._updateFocus(),this._updateSelection(),this.domConverter._clearTemporaryCustomProperties(),this.markedTexts.clear(),this.markedAttributes.clear(),this.markedChildren.clear()}_updateChildrenMappings(e){const n=this.domConverter.mapViewToDom(e);if(!n)return;const s=Array.from(n.childNodes),r=Array.from(this.domConverter.viewChildrenToDom(e,{withChildren:!1})),o=this._diffNodeLists(s,r),a=this._findUpdateActions(o,s,r,Wse);if(a.indexOf("update")!==-1){const l={equal:0,insert:0,delete:0};for(const c of a)if(c==="update"){const h=l.equal+l.insert,f=l.equal+l.delete,m=e.getChild(h);m&&!m.is("uiElement")&&!m.is("rawElement")&&this._updateElementMappings(m,s[f]),V2(r[h]),l.equal++}else l[c]++}}_updateElementMappings(e,n){this.domConverter.unbindDomElement(n),this.domConverter.bindElements(n,e),this.markedChildren.add(e),this.markedAttributes.add(e)}_getInlineFillerPosition(){const e=this.selection.getFirstPosition();return e.parent.is("$text")?Pe._createBefore(e.parent):e}_isSelectionInInlineFiller(){if(this.selection.rangeCount!=1||!this.selection.isCollapsed)return!1;const e=this.selection.getFirstPosition(),n=this.domConverter.viewPositionToDom(e);return!!(n&&pn(n.parent)&&ds(n.parent))}_removeInlineFiller(){const e=this._inlineFiller;if(!ds(e))throw new B("view-renderer-filler-was-lost",this);wu(e)?e.remove():e.data=e.data.substr(br),this._inlineFiller=null}_needsInlineFillerAtSelection(){if(this.selection.rangeCount!=1||!this.selection.isCollapsed)return!1;const e=this.selection.getFirstPosition(),n=e.parent,s=e.offset;if(!this.domConverter.mapViewToDom(n.root)||!n.is("element")||!Use(n))return!1;const r=e.nodeBefore,o=e.nodeAfter;return!(r instanceof si||o instanceof si||s===n.getFillerOffset()&&(!r||!r.is("element","br"))||Xe.isAndroid&&(r||o))}_updateText(e,n){const s=this.domConverter.findCorrespondingDomText(e);let o=this.domConverter.viewToDom(e).data;const a=n.inlineFillerPosition;a&&a.parent==e.parent&&a.offset==e.index&&(o=sf+o),this._updateTextNode(s,o)}_updateAttrs(e){const n=this.domConverter.mapViewToDom(e);if(n){for(const s of Array.from(n.attributes)){const r=s.name;e.hasAttribute(r)||this.domConverter.removeDomElementAttribute(n,r)}for(const s of e.getAttributeKeys())this.domConverter.setDomElementAttribute(n,s,e.getAttribute(s),e)}}_updateChildren(e,n){const s=this.domConverter.mapViewToDom(e);if(!s)return;if(Xe.isAndroid){let m=null;for(const p of Array.from(s.childNodes)){if(m&&pn(m)&&pn(p)){s.normalize();break}m=p}}const r=n.inlineFillerPosition,o=s.childNodes,a=Array.from(this.domConverter.viewChildrenToDom(e,{bind:!0}));r&&r.parent===e&&X2(s.ownerDocument,a,r.offset);const l=this._diffNodeLists(o,a),c=this._findUpdateActions(l,o,a,qse);let h=0;const f=new Set;for(const m of c)m==="delete"?(f.add(o[h]),V2(o[h])):(m==="equal"||m==="update")&&h++;h=0;for(const m of c)m==="insert"?(UM(s,h,a[h]),h++):m==="update"?(this._updateTextNode(o[h],a[h].data),h++):m==="equal"&&(this._markDescendantTextToSync(this.domConverter.domToView(a[h])),h++);for(const m of f)m.parentNode||this.domConverter.unbindDomElement(m)}_diffNodeLists(e,n){return e=Yse(e,this._fakeSelectionContainer),Ih(e,n,Gse.bind(null,this.domConverter))}_findUpdateActions(e,n,s,r){if(e.indexOf("insert")===-1||e.indexOf("delete")===-1)return e;let o=[],a=[],l=[];const c={equal:0,insert:0,delete:0};for(const h of e)h==="insert"?l.push(s[c.equal+c.insert]):h==="delete"?a.push(n[c.equal+c.delete]):(o=o.concat(Ih(a,l,r).map(f=>f==="equal"?"update":f)),o.push("equal"),a=[],l=[]),c[h]++;return o.concat(Ih(a,l,r).map(h=>h==="equal"?"update":h))}_updateTextNode(e,n){const s=e.data;s!=n&&(Xe.isAndroid&&this.isComposing&&s.replace(/\u00A0/g," ")==n.replace(/\u00A0/g," ")||this._updateTextNodeInternal(e,n))}_updateTextNodeInternal(e,n){const s=AM(e.data,n);for(const r of s)r.type==="insert"?e.insertData(r.index,r.values.join("")):e.deleteData(r.index,r.howMany)}_markDescendantTextToSync(e){if(e){if(e.is("$text"))this.markedTexts.add(e);else if(e.is("element"))for(const n of e.getChildren())this._markDescendantTextToSync(n)}}_updateSelection(){if(Xe.isBlink&&!Xe.isAndroid&&this.isSelecting&&!this.markedChildren.size)return;if(this.selection.rangeCount===0){this._removeDomSelection(),this._removeFakeSelection();return}const e=this.domConverter.mapViewToDom(this.selection.editableElement);!this.isFocused||!e||(this.selection.isFake?this._updateFakeSelection(e):this._fakeSelectionContainer&&this._fakeSelectionContainer.isConnected?(this._removeFakeSelection(),this._updateDomSelection(e)):this.isComposing&&Xe.isAndroid||this._updateDomSelection(e))}_updateFakeSelection(e){const n=e.ownerDocument;this._fakeSelectionContainer||(this._fakeSelectionContainer=Zse(n));const s=this._fakeSelectionContainer;if(this.domConverter.bindFakeSelection(s,this.selection),!this._fakeSelectionNeedsUpdate(e))return;(!s.parentElement||s.parentElement!=e)&&e.appendChild(s),s.textContent=this.selection.fakeSelectionLabel||" ";const r=n.getSelection(),o=n.createRange();r.removeAllRanges(),o.selectNodeContents(s),r.addRange(o)}_updateDomSelection(e){const n=e.ownerDocument.defaultView.getSelection();if(!this._domSelectionNeedsUpdate(n))return;const s=this.domConverter.viewPositionToDom(this.selection.anchor),r=this.domConverter.viewPositionToDom(this.selection.focus);n.setBaseAndExtent(s.parent,s.offset,r.parent,r.offset),Xe.isGecko&&Kse(r,n)}_domSelectionNeedsUpdate(e){if(!this.domConverter.isDomSelectionCorrect(e))return!0;const n=e&&this.domConverter.domSelectionToView(e);return!(n&&this.selection.isEqual(n)||!this.selection.isCollapsed&&this.selection.isSimilar(n))}_fakeSelectionNeedsUpdate(e){const n=this._fakeSelectionContainer,s=e.ownerDocument.getSelection();return!n||n.parentElement!==e||s.anchorNode!==n&&!n.contains(s.anchorNode)?!0:n.textContent!==this.selection.fakeSelectionLabel}_removeDomSelection(){for(const e of this.domDocuments){const n=e.getSelection();if(n.rangeCount){const s=e.activeElement,r=this.domConverter.mapDomToView(s);s&&r&&n.removeAllRanges()}}}_removeFakeSelection(){const e=this._fakeSelectionContainer;e&&e.remove()}_updateFocus(){if(this.isFocused){const e=this.selection.editableElement;e&&this.domConverter.focus(e)}}}function Use(i){if(i.getAttribute("contenteditable")=="false")return!1;const t=i.findAncestor(e=>e.hasAttribute("contenteditable"));return!t||t.getAttribute("contenteditable")=="true"}function X2(i,t,e){const n=t instanceof Array?t:t.childNodes,s=n[e];if(pn(s))return s.data=sf+s.data,s;{const r=i.createTextNode(sf);return Array.isArray(t)?n.splice(e,0,r):UM(t,e,r),r}}function Wse(i,t){return za(i)&&za(t)&&!pn(i)&&!pn(t)&&!Nh(i)&&!Nh(t)&&i.tagName.toLowerCase()===t.tagName.toLowerCase()}function qse(i,t){return za(i)&&za(t)&&pn(i)&&pn(t)}function Gse(i,t,e){return t===e?!0:pn(t)&&pn(e)?t.data===e.data:!!(i.isBlockFiller(t)&&i.isBlockFiller(e))}function Kse(i,t){let e=i.parent,n=i.offset;if(pn(e)&&wu(e)&&(n=ph(e)+1,e=e.parentNode),e.nodeType!=Node.ELEMENT_NODE||n!=e.childNodes.length-1)return;const s=e.childNodes[n];s&&s.tagName=="BR"&&t.addRange(t.getRangeAt(0))}function Yse(i,t){const e=Array.from(i);return e.length==0||!t||e[e.length-1]==t&&e.pop(),e}function Zse(i){const t=i.createElement("div");return t.className="ck-fake-selection-container",Object.assign(t.style,{position:"fixed",top:0,left:"-9999px",width:"42px"}),t.textContent=" ",t}const Xse=r4(Re.document),Jse=i4(Re.document),Qse=s4(Re.document),_g="data-ck-unsafe-attribute-",J2="data-ck-unsafe-element";class rw{constructor(t,{blockFillerMode:e,renderingMode:n="editing"}={}){b(this,"document");b(this,"renderingMode");b(this,"blockFillerMode");b(this,"preElements");b(this,"blockElements");b(this,"inlineObjectElements");b(this,"unsafeElements");b(this,"_domDocument");b(this,"_domToViewMapping",new WeakMap);b(this,"_viewToDomMapping",new WeakMap);b(this,"_fakeSelectionMapping",new WeakMap);b(this,"_rawContentElementMatcher",new Cs);b(this,"_inlineObjectElementMatcher",new Cs);b(this,"_elementsWithTemporaryCustomProperties",new Set);this.document=t,this.renderingMode=n,this.blockFillerMode=e||(n==="editing"?"br":"nbsp"),this.preElements=["pre","textarea"],this.blockElements=["address","article","aside","blockquote","caption","center","dd","details","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","legend","li","main","menu","nav","ol","p","pre","section","summary","table","tbody","td","tfoot","th","thead","tr","ul"],this.inlineObjectElements=["object","iframe","input","button","textarea","select","option","video","embed","audio","img","canvas"],this.unsafeElements=["script","style"],this._domDocument=this.renderingMode==="editing"?Re.document:Re.document.implementation.createHTMLDocument("")}bindFakeSelection(t,e){this._fakeSelectionMapping.set(t,new Fo(e))}fakeSelectionToView(t){return this._fakeSelectionMapping.get(t)}bindElements(t,e){this._domToViewMapping.set(t,e),this._viewToDomMapping.set(e,t)}unbindDomElement(t){const e=this._domToViewMapping.get(t);if(e){this._domToViewMapping.delete(t),this._viewToDomMapping.delete(e);for(const n of t.children)this.unbindDomElement(n)}}bindDocumentFragments(t,e){this._domToViewMapping.set(t,e),this._viewToDomMapping.set(e,t)}shouldRenderAttribute(t,e,n){return this.renderingMode==="data"?!0:(t=t.toLowerCase(),t.startsWith("on")||t==="srcdoc"&&e.match(/\bon\S+\s*=|javascript:|<\s*\/*script/i)?!1:n==="img"&&(t==="src"||t==="srcset")||n==="source"&&t==="srcset"?!0:!e.match(/^\s*(javascript:|data:(image\/svg|text\/x?html))/i))}setContentOf(t,e){if(this.renderingMode==="data"){t.innerHTML=e;return}const n=new DOMParser().parseFromString(e,"text/html"),s=n.createDocumentFragment(),r=n.body.childNodes;for(;r.length>0;)s.appendChild(r[0]);const o=n.createTreeWalker(s,NodeFilter.SHOW_ELEMENT),a=[];let l;for(;l=o.nextNode();)a.push(l);for(const c of a){for(const f of c.getAttributeNames())this.setDomElementAttribute(c,f,c.getAttribute(f));const h=c.tagName.toLowerCase();this._shouldRenameElement(h)&&(nP(h),c.replaceWith(this._createReplacementDomElement(h,c)))}for(;t.firstChild;)t.firstChild.remove();t.append(s)}viewToDom(t,e={}){if(t.is("$text")){const n=this._processDataFromViewText(t);return this._domDocument.createTextNode(n)}else{const n=t;if(this.mapViewToDom(n))if(n.getCustomProperty("editingPipeline:doNotReuseOnce"))this._elementsWithTemporaryCustomProperties.add(n);else return this.mapViewToDom(n);let s;if(n.is("documentFragment"))s=this._domDocument.createDocumentFragment(),e.bind&&this.bindDocumentFragments(s,n);else{if(n.is("uiElement"))return n.name==="$comment"?s=this._domDocument.createComment(n.getCustomProperty("$rawContent")):s=n.render(this._domDocument,this),e.bind&&this.bindElements(s,n),s;this._shouldRenameElement(n.name)?(nP(n.name),s=this._createReplacementDomElement(n.name)):n.hasAttribute("xmlns")?s=this._domDocument.createElementNS(n.getAttribute("xmlns"),n.name):s=this._domDocument.createElement(n.name),n.is("rawElement")&&n.render(s,this),e.bind&&this.bindElements(s,n);for(const r of n.getAttributeKeys())this.setDomElementAttribute(s,r,n.getAttribute(r),n)}if(e.withChildren!==!1)for(const r of this.viewChildrenToDom(n,e))s instanceof HTMLTemplateElement?s.content.appendChild(r):s.appendChild(r);return s}}setDomElementAttribute(t,e,n,s){const r=this.shouldRenderAttribute(e,n,t.tagName.toLowerCase())||s&&s.shouldRenderUnsafeAttribute(e);if(r||Tt("domconverter-unsafe-attribute-detected",{domElement:t,key:e,value:n}),!Bie(e)){Tt("domconverter-invalid-attribute-detected",{domElement:t,key:e,value:n});return}t.hasAttribute(e)&&!r?t.removeAttribute(e):t.hasAttribute(_g+e)&&r&&t.removeAttribute(_g+e),t.setAttribute(r?e:_g+e,n)}removeDomElementAttribute(t,e){e!=J2&&(t.removeAttribute(e),t.removeAttribute(_g+e))}*viewChildrenToDom(t,e={}){const n=t.getFillerOffset&&t.getFillerOffset();let s=0;for(const r of t.getChildren()){n===s&&(yield this._getBlockFiller());const o=r.is("element")&&!!r.getCustomProperty("dataPipeline:transparentRendering")&&!Tn(r.getAttributes());if(o&&this.renderingMode=="data")if(r.is("rawElement")){const a=this._domDocument.createElement(r.name);r.render(a,this),yield*[...a.childNodes]}else yield*this.viewChildrenToDom(r,e);else o&&Tt("domconverter-transparent-rendering-unsupported-in-editing-pipeline",{viewElement:r}),yield this.viewToDom(r,e);s++}n===s&&(yield this._getBlockFiller())}viewRangeToDom(t){const e=this.viewPositionToDom(t.start),n=this.viewPositionToDom(t.end),s=this._domDocument.createRange();return s.setStart(e.parent,e.offset),s.setEnd(n.parent,n.offset),s}viewPositionToDom(t){const e=t.parent;if(e.is("$text")){const n=this.findCorrespondingDomText(e);if(!n)return null;let s=t.offset;return ds(n)&&(s+=br),{parent:n,offset:s}}else{let n,s,r;if(t.offset===0){if(n=this.mapViewToDom(e),!n)return null;r=n.childNodes[0]}else{const a=t.nodeBefore;if(s=a.is("$text")?this.findCorrespondingDomText(a):this.mapViewToDom(a),!s)return null;n=s.parentNode,r=s.nextSibling}if(pn(r)&&ds(r))return{parent:r,offset:br};const o=s?ph(s)+1:0;return{parent:n,offset:o}}}domToView(t,e={}){const n=[],s=this._domToView(t,e,n),r=s.next().value;return!r||(s.next(),this._processDomInlineNodes(null,n,e),this.blockFillerMode=="br"&&eP(r))||r.is("$text")&&r.data.length==0?null:r}*domChildrenToView(t,e={},n=[]){let s=[];t instanceof HTMLTemplateElement?s=[...t.content.childNodes]:s=[...t.childNodes];for(let r=0;r<s.length;r++){const o=s[r],a=this._domToView(o,e,n),l=a.next().value;l!==null&&(this._isBlockViewElement(l)&&this._processDomInlineNodes(t,n,e),this.blockFillerMode=="br"&&eP(l)||(yield l),a.next())}this._processDomInlineNodes(t,n,e)}domSelectionToView(t){if(sre(t))return new Fo([]);if(t.rangeCount===1){let s=t.getRangeAt(0).startContainer;pn(s)&&(s=s.parentNode);const r=this.fakeSelectionToView(s);if(r)return r}const e=this.isDomSelectionBackward(t),n=[];for(let s=0;s<t.rangeCount;s++){const r=t.getRangeAt(s),o=this.domRangeToView(r);o&&n.push(o)}return new Fo(n,{backward:e})}domRangeToView(t){const e=this.domPositionToView(t.startContainer,t.startOffset),n=this.domPositionToView(t.endContainer,t.endOffset);return e&&n?new vt(e,n):null}domPositionToView(t,e=0){if(this.isBlockFiller(t))return this.domPositionToView(t.parentNode,ph(t));const n=this.mapDomToView(t);if(n&&(n.is("uiElement")||n.is("rawElement")))return Pe._createBefore(n);if(pn(t)){if(wu(t))return this.domPositionToView(t.parentNode,ph(t));const s=this.findCorrespondingViewText(t);let r=e;return s?(ds(t)&&(r-=br,r=r<0?0:r),new Pe(s,r)):null}else{if(e===0){const s=this.mapDomToView(t);if(s)return new Pe(s,0)}else{const s=t.childNodes[e-1];if(pn(s)&&wu(s)||s&&this.isBlockFiller(s))return this.domPositionToView(s.parentNode,ph(s));const r=pn(s)?this.findCorrespondingViewText(s):this.mapDomToView(s);if(r&&r.parent)return new Pe(r.parent,r.index+1)}return null}}mapDomToView(t){return this.getHostViewElement(t)||this._domToViewMapping.get(t)}findCorrespondingViewText(t){if(wu(t))return null;const e=this.getHostViewElement(t);if(e)return e;const n=t.previousSibling;if(n){if(!this.isElement(n))return null;const s=this.mapDomToView(n);if(s){const r=s.nextSibling;return r instanceof si?r:null}}else{const s=this.mapDomToView(t.parentNode);if(s){const r=s.getChild(0);return r instanceof si?r:null}}return null}mapViewToDom(t){return this._viewToDomMapping.get(t)}findCorrespondingDomText(t){const e=t.previousSibling;return e&&this.mapViewToDom(e)?this.mapViewToDom(e).nextSibling:!e&&t.parent&&this.mapViewToDom(t.parent)?this.mapViewToDom(t.parent).childNodes[0]:null}focus(t){const e=this.mapViewToDom(t);if(e&&e.ownerDocument.activeElement!==e){const{scrollX:n,scrollY:s}=Re.window,r=[];Q2(e,o=>{const{scrollLeft:a,scrollTop:l}=o;r.push([a,l])}),e.focus(),Q2(e,o=>{const[a,l]=r.shift();o.scrollLeft=a,o.scrollTop=l}),Re.window.scrollTo(n,s)}}_clearDomSelection(){const t=this.mapViewToDom(this.document.selection.editableElement);if(!t)return;const e=t.ownerDocument.defaultView.getSelection(),n=this.domSelectionToView(e);n&&n.rangeCount>0&&e.removeAllRanges()}isElement(t){return t&&t.nodeType==Node.ELEMENT_NODE}isDocumentFragment(t){return t&&t.nodeType==Node.DOCUMENT_FRAGMENT_NODE}isBlockFiller(t){return this.blockFillerMode=="br"?t.isEqualNode(Xse):tP(t,this.blockElements)?!0:t.isEqualNode(Qse)||tre(t,this.blockElements)}isDomSelectionBackward(t){if(t.isCollapsed)return!1;const e=this._domDocument.createRange();try{e.setStart(t.anchorNode,t.anchorOffset),e.setEnd(t.focusNode,t.focusOffset)}catch{return!1}const n=e.collapsed;return e.detach(),n}getHostViewElement(t){const e=Mie(t);for(e.pop();e.length;){const n=e.pop(),s=this._domToViewMapping.get(n);if(s&&(s.is("uiElement")||s.is("rawElement")))return s}return null}isDomSelectionCorrect(t){return this._isDomSelectionPositionCorrect(t.anchorNode,t.anchorOffset)&&this._isDomSelectionPositionCorrect(t.focusNode,t.focusOffset)}registerRawContentMatcher(t){this._rawContentElementMatcher.add(t)}registerInlineObjectMatcher(t){this._inlineObjectElementMatcher.add(t)}_clearTemporaryCustomProperties(){for(const t of this._elementsWithTemporaryCustomProperties)t._removeCustomProperty("editingPipeline:doNotReuseOnce");this._elementsWithTemporaryCustomProperties.clear()}_getBlockFiller(){switch(this.blockFillerMode){case"nbsp":return i4(this._domDocument);case"markedNbsp":return s4(this._domDocument);case"br":return r4(this._domDocument)}}_isDomSelectionPositionCorrect(t,e){if(pn(t)&&ds(t)&&e<br||this.isElement(t)&&ds(t.childNodes[e]))return!1;const n=this.mapDomToView(t);return!(n&&(n.is("uiElement")||n.is("rawElement")))}*_domToView(t,e,n){if(this.blockFillerMode!="br"&&tP(t,this.blockElements))return null;const s=this.getHostViewElement(t);if(s)return s;if(Nh(t)&&e.skipComments)return null;if(pn(t)){if(wu(t))return null;{const r=t.data;if(r==="")return null;const o=new si(this.document,r);return n.push(o),o}}else{let r=this.mapDomToView(t);if(r)return this._isInlineObjectElement(r)&&n.push(r),r;if(this.isDocumentFragment(t))r=new Dl(this.document),e.bind&&this.bindDocumentFragments(t,r);else{r=this._createViewElement(t,e),e.bind&&this.bindElements(t,r);const a=t.attributes;if(a)for(let l=a.length,c=0;c<l;c++)r._setAttribute(a[c].name,a[c].value);if(this._isViewElementWithRawContent(r,e))return r._setCustomProperty("$rawContent",t.innerHTML),this._isBlockViewElement(r)||n.push(r),r;if(Nh(t))return r._setCustomProperty("$rawContent",t.data),r}yield r;const o=[];if(e.withChildren!==!1)for(const a of this.domChildrenToView(t,e,o))r._appendChild(a);if(this._isInlineObjectElement(r))n.push(r),this._processDomInlineNodes(null,o,e);else for(const a of o)n.push(a)}}_processDomInlineNodes(t,e,n){if(!e.length||t&&!this.isDocumentFragment(t)&&!this._isBlockDomElement(t))return;let s=!1;for(let r=0;r<e.length;r++){const o=e[r];if(!o.is("$text")){s=!1;continue}let a,l=!1;if(this._isPreFormatted(o))a=Z2(o.data);else{a=o.data.replace(/[ \n\t\r]{1,}/g," "),l=/[^\S\u00A0]/.test(a.charAt(a.length-1));const c=r>0?e[r-1]:null,h=r+1<e.length?e[r+1]:null,f=!c||c.is("element")&&c.name=="br"||s,m=h?!1:!ds(o.data);n.withChildren!==!1&&(f&&(a=a.replace(/^ /,"")),m&&(a=a.replace(/ $/,""))),a=Z2(a),this.blockFillerMode!="br"&&o.parent&&(ire(o.parent,a)?(a="",o.parent.parent&&(o.parent.parent._setCustomProperty("$hasBlockFiller",!0),o.parent._remove())):nre(o.parent,a,this.blockElements)&&(a="",o.parent._setCustomProperty("$hasBlockFiller",!0))),a=a.replace(/ \u00A0/g,"  ");const p=h&&h.is("element")&&h.name!="br",v=h&&h.is("$text")&&h.data.charAt(0)==" ";(/[ \u00A0]\u00A0$/.test(a)||!h||p||v)&&(a=a.replace(/\u00A0$/," ")),(f||c&&c.is("element")&&c.name!="br")&&(a=a.replace(/^\u00A0/," "))}a.length==0&&o.parent?(o._remove(),e.splice(r,1),r--):(o._data=a,s=l)}e.length=0}_processDataFromViewText(t){let e=t.data;if(this._isPreFormatted(t))return e;if(e.charAt(0)==" "){const n=this._getTouchingInlineViewNode(t,!1);(n&&n.is("$textProxy")&&this._nodeEndsWithSpace(n)||!n)&&(e=" "+e.substr(1))}if(e.charAt(e.length-1)==" "){const n=this._getTouchingInlineViewNode(t,!0),s=n&&n.is("$textProxy")&&n.data.charAt(0)==" ";(e.charAt(e.length-2)==" "||!n||s)&&(e=e.substr(0,e.length-1)+" ")}return e.replace(/ {2}/g,"  ")}_nodeEndsWithSpace(t){if(this._isPreFormatted(t))return!1;const e=this._processDataFromViewText(t);return e.charAt(e.length-1)==" "}_isPreFormatted(t){if(ere(t,this.preElements))return!0;for(const e of t.getAncestors({parentFirst:!0}))if(!(!e.is("element")||!e.hasStyle("white-space")||e.getStyle("white-space")==="inherit"))return["pre","pre-wrap","break-spaces"].includes(e.getStyle("white-space"));return!1}_getTouchingInlineViewNode(t,e){const n=new Il({startPosition:e?Pe._createAfter(t):Pe._createBefore(t),direction:e?"forward":"backward"});for(const{item:s}of n){if(s.is("$textProxy"))return s;if(s.is("element")&&s.getCustomProperty("dataPipeline:transparentRendering"))continue;if(s.is("element","br"))return null;if(this._isInlineObjectElement(s))return s;if(s.is("containerElement"))return null}return null}_isBlockDomElement(t){return this.isElement(t)&&this.blockElements.includes(t.tagName.toLowerCase())}_isBlockViewElement(t){return t.is("element")&&this.blockElements.includes(t.name)}_isInlineObjectElement(t){return t.is("element")?t.name=="br"||this.inlineObjectElements.includes(t.name)||!!this._inlineObjectElementMatcher.match(t):!1}_createViewElement(t,e){if(Nh(t))return new sw(this.document,"$comment");const n=e.keepOriginalCase?t.tagName:t.tagName.toLowerCase();return new qo(this.document,n)}_isViewElementWithRawContent(t,e){return e.withChildren!==!1&&t.is("element")&&!!this._rawContentElementMatcher.match(t)}_shouldRenameElement(t){const e=t.toLowerCase();return this.renderingMode==="editing"&&this.unsafeElements.includes(e)}_createReplacementDomElement(t,e){const n=this._domDocument.createElement("span");if(n.setAttribute(J2,t),e){for(;e.firstChild;)n.appendChild(e.firstChild);for(const s of e.getAttributeNames())n.setAttribute(s,e.getAttribute(s))}return n}}function ere(i,t){return i.getAncestors().some(e=>e.is("element")&&t.includes(e.name))}function Q2(i,t){let e=i;for(;e;)t(e),e=e.parentElement}function tre(i,t){return i.isEqualNode(Jse)&&o4(i,t)&&i.parentNode.childNodes.length===1}function o4(i,t){const e=i.parentNode;return!!e&&!!e.tagName&&t.includes(e.tagName.toLowerCase())}function nre(i,t,e){return t==" "&&i&&i.is("element")&&i.childCount==1&&e.includes(i.name)}function ire(i,t){return t==" "&&i&&i.is("element","span")&&i.childCount==1&&i.hasAttribute("data-cke-filler")}function eP(i){return i.is("element","br")&&i.hasAttribute("data-cke-filler")}function tP(i,t){return i.tagName==="BR"&&o4(i,t)&&i.parentNode.childNodes.length===1}function nP(i){i==="script"&&Tt("domconverter-unsafe-script-element-detected"),i==="style"&&Tt("domconverter-unsafe-style-element-detected")}function sre(i){if(!Xe.isGecko||!i.rangeCount)return!1;const t=i.getRangeAt(0).startContainer;try{Object.prototype.toString.call(t)}catch{return!0}return!1}class ho extends Ri(){constructor(e){super();b(this,"view");b(this,"document");b(this,"_isEnabled",!1);this.view=e,this.document=e.document}get isEnabled(){return this._isEnabled}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}destroy(){this.disable(),this.stopListening()}checkShouldIgnoreEventFromTarget(e){return e&&e.nodeType===3&&(e=e.parentNode),!e||e.nodeType!==1?!1:e.matches("[data-cke-ignore-events], [data-cke-ignore-events] *")}}class zu{constructor(t,e,n){b(this,"view");b(this,"document");b(this,"domEvent");b(this,"domTarget");this.view=t,this.document=t.document,this.domEvent=e,this.domTarget=e.target,ZN(this,n)}get target(){return this.view.domConverter.mapDomToView(this.domTarget)}preventDefault(){this.domEvent.preventDefault()}stopPropagation(){this.domEvent.stopPropagation()}}class fo extends ho{constructor(){super(...arguments);b(this,"useCapture",!1);b(this,"usePassive",!1)}observe(e){(typeof this.domEventType=="string"?[this.domEventType]:this.domEventType).forEach(s=>{this.listenTo(e,s,(r,o)=>{this.isEnabled&&!this.checkShouldIgnoreEventFromTarget(o.target)&&this.onDomEvent(o)},{useCapture:this.useCapture,usePassive:this.usePassive})})}stopObserving(e){this.stopListening(e)}fire(e,n,s){this.isEnabled&&this.document.fire(e,new zu(this.view,n,s))}}class rre extends fo{constructor(){super(...arguments);b(this,"domEventType",["keydown","keyup"])}onDomEvent(e){const n={keyCode:e.keyCode,altKey:e.altKey,ctrlKey:e.ctrlKey,shiftKey:e.shiftKey,metaKey:e.metaKey,get keystroke(){return Kl(this)}};this.fire(e.type,e,n)}}class ore extends ho{constructor(e){super(e);b(this,"_fireSelectionChangeDoneDebounced");this._fireSelectionChangeDoneDebounced=qs(n=>{this.document.fire("selectionChangeDone",n)},200)}observe(){const e=this.document;e.on("arrowKey",(n,s)=>{e.selection.isFake&&this.isEnabled&&s.preventDefault()},{context:"$capture"}),e.on("arrowKey",(n,s)=>{e.selection.isFake&&this.isEnabled&&this._handleSelectionMove(s.keyCode)},{priority:"lowest"})}stopObserving(){}destroy(){super.destroy(),this._fireSelectionChangeDoneDebounced.cancel()}_handleSelectionMove(e){const n=this.document.selection,s=new Fo(n.getRanges(),{backward:n.isBackward,fake:!1});(e==gt.arrowleft||e==gt.arrowup)&&s.setTo(s.getFirstPosition()),(e==gt.arrowright||e==gt.arrowdown)&&s.setTo(s.getLastPosition());const r={oldSelection:n,newSelection:s,domSelection:null};this.document.fire("selectionChange",r),this._fireSelectionChangeDoneDebounced(r)}}let a4=class extends ho{constructor(e){super(e);b(this,"domConverter");b(this,"_config");b(this,"_domElements");b(this,"_mutationObserver");this._config={childList:!0,characterData:!0,subtree:!0},this.domConverter=e.domConverter,this._domElements=new Set,this._mutationObserver=new window.MutationObserver(this._onMutations.bind(this))}flush(){this._onMutations(this._mutationObserver.takeRecords())}observe(e){this._domElements.add(e),this.isEnabled&&this._mutationObserver.observe(e,this._config)}stopObserving(e){if(this._domElements.delete(e),this.isEnabled){this._mutationObserver.disconnect();for(const n of this._domElements)this._mutationObserver.observe(n,this._config)}}enable(){super.enable();for(const e of this._domElements)this._mutationObserver.observe(e,this._config)}disable(){super.disable(),this._mutationObserver.disconnect()}destroy(){super.destroy(),this._mutationObserver.disconnect()}_onMutations(e){if(e.length===0)return;const n=this.domConverter,s=new Set,r=new Set;for(const a of e){const l=n.mapDomToView(a.target);l&&(l.is("uiElement")||l.is("rawElement")||a.type==="childList"&&!this._isBogusBrMutation(a)&&r.add(l))}for(const a of e){const l=n.mapDomToView(a.target);if(!(l&&(l.is("uiElement")||l.is("rawElement")))&&a.type==="characterData"){const c=n.findCorrespondingViewText(a.target);c&&!r.has(c.parent)?s.add(c):!c&&ds(a.target)&&r.add(n.mapDomToView(a.target.parentNode))}}const o=[];for(const a of s)o.push({type:"text",node:a});for(const a of r){const l=n.mapViewToDom(a),c=Array.from(a.getChildren()),h=Array.from(n.domChildrenToView(l,{withChildren:!1}));Kne(c,h,are)||o.push({type:"children",node:a})}o.length&&this.document.fire("mutations",{mutations:o})}_isBogusBrMutation(e){let n=null;return e.nextSibling===null&&e.removedNodes.length===0&&e.addedNodes.length==1&&(n=this.domConverter.domToView(e.addedNodes[0],{withChildren:!1})),n&&n.is("element","br")}};function are(i,t){if(!Array.isArray(i))return i===t?!0:i.is("$text")&&t.is("$text")?i.data===t.data:!1}class Yp extends fo{constructor(e){super(e);b(this,"_renderTimeoutId",null);b(this,"_isFocusChanging",!1);b(this,"domEventType",["focus","blur"]);this.useCapture=!0;const n=this.document;n.on("focus",()=>this._handleFocus()),n.on("blur",(s,r)=>this._handleBlur(r)),n.on("beforeinput",()=>{n.isFocused||this._handleFocus()},{priority:"highest"})}flush(){this._isFocusChanging&&(this._isFocusChanging=!1,this.document.isFocused=!0)}onDomEvent(e){this.fire(e.type,e)}destroy(){this._clearTimeout(),super.destroy()}_handleFocus(){this._clearTimeout(),this._isFocusChanging=!0,this._renderTimeoutId=setTimeout(()=>{this._renderTimeoutId=null,this.flush(),this.view.change(()=>{})},50)}_handleBlur(e){const n=this.document.selection.editableElement;(n===null||n===e.target)&&(this.document.isFocused=!1,this._isFocusChanging=!1,this.view.change(()=>{}))}_clearTimeout(){this._renderTimeoutId&&(clearTimeout(this._renderTimeoutId),this._renderTimeoutId=null)}}class lre extends ho{constructor(e){super(e);b(this,"mutationObserver");b(this,"focusObserver");b(this,"selection");b(this,"domConverter");b(this,"_documents");b(this,"_fireSelectionChangeDoneDebounced");b(this,"_clearInfiniteLoopInterval");b(this,"_documentIsSelectingInactivityTimeoutDebounced");b(this,"_loopbackCounter");this.mutationObserver=e.getObserver(a4),this.focusObserver=e.getObserver(Yp),this.selection=this.document.selection,this.domConverter=e.domConverter,this._documents=new WeakSet,this._fireSelectionChangeDoneDebounced=qs(n=>{this.document.fire("selectionChangeDone",n)},200),this._clearInfiniteLoopInterval=setInterval(()=>this._clearInfiniteLoop(),1e3),this._documentIsSelectingInactivityTimeoutDebounced=qs(()=>this.document.isSelecting=!1,5e3),this._loopbackCounter=0}observe(e){const n=e.ownerDocument,s=()=>{this.document.isSelecting=!0,this._documentIsSelectingInactivityTimeoutDebounced()},r=()=>{this.document.isSelecting&&(this._handleSelectionChange(n),this.document.isSelecting=!1,this._documentIsSelectingInactivityTimeoutDebounced.cancel())};this.listenTo(e,"selectstart",s,{priority:"highest"}),this.listenTo(e,"keydown",r,{priority:"highest",useCapture:!0}),this.listenTo(e,"keyup",r,{priority:"highest",useCapture:!0}),!this._documents.has(n)&&(this.listenTo(n,"mouseup",r,{priority:"highest",useCapture:!0}),this.listenTo(n,"selectionchange",()=>{this.document.isComposing&&!Xe.isAndroid||(this._handleSelectionChange(n),this._documentIsSelectingInactivityTimeoutDebounced())}),this.listenTo(this.view.document,"compositionstart",()=>{this._handleSelectionChange(n)},{priority:"lowest"}),this._documents.add(n))}stopObserving(e){this.stopListening(e)}destroy(){super.destroy(),clearInterval(this._clearInfiniteLoopInterval),this._fireSelectionChangeDoneDebounced.cancel(),this._documentIsSelectingInactivityTimeoutDebounced.cancel()}_reportInfiniteLoop(){}_handleSelectionChange(e){if(!this.isEnabled)return;const n=e.defaultView.getSelection();if(this.checkShouldIgnoreEventFromTarget(n.anchorNode))return;this.mutationObserver.flush();const s=this.domConverter.domSelectionToView(n);if(s.rangeCount==0){this.view.hasDomSelection=!1;return}if(this.view.hasDomSelection=!0,this.focusObserver.flush(),!(this.selection.isEqual(s)&&this.domConverter.isDomSelectionCorrect(n))){if(++this._loopbackCounter>60){this._reportInfiniteLoop();return}if(this.selection.isSimilar(s))this.view.forceRender();else{const r={oldSelection:this.selection,newSelection:s,domSelection:n};this.document.fire("selectionChange",r),this._fireSelectionChangeDoneDebounced(r)}}}_clearInfiniteLoop(){this._loopbackCounter=0}}class cre extends fo{constructor(e){super(e);b(this,"domEventType",["compositionstart","compositionupdate","compositionend"]);const n=this.document;n.on("compositionstart",()=>{n.isComposing=!0},{priority:"low"}),n.on("compositionend",()=>{n.isComposing=!1},{priority:"low"})}onDomEvent(e){this.fire(e.type,e,{data:e.data})}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */let l4=class{constructor(t,e={}){b(this,"_files");b(this,"_native");this._files=e.cacheFiles?iP(t):null,this._native=t}get files(){return this._files||(this._files=iP(this._native)),this._files}get types(){return this._native.types}getData(t){return this._native.getData(t)}setData(t,e){this._native.setData(t,e)}set effectAllowed(t){this._native.effectAllowed=t}get effectAllowed(){return this._native.effectAllowed}set dropEffect(t){this._native.dropEffect=t}get dropEffect(){return this._native.dropEffect}setDragImage(t,e,n){this._native.setDragImage(t,e,n)}get isCanceled(){return this._native.dropEffect=="none"||!!this._native.mozUserCancelled}};function iP(i){const t=Array.from(i.files||[]),e=Array.from(i.items||[]);return t.length?t:e.filter(n=>n.kind==="file").map(n=>n.getAsFile())}class ure extends fo{constructor(){super(...arguments);b(this,"domEventType","beforeinput")}onDomEvent(e){const n=e.getTargetRanges(),s=this.view,r=s.document;let o=null,a=null,l=[];if(e.dataTransfer&&(o=new l4(e.dataTransfer)),e.data!==null?a=e.data:o&&(a=o.getData("text/plain")),r.selection.isFake)l=Array.from(r.selection.getRanges());else if(n.length)l=n.map(c=>{const h=s.domConverter.domPositionToView(c.startContainer,c.startOffset),f=s.domConverter.domPositionToView(c.endContainer,c.endOffset);if(h)return s.createRange(h,f);if(f)return s.createRange(f)}).filter(c=>!!c);else if(Xe.isAndroid){const c=e.target.ownerDocument.defaultView.getSelection();l=Array.from(s.domConverter.domSelectionToView(c).getRanges())}if(Xe.isAndroid&&e.inputType=="insertCompositionText"&&a&&a.endsWith(`
`)){this.fire(e.type,e,{inputType:"insertParagraph",targetRanges:[s.createRange(l[0].end)]});return}if(e.inputType=="insertText"&&a&&a.includes(`
`)){const c=a.split(/\n{1,2}/g);let h=l;for(let f=0;f<c.length;f++){const m=c[f];m!=""&&(this.fire(e.type,e,{data:m,dataTransfer:o,targetRanges:h,inputType:e.inputType,isComposing:e.isComposing}),h=[r.selection.getFirstRange()]),f+1<c.length&&(this.fire(e.type,e,{inputType:"insertParagraph",targetRanges:h}),h=[r.selection.getFirstRange()])}return}this.fire(e.type,e,{data:a,dataTransfer:o,targetRanges:l,inputType:e.inputType,isComposing:e.isComposing})}}class dre extends ho{constructor(t){super(t),this.document.on("keydown",(e,n)=>{if(this.isEnabled&&Kie(n.keyCode)){const s=new rd(this.document,"arrowKey",this.document.selection.getFirstRange());this.document.fire(s,n),s.stop.called&&e.stop()}})}observe(){}stopObserving(){}}class hre extends ho{constructor(t){super(t);const e=this.document;e.on("keydown",(n,s)=>{if(!this.isEnabled||s.keyCode!=gt.tab||s.ctrlKey)return;const r=new rd(e,"tab",e.selection.getFirstRange());e.fire(r,s),r.stop.called&&n.stop()})}observe(){}stopObserving(){}}let fre=class extends Vt(){constructor(e){super();b(this,"document");b(this,"domConverter");b(this,"domRoots",new Map);b(this,"_renderer");b(this,"_initialDomRootAttributes",new WeakMap);b(this,"_observers",new Map);b(this,"_writer");b(this,"_ongoingChange",!1);b(this,"_postFixersInProgress",!1);b(this,"_renderingDisabled",!1);b(this,"_hasChangedSinceTheLastRendering",!1);this.document=new iw(e),this.domConverter=new rw(this.document),this.set("isRenderingInProgress",!1),this.set("hasDomSelection",!1),this._renderer=new Hse(this.domConverter,this.document.selection),this._renderer.bind("isFocused","isSelecting","isComposing").to(this.document,"isFocused","isSelecting","isComposing"),this._writer=new t4(this.document),this.addObserver(a4),this.addObserver(Yp),this.addObserver(lre),this.addObserver(rre),this.addObserver(ore),this.addObserver(cre),this.addObserver(dre),this.addObserver(ure),this.addObserver(hre),zse(this),Nse(this),this.on("render",()=>{this._render(),this.document.fire("layoutChanged"),this._hasChangedSinceTheLastRendering=!1}),this.listenTo(this.document.selection,"change",()=>{this._hasChangedSinceTheLastRendering=!0}),this.listenTo(this.document,"change:isFocused",()=>{this._hasChangedSinceTheLastRendering=!0}),Xe.isiOS&&this.listenTo(this.document,"blur",(n,s)=>{this.domConverter.mapDomToView(s.domEvent.relatedTarget)||this.domConverter._clearDomSelection()}),this.listenTo(this.document,"mutations",(n,{mutations:s})=>{s.forEach(r=>this._renderer.markToSync(r.type,r.node))},{priority:"low"}),this.listenTo(this.document,"mutations",()=>{this.forceRender()},{priority:"lowest"})}attachDomRoot(e,n="main"){const s=this.document.getRoot(n);s._name=e.tagName.toLowerCase();const r={};for(const{name:a,value:l}of Array.from(e.attributes))r[a]=l,a==="class"?this._writer.addClass(l.split(" "),s):s.hasAttribute(a)||this._writer.setAttribute(a,l,s);this._initialDomRootAttributes.set(e,r);const o=()=>{this._writer.setAttribute("contenteditable",(!s.isReadOnly).toString(),s),s.isReadOnly?this._writer.addClass("ck-read-only",s):this._writer.removeClass("ck-read-only",s)};o(),this.domRoots.set(n,e),this.domConverter.bindElements(e,s),this._renderer.markToSync("children",s),this._renderer.markToSync("attributes",s),this._renderer.domDocuments.add(e.ownerDocument),s.on("change:children",(a,l)=>this._renderer.markToSync("children",l)),s.on("change:attributes",(a,l)=>this._renderer.markToSync("attributes",l)),s.on("change:text",(a,l)=>this._renderer.markToSync("text",l)),s.on("change:isReadOnly",()=>this.change(o)),s.on("change",()=>{this._hasChangedSinceTheLastRendering=!0});for(const a of this._observers.values())a.observe(e,n)}detachDomRoot(e){const n=this.domRoots.get(e);Array.from(n.attributes).forEach(({name:r})=>n.removeAttribute(r));const s=this._initialDomRootAttributes.get(n);for(const r in s)n.setAttribute(r,s[r]);this.domRoots.delete(e),this.domConverter.unbindDomElement(n);for(const r of this._observers.values())r.stopObserving(n)}getDomRoot(e="main"){return this.domRoots.get(e)}addObserver(e){let n=this._observers.get(e);if(n)return n;n=new e(this),this._observers.set(e,n);for(const[s,r]of this.domRoots)n.observe(r,s);return n.enable(),n}getObserver(e){return this._observers.get(e)}disableObservers(){for(const e of this._observers.values())e.disable()}enableObservers(){for(const e of this._observers.values())e.enable()}scrollToTheSelection({alignToTop:e,forceScroll:n,viewportOffset:s=20,ancestorOffset:r=20}={}){const o=this.document.selection.getFirstRange();if(!o)return;const a=Rr({alignToTop:e,forceScroll:n,viewportOffset:s,ancestorOffset:r});typeof s=="number"&&(s={top:s,bottom:s,left:s,right:s});const l={target:this.domConverter.viewRangeToDom(o),viewportOffset:s,ancestorOffset:r,alignToTop:e,forceScroll:n};this.fire("scrollToTheSelection",l,a),zie(l)}focus(){if(!this.document.isFocused){const e=this.document.selection.editableElement;e&&(this.domConverter.focus(e),this.forceRender())}}change(e){if(this.isRenderingInProgress||this._postFixersInProgress)throw new B("cannot-change-view-tree",this);try{if(this._ongoingChange)return e(this._writer);this._ongoingChange=!0;const n=e(this._writer);return this._ongoingChange=!1,!this._renderingDisabled&&this._hasChangedSinceTheLastRendering&&(this._postFixersInProgress=!0,this.document._callPostFixers(this._writer),this._postFixersInProgress=!1,this.fire("render")),n}catch(n){/* istanbul ignore next -- @preserve */B.rethrowUnexpectedError(n,this)}}forceRender(){this._hasChangedSinceTheLastRendering=!0,this.getObserver(Yp).flush(),this.change(()=>{})}destroy(){for(const e of this._observers.values())e.destroy();this.document.destroy(),this.stopListening()}createPositionAt(e,n){return Pe._createAt(e,n)}createPositionAfter(e){return Pe._createAfter(e)}createPositionBefore(e){return Pe._createBefore(e)}createRange(e,n){return new vt(e,n)}createRangeOn(e){return vt._createOn(e)}createRangeIn(e){return vt._createIn(e)}createSelection(...e){return new Fo(...e)}_disableRendering(e){this._renderingDisabled=e,e==!1&&this.change(()=>{})}_render(){this.isRenderingInProgress=!0,this.disableObservers(),this._renderer.render(),this.enableObservers(),this.isRenderingInProgress=!1}};/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class Ya{is(){throw new Error("is() method is abstract")}}class wr extends Ya{constructor(e,n,s){super();b(this,"textNode");b(this,"data");b(this,"offsetInText");if(this.textNode=e,n<0||n>e.offsetSize)throw new B("model-textproxy-wrong-offsetintext",this);if(s<0||n+s>e.offsetSize)throw new B("model-textproxy-wrong-length",this);this.data=e.data.substring(n,n+s),this.offsetInText=n}get startOffset(){return this.textNode.startOffset!==null?this.textNode.startOffset+this.offsetInText:null}get offsetSize(){return this.data.length}get endOffset(){return this.startOffset!==null?this.startOffset+this.offsetSize:null}get isPartial(){return this.offsetSize!==this.textNode.offsetSize}get parent(){return this.textNode.parent}get root(){return this.textNode.root}getPath(){const e=this.textNode.getPath();return e.length>0&&(e[e.length-1]+=this.offsetInText),e}getAncestors(e={}){const n=[];let s=e.includeSelf?this:this.parent;for(;s;)n[e.parentFirst?"push":"unshift"](s),s=s.parent;return n}hasAttribute(e){return this.textNode.hasAttribute(e)}getAttribute(e){return this.textNode.getAttribute(e)}getAttributes(){return this.textNode.getAttributes()}getAttributeKeys(){return this.textNode.getAttributeKeys()}}wr.prototype.is=function(i){return i==="$textProxy"||i==="model:$textProxy"||i==="textProxy"||i==="model:textProxy"};class Mo{constructor(t){b(this,"direction");b(this,"boundaries");b(this,"singleCharacters");b(this,"shallow");b(this,"ignoreElementEnd");b(this,"_position");b(this,"_boundaryStartParent");b(this,"_boundaryEndParent");b(this,"_visitedParent");if(!t||!t.boundaries&&!t.startPosition)throw new B("model-tree-walker-no-start-position",null);const e=t.direction||"forward";if(e!="forward"&&e!="backward")throw new B("model-tree-walker-unknown-direction",t,{direction:e});this.direction=e,this.boundaries=t.boundaries||null,t.startPosition?this._position=t.startPosition.clone():this._position=de._createAt(this.boundaries[this.direction=="backward"?"end":"start"]),this.position.stickiness="toNone",this.singleCharacters=!!t.singleCharacters,this.shallow=!!t.shallow,this.ignoreElementEnd=!!t.ignoreElementEnd,this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null,this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null,this._visitedParent=this.position.parent}[Symbol.iterator](){return this}get position(){return this._position}skip(t){let e,n,s,r;do s=this.position,r=this._visitedParent,{done:e,value:n}=this.next();while(!e&&t(n));e||(this._position=s,this._visitedParent=r)}jumpTo(t){this._boundaryStartParent&&t.isBefore(this.boundaries.start)?t=this.boundaries.start:this._boundaryEndParent&&t.isAfter(this.boundaries.end)&&(t=this.boundaries.end),this._position=t.clone(),this._visitedParent=t.parent}next(){return this.direction=="forward"?this._next():this._previous()}_next(){const t=this.position,e=this.position.clone(),n=this._visitedParent;if(n.parent===null&&e.offset===n.maxOffset)return{done:!0,value:void 0};if(n===this._boundaryEndParent&&e.offset==this.boundaries.end.offset)return{done:!0,value:void 0};const s=Lh(e,n),r=s||c4(e,n,s);if(r&&r.is("model:element")){if(!this.shallow)e.path.push(0),this._visitedParent=r;else{if(this.boundaries&&this.boundaries.end.isBefore(e))return{done:!0,value:void 0};e.offset++}return this._position=e,vl("elementStart",r,t,e,1)}if(r&&r.is("model:$text")){let o;if(this.singleCharacters)o=1;else{let c=r.endOffset;this._boundaryEndParent==n&&this.boundaries.end.offset<c&&(c=this.boundaries.end.offset),o=c-e.offset}const a=e.offset-r.startOffset,l=new wr(r,a,o);return e.offset+=o,this._position=e,vl("text",l,t,e,o)}return e.path.pop(),e.offset++,this._position=e,this._visitedParent=n.parent,this.ignoreElementEnd?this._next():vl("elementEnd",n,t,e)}_previous(){const t=this.position,e=this.position.clone(),n=this._visitedParent;if(n.parent===null&&e.offset===0)return{done:!0,value:void 0};if(n==this._boundaryStartParent&&e.offset==this.boundaries.start.offset)return{done:!0,value:void 0};const s=e.parent,r=Lh(e,s),o=r||u4(e,s,r);if(o&&o.is("model:element"))return e.offset--,this.shallow?(this._position=e,vl("elementStart",o,t,e,1)):(e.path.push(o.maxOffset),this._position=e,this._visitedParent=o,this.ignoreElementEnd?this._previous():vl("elementEnd",o,t,e));if(o&&o.is("model:$text")){let a;if(this.singleCharacters)a=1;else{let h=o.startOffset;this._boundaryStartParent==n&&this.boundaries.start.offset>h&&(h=this.boundaries.start.offset),a=e.offset-h}const l=e.offset-o.startOffset,c=new wr(o,l-a,a);return e.offset-=a,this._position=e,vl("text",c,t,e,a)}return e.path.pop(),this._position=e,this._visitedParent=n.parent,vl("elementStart",n,t,e,1)}}function vl(i,t,e,n,s){return{done:!1,value:{type:i,item:t,previousPosition:e,nextPosition:n,length:s}}}class de extends Ya{constructor(e,n,s="toNone"){super();b(this,"root");b(this,"path");b(this,"stickiness");if(!e.is("element")&&!e.is("documentFragment"))throw new B("model-position-root-invalid",e);if(!Array.isArray(n)||n.length===0)throw new B("model-position-path-incorrect-format",e,{path:n});e.is("rootElement")?n=n.slice():(n=[...e.getPath(),...n],e=e.root),this.root=e,this.path=n,this.stickiness=s}get offset(){return this.path[this.path.length-1]}set offset(e){this.path[this.path.length-1]=e}get parent(){let e=this.root;for(let n=0;n<this.path.length-1;n++)if(e=e.getChildAtOffset(this.path[n]),!e)throw new B("model-position-path-incorrect",this,{position:this});if(e.is("$text"))throw new B("model-position-path-incorrect",this,{position:this});return e}get index(){return this.parent.offsetToIndex(this.offset)}get textNode(){return Lh(this,this.parent)}get nodeAfter(){const e=this.parent;return c4(this,e,Lh(this,e))}get nodeBefore(){const e=this.parent;return u4(this,e,Lh(this,e))}get isAtStart(){return this.offset===0}get isAtEnd(){return this.offset==this.parent.maxOffset}isValid(){if(this.offset<0)return!1;let e=this.root;for(let n=0;n<this.path.length-1;n++)if(e=e.getChildAtOffset(this.path[n]),!e)return!1;return this.offset<=e.maxOffset}compareWith(e){if(this.root!=e.root)return"different";const n=pi(this.path,e.path);switch(n){case"same":return"same";case"prefix":return"before";case"extension":return"after";default:return this.path[n]<e.path[n]?"before":"after"}}getLastMatchingPosition(e,n={}){n.startPosition=this;const s=new Mo(n);return s.skip(e),s.position}getParentPath(){return this.path.slice(0,-1)}getAncestors(){const e=this.parent;return e.is("documentFragment")?[e]:e.getAncestors({includeSelf:!0})}findAncestor(e){const n=this.parent;return n.is("element")?n.findAncestor(e,{includeSelf:!0}):null}getCommonPath(e){if(this.root!=e.root)return[];const n=pi(this.path,e.path),s=typeof n=="string"?Math.min(this.path.length,e.path.length):n;return this.path.slice(0,s)}getCommonAncestor(e){const n=this.getAncestors(),s=e.getAncestors();let r=0;for(;n[r]==s[r]&&n[r];)r++;return r===0?null:n[r-1]}getShiftedBy(e){const n=this.clone(),s=n.offset+e;return n.offset=s<0?0:s,n}isAfter(e){return this.compareWith(e)=="after"}isBefore(e){return this.compareWith(e)=="before"}isEqual(e){return this.compareWith(e)=="same"}isTouching(e){if(this.root!==e.root)return!1;const n=Math.min(this.path.length,e.path.length);for(let s=0;s<n;s++){const r=this.path[s]-e.path[s];if(r<-1||r>1)return!1;if(r===1)return sP(e,this,s);if(r===-1)return sP(this,e,s)}return this.path.length===e.path.length?!0:this.path.length>e.path.length?e_(this.path,n):e_(e.path,n)}hasSameParentAs(e){if(this.root!==e.root)return!1;const n=this.getParentPath(),s=e.getParentPath();return pi(n,s)=="same"}getTransformedByOperation(e){let n;switch(e.type){case"insert":n=this._getTransformedByInsertOperation(e);break;case"move":case"remove":case"reinsert":n=this._getTransformedByMoveOperation(e);break;case"split":n=this._getTransformedBySplitOperation(e);break;case"merge":n=this._getTransformedByMergeOperation(e);break;default:n=de._createAt(this);break}return n}_getTransformedByInsertOperation(e){return this._getTransformedByInsertion(e.position,e.howMany)}_getTransformedByMoveOperation(e){return this._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany)}_getTransformedBySplitOperation(e){const n=e.movedRange;return n.containsPosition(this)||n.start.isEqual(this)&&this.stickiness=="toNext"?this._getCombined(e.splitPosition,e.moveTargetPosition):e.graveyardPosition?this._getTransformedByMove(e.graveyardPosition,e.insertionPosition,1):this._getTransformedByInsertion(e.insertionPosition,1)}_getTransformedByMergeOperation(e){const n=e.movedRange,s=n.containsPosition(this)||n.start.isEqual(this);let r;return s?(r=this._getCombined(e.sourcePosition,e.targetPosition),e.sourcePosition.isBefore(e.targetPosition)&&(r=r._getTransformedByDeletion(e.deletionPosition,1))):this.isEqual(e.deletionPosition)?r=de._createAt(e.deletionPosition):r=this._getTransformedByMove(e.deletionPosition,e.graveyardPosition,1),r}_getTransformedByDeletion(e,n){const s=de._createAt(this);if(this.root!=e.root)return s;if(pi(e.getParentPath(),this.getParentPath())=="same"){if(e.offset<this.offset){if(e.offset+n>this.offset)return null;s.offset-=n}}else if(pi(e.getParentPath(),this.getParentPath())=="prefix"){const r=e.path.length-1;if(e.offset<=this.path[r]){if(e.offset+n>this.path[r])return null;s.path[r]-=n}}return s}_getTransformedByInsertion(e,n){const s=de._createAt(this);if(this.root!=e.root)return s;if(pi(e.getParentPath(),this.getParentPath())=="same")(e.offset<this.offset||e.offset==this.offset&&this.stickiness!="toPrevious")&&(s.offset+=n);else if(pi(e.getParentPath(),this.getParentPath())=="prefix"){const r=e.path.length-1;e.offset<=this.path[r]&&(s.path[r]+=n)}return s}_getTransformedByMove(e,n,s){if(n=n._getTransformedByDeletion(e,s),e.isEqual(n))return de._createAt(this);const r=this._getTransformedByDeletion(e,s);return r===null||e.isEqual(this)&&this.stickiness=="toNext"||e.getShiftedBy(s).isEqual(this)&&this.stickiness=="toPrevious"?this._getCombined(e,n):r._getTransformedByInsertion(n,s)}_getCombined(e,n){const s=e.path.length-1,r=de._createAt(n);return r.stickiness=this.stickiness,r.offset=r.offset+this.path[s]-e.offset,r.path=[...r.path,...this.path.slice(s+1)],r}toJSON(){return{root:this.root.toJSON(),path:Array.from(this.path),stickiness:this.stickiness}}clone(){return new this.constructor(this.root,this.path,this.stickiness)}static _createAt(e,n,s="toNone"){if(e.is("model:position"))return new de(e.root,e.path,e.stickiness);{const r=e;if(n=="end")n=r.maxOffset;else{if(n=="before")return this._createBefore(r,s);if(n=="after")return this._createAfter(r,s);if(n!==0&&!n)throw new B("model-createpositionat-offset-required",[this,e])}if(!r.is("element")&&!r.is("documentFragment"))throw new B("model-position-parent-incorrect",[this,e]);const o=r.getPath();return o.push(n),new this(r.root,o,s)}}static _createAfter(e,n){if(!e.parent)throw new B("model-position-after-root",[this,e],{root:e});return this._createAt(e.parent,e.endOffset,n)}static _createBefore(e,n){if(!e.parent)throw new B("model-position-before-root",e,{root:e});return this._createAt(e.parent,e.startOffset,n)}static fromJSON(e,n){if(e.root==="$graveyard"){const s=new de(n.graveyard,e.path);return s.stickiness=e.stickiness,s}if(!n.getRoot(e.root))throw new B("model-position-fromjson-no-root",n,{rootName:e.root});return new de(n.getRoot(e.root),e.path,e.stickiness)}}de.prototype.is=function(i){return i==="position"||i==="model:position"};function Lh(i,t){const e=t.getChildAtOffset(i.offset);return e&&e.is("$text")&&e.startOffset<i.offset?e:null}function c4(i,t,e){return e!==null?null:t.getChildAtOffset(i.offset)}function u4(i,t,e){return e!==null?null:t.getChild(t.offsetToIndex(i.offset)-1)}function sP(i,t,e){return!(e+1===i.path.length||!e_(t.path,e+1)||!mre(i,e+1))}function e_(i,t){for(;t<i.length;){if(i[t]!==0)return!1;t++}return!0}function mre(i,t){let e=i.parent,n=i.path.length-1,s=0;for(;n>=t;){if(i.path[n]+s!==e.maxOffset)return!1;s=1,n--,e=e.parent}return!0}class ee extends Ya{constructor(e,n){super();b(this,"start");b(this,"end");this.start=de._createAt(e),this.end=n?de._createAt(n):de._createAt(e),this.start.stickiness=this.isCollapsed?"toNone":"toNext",this.end.stickiness=this.isCollapsed?"toNone":"toPrevious"}*[Symbol.iterator](){yield*new Mo({boundaries:this,ignoreElementEnd:!0})}get isCollapsed(){return this.start.isEqual(this.end)}get isFlat(){const e=this.start.getParentPath(),n=this.end.getParentPath();return pi(e,n)=="same"}get root(){return this.start.root}containsPosition(e){return e.isAfter(this.start)&&e.isBefore(this.end)}containsRange(e,n=!1){e.isCollapsed&&(n=!1);const s=this.containsPosition(e.start)||n&&this.start.isEqual(e.start),r=this.containsPosition(e.end)||n&&this.end.isEqual(e.end);return s&&r}containsItem(e){const n=de._createBefore(e);return this.containsPosition(n)||this.start.isEqual(n)}isEqual(e){return this.start.isEqual(e.start)&&this.end.isEqual(e.end)}isIntersecting(e){return this.start.isBefore(e.end)&&this.end.isAfter(e.start)}getDifference(e){const n=[];return this.isIntersecting(e)?(this.containsPosition(e.start)&&n.push(new ee(this.start,e.start)),this.containsPosition(e.end)&&n.push(new ee(e.end,this.end))):n.push(new ee(this.start,this.end)),n}getIntersection(e){if(this.isIntersecting(e)){let n=this.start,s=this.end;return this.containsPosition(e.start)&&(n=e.start),this.containsPosition(e.end)&&(s=e.end),new ee(n,s)}return null}getJoined(e,n=!1){let s=this.isIntersecting(e);if(s||(this.start.isBefore(e.start)?s=n?this.end.isTouching(e.start):this.end.isEqual(e.start):s=n?e.end.isTouching(this.start):e.end.isEqual(this.start)),!s)return null;let r=this.start,o=this.end;return e.start.isBefore(r)&&(r=e.start),e.end.isAfter(o)&&(o=e.end),new ee(r,o)}getMinimalFlatRanges(){const e=[],n=this.start.getCommonPath(this.end).length,s=de._createAt(this.start);let r=s.parent;for(;s.path.length>n+1;){const o=r.maxOffset-s.offset;o!==0&&e.push(new ee(s,s.getShiftedBy(o))),s.path=s.path.slice(0,-1),s.offset++,r=r.parent}for(;s.path.length<=this.end.path.length;){const o=this.end.path[s.path.length-1],a=o-s.offset;a!==0&&e.push(new ee(s,s.getShiftedBy(a))),s.offset=o,s.path.push(0)}return e}getWalker(e={}){return e.boundaries=this,new Mo(e)}*getItems(e={}){e.boundaries=this,e.ignoreElementEnd=!0;const n=new Mo(e);for(const s of n)yield s.item}*getPositions(e={}){e.boundaries=this;const n=new Mo(e);yield n.position;for(const s of n)yield s.nextPosition}getTransformedByOperation(e){switch(e.type){case"insert":return this._getTransformedByInsertOperation(e);case"move":case"remove":case"reinsert":return this._getTransformedByMoveOperation(e);case"split":return[this._getTransformedBySplitOperation(e)];case"merge":return[this._getTransformedByMergeOperation(e)]}return[new ee(this.start,this.end)]}getTransformedByOperations(e){const n=[new ee(this.start,this.end)];for(const s of e)for(let r=0;r<n.length;r++){const o=n[r].getTransformedByOperation(s);n.splice(r,1,...o),r+=o.length-1}for(let s=0;s<n.length;s++){const r=n[s];for(let o=s+1;o<n.length;o++){const a=n[o];(r.containsRange(a)||a.containsRange(r)||r.isEqual(a))&&n.splice(o,1)}}return n}getCommonAncestor(){return this.start.getCommonAncestor(this.end)}getContainedElement(){if(this.isCollapsed)return null;const e=this.start.nodeAfter,n=this.end.nodeBefore;return e&&e.is("element")&&e===n?e:null}toJSON(){return{start:this.start.toJSON(),end:this.end.toJSON()}}clone(){return new this.constructor(this.start,this.end)}_getTransformedByInsertOperation(e,n=!1){return this._getTransformedByInsertion(e.position,e.howMany,n)}_getTransformedByMoveOperation(e,n=!1){const s=e.sourcePosition,r=e.howMany,o=e.targetPosition;return this._getTransformedByMove(s,o,r,n)}_getTransformedBySplitOperation(e){const n=this.start._getTransformedBySplitOperation(e);let s=this.end._getTransformedBySplitOperation(e);return this.end.isEqual(e.insertionPosition)&&(s=this.end.getShiftedBy(1)),n.root!=s.root&&(s=this.end.getShiftedBy(-1)),new ee(n,s)}_getTransformedByMergeOperation(e){if(this.start.isEqual(e.targetPosition)&&this.end.isEqual(e.deletionPosition))return new ee(this.start);let n=this.start._getTransformedByMergeOperation(e),s=this.end._getTransformedByMergeOperation(e);return n.root!=s.root&&(s=this.end.getShiftedBy(-1)),n.isAfter(s)?(e.sourcePosition.isBefore(e.targetPosition)?(n=de._createAt(s),n.offset=0):(e.deletionPosition.isEqual(n)||(s=e.deletionPosition),n=e.targetPosition),new ee(n,s)):new ee(n,s)}_getTransformedByInsertion(e,n,s=!1){if(s&&this.containsPosition(e))return[new ee(this.start,e),new ee(e.getShiftedBy(n),this.end._getTransformedByInsertion(e,n))];{const r=new ee(this.start,this.end);return r.start=r.start._getTransformedByInsertion(e,n),r.end=r.end._getTransformedByInsertion(e,n),[r]}}_getTransformedByMove(e,n,s,r=!1){if(this.isCollapsed){const m=this.start._getTransformedByMove(e,n,s);return[new ee(m)]}const o=ee._createFromPositionAndShift(e,s),a=n._getTransformedByDeletion(e,s);if(this.containsPosition(n)&&!r&&(o.containsPosition(this.start)||o.containsPosition(this.end))){const m=this.start._getTransformedByMove(e,n,s),p=this.end._getTransformedByMove(e,n,s);return[new ee(m,p)]}let l;const c=this.getDifference(o);let h=null;const f=this.getIntersection(o);if(c.length==1?h=new ee(c[0].start._getTransformedByDeletion(e,s),c[0].end._getTransformedByDeletion(e,s)):c.length==2&&(h=new ee(this.start,this.end._getTransformedByDeletion(e,s))),h?l=h._getTransformedByInsertion(a,s,f!==null||r):l=[],f){const m=new ee(f.start._getCombined(o.start,a),f.end._getCombined(o.start,a));l.length==2?l.splice(1,0,m):l.push(m)}return l}_getTransformedByDeletion(e,n){let s=this.start._getTransformedByDeletion(e,n),r=this.end._getTransformedByDeletion(e,n);return s==null&&r==null?null:(s==null&&(s=e),r==null&&(r=e),new ee(s,r))}static _createFromPositionAndShift(e,n){const s=e,r=e.getShiftedBy(n);return n>0?new this(s,r):new this(r,s)}static _createIn(e){return new this(de._createAt(e,0),de._createAt(e,e.maxOffset))}static _createOn(e){return this._createFromPositionAndShift(de._createBefore(e),e.offsetSize)}static _createFromRanges(e){if(e.length===0)throw new B("range-create-from-ranges-empty-array",null);if(e.length==1)return e[0].clone();const n=e[0];e.sort((o,a)=>o.start.isAfter(a.start)?1:-1);const s=e.indexOf(n),r=new this(n.start,n.end);for(let o=s-1;o>=0&&e[o].end.isEqual(r.start);o--)r.start=de._createAt(e[o].start);for(let o=s+1;o<e.length&&e[o].start.isEqual(r.end);o++)r.end=de._createAt(e[o].end);return r}static fromJSON(e,n){return new this(de.fromJSON(e.start,n),de.fromJSON(e.end,n))}}ee.prototype.is=function(i){return i==="range"||i==="model:range"};class d4 extends Ft(){constructor(){super();b(this,"_modelToViewMapping",new WeakMap);b(this,"_viewToModelMapping",new WeakMap);b(this,"_viewToModelLengthCallbacks",new Map);b(this,"_markerNameToElements",new Map);b(this,"_elementToMarkerNames",new Map);b(this,"_deferredBindingRemovals",new Map);b(this,"_unboundMarkerNames",new Set);b(this,"_cache",new gre);this.on("modelToViewPosition",(e,n)=>{if(n.viewPosition)return;const s=this._modelToViewMapping.get(n.modelPosition.parent);if(!s)throw new B("mapping-model-position-view-parent-not-found",this,{modelPosition:n.modelPosition});n.viewPosition=this.findPositionIn(s,n.modelPosition.offset)},{priority:"low"}),this.on("viewToModelPosition",(e,n)=>{if(n.modelPosition)return;const s=this.findMappedViewAncestor(n.viewPosition),r=this._viewToModelMapping.get(s),o=this._toModelOffset(n.viewPosition.parent,n.viewPosition.offset,s);n.modelPosition=de._createAt(r,o)},{priority:"low"})}bindElements(e,n){this._modelToViewMapping.set(e,n),this._viewToModelMapping.set(n,e)}unbindViewElement(e,n={}){const s=this.toModelElement(e);if(this._elementToMarkerNames.has(e))for(const r of this._elementToMarkerNames.get(e))this._unboundMarkerNames.add(r);n.defer?this._deferredBindingRemovals.set(e,e.root):(this._viewToModelMapping.delete(e)&&this._cache.stopTracking(e),this._modelToViewMapping.get(s)==e&&this._modelToViewMapping.delete(s))}unbindModelElement(e){const n=this.toViewElement(e);this._modelToViewMapping.delete(e),this._viewToModelMapping.get(n)==e&&this._viewToModelMapping.delete(n)&&this._cache.stopTracking(n)}bindElementToMarker(e,n){const s=this._markerNameToElements.get(n)||new Set;s.add(e);const r=this._elementToMarkerNames.get(e)||new Set;r.add(n),this._markerNameToElements.set(n,s),this._elementToMarkerNames.set(e,r)}unbindElementFromMarkerName(e,n){const s=this._markerNameToElements.get(n);s&&(s.delete(e),s.size==0&&this._markerNameToElements.delete(n));const r=this._elementToMarkerNames.get(e);r&&(r.delete(n),r.size==0&&this._elementToMarkerNames.delete(e))}flushUnboundMarkerNames(){const e=Array.from(this._unboundMarkerNames);return this._unboundMarkerNames.clear(),e}flushDeferredBindings(){for(const[e,n]of this._deferredBindingRemovals)e.root==n&&this.unbindViewElement(e);this._deferredBindingRemovals=new Map}clearBindings(){this._modelToViewMapping=new WeakMap,this._viewToModelMapping=new WeakMap,this._markerNameToElements=new Map,this._elementToMarkerNames=new Map,this._unboundMarkerNames=new Set,this._deferredBindingRemovals=new Map}toModelElement(e){return this._viewToModelMapping.get(e)}toViewElement(e){return this._modelToViewMapping.get(e)}toModelRange(e){return new ee(this.toModelPosition(e.start),this.toModelPosition(e.end))}toViewRange(e){return new vt(this.toViewPosition(e.start),this.toViewPosition(e.end))}toModelPosition(e){const n={viewPosition:e,mapper:this};return this.fire("viewToModelPosition",n),n.modelPosition}toViewPosition(e,n={}){const s={modelPosition:e,mapper:this,isPhantom:n.isPhantom};return this.fire("modelToViewPosition",s),s.viewPosition}markerNameToElements(e){const n=this._markerNameToElements.get(e);if(!n)return null;const s=new Set;for(const r of n)if(r.is("attributeElement"))for(const o of r.getElementsWithSameId())s.add(o);else s.add(r);return s}registerViewToModelLength(e,n){this._viewToModelLengthCallbacks.set(e,n)}findMappedViewAncestor(e){let n=e.parent;for(;!this._viewToModelMapping.has(n);)n=n.parent;return n}_toModelOffset(e,n,s){if(s!=e){const o=this._toModelOffset(e.parent,e.index,s),a=this._toModelOffset(e,n,e);return o+a}if(e.is("$text"))return n;let r=0;for(let o=0;o<n;o++)r+=this.getModelLength(e.getChild(o));return r}getModelLength(e){const n=[e];let s=0;for(;n.length>0;){const r=n.pop(),o=r.name&&this._viewToModelLengthCallbacks.size>0&&this._viewToModelLengthCallbacks.get(r.name);if(o)s+=o(r);else if(this._viewToModelMapping.has(r))s+=1;else if(r.is("$text"))s+=r.data.length;else{if(r.is("uiElement"))continue;for(const a of r.getChildren())n.push(a)}}return s}findPositionIn(e,n){if(n===0)return this._moveViewPositionToTextNode(new Pe(e,0));if(this._viewToModelLengthCallbacks.size==0&&this._viewToModelMapping.has(e)){const r=this._cache.getClosest(e,n);return this._findPositionStartingFrom(r.viewPosition,r.modelOffset,n,e,!0)}else return this._findPositionStartingFrom(new Pe(e,0),0,n,e,!1)}_findPositionStartingFrom(e,n,s,r,o){let a=e.parent,l=e.offset;if(a.is("$text"))return new Pe(a,s-n);let c,h=n,f=0;for(;h<s;){if(c=a.getChild(l),!c){if(a==r)throw new B("mapping-model-offset-not-found",this,{modelOffset:s,viewContainer:r});l=a.parent.getChildIndex(a)+1,a=a.parent;continue}f=this.getModelLength(c),h+=f,l++,o&&this._cache.save(a,l,r,h)}return h==s?this._moveViewPositionToTextNode(new Pe(a,l)):this._findPositionStartingFrom(new Pe(c,0),h-f,s,r,o)}_moveViewPositionToTextNode(e){const n=e.nodeBefore,s=e.nodeAfter;return n&&n.is("view:$text")?new Pe(n,n.data.length):s&&s.is("view:$text")?new Pe(s,0):e}}class gre extends Ft(){constructor(){super(...arguments);b(this,"_cachedMapping",new WeakMap);b(this,"_nodeToCacheListIndex",new WeakMap);b(this,"_invalidateOnChildrenChangeCallback",(e,n,s)=>{this._clearCacheInsideParent(n,s.index)});b(this,"_invalidateOnTextChangeCallback",(e,n)=>{this._clearCacheStartingBefore(n)})}save(e,n,s,r){const o=this._cachedMapping.get(s),a=o.cacheMap.get(r);if(a){const f=e.getChild(n-1),m=a.viewPosition.nodeBefore?this._nodeToCacheListIndex.get(a.viewPosition.nodeBefore):0;this._nodeToCacheListIndex.set(f,m);return}const c={viewPosition:new Pe(e,n),modelOffset:r};o.maxModelOffset=r>o.maxModelOffset?r:o.maxModelOffset,o.cacheMap.set(r,c);let h=o.cacheList.length-1;for(;h>=0&&o.cacheList[h].modelOffset>r;)h--;if(o.cacheList.splice(h+1,0,c),n>0){const f=e.getChild(n-1);this._nodeToCacheListIndex.set(f,h+1)}}getClosest(e,n){const s=this._cachedMapping.get(e);let r;if(s)if(n>s.maxModelOffset)r=s.cacheList[s.cacheList.length-1];else{const a=s.cacheMap.get(n);a?r=a:r=this._findInCacheList(s.cacheList,n)}else r=this.startTracking(e);const o=this._hoistViewPosition(r.viewPosition);return{modelOffset:r.modelOffset,viewPosition:o}}_hoistViewPosition(e){for(;e.parent.parent&&!this._cachedMapping.has(e.parent)&&e.isAtEnd;){const n=e.parent.parent,s=n.getChildIndex(e.parent)+1;e=new Pe(n,s)}return e}startTracking(e){const s={viewPosition:new Pe(e,0),modelOffset:0},r={maxModelOffset:0,cacheList:[s],cacheMap:new Map([[0,s]])};return this._cachedMapping.set(e,r),e.on("change:children",this._invalidateOnChildrenChangeCallback),e.on("change:text",this._invalidateOnTextChangeCallback),s}stopTracking(e){e.off("change:children",this._invalidateOnChildrenChangeCallback),e.off("change:text",this._invalidateOnTextChangeCallback),this._cachedMapping.delete(e)}_clearCacheInsideParent(e,n){if(n==0)this._cachedMapping.has(e)?this._clearCacheAll(e):this._clearCacheStartingBefore(e);else{const s=e.getChild(n-1);this._clearCacheStartingBefore(s)}}_clearCacheAll(e){const n=this._cachedMapping.get(e);n.maxModelOffset>0&&(n.maxModelOffset=0,n.cacheList.length=1,n.cacheMap.clear(),n.cacheMap.set(0,n.cacheList[0]))}_clearCacheStartingBefore(e){const n=this._nodeToCacheListIndex.get(e);if(n===void 0){const r=e.parent;this._cachedMapping.has(r)||this._clearCacheStartingBefore(r);return}let s=e.parent;for(;!this._cachedMapping.has(s);)s=s.parent;this._clearCacheFromIndex(s,n)}_clearCacheFromIndex(e,n){n===0&&(n=1);const s=this._cachedMapping.get(e),r=s.cacheList[n-1];if(!r)return;s.maxModelOffset=r.modelOffset;const o=s.cacheList.splice(n);for(const a of o){s.cacheMap.delete(a.modelOffset);const l=a.viewPosition.nodeBefore;this._nodeToCacheListIndex.delete(l)}}_findInCacheList(e,n){let s=0,r=e.length-1,o=r-s>>1,a=e[o];for(;s<r;)a.modelOffset<n?s=o+1:r=o-1,o=s+(r-s>>1),a=e[o];return a.modelOffset<=n?a:e[o-1]}}class pre{constructor(){b(this,"_consumable",new Map);b(this,"_textProxyRegistry",new Map)}add(t,e){e=Eg(e),t instanceof wr&&(t=this._getSymbolForTextProxy(t)),this._consumable.has(t)||this._consumable.set(t,new Map),this._consumable.get(t).set(e,!0)}consume(t,e){return e=Eg(e),t instanceof wr&&(t=this._getSymbolForTextProxy(t)),this.test(t,e)?(this._consumable.get(t).set(e,!1),!0):!1}test(t,e){e=Eg(e),t instanceof wr&&(t=this._getSymbolForTextProxy(t));const n=this._consumable.get(t);if(n===void 0)return null;const s=n.get(e);return s===void 0?null:s}revert(t,e){e=Eg(e),t instanceof wr&&(t=this._getSymbolForTextProxy(t));const n=this.test(t,e);return n===!1?(this._consumable.get(t).set(e,!0),!0):n===!0?!1:null}verifyAllConsumed(t){const e=[];for(const[n,s]of this._consumable)for(const[r,o]of s){const a=r.split(":")[0];o&&t==a&&e.push({event:r,item:n.name||n.description})}if(e.length)throw new B("conversion-model-consumable-not-consumed",null,{items:e})}_getSymbolForTextProxy(t){let e=null;const n=this._textProxyRegistry.get(t.startOffset);if(n){const s=n.get(t.endOffset);s&&(e=s.get(t.parent))}return e||(e=this._addSymbolForTextProxy(t)),e}_addSymbolForTextProxy(t){const e=t.startOffset,n=t.endOffset,s=t.parent,r=Symbol("$textProxy:"+t.data);let o,a;return o=this._textProxyRegistry.get(e),o||(o=new Map,this._textProxyRegistry.set(e,o)),a=o.get(n),a||(a=new Map,o.set(n,a)),a.set(s,r),r}}function Eg(i){const t=i.split(":");return t[0]=="insert"?t[0]:t[0]=="addMarker"||t[0]=="removeMarker"?i:t.length>1?t[0]+":"+t[1]:t[0]}class h4 extends Ft(){constructor(e){super();b(this,"_conversionApi");b(this,"_firedEventsMap");this._conversionApi={dispatcher:this,...e},this._firedEventsMap=new WeakMap}convertChanges(e,n,s){const r=this._createConversionApi(s,e.getRefreshedItems());for(const a of e.getMarkersToRemove())this._convertMarkerRemove(a.name,a.range,r);const o=this._reduceChanges(e.getChanges());for(const a of o)a.type==="insert"?this._convertInsert(ee._createFromPositionAndShift(a.position,a.length),r):a.type==="reinsert"?this._convertReinsert(ee._createFromPositionAndShift(a.position,a.length),r):a.type==="remove"?this._convertRemove(a.position,a.length,a.name,r):this._convertAttribute(a.range,a.attributeKey,a.attributeOldValue,a.attributeNewValue,r);r.mapper.flushDeferredBindings();for(const a of r.mapper.flushUnboundMarkerNames()){const l=n.get(a).getRange();this._convertMarkerRemove(a,l,r),this._convertMarkerAdd(a,l,r)}for(const a of e.getMarkersToAdd())this._convertMarkerAdd(a.name,a.range,r);r.consumable.verifyAllConsumed("insert")}convert(e,n,s,r={}){const o=this._createConversionApi(s,void 0,r);this._convertInsert(e,o);for(const[a,l]of n)this._convertMarkerAdd(a,l,o);o.consumable.verifyAllConsumed("insert")}convertSelection(e,n,s){const r=this._createConversionApi(s);this.fire("cleanSelection",{selection:e},r);const o=e.getFirstPosition().root;if(!r.mapper.toViewElement(o))return;const a=Array.from(n.getMarkersAtPosition(e.getFirstPosition()));if(this._addConsumablesForSelection(r.consumable,e,a),this.fire("selection",{selection:e},r),!!e.isCollapsed){for(const l of a)if(r.consumable.test(e,"addMarker:"+l.name)){const c=l.getRange();if(!bre(e.getFirstPosition(),l,r.mapper))continue;const h={item:e,markerName:l.name,markerRange:c};this.fire(`addMarker:${l.name}`,h,r)}for(const l of e.getAttributeKeys())if(r.consumable.test(e,"attribute:"+l)){const c={item:e,range:e.getFirstRange(),attributeKey:l,attributeOldValue:null,attributeNewValue:e.getAttribute(l)};this.fire(`attribute:${l}:$text`,c,r)}}}_convertInsert(e,n,s={}){s.doNotAddConsumables||this._addConsumablesForInsert(n.consumable,e);for(const r of e.getWalker({shallow:!0}))this._testAndFire("insert",rP(r),n)}_convertRemove(e,n,s,r){this.fire(`remove:${s}`,{position:e,length:n},r)}_convertAttribute(e,n,s,r,o){this._addConsumablesForRange(o.consumable,e,`attribute:${n}`);for(const a of e){const l={item:a.item,range:ee._createFromPositionAndShift(a.previousPosition,a.length),attributeKey:n,attributeOldValue:s,attributeNewValue:r};this._testAndFire(`attribute:${n}`,l,o)}}_convertReinsert(e,n){const s=Array.from(e.getWalker({shallow:!0}));this._addConsumablesForInsert(n.consumable,s);for(const r of s.map(rP))this._testAndFire("insert",{...r,reconversion:!0},n)}_convertMarkerAdd(e,n,s){if(n.root.rootName=="$graveyard")return;const r=`addMarker:${e}`;if(s.consumable.add(n,r),this.fire(r,{markerName:e,markerRange:n},s),!!s.consumable.consume(n,r)){this._addConsumablesForRange(s.consumable,n,r);for(const o of n.getItems()){if(!s.consumable.test(o,r))continue;const a={item:o,range:ee._createOn(o),markerName:e,markerRange:n};this.fire(r,a,s)}}}_convertMarkerRemove(e,n,s){n.root.rootName!="$graveyard"&&this.fire(`removeMarker:${e}`,{markerName:e,markerRange:n},s)}_reduceChanges(e){const n={changes:e};return this.fire("reduceChanges",n),n.changes}_addConsumablesForInsert(e,n){for(const s of n){const r=s.item;if(e.test(r,"insert")===null){e.add(r,"insert");for(const o of r.getAttributeKeys())e.add(r,"attribute:"+o)}}return e}_addConsumablesForRange(e,n,s){for(const r of n.getItems())e.add(r,s);return e}_addConsumablesForSelection(e,n,s){e.add(n,"selection");for(const r of s)e.add(n,"addMarker:"+r.name);for(const r of n.getAttributeKeys())e.add(n,"attribute:"+r);return e}_testAndFire(e,n,s){const r=wre(e,n),o=n.item.is("$textProxy")?s.consumable._getSymbolForTextProxy(n.item):n.item,a=this._firedEventsMap.get(s),l=a.get(o);if(!l)a.set(o,new Set([r]));else if(!l.has(r))l.add(r);else return;this.fire(r,n,s)}_testAndFireAddAttributes(e,n){const s={item:e,range:ee._createOn(e)};for(const r of s.item.getAttributeKeys())s.attributeKey=r,s.attributeOldValue=null,s.attributeNewValue=s.item.getAttribute(r),this._testAndFire(`attribute:${r}`,s,n)}_createConversionApi(e,n=new Set,s={}){const r={...this._conversionApi,consumable:new pre,writer:e,options:s,convertItem:o=>this._convertInsert(ee._createOn(o),r),convertChildren:o=>this._convertInsert(ee._createIn(o),r,{doNotAddConsumables:!0}),convertAttributes:o=>this._testAndFireAddAttributes(o,r),canReuseView:o=>!n.has(r.mapper.toModelElement(o))};return this._firedEventsMap.set(r,new Map),r}}function bre(i,t,e){const n=t.getRange(),s=Array.from(i.getAncestors());return s.shift(),s.reverse(),!s.some(o=>{if(n.containsItem(o))return!!e.toViewElement(o).getCustomProperty("addHighlight")})}function wre(i,t){const e=t.item.is("element")?t.item.name:"$text";return`${i}:${e}`}function rP(i){return{item:i.item,range:ee._createFromPositionAndShift(i.previousPosition,i.length)}}let rc=class extends Ya{constructor(e){super();b(this,"parent",null);b(this,"_attrs");b(this,"_index",null);b(this,"_startOffset",null);this._attrs=xr(e)}get document(){return null}get index(){return this._index}get startOffset(){return this._startOffset}get offsetSize(){return 1}get endOffset(){return this.startOffset===null?null:this.startOffset+this.offsetSize}get nextSibling(){const e=this.index;return e!==null&&this.parent.getChild(e+1)||null}get previousSibling(){const e=this.index;return e!==null&&this.parent.getChild(e-1)||null}get root(){let e=this;for(;e.parent;)e=e.parent;return e}isAttached(){return this.parent===null?!1:this.root.isAttached()}getPath(){const e=[];let n=this;for(;n.parent;)e.unshift(n.startOffset),n=n.parent;return e}getAncestors(e={}){const n=[];let s=e.includeSelf?this:this.parent;for(;s;)n[e.parentFirst?"push":"unshift"](s),s=s.parent;return n}getCommonAncestor(e,n={}){const s=this.getAncestors(n),r=e.getAncestors(n);let o=0;for(;s[o]==r[o]&&s[o];)o++;return o===0?null:s[o-1]}isBefore(e){if(this==e||this.root!==e.root)return!1;const n=this.getPath(),s=e.getPath(),r=pi(n,s);switch(r){case"prefix":return!0;case"extension":return!1;default:return n[r]<s[r]}}isAfter(e){return this==e||this.root!==e.root?!1:!this.isBefore(e)}hasAttribute(e){return this._attrs.has(e)}getAttribute(e){return this._attrs.get(e)}getAttributes(){return this._attrs.entries()}getAttributeKeys(){return this._attrs.keys()}toJSON(){const e={};return this._attrs.size&&(e.attributes=Array.from(this._attrs).reduce((n,s)=>(n[s[0]]=s[1],n),{})),e}_clone(e){return new this.constructor(this._attrs)}_remove(){this.parent._removeChildren(this.index)}_setAttribute(e,n){this._attrs.set(e,n)}_setAttributesTo(e){this._attrs=xr(e)}_removeAttribute(e){return this._attrs.delete(e)}_clearAttributes(){this._attrs.clear()}};rc.prototype.is=function(i){return i==="node"||i==="model:node"};class hs extends Ft(Ya){constructor(...e){super();b(this,"_lastRangeBackward",!1);b(this,"_attrs",new Map);b(this,"_ranges",[]);e.length&&this.setTo(...e)}get anchor(){if(this._ranges.length>0){const e=this._ranges[this._ranges.length-1];return this._lastRangeBackward?e.end:e.start}return null}get focus(){if(this._ranges.length>0){const e=this._ranges[this._ranges.length-1];return this._lastRangeBackward?e.start:e.end}return null}get isCollapsed(){return this._ranges.length===1?this._ranges[0].isCollapsed:!1}get rangeCount(){return this._ranges.length}get isBackward(){return!this.isCollapsed&&this._lastRangeBackward}isEqual(e){if(this.rangeCount!=e.rangeCount)return!1;if(this.rangeCount===0)return!0;if(!this.anchor.isEqual(e.anchor)||!this.focus.isEqual(e.focus))return!1;for(const n of this._ranges){let s=!1;for(const r of e._ranges)if(n.isEqual(r)){s=!0;break}if(!s)return!1}return!0}*getRanges(){for(const e of this._ranges)yield new ee(e.start,e.end)}getFirstRange(){let e=null;for(const n of this._ranges)(!e||n.start.isBefore(e.start))&&(e=n);return e?new ee(e.start,e.end):null}getLastRange(){let e=null;for(const n of this._ranges)(!e||n.end.isAfter(e.end))&&(e=n);return e?new ee(e.start,e.end):null}getFirstPosition(){const e=this.getFirstRange();return e?e.start.clone():null}getLastPosition(){const e=this.getLastRange();return e?e.end.clone():null}setTo(...e){let[n,s,r]=e;if(typeof s=="object"&&(r=s,s=void 0),n===null)this._setRanges([]);else if(n instanceof hs)this._setRanges(n.getRanges(),n.isBackward);else if(n&&typeof n.getRanges=="function")this._setRanges(n.getRanges(),n.isBackward);else if(n instanceof ee)this._setRanges([n],!!r&&!!r.backward);else if(n instanceof de)this._setRanges([new ee(n)]);else if(n instanceof rc){const o=!!r&&!!r.backward;let a;if(s=="in")a=ee._createIn(n);else if(s=="on")a=ee._createOn(n);else if(s!==void 0)a=new ee(de._createAt(n,s));else throw new B("model-selection-setto-required-second-parameter",[this,n]);this._setRanges([a],o)}else if(Es(n))this._setRanges(n,r&&!!r.backward);else throw new B("model-selection-setto-not-selectable",[this,n])}_setRanges(e,n=!1){const s=Array.from(e),r=s.some(o=>{if(!(o instanceof ee))throw new B("model-selection-set-ranges-not-range",[this,e]);return this._ranges.every(a=>!a.isEqual(o))});s.length===this._ranges.length&&!r||(this._replaceAllRanges(s),this._lastRangeBackward=!!n,this.fire("change:range",{directChange:!0}))}setFocus(e,n){if(this.anchor===null)throw new B("model-selection-setfocus-no-ranges",[this,e]);const s=de._createAt(e,n);if(s.compareWith(this.focus)=="same")return;const r=this.anchor;this._ranges.length&&this._popRange(),s.compareWith(r)=="before"?(this._pushRange(new ee(s,r)),this._lastRangeBackward=!0):(this._pushRange(new ee(r,s)),this._lastRangeBackward=!1),this.fire("change:range",{directChange:!0})}getAttribute(e){return this._attrs.get(e)}getAttributes(){return this._attrs.entries()}getAttributeKeys(){return this._attrs.keys()}hasAttribute(e){return this._attrs.has(e)}removeAttribute(e){this.hasAttribute(e)&&(this._attrs.delete(e),this.fire("change:attribute",{attributeKeys:[e],directChange:!0}))}setAttribute(e,n){this.getAttribute(e)!==n&&(this._attrs.set(e,n),this.fire("change:attribute",{attributeKeys:[e],directChange:!0}))}getSelectedElement(){return this.rangeCount!==1?null:this.getFirstRange().getContainedElement()}*getSelectedBlocks(){const e=new WeakSet;for(const n of this.getRanges()){const s=oP(n.start,e);yre(s,n)&&(yield s);const r=n.getWalker();for(const a of r){const l=a.item;a.type=="elementEnd"&&vre(l,e,n)?yield l:a.type=="elementStart"&&l.is("model:element")&&l.root.document.model.schema.isBlock(l)&&r.jumpTo(de._createAt(l,"end"))}const o=oP(n.end,e);_re(o,n)&&(yield o)}}containsEntireContent(e=this.anchor.root){const n=de._createAt(e,0),s=de._createAt(e,"end");return n.isTouching(this.getFirstPosition())&&s.isTouching(this.getLastPosition())}_pushRange(e){this._checkRange(e),this._ranges.push(new ee(e.start,e.end))}_checkRange(e){for(let n=0;n<this._ranges.length;n++)if(e.isIntersecting(this._ranges[n]))throw new B("model-selection-range-intersects",[this,e],{addedRange:e,intersectingRange:this._ranges[n]})}_replaceAllRanges(e){this._removeAllRanges();for(const n of e)this._pushRange(n)}_removeAllRanges(){for(;this._ranges.length>0;)this._popRange()}_popRange(){this._ranges.pop()}}hs.prototype.is=function(i){return i==="selection"||i==="model:selection"};function f4(i,t){return t.has(i)?!1:(t.add(i),i.root.document.model.schema.isBlock(i)&&!!i.parent)}function vre(i,t,e){return f4(i,t)&&aC(i,e)}function oP(i,t){const n=i.parent.root.document.model.schema,s=i.parent.getAncestors({parentFirst:!0,includeSelf:!0});let r=!1;const o=s.find(a=>r?!1:(r=n.isLimit(a),!r&&f4(a,t)));return s.forEach(a=>t.add(a)),o}function aC(i,t){const e=Ere(i);return e?!t.containsRange(ee._createOn(e),!0):!0}function yre(i,t){return i?t.isCollapsed||i.isEmpty?!0:t.start.isTouching(de._createAt(i,i.maxOffset))?!1:aC(i,t):!1}function _re(i,t){return i?t.isCollapsed||i.isEmpty?!0:t.end.isTouching(de._createAt(i,0))?!1:aC(i,t):!1}function Ere(i){const t=i.root.document.model.schema;let e=i.parent;for(;e;){if(t.isBlock(e))return e;e=e.parent}}class ki extends Ft(ee){constructor(t,e){super(t,e),Cre.call(this)}detach(){this.stopListening()}toRange(){return new ee(this.start,this.end)}static fromRange(t){return new ki(t.start,t.end)}}ki.prototype.is=function(i){return i==="liveRange"||i==="model:liveRange"||i=="range"||i==="model:range"};function Cre(){this.listenTo(this.root.document.model,"applyOperation",(i,t)=>{const e=t[0];e.isDocumentOperation&&xre.call(this,e)},{priority:"low"})}function xre(i){const t=this.getTransformedByOperation(i),e=ee._createFromRanges(t),n=!e.isEqual(this),s=Tre(this,i);let r=null;if(n){e.root.rootName=="$graveyard"&&(i.type=="remove"?r=i.sourcePosition:r=i.deletionPosition);const o=this.toRange();this.start=e.start,this.end=e.end,this.fire("change:range",o,{deletionPosition:r})}else s&&this.fire("change:content",this.toRange(),{deletionPosition:r})}function Tre(i,t){switch(t.type){case"insert":return i.containsPosition(t.position);case"move":case"remove":case"reinsert":case"merge":return i.containsPosition(t.sourcePosition)||i.start.isEqual(t.sourcePosition)||i.containsPosition(t.targetPosition);case"split":return i.containsPosition(t.splitPosition)||i.containsPosition(t.insertionPosition)}return!1}class Jt extends rc{constructor(e,n){super(n);b(this,"_data");this._data=e||""}get offsetSize(){return this.data.length}get data(){return this._data}toJSON(){const e=super.toJSON();return e.data=this.data,e}_clone(){return new Jt(this.data,this.getAttributes())}static fromJSON(e){return new Jt(e.data,e.attributes)}}Jt.prototype.is=function(i){return i==="$text"||i==="model:$text"||i==="text"||i==="model:text"||i==="node"||i==="model:node"};const rf="selection:";class Tr extends Ft(Ya){constructor(e){super();b(this,"_selection");this._selection=new kre(e),this._selection.delegate("change:range").to(this),this._selection.delegate("change:attribute").to(this),this._selection.delegate("change:marker").to(this)}get isCollapsed(){return this._selection.isCollapsed}get anchor(){return this._selection.anchor}get focus(){return this._selection.focus}get rangeCount(){return this._selection.rangeCount}get hasOwnRange(){return this._selection.hasOwnRange}get isBackward(){return this._selection.isBackward}get isGravityOverridden(){return this._selection.isGravityOverridden}get markers(){return this._selection.markers}get _ranges(){return this._selection._ranges}getRanges(){return this._selection.getRanges()}getFirstPosition(){return this._selection.getFirstPosition()}getLastPosition(){return this._selection.getLastPosition()}getFirstRange(){return this._selection.getFirstRange()}getLastRange(){return this._selection.getLastRange()}getSelectedBlocks(){return this._selection.getSelectedBlocks()}getSelectedElement(){return this._selection.getSelectedElement()}containsEntireContent(e){return this._selection.containsEntireContent(e)}destroy(){this._selection.destroy()}getAttributeKeys(){return this._selection.getAttributeKeys()}getAttributes(){return this._selection.getAttributes()}getAttribute(e){return this._selection.getAttribute(e)}hasAttribute(e){return this._selection.hasAttribute(e)}refresh(){this._selection.updateMarkers(),this._selection._updateAttributes(!1)}observeMarkers(e){this._selection.observeMarkers(e)}_setFocus(e,n){this._selection.setFocus(e,n)}_setTo(...e){this._selection.setTo(...e)}_setAttribute(e,n){this._selection.setAttribute(e,n)}_removeAttribute(e){this._selection.removeAttribute(e)}_getStoredAttributes(){return this._selection.getStoredAttributes()}_overrideGravity(){return this._selection.overrideGravity()}_restoreGravity(e){this._selection.restoreGravity(e)}static _getStoreAttributeKey(e){return rf+e}static _isStoreAttributeKey(e){return e.startsWith(rf)}}Tr.prototype.is=function(i){return i==="selection"||i=="model:selection"||i=="documentSelection"||i=="model:documentSelection"};class kre extends hs{constructor(e){super();b(this,"markers",new oi({idProperty:"name"}));b(this,"_model");b(this,"_document");b(this,"_attributePriority",new Map);b(this,"_selectionRestorePosition",null);b(this,"_hasChangedRange",!1);b(this,"_overriddenGravityRegister",new Set);b(this,"_observedMarkers",new Set);this._model=e.model,this._document=e,this.listenTo(this._model,"applyOperation",(n,s)=>{const r=s[0];!r.isDocumentOperation||r.type=="marker"||r.type=="rename"||r.type=="noop"||(this._ranges.length==0&&this._selectionRestorePosition&&this._fixGraveyardSelection(this._selectionRestorePosition),this._selectionRestorePosition=null,this._hasChangedRange&&(this._hasChangedRange=!1,this.fire("change:range",{directChange:!1})))},{priority:"lowest"}),this.on("change:range",()=>{this._validateSelectionRanges(this.getRanges())}),this.listenTo(this._model.markers,"update",(n,s,r,o)=>{this._updateMarker(s,o)}),this.listenTo(this._document,"change",(n,s)=>{Sre(this._model,s)})}get isCollapsed(){return this._ranges.length===0?this._document._getDefaultRange().isCollapsed:super.isCollapsed}get anchor(){return super.anchor||this._document._getDefaultRange().start}get focus(){return super.focus||this._document._getDefaultRange().end}get rangeCount(){return this._ranges.length?this._ranges.length:1}get hasOwnRange(){return this._ranges.length>0}get isGravityOverridden(){return!!this._overriddenGravityRegister.size}destroy(){for(let e=0;e<this._ranges.length;e++)this._ranges[e].detach();this.stopListening()}*getRanges(){this._ranges.length?yield*super.getRanges():yield this._document._getDefaultRange()}getFirstRange(){return super.getFirstRange()||this._document._getDefaultRange()}getLastRange(){return super.getLastRange()||this._document._getDefaultRange()}setTo(...e){super.setTo(...e),this._updateAttributes(!0),this.updateMarkers()}setFocus(e,n){super.setFocus(e,n),this._updateAttributes(!0),this.updateMarkers()}setAttribute(e,n){if(this._setAttribute(e,n)){const s=[e];this.fire("change:attribute",{attributeKeys:s,directChange:!0})}}removeAttribute(e){if(this._removeAttribute(e)){const n=[e];this.fire("change:attribute",{attributeKeys:n,directChange:!0})}}overrideGravity(){const e=yi();return this._overriddenGravityRegister.add(e),this._overriddenGravityRegister.size===1&&this._updateAttributes(!0),e}restoreGravity(e){if(!this._overriddenGravityRegister.has(e))throw new B("document-selection-gravity-wrong-restore",this,{uid:e});this._overriddenGravityRegister.delete(e),this.isGravityOverridden||this._updateAttributes(!0)}observeMarkers(e){this._observedMarkers.add(e),this.updateMarkers()}_replaceAllRanges(e){this._validateSelectionRanges(e),super._replaceAllRanges(e)}_popRange(){this._ranges.pop().detach()}_pushRange(e){const n=this._prepareRange(e);n&&this._ranges.push(n)}_validateSelectionRanges(e){for(const n of e)if(!this._document._validateSelectionRange(n))throw new B("document-selection-wrong-position",this,{range:n})}_prepareRange(e){if(this._checkRange(e),e.root==this._document.graveyard)return;const n=ki.fromRange(e);return n.on("change:range",(s,r,o)=>{if(this._hasChangedRange=!0,n.root==this._document.graveyard){this._selectionRestorePosition=o.deletionPosition;const a=this._ranges.indexOf(n);this._ranges.splice(a,1),n.detach()}}),n}updateMarkers(){if(!this._observedMarkers.size)return;const e=[];let n=!1;for(const r of this._model.markers){const o=r.name.split(":",1)[0];if(!this._observedMarkers.has(o))continue;const a=r.getRange();for(const l of this.getRanges())a.containsRange(l,!l.isCollapsed)&&e.push(r)}const s=Array.from(this.markers);for(const r of e)this.markers.has(r)||(this.markers.add(r),n=!0);for(const r of Array.from(this.markers))e.includes(r)||(this.markers.remove(r),n=!0);n&&this.fire("change:marker",{oldMarkers:s,directChange:!1})}_updateMarker(e,n){const s=e.name.split(":",1)[0];if(!this._observedMarkers.has(s))return;let r=!1;const o=Array.from(this.markers),a=this.markers.has(e);if(!n)a&&(this.markers.remove(e),r=!0);else{let l=!1;for(const c of this.getRanges())if(n.containsRange(c,!c.isCollapsed)){l=!0;break}l&&!a?(this.markers.add(e),r=!0):!l&&a&&(this.markers.remove(e),r=!0)}r&&this.fire("change:marker",{oldMarkers:o,directChange:!1})}_updateAttributes(e){const n=xr(this._getSurroundingAttributes()),s=xr(this.getAttributes());if(e)this._attributePriority=new Map,this._attrs=new Map;else for(const[o,a]of this._attributePriority)a=="low"&&(this._attrs.delete(o),this._attributePriority.delete(o));this._setAttributesTo(n);const r=[];for(const[o,a]of this.getAttributes())(!s.has(o)||s.get(o)!==a)&&r.push(o);for(const[o]of s)this.hasAttribute(o)||r.push(o);r.length>0&&this.fire("change:attribute",{attributeKeys:r,directChange:!1})}_setAttribute(e,n,s=!0){const r=s?"normal":"low";return r=="low"&&this._attributePriority.get(e)=="normal"||super.getAttribute(e)===n?!1:(this._attrs.set(e,n),this._attributePriority.set(e,r),!0)}_removeAttribute(e,n=!0){const s=n?"normal":"low";return s=="low"&&this._attributePriority.get(e)=="normal"||(this._attributePriority.set(e,s),!super.hasAttribute(e))?!1:(this._attrs.delete(e),!0)}_setAttributesTo(e){const n=new Set;for(const[s,r]of this.getAttributes())e.get(s)!==r&&this._removeAttribute(s,!1);for(const[s,r]of e)this._setAttribute(s,r,!1)&&n.add(s);return n}*getStoredAttributes(){const e=this.getFirstPosition().parent;if(this.isCollapsed&&e.isEmpty)for(const n of e.getAttributeKeys())n.startsWith(rf)&&(yield[n.substr(rf.length),e.getAttribute(n)])}_getSurroundingAttributes(){const e=this.getFirstPosition(),n=this._model.schema;if(e.root.rootName=="$graveyard")return null;let s=null;if(this.isCollapsed){const r=e.textNode?e.textNode:e.nodeBefore,o=e.textNode?e.textNode:e.nodeAfter;if(this.isGravityOverridden||(s=nh(r,n)),s||(s=nh(o,n)),!this.isGravityOverridden&&!s){let a=r;for(;a&&!s;)a=a.previousSibling,s=nh(a,n)}if(!s){let a=o;for(;a&&!s;)a=a.nextSibling,s=nh(a,n)}s||(s=this.getStoredAttributes())}else{const r=this.getFirstRange();for(const o of r){if(o.item.is("element")&&n.isObject(o.item)){s=nh(o.item,n);break}if(o.type=="text"){s=o.item.getAttributes();break}}}return s}_fixGraveyardSelection(e){const n=this._model.schema.getNearestSelectionRange(e);n&&this._pushRange(n)}}function nh(i,t){if(!i)return null;if(i instanceof wr||i instanceof Jt)return i.getAttributes();if(!t.isInline(i))return null;if(!t.isObject(i))return[];const e=[];for(const[n,s]of i.getAttributes())t.checkAttribute("$text",n)&&t.getAttributeProperties(n).copyFromObject!==!1&&e.push([n,s]);return e}function Sre(i,t){const e=i.document.differ;for(const n of e.getChanges()){if(n.type!="insert")continue;const s=n.position.parent;n.length===s.maxOffset&&i.enqueueChange(t,o=>{const a=Array.from(s.getAttributeKeys()).filter(l=>l.startsWith(rf));for(const l of a)o.removeAttribute(l,s)})}}class Vh{constructor(t){b(this,"_nodes",[]);b(this,"_offsetToNode",[]);t&&this._insertNodes(0,t)}[Symbol.iterator](){return this._nodes[Symbol.iterator]()}get length(){return this._nodes.length}get maxOffset(){return this._offsetToNode.length}getNode(t){return this._nodes[t]||null}getNodeAtOffset(t){return this._offsetToNode[t]||null}getNodeIndex(t){return t.index}getNodeStartOffset(t){return t.startOffset}indexToOffset(t){if(t==this._nodes.length)return this.maxOffset;const e=this._nodes[t];if(!e)throw new B("model-nodelist-index-out-of-bounds",this);return this.getNodeStartOffset(e)}offsetToIndex(t){if(t==this._offsetToNode.length)return this._nodes.length;const e=this._offsetToNode[t];if(!e)throw new B("model-nodelist-offset-out-of-bounds",this,{offset:t,nodeList:this});return this.getNodeIndex(e)}_insertNodes(t,e){const n=[];for(const r of e){if(!(r instanceof rc))throw new B("model-nodelist-insertnodes-not-node",this);n.push(r)}let s=this.indexToOffset(t);H2(this._nodes,n,t),H2(this._offsetToNode,Are(n),s);for(let r=t;r<this._nodes.length;r++)this._nodes[r]._index=r,this._nodes[r]._startOffset=s,s+=this._nodes[r].offsetSize}_removeNodes(t,e=1){if(e==0)return[];let n=this.indexToOffset(t);const s=this._nodes.splice(t,e),r=s[s.length-1],o=r.startOffset+r.offsetSize-n;this._offsetToNode.splice(n,o);for(const a of s)a._index=null,a._startOffset=null;for(let a=t;a<this._nodes.length;a++)this._nodes[a]._index=a,this._nodes[a]._startOffset=n,n+=this._nodes[a].offsetSize;return s}_removeNodesArray(t){if(t.length==0)return;for(const n of t)n._index=null,n._startOffset=null;this._nodes=this._nodes.filter(n=>n.index!==null),this._offsetToNode=this._offsetToNode.filter(n=>n.index!==null);let e=0;for(let n=0;n<this._nodes.length;n++)this._nodes[n]._index=n,this._nodes[n]._startOffset=e,e+=this._nodes[n].offsetSize}toJSON(){return this._nodes.map(t=>t.toJSON())}}function Are(i){const t=[];let e=0;for(const n of i)for(let s=0;s<n.offsetSize;s++)t[e++]=n;return t}let fn=class ip extends rc{constructor(e,n,s){super(n);b(this,"name");b(this,"_children",new Vh);this.name=e,s&&this._insertChild(0,s)}get childCount(){return this._children.length}get maxOffset(){return this._children.maxOffset}get isEmpty(){return this.childCount===0}getChild(e){return this._children.getNode(e)}getChildAtOffset(e){return this._children.getNodeAtOffset(e)}getChildren(){return this._children[Symbol.iterator]()}getChildIndex(e){return this._children.getNodeIndex(e)}getChildStartOffset(e){return this._children.getNodeStartOffset(e)}offsetToIndex(e){return this._children.offsetToIndex(e)}getNodeByPath(e){let n=this;for(const s of e)n=n.getChildAtOffset(s);return n}findAncestor(e,n={}){let s=n.includeSelf?this:this.parent;for(;s;){if(s.name===e)return s;s=s.parent}return null}toJSON(){const e=super.toJSON();if(e.name=this.name,this._children.length>0){e.children=[];for(const n of this._children)e.children.push(n.toJSON())}return e}_clone(e=!1){const n=e?Ire(this._children):void 0;return new ip(this.name,this.getAttributes(),n)}_appendChild(e){this._insertChild(this.childCount,e)}_insertChild(e,n){const s=Pre(n);for(const r of s)r.parent!==null&&r._remove(),r.parent=this;this._children._insertNodes(e,s)}_removeChildren(e,n=1){const s=this._children._removeNodes(e,n);for(const r of s)r.parent=null;return s}_removeChildrenArray(e){this._children._removeNodesArray(e);for(const n of e)n.parent=null}static fromJSON(e){let n;if(e.children){n=[];for(const s of e.children)s.name?n.push(ip.fromJSON(s)):n.push(Jt.fromJSON(s))}return new ip(e.name,e.attributes,n)}};fn.prototype.is=function(i,t){return t?t===this.name&&(i==="element"||i==="model:element"):i==="element"||i==="model:element"||i==="node"||i==="model:node"};function Pre(i){if(typeof i=="string")return[new Jt(i)];Es(i)||(i=[i]);const t=[];for(const e of i)typeof e=="string"?t.push(new Jt(e)):e instanceof wr?t.push(new Jt(e.data,e.getAttributes())):t.push(e);return t}function Ire(i){const t=[];for(const e of i)t.push(e._clone(!0));return t}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class m4{constructor(t){b(this,"_dispatchers");this._dispatchers=t}add(t){for(const e of this._dispatchers)t(e);return this}}class Rre extends m4{elementToElement(t){return this.add(Yre(t))}elementToStructure(t){return this.add(Zre(t))}attributeToElement(t){return this.add(Xre(t))}attributeToAttribute(t){return this.add(Jre(t))}markerToElement(t){return this.add(Qre(t))}markerToHighlight(t){return this.add(toe(t))}markerToData(t){return this.add(eoe(t))}}function g4(){return(i,t,e)=>{if(!e.consumable.consume(t.item,i.name))return;const n=e.writer,s=e.mapper.toViewPosition(t.range.start),r=n.createText(t.item.data);n.insert(s,r)}}function p4(){return(i,t,e)=>{e.convertAttributes(t.item),!t.reconversion&&t.item.is("element")&&!t.item.isEmpty&&e.convertChildren(t.item)}}function Ore(){return(i,t,e)=>{const n=e.mapper.toViewPosition(t.position),s=t.position.getShiftedBy(t.length),r=e.mapper.toViewPosition(s,{isPhantom:!0}),o=e.writer.createRange(n,r),a=e.writer.remove(o.getTrimmed());for(const l of e.writer.createRangeIn(a).getItems())e.mapper.unbindViewElement(l,{defer:!0})}}function b4(i,t){const e=i.createAttributeElement("span",t.attributes);return t.classes&&e._addClass(t.classes),typeof t.priority=="number"&&(e._priority=t.priority),e._id=t.id,e}function Nre(){return(i,t,e)=>{const n=t.selection;if(n.isCollapsed||!e.consumable.consume(n,"selection"))return;const s=[];for(const r of n.getRanges())s.push(e.mapper.toViewRange(r));e.writer.setSelection(s,{backward:n.isBackward})}}function Mre(){return(i,t,e)=>{const n=t.selection;if(!n.isCollapsed||!e.consumable.consume(n,"selection"))return;const s=e.writer,r=n.getFirstPosition(),o=e.mapper.toViewPosition(r),a=s.breakAttributes(o);s.setSelection(a)}}function Lre(){return(i,t,e)=>{const n=e.writer,s=n.document.selection;for(const r of s.getRanges())r.isCollapsed&&r.end.parent.isAttached()&&e.writer.mergeAttributes(r.start);n.setSelection(null)}}function Vre(i){return(t,e,n)=>{if(!n.consumable.test(e.item,t.name))return;const s=i(e.attributeOldValue,n,e),r=i(e.attributeNewValue,n,e);if(!s&&!r)return;n.consumable.consume(e.item,t.name);const o=n.writer,a=o.document.selection;if(e.item instanceof hs||e.item instanceof Tr)o.wrap(a.getFirstRange(),r);else{let l=n.mapper.toViewRange(e.range);e.attributeOldValue!==null&&s&&(l=o.unwrap(l,s)),e.attributeNewValue!==null&&r&&o.wrap(l,r)}}}function Dre(i,t=loe){return(e,n,s)=>{if(!t(n.item,s.consumable,{preflight:!0}))return;const r=i(n.item,s,n);if(!r)return;t(n.item,s.consumable);const o=s.mapper.toViewPosition(n.range.start);s.mapper.bindElements(n.item,r),s.writer.insert(o,r),s.convertAttributes(n.item),E4(r,n.item.getChildren(),s,{reconversion:n.reconversion})}}function Bre(i,t){return(e,n,s)=>{if(!t(n.item,s.consumable,{preflight:!0}))return;const r=new Map;s.writer._registerSlotFactory(soe(n.item,r,s));const o=i(n.item,s,n);if(s.writer._clearSlotFactory(),!o)return;roe(n.item,r,s),t(n.item,s.consumable);const a=s.mapper.toViewPosition(n.range.start);s.mapper.bindElements(n.item,o),s.writer.insert(a,o),s.convertAttributes(n.item),ooe(o,r,s,{reconversion:n.reconversion})}}function Fre(i){return(t,e,n)=>{e.isOpening=!0;const s=i(e,n);e.isOpening=!1;const r=i(e,n);if(!s||!r)return;const o=e.markerRange;if(o.isCollapsed&&!n.consumable.consume(o,t.name))return;for(const c of o)if(!n.consumable.consume(c.item,t.name))return;const a=n.mapper,l=n.writer;l.insert(a.toViewPosition(o.start),s),n.mapper.bindElementToMarker(s,e.markerName),o.isCollapsed||(l.insert(a.toViewPosition(o.end),r),n.mapper.bindElementToMarker(r,e.markerName)),t.stop()}}function $re(){return(i,t,e)=>{const n=e.mapper.markerNameToElements(t.markerName);if(n){for(const s of n)e.mapper.unbindElementFromMarkerName(s,t.markerName),e.writer.clear(e.writer.createRangeOn(s),s);e.writer.clearClonedElementsGroup(t.markerName),i.stop()}}}function zre(i){return(t,e,n)=>{const s=i(e.markerName,n);if(!s)return;const r=e.markerRange;n.consumable.consume(r,t.name)&&(aP(r,!1,n,e,s),aP(r,!0,n,e,s),t.stop())}}function aP(i,t,e,n,s){const r=t?i.start:i.end,o=r.nodeAfter&&r.nodeAfter.is("element")?r.nodeAfter:null,a=r.nodeBefore&&r.nodeBefore.is("element")?r.nodeBefore:null;if(o||a){let c,h;t&&o||!t&&!a?(c=o,h=!0):(c=a,h=!1);const f=e.mapper.toViewElement(c);if(f){jre(f,t,h,e,n,s);return}}const l=e.mapper.toViewPosition(r);Hre(l,t,e,n,s)}function jre(i,t,e,n,s,r){const o=`data-${r.group}-${t?"start":"end"}-${e?"before":"after"}`,a=i.hasAttribute(o)?i.getAttribute(o).split(","):[];a.unshift(r.name),n.writer.setAttribute(o,a.join(","),i),n.mapper.bindElementToMarker(i,s.markerName)}function Hre(i,t,e,n,s){const r=`${s.group}-${t?"start":"end"}`,o=s.name?{name:s.name}:null,a=e.writer.createUIElement(r,o);e.writer.insert(i,a),e.mapper.bindElementToMarker(a,n.markerName)}function Ure(i){return(t,e,n)=>{const s=i(e.markerName,n);if(!s)return;const r=n.mapper.markerNameToElements(e.markerName);if(!r)return;for(const a of r)n.mapper.unbindElementFromMarkerName(a,e.markerName),a.is("containerElement")?(o(`data-${s.group}-start-before`,a),o(`data-${s.group}-start-after`,a),o(`data-${s.group}-end-before`,a),o(`data-${s.group}-end-after`,a)):n.writer.clear(n.writer.createRangeOn(a),a);n.writer.clearClonedElementsGroup(e.markerName),t.stop();function o(a,l){if(l.hasAttribute(a)){const c=new Set(l.getAttribute(a).split(","));c.delete(s.name),c.size==0?n.writer.removeAttribute(a,l):n.writer.setAttribute(a,Array.from(c).join(","),l)}}}}function Wre(i){return(t,e,n)=>{if(!n.consumable.test(e.item,t.name))return;const s=i(e.attributeOldValue,n,e),r=i(e.attributeNewValue,n,e);if(!s&&!r)return;n.consumable.consume(e.item,t.name);const o=n.mapper.toViewElement(e.item),a=n.writer;if(!o)throw new B("conversion-attribute-to-attribute-on-text",n.dispatcher,e);if(e.attributeOldValue!==null&&s){let l=s.value;s.key=="style"&&(typeof s.value=="string"?l=new Mh(a.document.stylesProcessor).setTo(s.value).getStylesEntries().map(([c])=>c):l=Object.keys(s.value)),a.removeAttribute(s.key,l,o)}if(e.attributeNewValue!==null&&r){let l=r.value;r.key=="style"&&typeof r.value=="string"&&(l=Object.fromEntries(new Mh(a.document.stylesProcessor).setTo(r.value).getStylesEntries())),a.setAttribute(r.key,l,!1,o)}}}function qre(i){return(t,e,n)=>{if(!e.item||!(e.item instanceof hs||e.item instanceof Tr)&&!e.item.is("$textProxy"))return;const s=lC(i,e,n);if(!s||!n.consumable.consume(e.item,t.name))return;const r=n.writer,o=b4(r,s),a=r.document.selection;if(e.item instanceof hs||e.item instanceof Tr)r.wrap(a.getFirstRange(),o);else{const l=n.mapper.toViewRange(e.range),c=r.wrap(l,o);for(const h of c.getItems())if(h.is("attributeElement")&&h.isSimilar(o)){n.mapper.bindElementToMarker(h,e.markerName);break}}}}function Gre(i){return(t,e,n)=>{if(!e.item||!(e.item instanceof fn))return;const s=lC(i,e,n);if(!s||!n.consumable.test(e.item,t.name))return;const r=n.mapper.toViewElement(e.item);if(r&&r.getCustomProperty("addHighlight")){n.consumable.consume(e.item,t.name);for(const a of ee._createIn(e.item))n.consumable.consume(a.item,t.name);r.getCustomProperty("addHighlight")(r,s,n.writer),n.mapper.bindElementToMarker(r,e.markerName)}}}function Kre(i){return(t,e,n)=>{if(e.markerRange.isCollapsed)return;const s=lC(i,e,n);if(!s)return;const r=b4(n.writer,s),o=n.mapper.markerNameToElements(e.markerName);if(o){for(const a of o)n.mapper.unbindElementFromMarkerName(a,e.markerName),a.is("attributeElement")?n.writer.unwrap(n.writer.createRangeOn(a),r):a.getCustomProperty("removeHighlight")(a,s.id,n.writer);n.writer.clearClonedElementsGroup(e.markerName),t.stop()}}}function Yre(i){const t=w4(i.model),e=of(i.view,"container");return t.attributes.length&&(t.children=!0),n=>{n.on(`insert:${t.name}`,Dre(e,_4(t)),{priority:i.converterPriority||"normal"}),(t.children||t.attributes.length)&&n.on("reduceChanges",y4(t),{priority:"low"})}}function Zre(i){const t=w4(i.model),e=of(i.view,"container");return t.children=!0,n=>{if(n._conversionApi.schema.checkChild(t.name,"$text"))throw new B("conversion-element-to-structure-disallowed-text",n,{elementName:t.name});n.on(`insert:${t.name}`,Bre(e,_4(t)),{priority:i.converterPriority||"normal"}),n.on("reduceChanges",y4(t),{priority:"low"})}}function Xre(i){i=Rr(i);let t=i.model;typeof t=="string"&&(t={key:t});let e=`attribute:${t.key}`;if(t.name&&(e+=":"+t.name),t.values)for(const s of t.values)i.view[s]=of(i.view[s],"attribute");else i.view=of(i.view,"attribute");const n=v4(i);return s=>{s.on(e,Vre(n),{priority:i.converterPriority||"normal"})}}function Jre(i){i=Rr(i);let t=i.model;typeof t=="string"&&(t={key:t});let e=`attribute:${t.key}`;if(t.name&&(e+=":"+t.name),t.values)for(const s of t.values)i.view[s]=lP(i.view[s]);else i.view=lP(i.view);const n=v4(i);return s=>{s.on(e,Wre(n),{priority:i.converterPriority||"normal"})}}function Qre(i){const t=of(i.view,"ui");return e=>{e.on(`addMarker:${i.model}`,Fre(t),{priority:i.converterPriority||"normal"}),e.on(`removeMarker:${i.model}`,$re(),{priority:i.converterPriority||"normal"})}}function eoe(i){i=Rr(i);const t=i.model;let e=i.view;return e||(e=n=>({group:t,name:n.substr(i.model.length+1)})),n=>{n.on(`addMarker:${t}`,zre(e),{priority:i.converterPriority||"normal"}),n.on(`removeMarker:${t}`,Ure(e),{priority:i.converterPriority||"normal"})}}function toe(i){return t=>{t.on(`addMarker:${i.model}`,qre(i.view),{priority:i.converterPriority||"normal"}),t.on(`addMarker:${i.model}`,Gre(i.view),{priority:i.converterPriority||"normal"}),t.on(`removeMarker:${i.model}`,Kre(i.view),{priority:i.converterPriority||"normal"})}}function w4(i){return typeof i=="string"&&(i={name:i}),{name:i.name,attributes:i.attributes?Qt(i.attributes):[],children:!!i.children}}function of(i,t){return typeof i=="function"?i:(e,n)=>noe(i,n,t)}function noe(i,t,e){typeof i=="string"&&(i={name:i});let n;const s=t.writer,r=Object.assign({},i.attributes);if(e=="container")n=s.createContainerElement(i.name,r);else if(e=="attribute"){const o={priority:i.priority||Vl.DEFAULT_PRIORITY};n=s.createAttributeElement(i.name,r,o)}else n=s.createUIElement(i.name,r);if(i.styles){const o=Object.keys(i.styles);for(const a of o)s.setStyle(a,i.styles[a],n)}if(i.classes){const o=i.classes;if(typeof o=="string")s.addClass(o,n);else for(const a of o)s.addClass(a,n)}return n}function v4(i){return i.model.values?(t,e,n)=>{const s=i.view[t];return s?s(t,e,n):null}:i.view}function lP(i){return typeof i=="string"?t=>({key:i,value:t}):typeof i=="object"?i.value?()=>i:t=>({key:i.key,value:t}):i}function lC(i,t,e){const n=typeof i=="function"?i(t,e):i;return n?(n.priority||(n.priority=10),n.id||(n.id=t.markerName),n):null}function ioe(i){return(t,e)=>{if(!t.is("element",i.name))return!1;if(e.type=="attribute"){if(i.attributes.includes(e.attributeKey))return!0}else{/* istanbul ignore else: This is always true because otherwise it would not register a reducer callback. -- @preserve */if(i.children)return!0}return!1}}function y4(i){const t=ioe(i);return(e,n)=>{const s=[];n.reconvertedElements||(n.reconvertedElements=new Set);for(const r of n.changes){const o=r.type=="attribute"?r.range.start.nodeAfter:r.position.parent;if(!o||!t(o,r)){s.push(r);continue}if(!n.reconvertedElements.has(o)){n.reconvertedElements.add(o);const a=de._createBefore(o);let l=s.length;for(let c=s.length-1;c>=0;c--){const h=s[c],m=(h.type=="attribute"?h.range.start:h.position).compareWith(a);if(m=="before"||h.type=="remove"&&m=="same")break;l=c}s.splice(l,0,{type:"remove",name:o.name,position:a,length:1},{type:"reinsert",name:o.name,position:a,length:1})}}n.changes=s}}function _4(i){return(t,e,n={})=>{const s=["insert"];for(const r of i.attributes)t.hasAttribute(r)&&s.push(`attribute:${r}`);return s.every(r=>e.test(t,r))?(n.preflight||s.forEach(r=>e.consume(t,r)),!0):!1}}function soe(i,t,e){return(n,s)=>{const r=n.createContainerElement("$slot");let o=null;if(s==="children")o=Array.from(i.getChildren());else if(typeof s=="function")o=Array.from(i.getChildren()).filter(a=>s(a));else throw new B("conversion-slot-mode-unknown",e.dispatcher,{modeOrFilter:s});return t.set(r,o),r}}function roe(i,t,e){const n=Array.from(t.values()).flat(),s=new Set(n);if(s.size!=n.length)throw new B("conversion-slot-filter-overlap",e.dispatcher,{element:i});if(s.size!=i.childCount)throw new B("conversion-slot-filter-incomplete",e.dispatcher,{element:i})}function ooe(i,t,e,n){e.mapper.on("modelToViewPosition",o,{priority:"highest"});let s=null,r=null;for([s,r]of t)E4(i,r,e,n),e.writer.move(e.writer.createRangeIn(s),e.writer.createPositionBefore(s)),e.writer.remove(s);e.mapper.off("modelToViewPosition",o);function o(a,l){const c=l.modelPosition.nodeAfter,h=r.indexOf(c);h<0||(l.viewPosition=l.mapper.findPositionIn(s,h))}}function E4(i,t,e,n){for(const s of t)aoe(i.root,s,e,n)||e.convertItem(s)}function aoe(i,t,e,n){const{writer:s,mapper:r}=e;if(!n.reconversion)return!1;const o=r.toViewElement(t);return!o||o.root==i||!e.canReuseView(o)?!1:(s.move(s.createRangeOn(o),r.toViewPosition(de._createBefore(t))),!0)}function loe(i,t,{preflight:e}={}){return e?t.test(i,"insert"):t.consume(i,"insert")}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function C4(i){const{schema:t,document:e}=i.model;for(const n of e.getRoots())if(n.isEmpty&&!t.checkChild(n,"$text")&&t.checkChild(n,"paragraph"))return i.insertElement("paragraph",n),!0;return!1}function x4(i,t,e){const n=e.createContext(i);return!(!e.checkChild(n,"paragraph")||!e.checkChild(n.push("paragraph"),t))}function T4(i,t){const e=t.createElement("paragraph");return t.insert(e,i),t.createPositionAt(e,0)}class coe extends m4{elementToElement(t){return this.add(k4(t))}elementToAttribute(t){return this.add(hoe(t))}attributeToAttribute(t){return this.add(foe(t))}elementToMarker(t){return this.add(moe(t))}dataToMarker(t){return this.add(goe(t))}}function cP(){return(i,t,e)=>{if(!t.modelRange&&e.consumable.consume(t.viewItem,{name:!0})){const{modelRange:n,modelCursor:s}=e.convertChildren(t.viewItem,t.modelCursor);t.modelRange=n,t.modelCursor=s}}}function uoe(){return(i,t,{schema:e,consumable:n,writer:s})=>{let r=t.modelCursor;if(!n.test(t.viewItem))return;if(!e.checkChild(r,"$text")){if(!x4(r,"$text",e)||t.viewItem.data.trim().length==0)return;r=T4(r,s)}n.consume(t.viewItem);const o=s.createText(t.viewItem.data);s.insert(o,r),t.modelRange=s.createRange(r,r.getShiftedBy(o.offsetSize)),t.modelCursor=t.modelRange.end}}function doe(i,t){return(e,n)=>{const s=n.newSelection,r=[];for(const a of s.getRanges())r.push(t.toModelRange(a));const o=i.createSelection(r,{backward:s.isBackward});o.isEqual(i.document.selection)||i.change(a=>{a.setSelection(o)})}}function k4(i){i=Rr(i);const t=t_(i),e=cC(i.view),n=e?`element:${e}`:"element";return s=>{s.on(n,t,{priority:i.converterPriority||"normal"})}}function hoe(i){i=Rr(i),S4(i);const t=A4(i,!1),e=cC(i.view),n=e?`element:${e}`:"element";return s=>{s.on(n,t,{priority:i.converterPriority||"low"})}}function foe(i){i=Rr(i);let t=null;(typeof i.view=="string"||i.view.key)&&(t=woe(i)),S4(i,t);const e=A4(i,!0);return n=>{n.on("element",e,{priority:i.converterPriority||"low"})}}function moe(i){const t=_oe(i.model);return k4({...i,model:t})}function goe(i){i=Rr(i),i.model||(i.model=s=>s?i.view+":"+s:i.view);const t={view:i.view,model:i.model},e=t_(uP(t,"start")),n=t_(uP(t,"end"));return s=>{s.on(`element:${i.view}-start`,e,{priority:i.converterPriority||"normal"}),s.on(`element:${i.view}-end`,n,{priority:i.converterPriority||"normal"});const r=Na.low,o=Na.highest,a=Na.get(i.converterPriority)/o;s.on("element",poe(t),{priority:r+a})}}function poe(i){return(t,e,n)=>{const s=`data-${i.view}`;if(!n.consumable.test(e.viewItem,{attributes:s+"-end-after"})&&!n.consumable.test(e.viewItem,{attributes:s+"-start-after"})&&!n.consumable.test(e.viewItem,{attributes:s+"-end-before"})&&!n.consumable.test(e.viewItem,{attributes:s+"-start-before"}))return;e.modelRange||Object.assign(e,n.convertChildren(e.viewItem,e.modelCursor)),n.consumable.consume(e.viewItem,{attributes:s+"-end-after"})&&r(e.modelRange.end,e.viewItem.getAttribute(s+"-end-after").split(",")),n.consumable.consume(e.viewItem,{attributes:s+"-start-after"})&&r(e.modelRange.end,e.viewItem.getAttribute(s+"-start-after").split(",")),n.consumable.consume(e.viewItem,{attributes:s+"-end-before"})&&r(e.modelRange.start,e.viewItem.getAttribute(s+"-end-before").split(",")),n.consumable.consume(e.viewItem,{attributes:s+"-start-before"})&&r(e.modelRange.start,e.viewItem.getAttribute(s+"-start-before").split(","));function r(o,a){for(const l of a){const c=i.model(l,n),h=n.writer.createElement("$marker",{"data-name":c});n.writer.insert(h,o),e.modelCursor.isEqual(o)?e.modelCursor=e.modelCursor.getShiftedBy(1):e.modelCursor=e.modelCursor._getTransformedByInsertion(o,1),e.modelRange=e.modelRange._getTransformedByInsertion(o,1)[0]}}}}function cC(i){return typeof i=="string"?i:typeof i=="object"&&typeof i.name=="string"?i.name:null}function t_(i){const t=new Cs(i.view);return(e,n,s)=>{const r=t.match(n.viewItem);if(!r)return;const o=r.match;if(o.name=!0,!s.consumable.test(n.viewItem,o))return;const a=boe(i.model,n.viewItem,s);a&&s.safeInsert(a,n.modelCursor)&&(s.consumable.consume(n.viewItem,o),s.convertChildren(n.viewItem,a),s.updateConversionResult(a,n))}}function boe(i,t,e){return i instanceof Function?i(t,e):e.writer.createElement(i)}function woe(i){typeof i.view=="string"&&(i.view={key:i.view});const t=i.view.key,e=typeof i.view.value>"u"?/[\s\S]*/:i.view.value;let n;return t=="class"||t=="style"?n={[t=="class"?"classes":"styles"]:e}:n={attributes:{[t]:e}},i.view.name&&(n.name=i.view.name),i.view=n,t}function S4(i,t=null){const e=t===null?!0:r=>r.getAttribute(t),n=typeof i.model!="object"?i.model:i.model.key,s=typeof i.model!="object"||typeof i.model.value>"u"?e:i.model.value;i.model={key:n,value:s}}function A4(i,t){const e=new Cs(i.view);return(n,s,r)=>{if(!s.modelRange&&t)return;const o=e.match(s.viewItem);if(!o||(voe(i.view,s.viewItem)?o.match.name=!0:delete o.match.name,!r.consumable.test(s.viewItem,o.match)))return;const a=i.model.key,l=typeof i.model.value=="function"?i.model.value(s.viewItem,r):i.model.value;if(l===null)return;s.modelRange||Object.assign(s,r.convertChildren(s.viewItem,s.modelCursor)),yoe(s.modelRange,{key:a,value:l},t,r)&&(r.consumable.test(s.viewItem,{name:!0})&&(o.match.name=!0),r.consumable.consume(s.viewItem,o.match))}}function voe(i,t){const e=typeof i=="function"?i(t):i;return typeof e=="object"&&!cC(e)?!1:!e.classes&&!e.attributes&&!e.styles}function yoe(i,t,e,n){let s=!1;for(const r of Array.from(i.getItems({shallow:e})))n.schema.checkAttribute(r,t.key)&&(s=!0,!r.hasAttribute(t.key)&&n.writer.setAttribute(t.key,t.value,r));return s}function _oe(i){return(t,e)=>{const n=typeof i=="string"?i:i(t,e);return e.writer.createElement("$marker",{"data-name":n})}}function uP(i,t){const e=(n,s)=>{const r=n.getAttribute("name"),o=i.model(r,s);return s.writer.createElement("$marker",{"data-name":o})};return{view:`${i.view}-${t}`,model:e}}function Eoe(i){i.document.registerPostFixer(t=>Coe(t,i))}function Coe(i,t){const e=t.document.selection,n=t.schema,s=[];let r=!1;for(const o of e.getRanges()){const a=P4(o,n);a&&!a.isEqual(o)?(s.push(a),r=!0):s.push(o)}return r&&i.setSelection(Soe(s),{backward:e.isBackward}),!1}function P4(i,t){return i.isCollapsed?xoe(i,t):Toe(i,t)}function xoe(i,t){const e=i.start,n=t.getNearestSelectionRange(e);if(!n){const r=e.getAncestors().reverse().find(o=>t.isObject(o));return r?ee._createOn(r):null}if(!n.isCollapsed)return n;const s=n.start;return e.isEqual(s)?null:new ee(s)}function Toe(i,t){const{start:e,end:n}=i,s=t.checkChild(e,"$text"),r=t.checkChild(n,"$text"),o=t.getLimitElement(e),a=t.getLimitElement(n);if(o===a){if(s&&r)return null;if(koe(e,n,t)){const f=e.nodeAfter&&t.isSelectable(e.nodeAfter)?null:t.getNearestSelectionRange(e,"forward"),p=n.nodeBefore&&t.isSelectable(n.nodeBefore)?null:t.getNearestSelectionRange(n,"backward"),v=f?f.start:e,_=p?p.end:n;return new ee(v,_)}}const l=o&&!o.is("rootElement"),c=a&&!a.is("rootElement");if(l||c){const h=e.nodeAfter&&n.nodeBefore&&e.nodeAfter.parent===n.nodeBefore.parent,f=l&&(!h||!hP(e.nodeAfter,t)),m=c&&(!h||!hP(n.nodeBefore,t));let p=e,v=n;return f&&(p=de._createBefore(dP(o,t))),m&&(v=de._createAfter(dP(a,t))),new ee(p,v)}return null}function dP(i,t){let e=i,n=e;for(;t.isLimit(n)&&n.parent;)e=n,n=n.parent;return e}function koe(i,t,e){const n=i.nodeAfter&&!e.isLimit(i.nodeAfter)||e.checkChild(i,"$text"),s=t.nodeBefore&&!e.isLimit(t.nodeBefore)||e.checkChild(t,"$text");return n||s}function Soe(i){const t=[...i],e=new Set;let n=1;for(;n<t.length;){const r=t[n],o=t.slice(0,n);for(const[a,l]of o.entries())if(!e.has(a)){if(r.isEqual(l))e.add(a);else if(r.isIntersecting(l)){e.add(a),e.add(n);const c=r.getJoined(l);t.push(c)}}n++}return t.filter((r,o)=>!e.has(o))}function hP(i,t){return i&&t.isSelectable(i)}class Aoe extends Vt(){constructor(e,n){super();b(this,"model");b(this,"view");b(this,"mapper");b(this,"downcastDispatcher");this.model=e,this.view=new fre(n),this.mapper=new d4,this.downcastDispatcher=new h4({mapper:this.mapper,schema:e.schema});const s=this.model.document,r=s.selection,o=this.model.markers;this.listenTo(this.model,"_beforeChanges",()=>{this.view._disableRendering(!0)},{priority:"highest"}),this.listenTo(this.model,"_afterChanges",()=>{this.view._disableRendering(!1)},{priority:"lowest"}),this.listenTo(s,"change",()=>{this.view.change(a=>{this.downcastDispatcher.convertChanges(s.differ,o,a),this.downcastDispatcher.convertSelection(r,o,a)})},{priority:"low"}),this.listenTo(this.view.document,"selectionChange",doe(this.model,this.mapper)),this.listenTo(this.view.document,"beforeinput",Poe(this.mapper,this.model.schema,this.view),{priority:"high"}),this.downcastDispatcher.on("insert:$text",g4(),{priority:"lowest"}),this.downcastDispatcher.on("insert",p4(),{priority:"lowest"}),this.downcastDispatcher.on("remove",Ore(),{priority:"low"}),this.downcastDispatcher.on("cleanSelection",Lre()),this.downcastDispatcher.on("selection",Nre(),{priority:"low"}),this.downcastDispatcher.on("selection",Mre(),{priority:"low"}),this.view.document.roots.bindTo(this.model.document.roots).using(a=>{if(a.rootName=="$graveyard")return null;const l=new JM(this.view.document,a.name);return l.rootName=a.rootName,this.mapper.bindElements(a,l),l})}destroy(){this.view.destroy(),this.stopListening()}reconvertMarker(e){const n=typeof e=="string"?e:e.name,s=this.model.markers.get(n);if(!s)throw new B("editingcontroller-reconvertmarker-marker-not-exist",this,{markerName:n});this.model.change(()=>{this.model.markers._refresh(s)})}reconvertItem(e){this.model.change(()=>{this.model.document.differ._refreshItem(e)})}}function Poe(i,t,e){return(n,s)=>{if(!(e.document.isComposing&&!Xe.isAndroid))for(let r=0;r<s.targetRanges.length;r++){const o=s.targetRanges[r],a=i.toModelRange(o),l=P4(a,t);!l||l.isEqual(a)||(s.targetRanges[r]=i.toViewRange(l))}}}class Ioe extends Vt(){constructor(){super();b(this,"_sourceDefinitions",{});b(this,"_attributeProperties",Object.create(null));b(this,"_customChildChecks",new Map);b(this,"_customAttributeChecks",new Map);b(this,"_genericCheckSymbol",Symbol("$generic"));b(this,"_compiledDefinitions");this.decorate("checkChild"),this.decorate("checkAttribute"),this.on("checkAttribute",(e,n)=>{n[0]=new Ma(n[0])},{priority:"highest"}),this.on("checkChild",(e,n)=>{n[0]=new Ma(n[0]),n[1]=this.getDefinition(n[1])},{priority:"highest"})}register(e,n){if(this._sourceDefinitions[e])throw new B("schema-cannot-register-item-twice",this,{itemName:e});this._sourceDefinitions[e]=[Object.assign({},n)],this._clearCache()}extend(e,n){if(!this._sourceDefinitions[e])throw new B("schema-cannot-extend-missing-item",this,{itemName:e});this._sourceDefinitions[e].push(Object.assign({},n)),this._clearCache()}getDefinitions(){return this._compiledDefinitions||this._compile(),this._compiledDefinitions}getDefinition(e){let n;return typeof e=="string"?n=e:"is"in e&&(e.is("$text")||e.is("$textProxy"))?n="$text":n=e.name,this.getDefinitions()[n]}isRegistered(e){return!!this.getDefinition(e)}isBlock(e){const n=this.getDefinition(e);return!!(n&&n.isBlock)}isLimit(e){const n=this.getDefinition(e);return n?!!(n.isLimit||n.isObject):!1}isObject(e){const n=this.getDefinition(e);return n?!!(n.isObject||n.isLimit&&n.isSelectable&&n.isContent):!1}isInline(e){const n=this.getDefinition(e);return!!(n&&n.isInline)}isSelectable(e){const n=this.getDefinition(e);return n?!!(n.isSelectable||n.isObject):!1}isContent(e){const n=this.getDefinition(e);return n?!!(n.isContent||n.isObject):!1}checkChild(e,n){return n?this._checkContextMatch(e,n):!1}checkAttribute(e,n){const s=this.getDefinition(e.last);if(!s)return!1;const r=this._evaluateAttributeChecks(e,n);return r!==void 0?r:s.allowAttributes.includes(n)}checkMerge(e,n){if(e instanceof de){const s=e.nodeBefore,r=e.nodeAfter;if(!(s instanceof fn))throw new B("schema-check-merge-no-element-before",this);if(!(r instanceof fn))throw new B("schema-check-merge-no-element-after",this);return this.checkMerge(s,r)}if(this.isLimit(e)||this.isLimit(n))return!1;for(const s of n.getChildren())if(!this.checkChild(e,s))return!1;return!0}addChildCheck(e,n){const s=n!==void 0?n:this._genericCheckSymbol,r=this._customChildChecks.get(s)||[];r.push(e),this._customChildChecks.set(s,r)}addAttributeCheck(e,n){const s=n!==void 0?n:this._genericCheckSymbol,r=this._customAttributeChecks.get(s)||[];r.push(e),this._customAttributeChecks.set(s,r)}setAttributeProperties(e,n){this._attributeProperties[e]=Object.assign(this.getAttributeProperties(e),n)}getAttributeProperties(e){return this._attributeProperties[e]||Object.create(null)}getLimitElement(e){let n;for(e instanceof de?n=e.parent:n=(e instanceof ee?[e]:Array.from(e.getRanges())).reduce((r,o)=>{const a=o.getCommonAncestor();return r?r.getCommonAncestor(a,{includeSelf:!0}):a},null);!this.isLimit(n)&&n.parent;)n=n.parent;return n}checkAttributeInSelection(e,n){if(e.isCollapsed){const r=[...e.getFirstPosition().getAncestors(),new Jt("",e.getAttributes())];return this.checkAttribute(r,n)}else{const s=e.getRanges();for(const r of s)for(const o of r)if(this.checkAttribute(o.item,n))return!0}return!1}*getValidRanges(e,n){e=qoe(e);for(const s of e)yield*this._getValidRangesForRange(s,n)}getNearestSelectionRange(e,n="both"){if(e.root.rootName=="$graveyard")return null;if(this.checkChild(e,"$text"))return new ee(e);let s,r;const o=e.getAncestors().reverse().find(a=>this.isLimit(a))||e.root;(n=="both"||n=="backward")&&(s=new Mo({boundaries:ee._createIn(o),startPosition:e,direction:"backward"})),(n=="both"||n=="forward")&&(r=new Mo({boundaries:ee._createIn(o),startPosition:e}));for(const a of Woe(s,r)){const l=a.walker==s?"elementEnd":"elementStart",c=a.value;if(c.type==l&&this.isObject(c.item))return ee._createOn(c.item);if(this.checkChild(c.nextPosition,"$text"))return new ee(c.nextPosition)}return null}findAllowedParent(e,n){let s=e.parent;for(;s;){if(this.checkChild(s,n))return s;if(this.isLimit(s))return null;s=s.parent}return null}setAllowedAttributes(e,n,s){const r=s.model;for(const[o,a]of Object.entries(n))r.schema.checkAttribute(e,o)&&s.setAttribute(o,a,e)}removeDisallowedAttributes(e,n){for(const s of e)if(s.is("$text"))fP(this,s,n);else{const o=ee._createIn(s).getPositions();for(const a of o){const l=a.nodeBefore||a.parent;fP(this,l,n)}}}getAttributesWithProperty(e,n,s){const r={};for(const[o,a]of e.getAttributes()){const l=this.getAttributeProperties(o);l[n]!==void 0&&(s===void 0||s===l[n])&&(r[o]=a)}return r}createContext(e){return new Ma(e)}_clearCache(){this._compiledDefinitions=null}_compile(){const e={},n=this._sourceDefinitions,s=Object.keys(n);for(const o of s)e[o]=Roe(n[o],o);const r=Object.values(e);for(const o of r)Ooe(e,o),Noe(e,o),Moe(e,o),Loe(e,o);for(const o of r)Voe(e,o);for(const o of r)Doe(e,o);for(const o of r)Boe(e,o);for(const o of r)$oe(e,o);for(const o of r)zoe(e,o);this._compiledDefinitions=Foe(e)}_checkContextMatch(e,n){const s=e.last;let r=this._evaluateChildChecks(e,n);if(r=r!==void 0?r:n.allowIn.includes(s.name),!r)return!1;const o=this.getDefinition(s),a=e.trimLast();return o?a.length==0?!0:this._checkContextMatch(a,o):!1}_evaluateChildChecks(e,n){const s=this._customChildChecks.get(this._genericCheckSymbol)||[],r=this._customChildChecks.get(n.name)||[];for(const o of[...s,...r]){const a=o(e,n);if(a!==void 0)return a}}_evaluateAttributeChecks(e,n){const s=this._customAttributeChecks.get(this._genericCheckSymbol)||[],r=this._customAttributeChecks.get(n)||[];for(const o of[...s,...r]){const a=o(e,n);if(a!==void 0)return a}}*_getValidRangesForRange(e,n){let s=e.start,r=e.start;for(const o of e.getItems({shallow:!0}))o.is("element")&&(yield*this._getValidRangesForRange(ee._createIn(o),n)),this.checkAttribute(o,n)||(s.isEqual(r)||(yield new ee(s,r)),s=de._createAfter(o)),r=de._createAfter(o);s.isEqual(r)||(yield new ee(s,r))}findOptimalInsertionRange(e,n){const s=e.getSelectedElement();if(s&&this.isObject(s)&&!this.isInline(s))return n=="before"||n=="after"?new ee(de._createAt(s,n)):ee._createOn(s);const r=Tn(e.getSelectedBlocks());if(!r)return new ee(e.focus);if(r.isEmpty)return new ee(de._createAt(r,0));const o=de._createAfter(r);return e.focus.isTouching(o)?new ee(o):new ee(de._createBefore(r))}}class Ma{constructor(t){b(this,"_items");if(t instanceof Ma)return t;let e;typeof t=="string"?e=[t]:Array.isArray(t)?e=t:e=t.getAncestors({includeSelf:!0}),this._items=e.map(Uoe)}get length(){return this._items.length}get last(){return this._items[this._items.length-1]}[Symbol.iterator](){return this._items[Symbol.iterator]()}push(t){const e=new Ma([t]);return e._items=[...this._items,...e._items],e}trimLast(){const t=new Ma([]);return t._items=this._items.slice(0,-1),t}getItem(t){return this._items[t]}*getNames(){yield*this._items.map(t=>t.name)}endsWith(t){return Array.from(this.getNames()).join(" ").endsWith(t)}startsWith(t){return Array.from(this.getNames()).join(" ").startsWith(t)}}function Roe(i,t){const e={name:t,allowIn:new Set,allowChildren:new Set,disallowIn:new Set,disallowChildren:new Set,allowContentOf:new Set,allowWhere:new Set,allowAttributes:new Set,disallowAttributes:new Set,allowAttributesOf:new Set,inheritTypesFrom:new Set};return joe(i,e),Gr(i,e,"allowIn"),Gr(i,e,"allowChildren"),Gr(i,e,"disallowIn"),Gr(i,e,"disallowChildren"),Gr(i,e,"allowContentOf"),Gr(i,e,"allowWhere"),Gr(i,e,"allowAttributes"),Gr(i,e,"disallowAttributes"),Gr(i,e,"allowAttributesOf"),Gr(i,e,"inheritTypesFrom"),Hoe(i,e),e}function Ooe(i,t){for(const e of t.allowIn){const n=i[e];n?n.allowChildren.add(t.name):t.allowIn.delete(e)}}function Noe(i,t){for(const e of t.allowChildren){const n=i[e];n?n.allowIn.add(t.name):t.allowChildren.delete(e)}}function Moe(i,t){for(const e of t.disallowIn){const n=i[e];n?n.disallowChildren.add(t.name):t.disallowIn.delete(e)}}function Loe(i,t){for(const e of t.disallowChildren){const n=i[e];n?n.disallowIn.add(t.name):t.disallowChildren.delete(e)}}function Voe(i,t){for(const e of t.disallowChildren)t.allowChildren.delete(e);for(const e of t.disallowIn)t.allowIn.delete(e);for(const e of t.disallowAttributes)t.allowAttributes.delete(e)}function Doe(i,t){for(const e of t.allowContentOf){const n=i[e];n&&(n.disallowChildren.forEach(s=>{t.allowChildren.has(s)||(t.disallowChildren.add(s),i[s].disallowIn.add(t.name))}),n.allowChildren.forEach(s=>{t.disallowChildren.has(s)||(t.allowChildren.add(s),i[s].allowIn.add(t.name))}))}}function Boe(i,t){for(const e of t.allowWhere){const n=i[e];n&&(n.disallowIn.forEach(s=>{t.allowIn.has(s)||(t.disallowIn.add(s),i[s].disallowChildren.add(t.name))}),n.allowIn.forEach(s=>{t.disallowIn.has(s)||(t.allowIn.add(s),i[s].allowChildren.add(t.name))}))}}function Foe(i){const t={};for(const e of Object.values(i))t[e.name]={name:e.name,isBlock:!!e.isBlock,isContent:!!e.isContent,isInline:!!e.isInline,isLimit:!!e.isLimit,isObject:!!e.isObject,isSelectable:!!e.isSelectable,allowIn:Array.from(e.allowIn).filter(n=>!!i[n]),allowChildren:Array.from(e.allowChildren).filter(n=>!!i[n]),allowAttributes:Array.from(e.allowAttributes)};return t}function $oe(i,t){for(const e of t.allowAttributesOf){const n=i[e];if(!n)return;n.allowAttributes.forEach(s=>{t.disallowAttributes.has(s)||t.allowAttributes.add(s)})}}function zoe(i,t){for(const e of t.inheritTypesFrom){const n=i[e];if(n){const s=Object.keys(n).filter(r=>r.startsWith("is"));for(const r of s)r in t||(t[r]=n[r])}}}function joe(i,t){for(const e of i){const n=Object.keys(e).filter(s=>s.startsWith("is"));for(const s of n)t[s]=!!e[s]}}function Gr(i,t,e){for(const n of i){let s=n[e];typeof s=="string"&&(s=[s]),Array.isArray(s)&&s.forEach(r=>t[e].add(r))}}function Hoe(i,t){for(const e of i){const n=e.inheritAllFrom;n&&(t.allowContentOf.add(n),t.allowWhere.add(n),t.allowAttributesOf.add(n),t.inheritTypesFrom.add(n))}}function Uoe(i){return typeof i=="string"||i.is("documentFragment")?{name:typeof i=="string"?i:"$documentFragment",*getAttributeKeys(){},getAttribute(){}}:{name:i.is("element")?i.name:"$text",*getAttributeKeys(){yield*i.getAttributeKeys()},getAttribute(t){return i.getAttribute(t)}}}function*Woe(i,t){let e=!1;for(;!e;){if(e=!0,i){const n=i.next();n.done||(e=!1,yield{walker:i,value:n.value})}if(t){const n=t.next();n.done||(e=!1,yield{walker:t,value:n.value})}}}function*qoe(i){for(const t of i)yield*t.getMinimalFlatRanges()}function fP(i,t,e){for(const n of t.getAttributeKeys())i.checkAttribute(t,n)||e.removeAttribute(n,t)}class Goe extends Ft(){constructor(e){super();b(this,"conversionApi");b(this,"_splitParts",new Map);b(this,"_cursorParents",new Map);b(this,"_modelCursor",null);b(this,"_emptyElementsToKeep",new Set);this.conversionApi={...e,consumable:null,writer:null,store:null,convertItem:(n,s)=>this._convertItem(n,s),convertChildren:(n,s)=>this._convertChildren(n,s),safeInsert:(n,s)=>this._safeInsert(n,s),updateConversionResult:(n,s)=>this._updateConversionResult(n,s),splitToAllowedParent:(n,s)=>this._splitToAllowedParent(n,s),getSplitParts:n=>this._getSplitParts(n),keepEmptyElement:n=>this._keepEmptyElement(n)}}convert(e,n,s=["$root"]){this.fire("viewCleanup",e),this._modelCursor=Yoe(s,n),this.conversionApi.writer=n,this.conversionApi.consumable=Gp.createFrom(e),this.conversionApi.store={};const{modelRange:r}=this._convertItem(e,this._modelCursor),o=n.createDocumentFragment();if(r){this._removeEmptyElements();const a=this._modelCursor.parent,l=a._removeChildren(0,a.childCount);o._insertChild(0,l),o.markers=Koe(o,n)}return this._modelCursor=null,this._splitParts.clear(),this._cursorParents.clear(),this._emptyElementsToKeep.clear(),this.conversionApi.writer=null,this.conversionApi.store=null,o}_convertItem(e,n){const s={viewItem:e,modelCursor:n,modelRange:null};if(e.is("element")?this.fire(`element:${e.name}`,s,this.conversionApi):e.is("$text")?this.fire("text",s,this.conversionApi):this.fire("documentFragment",s,this.conversionApi),s.modelRange&&!(s.modelRange instanceof ee))throw new B("view-conversion-dispatcher-incorrect-result",this);return{modelRange:s.modelRange,modelCursor:s.modelCursor}}_convertChildren(e,n){let s=n.is("position")?n:de._createAt(n,0);const r=new ee(s);for(const o of Array.from(e.getChildren())){const a=this._convertItem(o,s);a.modelRange instanceof ee&&(r.end=a.modelRange.end,s=a.modelCursor)}return{modelRange:r,modelCursor:s}}_safeInsert(e,n){const s=this._splitToAllowedParent(e,n);return s?(this.conversionApi.writer.insert(e,s.position),!0):!1}_updateConversionResult(e,n){const s=this._getSplitParts(e),r=this.conversionApi.writer;n.modelRange||(n.modelRange=r.createRange(r.createPositionBefore(e),r.createPositionAfter(s[s.length-1])));const o=this._cursorParents.get(e);o?n.modelCursor=r.createPositionAt(o,0):n.modelCursor=n.modelRange.end}_splitToAllowedParent(e,n){const{schema:s,writer:r}=this.conversionApi;let o=s.findAllowedParent(n,e);if(o){if(o===n.parent)return{position:n};this._modelCursor.parent.getAncestors().includes(o)&&(o=null)}if(!o)return x4(n,e,s)?{position:T4(n,r)}:null;const a=this.conversionApi.writer.split(n,o),l=[];for(const h of a.range.getWalker())if(h.type=="elementEnd")l.push(h.item);else{const f=l.pop(),m=h.item;this._registerSplitPair(f,m)}const c=a.range.end.parent;return this._cursorParents.set(e,c),{position:a.position,cursorParent:c}}_registerSplitPair(e,n){this._splitParts.has(e)||this._splitParts.set(e,[e]);const s=this._splitParts.get(e);this._splitParts.set(n,s),s.push(n)}_getSplitParts(e){let n;return this._splitParts.has(e)?n=this._splitParts.get(e):n=[e],n}_keepEmptyElement(e){this._emptyElementsToKeep.add(e)}_removeEmptyElements(){const e=new Map;for(const n of this._splitParts.keys())if(n.isEmpty&&!this._emptyElementsToKeep.has(n)){const s=e.get(n.parent)||[];s.push(n),this._splitParts.delete(n),e.set(n.parent,s)}for(const[n,s]of e)n._removeChildrenArray(s);e.size&&this._removeEmptyElements()}}function Koe(i,t){const e=new Set,n=new Map,s=ee._createIn(i).getItems();for(const r of s)r.is("element","$marker")&&e.add(r);for(const r of e){const o=r.getAttribute("data-name"),a=t.createPositionBefore(r);n.has(o)?n.get(o).end=a.clone():n.set(o,new ee(a.clone())),t.remove(r)}return n}function Yoe(i,t){let e;for(const n of new Ma(i)){const s={};for(const o of n.getAttributeKeys())s[o]=n.getAttribute(o);const r=t.createElement(n.name,s);e&&t.insert(r,e),e=de._createAt(r,0)}return e}class Zoe{getHtml(t){const n=Re.document.implementation.createHTMLDocument("").createElement("div");return n.appendChild(t),n.innerHTML}}class Xoe{constructor(t){b(this,"domParser");b(this,"domConverter");b(this,"htmlWriter");b(this,"skipComments",!0);this.domParser=new DOMParser,this.domConverter=new rw(t,{renderingMode:"data"}),this.htmlWriter=new Zoe}toData(t){const e=this.domConverter.viewToDom(t);return this.htmlWriter.getHtml(e)}toView(t){const e=this._toDom(t);return this.domConverter.domToView(e,{skipComments:this.skipComments})}registerRawContentMatcher(t){this.domConverter.registerRawContentMatcher(t)}useFillerType(t){this.domConverter.blockFillerMode=t=="marked"?"markedNbsp":"nbsp"}_toDom(t){/<(?:html|body|head|meta)(?:\s[^>]*)?>/i.test(t.trim().slice(0,1e4))||(t=`<body>${t}</body>`);const e=this.domParser.parseFromString(t,"text/html"),n=e.createDocumentFragment(),s=e.body.childNodes;for(;s.length>0;)n.appendChild(s[0]);return n}}class Joe extends Ft(){constructor(e,n){super();b(this,"model");b(this,"mapper");b(this,"downcastDispatcher");b(this,"upcastDispatcher");b(this,"viewDocument");b(this,"stylesProcessor");b(this,"htmlProcessor");b(this,"processor");b(this,"_viewWriter");this.model=e,this.mapper=new d4,this.downcastDispatcher=new h4({mapper:this.mapper,schema:e.schema}),this.downcastDispatcher.on("insert:$text",g4(),{priority:"lowest"}),this.downcastDispatcher.on("insert",p4(),{priority:"lowest"}),this.upcastDispatcher=new Goe({schema:e.schema}),this.viewDocument=new iw(n),this.stylesProcessor=n,this.htmlProcessor=new Xoe(this.viewDocument),this.processor=this.htmlProcessor,this._viewWriter=new t4(this.viewDocument),this.upcastDispatcher.on("text",uoe(),{priority:"lowest"}),this.upcastDispatcher.on("element",cP(),{priority:"lowest"}),this.upcastDispatcher.on("documentFragment",cP(),{priority:"lowest"}),Vt().prototype.decorate.call(this,"init"),Vt().prototype.decorate.call(this,"set"),Vt().prototype.decorate.call(this,"get"),Vt().prototype.decorate.call(this,"toView"),Vt().prototype.decorate.call(this,"toModel"),this.on("init",()=>{this.fire("ready")},{priority:"lowest"}),this.on("ready",()=>{this.model.enqueueChange({isUndoable:!1},C4)},{priority:"lowest"})}get(e={}){const{rootName:n="main",trim:s="empty"}=e;if(!this._checkIfRootsExists([n]))throw new B("datacontroller-get-non-existent-root",this);const r=this.model.document.getRoot(n);return r.isAttached()||Tt("datacontroller-get-detached-root",this),s==="empty"&&!this.model.hasContent(r,{ignoreWhitespaces:!0})?"":this.stringify(r,e)}stringify(e,n={}){const s=this.toView(e,n);return this.processor.toData(s)}toView(e,n={}){const s=this.viewDocument,r=this._viewWriter;this.mapper.clearBindings();const o=ee._createIn(e),a=new Dl(s);this.mapper.bindElements(e,a);const l=e.is("documentFragment")?e.markers:Qoe(e);return this.downcastDispatcher.convert(o,l,r,n),a}init(e){if(this.model.document.version)throw new B("datacontroller-init-document-not-empty",this);let n={};if(typeof e=="string"?n.main=e:n=e,!this._checkIfRootsExists(Object.keys(n)))throw new B("datacontroller-init-non-existent-root",this);return this.model.enqueueChange({isUndoable:!1},s=>{for(const r of Object.keys(n)){const o=this.model.document.getRoot(r);s.insert(this.parse(n[r],o),o,0)}}),Promise.resolve()}set(e,n={}){let s={};if(typeof e=="string"?s.main=e:s=e,!this._checkIfRootsExists(Object.keys(s)))throw new B("datacontroller-set-non-existent-root",this);this.model.enqueueChange(n.batchType||{},r=>{r.setSelection(null),r.removeSelectionAttribute(this.model.document.selection.getAttributeKeys());for(const o of Object.keys(s)){const a=this.model.document.getRoot(o);r.remove(r.createRangeIn(a)),r.insert(this.parse(s[o],a),a,0)}})}parse(e,n="$root"){const s=this.processor.toView(e);return this.toModel(s,n)}toModel(e,n="$root"){return this.model.change(s=>this.upcastDispatcher.convert(e,s,n))}addStyleProcessorRules(e){e(this.stylesProcessor)}registerRawContentMatcher(e){this.processor&&this.processor!==this.htmlProcessor&&this.processor.registerRawContentMatcher(e),this.htmlProcessor.registerRawContentMatcher(e)}destroy(){this.stopListening()}_checkIfRootsExists(e){for(const n of e)if(!this.model.document.getRoot(n))return!1;return!0}}function Qoe(i){const t=[],e=i.root.document;if(!e)return new Map;const n=ee._createIn(i);for(const s of e.model.markers){const r=s.getRange(),o=r.isCollapsed,a=r.start.isEqual(n.start)||r.end.isEqual(n.end);if(o&&a)t.push([s.name,r]);else{const l=n.getIntersection(r);l&&t.push([s.name,l])}}return t.sort(([s,r],[o,a])=>{if(r.end.compareWith(a.start)!=="after")return 1;if(r.start.compareWith(a.end)!=="before")return-1;switch(r.start.compareWith(a.start)){case"before":return 1;case"after":return-1;default:switch(r.end.compareWith(a.end)){case"before":return 1;case"after":return-1;default:return o.localeCompare(s)}}}),new Map(t)}class eae{constructor(t,e){b(this,"_helpers",new Map);b(this,"_downcast");b(this,"_upcast");this._downcast=Qt(t),this._createConversionHelpers({name:"downcast",dispatchers:this._downcast,isDowncast:!0}),this._upcast=Qt(e),this._createConversionHelpers({name:"upcast",dispatchers:this._upcast,isDowncast:!1})}addAlias(t,e){const n=this._downcast.includes(e);if(!this._upcast.includes(e)&&!n)throw new B("conversion-add-alias-dispatcher-not-registered",this);this._createConversionHelpers({name:t,dispatchers:[e],isDowncast:n})}for(t){if(!this._helpers.has(t))throw new B("conversion-for-unknown-group",this);return this._helpers.get(t)}elementToElement(t){this.for("downcast").elementToElement(t);for(const{model:e,view:n}of y1(t))this.for("upcast").elementToElement({model:e,view:n,converterPriority:t.converterPriority})}attributeToElement(t){this.for("downcast").attributeToElement(t);for(const{model:e,view:n}of y1(t))this.for("upcast").elementToAttribute({view:n,model:e,converterPriority:t.converterPriority})}attributeToAttribute(t){this.for("downcast").attributeToAttribute(t);for(const{model:e,view:n}of y1(t))this.for("upcast").attributeToAttribute({view:n,model:e})}_createConversionHelpers({name:t,dispatchers:e,isDowncast:n}){if(this._helpers.has(t))throw new B("conversion-group-exists",this);const s=n?new Rre(e):new coe(e);this._helpers.set(t,s)}}function*y1(i){if(i.model.values)for(const t of i.model.values){const e={key:i.model.key,value:t},n=i.view[t],s=i.upcastAlso?i.upcastAlso[t]:void 0;yield*mP(e,n,s)}else yield*mP(i.model,i.view,i.upcastAlso)}function*mP(i,t,e){if(yield{model:i,view:t},e)for(const n of Qt(e))yield{model:i,view:n}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class xs{constructor(t){b(this,"baseVersion");b(this,"isDocumentOperation");b(this,"batch");this.baseVersion=t,this.isDocumentOperation=this.baseVersion!==null,this.batch=null}_validate(){}toJSON(){const t=Object.assign({},this);return t.__className=this.constructor.className,delete t.batch,delete t.isDocumentOperation,t}static get className(){return"Operation"}static fromJSON(t,e){return new this(t.baseVersion)}}function uC(i,t){const e=R4(t),n=e.reduce((o,a)=>o+a.offsetSize,0),s=i.parent;cf(i);const r=i.index;return s._insertChild(r,e),lf(s,r+e.length),lf(s,r),new ee(i,i.getShiftedBy(n))}function I4(i){if(!i.isFlat)throw new B("operation-utils-remove-range-not-flat",this);const t=i.start.parent;cf(i.start),cf(i.end);const e=t._removeChildren(i.start.index,i.end.index-i.start.index);return lf(t,i.start.index),e}function af(i,t){if(!i.isFlat)throw new B("operation-utils-move-range-not-flat",this);const e=I4(i);return t=t._getTransformedByDeletion(i.start,i.end.offset-i.start.offset),uC(t,e)}function tae(i,t,e){cf(i.start),cf(i.end);for(const n of i.getItems({shallow:!0})){const s=n.is("$textProxy")?n.textNode:n;e!==null?s._setAttribute(t,e):s._removeAttribute(t),lf(s.parent,s.index)}lf(i.end.parent,i.end.index)}function R4(i){const t=[];function e(n){if(typeof n=="string")t.push(new Jt(n));else if(n instanceof wr)t.push(new Jt(n.data,n.getAttributes()));else if(n instanceof rc)t.push(n);else if(Es(n))for(const s of n)e(s)}e(i);for(let n=1;n<t.length;n++){const s=t[n],r=t[n-1];s instanceof Jt&&r instanceof Jt&&O4(s,r)&&(t.splice(n-1,2,new Jt(r.data+s.data,r.getAttributes())),n--)}return t}function lf(i,t){const e=i.getChild(t-1),n=i.getChild(t);if(e&&n&&e.is("$text")&&n.is("$text")&&O4(e,n)){const s=new Jt(e.data+n.data,e.getAttributes());i._removeChildren(t-1,2),i._insertChild(t-1,s)}}function cf(i){const t=i.textNode,e=i.parent;if(t){const n=i.offset-t.startOffset,s=t.index;e._removeChildren(s,1);const r=new Jt(t.data.substr(0,n),t.getAttributes()),o=new Jt(t.data.substr(n),t.getAttributes());e._insertChild(s,[r,o])}}function O4(i,t){const e=i.getAttributes(),n=t.getAttributes();for(const s of e){if(s[1]!==t.getAttribute(s[0]))return!1;n.next()}return n.next().done}class Ot extends xs{constructor(e,n,s,r){super(r);b(this,"sourcePosition");b(this,"howMany");b(this,"targetPosition");this.sourcePosition=e.clone(),this.sourcePosition.stickiness="toNext",this.howMany=n,this.targetPosition=s.clone(),this.targetPosition.stickiness="toNone"}get type(){return this.targetPosition.root.rootName=="$graveyard"?"remove":this.sourcePosition.root.rootName=="$graveyard"?"reinsert":"move"}get affectedSelectable(){return[ee._createFromPositionAndShift(this.sourcePosition,this.howMany),ee._createFromPositionAndShift(this.targetPosition,0)]}clone(){return new Ot(this.sourcePosition,this.howMany,this.targetPosition,this.baseVersion)}getMovedRangeStart(){return this.targetPosition._getTransformedByDeletion(this.sourcePosition,this.howMany)}getReversed(){const e=this.sourcePosition._getTransformedByInsertion(this.targetPosition,this.howMany);return new Ot(this.getMovedRangeStart(),this.howMany,e,this.baseVersion+1)}_validate(){const e=this.sourcePosition.parent,n=this.targetPosition.parent,s=this.sourcePosition.offset,r=this.targetPosition.offset;if(s+this.howMany>e.maxOffset)throw new B("move-operation-nodes-do-not-exist",this);if(e===n&&s<r&&r<s+this.howMany)throw new B("move-operation-range-into-itself",this);if(this.sourcePosition.root==this.targetPosition.root&&pi(this.sourcePosition.getParentPath(),this.targetPosition.getParentPath())=="prefix"){const o=this.sourcePosition.path.length-1;if(this.targetPosition.path[o]>=s&&this.targetPosition.path[o]<s+this.howMany)throw new B("move-operation-node-into-itself",this)}}_execute(){af(ee._createFromPositionAndShift(this.sourcePosition,this.howMany),this.targetPosition)}toJSON(){const e=super.toJSON();return e.sourcePosition=this.sourcePosition.toJSON(),e.targetPosition=this.targetPosition.toJSON(),e}static get className(){return"MoveOperation"}static fromJSON(e,n){const s=de.fromJSON(e.sourcePosition,n),r=de.fromJSON(e.targetPosition,n);return new this(s,e.howMany,r,e.baseVersion)}}class Zn extends xs{constructor(e,n,s){super(s);b(this,"position");b(this,"nodes");b(this,"shouldReceiveAttributes");this.position=e.clone(),this.position.stickiness="toNone",this.nodes=new Vh(R4(n)),this.shouldReceiveAttributes=!1}get type(){return"insert"}get howMany(){return this.nodes.maxOffset}get affectedSelectable(){return this.position.clone()}clone(){const e=new Vh([...this.nodes].map(s=>s._clone(!0))),n=new Zn(this.position,e,this.baseVersion);return n.shouldReceiveAttributes=this.shouldReceiveAttributes,n}getReversed(){const e=this.position.root.document.graveyard,n=new de(e,[0]);return new Ot(this.position,this.nodes.maxOffset,n,this.baseVersion+1)}_validate(){const e=this.position.parent;if(!e||e.maxOffset<this.position.offset)throw new B("insert-operation-position-invalid",this)}_execute(){const e=this.nodes;this.nodes=new Vh([...e].map(n=>n._clone(!0))),uC(this.position,e)}toJSON(){const e=super.toJSON();return e.position=this.position.toJSON(),e.nodes=this.nodes.toJSON(),e}static get className(){return"InsertOperation"}static fromJSON(e,n){const s=[];for(const o of e.nodes)o.name?s.push(fn.fromJSON(o)):s.push(Jt.fromJSON(o));const r=new Zn(de.fromJSON(e.position,n),s,e.baseVersion);return r.shouldReceiveAttributes=e.shouldReceiveAttributes,r}}class Ut extends xs{constructor(e,n,s,r,o){super(o);b(this,"splitPosition");b(this,"howMany");b(this,"insertionPosition");b(this,"graveyardPosition");this.splitPosition=e.clone(),this.splitPosition.stickiness="toNext",this.howMany=n,this.insertionPosition=s,this.graveyardPosition=r?r.clone():null,this.graveyardPosition&&(this.graveyardPosition.stickiness="toNext")}get type(){return"split"}get moveTargetPosition(){const e=this.insertionPosition.path.slice();return e.push(0),new de(this.insertionPosition.root,e)}get movedRange(){const e=this.splitPosition.getShiftedBy(Number.POSITIVE_INFINITY);return new ee(this.splitPosition,e)}get affectedSelectable(){const e=[ee._createFromPositionAndShift(this.splitPosition,0),ee._createFromPositionAndShift(this.insertionPosition,0)];return this.graveyardPosition&&e.push(ee._createFromPositionAndShift(this.graveyardPosition,0)),e}clone(){return new Ut(this.splitPosition,this.howMany,this.insertionPosition,this.graveyardPosition,this.baseVersion)}getReversed(){const e=this.splitPosition.root.document.graveyard,n=new de(e,[0]);return new xn(this.moveTargetPosition,this.howMany,this.splitPosition,n,this.baseVersion+1)}_validate(){const e=this.splitPosition.parent,n=this.splitPosition.offset;if(!e||e.maxOffset<n)throw new B("split-operation-position-invalid",this);if(e.parent){if(this.howMany!=e.maxOffset-this.splitPosition.offset)throw new B("split-operation-how-many-invalid",this);if(this.graveyardPosition&&!this.graveyardPosition.nodeAfter)throw new B("split-operation-graveyard-position-invalid",this)}else throw new B("split-operation-split-in-root",this)}_execute(){const e=this.splitPosition.parent;if(this.graveyardPosition)af(ee._createFromPositionAndShift(this.graveyardPosition,1),this.insertionPosition);else{const s=e._clone();uC(this.insertionPosition,s)}const n=new ee(de._createAt(e,this.splitPosition.offset),de._createAt(e,e.maxOffset));af(n,this.moveTargetPosition)}toJSON(){const e=super.toJSON();return e.splitPosition=this.splitPosition.toJSON(),e.insertionPosition=this.insertionPosition.toJSON(),this.graveyardPosition&&(e.graveyardPosition=this.graveyardPosition.toJSON()),e}static get className(){return"SplitOperation"}static getInsertionPosition(e){const n=e.path.slice(0,-1);return n[n.length-1]++,new de(e.root,n,"toPrevious")}static fromJSON(e,n){const s=de.fromJSON(e.splitPosition,n),r=de.fromJSON(e.insertionPosition,n),o=e.graveyardPosition?de.fromJSON(e.graveyardPosition,n):null;return new this(s,e.howMany,r,o,e.baseVersion)}}class xn extends xs{constructor(e,n,s,r,o){super(o);b(this,"sourcePosition");b(this,"howMany");b(this,"targetPosition");b(this,"graveyardPosition");this.sourcePosition=e.clone(),this.sourcePosition.stickiness="toPrevious",this.howMany=n,this.targetPosition=s.clone(),this.targetPosition.stickiness="toNext",this.graveyardPosition=r.clone()}get type(){return"merge"}get deletionPosition(){return new de(this.sourcePosition.root,this.sourcePosition.path.slice(0,-1))}get movedRange(){const e=this.sourcePosition.getShiftedBy(Number.POSITIVE_INFINITY);return new ee(this.sourcePosition,e)}get affectedSelectable(){const e=this.sourcePosition.parent;return[ee._createOn(e),ee._createFromPositionAndShift(this.targetPosition,0),ee._createFromPositionAndShift(this.graveyardPosition,0)]}clone(){return new xn(this.sourcePosition,this.howMany,this.targetPosition,this.graveyardPosition,this.baseVersion)}getReversed(){const e=this.targetPosition._getTransformedByMergeOperation(this),n=this.sourcePosition.path.slice(0,-1),s=new de(this.sourcePosition.root,n)._getTransformedByMergeOperation(this);return new Ut(e,this.howMany,s,this.graveyardPosition,this.baseVersion+1)}_validate(){const e=this.sourcePosition.parent,n=this.targetPosition.parent;if(e.parent)if(n.parent){if(this.howMany!=e.maxOffset)throw new B("merge-operation-how-many-invalid",this)}else throw new B("merge-operation-target-position-invalid",this);else throw new B("merge-operation-source-position-invalid",this)}_execute(){const e=this.sourcePosition.parent,n=ee._createIn(e);af(n,this.targetPosition),af(ee._createOn(e),this.graveyardPosition)}toJSON(){const e=super.toJSON();return e.sourcePosition=e.sourcePosition.toJSON(),e.targetPosition=e.targetPosition.toJSON(),e.graveyardPosition=e.graveyardPosition.toJSON(),e}static get className(){return"MergeOperation"}static fromJSON(e,n){const s=de.fromJSON(e.sourcePosition,n),r=de.fromJSON(e.targetPosition,n),o=de.fromJSON(e.graveyardPosition,n);return new this(s,e.howMany,r,o,e.baseVersion)}}class Pi extends xs{constructor(e,n,s,r,o,a){super(a);b(this,"name");b(this,"oldRange");b(this,"newRange");b(this,"affectsData");b(this,"_markers");this.name=e,this.oldRange=n?n.clone():null,this.newRange=s?s.clone():null,this.affectsData=o,this._markers=r}get type(){return"marker"}get affectedSelectable(){const e=[];return this.oldRange&&e.push(this.oldRange.clone()),this.newRange&&(this.oldRange?e.push(...this.newRange.getDifference(this.oldRange)):e.push(this.newRange.clone())),e}clone(){return new Pi(this.name,this.oldRange,this.newRange,this._markers,this.affectsData,this.baseVersion)}getReversed(){return new Pi(this.name,this.newRange,this.oldRange,this._markers,this.affectsData,this.baseVersion+1)}_execute(){this.newRange?this._markers._set(this.name,this.newRange,!0,this.affectsData):this._markers._remove(this.name)}toJSON(){const e=super.toJSON();return this.oldRange&&(e.oldRange=this.oldRange.toJSON()),this.newRange&&(e.newRange=this.newRange.toJSON()),delete e._markers,e}static get className(){return"MarkerOperation"}static fromJSON(e,n){return new Pi(e.name,e.oldRange?ee.fromJSON(e.oldRange,n):null,e.newRange?ee.fromJSON(e.newRange,n):null,n.model.markers,e.affectsData,e.baseVersion)}}class Pn extends xs{constructor(e,n,s,r,o){super(o);b(this,"range");b(this,"key");b(this,"oldValue");b(this,"newValue");this.range=e.clone(),this.key=n,this.oldValue=s===void 0?null:s,this.newValue=r===void 0?null:r}get type(){return this.oldValue===null?"addAttribute":this.newValue===null?"removeAttribute":"changeAttribute"}get affectedSelectable(){return this.range.clone()}clone(){return new Pn(this.range,this.key,this.oldValue,this.newValue,this.baseVersion)}getReversed(){return new Pn(this.range,this.key,this.newValue,this.oldValue,this.baseVersion+1)}toJSON(){const e=super.toJSON();return e.range=this.range.toJSON(),e}_validate(){if(!this.range.isFlat)throw new B("attribute-operation-range-not-flat",this);for(const e of this.range.getItems({shallow:!0})){if(this.oldValue!==null&&!Up(e.getAttribute(this.key),this.oldValue))throw new B("attribute-operation-wrong-old-value",this,{item:e,key:this.key,value:this.oldValue});if(this.oldValue===null&&this.newValue!==null&&e.hasAttribute(this.key))throw new B("attribute-operation-attribute-exists",this,{node:e,key:this.key})}}_execute(){Up(this.oldValue,this.newValue)||tae(this.range,this.key,this.newValue)}static get className(){return"AttributeOperation"}static fromJSON(e,n){return new Pn(ee.fromJSON(e.range,n),e.key,e.oldValue,e.newValue,e.baseVersion)}}class jn extends xs{get type(){return"noop"}get affectedSelectable(){return null}clone(){return new jn(this.baseVersion)}getReversed(){return new jn(this.baseVersion+1)}_execute(){}static get className(){return"NoOperation"}}class Yi extends xs{constructor(e,n,s,r){super(r);b(this,"position");b(this,"oldName");b(this,"newName");this.position=e,this.position.stickiness="toNext",this.oldName=n,this.newName=s}get type(){return"rename"}get affectedSelectable(){return this.position.nodeAfter}clone(){return new Yi(this.position.clone(),this.oldName,this.newName,this.baseVersion)}getReversed(){return new Yi(this.position.clone(),this.newName,this.oldName,this.baseVersion+1)}_validate(){const e=this.position.nodeAfter;if(e instanceof fn){if(e.name!==this.oldName)throw new B("rename-operation-wrong-name",this)}else throw new B("rename-operation-wrong-position",this)}_execute(){const e=this.position.nodeAfter;e.name=this.newName}toJSON(){const e=super.toJSON();return e.position=this.position.toJSON(),e}static get className(){return"RenameOperation"}static fromJSON(e,n){return new Yi(de.fromJSON(e.position,n),e.oldName,e.newName,e.baseVersion)}}class $o extends xs{constructor(e,n,s,r,o){super(o);b(this,"root");b(this,"key");b(this,"oldValue");b(this,"newValue");this.root=e,this.key=n,this.oldValue=s===void 0?null:s,this.newValue=r===void 0?null:r}get type(){return this.oldValue===null?"addRootAttribute":this.newValue===null?"removeRootAttribute":"changeRootAttribute"}get affectedSelectable(){return this.root}clone(){return new $o(this.root,this.key,this.oldValue,this.newValue,this.baseVersion)}getReversed(){return new $o(this.root,this.key,this.newValue,this.oldValue,this.baseVersion+1)}_validate(){if(this.root!=this.root.root||this.root.is("documentFragment"))throw new B("rootattribute-operation-not-a-root",this,{root:this.root,key:this.key});if(this.oldValue!==null&&this.root.getAttribute(this.key)!==this.oldValue)throw new B("rootattribute-operation-wrong-old-value",this,{root:this.root,key:this.key});if(this.oldValue===null&&this.newValue!==null&&this.root.hasAttribute(this.key))throw new B("rootattribute-operation-attribute-exists",this,{root:this.root,key:this.key})}_execute(){this.newValue!==null?this.root._setAttribute(this.key,this.newValue):this.root._removeAttribute(this.key)}toJSON(){const e=super.toJSON();return e.root=this.root.toJSON(),e}static get className(){return"RootAttributeOperation"}static fromJSON(e,n){if(!n.getRoot(e.root))throw new B("rootattribute-operation-fromjson-no-root",this,{rootName:e.root});return new $o(n.getRoot(e.root),e.key,e.oldValue,e.newValue,e.baseVersion)}}class ro extends xs{constructor(e,n,s,r,o){super(o);b(this,"rootName");b(this,"elementName");b(this,"isAdd");b(this,"_document");if(this.rootName=e,this.elementName=n,this.isAdd=s,this._document=r,!this._document.getRoot(this.rootName)){const a=this._document.createRoot(this.elementName,this.rootName);a._isAttached=!1}}get type(){return this.isAdd?"addRoot":"detachRoot"}get affectedSelectable(){return this._document.getRoot(this.rootName)}clone(){return new ro(this.rootName,this.elementName,this.isAdd,this._document,this.baseVersion)}getReversed(){return new ro(this.rootName,this.elementName,!this.isAdd,this._document,this.baseVersion+1)}_execute(){this._document.getRoot(this.rootName)._isAttached=this.isAdd}toJSON(){const e=super.toJSON();return delete e._document,e}static get className(){return"RootOperation"}static fromJSON(e,n){return new ro(e.rootName,e.elementName,e.isAdd,n,e.baseVersion)}}const Zs={};Zs[Pn.className]=Pn;Zs[Zn.className]=Zn;Zs[Pi.className]=Pi;Zs[Ot.className]=Ot;Zs[jn.className]=jn;Zs[xs.className]=xs;Zs[Yi.className]=Yi;Zs[$o.className]=$o;Zs[ro.className]=ro;Zs[Ut.className]=Ut;Zs[xn.className]=xn;class nae{static fromJSON(t,e){return Zs[t.__className].fromJSON(t,e)}}const n_=new Map;function St(i,t,e){let n=n_.get(i);n||(n=new Map,n_.set(i,n)),n.set(t,e)}function iae(i,t){const e=n_.get(i);return e&&e.has(t)?e.get(t):sae}function sae(i){return[i]}function gP(i,t,e={}){const n=iae(i.constructor,t.constructor);try{return i=i.clone(),n(i,t,e)}catch(s){throw s}}function rae(i,t,e){i=i.slice(),t=t.slice();const n=new oae(e.document,e.useRelations,e.forceWeakRemove);n.setOriginalOperations(i),n.setOriginalOperations(t);const s=n.originalOperations;if(i.length==0||t.length==0)return{operationsA:i,operationsB:t,originalOperations:s};const r=new WeakMap;for(const l of i)r.set(l,0);const o={nextBaseVersionA:i[i.length-1].baseVersion+1,nextBaseVersionB:t[t.length-1].baseVersion+1,originalOperationsACount:i.length,originalOperationsBCount:t.length};let a=0;for(;a<i.length;){const l=i[a],c=r.get(l);if(c==t.length){a++;continue}const h=t[c],f=gP(l,h,n.getContext(l,h,!0)),m=gP(h,l,n.getContext(h,l,!1));n.updateRelation(l,h),n.setOriginalOperations(f,l),n.setOriginalOperations(m,h);for(const p of f)r.set(p,c+m.length);i.splice(a,1,...f),t.splice(c,1,...m)}return bP(i),bP(t),pP(i,o.nextBaseVersionB),pP(t,o.nextBaseVersionA),{operationsA:i,operationsB:t,originalOperations:s}}class oae{constructor(t,e,n=!1){b(this,"originalOperations");b(this,"_history");b(this,"_useRelations");b(this,"_forceWeakRemove");b(this,"_relations");this.originalOperations=new Map,this._history=t.history,this._useRelations=e,this._forceWeakRemove=!!n,this._relations=new Map}setOriginalOperations(t,e=null){const n=e?this.originalOperations.get(e):null;for(const s of t)this.originalOperations.set(s,n||s)}updateRelation(t,e){if(t instanceof Ot)e instanceof xn?t.targetPosition.isEqual(e.sourcePosition)||e.movedRange.containsPosition(t.targetPosition)?this._setRelation(t,e,"insertAtSource"):t.targetPosition.isEqual(e.deletionPosition)?this._setRelation(t,e,"insertBetween"):t.targetPosition.isAfter(e.sourcePosition)&&this._setRelation(t,e,"moveTargetAfter"):e instanceof Ot&&(t.targetPosition.isEqual(e.sourcePosition)||t.targetPosition.isBefore(e.sourcePosition)?this._setRelation(t,e,"insertBefore"):this._setRelation(t,e,"insertAfter"));else if(t instanceof Ut){if(e instanceof xn)t.splitPosition.isBefore(e.sourcePosition)&&this._setRelation(t,e,"splitBefore");else if(e instanceof Ot)if(t.splitPosition.isEqual(e.sourcePosition)||t.splitPosition.isBefore(e.sourcePosition))this._setRelation(t,e,"splitBefore");else{const n=ee._createFromPositionAndShift(e.sourcePosition,e.howMany);if(t.splitPosition.hasSameParentAs(e.sourcePosition)&&n.containsPosition(t.splitPosition)){const s=n.end.offset-t.splitPosition.offset,r=t.splitPosition.offset-n.start.offset;this._setRelation(t,e,{howMany:s,offset:r})}}}else if(t instanceof xn)e instanceof xn?(t.targetPosition.isEqual(e.sourcePosition)||this._setRelation(t,e,"mergeTargetNotMoved"),t.sourcePosition.isEqual(e.targetPosition)&&this._setRelation(t,e,"mergeSourceNotMoved"),t.sourcePosition.isEqual(e.sourcePosition)&&this._setRelation(t,e,"mergeSameElement")):e instanceof Ut?t.sourcePosition.isEqual(e.splitPosition)&&this._setRelation(t,e,"splitAtSource"):e instanceof Ot&&e.howMany>0&&(t.sourcePosition.isEqual(e.sourcePosition.getShiftedBy(e.howMany))&&this._setRelation(t,e,"mergeSourceAffected"),t.targetPosition.isEqual(e.sourcePosition)&&this._setRelation(t,e,"mergeTargetWasBefore"));else if(t instanceof Pi){const n=t.newRange;if(!n)return;if(e instanceof xn){const s=n.start.isEqual(e.targetPosition),r=n.start.isEqual(e.deletionPosition),o=n.end.isEqual(e.deletionPosition),a=n.end.isEqual(e.sourcePosition);(s||r||o||a)&&this._setRelation(t,e,{wasInLeftElement:s,wasStartBeforeMergedElement:r,wasEndBeforeMergedElement:o,wasInRightElement:a})}}}getContext(t,e,n){return{aIsStrong:n,aWasUndone:this._wasUndone(t),bWasUndone:this._wasUndone(e),abRelation:this._useRelations?this._getRelation(t,e):null,baRelation:this._useRelations?this._getRelation(e,t):null,forceWeakRemove:this._forceWeakRemove}}_wasUndone(t){const e=this.originalOperations.get(t);return e.wasUndone||this._history.isUndoneOperation(e)}_getRelation(t,e){const n=this.originalOperations.get(e),s=this._history.getUndoneOperation(n);if(!s)return null;const r=this.originalOperations.get(t),o=this._relations.get(r);return o&&o.get(s)||null}_setRelation(t,e,n){const s=this.originalOperations.get(t),r=this.originalOperations.get(e);let o=this._relations.get(s);o||(o=new Map,this._relations.set(s,o)),o.set(r,n)}}function pP(i,t){for(const e of i)e.baseVersion=t++}function bP(i){const t=new Map;for(let e=0;e<i.length;e++){const n=i[e];n instanceof Pi&&(n.baseVersion!==-1?t.set(n.name,{op:n,ranges:n.newRange?[n.newRange]:[]}):(n.newRange&&t.get(n.name).ranges.push(n.newRange),i.splice(e,1),e--))}for(const{op:e,ranges:n}of t.values())n.length?e.newRange=ee._createFromRanges(n):e.newRange=null}St(Pn,Pn,(i,t,e)=>{if(i.key===t.key&&i.range.start.hasSameParentAs(t.range.start)){const n=i.range.getDifference(t.range).map(r=>new Pn(r,i.key,i.oldValue,i.newValue,0)),s=i.range.getIntersection(t.range);return s&&e.aIsStrong&&n.push(new Pn(s,t.key,t.newValue,i.newValue,0)),n.length==0?[new jn(0)]:n}else return[i]});St(Pn,Zn,(i,t)=>{if(i.range.start.hasSameParentAs(t.position)&&i.range.containsPosition(t.position)){const n=i.range._getTransformedByInsertion(t.position,t.howMany,!t.shouldReceiveAttributes).map(s=>new Pn(s,i.key,i.oldValue,i.newValue,i.baseVersion));if(t.shouldReceiveAttributes){const s=N4(t,i.key,i.oldValue);s&&n.unshift(s)}return n}return i.range=i.range._getTransformedByInsertion(t.position,t.howMany,!1)[0],[i]});function N4(i,t,e){const s=i.nodes.getNode(0).getAttribute(t);if(s==e)return null;const r=new ee(i.position,i.position.getShiftedBy(i.howMany));return new Pn(r,t,s,e,0)}St(Pn,xn,(i,t)=>{const e=[];i.range.start.hasSameParentAs(t.deletionPosition)&&(i.range.containsPosition(t.deletionPosition)||i.range.start.isEqual(t.deletionPosition))&&e.push(ee._createFromPositionAndShift(t.graveyardPosition,1));const n=i.range._getTransformedByMergeOperation(t);return n.isCollapsed||e.push(n),e.map(s=>new Pn(s,i.key,i.oldValue,i.newValue,i.baseVersion))});St(Pn,Ot,(i,t)=>aae(i.range,t).map(n=>new Pn(n,i.key,i.oldValue,i.newValue,i.baseVersion)));function aae(i,t){const e=ee._createFromPositionAndShift(t.sourcePosition,t.howMany);let n=null,s=[];e.containsRange(i,!0)?n=i:i.start.hasSameParentAs(e.start)?(s=i.getDifference(e),n=i.getIntersection(e)):s=[i];const r=[];for(let o of s){o=o._getTransformedByDeletion(t.sourcePosition,t.howMany);const a=t.getMovedRangeStart(),l=o.start.hasSameParentAs(a),c=o._getTransformedByInsertion(a,t.howMany,l);r.push(...c)}return n&&r.push(n._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany,!1)[0]),r}St(Pn,Ut,(i,t)=>{if(i.range.end.isEqual(t.insertionPosition))return t.graveyardPosition||i.range.end.offset++,[i];if(i.range.start.hasSameParentAs(t.splitPosition)&&i.range.containsPosition(t.splitPosition)){const e=i.clone();return e.range=new ee(t.moveTargetPosition.clone(),i.range.end._getCombined(t.splitPosition,t.moveTargetPosition)),i.range.end=t.splitPosition.clone(),i.range.end.stickiness="toPrevious",[i,e]}return i.range=i.range._getTransformedBySplitOperation(t),[i]});St(Zn,Pn,(i,t)=>{const e=[i];if(i.shouldReceiveAttributes&&i.position.hasSameParentAs(t.range.start)&&t.range.containsPosition(i.position)){const n=N4(i,t.key,t.newValue);n&&e.push(n)}return e});St(Zn,Zn,(i,t,e)=>i.position.isEqual(t.position)&&e.aIsStrong?[i]:(i.position=i.position._getTransformedByInsertOperation(t),[i]));St(Zn,Ot,(i,t)=>(i.position=i.position._getTransformedByMoveOperation(t),[i]));St(Zn,Ut,(i,t)=>(i.position=i.position._getTransformedBySplitOperation(t),[i]));St(Zn,xn,(i,t)=>(i.position=i.position._getTransformedByMergeOperation(t),[i]));St(Pi,Zn,(i,t)=>(i.oldRange&&(i.oldRange=i.oldRange._getTransformedByInsertOperation(t)[0]),i.newRange&&(i.newRange=i.newRange._getTransformedByInsertOperation(t)[0]),[i]));St(Pi,Pi,(i,t,e)=>{if(i.name==t.name)if(e.aIsStrong)i.oldRange=t.newRange?t.newRange.clone():null;else return[new jn(0)];return[i]});St(Pi,xn,(i,t)=>(i.oldRange&&(i.oldRange=i.oldRange._getTransformedByMergeOperation(t)),i.newRange&&(i.newRange=i.newRange._getTransformedByMergeOperation(t)),[i]));St(Pi,Ot,(i,t)=>{const e=[i];if(i.oldRange&&(i.oldRange=ee._createFromRanges(i.oldRange._getTransformedByMoveOperation(t))),i.newRange){const n=i.newRange._getTransformedByMoveOperation(t);i.newRange=n[0];for(let s=1;s<n.length;s++){const r=i.clone();r.oldRange=null,r.newRange=n[s],r.baseVersion=-1,e.push(r)}}return e});St(Pi,Ut,(i,t,e)=>{if(i.oldRange&&(i.oldRange=i.oldRange._getTransformedBySplitOperation(t)),i.newRange){if(e.abRelation){const n=i.newRange._getTransformedBySplitOperation(t);return i.newRange.start.isEqual(t.splitPosition)&&e.abRelation.wasStartBeforeMergedElement?i.newRange.start=de._createAt(t.insertionPosition):i.newRange.start.isEqual(t.splitPosition)&&!e.abRelation.wasInLeftElement?i.newRange.start=de._createAt(t.moveTargetPosition):i.newRange.start=n.start,i.newRange.end.isEqual(t.splitPosition)&&e.abRelation.wasInRightElement?i.newRange.end=de._createAt(t.moveTargetPosition):i.newRange.end.isEqual(t.splitPosition)&&e.abRelation.wasEndBeforeMergedElement?i.newRange.end=de._createAt(t.insertionPosition):i.newRange.end=n.end,[i]}i.newRange=i.newRange._getTransformedBySplitOperation(t)}return[i]});St(xn,Zn,(i,t)=>(i.sourcePosition.hasSameParentAs(t.position)&&(i.howMany+=t.howMany),i.sourcePosition=i.sourcePosition._getTransformedByInsertOperation(t),i.targetPosition=i.targetPosition._getTransformedByInsertOperation(t),[i]));St(xn,xn,(i,t,e)=>{if(i.sourcePosition.isEqual(t.sourcePosition)&&i.targetPosition.isEqual(t.targetPosition))if(e.bWasUndone){const n=t.graveyardPosition.path.slice();return n.push(0),i.sourcePosition=new de(t.graveyardPosition.root,n),i.howMany=0,[i]}else return[new jn(0)];if(i.sourcePosition.isEqual(t.sourcePosition)&&!i.targetPosition.isEqual(t.targetPosition)&&!e.bWasUndone&&e.abRelation!="splitAtSource"){const n=i.targetPosition.root.rootName=="$graveyard",s=t.targetPosition.root.rootName=="$graveyard";if(s&&!n||!(n&&!s)&&e.aIsStrong){const l=t.targetPosition._getTransformedByMergeOperation(t),c=i.targetPosition._getTransformedByMergeOperation(t);return[new Ot(l,i.howMany,c,0)]}else return[new jn(0)]}return i.sourcePosition.hasSameParentAs(t.targetPosition)&&(i.howMany+=t.howMany),i.sourcePosition=i.sourcePosition._getTransformedByMergeOperation(t),i.targetPosition=i.targetPosition._getTransformedByMergeOperation(t),(!i.graveyardPosition.isEqual(t.graveyardPosition)||!e.aIsStrong)&&(i.graveyardPosition=i.graveyardPosition._getTransformedByMergeOperation(t)),[i]});St(xn,Ot,(i,t,e)=>{const n=ee._createFromPositionAndShift(t.sourcePosition,t.howMany);return t.type=="remove"&&!e.bWasUndone&&i.deletionPosition.hasSameParentAs(t.sourcePosition)&&n.containsPosition(i.sourcePosition)?[new jn(0)]:(t.sourcePosition.getShiftedBy(t.howMany).isEqual(i.sourcePosition)?i.sourcePosition.stickiness="toNone":t.targetPosition.isEqual(i.sourcePosition)&&e.abRelation=="mergeSourceAffected"?i.sourcePosition.stickiness="toNext":t.sourcePosition.isEqual(i.targetPosition)?(i.targetPosition.stickiness="toNone",i.howMany-=t.howMany):t.targetPosition.isEqual(i.targetPosition)&&e.abRelation=="mergeTargetWasBefore"?(i.targetPosition.stickiness="toPrevious",i.howMany+=t.howMany):(i.sourcePosition.hasSameParentAs(t.targetPosition)&&(i.howMany+=t.howMany),i.sourcePosition.hasSameParentAs(t.sourcePosition)&&(i.howMany-=t.howMany)),i.sourcePosition=i.sourcePosition._getTransformedByMoveOperation(t),i.targetPosition=i.targetPosition._getTransformedByMoveOperation(t),i.sourcePosition.stickiness="toPrevious",i.targetPosition.stickiness="toNext",i.graveyardPosition.isEqual(t.targetPosition)||(i.graveyardPosition=i.graveyardPosition._getTransformedByMoveOperation(t)),[i])});St(xn,Ut,(i,t,e)=>{if(t.graveyardPosition&&(i.graveyardPosition=i.graveyardPosition._getTransformedByDeletion(t.graveyardPosition,1),i.deletionPosition.isEqual(t.graveyardPosition)&&(i.howMany=t.howMany)),i.targetPosition.isEqual(t.splitPosition)&&(t.graveyardPosition&&i.deletionPosition.isEqual(t.graveyardPosition)||e.abRelation=="mergeTargetNotMoved"))return i.sourcePosition=i.sourcePosition._getTransformedBySplitOperation(t),[i];if(i.sourcePosition.isEqual(t.splitPosition)){if(e.abRelation=="mergeSourceNotMoved")return i.howMany=0,i.targetPosition=i.targetPosition._getTransformedBySplitOperation(t),[i];if(e.abRelation=="mergeSameElement"||i.sourcePosition.offset>0)return i.sourcePosition=t.moveTargetPosition.clone(),i.targetPosition=i.targetPosition._getTransformedBySplitOperation(t),[i]}return i.sourcePosition.hasSameParentAs(t.splitPosition)&&(i.howMany=t.splitPosition.offset),i.sourcePosition=i.sourcePosition._getTransformedBySplitOperation(t),i.targetPosition=i.targetPosition._getTransformedBySplitOperation(t),[i]});St(Ot,Zn,(i,t)=>{const n=ee._createFromPositionAndShift(i.sourcePosition,i.howMany)._getTransformedByInsertOperation(t,!1)[0];return i.sourcePosition=n.start,i.howMany=n.end.offset-n.start.offset,i.targetPosition.isEqual(t.position)||(i.targetPosition=i.targetPosition._getTransformedByInsertOperation(t)),[i]});St(Ot,Ot,(i,t,e)=>{const n=ee._createFromPositionAndShift(i.sourcePosition,i.howMany),s=ee._createFromPositionAndShift(t.sourcePosition,t.howMany);let r=e.aIsStrong,o=!e.aIsStrong;e.abRelation=="insertBefore"||e.baRelation=="insertAfter"?o=!0:(e.abRelation=="insertAfter"||e.baRelation=="insertBefore")&&(o=!1);let a;if(i.targetPosition.isEqual(t.targetPosition)&&o?a=i.targetPosition._getTransformedByDeletion(t.sourcePosition,t.howMany):a=i.targetPosition._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany),wP(i,t)&&wP(t,i))return[t.getReversed()];if(n.containsPosition(t.targetPosition)&&n.containsRange(s,!0))return n.start=n.start._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany),n.end=n.end._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany),vu([n],a);if(s.containsPosition(i.targetPosition)&&s.containsRange(n,!0))return n.start=n.start._getCombined(t.sourcePosition,t.getMovedRangeStart()),n.end=n.end._getCombined(t.sourcePosition,t.getMovedRangeStart()),vu([n],a);const h=pi(i.sourcePosition.getParentPath(),t.sourcePosition.getParentPath());if(h=="prefix"||h=="extension")return n.start=n.start._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany),n.end=n.end._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany),vu([n],a);i.type=="remove"&&t.type!="remove"&&!e.aWasUndone&&!e.forceWeakRemove?r=!0:i.type!="remove"&&t.type=="remove"&&!e.bWasUndone&&!e.forceWeakRemove&&(r=!1);const f=[],m=n.getDifference(s);for(const v of m){v.start=v.start._getTransformedByDeletion(t.sourcePosition,t.howMany),v.end=v.end._getTransformedByDeletion(t.sourcePosition,t.howMany);const _=pi(v.start.getParentPath(),t.getMovedRangeStart().getParentPath())=="same",E=v._getTransformedByInsertion(t.getMovedRangeStart(),t.howMany,_);f.push(...E)}const p=n.getIntersection(s);return p!==null&&r&&(p.start=p.start._getCombined(t.sourcePosition,t.getMovedRangeStart()),p.end=p.end._getCombined(t.sourcePosition,t.getMovedRangeStart()),f.length===0?f.push(p):f.length==1?s.start.isBefore(n.start)||s.start.isEqual(n.start)?f.unshift(p):f.push(p):f.splice(1,0,p)),f.length===0?[new jn(i.baseVersion)]:vu(f,a)});St(Ot,Ut,(i,t,e)=>{let n=i.targetPosition.clone();(!i.targetPosition.isEqual(t.insertionPosition)||!t.graveyardPosition||e.abRelation=="moveTargetAfter")&&(n=i.targetPosition._getTransformedBySplitOperation(t));const s=ee._createFromPositionAndShift(i.sourcePosition,i.howMany);if(s.end.isEqual(t.insertionPosition))return t.graveyardPosition||i.howMany++,i.targetPosition=n,[i];if(s.start.hasSameParentAs(t.splitPosition)&&s.containsPosition(t.splitPosition)){let a=new ee(t.splitPosition,s.end);a=a._getTransformedBySplitOperation(t);const l=[new ee(s.start,t.splitPosition),a];return vu(l,n)}i.targetPosition.isEqual(t.splitPosition)&&e.abRelation=="insertAtSource"&&(n=t.moveTargetPosition),i.targetPosition.isEqual(t.insertionPosition)&&e.abRelation=="insertBetween"&&(n=i.targetPosition);const o=[s._getTransformedBySplitOperation(t)];if(t.graveyardPosition){const a=s.start.isEqual(t.graveyardPosition)||s.containsPosition(t.graveyardPosition);i.howMany>1&&a&&!e.aWasUndone&&o.push(ee._createFromPositionAndShift(t.insertionPosition,1))}return vu(o,n)});St(Ot,xn,(i,t,e)=>{const n=ee._createFromPositionAndShift(i.sourcePosition,i.howMany);if(t.deletionPosition.hasSameParentAs(i.sourcePosition)&&n.containsPosition(t.sourcePosition)){if(i.type=="remove"&&!e.forceWeakRemove){if(!e.aWasUndone){const o=[];let a=t.graveyardPosition.clone(),l=t.targetPosition._getTransformedByMergeOperation(t);const c=i.targetPosition.getTransformedByOperation(t);i.howMany>1&&(o.push(new Ot(i.sourcePosition,i.howMany-1,c,0)),a=a._getTransformedByMove(i.sourcePosition,c,i.howMany-1),l=l._getTransformedByMove(i.sourcePosition,c,i.howMany-1));const h=t.deletionPosition._getCombined(i.sourcePosition,c),f=new Ot(a,1,h,0),m=f.getMovedRangeStart().path.slice();m.push(0);const p=new de(f.targetPosition.root,m);l=l._getTransformedByMove(a,h,1);const v=new Ot(l,t.howMany,p,0);return o.push(f),o.push(v),o}}else if(i.howMany==1)return e.bWasUndone?(i.sourcePosition=t.graveyardPosition.clone(),i.targetPosition=i.targetPosition._getTransformedByMergeOperation(t),[i]):[new jn(0)]}const r=ee._createFromPositionAndShift(i.sourcePosition,i.howMany)._getTransformedByMergeOperation(t);return i.sourcePosition=r.start,i.howMany=r.end.offset-r.start.offset,i.targetPosition=i.targetPosition._getTransformedByMergeOperation(t),[i]});St(Yi,Zn,(i,t)=>(i.position=i.position._getTransformedByInsertOperation(t),[i]));St(Yi,xn,(i,t)=>i.position.isEqual(t.deletionPosition)?(i.position=t.graveyardPosition.clone(),i.position.stickiness="toNext",[i]):(i.position=i.position._getTransformedByMergeOperation(t),[i]));St(Yi,Ot,(i,t)=>(i.position=i.position._getTransformedByMoveOperation(t),[i]));St(Yi,Yi,(i,t,e)=>{if(i.position.isEqual(t.position))if(e.aIsStrong)i.oldName=t.newName;else return[new jn(0)];return[i]});St(Yi,Ut,(i,t)=>{const e=i.position.path,n=t.splitPosition.getParentPath();if(pi(e,n)=="same"&&!t.graveyardPosition){const s=new Yi(i.position.getShiftedBy(1),i.oldName,i.newName,0);return[i,s]}return i.position=i.position._getTransformedBySplitOperation(t),[i]});St($o,$o,(i,t,e)=>{if(i.root===t.root&&i.key===t.key){if(!e.aIsStrong||i.newValue===t.newValue)return[new jn(0)];i.oldValue=t.newValue}return[i]});St(ro,ro,(i,t)=>i.rootName===t.rootName&&i.isAdd===t.isAdd?[new jn(0)]:[i]);St(Ut,Zn,(i,t)=>(i.splitPosition.hasSameParentAs(t.position)&&i.splitPosition.offset<t.position.offset&&(i.howMany+=t.howMany),i.splitPosition=i.splitPosition._getTransformedByInsertOperation(t),i.insertionPosition=i.insertionPosition._getTransformedByInsertOperation(t),[i]));St(Ut,xn,(i,t,e)=>{if(!i.graveyardPosition&&!e.bWasUndone&&i.splitPosition.hasSameParentAs(t.sourcePosition)){const n=t.graveyardPosition.path.slice();n.push(0);const s=new de(t.graveyardPosition.root,n),r=Ut.getInsertionPosition(new de(t.graveyardPosition.root,n)),o=new Ut(s,0,r,null,0);return i.splitPosition=i.splitPosition._getTransformedByMergeOperation(t),i.insertionPosition=Ut.getInsertionPosition(i.splitPosition),i.graveyardPosition=o.insertionPosition.clone(),i.graveyardPosition.stickiness="toNext",[o,i]}return i.splitPosition.hasSameParentAs(t.deletionPosition)&&!i.splitPosition.isAfter(t.deletionPosition)&&i.howMany--,i.splitPosition.hasSameParentAs(t.targetPosition)&&(i.howMany+=t.howMany),i.splitPosition=i.splitPosition._getTransformedByMergeOperation(t),i.insertionPosition=Ut.getInsertionPosition(i.splitPosition),i.graveyardPosition&&(i.graveyardPosition=i.graveyardPosition._getTransformedByMergeOperation(t)),[i]});St(Ut,Ot,(i,t,e)=>{const n=ee._createFromPositionAndShift(t.sourcePosition,t.howMany);if(i.graveyardPosition){const r=n.start.isEqual(i.graveyardPosition)||n.containsPosition(i.graveyardPosition);if(!e.bWasUndone&&r){const o=i.splitPosition._getTransformedByMoveOperation(t),a=i.graveyardPosition._getTransformedByMoveOperation(t),l=a.path.slice();l.push(0);const c=new de(a.root,l);return[new Ot(o,i.howMany,c,0)]}i.graveyardPosition=i.graveyardPosition._getTransformedByMoveOperation(t)}const s=i.splitPosition.isEqual(t.targetPosition);if(s&&(e.baRelation=="insertAtSource"||e.abRelation=="splitBefore"))return i.howMany+=t.howMany,i.splitPosition=i.splitPosition._getTransformedByDeletion(t.sourcePosition,t.howMany),i.insertionPosition=Ut.getInsertionPosition(i.splitPosition),[i];if(s&&e.abRelation&&e.abRelation.howMany){const{howMany:r,offset:o}=e.abRelation;return i.howMany+=r,i.splitPosition=i.splitPosition.getShiftedBy(o),[i]}if(i.splitPosition.hasSameParentAs(t.sourcePosition)&&n.containsPosition(i.splitPosition)){const r=t.howMany-(i.splitPosition.offset-t.sourcePosition.offset);return i.howMany-=r,i.splitPosition.hasSameParentAs(t.targetPosition)&&i.splitPosition.offset<t.targetPosition.offset&&(i.howMany+=t.howMany),i.splitPosition=t.sourcePosition.clone(),i.insertionPosition=Ut.getInsertionPosition(i.splitPosition),[i]}return t.sourcePosition.isEqual(t.targetPosition)||(i.splitPosition.hasSameParentAs(t.sourcePosition)&&i.splitPosition.offset<=t.sourcePosition.offset&&(i.howMany-=t.howMany),i.splitPosition.hasSameParentAs(t.targetPosition)&&i.splitPosition.offset<t.targetPosition.offset&&(i.howMany+=t.howMany)),i.splitPosition.stickiness="toNone",i.splitPosition=i.splitPosition._getTransformedByMoveOperation(t),i.splitPosition.stickiness="toNext",i.graveyardPosition?i.insertionPosition=i.insertionPosition._getTransformedByMoveOperation(t):i.insertionPosition=Ut.getInsertionPosition(i.splitPosition),[i]});St(Ut,Ut,(i,t,e)=>{if(i.splitPosition.isEqual(t.splitPosition)){if(!i.graveyardPosition&&!t.graveyardPosition)return[new jn(0)];if(i.graveyardPosition&&t.graveyardPosition&&i.graveyardPosition.isEqual(t.graveyardPosition))return[new jn(0)];if(e.abRelation=="splitBefore")return i.howMany=0,i.graveyardPosition=i.graveyardPosition._getTransformedBySplitOperation(t),[i]}if(i.graveyardPosition&&t.graveyardPosition&&i.graveyardPosition.isEqual(t.graveyardPosition)){const n=i.splitPosition.root.rootName=="$graveyard",s=t.splitPosition.root.rootName=="$graveyard";if(s&&!n||!(n&&!s)&&e.aIsStrong){const l=[];return t.howMany&&l.push(new Ot(t.moveTargetPosition,t.howMany,t.splitPosition,0)),i.howMany&&l.push(new Ot(i.splitPosition,i.howMany,i.moveTargetPosition,0)),l}else return[new jn(0)]}if(i.graveyardPosition&&(i.graveyardPosition=i.graveyardPosition._getTransformedBySplitOperation(t)),i.splitPosition.isEqual(t.insertionPosition)&&e.abRelation=="splitBefore")return i.howMany++,[i];if(t.splitPosition.isEqual(i.insertionPosition)&&e.baRelation=="splitBefore"){const n=t.insertionPosition.path.slice();n.push(0);const s=new de(t.insertionPosition.root,n),r=new Ot(i.insertionPosition,1,s,0);return[i,r]}return i.splitPosition.hasSameParentAs(t.splitPosition)&&i.splitPosition.offset<t.splitPosition.offset&&(i.howMany-=t.howMany),i.splitPosition=i.splitPosition._getTransformedBySplitOperation(t),i.insertionPosition=Ut.getInsertionPosition(i.splitPosition),[i]});function wP(i,t){return i.targetPosition._getTransformedByDeletion(t.sourcePosition,t.howMany)===null}function vu(i,t){const e=[];for(let n=0;n<i.length;n++){const s=i[n],r=new Ot(s.start,s.end.offset-s.start.offset,t,0);e.push(r);for(let o=n+1;o<i.length;o++)i[o]=i[o]._getTransformedByMove(r.sourcePosition,r.targetPosition,r.howMany)[0];t=t._getTransformedByMove(r.sourcePosition,r.targetPosition,r.howMany)}return e}class On extends Ft(de){constructor(t,e,n="toNone"){if(super(t,e,n),!this.root.is("rootElement"))throw new B("model-liveposition-root-not-rootelement",t);lae.call(this)}detach(){this.stopListening()}toPosition(){return new de(this.root,this.path.slice(),this.stickiness)}static fromPosition(t,e){return new this(t.root,t.path.slice(),e||t.stickiness)}}On.prototype.is=function(i){return i==="livePosition"||i==="model:livePosition"||i=="position"||i==="model:position"};function lae(){this.listenTo(this.root.document.model,"applyOperation",(i,t)=>{const e=t[0];e.isDocumentOperation&&cae.call(this,e)},{priority:"low"})}function cae(i){const t=this.getTransformedByOperation(i);if(!this.isEqual(t)){const e=this.toPosition();this.path=t.path,this.root=t.root,this.fire("change",e)}}class Zc{constructor(t={}){b(this,"operations");b(this,"isUndoable");b(this,"isLocal");b(this,"isUndo");b(this,"isTyping");typeof t=="string"&&(t=t==="transparent"?{isUndoable:!1}:{},Tt("batch-constructor-deprecated-string-type"));const{isUndoable:e=!0,isLocal:n=!0,isUndo:s=!1,isTyping:r=!1}=t;this.operations=[],this.isUndoable=e,this.isLocal=n,this.isUndo=s,this.isTyping=r}get type(){return Tt("batch-type-deprecated"),"default"}get baseVersion(){for(const t of this.operations)if(t.baseVersion!==null)return t.baseVersion;return null}addOperation(t){return t.isDocumentOperation&&(t.batch=this,this.operations.push(t)),t}}const Hh=class Hh{constructor(t){b(this,"_markerCollection");b(this,"_changesInElement",new Map);b(this,"_elementsSnapshots",new Map);b(this,"_elementChildrenSnapshots",new Map);b(this,"_elementState",new Map);b(this,"_changedMarkers",new Map);b(this,"_changedRoots",new Map);b(this,"_changeCount",0);b(this,"_cachedChanges",null);b(this,"_cachedChangesWithGraveyard",null);b(this,"_refreshedItems",new Set);this._markerCollection=t}get isEmpty(){return this._changesInElement.size==0&&this._changedMarkers.size==0&&this._changedRoots.size==0}bufferOperation(t){const e=t;switch(e.type){case"insert":{if(this._isInInsertedElement(e.position.parent))return;this._markInsert(e.position.parent,e.position.offset,e.nodes.maxOffset);break}case"addAttribute":case"removeAttribute":case"changeAttribute":{for(const n of e.range.getItems({shallow:!0}))this._isInInsertedElement(n.parent)||this._markAttribute(n);break}case"remove":case"move":case"reinsert":{if(e.sourcePosition.isEqual(e.targetPosition)||e.sourcePosition.getShiftedBy(e.howMany).isEqual(e.targetPosition))return;const n=this._isInInsertedElement(e.sourcePosition.parent),s=this._isInInsertedElement(e.targetPosition.parent);n||this._markRemove(e.sourcePosition.parent,e.sourcePosition.offset,e.howMany),s||this._markInsert(e.targetPosition.parent,e.getMovedRangeStart().offset,e.howMany);const r=ee._createFromPositionAndShift(e.sourcePosition,e.howMany);for(const o of r.getItems({shallow:!0}))this._setElementState(o,"move");break}case"rename":{if(this._isInInsertedElement(e.position.parent))return;this._markRemove(e.position.parent,e.position.offset,1),this._markInsert(e.position.parent,e.position.offset,1);const n=ee._createFromPositionAndShift(e.position,1);for(const s of this._markerCollection.getMarkersIntersectingRange(n)){const r=s.getData();this.bufferMarkerChange(s.name,r,r)}this._setElementState(e.position.nodeAfter,"rename");break}case"split":{const n=e.splitPosition.parent;if(!this._isInInsertedElement(n)){this._markRemove(n,e.splitPosition.offset,e.howMany);const s=ee._createFromPositionAndShift(e.splitPosition,e.howMany);for(const r of s.getItems({shallow:!0}))this._setElementState(r,"move")}this._isInInsertedElement(e.insertionPosition.parent)||this._markInsert(e.insertionPosition.parent,e.insertionPosition.offset,1),e.graveyardPosition&&(this._markRemove(e.graveyardPosition.parent,e.graveyardPosition.offset,1),this._setElementState(e.graveyardPosition.nodeAfter,"move"));break}case"merge":{const n=e.sourcePosition.parent;this._isInInsertedElement(n.parent)||this._markRemove(n.parent,n.startOffset,1);const s=e.graveyardPosition.parent;this._markInsert(s,e.graveyardPosition.offset,1),this._setElementState(n,"move");const r=e.targetPosition.parent;if(!this._isInInsertedElement(r)){this._markInsert(r,e.targetPosition.offset,n.maxOffset);const o=ee._createFromPositionAndShift(e.sourcePosition,e.howMany);for(const a of o.getItems({shallow:!0}))this._setElementState(a,"move")}break}case"detachRoot":case"addRoot":{const n=e.affectedSelectable;if(!n._isLoaded||n.isAttached()==e.isAdd)return;this._bufferRootStateChange(e.rootName,e.isAdd);break}case"addRootAttribute":case"removeRootAttribute":case"changeRootAttribute":{if(!e.root._isLoaded)return;const n=e.root.rootName;this._bufferRootAttributeChange(n,e.key,e.oldValue,e.newValue);break}}this._cachedChanges=null}bufferMarkerChange(t,e,n){e.range&&e.range.root.is("rootElement")&&!e.range.root._isLoaded&&(e.range=null),n.range&&n.range.root.is("rootElement")&&!n.range.root._isLoaded&&(n.range=null);let s=this._changedMarkers.get(t);s?s.newMarkerData=n:(s={newMarkerData:n,oldMarkerData:e},this._changedMarkers.set(t,s)),s.oldMarkerData.range==null&&n.range==null&&this._changedMarkers.delete(t)}getMarkersToRemove(){const t=[];for(const[e,n]of this._changedMarkers)n.oldMarkerData.range!=null&&t.push({name:e,range:n.oldMarkerData.range});return t}getMarkersToAdd(){const t=[];for(const[e,n]of this._changedMarkers)n.newMarkerData.range!=null&&t.push({name:e,range:n.newMarkerData.range});return t}getChangedMarkers(){return Array.from(this._changedMarkers).map(([t,e])=>({name:t,data:{oldRange:e.oldMarkerData.range,newRange:e.newMarkerData.range}}))}hasDataChanges(){if(this.getChanges().length||this._changedRoots.size>0)return!0;for(const{newMarkerData:t,oldMarkerData:e}of this._changedMarkers.values()){if(t.affectsData!==e.affectsData)return!0;if(t.affectsData){const n=t.range&&!e.range,s=!t.range&&e.range,r=t.range&&e.range&&!t.range.isEqual(e.range);if(n||s||r)return!0}}return!1}getChanges(t={}){if(this._cachedChanges)return t.includeChangesInGraveyard?this._cachedChangesWithGraveyard.slice():this._cachedChanges.slice();let e=[];for(const n of this._changesInElement.keys()){const s=this._changesInElement.get(n).sort((h,f)=>h.offset===f.offset?h.type!=f.type?h.type=="remove"?-1:1:0:h.offset<f.offset?-1:1),r=this._elementChildrenSnapshots.get(n),o=yP(n.getChildren()),a=uae(r.length,s);let l=0,c=0;for(const h of a)if(h==="i"){const f=this._getDiffActionForNode(o[l].node,"insert"),m=this._elementsSnapshots.get(o[l].node),p=this._getInsertDiff(n,l,f,o[l],m);e.push(p),l++}else if(h==="r"){const f=this._getDiffActionForNode(r[c].node,"remove"),m=this._getRemoveDiff(n,l,f,r[c]);e.push(m),c++}else if(h==="a"){const f=r[c].attributes,m=o[l].attributes;let p;if(o[l].name=="$text")p=new ee(de._createAt(n,l),de._createAt(n,l+1));else{const _=n.offsetToIndex(l);p=new ee(de._createAt(n,l),de._createAt(n.getChild(_),0))}const v=this._getAttributesDiff(p,f,m);e.push(...v),l++,c++}else l++,c++}e.sort((n,s)=>n.position.root!=s.position.root?n.position.root.rootName<s.position.root.rootName?-1:1:n.position.isEqual(s.position)?n.changeCount-s.changeCount:n.position.isBefore(s.position)?-1:1);for(let n=1,s=0;n<e.length;n++){const r=e[s],o=e[n],a=r.type=="remove"&&o.type=="remove"&&r.name=="$text"&&o.name=="$text"&&r.position.isEqual(o.position),l=r.type=="insert"&&o.type=="insert"&&r.name=="$text"&&o.name=="$text"&&r.position.parent==o.position.parent&&r.position.offset+r.length==o.position.offset,c=r.type=="attribute"&&o.type=="attribute"&&r.position.parent==o.position.parent&&r.range.isFlat&&o.range.isFlat&&r.position.offset+r.length==o.position.offset&&r.attributeKey==o.attributeKey&&r.attributeOldValue==o.attributeOldValue&&r.attributeNewValue==o.attributeNewValue;a||l||c?(r.length++,c&&(r.range.end=r.range.end.getShiftedBy(1)),e[n]=null):s=n}e=e.filter(n=>n);for(const n of e)delete n.changeCount,n.type=="attribute"&&(delete n.position,delete n.length);return this._changeCount=0,this._cachedChangesWithGraveyard=e,this._cachedChanges=e.filter(dae),t.includeChangesInGraveyard?this._cachedChangesWithGraveyard.slice():this._cachedChanges.slice()}getChangedRoots(){return Array.from(this._changedRoots.values()).map(t=>{const e={...t};return e.state!==void 0&&delete e.attributes,e})}getRefreshedItems(){return new Set(this._refreshedItems)}reset(){this._changesInElement.clear(),this._elementChildrenSnapshots.clear(),this._elementsSnapshots.clear(),this._elementState.clear(),this._changedMarkers.clear(),this._changedRoots.clear(),this._refreshedItems.clear(),this._cachedChanges=null}_refreshItem(t){if(this._isInInsertedElement(t.parent))return;this._markRemove(t.parent,t.startOffset,t.offsetSize),this._markInsert(t.parent,t.startOffset,t.offsetSize),this._refreshedItems.add(t),this._setElementState(t,"refresh");const e=ee._createOn(t);for(const n of this._markerCollection.getMarkersIntersectingRange(e)){const s=n.getData();this.bufferMarkerChange(n.name,s,s)}this._cachedChanges=null}_bufferRootLoad(t){if(t.isAttached()){this._bufferRootStateChange(t.rootName,!0),this._markInsert(t,0,t.maxOffset);for(const e of t.getAttributeKeys())this._bufferRootAttributeChange(t.rootName,e,null,t.getAttribute(e));for(const e of this._markerCollection)if(e.getRange().root==t){const n=e.getData();this.bufferMarkerChange(e.name,{...n,range:null},n)}}}_bufferRootStateChange(t,e){if(!this._changedRoots.has(t)){this._changedRoots.set(t,{name:t,state:e?"attached":"detached"});return}const n=this._changedRoots.get(t);n.state!==void 0?(delete n.state,n.attributes===void 0&&this._changedRoots.delete(t)):n.state=e?"attached":"detached"}_bufferRootAttributeChange(t,e,n,s){const r=this._changedRoots.get(t)||{name:t},o=r.attributes||{};if(o[e]){const a=o[e];s===a.oldValue?delete o[e]:a.newValue=s}else o[e]={oldValue:n,newValue:s};Object.entries(o).length===0?(delete r.attributes,r.state===void 0&&this._changedRoots.delete(t)):(r.attributes=o,this._changedRoots.set(t,r))}_markInsert(t,e,n){if(t.root.is("rootElement")&&!t.root._isLoaded)return;const s={type:"insert",offset:e,howMany:n,count:this._changeCount++};this._markChange(t,s)}_markRemove(t,e,n){if(t.root.is("rootElement")&&!t.root._isLoaded)return;const s={type:"remove",offset:e,howMany:n,count:this._changeCount++};this._markChange(t,s),this._removeAllNestedChanges(t,e,n)}_markAttribute(t){if(t.root.is("rootElement")&&!t.root._isLoaded)return;const e={type:"attribute",offset:t.startOffset,howMany:t.offsetSize,count:this._changeCount++};this._markChange(t.parent,e)}_markChange(t,e){this._makeSnapshots(t);const n=this._getChangesForElement(t);this._handleChange(e,n),n.push(e);for(let s=0;s<n.length;s++)n[s].howMany<1&&(n.splice(s,1),s--)}_setElementState(t,e){if(!t.is("element"))return;const n=Hh._statesPriority.indexOf(this._elementState.get(t));Hh._statesPriority.indexOf(e)>n&&this._elementState.set(t,e)}_getDiffActionForNode(t,e){if(!t.is("element")||!this._elementsSnapshots.has(t))return e;const n=this._elementState.get(t);return!n||n=="move"?e:n}_getChangesForElement(t){let e;return this._changesInElement.has(t)?e=this._changesInElement.get(t):(e=[],this._changesInElement.set(t,e)),e}_makeSnapshots(t){if(this._elementChildrenSnapshots.has(t))return;const e=yP(t.getChildren());this._elementChildrenSnapshots.set(t,e);for(const n of e)this._elementsSnapshots.set(n.node,n)}_handleChange(t,e){t.nodesToHandle=t.howMany;for(const n of e){const s=t.offset+t.howMany,r=n.offset+n.howMany;if(t.type=="insert"&&(n.type=="insert"&&(t.offset<=n.offset?n.offset+=t.howMany:t.offset<r&&(n.howMany+=t.nodesToHandle,t.nodesToHandle=0)),n.type=="remove"&&t.offset<n.offset&&(n.offset+=t.howMany),n.type=="attribute")){if(t.offset<=n.offset)n.offset+=t.howMany;else if(t.offset<r){const o=n.howMany;n.howMany=t.offset-n.offset,e.unshift({type:"attribute",offset:s,howMany:o-n.howMany,count:this._changeCount++})}}if(t.type=="remove"){if(n.type=="insert"){if(s<=n.offset)n.offset-=t.howMany;else if(s<=r)if(t.offset<n.offset){const o=s-n.offset;n.offset=t.offset,n.howMany-=o,t.nodesToHandle-=o}else n.howMany-=t.nodesToHandle,t.nodesToHandle=0;else if(t.offset<=n.offset)t.nodesToHandle-=n.howMany,n.howMany=0;else if(t.offset<r){const o=r-t.offset;n.howMany-=o,t.nodesToHandle-=o}}if(n.type=="remove"&&(s<=n.offset?n.offset-=t.howMany:t.offset<n.offset&&(t.nodesToHandle+=n.howMany,n.howMany=0)),n.type=="attribute"){if(s<=n.offset)n.offset-=t.howMany;else if(t.offset<n.offset){const o=s-n.offset;n.offset=t.offset,n.howMany-=o}else if(t.offset<r)if(s<=r){const o=n.howMany;n.howMany=t.offset-n.offset;const a=o-n.howMany-t.nodesToHandle;e.unshift({type:"attribute",offset:t.offset,howMany:a,count:this._changeCount++})}else n.howMany-=r-t.offset}}if(t.type=="attribute"){if(n.type=="insert")if(t.offset<n.offset&&s>n.offset){if(s>r){const o={type:"attribute",offset:r,howMany:s-r,count:this._changeCount++};this._handleChange(o,e),e.push(o)}t.nodesToHandle=n.offset-t.offset,t.howMany=t.nodesToHandle}else t.offset>=n.offset&&t.offset<r&&(s>r?(t.nodesToHandle=s-r,t.offset=r):t.nodesToHandle=0);if(n.type=="remove"&&t.offset<n.offset&&s>n.offset){const o={type:"attribute",offset:n.offset,howMany:s-n.offset,count:this._changeCount++};this._handleChange(o,e),e.push(o),t.nodesToHandle=n.offset-t.offset,t.howMany=t.nodesToHandle}n.type=="attribute"&&(t.offset>=n.offset&&s<=r?(t.nodesToHandle=0,t.howMany=0,t.offset=0):t.offset<=n.offset&&s>=r&&(n.howMany=0))}}t.howMany=t.nodesToHandle,delete t.nodesToHandle}_getInsertDiff(t,e,n,s,r){const o={type:"insert",position:de._createAt(t,e),name:s.name,attributes:new Map(s.attributes),length:1,changeCount:this._changeCount++,action:n};return n!="insert"&&r&&(o.before={name:r.name,attributes:new Map(r.attributes)}),o}_getRemoveDiff(t,e,n,s){return{type:"remove",action:n,position:de._createAt(t,e),name:s.name,attributes:new Map(s.attributes),length:1,changeCount:this._changeCount++}}_getAttributesDiff(t,e,n){const s=[];n=new Map(n);for(const[r,o]of e){const a=n.has(r)?n.get(r):null;a!==o&&s.push({type:"attribute",position:t.start,range:t.clone(),length:1,attributeKey:r,attributeOldValue:o,attributeNewValue:a,changeCount:this._changeCount++}),n.delete(r)}for(const[r,o]of n)s.push({type:"attribute",position:t.start,range:t.clone(),length:1,attributeKey:r,attributeOldValue:null,attributeNewValue:o,changeCount:this._changeCount++});return s}_isInInsertedElement(t){const e=t.parent;if(!e)return!1;const n=this._changesInElement.get(e),s=t.startOffset;if(n){for(const r of n)if(r.type=="insert"&&s>=r.offset&&s<r.offset+r.howMany)return!0}return this._isInInsertedElement(e)}_removeAllNestedChanges(t,e,n){const s=new ee(de._createAt(t,e),de._createAt(t,e+n));for(const r of s.getItems({shallow:!0}))r.is("element")&&(this._changesInElement.delete(r),this._removeAllNestedChanges(r,0,r.maxOffset))}};b(Hh,"_statesPriority",[void 0,"refresh","rename","move"]);let i_=Hh;function vP(i){return{node:i,name:i.is("$text")?"$text":i.name,attributes:new Map(i.getAttributes())}}function yP(i){const t=[];for(const e of i)if(e.is("$text"))for(let n=0;n<e.data.length;++n)t.push(vP(e));else t.push(vP(e));return t}function uae(i,t){const e=[];let n=0,s=0;for(const r of t){if(r.offset>n){for(let o=0;o<r.offset-n;o++)e.push("e");s+=r.offset-n}if(r.type=="insert"){for(let o=0;o<r.howMany;o++)e.push("i");n=r.offset+r.howMany}else if(r.type=="remove"){for(let o=0;o<r.howMany;o++)e.push("r");n=r.offset,s+=r.howMany}else{if(r.howMany>1500)for(let o=0;o<r.howMany;o++)e.push("a");else e.push(..."a".repeat(r.howMany).split(""));n=r.offset+r.howMany,s+=r.howMany}}if(s<i)for(let r=0;r<i-s-n;r++)e.push("e");return e}function dae(i){const t="position"in i&&i.position.root.rootName=="$graveyard",e="range"in i&&i.range.root.rootName=="$graveyard";return!t&&!e}class hae{constructor(){b(this,"_operations",[]);b(this,"_undoPairs",new Map);b(this,"_undoneOperations",new Set);b(this,"_baseVersionToOperationIndex",new Map);b(this,"_version",0);b(this,"_gaps",new Map)}get version(){return this._version}set version(t){this._operations.length&&t>this._version+1&&this._gaps.set(this._version,t),this._version=t}get lastOperation(){return this._operations[this._operations.length-1]}addOperation(t){if(t.baseVersion!==this.version)throw new B("model-document-history-addoperation-incorrect-version",this,{operation:t,historyVersion:this.version});this._operations.push(t),this._version++,this._baseVersionToOperationIndex.set(t.baseVersion,this._operations.length-1)}getOperations(t,e=this.version){if(!this._operations.length)return[];const n=this._operations[0];t===void 0&&(t=n.baseVersion);let s=e-1;for(const[a,l]of this._gaps)t>a&&t<l&&(t=l),s>a&&s<l&&(s=a-1);if(s<n.baseVersion||t>this.lastOperation.baseVersion)return[];let r=this._baseVersionToOperationIndex.get(t);r===void 0&&(r=0);let o=this._baseVersionToOperationIndex.get(s);return o===void 0&&(o=this._operations.length-1),this._operations.slice(r,o+1)}getOperation(t){const e=this._baseVersionToOperationIndex.get(t);if(e!==void 0)return this._operations[e]}setOperationAsUndone(t,e){this._undoPairs.set(e,t),this._undoneOperations.add(t)}isUndoingOperation(t){return this._undoPairs.has(t)}isUndoneOperation(t){return this._undoneOperations.has(t)}getUndoneOperation(t){return this._undoPairs.get(t)}reset(){this._version=0,this._undoPairs=new Map,this._operations=[],this._undoneOperations=new Set,this._gaps=new Map,this._baseVersionToOperationIndex=new Map}}class Zp extends fn{constructor(e,n,s="main"){super(n);b(this,"rootName");b(this,"_document");b(this,"_isAttached",!0);b(this,"_isLoaded",!0);this._document=e,this.rootName=s}get document(){return this._document}isAttached(){return this._isAttached}toJSON(){return this.rootName}}Zp.prototype.is=function(i,t){return t?t===this.name&&(i==="rootElement"||i==="model:rootElement"||i==="element"||i==="model:element"):i==="rootElement"||i==="model:rootElement"||i==="element"||i==="model:element"||i==="node"||i==="model:node"};const _P="$graveyard";class fae extends Ft(){constructor(e){super();b(this,"model");b(this,"history");b(this,"selection");b(this,"roots");b(this,"differ");b(this,"isReadOnly");b(this,"_postFixers");b(this,"_hasSelectionChangedFromTheLastChangeBlock");this.model=e,this.history=new hae,this.selection=new Tr(this),this.roots=new oi({idProperty:"rootName"}),this.differ=new i_(e.markers),this.isReadOnly=!1,this._postFixers=new Set,this._hasSelectionChangedFromTheLastChangeBlock=!1,this.createRoot("$root",_P),this.listenTo(e,"applyOperation",(n,s)=>{const r=s[0];r.isDocumentOperation&&this.differ.bufferOperation(r)},{priority:"high"}),this.listenTo(e,"applyOperation",(n,s)=>{const r=s[0];r.isDocumentOperation&&this.history.addOperation(r)},{priority:"low"}),this.listenTo(this.selection,"change",()=>{this._hasSelectionChangedFromTheLastChangeBlock=!0}),this.listenTo(e.markers,"update",(n,s,r,o,a)=>{const l={...s.getData(),range:o};this.differ.bufferMarkerChange(s.name,a,l),r===null&&s.on("change",(c,h)=>{const f=s.getData();this.differ.bufferMarkerChange(s.name,{...f,range:h},f)})}),this.registerPostFixer(n=>{let s=!1;for(const r of this.roots)!r.isAttached()&&!r.isEmpty&&(n.remove(n.createRangeIn(r)),s=!0);for(const r of this.model.markers)r.getRange().root.isAttached()||(n.removeMarker(r),s=!0);return s})}get version(){return this.history.version}set version(e){this.history.version=e}get graveyard(){return this.getRoot(_P)}createRoot(e="$root",n="main"){if(this.roots.get(n))throw new B("model-document-createroot-name-exists",this,{name:n});const s=new Zp(this,e,n);return this.roots.add(s),s}destroy(){this.selection.destroy(),this.stopListening()}getRoot(e="main"){return this.roots.get(e)}getRootNames(e=!1){return this.getRoots(e).map(n=>n.rootName)}getRoots(e=!1){return this.roots.filter(n=>n!=this.graveyard&&(e||n.isAttached())&&n._isLoaded)}registerPostFixer(e){this._postFixers.add(e)}toJSON(){const e=bM(this);return e.selection="[engine.model.DocumentSelection]",e.model="[engine.model.Model]",e}_handleChangeBlock(e){this._hasDocumentChangedFromTheLastChangeBlock()&&(this._callPostFixers(e),this.selection.refresh(),this.differ.hasDataChanges()?this.fire("change:data",e.batch):this.fire("change",e.batch),this.selection.refresh(),this.differ.reset()),this._hasSelectionChangedFromTheLastChangeBlock=!1}_hasDocumentChangedFromTheLastChangeBlock(){return!this.differ.isEmpty||this._hasSelectionChangedFromTheLastChangeBlock}_getDefaultRoot(){const e=this.getRoots();return e.length?e[0]:this.graveyard}_getDefaultRange(){const e=this._getDefaultRoot(),n=this.model,s=n.schema,r=n.createPositionFromPath(e,[0]);return s.getNearestSelectionRange(r)||n.createRange(r)}_validateSelectionRange(e){return e.start.isValid()&&e.end.isValid()&&EP(e.start)&&EP(e.end)}_callPostFixers(e){let n=!1;do for(const s of this._postFixers)if(this.selection.refresh(),n=s(e),n)break;while(n)}}function EP(i){const t=i.textNode;if(t){const e=t.data,n=i.offset-t.startOffset;return!eC(e,n)&&!tC(e,n)}return!0}class mae extends Ft(){constructor(){super(...arguments);b(this,"_markers",new Map)}[Symbol.iterator](){return this._markers.values()}has(e){const n=e instanceof au?e.name:e;return this._markers.has(n)}get(e){return this._markers.get(e)||null}_set(e,n,s=!1,r=!1){const o=e instanceof au?e.name:e;if(o.includes(","))throw new B("markercollection-incorrect-marker-name",this);const a=this._markers.get(o);if(a){const h=a.getData(),f=a.getRange();let m=!1;return f.isEqual(n)||(a._attachLiveRange(ki.fromRange(n)),m=!0),s!=a.managedUsingOperations&&(a._managedUsingOperations=s,m=!0),typeof r=="boolean"&&r!=a.affectsData&&(a._affectsData=r,m=!0),m&&this.fire(`update:${o}`,a,f,n,h),a}const l=ki.fromRange(n),c=new au(o,l,s,r);return this._markers.set(o,c),this.fire(`update:${o}`,c,null,n,{...c.getData(),range:null}),c}_remove(e){const n=e instanceof au?e.name:e,s=this._markers.get(n);return s?(this._markers.delete(n),this.fire(`update:${n}`,s,s.getRange(),null,s.getData()),this._destroyMarker(s),!0):!1}_refresh(e){const n=e instanceof au?e.name:e,s=this._markers.get(n);if(!s)throw new B("markercollection-refresh-marker-not-exists",this);const r=s.getRange();this.fire(`update:${n}`,s,r,r,s.getData())}*getMarkersAtPosition(e){for(const n of this)n.getRange().containsPosition(e)&&(yield n)}*getMarkersIntersectingRange(e){for(const n of this)n.getRange().getIntersection(e)!==null&&(yield n)}destroy(){for(const e of this._markers.values())this._destroyMarker(e);this._markers=null,this.stopListening()}*getMarkersGroup(e){for(const n of this._markers.values())n.name.startsWith(e+":")&&(yield n)}_destroyMarker(e){e.stopListening(),e._detachLiveRange()}}class au extends Ft(Ya){constructor(e,n,s,r){super();b(this,"name");b(this,"_managedUsingOperations");b(this,"_affectsData");b(this,"_liveRange");this.name=e,this._liveRange=this._attachLiveRange(n),this._managedUsingOperations=s,this._affectsData=r}get managedUsingOperations(){if(!this._liveRange)throw new B("marker-destroyed",this);return this._managedUsingOperations}get affectsData(){if(!this._liveRange)throw new B("marker-destroyed",this);return this._affectsData}getData(){return{range:this.getRange(),affectsData:this.affectsData,managedUsingOperations:this.managedUsingOperations}}getStart(){if(!this._liveRange)throw new B("marker-destroyed",this);return this._liveRange.start.clone()}getEnd(){if(!this._liveRange)throw new B("marker-destroyed",this);return this._liveRange.end.clone()}getRange(){if(!this._liveRange)throw new B("marker-destroyed",this);return this._liveRange.toRange()}_attachLiveRange(e){return this._liveRange&&this._detachLiveRange(),e.delegate("change:range").to(this),e.delegate("change:content").to(this),this._liveRange=e,e}_detachLiveRange(){this._liveRange.stopDelegating("change:range",this),this._liveRange.stopDelegating("change:content",this),this._liveRange.detach(),this._liveRange=null}}au.prototype.is=function(i){return i==="marker"||i==="model:marker"};class gae extends xs{constructor(e,n){super(null);b(this,"sourcePosition");b(this,"howMany");this.sourcePosition=e.clone(),this.howMany=n}get type(){return"detach"}get affectedSelectable(){return null}toJSON(){const e=super.toJSON();return e.sourcePosition=this.sourcePosition.toJSON(),e}_validate(){if(this.sourcePosition.root.document)throw new B("detach-operation-on-document-node",this)}_execute(){I4(ee._createFromPositionAndShift(this.sourcePosition,this.howMany))}static get className(){return"DetachOperation"}}class Zr extends Ya{constructor(e){super();b(this,"markers",new Map);b(this,"_children",new Vh);e&&this._insertChild(0,e)}[Symbol.iterator](){return this.getChildren()}get childCount(){return this._children.length}get maxOffset(){return this._children.maxOffset}get isEmpty(){return this.childCount===0}get nextSibling(){return null}get previousSibling(){return null}get root(){return this}get parent(){return null}get document(){return null}isAttached(){return!1}getAncestors(){return[]}getChild(e){return this._children.getNode(e)}getChildAtOffset(e){return this._children.getNodeAtOffset(e)}getChildren(){return this._children[Symbol.iterator]()}getChildIndex(e){return this._children.getNodeIndex(e)}getChildStartOffset(e){return this._children.getNodeStartOffset(e)}getPath(){return[]}getNodeByPath(e){let n=this;for(const s of e)n=n.getChildAtOffset(s);return n}offsetToIndex(e){return this._children.offsetToIndex(e)}toJSON(){const e=[];for(const n of this._children)e.push(n.toJSON());return e}static fromJSON(e){const n=[];for(const s of e)s.name?n.push(fn.fromJSON(s)):n.push(Jt.fromJSON(s));return new Zr(n)}_appendChild(e){this._insertChild(this.childCount,e)}_insertChild(e,n){const s=pae(n);for(const r of s)r.parent!==null&&r._remove(),r.parent=this;this._children._insertNodes(e,s)}_removeChildren(e,n=1){const s=this._children._removeNodes(e,n);for(const r of s)r.parent=null;return s}_removeChildrenArray(e){this._children._removeNodesArray(e);for(const n of e)n.parent=null}}Zr.prototype.is=function(i){return i==="documentFragment"||i==="model:documentFragment"};function pae(i){return typeof i=="string"?[new Jt(i)]:(Es(i)||(i=[i]),Array.from(i).map(t=>typeof t=="string"?new Jt(t):t instanceof wr?new Jt(t.data,t.getAttributes()):t))}class bae{constructor(t,e){b(this,"model");b(this,"batch");this.model=t,this.batch=e}createText(t,e){return new Jt(t,e)}createElement(t,e){return new fn(t,e)}createDocumentFragment(){return new Zr}cloneElement(t,e=!0){return t._clone(e)}insert(t,e,n=0){if(this._assertWriterUsedCorrectly(),t instanceof Jt&&t.data=="")return;const s=de._createAt(e,n);if(t.parent)if(TP(t.root,s.root)){this.move(ee._createOn(t),s);return}else{if(t.root.document)throw new B("model-writer-insert-forbidden-move",this);this.remove(t)}const r=s.root.document?s.root.document.version:null,o=t instanceof Zr?t._removeChildren(0,t.childCount):t,a=new Zn(s,o,r);if(t instanceof Jt&&(a.shouldReceiveAttributes=!0),this.batch.addOperation(a),this.model.applyOperation(a),t instanceof Zr)for(const[l,c]of t.markers){const h=de._createAt(c.root,0),m={range:new ee(c.start._getCombined(h,s),c.end._getCombined(h,s)),usingOperation:!0,affectsData:!0};this.model.markers.has(l)?this.updateMarker(l,m):this.addMarker(l,m)}}insertText(t,e,n,s){e instanceof Zr||e instanceof fn||e instanceof de?this.insert(this.createText(t),e,n):this.insert(this.createText(t,e),n,s)}insertElement(t,e,n,s){e instanceof Zr||e instanceof fn||e instanceof de?this.insert(this.createElement(t),e,n):this.insert(this.createElement(t,e),n,s)}append(t,e){this.insert(t,e,"end")}appendText(t,e,n){e instanceof Zr||e instanceof fn?this.insert(this.createText(t),e,"end"):this.insert(this.createText(t,e),n,"end")}appendElement(t,e,n){e instanceof Zr||e instanceof fn?this.insert(this.createElement(t),e,"end"):this.insert(this.createElement(t,e),n,"end")}setAttribute(t,e,n){if(this._assertWriterUsedCorrectly(),n instanceof ee){const s=n.getMinimalFlatRanges();for(const r of s)CP(this,t,e,r)}else xP(this,t,e,n)}setAttributes(t,e){for(const[n,s]of xr(t))this.setAttribute(n,s,e)}removeAttribute(t,e){if(this._assertWriterUsedCorrectly(),e instanceof ee){const n=e.getMinimalFlatRanges();for(const s of n)CP(this,t,null,s)}else xP(this,t,null,e)}clearAttributes(t){this._assertWriterUsedCorrectly();const e=n=>{for(const s of n.getAttributeKeys())this.removeAttribute(s,n)};if(!(t instanceof ee))e(t);else for(const n of t.getItems())e(n)}move(t,e,n){if(this._assertWriterUsedCorrectly(),!(t instanceof ee))throw new B("writer-move-invalid-range",this);if(!t.isFlat)throw new B("writer-move-range-not-flat",this);const s=de._createAt(e,n);if(s.isEqual(t.start))return;if(this._addOperationForAffectedMarkers("move",t),!TP(t.root,s.root))throw new B("writer-move-different-document",this);const r=t.root.document?t.root.document.version:null,o=new Ot(t.start,t.end.offset-t.start.offset,s,r);this.batch.addOperation(o),this.model.applyOperation(o)}remove(t){this._assertWriterUsedCorrectly();const n=(t instanceof ee?t:ee._createOn(t)).getMinimalFlatRanges().reverse();for(const s of n)this._addOperationForAffectedMarkers("move",s),wae(s.start,s.end.offset-s.start.offset,this.batch,this.model)}merge(t){this._assertWriterUsedCorrectly();const e=t.nodeBefore,n=t.nodeAfter;if(this._addOperationForAffectedMarkers("merge",t),!(e instanceof fn))throw new B("writer-merge-no-element-before",this);if(!(n instanceof fn))throw new B("writer-merge-no-element-after",this);t.root.document?this._merge(t):this._mergeDetached(t)}createPositionFromPath(t,e,n){return this.model.createPositionFromPath(t,e,n)}createPositionAt(t,e){return this.model.createPositionAt(t,e)}createPositionAfter(t){return this.model.createPositionAfter(t)}createPositionBefore(t){return this.model.createPositionBefore(t)}createRange(t,e){return this.model.createRange(t,e)}createRangeIn(t){return this.model.createRangeIn(t)}createRangeOn(t){return this.model.createRangeOn(t)}createSelection(...t){return this.model.createSelection(...t)}_mergeDetached(t){const e=t.nodeBefore,n=t.nodeAfter;this.move(ee._createIn(n),de._createAt(e,"end")),this.remove(n)}_merge(t){const e=de._createAt(t.nodeBefore,"end"),n=de._createAt(t.nodeAfter,0),s=t.root.document.graveyard,r=new de(s,[0]),o=t.root.document.version,a=new xn(n,t.nodeAfter.maxOffset,e,r,o);this.batch.addOperation(a),this.model.applyOperation(a)}rename(t,e){if(this._assertWriterUsedCorrectly(),!(t instanceof fn))throw new B("writer-rename-not-element-instance",this);const n=t.root.document?t.root.document.version:null,s=new Yi(de._createBefore(t),t.name,e,n);this.batch.addOperation(s),this.model.applyOperation(s)}split(t,e){this._assertWriterUsedCorrectly();let n=t.parent;if(!n.parent)throw new B("writer-split-element-no-parent",this);if(e||(e=n.parent),!t.parent.getAncestors({includeSelf:!0}).includes(e))throw new B("writer-split-invalid-limit-element",this);let s,r;do{const o=n.root.document?n.root.document.version:null,a=n.maxOffset-t.offset,l=Ut.getInsertionPosition(t),c=new Ut(t,a,l,null,o);this.batch.addOperation(c),this.model.applyOperation(c),!s&&!r&&(s=n,r=t.parent.nextSibling),t=this.createPositionAfter(t.parent),n=t.parent}while(n!==e);return{position:t,range:new ee(de._createAt(s,"end"),de._createAt(r,0))}}wrap(t,e){if(this._assertWriterUsedCorrectly(),!t.isFlat)throw new B("writer-wrap-range-not-flat",this);const n=e instanceof fn?e:new fn(e);if(n.childCount>0)throw new B("writer-wrap-element-not-empty",this);if(n.parent!==null)throw new B("writer-wrap-element-attached",this);this.insert(n,t.start);const s=new ee(t.start.getShiftedBy(1),t.end.getShiftedBy(1));this.move(s,de._createAt(n,0))}unwrap(t){if(this._assertWriterUsedCorrectly(),t.parent===null)throw new B("writer-unwrap-element-no-parent",this);this.move(ee._createIn(t),this.createPositionAfter(t)),this.remove(t)}addMarker(t,e){if(this._assertWriterUsedCorrectly(),!e||typeof e.usingOperation!="boolean")throw new B("writer-addmarker-no-usingoperation",this);const n=e.usingOperation,s=e.range,r=e.affectsData===void 0?!1:e.affectsData;if(this.model.markers.has(t))throw new B("writer-addmarker-marker-exists",this);if(!s)throw new B("writer-addmarker-no-range",this);return n?(ih(this,t,null,s,r),this.model.markers.get(t)):this.model.markers._set(t,s,n,r)}updateMarker(t,e){this._assertWriterUsedCorrectly();const n=typeof t=="string"?t:t.name,s=this.model.markers.get(n);if(!s)throw new B("writer-updatemarker-marker-not-exists",this);if(!e){Tt("writer-updatemarker-reconvert-using-editingcontroller",{markerName:n}),this.model.markers._refresh(s);return}const r=typeof e.usingOperation=="boolean",o=typeof e.affectsData=="boolean",a=o?e.affectsData:s.affectsData;if(!r&&!e.range&&!o)throw new B("writer-updatemarker-wrong-options",this);const l=s.getRange(),c=e.range?e.range:l;if(r&&e.usingOperation!==s.managedUsingOperations){e.usingOperation?ih(this,n,null,c,a):(ih(this,n,l,null,a),this.model.markers._set(n,c,void 0,a));return}s.managedUsingOperations?ih(this,n,l,c,a):this.model.markers._set(n,c,void 0,a)}removeMarker(t){this._assertWriterUsedCorrectly();const e=typeof t=="string"?t:t.name;if(!this.model.markers.has(e))throw new B("writer-removemarker-no-marker",this);const n=this.model.markers.get(e);if(!n.managedUsingOperations){this.model.markers._remove(e);return}const s=n.getRange();ih(this,e,s,null,n.affectsData)}addRoot(t,e="$root"){this._assertWriterUsedCorrectly();const n=this.model.document.getRoot(t);if(n&&n.isAttached())throw new B("writer-addroot-root-exists",this);const s=this.model.document,r=new ro(t,e,!0,s,s.version);return this.batch.addOperation(r),this.model.applyOperation(r),this.model.document.getRoot(t)}detachRoot(t){this._assertWriterUsedCorrectly();const e=typeof t=="string"?this.model.document.getRoot(t):t;if(!e||!e.isAttached())throw new B("writer-detachroot-no-root",this);for(const r of this.model.markers)r.getRange().root===e&&this.removeMarker(r);for(const r of e.getAttributeKeys())this.removeAttribute(r,e);this.remove(this.createRangeIn(e));const n=this.model.document,s=new ro(e.rootName,e.name,!1,n,n.version);this.batch.addOperation(s),this.model.applyOperation(s)}setSelection(...t){this._assertWriterUsedCorrectly(),this.model.document.selection._setTo(...t)}setSelectionFocus(t,e){this._assertWriterUsedCorrectly(),this.model.document.selection._setFocus(t,e)}setSelectionAttribute(t,e){if(this._assertWriterUsedCorrectly(),typeof t=="string")this._setSelectionAttribute(t,e);else for(const[n,s]of xr(t))this._setSelectionAttribute(n,s)}removeSelectionAttribute(t){if(this._assertWriterUsedCorrectly(),typeof t=="string")this._removeSelectionAttribute(t);else for(const e of t)this._removeSelectionAttribute(e)}overrideSelectionGravity(){return this.model.document.selection._overrideGravity()}restoreSelectionGravity(t){this.model.document.selection._restoreGravity(t)}_setSelectionAttribute(t,e){const n=this.model.document.selection;if(n.isCollapsed&&n.anchor.parent.isEmpty){const s=Tr._getStoreAttributeKey(t);this.setAttribute(s,e,n.anchor.parent)}n._setAttribute(t,e)}_removeSelectionAttribute(t){const e=this.model.document.selection;if(e.isCollapsed&&e.anchor.parent.isEmpty){const n=Tr._getStoreAttributeKey(t);this.removeAttribute(n,e.anchor.parent)}e._removeAttribute(t)}_assertWriterUsedCorrectly(){if(this.model._currentWriter!==this)throw new B("writer-incorrect-use",this)}_addOperationForAffectedMarkers(t,e){for(const n of this.model.markers){if(!n.managedUsingOperations)continue;const s=n.getRange();let r=!1;if(t==="move"){const o=e;r=o.containsPosition(s.start)||o.start.isEqual(s.start)||o.containsPosition(s.end)||o.end.isEqual(s.end)}else{const o=e,a=o.nodeBefore,l=o.nodeAfter,c=s.start.parent==a&&s.start.isAtEnd,h=s.end.parent==l&&s.end.offset==0,f=s.end.nodeAfter==l,m=s.start.nodeAfter==l;r=c||h||f||m}r&&this.updateMarker(n.name,{range:s})}}}function CP(i,t,e,n){const s=i.model,r=s.document;let o=n.start,a,l,c;for(const f of n.getWalker({shallow:!0}))c=f.item.getAttribute(t),a&&l!=c&&(l!=e&&h(),o=a),a=f.nextPosition,l=c;a instanceof de&&a!=o&&l!=e&&h();function h(){const f=new ee(o,a),m=f.root.document?r.version:null,p=new Pn(f,t,l,e,m);i.batch.addOperation(p),s.applyOperation(p)}}function xP(i,t,e,n){const s=i.model,r=s.document,o=n.getAttribute(t);let a,l;if(o!=e){if(n.root===n){const h=n.document?r.version:null;l=new $o(n,t,o,e,h)}else{a=new ee(de._createBefore(n),i.createPositionAfter(n));const h=a.root.document?r.version:null;l=new Pn(a,t,o,e,h)}i.batch.addOperation(l),s.applyOperation(l)}}function ih(i,t,e,n,s){const r=i.model,o=r.document,a=new Pi(t,e,n,r.markers,!!s,o.version);i.batch.addOperation(a),r.applyOperation(a)}function wae(i,t,e,n){let s;if(i.root.document){const r=n.document,o=new de(r.graveyard,[0]);s=new Ot(i,t,o,r.version)}else s=new gae(i,t);e.addOperation(s),n.applyOperation(s)}function TP(i,t){return i===t||i instanceof Zp&&t instanceof Zp}function vae(i,t,e={}){if(t.isCollapsed)return;const n=t.getFirstRange();if(n.root.rootName=="$graveyard")return;const s=i.schema;i.change(r=>{if(!e.doNotResetEntireContent&&Aae(s,t)){Sae(r,t);return}const o={};if(!e.doNotAutoparagraph){const c=t.getSelectedElement();c&&Object.assign(o,s.getAttributesWithProperty(c,"copyOnReplace",!0))}const[a,l]=yae(n);a.isTouching(l)||r.remove(r.createRange(a,l)),e.leaveUnmerged||(Eae(r,a,l),s.removeDisallowedAttributes(a.parent.getChildren(),r)),D4(r,t,a),!e.doNotAutoparagraph&&Tae(s,a)&&V4(r,a,t,o),a.detach(),l.detach()})}function yae(i){const t=i.root.document.model,e=i.start;let n=i.end;if(t.hasContent(i,{ignoreMarkers:!0})){const s=_ae(n);if(s&&n.isTouching(t.createPositionAt(s,0))){const r=t.createSelection(i);t.modifySelection(r,{direction:"backward"});const o=r.getLastPosition(),a=t.createRange(o,n);t.hasContent(a,{ignoreMarkers:!0})||(n=o)}}return[On.fromPosition(e,"toPrevious"),On.fromPosition(n,"toNext")]}function _ae(i){const t=i.parent,e=t.root.document.model.schema,n=t.getAncestors({parentFirst:!0,includeSelf:!0});for(const s of n){if(e.isLimit(s))return null;if(e.isBlock(s))return s}}function Eae(i,t,e){const n=i.model;if(!dC(i.model.schema,t,e))return;const[s,r]=xae(t,e);!s||!r||(!n.hasContent(s,{ignoreMarkers:!0})&&n.hasContent(r,{ignoreMarkers:!0})?L4(i,t,e,s.parent):M4(i,t,e,s.parent))}function M4(i,t,e,n){const s=t.parent,r=e.parent;if(!(s==n||r==n)){for(t=i.createPositionAfter(s),e=i.createPositionBefore(r),e.isEqual(t)||i.insert(r,t),i.merge(t);e.parent.isEmpty;){const o=e.parent;e=i.createPositionBefore(o),i.remove(o)}dC(i.model.schema,t,e)&&M4(i,t,e,n)}}function L4(i,t,e,n){const s=t.parent,r=e.parent;if(!(s==n||r==n)){for(t=i.createPositionAfter(s),e=i.createPositionBefore(r),e.isEqual(t)||i.insert(s,e);t.parent.isEmpty;){const o=t.parent;t=i.createPositionBefore(o),i.remove(o)}e=i.createPositionBefore(r),Cae(i,e),dC(i.model.schema,t,e)&&L4(i,t,e,n)}}function Cae(i,t){const e=t.nodeBefore,n=t.nodeAfter;e.name!=n.name&&i.rename(e,n.name),i.clearAttributes(e),i.setAttributes(Object.fromEntries(n.getAttributes()),e),i.merge(t)}function dC(i,t,e){const n=t.parent,s=e.parent;return n==s||i.isLimit(n)||i.isLimit(s)?!1:kae(t,e,i)}function xae(i,t){const e=i.getAncestors(),n=t.getAncestors();let s=0;for(;e[s]&&e[s]==n[s];)s++;return[e[s],n[s]]}function Tae(i,t){const e=i.checkChild(t,"$text"),n=i.checkChild(t,"paragraph");return!e&&n}function kae(i,t,e){const n=new ee(i,t);for(const s of n.getWalker())if(e.isLimit(s.item))return!1;return!0}function V4(i,t,e,n={}){const s=i.createElement("paragraph");i.model.schema.setAllowedAttributes(s,n,i),i.insert(s,t),D4(i,e,i.createPositionAt(s,0))}function Sae(i,t){const e=i.model.schema.getLimitElement(t);i.remove(i.createRangeIn(e)),V4(i,i.createPositionAt(e,0),t)}function Aae(i,t){const e=i.getLimitElement(t);if(!t.containsEntireContent(e))return!1;const n=t.getFirstRange();return n.start.parent==n.end.parent?!1:i.checkChild(e,"paragraph")}function D4(i,t,e){t instanceof Tr?i.setSelection(e):t.setTo(e)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Pae(i,t){return i.change(e=>{const n=e.createDocumentFragment(),s=t.getFirstRange();if(!s||s.isCollapsed)return n;const r=s.start.root,o=s.start.getCommonPath(s.end),a=r.getNodeByPath(o);let l;s.start.parent==s.end.parent?l=s:l=e.createRange(e.createPositionAt(a,s.start.path[o.length]),e.createPositionAt(a,s.end.path[o.length]+1));const c=l.end.offset-l.start.offset;for(const h of l.getItems({shallow:!0}))h.is("$textProxy")?e.appendText(h.data,h.getAttributes(),n):e.append(e.cloneElement(h,!0),n);if(l!=s){const h=s._getTransformedByMove(l.start,e.createPositionAt(n,0),c)[0],f=e.createRange(e.createPositionAt(n,0),h.start),m=e.createRange(h.end,e.createPositionAt(n,"end"));kP(m,e),kP(f,e)}return n})}function kP(i,t){const e=[];Array.from(i.getItems({direction:"backward"})).map(n=>t.createRangeOn(n)).filter(n=>(n.start.isAfter(i.start)||n.start.isEqual(i.start))&&(n.end.isBefore(i.end)||n.end.isEqual(i.end))).forEach(n=>{e.push(n.start.parent),t.remove(n)}),e.forEach(n=>{let s=n;for(;s.parent&&s.isEmpty;){const r=t.createRangeOn(s);s=s.parent,t.remove(r)}})}function Iae(i,t,e){return i.change(n=>{const s=e||i.document.selection;s.isCollapsed||i.deleteContent(s,{doNotAutoparagraph:!0});const r=new Rae(i,n,s.anchor),o=[];let a;if(t.is("documentFragment")){if(t.markers.size){const h=[];for(const[f,m]of t.markers){const{start:p,end:v}=m,_=p.isEqual(v);h.push({position:p,name:f,isCollapsed:_},{position:v,name:f,isCollapsed:_})}h.sort(({position:f},{position:m})=>f.isBefore(m)?1:-1);for(const{position:f,name:m,isCollapsed:p}of h){let v=null,_=null;const E=f.parent===t&&f.isAtStart,x=f.parent===t&&f.isAtEnd;!E&&!x?(v=n.createElement("$marker"),n.insert(v,f)):p&&(_=E?"start":"end"),o.push({name:m,element:v,collapsed:_})}}a=t.getChildren()}else a=[t];r.handleNodes(a);let l=r.getSelectionRange();if(t.is("documentFragment")&&o.length){const h=l?ki.fromRange(l):null,f={};for(let m=o.length-1;m>=0;m--){const{name:p,element:v,collapsed:_}=o[m],E=!f[p];if(E&&(f[p]=[]),v){const x=n.createPositionAt(v,"before");f[p].push(x),n.remove(v)}else{const x=r.getAffectedRange();if(!x){_&&f[p].push(r.position);continue}_?f[p].push(x[_]):f[p].push(E?x.start:x.end)}}for(const[m,[p,v]]of Object.entries(f))p&&v&&p.root===v.root&&p.root.document&&!n.model.markers.has(m)&&n.addMarker(m,{usingOperation:!0,affectsData:!0,range:new ee(p,v)});h&&(l=h.toRange(),h.detach())}/* istanbul ignore else -- @preserve */l&&(s instanceof Tr?n.setSelection(l):s.setTo(l));const c=r.getAffectedRange()||i.createRange(s.anchor);return r.destroy(),c})}class Rae{constructor(t,e,n){b(this,"model");b(this,"writer");b(this,"position");b(this,"canMergeWith");b(this,"schema");b(this,"_documentFragment");b(this,"_documentFragmentPosition");b(this,"_firstNode",null);b(this,"_lastNode",null);b(this,"_lastAutoParagraph",null);b(this,"_filterAttributesOf",[]);b(this,"_affectedStart",null);b(this,"_affectedEnd",null);b(this,"_nodeToSelect",null);this.model=t,this.writer=e,this.position=n,this.canMergeWith=new Set([this.position.parent]),this.schema=t.schema,this._documentFragment=e.createDocumentFragment(),this._documentFragmentPosition=e.createPositionAt(this._documentFragment,0)}handleNodes(t){for(const e of Array.from(t))this._handleNode(e);this._insertPartialFragment(),this._lastAutoParagraph&&this._updateLastNodeFromAutoParagraph(this._lastAutoParagraph),this._mergeOnRight(),this.schema.removeDisallowedAttributes(this._filterAttributesOf,this.writer),this._filterAttributesOf=[]}_updateLastNodeFromAutoParagraph(t){const e=this.writer.createPositionAfter(this._lastNode),n=this.writer.createPositionAfter(t);if(n.isAfter(e)){this._lastNode=t;/* istanbul ignore if -- @preserve */if(this.position.parent!=t||!this.position.isAtEnd)throw new B("insertcontent-invalid-insertion-position",this);this.position=n,this._setAffectedBoundaries(this.position)}}getSelectionRange(){return this._nodeToSelect?ee._createOn(this._nodeToSelect):this.model.schema.getNearestSelectionRange(this.position)}getAffectedRange(){return this._affectedStart?new ee(this._affectedStart,this._affectedEnd):null}destroy(){this._affectedStart&&this._affectedStart.detach(),this._affectedEnd&&this._affectedEnd.detach()}_handleNode(t){if(!this._checkAndSplitToAllowedPosition(t)){this.schema.isObject(t)||this._handleDisallowedNode(t);return}this._appendToFragment(t),this._firstNode||(this._firstNode=t),this._lastNode=t}_insertPartialFragment(){if(this._documentFragment.isEmpty)return;const t=On.fromPosition(this.position,"toNext");this._setAffectedBoundaries(this.position),this._documentFragment.getChild(0)==this._firstNode&&(this.writer.insert(this._firstNode,this.position),this._mergeOnLeft(),this.position=t.toPosition()),this._documentFragment.isEmpty||this.writer.insert(this._documentFragment,this.position),this._documentFragmentPosition=this.writer.createPositionAt(this._documentFragment,0),this.position=t.toPosition(),t.detach()}_handleDisallowedNode(t){t.is("element")&&this.handleNodes(t.getChildren())}_appendToFragment(t){/* istanbul ignore if -- @preserve */if(!this.schema.checkChild(this.position,t))throw new B("insertcontent-wrong-position",this,{node:t,position:this.position});this.writer.insert(t,this._documentFragmentPosition),this._documentFragmentPosition=this._documentFragmentPosition.getShiftedBy(t.offsetSize),this.schema.isObject(t)&&!this.schema.checkChild(this.position,"$text")?this._nodeToSelect=t:this._nodeToSelect=null,this._filterAttributesOf.push(t)}_setAffectedBoundaries(t){this._affectedStart||(this._affectedStart=On.fromPosition(t,"toPrevious")),(!this._affectedEnd||this._affectedEnd.isBefore(t))&&(this._affectedEnd&&this._affectedEnd.detach(),this._affectedEnd=On.fromPosition(t,"toNext"))}_mergeOnLeft(){const t=this._firstNode;if(!(t instanceof fn)||!this._canMergeLeft(t))return;const e=On._createBefore(t);e.stickiness="toNext";const n=On.fromPosition(this.position,"toNext");this._affectedStart.isEqual(e)&&(this._affectedStart.detach(),this._affectedStart=On._createAt(e.nodeBefore,"end","toPrevious")),this._firstNode===this._lastNode&&(this._firstNode=e.nodeBefore,this._lastNode=e.nodeBefore),this.writer.merge(e),e.isEqual(this._affectedEnd)&&this._firstNode===this._lastNode&&(this._affectedEnd.detach(),this._affectedEnd=On._createAt(e.nodeBefore,"end","toNext")),this.position=n.toPosition(),n.detach(),this._filterAttributesOf.push(this.position.parent),e.detach()}_mergeOnRight(){const t=this._lastNode;if(!(t instanceof fn)||!this._canMergeRight(t))return;const e=On._createAfter(t);e.stickiness="toNext";/* istanbul ignore if -- @preserve */if(!this.position.isEqual(e))throw new B("insertcontent-invalid-insertion-position",this);this.position=de._createAt(e.nodeBefore,"end");const n=On.fromPosition(this.position,"toPrevious");this._affectedEnd.isEqual(e)&&(this._affectedEnd.detach(),this._affectedEnd=On._createAt(e.nodeBefore,"end","toNext")),this._firstNode===this._lastNode&&(this._firstNode=e.nodeBefore,this._lastNode=e.nodeBefore),this.writer.merge(e),e.getShiftedBy(-1).isEqual(this._affectedStart)&&this._firstNode===this._lastNode&&(this._affectedStart.detach(),this._affectedStart=On._createAt(e.nodeBefore,0,"toPrevious")),this.position=n.toPosition(),n.detach(),this._filterAttributesOf.push(this.position.parent),e.detach()}_canMergeLeft(t){const e=t.previousSibling;return e instanceof fn&&this.canMergeWith.has(e)&&this.model.schema.checkMerge(e,t)}_canMergeRight(t){const e=t.nextSibling;return e instanceof fn&&this.canMergeWith.has(e)&&this.model.schema.checkMerge(t,e)}_insertAutoParagraph(){this._insertPartialFragment();const t=this.writer.createElement("paragraph");this.writer.insert(t,this.position),this._setAffectedBoundaries(this.position),this._lastAutoParagraph=t,this.position=this.writer.createPositionAt(t,0)}_checkAndSplitToAllowedPosition(t){const e=this._getAllowedIn(this.position.parent,t);if(!e)return!1;for(e!=this.position.parent&&this._insertPartialFragment();e!=this.position.parent;)if(this.position.isAtStart){const n=this.position.parent;this.position=this.writer.createPositionBefore(n),n.isEmpty&&n.parent===e&&this.writer.remove(n)}else if(this.position.isAtEnd)this.position=this.writer.createPositionAfter(this.position.parent);else{const n=this.writer.createPositionAfter(this.position.parent);this._setAffectedBoundaries(this.position),this.writer.split(this.position),this.position=n,this.canMergeWith.add(this.position.nodeAfter)}return this.schema.checkChild(this.position.parent,t)||this._insertAutoParagraph(),!0}_getAllowedIn(t,e){return this.schema.checkChild(t,e)||this.schema.checkChild(t,"paragraph")&&this.schema.checkChild("paragraph",e)?t:this.schema.isLimit(t)?null:this._getAllowedIn(t.parent,e)}}function Oae(i,t,e,n={}){if(!i.schema.isObject(t))throw new B("insertobject-element-not-an-object",i,{object:t});const s=e||i.document.selection;let r=s;n.findOptimalPosition&&i.schema.isBlock(t)&&(r=i.createSelection(i.schema.findOptimalInsertionRange(s,n.findOptimalPosition)));const o=Tn(s.getSelectedBlocks()),a={};return o&&Object.assign(a,i.schema.getAttributesWithProperty(o,"copyOnReplace",!0)),i.change(l=>{r.isCollapsed||i.deleteContent(r,{doNotAutoparagraph:!0});let c=t;const h=r.anchor.parent;!i.schema.checkChild(h,t)&&i.schema.checkChild(h,"paragraph")&&i.schema.checkChild("paragraph",t)&&(c=l.createElement("paragraph"),l.insert(t,c)),i.schema.setAllowedAttributes(c,a,l);const f=i.insertContent(c,r);return f.isCollapsed||n.setSelection&&Nae(l,t,n.setSelection,a),f})}function Nae(i,t,e,n){const s=i.model;if(e=="on"){i.setSelection(t,"on");return}if(e!="after")throw new B("insertobject-invalid-place-parameter-value",s);let r=t.nextSibling;if(s.schema.isInline(t)){i.setSelection(t,"after");return}!(r&&s.schema.checkChild(r,"$text"))&&s.schema.checkChild(t.parent,"paragraph")&&(r=i.createElement("paragraph"),s.schema.setAllowedAttributes(r,n,i),s.insertContent(r,i.createPositionAfter(t))),r&&i.setSelection(r,0)}const Mae=' ,.?!:;"-()';function Lae(i,t,e={}){const n=i.schema,s=e.direction!="backward",r=e.unit?e.unit:"character",o=!!e.treatEmojiAsSingleUnit,a=t.focus,l=new Mo({boundaries:Fae(a,s),singleCharacters:!0,direction:s?"forward":"backward"}),c={walker:l,schema:n,isForward:s,unit:r,treatEmojiAsSingleUnit:o};let h;for(;h=l.next();){if(h.done)return;const f=Vae(c,h.value);if(f){t instanceof Tr?i.change(m=>{m.setSelectionFocus(f)}):t.setFocus(f);return}}}function Vae(i,t){const{isForward:e,walker:n,unit:s,schema:r,treatEmojiAsSingleUnit:o}=i,{type:a,item:l,nextPosition:c}=t;if(a=="text")return i.unit==="word"?Bae(n,e):Dae(n,s,o);if(a==(e?"elementStart":"elementEnd")){if(r.isSelectable(l))return de._createAt(l,e?"after":"before");if(r.checkChild(c,"$text"))return c}else{if(r.isLimit(l)){n.skip(()=>!0);return}if(r.checkChild(c,"$text"))return c}}function Dae(i,t,e){const n=i.position.textNode;if(n){const s=n.data;let r=i.position.offset-n.startOffset;for(;eC(s,r)||t=="character"&&tC(s,r)||e&&ZM(s,r);)i.next(),r=i.position.offset-n.startOffset}return i.position}function Bae(i,t){let e=i.position.textNode;for(e||(e=t?i.position.nodeAfter:i.position.nodeBefore);e&&e.is("$text");){const n=i.position.offset-e.startOffset;if(zae(e,n,t))e=t?i.position.nodeAfter:i.position.nodeBefore;else{if($ae(e.data,n,t))break;i.next()}}return i.position}function Fae(i,t){const e=i.root,n=de._createAt(e,t?"end":0);return t?new ee(i,n):new ee(n,i)}function $ae(i,t,e){const n=t+(e?0:-1);return Mae.includes(i.charAt(n))}function zae(i,t,e){return t===(e?i.offsetSize:0)}let jae=class extends Vt(){constructor(){super();b(this,"markers");b(this,"document");b(this,"schema");b(this,"_pendingChanges");b(this,"_currentWriter");this.markers=new mae,this.document=new fae(this),this.schema=new Ioe,this._pendingChanges=[],this._currentWriter=null,["deleteContent","modifySelection","getSelectedContent","applyOperation"].forEach(e=>this.decorate(e)),this.on("applyOperation",(e,n)=>{n[0]._validate()},{priority:"highest"}),this.schema.register("$root",{isLimit:!0}),this.schema.register("$container",{allowIn:["$root","$container"]}),this.schema.register("$block",{allowIn:["$root","$container"],isBlock:!0}),this.schema.register("$blockObject",{allowWhere:"$block",isBlock:!0,isObject:!0}),this.schema.register("$inlineObject",{allowWhere:"$text",allowAttributesOf:"$text",isInline:!0,isObject:!0}),this.schema.register("$text",{allowIn:"$block",isInline:!0,isContent:!0}),this.schema.register("$clipboardHolder",{allowContentOf:"$root",allowChildren:"$text",isLimit:!0}),this.schema.register("$documentFragment",{allowContentOf:"$root",allowChildren:"$text",isLimit:!0}),this.schema.register("$marker"),this.schema.addChildCheck(()=>!0,"$marker"),Eoe(this),this.document.registerPostFixer(C4),this.on("insertContent",(e,[n,s])=>{e.return=Iae(this,n,s)}),this.on("insertObject",(e,[n,s,r])=>{e.return=Oae(this,n,s,r)}),this.on("canEditAt",e=>{const n=!this.document.isReadOnly;e.return=n,n||e.stop()})}change(e){try{return this._pendingChanges.length===0?(this._pendingChanges.push({batch:new Zc,callback:e}),this._runPendingChanges()[0]):e(this._currentWriter)}catch(n){/* istanbul ignore next -- @preserve */B.rethrowUnexpectedError(n,this)}}enqueueChange(e,n){try{e?typeof e=="function"?(n=e,e=new Zc):e instanceof Zc||(e=new Zc(e)):e=new Zc,this._pendingChanges.push({batch:e,callback:n}),this._pendingChanges.length==1&&this._runPendingChanges()}catch(s){/* istanbul ignore next -- @preserve */B.rethrowUnexpectedError(s,this)}}applyOperation(e){e._execute()}insertContent(e,n,s,...r){const o=_1(n,s);return this.fire("insertContent",[e,o,s,...r])}insertObject(e,n,s,r,...o){const a=_1(n,s);return this.fire("insertObject",[e,a,r,r,...o])}deleteContent(e,n){vae(this,e,n)}modifySelection(e,n){Lae(this,e,n)}getSelectedContent(e){return Pae(this,e)}hasContent(e,n={}){const s=e instanceof ee?e:ee._createIn(e);if(s.isCollapsed)return!1;const{ignoreWhitespaces:r=!1,ignoreMarkers:o=!1}=n;if(!o){for(const a of this.markers.getMarkersIntersectingRange(s))if(a.affectsData)return!0}for(const a of s.getItems())if(this.schema.isContent(a))if(a.is("$textProxy"))if(r){if(a.data.search(/\S/)!==-1)return!0}else return!0;else return!0;return!1}canEditAt(e){const n=_1(e);return this.fire("canEditAt",[n])}createPositionFromPath(e,n,s){return new de(e,n,s)}createPositionAt(e,n){return de._createAt(e,n)}createPositionAfter(e){return de._createAfter(e)}createPositionBefore(e){return de._createBefore(e)}createRange(e,n){return new ee(e,n)}createRangeIn(e){return ee._createIn(e)}createRangeOn(e){return ee._createOn(e)}createSelection(...e){return new hs(...e)}createBatch(e){return new Zc(e)}createOperationFromJSON(e){return nae.fromJSON(e,this.document)}destroy(){this.document.destroy(),this.stopListening()}_runPendingChanges(){const e=[];this.fire("_beforeChanges");try{for(;this._pendingChanges.length;){const n=this._pendingChanges[0].batch;this._currentWriter=new bae(this,n);const s=this._pendingChanges[0].callback(this._currentWriter);e.push(s),this.document._handleChangeBlock(this._currentWriter),this._pendingChanges.shift(),this._currentWriter=null}}finally{this._pendingChanges.length=0,this._currentWriter=null,this.fire("_afterChanges")}return e}};function _1(i,t){if(i)return i instanceof hs||i instanceof Tr?i:i instanceof rc?t||t===0?new hs(i,t):i.is("rootElement")?new hs(i,"in"):new hs(i,"on"):new hs(i)}class Hae extends fo{constructor(){super(...arguments);b(this,"domEventType","click")}onDomEvent(e){this.fire(e.type,e)}}class ow extends fo{constructor(){super(...arguments);b(this,"domEventType",["mousedown","mouseup","mouseover","mouseout"])}onDomEvent(e){this.fire(e.type,e)}}class Uae extends fo{constructor(){super(...arguments);b(this,"domEventType",["touchstart","touchend","touchmove"])}onDomEvent(e){this.fire(e.type,e)}}class Qo{constructor(t){b(this,"document");this.document=t}createDocumentFragment(t){return new Dl(this.document,t)}createElement(t,e,n){return new qo(this.document,t,e,n)}createText(t){return new si(this.document,t)}clone(t,e=!1){return t._clone(e)}appendChild(t,e){return e._appendChild(t)}insertChild(t,e,n){return n._insertChild(t,e)}removeChildren(t,e,n){return n._removeChildren(t,e)}remove(t){const e=t.parent;return e?this.removeChildren(e.getChildIndex(t),1,e):[]}replace(t,e){const n=t.parent;if(n){const s=n.getChildIndex(t);return this.removeChildren(s,1,n),this.insertChild(s,e,n),!0}return!1}unwrapElement(t){const e=t.parent;if(e){const n=e.getChildIndex(t);this.remove(t),this.insertChild(n,t.getChildren(),e)}}rename(t,e){const n=new qo(this.document,t,e.getAttributes(),e.getChildren());return this.replace(e,n)?n:null}setAttribute(t,e,n){n._setAttribute(t,e)}removeAttribute(t,e){e._removeAttribute(t)}addClass(t,e){e._addClass(t)}removeClass(t,e){e._removeClass(t)}setStyle(t,e,n){eo(t)&&n===void 0?e._setStyle(t):n._setStyle(t,e)}removeStyle(t,e){e._removeStyle(t)}setCustomProperty(t,e,n){n._setCustomProperty(t,e)}removeCustomProperty(t,e){return e._removeCustomProperty(t)}createPositionAt(t,e){return Pe._createAt(t,e)}createPositionAfter(t){return Pe._createAfter(t)}createPositionBefore(t){return Pe._createBefore(t)}createRange(t,e){return new vt(t,e)}createRangeOn(t){return vt._createOn(t)}createRangeIn(t){return vt._createIn(t)}createSelection(...t){return new Fo(...t)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const Wae=/^#([0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/i,qae=/^rgb\([ ]?([0-9]{1,3}[ %]?,[ ]?){2,3}[0-9]{1,3}[ %]?\)$/i,Gae=/^rgba\([ ]?([0-9]{1,3}[ %]?,[ ]?){3}(1|[0-9]+%|[0]?\.?[0-9]+)\)$/i,Kae=/^hsl\([ ]?([0-9]{1,3}[ %]?[,]?[ ]*){3}(1|[0-9]+%|[0]?\.?[0-9]+)?\)$/i,Yae=/^hsla\([ ]?([0-9]{1,3}[ %]?,[ ]?){2,3}(1|[0-9]+%|[0]?\.?[0-9]+)\)$/i,Zae=/\w+\((?:[^()]|\([^()]*\))*\)|\S+/gi,Xae=new Set(["black","silver","gray","white","maroon","red","purple","fuchsia","green","lime","olive","yellow","navy","blue","teal","aqua","orange","aliceblue","antiquewhite","aquamarine","azure","beige","bisque","blanchedalmond","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","gainsboro","ghostwhite","gold","goldenrod","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","limegreen","linen","magenta","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","oldlace","olivedrab","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","thistle","tomato","turquoise","violet","wheat","whitesmoke","yellowgreen","activeborder","activecaption","appworkspace","background","buttonface","buttonhighlight","buttonshadow","buttontext","captiontext","graytext","highlight","highlighttext","inactiveborder","inactivecaption","inactivecaptiontext","infobackground","infotext","menu","menutext","scrollbar","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","window","windowframe","windowtext","rebeccapurple","currentcolor","transparent"]);function B4(i){return i.startsWith("#")?Wae.test(i):i.startsWith("rgb")?qae.test(i)||Gae.test(i):i.startsWith("hsl")?Kae.test(i)||Yae.test(i):Xae.has(i.toLowerCase())}const Jae=["none","hidden","dotted","dashed","solid","double","groove","ridge","inset","outset"];function Qae(i){return Jae.includes(i)}const ele=/^([+-]?[0-9]*([.][0-9]+)?(px|cm|mm|in|pc|pt|ch|em|ex|rem|vh|vw|vmin|vmax)|0)$/;function aw(i){return ele.test(i)}const tle=/^[+-]?[0-9]*([.][0-9]+)?%$/;function F4(i){return tle.test(i)}const nle=["repeat-x","repeat-y","repeat","space","round","no-repeat"];function ile(i){return nle.includes(i)}const sle=["center","top","bottom","left","right"];function rle(i){return sle.includes(i)}const ole=["fixed","scroll","local"];function ale(i){return ole.includes(i)}const lle=/^url\(/;function cle(i){return lle.test(i)}function Dh(i=""){if(i==="")return{top:void 0,right:void 0,bottom:void 0,left:void 0};const t=hC(i),e=t[0],n=t[2]||e,s=t[1]||e,r=t[3]||s;return{top:e,bottom:n,right:s,left:r}}function Bh(i){return t=>{const{top:e,right:n,bottom:s,left:r}=t,o=[];return[e,n,r,s].every(a=>!!a)?o.push([i,ule(t)]):(e&&o.push([i+"-top",e]),n&&o.push([i+"-right",n]),s&&o.push([i+"-bottom",s]),r&&o.push([i+"-left",r])),o}}function ule({top:i,right:t,bottom:e,left:n}){const s=[];return n!==t?s.push(i,t,e,n):e!==i?s.push(i,t,e):t!==i?s.push(i,t):s.push(i),s.join(" ")}function $4(i){return t=>({path:i,value:Dh(t)})}function hC(i){const t=i.trim().slice(0,1500).matchAll(Zae);return Array.from(t).map(e=>e[0])}function fC(i){i.setNormalizer("background",dle()),i.setNormalizer("background-color",hle()),i.setReducer("background",fle()),i.setStyleRelation("background",["background-color"])}function dle(){return i=>{const t={},e=hC(i);for(const n of e)ile(n)?(t.repeat=t.repeat||[],t.repeat.push(n)):rle(n)?(t.position=t.position||[],t.position.push(n)):ale(n)?t.attachment=n:B4(n)?t.color=n:cle(n)&&(t.image=n);return{path:"background",value:t}}}function hle(){return i=>({path:"background.color",value:i})}function fle(){return i=>{const t=[];return t.push(["background-color",i.color]),t}}function z4(i){i.setNormalizer("border",mle()),i.setNormalizer("border-top",Cg("top")),i.setNormalizer("border-right",Cg("right")),i.setNormalizer("border-bottom",Cg("bottom")),i.setNormalizer("border-left",Cg("left")),i.setNormalizer("border-color",E1("color")),i.setNormalizer("border-width",E1("width")),i.setNormalizer("border-style",E1("style")),i.setNormalizer("border-top-color",Ls("color","top")),i.setNormalizer("border-top-style",Ls("style","top")),i.setNormalizer("border-top-width",Ls("width","top")),i.setNormalizer("border-right-color",Ls("color","right")),i.setNormalizer("border-right-style",Ls("style","right")),i.setNormalizer("border-right-width",Ls("width","right")),i.setNormalizer("border-bottom-color",Ls("color","bottom")),i.setNormalizer("border-bottom-style",Ls("style","bottom")),i.setNormalizer("border-bottom-width",Ls("width","bottom")),i.setNormalizer("border-left-color",Ls("color","left")),i.setNormalizer("border-left-style",Ls("style","left")),i.setNormalizer("border-left-width",Ls("width","left")),i.setExtractor("border-top",xg("top")),i.setExtractor("border-right",xg("right")),i.setExtractor("border-bottom",xg("bottom")),i.setExtractor("border-left",xg("left")),i.setExtractor("border-top-color","border.color.top"),i.setExtractor("border-right-color","border.color.right"),i.setExtractor("border-bottom-color","border.color.bottom"),i.setExtractor("border-left-color","border.color.left"),i.setExtractor("border-top-width","border.width.top"),i.setExtractor("border-right-width","border.width.right"),i.setExtractor("border-bottom-width","border.width.bottom"),i.setExtractor("border-left-width","border.width.left"),i.setExtractor("border-top-style","border.style.top"),i.setExtractor("border-right-style","border.style.right"),i.setExtractor("border-bottom-style","border.style.bottom"),i.setExtractor("border-left-style","border.style.left"),i.setReducer("border-color",Bh("border-color")),i.setReducer("border-style",Bh("border-style")),i.setReducer("border-width",Bh("border-width")),i.setReducer("border-top",Tg("top")),i.setReducer("border-right",Tg("right")),i.setReducer("border-bottom",Tg("bottom")),i.setReducer("border-left",Tg("left")),i.setReducer("border",ple()),i.setStyleRelation("border",["border-color","border-style","border-width","border-top","border-right","border-bottom","border-left","border-top-color","border-right-color","border-bottom-color","border-left-color","border-top-style","border-right-style","border-bottom-style","border-left-style","border-top-width","border-right-width","border-bottom-width","border-left-width"]),i.setStyleRelation("border-color",["border-top-color","border-right-color","border-bottom-color","border-left-color"]),i.setStyleRelation("border-style",["border-top-style","border-right-style","border-bottom-style","border-left-style"]),i.setStyleRelation("border-width",["border-top-width","border-right-width","border-bottom-width","border-left-width"]),i.setStyleRelation("border-top",["border-top-color","border-top-style","border-top-width"]),i.setStyleRelation("border-right",["border-right-color","border-right-style","border-right-width"]),i.setStyleRelation("border-bottom",["border-bottom-color","border-bottom-style","border-bottom-width"]),i.setStyleRelation("border-left",["border-left-color","border-left-style","border-left-width"])}function mle(){return i=>{const{color:t,style:e,width:n}=j4(i);return{path:"border",value:{color:Dh(t),style:Dh(e),width:Dh(n)}}}}function Cg(i){return t=>{const{color:e,style:n,width:s}=j4(t),r={};return e!==void 0&&(r.color={[i]:e}),n!==void 0&&(r.style={[i]:n}),s!==void 0&&(r.width={[i]:s}),{path:"border",value:r}}}function E1(i){return t=>({path:"border",value:gle(t,i)})}function gle(i,t){return{[t]:Dh(i)}}function Ls(i,t){return e=>({path:"border",value:{[i]:{[t]:e}}})}function xg(i){return(t,e)=>{if(e.border)return wh(e.border,i)}}function wh(i,t){const e={};return i.width&&i.width[t]&&(e.width=i.width[t]),i.style&&i.style[t]&&(e.style=i.style[t]),i.color&&i.color[t]&&(e.color=i.color[t]),e}function j4(i){const t={},e=hC(i);for(const n of e)aw(n)||/thin|medium|thick/.test(n)?t.width=n:Qae(n)?t.style=n:t.color=n;return t}function ple(){return t=>{const e=wh(t,"top"),n=wh(t,"right"),s=wh(t,"bottom"),r=wh(t,"left"),o=[e,n,s,r],a={width:i(o,"width"),style:i(o,"style"),color:i(o,"color")},l=lu(a,"all");return l.length?l:[...Object.entries(a).reduce((h,[f,m])=>(m&&(h.push([`border-${f}`,m]),o.forEach(p=>delete p[f])),h),[]),...lu(e,"top"),...lu(n,"right"),...lu(s,"bottom"),...lu(r,"left")]};function i(t,e){return t.map(n=>n[e]).reduce((n,s)=>n==s?n:null)}}function Tg(i){return t=>lu(t,i)}function lu(i,t){const e=[];if(i&&i.width&&e.push("width"),i&&i.style&&e.push("style"),i&&i.color&&e.push("color"),e.length==3){const n=e.map(s=>i[s]).join(" ");return[t=="all"?["border",n]:[`border-${t}`,n]]}return t=="all"?[]:e.map(n=>[`border-${t}-${n}`,i[n]])}function ble(i){i.setNormalizer("margin",$4("margin")),i.setNormalizer("margin-top",t=>({path:"margin.top",value:t})),i.setNormalizer("margin-right",t=>({path:"margin.right",value:t})),i.setNormalizer("margin-bottom",t=>({path:"margin.bottom",value:t})),i.setNormalizer("margin-left",t=>({path:"margin.left",value:t})),i.setReducer("margin",Bh("margin")),i.setStyleRelation("margin",["margin-top","margin-right","margin-bottom","margin-left"])}function wle(i){i.setNormalizer("padding",$4("padding")),i.setNormalizer("padding-top",t=>({path:"padding.top",value:t})),i.setNormalizer("padding-right",t=>({path:"padding.right",value:t})),i.setNormalizer("padding-bottom",t=>({path:"padding.bottom",value:t})),i.setNormalizer("padding-left",t=>({path:"padding.left",value:t})),i.setReducer("padding",Bh("padding")),i.setStyleRelation("padding",["padding-top","padding-right","padding-bottom","padding-left"])}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 *//**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class H4{constructor(t){b(this,"crashes",[]);b(this,"state","initializing");b(this,"_crashNumberLimit");b(this,"_now",Date.now);b(this,"_minimumNonErrorTimePeriod");b(this,"_boundErrorHandler");b(this,"_listeners");if(this.crashes=[],this._crashNumberLimit=typeof t.crashNumberLimit=="number"?t.crashNumberLimit:3,this._minimumNonErrorTimePeriod=typeof t.minimumNonErrorTimePeriod=="number"?t.minimumNonErrorTimePeriod:5e3,this._boundErrorHandler=e=>{const n="error"in e?e.error:e.reason;n instanceof Error&&this._handleError(n,e)},this._listeners={},!this._restart)throw new Error("The Watchdog class was split into the abstract `Watchdog` class and the `EditorWatchdog` class. Please, use `EditorWatchdog` if you have used the `Watchdog` class previously.")}destroy(){this._stopErrorHandling(),this._listeners={}}on(t,e){this._listeners[t]||(this._listeners[t]=[]),this._listeners[t].push(e)}off(t,e){this._listeners[t]=this._listeners[t].filter(n=>n!==e)}_fire(t,...e){const n=this._listeners[t]||[];for(const s of n)s.apply(this,[null,...e])}_startErrorHandling(){window.addEventListener("error",this._boundErrorHandler),window.addEventListener("unhandledrejection",this._boundErrorHandler)}_stopErrorHandling(){window.removeEventListener("error",this._boundErrorHandler),window.removeEventListener("unhandledrejection",this._boundErrorHandler)}_handleError(t,e){if(this._shouldReactToError(t)){this.crashes.push({message:t.message,stack:t.stack,filename:e instanceof ErrorEvent?e.filename:void 0,lineno:e instanceof ErrorEvent?e.lineno:void 0,colno:e instanceof ErrorEvent?e.colno:void 0,date:this._now()});const n=this._shouldRestart();this.state="crashed",this._fire("stateChange"),this._fire("error",{error:t,causesRestart:n}),n?this._restart():(this.state="crashedPermanently",this._fire("stateChange"))}}_shouldReactToError(t){return t.is&&t.is("CKEditorError")&&t.context!==void 0&&t.context!==null&&this.state==="ready"&&this._isErrorComingFromThisItem(t)}_shouldRestart(){if(this.crashes.length<=this._crashNumberLimit)return!0;const t=this.crashes[this.crashes.length-1].date,e=this.crashes[this.crashes.length-1-this._crashNumberLimit].date;return(t-e)/this._crashNumberLimit>this._minimumNonErrorTimePeriod}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function s_(i,t=new Set){const e=[i],n=new Set;let s=0;for(;e.length>s;){const r=e[s++];if(!(n.has(r)||!vle(r)||t.has(r)))if(n.add(r),Symbol.iterator in r)try{for(const o of r)e.push(o)}catch{}else for(const o in r)o!=="defaultValue"&&e.push(r[o])}return n}function vle(i){const t=Object.prototype.toString.call(i),e=typeof i;return!(e==="number"||e==="boolean"||e==="string"||e==="symbol"||e==="function"||t==="[object Date]"||t==="[object RegExp]"||t==="[object Module]"||i===void 0||i===null||i._watchdogExcluded||i instanceof EventTarget||i instanceof Event)}function U4(i,t,e=new Set){if(i===t&&yle(i))return!0;const n=s_(i,e),s=s_(t,e);for(const r of n)if(s.has(r))return!0;return!1}function yle(i){return typeof i=="object"&&i!==null}class W4 extends H4{constructor(e,n={}){super(n);b(this,"_editor",null);b(this,"_lifecyclePromise",null);b(this,"_throttledSave");b(this,"_data");b(this,"_lastDocumentVersion");b(this,"_elementOrData");b(this,"_initUsingData",!0);b(this,"_editables",{});b(this,"_config");b(this,"_excludedProps");this._throttledSave=$u(this._save.bind(this),typeof n.saveInterval=="number"?n.saveInterval:5e3),e&&(this._creator=(s,r)=>e.create(s,r)),this._destructor=s=>s.destroy()}get editor(){return this._editor}get _item(){return this._editor}setCreator(e){this._creator=e}setDestructor(e){this._destructor=e}_restart(){return Promise.resolve().then(()=>(this.state="initializing",this._fire("stateChange"),this._destroy())).catch(e=>{console.error("An error happened during the editor destroying.",e)}).then(()=>{const e={},n=[],s=this._config.rootsAttributes||{},r={};for(const[a,l]of Object.entries(this._data.roots))l.isLoaded?(e[a]="",r[a]=s[a]||{}):n.push(a);const o={...this._config,extraPlugins:this._config.extraPlugins||[],lazyRoots:n,rootsAttributes:r,_watchdogInitialData:this._data};return delete o.initialData,o.extraPlugins.push(_le),this._initUsingData?this.create(e,o,o.context):$a(this._elementOrData)?this.create(this._elementOrData,o,o.context):this.create(this._editables,o,o.context)}).then(()=>{this._fire("restart")})}create(e=this._elementOrData,n=this._config,s){return this._lifecyclePromise=Promise.resolve(this._lifecyclePromise).then(()=>(super._startErrorHandling(),this._elementOrData=e,this._initUsingData=typeof e=="string"||Object.keys(e).length>0&&typeof Object.values(e)[0]=="string",this._config=this._cloneEditorConfiguration(n)||{},this._config.context=s,this._creator(e,this._config))).then(r=>{this._editor=r,r.model.document.on("change:data",this._throttledSave),this._lastDocumentVersion=r.model.document.version,this._data=this._getData(),this._initUsingData||(this._editables=this._getEditables()),this.state="ready",this._fire("stateChange")}).finally(()=>{this._lifecyclePromise=null}),this._lifecyclePromise}destroy(){return this._lifecyclePromise=Promise.resolve(this._lifecyclePromise).then(()=>(this.state="destroyed",this._fire("stateChange"),super.destroy(),this._destroy())).finally(()=>{this._lifecyclePromise=null}),this._lifecyclePromise}_destroy(){return Promise.resolve().then(()=>{this._stopErrorHandling(),this._throttledSave.cancel();const e=this._editor;return this._editor=null,e.model.document.off("change:data",this._throttledSave),this._destructor(e)})}_save(){const e=this._editor.model.document.version;try{this._data=this._getData(),this._initUsingData||(this._editables=this._getEditables()),this._lastDocumentVersion=e}catch(n){console.error(n,"An error happened during restoring editor data. Editor will be restored from the previously saved data.")}}_setExcludedProperties(e){this._excludedProps=e}_getData(){const e=this._editor,n=e.model.document.roots.filter(l=>l.isAttached()&&l.rootName!="$graveyard"),{plugins:s}=e,r=s.has("CommentsRepository")&&s.get("CommentsRepository"),o=s.has("TrackChanges")&&s.get("TrackChanges"),a={roots:{},markers:{},commentThreads:JSON.stringify([]),suggestions:JSON.stringify([])};n.forEach(l=>{a.roots[l.rootName]={content:JSON.stringify(Array.from(l.getChildren())),attributes:JSON.stringify(Array.from(l.getAttributes())),isLoaded:l._isLoaded}});for(const l of e.model.markers)l._affectsData&&(a.markers[l.name]={rangeJSON:l.getRange().toJSON(),usingOperation:l._managedUsingOperations,affectsData:l._affectsData});return r&&(a.commentThreads=JSON.stringify(r.getCommentThreads({toJSON:!0,skipNotAttached:!0}))),o&&(a.suggestions=JSON.stringify(o.getSuggestions({toJSON:!0,skipNotAttached:!0}))),a}_getEditables(){const e={};for(const n of this.editor.model.document.getRootNames()){const s=this.editor.ui.getEditableElement(n);s&&(e[n]=s)}return e}_isErrorComingFromThisItem(e){return U4(this._editor,e.context,this._excludedProps)}_cloneEditorConfiguration(e){return GE(e,(n,s)=>{if($a(n)||s==="context")return n})}}class _le{constructor(t){b(this,"editor");b(this,"_data");this.editor=t,this._data=t.config.get("_watchdogInitialData")}init(){this.editor.data.on("init",t=>{t.stop(),this.editor.model.enqueueChange({isUndoable:!1},e=>{this._restoreCollaborationData(),this._restoreEditorData(e)}),this.editor.data.fire("ready")},{priority:999})}_createNode(t,e){if("name"in e){const n=t.createElement(e.name,e.attributes);if(e.children)for(const s of e.children)n._appendChild(this._createNode(t,s));return n}else return t.createText(e.data,e.attributes)}_restoreEditorData(t){const e=this.editor;Object.entries(this._data.roots).forEach(([n,{content:s,attributes:r}])=>{const o=JSON.parse(s),a=JSON.parse(r),l=e.model.document.getRoot(n);for(const[c,h]of a)t.setAttribute(c,h,l);for(const c of o){const h=this._createNode(t,c);t.insert(h,l,"end")}}),Object.entries(this._data.markers).forEach(([n,s])=>{const{document:r}=e.model,{rangeJSON:{start:o,end:a},...l}=s,c=r.getRoot(o.root),h=t.createPositionFromPath(c,o.path,o.stickiness),f=t.createPositionFromPath(c,a.path,a.stickiness),m=t.createRange(h,f);t.addMarker(n,{range:m,...l})})}_restoreCollaborationData(){const t=JSON.parse(this._data.commentThreads),e=JSON.parse(this._data.suggestions);t.forEach(n=>{const s=this.editor.config.get("collaboration.channelId"),r=this.editor.plugins.get("CommentsRepository");r.hasCommentThread(n.threadId)&&r.getCommentThread(n.threadId).remove(),r.addCommentThread({channelId:s,...n})}),e.forEach(n=>{const s=this.editor.plugins.get("TrackChangesEditing");if(s.hasSuggestion(n.id)){const r=s.getSuggestion(n.id);r.attributes=n.attributes}else s.addSuggestionData(n)})}}const Fh=Symbol("MainQueueId");class Ele extends H4{constructor(e,n={}){super(n);b(this,"_watchdogs",new Map);b(this,"_watchdogConfig");b(this,"_context",null);b(this,"_contextProps",new Set);b(this,"_actionQueues",new Cle);b(this,"_contextConfig");b(this,"_item");this._watchdogConfig=n,this._creator=s=>e.create(s),this._destructor=s=>s.destroy(),this._actionQueues.onEmpty(()=>{this.state==="initializing"&&(this.state="ready",this._fire("stateChange"))})}setCreator(e){this._creator=e}setDestructor(e){this._destructor=e}get context(){return this._context}create(e={}){return this._actionQueues.enqueue(Fh,()=>(this._contextConfig=e,this._create()))}getItem(e){return this._getWatchdog(e)._item}getItemState(e){return this._getWatchdog(e).state}add(e){const n=SP(e);return Promise.all(n.map(s=>this._actionQueues.enqueue(s.id,()=>{if(this.state==="destroyed")throw new Error("Cannot add items to destroyed watchdog.");if(!this._context)throw new Error("Context was not created yet. You should call the `ContextWatchdog#create()` method first.");let r;if(this._watchdogs.has(s.id))throw new Error(`Item with the given id is already added: '${s.id}'.`);if(s.type==="editor")return r=new W4(null,this._watchdogConfig),r.setCreator(s.creator),r._setExcludedProperties(this._contextProps),s.destructor&&r.setDestructor(s.destructor),this._watchdogs.set(s.id,r),r.on("error",(o,{error:a,causesRestart:l})=>{this._fire("itemError",{itemId:s.id,error:a}),l&&this._actionQueues.enqueue(s.id,()=>new Promise(c=>{const h=()=>{r.off("restart",h),this._fire("itemRestart",{itemId:s.id}),c()};r.on("restart",h)}))}),r.create(s.sourceElementOrData,s.config,this._context);throw new Error(`Not supported item type: '${s.type}'.`)})))}remove(e){const n=SP(e);return Promise.all(n.map(s=>this._actionQueues.enqueue(s,()=>{const r=this._getWatchdog(s);return this._watchdogs.delete(s),r.destroy()})))}destroy(){return this._actionQueues.enqueue(Fh,()=>(this.state="destroyed",this._fire("stateChange"),super.destroy(),this._destroy()))}_restart(){return this._actionQueues.enqueue(Fh,()=>(this.state="initializing",this._fire("stateChange"),this._destroy().catch(e=>{console.error("An error happened during destroying the context or items.",e)}).then(()=>this._create()).then(()=>this._fire("restart"))))}_create(){return Promise.resolve().then(()=>(this._startErrorHandling(),this._creator(this._contextConfig))).then(e=>(this._context=e,this._contextProps=s_(this._context),Promise.all(Array.from(this._watchdogs.values()).map(n=>(n._setExcludedProperties(this._contextProps),n.create(void 0,void 0,this._context))))))}_destroy(){return Promise.resolve().then(()=>{this._stopErrorHandling();const e=this._context;return this._context=null,this._contextProps=new Set,Promise.all(Array.from(this._watchdogs.values()).map(n=>n.destroy())).then(()=>this._destructor(e))})}_getWatchdog(e){const n=this._watchdogs.get(e);if(!n)throw new Error(`Item with the given id was not registered: ${e}.`);return n}_isErrorComingFromThisItem(e){for(const n of this._watchdogs.values())if(n._isErrorComingFromThisItem(e))return!1;return U4(this._context,e.context)}}class Cle{constructor(){b(this,"_onEmptyCallbacks",[]);b(this,"_queues",new Map);b(this,"_activeActions",0)}onEmpty(t){this._onEmptyCallbacks.push(t)}enqueue(t,e){const n=t===Fh;this._activeActions++,this._queues.get(t)||this._queues.set(t,Promise.resolve());const r=(n?Promise.all(this._queues.values()):Promise.all([this._queues.get(Fh),this._queues.get(t)])).then(e),o=r.catch(()=>{});return this._queues.set(t,o),r.finally(()=>{this._activeActions--,this._queues.get(t)===o&&this._activeActions===0&&this._onEmptyCallbacks.forEach(a=>a())})}}function SP(i){return Array.isArray(i)?i:[i]}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class ie extends Vt(){constructor(e){super();b(this,"editor");b(this,"_disableStack",new Set);this.editor=e,this.set("isEnabled",!0)}forceDisabled(e){this._disableStack.add(e),this._disableStack.size==1&&(this.on("set:isEnabled",AP,{priority:"highest"}),this.isEnabled=!1)}clearForceDisabled(e){this._disableStack.delete(e),this._disableStack.size==0&&(this.off("set:isEnabled",AP),this.isEnabled=!0)}destroy(){this.stopListening()}static get isContextPlugin(){return!1}static get isOfficialPlugin(){return!1}static get isPremiumPlugin(){return!1}}function AP(i){i.return=!1,i.stop()}class lt extends Vt(){constructor(e){super();b(this,"editor");b(this,"_isEnabledBasedOnSelection");b(this,"_affectsData");b(this,"_disableStack");this.editor=e,this.set("value",void 0),this.set("isEnabled",!1),this._affectsData=!0,this._isEnabledBasedOnSelection=!0,this._disableStack=new Set,this.decorate("execute"),this.listenTo(this.editor.model.document,"change",()=>{this.refresh()}),this.listenTo(e,"change:isReadOnly",()=>{this.refresh()}),this.on("set:isEnabled",n=>{if(!this.affectsData)return;const s=e.model.document.selection,o=!(s.getFirstPosition().root.rootName=="$graveyard")&&e.model.canEditAt(s);(e.isReadOnly||this._isEnabledBasedOnSelection&&!o)&&(n.return=!1,n.stop())},{priority:"highest"}),this.on("execute",n=>{this.isEnabled||n.stop()},{priority:"high"})}get affectsData(){return this._affectsData}set affectsData(e){this._affectsData=e}refresh(){this.isEnabled=!0}forceDisabled(e){this._disableStack.add(e),this._disableStack.size==1&&(this.on("set:isEnabled",PP,{priority:"highest"}),this.isEnabled=!1)}clearForceDisabled(e){this._disableStack.delete(e),this._disableStack.size==0&&(this.off("set:isEnabled",PP),this.refresh())}execute(...e){}destroy(){this.stopListening()}}function PP(i){i.return=!1,i.stop()}class IP extends lt{constructor(){super(...arguments);b(this,"_childCommandsDefinitions",[])}refresh(){}execute(...e){const n=this._getFirstEnabledCommand();return!!n&&n.execute(e)}registerChildCommand(e,n={}){PM(this._childCommandsDefinitions,{command:e,priority:n.priority||"normal"}),e.on("change:isEnabled",()=>this._checkEnabled()),this._checkEnabled()}_checkEnabled(){this.isEnabled=!!this._getFirstEnabledCommand()}_getFirstEnabledCommand(){const e=this._childCommandsDefinitions.find(({command:n})=>n.isEnabled);return e&&e.command}}class q4 extends Ft(){constructor(e,n=[],s=[]){super();b(this,"_context");b(this,"_plugins",new Map);b(this,"_availablePlugins");b(this,"_contextPlugins");this._context=e,this._availablePlugins=new Map;for(const r of n)r.pluginName&&this._availablePlugins.set(r.pluginName,r);this._contextPlugins=new Map;for(const[r,o]of s)this._contextPlugins.set(r,o),this._contextPlugins.set(o,r),r.pluginName&&this._availablePlugins.set(r.pluginName,r)}*[Symbol.iterator](){for(const e of this._plugins)typeof e[0]=="function"&&(yield e)}get(e){const n=this._plugins.get(e);if(!n){let s=e;throw typeof e=="function"&&(s=e.pluginName||e.name),new B("plugincollection-plugin-not-loaded",this._context,{plugin:s})}return n}has(e){return this._plugins.has(e)}init(e,n=[],s=[]){const r=this,o=this._context;v(e),E(e);const a=e.filter(N=>!m(N,n)),l=[..._(a)];P(l,s);const c=S(l);return O(c,"init").then(()=>O(c,"afterInit")).then(()=>c);function h(N){return typeof N=="function"}function f(N){return h(N)&&!!N.isContextPlugin}function m(N,L){return L.some(M=>M===N||p(N)===M||p(M)===N)}function p(N){return h(N)?N.pluginName||N.name:N}function v(N,L=new Set){N.forEach(M=>{h(M)&&(L.has(M)||(L.add(M),M.pluginName&&!r._availablePlugins.has(M.pluginName)&&r._availablePlugins.set(M.pluginName,M),M.requires&&v(M.requires,L)))})}function _(N,L=new Set){return N.map(M=>h(M)?M:r._availablePlugins.get(M)).reduce((M,F)=>L.has(F)?M:(L.add(F),F.requires&&(E(F.requires,F),_(F.requires,L).forEach(q=>M.add(q))),M.add(F)),new Set)}function E(N,L=null){N.map(M=>h(M)?M:r._availablePlugins.get(M)||M).forEach(M=>{x(M,L),k(M,L),A(M,L)})}function x(N,L){if(!h(N))throw L?new B("plugincollection-soft-required",o,{missingPlugin:N,requiredBy:p(L)}):new B("plugincollection-plugin-not-found",o,{plugin:N})}function k(N,L){if(f(L)&&!f(N))throw new B("plugincollection-context-required",o,{plugin:p(N),requiredBy:p(L)})}function A(N,L){if(L&&m(N,n))throw new B("plugincollection-required",o,{plugin:p(N),requiredBy:p(L)})}function S(N){return N.map(L=>{let M=r._contextPlugins.get(L);return M=M||new L(o),r._add(L,M),M})}function O(N,L){return N.reduce((M,F)=>!F[L]||r._contextPlugins.has(F)?M:M.then(F[L].bind(F)),Promise.resolve())}function P(N,L){for(const M of L){if(typeof M!="function")throw new B("plugincollection-replace-plugin-invalid-type",null,{pluginItem:M});const F=M.pluginName;if(!F)throw new B("plugincollection-replace-plugin-missing-name",null,{pluginItem:M});if(M.requires&&M.requires.length)throw new B("plugincollection-plugin-for-replacing-cannot-have-dependencies",null,{pluginName:F});const q=r._availablePlugins.get(F);if(!q)throw new B("plugincollection-plugin-for-replacing-not-exist",null,{pluginName:F});const K=N.indexOf(q);if(K===-1){if(r._contextPlugins.has(q))return;throw new B("plugincollection-plugin-for-replacing-not-loaded",null,{pluginName:F})}if(q.requires&&q.requires.length)throw new B("plugincollection-replaced-plugin-cannot-have-dependencies",null,{pluginName:F});N.splice(K,1,M),r._availablePlugins.set(F,M)}}}destroy(){const e=[];for(const[,n]of this)typeof n.destroy=="function"&&!this._contextPlugins.has(n)&&e.push(n.destroy());return Promise.all(e)}_add(e,n){this._plugins.set(e,n);const s=e.pluginName;if(s){if(this._plugins.has(s))throw new B("plugincollection-plugin-name-conflict",null,{pluginName:s,plugin1:this._plugins.get(s).constructor,plugin2:e});this._plugins.set(s,n)}}}class Xp{constructor(t){b(this,"config");b(this,"plugins");b(this,"locale");b(this,"t");b(this,"editors");b(this,"_contextOwner",null);const{translations:e,...n}=t||{};this.config=new DM(n,this.constructor.defaultConfig);const s=this.constructor.builtinPlugins;this.config.define("plugins",s),this.plugins=new q4(this,s);const r=this.config.get("language")||{};this.locale=new sse({uiLanguage:typeof r=="string"?r:r.ui,contentLanguage:this.config.get("language.content"),translations:e}),this.t=this.locale.t,this.editors=new oi}initPlugins(){const t=this.config.get("plugins")||[],e=this.config.get("substitutePlugins")||[];for(const n of t.concat(e)){if(typeof n!="function")throw new B("context-initplugins-constructor-only",null,{Plugin:n});if(n.isContextPlugin!==!0)throw new B("context-initplugins-invalid-plugin",null,{Plugin:n})}return this.plugins.init(t,[],e)}destroy(){return Promise.all(Array.from(this.editors,t=>t.destroy())).then(()=>this.plugins.destroy())}_addEditor(t,e){if(this._contextOwner)throw new B("context-addeditor-private-context");this.editors.add(t),e&&(this._contextOwner=t)}_removeEditor(t){return this.editors.has(t)&&this.editors.remove(t),this._contextOwner===t?this.destroy():Promise.resolve()}_getEditorConfig(){const t={};for(const e of this.config.names())["plugins","removePlugins","extraPlugins"].includes(e)||(t[e]=this.config.get(e));return t}static create(t){return new Promise(e=>{const n=new this(t);e(n.initPlugins().then(()=>n))})}}b(Xp,"defaultConfig"),b(Xp,"builtinPlugins");class lw extends Vt(){constructor(e){super();b(this,"context");this.context=e}destroy(){this.stopListening()}static get isContextPlugin(){return!0}static get isOfficialPlugin(){return!1}static get isPremiumPlugin(){return!1}}class xle{constructor(){b(this,"_commands");this._commands=new Map}add(t,e){this._commands.set(t,e)}get(t){return this._commands.get(t)}execute(t,...e){const n=this.get(t);if(!n)throw new B("commandcollection-command-not-found",this,{commandName:t});return n.execute(...e)}*names(){yield*this._commands.keys()}*commands(){yield*this._commands.values()}[Symbol.iterator](){return this._commands[Symbol.iterator]()}destroy(){for(const t of this.commands())t.destroy()}}class Tle extends wn{constructor(e){super();b(this,"editor");this.editor=e}set(e,n,s={}){if(typeof n=="string"){const r=n;n=(o,a)=>{this.editor.execute(r),a()}}super.set(e,n,s)}}const C1="contentEditing",RP="common";class kle{constructor(t){b(this,"keystrokeInfos",new Map);b(this,"_editor");this._editor=t;const e=t.config.get("menuBar.isVisible"),n=t.locale.t;this.addKeystrokeInfoCategory({id:C1,label:n("Content editing keystrokes"),description:n("These keyboard shortcuts allow for quick access to content editing features.")});const s=[{label:n("Close contextual balloons, dropdowns, and dialogs"),keystroke:"Esc"},{label:n("Open the accessibility help dialog"),keystroke:"Alt+0"},{label:n("Move focus between form fields (inputs, buttons, etc.)"),keystroke:[["Tab"],["Shift+Tab"]]},{label:n("Move focus to the toolbar, navigate between toolbars"),keystroke:"Alt+F10",mayRequireFn:!0},{label:n("Navigate through the toolbar or menu bar"),keystroke:[["arrowup"],["arrowright"],["arrowdown"],["arrowleft"]]},{label:n("Execute the currently focused button. Executing buttons that interact with the editor content moves the focus back to the content."),keystroke:[["Enter"],["Space"]]}];e&&s.push({label:n("Move focus to the menu bar, navigate between menu bars"),keystroke:"Alt+F9",mayRequireFn:!0}),this.addKeystrokeInfoCategory({id:"navigation",label:n("User interface and content navigation keystrokes"),description:n("Use the following keystrokes for more efficient navigation in the CKEditor 5 user interface."),groups:[{id:"common",keystrokes:s}]})}addKeystrokeInfoCategory({id:t,label:e,description:n,groups:s}){this.keystrokeInfos.set(t,{id:t,label:e,description:n,groups:new Map}),this.addKeystrokeInfoGroup({categoryId:t,id:RP}),s&&s.forEach(r=>{this.addKeystrokeInfoGroup({categoryId:t,...r})})}addKeystrokeInfoGroup({categoryId:t=C1,id:e,label:n,keystrokes:s}){const r=this.keystrokeInfos.get(t);if(!r)throw new B("accessibility-unknown-keystroke-info-category",this._editor,{groupId:e,categoryId:t});r.groups.set(e,{id:e,label:n,keystrokes:s||[]})}addKeystrokeInfos({categoryId:t=C1,groupId:e=RP,keystrokes:n}){if(!this.keystrokeInfos.has(t))throw new B("accessibility-unknown-keystroke-info-category",this._editor,{categoryId:t,keystrokes:n});const s=this.keystrokeInfos.get(t);if(!s.groups.has(e))throw new B("accessibility-unknown-keystroke-info-group",this._editor,{groupId:e,categoryId:t,keystrokes:n});s.groups.get(e).keystrokes.push(...n)}}function Sle(i){return{sessionId:Ole(),pageSessionId:Nle(),hostname:window.location.hostname,version:globalThis.CKEDITOR_VERSION,type:Ale(i),plugins:Ple(i.plugins),distribution:Ile(),env:Rle(),integration:Object.create(null),menuBar:{isVisible:!!i.config.get("menuBar.isVisible")},language:{ui:i.locale.uiLanguage,content:i.locale.contentLanguage},toolbar:{main:x1(i.config.get("toolbar")),block:x1(i.config.get("blockToolbar")),balloon:x1(i.config.get("balloonToolbar"))}}}function Ale(i){return Object.getPrototypeOf(i).constructor.editorName}function Ple(i){return Array.from(i).filter(([t])=>!!t.pluginName).map(([t])=>{const{pluginName:e,isContextPlugin:n,isOfficialPlugin:s,isPremiumPlugin:r}=t;return{isContext:!!n,isOfficial:!!s,isPremium:!!r,name:e}})}function x1(i){if(!i)return;const t=Array.isArray(i)?{items:i}:i,e=r(t.items||[]);return{isMultiline:e.includes("-"),shouldNotGroupWhenFull:!!t.shouldNotGroupWhenFull,items:s(e)};function s(o){return o.filter(a=>a!=="|"&&a!=="-")}function r(o){return o.flatMap(a=>typeof a=="string"?[a]:r(a.items))}}function Ile(){return{channel:window[Symbol.for("cke distribution")]||"sh"}}function Rle(){let i="unknown",t="unknown";return Xe.isMac?i="mac":Xe.isWindows?i="windows":Xe.isiOS?i="ios":Xe.isAndroid&&(i="android"),Xe.isGecko?t="gecko":Xe.isBlink?t="blink":Xe.isSafari&&(t="safari"),{os:i,browser:t}}function Ole(){return localStorage.getItem("__ckeditor-session-id")||localStorage.setItem("__ckeditor-session-id",yi()),localStorage.getItem("__ckeditor-session-id")}function Nle(){return Re.window.CKEDITOR_PAGE_SESSION_ID=Re.window.CKEDITOR_PAGE_SESSION_ID||yi(),Re.window.CKEDITOR_PAGE_SESSION_ID}class cu extends Vt(){constructor(e={}){super();b(this,"accessibility");b(this,"commands");b(this,"config");b(this,"conversion");b(this,"data");b(this,"editing");b(this,"locale");b(this,"model");b(this,"plugins");b(this,"keystrokes");b(this,"t");b(this,"_context");b(this,"_readOnlyLocks");if("sanitizeHtml"in e)throw new B("editor-config-sanitizehtml-not-supported");const n=this.constructor,{translations:s,...r}=n.defaultConfig||{},{translations:o=s,...a}=e,l=e.language||r.language;this._context=e.context||new Xp({language:l,translations:o}),this._context._addEditor(this,!e.context);const c=Array.from(n.builtinPlugins||[]);this.config=new DM(a,r),this.config.define("plugins",c),this.config.define(this._context._getEditorConfig()),f(this.config),this.plugins=new q4(this,c,this._context.plugins),this.locale=this._context.locale,this.t=this.locale.t,this._readOnlyLocks=new Set,this.commands=new xle,this.set("state","initializing"),this.once("ready",()=>this.state="ready",{priority:"high"}),this.once("destroy",()=>this.state="destroyed",{priority:"high"}),this.model=new jae,this.on("change:isReadOnly",()=>{this.model.document.isReadOnly=this.isReadOnly});const h=new kse;this.data=new Joe(this.model,h),this.editing=new Aoe(this.model,h),this.editing.view.document.bind("isReadOnly").to(this),this.conversion=new eae([this.editing.downcastDispatcher,this.data.downcastDispatcher],this.data.upcastDispatcher),this.conversion.addAlias("dataDowncast",this.data.downcastDispatcher),this.conversion.addAlias("editingDowncast",this.editing.downcastDispatcher),this.keystrokes=new Tle(this),this.keystrokes.listenTo(this.editing.view.document),this.accessibility=new kle(this),m(this);function f(p){let v=p.get("licenseKey");if(!v&&window.CKEDITOR_GLOBAL_LICENSE_KEY&&(v=window.CKEDITOR_GLOBAL_LICENSE_KEY,p.set("licenseKey",v)),!v)throw new B("license-key-missing")}function m(p){const v=p.config.get("licenseKey"),_=window[Symbol.for("cke distribution")]||"sh";function E(M){p.enableReadOnlyMode(Symbol("invalidLicense")),p._showLicenseError(M)}function x(M){const F=M.split(".");return F.length!=3?null:F[1]}function k(M){return["exp","jti","vc"].every(q=>q in M)}function A(M){return Object.getOwnPropertyNames(M).sort().filter(K=>K!="vc"&&M[K]!=null).map(K=>M[K])}function S(M){const{hostname:F}=new URL(window.location.href);if(M.includes(F))return!0;const q=F.split(".");return M.filter(K=>K.includes("*")).map(K=>K.split(".")).filter(K=>K.length<=q.length).map(K=>Array(q.length-K.length).fill(K[0]==="*"?"*":"").concat(K)).some(K=>q.every((te,ve)=>K[ve]===te||K[ve]==="*"))}if(v=="GPL"){_=="cloud"&&E("distributionChannel");return}const O=x(v);if(!O){E("invalid");return}const P=QE(O);if(!P){E("invalid");return}if(!k(P)){E("invalid");return}if(P.distributionChannel&&!Qt(P.distributionChannel).includes(_)){E("distributionChannel");return}if(cse(A(P))!=P.vc.toLowerCase()){E("invalid");return}if(new Date(P.exp*1e3)<bie){E("expired");return}const L=P.licensedHosts;if(L&&L.length>0&&!S(L)){E("domainLimit");return}if(["evaluation","trial"].includes(P.licenseType)&&P.exp*1e3<Date.now()){E("expired");return}if(["development","evaluation","trial"].includes(P.licenseType)){const{licenseType:M}=P,F=M[0].toUpperCase()+M.slice(1),q=M==="evaluation"?"an":"a";console.info(`%cCKEditor 5 ${F} License`,"color: #ffffff; background: #743CCD; font-size: 14px; padding: 4px 8px; border-radius: 4px;"),console.warn(`⚠️ You are using ${q} ${M} license of CKEditor 5${M==="trial"?" which is for evaluation purposes only":""}. For production usage, please obtain a production license at https://portal.ckeditor.com/`)}if(["evaluation","trial"].includes(P.licenseType)){const M=P.licenseType,F=setTimeout(()=>{E(`${M}Limit`)},6e5);p.on("destroy",()=>{clearTimeout(F)})}P.usageEndpoint&&p.once("ready",()=>{const M={requestId:yi(),requestTime:Math.round(Date.now()/1e3),license:v,editor:Mle(p)};p._sendUsageRequest(P.usageEndpoint,M).then(F=>{const{status:q,message:K}=F;K&&console.warn(K),q!="ok"&&E("usageLimit")},()=>{mie("license-key-validation-endpoint-not-reachable",{url:P.usageEndpoint})})},{priority:"high"})}}static get editorName(){return"Editor"}get isReadOnly(){return this._readOnlyLocks.size>0}set isReadOnly(e){throw new B("editor-isreadonly-has-no-setter")}enableReadOnlyMode(e){if(typeof e!="string"&&typeof e!="symbol")throw new B("editor-read-only-lock-id-invalid",null,{lockId:e});this._readOnlyLocks.has(e)||(this._readOnlyLocks.add(e),this._readOnlyLocks.size===1&&this.fire("change:isReadOnly","isReadOnly",!0,!1))}disableReadOnlyMode(e){if(typeof e!="string"&&typeof e!="symbol")throw new B("editor-read-only-lock-id-invalid",null,{lockId:e});this._readOnlyLocks.has(e)&&(this._readOnlyLocks.delete(e),this._readOnlyLocks.size===0&&this.fire("change:isReadOnly","isReadOnly",!1,!0))}setData(e){this.data.set(e)}getData(e){return this.data.get(e)}initPlugins(){const e=this.config,n=e.get("plugins"),s=e.get("removePlugins")||[],r=e.get("extraPlugins")||[],o=e.get("substitutePlugins")||[];return this.plugins.init(n.concat(r),s,o)}destroy(){let e=Promise.resolve();return this.state=="initializing"&&(e=new Promise(n=>this.once("ready",n))),e.then(()=>{this.fire("destroy"),this.stopListening(),this.commands.destroy()}).then(()=>this.plugins.destroy()).then(()=>{this.model.destroy(),this.data.destroy(),this.editing.destroy(),this.keystrokes.destroy()}).then(()=>this._context._removeEditor(this))}execute(e,...n){try{return this.commands.execute(e,...n)}catch(s){/* istanbul ignore next -- @preserve */B.rethrowUnexpectedError(s,this)}}focus(){this.editing.view.focus()}static create(...e){throw new Error("This is an abstract method.")}_showLicenseError(e,n){setTimeout(()=>{if(e=="invalid")throw new B("invalid-license-key");if(e=="expired")throw new B("license-key-expired");if(e=="domainLimit")throw new B("license-key-domain-limit");if(e=="featureNotAllowed")throw new B("license-key-plugin-not-allowed",null,{pluginName:n});if(e=="evaluationLimit")throw new B("license-key-evaluation-limit");if(e=="trialLimit")throw new B("license-key-trial-limit");if(e=="developmentLimit")throw new B("license-key-development-limit");if(e=="usageLimit")throw new B("license-key-usage-limit");if(e=="distributionChannel")throw new B("license-key-invalid-distribution-channel")},0),this._showLicenseError=()=>{}}async _sendUsageRequest(e,n){const s=new Headers({"Content-Type":"application/json"}),r=await fetch(new URL(e),{method:"POST",headers:s,body:JSON.stringify(n)});if(!r.ok)throw new Error(`HTTP Response: ${r.status}`);return r.json()}}b(cu,"defaultConfig"),b(cu,"builtinPlugins"),b(cu,"Context",Xp),b(cu,"EditorWatchdog",W4),b(cu,"ContextWatchdog",Ele);function Mle(i){const t=Sle(i);function e(n,s){if(Fu(t,n)!==void 0)throw new B("editor-usage-data-path-already-set",{path:n});kM(t,n,s)}return i.fire("collectUsageData",{setUsageData:e}),t}function Lle(i){if(!ql(i.updateSourceElement))throw new B("attachtoform-missing-elementapi-interface",i);const t=i.sourceElement;if(Vle(t)&&t.form){let e;const n=t.form,s=()=>i.updateSourceElement();ql(n.submit)&&(e=n.submit,n.submit=()=>{s(),e.apply(n)}),n.addEventListener("submit",s),i.on("destroy",()=>{n.removeEventListener("submit",s),e&&(n.submit=e)})}}function Vle(i){return!!i&&i.tagName.toLowerCase()==="textarea"}function r_(i){class t extends i{constructor(){super(...arguments);b(this,"sourceElement")}updateSourceElement(s){if(!this.sourceElement)throw new B("editor-missing-sourceelement",this);const r=this.config.get("updateSourceElementOnDestroy"),o=this.sourceElement instanceof HTMLTextAreaElement;if(!r&&!o){M2(this.sourceElement,"");return}const a=typeof s=="string"?s:this.data.get();M2(this.sourceElement,a)}}return t}r_.updateSourceElement=r_(Object).prototype.updateSourceElement;class Jp extends lw{constructor(){super(...arguments);b(this,"_actions")}static get pluginName(){return"PendingActions"}static get isOfficialPlugin(){return!0}init(){this.set("hasAny",!1),this._actions=new oi({idProperty:"_id"}),this._actions.delegate("add","remove").to(this)}add(e){if(typeof e!="string")throw new B("pendingactions-add-invalid-message",this);const n=new(Vt());return n.set("message",e),this._actions.add(n),this.hasAny=!0,n}remove(e){this._actions.remove(e),this.hasAny=!!this._actions.length}get first(){return this._actions.get(0)}[Symbol.iterator](){return this._actions[Symbol.iterator]()}}var Dle='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.591 10.177 4.243 4.242a1 1 0 0 1-1.415 1.415l-4.242-4.243-4.243 4.243a1 1 0 0 1-1.414-1.415l4.243-4.242L4.52 5.934A1 1 0 0 1 5.934 4.52l4.243 4.243 4.242-4.243a1 1 0 1 1 1.415 1.414l-4.243 4.243z"/></svg>',Ble='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 16h9a1 1 0 0 1 0 2H2a1 1 0 0 1 0-2z"/><path d="M17 1a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h14zm0 1.5H3a.5.5 0 0 0-.492.41L2.5 3v9a.5.5 0 0 0 .41.492L3 12.5h14a.5.5 0 0 0 .492-.41L17.5 12V3a.5.5 0 0 0-.41-.492L17 2.5z" fill-opacity=".6"/></svg>',Fle='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.972 16.615a.997.997 0 0 1-.744-.292l-4.596-4.596a1 1 0 1 1 1.414-1.414l3.926 3.926 9.937-9.937a1 1 0 0 1 1.414 1.415L7.717 16.323a.997.997 0 0 1-.745.292z"/></svg>',$le='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.333 2 .19 2.263a5.899 5.899 0 0 1 1.458.604L14.714 3.4 16.6 5.286l-1.467 1.733c.263.452.468.942.605 1.46L18 8.666v2.666l-2.263.19a5.899 5.899 0 0 1-.604 1.458l1.467 1.733-1.886 1.886-1.733-1.467a5.899 5.899 0 0 1-1.46.605L11.334 18H8.667l-.19-2.263a5.899 5.899 0 0 1-1.458-.604L5.286 16.6 3.4 14.714l1.467-1.733a5.899 5.899 0 0 1-.604-1.458L2 11.333V8.667l2.262-.189a5.899 5.899 0 0 1 .605-1.459L3.4 5.286 5.286 3.4l1.733 1.467a5.899 5.899 0 0 1 1.46-.605L8.666 2h2.666zM10 6.267a3.733 3.733 0 1 0 0 7.466 3.733 3.733 0 0 0 0-7.466z"/></svg>',zle='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10.209 18.717A8.5 8.5 0 1 1 18.686 9.6h-.008l.002.12a3 3 0 0 1-2.866 2.997h-.268l-.046-.002v.002h-4.791a2 2 0 1 0 0 4 1 1 0 1 1-.128 1.992 8.665 8.665 0 0 1-.372.008Zm-3.918-7.01a1.25 1.25 0 1 0-2.415-.648 1.25 1.25 0 0 0 2.415.647ZM5.723 8.18a1.25 1.25 0 1 0 .647-2.414 1.25 1.25 0 0 0-.647 2.414ZM9.76 6.155a1.25 1.25 0 1 0 .647-2.415 1.25 1.25 0 0 0-.647 2.415Zm4.028 1.759a1.25 1.25 0 1 0 .647-2.415 1.25 1.25 0 0 0-.647 2.415Z"/></svg>',jle='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m8.636 9.531-2.758 3.94a.5.5 0 0 0 .122.696l3.224 2.284h1.314l2.636-3.736L8.636 9.53zm.288 8.451L5.14 15.396a2 2 0 0 1-.491-2.786l6.673-9.53a2 2 0 0 1 2.785-.49l3.742 2.62a2 2 0 0 1 .491 2.785l-7.269 10.053-2.147-.066z"/><path d="M4 18h5.523v-1H4zm-2 0h1v-1H2z"/></svg>',Hle='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11 1a9 9 0 1 1-8.027 13.075l1.128-1.129A7.502 7.502 0 0 0 18.5 10a7.5 7.5 0 1 0-14.962.759l-.745-.746-.76.76A9 9 0 0 1 11 1z"/><path d="M.475 8.17a.75.75 0 0 1 .978.047l.075.082 1.284 1.643 1.681-1.284a.75.75 0 0 1 .978.057l.073.083a.75.75 0 0 1-.057.978l-.083.073-2.27 1.737a.75.75 0 0 1-.973-.052l-.074-.082-1.741-2.23a.75.75 0 0 1 .13-1.052z"/><path d="M11.5 5v4.999l3.196 3.196-1.06 1.06L10.1 10.72l-.1-.113V5z"/></svg>',Ule='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M5.085 6.22 2.943 4.078a.75.75 0 1 1 1.06-1.06l2.592 2.59A11.094 11.094 0 0 1 10 5.068c4.738 0 8.578 3.101 8.578 5.083 0 1.197-1.401 2.803-3.555 3.887l1.714 1.713a.75.75 0 0 1-.09 1.138.488.488 0 0 1-.15.084.75.75 0 0 1-.821-.16L6.17 7.304c-.258.11-.51.233-.757.365l6.239 6.24-.006.005.78.78c-.388.094-.78.166-1.174.215l-1.11-1.11h.011L4.55 8.197a7.2 7.2 0 0 0-.665.514l-.112.098 4.897 4.897-.005.006 1.276 1.276a10.164 10.164 0 0 1-1.477-.117l-.479-.479-.009.009-4.863-4.863-.022.031a2.563 2.563 0 0 0-.124.2c-.043.077-.08.158-.108.241a.534.534 0 0 0-.028.133.29.29 0 0 0 .008.072.927.927 0 0 0 .082.226c.067.133.145.26.234.379l3.242 3.365.025.01.59.623c-3.265-.918-5.59-3.155-5.59-4.668 0-1.194 1.448-2.838 3.663-3.93zm7.07.531a4.632 4.632 0 0 1 1.108 5.992l.345.344.046-.018a9.313 9.313 0 0 0 2-1.112c.256-.187.5-.392.727-.613.137-.134.27-.277.392-.431.072-.091.141-.185.203-.286.057-.093.107-.19.148-.292a.72.72 0 0 0 .036-.12.29.29 0 0 0 .008-.072.492.492 0 0 0-.028-.133.999.999 0 0 0-.036-.096 2.165 2.165 0 0 0-.071-.145 2.917 2.917 0 0 0-.125-.2 3.592 3.592 0 0 0-.263-.335 5.444 5.444 0 0 0-.53-.523 7.955 7.955 0 0 0-1.054-.768 9.766 9.766 0 0 0-1.879-.891c-.337-.118-.68-.219-1.027-.301zm-2.85.21-.069.002a.508.508 0 0 0-.254.097.496.496 0 0 0-.104.679.498.498 0 0 0 .326.199l.045.005c.091.003.181.003.272.012a2.45 2.45 0 0 1 2.017 1.513c.024.061.043.125.069.185a.494.494 0 0 0 .45.287h.008a.496.496 0 0 0 .35-.158.482.482 0 0 0 .13-.335.638.638 0 0 0-.048-.219 3.379 3.379 0 0 0-.36-.723 3.438 3.438 0 0 0-2.791-1.543l-.028-.001h-.013z"/></svg>',Wle='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3.035 1C2.446 1 2 1.54 2 2.098V10.5h1.5v-8h13v8H18V2.098C18 1.539 17.48 1 16.9 1H3.035Zm10.453 2.61a1.885 1.885 0 0 0-1.442.736 1.89 1.89 0 0 0 1.011 2.976 1.903 1.903 0 0 0 2.253-1.114 1.887 1.887 0 0 0-1.822-2.598ZM7.463 8.163a.611.611 0 0 0-.432.154L5.071 10.5h5.119L7.88 8.348a.628.628 0 0 0-.417-.185Zm6.236 1.059a.62.62 0 0 0-.42.164L12.07 10.5h2.969l-.92-1.113a.618.618 0 0 0-.42-.165ZM.91 11.5a.91.91 0 0 0-.91.912v6.877c0 .505.405.91.91.91h18.178a.91.91 0 0 0 .912-.91v-6.877a.908.908 0 0 0-.912-.912H.91ZM3.668 13h1.947l2.135 5.7H5.898l-.28-.946H3.601l-.278.945H1.516L3.668 13Zm4.947 0h1.801v4.3h2.7v1.4h-4.5V13h-.001Zm4.5 0h5.4v1.4h-1.798v4.3h-1.701v-4.3h-1.9V13h-.001Zm-8.517 1.457-.614 2.059h1.262l-.648-2.059Z"/></svg>',qle='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M12.68 13.74h-.001l4.209 4.208a1 1 0 1 0 1.414-1.414l-4.267-4.268a6 6 0 1 0-1.355 1.474ZM13 9a4 4 0 1 1-8 0 4 4 0 0 1 8 0Z"/></svg>',Gle='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.463 5.187a.888.888 0 1 1 1.254 1.255L9.16 10l3.557 3.557a.888.888 0 1 1-1.254 1.255L7.26 10.61a.888.888 0 0 1 .16-1.382l4.043-4.042z"/></svg>',Kle='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M8.537 14.813a.888.888 0 1 1-1.254-1.255L10.84 10 7.283 6.442a.888.888 0 1 1 1.254-1.255L12.74 9.39a.888.888 0 0 1-.16 1.382l-4.043 4.042z"/></svg>',Yle='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.66 9.118a.693.693 0 0 1 .956.032l3.65 3.411 2.422-2.238a.695.695 0 0 1 .945 0L17.5 13.6V2.5h-15v11.1l4.16-4.482ZM17.8 1c.652 0 1.2.47 1.2 1.1v14.362c0 .64-.532 1.038-1.184 1.038H2.184C1.532 17.5 1 17.103 1 16.462V2.1C1 1.47 1.537 1 2.2 1h15.6Zm-5.655 6a2.128 2.128 0 0 1 .157-2.364A2.133 2.133 0 1 1 12.145 7Z"/></svg>',Zle='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M1.201 1C.538 1 0 1.47 0 2.1v14.363c0 .64.534 1.037 1.186 1.037h9.494a2.97 2.97 0 0 1-.414-.287 2.998 2.998 0 0 1-1.055-2.03 3.003 3.003 0 0 1 .693-2.185l.383-.455-.02.018-3.65-3.41a.695.695 0 0 0-.957-.034L1.5 13.6V2.5h15v5.535a2.97 2.97 0 0 1 1.412.932l.088.105V2.1c0-.63-.547-1.1-1.2-1.1H1.202Zm11.713 2.803a2.146 2.146 0 0 0-2.049 1.992 2.14 2.14 0 0 0 1.28 2.096 2.13 2.13 0 0 0 2.644-3.11 2.134 2.134 0 0 0-1.875-.978Z"/><path d="M15.522 19.1a.79.79 0 0 0 .79-.79v-5.373l2.059 2.455a.79.79 0 1 0 1.211-1.015l-3.352-3.995a.79.79 0 0 0-.995-.179.784.784 0 0 0-.299.221l-3.35 3.99a.79.79 0 1 0 1.21 1.017l1.936-2.306v5.185c0 .436.353.79.79.79Z"/><path d="M15.522 19.1a.79.79 0 0 0 .79-.79v-5.373l2.059 2.455a.79.79 0 1 0 1.211-1.015l-3.352-3.995a.79.79 0 0 0-.995-.179.784.784 0 0 0-.299.221l-3.35 3.99a.79.79 0 1 0 1.21 1.017l1.936-2.306v5.185c0 .436.353.79.79.79Z"/></svg>',Xle='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M1.201 1c-.662 0-1.2.47-1.2 1.1v14.248c0 .64.533 1.152 1.185 1.152h6.623v-7.236L6.617 9.15a.694.694 0 0 0-.957-.033L1.602 13.55V2.553l14.798.003V9.7H18V2.1c0-.63-.547-1.1-1.2-1.1H1.202Zm11.723 2.805a2.094 2.094 0 0 0-1.621.832 2.127 2.127 0 0 0 1.136 3.357 2.13 2.13 0 0 0 2.611-1.506 2.133 2.133 0 0 0-.76-2.244 2.13 2.13 0 0 0-1.366-.44Z"/><path clip-rule="evenodd" d="M19.898 12.369v6.187a.844.844 0 0 1-.844.844h-8.719a.844.844 0 0 1-.843-.844v-7.312a.844.844 0 0 1 .843-.844h2.531a.843.843 0 0 1 .597.248l.838.852h4.75c.223 0 .441.114.6.272a.844.844 0 0 1 .247.597Zm-1.52.654-4.377.02-1.1-1.143H11v6h7.4l-.023-4.877Z"/></svg>',Jle='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M1.201 1C.538 1 0 1.47 0 2.1v14.363c0 .64.534 1.037 1.186 1.037h7.029a5.401 5.401 0 0 1 .615-4.338l.762-1.232-2.975-2.78a.696.696 0 0 0-.957-.033L1.5 13.6V2.5h15v6.023c.449.131.887.32 1.307.573l.058.033c.046.028.09.057.135.086V2.1c0-.63-.547-1.1-1.2-1.1H1.202Zm11.713 2.803a2.15 2.15 0 0 0-1.611.834 2.118 2.118 0 0 0-.438 1.158 2.14 2.14 0 0 0 1.277 2.096 2.132 2.132 0 0 0 2.645-3.11 2.13 2.13 0 0 0-1.873-.978Z"/><path d="M16.63 10.294a3.003 3.003 0 0 0-4.142.887l-.117.177a.647.647 0 0 0-.096.492.664.664 0 0 0 .278.418.7.7 0 0 0 .944-.234 1.741 1.741 0 0 1 2.478-.463 1.869 1.869 0 0 1 .476 2.55.637.637 0 0 0-.071.5.646.646 0 0 0 .309.396.627.627 0 0 0 .869-.19l.027-.041a3.226 3.226 0 0 0-.956-4.492Zm-6.061 3.78-.044.066a3.228 3.228 0 0 0 .82 4.403 3.005 3.005 0 0 0 4.275-.798l.13-.197a.626.626 0 0 0 .092-.475.638.638 0 0 0-.268-.402.713.713 0 0 0-.99.26l-.018.029a1.741 1.741 0 0 1-2.477.461 1.87 1.87 0 0 1-.475-2.55l.029-.047a.647.647 0 0 0 .086-.485.66.66 0 0 0-.275-.408l-.04-.027a.609.609 0 0 0-.845.17Z"/><path d="M15.312 13.925c.24-.36.154-.838-.19-1.067-.346-.23-.82-.124-1.059.236l-1.268 1.907c-.239.36-.153.838.192 1.067.345.23.818.123 1.057-.236l1.268-1.907Z"/></svg>',Qle='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m9.239 13.938-2.88-1.663a.75.75 0 0 1 .75-1.3L9 12.067V4.75a.75.75 0 1 1 1.5 0v7.318l1.89-1.093a.75.75 0 0 1 .75 1.3l-2.879 1.663a.752.752 0 0 1-.511.187.752.752 0 0 1-.511-.187zM4.25 17a.75.75 0 1 1 0-1.5h10.5a.75.75 0 0 1 0 1.5H4.25z"/></svg>',ece='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M9.75 11.875a.752.752 0 0 1 .508.184l2.883 1.666a.75.75 0 0 1-.659 1.344l-.091-.044-1.892-1.093.001 4.318a.75.75 0 1 1-1.5 0v-4.317l-1.89 1.092a.75.75 0 0 1-.75-1.3l2.879-1.663a.752.752 0 0 1 .51-.187zM15.25 9a.75.75 0 1 1 0 1.5H4.75a.75.75 0 1 1 0-1.5h10.5zM9.75.375a.75.75 0 0 1 .75.75v4.318l1.89-1.093.092-.045a.75.75 0 0 1 .659 1.344l-2.883 1.667a.752.752 0 0 1-.508.184.752.752 0 0 1-.511-.187L6.359 5.65a.75.75 0 0 1 .75-1.299L9 5.442V1.125a.75.75 0 0 1 .75-.75z"/></svg>',tce='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m10.261 7.062 2.88 1.663a.75.75 0 0 1-.75 1.3L10.5 8.933v7.317a.75.75 0 1 1-1.5 0V8.932l-1.89 1.093a.75.75 0 0 1-.75-1.3l2.879-1.663a.752.752 0 0 1 .511-.187.752.752 0 0 1 .511.187zM15.25 4a.75.75 0 1 1 0 1.5H4.75a.75.75 0 0 1 0-1.5h10.5z"/></svg>',nce='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 4c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75z"/></svg>',ice='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm2.286 4c0 .414.336.75.75.75h9.928a.75.75 0 1 0 0-1.5H5.036a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h9.928a.75.75 0 1 0 0-1.5H5.036a.75.75 0 0 0-.75.75z"/></svg>',sce='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M18 3.75a.75.75 0 0 1-.75.75H2.75a.75.75 0 1 1 0-1.5h14.5a.75.75 0 0 1 .75.75zm0 8a.75.75 0 0 1-.75.75H2.75a.75.75 0 1 1 0-1.5h14.5a.75.75 0 0 1 .75.75zm0 4a.75.75 0 0 1-.75.75H7.321a.75.75 0 1 1 0-1.5h9.929a.75.75 0 0 1 .75.75zm0-8a.75.75 0 0 1-.75.75H7.321a.75.75 0 1 1 0-1.5h9.929a.75.75 0 0 1 .75.75z"/></svg>',rce='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 4c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75z"/></svg>',oce='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M12.003 7v5.5a1 1 0 0 1-1 1H2.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H3.5V12h6.997V7.5z"/></svg>',ace='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M15.003 7v5.5a1 1 0 0 1-1 1H5.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H6.5V12h6.997V7.5z"/></svg>',lce='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M18.003 7v5.5a1 1 0 0 1-1 1H8.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H9.5V12h6.997V7.5z"/></svg>',cce='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M18 7v5.5a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1zm-1.505.5H3.504V12h12.991V7.5z"/></svg>',uce='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm11.5 9H18v1.5h-4.5zM2 15h16v1.5H2z"/><path d="M12.003 7v5.5a1 1 0 0 1-1 1H2.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H3.5V12h6.997V7.5z"/></svg>',dce='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm11.5 9H18v1.5h-4.5zm0-3H18v1.5h-4.5zm0-3H18v1.5h-4.5zM2 15h16v1.5H2z"/><path d="M12.003 7v5.5a1 1 0 0 1-1 1H2.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H3.5V12h6.997V7.5z"/></svg>',hce='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2zm0-9h5v1.5H2zm0 3h5v1.5H2zm0 3h5v1.5H2z"/><path d="M18.003 7v5.5a1 1 0 0 1-1 1H8.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H9.5V12h6.997V7.5z"/></svg>',fce='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.5 17v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zM1 15.5v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm0-2v1h-1v-1h1zm-19 0v1H0v-1h1zM14.5 2v1h-1V2h1zm2 0v1h-1V2h1zm2 0v1h-1V2h1zm-8 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm8 0v1h-1V2h1zm-10 0v1h-1V2h1z"/><path d="M18.095 2H1.905C.853 2 0 2.895 0 4v12c0 1.105.853 2 1.905 2h16.19C19.147 18 20 17.105 20 16V4c0-1.105-.853-2-1.905-2zm0 1.5c.263 0 .476.224.476.5v12c0 .276-.213.5-.476.5H1.905a.489.489 0 0 1-.476-.5V4c0-.276.213-.5.476-.5h16.19z"/></svg>',mce='<svg xmlns="http://www.w3.org/2000/svg" xmlns:v="https://vecta.io/nano" viewBox="0 0 20 20"><path d="M.95 1.43a.95.95 0 0 0-.95.95v3.1a.95.95 0 0 0 .95.95h.75v6.3H.95a.95.95 0 0 0-.95.95v3.1a.95.95 0 0 0 .95.95h3.1a.95.95 0 0 0 .95-.95v-.65h1.932l1.539-1.5H5v-.95a.95.95 0 0 0-.95-.95H3.2v-6.3h.85A.95.95 0 0 0 5 5.48v-.55h10v.55a.95.95 0 0 0 .95.95h3.1a.95.95 0 0 0 .95-.95v-3.1a.95.95 0 0 0-.95-.95h-3.1a.95.95 0 0 0-.95.95v1.05H5V2.38a.95.95 0 0 0-.95-.95H.95zm.55 3.5v-2h2v2h-2zm0 9.3v2h2v-2h-2zm15-11.3v2h2v-2h-2z"/><path d="M8.139 20.004v-2.388l7.045-7.048 2.391 2.391-7.046 7.046h-2.39zm11.421-9.101a.64.64 0 0 1-.138.206l-1.165 1.168-2.391-2.391 1.167-1.163a.63.63 0 0 1 .206-.138.635.635 0 0 1 .243-.049.63.63 0 0 1 .449.187l1.491 1.488c.059.059.108.129.138.206s.049.16.049.243a.6.6 0 0 1-.049.243z"/></svg>',gce='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 16.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1ZM1 15v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 13v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 11v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 9v1H0V9h1Zm19 0v1h-1V9h1ZM1 7v1H0V7h1Zm19 0v1h-1V7h1ZM1 5v1H0V5h1Zm19 0v1h-1V5h1Zm0-2v1h-1V3h1ZM1 3v1H0V3h1Zm13.5-1.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm-8 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm8 0v1h-1v-1h1Zm-10 0v1h-1v-1h1Z"/><path d="M13 5.5H2a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h11a2 2 0 0 0 2-2v-8a2 2 0 0 0-2-2ZM13 7a.5.5 0 0 1 .5.5v8a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5v-8A.5.5 0 0 1 2 7h11Z"/></svg>',pce='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 16.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1ZM1 15v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 13v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 11v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 9v1H0V9h1Zm19 0v1h-1V9h1ZM1 7v1H0V7h1Zm19 0v1h-1V7h1ZM1 5v1H0V5h1Zm19 0v1h-1V5h1Zm0-2v1h-1V3h1ZM1 3v1H0V3h1Zm13.5-1.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm-8 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm8 0v1h-1v-1h1Zm-10 0v1h-1v-1h1Z"/><path d="M7 9.5H2a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2h5a2 2 0 0 0 2-2v-4a2 2 0 0 0-2-2ZM7 11a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5v-4A.5.5 0 0 1 2 11h5Z"/></svg>',bce='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 16.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1ZM1 15v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 13v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 11v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 9v1H0V9h1Zm19 0v1h-1V9h1ZM1 7v1H0V7h1Zm19 0v1h-1V7h1ZM1 5v1H0V5h1Zm19 0v1h-1V5h1Zm0-2v1h-1V3h1ZM1 3v1H0V3h1Zm13.5-1.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm-8 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm8 0v1h-1v-1h1Zm-10 0v1h-1v-1h1Z"/><path d="M10 7.5H2a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2v-6a2 2 0 0 0-2-2ZM10 9a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5v-6A.5.5 0 0 1 2 9h8Z"/></svg>',wce='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m7.3 17.37-.061.088a1.518 1.518 0 0 1-.934.535l-4.178.663-.806-4.153a1.495 1.495 0 0 1 .187-1.058l.056-.086L8.77 2.639c.958-1.351 2.803-1.076 4.296-.03 1.497 1.047 2.387 2.693 1.433 4.055L7.3 17.37zM9.14 4.728l-5.545 8.346 3.277 2.294 5.544-8.346L9.14 4.728zM6.07 16.512l-3.276-2.295.53 2.73 2.746-.435zM9.994 3.506 13.271 5.8c.316-.452-.16-1.333-1.065-1.966-.905-.634-1.895-.78-2.212-.328zM8 18.5 9.375 17H19v1.5H8z"/></svg>',vce='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.999 2H15a1 1 0 0 1 0 2h-1.004v13a1 1 0 1 1-2 0V4H8.999v13a1 1 0 1 1-2 0v-7A4 4 0 0 1 3 6a4 4 0 0 1 3.999-4z"/></svg>',yce='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 10.423a6.5 6.5 0 0 1 6.056-6.408l.038.67C6.448 5.423 5.354 7.663 5.22 10H9c.552 0 .5.432.5.986v4.511c0 .554-.448.503-1 .503h-5c-.552 0-.5-.449-.5-1.003v-4.574zm8 0a6.5 6.5 0 0 1 6.056-6.408l.038.67c-2.646.739-3.74 2.979-3.873 5.315H17c.552 0 .5.432.5.986v4.511c0 .554-.448.503-1 .503h-5c-.552 0-.5-.449-.5-1.003v-4.574z"/></svg>',_ce='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><circle cx="9.5" cy="4.5" r="1.5"/><circle cx="9.5" cy="10.5" r="1.5"/><circle cx="9.5" cy="16.5" r="1.5"/></svg>',Ece='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M5 3.25a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M12 3.25a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M5 10a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M12 10a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M5 16.75a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M12 16.75a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/></svg>',Cce='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10.187 17H5.773c-.637 0-1.092-.138-1.364-.415-.273-.277-.409-.718-.409-1.323V4.738c0-.617.14-1.062.419-1.332.279-.27.73-.406 1.354-.406h4.68c.69 0 1.288.041 1.793.124.506.083.96.242 1.36.478.341.197.644.447.906.75a3.262 3.262 0 0 1 .808 2.162c0 1.401-.722 2.426-2.167 3.075C15.05 10.175 16 11.315 16 13.01a3.756 3.756 0 0 1-2.296 3.504 6.1 6.1 0 0 1-1.517.377c-.571.073-1.238.11-2 .11zm-.217-6.217H7v4.087h3.069c1.977 0 2.965-.69 2.965-2.072 0-.707-.256-1.22-.768-1.537-.512-.319-1.277-.478-2.296-.478zM7 5.13v3.619h2.606c.729 0 1.292-.067 1.69-.2a1.6 1.6 0 0 0 .91-.765c.165-.267.247-.566.247-.897 0-.707-.26-1.176-.778-1.409-.519-.232-1.31-.348-2.375-.348H7z"/></svg>',xce='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10.5 5.5H7v5h3.5a2.5 2.5 0 1 0 0-5zM5 3h6.5v.025a5 5 0 0 1 0 9.95V13H7v4a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1z"/></svg>',Tce='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10 2a1 1 0 0 0-1 1v6H3a1 1 0 1 0 0 2h6v6a1 1 0 1 0 2 0v-6h6a1 1 0 1 0 0-2h-6V3a1 1 0 0 0-1-1Z"/></svg>',kce='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M9.816 11.5 7.038 4.785 4.261 11.5h5.555Zm.62 1.5H3.641l-1.666 4.028H.312l5.789-14h1.875l5.789 14h-1.663L10.436 13Z"/><path d="m12.09 17-.534-1.292.848-1.971.545 1.319L12.113 17h-.023Zm1.142-5.187.545 1.319L15.5 9.13l1.858 4.316h-3.45l.398.965h3.467L18.887 17H20l-3.873-9h-1.254l-1.641 3.813Z"/></svg>',Sce='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M19 4.5 14 0H3v12.673l.868-1.041c.185-.222.4-.402.632-.54V1.5h8v5h5v7.626a2.24 2.24 0 0 1 1.5.822V4.5ZM14 5V2l3.3 3H14Zm-3.692 12.5c.062.105.133.206.213.303L11.52 19H8v-.876a2.243 2.243 0 0 0 1.82-.624h.488Zm7.518-.657a.75.75 0 0 0-1.152-.96L15.5 17.29V12H14v5.29l-1.174-1.408a.75.75 0 0 0-1.152.96l2.346 2.816a.95.95 0 0 0 1.46 0l2.346-2.815Zm-15.056-.38a.75.75 0 0 1-.096-1.056l2.346-2.815a.95.95 0 0 1 1.46 0l2.346 2.815a.75.75 0 1 1-1.152.96L6.5 14.96V20H5v-5.04l-1.174 1.408a.75.75 0 0 1-1.056.096Z"/></svg>',Ace='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m14.958 9.367-2.189 1.837a.75.75 0 0 0 .965 1.149l3.788-3.18a.747.747 0 0 0 .21-.284.75.75 0 0 0-.17-.945L13.77 4.762a.75.75 0 1 0-.964 1.15l2.331 1.955H6.22A.75.75 0 0 0 6 7.9a4 4 0 1 0 1.477 7.718l-.344-1.489A2.5 2.5 0 1 1 6.039 9.4l-.008-.032h8.927z"/></svg>',Pce='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m5.042 9.367 2.189 1.837a.75.75 0 0 1-.965 1.149l-3.788-3.18a.747.747 0 0 1-.21-.284.75.75 0 0 1 .17-.945L6.23 4.762a.75.75 0 1 1 .964 1.15L4.863 7.866h8.917A.75.75 0 0 1 14 7.9a4 4 0 1 1-1.477 7.718l.344-1.489a2.5 2.5 0 1 0 1.094-4.73l.008-.032H5.042z"/></svg>',Ice='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M7 5.75c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zm-6 0C1 4.784 1.777 4 2.75 4c.966 0 1.75.777 1.75 1.75 0 .966-.777 1.75-1.75 1.75C1.784 7.5 1 6.723 1 5.75zm6 9c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zm-6 0c0-.966.777-1.75 1.75-1.75.966 0 1.75.777 1.75 1.75 0 .966-.777 1.75-1.75 1.75-.966 0-1.75-.777-1.75-1.75z"/></svg>',Rce='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M7 5.75c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zM3.5 3v5H2V3.7H1v-1h2.5V3zM.343 17.857l2.59-3.257H2.92a.6.6 0 1 0-1.04 0H.302a2 2 0 1 1 3.995 0h-.001c-.048.405-.16.734-.333.988-.175.254-.59.692-1.244 1.312H4.3v1h-4l.043-.043zM7 14.75a.75.75 0 0 1 .75-.75h9.5a.75.75 0 1 1 0 1.5h-9.5a.75.75 0 0 1-.75-.75z"/></svg>',Oce='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m2.315 14.705 2.224-2.24a.689.689 0 0 1 .963 0 .664.664 0 0 1 0 .949L2.865 16.07a.682.682 0 0 1-.112.089.647.647 0 0 1-.852-.051L.688 14.886a.635.635 0 0 1 0-.903.647.647 0 0 1 .91 0l.717.722zm5.185.045a.75.75 0 0 1 .75-.75h9.5a.75.75 0 1 1 0 1.5h-9.5a.75.75 0 0 1-.75-.75zM2.329 5.745l2.21-2.226a.689.689 0 0 1 .963 0 .664.664 0 0 1 0 .95L2.865 7.125a.685.685 0 0 1-.496.196.644.644 0 0 1-.468-.187L.688 5.912a.635.635 0 0 1 0-.903.647.647 0 0 1 .91 0l.73.736zM7.5 5.75A.75.75 0 0 1 8.25 5h9.5a.75.75 0 1 1 0 1.5h-9.5a.75.75 0 0 1-.75-.75z"/></svg>',Nce='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M12.87 12.61a.75.75 0 0 1-.089.976l-.085.07-3.154 2.254 3.412 2.414a.75.75 0 0 1 .237.95l-.057.095a.75.75 0 0 1-.95.237l-.096-.058-4.272-3.022-.003-1.223 4.01-2.867a.75.75 0 0 1 1.047.174zm2.795-.231.095.057 4.011 2.867-.003 1.223-4.272 3.022-.095.058a.75.75 0 0 1-.88-.151l-.07-.086-.058-.095a.75.75 0 0 1 .15-.88l.087-.07 3.412-2.414-3.154-2.253-.085-.071a.75.75 0 0 1 .862-1.207zM16 0a2 2 0 0 1 2 2v9.354l-.663-.492-.837-.001V2a.5.5 0 0 0-.5-.5H2a.5.5 0 0 0-.5.5v15a.5.5 0 0 0 .5.5h3.118L7.156 19H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h14zM5.009 15l.003 1H3v-1h2.009zm2.188-2-1.471 1H5v-1h2.197zM10 11v.095L8.668 12H7v-1h3zm4-2v1H7V9h7zm0-2v1H7V7h7zm-4-2v1H5V5h5zM6 3v1H3V3h3z"/></svg>',Mce='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.627 16.5zm5.873-.196zm0-7.001V8h-13v8.5h4.341c.191.54.457 1.044.785 1.5H2a1.5 1.5 0 0 1-1.5-1.5v-13A1.5 1.5 0 0 1 2 2h4.5a1.5 1.5 0 0 1 1.06.44L9.122 4H16a1.5 1.5 0 0 1 1.5 1.5v1A1.5 1.5 0 0 1 19 8v2.531a6.027 6.027 0 0 0-1.5-1.228zM16 6.5v-1H8.5l-2-2H2v13h1V8a1.5 1.5 0 0 1 1.5-1.5H16z"/><path d="M14.5 19.5a5 5 0 1 1 0-10 5 5 0 0 1 0 10zM15 14v-2h-1v2h-2v1h2v2h1v-2h2v-1h-2z"/></svg>',Lce='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M19 9v10h-2v-8h-2V9h4zM4 8.5h5V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v11.5a1 1 0 0 1-1 1H10a1 1 0 0 1-1-1V11H4v4.5a1 1 0 0 1-1 1h-.5a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1H3a1 1 0 0 1 1 1v4.5z"/></svg>',Vce='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 8.5h5V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v11.5a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1V11H3v4.5a1 1 0 0 1-1 1h-.5a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1H2a1 1 0 0 1 1 1v4.5zm16.076 8.343V18.5h-6.252c.067-.626.27-1.22.61-1.78.338-.561 1.006-1.305 2.005-2.232.804-.749 1.297-1.257 1.479-1.523.245-.368.368-.732.368-1.092 0-.398-.107-.703-.32-.917-.214-.214-.51-.32-.886-.32-.372 0-.669.111-.889.336-.22.224-.347.596-.38 1.117l-1.778-.178c.106-.982.438-1.686.997-2.114.558-.427 1.257-.64 2.095-.64.918 0 1.64.247 2.164.742.525.495.787 1.11.787 1.847 0 .419-.075.818-.225 1.197-.15.378-.388.775-.714 1.19-.216.275-.605.67-1.168 1.187-.563.516-.92.859-1.07 1.028a3.11 3.11 0 0 0-.365.495h3.542z"/></svg>',Dce='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 8.5h5V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v11.5a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1V11H3v4.5a1 1 0 0 1-1 1h-.5a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1H2a1 1 0 0 1 1 1v4.5zm9.989 7.53 1.726-.209c.055.44.203.777.445 1.01.24.232.533.349.876.349.368 0 .678-.14.93-.42.251-.279.377-.655.377-1.13 0-.448-.12-.803-.362-1.066a1.153 1.153 0 0 0-.882-.393c-.228 0-.501.044-.819.133l.197-1.453c.482.012.85-.092 1.105-.315.253-.222.38-.517.38-.885 0-.313-.093-.563-.279-.75-.186-.185-.434-.278-.743-.278a1.07 1.07 0 0 0-.78.317c-.216.212-.347.52-.394.927l-1.644-.28c.114-.562.287-1.012.517-1.348.231-.337.553-.601.965-.794a3.24 3.24 0 0 1 1.387-.289c.876 0 1.579.28 2.108.838.436.457.653.973.653 1.549 0 .817-.446 1.468-1.339 1.955.533.114.96.37 1.28.768.319.398.478.878.478 1.441 0 .817-.298 1.513-.895 2.088-.596.576-1.339.864-2.228.864-.842 0-1.54-.243-2.094-.727-.555-.485-.876-1.118-.965-1.901z"/></svg>',Bce='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3.5 8.5h5V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v11.5a1 1 0 0 1-1 1h-.5a1 1 0 0 1-1-1V11h-5v4.5a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v4.5zm13.55 10v-1.873h-3.81v-1.561l4.037-5.91h1.498v5.904h1.156v1.567h-1.156V18.5H17.05zm0-3.44v-3.18l-2.14 3.18h2.14z"/></svg>',Fce='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3.5 8.5h5V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v11.5a1 1 0 0 1-1 1h-.5a1 1 0 0 1-1-1V11h-5v4.5a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v4.5zm9.578 7.607 1.777-.184c.05.402.201.72.45.955a1.223 1.223 0 0 0 1.81-.101c.258-.303.387-.759.387-1.368 0-.572-.128-1-.384-1.286-.256-.285-.59-.428-1-.428-.512 0-.971.226-1.377.679l-1.448-.21.915-4.843h4.716v1.67H15.56l-.28 1.58a2.697 2.697 0 0 1 1.219-.298 2.68 2.68 0 0 1 2.012.863c.55.576.825 1.323.825 2.241a3.36 3.36 0 0 1-.666 2.05c-.605.821-1.445 1.232-2.52 1.232-.86 0-1.56-.23-2.101-.692-.542-.461-.866-1.081-.971-1.86z"/></svg>',$ce='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3.5 8.5h5V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v11.5a1 1 0 0 1-1 1h-.5a1 1 0 0 1-1-1V11h-5v4.5a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v4.5zm15.595 2.973-1.726.19c-.043-.355-.153-.617-.33-.787-.178-.169-.409-.253-.692-.253-.377 0-.695.169-.956.507-.26.339-.424 1.043-.492 2.114.445-.525.997-.787 1.657-.787.745 0 1.383.284 1.914.85.531.568.797 1.3.797 2.197 0 .952-.28 1.716-.838 2.291-.559.576-1.276.864-2.152.864-.94 0-1.712-.365-2.317-1.095-.605-.73-.908-1.927-.908-3.59 0-1.705.316-2.935.946-3.688.63-.753 1.45-1.13 2.457-1.13.706 0 1.291.198 1.755.594.463.395.758.97.885 1.723zm-4.043 3.891c0 .58.133 1.028.4 1.343.266.315.57.473.914.473.33 0 .605-.13.825-.388.22-.258.33-.68.33-1.27 0-.604-.118-1.047-.355-1.329a1.115 1.115 0 0 0-.89-.422c-.342 0-.632.134-.869.403s-.355.666-.355 1.19z"/></svg>',zce='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 9h16v2H2z"/></svg>',jce='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M17 0a2 2 0 0 1 2 2v7a1 1 0 0 1 1 1v5a1 1 0 0 1-.883.993l-.118.006L19 17a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2l-.001-1.001-.116-.006A1 1 0 0 1 0 15v-5a1 1 0 0 1 .999-1L1 2a2 2 0 0 1 2-2h14zm.499 15.999h-15L2.5 17a.5.5 0 0 0 .5.5h14a.5.5 0 0 0 .5-.5l-.001-1.001zm-3.478-6.013-.014.014H14v.007l-1.525 1.525-1.46-1.46-.015.013V10h-1v5h1v-3.53l1.428 1.43.048.043.131-.129L14 11.421V15h1v-5h-.965l-.014-.014zM2 10H1v5h1v-2h2v2h1v-5H4v2H2v-2zm7 0H6v1h1v4h1v-4h1v-1zm8 0h-1v5h3v-1h-2v-4zm0-8.5H3a.5.5 0 0 0-.5.5l-.001 6.999h15L17.5 2a.5.5 0 0 0-.5-.5zM10 7v1H4V7h6zm3-2v1H4V5h9zm-3-2v1H4V3h6z"/></svg>',Hce='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm5 6c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zM2.75 16.5h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 1 0 0 1.5zM1.632 6.95 5.02 9.358a.4.4 0 0 1-.013.661l-3.39 2.207A.4.4 0 0 1 1 11.892V7.275a.4.4 0 0 1 .632-.326z"/></svg>',Uce='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm5 6c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zM2.75 16.5h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 1 0 0 1.5zm1.618-9.55L.98 9.358a.4.4 0 0 0 .013.661l3.39 2.207A.4.4 0 0 0 5 11.892V7.275a.4.4 0 0 0-.632-.326z"/></svg>',Wce='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 5.5v3h4v-3H3Zm0 4v3h4v-3H3Zm0 4v3h4v-3H3Zm5 3h4v-3H8v3Zm5 0h4v-3h-4v3Zm4-4v-3h-4v3h4Zm0-4v-3h-4v3h4Zm1.5 8A1.5 1.5 0 0 1 17 18H3a1.5 1.5 0 0 1-1.5-1.5V3c.222-.863 1.068-1.5 2-1.5h13c.932 0 1.778.637 2 1.5v13.5Zm-6.5-4v-3H8v3h4Zm0-4v-3H8v3h4Z"/></svg>',qce=`<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m12.5 0 5 4.5v15.003h-16V0h11zM3 1.5v3.25l-1.497 1-.003 8 1.5 1v3.254L7.685 18l-.001 1.504H17.5V8.002L16 9.428l-.004-4.22-4.222-3.692L3 1.5z"/><path d="M4.06 6.64a.75.75 0 0 1 .958 1.15l-.085.07L2.29 9.75l2.646 1.89c.302.216.4.62.232.951l-.058.095a.75.75 0 0 1-.951.232l-.095-.058-3.5-2.5V9.14l3.496-2.5zm4.194 6.22a.75.75 0 0 1-.958-1.149l.085-.07 2.643-1.89-2.646-1.89a.75.75 0 0 1-.232-.952l.058-.095a.75.75 0 0 1 .95-.232l.096.058 3.5 2.5v1.22l-3.496 2.5zm7.644-.836 2.122 2.122-5.825 5.809-2.125-.005.003-2.116zm2.539-1.847 1.414 1.414a.5.5 0 0 1 0 .707l-1.06 1.06-2.122-2.12 1.061-1.061a.5.5 0 0 1 .707 0z"/></svg>
`,Gce='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M5.2 7h9.2c.6 0 1 .4 1 1v9.9c0 .5-.4 1-1 1H5.2a1 1 0 0 1-1-1V8c0-.6.4-1 1-1Zm1 1.5c-.3 0-.5.2-.5.5v8c0 .3.2.5.5.5h.5c.2 0 .5-.2.5-.5V9c0-.3-.3-.5-.5-.5h-.5Zm3.2 0c-.2 0-.5.2-.5.5v8c0 .3.3.5.5.5h.5c.3 0 .5-.2.5-.5V9c0-.3-.2-.5-.5-.5h-.5Zm3.5 0c-.2 0-.5.2-.5.5v8c0 .3.3.5.5.5h.5c.3 0 .5-.2.5-.5V9c0-.3-.2-.5-.5-.5h-.5Zm-1.4-7.1H8.3L6.5 3.6H3.8c-.5 0-.7.3-.7.8s.2.7.7.7h12c.6 0 .9-.2.9-.7 0-.5-.3-.8-1-.8h-2.4l-1.8-2.2Z"/></svg>',Kce='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path clip-rule="evenodd" d="M5.68 3.417a.238.238 0 0 0-.24.236v12.66l3.793-3.102a1.215 1.215 0 0 1 1.534 0l3.793 3.103V3.654a.238.238 0 0 0-.24-.237H5.68ZM4 3.653C4 2.74 4.752 2 5.68 2h8.64c.928 0 1.68.74 1.68 1.653v13.164c0 1-1.185 1.547-1.967.908L10 14.426l-4.033 3.299c-.782.64-1.967.092-1.967-.908V3.653Z"/></svg>',Yce='<svg viewBox="0 0 14 16" xmlns="http://www.w3.org/2000/svg"><path class="ck-icon__fill" d="M2 14.436V2a1 1 0 0 1 1-1h8a1 1 0 0 1 1 1v12.436a.5.5 0 0 1-.819.385l-3.862-3.2a.5.5 0 0 0-.638 0l-3.862 3.2A.5.5 0 0 1 2 14.436Z"/></svg>',Zce=`<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path clip-rule="evenodd" d="M8.5 8.25a1.25 1.25 0 1 1-2.499.001A1.25 1.25 0 0 1 8.5 8.25Z"/><path clip-rule="evenodd" d="M14 8.25a1.25 1.25 0 1 1-2.499.001A1.25 1.25 0 0 1 14 8.25Z"/><path clip-rule="evenodd" d="M7.127 12.088a.75.75 0 1 0-1.254.824C6.88 14.444 8.423 15.25 10 15.25c1.578 0 3.12-.805 4.127-2.338a.75.75 0 0 0-1.254-.824C12.13 13.221 11.048 13.75 10 13.75c-1.047 0-2.13-.529-2.873-1.662Z"/><path d="M10 19a9 9 0 1 0 0-18 9 9 0 0 0 0 18Zm0-1.5a7.5 7.5 0 1 1 0-15 7.5 7.5 0 0 1 0 15Z"/></svg>
`;const ke={bold:Cce,cancel:Dle,caption:Ble,check:Fle,cog:$le,colorPalette:zle,eraser:jle,history:Hle,image:Yle,imageUpload:Zle,imageAssetManager:Xle,imageUrl:Jle,lowVision:Ule,textAlternative:Wle,loupe:qle,previousArrow:Gle,nextArrow:Kle,importExport:Sce,paragraph:xce,plus:Tce,text:kce,alignBottom:Qle,alignMiddle:ece,alignTop:tce,alignLeft:nce,alignCenter:ice,alignRight:sce,alignJustify:rce,objectLeft:dce,objectCenter:ace,objectRight:hce,objectFullWidth:cce,objectInline:uce,objectBlockLeft:oce,objectBlockRight:lce,objectSizeCustom:mce,objectSizeFull:fce,objectSizeLarge:gce,objectSizeSmall:pce,objectSizeMedium:bce,pencil:wce,pilcrow:vce,quote:yce,threeVerticalDots:_ce,dragIndicator:Ece,redo:Ace,undo:Pce,bulletedList:Ice,numberedList:Rce,todoList:Oce,codeBlock:Nce,browseFiles:Mce,heading1:Lce,heading2:Vce,heading3:Dce,heading4:Bce,heading5:Fce,heading6:$ce,horizontalLine:zce,html:jce,indent:Hce,outdent:Uce,table:Wce,source:qce,remove:Gce,bookmark:Kce,bookmarkInline:Yce,emoji:Zce};/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class Xce extends Vt(){constructor(){super();b(this,"total");b(this,"_reader");b(this,"_data");const e=new window.FileReader;this._reader=e,this._data=void 0,this.set("loaded",0),e.onprogress=n=>{this.loaded=n.loaded}}get error(){return this._reader.error}get data(){return this._data}read(e){const n=this._reader;return this.total=e.size,new Promise((s,r)=>{n.onload=()=>{const o=n.result;this._data=o,s(o)},n.onerror=()=>{r("error")},n.onabort=()=>{r("aborted")},this._reader.readAsDataURL(e)})}abort(){this._reader.abort()}}class yu extends ie{constructor(){super(...arguments);b(this,"loaders",new oi);b(this,"_loadersMap",new Map);b(this,"_pendingAction",null)}static get pluginName(){return"FileRepository"}static get isOfficialPlugin(){return!0}static get requires(){return[Jp]}init(){this.loaders.on("change",()=>this._updatePendingAction()),this.set("uploaded",0),this.set("uploadTotal",null),this.bind("uploadedPercent").to(this,"uploaded",this,"uploadTotal",(e,n)=>n?e/n*100:0)}getLoader(e){return this._loadersMap.get(e)||null}createLoader(e){if(!this.createUploadAdapter)return Tt("filerepository-no-upload-adapter"),null;const n=new OP(Promise.resolve(e),this.createUploadAdapter);return this.loaders.add(n),this._loadersMap.set(e,n),e instanceof Promise&&n.file.then(s=>{this._loadersMap.set(s,n)}).catch(()=>{}),n.on("change:uploaded",()=>{let s=0;for(const r of this.loaders)s+=r.uploaded;this.uploaded=s}),n.on("change:uploadTotal",()=>{let s=0;for(const r of this.loaders)r.uploadTotal&&(s+=r.uploadTotal);this.uploadTotal=s}),n}destroyLoader(e){const n=e instanceof OP?e:this.getLoader(e);n._destroy(),this.loaders.remove(n),this._loadersMap.forEach((s,r)=>{s===n&&this._loadersMap.delete(r)})}_updatePendingAction(){const e=this.editor.plugins.get(Jp);if(this.loaders.length){if(!this._pendingAction){const n=this.editor.t,s=r=>`${n("Upload in progress")} ${parseInt(r)}%.`;this._pendingAction=e.add(s(this.uploadedPercent)),this._pendingAction.bind("message").to(this,"uploadedPercent",s)}}else e.remove(this._pendingAction),this._pendingAction=null}}class OP extends Vt(){constructor(e,n){super();b(this,"id");b(this,"_filePromiseWrapper");b(this,"_adapter");b(this,"_reader");this.id=yi(),this._filePromiseWrapper=this._createFilePromiseWrapper(e),this._adapter=n(this),this._reader=new Xce,this.set("status","idle"),this.set("uploaded",0),this.set("uploadTotal",null),this.bind("uploadedPercent").to(this,"uploaded",this,"uploadTotal",(s,r)=>r?s/r*100:0),this.set("uploadResponse",null)}get file(){return this._filePromiseWrapper?this._filePromiseWrapper.promise.then(e=>this._filePromiseWrapper?e:null):Promise.resolve(null)}get data(){return this._reader.data}read(){if(this.status!="idle")throw new B("filerepository-read-wrong-status",this);return this.status="reading",this.file.then(e=>this._reader.read(e)).then(e=>{if(this.status!=="reading")throw this.status;return this.status="idle",e}).catch(e=>{throw e==="aborted"?(this.status="aborted","aborted"):(this.status="error",this._reader.error?this._reader.error:e)})}upload(){if(this.status!="idle")throw new B("filerepository-upload-wrong-status",this);return this.status="uploading",this.file.then(()=>this._adapter.upload()).then(e=>(this.uploadResponse=e,this.status="idle",e)).catch(e=>{throw this.status==="aborted"?"aborted":(this.status="error",e)})}abort(){const e=this.status;this.status="aborted",this._filePromiseWrapper.isFulfilled?e=="reading"?this._reader.abort():e=="uploading"&&this._adapter.abort&&this._adapter.abort():(this._filePromiseWrapper.promise.catch(()=>{}),this._filePromiseWrapper.rejecter("aborted")),this._destroy()}_destroy(){this._filePromiseWrapper=void 0,this._reader=void 0,this._adapter=void 0,this.uploadResponse=void 0}_createFilePromiseWrapper(e){const n={};return n.promise=new Promise((s,r)=>{n.rejecter=r,n.isFulfilled=!1,e.then(o=>{n.isFulfilled=!0,s(o)}).catch(o=>{n.isFulfilled=!0,r(o)})}),n}}var T1,NP;function G4(){return NP||(NP=1,T1={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}),T1}var Jce=G4();const MP=L_(Jce);var LP={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};function VP(i){var t,e=[],n=1,s;if(typeof i=="string")if(MP[i])e=MP[i].slice(),s="rgb";else if(i==="transparent")n=0,s="rgb",e=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(i)){var r=i.slice(1),o=r.length,a=o<=4;n=1,a?(e=[parseInt(r[0]+r[0],16),parseInt(r[1]+r[1],16),parseInt(r[2]+r[2],16)],o===4&&(n=parseInt(r[3]+r[3],16)/255)):(e=[parseInt(r[0]+r[1],16),parseInt(r[2]+r[3],16),parseInt(r[4]+r[5],16)],o===8&&(n=parseInt(r[6]+r[7],16)/255)),e[0]||(e[0]=0),e[1]||(e[1]=0),e[2]||(e[2]=0),s="rgb"}else if(t=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(i)){var l=t[1],c=l==="rgb",r=l.replace(/a$/,"");s=r;var o=r==="cmyk"?4:r==="gray"?1:3;e=t[2].trim().split(/\s*[,\/]\s*|\s+/).map(function(m,p){if(/%$/.test(m))return p===o?parseFloat(m)/100:r==="rgb"?parseFloat(m)*255/100:parseFloat(m);if(r[p]==="h"){if(/deg$/.test(m))return parseFloat(m);if(LP[m]!==void 0)return LP[m]}return parseFloat(m)}),l===r&&e.push(1),n=c||e[o]===void 0?1:e[o],e=e.slice(0,o)}else i.length>10&&/[0-9](?:\s|\/)/.test(i)&&(e=i.match(/([0-9]+)/g).map(function(h){return parseFloat(h)}),s=i.match(/([a-z])/ig).join("").toLowerCase());else isNaN(i)?Array.isArray(i)||i.length?(e=[i[0],i[1],i[2]],s="rgb",n=i.length===4?i[3]:1):i instanceof Object&&(i.r!=null||i.red!=null||i.R!=null?(s="rgb",e=[i.r||i.red||i.R||0,i.g||i.green||i.G||0,i.b||i.blue||i.B||0]):(s="hsl",e=[i.h||i.hue||i.H||0,i.s||i.saturation||i.S||0,i.l||i.lightness||i.L||i.b||i.brightness]),n=i.a||i.alpha||i.opacity||1,i.opacity!=null&&(n/=100)):(s="rgb",e=[i>>>16,(i&65280)>>>8,i&255]);return{space:s,values:e,alpha:n}}var k1,DP;function K4(){if(DP)return k1;DP=1;const i=G4(),t={};for(const s of Object.keys(i))t[i[s]]=s;const e={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};k1=e;for(const s of Object.keys(e)){if(!("channels"in e[s]))throw new Error("missing channels property: "+s);if(!("labels"in e[s]))throw new Error("missing channel labels property: "+s);if(e[s].labels.length!==e[s].channels)throw new Error("channel and label counts mismatch: "+s);const{channels:r,labels:o}=e[s];delete e[s].channels,delete e[s].labels,Object.defineProperty(e[s],"channels",{value:r}),Object.defineProperty(e[s],"labels",{value:o})}e.rgb.hsl=function(s){const r=s[0]/255,o=s[1]/255,a=s[2]/255,l=Math.min(r,o,a),c=Math.max(r,o,a),h=c-l;let f,m;c===l?f=0:r===c?f=(o-a)/h:o===c?f=2+(a-r)/h:a===c&&(f=4+(r-o)/h),f=Math.min(f*60,360),f<0&&(f+=360);const p=(l+c)/2;return c===l?m=0:p<=.5?m=h/(c+l):m=h/(2-c-l),[f,m*100,p*100]},e.rgb.hsv=function(s){let r,o,a,l,c;const h=s[0]/255,f=s[1]/255,m=s[2]/255,p=Math.max(h,f,m),v=p-Math.min(h,f,m),_=function(E){return(p-E)/6/v+1/2};return v===0?(l=0,c=0):(c=v/p,r=_(h),o=_(f),a=_(m),h===p?l=a-o:f===p?l=1/3+r-a:m===p&&(l=2/3+o-r),l<0?l+=1:l>1&&(l-=1)),[l*360,c*100,p*100]},e.rgb.hwb=function(s){const r=s[0],o=s[1];let a=s[2];const l=e.rgb.hsl(s)[0],c=1/255*Math.min(r,Math.min(o,a));return a=1-1/255*Math.max(r,Math.max(o,a)),[l,c*100,a*100]},e.rgb.cmyk=function(s){const r=s[0]/255,o=s[1]/255,a=s[2]/255,l=Math.min(1-r,1-o,1-a),c=(1-r-l)/(1-l)||0,h=(1-o-l)/(1-l)||0,f=(1-a-l)/(1-l)||0;return[c*100,h*100,f*100,l*100]};function n(s,r){return(s[0]-r[0])**2+(s[1]-r[1])**2+(s[2]-r[2])**2}return e.rgb.keyword=function(s){const r=t[s];if(r)return r;let o=1/0,a;for(const l of Object.keys(i)){const c=i[l],h=n(s,c);h<o&&(o=h,a=l)}return a},e.keyword.rgb=function(s){return i[s]},e.rgb.xyz=function(s){let r=s[0]/255,o=s[1]/255,a=s[2]/255;r=r>.04045?((r+.055)/1.055)**2.4:r/12.92,o=o>.04045?((o+.055)/1.055)**2.4:o/12.92,a=a>.04045?((a+.055)/1.055)**2.4:a/12.92;const l=r*.4124+o*.3576+a*.1805,c=r*.2126+o*.7152+a*.0722,h=r*.0193+o*.1192+a*.9505;return[l*100,c*100,h*100]},e.rgb.lab=function(s){const r=e.rgb.xyz(s);let o=r[0],a=r[1],l=r[2];o/=95.047,a/=100,l/=108.883,o=o>.008856?o**(1/3):7.787*o+16/116,a=a>.008856?a**(1/3):7.787*a+16/116,l=l>.008856?l**(1/3):7.787*l+16/116;const c=116*a-16,h=500*(o-a),f=200*(a-l);return[c,h,f]},e.hsl.rgb=function(s){const r=s[0]/360,o=s[1]/100,a=s[2]/100;let l,c,h;if(o===0)return h=a*255,[h,h,h];a<.5?l=a*(1+o):l=a+o-a*o;const f=2*a-l,m=[0,0,0];for(let p=0;p<3;p++)c=r+1/3*-(p-1),c<0&&c++,c>1&&c--,6*c<1?h=f+(l-f)*6*c:2*c<1?h=l:3*c<2?h=f+(l-f)*(2/3-c)*6:h=f,m[p]=h*255;return m},e.hsl.hsv=function(s){const r=s[0];let o=s[1]/100,a=s[2]/100,l=o;const c=Math.max(a,.01);a*=2,o*=a<=1?a:2-a,l*=c<=1?c:2-c;const h=(a+o)/2,f=a===0?2*l/(c+l):2*o/(a+o);return[r,f*100,h*100]},e.hsv.rgb=function(s){const r=s[0]/60,o=s[1]/100;let a=s[2]/100;const l=Math.floor(r)%6,c=r-Math.floor(r),h=255*a*(1-o),f=255*a*(1-o*c),m=255*a*(1-o*(1-c));switch(a*=255,l){case 0:return[a,m,h];case 1:return[f,a,h];case 2:return[h,a,m];case 3:return[h,f,a];case 4:return[m,h,a];case 5:return[a,h,f]}},e.hsv.hsl=function(s){const r=s[0],o=s[1]/100,a=s[2]/100,l=Math.max(a,.01);let c,h;h=(2-o)*a;const f=(2-o)*l;return c=o*l,c/=f<=1?f:2-f,c=c||0,h/=2,[r,c*100,h*100]},e.hwb.rgb=function(s){const r=s[0]/360;let o=s[1]/100,a=s[2]/100;const l=o+a;let c;l>1&&(o/=l,a/=l);const h=Math.floor(6*r),f=1-a;c=6*r-h,h&1&&(c=1-c);const m=o+c*(f-o);let p,v,_;switch(h){default:case 6:case 0:p=f,v=m,_=o;break;case 1:p=m,v=f,_=o;break;case 2:p=o,v=f,_=m;break;case 3:p=o,v=m,_=f;break;case 4:p=m,v=o,_=f;break;case 5:p=f,v=o,_=m;break}return[p*255,v*255,_*255]},e.cmyk.rgb=function(s){const r=s[0]/100,o=s[1]/100,a=s[2]/100,l=s[3]/100,c=1-Math.min(1,r*(1-l)+l),h=1-Math.min(1,o*(1-l)+l),f=1-Math.min(1,a*(1-l)+l);return[c*255,h*255,f*255]},e.xyz.rgb=function(s){const r=s[0]/100,o=s[1]/100,a=s[2]/100;let l,c,h;return l=r*3.2406+o*-1.5372+a*-.4986,c=r*-.9689+o*1.8758+a*.0415,h=r*.0557+o*-.204+a*1.057,l=l>.0031308?1.055*l**(1/2.4)-.055:l*12.92,c=c>.0031308?1.055*c**(1/2.4)-.055:c*12.92,h=h>.0031308?1.055*h**(1/2.4)-.055:h*12.92,l=Math.min(Math.max(0,l),1),c=Math.min(Math.max(0,c),1),h=Math.min(Math.max(0,h),1),[l*255,c*255,h*255]},e.xyz.lab=function(s){let r=s[0],o=s[1],a=s[2];r/=95.047,o/=100,a/=108.883,r=r>.008856?r**(1/3):7.787*r+16/116,o=o>.008856?o**(1/3):7.787*o+16/116,a=a>.008856?a**(1/3):7.787*a+16/116;const l=116*o-16,c=500*(r-o),h=200*(o-a);return[l,c,h]},e.lab.xyz=function(s){const r=s[0],o=s[1],a=s[2];let l,c,h;c=(r+16)/116,l=o/500+c,h=c-a/200;const f=c**3,m=l**3,p=h**3;return c=f>.008856?f:(c-16/116)/7.787,l=m>.008856?m:(l-16/116)/7.787,h=p>.008856?p:(h-16/116)/7.787,l*=95.047,c*=100,h*=108.883,[l,c,h]},e.lab.lch=function(s){const r=s[0],o=s[1],a=s[2];let l;l=Math.atan2(a,o)*360/2/Math.PI,l<0&&(l+=360);const h=Math.sqrt(o*o+a*a);return[r,h,l]},e.lch.lab=function(s){const r=s[0],o=s[1],l=s[2]/360*2*Math.PI,c=o*Math.cos(l),h=o*Math.sin(l);return[r,c,h]},e.rgb.ansi16=function(s,r=null){const[o,a,l]=s;let c=r===null?e.rgb.hsv(s)[2]:r;if(c=Math.round(c/50),c===0)return 30;let h=30+(Math.round(l/255)<<2|Math.round(a/255)<<1|Math.round(o/255));return c===2&&(h+=60),h},e.hsv.ansi16=function(s){return e.rgb.ansi16(e.hsv.rgb(s),s[2])},e.rgb.ansi256=function(s){const r=s[0],o=s[1],a=s[2];return r===o&&o===a?r<8?16:r>248?231:Math.round((r-8)/247*24)+232:16+36*Math.round(r/255*5)+6*Math.round(o/255*5)+Math.round(a/255*5)},e.ansi16.rgb=function(s){let r=s%10;if(r===0||r===7)return s>50&&(r+=3.5),r=r/10.5*255,[r,r,r];const o=(~~(s>50)+1)*.5,a=(r&1)*o*255,l=(r>>1&1)*o*255,c=(r>>2&1)*o*255;return[a,l,c]},e.ansi256.rgb=function(s){if(s>=232){const c=(s-232)*10+8;return[c,c,c]}s-=16;let r;const o=Math.floor(s/36)/5*255,a=Math.floor((r=s%36)/6)/5*255,l=r%6/5*255;return[o,a,l]},e.rgb.hex=function(s){const o=(((Math.round(s[0])&255)<<16)+((Math.round(s[1])&255)<<8)+(Math.round(s[2])&255)).toString(16).toUpperCase();return"000000".substring(o.length)+o},e.hex.rgb=function(s){const r=s.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!r)return[0,0,0];let o=r[0];r[0].length===3&&(o=o.split("").map(f=>f+f).join(""));const a=parseInt(o,16),l=a>>16&255,c=a>>8&255,h=a&255;return[l,c,h]},e.rgb.hcg=function(s){const r=s[0]/255,o=s[1]/255,a=s[2]/255,l=Math.max(Math.max(r,o),a),c=Math.min(Math.min(r,o),a),h=l-c;let f,m;return h<1?f=c/(1-h):f=0,h<=0?m=0:l===r?m=(o-a)/h%6:l===o?m=2+(a-r)/h:m=4+(r-o)/h,m/=6,m%=1,[m*360,h*100,f*100]},e.hsl.hcg=function(s){const r=s[1]/100,o=s[2]/100,a=o<.5?2*r*o:2*r*(1-o);let l=0;return a<1&&(l=(o-.5*a)/(1-a)),[s[0],a*100,l*100]},e.hsv.hcg=function(s){const r=s[1]/100,o=s[2]/100,a=r*o;let l=0;return a<1&&(l=(o-a)/(1-a)),[s[0],a*100,l*100]},e.hcg.rgb=function(s){const r=s[0]/360,o=s[1]/100,a=s[2]/100;if(o===0)return[a*255,a*255,a*255];const l=[0,0,0],c=r%1*6,h=c%1,f=1-h;let m=0;switch(Math.floor(c)){case 0:l[0]=1,l[1]=h,l[2]=0;break;case 1:l[0]=f,l[1]=1,l[2]=0;break;case 2:l[0]=0,l[1]=1,l[2]=h;break;case 3:l[0]=0,l[1]=f,l[2]=1;break;case 4:l[0]=h,l[1]=0,l[2]=1;break;default:l[0]=1,l[1]=0,l[2]=f}return m=(1-o)*a,[(o*l[0]+m)*255,(o*l[1]+m)*255,(o*l[2]+m)*255]},e.hcg.hsv=function(s){const r=s[1]/100,o=s[2]/100,a=r+o*(1-r);let l=0;return a>0&&(l=r/a),[s[0],l*100,a*100]},e.hcg.hsl=function(s){const r=s[1]/100,a=s[2]/100*(1-r)+.5*r;let l=0;return a>0&&a<.5?l=r/(2*a):a>=.5&&a<1&&(l=r/(2*(1-a))),[s[0],l*100,a*100]},e.hcg.hwb=function(s){const r=s[1]/100,o=s[2]/100,a=r+o*(1-r);return[s[0],(a-r)*100,(1-a)*100]},e.hwb.hcg=function(s){const r=s[1]/100,a=1-s[2]/100,l=a-r;let c=0;return l<1&&(c=(a-l)/(1-l)),[s[0],l*100,c*100]},e.apple.rgb=function(s){return[s[0]/65535*255,s[1]/65535*255,s[2]/65535*255]},e.rgb.apple=function(s){return[s[0]/255*65535,s[1]/255*65535,s[2]/255*65535]},e.gray.rgb=function(s){return[s[0]/100*255,s[0]/100*255,s[0]/100*255]},e.gray.hsl=function(s){return[0,0,s[0]]},e.gray.hsv=e.gray.hsl,e.gray.hwb=function(s){return[0,100,s[0]]},e.gray.cmyk=function(s){return[0,0,0,s[0]]},e.gray.lab=function(s){return[s[0],0,0]},e.gray.hex=function(s){const r=Math.round(s[0]/100*255)&255,a=((r<<16)+(r<<8)+r).toString(16).toUpperCase();return"000000".substring(a.length)+a},e.rgb.gray=function(s){return[(s[0]+s[1]+s[2])/3/255*100]},k1}var S1,BP;function Qce(){if(BP)return S1;BP=1;const i=K4();function t(){const r={},o=Object.keys(i);for(let a=o.length,l=0;l<a;l++)r[o[l]]={distance:-1,parent:null};return r}function e(r){const o=t(),a=[r];for(o[r].distance=0;a.length;){const l=a.pop(),c=Object.keys(i[l]);for(let h=c.length,f=0;f<h;f++){const m=c[f],p=o[m];p.distance===-1&&(p.distance=o[l].distance+1,p.parent=l,a.unshift(m))}}return o}function n(r,o){return function(a){return o(r(a))}}function s(r,o){const a=[o[r].parent,r];let l=i[o[r].parent][r],c=o[r].parent;for(;o[c].parent;)a.unshift(o[c].parent),l=n(i[o[c].parent][c],l),c=o[c].parent;return l.conversion=a,l}return S1=function(r){const o=e(r),a={},l=Object.keys(o);for(let c=l.length,h=0;h<c;h++){const f=l[h];o[f].parent!==null&&(a[f]=s(f,o))}return a},S1}var A1,FP;function eue(){if(FP)return A1;FP=1;const i=K4(),t=Qce(),e={},n=Object.keys(i);function s(o){const a=function(...l){const c=l[0];return c==null?c:(c.length>1&&(l=c),o(l))};return"conversion"in o&&(a.conversion=o.conversion),a}function r(o){const a=function(...l){const c=l[0];if(c==null)return c;c.length>1&&(l=c);const h=o(l);if(typeof h=="object")for(let f=h.length,m=0;m<f;m++)h[m]=Math.round(h[m]);return h};return"conversion"in o&&(a.conversion=o.conversion),a}return n.forEach(o=>{e[o]={},Object.defineProperty(e[o],"channels",{value:i[o].channels}),Object.defineProperty(e[o],"labels",{value:i[o].labels});const a=t(o);Object.keys(a).forEach(c=>{const h=a[c];e[o][c]=r(h),e[o][c].raw=s(h)})}),A1=e,A1}var Y4=eue();const tue=L_(Y4),Z4=Z6({__proto__:null,default:tue},[Y4]),uf=(i,t=0,e=1)=>i>e?e:i<t?t:i,ii=(i,t=0,e=Math.pow(10,t))=>Math.round(e*i)/e,nue=i=>aue(o_(i)),o_=i=>(i[0]==="#"&&(i=i.substring(1)),i.length<6?{r:parseInt(i[0]+i[0],16),g:parseInt(i[1]+i[1],16),b:parseInt(i[2]+i[2],16),a:i.length===4?ii(parseInt(i[3]+i[3],16)/255,2):1}:{r:parseInt(i.substring(0,2),16),g:parseInt(i.substring(2,4),16),b:parseInt(i.substring(4,6),16),a:i.length===8?ii(parseInt(i.substring(6,8),16)/255,2):1}),iue=i=>oue(rue(i)),sue=({h:i,s:t,v:e,a:n})=>{const s=(200-t)*e/100;return{h:ii(i),s:ii(s>0&&s<200?t*e/100/(s<=100?s:200-s)*100:0),l:ii(s/2),a:ii(n,2)}},a_=i=>{const{h:t,s:e,l:n}=sue(i);return`hsl(${t}, ${e}%, ${n}%)`},rue=({h:i,s:t,v:e,a:n})=>{i=i/360*6,t=t/100,e=e/100;const s=Math.floor(i),r=e*(1-t),o=e*(1-(i-s)*t),a=e*(1-(1-i+s)*t),l=s%6;return{r:ii([e,o,r,r,a,e][l]*255),g:ii([a,e,e,o,r,r][l]*255),b:ii([r,r,a,e,e,o][l]*255),a:ii(n,2)}},kg=i=>{const t=i.toString(16);return t.length<2?"0"+t:t},oue=({r:i,g:t,b:e,a:n})=>{const s=n<1?kg(ii(n*255)):"";return"#"+kg(i)+kg(t)+kg(e)+s},aue=({r:i,g:t,b:e,a:n})=>{const s=Math.max(i,t,e),r=s-Math.min(i,t,e),o=r?s===i?(t-e)/r:s===t?2+(e-i)/r:4+(i-t)/r:0;return{h:ii(60*(o<0?o+6:o)),s:ii(s?r/s*100:0),v:ii(s/255*100),a:n}},X4=(i,t)=>{if(i===t)return!0;for(const e in i)if(i[e]!==t[e])return!1;return!0},lue=(i,t)=>i.toLowerCase()===t.toLowerCase()?!0:X4(o_(i),o_(t)),$P={},J4=i=>{let t=$P[i];return t||(t=document.createElement("template"),t.innerHTML=i,$P[i]=t),t},mC=(i,t,e)=>{i.dispatchEvent(new CustomEvent(t,{bubbles:!0,detail:e}))};let Tu=!1;const l_=i=>"touches"in i,cue=i=>Tu&&!l_(i)?!1:(Tu||(Tu=l_(i)),!0),zP=(i,t)=>{const e=l_(t)?t.touches[0]:t,n=i.el.getBoundingClientRect();mC(i.el,"move",i.getMove({x:uf((e.pageX-(n.left+window.pageXOffset))/n.width),y:uf((e.pageY-(n.top+window.pageYOffset))/n.height)}))},uue=(i,t)=>{const e=t.keyCode;e>40||i.xy&&e<37||e<33||(t.preventDefault(),mC(i.el,"move",i.getMove({x:e===39?.01:e===37?-.01:e===34?.05:e===33?-.05:e===35?1:e===36?-1:0,y:e===40?.01:e===38?-.01:0},!0)))};class Q4{constructor(t,e,n,s){const r=J4(`<div role="slider" tabindex="0" part="${e}" ${n}><div part="${e}-pointer"></div></div>`);t.appendChild(r.content.cloneNode(!0));const o=t.querySelector(`[part=${e}]`);o.addEventListener("mousedown",this),o.addEventListener("touchstart",this),o.addEventListener("keydown",this),this.el=o,this.xy=s,this.nodes=[o.firstChild,o]}set dragging(t){const e=t?document.addEventListener:document.removeEventListener;e(Tu?"touchmove":"mousemove",this),e(Tu?"touchend":"mouseup",this)}handleEvent(t){switch(t.type){case"mousedown":case"touchstart":if(t.preventDefault(),!cue(t)||!Tu&&t.button!=0)return;this.el.focus(),zP(this,t),this.dragging=!0;break;case"mousemove":case"touchmove":t.preventDefault(),zP(this,t);break;case"mouseup":case"touchend":this.dragging=!1;break;case"keydown":uue(this,t);break}}style(t){t.forEach((e,n)=>{for(const s in e)this.nodes[n].style.setProperty(s,e[s])})}}class due extends Q4{constructor(t){super(t,"hue",'aria-label="Hue" aria-valuemin="0" aria-valuemax="360"',!1)}update({h:t}){this.h=t,this.style([{left:`${t/360*100}%`,color:a_({h:t,s:100,v:100,a:1})}]),this.el.setAttribute("aria-valuenow",`${ii(t)}`)}getMove(t,e){return{h:e?uf(this.h+t.x*360,0,360):360*t.x}}}class hue extends Q4{constructor(t){super(t,"saturation",'aria-label="Color"',!0)}update(t){this.hsva=t,this.style([{top:`${100-t.v}%`,left:`${t.s}%`,color:a_(t)},{"background-color":a_({h:t.h,s:100,v:100,a:1})}]),this.el.setAttribute("aria-valuetext",`Saturation ${ii(t.s)}%, Brightness ${ii(t.v)}%`)}getMove(t,e){return{s:e?uf(this.hsva.s+t.x*100,0,100):t.x*100,v:e?uf(this.hsva.v-t.y*100,0,100):Math.round(100-t.y*100)}}}const fue=':host{display:flex;flex-direction:column;position:relative;width:200px;height:200px;user-select:none;-webkit-user-select:none;cursor:default}:host([hidden]){display:none!important}[role=slider]{position:relative;touch-action:none;user-select:none;-webkit-user-select:none;outline:0}[role=slider]:last-child{border-radius:0 0 8px 8px}[part$=pointer]{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;display:flex;place-content:center center;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}[part$=pointer]::after{content:"";width:100%;height:100%;border-radius:inherit;background-color:currentColor}[role=slider]:focus [part$=pointer]{transform:translate(-50%,-50%) scale(1.1)}',mue="[part=hue]{flex:0 0 24px;background:linear-gradient(to right,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red 100%)}[part=hue-pointer]{top:50%;z-index:2}",gue="[part=saturation]{flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(to top,#000,transparent),linear-gradient(to right,#fff,rgba(255,255,255,0));box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}[part=saturation-pointer]{z-index:3}",Sg=Symbol("same"),P1=Symbol("color"),jP=Symbol("hsva"),I1=Symbol("update"),HP=Symbol("parts"),UP=Symbol("css"),WP=Symbol("sliders");class pue extends HTMLElement{static get observedAttributes(){return["color"]}get[UP](){return[fue,mue,gue]}get[WP](){return[hue,due]}get color(){return this[P1]}set color(t){if(!this[Sg](t)){const e=this.colorModel.toHsva(t);this[I1](e),this[P1]=t}}constructor(){super();const t=J4(`<style>${this[UP].join("")}</style>`),e=this.attachShadow({mode:"open"});e.appendChild(t.content.cloneNode(!0)),e.addEventListener("move",this),this[HP]=this[WP].map(n=>new n(e))}connectedCallback(){if(this.hasOwnProperty("color")){const t=this.color;delete this.color,this.color=t}else this.color||(this.color=this.colorModel.defaultColor)}attributeChangedCallback(t,e,n){const s=this.colorModel.fromAttr(n);this[Sg](s)||(this.color=s)}handleEvent(t){const e=this[jP],n={...e,...t.detail};this[I1](n);let s;!X4(n,e)&&!this[Sg](s=this.colorModel.fromHsva(n))&&(this[P1]=s,mC(this,"color-changed",{value:s}))}[Sg](t){return this.color&&this.colorModel.equal(t,this.color)}[I1](t){this[jP]=t,this[HP].forEach(e=>e.update(t))}}const bue={defaultColor:"#000",toHsva:nue,fromHsva:({h:i,s:t,v:e})=>iue({h:i,s:t,v:e,a:1}),equal:lue,fromAttr:i=>i};class wue extends pue{get colorModel(){return bue}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class ai extends oi{constructor(e=[]){super(e,{idProperty:"viewUid"});b(this,"_parentElement");this.on("add",(n,s,r)=>{this._renderViewIntoCollectionParent(s,r)}),this.on("remove",(n,s)=>{s.element&&this._parentElement&&s.element.remove()}),this._parentElement=null}destroy(){this.map(e=>e.destroy())}setParent(e){this._parentElement=e;for(const n of this)this._renderViewIntoCollectionParent(n)}delegate(...e){if(!e.length||!vue(e))throw new B("ui-viewcollection-delegate-wrong-events",this);return{to:n=>{for(const s of this)for(const r of e)s.delegate(r).to(n);this.on("add",(s,r)=>{for(const o of e)r.delegate(o).to(n)}),this.on("remove",(s,r)=>{for(const o of e)r.stopDelegating(o,n)})}}}_renderViewIntoCollectionParent(e,n){e.isRendered||e.render(),e.element&&this._parentElement&&this._parentElement.insertBefore(e.element,this._parentElement.children[n])}remove(e){return super.remove(e)}}function vue(i){return i.every(t=>typeof t=="string")}const yue="http://www.w3.org/1999/xhtml";class Zi extends Ft(){constructor(e){super();b(this,"ns");b(this,"tag");b(this,"text");b(this,"attributes");b(this,"children");b(this,"eventListeners");b(this,"_isRendered");b(this,"_revertData");Object.assign(this,GP(qP(e))),this._isRendered=!1,this._revertData=null}render(){const e=this._renderNode({intoFragment:!0});return this._isRendered=!0,e}apply(e){return this._revertData=ZP(),this._renderNode({node:e,intoFragment:!1,isApplying:!0,revertData:this._revertData}),e}revert(e){if(!this._revertData)throw new B("ui-template-revert-not-applied",[this,e]);this._revertTemplateFromNode(e,this._revertData)}*getViews(){function*e(n){if(n.children)for(const s of n.children)Qp(s)?yield s:gC(s)&&(yield*e(s))}yield*e(this)}static bind(e,n){return{to(s,r){return new _ue({eventNameOrFunction:s,attribute:s,observable:e,emitter:n,callback:r})},if(s,r,o){return new eL({observable:e,emitter:n,attribute:s,valueIfTrue:r,callback:o})}}}static extend(e,n){if(e._isRendered)throw new B("template-extend-render",[this,e]);sL(e,GP(qP(n)))}_renderNode(e){let n;if(e.node?n=this.tag&&this.text:n=this.tag?this.text:!this.text,n)throw new B("ui-template-wrong-syntax",this);return this.text?this._renderText(e):this._renderElement(e)}_renderElement(e){let n=e.node;return n||(n=e.node=document.createElementNS(this.ns||yue,this.tag)),this._renderAttributes(e),this._renderElementChildren(e),this._setUpListeners(e),n}_renderText(e){let n=e.node;return n?e.revertData.text=n.textContent:n=e.node=document.createTextNode(""),sp(this.text)?this._bindToObservable({schema:this.text,updater:Cue(n),data:e}):n.textContent=this.text.join(""),n}_renderAttributes(e){if(!this.attributes)return;const n=e.node,s=e.revertData;for(const r in this.attributes){const o=n.getAttribute(r),a=this.attributes[r];s&&(s.attributes[r]=o);const l=YP(a)?a[0].ns:null;if(sp(a)){const c=YP(a)?a[0].value:a;s&&XP(r)&&c.unshift(o),this._bindToObservable({schema:c,updater:xue(n,r,l),data:e})}else if(r=="style"&&typeof a[0]!="string")this._renderStyleAttribute(a[0],e);else{s&&o&&XP(r)&&a.unshift(o);const c=a.map(h=>h&&(h.value||h)).reduce((h,f)=>h.concat(f),[]).reduce(iL,"");ju(c)||n.setAttributeNS(l,r,c)}}}_renderStyleAttribute(e,n){const s=n.node;for(const r in e){const o=e[r];sp(o)?this._bindToObservable({schema:[o],updater:Tue(s,r),data:n}):s.style[r]=o}}_renderElementChildren(e){const n=e.node,s=e.intoFragment?document.createDocumentFragment():n,r=e.isApplying;let o=0;for(const a of this.children)if(pC(a)){if(!r){a.setParent(n);for(const l of a)s.appendChild(l.element)}}else if(Qp(a))r||(a.isRendered||a.render(),s.appendChild(a.element));else if(za(a))s.appendChild(a);else if(r){const l=e.revertData,c=ZP();l.children.push(c),a._renderNode({intoFragment:!1,node:s.childNodes[o++],isApplying:!0,revertData:c})}else s.appendChild(a.render());e.intoFragment&&n.appendChild(s)}_setUpListeners(e){if(this.eventListeners)for(const n in this.eventListeners){const s=this.eventListeners[n].map(r=>{const[o,a]=n.split("@");return r.activateDomEventListener(o,a,e)});e.revertData&&e.revertData.bindings.push(s)}}_bindToObservable({schema:e,updater:n,data:s}){const r=s.revertData;tL(e,n,s);const o=e.filter(a=>!ju(a)).filter(a=>a.observable).map(a=>a.activateAttributeListener(e,n,s));r&&r.bindings.push(o)}_revertTemplateFromNode(e,n){for(const r of n.bindings)for(const o of r)o();if(n.text){e.textContent=n.text;return}const s=e;for(const r in n.attributes){const o=n.attributes[r];o===null?s.removeAttribute(r):s.setAttribute(r,o)}for(let r=0;r<n.children.length;++r)this._revertTemplateFromNode(s.childNodes[r],n.children[r])}}class $f{constructor(t){b(this,"attribute");b(this,"observable");b(this,"emitter");b(this,"callback");this.attribute=t.attribute,this.observable=t.observable,this.emitter=t.emitter,this.callback=t.callback}getValue(t){const e=this.observable[this.attribute];return this.callback?this.callback(e,t):e}activateAttributeListener(t,e,n){const s=()=>tL(t,e,n);return this.emitter.listenTo(this.observable,`change:${this.attribute}`,s),()=>{this.emitter.stopListening(this.observable,`change:${this.attribute}`,s)}}}class _ue extends $f{constructor(e){super(e);b(this,"eventNameOrFunction");this.eventNameOrFunction=e.eventNameOrFunction}activateDomEventListener(e,n,s){const r=(o,a)=>{(!n||a.target.matches(n))&&(typeof this.eventNameOrFunction=="function"?this.eventNameOrFunction(a):this.observable.fire(this.eventNameOrFunction,a))};return this.emitter.listenTo(s.node,e,r),()=>{this.emitter.stopListening(s.node,e,r)}}}class eL extends $f{constructor(e){super(e);b(this,"valueIfTrue");this.valueIfTrue=e.valueIfTrue}getValue(e){const n=super.getValue(e);return ju(n)?!1:this.valueIfTrue||!0}}function sp(i){return i?(i.value&&(i=i.value),Array.isArray(i)?i.some(sp):i instanceof $f):!1}function Eue(i,t){return i.map(e=>e instanceof $f?e.getValue(t):e)}function tL(i,t,{node:e}){const n=Eue(i,e);let s;i.length==1&&i[0]instanceof eL?s=n[0]:s=n.reduce(iL,""),ju(s)?t.remove():t.set(s)}function Cue(i){return{set(t){i.textContent=t},remove(){i.textContent=""}}}function xue(i,t,e){return{set(n){i.setAttributeNS(e,t,n)},remove(){i.removeAttributeNS(e,t)}}}function Tue(i,t){return{set(e){i.style[t]=e},remove(){i.style[t]=null}}}function qP(i){return GE(i,e=>{if(e&&(e instanceof $f||gC(e)||Qp(e)||pC(e)))return e})}function GP(i){if(typeof i=="string"?i=Aue(i):i.text&&Pue(i),i.on&&(i.eventListeners=Sue(i.on),delete i.on),!i.text){i.attributes&&kue(i.attributes);const t=[];if(i.children)if(pC(i.children))t.push(i.children);else for(const e of i.children)gC(e)||Qp(e)||za(e)?t.push(e):t.push(new Zi(e));i.children=t}return i}function kue(i){for(const t in i)i[t].value&&(i[t].value=Qt(i[t].value)),nL(i,t)}function Sue(i){for(const t in i)nL(i,t);return i}function Aue(i){return{text:[i]}}function Pue(i){i.text=Qt(i.text)}function nL(i,t){i[t]=Qt(i[t])}function iL(i,t){return ju(t)?i:ju(i)?t:`${i} ${t}`}function KP(i,t){for(const e in t)i[e]?i[e].push(...t[e]):i[e]=t[e]}function sL(i,t){if(t.attributes&&(i.attributes||(i.attributes={}),KP(i.attributes,t.attributes)),t.eventListeners&&(i.eventListeners||(i.eventListeners={}),KP(i.eventListeners,t.eventListeners)),t.text&&i.text.push(...t.text),t.children&&t.children.length){if(i.children.length!=t.children.length)throw new B("ui-template-extend-children-mismatch",i);let e=0;for(const n of t.children)sL(i.children[e++],n)}}function ju(i){return!i&&i!==0}function Qp(i){return i instanceof Oe}function gC(i){return i instanceof Zi}function pC(i){return i instanceof ai}function YP(i){return Yt(i[0])&&i[0].ns}function ZP(){return{children:[],bindings:[],attributes:{}}}function XP(i){return i=="class"||i=="style"}class Oe extends Ri(Vt()){constructor(e){super();b(this,"element");b(this,"isRendered");b(this,"locale");b(this,"t");b(this,"template");b(this,"_viewCollections");b(this,"_unboundChildren");b(this,"_bindTemplate");this.element=null,this.isRendered=!1,this.locale=e,this.t=e&&e.t,this._viewCollections=new oi,this._unboundChildren=this.createCollection(),this._viewCollections.on("add",(n,s)=>{s.locale=e,s.t=e&&e.t}),this.decorate("render")}get bindTemplate(){return this._bindTemplate?this._bindTemplate:this._bindTemplate=Zi.bind(this,this)}createCollection(e){const n=new ai(e);return this._viewCollections.add(n),n}registerChild(e){Es(e)||(e=[e]);for(const n of e)this._unboundChildren.add(n)}deregisterChild(e){Es(e)||(e=[e]);for(const n of e)this._unboundChildren.remove(n)}setTemplate(e){this.template=new Zi(e)}extendTemplate(e){Zi.extend(this.template,e)}render(){if(this.isRendered)throw new B("ui-view-render-already-rendered",this);this.template&&(this.element=this.template.render(),this.registerChild(this.template.getViews())),this.isRendered=!0}destroy(){this.stopListening(),this._viewCollections.map(e=>e.destroy()),this.template&&this.template._revertData&&this.template.revert(this.element)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Za({emitter:i,activator:t,callback:e,contextElements:n,listenerOptions:s}){i.listenTo(document,"mousedown",(r,o)=>{if(!t())return;const a=typeof o.composedPath=="function"?o.composedPath():[],l=typeof n=="function"?n():n;for(const c of l)if(c.contains(o.target)||a.includes(c))return;e()},s)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function cw(i){class t extends i{disableCssTransitions(){this._isCssTransitionsDisabled=!0}enableCssTransitions(){this._isCssTransitionsDisabled=!1}constructor(...n){super(...n),this.set("_isCssTransitionsDisabled",!1),this.initializeCssTransitionDisablerMixin()}initializeCssTransitionDisablerMixin(){this.extendTemplate({attributes:{class:[this.bindTemplate.if("_isCssTransitionsDisabled","ck-transitions-disabled")]}})}}return t}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Xa({view:i}){i.listenTo(i.element,"submit",(t,e)=>{e.preventDefault(),i.fire("submit")},{useCapture:!0})}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function bC({keystrokeHandler:i,focusTracker:t,gridItems:e,numberOfColumns:n,uiLanguageDirection:s}){const r=typeof n=="number"?()=>n:n;i.set("arrowright",o((c,h)=>s==="rtl"?l(c,h.length):a(c,h.length))),i.set("arrowleft",o((c,h)=>s==="rtl"?a(c,h.length):l(c,h.length))),i.set("arrowup",o((c,h)=>{let f=c-r();return f<0&&(f=c+r()*Math.floor(h.length/r()),f>h.length-1&&(f-=r())),f})),i.set("arrowdown",o((c,h)=>{let f=c+r();return f>h.length-1&&(f=c%r()),f}));function o(c){return h=>{const f=e.find(v=>v.element===t.focusedElement),m=e.getIndex(f),p=c(m,e);e.get(p).focus(),h.stopPropagation(),h.preventDefault()}}function a(c,h){return c===h-1?0:c+1}function l(c,h){return c===0?h-1:c-1}}const db=class db extends Oe{constructor(){super();const t=this.bindTemplate;this.set("content",""),this.set("viewBox","0 0 20 20"),this.set("fillColor",""),this.set("isColorInherited",!0),this.set("isVisible",!0),this.setTemplate({tag:"svg",ns:"http://www.w3.org/2000/svg",attributes:{class:["ck","ck-icon",t.if("isVisible","ck-hidden",e=>!e),"ck-reset_all-excluded",t.if("isColorInherited","ck-icon_inherit-color")],viewBox:t.to("viewBox"),"aria-hidden":!0}})}render(){super.render(),this._updateXMLContent(),this._colorFillPaths(),this.on("change:content",()=>{this._updateXMLContent(),this._colorFillPaths()}),this.on("change:fillColor",()=>{this._colorFillPaths()})}_updateXMLContent(){if(this.content){const e=new DOMParser().parseFromString(this.content.trim(),"image/svg+xml").querySelector("svg"),n=e.getAttribute("viewBox");n&&(this.viewBox=n);for(const{name:s,value:r}of Array.from(e.attributes))db.presentationalAttributeNames.includes(s)&&this.element.setAttribute(s,r);for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);for(;e.childNodes.length>0;)this.element.appendChild(e.childNodes[0])}}_colorFillPaths(){this.fillColor&&this.element.querySelectorAll(".ck-icon__fill").forEach(t=>{t.style.fill=this.fillColor})}};b(db,"presentationalAttributeNames",["alignment-baseline","baseline-shift","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-rendering","cursor","direction","display","dominant-baseline","fill","fill-opacity","fill-rule","filter","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","image-rendering","letter-spacing","lighting-color","marker-end","marker-mid","marker-start","mask","opacity","overflow","paint-order","pointer-events","shape-rendering","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-anchor","text-decoration","text-overflow","text-rendering","transform","unicode-bidi","vector-effect","visibility","white-space","word-spacing","writing-mode"]);let lo=db;class rL extends Oe{constructor(){super(),this.set({style:void 0,text:void 0,id:void 0});const t=this.bindTemplate;this.setTemplate({tag:"span",attributes:{class:["ck","ck-button__label"],style:t.to("style"),id:t.to("id")},children:[{text:t.to("text")}]})}}class rt extends Oe{constructor(e,n=new rL){super(e);b(this,"children");b(this,"labelView");b(this,"iconView");b(this,"keystrokeView");b(this,"_focusDelayed",null);const s=this.bindTemplate,r=yi();this.set("_ariaPressed",!1),this.set("_ariaChecked",!1),this.set("ariaLabel",void 0),this.set("ariaLabelledBy",`ck-editor__aria-label_${r}`),this.set("class",void 0),this.set("labelStyle",void 0),this.set("icon",void 0),this.set("isEnabled",!0),this.set("isOn",!1),this.set("isVisible",!0),this.set("isToggleable",!1),this.set("keystroke",void 0),this.set("label",void 0),this.set("role",void 0),this.set("tabindex",-1),this.set("tooltip",!1),this.set("tooltipPosition","s"),this.set("type","button"),this.set("withText",!1),this.set("withKeystroke",!1),this.children=this.createCollection(),this.labelView=this._setupLabelView(n),this.iconView=new lo,this.iconView.extendTemplate({attributes:{class:"ck-button__icon"}}),this.keystrokeView=this._createKeystrokeView(),this.bind("_tooltipString").to(this,"tooltip",this,"label",this,"keystroke",this._getTooltipString.bind(this));const o={tag:"button",attributes:{class:["ck","ck-button",s.to("class"),s.if("isEnabled","ck-disabled",a=>!a),s.if("isVisible","ck-hidden",a=>!a),s.to("isOn",a=>a?"ck-on":"ck-off"),s.if("withText","ck-button_with-text"),s.if("withKeystroke","ck-button_with-keystroke")],role:s.to("role"),type:s.to("type",a=>a||"button"),tabindex:s.to("tabindex"),"aria-checked":s.to("_ariaChecked"),"aria-pressed":s.to("_ariaPressed"),"aria-label":s.to("ariaLabel"),"aria-labelledby":s.to("ariaLabelledBy"),"aria-disabled":s.if("isEnabled",!0,a=>!a),"data-cke-tooltip-text":s.to("_tooltipString"),"data-cke-tooltip-position":s.to("tooltipPosition")},children:this.children,on:{click:s.to(a=>{this.isEnabled?this.fire("execute"):a.preventDefault()})}};this.bind("_ariaPressed").to(this,"isOn",this,"isToggleable",this,"role",(a,l,c)=>!l||JP(c)?!1:String(!!a)),this.bind("_ariaChecked").to(this,"isOn",this,"isToggleable",this,"role",(a,l,c)=>!l||!JP(c)?!1:String(!!a)),Xe.isSafari&&(this._focusDelayed||(this._focusDelayed=JE(()=>this.focus(),0)),o.on.mousedown=s.to(()=>{this._focusDelayed()}),o.on.mouseup=s.to(()=>{this._focusDelayed.cancel()})),this.setTemplate(o)}render(){super.render(),this.icon&&(this.iconView.bind("content").to(this,"icon"),this.children.add(this.iconView)),this.children.add(this.labelView),this.withKeystroke&&this.keystroke&&this.children.add(this.keystrokeView)}focus(){this.element.focus()}destroy(){this._focusDelayed&&this._focusDelayed.cancel(),super.destroy()}_setupLabelView(e){return e.bind("text","style","id").to(this,"label","labelStyle","ariaLabelledBy"),e}_createKeystrokeView(){const e=new Oe;return e.setTemplate({tag:"span",attributes:{class:["ck","ck-button__keystroke"]},children:[{text:this.bindTemplate.to("keystroke",n=>qp(n))}]}),e}_getTooltipString(e,n,s){return e?typeof e=="string"?e:(s&&(s=qp(s)),e instanceof Function?e(n,s):`${n}${s?` (${s})`:""}`):""}}function JP(i){switch(i){case"radio":case"checkbox":case"option":case"switch":case"menuitemcheckbox":case"menuitemradio":return!0;default:return!1}}class wC extends Oe{constructor(e,n={}){super(e);b(this,"children");b(this,"iconView");const s=this.bindTemplate;this.set("label",n.label||""),this.set("class",n.class||null),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-form__header",s.to("class")]},children:this.children}),n.icon&&(this.iconView=new lo,this.iconView.content=n.icon,this.children.add(this.iconView));const r=new Oe(e);r.setTemplate({tag:"h2",attributes:{class:["ck","ck-form__header__label"],role:"presentation"},children:[{text:s.to("label")}]}),this.children.add(r)}}class Oi extends Ft(){constructor(e){super();b(this,"focusables");b(this,"focusTracker");b(this,"keystrokeHandler");b(this,"actions");if(this.focusables=e.focusables,this.focusTracker=e.focusTracker,this.keystrokeHandler=e.keystrokeHandler,this.actions=e.actions,e.actions&&e.keystrokeHandler)for(const n in e.actions){let s=e.actions[n];typeof s=="string"&&(s=[s]);for(const r of s)e.keystrokeHandler.set(r,(o,a)=>{this[n](),a()},e.keystrokeHandlerOptions)}this.on("forwardCycle",()=>this.focusFirst(),{priority:"low"}),this.on("backwardCycle",()=>this.focusLast(),{priority:"low"})}get first(){return this.focusables.find(R1)||null}get last(){return this.focusables.filter(R1).slice(-1)[0]||null}get next(){return this._getDomFocusableItem(1)}get previous(){return this._getDomFocusableItem(-1)}get current(){let e=null;return this.focusTracker.focusedElement===null?null:(this.focusables.find((n,s)=>{const r=n.element===this.focusTracker.focusedElement;return r&&(e=s),r}),e)}focusFirst(){this._focus(this.first,1)}focusLast(){this._focus(this.last,-1)}focusNext(){const e=this.next;if(e&&this.focusables.getIndex(e)===this.current){this.fire("forwardCycle");return}e===this.first?this.fire("forwardCycle"):this._focus(e,1)}focusPrevious(){const e=this.previous;if(e&&this.focusables.getIndex(e)===this.current){this.fire("backwardCycle");return}e===this.last?this.fire("backwardCycle"):this._focus(e,-1)}chain(e){const n=()=>this.current===null?null:this.focusables.get(this.current);this.listenTo(e,"forwardCycle",s=>{const r=n();this.focusNext(),r!==n()&&s.stop()},{priority:"low"}),this.listenTo(e,"backwardCycle",s=>{const r=n();this.focusPrevious(),r!==n()&&s.stop()},{priority:"low"})}unchain(e){this.stopListening(e)}_focus(e,n){e&&this.focusTracker.focusedElement!==e.element&&e.focus(n)}_getDomFocusableItem(e){const n=this.focusables.length;if(!n)return null;const s=this.current;if(s===null)return this[e===1?"first":"last"];let r=this.focusables.get(s),o=(s+n+e)%n;do{const a=this.focusables.get(o);if(R1(a)){r=a;break}o=(o+n+e)%n}while(o!==s);return r}}function R1(i){return zf(i)&&Wo(i.element)}function zf(i){return"focus"in i&&typeof i.focus=="function"}function Iue(i){return zf(i)&&"focusCycler"in i&&i.focusCycler instanceof Oi}function Rue(i){class t extends i{constructor(...s){super(...s);b(this,"_onDragBound",this._onDrag.bind(this));b(this,"_onDragEndBound",this._onDragEnd.bind(this));b(this,"_lastDraggingCoordinates",{x:0,y:0});this.on("render",()=>{this._attachListeners()}),this.set("isDragging",!1)}_attachListeners(){this.listenTo(this.element,"mousedown",this._onDragStart.bind(this)),this.listenTo(this.element,"touchstart",this._onDragStart.bind(this))}_attachDragListeners(){this.listenTo(Re.document,"mouseup",this._onDragEndBound),this.listenTo(Re.document,"touchend",this._onDragEndBound),this.listenTo(Re.document,"mousemove",this._onDragBound),this.listenTo(Re.document,"touchmove",this._onDragBound)}_detachDragListeners(){this.stopListening(Re.document,"mouseup",this._onDragEndBound),this.stopListening(Re.document,"touchend",this._onDragEndBound),this.stopListening(Re.document,"mousemove",this._onDragBound),this.stopListening(Re.document,"touchmove",this._onDragBound)}_onDragStart(s,r){if(!this._isHandleElementPressed(r))return;this._attachDragListeners();let o=0,a=0;r instanceof MouseEvent?(o=r.clientX,a=r.clientY):(o=r.touches[0].clientX,a=r.touches[0].clientY),this._lastDraggingCoordinates={x:o,y:a},this.isDragging=!0}_onDrag(s,r){if(!this.isDragging){this._detachDragListeners();return}let o=0,a=0;r instanceof MouseEvent?(o=r.clientX,a=r.clientY):(o=r.touches[0].clientX,a=r.touches[0].clientY),r.preventDefault(),this.fire("drag",{deltaX:Math.round(o-this._lastDraggingCoordinates.x),deltaY:Math.round(a-this._lastDraggingCoordinates.y)}),this._lastDraggingCoordinates={x:o,y:a}}_onDragEnd(){this._detachDragListeners(),this.isDragging=!1}_isHandleElementPressed(s){return this.dragHandleElement?this.dragHandleElement===s.target||s.target instanceof HTMLElement&&this.dragHandleElement.contains(s.target):!1}}return t}class Oue extends Oe{constructor(e){super(e);b(this,"children");b(this,"keystrokes");b(this,"focusCycler");b(this,"_focusTracker");b(this,"_focusables");this.children=this.createCollection(),this.keystrokes=new wn,this._focusTracker=new ln,this._focusables=new ai,this.focusCycler=new Oi({focusables:this._focusables,focusTracker:this._focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-dialog__actions"]},children:this.children})}render(){super.render(),this.keystrokes.listenTo(this.element)}setButtons(e){for(const n of e){const s=new rt(this.locale);let r;s.on("execute",()=>n.onExecute()),n.onCreate&&n.onCreate(s);for(r in n)r!="onExecute"&&r!="onCreate"&&s.set(r,n[r]);this.children.add(s)}this._updateFocusCyclableItems()}focus(e){e===-1?this.focusCycler.focusLast():this.focusCycler.focusFirst()}_updateFocusCyclableItems(){Array.from(this.children).forEach(e=>{this._focusables.add(e),this._focusTracker.add(e.element)})}}class Nue extends Oe{constructor(e){super(e);b(this,"children");this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-dialog__content"]},children:this.children})}reset(){for(;this.children.length;)this.children.remove(0)}}const ar={SCREEN_CENTER:"screen-center",EDITOR_CENTER:"editor-center",EDITOR_TOP_SIDE:"editor-top-side",EDITOR_TOP_CENTER:"editor-top-center",EDITOR_BOTTOM_CENTER:"editor-bottom-center",EDITOR_ABOVE_CENTER:"editor-above-center",EDITOR_BELOW_CENTER:"editor-below-center"},QP=Ff("px"),hb=class hb extends Rue(Oe){constructor(e,{getCurrentDomRoot:n,getViewportOffset:s,keystrokeHandlerOptions:r}){super(e);b(this,"parts");b(this,"headerView");b(this,"closeButtonView");b(this,"actionsView");b(this,"contentView");b(this,"keystrokes");b(this,"focusTracker");b(this,"wasMoved",!1);b(this,"_getCurrentDomRoot");b(this,"_getViewportOffset");b(this,"_focusables");b(this,"_focusCycler");const o=this.bindTemplate,a=e.t;this.set("className",""),this.set("ariaLabel",a("Editor dialog")),this.set("isModal",!1),this.set("position",ar.SCREEN_CENTER),this.set("_isVisible",!1),this.set("_isTransparent",!1),this.set("_top",0),this.set("_left",0),this._getCurrentDomRoot=n,this._getViewportOffset=s,this.decorate("moveTo"),this.parts=this.createCollection(),this.keystrokes=new wn,this.focusTracker=new ln,this._focusables=new ai,this._focusCycler=new Oi({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"},keystrokeHandlerOptions:r}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-dialog-overlay",o.if("isModal","ck-dialog-overlay__transparent",l=>!l),o.if("_isVisible","ck-hidden",l=>!l)],tabindex:"-1"},children:[{tag:"div",attributes:{tabindex:"-1",class:["ck","ck-dialog",o.if("isModal","ck-dialog_modal"),o.to("className")],role:"dialog","aria-label":o.to("ariaLabel"),style:{top:o.to("_top",l=>QP(l)),left:o.to("_left",l=>QP(l)),visibility:o.if("_isTransparent","hidden")}},children:this.parts}]})}render(){super.render(),this.keystrokes.set("Esc",(e,n)=>{e.defaultPrevented||(this.fire("close",{source:"escKeyPress"}),n())}),this.on("drag",(e,{deltaX:n,deltaY:s})=>{this.wasMoved=!0,this.moveBy(n,s)}),this.listenTo(Re.window,"resize",()=>{this._isVisible&&!this.wasMoved&&this.updatePosition()}),this.listenTo(Re.document,"scroll",()=>{this._isVisible&&!this.wasMoved&&this.updatePosition()}),this.on("change:_isVisible",(e,n,s)=>{s&&(this._isTransparent=!0,setTimeout(()=>{this.updatePosition(),this._isTransparent=!1,this.focus()},10))}),this.keystrokes.listenTo(this.element)}get dragHandleElement(){return this.headerView&&!this.isModal?this.headerView.element:null}setupParts({icon:e,title:n,hasCloseButton:s=!0,content:r,actionButtons:o}){n&&(this.headerView=new wC(this.locale,{icon:e}),s&&(this.closeButtonView=this._createCloseButton(),this.headerView.children.add(this.closeButtonView)),this.headerView.label=n,this.ariaLabel=n,this.parts.add(this.headerView,0)),r&&(r instanceof Oe&&(r=[r]),this.contentView=new Nue(this.locale),this.contentView.children.addMany(r),this.parts.add(this.contentView)),o&&(this.actionsView=new Oue(this.locale),this.actionsView.setButtons(o),this.parts.add(this.actionsView)),this._updateFocusCyclableItems()}focus(){this._focusCycler.focusFirst()}moveTo(e,n){const s=this._getViewportRect(),r=this._getDialogRect();e+r.width>s.right&&(e=s.right-r.width),e<s.left&&(e=s.left),n<s.top&&(n=s.top),this._moveTo(e,n)}_moveTo(e,n){this._left=e,this._top=n}moveBy(e,n){this.moveTo(this._left+e,this._top+n)}_moveOffScreen(){this._moveTo(-9999,-9999)}updatePosition(){if(!this.element||!this.element.parentNode)return;const e=this._getViewportRect();let n=this.position,s;this._getCurrentDomRoot()?s=this._getVisibleDomRootRect(e):n=ar.SCREEN_CENTER;const r=hb.defaultOffset,o=this._getDialogRect();switch(n){case ar.EDITOR_TOP_SIDE:{if(s){const a=this.locale.contentLanguageDirection==="ltr"?s.right-o.width-r:s.left+r;this.moveTo(a,s.top+r)}else this._moveOffScreen();break}case ar.EDITOR_CENTER:{s?this.moveTo(Math.round(s.left+s.width/2-o.width/2),Math.round(s.top+s.height/2-o.height/2)):this._moveOffScreen();break}case ar.SCREEN_CENTER:{this.moveTo(Math.round((e.width-o.width)/2),Math.round((e.height-o.height)/2));break}case ar.EDITOR_TOP_CENTER:{s?this.moveTo(Math.round(s.left+s.width/2-o.width/2),s.top+r):this._moveOffScreen();break}case ar.EDITOR_BOTTOM_CENTER:{s?this.moveTo(Math.round(s.left+s.width/2-o.width/2),s.bottom-o.height-r):this._moveOffScreen();break}case ar.EDITOR_ABOVE_CENTER:{s?this.moveTo(Math.round(s.left+s.width/2-o.width/2),s.top-o.height-r):this._moveOffScreen();break}case ar.EDITOR_BELOW_CENTER:{s?this.moveTo(Math.round(s.left+s.width/2-o.width/2),s.bottom+r):this._moveOffScreen();break}}}_getVisibleDomRootRect(e){let n=new at(this._getCurrentDomRoot()).getVisible();if(n){if(n=e.getIntersection(n),!n)return null}else return null;return n}_getDialogRect(){return new at(this.element.firstElementChild)}_getViewportRect(){const e=new at(Re.window);if(this.isModal)return e;const n={top:0,bottom:0,left:0,right:0,...this._getViewportOffset()};return e.top+=n.top,e.height-=n.top,e.bottom-=n.bottom,e.height-=n.bottom,e.left+=n.left,e.right-=n.right,e.width-=n.left+n.right,e}_updateFocusCyclableItems(){const e=[];if(this.contentView)for(const n of this.contentView.children)zf(n)&&e.push(n);this.actionsView&&e.push(this.actionsView),this.closeButtonView&&e.push(this.closeButtonView),e.forEach(n=>{this._focusables.add(n),this.focusTracker.add(n.element),Iue(n)&&this._focusCycler.chain(n.focusCycler)})}_createCloseButton(){const e=new rt(this.locale),n=this.locale.t;return e.set({label:n("Close"),tooltip:!0,icon:ke.cancel}),e.on("execute",()=>this.fire("close",{source:"closeButton"})),e}};b(hb,"defaultOffset",15);let df=hb;const lr=class lr extends ie{constructor(e){super(e);b(this,"view");b(this,"_onHide");const n=e.t;this._initShowHideListeners(),this._initFocusToggler(),this._initMultiRootIntegration(),this.set({id:null,isOpen:!1}),e.accessibility.addKeystrokeInfos({categoryId:"navigation",keystrokes:[{label:n("Move focus in and out of an active dialog window"),keystroke:"Ctrl+F6",mayRequireFn:!0}]})}static get pluginName(){return"Dialog"}static get isOfficialPlugin(){return!0}destroy(){super.destroy(),lr._visibleDialogPlugin===this&&this._unlockBodyScroll()}_initShowHideListeners(){this.on("show",(e,n)=>{this._show(n)}),this.on("show",(e,n)=>{n.onShow&&n.onShow(this)},{priority:"low"}),this.on("hide",()=>{lr._visibleDialogPlugin&&lr._visibleDialogPlugin._hide()}),this.on("hide",()=>{this._onHide&&(this._onHide(this),this._onHide=void 0)},{priority:"low"})}_initFocusToggler(){const e=this.editor;e.keystrokes.set("Ctrl+F6",(n,s)=>{!this.isOpen||this.view.isModal||(this.view.focusTracker.isFocused?e.editing.view.focus():this.view.focus(),s())})}_initMultiRootIntegration(){const e=this.editor.model;e.document.on("change:data",()=>{if(!this.view)return;const n=e.document.differ.getChangedRoots();for(const s of n)s.state&&this.view.updatePosition()})}show(e){this.hide(),this.fire(`show:${e.id}`,e)}_show({id:e,icon:n,title:s,hasCloseButton:r=!0,content:o,actionButtons:a,className:l,isModal:c,position:h,onHide:f,keystrokeHandlerOptions:m}){const p=this.editor;this.view=new df(p.locale,{getCurrentDomRoot:()=>p.editing.view.getDomRoot(p.model.document.selection.anchor.root.rootName),getViewportOffset:()=>p.ui.viewportOffset,keystrokeHandlerOptions:m});const v=this.view;v.on("close",()=>{this.hide()}),p.ui.view.body.add(v),p.keystrokes.listenTo(v.element),h||(h=c?ar.SCREEN_CENTER:ar.EDITOR_CENTER),c&&this._lockBodyScroll(),v.set({position:h,_isVisible:!0,className:l,isModal:c}),v.setupParts({icon:n,title:s,hasCloseButton:r,content:o,actionButtons:a}),this.id=e,f&&(this._onHide=f),this.isOpen=!0,lr._visibleDialogPlugin=this}hide(){lr._visibleDialogPlugin&&lr._visibleDialogPlugin.fire(`hide:${lr._visibleDialogPlugin.id}`)}_hide(){if(!this.view)return;const e=this.editor,n=this.view;n.isModal&&this._unlockBodyScroll(),n.contentView&&n.contentView.reset(),e.ui.view.body.remove(n),e.ui.focusTracker.remove(n.element),e.keystrokes.stopListening(n.element),n.destroy(),e.editing.view.focus(),this.id=null,this.isOpen=!1,lr._visibleDialogPlugin=null}_lockBodyScroll(){document.documentElement.classList.add("ck-dialog-scroll-locked")}_unlockBodyScroll(){document.documentElement.classList.remove("ck-dialog-scroll-locked")}};b(lr,"_visibleDialogPlugin");let hf=lr;class Hu extends rt{constructor(e,n=new rL){super(e,n);b(this,"_checkIconHolderView",new Mue);this.set({hasCheckSpace:!1,_hasCheck:this.isToggleable});const s=this.bindTemplate;this.extendTemplate({attributes:{class:["ck-list-item-button",s.if("isToggleable","ck-list-item-button_toggleable")]}}),this.bind("_hasCheck").to(this,"hasCheckSpace",this,"isToggleable",(r,o)=>r||o)}render(){super.render(),this._hasCheck&&this.children.add(this._checkIconHolderView,0),this._watchCheckIconHolderMount()}_watchCheckIconHolderMount(){this._checkIconHolderView.bind("isOn").to(this,"isOn",e=>this.isToggleable&&e),this.on("change:_hasCheck",(e,n,s)=>{const{children:r,_checkIconHolderView:o}=this;s?r.add(o,0):r.remove(o)})}}class Mue extends Oe{constructor(){super();b(this,"children");b(this,"_checkIconView",this._createCheckIconView());const e=this.bindTemplate;this.children=this.createCollection(),this.set("isOn",!1),this.setTemplate({tag:"span",children:this.children,attributes:{class:["ck","ck-list-item-button__check-holder",e.to("isOn",n=>n?"ck-on":"ck-off")]}})}render(){super.render(),this.isOn&&this.children.add(this._checkIconView,0),this._watchCheckIconMount()}_watchCheckIconMount(){this.on("change:isOn",(e,n,s)=>{const{children:r,_checkIconView:o}=this;s&&!r.has(o)?r.add(o):!s&&r.has(o)&&r.remove(o)})}_createCheckIconView(){const e=new lo;return e.content=ke.check,e.extendTemplate({attributes:{class:"ck-list-item-button__check-icon"}}),e}}class Xn extends Hu{constructor(t){super(t),this.set({withText:!0,withKeystroke:!0,tooltip:!1,role:"menuitem"}),this.extendTemplate({attributes:{class:["ck-menu-bar__menu__item__button"]}})}}class Fs extends Oe{constructor(e){super(e);b(this,"id");this.set("text",void 0),this.set("for",void 0),this.id=`ck-editor__label_${yi()}`;const n=this.bindTemplate;this.setTemplate({tag:"label",attributes:{class:["ck","ck-label"],id:this.id,for:n.to("for")},children:[{text:n.to("text")}]})}}class Lue extends Oe{constructor(t,e){super(t);const n=t.t,s=new Fs;s.text=n("Help Contents. To close this dialog press ESC."),this.setTemplate({tag:"div",attributes:{class:["ck","ck-accessibility-help-dialog__content"],"aria-labelledby":s.id,role:"document",tabindex:-1},children:[cr(document,"p",{},n("Below, you can find a list of keyboard shortcuts that can be used in the editor.")),...this._createCategories(Array.from(e.values())),s]})}focus(){this.element.focus()}_createCategories(t){return t.map(e=>{const n=[cr(document,"h3",{},e.label),...Array.from(e.groups.values()).map(s=>this._createGroup(s)).flat()];return e.description&&n.splice(1,0,cr(document,"p",{},e.description)),cr(document,"section",{},n)})}_createGroup(t){const e=t.keystrokes.sort((s,r)=>s.label.localeCompare(r.label)).map(s=>this._createGroupRow(s)).flat(),n=[cr(document,"dl",{},e)];return t.label&&n.unshift(cr(document,"h4",{},t.label)),n}_createGroupRow(t){const e=this.locale.t,n=cr(document,"dt"),s=cr(document,"dd"),r=Due(t.keystroke),o=[];for(const a of r)o.push(a.map(Vue).join(""));return n.innerHTML=t.label,s.innerHTML=o.join(", ")+(t.mayRequireFn&&Xe.isMac?` ${e("(may require <kbd>Fn</kbd>)")}`:""),[n,s]}}function Vue(i){return qp(i).split("+").map(t=>`<kbd>${t}</kbd>`).join("+")}function Due(i){return typeof i=="string"?[[i]]:typeof i[0]=="string"?[i]:i}var eI='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10 6.628a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Z"/><path d="M8.5 9.125a.3.3 0 0 0-.253-.296L5.11 8.327a.75.75 0 1 1 .388-1.449l4.04.716c.267.072.624.08.893.009l4.066-.724a.75.75 0 1 1 .388 1.45l-3.132.5a.3.3 0 0 0-.253.296v1.357a.3.3 0 0 0 .018.102l1.615 4.438a.75.75 0 0 1-1.41.513l-1.35-3.71a.3.3 0 0 0-.281-.197h-.209a.3.3 0 0 0-.282.198l-1.35 3.711a.75.75 0 0 1-1.41-.513l1.64-4.509a.3.3 0 0 0 .019-.103V9.125Z"/><path clip-rule="evenodd" d="M10 18.5a8.5 8.5 0 1 1 0-17 8.5 8.5 0 0 1 0 17Zm0 1.5c5.523 0 10-4.477 10-10S15.523 0 10 0 0 4.477 0 10s4.477 10 10 10Z"/></svg>';class Bue extends ie{constructor(){super(...arguments);b(this,"contentView",null)}static get requires(){return[hf]}static get pluginName(){return"AccessibilityHelp"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,n=e.locale.t;e.ui.componentFactory.add("accessibilityHelp",()=>{const s=this._createButton(rt);return s.set({tooltip:!0,withText:!1,label:n("Accessibility help")}),s}),e.ui.componentFactory.add("menuBar:accessibilityHelp",()=>{const s=this._createButton(Xn);return s.label=n("Accessibility"),s}),e.keystrokes.set("Alt+0",(s,r)=>{this._toggleDialog(),r()}),this._setupRootLabels()}_createButton(e){const n=this.editor,s=n.plugins.get("Dialog"),r=n.locale,o=new e(r);return o.set({keystroke:"Alt+0",icon:eI,isToggleable:!0}),o.on("execute",()=>this._toggleDialog()),o.bind("isOn").to(s,"id",a=>a==="accessibilityHelp"),o}_setupRootLabels(){const e=this.editor,n=e.editing.view,s=e.t;e.ui.on("ready",()=>{n.change(o=>{for(const a of n.document.roots)r(o,a)}),e.on("addRoot",(o,a)=>{const l=e.editing.view.document.getRoot(a.rootName);n.change(c=>r(c,l))},{priority:"low"})});function r(o,a){const c=[a.getAttribute("aria-label"),s("Press %0 for help.",[qp("Alt+0")])].filter(h=>h).join(". ");o.setAttribute("aria-label",c,a)}}_toggleDialog(){const e=this.editor,n=e.plugins.get("Dialog"),s=e.locale.t;this.contentView||(this.contentView=new Lue(e.locale,e.accessibility.keystrokeInfos)),n.id==="accessibilityHelp"?n.hide():n.show({id:"accessibilityHelp",className:"ck-accessibility-help-dialog",title:s("Accessibility help"),icon:eI,hasCloseButton:!0,content:this.contentView})}}const Ds=class Ds extends ai{constructor(e,n=[]){super(n);b(this,"locale");b(this,"_bodyCollectionContainer");this.locale=e}get bodyCollectionContainer(){return this._bodyCollectionContainer}attachToDom(){this._bodyCollectionContainer=new Zi({tag:"div",attributes:{class:["ck","ck-reset_all","ck-body","ck-rounded-corners"],dir:this.locale.uiLanguageDirection,role:"application"},children:this}).render(),(!Ds._bodyWrapper||!Ds._bodyWrapper.isConnected)&&(Ds._bodyWrapper=cr(document,"div",{class:"ck-body-wrapper"}),document.body.appendChild(Ds._bodyWrapper)),Ds._bodyWrapper.appendChild(this._bodyCollectionContainer)}detachFromDom(){super.destroy(),this._bodyCollectionContainer&&this._bodyCollectionContainer.remove(),Ds._bodyWrapper&&!Ds._bodyWrapper.childElementCount&&(Ds._bodyWrapper.remove(),delete Ds._bodyWrapper)}};b(Ds,"_bodyWrapper");let c_=Ds;class jf extends rt{constructor(e){super(e);b(this,"toggleSwitchView");this.isToggleable=!0,this.toggleSwitchView=this._createToggleView(),this.extendTemplate({attributes:{class:"ck-switchbutton"}})}render(){super.render(),this.children.add(this.toggleSwitchView)}_createToggleView(){const e=new Oe;return e.setTemplate({tag:"span",attributes:{class:["ck","ck-button__toggle"]},children:[{tag:"span",attributes:{class:["ck","ck-button__toggle__inner"]}}]}),e}}class tI extends oL(rt){}class Fue extends oL(Hu){}function oL(i){class t extends i{constructor(...s){super(...s);b(this,"buttonView");b(this,"_fileInputView");this.buttonView=this,this._fileInputView=new $ue(this.locale),this._fileInputView.bind("acceptedType").to(this),this._fileInputView.bind("allowMultipleFiles").to(this),this._fileInputView.delegate("done").to(this),this.on("execute",()=>{this._fileInputView.open()}),this.extendTemplate({attributes:{class:"ck-file-dialog-button"}})}render(){super.render(),this.children.add(this._fileInputView)}}return t}class $ue extends Oe{constructor(t){super(t),this.set("acceptedType",void 0),this.set("allowMultipleFiles",!1);const e=this.bindTemplate;this.setTemplate({tag:"input",attributes:{class:["ck-hidden"],type:"file",tabindex:"-1",accept:e.to("acceptedType"),multiple:e.to("allowMultipleFiles")},on:{change:e.to(()=>{this.element&&this.element.files&&this.element.files.length&&this.fire("done",this.element.files),this.element.value=""})}})}open(){this.element.click()}}var uw='<svg viewBox="0 0 10 10" xmlns="http://www.w3.org/2000/svg"><path d="M.941 4.523a.75.75 0 1 1 1.06-1.06l3.006 3.005 3.005-3.005a.75.75 0 1 1 1.06 1.06l-3.549 3.55a.75.75 0 0 1-1.168-.136L.941 4.523z"/></svg>';class aL extends Oe{constructor(e,n){super(e);b(this,"buttonView");b(this,"children");const s=this.bindTemplate;this.set("isCollapsed",!1),this.set("label",""),this.buttonView=this._createButtonView(),this.children=this.createCollection(),this.set("_collapsibleAriaLabelUid",void 0),n&&this.children.addMany(n),this.setTemplate({tag:"div",attributes:{class:["ck","ck-collapsible",s.if("isCollapsed","ck-collapsible_collapsed")]},children:[this.buttonView,{tag:"div",attributes:{class:["ck","ck-collapsible__children"],role:"region",hidden:s.if("isCollapsed","hidden"),"aria-labelledby":s.to("_collapsibleAriaLabelUid")},children:this.children}]})}render(){super.render(),this._collapsibleAriaLabelUid=this.buttonView.labelView.element.id}focus(){this.buttonView.focus()}_createButtonView(){const e=new rt(this.locale),n=e.bindTemplate;return e.set({withText:!0,icon:uw}),e.extendTemplate({attributes:{"aria-expanded":n.to("isOn",s=>String(s))}}),e.bind("label").to(this),e.bind("isOn").to(this,"isCollapsed",s=>!s),e.on("execute",()=>{this.isCollapsed=!this.isCollapsed}),e}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function ff(i,t){const e=i.t,n={Black:e("Black"),"Dim grey":e("Dim grey"),Grey:e("Grey"),"Light grey":e("Light grey"),White:e("White"),Red:e("Red"),Orange:e("Orange"),Yellow:e("Yellow"),"Light green":e("Light green"),Green:e("Green"),Aquamarine:e("Aquamarine"),Turquoise:e("Turquoise"),"Light blue":e("Light blue"),Blue:e("Blue"),Purple:e("Purple")};return t.map(s=>{const r=n[s.label];return r&&r!=s.label&&(s.label=r),s})}function mf(i){return i.map(zue).filter(t=>!!t)}function zue(i){return typeof i=="string"?{model:i,label:i,hasBorder:!1,view:{name:"span",styles:{color:i}}}:{model:i.color,label:i.label||i.color,hasBorder:i.hasBorder===void 0?!1:i.hasBorder,view:{name:"span",styles:{color:`${i.color}`}}}}var jue='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path class="ck-icon__fill" d="M16.935 5.328a2 2 0 0 1 0 2.829l-7.778 7.778a2 2 0 0 1-2.829 0L3.5 13.107a1.999 1.999 0 1 1 2.828-2.829l.707.707a1 1 0 0 0 1.414 0l5.658-5.657a2 2 0 0 1 2.828 0z"/><path d="M14.814 6.035 8.448 12.4a1 1 0 0 1-1.414 0l-1.413-1.415A1 1 0 1 0 4.207 12.4l2.829 2.829a1 1 0 0 0 1.414 0l7.778-7.778a1 1 0 1 0-1.414-1.415z"/></svg>';class lL extends rt{constructor(t){super(t);const e=this.bindTemplate;this.set("color",void 0),this.set("hasBorder",!1),this.icon=jue,this.extendTemplate({attributes:{style:{backgroundColor:e.to("color",n=>Xe.isMediaForcedColors?null:n)},class:["ck","ck-color-grid__tile",e.if("hasBorder","ck-color-selector__color-tile_bordered")]}})}render(){super.render(),this.iconView.fillColor="hsl(0, 0%, 100%)"}}class nI extends Oe{constructor(e,n){super(e);b(this,"columns");b(this,"items");b(this,"focusTracker");b(this,"keystrokes");const s=n&&n.colorDefinitions?n.colorDefinitions:[];this.columns=n&&n.columns?n.columns:5;const r={gridTemplateColumns:`repeat( ${this.columns}, 1fr)`};this.set("selectedColor",void 0),this.items=this.createCollection(),this.focusTracker=new ln,this.keystrokes=new wn,this.items.on("add",(o,a)=>{a.isOn=a.color===this.selectedColor}),s.forEach(o=>{const a=new lL;a.set({color:o.color,label:o.label,tooltip:!0,hasBorder:o.options.hasBorder}),a.on("execute",()=>{this.fire("execute",{value:o.color,hasBorder:o.options.hasBorder,label:o.label})}),this.items.add(a)}),this.setTemplate({tag:"div",children:this.items,attributes:{class:["ck","ck-color-grid"],style:r}}),this.on("change:selectedColor",(o,a,l)=>{for(const c of this.items)c.isOn=c.color===l})}focus(){this.items.length&&this.items.first.focus()}focusLast(){this.items.length&&this.items.last.focus()}render(){super.render();for(const e of this.items)this.focusTracker.add(e.element);this.items.on("add",(e,n)=>{this.focusTracker.add(n.element)}),this.items.on("remove",(e,n)=>{this.focusTracker.remove(n.element)}),this.keystrokes.listenTo(this.element),bC({keystrokeHandler:this.keystrokes,focusTracker:this.focusTracker,gridItems:this.items,numberOfColumns:this.columns,uiLanguageDirection:this.locale&&this.locale.uiLanguageDirection})}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function cL(i,t){if(!i)return"";const e=uL(i);if(!e)return"";if(e.space===t)return i;if(!que(e))return"";const s=Z4[e.space][t];if(!s)return"";const r=s(e.space==="hex"?e.hexValue:e.values);return Wue(r,t)}function Hue(i){if(!i)return"";const t=uL(i);return t?t.space==="hex"?t.hexValue:cL(i,"hex"):"#000"}function Uue(i,t){customElements.get(i)===void 0&&customElements.define(i,t)}function Wue(i,t){switch(t){case"hex":return`#${i}`;case"rgb":return`rgb(${i[0]}, ${i[1]}, ${i[2]})`;case"hsl":return`hsl(${i[0]}, ${i[1]}%, ${i[2]}%)`;case"hwb":return`hwb(${i[0]}, ${i[1]}, ${i[2]})`;case"lab":return`lab(${i[0]}% ${i[1]} ${i[2]})`;case"lch":return`lch(${i[0]}% ${i[1]} ${i[2]})`;default:return""}}function uL(i){if(i.startsWith("#")){const e=VP(i);return{space:"hex",values:e.values,hexValue:i,alpha:e.alpha}}const t=VP(i);return t.space?t:null}function que(i){return Object.keys(Z4).includes(i.space)}class Mn extends Oe{constructor(e,n){super(e);b(this,"fieldView");b(this,"labelView");b(this,"statusView");b(this,"fieldWrapperChildren");const s=`ck-labeled-field-view-${yi()}`,r=`ck-labeled-field-view-status-${yi()}`;this.fieldView=n(this,s,r),this.set("label",void 0),this.set("isEnabled",!0),this.set("isEmpty",!0),this.set("isFocused",!1),this.set("errorText",null),this.set("infoText",null),this.set("class",void 0),this.set("placeholder",void 0),this.labelView=this._createLabelView(s),this.statusView=this._createStatusView(r),this.fieldWrapperChildren=this.createCollection([this.fieldView,this.labelView]),this.bind("_statusText").to(this,"errorText",this,"infoText",(a,l)=>a||l);const o=this.bindTemplate;this.setTemplate({tag:"div",attributes:{class:["ck","ck-labeled-field-view",o.to("class"),o.if("isEnabled","ck-disabled",a=>!a),o.if("isEmpty","ck-labeled-field-view_empty"),o.if("isFocused","ck-labeled-field-view_focused"),o.if("placeholder","ck-labeled-field-view_placeholder"),o.if("errorText","ck-error")]},children:[{tag:"div",attributes:{class:["ck","ck-labeled-field-view__input-wrapper"]},children:this.fieldWrapperChildren},this.statusView]})}_createLabelView(e){const n=new Fs(this.locale);return n.for=e,n.bind("text").to(this,"label"),n}_createStatusView(e){const n=new Oe(this.locale),s=this.bindTemplate;return n.setTemplate({tag:"div",attributes:{class:["ck","ck-labeled-field-view__status",s.if("errorText","ck-labeled-field-view__status_error"),s.if("_statusText","ck-hidden",r=>!r)],id:e,role:s.if("errorText","alert")},children:[{text:s.to("_statusText")}]}),n}focus(e){this.fieldView.focus(e)}}class Gue extends Oe{constructor(e){super(e);b(this,"focusTracker");this.set("value",void 0),this.set("id",void 0),this.set("placeholder",void 0),this.set("tabIndex",void 0),this.set("isReadOnly",!1),this.set("hasError",!1),this.set("ariaDescribedById",void 0),this.set("ariaLabel",void 0),this.focusTracker=new ln,this.bind("isFocused").to(this.focusTracker),this.set("isEmpty",!0);const n=this.bindTemplate;this.setTemplate({tag:"input",attributes:{class:["ck","ck-input",n.if("isFocused","ck-input_focused"),n.if("isEmpty","ck-input-text_empty"),n.if("hasError","ck-error")],id:n.to("id"),placeholder:n.to("placeholder"),tabindex:n.to("tabIndex"),readonly:n.to("isReadOnly"),"aria-invalid":n.if("hasError",!0),"aria-describedby":n.to("ariaDescribedById"),"aria-label":n.to("ariaLabel")},on:{input:n.to((...s)=>{this.fire("input",...s),this._updateIsEmpty()}),change:n.to(this._updateIsEmpty.bind(this))}})}render(){super.render(),this.focusTracker.add(this.element),this._setDomElementValue(this.value),this._updateIsEmpty(),this.on("change:value",(e,n,s)=>{this._setDomElementValue(s),this._updateIsEmpty()})}destroy(){super.destroy(),this.focusTracker.destroy()}select(){this.element.select()}focus(){this.element.focus()}reset(){this.value=this.element.value="",this._updateIsEmpty()}_updateIsEmpty(){this.isEmpty=Kue(this.element)}_setDomElementValue(e){this.element.value=!e&&e!==0?"":e}}function Kue(i){return!i.value}class dL extends Gue{constructor(t){super(t),this.set("inputMode","text");const e=this.bindTemplate;this.extendTemplate({attributes:{inputmode:e.to("inputMode")}})}}class hL extends dL{constructor(t){super(t),this.extendTemplate({attributes:{type:"text",class:["ck-input-text"]}})}}class Yue extends dL{constructor(t,{min:e,max:n,step:s}={}){super(t);const r=this.bindTemplate;this.set("min",e),this.set("max",n),this.set("step",s),this.extendTemplate({attributes:{type:"number",class:["ck-input-number"],min:r.to("min"),max:r.to("max"),step:r.to("step")}})}}class Zue extends Oe{constructor(e){super(e);b(this,"children");const n=this.bindTemplate;this.set("isVisible",!1),this.set("position","se"),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-reset","ck-dropdown__panel",n.to("position",s=>`ck-dropdown__panel_${s}`),n.if("isVisible","ck-dropdown__panel-visible")],tabindex:"-1"},children:this.children,on:{selectstart:n.to(s=>{s.target.tagName.toLocaleLowerCase()!=="input"&&s.preventDefault()})}})}focus(){if(this.children.length){const e=this.children.first;typeof e.focus=="function"?e.focus():Tt("ui-dropdown-panel-focus-child-missing-focus",{childView:this.children.first,dropdownPanel:this})}}focusLast(){if(this.children.length){const e=this.children.last;typeof e.focusLast=="function"?e.focusLast():e.focus()}}}const _u=class _u extends Oe{constructor(e,n,s){super(e);b(this,"buttonView");b(this,"panelView");b(this,"focusTracker");b(this,"keystrokes");b(this,"listView");b(this,"toolbarView");b(this,"menuView");const r=this.bindTemplate;this.buttonView=n,this.panelView=s,this.set("isOpen",!1),this.set("isEnabled",!0),this.set("class",void 0),this.set("id",void 0),this.set("panelPosition","auto"),this.panelView.bind("isVisible").to(this,"isOpen"),this.keystrokes=new wn,this.focusTracker=new ln,this.setTemplate({tag:"div",attributes:{class:["ck","ck-dropdown",r.to("class"),r.if("isEnabled","ck-disabled",o=>!o)],id:r.to("id"),"aria-describedby":r.to("ariaDescribedById")},children:[n,s]}),n.extendTemplate({attributes:{class:["ck-dropdown__button"],"data-cke-tooltip-disabled":r.to("isOpen")}})}render(){super.render(),this.focusTracker.add(this.buttonView.element),this.focusTracker.add(this.panelView.element),this.listenTo(this.buttonView,"open",()=>{this.isOpen=!this.isOpen}),this.on("change:isOpen",(n,s,r)=>{if(r)if(this.panelPosition==="auto"){const o=_u._getOptimalPosition({element:this.panelView.element,target:this.buttonView.element,fitInViewport:!0,positions:this._panelPositions});this.panelView.position=o?o.name:this._defaultPanelPositionName}else this.panelView.position=this.panelPosition}),this.keystrokes.listenTo(this.element);const e=(n,s)=>{this.isOpen&&(this.isOpen=!1,s())};this.keystrokes.set("arrowdown",(n,s)=>{this.buttonView.isEnabled&&!this.isOpen&&(this.isOpen=!0,s())}),this.keystrokes.set("arrowright",(n,s)=>{this.isOpen&&s()}),this.keystrokes.set("arrowleft",e),this.keystrokes.set("esc",e)}focus(){this.buttonView.focus()}get _panelPositions(){const{south:e,north:n,southEast:s,southWest:r,northEast:o,northWest:a,southMiddleEast:l,southMiddleWest:c,northMiddleEast:h,northMiddleWest:f}=_u.defaultPanelPositions;return this.locale.uiLanguageDirection!=="rtl"?[s,r,l,c,e,o,a,h,f,n]:[r,s,c,l,e,a,o,f,h,n]}get _defaultPanelPositionName(){return this.locale.uiLanguageDirection==="rtl"?"sw":"se"}};b(_u,"defaultPanelPositions",{south:(e,n)=>({top:e.bottom,left:e.left-(n.width-e.width)/2,name:"s"}),southEast:e=>({top:e.bottom,left:e.left,name:"se"}),southWest:(e,n)=>({top:e.bottom,left:e.left-n.width+e.width,name:"sw"}),southMiddleEast:(e,n)=>({top:e.bottom,left:e.left-(n.width-e.width)/4,name:"sme"}),southMiddleWest:(e,n)=>({top:e.bottom,left:e.left-(n.width-e.width)*3/4,name:"smw"}),north:(e,n)=>({top:e.top-n.height,left:e.left-(n.width-e.width)/2,name:"n"}),northEast:(e,n)=>({top:e.top-n.height,left:e.left,name:"ne"}),northWest:(e,n)=>({top:e.top-n.height,left:e.left-n.width+e.width,name:"nw"}),northMiddleEast:(e,n)=>({top:e.top-n.height,left:e.left-(n.width-e.width)/4,name:"nme"}),northMiddleWest:(e,n)=>({top:e.top-n.height,left:e.left-(n.width-e.width)*3/4,name:"nmw"})}),b(_u,"_getOptimalPosition",ZE);let u_=_u;class fL extends rt{constructor(e){super(e);b(this,"arrowView");this.arrowView=this._createArrowView(),this.extendTemplate({attributes:{"aria-haspopup":!0,"aria-expanded":this.bindTemplate.to("isOn",n=>String(n))}}),this.delegate("execute").to(this,"open")}render(){super.render(),this.children.add(this.arrowView)}_createArrowView(){const e=new lo;return e.content=uw,e.extendTemplate({attributes:{class:"ck-dropdown__arrow"}}),e}}class Go extends Oe{constructor(e){super(e);b(this,"children");const n=this.bindTemplate;this.set("isVisible",!0),this.children=this.createCollection(),this.setTemplate({tag:"li",attributes:{class:["ck","ck-list__item",n.if("isVisible","ck-hidden",s=>!s)],role:"presentation"},children:this.children})}focus(){this.children.first&&this.children.first.focus()}}class vC extends Oe{constructor(t){super(t),this.setTemplate({tag:"li",attributes:{class:["ck","ck-list__separator"]}})}}class rp extends Oe{constructor(e,n=new Fs){super(e);b(this,"labelView");b(this,"items");b(this,"children");const s=this.bindTemplate,r=new dw(e);this.set({label:"",isVisible:!0}),this.labelView=n,this.labelView.bind("text").to(this,"label"),this.children=this.createCollection(),this.children.addMany([this.labelView,r]),r.set({role:"group",ariaLabelledBy:n.id}),r.focusTracker.destroy(),r.keystrokes.destroy(),this.items=r.items,this.setTemplate({tag:"li",attributes:{role:"presentation",class:["ck","ck-list__group",s.if("isVisible","ck-hidden",o=>!o)]},children:this.children})}focus(){if(this.items){const e=this.items.find(n=>!(n instanceof vC));e&&e.focus()}}}class dw extends Oe{constructor(e){super(e);b(this,"focusables");b(this,"items");b(this,"focusTracker");b(this,"keystrokes");b(this,"_focusCycler");b(this,"_listItemGroupToChangeListeners",new WeakMap);const n=this.bindTemplate;this.focusables=new ai,this.items=this.createCollection(),this.focusTracker=new ln,this.keystrokes=new wn,this._focusCycler=new Oi({focusables:this.focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"arrowup",focusNext:"arrowdown"}}),this.set("ariaLabel",void 0),this.set("ariaLabelledBy",void 0),this.set("role",void 0),this.setTemplate({tag:"ul",attributes:{class:["ck","ck-reset","ck-list"],role:n.to("role"),"aria-label":n.to("ariaLabel"),"aria-labelledby":n.to("ariaLabelledBy")},children:this.items})}render(){super.render();for(const e of this.items)e instanceof rp?this._registerFocusableItemsGroup(e):e instanceof Go&&this._registerFocusableListItem(e);this.items.on("change",(e,n)=>{for(const s of n.removed)s instanceof rp?this._deregisterFocusableItemsGroup(s):s instanceof Go&&this._deregisterFocusableListItem(s);for(const s of Array.from(n.added).reverse())s instanceof rp?this._registerFocusableItemsGroup(s,n.index):this._registerFocusableListItem(s,n.index)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}focusFirst(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}_registerFocusableListItem(e,n){this.focusTracker.add(e.element),this.focusables.add(e,n)}_deregisterFocusableListItem(e){this.focusTracker.remove(e.element),this.focusables.remove(e)}_getOnGroupItemsChangeCallback(e){return(n,s)=>{for(const r of s.removed)this._deregisterFocusableListItem(r);for(const r of Array.from(s.added).reverse())this._registerFocusableListItem(r,this.items.getIndex(e)+s.index)}}_registerFocusableItemsGroup(e,n){Array.from(e.items).forEach((r,o)=>{const a=typeof n<"u"?n+o:void 0;this._registerFocusableListItem(r,a)});const s=this._getOnGroupItemsChangeCallback(e);this._listItemGroupToChangeListeners.set(e,s),e.items.on("change",s)}_deregisterFocusableItemsGroup(e){for(const n of e.items)this._deregisterFocusableListItem(n);e.items.off("change",this._listItemGroupToChangeListeners.get(e)),this._listItemGroupToChangeListeners.delete(e)}}const iI=Ff("px"),Xue={top:-99999,left:-99999,name:"arrowless",config:{withArrow:!1}},rs=class rs extends Oe{constructor(e){super(e);b(this,"content");b(this,"_pinWhenIsVisibleCallback");b(this,"_resizeObserver");const n=this.bindTemplate;this.set("top",0),this.set("left",0),this.set("position","arrow_nw"),this.set("isVisible",!1),this.set("withArrow",!0),this.set("class",void 0),this._pinWhenIsVisibleCallback=null,this._resizeObserver=null,this.content=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-balloon-panel",n.to("position",s=>`ck-balloon-panel_${s}`),n.if("isVisible","ck-balloon-panel_visible"),n.if("withArrow","ck-balloon-panel_with-arrow"),n.to("class")],style:{top:n.to("top",iI),left:n.to("left",iI)}},children:this.content})}destroy(){this.hide(),super.destroy()}show(){this.isVisible=!0}hide(){this.isVisible=!1}attachTo(e){const n=op(e.target);if(n&&!Wo(n))return!1;this.show();const s=rs.defaultPositions,r=Object.assign({},{element:this.element,positions:[s.southArrowNorth,s.southArrowNorthMiddleWest,s.southArrowNorthMiddleEast,s.southArrowNorthWest,s.southArrowNorthEast,s.northArrowSouth,s.northArrowSouthMiddleWest,s.northArrowSouthMiddleEast,s.northArrowSouthWest,s.northArrowSouthEast,s.viewportStickyNorth],limiter:Re.document.body,fitInViewport:!0},e),o=rs._getOptimalPosition(r)||Xue,a=parseInt(o.left),l=parseInt(o.top),c=o.name,h=o.config||{},{withArrow:f=!0}=h;return this.top=l,this.left=a,this.position=c,this.withArrow=f,!0}pin(e){this.unpin(),this._startPinning(e)&&(this._pinWhenIsVisibleCallback=()=>{this.isVisible?this._startPinning(e):this._stopPinning()},this.listenTo(this,"change:isVisible",this._pinWhenIsVisibleCallback))}unpin(){this._pinWhenIsVisibleCallback&&(this._stopPinning(),this.stopListening(this,"change:isVisible",this._pinWhenIsVisibleCallback),this._pinWhenIsVisibleCallback=null,this.hide())}_startPinning(e){if(!this.attachTo(e))return!1;let n=op(e.target);const s=e.limiter?op(e.limiter):Re.document.body;if(this.listenTo(Re.document,"scroll",(r,o)=>{const a=o.target,l=n&&a.contains(n),c=s&&a.contains(s);(l||c||!n||!s)&&this.attachTo(e)},{useCapture:!0}),this.listenTo(Re.window,"resize",()=>{this.attachTo(e)}),!this._resizeObserver&&(n&&pn(n)&&(n=n.parentElement),n)){const r=()=>{Wo(n)||this.unpin()};this._resizeObserver=new YE(n,r)}return!0}_stopPinning(){this.stopListening(Re.document,"scroll"),this.stopListening(Re.window,"resize"),this._resizeObserver&&(this._resizeObserver.destroy(),this._resizeObserver=null)}static generatePositions(e={}){const{sideOffset:n=rs.arrowSideOffset,heightOffset:s=rs.arrowHeightOffset,stickyVerticalOffset:r=rs.stickyVerticalOffset,config:o}=e;return{northWestArrowSouthWest:(c,h)=>({top:a(c,h),left:c.left-n,name:"arrow_sw",...o&&{config:o}}),northWestArrowSouthMiddleWest:(c,h)=>({top:a(c,h),left:c.left-h.width*.25-n,name:"arrow_smw",...o&&{config:o}}),northWestArrowSouth:(c,h)=>({top:a(c,h),left:c.left-h.width/2,name:"arrow_s",...o&&{config:o}}),northWestArrowSouthMiddleEast:(c,h)=>({top:a(c,h),left:c.left-h.width*.75+n,name:"arrow_sme",...o&&{config:o}}),northWestArrowSouthEast:(c,h)=>({top:a(c,h),left:c.left-h.width+n,name:"arrow_se",...o&&{config:o}}),northArrowSouthWest:(c,h)=>({top:a(c,h),left:c.left+c.width/2-n,name:"arrow_sw",...o&&{config:o}}),northArrowSouthMiddleWest:(c,h)=>({top:a(c,h),left:c.left+c.width/2-h.width*.25-n,name:"arrow_smw",...o&&{config:o}}),northArrowSouth:(c,h)=>({top:a(c,h),left:c.left+c.width/2-h.width/2,name:"arrow_s",...o&&{config:o}}),northArrowSouthMiddleEast:(c,h)=>({top:a(c,h),left:c.left+c.width/2-h.width*.75+n,name:"arrow_sme",...o&&{config:o}}),northArrowSouthEast:(c,h)=>({top:a(c,h),left:c.left+c.width/2-h.width+n,name:"arrow_se",...o&&{config:o}}),northEastArrowSouthWest:(c,h)=>({top:a(c,h),left:c.right-n,name:"arrow_sw",...o&&{config:o}}),northEastArrowSouthMiddleWest:(c,h)=>({top:a(c,h),left:c.right-h.width*.25-n,name:"arrow_smw",...o&&{config:o}}),northEastArrowSouth:(c,h)=>({top:a(c,h),left:c.right-h.width/2,name:"arrow_s",...o&&{config:o}}),northEastArrowSouthMiddleEast:(c,h)=>({top:a(c,h),left:c.right-h.width*.75+n,name:"arrow_sme",...o&&{config:o}}),northEastArrowSouthEast:(c,h)=>({top:a(c,h),left:c.right-h.width+n,name:"arrow_se",...o&&{config:o}}),southWestArrowNorthWest:c=>({top:l(c),left:c.left-n,name:"arrow_nw",...o&&{config:o}}),southWestArrowNorthMiddleWest:(c,h)=>({top:l(c),left:c.left-h.width*.25-n,name:"arrow_nmw",...o&&{config:o}}),southWestArrowNorth:(c,h)=>({top:l(c),left:c.left-h.width/2,name:"arrow_n",...o&&{config:o}}),southWestArrowNorthMiddleEast:(c,h)=>({top:l(c),left:c.left-h.width*.75+n,name:"arrow_nme",...o&&{config:o}}),southWestArrowNorthEast:(c,h)=>({top:l(c),left:c.left-h.width+n,name:"arrow_ne",...o&&{config:o}}),southArrowNorthWest:c=>({top:l(c),left:c.left+c.width/2-n,name:"arrow_nw",...o&&{config:o}}),southArrowNorthMiddleWest:(c,h)=>({top:l(c),left:c.left+c.width/2-h.width*.25-n,name:"arrow_nmw",...o&&{config:o}}),southArrowNorth:(c,h)=>({top:l(c),left:c.left+c.width/2-h.width/2,name:"arrow_n",...o&&{config:o}}),southArrowNorthMiddleEast:(c,h)=>({top:l(c),left:c.left+c.width/2-h.width*.75+n,name:"arrow_nme",...o&&{config:o}}),southArrowNorthEast:(c,h)=>({top:l(c),left:c.left+c.width/2-h.width+n,name:"arrow_ne",...o&&{config:o}}),southEastArrowNorthWest:c=>({top:l(c),left:c.right-n,name:"arrow_nw",...o&&{config:o}}),southEastArrowNorthMiddleWest:(c,h)=>({top:l(c),left:c.right-h.width*.25-n,name:"arrow_nmw",...o&&{config:o}}),southEastArrowNorth:(c,h)=>({top:l(c),left:c.right-h.width/2,name:"arrow_n",...o&&{config:o}}),southEastArrowNorthMiddleEast:(c,h)=>({top:l(c),left:c.right-h.width*.75+n,name:"arrow_nme",...o&&{config:o}}),southEastArrowNorthEast:(c,h)=>({top:l(c),left:c.right-h.width+n,name:"arrow_ne",...o&&{config:o}}),westArrowEast:(c,h)=>({top:c.top+c.height/2-h.height/2,left:c.left-h.width-s,name:"arrow_e",...o&&{config:o}}),eastArrowWest:(c,h)=>({top:c.top+c.height/2-h.height/2,left:c.right+s,name:"arrow_w",...o&&{config:o}}),viewportStickyNorth:(c,h,f,m)=>{const p=m||f;return!c.getIntersection(p)||p.height-c.height>r?null:{top:p.top+r,left:c.left+c.width/2-h.width/2,name:"arrowless",config:{withArrow:!1,...o}}}};function a(c,h){return c.top-h.height-s}function l(c){return c.bottom+s}}};b(rs,"arrowSideOffset",25),b(rs,"arrowHeightOffset",10),b(rs,"stickyVerticalOffset",20),b(rs,"_getOptimalPosition",ZE),b(rs,"defaultPositions",rs.generatePositions());let Ti=rs;function op(i){return $a(i)?i:Qb(i)?i.commonAncestorContainer:typeof i=="function"?op(i()):null}class mL extends Oe{constructor(t){super(t),this.setTemplate({tag:"span",attributes:{class:["ck","ck-toolbar__separator"]}})}}class Jue extends Oe{constructor(t){super(t),this.setTemplate({tag:"span",attributes:{class:["ck","ck-toolbar__line-break"]}})}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Que(i){return i.bindTemplate.to(t=>{t.target===i.element&&t.preventDefault()})}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function gL(i){if(Array.isArray(i))return{items:i,removeItems:[]};const t={items:[],removeItems:[]};return i?{...t,...i}:t}const ede={alignLeft:ke.alignLeft,bold:ke.bold,importExport:ke.importExport,paragraph:ke.paragraph,plus:ke.plus,text:ke.text,threeVerticalDots:ke.threeVerticalDots,pilcrow:ke.pilcrow,dragIndicator:ke.dragIndicator};class Uu extends Oe{constructor(e,n){super(e);b(this,"options");b(this,"items");b(this,"focusTracker");b(this,"keystrokes");b(this,"itemsView");b(this,"children");b(this,"focusables");b(this,"_focusCycler");b(this,"_behavior");const s=this.bindTemplate,r=this.t;this.options=n||{},this.set("ariaLabel",r("Editor toolbar")),this.set("maxWidth","auto"),this.set("role","toolbar"),this.items=this.createCollection(),this.focusTracker=new ln,this.keystrokes=new wn,this.set("class",void 0),this.set("isCompact",!1),this.itemsView=new tde(e),this.children=this.createCollection(),this.children.add(this.itemsView),this.focusables=this.createCollection();const o=e.uiLanguageDirection==="rtl";this._focusCycler=new Oi({focusables:this.focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:[o?"arrowright":"arrowleft","arrowup"],focusNext:[o?"arrowleft":"arrowright","arrowdown"]}});const a=["ck","ck-toolbar",s.to("class"),s.if("isCompact","ck-toolbar_compact")];this.options.shouldGroupWhenFull&&this.options.isFloating&&a.push("ck-toolbar_floating"),this.setTemplate({tag:"div",attributes:{class:a,role:s.to("role"),"aria-label":s.to("ariaLabel"),style:{maxWidth:s.to("maxWidth")},tabindex:-1},children:this.children,on:{mousedown:Que(this)}}),this._behavior=this.options.shouldGroupWhenFull?new ide(this):new nde(this)}render(){super.render(),this.focusTracker.add(this.element);for(const e of this.items)this.focusTracker.add(e);this.items.on("add",(e,n)=>{this.focusTracker.add(n)}),this.items.on("remove",(e,n)=>{this.focusTracker.remove(n)}),this.keystrokes.listenTo(this.element),this._behavior.render(this)}destroy(){return this._behavior.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy(),super.destroy()}focus(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}fillFromConfig(e,n,s){this.items.addMany(this._buildItemsFromConfig(e,n,s))}_buildItemsFromConfig(e,n,s){const r=gL(e),o=s||r.removeItems;return this._cleanItemsConfiguration(r.items,n,o).map(l=>Yt(l)?this._createNestedToolbarDropdown(l,n,o):l==="|"?new mL:l==="-"?new Jue:n.create(l)).filter(l=>!!l)}_cleanItemsConfiguration(e,n,s){const r=e.filter((o,a,l)=>o==="|"?!0:s.indexOf(o)!==-1?!1:o==="-"?this.options.shouldGroupWhenFull?(Tt("toolbarview-line-break-ignored-when-grouping-items",l),!1):!0:!Yt(o)&&!n.has(o)?(Tt("toolbarview-item-unavailable",{item:o}),!1):!0);return this._cleanSeparatorsAndLineBreaks(r)}_cleanSeparatorsAndLineBreaks(e){const n=a=>a!=="-"&&a!=="|",s=e.length,r=e.findIndex(n);if(r===-1)return[];const o=s-e.slice().reverse().findIndex(n);return e.slice(r,o).filter((a,l,c)=>n(a)?!0:!(l>0&&c[l-1]===a))}_createNestedToolbarDropdown(e,n,s){let{label:r,icon:o,items:a,tooltip:l=!0,withText:c=!1}=e;if(a=this._cleanItemsConfiguration(a,n,s),!a.length)return null;const h=this.locale,f=vi(h);return r||Tt("toolbarview-nested-toolbar-dropdown-missing-label",e),f.class="ck-toolbar__nested-toolbar-dropdown",f.buttonView.set({label:r,tooltip:l,withText:!!c}),o!==!1?f.buttonView.icon=ede[o]||o||ke.threeVerticalDots:f.buttonView.withText=!0,hw(f,()=>f.toolbarView._buildItemsFromConfig(a,n,s)),f}}class tde extends Oe{constructor(e){super(e);b(this,"children");this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-toolbar__items"]},children:this.children})}}class nde{constructor(t){const e=t.bindTemplate;t.set("isVertical",!1),t.itemsView.children.bindTo(t.items).using(n=>n),t.focusables.bindTo(t.items).using(n=>zf(n)?n:null),t.extendTemplate({attributes:{class:[e.if("isVertical","ck-toolbar_vertical")]}})}render(){}destroy(){}}class ide{constructor(t){b(this,"view");b(this,"viewChildren");b(this,"viewFocusables");b(this,"viewItemsView");b(this,"viewFocusTracker");b(this,"viewLocale");b(this,"ungroupedItems");b(this,"groupedItems");b(this,"groupedItemsDropdown");b(this,"resizeObserver",null);b(this,"cachedPadding",null);b(this,"shouldUpdateGroupingOnNextResize",!1);b(this,"viewElement");this.view=t,this.viewChildren=t.children,this.viewFocusables=t.focusables,this.viewItemsView=t.itemsView,this.viewFocusTracker=t.focusTracker,this.viewLocale=t.locale,this.ungroupedItems=t.createCollection(),this.groupedItems=t.createCollection(),this.groupedItemsDropdown=this._createGroupedItemsDropdown(),t.itemsView.children.bindTo(this.ungroupedItems).using(e=>e),this.ungroupedItems.on("change",this._updateFocusCyclableItems.bind(this)),t.children.on("change",this._updateFocusCyclableItems.bind(this)),t.items.on("change",(e,n)=>{const s=n.index,r=Array.from(n.added);for(const o of n.removed)s>=this.ungroupedItems.length?this.groupedItems.remove(o):this.ungroupedItems.remove(o);for(let o=s;o<s+r.length;o++){const a=r[o-s];o>this.ungroupedItems.length?this.groupedItems.add(a,o-this.ungroupedItems.length):this.ungroupedItems.add(a,o)}this._updateGrouping()}),t.extendTemplate({attributes:{class:["ck-toolbar_grouping"]}})}render(t){this.viewElement=t.element,this._enableGroupingOnResize(),this._enableGroupingOnMaxWidthChange(t)}destroy(){this.groupedItemsDropdown.destroy(),this.resizeObserver.destroy()}_updateGrouping(){if(!this.viewElement.ownerDocument.body.contains(this.viewElement))return;if(!Wo(this.viewElement)){this.shouldUpdateGroupingOnNextResize=!0;return}const t=this.groupedItems.length;let e;for(;this._areItemsOverflowing;)this._groupLastItem(),e=!0;if(!e&&this.groupedItems.length){for(;this.groupedItems.length&&!this._areItemsOverflowing;)this._ungroupFirstItem();this._areItemsOverflowing&&this._groupLastItem()}this.groupedItems.length!==t&&this.view.fire("groupedItemsUpdate")}get _areItemsOverflowing(){if(!this.ungroupedItems.length)return!1;const t=this.viewElement,e=this.viewLocale.uiLanguageDirection,n=new at(t.lastChild),s=new at(t);if(!this.cachedPadding){const r=Re.window.getComputedStyle(t),o=e==="ltr"?"paddingRight":"paddingLeft";this.cachedPadding=Number.parseInt(r[o])}return e==="ltr"?n.right>s.right-this.cachedPadding:n.left<s.left+this.cachedPadding}_enableGroupingOnResize(){let t;this.resizeObserver=new YE(this.viewElement,e=>{(!t||t!==e.contentRect.width||this.shouldUpdateGroupingOnNextResize)&&(this.shouldUpdateGroupingOnNextResize=!1,this._updateGrouping(),t=e.contentRect.width)}),this._updateGrouping()}_enableGroupingOnMaxWidthChange(t){t.on("change:maxWidth",()=>{this._updateGrouping()})}_groupLastItem(){this.groupedItems.length||(this.viewChildren.add(new mL),this.viewChildren.add(this.groupedItemsDropdown),this.viewFocusTracker.add(this.groupedItemsDropdown.element)),this.groupedItems.add(this.ungroupedItems.remove(this.ungroupedItems.last),0)}_ungroupFirstItem(){this.ungroupedItems.add(this.groupedItems.remove(this.groupedItems.first)),this.groupedItems.length||(this.viewChildren.remove(this.groupedItemsDropdown),this.viewChildren.remove(this.viewChildren.last),this.viewFocusTracker.remove(this.groupedItemsDropdown.element))}_createGroupedItemsDropdown(){const t=this.viewLocale,e=t.t,n=vi(t);return n.class="ck-toolbar__grouped-dropdown",n.panelPosition=t.uiLanguageDirection==="ltr"?"sw":"se",hw(n,this.groupedItems),n.buttonView.set({label:e("Show more items"),tooltip:!0,tooltipPosition:t.uiLanguageDirection==="rtl"?"se":"sw",icon:ke.threeVerticalDots}),n}_updateFocusCyclableItems(){this.viewFocusables.clear(),this.ungroupedItems.map(t=>{zf(t)&&this.viewFocusables.add(t)}),this.groupedItems.length&&this.viewFocusables.add(this.groupedItemsDropdown)}}class Hf extends Oe{constructor(e,n){super(e);b(this,"children");b(this,"actionView");b(this,"arrowView");b(this,"keystrokes");b(this,"focusTracker");const s=this.bindTemplate;this.set("class",void 0),this.set("labelStyle",void 0),this.set("icon",void 0),this.set("isEnabled",!0),this.set("isOn",!1),this.set("isToggleable",!1),this.set("isVisible",!0),this.set("keystroke",void 0),this.set("withKeystroke",!1),this.set("label",void 0),this.set("tabindex",-1),this.set("tooltip",!1),this.set("tooltipPosition","s"),this.set("type","button"),this.set("withText",!1),this.children=this.createCollection(),this.actionView=this._createActionView(n),this.arrowView=this._createArrowView(),this.keystrokes=new wn,this.focusTracker=new ln,this.setTemplate({tag:"div",attributes:{class:["ck","ck-splitbutton",s.to("class"),s.if("isVisible","ck-hidden",r=>!r),this.arrowView.bindTemplate.if("isOn","ck-splitbutton_open")]},children:this.children})}render(){super.render(),this.children.add(this.actionView),this.children.add(this.arrowView),this.focusTracker.add(this.actionView.element),this.focusTracker.add(this.arrowView.element),this.keystrokes.listenTo(this.element),this.keystrokes.set("arrowright",(e,n)=>{this.focusTracker.focusedElement===this.actionView.element&&(this.arrowView.focus(),n())}),this.keystrokes.set("arrowleft",(e,n)=>{this.focusTracker.focusedElement===this.arrowView.element&&(this.actionView.focus(),n())})}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this.actionView.focus()}_createActionView(e){const n=e||new rt;return e||n.bind("icon","isEnabled","isOn","isToggleable","keystroke","label","tabindex","tooltip","tooltipPosition","type","withText").to(this),n.extendTemplate({attributes:{class:"ck-splitbutton__action"}}),n.delegate("execute").to(this),n}_createArrowView(){const e=new rt,n=e.bindTemplate;return e.icon=uw,e.extendTemplate({attributes:{class:["ck-splitbutton__arrow"],"data-cke-tooltip-disabled":n.to("isOn"),"aria-haspopup":!0,"aria-expanded":n.to("isOn",s=>String(s))}}),e.bind("isEnabled").to(this),e.bind("label").to(this),e.bind("tooltip").to(this),e.delegate("execute").to(this,"open"),e}}function vi(i,t=fL){const e=typeof t=="function"?new t(i):t,n=new Zue(i),s=new u_(i,e,n);return e.bind("isEnabled").to(s),e instanceof Hf?e.arrowView.bind("isOn").to(s,"isOpen"):e.bind("isOn").to(s,"isOpen"),sde(s),s}function hw(i,t,e={}){i.extendTemplate({attributes:{class:["ck-toolbar-dropdown"]}}),i.isOpen?sI(i,t,e):i.once("change:isOpen",()=>sI(i,t,e),{priority:"highest"}),e.enableActiveItemFocusOnDropdownOpen&&fw(i,()=>i.toolbarView.items.find(n=>n.isOn))}function sI(i,t,e){const n=i.locale,s=n.t,r=i.toolbarView=new Uu(n),o=typeof t=="function"?t():t;r.ariaLabel=e.ariaLabel||s("Dropdown toolbar"),e.maxWidth&&(r.maxWidth=e.maxWidth),e.class&&(r.class=e.class),e.isCompact&&(r.isCompact=e.isCompact),e.isVertical&&(r.isVertical=!0),o instanceof ai?r.items.bindTo(o).using(a=>a):r.items.addMany(o),i.panelView.children.add(r),i.focusTracker.add(r),r.items.delegate("execute").to(i)}function oc(i,t,e={}){i.isOpen?rI(i,t,e):i.once("change:isOpen",()=>rI(i,t,e),{priority:"highest"}),fw(i,()=>i.listView.items.find(n=>n instanceof Go?n.children.first.isOn:!1))}function rI(i,t,e){const n=i.locale,s=i.listView=new dw(n),r=typeof t=="function"?t():t;s.ariaLabel=e.ariaLabel,s.role=e.role,bL(i,s.items,r,n),i.panelView.children.add(s),s.items.delegate("execute").to(i)}function fw(i,t){i.on("change:isOpen",()=>{if(!i.isOpen)return;const e=t();e&&(typeof e.focus=="function"?e.focus():Tt("ui-dropdown-focus-child-on-open-child-missing-focus",{view:e}))},{priority:Na.low-10})}function sde(i){rde(i),ode(i),ade(i),lde(i),cde(i),ude(i)}function rde(i){Za({emitter:i,activator:()=>i.isRendered&&i.isOpen,callback:()=>{i.isOpen=!1},contextElements:()=>[i.element,...pL(i.focusTracker).filter(t=>!i.element.contains(t))]})}function pL(i){return[...i.elements,...i.externalViews.flatMap(t=>pL(t.focusTracker))]}function ode(i){i.on("execute",t=>{t.source instanceof jf||(i.isOpen=!1)})}function ade(i){i.focusTracker.on("change:isFocused",(t,e,n)=>{n||!i.isOpen||(i.isOpen=!1)})}function lde(i){i.keystrokes.set("arrowdown",(t,e)=>{i.isOpen&&(i.panelView.focus(),e())}),i.keystrokes.set("arrowup",(t,e)=>{i.isOpen&&(i.panelView.focusLast(),e())})}function cde(i){i.on("change:isOpen",(t,e,n)=>{if(n)return;i.focusTracker.elements.some(r=>r.contains(Re.document.activeElement))&&i.buttonView.focus()})}function ude(i){i.on("change:isOpen",(t,e,n)=>{n&&i.panelView.focus()},{priority:"low"})}function bL(i,t,e,n){t.on("change",()=>{const s=[...t].reduce((o,a)=>(a instanceof Go&&a.children.first instanceof Hu&&o.push(a.children.first),o),[]),r=s.some(o=>o.isToggleable);s.forEach(o=>{o.hasCheckSpace=r})}),t.bindTo(e).using(s=>{if(s.type==="separator")return new vC(n);if(s.type==="group"){const r=new rp(n);return r.set({label:s.label}),bL(i,r.items,s.items,n),r.items.delegate("execute").to(i),r}else if(s.type==="button"||s.type==="switchbutton"){const r=s.model.role==="menuitemcheckbox"||s.model.role==="menuitemradio",o=new Go(n);let a;return s.type==="button"?(a=new Hu(n),a.set({isToggleable:r})):a=new jf(n),a.bind(...Object.keys(s.model)).to(s.model),a.delegate("execute").to(o),o.children.add(a),o}return null})}const $s=(i,t,e)=>{const n=new hL(i.locale);return n.set({id:t,ariaDescribedById:e}),n.bind("isReadOnly").to(i,"isEnabled",s=>!s),n.bind("hasError").to(i,"errorText",s=>!!s),n.on("input",()=>{i.errorText=null}),i.bind("isEmpty","isFocused","placeholder").to(n),n},wL=(i,t,e)=>{const n=new Yue(i.locale);return n.set({id:t,ariaDescribedById:e,inputMode:"numeric"}),n.bind("isReadOnly").to(i,"isEnabled",s=>!s),n.bind("hasError").to(i,"errorText",s=>!!s),n.on("input",()=>{i.errorText=null}),i.bind("isEmpty","isFocused","placeholder").to(n),n},vL=(i,t,e)=>{const n=vi(i.locale);return n.set({id:t,ariaDescribedById:e}),n.bind("isEnabled").to(i),n},dde=150;class hde extends Oe{constructor(e,n={}){super(e);b(this,"hexInputRow");b(this,"_debounceColorPickerEvent");b(this,"_config");this.set({color:"",_hexColor:""}),this.hexInputRow=this._createInputRow();const s=this.createCollection();n.hideInput||s.add(this.hexInputRow),this.setTemplate({tag:"div",attributes:{class:["ck","ck-color-picker"],tabindex:-1},children:s}),this._config=n,this._debounceColorPickerEvent=qs(r=>{this.set("color",r),this.fire("colorSelected",{color:this.color})},dde,{leading:!0}),this.on("set:color",(r,o,a)=>{r.return=cL(a,this._config.format||"hsl")}),this.on("change:color",()=>{this._hexColor=O1(this.color)}),this.on("change:_hexColor",()=>{document.activeElement!==this.picker&&this.picker.setAttribute("color",this._hexColor),O1(this.color)!=O1(this._hexColor)&&(this.color=this._hexColor)})}render(){if(super.render(),Uue("hex-color-picker",wue),this.picker=Re.document.createElement("hex-color-picker"),this.picker.setAttribute("class","hex-color-picker"),this.picker.setAttribute("tabindex","-1"),this._createSlidersView(),this.element){this.hexInputRow.element?this.element.insertBefore(this.picker,this.hexInputRow.element):this.element.appendChild(this.picker);const e=document.createElement("style");e.textContent='[role="slider"]:focus [part$="pointer"] {border: 1px solid #fff;outline: 1px solid var(--ck-color-focus-border);box-shadow: 0 0 0 2px #fff;}',this.picker.shadowRoot.appendChild(e)}this.picker.addEventListener("color-changed",e=>{const n=e.detail.value;this._debounceColorPickerEvent(n)})}focus(){/* istanbul ignore next -- @preserve */!this._config.hideInput&&(Xe.isGecko||Xe.isiOS||Xe.isSafari||Xe.isBlink)&&this.hexInputRow.children.get(1).focus(),this.slidersView.first.focus()}_createSlidersView(){const s=[...this.picker.shadowRoot.children].filter(r=>r.getAttribute("role")==="slider").map(r=>new fde(r));this.slidersView=this.createCollection(),s.forEach(r=>{this.slidersView.add(r)})}_createInputRow(){const e=this._createColorInput();return new gde(this.locale,e)}_createColorInput(){const e=new Mn(this.locale,$s),{t:n}=this.locale;return e.set({label:n("HEX"),class:"color-picker-hex-input"}),e.fieldView.bind("value").to(this,"_hexColor",s=>e.isFocused?e.fieldView.value:s.startsWith("#")?s.substring(1):s),e.fieldView.on("input",()=>{const s=e.fieldView.element.value;if(s){const r=yL(s);r&&this._debounceColorPickerEvent(r)}}),e}isValid(){const{t:e}=this.locale;return this._config.hideInput?!0:(this.resetValidationStatus(),this.hexInputRow.getParsedColor()?!0:(this.hexInputRow.inputView.errorText=e('Please enter a valid color (e.g. "ff0000").'),!1))}resetValidationStatus(){this.hexInputRow.inputView.errorText=null}}function O1(i){let t=Hue(i);return t||(t="#000"),t.length===4&&(t="#"+[t[1],t[1],t[2],t[2],t[3],t[3]].join("")),t.toLowerCase()}class fde extends Oe{constructor(t){super(),this.element=t}focus(){this.element.focus()}}class mde extends Oe{constructor(t){super(t),this.setTemplate({tag:"div",attributes:{class:["ck","ck-color-picker__hash-view"]},children:"#"})}}class gde extends Oe{constructor(e,n){super(e);b(this,"children");b(this,"inputView");this.inputView=n,this.children=this.createCollection([new mde,this.inputView]),this.setTemplate({tag:"div",attributes:{class:["ck","ck-color-picker__row"]},children:this.children})}getParsedColor(){return yL(this.inputView.fieldView.element.value)}}function yL(i){if(!i)return null;const t=i.trim().replace(/^#/,"");return![3,4,6,8].includes(t.length)||!/^(([0-9a-fA-F]{2}){3,4}|([0-9a-fA-F]){3,4})$/.test(t)?null:`#${t}`}class pde extends Vt(oi){constructor(t){super(t),this.set("isEmpty",!0),this.on("change",()=>{this.set("isEmpty",this.length===0)})}add(t,e){return this.find(n=>n.color===t.color)?this:super.add(t,e)}hasColor(t){return!!this.find(e=>e.color===t)}}class bde extends Oe{constructor(e,{colors:n,columns:s,removeButtonLabel:r,documentColorsLabel:o,documentColorsCount:a,colorPickerLabel:l,focusTracker:c,focusables:h}){super(e);b(this,"items");b(this,"colorDefinitions");b(this,"focusTracker");b(this,"columns");b(this,"documentColors");b(this,"documentColorsCount");b(this,"staticColorsGrid");b(this,"documentColorsGrid");b(this,"colorPickerButtonView");b(this,"removeColorButtonView");b(this,"_focusables");b(this,"_documentColorsLabel");b(this,"_removeButtonLabel");b(this,"_colorPickerLabel");const f=this.bindTemplate;this.set("isVisible",!0),this.focusTracker=c,this.items=this.createCollection(),this.colorDefinitions=n,this.columns=s,this.documentColors=new pde,this.documentColorsCount=a,this._focusables=h,this._removeButtonLabel=r,this._colorPickerLabel=l,this._documentColorsLabel=o,this.setTemplate({tag:"div",attributes:{class:["ck-color-grids-fragment",f.if("isVisible","ck-hidden",m=>!m)]},children:this.items}),this.removeColorButtonView=this._createRemoveColorButton(),this.items.add(this.removeColorButtonView)}updateDocumentColors(e,n){const s=e.document,r=this.documentColorsCount;this.documentColors.clear();for(const o of s.getRoots()){const a=e.createRangeIn(o);for(const l of a.getItems())if(l.is("$textProxy")&&l.hasAttribute(n)&&(this._addColorToDocumentColors(l.getAttribute(n)),this.documentColors.length>=r))return}}updateSelectedColors(){const e=this.documentColorsGrid,n=this.staticColorsGrid,s=this.selectedColor;n.selectedColor=s,e&&(e.selectedColor=s)}render(){if(super.render(),this.staticColorsGrid=this._createStaticColorsGrid(),this.items.add(this.staticColorsGrid),this.documentColorsCount){const e=Zi.bind(this.documentColors,this.documentColors),n=new Oe(this.locale);n.setTemplate({tag:"span",attributes:{class:["ck","ck-color-grid__label",e.if("isEmpty","ck-hidden")]},children:[{text:this._documentColorsLabel}]}),this.items.add(n),this.documentColorsGrid=this._createDocumentColorsGrid(),this.items.add(this.documentColorsGrid)}this._createColorPickerButton(),this._addColorSelectorElementsToFocusTracker()}focus(){this.removeColorButtonView.focus()}destroy(){super.destroy()}addColorPickerButton(){this.colorPickerButtonView&&(this.items.add(this.colorPickerButtonView),this.focusTracker.add(this.colorPickerButtonView.element),this._focusables.add(this.colorPickerButtonView))}_addColorSelectorElementsToFocusTracker(){this.focusTracker.add(this.removeColorButtonView.element),this._focusables.add(this.removeColorButtonView),this.staticColorsGrid&&(this.focusTracker.add(this.staticColorsGrid.element),this._focusables.add(this.staticColorsGrid)),this.documentColorsGrid&&(this.focusTracker.add(this.documentColorsGrid.element),this._focusables.add(this.documentColorsGrid))}_createColorPickerButton(){this.colorPickerButtonView=new rt,this.colorPickerButtonView.set({label:this._colorPickerLabel,withText:!0,icon:ke.colorPalette,class:"ck-color-selector__color-picker"}),this.colorPickerButtonView.on("execute",()=>{this.fire("colorPicker:show")})}_createRemoveColorButton(){const e=new rt;return e.set({withText:!0,icon:ke.eraser,label:this._removeButtonLabel}),e.class="ck-color-selector__remove-color",e.on("execute",()=>{this.fire("execute",{value:null,source:"removeColorButton"})}),e.render(),e}_createStaticColorsGrid(){const e=new nI(this.locale,{colorDefinitions:this.colorDefinitions,columns:this.columns});return e.on("execute",(n,s)=>{this.fire("execute",{value:s.value,source:"staticColorsGrid"})}),e}_createDocumentColorsGrid(){const e=Zi.bind(this.documentColors,this.documentColors),n=new nI(this.locale,{columns:this.columns});return n.extendTemplate({attributes:{class:e.if("isEmpty","ck-hidden")}}),n.items.bindTo(this.documentColors).using(s=>{const r=new lL;return r.set({color:s.color,hasBorder:s.options&&s.options.hasBorder}),s.label&&r.set({label:s.label,tooltip:!0}),r.on("execute",()=>{this.fire("execute",{value:s.color,source:"documentColorsGrid"})}),r}),this.documentColors.on("change:isEmpty",(s,r,o)=>{o&&(n.selectedColor=null)}),n}_addColorToDocumentColors(e){const n=this.colorDefinitions.find(s=>s.color===e);n?this.documentColors.add(Object.assign({},n)):this.documentColors.add({color:e,label:e,options:{hasBorder:!1}})}}class wde extends Oe{constructor(e,{focusTracker:n,focusables:s,keystrokes:r,colorPickerViewConfig:o}){super(e);b(this,"items");b(this,"colorPickerView");b(this,"saveButtonView");b(this,"cancelButtonView");b(this,"actionBarView");b(this,"focusTracker");b(this,"keystrokes");b(this,"_focusables");b(this,"_colorPickerViewConfig");this.items=this.createCollection(),this.focusTracker=n,this.keystrokes=r,this.set("isVisible",!1),this.set("selectedColor",void 0),this._focusables=s,this._colorPickerViewConfig=o;const a=this.bindTemplate,{saveButtonView:l,cancelButtonView:c}=this._createActionButtons();this.saveButtonView=l,this.cancelButtonView=c,this.actionBarView=this._createActionBarView({saveButtonView:l,cancelButtonView:c}),this.setTemplate({tag:"div",attributes:{class:["ck-color-picker-fragment",a.if("isVisible","ck-hidden",h=>!h)]},children:this.items})}render(){super.render();const e=new hde(this.locale,{...this._colorPickerViewConfig});this.colorPickerView=e,this.colorPickerView.render(),this.selectedColor&&(e.color=this.selectedColor),this.listenTo(this,"change:selectedColor",(n,s,r)=>{e.color=r}),this.items.add(this.colorPickerView),this.items.add(this.actionBarView),this._addColorPickersElementsToFocusTracker(),this._stopPropagationOnArrowsKeys(),this._executeOnEnterPress(),this._executeUponColorChange()}destroy(){super.destroy()}focus(){this.colorPickerView.focus()}resetValidationStatus(){this.colorPickerView.resetValidationStatus()}_executeOnEnterPress(){this.keystrokes.set("enter",e=>{this.isVisible&&this.focusTracker.focusedElement!==this.cancelButtonView.element&&this.colorPickerView.isValid()&&(this.fire("execute",{value:this.selectedColor}),e.stopPropagation(),e.preventDefault())})}_stopPropagationOnArrowsKeys(){const e=n=>n.stopPropagation();this.keystrokes.set("arrowright",e),this.keystrokes.set("arrowleft",e),this.keystrokes.set("arrowup",e),this.keystrokes.set("arrowdown",e)}_addColorPickersElementsToFocusTracker(){for(const n of this.colorPickerView.slidersView)this.focusTracker.add(n.element),this._focusables.add(n);const e=this.colorPickerView.hexInputRow.children.get(1);e.element&&(this.focusTracker.add(e.element),this._focusables.add(e)),this.focusTracker.add(this.saveButtonView.element),this._focusables.add(this.saveButtonView),this.focusTracker.add(this.cancelButtonView.element),this._focusables.add(this.cancelButtonView)}_createActionBarView({saveButtonView:e,cancelButtonView:n}){const s=new Oe,r=this.createCollection();return r.add(e),r.add(n),s.setTemplate({tag:"div",attributes:{class:["ck","ck-color-selector_action-bar"]},children:r}),s}_createActionButtons(){const e=this.locale,n=e.t,s=new rt(e),r=new rt(e);return s.set({icon:ke.check,class:"ck-button-save",type:"button",withText:!1,label:n("Accept")}),r.set({icon:ke.cancel,class:"ck-button-cancel",type:"button",withText:!1,label:n("Cancel")}),s.on("execute",()=>{this.colorPickerView.isValid()&&this.fire("execute",{source:"colorPickerSaveButton",value:this.selectedColor})}),r.on("execute",()=>{this.fire("colorPicker:cancel")}),{saveButtonView:s,cancelButtonView:r}}_executeUponColorChange(){this.colorPickerView.on("colorSelected",(e,n)=>{this.fire("execute",{value:n.color,source:"colorPicker"}),this.set("selectedColor",n.color)})}}class yC extends Oe{constructor(e,{colors:n,columns:s,removeButtonLabel:r,documentColorsLabel:o,documentColorsCount:a,colorPickerLabel:l,colorPickerViewConfig:c}){super(e);b(this,"focusTracker");b(this,"keystrokes");b(this,"items");b(this,"colorGridsFragmentView");b(this,"colorPickerFragmentView");b(this,"_focusCycler");b(this,"_focusables");b(this,"_colorPickerViewConfig");this.items=this.createCollection(),this.focusTracker=new ln,this.keystrokes=new wn,this._focusables=new ai,this._colorPickerViewConfig=c,this._focusCycler=new Oi({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.colorGridsFragmentView=new bde(e,{colors:n,columns:s,removeButtonLabel:r,documentColorsLabel:o,documentColorsCount:a,colorPickerLabel:l,focusTracker:this.focusTracker,focusables:this._focusables}),this.colorPickerFragmentView=new wde(e,{focusables:this._focusables,focusTracker:this.focusTracker,keystrokes:this.keystrokes,colorPickerViewConfig:c}),this.set("_isColorGridsFragmentVisible",!0),this.set("_isColorPickerFragmentVisible",!1),this.set("selectedColor",void 0),this.colorGridsFragmentView.bind("isVisible").to(this,"_isColorGridsFragmentVisible"),this.colorPickerFragmentView.bind("isVisible").to(this,"_isColorPickerFragmentVisible"),this.on("change:selectedColor",(h,f,m)=>{this.colorGridsFragmentView.set("selectedColor",m),this.colorPickerFragmentView.set("selectedColor",m)}),this.colorGridsFragmentView.on("change:selectedColor",(h,f,m)=>{this.set("selectedColor",m)}),this.colorPickerFragmentView.on("change:selectedColor",(h,f,m)=>{this.set("selectedColor",m)}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-color-selector"]},children:this.items})}render(){super.render(),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}appendUI(){this._appendColorGridsFragment(),this._colorPickerViewConfig&&this._appendColorPickerFragment()}showColorPickerFragment(){!this.colorPickerFragmentView.colorPickerView||this._isColorPickerFragmentVisible||(this._isColorPickerFragmentVisible=!0,this.colorPickerFragmentView.focus(),this.colorPickerFragmentView.resetValidationStatus(),this._isColorGridsFragmentVisible=!1)}showColorGridsFragment(){this._isColorGridsFragmentVisible||(this._isColorGridsFragmentVisible=!0,this.colorGridsFragmentView.focus(),this._isColorPickerFragmentVisible=!1)}focus(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}updateDocumentColors(e,n){this.colorGridsFragmentView.updateDocumentColors(e,n)}updateSelectedColors(){this.colorGridsFragmentView.updateSelectedColors()}_appendColorGridsFragment(){this.items.length||(this.items.add(this.colorGridsFragmentView),this.colorGridsFragmentView.delegate("execute").to(this),this.colorGridsFragmentView.delegate("colorPicker:show").to(this))}_appendColorPickerFragment(){this.items.length!==2&&(this.items.add(this.colorPickerFragmentView),this.colorGridsFragmentView.colorPickerButtonView&&this.colorGridsFragmentView.colorPickerButtonView.on("execute",()=>{this.showColorPickerFragment()}),this.colorGridsFragmentView.addColorPickerButton(),this.colorPickerFragmentView.delegate("execute").to(this),this.colorPickerFragmentView.delegate("colorPicker:cancel").to(this))}}class vde{constructor(t){b(this,"editor");b(this,"_components",new Map);this.editor=t}*names(){for(const t of this._components.values())yield t.originalName}add(t,e){this._components.set(N1(t),{callback:e,originalName:t})}create(t){if(!this.has(t))throw new B("componentfactory-item-missing",this,{name:t});return this._components.get(N1(t)).callback(this.editor.locale)}has(t){return this._components.has(N1(t))}}function N1(i){return String(i).toLowerCase()}const oI="ck-tooltip",qn=class qn extends Ri(){constructor(e){super();b(this,"tooltipTextView");b(this,"balloonPanelView");b(this,"_currentElementWithTooltip",null);b(this,"_currentTooltipPosition",null);b(this,"_mutationObserver",null);b(this,"_pinTooltipDebounced");b(this,"_unpinTooltipDebounced");b(this,"_watchdogExcluded");if(qn._editors.add(e),qn._instance)return qn._instance;qn._instance=this,this.tooltipTextView=new Oe(e.locale),this.tooltipTextView.set("text",""),this.tooltipTextView.setTemplate({tag:"span",attributes:{class:["ck","ck-tooltip__text"]},children:[{text:this.tooltipTextView.bindTemplate.to("text")}]}),this.balloonPanelView=new Ti(e.locale),this.balloonPanelView.class=oI,this.balloonPanelView.content.add(this.tooltipTextView),this._mutationObserver=yde(()=>{this._updateTooltipPosition()}),this._pinTooltipDebounced=qs(this._pinTooltip,600),this._unpinTooltipDebounced=qs(this._unpinTooltip,400),this.listenTo(Re.document,"keydown",this._onKeyDown.bind(this),{useCapture:!0}),this.listenTo(Re.document,"mouseenter",this._onEnterOrFocus.bind(this),{useCapture:!0}),this.listenTo(Re.document,"mouseleave",this._onLeaveOrBlur.bind(this),{useCapture:!0}),this.listenTo(Re.document,"focus",this._onEnterOrFocus.bind(this),{useCapture:!0}),this.listenTo(Re.document,"blur",this._onLeaveOrBlur.bind(this),{useCapture:!0}),this.listenTo(Re.document,"scroll",this._onScroll.bind(this),{useCapture:!0}),this._watchdogExcluded=!0}destroy(e){const n=e.ui.view&&e.ui.view.body;qn._editors.delete(e),this.stopListening(e.ui),n&&n.has(this.balloonPanelView)&&n.remove(this.balloonPanelView),qn._editors.size||(this._unpinTooltip(),this.balloonPanelView.destroy(),this.stopListening(),qn._instance=null)}static getPositioningFunctions(e){const n=qn.defaultBalloonPositions;return{s:[n.southArrowNorth,n.southArrowNorthEast,n.southArrowNorthWest],n:[n.northArrowSouth],e:[n.eastArrowWest],w:[n.westArrowEast],sw:[n.southArrowNorthEast],se:[n.southArrowNorthWest]}[e]}_onKeyDown(e,n){n.key==="Escape"&&this._currentElementWithTooltip&&(this._unpinTooltip(),n.stopPropagation())}_onEnterOrFocus(e,{target:n}){const s=M1(n);if(!s){e.name==="focus"&&this._unpinTooltip();return}if(s===this._currentElementWithTooltip){this._unpinTooltipDebounced.cancel();return}this._unpinTooltip(),e.name==="focus"&&!s.matches(":hover")||s.matches("[data-cke-tooltip-instant]")?this._pinTooltip(s,L1(s)):this._pinTooltipDebounced(s,L1(s))}_onLeaveOrBlur(e,{target:n,relatedTarget:s}){if(e.name==="mouseleave"){if(!$a(n))return;const r=this.balloonPanelView.element,o=r&&(r===s||r.contains(s)),a=!o&&n===r;if(o){this._unpinTooltipDebounced.cancel();return}if(!a&&this._currentElementWithTooltip&&n!==this._currentElementWithTooltip)return;const l=M1(n),c=M1(s);(a||l&&l!==c)&&(this._pinTooltipDebounced.cancel(),this._currentElementWithTooltip&&this._currentElementWithTooltip.matches("[data-cke-tooltip-instant]")||l&&l.matches("[data-cke-tooltip-instant]")?this._unpinTooltip():this._unpinTooltipDebounced())}else{if(this._currentElementWithTooltip&&n!==this._currentElementWithTooltip)return;this._pinTooltipDebounced.cancel(),this._unpinTooltipDebounced()}}_onScroll(e,{target:n}){this._currentElementWithTooltip&&(n.contains(this.balloonPanelView.element)&&n.contains(this._currentElementWithTooltip)||this._unpinTooltip())}_pinTooltip(e,{text:n,position:s,cssClass:r}){this._unpinTooltip();const o=Tn(qn._editors.values()).ui.view.body;o.has(this.balloonPanelView)||o.add(this.balloonPanelView),this.tooltipTextView.text=n,this.balloonPanelView.class=[oI,r].filter(a=>a).join(" "),this.balloonPanelView.pin({target:e,positions:qn.getPositioningFunctions(s)}),this._mutationObserver.attach(e);for(const a of qn._editors)this.listenTo(a.ui,"update",this._updateTooltipPosition.bind(this),{priority:"low"});this._currentElementWithTooltip=e,this._currentTooltipPosition=s}_unpinTooltip(){this._unpinTooltipDebounced.cancel(),this._pinTooltipDebounced.cancel(),this.balloonPanelView.unpin();for(const e of qn._editors)this.stopListening(e.ui,"update");this._currentElementWithTooltip=null,this._currentTooltipPosition=null,this.tooltipTextView.text="",this._mutationObserver.detach()}_updateTooltipPosition(){if(!this._currentElementWithTooltip)return;const e=L1(this._currentElementWithTooltip);if(!Wo(this._currentElementWithTooltip)||!e.text){this._unpinTooltip();return}this.balloonPanelView.pin({target:this._currentElementWithTooltip,positions:qn.getPositioningFunctions(e.position)})}};b(qn,"defaultBalloonPositions",Ti.generatePositions({heightOffset:5,sideOffset:13})),b(qn,"_editors",new Set),b(qn,"_instance",null);let d_=qn;function M1(i){return $a(i)?i.closest("[data-cke-tooltip-text]:not([data-cke-tooltip-disabled])"):null}function L1(i){return{text:i.dataset.ckeTooltipText,position:i.dataset.ckeTooltipPosition||"s",cssClass:i.dataset.ckeTooltipClass||""}}function yde(i){const t=new MutationObserver(()=>{i()});return{attach(e){t.observe(e,{attributes:!0,attributeFilter:["data-cke-tooltip-text","data-cke-tooltip-position"]})},detach(){t.disconnect()}}}const _de=50,Ede=350;class _L extends Ri(){constructor(e,n={}){super();b(this,"editor");b(this,"_balloonView",null);b(this,"_showBalloonThrottled",$u(()=>this._showBalloon(),50,{leading:!0}));b(this,"_lastFocusedEditableElement",null);b(this,"_balloonClass");this.editor=e,this._balloonClass=n.balloonClass,e.on("ready",()=>this._handleEditorReady())}destroy(){const e=this._balloonView;e&&(e.unpin(),this._balloonView=null),this._showBalloonThrottled.cancel(),this.stopListening()}_handleEditorReady(){const e=this.editor;this._isEnabled()&&e.ui.view&&(e.ui.focusTracker.on("change:isFocused",(n,s,r)=>{this._updateLastFocusedEditableElement(),r?this._showBalloon():this._hideBalloon()}),e.ui.focusTracker.on("change:focusedElement",(n,s,r)=>{this._updateLastFocusedEditableElement(),r&&this._showBalloon()}),e.ui.on("update",()=>{this._showBalloonThrottled()}))}_getNormalizedConfig(){return{side:this.editor.locale.contentLanguageDirection==="ltr"?"right":"left",position:"border",verticalOffset:0,horizontalOffset:5}}_showBalloon(){const e=this._getBalloonAttachOptions();e&&(this._balloonView||(this._balloonView=this._createBalloonView()),this._balloonView.pin(e))}_hideBalloon(){this._balloonView&&this._balloonView.unpin()}_createBalloonView(){const e=this.editor,n=new Ti,s=this._createBadgeContent();return n.content.add(s),this._balloonClass&&(n.class=this._balloonClass),e.ui.view.body.add(n),n}_getBalloonAttachOptions(){if(!this._lastFocusedEditableElement)return null;const e=this._getNormalizedConfig(),n=e.side==="right"?Cde(this._lastFocusedEditableElement,e):xde(this._lastFocusedEditableElement,e);return{target:this._lastFocusedEditableElement,positions:[n]}}_updateLastFocusedEditableElement(){const e=this.editor,n=e.ui.focusTracker.isFocused,s=e.ui.focusTracker.focusedElement;if(!n||!s){this._lastFocusedEditableElement=null;return}const r=Array.from(e.ui.getEditableElementsNames()).map(o=>e.ui.getEditableElement(o));r.includes(s)?this._lastFocusedEditableElement=s:this._lastFocusedEditableElement=r[0]}}function Cde(i,t){return EL(i,t,(e,n)=>e.left+e.width-n.width-t.horizontalOffset)}function xde(i,t){return EL(i,t,e=>e.left+t.horizontalOffset)}function EL(i,t,e){return(n,s)=>{const r=new at(i);if(r.width<Ede||r.height<_de)return null;let o;t.position==="inside"?o=r.bottom-s.height:o=r.bottom-s.height/2,o-=t.verticalOffset;const a=e(r,s),c=n.clone().moveTo(a,o).getIntersection(s.clone().moveTo(a,o)).getVisible();return!c||c.getArea()<s.getArea()?null:{top:o,left:a,name:`position_${t.position}-side_${t.side}`,config:{withArrow:!1}}}}var Tde=`<svg xmlns="http://www.w3.org/2000/svg" width="53" height="10" viewBox="0 0 53 10"><path fill="#1C2331" d="M31.724 1.492a15.139 15.139 0 0 0 .045 1.16 2.434 2.434 0 0 0-.687-.34 3.68 3.68 0 0 0-1.103-.166 2.332 2.332 0 0 0-1.14.255 1.549 1.549 0 0 0-.686.87c-.15.41-.225.98-.225 1.712 0 .939.148 1.659.444 2.161.297.503.792.754 1.487.754.452.015.9-.094 1.294-.316.296-.174.557-.4.771-.669l.14.852h1.282V.007h-1.623v1.485ZM31 6.496a1.77 1.77 0 0 1-.494.061.964.964 0 0 1-.521-.127.758.758 0 0 1-.296-.466 3.984 3.984 0 0 1-.093-.992 4.208 4.208 0 0 1 .098-1.052.753.753 0 0 1 .307-.477 1.08 1.08 0 0 1 .55-.122c.233-.004.466.026.69.089l.483.144v2.553c-.11.076-.213.143-.307.2a1.73 1.73 0 0 1-.417.189ZM35.68 0l-.702.004c-.322.002-.482.168-.48.497l.004.581c.002.33.164.493.486.49l.702-.004c.322-.002.481-.167.48-.496L36.165.49c-.002-.33-.164-.493-.486-.491ZM36.145 2.313l-1.612.01.034 5.482 1.613-.01-.035-5.482ZM39.623.79 37.989.8 38 2.306l-.946.056.006 1.009.949-.006.024 2.983c.003.476.143.844.419 1.106.275.26.658.39 1.148.387.132 0 .293-.01.483-.03.19-.02.38-.046.57-.08.163-.028.324-.068.482-.119l-.183-1.095-.702.004a.664.664 0 0 1-.456-.123.553.553 0 0 1-.14-.422l-.016-2.621 1.513-.01-.006-1.064-1.514.01-.01-1.503ZM46.226 2.388c-.41-.184-.956-.274-1.636-.27-.673.004-1.215.101-1.627.29-.402.179-.72.505-.888.91-.18.419-.268.979-.264 1.68.004.688.1 1.24.285 1.655.172.404.495.724.9.894.414.18.957.268 1.63.264.68-.004 1.224-.099 1.632-.284.4-.176.714-.501.878-.905.176-.418.263-.971.258-1.658-.004-.702-.097-1.261-.28-1.677a1.696 1.696 0 0 0-.888-.9Zm-.613 3.607a.77.77 0 0 1-.337.501 1.649 1.649 0 0 1-1.317.009.776.776 0 0 1-.343-.497 4.066 4.066 0 0 1-.105-1.02 4.136 4.136 0 0 1 .092-1.03.786.786 0 0 1 .337-.507 1.59 1.59 0 0 1 1.316-.008.79.79 0 0 1 .344.502c.078.337.113.683.105 1.03.012.343-.019.685-.092 1.02ZM52.114 2.07a2.67 2.67 0 0 0-1.128.278c-.39.191-.752.437-1.072.73l-.157-.846-1.273.008.036 5.572 1.623-.01-.024-3.78c.35-.124.646-.22.887-.286.26-.075.53-.114.8-.118l.45-.003.144-1.546-.286.001ZM22.083 7.426l-1.576-2.532a2.137 2.137 0 0 0-.172-.253 1.95 1.95 0 0 0-.304-.29.138.138 0 0 1 .042-.04 1.7 1.7 0 0 0 .328-.374l1.75-2.71c.01-.015.025-.028.024-.048-.01-.01-.021-.007-.031-.007L20.49 1.17a.078.078 0 0 0-.075.045l-.868 1.384c-.23.366-.46.732-.688 1.099a.108.108 0 0 1-.112.06c-.098-.005-.196-.001-.294-.002-.018 0-.038.006-.055-.007.002-.02.002-.039.005-.058a4.6 4.6 0 0 0 .046-.701V1.203c0-.02-.009-.032-.03-.03h-.033L16.93 1.17c-.084 0-.073-.01-.073.076v6.491c-.001.018.006.028.025.027h1.494c.083 0 .072.007.072-.071v-2.19c0-.055-.003-.11-.004-.166a3.366 3.366 0 0 0-.05-.417h.06c.104 0 .209.002.313-.002a.082.082 0 0 1 .084.05c.535.913 1.07 1.824 1.607 2.736a.104.104 0 0 0 .103.062c.554-.003 1.107-.002 1.66-.002l.069-.003-.019-.032-.188-.304ZM27.112 6.555c-.005-.08-.004-.08-.082-.08h-2.414c-.053 0-.106-.003-.159-.011a.279.279 0 0 1-.246-.209.558.558 0 0 1-.022-.15c0-.382 0-.762-.002-1.143 0-.032.007-.049.042-.044h2.504c.029.003.037-.012.034-.038V3.814c0-.089.013-.078-.076-.078h-2.44c-.07 0-.062.003-.062-.06v-.837c0-.047.004-.093.013-.14a.283.283 0 0 1 .241-.246.717.717 0 0 1 .146-.011h2.484c.024.002.035-.009.036-.033l.003-.038.03-.496c.01-.183.024-.365.034-.548.005-.085.003-.087-.082-.094-.218-.018-.437-.038-.655-.05a17.845 17.845 0 0 0-.657-.026 72.994 72.994 0 0 0-1.756-.016 1.7 1.7 0 0 0-.471.064 1.286 1.286 0 0 0-.817.655c-.099.196-.149.413-.145.633v3.875c0 .072.003.144.011.216a1.27 1.27 0 0 0 .711 1.029c.228.113.48.167.734.158.757-.005 1.515.002 2.272-.042.274-.016.548-.034.82-.053.03-.002.043-.008.04-.041-.008-.104-.012-.208-.019-.312a69.964 69.964 0 0 1-.05-.768ZM16.14 7.415l-.127-1.075c-.004-.03-.014-.04-.044-.037a13.125 13.125 0 0 1-.998.073c-.336.01-.672.02-1.008.016-.116-.001-.233-.014-.347-.039a.746.746 0 0 1-.45-.262c-.075-.1-.132-.211-.167-.33a3.324 3.324 0 0 1-.126-.773 9.113 9.113 0 0 1-.015-.749c0-.285.022-.57.065-.852.023-.158.066-.312.127-.46a.728.728 0 0 1 .518-.443 1.64 1.64 0 0 1 .397-.048c.628-.001 1.255.003 1.882.05.022.001.033-.006.036-.026l.003-.031.06-.55c.019-.177.036-.355.057-.532.004-.034-.005-.046-.04-.056a5.595 5.595 0 0 0-1.213-.21 10.783 10.783 0 0 0-.708-.02c-.24-.003-.48.01-.719.041a3.477 3.477 0 0 0-.625.14 1.912 1.912 0 0 0-.807.497c-.185.2-.33.433-.424.688a4.311 4.311 0 0 0-.24 1.096c-.031.286-.045.572-.042.86-.006.43.024.86.091 1.286.04.25.104.497.193.734.098.279.26.53.473.734.214.205.473.358.756.446.344.11.702.17 1.063.177a8.505 8.505 0 0 0 1.578-.083 6.11 6.11 0 0 0 .766-.18c.03-.008.047-.023.037-.057a.157.157 0 0 1-.003-.025Z"/><path fill="#AFE229" d="M6.016 6.69a1.592 1.592 0 0 0-.614.21c-.23.132-.422.32-.56.546-.044.072-.287.539-.287.539l-.836 1.528.009.006c.038.025.08.046.123.063.127.046.26.07.395.073.505.023 1.011-.007 1.517-.003.29.009.58.002.869-.022a.886.886 0 0 0 .395-.116.962.962 0 0 0 .312-.286c.056-.083.114-.163.164-.249.24-.408.48-.816.718-1.226.075-.128.148-.257.222-.386l.112-.192a1.07 1.07 0 0 0 .153-.518l-1.304.023s-1.258-.005-1.388.01Z"/><path fill="#771BFF" d="m2.848 9.044.76-1.39.184-.352c-.124-.067-.245-.14-.367-.21-.346-.204-.706-.384-1.045-.6a.984.984 0 0 1-.244-.207c-.108-.134-.136-.294-.144-.46-.021-.409-.002-.818-.009-1.227-.003-.195 0-.39.003-.585.004-.322.153-.553.427-.713l.833-.488c.22-.13.44-.257.662-.385.05-.029.105-.052.158-.077.272-.128.519-.047.76.085l.044.028c.123.06.242.125.358.196.318.178.635.357.952.537.095.056.187.117.275.184.194.144.254.35.266.578.016.284.007.569.006.853-.001.28.004.558 0 .838.592-.003 1.259 0 1.259 0l.723-.013c-.003-.292-.007-.584-.007-.876 0-.524.015-1.048-.016-1.571-.024-.42-.135-.8-.492-1.067a5.02 5.02 0 0 0-.506-.339A400.52 400.52 0 0 0 5.94.787C5.722.664 5.513.524 5.282.423 5.255.406 5.228.388 5.2.373 4.758.126 4.305-.026 3.807.21c-.097.046-.197.087-.29.14A699.896 699.896 0 0 0 .783 1.948c-.501.294-.773.717-.778 1.31-.004.36-.009.718-.001 1.077.016.754-.017 1.508.024 2.261.016.304.07.6.269.848.127.15.279.28.448.382.622.4 1.283.734 1.92 1.11l.183.109Z"/></svg>
`;const kde="Powered by";class Sde extends _L{constructor(t){super(t,{balloonClass:"ck-powered-by-balloon"})}_isEnabled(){const t=this.editor;if(t.config.get("ui.poweredBy.forceVisible"))return!0;const n=t.config.get("licenseKey");if(n=="GPL")return!0;const s=QE(n.split(".")[1]);return s?!s.whiteLabel:!0}_createBadgeContent(){return new Ade(this.editor.locale,this._getNormalizedConfig().label)}_getNormalizedConfig(){const t=super._getNormalizedConfig(),e=this.editor.config.get("ui.poweredBy")||{},n=e.position||t.position,s=n==="inside"?5:t.verticalOffset;return{position:n,side:e.side||t.side,label:e.label===void 0?kde:e.label,verticalOffset:e.verticalOffset!==void 0?e.verticalOffset:s,horizontalOffset:e.horizontalOffset!==void 0?e.horizontalOffset:t.horizontalOffset,forceVisible:!!e.forceVisible}}}class Ade extends Oe{constructor(t,e){super(t);const n=new lo,s=this.bindTemplate;n.set({content:Tde,isColorInherited:!1}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-powered-by"],"aria-hidden":!0},children:[{tag:"a",attributes:{href:"https://ckeditor.com/powered-by-ckeditor/?utm_source=ckeditor&utm_medium=referral&utm_campaign=701Dn000000hVgmIAE_powered_by_ckeditor_logo",target:"_blank",tabindex:"-1"},children:[...e?[{tag:"span",attributes:{class:["ck","ck-powered-by__label"]},children:[e]}]:[],n],on:{dragstart:s.to(r=>r.preventDefault())}}]})}}class Pde extends _L{constructor(e){super(e,{balloonClass:"ck-evaluation-badge-balloon"});b(this,"licenseTypeMessage",{evaluation:"For evaluation purposes only",trial:"For evaluation purposes only",development:"For development purposes only"})}_isEnabled(){const n=this.editor.config.get("licenseKey"),s=aI(n);return!!(s&&this.licenseTypeMessage[s])}_createBadgeContent(){const e=this.editor.config.get("licenseKey"),n=aI(e);return new Ide(this.editor.locale,this.licenseTypeMessage[n])}_getNormalizedConfig(){const e=super._getNormalizedConfig(),n=this.editor.config.get("ui.poweredBy")||{},s=n.position||e.position,r=n.side||e.side;return{position:s,side:r==="left"?"right":"left",verticalOffset:e.verticalOffset,horizontalOffset:e.horizontalOffset}}}class Ide extends Oe{constructor(t,e){super(t),this.setTemplate({tag:"div",attributes:{class:["ck","ck-evaluation-badge"],"aria-hidden":!0},children:[{tag:"span",attributes:{class:["ck","ck-evaluation-badge__label"]},children:[e]}]})}}function aI(i){if(i=="GPL")return"GPL";const t=QE(i.split(".")[1]);return t?t.licenseType||"production":null}const lI={POLITE:"polite",ASSERTIVE:"assertive"};class Rde{constructor(t){b(this,"editor");b(this,"view");this.editor=t,t.once("ready",()=>{for(const e of Object.values(lI))this.announce("",e)})}announce(t,e=lI.POLITE){const n=this.editor;if(!n.ui.view)return;this.view||(this.view=new Ode(n.locale),n.ui.view.body.add(this.view));const{politeness:s,isUnsafeHTML:r}=typeof e=="string"?{politeness:e}:e;let o=this.view.regionViews.find(a=>a.politeness===s);o||(o=new Nde(n,s),this.view.regionViews.add(o)),o.announce({announcement:t,isUnsafeHTML:r})}}class Ode extends Oe{constructor(e){super(e);b(this,"regionViews");this.regionViews=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-aria-live-announcer"]},children:this.regionViews})}}class Nde extends Oe{constructor(e,n){super(e.locale);b(this,"politeness");b(this,"_domConverter");b(this,"_pruneAnnouncementsInterval");this.setTemplate({tag:"div",attributes:{"aria-live":n,"aria-relevant":"additions"},children:[{tag:"ul",attributes:{class:["ck","ck-aria-live-region-list"]}}]}),e.on("destroy",()=>{this._pruneAnnouncementsInterval!==null&&(clearInterval(this._pruneAnnouncementsInterval),this._pruneAnnouncementsInterval=null)}),this.politeness=n,this._domConverter=e.data.htmlProcessor.domConverter,this._pruneAnnouncementsInterval=setInterval(()=>{this.element&&this._listElement.firstChild&&this._listElement.firstChild.remove()},5e3)}announce({announcement:e,isUnsafeHTML:n}){if(!e.trim().length)return;const s=document.createElement("li");n?this._domConverter.setContentOf(s,e):s.innerText=e,this._listElement.appendChild(s)}get _listElement(){return this.element.querySelector("ul")}}class ac extends Go{constructor(t,e){super(t);const n=this.bindTemplate;this.extendTemplate({attributes:{class:["ck-menu-bar__menu__item"]},on:{mouseenter:n.to("mouseenter")}}),this.delegate("mouseenter").to(e)}}const Ag=5,Xc={toggleMenusAndFocusItemsOnHover(i){i.on("menu:mouseenter",t=>{if(!(!i.isFocusBorderEnabled&&!i.isOpen)){if(i.isOpen)for(const e of i.menus){const n=t.path[0],s=n instanceof ac&&n.children.first===e;e.isOpen=(t.path.includes(e)||s)&&e.isEnabled}t.source.focus()}})},focusCycleMenusOnArrows(i){const t=i.locale.uiLanguageDirection==="rtl";i.on("menu:arrowright",n=>{e(n.source,t?-1:1)}),i.on("menu:arrowleft",n=>{e(n.source,t?1:-1)});function e(n,s){const r=i.children.getIndex(n),o=n.isOpen,a=i.children.length,l=i.children.get((r+a+s)%a);n.isOpen=!1,o&&(l.isOpen=!0),l.buttonView.focus()}},closeMenusWhenTheBarCloses(i){i.on("change:isOpen",()=>{i.isOpen||i.menus.forEach(t=>{t.isOpen=!1})})},closeMenuWhenAnotherOnTheSameLevelOpens(i){i.on("menu:change:isOpen",(t,e,n)=>{n&&i.menus.filter(s=>t.source.parentMenuView===s.parentMenuView&&t.source!==s&&s.isOpen).forEach(s=>{s.isOpen=!1})})},closeOnClickOutside(i){Za({emitter:i,activator:()=>i.isOpen,callback:()=>i.close(),contextElements:()=>i.children.map(t=>t.element)})},enableFocusHighlightOnInteraction(i){let t=!1;i.on("change:isOpen",(e,n,s)=>{s||(t||(i.isFocusBorderEnabled=!1),t=!1)}),i.listenTo(i.element,"keydown",()=>{t=!0},{useCapture:!0}),i.listenTo(i.element,"keyup",()=>{t=!1},{useCapture:!0}),i.listenTo(i.element,"focus",()=>{t&&(i.isFocusBorderEnabled=!0)},{useCapture:!0})}},_a={openAndFocusPanelOnArrowDownKey(i){i.keystrokes.set("arrowdown",(t,e)=>{i.focusTracker.focusedElement===i.buttonView.element&&(i.isOpen||(i.isOpen=!0),i.panelView.focus(),e())})},openOnArrowRightKey(i){const t=i.locale.uiLanguageDirection==="rtl"?"arrowleft":"arrowright";i.keystrokes.set(t,(e,n)=>{i.focusTracker.focusedElement!==i.buttonView.element||!i.isEnabled||(i.isOpen||(i.isOpen=!0),i.panelView.focus(),n())})},openOnButtonClick(i){i.buttonView.on("execute",()=>{i.isOpen=!0})},toggleOnButtonClick(i){i.buttonView.on("execute",()=>{i.isOpen=!i.isOpen})},openAndFocusOnEnterKeyPress(i){i.keystrokes.set("enter",(t,e)=>{i.focusTracker.focusedElement===i.buttonView.element&&(i.isOpen=!0,i.panelView.focus(),e())})},closeOnArrowLeftKey(i){const t=i.locale.uiLanguageDirection==="rtl"?"arrowright":"arrowleft";i.keystrokes.set(t,(e,n)=>{i.isOpen&&(i.isOpen=!1,i.focus(),n())})},closeOnEscKey(i){i.keystrokes.set("esc",(t,e)=>{i.isOpen&&(i.isOpen=!1,i.focus(),e())})},closeOnParentClose(i){i.parentMenuView.on("change:isOpen",(t,e,n)=>{!n&&t.source===i.parentMenuView&&(i.isOpen=!1)})}},Mde={southEast:i=>({top:i.bottom,left:i.left,name:"se"}),southWest:(i,t)=>({top:i.bottom,left:i.left-t.width+i.width,name:"sw"}),northEast:(i,t)=>({top:i.top-t.height,left:i.left,name:"ne"}),northWest:(i,t)=>({top:i.top-t.height,left:i.left-t.width+i.width,name:"nw"}),eastSouth:i=>({top:i.top,left:i.right-Ag,name:"es"}),eastNorth:(i,t)=>({top:i.top-t.height,left:i.right-Ag,name:"en"}),westSouth:(i,t)=>({top:i.top,left:i.left-t.width+Ag,name:"ws"}),westNorth:(i,t)=>({top:i.top-t.height,left:i.left-t.width+Ag,name:"wn"})},Lde=[{menuId:"file",label:"File",groups:[{groupId:"export",items:["menuBar:exportPdf","menuBar:exportWord"]},{groupId:"import",items:["menuBar:importWord"]},{groupId:"revisionHistory",items:["menuBar:revisionHistory"]}]},{menuId:"edit",label:"Edit",groups:[{groupId:"undo",items:["menuBar:undo","menuBar:redo"]},{groupId:"selectAll",items:["menuBar:selectAll"]},{groupId:"findAndReplace",items:["menuBar:findAndReplace"]}]},{menuId:"view",label:"View",groups:[{groupId:"sourceEditingEnhanced",items:["menuBar:sourceEditingEnhanced"]},{groupId:"sourceEditing",items:["menuBar:sourceEditing"]},{groupId:"showBlocks",items:["menuBar:showBlocks"]},{groupId:"previewMergeFields",items:["menuBar:previewMergeFields"]},{groupId:"restrictedEditing",items:["menuBar:restrictedEditing"]}]},{menuId:"insert",label:"Insert",groups:[{groupId:"insertMainWidgets",items:["menuBar:insertImage","menuBar:ckbox","menuBar:ckfinder","menuBar:insertTable"]},{groupId:"insertInline",items:["menuBar:link","menuBar:bookmark","menuBar:comment","menuBar:insertMergeField","menuBar:emoji"]},{groupId:"insertMinorWidgets",items:["menuBar:mediaEmbed","menuBar:insertTemplate","menuBar:specialCharacters","menuBar:blockQuote","menuBar:codeBlock","menuBar:htmlEmbed"]},{groupId:"insertStructureWidgets",items:["menuBar:horizontalLine","menuBar:pageBreak","menuBar:tableOfContents"]},{groupId:"restrictedEditingException",items:["menuBar:restrictedEditingException"]}]},{menuId:"format",label:"Format",groups:[{groupId:"textAndFont",items:[{menuId:"text",label:"Text",groups:[{groupId:"basicStyles",items:["menuBar:bold","menuBar:italic","menuBar:underline","menuBar:strikethrough","menuBar:superscript","menuBar:subscript","menuBar:code"]},{groupId:"textPartLanguage",items:["menuBar:textPartLanguage"]}]},{menuId:"font",label:"Font",groups:[{groupId:"fontProperties",items:["menuBar:fontSize","menuBar:fontFamily"]},{groupId:"fontColors",items:["menuBar:fontColor","menuBar:fontBackgroundColor"]},{groupId:"highlight",items:["menuBar:highlight"]}]},"menuBar:heading"]},{groupId:"list",items:["menuBar:bulletedList","menuBar:numberedList","menuBar:multiLevelList","menuBar:todoList"]},{groupId:"indent",items:["menuBar:alignment","menuBar:indent","menuBar:outdent"]},{groupId:"caseChange",items:["menuBar:caseChange"]},{groupId:"removeFormat",items:["menuBar:removeFormat"]}]},{menuId:"tools",label:"Tools",groups:[{groupId:"aiTools",items:["menuBar:aiAssistant","menuBar:aiCommands"]},{groupId:"tools",items:["menuBar:trackChanges","menuBar:commentsArchive"]}]},{menuId:"help",label:"Help",groups:[{groupId:"help",items:["menuBar:accessibilityHelp"]}]}];function Vde(i){let t;return!("items"in i)||!i.items?t={items:Rr(Lde),addItems:[],removeItems:[],isVisible:!0,isUsingDefaultConfig:!0,...i}:t={items:i.items,removeItems:[],addItems:[],isVisible:!0,isUsingDefaultConfig:!1,...i},t}function Dde({normalizedConfig:i,locale:t,componentFactory:e,extraItems:n}){const s=Rr(i);return cI(i,s,n),Bde(i,s),cI(i,s,s.addItems),Fde(i,s,e),CL(i,s),$de(s,t),s}function Bde(i,t){const e=t.removeItems,n=[];t.items=t.items.filter(({menuId:s})=>e.includes(s)?(n.push(s),!1):!0),od(t.items,s=>{s.groups=s.groups.filter(({groupId:r})=>e.includes(r)?(n.push(r),!1):!0);for(const r of s.groups)r.items=r.items.filter(o=>{const a=xL(o);return e.includes(a)?(n.push(a),!1):!0})});for(const s of e)n.includes(s)||Tt("menu-bar-item-could-not-be-removed",{menuBarConfig:i,itemName:s})}function cI(i,t,e){const n=[];if(e.length!=0){for(const s of e){const r=Hde(s.position),o=Ude(s.position);if(zde(s))if(!o)r==="start"?(t.items.unshift(s.menu),n.push(s)):r==="end"&&(t.items.push(s.menu),n.push(s));else{const a=t.items.findIndex(l=>l.menuId===o);a!=-1?r==="before"?(t.items.splice(a,0,s.menu),n.push(s)):r==="after"&&(t.items.splice(a+1,0,s.menu),n.push(s)):uI(t,s.menu,o,r)&&n.push(s)}else jde(s)?od(t.items,a=>{if(a.menuId===o)r==="start"?(a.groups.unshift(s.group),n.push(s)):r==="end"&&(a.groups.push(s.group),n.push(s));else{const l=a.groups.findIndex(c=>c.groupId===o);l!==-1&&(r==="before"?(a.groups.splice(l,0,s.group),n.push(s)):r==="after"&&(a.groups.splice(l+1,0,s.group),n.push(s)))}}):uI(t,s.item,o,r)&&n.push(s)}for(const s of e)n.includes(s)||Tt("menu-bar-item-could-not-be-added",{menuBarConfig:i,addedItemConfig:s})}}function uI(i,t,e,n){let s=!1;return od(i.items,r=>{for(const{groupId:o,items:a}of r.groups){if(s)return;if(o===e)n==="start"?(a.unshift(t),s=!0):n==="end"&&(a.push(t),s=!0);else{const l=a.findIndex(c=>xL(c)===e);l!==-1&&(n==="before"?(a.splice(l,0,t),s=!0):n==="after"&&(a.splice(l+1,0,t),s=!0))}}}),s}function Fde(i,t,e){od(t.items,n=>{for(const s of n.groups)s.items=s.items.filter(r=>{const o=typeof r=="string"&&!e.has(r);return o&&!t.isUsingDefaultConfig&&Tt("menu-bar-item-unavailable",{menuBarConfig:i,parentMenuConfig:Rr(n),componentName:r}),!o})})}function CL(i,t){const e=t.isUsingDefaultConfig;let n=!1;if(t.items=t.items.filter(s=>s.groups.length?!0:(V1(i,s,e),!1)),!t.items.length){V1(i,i,e);return}od(t.items,s=>{s.groups=s.groups.filter(r=>r.items.length?!0:(n=!0,!1));for(const r of s.groups)r.items=r.items.filter(o=>TL(o)&&!o.groups.length?(V1(i,o,e),n=!0,!1):!0)}),n&&CL(i,t)}function V1(i,t,e){e||Tt("menu-bar-menu-empty",{menuBarConfig:i,emptyMenuConfig:t})}function $de(i,t){const e=t.t,n={File:e({string:"File",id:"MENU_BAR_MENU_FILE"}),Edit:e({string:"Edit",id:"MENU_BAR_MENU_EDIT"}),View:e({string:"View",id:"MENU_BAR_MENU_VIEW"}),Insert:e({string:"Insert",id:"MENU_BAR_MENU_INSERT"}),Format:e({string:"Format",id:"MENU_BAR_MENU_FORMAT"}),Tools:e({string:"Tools",id:"MENU_BAR_MENU_TOOLS"}),Help:e({string:"Help",id:"MENU_BAR_MENU_HELP"}),Text:e({string:"Text",id:"MENU_BAR_MENU_TEXT"}),Font:e({string:"Font",id:"MENU_BAR_MENU_FONT"})};od(i.items,s=>{s.label in n&&(s.label=n[s.label])})}function od(i,t){if(Array.isArray(i))for(const n of i)e(n);function e(n){t(n);for(const s of n.groups)for(const r of s.items)TL(r)&&e(r)}}function zde(i){return typeof i=="object"&&"menu"in i}function jde(i){return typeof i=="object"&&"group"in i}function Hde(i){return i.startsWith("start")?"start":i.startsWith("end")?"end":i.startsWith("after")?"after":"before"}function Ude(i){const t=i.match(/^[^:]+:(.+)/);return t?t[1]:null}function xL(i){return typeof i=="string"?i:i.menuId}function TL(i){return typeof i=="object"&&"menuId"in i}class Wde extends Vt(){constructor(e){super();b(this,"editor");b(this,"componentFactory");b(this,"focusTracker");b(this,"tooltipManager");b(this,"poweredBy");b(this,"evaluationBadge");b(this,"ariaLiveAnnouncer");b(this,"isReady",!1);b(this,"_editableElementsMap",new Map);b(this,"_focusableToolbarDefinitions",[]);b(this,"_extraMenuBarElements",[]);b(this,"_lastFocusedForeignElement",null);const n=e.editing.view;this.editor=e,this.componentFactory=new vde(e),this.focusTracker=new ln,this.tooltipManager=new d_(e),this.poweredBy=new Sde(e),this.evaluationBadge=new Pde(e),this.ariaLiveAnnouncer=new Rde(e),this.set("viewportOffset",this._readViewportOffsetFromConfig()),this.once("ready",()=>{this._bindBodyCollectionWithFocusTracker(),this.isReady=!0}),this.listenTo(n.document,"layoutChanged",this.update.bind(this)),this.listenTo(n,"scrollToTheSelection",this._handleScrollToTheSelection.bind(this)),this._initFocusTracking()}get element(){return null}update(){this.fire("update")}destroy(){this.stopListening(),this.focusTracker.destroy(),this.tooltipManager.destroy(this.editor),this.poweredBy.destroy(),this.evaluationBadge.destroy();for(const e of this._editableElementsMap.values())e.ckeditorInstance=null,this.editor.keystrokes.stopListening(e);this._editableElementsMap=new Map,this._focusableToolbarDefinitions=[]}setEditableElement(e,n){this._editableElementsMap.set(e,n),n.ckeditorInstance||(n.ckeditorInstance=this.editor),this.focusTracker.add(n);const s=()=>{this.editor.editing.view.getDomRoot(e)||this.editor.keystrokes.listenTo(n)};this.isReady?s():this.once("ready",s)}removeEditableElement(e){const n=this._editableElementsMap.get(e);n&&(this._editableElementsMap.delete(e),this.editor.keystrokes.stopListening(n),this.focusTracker.remove(n),n.ckeditorInstance=null)}getEditableElement(e="main"){return this._editableElementsMap.get(e)}getEditableElementsNames(){return this._editableElementsMap.keys()}addToolbar(e,n={}){e.isRendered?(this.focusTracker.add(e),this.editor.keystrokes.listenTo(e.element)):e.once("render",()=>{this.focusTracker.add(e),this.editor.keystrokes.listenTo(e.element)}),this._focusableToolbarDefinitions.push({toolbarView:e,options:n})}extendMenuBar(e){this._extraMenuBarElements.push(e)}get _editableElements(){return console.warn("editor-ui-deprecated-editable-elements: The EditorUI#_editableElements property has been deprecated and will be removed in the near future.",{editorUI:this}),this._editableElementsMap}_initMenuBar(e){const n=e.element;this.focusTracker.add(n),this.editor.keystrokes.listenTo(n);const s=Vde(this.editor.config.get("menuBar")||{});e.fillFromConfig(s,this.componentFactory,this._extraMenuBarElements),this.editor.keystrokes.set("Esc",(r,o)=>{n.contains(this.editor.ui.focusTracker.focusedElement)&&(this._lastFocusedForeignElement?(this._lastFocusedForeignElement.focus(),this._lastFocusedForeignElement=null):this.editor.editing.view.focus(),o())}),this.editor.keystrokes.set("Alt+F9",(r,o)=>{n.contains(this.editor.ui.focusTracker.focusedElement)||(this._saveLastFocusedForeignElement(),e.isFocusBorderEnabled=!0,e.focus(),o())})}_readViewportOffsetFromConfig(){const e=this.editor,n=e.config.get("ui.viewportOffset");if(n)return n;const s=e.config.get("toolbar.viewportTopOffset");return s?(console.warn("editor-ui-deprecated-viewport-offset-config: The `toolbar.vieportTopOffset` configuration option is deprecated. It will be removed from future CKEditor versions. Use `ui.viewportOffset.top` instead."),{top:s}):{top:0}}_initFocusTracking(){const e=this.editor;let n;e.keystrokes.set("Alt+F10",(s,r)=>{this._saveLastFocusedForeignElement();const o=this._getCurrentFocusedToolbarDefinition();(!o||!n)&&(n=this._getFocusableCandidateToolbarDefinitions());for(let a=0;a<n.length;a++){const l=n.shift();if(n.push(l),l!==o&&this._focusFocusableCandidateToolbar(l)){o&&o.options.afterBlur&&o.options.afterBlur();break}}r()}),e.keystrokes.set("Esc",(s,r)=>{const o=this._getCurrentFocusedToolbarDefinition();o&&(this._lastFocusedForeignElement?(this._lastFocusedForeignElement.focus(),this._lastFocusedForeignElement=null):e.editing.view.focus(),o.options.afterBlur&&o.options.afterBlur(),r())})}_saveLastFocusedForeignElement(){const e=this.focusTracker.focusedElement;Array.from(this._editableElementsMap.values()).includes(e)&&!Array.from(this.editor.editing.view.domRoots.values()).includes(e)&&(this._lastFocusedForeignElement=e)}_getFocusableCandidateToolbarDefinitions(){const e=[];for(const n of this._focusableToolbarDefinitions){const{toolbarView:s,options:r}=n;(Wo(s.element)||r.beforeFocus)&&e.push(n)}return e.sort((n,s)=>dI(n)-dI(s)),e}_getCurrentFocusedToolbarDefinition(){for(const e of this._focusableToolbarDefinitions)if(e.toolbarView.element&&e.toolbarView.element.contains(this.focusTracker.focusedElement))return e;return null}_focusFocusableCandidateToolbar(e){const{toolbarView:n,options:{beforeFocus:s}}=e;return s&&s(),Wo(n.element)?(n.focus(),!0):!1}_handleScrollToTheSelection(e,n){const s={top:0,bottom:0,left:0,right:0,...this.viewportOffset};n.viewportOffset.top+=s.top,n.viewportOffset.bottom+=s.bottom,n.viewportOffset.left+=s.left,n.viewportOffset.right+=s.right}_bindBodyCollectionWithFocusTracker(){const e=this.view.body;for(const n of e)this.focusTracker.add(n.element);e.on("add",(n,s)=>{this.focusTracker.add(s.element)}),e.on("remove",(n,s)=>{this.focusTracker.remove(s.element)})}}function dI(i){const{toolbarView:t,options:e}=i;let n=10;return Wo(t.element)&&n--,e.isContextual&&n--,n}class qde extends Oe{constructor(e){super(e);b(this,"body");b(this,"menuBarView");this.body=new c_(e)}render(){super.render(),this.body.attachToDom()}destroy(){return this.body.detachFromDom(),super.destroy()}}class Gde extends qde{constructor(e){super(e);b(this,"top");b(this,"main");b(this,"_voiceLabelView");this.top=this.createCollection(),this.main=this.createCollection(),this._voiceLabelView=this._createVoiceLabel(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-reset","ck-editor","ck-rounded-corners"],role:"application",dir:e.uiLanguageDirection,lang:e.uiLanguage,"aria-labelledby":this._voiceLabelView.id},children:[this._voiceLabelView,{tag:"div",attributes:{class:["ck","ck-editor__top","ck-reset_all"],role:"presentation"},children:this.top},{tag:"div",attributes:{class:["ck","ck-editor__main"],role:"presentation"},children:this.main}]})}_createVoiceLabel(){const e=this.t,n=new Fs;return n.text=e("Rich Text Editor"),n.extendTemplate({attributes:{class:"ck-voice-label"}}),n}}class Kde extends Oe{constructor(e,n,s){super(e);b(this,"name",null);b(this,"_editingView");b(this,"_editableElement");b(this,"_hasExternalElement");this.setTemplate({tag:"div",attributes:{class:["ck","ck-content","ck-editor__editable","ck-rounded-corners"],lang:e.contentLanguage,dir:e.contentLanguageDirection}}),this.set("isFocused",!1),this._editableElement=s,this._hasExternalElement=!!this._editableElement,this._editingView=n}render(){super.render(),this._hasExternalElement?this.template.apply(this.element=this._editableElement):this._editableElement=this.element,this.on("change:isFocused",()=>this._updateIsFocusedClasses()),this._updateIsFocusedClasses()}destroy(){this._hasExternalElement&&this.template.revert(this._editableElement),super.destroy()}get hasExternalElement(){return this._hasExternalElement}_updateIsFocusedClasses(){const e=this._editingView;e.isRenderingInProgress?s(this):n(this);function n(r){e.change(o=>{const a=e.document.getRoot(r.name);o.addClass(r.isFocused?"ck-focused":"ck-blurred",a),o.removeClass(r.isFocused?"ck-blurred":"ck-focused",a)})}function s(r){e.once("change:isRenderingInProgress",(o,a,l)=>{l?s(r):n(r)})}}}class Yde extends Kde{constructor(e,n,s,r={}){super(e,n,s);b(this,"_options");this._options=r,this.extendTemplate({attributes:{role:"textbox",class:"ck-editor__editable_inline"}})}render(){super.render();const e=this._editingView;e.change(n=>{const s=e.document.getRoot(this.name);n.setAttribute("aria-label",this.getEditableAriaLabel(),s)})}getEditableAriaLabel(){const e=this.locale.t,n=this._options.label,s=this._editableElement,r=this.name;if(typeof n=="string")return n;if(typeof n=="object")return n[r];if(typeof n=="function")return n(this);if(s){const o=s.getAttribute("aria-label");if(o)return o}return e("Rich Text Editor. Editing area: %0",r)}}class hI extends lw{static get pluginName(){return"Notification"}static get isOfficialPlugin(){return!0}init(){this.on("show:warning",(t,e)=>{window.alert(e.message)},{priority:"lowest"})}showSuccess(t,e={}){this._showNotification({message:t,type:"success",namespace:e.namespace,title:e.title})}showInfo(t,e={}){this._showNotification({message:t,type:"info",namespace:e.namespace,title:e.title})}showWarning(t,e={}){this._showNotification({message:t,type:"warning",namespace:e.namespace,title:e.title})}_showNotification(t){const e=t.namespace?`show:${t.type}:${t.namespace}`:`show:${t.type}`;this.fire(e,{message:t.message,type:t.type,title:t.title||""})}}class Yl extends Vt(){constructor(t,e){super(),e&&ZN(this,e),t&&this.set(t)}}const Pg=Ff("px");class kr extends ie{constructor(e){super(e);b(this,"positionLimiter");b(this,"visibleStack");b(this,"_viewToStack",new Map);b(this,"_idToStack",new Map);b(this,"_view",null);b(this,"_rotatorView",null);b(this,"_fakePanelsView",null);this.positionLimiter=()=>{const n=this.editor.editing.view,r=n.document.selection.editableElement;return r?n.domConverter.mapViewToDom(r.root):null},this.decorate("getPositionOptions"),this.set("visibleView",null),this.set("_numberOfStacks",0),this.set("_singleViewMode",!1)}static get pluginName(){return"ContextualBalloon"}static get isOfficialPlugin(){return!0}destroy(){super.destroy(),this._view&&this._view.destroy(),this._rotatorView&&this._rotatorView.destroy(),this._fakePanelsView&&this._fakePanelsView.destroy()}get view(){return this._view||this._createPanelView(),this._view}hasView(e){return Array.from(this._viewToStack.keys()).includes(e)}add(e){if(this._view||this._createPanelView(),this.hasView(e.view))throw new B("contextualballoon-add-view-exist",[this,e]);const n=e.stackId||"main";if(!this._idToStack.has(n)){this._idToStack.set(n,new Map([[e.view,e]])),this._viewToStack.set(e.view,this._idToStack.get(n)),this._numberOfStacks=this._idToStack.size,(!this._visibleStack||e.singleViewMode)&&this.showStack(n);return}const s=this._idToStack.get(n);e.singleViewMode&&this.showStack(n),s.set(e.view,e),this._viewToStack.set(e.view,s),s===this._visibleStack&&this._showView(e)}remove(e){if(!this.hasView(e))throw new B("contextualballoon-remove-view-not-exist",[this,e]);const n=this._viewToStack.get(e);this._singleViewMode&&this.visibleView===e&&(this._singleViewMode=!1),this.visibleView===e&&(n.size===1?this._idToStack.size>1?this._showNextStack():(this.view.hide(),this.visibleView=null,this._rotatorView.hideView()):this._showView(Array.from(n.values())[n.size-2])),n.size===1?(this._idToStack.delete(this._getStackId(n)),this._numberOfStacks=this._idToStack.size):n.delete(e),this._viewToStack.delete(e)}updatePosition(e){e&&(this._visibleStack.get(this.visibleView).position=e),this.view.pin(this.getPositionOptions()),this._fakePanelsView.updatePosition()}getPositionOptions(){let e=Array.from(this._visibleStack.values()).pop().position;return e&&(e.limiter||(e=Object.assign({},e,{limiter:this.positionLimiter})),e=Object.assign({},e,{viewportOffsetConfig:this.editor.ui.viewportOffset})),e}showStack(e){this.visibleStack=e;const n=this._idToStack.get(e);if(!n)throw new B("contextualballoon-showstack-stack-not-exist",this);this._visibleStack!==n&&this._showView(Array.from(n.values()).pop())}_createPanelView(){this._view=new Ti(this.editor.locale),this.editor.ui.view.body.add(this._view),this._rotatorView=this._createRotatorView(),this._fakePanelsView=this._createFakePanelsView()}get _visibleStack(){return this._viewToStack.get(this.visibleView)}_getStackId(e){return Array.from(this._idToStack.entries()).find(s=>s[1]===e)[0]}_showNextStack(){const e=Array.from(this._idToStack.values());let n=e.indexOf(this._visibleStack)+1;e[n]||(n=0),this.showStack(this._getStackId(e[n]))}_showPrevStack(){const e=Array.from(this._idToStack.values());let n=e.indexOf(this._visibleStack)-1;e[n]||(n=e.length-1),this.showStack(this._getStackId(e[n]))}_createRotatorView(){const e=new Zde(this.editor.locale),n=this.editor.locale.t;return this.view.content.add(e),e.bind("isNavigationVisible").to(this,"_numberOfStacks",this,"_singleViewMode",(s,r)=>!r&&s>1),e.on("change:isNavigationVisible",()=>this.updatePosition(),{priority:"low"}),e.bind("counter").to(this,"visibleView",this,"_numberOfStacks",(s,r)=>{if(r<2)return"";const o=Array.from(this._idToStack.values()).indexOf(this._visibleStack)+1;return n("%0 of %1",[o,r])}),e.buttonNextView.on("execute",()=>{e.focusTracker.isFocused&&this.editor.editing.view.focus(),this._showNextStack()}),e.buttonPrevView.on("execute",()=>{e.focusTracker.isFocused&&this.editor.editing.view.focus(),this._showPrevStack()}),e}_createFakePanelsView(){const e=new Xde(this.editor.locale,this.view);return e.bind("numberOfPanels").to(this,"_numberOfStacks",this,"_singleViewMode",(n,s)=>!s&&n>=2?Math.min(n-1,2):0),e.listenTo(this.view,"change:top",()=>e.updatePosition()),e.listenTo(this.view,"change:left",()=>e.updatePosition()),this.editor.ui.view.body.add(e),e}_showView({view:e,balloonClassName:n="",withArrow:s=!0,singleViewMode:r=!1}){this.view.class=n,this.view.withArrow=s,this._rotatorView.showView(e),this.visibleView=e,this.view.pin(this.getPositionOptions()),this._fakePanelsView.updatePosition(),r&&(this._singleViewMode=!0)}}class Zde extends Oe{constructor(e){super(e);b(this,"focusTracker");b(this,"buttonPrevView");b(this,"buttonNextView");b(this,"content");const n=e.t,s=this.bindTemplate;this.set("isNavigationVisible",!0),this.focusTracker=new ln,this.buttonPrevView=this._createButtonView(n("Previous"),ke.previousArrow),this.buttonNextView=this._createButtonView(n("Next"),ke.nextArrow),this.content=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-balloon-rotator"],"z-index":"-1"},children:[{tag:"div",attributes:{class:["ck-balloon-rotator__navigation",s.to("isNavigationVisible",r=>r?"":"ck-hidden")]},children:[this.buttonPrevView,{tag:"span",attributes:{class:["ck-balloon-rotator__counter"]},children:[{text:s.to("counter")}]},this.buttonNextView]},{tag:"div",attributes:{class:"ck-balloon-rotator__content"},children:this.content}]})}render(){super.render(),this.focusTracker.add(this.element)}destroy(){super.destroy(),this.focusTracker.destroy()}showView(e){this.hideView(),this.content.add(e)}hideView(){this.content.clear()}_createButtonView(e,n){const s=new rt(this.locale);return s.set({label:e,icon:n,tooltip:!0}),s}}class Xde extends Oe{constructor(e,n){super(e);b(this,"content");b(this,"_balloonPanelView");const s=this.bindTemplate;this.set("top",0),this.set("left",0),this.set("height",0),this.set("width",0),this.set("numberOfPanels",0),this.content=this.createCollection(),this._balloonPanelView=n,this.setTemplate({tag:"div",attributes:{class:["ck-fake-panel",s.to("numberOfPanels",r=>r?"":"ck-hidden")],style:{top:s.to("top",Pg),left:s.to("left",Pg),width:s.to("width",Pg),height:s.to("height",Pg)}},children:this.content}),this.on("change:numberOfPanels",(r,o,a,l)=>{a>l?this._addPanels(a-l):this._removePanels(l-a),this.updatePosition()})}_addPanels(e){for(;e--;){const n=new Oe;n.setTemplate({tag:"div"}),this.content.add(n),this.registerChild(n)}}_removePanels(e){for(;e--;){const n=this.content.last;this.content.remove(n),this.deregisterChild(n),n.destroy()}}updatePosition(){if(this.numberOfPanels){const{top:e,left:n}=this._balloonPanelView,{width:s,height:r}=new at(this._balloonPanelView.element);Object.assign(this,{top:e,left:n,width:s,height:r})}}}const Jc=Ff("px");class Jde extends Oe{constructor(e){super(e);b(this,"content");b(this,"contentPanelElement");b(this,"_contentPanelPlaceholder");const n=this.bindTemplate;this.set("isActive",!1),this.set("isSticky",!1),this.set("limiterElement",null),this.set("limiterBottomOffset",50),this.set("viewportTopOffset",0),this.set("_marginLeft",null),this.set("_isStickyToTheBottomOfLimiter",!1),this.set("_stickyTopOffset",null),this.set("_stickyBottomOffset",null),this.content=this.createCollection(),this._contentPanelPlaceholder=new Zi({tag:"div",attributes:{class:["ck","ck-sticky-panel__placeholder"],style:{display:n.to("isSticky",s=>s?"block":"none"),height:n.to("isSticky",s=>s?Jc(this._contentPanelRect.height):null)}}}).render(),this.contentPanelElement=new Zi({tag:"div",attributes:{class:["ck","ck-sticky-panel__content",n.if("isSticky","ck-sticky-panel__content_sticky"),n.if("_isStickyToTheBottomOfLimiter","ck-sticky-panel__content_sticky_bottom-limit")],style:{width:n.to("isSticky",s=>s?Jc(this._contentPanelPlaceholder.getBoundingClientRect().width):null),top:n.to("_stickyTopOffset",s=>s&&Jc(s)),bottom:n.to("_stickyBottomOffset",s=>s&&Jc(s)),marginLeft:n.to("_marginLeft")}},children:this.content}).render(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-sticky-panel"]},children:[this._contentPanelPlaceholder,this.contentPanelElement]})}render(){super.render(),this.checkIfShouldBeSticky(),this.listenTo(Re.document,"scroll",()=>{this.checkIfShouldBeSticky()},{useCapture:!0}),this.listenTo(this,"change:isActive",()=>{this.checkIfShouldBeSticky()})}checkIfShouldBeSticky(){if(!this.limiterElement||!this.isActive){this._unstick();return}const e=new at(this.limiterElement);let n=e.getVisible();if(n){const s=new at(Re.window);s.top+=this.viewportTopOffset,s.height-=this.viewportTopOffset,n=n.getIntersection(s)}if(n&&e.top<n.top){const s=n.top;if(s+this._contentPanelRect.height+this.limiterBottomOffset>n.bottom){const r=Math.max(e.bottom-n.bottom,0)+this.limiterBottomOffset;e.bottom-r>e.top+this._contentPanelRect.height?this._stickToBottomOfLimiter(r):this._unstick()}else this._contentPanelRect.height+this.limiterBottomOffset<e.height?this._stickToTopOfAncestors(s):this._unstick()}else this._unstick()}_stickToTopOfAncestors(e){this.isSticky=!0,this._isStickyToTheBottomOfLimiter=!1,this._stickyTopOffset=e,this._stickyBottomOffset=null,this._marginLeft=Jc(-Re.window.scrollX)}_stickToBottomOfLimiter(e){this.isSticky=!0,this._isStickyToTheBottomOfLimiter=!0,this._stickyTopOffset=null,this._stickyBottomOffset=e,this._marginLeft=Jc(-Re.window.scrollX)}_unstick(){this.isSticky=!1,this._isStickyToTheBottomOfLimiter=!1,this._stickyTopOffset=null,this._stickyBottomOffset=null,this._marginLeft=null}get _contentPanelRect(){return new at(this.contentPanelElement)}}class Qde extends Hu{constructor(e){super(e);b(this,"arrowView");const n=this.bindTemplate;this.set({withText:!0,role:"menuitem"}),this.arrowView=this._createArrowView(),this.extendTemplate({attributes:{class:["ck-menu-bar__menu__button"],"aria-haspopup":!0,"aria-expanded":this.bindTemplate.to("isOn",s=>String(s)),"data-cke-tooltip-disabled":n.to("isOn")},on:{mouseenter:n.to("mouseenter")}})}render(){super.render(),this.children.add(this.arrowView)}_createArrowView(){const e=new lo;return e.content=uw,e.extendTemplate({attributes:{class:"ck-menu-bar__menu__button__arrow"}}),e}}class ehe extends Oe{constructor(e){super(e);b(this,"children");const n=this.bindTemplate;this.set("isVisible",!1),this.set("position","se"),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-reset","ck-menu-bar__menu__panel",n.to("position",s=>`ck-menu-bar__menu__panel_position_${s}`),n.if("isVisible","ck-hidden",s=>!s)],tabindex:"-1"},children:this.children,on:{selectstart:n.to(s=>{s.target.tagName.toLocaleLowerCase()!=="input"&&s.preventDefault()})}})}focus(e=1){this.children.length&&(e===1?this.children.first.focus():this.children.last.focus())}}const fb=class fb extends Oe{constructor(e){super(e);b(this,"buttonView");b(this,"panelView");b(this,"focusTracker");b(this,"keystrokes");const n=this.bindTemplate;this.buttonView=new Qde(e),this.buttonView.delegate("mouseenter").to(this),this.buttonView.bind("isOn","isEnabled").to(this,"isOpen","isEnabled"),this.panelView=new ehe(e),this.panelView.bind("isVisible").to(this,"isOpen"),this.keystrokes=new wn,this.focusTracker=new ln,this.set("isOpen",!1),this.set("isEnabled",!0),this.set("panelPosition","w"),this.set("class",void 0),this.set("parentMenuView",null),this.setTemplate({tag:"div",attributes:{class:["ck","ck-menu-bar__menu",n.to("class"),n.if("isEnabled","ck-disabled",s=>!s),n.if("parentMenuView","ck-menu-bar__menu_top-level",s=>!s)]},children:[this.buttonView,this.panelView]})}render(){super.render(),this.focusTracker.add(this.buttonView.element),this.focusTracker.add(this.panelView.element),this.keystrokes.listenTo(this.element),_a.closeOnEscKey(this),this._repositionPanelOnOpen()}_attachBehaviors(){this.parentMenuView?(_a.openOnButtonClick(this),_a.openOnArrowRightKey(this),_a.closeOnArrowLeftKey(this),_a.openAndFocusOnEnterKeyPress(this),_a.closeOnParentClose(this)):(this._propagateArrowKeystrokeEvents(),_a.openAndFocusPanelOnArrowDownKey(this),_a.toggleOnButtonClick(this))}_propagateArrowKeystrokeEvents(){this.keystrokes.set("arrowright",(e,n)=>{this.fire("arrowright"),n()}),this.keystrokes.set("arrowleft",(e,n)=>{this.fire("arrowleft"),n()})}_repositionPanelOnOpen(){this.on("change:isOpen",(e,n,s)=>{if(!s)return;const r=fb._getOptimalPosition({element:this.panelView.element,target:this.buttonView.element,fitInViewport:!0,positions:this._panelPositions});this.panelView.position=r?r.name:this._defaultMenuPositionName})}focus(){this.buttonView.focus()}get _panelPositions(){const{southEast:e,southWest:n,northEast:s,northWest:r,westSouth:o,eastSouth:a,westNorth:l,eastNorth:c}=Mde;return this.locale.uiLanguageDirection==="ltr"?this.parentMenuView?[a,c,o,l]:[e,n,s,r]:this.parentMenuView?[o,l,a,c]:[n,e,r,s]}get _defaultMenuPositionName(){return this.locale.uiLanguageDirection==="ltr"?this.parentMenuView?"es":"se":this.parentMenuView?"ws":"sw"}};b(fb,"_getOptimalPosition",ZE);let ps=fb;class Zl extends dw{constructor(t){super(t),this.role="menu",this.items.on("change",this._setItemsCheckSpace.bind(this))}_setItemsCheckSpace(){const t=Array.from(this.items).some(e=>{const n=fI(e);return n&&n.isToggleable});this.items.forEach(e=>{const n=fI(e);n&&(n.hasCheckSpace=t)})}}function fI(i){return i instanceof Go?i.children.map(t=>the(t)?t.buttonView:t).find(t=>t instanceof Hu):null}function the(i){return typeof i=="object"&&"buttonView"in i&&i.buttonView instanceof rt}class kL extends Fue{constructor(t){super(t),this.set({withText:!0,withKeystroke:!0,tooltip:!1,role:"menuitem"}),this.extendTemplate({attributes:{class:["ck-menu-bar__menu__item__button"]}})}}const mI=["mouseenter","arrowleft","arrowright","change:isOpen"];class nhe extends Oe{constructor(e){super(e);b(this,"children");b(this,"menus",[]);const n=e.t,s=this.bindTemplate;this.set({isOpen:!1,isFocusBorderEnabled:!1}),this._setupIsOpenUpdater(),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-menu-bar",s.if("isFocusBorderEnabled","ck-menu-bar_focus-border-enabled")],"aria-label":n("Editor menu bar"),role:"menubar"},children:this.children})}fillFromConfig(e,n,s=[]){const r=this.locale,a=Dde({normalizedConfig:e,locale:r,componentFactory:n,extraItems:s}).items.map(l=>this._createMenu({componentFactory:n,menuDefinition:l}));this.children.addMany(a)}render(){super.render(),Xc.toggleMenusAndFocusItemsOnHover(this),Xc.closeMenusWhenTheBarCloses(this),Xc.closeMenuWhenAnotherOnTheSameLevelOpens(this),Xc.focusCycleMenusOnArrows(this),Xc.closeOnClickOutside(this),Xc.enableFocusHighlightOnInteraction(this)}focus(){this.children.first&&this.children.first.focus()}close(){for(const e of this.children)e.isOpen=!1}registerMenu(e,n=null){n?(e.delegate(...mI).to(n),e.parentMenuView=n):e.delegate(...mI).to(this,s=>"menu:"+s),e._attachBehaviors(),this.menus.push(e)}_createMenu({componentFactory:e,menuDefinition:n,parentMenuView:s}){const r=this.locale,o=new ps(r);return this.registerMenu(o,s),o.buttonView.set({label:n.label}),o.once("change:isOpen",()=>{const a=new Zl(r);a.ariaLabel=n.label,o.panelView.children.add(a),a.items.addMany(this._createMenuItems({menuDefinition:n,parentMenuView:o,componentFactory:e}))}),o}_createMenuItems({menuDefinition:e,parentMenuView:n,componentFactory:s}){const r=this.locale,o=[];for(const a of e.groups){for(const l of a.items){const c=new ac(r,n);if(Yt(l))c.children.add(this._createMenu({componentFactory:s,menuDefinition:l,parentMenuView:n}));else{const h=this._createMenuItemContentFromFactory({componentName:l,componentFactory:s,parentMenuView:n});if(!h)continue;c.children.add(h)}o.push(c)}a!==e.groups[e.groups.length-1]&&o.push(new vC(r))}return o}_createMenuItemContentFromFactory({componentName:e,parentMenuView:n,componentFactory:s}){const r=s.create(e);return r instanceof ps||r instanceof Xn||r instanceof kL?(this._registerMenuTree(r,n),r.on("execute",()=>{this.close()}),r):(Tt("menu-bar-component-unsupported",{componentName:e,componentView:r}),null)}_registerMenuTree(e,n){if(!(e instanceof ps)){e.delegate("mouseenter").to(n);return}this.registerMenu(e,n);const s=e.panelView.children.filter(o=>o instanceof Zl)[0];if(!s){e.delegate("mouseenter").to(n);return}const r=s.items.filter(o=>o instanceof Go);for(const o of r)this._registerMenuTree(o.children.get(0),e)}_setupIsOpenUpdater(){let e;this.on("menu:change:isOpen",(n,s,r)=>{clearTimeout(e),r?this.isOpen=!0:e=setTimeout(()=>{this.isOpen=Array.from(this.children).some(o=>o.isOpen)},0)})}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const _C=["left","right","center","justify"];function SL(i){return _C.includes(i)}function AL(i,t){return t.contentLanguageDirection=="rtl"?i==="right":i==="left"}function PL(i){const t=i.map(n=>{let s;return typeof n=="string"?s={name:n}:s=n,s}).filter(n=>{const s=_C.includes(n.name);return s||Tt("alignment-config-name-not-recognized",{option:n}),s}),e=t.filter(n=>!!n.className).length;if(e&&e<t.length)throw new B("alignment-config-classnames-are-missing",{configuredOptions:i});return t.forEach((n,s,r)=>{const o=r.slice(s+1);if(o.some(l=>l.name==n.name))throw new B("alignment-config-name-already-defined",{option:n,configuredOptions:i});if(n.className&&o.some(c=>c.className==n.className))throw new B("alignment-config-classname-already-defined",{option:n,configuredOptions:i})}),t}const EC="alignment";class ihe extends lt{refresh(){const e=this.editor.locale,n=Tn(this.editor.model.document.selection.getSelectedBlocks());this.isEnabled=!!n&&this._canBeAligned(n),this.isEnabled&&n.hasAttribute("alignment")?this.value=n.getAttribute("alignment"):this.value=e.contentLanguageDirection==="rtl"?"right":"left"}execute(t={}){const e=this.editor,n=e.locale,s=e.model,r=s.document,o=t.value;s.change(a=>{const l=Array.from(r.selection.getSelectedBlocks()).filter(f=>this._canBeAligned(f)),c=l[0].getAttribute("alignment");AL(o,n)||c===o||!o?she(l,a):rhe(l,a,o)})}_canBeAligned(t){return this.editor.model.schema.checkAttribute(t,EC)}}function she(i,t){for(const e of i)t.removeAttribute(EC,e)}function rhe(i,t,e){for(const n of i)t.setAttribute(EC,e,n)}class ohe extends ie{static get pluginName(){return"AlignmentEditing"}static get isOfficialPlugin(){return!0}constructor(t){super(t),t.config.define("alignment",{options:_C.map(e=>({name:e}))})}init(){const t=this.editor,e=t.locale,n=t.model.schema,r=PL(t.config.get("alignment.options")).filter(c=>SL(c.name)&&!AL(c.name,e)),o=r.some(c=>!!c.className);n.extend("$block",{allowAttributes:"alignment"}),t.model.schema.setAttributeProperties("alignment",{isFormatting:!0}),o?t.conversion.attributeToAttribute(uhe(r)):t.conversion.for("downcast").attributeToAttribute(ahe(r));const a=lhe(r);for(const c of a)t.conversion.for("upcast").attributeToAttribute(c);const l=che(r);for(const c of l)t.conversion.for("upcast").attributeToAttribute(c);t.commands.add("alignment",new ihe(t))}}function ahe(i){const t={};for(const{name:n}of i)t[n]={key:"style",value:{"text-align":n}};return{model:{key:"alignment",values:i.map(n=>n.name)},view:t}}function lhe(i){const t=[];for(const{name:e}of i)t.push({view:{key:"style",value:{"text-align":e}},model:{key:"alignment",value:e}});return t}function che(i){const t=[];for(const{name:e}of i)t.push({view:{key:"align",value:e},model:{key:"alignment",value:e}});return t}function uhe(i){const t={};for(const n of i)t[n.name]={key:"class",value:n.className};return{model:{key:"alignment",values:i.map(n=>n.name)},view:t}}const sh=new Map([["left",ke.alignLeft],["right",ke.alignRight],["center",ke.alignCenter],["justify",ke.alignJustify]]);class dhe extends ie{get localizedOptionTitles(){const t=this.editor.t;return{left:t("Align left"),right:t("Align right"),center:t("Align center"),justify:t("Justify")}}static get pluginName(){return"AlignmentUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=PL(t.config.get("alignment.options"));e.map(n=>n.name).filter(SL).forEach(n=>this._addButton(n)),this._addToolbarDropdown(e),this._addMenuBarMenu(e)}_addButton(t){this.editor.ui.componentFactory.add(`alignment:${t}`,n=>this._createButton(n,t))}_createButton(t,e,n={}){const s=this.editor,r=s.commands.get("alignment"),o=new rt(t);return o.set({label:this.localizedOptionTitles[e],icon:sh.get(e),tooltip:!0,isToggleable:!0,...n}),o.bind("isEnabled").to(r),o.bind("isOn").to(r,"value",a=>a===e),this.listenTo(o,"execute",()=>{s.execute("alignment",{value:e}),s.editing.view.focus()}),o}_addToolbarDropdown(t){const e=this.editor;e.ui.componentFactory.add("alignment",s=>{const r=vi(s),o=s.uiLanguageDirection==="rtl"?"w":"e",a=s.t;hw(r,()=>t.map(h=>this._createButton(s,h.name,{tooltipPosition:o})),{enableActiveItemFocusOnDropdownOpen:!0,isVertical:!0,ariaLabel:a("Text alignment toolbar")}),r.buttonView.set({label:a("Text alignment"),tooltip:!0}),r.extendTemplate({attributes:{class:"ck-alignment-dropdown"}});const l=s.contentLanguageDirection==="rtl"?sh.get("right"):sh.get("left"),c=e.commands.get("alignment");return r.buttonView.bind("icon").to(c,"value",h=>sh.get(h)||l),r.bind("isEnabled").to(c,"isEnabled"),this.listenTo(r,"execute",()=>{e.editing.view.focus()}),r})}_addMenuBarMenu(t){const e=this.editor;e.ui.componentFactory.add("menuBar:alignment",n=>{const s=e.commands.get("alignment"),r=n.t,o=new ps(n),a=new Zl(n);o.bind("isEnabled").to(s),a.set({ariaLabel:r("Text alignment"),role:"menu"}),o.buttonView.set({label:r("Text alignment")});for(const l of t){const c=new ac(n,o),h=new Xn(n);h.delegate("execute").to(o),h.set({label:this.localizedOptionTitles[l.name],icon:sh.get(l.name),role:"menuitemcheckbox",isToggleable:!0}),h.on("execute",()=>{e.execute("alignment",{value:l.name}),e.editing.view.focus()}),h.bind("isOn").to(s,"value",f=>f===l.name),h.bind("isEnabled").to(s,"isEnabled"),c.children.add(h),a.items.add(c)}return o.panelView.children.add(a),o})}}class hhe extends ie{static get requires(){return[ohe,dhe]}static get pluginName(){return"Alignment"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 *//**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class IL{constructor(t,e=20){b(this,"model");b(this,"limit");b(this,"_isLocked");b(this,"_size");b(this,"_batch",null);b(this,"_changeCallback");b(this,"_selectionChangeCallback");this.model=t,this._size=0,this.limit=e,this._isLocked=!1,this._changeCallback=(n,s)=>{s.isLocal&&s.isUndoable&&s!==this._batch&&this._reset(!0)},this._selectionChangeCallback=()=>{this._reset()},this.model.document.on("change",this._changeCallback),this.model.document.selection.on("change:range",this._selectionChangeCallback),this.model.document.selection.on("change:attribute",this._selectionChangeCallback)}get batch(){return this._batch||(this._batch=this.model.createBatch({isTyping:!0})),this._batch}get size(){return this._size}input(t){this._size+=t,this._size>=this.limit&&this._reset(!0)}get isLocked(){return this._isLocked}lock(){this._isLocked=!0}unlock(){this._isLocked=!1}destroy(){this.model.document.off("change",this._changeCallback),this.model.document.selection.off("change:range",this._selectionChangeCallback),this.model.document.selection.off("change:attribute",this._selectionChangeCallback)}_reset(t=!1){(!this.isLocked||t)&&(this._batch=null,this._size=0)}}class fhe extends lt{constructor(e,n){super(e);b(this,"_buffer");this._buffer=new IL(e.model,n),this._isEnabledBasedOnSelection=!1}get buffer(){return this._buffer}destroy(){super.destroy(),this._buffer.destroy()}execute(e={}){const n=this.editor.model,s=n.document,r=e.text||"",o=r.length;let a=s.selection;if(e.selection?a=e.selection:e.range&&(a=n.createSelection(e.range)),!n.canEditAt(a))return;const l=e.resultRange;n.enqueueChange(this._buffer.batch,c=>{this._buffer.lock();const h=Array.from(s.selection.getAttributes());n.deleteContent(a),r&&n.insertContent(c.createText(r,h),a),l?c.setSelection(l):a.is("documentSelection")||c.setSelection(a),this._buffer.unlock(),this._buffer.input(o)})}}const RL=["insertText","insertReplacementText"],mhe=[...RL,"insertCompositionText"];class ghe extends ho{constructor(e){super(e);b(this,"focusObserver");this.focusObserver=e.getObserver(Yp);const n=Xe.isAndroid?mhe:RL,s=e.document;s.on("beforeinput",(r,o)=>{if(!this.isEnabled)return;const{data:a,targetRanges:l,inputType:c,domEvent:h}=o;if(!n.includes(c))return;this.focusObserver.flush();const f=new Uo(s,"insertText");s.fire(f,new zu(e,h,{text:a,selection:e.createSelection(l)})),f.stop.called&&r.stop()}),Xe.isAndroid||s.on("compositionend",(r,{data:o,domEvent:a})=>{this.isEnabled&&o&&s.fire("insertText",new zu(e,a,{text:o}))},{priority:"lowest"})}observe(){}stopObserving(){}}class OL extends ie{constructor(){super(...arguments);b(this,"_compositionQueue")}static get pluginName(){return"Input"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,n=e.model,s=e.editing.view,r=e.editing.mapper,o=n.document.selection;this._compositionQueue=new phe(e),s.addObserver(ghe);const a=new fhe(e,e.config.get("typing.undoStep")||20);e.commands.add("insertText",a),e.commands.add("input",a),this.listenTo(s.document,"insertText",(l,c)=>{s.document.isComposing||c.preventDefault(),Xe.isAndroid&&s.document.isComposing&&this._compositionQueue.flush("next beforeinput");const{text:h,selection:f}=c;let m;f?m=Array.from(f.getRanges()).map(_=>r.toModelRange(_)):m=Array.from(o.getRanges());let p=h;if(Xe.isAndroid){const _=Array.from(m[0].getItems()).reduce((E,x)=>E+(x.is("$textProxy")?x.data:""),"");if(_&&(_.length<=p.length?p.startsWith(_)&&(p=p.substring(_.length),m[0].start=m[0].start.getShiftedBy(_.length)):_.startsWith(p)&&(m[0].start=m[0].start.getShiftedBy(p.length),p="")),p.length==0&&m[0].isCollapsed)return}const v={text:p,selection:n.createSelection(m)};Xe.isAndroid&&s.document.isComposing?this._compositionQueue.push(v):(e.execute("insertText",v),s.scrollToTheSelection())}),Xe.isAndroid?this.listenTo(s.document,"keydown",(l,c)=>{o.isCollapsed||c.keyCode!=229||!s.document.isComposing||gI(n,a)}):this.listenTo(s.document,"compositionstart",()=>{o.isCollapsed||gI(n,a)}),Xe.isAndroid?(this.listenTo(s.document,"mutations",(l,{mutations:c})=>{if(s.document.isComposing)for(const{node:h}of c){const f=whe(h,r),m=r.toModelElement(f);if(this._compositionQueue.isComposedElement(m)){this._compositionQueue.flush("mutations");return}}}),this.listenTo(s.document,"compositionend",()=>{this._compositionQueue.flush("composition end")}),this.listenTo(s.document,"compositionend",()=>{const l=[];for(const c of this._compositionQueue.flushComposedElements()){const h=r.toViewElement(c);h&&l.push({type:"children",node:h})}l.length&&s.document.fire("mutations",{mutations:l})},{priority:"lowest"})):this.listenTo(s.document,"compositionend",()=>{s.document.fire("mutations",{mutations:[]})},{priority:"lowest"})}destroy(){super.destroy(),this._compositionQueue.destroy()}}class phe{constructor(t){b(this,"editor");b(this,"flushDebounced",qs(()=>this.flush("timeout"),50));b(this,"_queue",[]);b(this,"_compositionElements",new Set);this.editor=t}destroy(){for(this.flushDebounced.cancel(),this._compositionElements.clear();this._queue.length;)this.shift()}get length(){return this._queue.length}push(t){const e={text:t.text};if(t.selection){e.selectionRanges=[];for(const n of t.selection.getRanges())e.selectionRanges.push(ki.fromRange(n)),this._compositionElements.add(n.start.parent)}this._queue.push(e),this.flushDebounced()}shift(){const t=this._queue.shift(),e={text:t.text};if(t.selectionRanges){const n=t.selectionRanges.map(s=>bhe(s)).filter(s=>!!s);n.length&&(e.selection=this.editor.model.createSelection(n))}return e}flush(t){const e=this.editor,n=e.model,s=e.editing.view;if(this.flushDebounced.cancel(),!this._queue.length)return;const o=e.commands.get("insertText").buffer;n.enqueueChange(o.batch,()=>{for(o.lock();this._queue.length;){const a=this.shift();e.execute("insertText",a)}o.unlock()}),s.scrollToTheSelection()}isComposedElement(t){return this._compositionElements.has(t)}flushComposedElements(){const t=Array.from(this._compositionElements);return this._compositionElements.clear(),t}}function gI(i,t){if(!t.isEnabled)return;const e=t.buffer;e.lock(),i.enqueueChange(e.batch,()=>{i.deleteContent(i.document.selection)}),e.unlock()}function bhe(i){const t=i.toRange();return i.detach(),t.root.rootName=="$graveyard"?null:t}function whe(i,t){let e=i.is("$text")?i.parent:i;for(;!t.toModelElement(e);)e=e.parent;return e}class pI extends lt{constructor(e,n){super(e);b(this,"direction");b(this,"_buffer");this.direction=n,this._buffer=new IL(e.model,e.config.get("typing.undoStep")),this._isEnabledBasedOnSelection=!1}get buffer(){return this._buffer}execute(e={}){const n=this.editor.model,s=n.document;n.enqueueChange(this._buffer.batch,r=>{this._buffer.lock();const o=r.createSelection(e.selection||s.selection);if(!n.canEditAt(o))return;const a=e.sequence||1,l=o.isCollapsed;if(o.isCollapsed&&n.modifySelection(o,{direction:this.direction,unit:e.unit,treatEmojiAsSingleUnit:!0}),this._shouldEntireContentBeReplacedWithParagraph(a)){this._replaceEntireContentWithParagraph(r);return}if(this._shouldReplaceFirstBlockWithParagraph(o,a)){this.editor.execute("paragraph",{selection:o});return}if(o.isCollapsed)return;let c=0;o.getFirstRange().getMinimalFlatRanges().forEach(h=>{c+=Gy(h.getWalker({singleCharacters:!0,ignoreElementEnd:!0,shallow:!0}))}),n.deleteContent(o,{doNotResetEntireContent:l,direction:this.direction}),this._buffer.input(c),r.setSelection(o),this._buffer.unlock()})}_shouldEntireContentBeReplacedWithParagraph(e){if(e>1)return!1;const n=this.editor.model,r=n.document.selection,o=n.schema.getLimitElement(r);if(!(r.isCollapsed&&r.containsEntireContent(o))||!n.schema.checkChild(o,"paragraph"))return!1;const l=o.getChild(0);return!(l&&l.is("element","paragraph"))}_replaceEntireContentWithParagraph(e){const n=this.editor.model,r=n.document.selection,o=n.schema.getLimitElement(r),a=e.createElement("paragraph");e.remove(e.createRangeIn(o)),e.insert(a,o),e.setSelection(a,0)}_shouldReplaceFirstBlockWithParagraph(e,n){const s=this.editor.model;if(n>1||this.direction!="backward"||!e.isCollapsed)return!1;const r=e.getFirstPosition(),o=s.schema.getLimitElement(r),a=o.getChild(0);return!(r.parent!=a||!e.containsEntireContent(a)||!s.schema.checkChild(o,"paragraph")||a.name=="paragraph")}}const vhe="character",bI="word",yhe="codePoint",Ia="selection",uu="backward",vh="forward",NL={deleteContent:{unit:Ia,direction:uu},deleteContentBackward:{unit:yhe,direction:uu},deleteWordBackward:{unit:bI,direction:uu},deleteHardLineBackward:{unit:Ia,direction:uu},deleteSoftLineBackward:{unit:Ia,direction:uu},deleteContentForward:{unit:vhe,direction:vh},deleteWordForward:{unit:bI,direction:vh},deleteHardLineForward:{unit:Ia,direction:vh},deleteSoftLineForward:{unit:Ia,direction:vh}};class _he extends ho{constructor(t){super(t);const e=t.document;let n=0;e.on("keydown",()=>{n++}),e.on("keyup",()=>{n=0}),e.on("beforeinput",(s,r)=>{if(!this.isEnabled)return;const{targetRanges:o,domEvent:a,inputType:l}=r,c=NL[l];if(!c)return;const h={direction:c.direction,unit:c.unit,sequence:n};h.unit==Ia&&(h.selectionToRemove=t.createSelection(o[0])),l==="deleteContentBackward"&&(Xe.isAndroid&&(h.sequence=1),Che(o)&&(h.unit=Ia,h.selectionToRemove=t.createSelection(o)));const f=new rd(e,"delete",o[0]);e.fire(f,new zu(t,a,h)),f.stop.called&&s.stop()}),Xe.isBlink&&Ehe(this)}observe(){}stopObserving(){}}function Ehe(i){const t=i.view,e=t.document;let n=null,s=!1;e.on("keydown",(a,{keyCode:l})=>{n=l,s=!1}),e.on("keyup",(a,{keyCode:l,domEvent:c})=>{const h=e.selection,f=i.isEnabled&&l==n&&r(l)&&!h.isCollapsed&&!s;if(n=null,f){const m=h.getFirstRange(),p=new rd(e,"delete",m),v={unit:Ia,direction:o(l),selectionToRemove:h};e.fire(p,new zu(t,c,v))}}),e.on("beforeinput",(a,{inputType:l})=>{const c=NL[l];r(n)&&c&&c.direction==o(n)&&(s=!0)},{priority:"high"}),e.on("beforeinput",(a,{inputType:l,data:c})=>{n==gt.delete&&l=="insertText"&&c==""&&a.stop()},{priority:"high"});function r(a){return a==gt.backspace||a==gt.delete}function o(a){return a==gt.backspace?uu:vh}}function Che(i){if(i.length!=1||i[0].isCollapsed)return!1;const t=i[0].getWalker({direction:"backward",singleCharacters:!0,ignoreElementEnd:!0});let e=0;for(const{nextPosition:n,item:s}of t){if(n.parent.is("$text")){const r=n.parent.data,o=n.offset;if(eC(r,o)||tC(r,o)||ZM(r,o))continue;e++}else(s.is("containerElement")||s.is("emptyElement"))&&e++;if(e>1)return!0}return!1}class co extends ie{constructor(){super(...arguments);b(this,"_undoOnBackspace")}static get pluginName(){return"Delete"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,n=e.editing.view,s=n.document,r=e.model.document;n.addObserver(_he),this._undoOnBackspace=!1;const o=new pI(e,"forward");e.commands.add("deleteForward",o),e.commands.add("forwardDelete",o),e.commands.add("delete",new pI(e,"backward")),this.listenTo(s,"delete",(a,l)=>{s.isComposing||l.preventDefault();const{direction:c,sequence:h,selectionToRemove:f,unit:m}=l,p=c==="forward"?"deleteForward":"delete",v={sequence:h};if(m=="selection"){const _=Array.from(f.getRanges()).map(E=>e.editing.mapper.toModelRange(E));v.selection=e.model.createSelection(_)}else v.unit=m;e.execute(p,v),n.scrollToTheSelection()},{priority:"low"}),this.listenTo(s,"keydown",(a,l)=>{if(s.isComposing||l.keyCode!=gt.backspace||!r.selection.isCollapsed)return;const c=e.model.schema.getLimitElement(r.selection);e.model.createPositionAt(c,0).isTouching(r.selection.getFirstPosition())&&l.preventDefault()}),this.editor.plugins.has("UndoEditing")&&(this.listenTo(s,"delete",(a,l)=>{this._undoOnBackspace&&l.direction=="backward"&&l.sequence==1&&l.unit=="codePoint"&&(this._undoOnBackspace=!1,e.execute("undo"),l.preventDefault(),a.stop())},{context:"$capture"}),this.listenTo(r,"change",()=>{this._undoOnBackspace=!1}))}requestUndoOnBackspace(){this.editor.plugins.has("UndoEditing")&&(this._undoOnBackspace=!0)}}class xhe extends ie{static get requires(){return[OL,co]}static get pluginName(){return"Typing"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function ML(i,t){let e=i.start;return{text:Array.from(i.getWalker({ignoreElementEnd:!1})).reduce((s,{item:r})=>r.is("$text")||r.is("$textProxy")?s+r.data:(e=t.createPositionAfter(r),""),""),range:t.createRange(e,i.end)}}class CC extends Vt(){constructor(e,n){super();b(this,"model");b(this,"testCallback");b(this,"_hasMatch");this.model=e,this.testCallback=n,this._hasMatch=!1,this.set("isEnabled",!0),this.on("change:isEnabled",()=>{this.isEnabled?this._startListening():(this.stopListening(e.document.selection),this.stopListening(e.document))}),this._startListening()}get hasMatch(){return this._hasMatch}_startListening(){const n=this.model.document;this.listenTo(n.selection,"change:range",(s,{directChange:r})=>{if(r){if(!n.selection.isCollapsed){this.hasMatch&&(this.fire("unmatched"),this._hasMatch=!1);return}this._evaluateTextBeforeSelection("selection")}}),this.listenTo(n,"change:data",(s,r)=>{r.isUndo||!r.isLocal||this._evaluateTextBeforeSelection("data",{batch:r})})}_evaluateTextBeforeSelection(e,n={}){const s=this.model,o=s.document.selection,a=s.createRange(s.createPositionAt(o.focus.parent,0),o.focus),{text:l,range:c}=ML(a,s),h=this.testCallback(l);if(!h&&this.hasMatch&&this.fire("unmatched"),this._hasMatch=!!h,h){const f=Object.assign(n,{text:l,range:c});typeof h=="object"&&Object.assign(f,h),this.fire(`matched:${e}`,f)}}}class wI extends ie{constructor(e){super(e);b(this,"attributes");b(this,"_overrideUid");b(this,"_isNextGravityRestorationSkipped",!1);this.attributes=new Set,this._overrideUid=null}static get pluginName(){return"TwoStepCaretMovement"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,n=e.model,s=e.editing.view,r=e.locale,o=n.document.selection;this.listenTo(s.document,"arrowKey",(a,l)=>{if(!o.isCollapsed||l.shiftKey||l.altKey||l.ctrlKey)return;const c=l.keyCode==gt.arrowright,h=l.keyCode==gt.arrowleft;if(!c&&!h)return;const f=r.contentLanguageDirection;let m=!1;f==="ltr"&&c||f==="rtl"&&h?m=this._handleForwardMovement(l):m=this._handleBackwardMovement(l),m===!0&&a.stop()},{context:"$text",priority:"highest"}),this.listenTo(o,"change:range",(a,l)=>{if(this._isNextGravityRestorationSkipped){this._isNextGravityRestorationSkipped=!1;return}this._isGravityOverridden&&(!l.directChange&&Vs(o.getFirstPosition(),this.attributes)||this._restoreGravity())}),this._enableClickingAfterNode(),this._enableInsertContentSelectionAttributesFixer(),this._handleDeleteContentAfterNode()}registerAttribute(e){this.attributes.add(e)}_handleForwardMovement(e){const n=this.attributes,s=this.editor.model,r=s.document.selection,o=r.getFirstPosition();return this._isGravityOverridden||o.isAtStart&&So(r,n)?!1:Vs(o,n)?(oh(e),So(r,n)&&Vs(o,n,!0)?rh(s,n):this._overrideGravity(),!0):!1}_handleBackwardMovement(e){const n=this.attributes,s=this.editor.model,r=s.document.selection,o=r.getFirstPosition();return this._isGravityOverridden?(oh(e),this._restoreGravity(),Vs(o,n,!0)?rh(s,n):Ig(s,n,o),!0):o.isAtStart?So(r,n)?(oh(e),Ig(s,n,o),!0):!1:!So(r,n)&&Vs(o,n,!0)?(oh(e),Ig(s,n,o),!0):vI(o,n)?o.isAtEnd&&!So(r,n)&&Vs(o,n)?(oh(e),Ig(s,n,o),!0):(this._isNextGravityRestorationSkipped=!0,this._overrideGravity(),!1):!1}_enableClickingAfterNode(){const e=this.editor,n=e.model,s=n.document.selection,r=e.editing.view.document;e.editing.view.addObserver(ow),e.editing.view.addObserver(Uae);let o=!1,a=!1;this.listenTo(r,"touchstart",()=>{a=!1,o=!0}),this.listenTo(r,"mousedown",()=>{a=!0}),this.listenTo(r,"selectionChange",()=>{const l=this.attributes;if(!a&&!o||(a=!1,o=!1,!s.isCollapsed)||!So(s,l))return;const c=s.getFirstPosition();Vs(c,l)&&(c.isAtStart||Vs(c,l,!0)?rh(n,l):this._isGravityOverridden||this._overrideGravity())})}_enableInsertContentSelectionAttributesFixer(){const n=this.editor.model,s=n.document.selection,r=this.attributes;this.listenTo(n,"insertContent",()=>{const o=s.getFirstPosition();So(s,r)&&Vs(o,r)&&rh(n,r)},{priority:"low"})}_handleDeleteContentAfterNode(){const e=this.editor,n=e.model,s=n.document.selection,r=e.editing.view;let o=!1,a=!1;this.listenTo(r.document,"delete",(l,c)=>{o=c.direction==="backward"},{priority:"high"}),this.listenTo(n,"deleteContent",()=>{if(!o)return;const l=s.getFirstPosition();a=So(s,this.attributes)&&!vI(l,this.attributes)},{priority:"high"}),this.listenTo(n,"deleteContent",()=>{o&&(o=!1,!a&&e.model.enqueueChange(()=>{const l=s.getFirstPosition();So(s,this.attributes)&&Vs(l,this.attributes)&&(l.isAtStart||Vs(l,this.attributes,!0)?rh(n,this.attributes):this._isGravityOverridden||this._overrideGravity())}))},{priority:"low"})}get _isGravityOverridden(){return!!this._overrideUid}_overrideGravity(){this._overrideUid=this.editor.model.change(e=>e.overrideSelectionGravity())}_restoreGravity(){this.editor.model.change(e=>{e.restoreSelectionGravity(this._overrideUid),this._overrideUid=null})}}function So(i,t){for(const e of t)if(i.hasAttribute(e))return!0;return!1}function Ig(i,t,e){const n=e.nodeBefore;i.change(s=>{if(n){const r=[],o=i.schema.isObject(n)&&i.schema.isInline(n);for(const[a,l]of n.getAttributes())i.schema.checkAttribute("$text",a)&&(!o||i.schema.getAttributeProperties(a).copyFromObject!==!1)&&r.push([a,l]);s.setSelectionAttribute(r)}else s.removeSelectionAttribute(t)})}function rh(i,t){i.change(e=>{e.removeSelectionAttribute(t)})}function oh(i){i.preventDefault()}function vI(i,t){const e=i.getShiftedBy(-1);return Vs(e,t)}function Vs(i,t,e=!1){const{nodeBefore:n,nodeAfter:s}=i;for(const r of t){const o=n?n.getAttribute(r):void 0,a=s?s.getAttribute(r):void 0;if(!(e&&(o===void 0||a===void 0))&&a!==o)return!0}return!1}const yI={copyright:{from:"(c)",to:"©"},registeredTrademark:{from:"(r)",to:"®"},trademark:{from:"(tm)",to:"™"},oneHalf:{from:/(^|[^/a-z0-9])(1\/2)([^/a-z0-9])$/i,to:[null,"½",null]},oneThird:{from:/(^|[^/a-z0-9])(1\/3)([^/a-z0-9])$/i,to:[null,"⅓",null]},twoThirds:{from:/(^|[^/a-z0-9])(2\/3)([^/a-z0-9])$/i,to:[null,"⅔",null]},oneForth:{from:/(^|[^/a-z0-9])(1\/4)([^/a-z0-9])$/i,to:[null,"¼",null]},threeQuarters:{from:/(^|[^/a-z0-9])(3\/4)([^/a-z0-9])$/i,to:[null,"¾",null]},lessThanOrEqual:{from:"<=",to:"≤"},greaterThanOrEqual:{from:">=",to:"≥"},notEqual:{from:"!=",to:"≠"},arrowLeft:{from:"<-",to:"←"},arrowRight:{from:"->",to:"→"},horizontalEllipsis:{from:"...",to:"…"},enDash:{from:/(^| )(--)( )$/,to:[null,"–",null]},emDash:{from:/(^| )(---)( )$/,to:[null,"—",null]},quotesPrimary:{from:Qc('"'),to:[null,"“",null,"”"]},quotesSecondary:{from:Qc("'"),to:[null,"‘",null,"’"]},quotesPrimaryEnGb:{from:Qc("'"),to:[null,"‘",null,"’"]},quotesSecondaryEnGb:{from:Qc('"'),to:[null,"“",null,"”"]},quotesPrimaryPl:{from:Qc('"'),to:[null,"„",null,"”"]},quotesSecondaryPl:{from:Qc("'"),to:[null,"‚",null,"’"]}},_I={symbols:["copyright","registeredTrademark","trademark"],mathematical:["oneHalf","oneThird","twoThirds","oneForth","threeQuarters","lessThanOrEqual","greaterThanOrEqual","notEqual","arrowLeft","arrowRight"],typography:["horizontalEllipsis","enDash","emDash"],quotes:["quotesPrimary","quotesSecondary"]},The=["symbols","mathematical","typography","quotes"];class khe extends ie{static get requires(){return["Delete","Input"]}static get pluginName(){return"TextTransformation"}static get isOfficialPlugin(){return!0}constructor(t){super(t),t.config.define("typing",{transformations:{include:The}})}init(){const e=this.editor.model.document.selection;e.on("change:range",()=>{this.isEnabled=!e.anchor.parent.is("element","codeBlock")}),this._enableTransformationWatchers()}_enableTransformationWatchers(){const t=this.editor,e=t.model,n=t.plugins.get("Delete"),s=Ihe(t.config.get("typing.transformations")),r=a=>{for(const l of s)if(l.from.test(a))return{normalizedTransformation:l}},o=new CC(t.model,r);o.on("matched:data",(a,l)=>{if(!l.batch.isTyping)return;const{from:c,to:h}=l.normalizedTransformation,f=c.exec(l.text),m=h(f.slice(1)),p=l.range;let v=f.index;e.enqueueChange(_=>{for(let E=1;E<f.length;E++){const x=f[E],k=m[E-1];if(k==null){v+=x.length;continue}const A=p.start.getShiftedBy(v),S=e.createRange(A,A.getShiftedBy(x.length)),O=Phe(A);e.insertContent(_.createText(k,O),S),v+=k.length}e.enqueueChange(()=>{n.requestUndoOnBackspace()})})}),o.bind("isEnabled").to(this)}}function She(i){return typeof i=="string"?new RegExp(`(${Hne(i)})$`):i}function Ahe(i){return typeof i=="string"?()=>[i]:i instanceof Array?()=>i:i}function Phe(i){return(i.textNode?i.textNode:i.nodeAfter).getAttributes()}function Qc(i){return new RegExp(`(^|\\s)(${i})([^${i}]*)(${i})$`)}function Ihe(i){const t=i.extra||[],e=i.remove||[],n=r=>!e.includes(r),s=i.include.concat(t).filter(n);return Rhe(s).filter(n).map(r=>typeof r=="string"&&yI[r]?yI[r]:r).filter(r=>typeof r=="object").map(r=>({from:She(r.from),to:Ahe(r.to)}))}function Rhe(i){const t=new Set;for(const e of i)if(typeof e=="string"&&_I[e])for(const n of _I[e])t.add(n);else t.add(e);return Array.from(t)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function mw(i,t,e,n){return n.createRange(EI(i,t,e,!0,n),EI(i,t,e,!1,n))}function EI(i,t,e,n,s){let r=i.textNode||(n?i.nodeBefore:i.nodeAfter),o=null;for(;r&&r.getAttribute(t)==e;)o=r,r=n?r.previousSibling:r.nextSibling;return o?s.createPositionAt(o,n?"before":"after"):i}function Ohe(i,t,e,n){const s=i.editing.view,r=new Set;s.document.registerPostFixer(o=>{const a=i.model.document.selection;let l=!1;if(a.hasAttribute(t)){const c=mw(a.getFirstPosition(),t,a.getAttribute(t),i.model),h=i.editing.mapper.toViewRange(c);for(const f of h.getItems())f.is("element",e)&&!f.hasClass(n)&&(o.addClass(n,f),r.add(f),l=!0)}return l}),i.conversion.for("editingDowncast").add(o=>{o.on("insert",a,{priority:"highest"}),o.on("remove",a,{priority:"highest"}),o.on("attribute",a,{priority:"highest"}),o.on("selection",a,{priority:"highest"});function a(){s.change(l=>{for(const c of r.values())l.removeClass(n,c),r.delete(c)})}})}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Ea(i,t,e,n){let s,r=null;typeof n=="function"?s=n:(r=i.commands.get(n),s=()=>{i.execute(n)}),i.model.document.on("change:data",(o,a)=>{if(r&&!r.isEnabled||!t.isEnabled)return;const l=Tn(i.model.document.selection.getRanges());if(!l.isCollapsed||a.isUndo||!a.isLocal)return;const c=Array.from(i.model.document.differ.getChanges()),h=c[0];if(c.length!=1||h.type!=="insert"||h.name!="$text"||h.length!=1)return;const f=h.position.parent;if(f.is("element","codeBlock")||f.is("element","listItem")&&typeof n!="function"&&!["numberedList","bulletedList","todoList"].includes(n)||r&&r.value===!0)return;const m=f.getChild(0),p=i.model.createRangeOn(m);if(!p.containsRange(l)&&!l.end.isEqual(p.end))return;const v=e.exec(m.data.substr(0,l.end.offset));v&&i.model.enqueueChange(_=>{const E=_.createPositionAt(f,0),x=_.createPositionAt(f,v[0].length),k=new ki(E,x);if(s({match:v})!==!1){_.remove(k);const S=i.model.document.selection.getFirstRange(),O=_.createRangeIn(f);f.isEmpty&&!O.isEqual(S)&&!O.containsRange(S,!0)&&_.remove(f)}k.detach(),i.model.enqueueChange(()=>{i.plugins.get("Delete").requestUndoOnBackspace()})})})}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function eu(i,t,e,n){let s,r;e instanceof RegExp?s=e:r=e,r=r||(o=>{let a;const l=[],c=[];for(;(a=s.exec(o))!==null&&!(a&&a.length<4);){let{index:h,"1":f,"2":m,"3":p}=a;const v=f+m+p;h+=a[0].length-v.length;const _=[h,h+f.length],E=[h+f.length+m.length,h+f.length+m.length+p.length];l.push(_),l.push(E),c.push([h+f.length,h+f.length+m.length])}return{remove:l,format:c}}),i.model.document.on("change:data",(o,a)=>{if(a.isUndo||!a.isLocal||!t.isEnabled)return;const l=i.model,c=l.document.selection;if(!c.isCollapsed)return;const h=Array.from(l.document.differ.getChanges()),f=h[0];if(h.length!=1||f.type!=="insert"||f.name!="$text"||f.length!=1)return;const m=c.focus,p=m.parent,{text:v,range:_}=Nhe(l.createRange(l.createPositionAt(p,0),m),l),E=r(v),x=CI(_.start,E.format,l),k=CI(_.start,E.remove,l);x.length&&k.length&&l.enqueueChange(A=>{if(n(A,x)!==!1){for(const O of k.reverse())A.remove(O);l.enqueueChange(()=>{i.plugins.get("Delete").requestUndoOnBackspace()})}})})}function CI(i,t,e){return t.filter(n=>n[0]!==void 0&&n[1]!==void 0).map(n=>e.createRange(i.getShiftedBy(n[0]),i.getShiftedBy(n[1])))}function Nhe(i,t){let e=i.start;return{text:Array.from(i.getItems()).reduce((s,r)=>!(r.is("$text")||r.is("$textProxy"))||r.getAttribute("code")?(e=t.createPositionAfter(r),""):s+r.data,""),range:t.createRange(e,i.end)}}class Mhe extends ie{static get requires(){return[co]}static get pluginName(){return"Autoformat"}static get isOfficialPlugin(){return!0}afterInit(){const t=this.editor,e=this.editor.t;this._addListAutoformats(),this._addBasicStylesAutoformats(),this._addHeadingAutoformats(),this._addBlockQuoteAutoformats(),this._addCodeBlockAutoformats(),this._addHorizontalLineAutoformats(),t.accessibility.addKeystrokeInfos({keystrokes:[{label:e("Revert autoformatting action"),keystroke:"Backspace"}]})}_addListAutoformats(){const t=this.editor.commands;t.get("bulletedList")&&Ea(this.editor,this,/^[*-]\s$/,"bulletedList"),t.get("numberedList")&&Ea(this.editor,this,/^1[.|)]\s$/,"numberedList"),t.get("todoList")&&Ea(this.editor,this,/^\[\s?\]\s$/,"todoList"),t.get("checkTodoList")&&Ea(this.editor,this,/^\[\s?x\s?\]\s$/,()=>{this.editor.execute("todoList"),this.editor.execute("checkTodoList")})}_addBasicStylesAutoformats(){const t=this.editor.commands;if(t.get("bold")){const e=Rg(this.editor,"bold");eu(this.editor,this,/(?:^|\s)(\*\*)([^*]+)(\*\*)$/g,e),eu(this.editor,this,/(?:^|\s)(__)([^_]+)(__)$/g,e)}if(t.get("italic")){const e=Rg(this.editor,"italic");eu(this.editor,this,/(?:^|\s)(\*)([^*_]+)(\*)$/g,e),eu(this.editor,this,/(?:^|\s)(_)([^_]+)(_)$/g,e)}if(t.get("code")){const e=Rg(this.editor,"code");eu(this.editor,this,/(`)([^`]+)(`)$/g,e)}if(t.get("strikethrough")){const e=Rg(this.editor,"strikethrough");eu(this.editor,this,/(~~)([^~]+)(~~)$/g,e)}}_addHeadingAutoformats(){const t=this.editor.commands.get("heading");t&&t.modelElements.filter(e=>e.match(/^heading[1-6]$/)).forEach(e=>{const n=e[7],s=new RegExp(`^(#{${n}})\\s$`);Ea(this.editor,this,s,()=>{if(!t.isEnabled||t.value===e)return!1;this.editor.execute("heading",{value:e})})})}_addBlockQuoteAutoformats(){this.editor.commands.get("blockQuote")&&Ea(this.editor,this,/^>\s$/,"blockQuote")}_addCodeBlockAutoformats(){const t=this.editor,e=t.model.document.selection;t.commands.get("codeBlock")&&Ea(t,this,/^```$/,()=>{if(e.getFirstPosition().parent.is("element","listItem"))return!1;this.editor.execute("codeBlock",{usePreviousLanguageChoice:!0})})}_addHorizontalLineAutoformats(){this.editor.commands.get("horizontalLine")&&Ea(this.editor,this,/^---$/,"horizontalLine")}}function Rg(i,t){return(e,n)=>{if(!i.commands.get(t).isEnabled)return!1;const r=i.model.schema.getValidRanges(n,t);for(const o of r)e.setAttribute(t,!0,o);e.removeSelectionAttribute(t)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class Lhe extends ie{constructor(e){super(e);b(this,"adapter");b(this,"_debouncedSave");b(this,"_lastDocumentVersion");b(this,"_savePromise");b(this,"_domEmitter");b(this,"_config");b(this,"_pendingActions");b(this,"_makeImmediateSave");b(this,"_action",null);const n=e.config.get("autosave")||{},s=n.waitingTime||1e3;this.set("state","synchronized"),this._debouncedSave=qs(this._save.bind(this),s),this._lastDocumentVersion=e.model.document.version,this._savePromise=null,this._domEmitter=new(Ri()),this._config=n,this._pendingActions=e.plugins.get(Jp),this._makeImmediateSave=!1}static get pluginName(){return"Autosave"}static get isOfficialPlugin(){return!0}static get requires(){return[Jp]}init(){const e=this.editor,n=e.model.document;this.listenTo(e,"ready",()=>{this.listenTo(n,"change:data",(s,r)=>{this._saveCallbacks.length&&r.isLocal&&(this.state==="synchronized"&&(this.state="waiting",this._setPendingAction()),this.state==="waiting"&&this._debouncedSave())})}),this.listenTo(e,"destroy",()=>this._flush(),{priority:"highest"});/* istanbul ignore next -- @preserve */this._domEmitter.listenTo(window,"beforeunload",(s,r)=>{this._pendingActions.hasAny&&(r.returnValue=this._pendingActions.first.message)})}destroy(){this._domEmitter.stopListening(),super.destroy()}save(){return this._debouncedSave.cancel(),this._save()}_flush(){this._debouncedSave.flush()}_save(){return this._savePromise?(this._makeImmediateSave=this.editor.model.document.version>this._lastDocumentVersion,this._savePromise):(this._setPendingAction(),this.state="saving",this._lastDocumentVersion=this.editor.model.document.version,this._savePromise=Promise.resolve().then(()=>Promise.all(this._saveCallbacks.map(e=>e(this.editor)))).finally(()=>{this._savePromise=null}).then(()=>{if(this._makeImmediateSave)return this._makeImmediateSave=!1,this._save();this.editor.model.document.version>this._lastDocumentVersion?(this.state="waiting",this._debouncedSave()):(this.state="synchronized",this._pendingActions.remove(this._action),this._action=null)}).catch(e=>{throw this.state="error",this.state="saving",this._debouncedSave(),e}),this._savePromise)}_setPendingAction(){const e=this.editor.t;this._action||(this._action=this._pendingActions.add(e("Saving changes")))}get _saveCallbacks(){const e=[];return this.adapter&&this.adapter.save&&e.push(this.adapter.save),this._config.save&&e.push(this._config.save),e}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class xC extends lt{constructor(e,n){super(e);b(this,"attributeKey");this.attributeKey=n}refresh(){const e=this.editor.model,n=e.document;this.value=this._getValueFromFirstAllowedNode(),this.isEnabled=e.schema.checkAttributeInSelection(n.selection,this.attributeKey)}execute(e={}){const n=this.editor.model,r=n.document.selection,o=e.forceValue===void 0?!this.value:e.forceValue;n.change(a=>{if(r.isCollapsed)o?a.setSelectionAttribute(this.attributeKey,!0):a.removeSelectionAttribute(this.attributeKey);else{const l=n.schema.getValidRanges(r.getRanges(),this.attributeKey);for(const c of l)o?a.setAttribute(this.attributeKey,o,c):a.removeAttribute(this.attributeKey,c)}})}_getValueFromFirstAllowedNode(){const e=this.editor.model,n=e.schema,s=e.document.selection;if(s.isCollapsed)return s.hasAttribute(this.attributeKey);for(const r of s.getRanges())for(const o of r.getItems())if(n.checkAttribute(o,this.attributeKey))return o.hasAttribute(this.attributeKey);return!1}}const tu="bold";class Vhe extends ie{static get pluginName(){return"BoldEditing"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=this.editor.t;t.model.schema.extend("$text",{allowAttributes:tu}),t.model.schema.setAttributeProperties(tu,{isFormatting:!0,copyOnEnter:!0}),t.conversion.attributeToElement({model:tu,view:"strong",upcastAlso:["b",n=>{const s=n.getStyle("font-weight");return s&&(s=="bold"||Number(s)>=600)?{name:!0,styles:["font-weight"]}:null}]}),t.commands.add(tu,new xC(t,tu)),t.keystrokes.set("CTRL+B",tu),t.accessibility.addKeystrokeInfos({keystrokes:[{label:e("Bold text"),keystroke:"CTRL+B"}]})}}function TC({editor:i,commandName:t,plugin:e,icon:n,label:s,keystroke:r}){return o=>{const a=i.commands.get(t),l=new o(i.locale);return l.set({label:s,icon:n,keystroke:r,isToggleable:!0}),l.bind("isEnabled").to(a,"isEnabled"),l.bind("isOn").to(a,"value"),l instanceof Xn?l.set({role:"menuitemcheckbox"}):l.set({tooltip:!0}),e.listenTo(l,"execute",()=>{i.execute(t),i.editing.view.focus()}),l}}const D1="bold";class Dhe extends ie{static get pluginName(){return"BoldUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.locale.t,n=TC({editor:t,commandName:D1,plugin:this,icon:ke.bold,label:e("Bold"),keystroke:"CTRL+B"});t.ui.componentFactory.add(D1,()=>n(rt)),t.ui.componentFactory.add("menuBar:"+D1,()=>n(Xn))}}class Bhe extends ie{static get requires(){return[Vhe,Dhe]}static get pluginName(){return"Bold"}static get isOfficialPlugin(){return!0}}const nu="italic";class Fhe extends ie{static get pluginName(){return"ItalicEditing"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=this.editor.t;t.model.schema.extend("$text",{allowAttributes:nu}),t.model.schema.setAttributeProperties(nu,{isFormatting:!0,copyOnEnter:!0}),t.conversion.attributeToElement({model:nu,view:"i",upcastAlso:["em",{styles:{"font-style":"italic"}}]}),t.commands.add(nu,new xC(t,nu)),t.keystrokes.set("CTRL+I",nu),t.accessibility.addKeystrokeInfos({keystrokes:[{label:e("Italic text"),keystroke:"CTRL+I"}]})}}var $he='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m9.586 14.633.021.004c-.036.335.095.655.393.962.082.083.173.15.274.201h1.474a.6.6 0 1 1 0 1.2H5.304a.6.6 0 0 1 0-1.2h1.15c.474-.07.809-.182 1.005-.334.157-.122.291-.32.404-.597l2.416-9.55a1.053 1.053 0 0 0-.281-.823 1.12 1.12 0 0 0-.442-.296H8.15a.6.6 0 0 1 0-1.2h6.443a.6.6 0 1 1 0 1.2h-1.195c-.376.056-.65.155-.823.296-.215.175-.423.439-.623.79l-2.366 9.347z"/></svg>';const B1="italic";class zhe extends ie{static get pluginName(){return"ItalicUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.locale.t,n=TC({editor:t,commandName:B1,plugin:this,icon:$he,keystroke:"CTRL+I",label:e("Italic")});t.ui.componentFactory.add(B1,()=>n(rt)),t.ui.componentFactory.add("menuBar:"+B1,()=>n(Xn))}}class jhe extends ie{static get requires(){return[Fhe,zhe]}static get pluginName(){return"Italic"}static get isOfficialPlugin(){return!0}}const ah="underline";class Hhe extends ie{static get pluginName(){return"UnderlineEditing"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=this.editor.t;t.model.schema.extend("$text",{allowAttributes:ah}),t.model.schema.setAttributeProperties(ah,{isFormatting:!0,copyOnEnter:!0}),t.conversion.attributeToElement({model:ah,view:"u",upcastAlso:{styles:{"text-decoration":"underline"}}}),t.commands.add(ah,new xC(t,ah)),t.keystrokes.set("CTRL+U","underline"),t.accessibility.addKeystrokeInfos({keystrokes:[{label:e("Underline text"),keystroke:"CTRL+U"}]})}}var Uhe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 18v-1.5h14V18zm2.2-8V3.6c0-.4.4-.6.8-.6.3 0 .7.2.7.6v6.2c0 2 1.3 2.8 3.2 2.8 1.9 0 3.4-.9 3.4-2.9V3.6c0-.3.4-.5.8-.5.3 0 .7.2.7.5V10c0 2.7-2.2 4-4.9 4-2.6 0-4.7-1.2-4.7-4z"/></svg>';const F1="underline";class Whe extends ie{static get pluginName(){return"UnderlineUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.locale.t,n=TC({editor:t,commandName:F1,plugin:this,icon:Uhe,label:e("Underline"),keystroke:"CTRL+U"});t.ui.componentFactory.add(F1,()=>n(rt)),t.ui.componentFactory.add("menuBar:"+F1,()=>n(Xn))}}class qhe extends ie{static get requires(){return[Hhe,Whe]}static get pluginName(){return"Underline"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 *//**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function*LL(i,t){for(const e of t)e&&i.getAttributeProperties(e[0]).copyOnEnter&&(yield e)}class Ghe extends lt{execute(){this.editor.model.change(t=>{this.enterBlock(t),this.fire("afterExecute",{writer:t})})}enterBlock(t){const e=this.editor.model,n=e.document.selection,s=e.schema,r=n.isCollapsed,o=n.getFirstRange(),a=o.start.parent,l=o.end.parent;if(s.isLimit(a)||s.isLimit(l))return!r&&a==l&&e.deleteContent(n),!1;if(r){const c=LL(t.model.schema,n.getAttributes());return xI(t,o.start),t.setSelectionAttribute(c),!0}else{const c=!(o.start.isAtStart&&o.end.isAtEnd),h=a==l;if(e.deleteContent(n,{leaveUnmerged:c}),c){if(h)return xI(t,n.focus),!0;t.setSelection(l,0)}}return!1}}function xI(i,t){i.split(t),i.setSelection(t.parent.nextSibling,0)}const Khe={insertParagraph:{isSoft:!1},insertLineBreak:{isSoft:!0}};class VL extends ho{constructor(t){super(t);const e=this.document;let n=!1;e.on("keydown",(s,r)=>{n=r.shiftKey}),e.on("beforeinput",(s,r)=>{if(!this.isEnabled)return;let o=r.inputType;Xe.isSafari&&n&&o=="insertParagraph"&&(o="insertLineBreak");const a=r.domEvent,l=Khe[o];if(!l)return;const c=new rd(e,"enter",r.targetRanges[0]);e.fire(c,new zu(t,a,{isSoft:l.isSoft})),c.stop.called&&s.stop()})}observe(){}stopObserving(){}}class gw extends ie{static get pluginName(){return"Enter"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.editing.view,n=e.document,s=this.editor.t;e.addObserver(VL),t.commands.add("enter",new Ghe(t)),this.listenTo(n,"enter",(r,o)=>{n.isComposing||o.preventDefault(),!o.isSoft&&(t.execute("enter"),e.scrollToTheSelection())},{priority:"low"}),t.accessibility.addKeystrokeInfos({keystrokes:[{label:s("Insert a hard break (a new paragraph)"),keystroke:"Enter"}]})}}class Yhe extends lt{execute(){const t=this.editor.model,e=t.document;t.change(n=>{Xhe(t,n,e.selection),this.fire("afterExecute",{writer:n})})}refresh(){const t=this.editor.model,e=t.document;this.isEnabled=Zhe(t.schema,e.selection)}}function Zhe(i,t){if(t.rangeCount>1)return!1;const e=t.anchor;if(!e||!i.checkChild(e,"softBreak"))return!1;const n=t.getFirstRange(),s=n.start.parent,r=n.end.parent;return!((h_(s,i)||h_(r,i))&&s!==r)}function Xhe(i,t,e){const n=e.isCollapsed,s=e.getFirstRange(),r=s.start.parent,o=s.end.parent,a=r==o;if(n){const l=LL(i.schema,e.getAttributes());TI(i,t,s.end),t.removeSelectionAttribute(e.getAttributeKeys()),t.setSelectionAttribute(l)}else{const l=!(s.start.isAtStart&&s.end.isAtEnd);i.deleteContent(e,{leaveUnmerged:l}),a?TI(i,t,e.focus):l&&t.setSelection(o,0)}}function TI(i,t,e){const n=t.createElement("softBreak");i.insertContent(n,e),t.setSelection(n,"after")}function h_(i,t){return i.is("rootElement")?!1:t.isLimit(i)||h_(i.parent,t)}class Jhe extends ie{static get pluginName(){return"ShiftEnter"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.model.schema,n=t.conversion,s=t.editing.view,r=s.document,o=this.editor.t;e.register("softBreak",{allowWhere:"$text",isInline:!0}),n.for("upcast").elementToElement({model:"softBreak",view:"br"}),n.for("downcast").elementToElement({model:"softBreak",view:(a,{writer:l})=>l.createEmptyElement("br")}),s.addObserver(VL),t.commands.add("shiftEnter",new Yhe(t)),this.listenTo(r,"enter",(a,l)=>{r.isComposing||l.preventDefault(),l.isSoft&&(t.execute("shiftEnter"),s.scrollToTheSelection())},{priority:"low"}),t.accessibility.addKeystrokeInfos({keystrokes:[{label:o("Insert a soft break (a <code>&lt;br&gt;</code> element)"),keystroke:"Shift+Enter"}]})}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class Qhe extends lt{refresh(){this.value=this._getValue(),this.isEnabled=this._checkEnabled()}execute(t={}){const e=this.editor.model,n=e.schema,s=e.document.selection,r=Array.from(s.getSelectedBlocks()),o=t.forceValue===void 0?!this.value:t.forceValue;e.change(a=>{if(!o)this._removeQuote(a,r.filter(Og));else{const l=r.filter(c=>Og(c)||SI(n,c));this._applyQuote(a,l)}})}_getValue(){const t=this.editor.model.document.selection,e=Tn(t.getSelectedBlocks());return!!(e&&Og(e))}_checkEnabled(){if(this.value)return!0;const t=this.editor.model.document.selection,e=this.editor.model.schema,n=Tn(t.getSelectedBlocks());return n?SI(e,n):!1}_removeQuote(t,e){kI(t,e).reverse().forEach(n=>{if(n.start.isAtStart&&n.end.isAtEnd){t.unwrap(n.start.parent);return}if(n.start.isAtStart){const r=t.createPositionBefore(n.start.parent);t.move(n,r);return}n.end.isAtEnd||t.split(n.end);const s=t.createPositionAfter(n.end.parent);t.move(n,s)})}_applyQuote(t,e){const n=[];kI(t,e).reverse().forEach(s=>{let r=Og(s.start);r||(r=t.createElement("blockQuote"),t.wrap(s,r)),n.push(r)}),n.reverse().reduce((s,r)=>s.nextSibling==r?(t.merge(t.createPositionAfter(s)),s):r)}}function Og(i){return i.parent.name=="blockQuote"?i.parent:null}function kI(i,t){let e,n=0;const s=[];for(;n<t.length;){const r=t[n],o=t[n+1];e||(e=i.createPositionBefore(r)),(!o||r.nextSibling!=o)&&(s.push(i.createRange(e,i.createPositionAfter(r))),e=null),n++}return s}function SI(i,t){const e=i.checkChild(t.parent,"blockQuote"),n=i.checkChild(["$root","blockQuote"],t);return e&&n}class efe extends ie{static get pluginName(){return"BlockQuoteEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[gw,co]}init(){const t=this.editor,e=t.model.schema;t.commands.add("blockQuote",new Qhe(t)),e.register("blockQuote",{inheritAllFrom:"$container"}),t.conversion.elementToElement({model:"blockQuote",view:"blockquote"}),t.model.document.registerPostFixer(o=>{const a=t.model.document.differ.getChanges();for(const l of a)if(l.type=="insert"){const c=l.position.nodeAfter;if(!c)continue;if(c.is("element","blockQuote")&&c.isEmpty)return o.remove(c),!0;if(c.is("element","blockQuote")&&!e.checkChild(l.position,c))return o.unwrap(c),!0;if(c.is("element")){const h=o.createRangeIn(c);for(const f of h.getItems())if(f.is("element","blockQuote")&&!e.checkChild(o.createPositionBefore(f),f))return o.unwrap(f),!0}}else if(l.type=="remove"){const c=l.position.parent;if(c.is("element","blockQuote")&&c.isEmpty)return o.remove(c),!0}return!1});const n=this.editor.editing.view.document,s=t.model.document.selection,r=t.commands.get("blockQuote");this.listenTo(n,"enter",(o,a)=>{if(!s.isCollapsed||!r.value)return;s.getLastPosition().parent.isEmpty&&(t.execute("blockQuote"),t.editing.view.scrollToTheSelection(),a.preventDefault(),o.stop())},{context:"blockquote"}),this.listenTo(n,"delete",(o,a)=>{if(a.direction!="backward"||!s.isCollapsed||!r.value)return;const l=s.getLastPosition().parent;l.isEmpty&&!l.previousSibling&&(t.execute("blockQuote"),t.editing.view.scrollToTheSelection(),a.preventDefault(),o.stop())},{context:"blockquote"})}}class tfe extends ie{static get pluginName(){return"BlockQuoteUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor;t.ui.componentFactory.add("blockQuote",()=>{const e=this._createButton(rt);return e.set({tooltip:!0}),e}),t.ui.componentFactory.add("menuBar:blockQuote",()=>{const e=this._createButton(Xn);return e.set({role:"menuitemcheckbox"}),e})}_createButton(t){const e=this.editor,n=e.locale,s=e.commands.get("blockQuote"),r=new t(e.locale),o=n.t;return r.set({label:o("Block quote"),icon:ke.quote,isToggleable:!0}),r.bind("isEnabled").to(s,"isEnabled"),r.bind("isOn").to(s,"value"),this.listenTo(r,"execute",()=>{e.execute("blockQuote"),e.editing.view.focus()}),r}}class nfe extends ie{static get requires(){return[efe,tfe]}static get pluginName(){return"BlockQuote"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class ife extends Ft(){constructor(){super(...arguments);b(this,"_stack",[])}add(e,n){const s=this._stack,r=s[0];this._insertDescriptor(e);const o=s[0];r!==o&&!$1(r,o)&&this.fire("change:top",{oldDescriptor:r,newDescriptor:o,writer:n})}remove(e,n){const s=this._stack,r=s[0];this._removeDescriptor(e);const o=s[0];r!==o&&!$1(r,o)&&this.fire("change:top",{oldDescriptor:r,newDescriptor:o,writer:n})}_insertDescriptor(e){const n=this._stack,s=n.findIndex(o=>o.id===e.id);if($1(e,n[s]))return;s>-1&&n.splice(s,1);let r=0;for(;n[r]&&sfe(n[r],e);)r++;n.splice(r,0,e)}_removeDescriptor(e){const n=this._stack,s=n.findIndex(r=>r.id===e);s>-1&&n.splice(s,1)}}function $1(i,t){return i&&t&&i.priority==t.priority&&eb(i.classes)==eb(t.classes)}function sfe(i,t){return i.priority>t.priority?!0:i.priority<t.priority?!1:eb(i.classes)>eb(t.classes)}function eb(i){return Array.isArray(i)?i.sort().join(","):i}var rfe='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M4 0v1H1v3H0V.5A.5.5 0 0 1 .5 0H4zm8 0h3.5a.5.5 0 0 1 .5.5V4h-1V1h-3V0zM4 16H.5a.5.5 0 0 1-.5-.5V12h1v3h3v1zm8 0v-1h3v-3h1v3.5a.5.5 0 0 1-.5.5H12z"/><path fill-opacity=".256" d="M1 1h14v14H1z"/><g class="ck-icon__selected-indicator"><path d="M7 0h2v1H7V0zM0 7h1v2H0V7zm15 0h1v2h-1V7zm-8 8h2v1H7v-1z"/><path fill-opacity=".254" d="M1 1h14v14H1z"/></g></svg>';const ofe="ck-widget",AI="ck-widget_selected";function En(i){return i.is("element")?!!i.getCustomProperty("widget"):!1}function kC(i,t,e={}){if(!i.is("containerElement"))throw new B("widget-to-widget-wrong-element-type",null,{element:i});return t.setAttribute("contenteditable","false",i),t.addClass(ofe,i),t.setCustomProperty("widget",!0,i),i.getFillerOffset=dfe,t.setCustomProperty("widgetLabel",[],i),e.label&&cfe(i,e.label),e.hasSelectionHandle&&hfe(i,t),DL(i,t),i}function afe(i,t,e){if(t.classes&&e.addClass(Qt(t.classes),i),t.attributes)for(const n in t.attributes)e.setAttribute(n,t.attributes[n],i)}function lfe(i,t,e){if(t.classes&&e.removeClass(Qt(t.classes),i),t.attributes)for(const n in t.attributes)e.removeAttribute(n,i)}function DL(i,t,e=afe,n=lfe){const s=new ife;s.on("change:top",(a,l)=>{l.oldDescriptor&&n(i,l.oldDescriptor,l.writer),l.newDescriptor&&e(i,l.newDescriptor,l.writer)});const r=(a,l,c)=>s.add(l,c),o=(a,l,c)=>s.remove(l,c);t.setCustomProperty("addHighlight",r,i),t.setCustomProperty("removeHighlight",o,i)}function cfe(i,t){i.getCustomProperty("widgetLabel").push(t)}function ufe(i){return i.getCustomProperty("widgetLabel").reduce((e,n)=>typeof n=="function"?e?e+". "+n():n():e?e+". "+n:n,"")}function SC(i,t,e={}){return t.addClass(["ck-editor__editable","ck-editor__nested-editable"],i),t.setAttribute("role","textbox",i),t.setAttribute("tabindex","-1",i),e.label&&t.setAttribute("aria-label",e.label,i),t.setAttribute("contenteditable",i.isReadOnly?"false":"true",i),i.on("change:isReadOnly",(n,s,r)=>{t.setAttribute("contenteditable",r?"false":"true",i)}),i.on("change:isFocused",(n,s,r)=>{r?t.addClass("ck-editor__nested-editable_focused",i):t.removeClass("ck-editor__nested-editable_focused",i)}),DL(i,t),i}function BL(i,t){const e=i.getSelectedElement();if(e){const n=ka(i);if(n)return t.createRange(t.createPositionAt(e,n))}return t.schema.findOptimalInsertionRange(i)}function dfe(){return null}function hfe(i,t){const e=t.createUIElement("div",{class:"ck ck-widget__selection-handle"},function(n){const s=this.toDomElement(n),r=new lo;return r.set("content",rfe),r.render(),s.appendChild(r.element),s});t.insert(t.createPositionAt(i,0),e),t.addClass(["ck-widget_with-selection-handle"],i)}function AC(i){const t=a=>{const{width:l,paddingLeft:c,paddingRight:h}=a.ownerDocument.defaultView.getComputedStyle(a);return parseFloat(l)-(parseFloat(c)||0)-(parseFloat(h)||0)},e=i.parentElement;if(!e)return 0;let n=t(e);const s=5;let r=0,o=e;for(;isNaN(n);){if(o=o.parentElement,++r>s)return 0;n=t(o)}return n}function ffe(i,t=new at(i)){const e=AC(i);return e?t.width/e*100:0}const Io="widget-type-around";function yl(i,t,e){return!!i&&En(i)&&!e.isInline(t)}function mfe(i){return i.closest(".ck-widget__type-around__button")}function gfe(i){return i.classList.contains("ck-widget__type-around__button_before")?"before":"after"}function pfe(i,t){const e=i.closest(".ck-widget");return t.mapDomToView(e)}function ka(i){return i.getAttribute(Io)}var bfe='<svg viewBox="0 0 10 8" xmlns="http://www.w3.org/2000/svg"><path d="M9.055.263v3.972h-6.77M1 4.216l2-2.038m-2 2 2 2.038"/></svg>';const FL=["before","after"],wfe=new DOMParser().parseFromString(bfe,"image/svg+xml").firstChild,PI="ck-widget__type-around_disabled";class vfe extends ie{constructor(){super(...arguments);b(this,"_currentFakeCaretModelElement",null)}static get pluginName(){return"WidgetTypeAround"}static get isOfficialPlugin(){return!0}static get requires(){return[gw,co]}init(){const e=this.editor,n=e.editing.view;this.on("change:isEnabled",(s,r,o)=>{n.change(a=>{for(const l of n.document.roots)o?a.removeClass(PI,l):a.addClass(PI,l)}),o||e.model.change(a=>{a.removeSelectionAttribute(Io)})}),this._enableTypeAroundUIInjection(),this._enableInsertingParagraphsOnButtonClick(),this._enableInsertingParagraphsOnEnterKeypress(),this._enableInsertingParagraphsOnTypingKeystroke(),this._enableTypeAroundFakeCaretActivationUsingKeyboardArrows(),this._enableDeleteIntegration(),this._enableInsertContentIntegration(),this._enableInsertObjectIntegration(),this._enableDeleteContentIntegration()}destroy(){super.destroy(),this._currentFakeCaretModelElement=null}_insertParagraph(e,n){const s=this.editor,r=s.editing.view,o=s.model.schema.getAttributesWithProperty(e,"copyOnReplace",!0);s.execute("insertParagraph",{position:s.model.createPositionAt(e,n),attributes:o}),r.focus(),r.scrollToTheSelection()}_listenToIfEnabled(e,n,s,r){this.listenTo(e,n,(...o)=>{this.isEnabled&&s(...o)},r)}_insertParagraphAccordingToFakeCaretPosition(){const s=this.editor.model.document.selection,r=ka(s);if(!r)return!1;const o=s.getSelectedElement();return this._insertParagraph(o,r),!0}_enableTypeAroundUIInjection(){const e=this.editor,n=e.model.schema,s=e.locale.t,r={before:s("Insert paragraph before block"),after:s("Insert paragraph after block")};e.editing.downcastDispatcher.on("insert",(o,a,l)=>{const c=l.mapper.toViewElement(a.item);c&&yl(c,a.item,n)&&(yfe(l.writer,r,c),c.getCustomProperty("widgetLabel").push(()=>this.isEnabled?s("Press Enter to type after or press Shift + Enter to type before the widget"):""))},{priority:"low"})}_enableTypeAroundFakeCaretActivationUsingKeyboardArrows(){const e=this.editor,n=e.model,s=n.document.selection,r=n.schema,o=e.editing.view;this._listenToIfEnabled(o.document,"arrowKey",(l,c)=>{this._handleArrowKeyPress(l,c)},{context:[En,"$text"],priority:"high"}),this._listenToIfEnabled(s,"change:range",(l,c)=>{c.directChange&&e.model.change(h=>{h.removeSelectionAttribute(Io)})}),this._listenToIfEnabled(n.document,"change:data",()=>{const l=s.getSelectedElement();if(l){const c=e.editing.mapper.toViewElement(l);if(yl(c,l,r))return}e.model.change(c=>{c.removeSelectionAttribute(Io)})}),this._listenToIfEnabled(e.editing.downcastDispatcher,"selection",(l,c,h)=>{const f=h.writer;if(this._currentFakeCaretModelElement){const _=h.mapper.toViewElement(this._currentFakeCaretModelElement);_&&(f.removeClass(FL.map(a),_),this._currentFakeCaretModelElement=null)}const m=c.selection.getSelectedElement();if(!m)return;const p=h.mapper.toViewElement(m);if(!yl(p,m,r))return;const v=ka(c.selection);v&&(f.addClass(a(v),p),this._currentFakeCaretModelElement=m)}),this._listenToIfEnabled(e.ui.focusTracker,"change:isFocused",(l,c,h)=>{h||e.model.change(f=>{f.removeSelectionAttribute(Io)})});function a(l){return`ck-widget_type-around_show-fake-caret_${l}`}}_handleArrowKeyPress(e,n){const s=this.editor,r=s.model,o=r.document.selection,a=r.schema,l=s.editing.view,c=n.keyCode,h=Zie(c,s.locale.contentLanguageDirection),f=l.document.selection.getSelectedElement(),m=s.editing.mapper.toModelElement(f);let p;yl(f,m,a)?p=this._handleArrowKeyPressOnSelectedWidget(h):o.isCollapsed?p=this._handleArrowKeyPressWhenSelectionNextToAWidget(h):n.shiftKey||(p=this._handleArrowKeyPressWhenNonCollapsedSelection(h)),p&&(n.preventDefault(),e.stop())}_handleArrowKeyPressOnSelectedWidget(e){const s=this.editor.model,r=s.document.selection,o=ka(r);return s.change(a=>{if(o){if(!(o===(e?"after":"before")))return a.removeSelectionAttribute(Io),!0}else return a.setSelectionAttribute(Io,e?"after":"before"),!0;return!1})}_handleArrowKeyPressWhenSelectionNextToAWidget(e){const n=this.editor,s=n.model,r=s.schema,o=n.plugins.get("Widget"),a=o._getObjectElementNextToSelection(e),l=n.editing.mapper.toViewElement(a);return yl(l,a,r)?(s.change(c=>{o._setSelectionOverElement(a),c.setSelectionAttribute(Io,e?"before":"after")}),!0):!1}_handleArrowKeyPressWhenNonCollapsedSelection(e){const n=this.editor,s=n.model,r=s.schema,o=n.editing.mapper,a=s.document.selection,l=e?a.getLastPosition().nodeBefore:a.getFirstPosition().nodeAfter,c=o.toViewElement(l);return yl(c,l,r)?(s.change(h=>{h.setSelection(l,"on"),h.setSelectionAttribute(Io,e?"after":"before")}),!0):!1}_enableInsertingParagraphsOnButtonClick(){const e=this.editor,n=e.editing.view;this._listenToIfEnabled(n.document,"mousedown",(s,r)=>{const o=mfe(r.domTarget);if(!o)return;const a=gfe(o),l=pfe(o,n.domConverter),c=e.editing.mapper.toModelElement(l);this._insertParagraph(c,a),r.preventDefault(),s.stop()})}_enableInsertingParagraphsOnEnterKeypress(){const e=this.editor,n=e.model.document.selection,s=e.editing.view;this._listenToIfEnabled(s.document,"enter",(r,o)=>{if(r.eventPhase!="atTarget")return;const a=n.getSelectedElement(),l=e.editing.mapper.toViewElement(a),c=e.model.schema;let h;this._insertParagraphAccordingToFakeCaretPosition()?h=!0:yl(l,a,c)&&(this._insertParagraph(a,o.isSoft?"before":"after"),h=!0),h&&(o.preventDefault(),r.stop())},{context:En})}_enableInsertingParagraphsOnTypingKeystroke(){const n=this.editor.editing.view.document;this._listenToIfEnabled(n,"insertText",(s,r)=>{this._insertParagraphAccordingToFakeCaretPosition()&&(r.selection=n.selection)},{priority:"high"}),Xe.isAndroid?this._listenToIfEnabled(n,"keydown",(s,r)=>{r.keyCode==229&&this._insertParagraphAccordingToFakeCaretPosition()}):this._listenToIfEnabled(n,"compositionstart",()=>{this._insertParagraphAccordingToFakeCaretPosition()},{priority:"high"})}_enableDeleteIntegration(){const e=this.editor,n=e.editing.view,s=e.model,r=s.schema;this._listenToIfEnabled(n.document,"delete",(o,a)=>{if(o.eventPhase!="atTarget")return;const l=ka(s.document.selection);if(!l)return;const c=a.direction,h=s.document.selection.getSelectedElement(),f=l==="before",m=c=="forward";if(f===m)e.execute("delete",{selection:s.createSelection(h,"on")});else{const v=r.getNearestSelectionRange(s.createPositionAt(h,l),c);if(v)if(!v.isCollapsed)s.change(_=>{_.setSelection(v),e.execute(m?"deleteForward":"delete")});else{const _=s.createSelection(v.start);if(s.modifySelection(_,{direction:c}),!_.focus.isEqual(v.start))s.change(E=>{E.setSelection(v),e.execute(m?"deleteForward":"delete")});else{const E=Cfe(r,v.start.parent);s.deleteContent(s.createSelection(E,"on"),{doNotAutoparagraph:!0})}}}a.preventDefault(),o.stop()},{context:En})}_enableInsertContentIntegration(){const e=this.editor,n=this.editor.model,s=n.document.selection;this._listenToIfEnabled(e.model,"insertContent",(r,[o,a])=>{if(a&&!a.is("documentSelection"))return;const l=ka(s);if(l)return r.stop(),n.change(c=>{const h=s.getSelectedElement(),f=n.createPositionAt(h,l),m=c.createSelection(f),p=n.insertContent(o,m);return c.setSelection(m),p})},{priority:"high"})}_enableInsertObjectIntegration(){const e=this.editor,s=this.editor.model.document.selection;this._listenToIfEnabled(e.model,"insertObject",(r,o)=>{const[,a,l={}]=o;if(a&&!a.is("documentSelection"))return;const c=ka(s);c&&(l.findOptimalPosition=c,o[3]=l)},{priority:"high"})}_enableDeleteContentIntegration(){const e=this.editor,s=this.editor.model.document.selection;this._listenToIfEnabled(e.model,"deleteContent",(r,[o])=>{if(o&&!o.is("documentSelection"))return;ka(s)&&r.stop()},{priority:"high"})}}function yfe(i,t,e){const n=i.createUIElement("div",{class:"ck ck-reset_all ck-widget__type-around"},function(s){const r=this.toDomElement(s);return _fe(r,t),Efe(r),r});i.insert(i.createPositionAt(e,"end"),n)}function _fe(i,t){for(const e of FL){const n=new Zi({tag:"div",attributes:{class:["ck","ck-widget__type-around__button",`ck-widget__type-around__button_${e}`],title:t[e],"aria-hidden":"true"},children:[i.ownerDocument.importNode(wfe,!0)]});i.appendChild(n.render())}}function Efe(i){const t=new Zi({tag:"div",attributes:{class:["ck","ck-widget__type-around__fake-caret"]}});i.appendChild(t.render())}function Cfe(i,t){let e=t;for(const n of t.getAncestors({parentFirst:!0})){if(n.childCount>1||i.isLimit(n))break;e=n}return e}function xfe(i){const t=i.model;return(e,n)=>{const s=n.keyCode==gt.arrowup,r=n.keyCode==gt.arrowdown,o=n.shiftKey,a=t.document.selection;if(!s&&!r)return;const l=r;if(o&&Sfe(a,l))return;const c=Tfe(i,a,l);if(c){if(c.isCollapsed){if(a.isCollapsed)return;if(o)return}(c.isCollapsed||kfe(i,c,l))&&(t.change(h=>{const f=l?c.end:c.start;if(o){const m=t.createSelection(a.anchor);m.setFocus(f),h.setSelection(m)}else h.setSelection(f)}),e.stop(),n.preventDefault(),n.stopPropagation())}}}function Tfe(i,t,e){const n=i.model;if(e){const s=t.isCollapsed?t.focus:t.getLastPosition(),r=II(n,s,"forward");if(!r)return null;const o=n.createRange(s,r),a=RI(n.schema,o,"backward");return a?n.createRange(s,a):null}else{const s=t.isCollapsed?t.focus:t.getFirstPosition(),r=II(n,s,"backward");if(!r)return null;const o=n.createRange(r,s),a=RI(n.schema,o,"forward");return a?n.createRange(a,s):null}}function II(i,t,e){const n=i.schema,s=i.createRangeIn(t.root),r=e=="forward"?"elementStart":"elementEnd";for(const{previousPosition:o,item:a,type:l}of s.getWalker({startPosition:t,direction:e})){if(n.isLimit(a)&&!n.isInline(a))return o;if(l==r&&n.isBlock(a))return null}return null}function RI(i,t,e){const n=e=="backward"?t.end:t.start;if(i.checkChild(n,"$text"))return n;for(const{nextPosition:s}of t.getWalker({direction:e}))if(i.checkChild(s,"$text"))return s;return null}function kfe(i,t,e){const n=i.model,s=i.view.domConverter;if(e){const c=n.createSelection(t.start);n.modifySelection(c),!c.focus.isAtEnd&&!t.start.isEqual(c.focus)&&(t=n.createRange(c.focus,t.end))}const r=i.mapper.toViewRange(t),o=s.viewRangeToDom(r),a=at.getDomRangeRects(o);let l;for(const c of a){if(l===void 0){l=Math.round(c.bottom);continue}if(Math.round(c.top)>=l)return!1;l=Math.max(l,Math.round(c.bottom))}return!0}function Sfe(i,t){return!i.isCollapsed&&i.isBackward==t}class Uf extends ie{constructor(){super(...arguments);b(this,"_previouslySelected",new Set)}static get pluginName(){return"Widget"}static get isOfficialPlugin(){return!0}static get requires(){return[vfe,co]}init(){const e=this.editor,n=e.editing.view,s=n.document,r=e.t;this.editor.editing.downcastDispatcher.on("selection",(o,a,l)=>{const c=l.writer,h=a.selection;if(h.isCollapsed)return;const f=h.getSelectedElement();if(!f)return;const m=e.editing.mapper.toViewElement(f);En(m)&&l.consumable.consume(h,"selection")&&c.setSelection(c.createRangeOn(m),{fake:!0,label:ufe(m)})}),this.editor.editing.downcastDispatcher.on("selection",(o,a,l)=>{this._clearPreviouslySelectedWidgets(l.writer);const c=l.writer,h=c.document.selection;let f=null;for(const m of h.getRanges())for(const p of m){const v=p.item;En(v)&&!Ife(v,f)&&(c.addClass(AI,v),this._previouslySelected.add(v),f=v)}},{priority:"low"}),n.addObserver(ow),this.listenTo(s,"mousedown",(...o)=>this._onMousedown(...o)),this.listenTo(s,"arrowKey",(...o)=>{this._handleSelectionChangeOnArrowKeyPress(...o)},{context:[En,"$text"]}),this.listenTo(s,"arrowKey",(...o)=>{this._preventDefaultOnArrowKeyPress(...o)},{context:"$root"}),this.listenTo(s,"arrowKey",xfe(this.editor.editing),{context:"$text"}),this.listenTo(s,"delete",(o,a)=>{this._handleDelete(a.direction=="forward")&&(a.preventDefault(),o.stop())},{context:"$root"}),this.listenTo(s,"tab",(o,a)=>{o.eventPhase=="atTarget"&&(a.shiftKey||this._selectFirstNestedEditable()&&(a.preventDefault(),o.stop()))},{context:En,priority:"low"}),this.listenTo(s,"tab",(o,a)=>{a.shiftKey&&this._selectAncestorWidget()&&(a.preventDefault(),o.stop())},{priority:"low"}),this.listenTo(s,"keydown",(o,a)=>{a.keystroke==gt.esc&&this._selectAncestorWidget()&&(a.preventDefault(),o.stop())},{priority:"low"}),e.accessibility.addKeystrokeInfoGroup({id:"widget",label:r("Keystrokes that can be used when a widget is selected (for example: image, table, etc.)"),keystrokes:[{label:r("Move focus from an editable area back to the parent widget"),keystroke:"Esc"},{label:r("Insert a new paragraph directly after a widget"),keystroke:"Enter"},{label:r("Insert a new paragraph directly before a widget"),keystroke:"Shift+Enter"},{label:r("Move the caret to allow typing directly before a widget"),keystroke:[["arrowup"],["arrowleft"]]},{label:r("Move the caret to allow typing directly after a widget"),keystroke:[["arrowdown"],["arrowright"]]}]})}_onMousedown(e,n){const s=this.editor,r=s.editing.view,o=r.document;let a=n.target;if(!a)return;if(n.domEvent.detail>=3){this._selectBlockContent(a)&&n.preventDefault();return}if(!En(a)){const c=Afe(a);if(!c)return;if(En(c))a=c;else{const h=Pfe(r,n);if(h&&En(h))a=h;else return}}Xe.isAndroid&&n.preventDefault(),o.isFocused||r.focus();const l=s.editing.mapper.toModelElement(a);this._setSelectionOverElement(l)}_selectBlockContent(e){const n=this.editor,s=n.model,r=n.editing.mapper,o=s.schema,a=r.findMappedViewAncestor(this.editor.editing.view.createPositionAt(e,0)),l=Rfe(r.toModelElement(a),s.schema);return l?(s.change(c=>{const h=o.isLimit(l)?null:Ofe(c.createPositionAfter(l),o),f=c.createPositionAt(l,0),m=h?c.createPositionAt(h,0):c.createPositionAt(l,"end");c.setSelection(c.createRange(f,m))}),!0):!1}_handleSelectionChangeOnArrowKeyPress(e,n){const s=n.keyCode,r=this.editor.model,o=r.schema,a=r.document.selection,l=a.getSelectedElement(),c=tw(s,this.editor.locale.contentLanguageDirection),h=c=="down"||c=="right",f=c=="up"||c=="down";if(l&&o.isObject(l)){const p=h?a.getLastPosition():a.getFirstPosition(),v=o.getNearestSelectionRange(p,h?"forward":"backward");v&&(r.change(_=>{_.setSelection(v)}),n.preventDefault(),e.stop());return}if(!a.isCollapsed&&!n.shiftKey){const p=a.getFirstPosition(),v=a.getLastPosition(),_=p.nodeAfter,E=v.nodeBefore;(_&&o.isObject(_)||E&&o.isObject(E))&&(r.change(x=>{x.setSelection(h?v:p)}),n.preventDefault(),e.stop());return}if(!a.isCollapsed)return;const m=this._getObjectElementNextToSelection(h);if(m&&o.isObject(m)){if(o.isInline(m)&&f)return;this._setSelectionOverElement(m),n.preventDefault(),e.stop()}}_preventDefaultOnArrowKeyPress(e,n){const s=this.editor.model,r=s.schema,o=s.document.selection.getSelectedElement();o&&r.isObject(o)&&(n.preventDefault(),e.stop())}_handleDelete(e){const s=this.editor.model.document.selection;if(!this.editor.model.canEditAt(s)||!s.isCollapsed)return;const r=this._getObjectElementNextToSelection(e);if(r)return this.editor.model.change(o=>{let a=s.anchor.parent;for(;a.isEmpty;){const l=a;a=l.parent,o.remove(l)}this._setSelectionOverElement(r)}),!0}_setSelectionOverElement(e){this.editor.model.change(n=>{n.setSelection(n.createRangeOn(e))})}_getObjectElementNextToSelection(e){const n=this.editor.model,s=n.schema,r=n.document.selection,o=n.createSelection(r);if(n.modifySelection(o,{direction:e?"forward":"backward"}),o.isEqual(r))return null;const a=e?o.focus.nodeBefore:o.focus.nodeAfter;return a&&s.isObject(a)?a:null}_clearPreviouslySelectedWidgets(e){for(const n of this._previouslySelected)e.removeClass(AI,n);this._previouslySelected.clear()}_selectFirstNestedEditable(){const e=this.editor,s=this.editor.editing.view.document;for(const r of s.selection.getFirstRange().getItems())if(r.is("editableElement")){const o=e.editing.mapper.toModelElement(r);/* istanbul ignore next -- @preserve */if(!o)continue;const a=e.model.createPositionAt(o,0),l=e.model.schema.getNearestSelectionRange(a,"forward");return e.model.change(c=>{c.setSelection(l)}),!0}return!1}_selectAncestorWidget(){const e=this.editor,n=e.editing.mapper,r=e.editing.view.document.selection.getFirstPosition().parent,a=(r.is("$text")?r.parent:r).findAncestor(En);if(!a)return!1;const l=n.toModelElement(a);/* istanbul ignore next -- @preserve */return l?(e.model.change(c=>{c.setSelection(l,"on")}),!0):!1}}function Afe(i){let t=i;for(;t;){if(t.is("editableElement")||En(t))return t;t=t.parent}return null}function Pfe(i,t){const e=zM(t.domEvent);let n=null;if(e?n=i.domConverter.domRangeToView(e):n=i.createRange(i.createPositionAt(t.target,0)),!n)return null;const s=n.start;if(!s.parent)return null;let r=s.parent;return s.parent.is("editableElement")&&(s.isAtEnd&&s.nodeBefore?r=s.nodeBefore:s.isAtStart&&s.nodeAfter&&(r=s.nodeAfter)),r.is("$text")?r.parent:r}function Ife(i,t){return t?Array.from(i.getAncestors()).includes(t):!1}function Rfe(i,t){for(const e of i.getAncestors({includeSelf:!0,parentFirst:!0})){if(t.checkChild(e,"$text"))return e;if(t.isLimit(e)&&!t.isObject(e))break}return null}function Ofe(i,t){const e=new Mo({startPosition:i});for(const{item:n}of e){if(t.isLimit(n)||!n.is("element"))return null;if(t.checkChild(n,"$text"))return n}return null}class tb extends ie{constructor(){super(...arguments);b(this,"_toolbarDefinitions",new Map);b(this,"_balloon")}static get requires(){return[kr]}static get pluginName(){return"WidgetToolbarRepository"}static get isOfficialPlugin(){return!0}init(){const e=this.editor;if(e.plugins.has("BalloonToolbar")){const n=e.plugins.get("BalloonToolbar");this.listenTo(n,"show",s=>{Nfe(e.editing.view.document.selection)&&s.stop()},{priority:"high"})}this._balloon=this.editor.plugins.get("ContextualBalloon"),this.on("change:isEnabled",()=>{this._updateToolbarsVisibility()}),this.listenTo(e.ui,"update",()=>{this._updateToolbarsVisibility()}),this.listenTo(e.ui.focusTracker,"change:isFocused",()=>{this._updateToolbarsVisibility()},{priority:"low"})}destroy(){super.destroy();for(const e of this._toolbarDefinitions.values())e.view.destroy()}register(e,{ariaLabel:n,items:s,getRelatedElement:r,balloonClassName:o="ck-toolbar-container"}){if(!s.length){Tt("widget-toolbar-no-items",{toolbarId:e});return}const a=this.editor,l=a.t,c=new Uu(a.locale);if(c.ariaLabel=n||l("Widget toolbar"),this._toolbarDefinitions.has(e))throw new B("widget-toolbar-duplicated",this,{toolbarId:e});const h={view:c,getRelatedElement:r,balloonClassName:o,itemsConfig:s,initialized:!1};a.ui.addToolbar(c,{isContextual:!0,beforeFocus:()=>{const f=r(a.editing.view.document.selection);f&&this._showToolbar(h,f)},afterBlur:()=>{this._hideToolbar(h)}}),this._toolbarDefinitions.set(e,h)}_updateToolbarsVisibility(){let e=0,n=null,s=null;for(const r of this._toolbarDefinitions.values()){const o=r.getRelatedElement(this.editor.editing.view.document.selection);if(!this.isEnabled||!o)this._isToolbarInBalloon(r)&&this._hideToolbar(r);else if(!this.editor.ui.focusTracker.isFocused)this._isToolbarVisible(r)&&this._hideToolbar(r);else{const a=o.getAncestors().length;a>e&&(e=a,n=o,s=r)}}s&&this._showToolbar(s,n)}_hideToolbar(e){this._balloon.remove(e.view),this.stopListening(this._balloon,"change:visibleView")}_showToolbar(e,n){this._isToolbarVisible(e)?OI(this.editor,n):this._isToolbarInBalloon(e)||(e.initialized||(e.initialized=!0,e.view.fillFromConfig(e.itemsConfig,this.editor.ui.componentFactory)),this._balloon.add({view:e.view,position:$L(this.editor,n),balloonClassName:e.balloonClassName}),this.listenTo(this._balloon,"change:visibleView",()=>{for(const s of this._toolbarDefinitions.values())if(this._isToolbarVisible(s)){const r=s.getRelatedElement(this.editor.editing.view.document.selection);OI(this.editor,r)}}))}_isToolbarVisible(e){return this._balloon.visibleView===e.view}_isToolbarInBalloon(e){return this._balloon.hasView(e.view)}}function OI(i,t){const e=i.plugins.get("ContextualBalloon"),n=$L(i,t);e.updatePosition(n)}function $L(i,t){const e=i.editing.view,n=Ti.defaultPositions;return{target:e.domConverter.mapViewToDom(t),positions:[n.northArrowSouth,n.northArrowSouthWest,n.northArrowSouthEast,n.southArrowNorth,n.southArrowNorthWest,n.southArrowNorthEast,n.viewportStickyNorth]}}function Nfe(i){const t=i.getSelectedElement();return!!(t&&En(t))}class Mfe extends Vt(){constructor(e){super();b(this,"_referenceCoordinates");b(this,"_options");b(this,"_originalWidth");b(this,"_originalHeight");b(this,"_originalWidthPercents");b(this,"_aspectRatio");this.set("activeHandlePosition",null),this.set("proposedWidthPercents",null),this.set("proposedWidth",null),this.set("proposedHeight",null),this.set("proposedHandleHostWidth",null),this.set("proposedHandleHostHeight",null),this._options=e,this._referenceCoordinates=null}get originalWidth(){return this._originalWidth}get originalHeight(){return this._originalHeight}get originalWidthPercents(){return this._originalWidthPercents}get aspectRatio(){return this._aspectRatio}begin(e,n,s){const r=new at(n);this.activeHandlePosition=Dfe(e),this._referenceCoordinates=Lfe(n,Bfe(this.activeHandlePosition)),this._originalWidth=r.width,this._originalHeight=r.height,this._aspectRatio=r.width/r.height;const o=s.style.width;o&&o.match(/^\d+(\.\d*)?%$/)?this._originalWidthPercents=parseFloat(o):this._originalWidthPercents=ffe(s,r)}update(e){this.proposedWidth=e.width,this.proposedHeight=e.height,this.proposedWidthPercents=e.widthPercents,this.proposedHandleHostWidth=e.handleHostWidth,this.proposedHandleHostHeight=e.handleHostHeight}}function Lfe(i,t){const e=new at(i),n=t.split("-"),s={x:n[1]=="right"?e.right:e.left,y:n[0]=="bottom"?e.bottom:e.top};return s.x+=i.ownerDocument.defaultView.scrollX,s.y+=i.ownerDocument.defaultView.scrollY,s}function Vfe(i){return`ck-widget__resizer__handle-${i}`}function Dfe(i){const t=["top-left","top-right","bottom-right","bottom-left"];for(const e of t)if(i.classList.contains(Vfe(e)))return e}function Bfe(i){const t=i.split("-"),e={top:"bottom",bottom:"top",left:"right",right:"left"};return`${e[t[0]]}-${e[t[1]]}`}class Ffe extends Oe{constructor(){super();const t=this.bindTemplate;this.setTemplate({tag:"div",attributes:{class:["ck","ck-size-view",t.to("_viewPosition",e=>e?`ck-orientation-${e}`:"")],style:{display:t.if("_isVisible","none",e=>!e)}},children:[{text:t.to("_label")}]})}_bindToState(t,e){this.bind("_isVisible").to(e,"proposedWidth",e,"proposedHeight",(n,s)=>n!==null&&s!==null),this.bind("_label").to(e,"proposedHandleHostWidth",e,"proposedHandleHostHeight",e,"proposedWidthPercents",(n,s,r)=>t.unit==="px"?`${n}×${s}`:`${r}%`),this.bind("_viewPosition").to(e,"activeHandlePosition",e,"proposedHandleHostWidth",e,"proposedHandleHostHeight",(n,s,r)=>s<50||r<50?"above-center":n)}_dismiss(){this.unbind(),this._isVisible=!1}}class NI extends Vt(){constructor(e){super();b(this,"_state");b(this,"_sizeView");b(this,"_options");b(this,"_viewResizerWrapper",null);b(this,"_initialViewWidth");this._options=e,this.set("isEnabled",!0),this.set("isSelected",!1),this.bind("isVisible").to(this,"isEnabled",this,"isSelected",(n,s)=>n&&s),this.decorate("begin"),this.decorate("cancel"),this.decorate("commit"),this.decorate("updateSize"),this.on("commit",n=>{!this.state.proposedWidth&&!this.state.proposedWidthPercents&&(this._cleanup(),n.stop())},{priority:"high"})}get state(){return this._state}show(){this._options.editor.editing.view.change(n=>{n.removeClass("ck-hidden",this._viewResizerWrapper)})}hide(){this._options.editor.editing.view.change(n=>{n.addClass("ck-hidden",this._viewResizerWrapper)})}attach(){const e=this,n=this._options.viewElement;this._options.editor.editing.view.change(r=>{const o=r.createUIElement("div",{class:"ck ck-reset_all ck-widget__resizer"},function(a){const l=this.toDomElement(a);return e._appendHandles(l),e._appendSizeUI(l),l});r.insert(r.createPositionAt(n,"end"),o),r.addClass("ck-widget_with-resizer",n),this._viewResizerWrapper=o,this.isVisible||this.hide()}),this.on("change:isVisible",()=>{this.isVisible?(this.show(),this.redraw()):this.hide()})}begin(e){this._state=new Mfe(this._options),this._sizeView._bindToState(this._options,this.state),this._initialViewWidth=this._options.viewElement.getStyle("width"),this.state.begin(e,this._getHandleHost(),this._getResizeHost())}updateSize(e){const n=this._proposeNewSize(e);this._options.editor.editing.view.change(h=>{const f=this._options.unit||"%",m=(f==="%"?n.widthPercents:n.width)+f;h.setStyle("width",m,this._options.viewElement)});const r=this._getHandleHost(),o=new at(r),a=Math.round(o.width),l=Math.round(o.height),c=new at(r);n.width=Math.round(c.width),n.height=Math.round(c.height),this.redraw(o),this.state.update({...n,handleHostWidth:a,handleHostHeight:l})}commit(){const e=this._options.unit||"%",n=(e==="%"?this.state.proposedWidthPercents:this.state.proposedWidth)+e;this._options.editor.editing.view.change(()=>{this._cleanup(),this._options.onCommit(n)})}cancel(){this._cleanup()}destroy(){this.cancel()}redraw(e){const n=this._domResizerWrapper;if(!jfe(n))return;const s=n.parentElement,r=this._getHandleHost(),o=this._viewResizerWrapper,a=[o.getStyle("width"),o.getStyle("height"),o.getStyle("left"),o.getStyle("top")];let l;if(s.isSameNode(r)){const c=e||new at(r);l=[c.width+"px",c.height+"px",void 0,void 0]}else l=[r.offsetWidth+"px",r.offsetHeight+"px",r.offsetLeft+"px",r.offsetTop+"px"];pi(a,l)!=="same"&&this._options.editor.editing.view.change(c=>{c.setStyle({width:l[0],height:l[1],left:l[2],top:l[3]},o)})}containsHandle(e){return this._domResizerWrapper.contains(e)}static isResizeHandle(e){return e.classList.contains("ck-widget__resizer__handle")}_cleanup(){this._sizeView._dismiss(),this._options.editor.editing.view.change(n=>{n.setStyle("width",this._initialViewWidth,this._options.viewElement)})}_proposeNewSize(e){const n=this.state,s=zfe(e),r=this._options.isCentered?this._options.isCentered(this):!0,o={x:n._referenceCoordinates.x-(s.x+n.originalWidth),y:s.y-n.originalHeight-n._referenceCoordinates.y};r&&n.activeHandlePosition.endsWith("-right")&&(o.x=s.x-(n._referenceCoordinates.x+n.originalWidth)),r&&(o.x*=2);let a=Math.abs(n.originalWidth+o.x),l=Math.abs(n.originalHeight+o.y);return(a/n.aspectRatio>l?"width":"height")=="width"?l=a/n.aspectRatio:a=l*n.aspectRatio,{width:Math.round(a),height:Math.round(l),widthPercents:Math.min(Math.round(n.originalWidthPercents/n.originalWidth*a*100)/100,100)}}_getResizeHost(){const e=this._domResizerWrapper.parentElement;return this._options.getResizeHost(e)}_getHandleHost(){const e=this._domResizerWrapper.parentElement;return this._options.getHandleHost(e)}get _domResizerWrapper(){return this._options.editor.editing.view.domConverter.mapViewToDom(this._viewResizerWrapper)}_appendHandles(e){const n=["top-left","top-right","bottom-right","bottom-left"];for(const s of n)e.appendChild(new Zi({tag:"div",attributes:{class:`ck-widget__resizer__handle ${$fe(s)}`}}).render())}_appendSizeUI(e){this._sizeView=new Ffe,this._sizeView.render(),e.appendChild(this._sizeView.element)}}function $fe(i){return`ck-widget__resizer__handle-${i}`}function zfe(i){return{x:i.pageX,y:i.pageY}}function jfe(i){return i&&i.ownerDocument&&i.ownerDocument.contains(i)}class z1 extends ie{constructor(){super(...arguments);b(this,"_resizers",new Map);b(this,"_observer");b(this,"_redrawSelectedResizerThrottled")}static get pluginName(){return"WidgetResize"}static get isOfficialPlugin(){return!0}init(){const e=this.editor.editing,n=Re.window.document;this.set("selectedResizer",null),this.set("_activeResizer",null),e.view.addObserver(ow),this._observer=new(Ri()),this.listenTo(e.view.document,"mousedown",this._mouseDownListener.bind(this),{priority:"high"}),this._observer.listenTo(n,"mousemove",this._mouseMoveListener.bind(this)),this._observer.listenTo(n,"mouseup",this._mouseUpListener.bind(this)),this._redrawSelectedResizerThrottled=$u(()=>this.redrawSelectedResizer(),200),this.editor.ui.on("update",this._redrawSelectedResizerThrottled),this.editor.model.document.on("change",()=>{for(const[r,o]of this._resizers)r.isAttached()||(this._resizers.delete(r),o.destroy())},{priority:"lowest"}),this._observer.listenTo(Re.window,"resize",this._redrawSelectedResizerThrottled);const s=this.editor.editing.view.document.selection;s.on("change",()=>{const r=s.getSelectedElement(),o=this.getResizerByViewElement(r)||null;o?this.select(o):this.deselect()})}redrawSelectedResizer(){this.selectedResizer&&this.selectedResizer.isVisible&&this.selectedResizer.redraw()}destroy(){super.destroy(),this._observer.stopListening();for(const e of this._resizers.values())e.destroy();this._redrawSelectedResizerThrottled.cancel()}select(e){this.deselect(),this.selectedResizer=e,this.selectedResizer.isSelected=!0}deselect(){this.selectedResizer&&(this.selectedResizer.isSelected=!1),this.selectedResizer=null}attachTo(e){const n=new NI(e),s=this.editor.plugins;if(n.attach(),s.has("WidgetToolbarRepository")){const a=s.get("WidgetToolbarRepository");n.on("begin",()=>{a.forceDisabled("resize")},{priority:"lowest"}),n.on("cancel",()=>{a.clearForceDisabled("resize")},{priority:"highest"}),n.on("commit",()=>{a.clearForceDisabled("resize")},{priority:"highest"})}this._resizers.set(e.viewElement,n);const o=this.editor.editing.view.document.selection.getSelectedElement();return this.getResizerByViewElement(o)==n&&this.select(n),n}getResizerByViewElement(e){return this._resizers.get(e)}_getResizerByHandle(e){for(const n of this._resizers.values())if(n.containsHandle(e))return n}_mouseDownListener(e,n){const s=n.domTarget;NI.isResizeHandle(s)&&(this._activeResizer=this._getResizerByHandle(s)||null,this._activeResizer&&(this._activeResizer.begin(s),e.stop(),n.preventDefault()))}_mouseMoveListener(e,n){this._activeResizer&&this._activeResizer.updateSize(n)}_mouseUpListener(){this._activeResizer&&(this._activeResizer.commit(),this._activeResizer=null)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class gf extends fo{constructor(e){super(e);b(this,"domEventType",["paste","copy","cut","drop","dragover","dragstart","dragend","dragenter","dragleave"]);const n=this.document;this.listenTo(n,"paste",s("clipboardInput"),{priority:"low"}),this.listenTo(n,"drop",s("clipboardInput"),{priority:"low"}),this.listenTo(n,"dragover",s("dragging"),{priority:"low"});function s(r){return(o,a)=>{a.preventDefault();const l=a.dropRange?[a.dropRange]:null,c=new Uo(n,r);n.fire(c,{dataTransfer:a.dataTransfer,method:o.name,targetRanges:l,target:a.target,domEvent:a.domEvent}),c.stop.called&&a.stopPropagation()}}}onDomEvent(e){const n="clipboardData"in e?e.clipboardData:e.dataTransfer,s=e.type=="drop"||e.type=="paste",r={dataTransfer:new l4(n,{cacheFiles:s})};if(e.type=="drop"||e.type=="dragover"){const o=zM(e);r.dropRange=o&&this.view.domConverter.domRangeToView(o)}this.fire(e.type,e,r)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Hfe(i){return i=i.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r?\n\r?\n/g,"</p><p>").replace(/\r?\n/g,"<br>").replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;").replace(/^\s/,"&nbsp;").replace(/\s$/,"&nbsp;").replace(/\s\s/g," &nbsp;"),(i.includes("</p><p>")||i.includes("<br>"))&&(i=`<p>${i}</p>`),i}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Ufe(i){return i.replace(/<span(?: class="Apple-converted-space"|)>(\s+)<\/span>/g,(t,e)=>e.length==1?" ":e).replace(/<!--[\s\S]*?-->/g,"")}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const MI=["figcaption","li"],LI=["ol","ul"];function zL(i,t){if(t.is("$text")||t.is("$textProxy"))return t.data;if(t.is("element","img")&&t.hasAttribute("alt"))return t.getAttribute("alt");if(t.is("element","br"))return`
`;let e="",n=null;for(const s of t.getChildren())e+=Wfe(s,n)+zL(i,s),n=s;if(t.is("rawElement")){const s=document.createElement("div");t.render(s,i),e+=jL(s)}return e}function jL(i){let t="";if(i.nodeType===Node.TEXT_NODE)return i.textContent;if(i.tagName==="BR")return`
`;for(const e of i.childNodes)t+=jL(e);return t}function Wfe(i,t){return t?i.is("element","li")&&!i.isEmpty&&i.getChild(0).is("containerElement")||LI.includes(i.name)&&LI.includes(t.name)?`

`:!i.is("containerElement")&&!t.is("containerElement")?"":MI.includes(i.name)||MI.includes(t.name)?`
`:i.is("element")&&i.getCustomProperty("dataPipeline:transparentRendering")||t.is("element")&&t.getCustomProperty("dataPipeline:transparentRendering")?"":`

`:""}class $h extends ie{constructor(){super(...arguments);b(this,"_markersToCopy",new Map)}static get pluginName(){return"ClipboardMarkersUtils"}static get isOfficialPlugin(){return!0}_registerMarkerToCopy(e,n){this._markersToCopy.set(e,n)}_copySelectedFragmentWithMarkers(e,n,s=r=>r.model.getSelectedContent(r.model.document.selection)){return this.editor.model.change(r=>{const o=r.model.document.selection;r.setSelection(n);const a=this._insertFakeMarkersIntoSelection(r,r.model.document.selection,e),l=s(r),c=this._removeFakeMarkersInsideElement(r,l);for(const[h,f]of Object.entries(a)){c[h]||(c[h]=r.createRangeIn(l));for(const m of f)r.remove(m)}l.markers.clear();for(const[h,f]of Object.entries(c))l.markers.set(h,f);return r.setSelection(o),l})}_pasteMarkersIntoTransformedElement(e,n){const s=this._getPasteMarkersFromRangeMap(e);return this.editor.model.change(r=>{const o=this._insertFakeMarkersElements(r,s),a=n(r),l=this._removeFakeMarkersInsideElement(r,a);for(const c of Object.values(o).flat())r.remove(c);for(const[c,h]of Object.entries(l))r.model.markers.has(c)||r.addMarker(c,{usingOperation:!0,affectsData:!0,range:h});return a})}_pasteFragmentWithMarkers(e){const n=this._getPasteMarkersFromRangeMap(e.markers);e.markers.clear();for(const s of n)e.markers.set(s.name,s.range);return this.editor.model.insertContent(e)}_forceMarkersCopy(e,n,s={allowedActions:"all",copyPartiallySelected:!0,duplicateOnPaste:!0}){const r=this._markersToCopy.get(e);this._markersToCopy.set(e,s),n(),r?this._markersToCopy.set(e,r):this._markersToCopy.delete(e)}_isMarkerCopyable(e,n){const s=this._getMarkerClipboardConfig(e);if(!s)return!1;if(!n)return!0;const{allowedActions:r}=s;return r==="all"||r.includes(n)}_hasMarkerConfiguration(e){return!!this._getMarkerClipboardConfig(e)}_getMarkerClipboardConfig(e){const[n]=e.split(":");return this._markersToCopy.get(n)||null}_insertFakeMarkersIntoSelection(e,n,s){const r=this._getCopyableMarkersFromSelection(e,n,s);return this._insertFakeMarkersElements(e,r)}_getCopyableMarkersFromSelection(e,n,s){const r=Array.from(n.getRanges()),o=new Set(r.flatMap(l=>Array.from(e.model.markers.getMarkersIntersectingRange(l)))),a=l=>{if(!this._isMarkerCopyable(l.name,s))return!1;const{copyPartiallySelected:h}=this._getMarkerClipboardConfig(l.name);if(!h){const f=l.getRange();return r.some(m=>m.containsRange(f,!0))}return!0};return Array.from(o).filter(a).map(l=>({name:s==="dragstart"?this._getUniqueMarkerName(l.name):l.name,range:l.getRange()}))}_getPasteMarkersFromRangeMap(e,n=null){const{model:s}=this.editor;return(e instanceof Map?Array.from(e.entries()):Object.entries(e)).flatMap(([o,a])=>{if(!this._hasMarkerConfiguration(o))return[{name:o,range:a}];if(this._isMarkerCopyable(o,n)){const l=this._getMarkerClipboardConfig(o),c=s.markers.has(o)&&s.markers.get(o).getRange().root.rootName==="$graveyard";return(l.duplicateOnPaste||c)&&(o=this._getUniqueMarkerName(o)),[{name:o,range:a}]}return[]})}_insertFakeMarkersElements(e,n){const s={},r=n.flatMap(o=>{const{start:a,end:l}=o.range;return[{position:a,marker:o,type:"start"},{position:l,marker:o,type:"end"}]}).sort(({position:o},{position:a})=>o.isBefore(a)?1:-1);for(const{position:o,marker:a,type:l}of r){const c=e.createElement("$marker",{"data-name":a.name,"data-type":l});s[a.name]||(s[a.name]=[]),s[a.name].push(c),e.insert(c,o)}return s}_removeFakeMarkersInsideElement(e,n){const r=this._getAllFakeMarkersFromElement(e,n).reduce((o,a)=>{const l=a.markerElement&&e.createPositionBefore(a.markerElement);let c=o[a.name],h=!1;return c&&c.start&&c.end&&(this._getMarkerClipboardConfig(a.name).duplicateOnPaste?o[this._getUniqueMarkerName(a.name)]=o[a.name]:h=!0,c=null),h||(o[a.name]={...c,[a.type]:l}),a.markerElement&&e.remove(a.markerElement),o},{});return Yne(r,o=>new ee(o.start||e.createPositionFromPath(n,[0]),o.end||e.createPositionAt(n,"end")))}_getAllFakeMarkersFromElement(e,n){const s=Array.from(e.createRangeIn(n)).flatMap(({item:a})=>{if(!a.is("element","$marker"))return[];const l=a.getAttribute("data-name"),c=a.getAttribute("data-type");return[{markerElement:a,name:l,type:c}]}),r=[],o=[];for(const a of s)a.type==="end"&&(s.some(c=>c.name===a.name&&c.type==="start")||r.push({markerElement:null,name:a.name,type:"start"})),a.type==="start"&&(s.some(c=>c.name===a.name&&c.type==="end")||o.unshift({markerElement:null,name:a.name,type:"end"}));return[...r,...s,...o]}_getUniqueMarkerName(e){const n=e.split(":"),s=yi().substring(1,6);return n.length===3?`${n.slice(0,2).join(":")}:${s}`:`${n.join(":")}:${s}`}}class Gs extends ie{static get pluginName(){return"ClipboardPipeline"}static get isOfficialPlugin(){return!0}static get requires(){return[$h]}init(){this.editor.editing.view.addObserver(gf),this._setupPasteDrop(),this._setupCopyCut()}_fireOutputTransformationEvent(t,e,n){const s=this.editor.plugins.get("ClipboardMarkersUtils");this.editor.model.enqueueChange({isUndoable:n==="cut"},()=>{const r=s._copySelectedFragmentWithMarkers(n,e);this.fire("outputTransformation",{dataTransfer:t,content:r,method:n})})}_setupPasteDrop(){const t=this.editor,e=t.model,n=t.editing.view,s=n.document,r=this.editor.plugins.get("ClipboardMarkersUtils");this.listenTo(s,"clipboardInput",(o,a)=>{a.method=="paste"&&!t.model.canEditAt(t.model.document.selection)&&o.stop()},{priority:"highest"}),this.listenTo(s,"clipboardInput",(o,a)=>{const l=a.dataTransfer;let c;if(a.content)c=a.content;else{let m="";l.getData("text/html")?m=Ufe(l.getData("text/html")):l.getData("text/plain")&&(m=Hfe(l.getData("text/plain"))),c=this.editor.data.htmlProcessor.toView(m)}const h=new Uo(this,"inputTransformation"),f=l.getData("application/ckeditor5-editor-id")||null;this.fire(h,{content:c,dataTransfer:l,sourceEditorId:f,targetRanges:a.targetRanges,method:a.method}),h.stop.called&&o.stop(),n.scrollToTheSelection()},{priority:"low"}),this.listenTo(this,"inputTransformation",(o,a)=>{if(a.content.isEmpty)return;const c=this.editor.data.toModel(a.content,"$clipboardHolder");c.childCount!=0&&(o.stop(),e.change(()=>{this.fire("contentInsertion",{content:c,method:a.method,sourceEditorId:a.sourceEditorId,dataTransfer:a.dataTransfer,targetRanges:a.targetRanges})}))},{priority:"low"}),this.listenTo(this,"contentInsertion",(o,a)=>{a.resultRange=r._pasteFragmentWithMarkers(a.content)},{priority:"low"})}_setupCopyCut(){const t=this.editor,e=t.model.document,s=t.editing.view.document,r=(o,a)=>{const l=a.dataTransfer;a.preventDefault(),this._fireOutputTransformationEvent(l,e.selection,o.name)};this.listenTo(s,"copy",r,{priority:"low"}),this.listenTo(s,"cut",(o,a)=>{t.model.canEditAt(t.model.document.selection)?r(o,a):a.preventDefault()},{priority:"low"}),this.listenTo(this,"outputTransformation",(o,a)=>{const l=t.data.toView(a.content,{isClipboardPipeline:!0});s.fire("clipboardOutput",{dataTransfer:a.dataTransfer,content:l,method:a.method})},{priority:"low"}),this.listenTo(s,"clipboardOutput",(o,a)=>{a.content.isEmpty||(a.dataTransfer.setData("text/html",this.editor.data.htmlProcessor.toData(a.content)),a.dataTransfer.setData("text/plain",zL(t.data.htmlProcessor.domConverter,a.content)),a.dataTransfer.setData("application/ckeditor5-editor-id",this.editor.id)),a.method=="cut"&&t.model.deleteContent(e.selection)},{priority:"low"})}}const j1=Ff("px");class qfe extends Oe{constructor(){super();const t=this.bindTemplate;this.set({isVisible:!1,left:null,top:null,width:null}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-clipboard-drop-target-line",t.if("isVisible","ck-hidden",e=>!e)],style:{left:t.to("left",e=>j1(e)),top:t.to("top",e=>j1(e)),width:t.to("width",e=>j1(e))}}})}}class Ng extends ie{constructor(){super(...arguments);b(this,"removeDropMarkerDelayed",JE(()=>this.removeDropMarker(),40));b(this,"_updateDropMarkerThrottled",$u(e=>this._updateDropMarker(e),40));b(this,"_reconvertMarkerThrottled",$u(()=>{this.editor.model.markers.has("drop-target")&&this.editor.editing.reconvertMarker("drop-target")},0));b(this,"_dropTargetLineView",new qfe);b(this,"_domEmitter",new(Ri()));b(this,"_scrollables",new Map)}static get pluginName(){return"DragDropTarget"}static get isOfficialPlugin(){return!0}init(){this._setupDropMarker()}destroy(){this._domEmitter.stopListening();for(const{resizeObserver:e}of this._scrollables.values())e.destroy();return this._updateDropMarkerThrottled.cancel(),this.removeDropMarkerDelayed.cancel(),this._reconvertMarkerThrottled.cancel(),super.destroy()}updateDropMarker(e,n,s,r,o,a){this.removeDropMarkerDelayed.cancel();const l=VI(this.editor,e,n,s,r,o,a);/* istanbul ignore next -- @preserve */if(l){if(a&&a.containsRange(l))return this.removeDropMarker();this._updateDropMarkerThrottled(l)}}getFinalDropRange(e,n,s,r,o,a){const l=VI(this.editor,e,n,s,r,o,a);return this.removeDropMarker(),l}removeDropMarker(){const e=this.editor.model;this.removeDropMarkerDelayed.cancel(),this._updateDropMarkerThrottled.cancel(),this._dropTargetLineView.isVisible=!1,e.markers.has("drop-target")&&e.change(n=>{n.removeMarker("drop-target")})}_setupDropMarker(){const e=this.editor;e.ui.view.body.add(this._dropTargetLineView),e.conversion.for("editingDowncast").markerToHighlight({model:"drop-target",view:{classes:["ck-clipboard-drop-target-range"]}}),e.conversion.for("editingDowncast").markerToElement({model:"drop-target",view:(n,{writer:s})=>{if(e.model.schema.checkChild(n.markerRange.start,"$text"))return this._dropTargetLineView.isVisible=!1,this._createDropTargetPosition(s);n.markerRange.isCollapsed?this._updateDropTargetLine(n.markerRange):this._dropTargetLineView.isVisible=!1}})}_updateDropMarker(e){const n=this.editor,s=n.model.markers;n.model.change(r=>{s.has("drop-target")?s.get("drop-target").getRange().isEqual(e)||r.updateMarker("drop-target",{range:e}):r.addMarker("drop-target",{range:e,usingOperation:!1,affectsData:!1})})}_createDropTargetPosition(e){return e.createUIElement("span",{class:"ck ck-clipboard-drop-target-position"},function(n){const s=this.toDomElement(n);return s.append("⁠",n.createElement("span"),"⁠"),s})}_updateDropTargetLine(e){const n=this.editor.editing,s=e.start.nodeBefore,r=e.start.nodeAfter,o=e.start.parent,a=s?n.mapper.toViewElement(s):null,l=a?n.view.domConverter.mapViewToDom(a):null,c=r?n.mapper.toViewElement(r):null,h=c?n.view.domConverter.mapViewToDom(c):null,f=n.mapper.toViewElement(o);if(!f)return;const m=n.view.domConverter.mapViewToDom(f),p=this._getScrollableRect(f),{scrollX:v,scrollY:_}=Re.window,E=l?new at(l):null,x=h?new at(h):null,k=new at(m).excludeScrollbarsAndBorders(),A=E?E.bottom:k.top,S=x?x.top:k.bottom,O=Re.window.getComputedStyle(m),P=A<=S?(A+S)/2:S;if(p.top<P&&P<p.bottom){const N=k.left+parseFloat(O.paddingLeft),L=k.right-parseFloat(O.paddingRight),M=Math.max(N+v,p.left),F=Math.min(L+v,p.right);this._dropTargetLineView.set({isVisible:!0,left:M,top:P+_,width:F-M})}else this._dropTargetLineView.isVisible=!1}_getScrollableRect(e){const n=e.root.rootName;let s;if(this._scrollables.has(n))s=this._scrollables.get(n).domElement;else{const r=this.editor.editing.view.domConverter.mapViewToDom(e);s=Kfe(r),this._domEmitter.listenTo(s,"scroll",this._reconvertMarkerThrottled,{usePassive:!0});const o=new YE(s,this._reconvertMarkerThrottled);this._scrollables.set(n,{domElement:s,resizeObserver:o})}return new at(s).excludeScrollbarsAndBorders()}}function VI(i,t,e,n,s,r,o){const a=i.model,l=i.editing.mapper;let h=DI(i,t);for(;h;){if(!r){if(a.schema.checkChild(h,"$text")){if(e){const f=e[0].start,m=l.toModelPosition(f);if(!o||Array.from(o.getItems({shallow:!0})).every(v=>a.schema.checkChild(m,v))){if(a.schema.checkChild(m,"$text"))return a.createRange(m);if(f)return Mg(i,DI(i,f.parent),n,s)}}}else if(a.schema.isInline(h))return Mg(i,h,n,s)}if(a.schema.isBlock(h))return Mg(i,h,n,s);if(a.schema.checkChild(h,"$block")){const f=Array.from(h.getChildren()).filter(v=>v.is("element")&&!Gfe(i,v));let m=0,p=f.length;if(p==0)return a.createRange(a.createPositionAt(h,"end"));for(;m<p-1;){const v=Math.floor((m+p)/2);HL(i,f[v],n,s)=="before"?p=v:m=v}return Mg(i,f[m],n,s)}h=h.parent}return null}function Gfe(i,t){const e=i.editing.mapper,n=i.editing.view.domConverter,s=e.toViewElement(t);if(!s)return!0;const r=n.mapViewToDom(s);return Re.window.getComputedStyle(r).float!="none"}function Mg(i,t,e,n){const s=i.model;return s.createRange(s.createPositionAt(t,HL(i,t,e,n)))}function HL(i,t,e,n){const s=i.editing.mapper,r=i.editing.view.domConverter,o=s.toViewElement(t),a=r.mapViewToDom(o),l=new at(a);return i.model.schema.isInline(t)?e<(l.left+l.right)/2?"before":"after":n<(l.top+l.bottom)/2?"before":"after"}function DI(i,t){const e=i.editing.mapper,n=i.editing.view,s=e.toModelElement(t);if(s)return s;const r=n.createPositionBefore(t),o=e.findMappedViewAncestor(r);return e.toModelElement(o)}function Kfe(i){let t=i;do{t=t.parentElement;const e=Re.window.getComputedStyle(t).overflowY;if(e=="auto"||e=="scroll")break}while(t.tagName!="BODY");return t}class Yfe extends ie{constructor(){super(...arguments);b(this,"_isBlockDragging",!1);b(this,"_domEmitter",new(Ri()))}static get pluginName(){return"DragDropBlockToolbar"}static get isOfficialPlugin(){return!0}init(){const e=this.editor;if(this.listenTo(e,"change:isReadOnly",(n,s,r)=>{r?(this.forceDisabled("readOnlyMode"),this._isBlockDragging=!1):this.clearForceDisabled("readOnlyMode")}),Xe.isAndroid&&this.forceDisabled("noAndroidSupport"),e.plugins.has("BlockToolbar")){const s=e.plugins.get("BlockToolbar").buttonView.element;this._domEmitter.listenTo(s,"dragstart",(r,o)=>this._handleBlockDragStart(o)),this._domEmitter.listenTo(Re.document,"dragover",(r,o)=>this._handleBlockDragging(o)),this._domEmitter.listenTo(Re.document,"drop",(r,o)=>this._handleBlockDragging(o)),this._domEmitter.listenTo(Re.document,"dragend",()=>this._handleBlockDragEnd(),{useCapture:!0}),this.isEnabled&&s.setAttribute("draggable","true"),this.on("change:isEnabled",(r,o,a)=>{s.setAttribute("draggable",a?"true":"false")})}}destroy(){return this._domEmitter.stopListening(),super.destroy()}_handleBlockDragStart(e){if(!this.isEnabled)return;const n=this.editor.model,s=n.document.selection,r=this.editor.editing.view,o=Array.from(s.getSelectedBlocks()),a=n.createRange(n.createPositionBefore(o[0]),n.createPositionAfter(o[o.length-1]));n.change(l=>l.setSelection(a)),this._isBlockDragging=!0,r.focus(),r.getObserver(gf).onDomEvent(e)}_handleBlockDragging(e){if(!this.isEnabled||!this._isBlockDragging)return;const n=e.clientX+(this.editor.locale.contentLanguageDirection=="ltr"?100:-100),s=e.clientY,r=document.elementFromPoint(n,s),o=this.editor.editing.view;!r||!r.closest(".ck-editor__editable")||o.getObserver(gf).onDomEvent({...e,type:e.type,dataTransfer:e.dataTransfer,target:r,clientX:n,clientY:s,preventDefault:()=>e.preventDefault(),stopPropagation:()=>e.stopPropagation()})}_handleBlockDragEnd(){this._isBlockDragging=!1}}class Zfe extends ie{constructor(){super(...arguments);b(this,"_draggedRange");b(this,"_draggingUid");b(this,"_draggableElement");b(this,"_clearDraggableAttributesDelayed",JE(()=>this._clearDraggableAttributes(),40));b(this,"_blockMode",!1);b(this,"_domEmitter",new(Ri()));b(this,"_previewContainer")}static get pluginName(){return"DragDrop"}static get isOfficialPlugin(){return!0}static get requires(){return[Gs,Uf,Ng,Yfe]}init(){const e=this.editor,n=e.editing.view;this._draggedRange=null,this._draggingUid="",this._draggableElement=null,n.addObserver(gf),n.addObserver(ow),this._setupDragging(),this._setupContentInsertionIntegration(),this._setupClipboardInputIntegration(),this._setupDraggableAttributeHandling(),this.listenTo(e,"change:isReadOnly",(s,r,o)=>{o?this.forceDisabled("readOnlyMode"):this.clearForceDisabled("readOnlyMode")}),this.on("change:isEnabled",(s,r,o)=>{o||this._finalizeDragging(!1)}),Xe.isAndroid&&this.forceDisabled("noAndroidSupport")}destroy(){return this._draggedRange&&(this._draggedRange.detach(),this._draggedRange=null),this._previewContainer&&this._previewContainer.remove(),this._domEmitter.stopListening(),this._clearDraggableAttributesDelayed.cancel(),super.destroy()}_setupDragging(){const e=this.editor,n=e.model,s=e.editing.view,r=s.document,o=e.plugins.get(Ng);this.listenTo(r,"dragstart",(a,l)=>{if(l.target&&l.target.is("editableElement")){l.preventDefault();return}if(this._prepareDraggedRange(l.target),!this._draggedRange){l.preventDefault();return}this._draggingUid=yi(),l.dataTransfer.effectAllowed=this.isEnabled?"copyMove":"copy",l.dataTransfer.setData("application/ckeditor5-dragging-uid",this._draggingUid);const c=n.createSelection(this._draggedRange.toRange());this.editor.plugins.get("ClipboardPipeline")._fireOutputTransformationEvent(l.dataTransfer,c,"dragstart");const{dataTransfer:f,domTarget:m,domEvent:p}=l,{clientX:v}=p;this._updatePreview({dataTransfer:f,domTarget:m,clientX:v}),l.stopPropagation(),this.isEnabled||(this._draggedRange.detach(),this._draggedRange=null,this._draggingUid="")},{priority:"low"}),this.listenTo(r,"dragend",(a,l)=>{this._finalizeDragging(!l.dataTransfer.isCanceled&&l.dataTransfer.dropEffect=="move")},{priority:"low"}),this._domEmitter.listenTo(Re.document,"dragend",()=>{this._blockMode=!1},{useCapture:!0}),this.listenTo(r,"dragenter",()=>{this.isEnabled&&s.focus()}),this.listenTo(r,"dragleave",()=>{o.removeDropMarkerDelayed()}),this.listenTo(r,"dragging",(a,l)=>{if(!this.isEnabled){l.dataTransfer.dropEffect="none";return}const{clientX:c,clientY:h}=l.domEvent;o.updateDropMarker(l.target,l.targetRanges,c,h,this._blockMode,this._draggedRange),this._draggedRange||(l.dataTransfer.dropEffect="copy"),Xe.isGecko||(l.dataTransfer.effectAllowed=="copy"?l.dataTransfer.dropEffect="copy":["all","copyMove"].includes(l.dataTransfer.effectAllowed)&&(l.dataTransfer.dropEffect="move")),a.stop()},{priority:"low"})}_setupClipboardInputIntegration(){const e=this.editor,s=e.editing.view.document,r=e.plugins.get(Ng);this.listenTo(s,"clipboardInput",(o,a)=>{if(a.method!="drop")return;const{clientX:l,clientY:c}=a.domEvent,h=r.getFinalDropRange(a.target,a.targetRanges,l,c,this._blockMode,this._draggedRange);if(!h){this._finalizeDragging(!1),o.stop();return}if(this._draggedRange&&this._draggingUid!=a.dataTransfer.getData("application/ckeditor5-dragging-uid")&&(this._draggedRange.detach(),this._draggedRange=null,this._draggingUid=""),BI(a.dataTransfer)=="move"&&this._draggedRange&&this._draggedRange.containsRange(h,!0)){this._finalizeDragging(!1),o.stop();return}a.targetRanges=[e.editing.mapper.toViewRange(h)]},{priority:"high"})}_setupContentInsertionIntegration(){const e=this.editor.plugins.get(Gs);e.on("contentInsertion",(n,s)=>{if(!this.isEnabled||s.method!=="drop")return;const r=s.targetRanges.map(o=>this.editor.editing.mapper.toModelRange(o));this.editor.model.change(o=>o.setSelection(r))},{priority:"high"}),e.on("contentInsertion",(n,s)=>{if(!this.isEnabled||s.method!=="drop")return;const r=BI(s.dataTransfer)=="move",o=!s.resultRange||!s.resultRange.isCollapsed;this._finalizeDragging(o&&r)},{priority:"lowest"})}_setupDraggableAttributeHandling(){const e=this.editor,n=e.editing.view,s=n.document;this.listenTo(s,"mousedown",(r,o)=>{if(Xe.isAndroid||!o)return;this._clearDraggableAttributesDelayed.cancel();let a=FI(o.target);if(Xe.isBlink&&!e.isReadOnly&&!a&&!s.selection.isCollapsed){const l=s.selection.getSelectedElement();(!l||!En(l))&&(a=s.selection.editableElement)}a&&(n.change(l=>{l.setAttribute("draggable","true",a)}),this._draggableElement=e.editing.mapper.toModelElement(a))}),this.listenTo(s,"mouseup",()=>{Xe.isAndroid||this._clearDraggableAttributesDelayed()})}_clearDraggableAttributes(){const e=this.editor.editing;e.view.change(n=>{this._draggableElement&&this._draggableElement.root.rootName!="$graveyard"&&n.removeAttribute("draggable",e.mapper.toViewElement(this._draggableElement)),this._draggableElement=null})}_finalizeDragging(e){const n=this.editor,s=n.model;n.plugins.get(Ng).removeDropMarker(),this._clearDraggableAttributes(),n.plugins.has("WidgetToolbarRepository")&&n.plugins.get("WidgetToolbarRepository").clearForceDisabled("dragDrop"),this._draggingUid="",this._previewContainer&&(this._previewContainer.remove(),this._previewContainer=void 0),this._draggedRange&&(e&&this.isEnabled&&s.change(o=>{const a=s.createSelection(this._draggedRange);s.deleteContent(a,{doNotAutoparagraph:!0});const l=a.getFirstPosition().parent;l.isEmpty&&!s.schema.checkChild(l,"$text")&&s.schema.checkChild(l,"paragraph")&&o.insertElement("paragraph",l,0)}),this._draggedRange.detach(),this._draggedRange=null)}_prepareDraggedRange(e){const n=this.editor,s=n.model,r=s.document.selection,o=e?FI(e):null;if(o){const h=n.editing.mapper.toModelElement(o);this._draggedRange=ki.fromRange(s.createRangeOn(h)),this._blockMode=s.schema.isBlock(h),n.plugins.has("WidgetToolbarRepository")&&n.plugins.get("WidgetToolbarRepository").forceDisabled("dragDrop");return}if(r.isCollapsed&&!r.getFirstPosition().parent.isEmpty)return;const a=Array.from(r.getSelectedBlocks()),l=r.getFirstRange();if(a.length==0){this._draggedRange=ki.fromRange(l);return}const c=UL(s,a);if(a.length>1)this._draggedRange=ki.fromRange(c),this._blockMode=!0;else if(a.length==1){const h=l.start.isTouching(c.start)&&l.end.isTouching(c.end);this._draggedRange=ki.fromRange(h?c:l),this._blockMode=h}s.change(h=>h.setSelection(this._draggedRange.toRange()))}_updatePreview({dataTransfer:e,domTarget:n,clientX:s}){const r=this.editor.editing.view,o=r.document.selection.editableElement,a=r.domConverter.mapViewToDom(o),l=Re.window.getComputedStyle(a);this._previewContainer?this._previewContainer.firstElementChild&&this._previewContainer.removeChild(this._previewContainer.firstElementChild):(this._previewContainer=cr(Re.document,"div",{style:"position: fixed; left: -999999px;"}),Re.document.body.appendChild(this._previewContainer));const c=new at(a);if(a.contains(n))return;const h=parseFloat(l.paddingLeft),f=cr(Re.document,"div");f.className="ck ck-content",f.style.width=l.width,f.style.paddingLeft=`${c.left-s+h}px`,Xe.isiOS&&(f.style.backgroundColor="white"),r.domConverter.setContentOf(f,e.getData("text/html")),e.setDragImage(f,0,0),this._previewContainer.appendChild(f)}}function BI(i){return Xe.isGecko?i.dropEffect:["all","copyMove"].includes(i.effectAllowed)?"move":"copy"}function FI(i){if(i.is("editableElement"))return null;if(i.hasClass("ck-widget__selection-handle"))return i.findAncestor(En);if(En(i))return i;const t=i.findAncestor(e=>En(e)||e.is("editableElement"));return En(t)?t:null}function UL(i,t){const e=t[0],n=t[t.length-1],s=e.getCommonAncestor(n),r=i.createPositionBefore(e),o=i.createPositionAfter(n);if(s&&s.is("element")&&!i.schema.isLimit(s)){const a=i.createRangeOn(s),l=r.isTouching(a.start),c=o.isTouching(a.end);if(l&&c)return UL(i,[s])}return i.createRange(r,o)}class Xfe extends ie{static get pluginName(){return"PastePlainText"}static get isOfficialPlugin(){return!0}static get requires(){return[Gs]}init(){const t=this.editor,e=t.model,n=t.editing.view,s=e.document.selection;n.addObserver(gf),t.plugins.get(Gs).on("contentInsertion",(r,o)=>{Jfe(o.content,e)&&e.change(a=>{const l=Array.from(s.getAttributes()).filter(([h])=>e.schema.getAttributeProperties(h).isFormatting);s.isCollapsed||e.deleteContent(s,{doNotAutoparagraph:!0}),l.push(...s.getAttributes());const c=a.createRangeIn(o.content);for(const h of c.getItems())for(const f of l)e.schema.checkAttribute(h,f[0])&&a.setAttribute(f[0],f[1],h)})})}}function Jfe(i,t){let e=t.createRangeIn(i);if(i.childCount==1){const n=i.getChild(0);n.is("element")&&t.schema.isBlock(n)&&!t.schema.isObject(n)&&!t.schema.isLimit(n)&&(e=t.createRangeIn(n))}for(const n of e.getItems())if(!t.schema.isInline(n)||Array.from(n.getAttributeKeys()).find(r=>t.schema.getAttributeProperties(r).isFormatting))return!1;return!0}class PC extends ie{static get pluginName(){return"Clipboard"}static get isOfficialPlugin(){return!0}static get requires(){return[$h,Gs,Zfe,Xfe]}init(){const t=this.editor,e=this.editor.t;t.accessibility.addKeystrokeInfos({keystrokes:[{label:e("Copy selected content"),keystroke:"CTRL+C"},{label:e("Paste content"),keystroke:"CTRL+V"},{label:e("Paste content as plain text"),keystroke:"CTRL+SHIFT+V"}]})}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const Qfe={autoRefresh:!0},$I=36e5,eme=5e3;class IC extends Vt(){constructor(e,n={}){super();b(this,"_refresh");b(this,"_options");b(this,"_tokenRefreshTimeout");b(this,"_isDestroyed",!1);if(!e)throw new B("token-missing-token-url",this);n.initValue&&this._validateTokenValue(n.initValue),this.set("value",n.initValue),typeof e=="function"?this._refresh=e:this._refresh=()=>tme(e),this._options={...Qfe,...n}}init(){return new Promise((e,n)=>{if(!this.value){this.refreshToken().then(e).catch(n);return}this._options.autoRefresh&&this._registerRefreshTokenTimeout(),e(this)})}refreshToken(){const e=this._options.autoRefresh;return this._refresh().then(n=>(this._validateTokenValue(n),this.set("value",n),e&&this._registerRefreshTokenTimeout(),this)).catch(n=>{throw Tt("token-refresh-failed",{autoRefresh:e}),e&&this._registerRefreshTokenTimeout(eme),n})}destroy(){this._isDestroyed=!0,clearTimeout(this._tokenRefreshTimeout)}_validateTokenValue(e){const n=typeof e=="string",s=!/^".*"$/.test(e),r=n&&e.split(".").length===3;if(!(s&&r))throw new B("token-not-in-jwt-format",this)}_registerRefreshTokenTimeout(e){if(clearTimeout(this._tokenRefreshTimeout),this._isDestroyed)return;const n=e||this._getTokenRefreshTimeoutTime();this._tokenRefreshTimeout=setTimeout(()=>{this.refreshToken()},n)}_getTokenRefreshTimeoutTime(){try{const[,e]=this.value.split("."),{exp:n}=JSON.parse(atob(e));return n?Math.floor((n*1e3-Date.now())/2):$I}catch{return $I}}static create(e,n={}){return new IC(e,n).init()}}function tme(i){return new Promise((t,e)=>{const n=new XMLHttpRequest;n.open("GET",i),n.addEventListener("load",()=>{const s=n.status,r=n.response;return s<200||s>299?e(new B("token-cannot-download-new-token",null)):t(r)}),n.addEventListener("error",()=>e(new Error("Network Error"))),n.addEventListener("abort",()=>e(new Error("Abort"))),n.send()})}const f_=/^data:(\S*?);base64,/;class nme extends Ft(){constructor(e,n,s){super();b(this,"file");b(this,"xhr");b(this,"_token");b(this,"_apiAddress");if(!e)throw new B("fileuploader-missing-file",null);if(!n)throw new B("fileuploader-missing-token",null);if(!s)throw new B("fileuploader-missing-api-address",null);this.file=sme(e)?ime(e):e,this._token=n,this._apiAddress=s}onProgress(e){return this.on("progress",(n,s)=>e(s)),this}onError(e){return this.once("error",(n,s)=>e(s)),this}abort(){this.xhr.abort()}send(){return this._prepareRequest(),this._attachXHRListeners(),this._sendRequest()}_prepareRequest(){const e=new XMLHttpRequest;e.open("POST",this._apiAddress),e.setRequestHeader("Authorization",this._token.value),e.responseType="json",this.xhr=e}_attachXHRListeners(){const e=this.xhr,n=s=>()=>this.fire("error",s);e.addEventListener("error",n("Network Error")),e.addEventListener("abort",n("Abort"));/* istanbul ignore else -- @preserve */e.upload&&e.upload.addEventListener("progress",s=>{s.lengthComputable&&this.fire("progress",{total:s.total,uploaded:s.loaded})}),e.addEventListener("load",()=>{const s=e.status,r=e.response;if(s<200||s>299)return this.fire("error",r.message||r.error)})}_sendRequest(){const e=new FormData,n=this.xhr;return e.append("file",this.file),new Promise((s,r)=>{n.addEventListener("load",()=>{const o=n.status,a=n.response;return o<200||o>299?a.message?r(new B("fileuploader-uploading-data-failed",this,{message:a.message})):r(a.error):s(a)}),n.addEventListener("error",()=>r(new Error("Network Error"))),n.addEventListener("abort",()=>r(new Error("Abort"))),n.send(e)})}}function ime(i,t=512){try{const e=i.match(f_)[1],n=atob(i.replace(f_,"")),s=[];for(let r=0;r<n.length;r+=t){const o=n.slice(r,r+t),a=new Array(o.length);for(let l=0;l<o.length;l++)a[l]=o.charCodeAt(l);s.push(new Uint8Array(a))}return new Blob(s,{type:e})}catch{throw new B("fileuploader-decoding-image-data-error",null)}}function sme(i){if(typeof i!="string")return!1;const t=i.match(f_);return!!(t&&t.length)}class rme{constructor(t,e){b(this,"_token");b(this,"_apiAddress");if(!t)throw new B("uploadgateway-missing-token",null);if(!e)throw new B("uploadgateway-missing-api-address",null);this._token=t,this._apiAddress=e}upload(t){return new nme(t,this._token,this._apiAddress)}}class ome extends lw{static get pluginName(){return"CloudServicesCore"}static get isOfficialPlugin(){return!0}createToken(t,e){return new IC(t,e)}createUploadGateway(t,e){return new rme(t,e)}}class ame extends lw{constructor(){super(...arguments);b(this,"tokenUrl");b(this,"uploadUrl");b(this,"webSocketUrl");b(this,"bundleVersion");b(this,"token",null);b(this,"_tokens",new Map)}static get pluginName(){return"CloudServices"}static get isOfficialPlugin(){return!0}static get requires(){return[ome]}async init(){const n=this.context.config.get("cloudServices")||{};for(const[o,a]of Object.entries(n))this[o]=a;if(!this.tokenUrl){this.token=null;return}const r=this.context.plugins.get("CloudServicesCore").createToken(this.tokenUrl);try{this.token=await r.init(),this._tokens.set(this.tokenUrl,this.token)}catch(o){throw r.destroy(),o}}async registerTokenUrl(e){if(this._tokens.has(e))return this.getTokenFor(e);const s=await this.context.plugins.get("CloudServicesCore").createToken(e).init();return this._tokens.set(e,s),s}getTokenFor(e){const n=this._tokens.get(e);if(!n)throw new B("cloudservices-token-not-registered",this);return n}destroy(){super.destroy();for(const e of this._tokens.values())e.destroy()}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class lme extends Wde{constructor(e,n){super(e);b(this,"view");b(this,"_toolbarConfig");b(this,"_elementReplacer");this.view=n,this._toolbarConfig=gL(e.config.get("toolbar")),this._elementReplacer=new Iie,this.listenTo(e.editing.view,"scrollToTheSelection",this._handleScrollToTheSelectionWithStickyPanel.bind(this))}get element(){return this.view.element}init(e){const n=this.editor,s=this.view,r=n.editing.view,o=s.editable,a=r.document.getRoot();o.name=a.rootName,s.render();const l=o.element;this.setEditableElement(o.name,l),s.editable.bind("isFocused").to(this.focusTracker),r.attachDomRoot(l),e&&this._elementReplacer.replace(e,this.element),this._initPlaceholder(),this._initToolbar(),s.menuBarView&&this._initMenuBar(s.menuBarView),this._initDialogPluginIntegration(),this._initContextualBalloonIntegration(),this.fire("ready")}destroy(){super.destroy();const e=this.view,n=this.editor.editing.view;this._elementReplacer.restore(),n.getDomRoot(e.editable.name)&&n.detachDomRoot(e.editable.name),e.destroy()}_initToolbar(){const e=this.view;e.stickyPanel.bind("isActive").to(this.focusTracker,"isFocused"),e.stickyPanel.limiterElement=e.element,e.stickyPanel.bind("viewportTopOffset").to(this,"viewportOffset",({top:n})=>n||0),e.toolbar.fillFromConfig(this._toolbarConfig,this.componentFactory),this.addToolbar(e.toolbar)}_initPlaceholder(){const e=this.editor,n=e.editing.view,s=n.document.getRoot(),r=e.sourceElement;let o;const a=e.config.get("placeholder");a&&(o=typeof a=="string"?a:a[this.view.editable.name]),!o&&r&&r.tagName.toLowerCase()==="textarea"&&(o=r.getAttribute("placeholder")),o&&(s.placeholder=o),nC({view:n,element:s,isDirectHost:!1,keepOnFocus:!0})}_initContextualBalloonIntegration(){if(!this.editor.plugins.has("ContextualBalloon"))return;const{stickyPanel:e}=this.view,n=this.editor.plugins.get("ContextualBalloon");n.on("getPositionOptions",r=>{const o=r.return;if(!o||!e.isSticky||!e.element)return;const a=new at(e.element).height,l=typeof o.target=="function"?o.target():o.target,c=typeof o.limiter=="function"?o.limiter():o.limiter;if(l&&c&&new at(l).height>=new at(c).height-a)return;const h={...o.viewportOffsetConfig},f=(h.top||0)+a;r.return={...o,viewportOffsetConfig:{...h,top:f}}},{priority:"low"});const s=()=>{n.visibleView&&n.updatePosition()};this.listenTo(e,"change:isSticky",s),this.listenTo(this.editor.ui,"change:viewportOffset",s)}_handleScrollToTheSelectionWithStickyPanel(e,n,s){const r=this.view.stickyPanel;if(r.isSticky){const o=new at(r.element).height;n.viewportOffset.top+=o}else{const o=()=>{this.editor.editing.view.scrollToTheSelection(s)};this.listenTo(r,"change:isSticky",o),setTimeout(()=>{this.stopListening(r,"change:isSticky",o)},20)}}_initDialogPluginIntegration(){if(!this.editor.plugins.has("Dialog"))return;const e=this.view.stickyPanel,n=this.editor.plugins.get("Dialog");n.on("show",()=>{const s=n.view;s.on("moveTo",(r,o)=>{if(!e.isSticky||s.wasMoved||s.isModal)return;const a=new at(e.contentPanelElement);o[1]<a.bottom+df.defaultOffset&&(o[1]=a.bottom+df.defaultOffset)},{priority:"high"})},{priority:"low"})}}class cme extends Gde{constructor(e,n,s={}){super(e);b(this,"stickyPanel");b(this,"toolbar");b(this,"editable");this.stickyPanel=new Jde(e),this.toolbar=new Uu(e,{shouldGroupWhenFull:s.shouldToolbarGroupWhenFull}),s.useMenuBar&&(this.menuBarView=new nhe(e)),this.editable=new Yde(e,n,void 0,{label:s.label})}render(){super.render(),this.menuBarView?this.stickyPanel.content.addMany([this.menuBarView,this.toolbar]):this.stickyPanel.content.add(this.toolbar),this.top.add(this.stickyPanel),this.main.add(this.editable)}}class ume extends r_(cu){constructor(e,n={}){if(!ap(e)&&n.initialData!==void 0)throw new B("editor-create-initial-data",null);super(n);b(this,"ui");this.config.define("menuBar.isVisible",!1),this.config.get("initialData")===void 0&&this.config.set("initialData",dme(e)),ap(e)&&(this.sourceElement=e),this.model.document.createRoot();const s=!this.config.get("toolbar.shouldNotGroupWhenFull"),r=this.config.get("menuBar"),o=new cme(this.locale,this.editing.view,{shouldToolbarGroupWhenFull:s,useMenuBar:r.isVisible,label:this.config.get("label")});this.ui=new lme(this,o),Lle(this)}static get editorName(){return"ClassicEditor"}destroy(){return this.sourceElement&&this.updateSourceElement(),this.ui.destroy(),super.destroy()}static create(e,n={}){return new Promise(s=>{const r=new this(e,n);s(r.initPlugins().then(()=>r.ui.init(ap(e)?e:null)).then(()=>r.data.init(r.config.get("initialData"))).then(()=>r.fire("ready")).then(()=>r))})}}function dme(i){return ap(i)?Lie(i):i}function ap(i){return $a(i)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class hme extends lt{constructor(t){super(t),this.affectsData=!1}execute(){const t=this.editor.model,e=t.document.selection;let n=t.schema.getLimitElement(e);if(e.containsEntireContent(n)||!zI(t.schema,n))do if(n=n.parent,!n)return;while(!zI(t.schema,n));t.change(s=>{s.setSelection(n,"in")})}}function zI(i,t){return i.isLimit(t)&&(i.checkChild(t,"$text")||i.checkChild(t,"paragraph"))}const fme=ew("Ctrl+A");class mme extends ie{static get pluginName(){return"SelectAllEditing"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.t,s=t.editing.view.document;t.commands.add("selectAll",new hme(t)),this.listenTo(s,"keydown",(r,o)=>{Kl(o)===fme&&(t.execute("selectAll"),o.preventDefault())}),t.accessibility.addKeystrokeInfos({keystrokes:[{label:e("Select all"),keystroke:"CTRL+A"}]})}}var gme='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M.75 15.5a.75.75 0 0 1 .75.75V18l.008.09A.5.5 0 0 0 2 18.5h1.75a.75.75 0 1 1 0 1.5H1.5l-.144-.007a1.5 1.5 0 0 1-1.35-1.349L0 18.5v-2.25a.75.75 0 0 1 .75-.75zm18.5 0a.75.75 0 0 1 .75.75v2.25l-.007.144a1.5 1.5 0 0 1-1.349 1.35L18.5 20h-2.25a.75.75 0 1 1 0-1.5H18a.5.5 0 0 0 .492-.41L18.5 18v-1.75a.75.75 0 0 1 .75-.75zm-10.45 3c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2H7.2a.2.2 0 0 1-.2-.2v-1.1c0-.11.09-.2.2-.2h1.6zm4 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2h-1.6a.2.2 0 0 1-.2-.2v-1.1c0-.11.09-.2.2-.2h1.6zm.45-5.5a.75.75 0 1 1 0 1.5h-8.5a.75.75 0 1 1 0-1.5h8.5zM1.3 11c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2H.2a.2.2 0 0 1-.2-.2v-1.6c0-.11.09-.2.2-.2h1.1zm18.5 0c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2h-1.1a.2.2 0 0 1-.2-.2v-1.6c0-.11.09-.2.2-.2h1.1zm-4.55-2a.75.75 0 1 1 0 1.5H4.75a.75.75 0 1 1 0-1.5h10.5zM1.3 7c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2H.2a.2.2 0 0 1-.2-.2V7.2c0-.11.09-.2.2-.2h1.1zm18.5 0c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2h-1.1a.2.2 0 0 1-.2-.2V7.2c0-.11.09-.2.2-.2h1.1zm-4.55-2a.75.75 0 1 1 0 1.5h-2.5a.75.75 0 1 1 0-1.5h2.5zm-5 0a.75.75 0 1 1 0 1.5h-5.5a.75.75 0 0 1 0-1.5h5.5zm-6.5-5a.75.75 0 0 1 0 1.5H2a.5.5 0 0 0-.492.41L1.5 2v1.75a.75.75 0 0 1-1.5 0V1.5l.007-.144A1.5 1.5 0 0 1 1.356.006L1.5 0h2.25zM18.5 0l.144.007a1.5 1.5 0 0 1 1.35 1.349L20 1.5v2.25a.75.75 0 1 1-1.5 0V2l-.008-.09A.5.5 0 0 0 18 1.5h-1.75a.75.75 0 1 1 0-1.5h2.25zM8.8 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2H7.2a.2.2 0 0 1-.2-.2V.2c0-.11.09-.2.2-.2h1.6zm4 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2h-1.6a.2.2 0 0 1-.2-.2V.2c0-.11.09-.2.2-.2h1.6z"/></svg>';class pme extends ie{static get pluginName(){return"SelectAllUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor;t.ui.componentFactory.add("selectAll",()=>{const e=this._createButton(rt);return e.set({tooltip:!0}),e}),t.ui.componentFactory.add("menuBar:selectAll",()=>this._createButton(Xn))}_createButton(t){const e=this.editor,n=e.locale,s=e.commands.get("selectAll"),r=new t(e.locale),o=n.t;return r.set({label:o("Select all"),icon:gme,keystroke:"Ctrl+A"}),r.bind("isEnabled").to(s,"isEnabled"),this.listenTo(r,"execute",()=>{e.execute("selectAll"),e.editing.view.focus()}),r}}class bme extends ie{static get requires(){return[mme,pme]}static get pluginName(){return"SelectAll"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class WL extends lt{constructor(e){super(e);b(this,"_stack",[]);b(this,"_createdBatches",new WeakSet);this.refresh(),this._isEnabledBasedOnSelection=!1,this.listenTo(e.data,"set",(n,s)=>{s[1]={...s[1]};const r=s[1];r.batchType||(r.batchType={isUndoable:!1})},{priority:"high"}),this.listenTo(e.data,"set",(n,s)=>{s[1].batchType.isUndoable||this.clearStack()})}refresh(){this.isEnabled=this._stack.length>0}get createdBatches(){return this._createdBatches}addBatch(e){const n=this.editor.model.document.selection,s={ranges:n.hasOwnRange?Array.from(n.getRanges()):[],isBackward:n.isBackward};this._stack.push({batch:e,selection:s}),this.refresh()}clearStack(){this._stack=[],this.refresh()}_restoreSelection(e,n,s){const r=this.editor.model,o=r.document,a=[],l=e.map(h=>h.getTransformedByOperations(s)),c=l.flat();for(const h of l){const f=h.filter(m=>m.root!=o.graveyard).filter(m=>!vme(m,c));f.length&&(wme(f),a.push(f[0]))}a.length&&r.change(h=>{h.setSelection(a,{backward:n})})}_undo(e,n){const s=this.editor.model,r=s.document;this._createdBatches.add(n);const o=e.operations.slice().filter(a=>a.isDocumentOperation);o.reverse();for(const a of o){const l=a.baseVersion+1,c=Array.from(r.history.getOperations(l)),f=rae([a.getReversed()],c,{useRelations:!0,document:this.editor.model.document,padWithNoOps:!1,forceWeakRemove:!0}).operationsA;for(let m of f){const p=m.affectedSelectable;p&&!s.canEditAt(p)&&(m=new jn(m.baseVersion)),n.addOperation(m),s.applyOperation(m),r.history.setOperationAsUndone(a,m)}}}}function wme(i){i.sort((t,e)=>t.start.isBefore(e.start)?-1:1);for(let t=1;t<i.length;t++){const n=i[t-1].getJoined(i[t],!0);n&&(t--,i.splice(t,2,n))}}function vme(i,t){return t.some(e=>e!==i&&e.containsRange(i,!0))}class yme extends WL{execute(t=null){const e=t?this._stack.findIndex(r=>r.batch==t):this._stack.length-1,n=this._stack.splice(e,1)[0],s=this.editor.model.createBatch({isUndo:!0});this.editor.model.enqueueChange(s,()=>{this._undo(n.batch,s);const r=this.editor.model.document.history.getOperations(n.batch.baseVersion);this._restoreSelection(n.selection.ranges,n.selection.isBackward,r)}),this.fire("revert",n.batch,s),this.refresh()}}class _me extends WL{execute(){const t=this._stack.pop(),e=this.editor.model.createBatch({isUndo:!0});this.editor.model.enqueueChange(e,()=>{const s=t.batch.operations[t.batch.operations.length-1].baseVersion+1,r=this.editor.model.document.history.getOperations(s);this._restoreSelection(t.selection.ranges,t.selection.isBackward,r),this._undo(t.batch,e)}),this.refresh()}}class Eme extends ie{constructor(){super(...arguments);b(this,"_undoCommand");b(this,"_redoCommand");b(this,"_batchRegistry",new WeakSet)}static get pluginName(){return"UndoEditing"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,n=e.t;this._undoCommand=new yme(e),this._redoCommand=new _me(e),e.commands.add("undo",this._undoCommand),e.commands.add("redo",this._redoCommand),this.listenTo(e.model,"applyOperation",(s,r)=>{const o=r[0];if(!o.isDocumentOperation)return;const a=o.batch,l=this._redoCommand.createdBatches.has(a),c=this._undoCommand.createdBatches.has(a);this._batchRegistry.has(a)||(this._batchRegistry.add(a),a.isUndoable&&(l?this._undoCommand.addBatch(a):c||(this._undoCommand.addBatch(a),this._redoCommand.clearStack())))},{priority:"highest"}),this.listenTo(this._undoCommand,"revert",(s,r,o)=>{this._redoCommand.addBatch(o)}),e.keystrokes.set("CTRL+Z","undo"),e.keystrokes.set("CTRL+Y","redo"),e.keystrokes.set("CTRL+SHIFT+Z","redo"),e.accessibility.addKeystrokeInfos({keystrokes:[{label:n("Undo"),keystroke:"CTRL+Z"},{label:n("Redo"),keystroke:[["CTRL+Y"],["CTRL+SHIFT+Z"]]}]})}}class Cme extends ie{static get pluginName(){return"UndoUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.locale,n=t.t,s=e.uiLanguageDirection=="ltr"?ke.undo:ke.redo,r=e.uiLanguageDirection=="ltr"?ke.redo:ke.undo;this._addButtonsToFactory("undo",n("Undo"),"CTRL+Z",s),this._addButtonsToFactory("redo",n("Redo"),"CTRL+Y",r)}_addButtonsToFactory(t,e,n,s){const r=this.editor;r.ui.componentFactory.add(t,()=>{const o=this._createButton(rt,t,e,n,s);return o.set({tooltip:!0}),o}),r.ui.componentFactory.add("menuBar:"+t,()=>this._createButton(Xn,t,e,n,s))}_createButton(t,e,n,s,r){const o=this.editor,a=o.locale,l=o.commands.get(e),c=new t(a);return c.set({label:n,icon:r,keystroke:s}),c.bind("isEnabled").to(l,"isEnabled"),this.listenTo(c,"execute",()=>{o.execute(e),o.editing.view.focus()}),c}}class RC extends ie{static get requires(){return[Eme,Cme]}static get pluginName(){return"Undo"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class xme extends ie{static get requires(){return[Bue,PC,gw,bme,Jhe,xhe,RC]}static get pluginName(){return"Essentials"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class pw extends lt{constructor(e,n){super(e);b(this,"attributeKey");this.attributeKey=n}refresh(){const e=this.editor.model,n=e.document;this.value=n.selection.getAttribute(this.attributeKey),this.isEnabled=e.schema.checkAttributeInSelection(n.selection,this.attributeKey)}execute(e={}){const n=this.editor.model,r=n.document.selection,o=e.value,a=e.batch,l=c=>{if(r.isCollapsed)o?c.setSelectionAttribute(this.attributeKey,o):c.removeSelectionAttribute(this.attributeKey);else{const h=n.schema.getValidRanges(r.getRanges(),this.attributeKey);for(const f of h)o?c.setAttribute(this.attributeKey,o,f):c.removeAttribute(this.attributeKey,f)}};a?n.enqueueChange(a,c=>{l(c)}):n.change(c=>{l(c)})}}const ji="fontSize",Hi="fontFamily",Xr="fontColor",No="fontBackgroundColor";function qL(i,t){const e={model:{key:i,values:[]},view:{},upcastAlso:{}};for(const n of t)e.model.values.push(n.model),e.view[n.model]=n.view,n.upcastAlso&&(e.upcastAlso[n.model]=n.upcastAlso);return e}function GL(i){return t=>kme(t.getStyle(i))}function KL(i){return(t,{writer:e})=>e.createAttributeElement("span",{style:`${i}:${t}`},{priority:7})}function Tme({dropdownView:i,colors:t,columns:e,removeButtonLabel:n,colorPickerLabel:s,documentColorsLabel:r,documentColorsCount:o,colorPickerViewConfig:a}){const l=i.locale,c=new yC(l,{colors:t,columns:e,removeButtonLabel:n,colorPickerLabel:s,documentColorsLabel:r,documentColorsCount:o,colorPickerViewConfig:a});return i.colorSelectorView=c,i.panelView.children.add(c),c}function kme(i){return i.replace(/\s/g,"")}class Sme extends pw{constructor(t){super(t,Hi)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function YL(i){return i.map(Ame).filter(t=>t!==void 0)}function Ame(i){if(typeof i=="object")return i;if(i==="default")return{title:"Default",model:void 0};if(typeof i=="string")return Pme(i)}function Pme(i){const t=i.replace(/"|'/g,"").split(","),e=t[0],n=t.map(Ime).join(", ");return{title:e,model:n,view:{name:"span",styles:{"font-family":n},priority:7}}}function Ime(i){return i=i.trim(),i.indexOf(" ")>0&&(i=`'${i}'`),i}class Rme extends ie{static get pluginName(){return"FontFamilyEditing"}static get isOfficialPlugin(){return!0}constructor(t){super(t),t.config.define(Hi,{options:["default","Arial, Helvetica, sans-serif","Courier New, Courier, monospace","Georgia, serif","Lucida Sans Unicode, Lucida Grande, sans-serif","Tahoma, Geneva, sans-serif","Times New Roman, Times, serif","Trebuchet MS, Helvetica, sans-serif","Verdana, Geneva, sans-serif"],supportAllValues:!1})}init(){const t=this.editor;t.model.schema.extend("$text",{allowAttributes:Hi}),t.model.schema.setAttributeProperties(Hi,{isFormatting:!0,copyOnEnter:!0});const e=YL(t.config.get("fontFamily.options")).filter(s=>s.model),n=qL(Hi,e);t.config.get("fontFamily.supportAllValues")?(this._prepareAnyValueConverters(),this._prepareCompatibilityConverter()):t.conversion.attributeToElement(n),t.commands.add(Hi,new Sme(t))}_prepareAnyValueConverters(){const t=this.editor;t.conversion.for("downcast").attributeToElement({model:Hi,view:(e,{writer:n})=>n.createAttributeElement("span",{style:"font-family:"+e},{priority:7})}),t.conversion.for("upcast").elementToAttribute({model:{key:Hi,value:e=>e.getStyle("font-family")},view:{name:"span",styles:{"font-family":/.*/}}})}_prepareCompatibilityConverter(){this.editor.conversion.for("upcast").elementToAttribute({view:{name:"font",attributes:{face:/.*/}},model:{key:Hi,value:e=>e.getAttribute("face")}})}}var jI='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.03 3h6.149a.75.75 0 1 1 0 1.5h-5.514L11.03 3zm1.27 3h4.879a.75.75 0 1 1 0 1.5h-4.244L12.3 6zm1.27 3h3.609a.75.75 0 1 1 0 1.5h-2.973L13.57 9zm-2.754 2.5L8.038 4.785 5.261 11.5h5.555zm.62 1.5H4.641l-1.666 4.028H1.312l5.789-14h1.875l5.789 14h-1.663L11.436 13z"/></svg>';class Ome extends ie{static get pluginName(){return"FontFamilyUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.t,n=this._getLocalizedOptions(),s=t.commands.get(Hi),r=e("Font Family"),o=Nme(n,s);t.ui.componentFactory.add(Hi,a=>{const l=vi(a);return oc(l,o,{role:"menu",ariaLabel:r}),l.buttonView.set({label:r,icon:jI,tooltip:!0}),l.extendTemplate({attributes:{class:"ck-font-family-dropdown"}}),l.bind("isEnabled").to(s),this.listenTo(l,"execute",c=>{t.execute(c.source.commandName,{value:c.source.commandParam}),t.editing.view.focus()}),l}),t.ui.componentFactory.add(`menuBar:${Hi}`,a=>{const l=new ps(a);l.buttonView.set({label:r,icon:jI}),l.bind("isEnabled").to(s);const c=new Zl(a);for(const h of o){const f=new ac(a,l),m=new Xn(a);m.set({role:"menuitemradio",isToggleable:!0}),m.bind(...Object.keys(h.model)).to(h.model),m.delegate("execute").to(l),m.on("execute",()=>{t.execute(h.model.commandName,{value:h.model.commandParam}),t.editing.view.focus()}),f.children.add(m),c.items.add(f)}return l.panelView.children.add(c),l})}_getLocalizedOptions(){const t=this.editor,e=t.t;return YL(t.config.get(Hi).options).map(s=>(s.title==="Default"&&(s.title=e("Default")),s))}}function Nme(i,t){const e=new oi;for(const n of i){const s={type:"button",model:new Yl({commandName:Hi,commandParam:n.model,label:n.title,role:"menuitemradio",withText:!0})};s.model.bind("isOn").to(t,"value",r=>r===n.model?!0:!r||!n.model?!1:r.split(",")[0].replace(/'/g,"").toLowerCase()===n.model.toLowerCase()),n.view&&typeof n.view!="string"&&n.view.styles&&s.model.set("labelStyle",`font-family: ${n.view.styles["font-family"]}`),e.add(s)}return e}class Mme extends ie{static get requires(){return[Rme,Ome]}static get pluginName(){return"FontFamily"}static get isOfficialPlugin(){return!0}}class Lme extends pw{constructor(t){super(t,ji)}}function OC(i){return i.map(t=>Vme(t)).filter(t=>t!==void 0)}const HI={get tiny(){return{title:"Tiny",model:"tiny",view:{name:"span",classes:"text-tiny",priority:7}}},get small(){return{title:"Small",model:"small",view:{name:"span",classes:"text-small",priority:7}}},get big(){return{title:"Big",model:"big",view:{name:"span",classes:"text-big",priority:7}}},get huge(){return{title:"Huge",model:"huge",view:{name:"span",classes:"text-huge",priority:7}}}};function Vme(i){if(typeof i=="number"&&(i=String(i)),typeof i=="object"&&Fme(i))return m_(i);const t=Bme(i);if(t)return m_(t);if(i==="default")return{model:void 0,title:"Default"};if(!$me(i))return Dme(i)}function Dme(i){return typeof i=="string"&&(i={title:i,model:`${parseFloat(i)}px`}),i.view={name:"span",styles:{"font-size":i.model}},m_(i)}function m_(i){return i.view&&typeof i.view!="string"&&!i.view.priority&&(i.view.priority=7),i}function Bme(i){return typeof i=="string"?HI[i]:HI[i.model]}function Fme(i){return i.title&&i.model&&i.view}function $me(i){let t;if(typeof i=="object")if(i.model)t=parseFloat(i.model);else throw new B("font-size-invalid-definition",null,i);else t=parseFloat(i);return isNaN(t)}const UI=["x-small","x-small","small","medium","large","x-large","xx-large","xxx-large"];class zme extends ie{static get pluginName(){return"FontSizeEditing"}static get isOfficialPlugin(){return!0}constructor(t){super(t),t.config.define(ji,{options:["tiny","small","default","big","huge"],supportAllValues:!1})}init(){const t=this.editor;t.model.schema.extend("$text",{allowAttributes:ji}),t.model.schema.setAttributeProperties(ji,{isFormatting:!0,copyOnEnter:!0});const e=t.config.get("fontSize.supportAllValues"),n=OC(this.editor.config.get("fontSize.options")).filter(r=>r.model),s=qL(ji,n);e?(this._prepareAnyValueConverters(s),this._prepareCompatibilityConverter()):t.conversion.attributeToElement(s),t.commands.add(ji,new Lme(t))}_prepareAnyValueConverters(t){const e=this.editor,n=t.model.values.filter(s=>!aw(String(s))&&!F4(String(s)));if(n.length)throw new B("font-size-invalid-use-of-named-presets",null,{presets:n});e.conversion.for("downcast").attributeToElement({model:ji,view:(s,{writer:r})=>{if(s)return r.createAttributeElement("span",{style:"font-size:"+s},{priority:7})}}),e.conversion.for("upcast").elementToAttribute({model:{key:ji,value:s=>s.getStyle("font-size")},view:{name:"span",styles:{"font-size":/.*/}}})}_prepareCompatibilityConverter(){this.editor.conversion.for("upcast").elementToAttribute({view:{name:"font",attributes:{size:/^[+-]?\d{1,3}$/}},model:{key:ji,value:e=>{const n=e.getAttribute("size"),s=n[0]==="-"||n[0]==="+";let r=parseInt(n,10);s&&(r=3+r);const o=UI.length-1,a=Math.min(Math.max(r,0),o);return UI[a]}}})}}var WI='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M9.816 11.5 7.038 4.785 4.261 11.5h5.555zm.62 1.5H3.641l-1.666 4.028H.312l5.789-14h1.875l5.789 14h-1.663L10.436 13zm7.55 2.279.779-.779.707.707-2.265 2.265-2.193-2.265.707-.707.765.765V4.825c0-.042 0-.083.002-.123l-.77.77-.707-.707L17.207 2.5l2.265 2.265-.707.707-.782-.782c.002.043.003.089.003.135v10.454z"/></svg>';class jme extends ie{static get pluginName(){return"FontSizeUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.t,n=this._getLocalizedOptions(),s=t.commands.get(ji),r=e("Font Size"),o=Hme(n,s);t.ui.componentFactory.add(ji,a=>{const l=vi(a);return oc(l,o,{role:"menu",ariaLabel:r}),l.buttonView.set({label:r,icon:WI,tooltip:!0}),l.extendTemplate({attributes:{class:["ck-font-size-dropdown"]}}),l.bind("isEnabled").to(s),this.listenTo(l,"execute",c=>{t.execute(c.source.commandName,{value:c.source.commandParam}),t.editing.view.focus()}),l}),t.ui.componentFactory.add(`menuBar:${ji}`,a=>{const l=new ps(a);l.buttonView.set({label:r,icon:WI}),l.bind("isEnabled").to(s);const c=new Zl(a);for(const h of o){const f=new ac(a,l),m=new Xn(a);m.set({role:"menuitemradio",isToggleable:!0}),m.bind(...Object.keys(h.model)).to(h.model),m.delegate("execute").to(l),m.on("execute",()=>{t.execute(h.model.commandName,{value:h.model.commandParam}),t.editing.view.focus()}),f.children.add(m),c.items.add(f)}return l.panelView.children.add(c),l})}_getLocalizedOptions(){const t=this.editor,e=t.t,n={Default:e("Default"),Tiny:e("Tiny"),Small:e("Small"),Big:e("Big"),Huge:e("Huge")};return OC(t.config.get(ji).options).map(r=>{const o=n[r.title];return o&&o!=r.title&&(r=Object.assign({},r,{title:o})),r})}}function Hme(i,t){const e=new oi;for(const n of i){const s={type:"button",model:new Yl({commandName:ji,commandParam:n.model,label:n.title,class:"ck-fontsize-option",role:"menuitemradio",withText:!0})};n.view&&typeof n.view!="string"&&(n.view.styles&&s.model.set("labelStyle",`font-size:${n.view.styles["font-size"]}`),n.view.classes&&s.model.set("class",`${s.model.class} ${n.view.classes}`)),s.model.bind("isOn").to(t,"value",r=>r===n.model),e.add(s)}return e}class Ume extends ie{static get requires(){return[zme,jme]}static get pluginName(){return"FontSize"}static get isOfficialPlugin(){return!0}normalizeSizeOptions(t){return OC(t)}}class Wme extends pw{constructor(t){super(t,Xr)}}class qme extends ie{static get pluginName(){return"FontColorEditing"}static get isOfficialPlugin(){return!0}constructor(t){super(t),t.config.define(Xr,{colors:[{color:"hsl(0, 0%, 0%)",label:"Black"},{color:"hsl(0, 0%, 30%)",label:"Dim grey"},{color:"hsl(0, 0%, 60%)",label:"Grey"},{color:"hsl(0, 0%, 90%)",label:"Light grey"},{color:"hsl(0, 0%, 100%)",label:"White",hasBorder:!0},{color:"hsl(0, 75%, 60%)",label:"Red"},{color:"hsl(30, 75%, 60%)",label:"Orange"},{color:"hsl(60, 75%, 60%)",label:"Yellow"},{color:"hsl(90, 75%, 60%)",label:"Light green"},{color:"hsl(120, 75%, 60%)",label:"Green"},{color:"hsl(150, 75%, 60%)",label:"Aquamarine"},{color:"hsl(180, 75%, 60%)",label:"Turquoise"},{color:"hsl(210, 75%, 60%)",label:"Light blue"},{color:"hsl(240, 75%, 60%)",label:"Blue"},{color:"hsl(270, 75%, 60%)",label:"Purple"}],columns:5}),t.conversion.for("upcast").elementToAttribute({view:{name:"span",styles:{color:/[\s\S]+/}},model:{key:Xr,value:GL("color")}}),t.conversion.for("upcast").elementToAttribute({view:{name:"font",attributes:{color:/^#?\w+$/}},model:{key:Xr,value:e=>e.getAttribute("color")}}),t.conversion.for("downcast").attributeToElement({model:Xr,view:KL("color")}),t.commands.add(Xr,new Wme(t)),t.model.schema.extend("$text",{allowAttributes:Xr}),t.model.schema.setAttributeProperties(Xr,{isFormatting:!0,copyOnEnter:!0})}}class ZL extends ie{constructor(e,{commandName:n,componentName:s,icon:r,dropdownLabel:o}){super(e);b(this,"commandName");b(this,"componentName");b(this,"icon");b(this,"dropdownLabel");b(this,"columns");this.commandName=n,this.componentName=s,this.icon=r,this.dropdownLabel=o,this.columns=e.config.get(`${this.componentName}.columns`)}init(){const e=this.editor,n=e.locale,s=n.t,r=e.commands.get(this.commandName),o=e.config.get(this.componentName),a=mf(o.colors),l=ff(n,a),c=o.documentColors,h=o.colorPicker!==!1;e.ui.componentFactory.add(this.componentName,f=>{const m=vi(f);let p=!1;const v=Tme({dropdownView:m,colors:l.map(_=>({label:_.label,color:_.model,options:{hasBorder:_.hasBorder}})),columns:this.columns,removeButtonLabel:s("Remove color"),colorPickerLabel:s("Color picker"),documentColorsLabel:c!==0?s("Document colors"):"",documentColorsCount:c===void 0?this.columns:c,colorPickerViewConfig:h?o.colorPicker||{}:!1});return v.bind("selectedColor").to(r,"value"),m.buttonView.set({label:this.dropdownLabel,icon:this.icon,tooltip:!0}),m.extendTemplate({attributes:{class:"ck-color-ui-dropdown"}}),m.bind("isEnabled").to(r),v.on("execute",(_,E)=>{m.isOpen&&e.execute(this.commandName,{value:E.value,batch:this._undoStepBatch}),E.source!=="colorPicker"&&e.editing.view.focus(),E.source==="colorPickerSaveButton"&&(m.isOpen=!1)}),v.on("colorPicker:show",()=>{this._undoStepBatch=e.model.createBatch()}),v.on("colorPicker:cancel",()=>{this._undoStepBatch.operations.length&&(m.isOpen=!1,e.execute("undo",this._undoStepBatch)),e.editing.view.focus()}),m.on("change:isOpen",(_,E,x)=>{p||(p=!0,m.colorSelectorView.appendUI()),x&&(c!==0&&v.updateDocumentColors(e.model,this.componentName),v.updateSelectedColors(),v.showColorGridsFragment())}),fw(m,()=>m.colorSelectorView.colorGridsFragmentView.staticColorsGrid.items.find(_=>_.isOn)),m}),e.ui.componentFactory.add(`menuBar:${this.componentName}`,f=>{const m=new ps(f);m.buttonView.set({label:this.dropdownLabel,icon:this.icon}),m.bind("isEnabled").to(r);let p=!1;const v=new yC(f,{colors:l.map(_=>({label:_.label,color:_.model,options:{hasBorder:_.hasBorder}})),columns:this.columns,removeButtonLabel:s("Remove color"),colorPickerLabel:s("Color picker"),documentColorsLabel:c!==0?s("Document colors"):"",documentColorsCount:c===void 0?this.columns:c,colorPickerViewConfig:!1});return v.bind("selectedColor").to(r,"value"),v.delegate("execute").to(m),v.on("execute",(_,E)=>{e.execute(this.commandName,{value:E.value,batch:this._undoStepBatch}),e.editing.view.focus()}),m.on("change:isOpen",(_,E,x)=>{p||(p=!0,v.appendUI()),x&&(c!==0&&v.updateDocumentColors(e.model,this.componentName),v.updateSelectedColors(),v.showColorGridsFragment())}),m.panelView.children.add(v),m})}}var Gme='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M12.4 10.3 10 4.5l-2.4 5.8h4.8zm.5 1.2H7.1L5.7 15H4.2l5-12h1.6l5 12h-1.5L13 11.5zm3.1 7H4a1 1 0 0 1 0-2h12a1 1 0 0 1 0 2z"/></svg>';class Kme extends ZL{constructor(t){const e=t.locale.t;super(t,{commandName:Xr,componentName:Xr,icon:Gme,dropdownLabel:e("Font Color")})}static get pluginName(){return"FontColorUI"}}class Yme extends ie{static get requires(){return[qme,Kme]}static get pluginName(){return"FontColor"}static get isOfficialPlugin(){return!0}}class Zme extends pw{constructor(t){super(t,No)}}class Xme extends ie{static get pluginName(){return"FontBackgroundColorEditing"}static get isOfficialPlugin(){return!0}constructor(t){super(t),t.config.define(No,{colors:[{color:"hsl(0, 0%, 0%)",label:"Black"},{color:"hsl(0, 0%, 30%)",label:"Dim grey"},{color:"hsl(0, 0%, 60%)",label:"Grey"},{color:"hsl(0, 0%, 90%)",label:"Light grey"},{color:"hsl(0, 0%, 100%)",label:"White",hasBorder:!0},{color:"hsl(0, 75%, 60%)",label:"Red"},{color:"hsl(30, 75%, 60%)",label:"Orange"},{color:"hsl(60, 75%, 60%)",label:"Yellow"},{color:"hsl(90, 75%, 60%)",label:"Light green"},{color:"hsl(120, 75%, 60%)",label:"Green"},{color:"hsl(150, 75%, 60%)",label:"Aquamarine"},{color:"hsl(180, 75%, 60%)",label:"Turquoise"},{color:"hsl(210, 75%, 60%)",label:"Light blue"},{color:"hsl(240, 75%, 60%)",label:"Blue"},{color:"hsl(270, 75%, 60%)",label:"Purple"}],columns:5}),t.data.addStyleProcessorRules(fC),t.conversion.for("upcast").elementToAttribute({view:{name:"span",styles:{"background-color":/[\s\S]+/}},model:{key:No,value:GL("background-color")}}),t.conversion.for("downcast").attributeToElement({model:No,view:KL("background-color")}),t.commands.add(No,new Zme(t)),t.model.schema.extend("$text",{allowAttributes:No}),t.model.schema.setAttributeProperties(No,{isFormatting:!0,copyOnEnter:!0})}}var Jme='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M4 2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2zm8.38 9.262H7.62L10 5.506l2.38 5.756zm.532 1.285L14.34 16h1.426L10.804 4H9.196L4.234 16H5.66l1.428-3.453h5.824z"/></svg>';class Qme extends ZL{constructor(t){const e=t.locale.t;super(t,{commandName:No,componentName:No,icon:Jme,dropdownLabel:e("Font Background Color")})}static get pluginName(){return"FontBackgroundColorUI"}}class ege extends ie{static get requires(){return[Xme,Qme]}static get pluginName(){return"FontBackgroundColor"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class tge extends lt{constructor(t){super(t),this._isEnabledBasedOnSelection=!1}refresh(){const t=this.editor.model,e=t.document,n=Tn(e.selection.getSelectedBlocks());this.value=!!n&&n.is("element","paragraph"),this.isEnabled=!!n&&qI(n,t.schema)}execute(t={}){const e=this.editor.model,n=e.document,s=t.selection||n.selection;e.canEditAt(s)&&e.change(r=>{const o=s.getSelectedBlocks();for(const a of o)!a.is("element","paragraph")&&qI(a,e.schema)&&r.rename(a,"paragraph")})}}function qI(i,t){return t.checkChild(i.parent,"paragraph")&&!t.isObject(i)}class nge extends lt{constructor(t){super(t),this._isEnabledBasedOnSelection=!1}execute(t){const e=this.editor.model,n=t.attributes;let s=t.position;return e.canEditAt(s)?e.change(r=>{if(s=this._findPositionToInsertParagraph(s,r),!s)return null;const o=r.createElement("paragraph");return n&&e.schema.setAllowedAttributes(o,n,r),e.insertContent(o,s),r.setSelection(o,"in"),r.createPositionAt(o,0)}):null}_findPositionToInsertParagraph(t,e){const n=this.editor.model;if(n.schema.checkChild(t,"paragraph"))return t;const s=n.schema.findAllowedParent(t,"paragraph");if(!s)return null;const r=t.parent,o=n.schema.checkChild(r,"$text");return r.isEmpty||o&&t.isAtEnd?n.createPositionAfter(r):!r.isEmpty&&o&&t.isAtStart?n.createPositionBefore(r):e.split(t,s).position}}const mb=class mb extends ie{static get pluginName(){return"Paragraph"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.model;t.commands.add("paragraph",new tge(t)),t.commands.add("insertParagraph",new nge(t)),e.schema.register("paragraph",{inheritAllFrom:"$block"}),t.conversion.elementToElement({model:"paragraph",view:"p"}),t.conversion.for("upcast").elementToElement({model:(n,{writer:s})=>!mb.paragraphLikeElements.has(n.name)||n.isEmpty?null:s.createElement("paragraph"),view:/.+/,converterPriority:"low"})}};b(mb,"paragraphLikeElements",new Set(["blockquote","dd","div","dt","h1","h2","h3","h4","h5","h6","li","p","td","th"]));let nb=mb;/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class ige extends lt{constructor(e,n){super(e);b(this,"modelElements");this.modelElements=n}refresh(){const e=Tn(this.editor.model.document.selection.getSelectedBlocks());this.value=!!e&&this.modelElements.includes(e.name)&&e.name,this.isEnabled=!!e&&this.modelElements.some(n=>GI(e,n,this.editor.model.schema))}execute(e){const n=this.editor.model,s=n.document,r=e.value;n.change(o=>{const a=Array.from(s.selection.getSelectedBlocks()).filter(l=>GI(l,r,n.schema));for(const l of a)l.is("element",r)||o.rename(l,r)})}}function GI(i,t,e){return e.checkChild(i.parent,t)&&!e.isObject(i)}const KI="paragraph";class sge extends ie{static get pluginName(){return"HeadingEditing"}static get isOfficialPlugin(){return!0}constructor(t){super(t),t.config.define("heading",{options:[{model:"paragraph",title:"Paragraph",class:"ck-heading_paragraph"},{model:"heading1",view:"h2",title:"Heading 1",class:"ck-heading_heading1"},{model:"heading2",view:"h3",title:"Heading 2",class:"ck-heading_heading2"},{model:"heading3",view:"h4",title:"Heading 3",class:"ck-heading_heading3"}]})}static get requires(){return[nb]}init(){const t=this.editor,e=t.config.get("heading.options"),n=[];for(const s of e)s.model!=="paragraph"&&(t.model.schema.register(s.model,{inheritAllFrom:"$block"}),t.conversion.elementToElement(s),n.push(s.model));this._addDefaultH1Conversion(t),t.commands.add("heading",new ige(t,n))}afterInit(){const t=this.editor,e=t.commands.get("enter"),n=t.config.get("heading.options");e&&this.listenTo(e,"afterExecute",(s,r)=>{const o=t.model.document.selection.getFirstPosition().parent;n.some(l=>o.is("element",l.model))&&!o.is("element",KI)&&o.childCount===0&&r.writer.rename(o,KI)})}_addDefaultH1Conversion(t){t.conversion.for("upcast").elementToElement({model:"heading1",view:"h1",converterPriority:Na.low+1})}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function rge(i){const t=i.t,e={Paragraph:t("Paragraph"),"Heading 1":t("Heading 1"),"Heading 2":t("Heading 2"),"Heading 3":t("Heading 3"),"Heading 4":t("Heading 4"),"Heading 5":t("Heading 5"),"Heading 6":t("Heading 6")};return i.config.get("heading.options").map(n=>{const s=e[n.title];return s&&s!=n.title&&(n.title=s),n})}class oge extends ie{static get pluginName(){return"HeadingUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.t,n=rge(t),s=e("Choose heading"),r=e("Heading");t.ui.componentFactory.add("heading",o=>{const a={},l=new oi,c=t.commands.get("heading"),h=t.commands.get("paragraph"),f=[c];for(const p of n){const v={type:"button",model:new Yl({label:p.title,class:p.class,role:"menuitemradio",withText:!0})};p.model==="paragraph"?(v.model.bind("isOn").to(h,"value"),v.model.set("commandName","paragraph"),f.push(h)):(v.model.bind("isOn").to(c,"value",_=>_===p.model),v.model.set({commandName:"heading",commandValue:p.model})),l.add(v),a[p.model]=p.title}const m=vi(o);return oc(m,l,{ariaLabel:r,role:"menu"}),m.buttonView.set({ariaLabel:r,ariaLabelledBy:void 0,isOn:!1,withText:!0,tooltip:r}),m.extendTemplate({attributes:{class:["ck-heading-dropdown"]}}),m.bind("isEnabled").toMany(f,"isEnabled",(...p)=>p.some(v=>v)),m.buttonView.bind("label").to(c,"value",h,"value",(p,v)=>{const _=v?"paragraph":p;return typeof _=="boolean"||!a[_]?s:a[_]}),m.buttonView.bind("ariaLabel").to(c,"value",h,"value",(p,v)=>{const _=v?"paragraph":p;return typeof _=="boolean"||!a[_]?r:`${a[_]}, ${r}`}),this.listenTo(m,"execute",p=>{const{commandName:v,commandValue:_}=p.source;t.execute(v,_?{value:_}:void 0),t.editing.view.focus()}),m}),t.ui.componentFactory.add("menuBar:heading",o=>{const a=new ps(o),l=t.commands.get("heading"),c=t.commands.get("paragraph"),h=[l],f=new Zl(o);a.set({class:"ck-heading-dropdown"}),f.set({ariaLabel:e("Heading"),role:"menu"}),a.buttonView.set({label:e("Heading")}),a.panelView.children.add(f);for(const m of n){const p=new ac(o,a),v=new Xn(o);p.children.add(v),f.items.add(p),v.set({isToggleable:!0,label:m.title,role:"menuitemradio",class:m.class}),v.delegate("execute").to(a),v.on("execute",()=>{const _=m.model==="paragraph"?"paragraph":"heading";t.execute(_,{value:m.model}),t.editing.view.focus()}),m.model==="paragraph"?(v.bind("isOn").to(c,"value"),h.push(c)):v.bind("isOn").to(l,"value",_=>_===m.model)}return a.bind("isEnabled").toMany(h,"isEnabled",(...m)=>m.some(p=>p)),a})}}class age extends ie{static get requires(){return[sge,oge]}static get pluginName(){return"Heading"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function lge(i){return i.createContainerElement("span",{class:"image-inline"},i.createEmptyElement("img"))}function YI(i){return i.createContainerElement("figure",{class:"image"},[i.createEmptyElement("img"),i.createSlot("children")])}function XL(i,t){const e=i.plugins.get("ImageUtils"),n=i.plugins.has("ImageInlineEditing")&&i.plugins.has("ImageBlockEditing");return r=>e.isInlineImageView(r)?n&&(r.getStyle("display")=="block"||r.findAncestor(e.isBlockImageView)?"imageBlock":"imageInline")!==t?null:s(r):null;function s(r){const o={name:!0};return r.hasAttribute("src")&&(o.attributes=["src"]),o}}function NC(i,t){const e=Tn(t.getSelectedBlocks());return!e||i.isObject(e)||e.isEmpty&&e.name!="listItem"?"imageBlock":"imageInline"}function ib(i){return i&&i.endsWith("px")?parseInt(i):null}function sb(i){const t=ib(i.getStyle("width")),e=ib(i.getStyle("height"));return!!(t&&e)}const cge=/^(image|image-inline)$/;class ri extends ie{constructor(){super(...arguments);b(this,"_domEmitter",new(Ri()))}static get pluginName(){return"ImageUtils"}static get isOfficialPlugin(){return!0}isImage(e){return this.isInlineImage(e)||this.isBlockImage(e)}isInlineImageView(e){return!!e&&e.is("element","img")}isBlockImageView(e){return!!e&&e.is("element","figure")&&e.hasClass("image")}insertImage(e={},n=null,s=null,r={}){const o=this.editor,a=o.model,l=a.document.selection,c=JL(o,n||l,s);e={...Object.fromEntries(l.getAttributes()),...e};for(const h in e)a.schema.checkAttribute(c,h)||delete e[h];return a.change(h=>{const{setImageSizes:f=!0}=r,m=h.createElement(c,e);return a.insertObject(m,n,null,{setSelection:"on",findOptimalPosition:!n&&c!="imageInline"?"auto":void 0}),m.parent?(f&&this.setImageNaturalSizeAttributes(m),m):null})}setImageNaturalSizeAttributes(e){const n=e.getAttribute("src");n&&(e.getAttribute("width")||e.getAttribute("height")||this.editor.model.change(s=>{const r=new Re.window.Image;this._domEmitter.listenTo(r,"load",()=>{!e.getAttribute("width")&&!e.getAttribute("height")&&this.editor.model.enqueueChange(s.batch,o=>{o.setAttribute("width",r.naturalWidth,e),o.setAttribute("height",r.naturalHeight,e)}),this._domEmitter.stopListening(r,"load")}),r.src=n}))}getClosestSelectedImageWidget(e){const n=e.getFirstPosition();if(!n)return null;const s=e.getSelectedElement();if(s&&this.isImageWidget(s))return s;let r=n.parent;for(;r;){if(r.is("element")&&this.isImageWidget(r))return r;r=r.parent}return null}getClosestSelectedImageElement(e){const n=e.getSelectedElement();return this.isImage(n)?n:e.getFirstPosition().findAncestor("imageBlock")}getImageWidgetFromImageView(e){return e.findAncestor({classes:cge})}isImageAllowed(){const n=this.editor.model.document.selection;return uge(this.editor,n)&&dge(n)}toImageWidget(e,n,s){return n.setCustomProperty("image",!0,e),kC(e,n,{label:()=>{const a=this.findViewImgElement(e).getAttribute("alt");return a?`${a} ${s}`:s}})}isImageWidget(e){return!!e.getCustomProperty("image")&&En(e)}isBlockImage(e){return!!e&&e.is("element","imageBlock")}isInlineImage(e){return!!e&&e.is("element","imageInline")}findViewImgElement(e){if(this.isInlineImageView(e))return e;const n=this.editor.editing.view;for(const{item:s}of n.createRangeIn(e))if(this.isInlineImageView(s))return s}destroy(){return this._domEmitter.stopListening(),super.destroy()}}function uge(i,t){if(JL(i,t,null)=="imageBlock"){const n=hge(t,i.model);if(i.model.schema.checkChild(n,"imageBlock"))return!0}else if(i.model.schema.checkChild(t.focus,"imageInline"))return!0;return!1}function dge(i){return[...i.focus.getAncestors()].every(t=>!t.is("element","imageBlock"))}function hge(i,t){const n=BL(i,t).start.parent;return n.isEmpty&&!n.is("element","$root")?n.parent:n}function JL(i,t,e){const n=i.model.schema,s=i.config.get("image.insert.type");return i.plugins.has("ImageBlockEditing")?i.plugins.has("ImageInlineEditing")?e||(s==="inline"?"imageInline":s!=="auto"?"imageBlock":t.is("selection")?NC(n,t):n.checkChild(t,"imageInline")?"imageInline":"imageBlock"):"imageBlock":"imageInline"}const fge=new RegExp(String(/^(http(s)?:\/\/)?[\w-]+\.[\w.~:/[\]@!$&'()*+,;=%-]+/.source+/\.(jpg|jpeg|png|gif|ico|webp|JPG|JPEG|PNG|GIF|ICO|WEBP)/.source+/(\?[\w.~:/[\]@!$&'()*+,;=%-]*)?/.source+/(#[\w.~:/[\]@!$&'()*+,;=%-]*)?$/.source));class mge extends ie{constructor(e){super(e);b(this,"_timeoutId");b(this,"_positionToInsert");this._timeoutId=null,this._positionToInsert=null}static get requires(){return[PC,ri,RC,co]}static get pluginName(){return"AutoImage"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,n=e.model.document,s=e.plugins.get("ClipboardPipeline");this.listenTo(s,"inputTransformation",()=>{const r=n.selection.getFirstRange(),o=On.fromPosition(r.start);o.stickiness="toPrevious";const a=On.fromPosition(r.end);a.stickiness="toNext",n.once("change:data",()=>{this._embedImageBetweenPositions(o,a),o.detach(),a.detach()},{priority:"high"})}),e.commands.get("undo").on("execute",()=>{this._timeoutId&&(Re.window.clearTimeout(this._timeoutId),this._positionToInsert.detach(),this._timeoutId=null,this._positionToInsert=null)},{priority:"high"})}_embedImageBetweenPositions(e,n){const s=this.editor,r=new ki(e,n),o=r.getWalker({ignoreElementEnd:!0}),a=Object.fromEntries(s.model.document.selection.getAttributes()),l=this.editor.plugins.get("ImageUtils");let c="";for(const h of o)h.item.is("$textProxy")&&(c+=h.item.data);if(c=c.trim(),!c.match(fge)){r.detach();return}this._positionToInsert=On.fromPosition(e),this._timeoutId=setTimeout(()=>{if(!s.commands.get("insertImage").isEnabled){r.detach();return}s.model.change(m=>{this._timeoutId=null,m.remove(r),r.detach();let p;this._positionToInsert.root.rootName!=="$graveyard"&&(p=this._positionToInsert.toPosition()),l.insertImage({...a,src:c},p),this._positionToInsert.detach(),this._positionToInsert=null}),s.plugins.get("Delete").requestUndoOnBackspace()},100)}}class gge extends lt{refresh(){const n=this.editor.plugins.get("ImageUtils").getClosestSelectedImageElement(this.editor.model.document.selection);this.isEnabled=!!n,this.isEnabled&&n.hasAttribute("alt")?this.value=n.getAttribute("alt"):this.value=!1}execute(t){const e=this.editor,n=e.plugins.get("ImageUtils"),s=e.model,r=n.getClosestSelectedImageElement(s.document.selection);s.change(o=>{o.setAttribute("alt",t.newValue,r)})}}class pge extends ie{static get requires(){return[ri]}static get pluginName(){return"ImageTextAlternativeEditing"}static get isOfficialPlugin(){return!0}init(){this.editor.commands.add("imageTextAlternative",new gge(this.editor))}}class bge extends Oe{constructor(e){super(e);b(this,"focusTracker");b(this,"keystrokes");b(this,"labeledInput");b(this,"saveButtonView");b(this,"cancelButtonView");b(this,"_focusables");b(this,"_focusCycler");const n=this.locale.t;this.focusTracker=new ln,this.keystrokes=new wn,this.labeledInput=this._createLabeledInputView(),this.saveButtonView=this._createButton(n("Save"),ke.check,"ck-button-save"),this.saveButtonView.type="submit",this.cancelButtonView=this._createButton(n("Cancel"),ke.cancel,"ck-button-cancel","cancel"),this._focusables=new ai,this._focusCycler=new Oi({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"form",attributes:{class:["ck","ck-text-alternative-form","ck-responsive-form"],tabindex:"-1"},children:[this.labeledInput,this.saveButtonView,this.cancelButtonView]})}render(){super.render(),this.keystrokes.listenTo(this.element),Xa({view:this}),[this.labeledInput,this.saveButtonView,this.cancelButtonView].forEach(e=>{this._focusables.add(e),this.focusTracker.add(e.element)})}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}_createButton(e,n,s,r){const o=new rt(this.locale);return o.set({label:e,icon:n,tooltip:!0}),o.extendTemplate({attributes:{class:s}}),r&&o.delegate("execute").to(this,r),o}_createLabeledInputView(){const e=this.locale.t,n=new Mn(this.locale,$s);return n.label=e("Text alternative"),n}}function wge(i){const t=i.plugins.get("ContextualBalloon");if(i.plugins.get("ImageUtils").getClosestSelectedImageWidget(i.editing.view.document.selection)){const n=MC(i);t.updatePosition(n)}}function MC(i){const t=i.editing.view,e=Ti.defaultPositions,n=i.plugins.get("ImageUtils");return{target:t.domConverter.mapViewToDom(n.getClosestSelectedImageWidget(t.document.selection)),positions:[e.northArrowSouth,e.northArrowSouthWest,e.northArrowSouthEast,e.southArrowNorth,e.southArrowNorthWest,e.southArrowNorthEast,e.viewportStickyNorth]}}class vge extends ie{constructor(){super(...arguments);b(this,"_balloon");b(this,"_form")}static get requires(){return[kr]}static get pluginName(){return"ImageTextAlternativeUI"}static get isOfficialPlugin(){return!0}init(){this._createButton()}destroy(){super.destroy(),this._form&&this._form.destroy()}_createButton(){const e=this.editor,n=e.t;e.ui.componentFactory.add("imageTextAlternative",s=>{const r=e.commands.get("imageTextAlternative"),o=new rt(s);return o.set({label:n("Change image text alternative"),icon:ke.textAlternative,tooltip:!0}),o.bind("isEnabled").to(r,"isEnabled"),o.bind("isOn").to(r,"value",a=>!!a),this.listenTo(o,"execute",()=>{this._showForm()}),o})}_createForm(){const e=this.editor,s=e.editing.view.document,r=e.plugins.get("ImageUtils");this._balloon=this.editor.plugins.get("ContextualBalloon"),this._form=new(cw(bge))(e.locale),this._form.render(),this.listenTo(this._form,"submit",()=>{e.execute("imageTextAlternative",{newValue:this._form.labeledInput.fieldView.element.value}),this._hideForm(!0)}),this.listenTo(this._form,"cancel",()=>{this._hideForm(!0)}),this._form.keystrokes.set("Esc",(o,a)=>{this._hideForm(!0),a()}),this.listenTo(e.ui,"update",()=>{r.getClosestSelectedImageWidget(s.selection)?this._isVisible&&wge(e):this._hideForm(!0)}),Za({emitter:this._form,activator:()=>this._isVisible,contextElements:()=>[this._balloon.view.element],callback:()=>this._hideForm()})}_showForm(){if(this._isVisible)return;this._form||this._createForm();const e=this.editor,n=e.commands.get("imageTextAlternative"),s=this._form.labeledInput;this._form.disableCssTransitions(),this._isInBalloon||this._balloon.add({view:this._form,position:MC(e)}),s.fieldView.value=s.fieldView.element.value=n.value||"",this._form.labeledInput.fieldView.select(),this._form.enableCssTransitions()}_hideForm(e=!1){this._isInBalloon&&(this._form.focusTracker.isFocused&&this._form.saveButtonView.focus(),this._balloon.remove(this._form),e&&this.editor.editing.view.focus())}get _isVisible(){return!!this._balloon&&this._balloon.visibleView===this._form}get _isInBalloon(){return!!this._balloon&&this._balloon.hasView(this._form)}}class LC extends ie{static get requires(){return[pge,vge]}static get pluginName(){return"ImageTextAlternative"}static get isOfficialPlugin(){return!0}}function yge(i){const t=(e,n,s)=>{if(!s.consumable.test(n.viewItem,{name:!0,classes:"image"}))return;const r=i.findViewImgElement(n.viewItem);if(!r||!s.consumable.test(r,{name:!0}))return;s.consumable.consume(n.viewItem,{name:!0,classes:"image"});const o=s.convertItem(r,n.modelCursor),a=Tn(o.modelRange.getItems());if(!a){s.consumable.revert(n.viewItem,{name:!0,classes:"image"});return}s.convertChildren(n.viewItem,a),s.updateConversionResult(a,n)};return e=>{e.on("element:figure",t)}}function QL(i,t){const e=(n,s,r)=>{if(!r.consumable.consume(s.item,n.name))return;const o=r.writer,a=r.mapper.toViewElement(s.item),l=i.findViewImgElement(a);s.attributeNewValue===null?(o.removeAttribute("srcset",l),o.removeAttribute("sizes",l)):s.attributeNewValue&&(o.setAttribute("srcset",s.attributeNewValue,l),o.setAttribute("sizes","100vw",l))};return n=>{n.on(`attribute:srcset:${t}`,e)}}function rb(i,t,e){const n=(s,r,o)=>{if(!o.consumable.consume(r.item,s.name))return;const a=o.writer,l=o.mapper.toViewElement(r.item),c=i.findViewImgElement(l);a.setAttribute(r.attributeKey,r.attributeNewValue||"",c)};return s=>{s.on(`attribute:${e}:${t}`,n)}}class VC extends ho{observe(t){this.listenTo(t,"load",(e,n)=>{const s=n.target;this.checkShouldIgnoreEventFromTarget(s)||s.tagName=="IMG"&&this._fireEvents(n)},{useCapture:!0})}stopObserving(t){this.stopListening(t)}_fireEvents(t){this.isEnabled&&(this.document.fire("layoutChanged"),this.document.fire("imageLoaded",t))}}class _ge extends lt{constructor(t){super(t);const e=t.config.get("image.insert.type");t.plugins.has("ImageBlockEditing")||e==="block"&&Tt("image-block-plugin-required"),t.plugins.has("ImageInlineEditing")||e==="inline"&&Tt("image-inline-plugin-required")}refresh(){const t=this.editor.plugins.get("ImageUtils");this.isEnabled=t.isImageAllowed()}execute(t){const e=Qt(t.source),n=this.editor.model.document.selection,s=this.editor.plugins.get("ImageUtils"),r=Object.fromEntries(n.getAttributes());e.forEach((o,a)=>{const l=n.getSelectedElement();if(typeof o=="string"&&(o={src:o}),a&&l&&s.isImage(l)){const c=this.editor.model.createPositionAfter(l);s.insertImage({...o,...r},c,t.imageType)}else t.breakBlock?s.insertImage({...o,...r},n.getFirstPosition(),t.imageType):s.insertImage({...o,...r},null,t.imageType)})}}class Ege extends lt{constructor(t){super(t),this.decorate("cleanupImage")}refresh(){const e=this.editor.plugins.get("ImageUtils"),n=this.editor.model.document.selection.getSelectedElement();this.isEnabled=e.isImage(n),this.value=this.isEnabled?n.getAttribute("src"):null}execute(t){const e=this.editor.model.document.selection.getSelectedElement(),n=this.editor.plugins.get("ImageUtils");this.editor.model.change(s=>{s.setAttribute("src",t.source,e),this.cleanupImage(s,e),n.setImageNaturalSizeAttributes(e)})}cleanupImage(t,e){t.removeAttribute("srcset",e),t.removeAttribute("sizes",e),t.removeAttribute("sources",e),t.removeAttribute("width",e),t.removeAttribute("height",e),t.removeAttribute("alt",e)}}class eV extends ie{static get requires(){return[ri]}static get pluginName(){return"ImageEditing"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.conversion;t.editing.view.addObserver(VC),e.for("upcast").attributeToAttribute({view:{name:"img",key:"alt"},model:"alt"}).attributeToAttribute({view:{name:"img",key:"srcset"},model:"srcset"});const n=new _ge(t),s=new Ege(t);t.commands.add("insertImage",n),t.commands.add("replaceImageSource",s),t.commands.add("imageInsert",n)}}class tV extends ie{static get requires(){return[ri]}static get pluginName(){return"ImageSizeAttributes"}static get isOfficialPlugin(){return!0}afterInit(){this._registerSchema(),this._registerConverters("imageBlock"),this._registerConverters("imageInline")}_registerSchema(){this.editor.plugins.has("ImageBlockEditing")&&this.editor.model.schema.extend("imageBlock",{allowAttributes:["width","height"]}),this.editor.plugins.has("ImageInlineEditing")&&this.editor.model.schema.extend("imageInline",{allowAttributes:["width","height"]})}_registerConverters(t){const e=this.editor,n=e.plugins.get("ImageUtils"),s=t==="imageBlock"?"figure":"img";e.conversion.for("upcast").attributeToAttribute({view:{name:s,styles:{width:/.+/}},model:{key:"width",value:o=>sb(o)?ib(o.getStyle("width")):null}}).attributeToAttribute({view:{name:s,key:"width"},model:"width"}).attributeToAttribute({view:{name:s,styles:{height:/.+/}},model:{key:"height",value:o=>sb(o)?ib(o.getStyle("height")):null}}).attributeToAttribute({view:{name:s,key:"height"},model:"height"}),e.conversion.for("editingDowncast").add(o=>{r(o,"width","width",!0,!0),r(o,"height","height",!0,!0)}),e.conversion.for("dataDowncast").add(o=>{r(o,"width","width",!1),r(o,"height","height",!1)});function r(o,a,l,c,h=!1){o.on(`attribute:${a}:${t}`,(f,m,p)=>{if(!p.consumable.consume(m.item,f.name))return;const v=p.writer,_=p.mapper.toViewElement(m.item),E=n.findViewImgElement(_);m.attributeNewValue!==null?v.setAttribute(l,m.attributeNewValue,E):v.removeAttribute(l,E);const x=m.item.getAttribute("width"),k=m.item.getAttribute("height"),A=x&&k;if(A&&h&&v.setAttribute("loading","lazy",E),m.item.hasAttribute("sources"))return;const S=m.item.hasAttribute("resizedWidth");t==="imageInline"&&!S&&!c||A&&v.setStyle("aspect-ratio",`${x}/${k}`,E)})}}}class nV extends lt{constructor(e,n){super(e);b(this,"_modelElementName");this._modelElementName=n}refresh(){const n=this.editor.plugins.get("ImageUtils"),s=n.getClosestSelectedImageElement(this.editor.model.document.selection);this._modelElementName==="imageBlock"?this.isEnabled=n.isInlineImage(s):this.isEnabled=n.isBlockImage(s)}execute(e={}){const n=this.editor,s=this.editor.model,r=n.plugins.get("ImageUtils"),o=r.getClosestSelectedImageElement(s.document.selection),a=Object.fromEntries(o.getAttributes());return!a.src&&!a.uploadId?null:s.change(l=>{const{setImageSizes:c=!0}=e,h=Array.from(s.markers).filter(p=>p.getRange().containsItem(o)),f=r.insertImage(a,s.createSelection(o,"on"),this._modelElementName,{setImageSizes:c});if(!f)return null;const m=l.createRangeOn(f);for(const p of h){const v=p.getRange(),_=v.root.rootName!="$graveyard"?v.getJoined(m,!0):m;l.updateMarker(p,{range:_})}return{oldElement:o,newElement:f}})}}class iV extends ie{static get requires(){return[ri]}static get pluginName(){return"ImagePlaceholder"}static get isOfficialPlugin(){return!0}afterInit(){this._setupSchema(),this._setupConversion(),this._setupLoadListener()}_setupSchema(){const t=this.editor.model.schema;t.isRegistered("imageBlock")&&t.extend("imageBlock",{allowAttributes:["placeholder"]}),t.isRegistered("imageInline")&&t.extend("imageInline",{allowAttributes:["placeholder"]})}_setupConversion(){const t=this.editor,e=t.conversion,n=t.plugins.get("ImageUtils");e.for("editingDowncast").add(s=>{s.on("attribute:placeholder",(r,o,a)=>{if(!a.consumable.test(o.item,r.name)||!o.item.is("element","imageBlock")&&!o.item.is("element","imageInline"))return;a.consumable.consume(o.item,r.name);const l=a.writer,c=a.mapper.toViewElement(o.item),h=n.findViewImgElement(c);o.attributeNewValue?(l.addClass("image_placeholder",h),l.setStyle("background-image",`url(${o.attributeNewValue})`,h),l.setCustomProperty("editingPipeline:doNotReuseOnce",!0,h)):(l.removeClass("image_placeholder",h),l.removeStyle("background-image",h))})})}_setupLoadListener(){const t=this.editor,e=t.model,n=t.editing,s=n.view,r=t.plugins.get("ImageUtils");s.addObserver(VC),this.listenTo(s.document,"imageLoaded",(o,a)=>{const l=s.domConverter.mapDomToView(a.target);if(!l)return;const c=r.getImageWidgetFromImageView(l);if(!c)return;const h=n.mapper.toModelElement(c);!h||!h.hasAttribute("placeholder")||e.enqueueChange({isUndoable:!1},f=>{f.removeAttribute("placeholder",h)})})}}class sV extends ie{static get requires(){return[eV,tV,ri,iV,Gs]}static get pluginName(){return"ImageBlockEditing"}static get isOfficialPlugin(){return!0}init(){const t=this.editor;t.model.schema.register("imageBlock",{inheritAllFrom:"$blockObject",allowAttributes:["alt","src","srcset"]}),this._setupConversion(),t.plugins.has("ImageInlineEditing")&&(t.commands.add("imageTypeBlock",new nV(this.editor,"imageBlock")),this._setupClipboardIntegration())}_setupConversion(){const t=this.editor,e=t.t,n=t.conversion,s=t.plugins.get("ImageUtils");n.for("dataDowncast").elementToStructure({model:"imageBlock",view:(r,{writer:o})=>YI(o)}),n.for("editingDowncast").elementToStructure({model:"imageBlock",view:(r,{writer:o})=>s.toImageWidget(YI(o),o,e("image widget"))}),n.for("downcast").add(rb(s,"imageBlock","src")).add(rb(s,"imageBlock","alt")).add(QL(s,"imageBlock")),n.for("upcast").elementToElement({view:XL(t,"imageBlock"),model:(r,{writer:o})=>o.createElement("imageBlock",r.hasAttribute("src")?{src:r.getAttribute("src")}:void 0)}).add(yge(s))}_setupClipboardIntegration(){const t=this.editor,e=t.model,n=t.editing.view,s=t.plugins.get("ImageUtils"),r=t.plugins.get("ClipboardPipeline");this.listenTo(r,"inputTransformation",(o,a)=>{const l=Array.from(a.content.getChildren());let c;if(!l.every(s.isInlineImageView))return;a.targetRanges?c=t.editing.mapper.toModelRange(a.targetRanges[0]):c=e.document.selection.getFirstRange();const h=e.createSelection(c);if(NC(e.schema,h)==="imageBlock"){const f=new Qo(n.document),m=l.map(p=>f.createElement("figure",{class:"image"},p));a.content=f.createDocumentFragment(m)}}),this.listenTo(r,"contentInsertion",(o,a)=>{a.method==="paste"&&e.change(l=>{const c=l.createRangeIn(a.content);for(const h of c.getItems())h.is("element","imageBlock")&&s.setImageNaturalSizeAttributes(h)})})}}class Cge extends Oe{constructor(e,n=[]){super(e);b(this,"focusTracker");b(this,"keystrokes");b(this,"_focusables");b(this,"_focusCycler");b(this,"children");this.focusTracker=new ln,this.keystrokes=new wn,this._focusables=new ai,this.children=this.createCollection(),this._focusCycler=new Oi({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}});for(const s of n)this.children.add(s),this._focusables.add(s),s instanceof aL&&this._focusables.addMany(s.children);this.setTemplate({tag:"form",attributes:{class:["ck","ck-image-insert-form"],tabindex:-1},children:this.children})}render(){super.render(),Xa({view:this});for(const n of this._focusables)this.focusTracker.add(n.element);this.keystrokes.listenTo(this.element);const e=n=>n.stopPropagation();this.keystrokes.set("arrowright",e),this.keystrokes.set("arrowleft",e),this.keystrokes.set("arrowup",e),this.keystrokes.set("arrowdown",e)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}}class bw extends ie{constructor(e){super(e);b(this,"dropdownView");b(this,"_integrations",new Map);e.config.define("image.insert.integrations",["upload","assetManager","url"])}static get pluginName(){return"ImageInsertUI"}static get isOfficialPlugin(){return!0}static get requires(){return[ri]}init(){const e=this.editor,n=e.model.document.selection,s=e.plugins.get("ImageUtils");this.set("isImageSelected",!1),this.listenTo(e.model.document,"change",()=>{this.isImageSelected=s.isImage(n.getSelectedElement())});const r=a=>this._createToolbarComponent(a),o=a=>this._createMenuBarComponent(a);e.ui.componentFactory.add("insertImage",r),e.ui.componentFactory.add("imageInsert",r),e.ui.componentFactory.add("menuBar:insertImage",o)}registerIntegration({name:e,observable:n,buttonViewCreator:s,formViewCreator:r,menuBarButtonViewCreator:o,requiresForm:a=!1,override:l=!1}){this._integrations.has(e)&&!l&&Tt("image-insert-integration-exists",{name:e}),this._integrations.set(e,{observable:n,buttonViewCreator:s,menuBarButtonViewCreator:o,formViewCreator:r,requiresForm:a})}_createToolbarComponent(e){const n=this.editor,s=e.t,r=this._prepareIntegrations();if(!r.length)return null;let o;const a=r[0];if(r.length==1){if(!a.requiresForm)return a.buttonViewCreator(!0);o=a.buttonViewCreator(!0)}else{const h=a.buttonViewCreator(!1);o=new Hf(e,h),o.tooltip=!0,o.bind("label").to(this,"isImageSelected",f=>s(f?"Replace image":"Insert image"))}const l=this.dropdownView=vi(e,o),c=r.map(({observable:h})=>typeof h=="function"?h():h);return l.bind("isEnabled").toMany(c,"isEnabled",(...h)=>h.some(f=>f)),l.once("change:isOpen",()=>{const h=r.flatMap(({formViewCreator:m})=>m(r.length==1)),f=new Cge(n.locale,h);l.panelView.children.add(f)}),l}_createMenuBarComponent(e){const n=e.t,s=this._prepareIntegrations();if(!s.length)return null;const r=s.flatMap(({menuBarButtonViewCreator:l})=>l(s.length==1)),o=new ps(e),a=new Zl(e);o.panelView.children.add(a),o.buttonView.set({icon:ke.image,label:n("Image")});for(const l of r){const c=new ac(e,o);c.children.add(l),a.items.add(c),l.delegate("execute").to(o)}return o}_prepareIntegrations(){const n=this.editor.config.get("image.insert.integrations"),s=[];if(!n.length)return Tt("image-insert-integrations-not-specified"),s;for(const r of n){if(!this._integrations.has(r)){["upload","assetManager","url"].includes(r)||Tt("image-insert-unknown-integration",{item:r});continue}s.push(this._integrations.get(r))}return s.length||Tt("image-insert-integrations-not-registered"),s}}class xge extends ie{static get requires(){return[sV,Uf,LC,bw]}static get pluginName(){return"ImageBlock"}static get isOfficialPlugin(){return!0}}class Tge extends ie{static get requires(){return[eV,tV,ri,iV,Gs]}static get pluginName(){return"ImageInlineEditing"}static get isOfficialPlugin(){return!0}init(){const t=this.editor;t.model.schema.register("imageInline",{inheritAllFrom:"$inlineObject",allowAttributes:["alt","src","srcset"],disallowIn:["caption"]}),this._setupConversion(),t.plugins.has("ImageBlockEditing")&&(t.commands.add("imageTypeInline",new nV(this.editor,"imageInline")),this._setupClipboardIntegration())}_setupConversion(){const t=this.editor,e=t.t,n=t.conversion,s=t.plugins.get("ImageUtils");n.for("dataDowncast").elementToElement({model:"imageInline",view:(r,{writer:o})=>o.createEmptyElement("img")}),n.for("editingDowncast").elementToStructure({model:"imageInline",view:(r,{writer:o})=>s.toImageWidget(lge(o),o,e("image widget"))}),n.for("downcast").add(rb(s,"imageInline","src")).add(rb(s,"imageInline","alt")).add(QL(s,"imageInline")),n.for("upcast").elementToElement({view:XL(t,"imageInline"),model:(r,{writer:o})=>o.createElement("imageInline",r.hasAttribute("src")?{src:r.getAttribute("src")}:void 0)})}_setupClipboardIntegration(){const t=this.editor,e=t.model,n=t.editing.view,s=t.plugins.get("ImageUtils"),r=t.plugins.get("ClipboardPipeline");this.listenTo(r,"inputTransformation",(o,a)=>{const l=Array.from(a.content.getChildren());let c;if(!l.every(s.isBlockImageView))return;a.targetRanges?c=t.editing.mapper.toModelRange(a.targetRanges[0]):c=e.document.selection.getFirstRange();const h=e.createSelection(c);if(NC(e.schema,h)==="imageInline"){const f=new Qo(n.document),m=l.map(p=>p.childCount===1?(Array.from(p.getAttributes()).forEach(v=>f.setAttribute(...v,s.findViewImgElement(p))),p.getChild(0)):p);a.content=f.createDocumentFragment(m)}}),this.listenTo(r,"contentInsertion",(o,a)=>{a.method==="paste"&&e.change(l=>{const c=l.createRangeIn(a.content);for(const h of c.getItems())h.is("element","imageInline")&&s.setImageNaturalSizeAttributes(h)})})}}class kge extends ie{static get requires(){return[Tge,Uf,LC,bw]}static get pluginName(){return"ImageInline"}static get isOfficialPlugin(){return!0}}class rV extends ie{static get pluginName(){return"ImageCaptionUtils"}static get isOfficialPlugin(){return!0}static get requires(){return[ri]}getCaptionFromImageModelElement(t){for(const e of t.getChildren())if(e&&e.is("element","caption"))return e;return null}getCaptionFromModelSelection(t){const e=this.editor.plugins.get("ImageUtils"),n=t.getFirstPosition().findAncestor("caption");return n&&e.isBlockImage(n.parent)?n:null}matchImageCaptionViewElement(t){const e=this.editor.plugins.get("ImageUtils");return t.name=="figcaption"&&e.isBlockImageView(t.parent)?{name:!0}:null}}class Sge extends lt{refresh(){const t=this.editor,e=t.plugins.get("ImageCaptionUtils"),n=t.plugins.get("ImageUtils");if(!t.plugins.has(sV)){this.isEnabled=!1,this.value=!1;return}const s=t.model.document.selection,r=s.getSelectedElement();if(!r){const o=e.getCaptionFromModelSelection(s);this.isEnabled=!!o,this.value=!!o;return}this.isEnabled=n.isImage(r),this.isEnabled?this.value=!!e.getCaptionFromImageModelElement(r):this.value=!1}execute(t={}){const{focusCaptionOnShow:e}=t;this.editor.model.change(n=>{this.value?this._hideImageCaption(n):this._showImageCaption(n,e)})}_showImageCaption(t,e){const s=this.editor.model.document.selection,r=this.editor.plugins.get("ImageCaptionEditing"),o=this.editor.plugins.get("ImageUtils");let a=s.getSelectedElement();const l=r._getSavedCaption(a);o.isInlineImage(a)&&(this.editor.execute("imageTypeBlock"),a=s.getSelectedElement());const c=l||t.createElement("caption");t.append(c,a),e&&t.setSelection(c,"in")}_hideImageCaption(t){const e=this.editor,n=e.model.document.selection,s=e.plugins.get("ImageCaptionEditing"),r=e.plugins.get("ImageCaptionUtils");let o=n.getSelectedElement(),a;o?a=r.getCaptionFromImageModelElement(o):(a=r.getCaptionFromModelSelection(n),o=a.parent),s._saveCaption(o,a),t.setSelection(o,"on"),t.remove(a)}}class Age extends ie{constructor(e){super(e);b(this,"_savedCaptionsMap");this._savedCaptionsMap=new WeakMap}static get requires(){return[ri,rV]}static get pluginName(){return"ImageCaptionEditing"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,n=e.model.schema;n.isRegistered("caption")?n.extend("caption",{allowIn:"imageBlock"}):n.register("caption",{allowIn:"imageBlock",allowContentOf:"$block",isLimit:!0}),e.commands.add("toggleImageCaption",new Sge(this.editor)),this._setupConversion(),this._setupImageTypeCommandsIntegration(),this._registerCaptionReconversion()}_setupConversion(){const e=this.editor,n=e.editing.view,s=e.plugins.get("ImageUtils"),r=e.plugins.get("ImageCaptionUtils"),o=e.t;e.conversion.for("upcast").elementToElement({view:a=>r.matchImageCaptionViewElement(a),model:"caption"}),e.conversion.for("dataDowncast").elementToElement({model:"caption",view:(a,{writer:l})=>s.isBlockImage(a.parent)?l.createContainerElement("figcaption"):null}),e.conversion.for("editingDowncast").elementToElement({model:"caption",view:(a,{writer:l})=>{if(!s.isBlockImage(a.parent))return null;const c=l.createEditableElement("figcaption");l.setCustomProperty("imageCaption",!0,c),c.placeholder=o("Enter image caption"),nC({view:n,element:c,keepOnFocus:!0});const h=a.parent.getAttribute("alt"),f=h?o("Caption for image: %0",[h]):o("Caption for the image");return SC(c,l,{label:f})}})}_setupImageTypeCommandsIntegration(){const e=this.editor,n=e.plugins.get("ImageUtils"),s=e.plugins.get("ImageCaptionUtils"),r=e.commands.get("imageTypeInline"),o=e.commands.get("imageTypeBlock"),a=l=>{if(!l.return)return;const{oldElement:c,newElement:h}=l.return;/* istanbul ignore if: paranoid check -- @preserve */if(!c)return;if(n.isBlockImage(c)){const m=s.getCaptionFromImageModelElement(c);if(m){this._saveCaption(h,m);return}}const f=this._getSavedCaption(c);f&&this._saveCaption(h,f)};r&&this.listenTo(r,"execute",a,{priority:"low"}),o&&this.listenTo(o,"execute",a,{priority:"low"})}_getSavedCaption(e){const n=this._savedCaptionsMap.get(e);return n?fn.fromJSON(n):null}_saveCaption(e,n){this._savedCaptionsMap.set(e,n.toJSON())}_registerCaptionReconversion(){const e=this.editor,n=e.model,s=e.plugins.get("ImageUtils"),r=e.plugins.get("ImageCaptionUtils");n.document.on("change:data",()=>{const o=n.document.differ.getChanges();for(const a of o){if(a.attributeKey!=="alt")continue;const l=a.range.start.nodeAfter;if(s.isBlockImage(l)){const c=r.getCaptionFromImageModelElement(l);if(!c)return;e.editing.reconvertItem(c)}}})}}class Pge extends ie{static get requires(){return[rV]}static get pluginName(){return"ImageCaptionUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.editing.view,n=t.plugins.get("ImageCaptionUtils"),s=t.t;t.ui.componentFactory.add("toggleImageCaption",r=>{const o=t.commands.get("toggleImageCaption"),a=new rt(r);return a.set({icon:ke.caption,tooltip:!0,isToggleable:!0}),a.bind("isOn","isEnabled").to(o,"value","isEnabled"),a.bind("label").to(o,"value",l=>s(l?"Toggle caption off":"Toggle caption on")),this.listenTo(a,"execute",()=>{t.execute("toggleImageCaption",{focusCaptionOnShow:!0});const l=n.getCaptionFromModelSelection(t.model.document.selection);if(l){const c=t.editing.mapper.toViewElement(l);e.scrollToTheSelection(),e.change(h=>{h.addClass("image__caption_highlighted",c)})}t.editing.view.focus()}),a})}}class Ige extends ie{static get requires(){return[Age,Pge]}static get pluginName(){return"ImageCaption"}static get isOfficialPlugin(){return!0}}function oV(i){const t=i.map(e=>e.replace("+","\\+"));return new RegExp(`^image\\/(${t.join("|")})$`)}function Rge(i){return new Promise((t,e)=>{const n=i.getAttribute("src");fetch(n).then(s=>s.blob()).then(s=>{const r=aV(s,n),a=`image.${r.replace("image/","")}`,l=new File([s],a,{type:r});t(l)}).catch(s=>s&&s.name==="TypeError"?Nge(n).then(t).catch(e):e(s))})}function Oge(i,t){return!i.isInlineImageView(t)||!t.getAttribute("src")?!1:!!t.getAttribute("src").match(/^data:image\/\w+;base64,/g)||!!t.getAttribute("src").match(/^blob:/g)}function aV(i,t){return i.type?i.type:t.match(/data:(image\/\w+);base64/)?t.match(/data:(image\/\w+);base64/)[1].toLowerCase():"image/jpeg"}function Nge(i){return Mge(i).then(t=>{const e=aV(t,i),s=`image.${e.replace("image/","")}`;return new File([t],s,{type:e})})}function Mge(i){return new Promise((t,e)=>{const n=Re.document.createElement("img");n.addEventListener("load",()=>{const s=Re.document.createElement("canvas");s.width=n.width,s.height=n.height,s.getContext("2d").drawImage(n,0,0),s.toBlob(o=>o?t(o):e())}),n.addEventListener("error",()=>e()),n.src=i})}class Lge extends ie{static get pluginName(){return"ImageUploadUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor;t.ui.componentFactory.add("uploadImage",()=>this._createToolbarButton()),t.ui.componentFactory.add("imageUpload",()=>this._createToolbarButton()),t.ui.componentFactory.add("menuBar:uploadImage",()=>this._createMenuBarButton("standalone")),t.plugins.has("ImageInsertUI")&&t.plugins.get("ImageInsertUI").registerIntegration({name:"upload",observable:()=>t.commands.get("uploadImage"),buttonViewCreator:()=>this._createToolbarButton(),formViewCreator:()=>this._createDropdownButton(),menuBarButtonViewCreator:e=>this._createMenuBarButton(e?"insertOnly":"insertNested")})}_createButton(t){const e=this.editor,n=e.locale,s=e.commands.get("uploadImage"),r=e.config.get("image.upload.types"),o=oV(r),a=new t(e.locale),l=n.t;return a.set({acceptedType:r.map(c=>`image/${c}`).join(","),allowMultipleFiles:!0,label:l("Upload from computer"),icon:ke.imageUpload}),a.bind("isEnabled").to(s),a.on("done",(c,h)=>{const f=Array.from(h).filter(m=>o.test(m.type));f.length&&(e.execute("uploadImage",{file:f}),e.editing.view.focus())}),a}_createToolbarButton(){const t=this.editor.locale.t,e=this.editor.plugins.get("ImageInsertUI"),n=this.editor.commands.get("uploadImage"),s=this._createButton(tI);return s.tooltip=!0,s.bind("label").to(e,"isImageSelected",n,"isAccessAllowed",(r,o)=>t(o?r?"Replace image from computer":"Upload image from computer":"You have no image upload permissions.")),s}_createDropdownButton(){const t=this.editor.locale.t,e=this.editor.plugins.get("ImageInsertUI"),n=this._createButton(tI);return n.withText=!0,n.bind("label").to(e,"isImageSelected",s=>t(s?"Replace from computer":"Upload from computer")),n.on("execute",()=>{e.dropdownView.isOpen=!1}),n}_createMenuBarButton(t){const e=this.editor.locale.t,n=this._createButton(kL);switch(n.withText=!0,t){case"standalone":n.label=e("Image from computer");break;case"insertOnly":n.label=e("Image");break;case"insertNested":n.label=e("From computer");break}return n}}class Vge extends ie{constructor(e){super(e);b(this,"placeholder");b(this,"uploadStatusChange",(e,n,s)=>{const r=this.editor,o=n.item,a=o.getAttribute("uploadId");if(!s.consumable.consume(n.item,e.name))return;const l=r.plugins.get("ImageUtils"),c=r.plugins.get(yu),h=a?n.attributeNewValue:null,f=this.placeholder,m=r.editing.mapper.toViewElement(o),p=s.writer;if(h=="reading"){ZI(m,p),XI(l,f,m,p);return}if(h=="uploading"){const v=c.loaders.get(a);ZI(m,p),v?(JI(m,p),Bge(m,p,v,r.editing.view),Hge(l,m,p,v)):XI(l,f,m,p);return}h=="complete"&&c.loaders.get(a)&&$ge(m,p,r.editing.view),Fge(m,p),JI(m,p),Dge(m,p)});this.placeholder="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="}static get pluginName(){return"ImageUploadProgress"}static get isOfficialPlugin(){return!0}init(){const e=this.editor;e.plugins.has("ImageBlockEditing")&&e.editing.downcastDispatcher.on("attribute:uploadStatus:imageBlock",this.uploadStatusChange),e.plugins.has("ImageInlineEditing")&&e.editing.downcastDispatcher.on("attribute:uploadStatus:imageInline",this.uploadStatusChange)}}function ZI(i,t){i.hasClass("ck-appear")||t.addClass("ck-appear",i)}function Dge(i,t){t.removeClass("ck-appear",i)}function XI(i,t,e,n){e.hasClass("ck-image-upload-placeholder")||n.addClass("ck-image-upload-placeholder",e);const s=i.findViewImgElement(e);s.getAttribute("src")!==t&&n.setAttribute("src",t,s),lV(e,"placeholder")||n.insert(n.createPositionAfter(s),jge(n))}function JI(i,t){i.hasClass("ck-image-upload-placeholder")&&t.removeClass("ck-image-upload-placeholder",i),cV(i,t,"placeholder")}function Bge(i,t,e,n){const s=zge(t);t.insert(t.createPositionAt(i,"end"),s),e.on("change:uploadedPercent",(r,o,a)=>{n.change(l=>{l.setStyle("width",a+"%",s)})})}function Fge(i,t){cV(i,t,"progressBar")}function $ge(i,t,e){const n=t.createUIElement("div",{class:"ck-image-upload-complete-icon"});t.insert(t.createPositionAt(i,"end"),n),setTimeout(()=>{e.change(s=>s.remove(s.createRangeOn(n)))},3e3)}function zge(i){const t=i.createUIElement("div",{class:"ck-progress-bar"});return i.setCustomProperty("progressBar",!0,t),t}function jge(i){const t=i.createUIElement("div",{class:"ck-upload-placeholder-loader"});return i.setCustomProperty("placeholder",!0,t),t}function lV(i,t){for(const e of i.getChildren())if(e.getCustomProperty(t))return e}function cV(i,t,e){const n=lV(i,e);n&&t.remove(t.createRangeOn(n))}function Hge(i,t,e,n){if(n.data){const s=i.findViewImgElement(t);e.setAttribute("src",n.data,s)}}class Uge extends lt{constructor(t){super(t),this.set("isAccessAllowed",!0)}refresh(){const t=this.editor,e=t.plugins.get("ImageUtils"),n=t.model.document.selection.getSelectedElement();this.isEnabled=e.isImageAllowed()||e.isImage(n)}execute(t){const e=Qt(t.file),n=this.editor.model.document.selection,s=this.editor.plugins.get("ImageUtils"),r=Object.fromEntries(n.getAttributes());e.forEach((o,a)=>{const l=n.getSelectedElement();if(a&&l&&s.isImage(l)){const c=this.editor.model.createPositionAfter(l);this._uploadImage(o,r,c)}else this._uploadImage(o,r)})}_uploadImage(t,e,n){const s=this.editor,o=s.plugins.get(yu).createLoader(t),a=s.plugins.get("ImageUtils");o&&a.insertImage({...e,uploadId:o.id},n)}}class Wge extends ie{constructor(e){super(e);b(this,"_uploadImageElements");b(this,"_uploadedImages",new Map);e.config.define("image",{upload:{types:["jpeg","png","gif","bmp","webp","tiff"]}}),this._uploadImageElements=new Map}static get requires(){return[yu,hI,Gs,ri]}static get pluginName(){return"ImageUploadEditing"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,n=e.model.document,s=e.conversion,r=e.plugins.get(yu),o=e.plugins.get("ImageUtils"),a=e.plugins.get("ClipboardPipeline"),l=oV(e.config.get("image.upload.types")),c=new Uge(e);e.commands.add("uploadImage",c),e.commands.add("imageUpload",c),s.for("upcast").attributeToAttribute({view:{name:"img",key:"uploadId"},model:"uploadId"}).add(h=>h.on("element:img",(f,m,p)=>{if(!p.consumable.test(m.viewItem,{attributes:["data-ck-upload-id"]}))return;const v=m.viewItem.getAttribute("data-ck-upload-id");if(!v)return;const[_]=Array.from(m.modelRange.getItems({shallow:!0})),E=r.loaders.get(v);_&&(p.writer.setAttribute("uploadId",v,_),p.consumable.consume(m.viewItem,{attributes:["data-ck-upload-id"]}),E&&E.data&&p.writer.setAttribute("uploadStatus",E.status,_))},{priority:"low"})),this.listenTo(e.editing.view.document,"clipboardInput",(h,f)=>{if(qge(f.dataTransfer))return;const m=Array.from(f.dataTransfer.files).filter(v=>v?l.test(v.type):!1);if(!m.length)return;if(h.stop(),e.model.change(v=>{f.targetRanges&&v.setSelection(f.targetRanges.map(_=>e.editing.mapper.toModelRange(_))),e.execute("uploadImage",{file:m})}),!e.commands.get("uploadImage").isAccessAllowed){const v=e.plugins.get("Notification"),_=e.locale.t;v.showWarning(_("You have no image upload permissions."),{namespace:"image"})}}),this.listenTo(a,"inputTransformation",(h,f)=>{const m=Array.from(e.editing.view.createRangeIn(f.content)).map(v=>v.item).filter(v=>Oge(o,v)&&!v.getAttribute("uploadProcessed")).map(v=>({promise:Rge(v),imageElement:v}));if(!m.length)return;const p=new Qo(e.editing.view.document);for(const v of m){p.setAttribute("uploadProcessed",!0,v.imageElement);const _=r.createLoader(v.promise);_&&(p.setAttribute("src","",v.imageElement),p.setAttribute("uploadId",_.id,v.imageElement))}}),e.editing.view.document.on("dragover",(h,f)=>{f.preventDefault()}),n.on("change",()=>{const h=n.differ.getChanges({includeChangesInGraveyard:!0}).reverse(),f=new Set;for(const m of h)if(m.type=="insert"&&m.name!="$text"){const p=m.position.nodeAfter,v=m.position.root.rootName=="$graveyard";for(const _ of Gge(e,p)){const E=_.getAttribute("uploadId");if(!E)continue;const x=r.loaders.get(E);if(!x){!v&&this._uploadedImages.has(E)&&e.model.enqueueChange({isUndoable:!1},k=>{k.setAttribute("uploadStatus","complete",_),this.fire("uploadComplete",{data:this._uploadedImages.get(E),imageElement:_})});continue}v?f.has(E)||Array.from(this._uploadImageElements.get(E)).every(A=>A.root.rootName=="$graveyard")&&x.abort():(f.add(E),this._uploadImageElements.has(E)?this._uploadImageElements.get(E).add(_):this._uploadImageElements.set(E,new Set([_])),x.status=="idle"&&this._readAndUpload(x))}}}),this.on("uploadComplete",(h,{imageElement:f,data:m})=>{const p=m.urls?m.urls:m;this.editor.model.change(v=>{v.setAttribute("src",p.default,f),this._parseAndSetSrcsetAttributeOnImage(p,f,v),o.setImageNaturalSizeAttributes(f)})},{priority:"low"})}afterInit(){const e=this.editor.model.schema;this.editor.plugins.has("ImageBlockEditing")&&(e.extend("imageBlock",{allowAttributes:["uploadId","uploadStatus"]}),this._registerConverters("imageBlock")),this.editor.plugins.has("ImageInlineEditing")&&(e.extend("imageInline",{allowAttributes:["uploadId","uploadStatus"]}),this._registerConverters("imageInline"))}_readAndUpload(e){const n=this.editor,s=n.model,r=n.locale.t,o=n.plugins.get(yu),a=n.plugins.get(hI),l=n.plugins.get("ImageUtils"),c=this._uploadImageElements;return s.enqueueChange({isUndoable:!1},f=>{const m=c.get(e.id);for(const p of m)f.setAttribute("uploadStatus","reading",p)}),e.read().then(()=>{const f=e.upload();n.ui&&n.ui.ariaLiveAnnouncer.announce(r("Uploading image"));for(const m of c.get(e.id)){/* istanbul ignore next -- @preserve */if(Xe.isSafari){const p=n.editing.mapper.toViewElement(m),v=l.findViewImgElement(p);n.editing.view.once("render",()=>{if(!v.parent)return;const _=n.editing.view.domConverter.mapViewToDom(v.parent);if(!_)return;const E=_.style.display;_.style.display="none",_._ckHack=_.offsetHeight,_.style.display=E})}s.enqueueChange({isUndoable:!1},p=>{p.setAttribute("uploadStatus","uploading",m)})}return f}).then(f=>{s.enqueueChange({isUndoable:!1},m=>{for(const p of c.get(e.id))m.setAttribute("uploadStatus","complete",p),this.fire("uploadComplete",{data:f,imageElement:p});n.ui&&n.ui.ariaLiveAnnouncer.announce(r("Image upload complete")),this._uploadedImages.set(e.id,f)}),h()}).catch(f=>{if(n.ui&&n.ui.ariaLiveAnnouncer.announce(r("Error during image upload")),e.status!=="error"&&e.status!=="aborted")throw f;e.status=="error"&&f&&a.showWarning(f,{title:r("Upload failed"),namespace:"upload"}),s.enqueueChange({isUndoable:!1},m=>{for(const p of c.get(e.id))p.root.rootName!=="$graveyard"&&m.remove(p)}),h()});function h(){s.enqueueChange({isUndoable:!1},f=>{for(const m of c.get(e.id))f.removeAttribute("uploadId",m),f.removeAttribute("uploadStatus",m);c.delete(e.id)}),o.destroyLoader(e)}}_parseAndSetSrcsetAttributeOnImage(e,n,s){let r=0;const o=Object.keys(e).filter(a=>{const l=parseInt(a,10);if(!isNaN(l))return r=Math.max(r,l),!0}).map(a=>`${e[a]} ${a}w`).join(", ");if(o!=""){const a={srcset:o};!n.hasAttribute("width")&&!n.hasAttribute("height")&&(a.width=r),s.setAttributes(a,n)}}_registerConverters(e){const{conversion:n,plugins:s}=this.editor,r=s.get(yu),o=s.get(ri);n.for("dataDowncast").add(a=>{a.on(`attribute:uploadId:${e}`,(l,c,h)=>{if(!h.consumable.test(c.item,l.name))return;const f=r.loaders.get(c.attributeNewValue);if(!f||!f.data)return null;const m=h.mapper.toViewElement(c.item),p=o.findViewImgElement(m);p&&(h.consumable.consume(c.item,l.name),h.writer.setAttribute("data-ck-upload-id",f.id,p))})})}}function qge(i){return Array.from(i.types).includes("text/html")&&i.getData("text/html")!==""}function Gge(i,t){const e=i.plugins.get("ImageUtils");return Array.from(i.model.createRangeOn(t)).filter(n=>e.isImage(n.item)).map(n=>n.item)}class Kge extends ie{static get pluginName(){return"ImageUpload"}static get isOfficialPlugin(){return!0}static get requires(){return[Wge,Lge,Vge]}}class Yge extends Oe{constructor(e){super(e);b(this,"urlInputView");b(this,"keystrokes");this.set("imageURLInputValue",""),this.set("isImageSelected",!1),this.set("isEnabled",!0),this.keystrokes=new wn,this.urlInputView=this._createUrlInputView(),this.setTemplate({tag:"form",attributes:{class:["ck","ck-image-insert-url"],tabindex:"-1"},children:[this.urlInputView,{tag:"div",attributes:{class:["ck","ck-image-insert-url__action-row"]}}]})}render(){super.render(),Xa({view:this}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.keystrokes.destroy()}_createUrlInputView(){const e=this.locale,n=e.t,s=new Mn(e,$s);return s.bind("label").to(this,"isImageSelected",r=>n(r?"Update image URL":"Insert image via URL")),s.bind("isEnabled").to(this),s.fieldView.inputMode="url",s.fieldView.placeholder="https://example.com/image.png",s.fieldView.bind("value").to(this,"imageURLInputValue",r=>r||""),s.fieldView.on("input",()=>{this.imageURLInputValue=s.fieldView.element.value.trim()}),s}focus(){this.urlInputView.focus()}}class Zge extends ie{constructor(){super(...arguments);b(this,"_imageInsertUI");b(this,"_formView")}static get pluginName(){return"ImageInsertViaUrlUI"}static get isOfficialPlugin(){return!0}static get requires(){return[bw,hf]}init(){this.editor.ui.componentFactory.add("insertImageViaUrl",()=>this._createToolbarButton()),this.editor.ui.componentFactory.add("menuBar:insertImageViaUrl",()=>this._createMenuBarButton("standalone"))}afterInit(){this._imageInsertUI=this.editor.plugins.get("ImageInsertUI"),this._imageInsertUI.registerIntegration({name:"url",observable:()=>this.editor.commands.get("insertImage"),buttonViewCreator:()=>this._createToolbarButton(),formViewCreator:()=>this._createDropdownButton(),menuBarButtonViewCreator:e=>this._createMenuBarButton(e?"insertOnly":"insertNested")})}_createInsertUrlButton(e){const n=new e(this.editor.locale);return n.icon=ke.imageUrl,n.on("execute",()=>{this._showModal()}),n}_createToolbarButton(){const e=this.editor.locale.t,n=this._createInsertUrlButton(rt);return n.tooltip=!0,n.bind("label").to(this._imageInsertUI,"isImageSelected",s=>e(s?"Update image URL":"Insert image via URL")),n}_createDropdownButton(){const e=this.editor.locale.t,n=this._createInsertUrlButton(rt);return n.withText=!0,n.bind("label").to(this._imageInsertUI,"isImageSelected",s=>e(s?"Update image URL":"Insert via URL")),n}_createMenuBarButton(e){const n=this.editor.locale.t,s=this._createInsertUrlButton(Xn);switch(s.withText=!0,e){case"standalone":s.label=n("Image via URL");break;case"insertOnly":s.label=n("Image");break;case"insertNested":s.label=n("Via URL");break}return s}_createInsertUrlView(){const e=this.editor,n=e.locale,s=e.commands.get("replaceImageSource"),r=e.commands.get("insertImage"),o=new Yge(n);return o.bind("isImageSelected").to(this._imageInsertUI),o.bind("isEnabled").toMany([r,s],"isEnabled",(...a)=>a.some(l=>l)),o}_showModal(){const e=this.editor,s=e.locale.t,r=e.plugins.get("Dialog");this._formView||(this._formView=this._createInsertUrlView(),this._formView.on("submit",()=>this._handleSave()));const o=e.commands.get("replaceImageSource");this._formView.imageURLInputValue=o.value||"",r.show({id:"insertImageViaUrl",title:this._imageInsertUI.isImageSelected?s("Update image URL"):s("Insert image via URL"),isModal:!0,content:this._formView,actionButtons:[{label:s("Cancel"),withText:!0,onExecute:()=>r.hide()},{label:s("Accept"),class:"ck-button-action",withText:!0,onExecute:()=>this._handleSave()}]})}_handleSave(){this.editor.commands.get("replaceImageSource").isEnabled?this.editor.execute("replaceImageSource",{source:this._formView.imageURLInputValue}):this.editor.execute("insertImage",{source:this._formView.imageURLInputValue}),this.editor.plugins.get("Dialog").hide()}}class Xge extends ie{static get pluginName(){return"ImageInsertViaUrl"}static get isOfficialPlugin(){return!0}static get requires(){return[Zge,bw]}}class Jge extends lt{refresh(){const t=this.editor,n=t.plugins.get("ImageUtils").getClosestSelectedImageElement(t.model.document.selection);this.isEnabled=!!n,!n||!n.hasAttribute("resizedWidth")?this.value=null:this.value={width:n.getAttribute("resizedWidth"),height:null}}execute(t){const e=this.editor,n=e.model,s=e.plugins.get("ImageUtils"),r=s.getClosestSelectedImageElement(n.document.selection);this.value={width:t.width,height:null},r&&n.change(o=>{o.setAttribute("resizedWidth",t.width,r),o.removeAttribute("resizedHeight",r),s.setImageNaturalSizeAttributes(r)})}}class uV extends ie{static get requires(){return[ri]}static get pluginName(){return"ImageResizeEditing"}static get isOfficialPlugin(){return!0}constructor(t){super(t),t.config.define("image",{resizeUnit:"%",resizeOptions:[{name:"resizeImage:original",value:null,icon:"original"},{name:"resizeImage:custom",value:"custom",icon:"custom"},{name:"resizeImage:25",value:"25",icon:"small"},{name:"resizeImage:50",value:"50",icon:"medium"},{name:"resizeImage:75",value:"75",icon:"large"}]})}init(){const t=this.editor,e=new Jge(t);this._registerConverters("imageBlock"),this._registerConverters("imageInline"),t.commands.add("resizeImage",e),t.commands.add("imageResize",e)}afterInit(){this._registerSchema()}_registerSchema(){this.editor.plugins.has("ImageBlockEditing")&&this.editor.model.schema.extend("imageBlock",{allowAttributes:["resizedWidth","resizedHeight"]}),this.editor.plugins.has("ImageInlineEditing")&&this.editor.model.schema.extend("imageInline",{allowAttributes:["resizedWidth","resizedHeight"]})}_registerConverters(t){const e=this.editor,n=e.plugins.get("ImageUtils");e.conversion.for("downcast").add(s=>s.on(`attribute:resizedWidth:${t}`,(r,o,a)=>{if(!a.consumable.consume(o.item,r.name))return;const l=a.writer,c=a.mapper.toViewElement(o.item);o.attributeNewValue!==null?(l.setStyle("width",o.attributeNewValue,c),l.addClass("image_resized",c)):(l.removeStyle("width",c),l.removeClass("image_resized",c))})),e.conversion.for("dataDowncast").attributeToAttribute({model:{name:t,key:"resizedHeight"},view:s=>({key:"style",value:{height:s}})}),e.conversion.for("editingDowncast").add(s=>s.on(`attribute:resizedHeight:${t}`,(r,o,a)=>{if(!a.consumable.consume(o.item,r.name))return;const l=a.writer,c=a.mapper.toViewElement(o.item),h=t==="imageInline"?n.findViewImgElement(c):c;o.attributeNewValue!==null?l.setStyle("height",o.attributeNewValue,h):l.removeStyle("height",h)})),e.conversion.for("upcast").attributeToAttribute({view:{name:t==="imageBlock"?"figure":"img",styles:{width:/.+/}},model:{key:"resizedWidth",value:s=>sb(s)?null:s.getStyle("width")}}),e.conversion.for("upcast").attributeToAttribute({view:{name:t==="imageBlock"?"figure":"img",styles:{height:/.+/}},model:{key:"resizedHeight",value:s=>sb(s)?null:s.getStyle("height")}})}}const H1={small:ke.objectSizeSmall,medium:ke.objectSizeMedium,large:ke.objectSizeLarge,custom:ke.objectSizeCustom,original:ke.objectSizeFull};class Qge extends ie{constructor(e){super(e);b(this,"_resizeUnit");this._resizeUnit=e.config.get("image.resizeUnit")}static get requires(){return[uV]}static get pluginName(){return"ImageResizeButtons"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,n=e.config.get("image.resizeOptions"),s=e.commands.get("resizeImage");this.bind("isEnabled").to(s);for(const r of n)this._registerImageResizeButton(r);this._registerImageResizeDropdown(n)}_registerImageResizeButton(e){const n=this.editor,{name:s,value:r,icon:o}=e;n.ui.componentFactory.add(s,a=>{const l=new rt(a),c=n.commands.get("resizeImage"),h=this._getOptionLabelValue(e,!0);if(!H1[o])throw new B("imageresizebuttons-missing-icon",n,e);if(l.set({label:h,icon:H1[o],tooltip:h,isToggleable:!0}),l.bind("isEnabled").to(this),n.plugins.has("ImageCustomResizeUI")&&lh(e)){const f=n.plugins.get("ImageCustomResizeUI");this.listenTo(l,"execute",()=>{f._showForm(this._resizeUnit)})}else{const f=r?r+this._resizeUnit:null;l.bind("isOn").to(c,"value",g_(f)),this.listenTo(l,"execute",()=>{n.execute("resizeImage",{width:f})})}return l})}_registerImageResizeDropdown(e){const n=this.editor,s=n.t,r=e.find(a=>!a.value),o=a=>{const l=n.commands.get("resizeImage"),c=vi(a,fL),h=c.buttonView,f=s("Resize image");return h.set({tooltip:f,commandValue:r.value,icon:H1.medium,isToggleable:!0,label:this._getOptionLabelValue(r),withText:!0,class:"ck-resize-image-button",ariaLabel:f,ariaLabelledBy:void 0}),h.bind("label").to(l,"value",m=>m&&m.width?m.width:this._getOptionLabelValue(r)),c.bind("isEnabled").to(this),oc(c,()=>this._getResizeDropdownListItemDefinitions(e,l),{ariaLabel:s("Image resize list"),role:"menu"}),this.listenTo(c,"execute",m=>{"onClick"in m.source?m.source.onClick():(n.execute(m.source.commandName,{width:m.source.commandValue}),n.editing.view.focus())}),c};n.ui.componentFactory.add("resizeImage",o),n.ui.componentFactory.add("imageResize",o)}_getOptionLabelValue(e,n=!1){const s=this.editor.t;return e.label?e.label:n?lh(e)?s("Custom image size"):e.value?s("Resize image to %0",e.value+this._resizeUnit):s("Resize image to the original size"):lh(e)?s("Custom"):e.value?e.value+this._resizeUnit:s("Original")}_getResizeDropdownListItemDefinitions(e,n){const{editor:s}=this,r=new oi,o=e.map(a=>lh(a)?{...a,valueWithUnits:"custom"}:a.value?{...a,valueWithUnits:`${a.value}${this._resizeUnit}`}:{...a,valueWithUnits:null});for(const a of o){let l=null;if(s.plugins.has("ImageCustomResizeUI")&&lh(a)){const c=s.plugins.get("ImageCustomResizeUI");l={type:"button",model:new Yl({label:this._getOptionLabelValue(a),role:"menuitemradio",withText:!0,icon:null,onClick:()=>{c._showForm(this._resizeUnit)}})};const h=Wne(o,"valueWithUnits");l.model.bind("isOn").to(n,"value",epe(h))}else l={type:"button",model:new Yl({commandName:"resizeImage",commandValue:a.valueWithUnits,label:this._getOptionLabelValue(a),role:"menuitemradio",withText:!0,icon:null})},l.model.bind("isOn").to(n,"value",g_(a.valueWithUnits));l.model.bind("isEnabled").to(n,"isEnabled"),r.add(l)}return r}}function lh(i){return i.value==="custom"}function g_(i){return t=>{const e=t;return i===null&&e===i?!0:e!==null&&e.width===i}}function epe(i){return t=>!i.some(e=>g_(e)(t))}const tpe="figure.image.ck-widget > img,figure.image.ck-widget > picture > img,figure.image.ck-widget > a > img,figure.image.ck-widget > a > picture > img,span.image-inline.ck-widget > img,span.image-inline.ck-widget > picture > img",U1="image_resized";class npe extends ie{static get requires(){return[z1,ri]}static get pluginName(){return"ImageResizeHandles"}static get isOfficialPlugin(){return!0}init(){const t=this.editor.commands.get("resizeImage");this.bind("isEnabled").to(t),this._setupResizerCreator()}_setupResizerCreator(){const t=this.editor,e=t.editing.view,n=t.plugins.get("ImageUtils");e.addObserver(VC),this.listenTo(e.document,"imageLoaded",(s,r)=>{if(!r.target.matches(tpe))return;const o=t.editing.view.domConverter,a=o.domToView(r.target),l=n.getImageWidgetFromImageView(a);let c=this.editor.plugins.get(z1).getResizerByViewElement(l);if(c){c.redraw();return}const h=t.editing.mapper,f=h.toModelElement(l);c=t.plugins.get(z1).attachTo({unit:t.config.get("image.resizeUnit"),modelElement:f,viewElement:l,editor:t,getHandleHost(m){return m.querySelector("img")},getResizeHost(){return o.mapViewToDom(h.toViewElement(f))},isCentered(){return f.getAttribute("imageStyle")=="alignCenter"},onCommit(m){e.change(p=>{p.removeClass(U1,l)}),t.execute("resizeImage",{width:m})}}),c.on("updateSize",()=>{l.hasClass(U1)||e.change(p=>{p.addClass(U1,l)});const m=f.name==="imageInline"?a:l;m.getStyle("height")&&e.change(p=>{p.removeStyle("height",m)})}),c.bind("isEnabled").to(this)})}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function dV(i){if(!i)return null;const[,t,e]=i.trim().match(/([.,\d]+)(%|px)$/)||[],n=Number.parseFloat(t);return Number.isNaN(n)?null:{value:n,unit:e}}function hV(i,t,e){return e==="px"?{value:t.value,unit:"px"}:{value:t.value/i*100,unit:"%"}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function fV(i){const{editing:t}=i,n=i.plugins.get("ImageUtils").getClosestSelectedImageElement(i.model.document.selection);if(!n)return null;const s=t.mapper.toViewElement(n),r=t.view.domConverter.mapViewToDom(s);return{model:n,view:s,dom:r}}function ipe(i,t){const e=fV(i);if(!e)return null;const n=dV(e.model.getAttribute("resizedWidth")||null);if(!n)return null;if(n.unit===t)return n;const s=AC(e.dom),r={value:new at(e.dom).width};return hV(s,r,t)}class spe extends Oe{constructor(e,n,s){super(e);b(this,"focusTracker");b(this,"keystrokes");b(this,"unit");b(this,"labeledInput");b(this,"saveButtonView");b(this,"cancelButtonView");b(this,"_focusables");b(this,"_focusCycler");b(this,"_validators");const r=this.locale.t;this.focusTracker=new ln,this.keystrokes=new wn,this.unit=n,this.labeledInput=this._createLabeledInputView(),this.saveButtonView=this._createButton(r("Save"),ke.check,"ck-button-save"),this.saveButtonView.type="submit",this.cancelButtonView=this._createButton(r("Cancel"),ke.cancel,"ck-button-cancel","cancel"),this._focusables=new ai,this._validators=s,this._focusCycler=new Oi({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"form",attributes:{class:["ck","ck-image-custom-resize-form","ck-responsive-form"],tabindex:"-1"},children:[this.labeledInput,this.saveButtonView,this.cancelButtonView]})}render(){super.render(),this.keystrokes.listenTo(this.element),Xa({view:this}),[this.labeledInput,this.saveButtonView,this.cancelButtonView].forEach(e=>{this._focusables.add(e),this.focusTracker.add(e.element)})}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}_createButton(e,n,s,r){const o=new rt(this.locale);return o.set({label:e,icon:n,tooltip:!0}),o.extendTemplate({attributes:{class:s}}),r&&o.delegate("execute").to(this,r),o}_createLabeledInputView(){const e=this.locale.t,n=new Mn(this.locale,wL);return n.label=e("Resize image (in %0)",this.unit),n.fieldView.set({step:.1}),n}isValid(){this.resetFormStatus();for(const e of this._validators){const n=e(this);if(n)return this.labeledInput.errorText=n,!1}return!0}resetFormStatus(){this.labeledInput.errorText=null}get rawSize(){const{element:e}=this.labeledInput.fieldView;return e?e.value:null}get parsedSize(){const{rawSize:e}=this;if(e===null)return null;const n=Number.parseFloat(e);return Number.isNaN(n)?null:n}get sizeWithUnits(){const{parsedSize:e,unit:n}=this;return e===null?null:`${e}${n}`}}function rpe(i,t){const e=fV(i);if(!e)return null;const n=AC(e.dom),s=dV(window.getComputedStyle(e.dom).minWidth)||{value:1},r=Math.max(.1,hV(n,s,t).value);return{unit:t,lower:r,upper:t==="px"?n:100}}class ope extends ie{constructor(){super(...arguments);b(this,"_balloon");b(this,"_form")}static get requires(){return[kr]}static get pluginName(){return"ImageCustomResizeUI"}static get isOfficialPlugin(){return!0}destroy(){super.destroy(),this._form&&this._form.destroy()}_createForm(e){const n=this.editor;this._balloon=this.editor.plugins.get("ContextualBalloon"),this._form=new(cw(spe))(n.locale,e,ape(n)),this._form.render(),this.listenTo(this._form,"submit",()=>{this._form.isValid()&&(n.execute("resizeImage",{width:this._form.sizeWithUnits}),this._hideForm(!0))}),this.listenTo(this._form.labeledInput,"change:errorText",()=>{n.ui.update()}),this.listenTo(this._form,"cancel",()=>{this._hideForm(!0)}),this._form.keystrokes.set("Esc",(s,r)=>{this._hideForm(!0),r()}),Za({emitter:this._form,activator:()=>this._isVisible,contextElements:()=>[this._balloon.view.element],callback:()=>this._hideForm()})}_showForm(e){if(this._isVisible)return;this._form||this._createForm(e);const n=this.editor,s=this._form.labeledInput;this._form.disableCssTransitions(),this._form.resetFormStatus(),this._isInBalloon||this._balloon.add({view:this._form,position:MC(n)});const r=ipe(n,e),o=r?r.value.toFixed(1):"",a=rpe(n,e);s.fieldView.value=s.fieldView.element.value=o,a&&Object.assign(s.fieldView,{min:a.lower.toFixed(1),max:Math.ceil(a.upper).toFixed(1)}),this._form.labeledInput.fieldView.select(),this._form.enableCssTransitions()}_hideForm(e=!1){this._isInBalloon&&(this._form.focusTracker.isFocused&&this._form.saveButtonView.focus(),this._balloon.remove(this._form),e&&this.editor.editing.view.focus())}get _isVisible(){return!!this._balloon&&this._balloon.visibleView===this._form}get _isInBalloon(){return!!this._balloon&&this._balloon.hasView(this._form)}}function ape(i){const t=i.t;return[e=>{if(e.rawSize.trim()==="")return t("The value must not be empty.");if(e.parsedSize===null)return t("The value should be a plain number.")}]}class lpe extends ie{static get requires(){return[uV,npe,ope,Qge]}static get pluginName(){return"ImageResize"}static get isOfficialPlugin(){return!0}}class cpe extends lt{constructor(e,n){super(e);b(this,"_defaultStyles");b(this,"_styles");this._defaultStyles={imageBlock:!1,imageInline:!1},this._styles=new Map(n.map(s=>{if(s.isDefault)for(const r of s.modelElements)this._defaultStyles[r]=s.name;return[s.name,s]}))}refresh(){const s=this.editor.plugins.get("ImageUtils").getClosestSelectedImageElement(this.editor.model.document.selection);this.isEnabled=!!s,this.isEnabled?s.hasAttribute("imageStyle")?this.value=s.getAttribute("imageStyle"):this.value=this._defaultStyles[s.name]:this.value=!1}execute(e={}){const n=this.editor,s=n.model,r=n.plugins.get("ImageUtils");s.change(o=>{const a=e.value,{setImageSizes:l=!0}=e;let c=r.getClosestSelectedImageElement(s.document.selection);a&&this.shouldConvertImageType(a,c)&&(this.editor.execute(r.isBlockImage(c)?"imageTypeInline":"imageTypeBlock",{setImageSizes:l}),c=r.getClosestSelectedImageElement(s.document.selection)),!a||this._styles.get(a).isDefault?o.removeAttribute("imageStyle",c):o.setAttribute("imageStyle",a,c),l&&r.setImageNaturalSizeAttributes(c)})}shouldConvertImageType(e,n){return!this._styles.get(e).modelElements.includes(n.name)}}const lp={get inline(){return{name:"inline",title:"In line",icon:ke.objectInline,modelElements:["imageInline"],isDefault:!0}},get alignLeft(){return{name:"alignLeft",title:"Left aligned image",icon:ke.objectLeft,modelElements:["imageBlock","imageInline"],className:"image-style-align-left"}},get alignBlockLeft(){return{name:"alignBlockLeft",title:"Left aligned image",icon:ke.objectBlockLeft,modelElements:["imageBlock"],className:"image-style-block-align-left"}},get alignCenter(){return{name:"alignCenter",title:"Centered image",icon:ke.objectCenter,modelElements:["imageBlock"],className:"image-style-align-center"}},get alignRight(){return{name:"alignRight",title:"Right aligned image",icon:ke.objectRight,modelElements:["imageBlock","imageInline"],className:"image-style-align-right"}},get alignBlockRight(){return{name:"alignBlockRight",title:"Right aligned image",icon:ke.objectBlockRight,modelElements:["imageBlock"],className:"image-style-block-align-right"}},get block(){return{name:"block",title:"Centered image",icon:ke.objectCenter,modelElements:["imageBlock"],isDefault:!0}},get side(){return{name:"side",title:"Side image",icon:ke.objectRight,modelElements:["imageBlock"],className:"image-style-side"}}},mV={full:ke.objectFullWidth,left:ke.objectBlockLeft,right:ke.objectBlockRight,center:ke.objectCenter,inlineLeft:ke.objectLeft,inlineRight:ke.objectRight,inline:ke.objectInline},gV=[{name:"imageStyle:wrapText",title:"Wrap text",defaultItem:"imageStyle:alignLeft",items:["imageStyle:alignLeft","imageStyle:alignRight"]},{name:"imageStyle:breakText",title:"Break text",defaultItem:"imageStyle:block",items:["imageStyle:alignBlockLeft","imageStyle:block","imageStyle:alignBlockRight"]}];function upe(i){return(i.configuredStyles.options||[]).map(n=>fpe(n)).filter(n=>mpe(n,i))}function dpe(i,t){return i&&t?{options:["inline","alignLeft","alignRight","alignCenter","alignBlockLeft","alignBlockRight","block","side"]}:i?{options:["block","side"]}:t?{options:["inline","alignLeft","alignRight"]}:{}}function hpe(i){return i.has("ImageBlockEditing")&&i.has("ImageInlineEditing")?[...gV]:[]}function fpe(i){return typeof i=="string"?lp[i]?i={...lp[i]}:i={name:i}:i=gpe(lp[i.name],i),typeof i.icon=="string"&&(i.icon=mV[i.icon]||i.icon),i}function mpe(i,{isBlockPluginLoaded:t,isInlinePluginLoaded:e}){const{modelElements:n,name:s}=i;if(!n||!n.length||!s)return pV({style:i}),!1;{const r=[t?"imageBlock":null,e?"imageInline":null];if(!n.some(o=>r.includes(o)))return Tt("image-style-missing-dependency",{style:i,missingPlugins:n.map(o=>o==="imageBlock"?"ImageBlockEditing":"ImageInlineEditing")}),!1}return!0}function gpe(i,t){const e={...t};for(const n in i)Object.prototype.hasOwnProperty.call(t,n)||(e[n]=i[n]);return e}function pV(i){Tt("image-style-configuration-definition-invalid",i)}var p_={normalizeStyles:upe,getDefaultStylesConfiguration:dpe,getDefaultDropdownDefinitions:hpe,warnInvalidStyle:pV,DEFAULT_OPTIONS:lp,DEFAULT_ICONS:mV,DEFAULT_DROPDOWN_DEFINITIONS:gV};function ppe(i){return(t,e,n)=>{if(!n.consumable.consume(e.item,t.name))return;const s=QI(e.attributeNewValue,i),r=QI(e.attributeOldValue,i),o=n.mapper.toViewElement(e.item),a=n.writer;r&&a.removeClass(r.className,o),s&&a.addClass(s.className,o)}}function bpe(i){const t={imageInline:i.filter(e=>!e.isDefault&&e.modelElements.includes("imageInline")),imageBlock:i.filter(e=>!e.isDefault&&e.modelElements.includes("imageBlock"))};return(e,n,s)=>{if(!n.modelRange)return;const r=n.viewItem,o=Tn(n.modelRange.getItems());if(o&&s.schema.checkAttribute(o,"imageStyle"))for(const a of t[o.name])s.consumable.consume(r,{classes:a.className})&&s.writer.setAttribute("imageStyle",a.name,o)}}function QI(i,t){for(const e of t)if(e.name===i)return e}class bV extends ie{constructor(){super(...arguments);b(this,"normalizedStyles")}static get pluginName(){return"ImageStyleEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[ri]}init(){const{normalizeStyles:e,getDefaultStylesConfiguration:n}=p_,s=this.editor,r=s.plugins.has("ImageBlockEditing"),o=s.plugins.has("ImageInlineEditing");s.config.define("image.styles",n(r,o)),this.normalizedStyles=e({configuredStyles:s.config.get("image.styles"),isBlockPluginLoaded:r,isInlinePluginLoaded:o}),this._setupConversion(r,o),this._setupPostFixer(),s.commands.add("imageStyle",new cpe(s,this.normalizedStyles))}_setupConversion(e,n){const s=this.editor,r=s.model.schema,o=ppe(this.normalizedStyles),a=bpe(this.normalizedStyles);s.editing.downcastDispatcher.on("attribute:imageStyle",o),s.data.downcastDispatcher.on("attribute:imageStyle",o),e&&(r.extend("imageBlock",{allowAttributes:"imageStyle"}),s.data.upcastDispatcher.on("element:figure",a,{priority:"low"})),n&&(r.extend("imageInline",{allowAttributes:"imageStyle"}),s.data.upcastDispatcher.on("element:img",a,{priority:"low"}))}_setupPostFixer(){const e=this.editor,n=e.model.document,s=e.plugins.get(ri),r=new Map(this.normalizedStyles.map(o=>[o.name,o]));n.registerPostFixer(o=>{let a=!1;for(const l of n.differ.getChanges())if(l.type=="insert"||l.type=="attribute"&&l.attributeKey=="imageStyle"){let c=l.type=="insert"?l.position.nodeAfter:l.range.start.nodeAfter;if(c&&c.is("element","paragraph")&&c.childCount>0&&(c=c.getChild(0)),!s.isImage(c))continue;const h=c.getAttribute("imageStyle");if(!h)continue;const f=r.get(h);(!f||!f.modelElements.includes(c.name))&&(o.removeAttribute("imageStyle",c),a=!0)}return a})}}class wpe extends ie{static get requires(){return[bV]}static get pluginName(){return"ImageStyleUI"}static get isOfficialPlugin(){return!0}get localizedDefaultStylesTitles(){const t=this.editor.t;return{"Wrap text":t("Wrap text"),"Break text":t("Break text"),"In line":t("In line"),"Full size image":t("Full size image"),"Side image":t("Side image"),"Left aligned image":t("Left aligned image"),"Centered image":t("Centered image"),"Right aligned image":t("Right aligned image")}}init(){const t=this.editor.plugins,e=this.editor.config.get("image.toolbar")||[],n=t.get("ImageStyleEditing"),s=e5(n.normalizedStyles,this.localizedDefaultStylesTitles);for(const o of s)this._createButton(o);const r=e5([...e.filter(Yt),...p_.getDefaultDropdownDefinitions(t)],this.localizedDefaultStylesTitles);for(const o of r)this._createDropdown(o,s)}_createDropdown(t,e){const n=this.editor.ui.componentFactory;n.add(t.name,s=>{let r;const{defaultItem:o,items:a,title:l}=t,c=a.filter(p=>e.find(({name:v})=>t5(v)===p)).map(p=>{const v=n.create(p);return p===o&&(r=v),v});a.length!==c.length&&p_.warnInvalidStyle({dropdown:t});const h=vi(s,Hf),f=h.buttonView,m=f.arrowView;return hw(h,c,{enableActiveItemFocusOnDropdownOpen:!0}),f.set({label:n5(l,r.label),class:null,tooltip:!0}),m.unbind("label"),m.set({label:l}),f.bind("icon").toMany(c,"isOn",(...p)=>{const v=p.findIndex(Pa);return v<0?r.icon:c[v].icon}),f.bind("label").toMany(c,"isOn",(...p)=>{const v=p.findIndex(Pa);return n5(l,v<0?r.label:c[v].label)}),f.bind("isOn").toMany(c,"isOn",(...p)=>p.some(Pa)),f.bind("class").toMany(c,"isOn",(...p)=>p.some(Pa)?"ck-splitbutton_flatten":void 0),f.on("execute",()=>{c.some(({isOn:p})=>p)?h.isOpen=!h.isOpen:r.fire("execute")}),h.bind("isEnabled").toMany(c,"isEnabled",(...p)=>p.some(Pa)),this.listenTo(h,"execute",()=>{this.editor.editing.view.focus()}),h})}_createButton(t){const e=t.name;this.editor.ui.componentFactory.add(t5(e),n=>{const s=this.editor.commands.get("imageStyle"),r=new rt(n);return r.set({label:t.title,icon:t.icon,tooltip:!0,isToggleable:!0}),r.bind("isEnabled").to(s,"isEnabled"),r.bind("isOn").to(s,"value",o=>o===e),r.on("execute",this._executeCommand.bind(this,e)),r})}_executeCommand(t){this.editor.execute("imageStyle",{value:t}),this.editor.editing.view.focus()}}function e5(i,t){for(const e of i)t[e.title]&&(e.title=t[e.title]);return i}function t5(i){return`imageStyle:${i}`}function n5(i,t){return(i?i+": ":"")+t}class vpe extends ie{static get requires(){return[bV,wpe]}static get pluginName(){return"ImageStyle"}static get isOfficialPlugin(){return!0}}class ype extends ie{static get requires(){return[tb,ri]}static get pluginName(){return"ImageToolbar"}static get isOfficialPlugin(){return!0}afterInit(){const t=this.editor,e=t.t,n=t.plugins.get(tb),s=t.plugins.get("ImageUtils");n.register("image",{ariaLabel:e("Image toolbar"),items:_pe(t.config.get("image.toolbar")||[]),getRelatedElement:r=>s.getClosestSelectedImageWidget(r)})}}function _pe(i){return i.map(t=>Yt(t)?t.name:t)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class Epe extends ie{static get pluginName(){return"IndentEditing"}static get isOfficialPlugin(){return!0}init(){const t=this.editor;t.commands.add("indent",new IP(t)),t.commands.add("outdent",new IP(t))}}class Cpe extends ie{static get pluginName(){return"IndentUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.locale,n=t.t,s=e.uiLanguageDirection=="ltr"?ke.indent:ke.outdent,r=e.uiLanguageDirection=="ltr"?ke.outdent:ke.indent;this._defineButton("indent",n("Increase indent"),s),this._defineButton("outdent",n("Decrease indent"),r)}_defineButton(t,e,n){const s=this.editor;s.ui.componentFactory.add(t,()=>{const r=this._createButton(rt,t,e,n);return r.set({tooltip:!0}),r}),s.ui.componentFactory.add("menuBar:"+t,()=>this._createButton(Xn,t,e,n))}_createButton(t,e,n,s){const r=this.editor,o=r.commands.get(e),a=new t(r.locale);return a.set({label:n,icon:s}),a.bind("isEnabled").to(o,"isEnabled"),this.listenTo(a,"execute",()=>{r.execute(e),r.editing.view.focus()}),a}}class xpe extends ie{static get pluginName(){return"Indent"}static get isOfficialPlugin(){return!0}static get requires(){return[Epe,Cpe]}}class Lg extends lt{constructor(e,n){super(e);b(this,"_indentBehavior");this._indentBehavior=n}refresh(){const n=this.editor.model,s=Tn(n.document.selection.getSelectedBlocks());if(!s||!this._isIndentationChangeAllowed(s)){this.isEnabled=!1;return}this.isEnabled=this._indentBehavior.checkEnabled(s.getAttribute("blockIndent"))}execute(){const e=this.editor.model,n=this._getBlocksToChange();e.change(s=>{for(const r of n){const o=r.getAttribute("blockIndent"),a=this._indentBehavior.getNextIndent(o);a?s.setAttribute("blockIndent",a,r):s.removeAttribute("blockIndent",r)}})}_getBlocksToChange(){const n=this.editor.model.document.selection;return Array.from(n.getSelectedBlocks()).filter(r=>this._isIndentationChangeAllowed(r))}_isIndentationChangeAllowed(e){const n=this.editor;return n.model.schema.checkAttribute(e,"blockIndent")?!n.plugins.has("ListUtils")||!this._indentBehavior.isForward?!0:!n.plugins.get("ListUtils").isListItemBlock(e):!1}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class i5{constructor(t){b(this,"isForward");b(this,"offset");b(this,"unit");this.isForward=t.direction==="forward",this.offset=t.offset,this.unit=t.unit}checkEnabled(t){const e=parseFloat(t||"0");return this.isForward||e>0}getNextIndent(t){const e=parseFloat(t||"0");if(!(!t||t.endsWith(this.unit)))return this.isForward?this.offset+this.unit:void 0;const s=this.isForward?this.offset:-this.offset,r=e+s;return r>0?r+this.unit:void 0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class s5{constructor(t){b(this,"isForward");b(this,"classes");this.isForward=t.direction==="forward",this.classes=t.classes}checkEnabled(t){const e=this.classes.indexOf(t);return this.isForward?e<this.classes.length-1:e>=0}getNextIndent(t){const e=this.classes.indexOf(t),n=this.isForward?1:-1;return this.classes[e+n]}}const Tpe=["paragraph","heading1","heading2","heading3","heading4","heading5","heading6"];class kpe extends ie{constructor(t){super(t),t.config.define("indentBlock",{offset:40,unit:"px"})}static get pluginName(){return"IndentBlock"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.config.get("indentBlock");e.classes&&e.classes.length?(this._setupConversionUsingClasses(e.classes),t.commands.add("indentBlock",new Lg(t,new s5({direction:"forward",classes:e.classes}))),t.commands.add("outdentBlock",new Lg(t,new s5({direction:"backward",classes:e.classes})))):(t.data.addStyleProcessorRules(ble),this._setupConversionUsingOffset(),t.commands.add("indentBlock",new Lg(t,new i5({direction:"forward",offset:e.offset,unit:e.unit}))),t.commands.add("outdentBlock",new Lg(t,new i5({direction:"backward",offset:e.offset,unit:e.unit}))))}afterInit(){const t=this.editor,e=t.model.schema,n=t.commands.get("indent"),s=t.commands.get("outdent"),r=t.config.get("heading.options");(r&&r.map(l=>l.model)||Tpe).forEach(l=>{e.isRegistered(l)&&e.extend(l,{allowAttributes:"blockIndent"})}),e.setAttributeProperties("blockIndent",{isFormatting:!0}),n.registerChildCommand(t.commands.get("indentBlock")),s.registerChildCommand(t.commands.get("outdentBlock"))}_setupConversionUsingOffset(){const t=this.editor.conversion,n=this.editor.locale.contentLanguageDirection==="rtl"?"margin-right":"margin-left";t.for("upcast").attributeToAttribute({view:{styles:{[n]:/[\s\S]+/}},model:{key:"blockIndent",value:s=>{if(!s.is("element","li"))return s.getStyle(n)}}}),t.for("downcast").attributeToAttribute({model:"blockIndent",view:s=>({key:"style",value:{[n]:s}})})}_setupConversionUsingClasses(t){const e={model:{key:"blockIndent",values:[]},view:{}};for(const n of t)e.model.values.push(n),e.view[n]={key:"class",value:[n]};this.editor.conversion.attributeToAttribute(e)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class Spe{constructor(){b(this,"_definitions",new Set)}get length(){return this._definitions.size}add(t){Array.isArray(t)?t.forEach(e=>this._definitions.add(e)):this._definitions.add(t)}getDispatcher(){return t=>{t.on("attribute:linkHref",(e,n,s)=>{if(!s.consumable.test(n.item,"attribute:linkHref")||!(n.item.is("selection")||s.schema.isInline(n.item)))return;const r=s.writer,o=r.document.selection;for(const a of this._definitions){const l=r.createAttributeElement("a",a.attributes,{priority:5});a.classes&&r.addClass(a.classes,l);for(const c in a.styles)r.setStyle(c,a.styles[c],l);r.setCustomProperty("link",!0,l),a.callback(n.attributeNewValue)?n.item.is("selection")?r.wrap(o.getFirstRange(),l):r.wrap(s.mapper.toViewRange(n.range),l):r.unwrap(s.mapper.toViewRange(n.range),l)}},{priority:"high"})}}getDispatcherForLinkedImage(){return t=>{t.on("attribute:linkHref:imageBlock",(e,n,{writer:s,mapper:r})=>{const o=r.toViewElement(n.item),a=Array.from(o.getChildren()).find(l=>l.is("element","a"));if(a)for(const l of this._definitions){const c=xr(l.attributes);if(l.callback(n.attributeNewValue)){for(const[h,f]of c)h==="class"?s.addClass(f,a):s.setAttribute(h,f,a);l.classes&&s.addClass(l.classes,a);for(const h in l.styles)s.setStyle(h,l.styles[h],a)}else{for(const[h,f]of c)h==="class"?s.removeClass(f,a):s.removeAttribute(h,a);l.classes&&s.removeClass(l.classes,a);for(const h in l.styles)s.removeStyle(h,a)}}})}}}const Ape=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,Ppe="^(?:(?:<protocols>):|[^a-z]|[a-z+.-]+(?:[^a-z+.:-]|$))",Ipe=/^[\S]+@((?![-_])(?:[-\w\u00a1-\uffff]{0,63}[^-_]\.))+(?:[a-z\u00a1-\uffff]{2,})$/i,Rpe=/^((\w+:(\/{2,})?)|(\W))/i,Ope=["https?","ftps?","mailto"],yh="Ctrl+K";function Npe(i){return i.is("attributeElement")&&!!i.getCustomProperty("link")}function r5(i,{writer:t}){const e=t.createAttributeElement("a",{href:i},{priority:5});return t.setCustomProperty("link",!0,e),e}function wV(i,t=Ope){const e=String(i),n=t.join("|"),s=new RegExp(`${Ppe.replace("<protocols>",n)}`,"i");return Mpe(e,s)?e:"#"}function Mpe(i,t){return!!i.replace(Ape,"").match(t)}function Lpe(i,t){const e={"Open in a new tab":i("Open in a new tab"),Downloadable:i("Downloadable")};return t.forEach(n=>("label"in n&&e[n.label]&&(n.label=e[n.label]),n)),t}function Vpe(i){const t=[];if(i)for(const[e,n]of Object.entries(i)){const s=Object.assign({},n,{id:`link${cee(e)}`});t.push(s)}return t}function b_(i,t){return i?t.checkAttribute(i.name,"linkHref"):!1}function Dpe(i){return Ipe.test(i)}function DC(i,t){const e=Dpe(i)?"mailto:":t,n=!!e&&!vV(i);return i&&n?e+i:i}function vV(i){return Rpe.test(i)}function yV(i){window.open(i,"_blank","noopener")}function _V(i){const t=i.plugins.has("BookmarkEditing")?i.plugins.get("BookmarkEditing"):null;function e(s){return!!s&&s.startsWith("#")&&!!t&&!!t.getElementForBookmarkId(s.slice(1))}function n(s){const r=s.slice(1),o=t.getElementForBookmarkId(r);i.model.change(a=>{a.setSelection(o,"on")}),i.editing.view.scrollToTheSelection({alignToTop:!0,forceScroll:!0})}return{isScrollableToTarget:e,scrollToTarget:n}}class Bpe extends lt{constructor(){super(...arguments);b(this,"manualDecorators",new oi);b(this,"automaticDecorators",new Spe)}restoreManualDecoratorStates(){for(const e of this.manualDecorators)e.value=this._getDecoratorStateFromModel(e.id)}refresh(){const e=this.editor.model,n=e.document.selection,s=n.getSelectedElement()||Tn(n.getSelectedBlocks());b_(s,e.schema)?(this.value=s.getAttribute("linkHref"),this.isEnabled=e.schema.checkAttribute(s,"linkHref")):(this.value=n.getAttribute("linkHref"),this.isEnabled=e.schema.checkAttributeInSelection(n,"linkHref"));for(const r of this.manualDecorators)r.value=this._getDecoratorStateFromModel(r.id)}execute(e,n={}){const s=this.editor.model,r=s.document.selection,o=[],a=[];for(const l in n)n[l]?o.push(l):a.push(l);s.change(l=>{if(r.isCollapsed){const c=r.getFirstPosition();if(r.hasAttribute("linkHref")){const h=o5(r);let f=mw(c,"linkHref",r.getAttribute("linkHref"),s);r.getAttribute("linkHref")===h&&(f=this._updateLinkContent(s,l,f,e)),l.setAttribute("linkHref",e,f),o.forEach(m=>{l.setAttribute(m,!0,f)}),a.forEach(m=>{l.removeAttribute(m,f)}),l.setSelection(l.createPositionAfter(f.end.nodeBefore))}else if(e!==""){const h=xr(r.getAttributes());h.set("linkHref",e),o.forEach(m=>{h.set(m,!0)});const{end:f}=s.insertContent(l.createText(e,h),c);l.setSelection(f)}["linkHref",...o,...a].forEach(h=>{l.removeSelectionAttribute(h)})}else{const c=s.schema.getValidRanges(r.getRanges(),"linkHref"),h=[];for(const m of r.getSelectedBlocks())s.schema.checkAttribute(m,"linkHref")&&h.push(l.createRangeOn(m));const f=h.slice();for(const m of c)this._isRangeToUpdate(m,h)&&f.push(m);for(const m of f){let p=m;if(f.length===1){const v=o5(r);r.getAttribute("linkHref")===v&&(p=this._updateLinkContent(s,l,m,e),l.setSelection(l.createSelection(p)))}l.setAttribute("linkHref",e,p),o.forEach(v=>{l.setAttribute(v,!0,p)}),a.forEach(v=>{l.removeAttribute(v,p)})}}})}_getDecoratorStateFromModel(e){const n=this.editor.model,s=n.document.selection,r=s.getSelectedElement();return b_(r,n.schema)?r.getAttribute(e):s.getAttribute(e)}_isRangeToUpdate(e,n){for(const s of n)if(s.containsRange(e))return!1;return!0}_updateLinkContent(e,n,s,r){const o=n.createText(r,{linkHref:r});return e.insertContent(o,s)}}function o5(i){if(i.isCollapsed){const t=i.getFirstPosition();return t.textNode&&t.textNode.data}else{const t=Array.from(i.getFirstRange().getItems());if(t.length>1)return null;const e=t[0];return e.is("$text")||e.is("$textProxy")?e.data:null}}class Fpe extends lt{refresh(){const t=this.editor.model,e=t.document.selection,n=e.getSelectedElement();b_(n,t.schema)?this.isEnabled=t.schema.checkAttribute(n,"linkHref"):this.isEnabled=t.schema.checkAttributeInSelection(e,"linkHref")}execute(){const t=this.editor,e=this.editor.model,n=e.document.selection,s=t.commands.get("link");e.change(r=>{const o=n.isCollapsed?[mw(n.getFirstPosition(),"linkHref",n.getAttribute("linkHref"),e)]:e.schema.getValidRanges(n.getRanges(),"linkHref");for(const a of o)if(r.removeAttribute("linkHref",a),s)for(const l of s.manualDecorators)r.removeAttribute(l.id,a)})}}class $pe extends Vt(){constructor({id:e,label:n,attributes:s,classes:r,styles:o,defaultValue:a}){super();b(this,"id");b(this,"defaultValue");b(this,"label");b(this,"attributes");b(this,"classes");b(this,"styles");this.id=e,this.set("value",void 0),this.defaultValue=a,this.label=n,this.attributes=s,this.classes=r,this.styles=o}_createPattern(){return{attributes:this.attributes,classes:this.classes,styles:this.styles}}}const zpe="ck-link_selected",a5="automatic",jpe="manual",Hpe=/^(https?:)?\/\//;class ww extends ie{static get pluginName(){return"LinkEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[wI,OL,Gs]}constructor(t){super(t),t.config.define("link",{allowCreatingEmptyLinks:!1,addTargetToExternalLinks:!1})}init(){const t=this.editor,e=this.editor.config.get("link.allowedProtocols");t.model.schema.extend("$text",{allowAttributes:"linkHref"}),t.conversion.for("dataDowncast").attributeToElement({model:"linkHref",view:r5}),t.conversion.for("editingDowncast").attributeToElement({model:"linkHref",view:(r,o)=>r5(wV(r,e),o)}),t.conversion.for("upcast").elementToAttribute({view:{name:"a",attributes:{href:!0}},model:{key:"linkHref",value:r=>r.getAttribute("href")}}),t.commands.add("link",new Bpe(t)),t.commands.add("unlink",new Fpe(t));const n=Lpe(t.t,Vpe(t.config.get("link.decorators")));this._enableAutomaticDecorators(n.filter(r=>r.mode===a5)),this._enableManualDecorators(n.filter(r=>r.mode===jpe)),t.plugins.get(wI).registerAttribute("linkHref"),Ohe(t,"linkHref","a",zpe),this._enableLinkOpen(),this._enableSelectionAttributesFixer(),this._enableClipboardIntegration()}_enableAutomaticDecorators(t){const e=this.editor,s=e.commands.get("link").automaticDecorators;e.config.get("link.addTargetToExternalLinks")&&s.add({id:"linkIsExternal",mode:a5,callback:r=>!!r&&Hpe.test(r),attributes:{target:"_blank",rel:"noopener noreferrer"}}),s.add(t),s.length&&e.conversion.for("downcast").add(s.getDispatcher())}_enableManualDecorators(t){if(!t.length)return;const e=this.editor,s=e.commands.get("link").manualDecorators;t.forEach(r=>{e.model.schema.extend("$text",{allowAttributes:r.id});const o=new $pe(r);s.add(o),e.conversion.for("downcast").attributeToElement({model:o.id,view:(a,{writer:l,schema:c},{item:h})=>{if((h.is("selection")||c.isInline(h))&&a){const f=l.createAttributeElement("a",o.attributes,{priority:5});o.classes&&l.addClass(o.classes,f);for(const m in o.styles)l.setStyle(m,o.styles[m],f);return l.setCustomProperty("link",!0,f),f}}}),e.conversion.for("upcast").elementToAttribute({view:{name:"a",...o._createPattern()},model:{key:o.id}})})}_enableLinkOpen(){const t=this.editor,n=t.editing.view.document,s=_V(t);function r(o){s.isScrollableToTarget(o)?s.scrollToTarget(o):yV(o)}this.listenTo(n,"click",(o,a)=>{if(!(Xe.isMac?a.domEvent.metaKey:a.domEvent.ctrlKey))return;let c=a.domTarget;if(c.tagName.toLowerCase()!="a"&&(c=c.closest("a")),!c)return;const h=c.getAttribute("href");h&&(o.stop(),a.preventDefault(),r(h))},{context:"$capture"}),this.listenTo(n,"keydown",(o,a)=>{const c=t.commands.get("link").value;c&&a.keyCode===gt.enter&&a.altKey&&(o.stop(),r(c))})}_enableSelectionAttributesFixer(){const e=this.editor.model,n=e.document.selection;this.listenTo(n,"change:attribute",(s,{attributeKeys:r})=>{!r.includes("linkHref")||n.hasAttribute("linkHref")||e.change(o=>{Upe(o,Wpe(e.schema))})})}_enableClipboardIntegration(){const t=this.editor,e=t.model,n=this.editor.config.get("link.defaultProtocol");n&&this.listenTo(t.plugins.get("ClipboardPipeline"),"contentInsertion",(s,r)=>{e.change(o=>{const a=o.createRangeIn(r.content);for(const l of a.getItems())if(l.hasAttribute("linkHref")){const c=DC(l.getAttribute("linkHref"),n);o.setAttribute("linkHref",c,l)}})})}}function Upe(i,t){i.removeSelectionAttribute("linkHref");for(const e of t)i.removeSelectionAttribute(e)}function Wpe(i){return i.getDefinition("$text").allowAttributes.filter(e=>e.startsWith("link"))}class qpe extends Oe{constructor(e,n,s){super(e);b(this,"focusTracker",new ln);b(this,"keystrokes",new wn);b(this,"urlInputView");b(this,"saveButtonView");b(this,"cancelButtonView");b(this,"_manualDecoratorSwitches");b(this,"children");b(this,"_validators");b(this,"_focusables",new ai);b(this,"_focusCycler");const r=e.t;this._validators=s,this.urlInputView=this._createUrlInput(),this.saveButtonView=this._createButton(r("Save"),ke.check,"ck-button-save"),this.saveButtonView.type="submit",this.cancelButtonView=this._createButton(r("Cancel"),ke.cancel,"ck-button-cancel","cancel"),this._manualDecoratorSwitches=this._createManualDecoratorSwitches(n),this.children=this._createFormChildren(n.manualDecorators),this._focusCycler=new Oi({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}});const o=["ck","ck-link-form","ck-responsive-form"];n.manualDecorators.length&&o.push("ck-link-form_layout-vertical","ck-vertical-form"),this.setTemplate({tag:"form",attributes:{class:o,tabindex:"-1"},children:this.children})}getDecoratorSwitchesState(){return Array.from(this._manualDecoratorSwitches).reduce((e,n)=>(e[n.name]=n.isOn,e),{})}render(){super.render(),Xa({view:this}),[this.urlInputView,...this._manualDecoratorSwitches,this.saveButtonView,this.cancelButtonView].forEach(n=>{this._focusables.add(n),this.focusTracker.add(n.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}isValid(){this.resetFormStatus();for(const e of this._validators){const n=e(this);if(n)return this.urlInputView.errorText=n,!1}return!0}resetFormStatus(){this.urlInputView.errorText=null}_createUrlInput(){const e=this.locale.t,n=new Mn(this.locale,$s);return n.fieldView.inputMode="url",n.label=e("Link URL"),n}_createButton(e,n,s,r){const o=new rt(this.locale);return o.set({label:e,icon:n,tooltip:!0}),o.extendTemplate({attributes:{class:s}}),r&&o.delegate("execute").to(this,r),o}_createManualDecoratorSwitches(e){const n=this.createCollection();for(const s of e.manualDecorators){const r=new jf(this.locale);r.set({name:s.id,label:s.label,withText:!0}),r.bind("isOn").toMany([s,e],"value",(o,a)=>a===void 0&&o===void 0?!!s.defaultValue:!!o),r.on("execute",()=>{s.set("value",!r.isOn)}),n.add(r)}return n}_createFormChildren(e){const n=this.createCollection();if(n.add(this.urlInputView),e.length){const s=new Oe;s.setTemplate({tag:"ul",children:this._manualDecoratorSwitches.map(r=>({tag:"li",children:[r],attributes:{class:["ck","ck-list__item"]}})),attributes:{class:["ck","ck-reset","ck-list"]}}),n.add(s)}return n.add(this.saveButtonView),n.add(this.cancelButtonView),n}get url(){const{element:e}=this.urlInputView.fieldView;return e?e.value.trim():null}}var Gpe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.077 15 .991-1.416a.75.75 0 1 1 1.229.86l-1.148 1.64a.748.748 0 0 1-.217.206 5.251 5.251 0 0 1-8.503-5.955.741.741 0 0 1 .12-.274l1.147-1.639a.75.75 0 1 1 1.228.86L4.933 10.7l.006.003a3.75 3.75 0 0 0 6.132 4.294l.006.004zm5.494-5.335a.748.748 0 0 1-.12.274l-1.147 1.639a.75.75 0 1 1-1.228-.86l.86-1.23a3.75 3.75 0 0 0-6.144-4.301l-.86 1.229a.75.75 0 0 1-1.229-.86l1.148-1.64a.748.748 0 0 1 .217-.206 5.251 5.251 0 0 1 8.503 5.955zm-4.563-2.532a.75.75 0 0 1 .184 1.045l-3.155 4.505a.75.75 0 1 1-1.229-.86l3.155-4.506a.75.75 0 0 1 1.045-.184zm4.919 10.562-1.414 1.414a.75.75 0 1 1-1.06-1.06l1.414-1.415-1.415-1.414a.75.75 0 0 1 1.061-1.06l1.414 1.414 1.414-1.415a.75.75 0 0 1 1.061 1.061l-1.414 1.414 1.414 1.415a.75.75 0 0 1-1.06 1.06l-1.415-1.414z"/></svg>';class Kpe extends Oe{constructor(e,n={},s){super(e);b(this,"focusTracker",new ln);b(this,"keystrokes",new wn);b(this,"previewButtonView");b(this,"unlinkButtonView");b(this,"editButtonView");b(this,"_focusables",new ai);b(this,"_focusCycler");b(this,"_linkConfig");b(this,"_options");const r=e.t;this._options=s,this.previewButtonView=this._createPreviewButton(),this.unlinkButtonView=this._createButton(r("Unlink"),Gpe,"unlink"),this.editButtonView=this._createButton(r("Edit link"),ke.pencil,"edit"),this.set("href",void 0),this._linkConfig=n,this._focusCycler=new Oi({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-link-actions","ck-responsive-form"],tabindex:"-1"},children:[this.previewButtonView,this.editButtonView,this.unlinkButtonView]})}render(){super.render(),[this.previewButtonView,this.editButtonView,this.unlinkButtonView].forEach(n=>{this._focusables.add(n),this.focusTracker.add(n.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}_createButton(e,n,s){const r=new rt(this.locale);return r.set({label:e,icon:n,tooltip:!0}),r.delegate("execute").to(this,s),r}_createPreviewButton(){const e=new rt(this.locale),n=this.bindTemplate,s=this.t;return e.set({withText:!0}),e.extendTemplate({attributes:{class:["ck","ck-link-actions__preview"],href:n.to("href",r=>r&&wV(r,this._linkConfig.allowedProtocols)),target:"_blank",rel:"noopener noreferrer"},on:{click:n.to(r=>{this._options&&this._options.isScrollableToTarget(this.href)?(r.preventDefault(),this._options.scrollToTarget(this.href)):yV(this.href)})}}),e.bind("tooltip").to(this,"href",r=>this._options&&this._options.isScrollableToTarget(r)?s("Scroll to target"):s("Open link in new tab")),e.bind("label").to(this,"href",r=>r||s("This link has no URL")),e.bind("isEnabled").to(this,"href",r=>!!r),e.template.tag="a",e}}var EV='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.077 15 .991-1.416a.75.75 0 1 1 1.229.86l-1.148 1.64a.748.748 0 0 1-.217.206 5.251 5.251 0 0 1-8.503-5.955.741.741 0 0 1 .12-.274l1.147-1.639a.75.75 0 1 1 1.228.86L4.933 10.7l.006.003a3.75 3.75 0 0 0 6.132 4.294l.006.004zm5.494-5.335a.748.748 0 0 1-.12.274l-1.147 1.639a.75.75 0 1 1-1.228-.86l.86-1.23a3.75 3.75 0 0 0-6.144-4.301l-.86 1.229a.75.75 0 0 1-1.229-.86l1.148-1.64a.748.748 0 0 1 .217-.206 5.251 5.251 0 0 1 8.503 5.955zm-4.563-2.532a.75.75 0 0 1 .184 1.045l-3.155 4.505a.75.75 0 1 1-1.229-.86l3.155-4.506a.75.75 0 0 1 1.045-.184z"/></svg>';const Kr="link-ui";class CV extends ie{constructor(){super(...arguments);b(this,"actionsView",null);b(this,"formView",null);b(this,"_balloon")}static get requires(){return[kr]}static get pluginName(){return"LinkUI"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,n=this.editor.t;e.editing.view.addObserver(Hae),this._balloon=e.plugins.get(kr),this._createToolbarLinkButton(),this._enableBalloonActivators(),e.conversion.for("editingDowncast").markerToHighlight({model:Kr,view:{classes:["ck-fake-link-selection"]}}),e.conversion.for("editingDowncast").markerToElement({model:Kr,view:(s,{writer:r})=>{if(!s.markerRange.isCollapsed)return null;const o=r.createUIElement("span");return r.addClass(["ck-fake-link-selection","ck-fake-link-selection_collapsed"],o),o}}),e.accessibility.addKeystrokeInfos({keystrokes:[{label:n("Create link"),keystroke:yh},{label:n("Move out of a link"),keystroke:[["arrowleft","arrowleft"],["arrowright","arrowright"]]}]})}destroy(){super.destroy(),this.formView&&this.formView.destroy(),this.actionsView&&this.actionsView.destroy()}_createViews(){this.actionsView=this._createActionsView(),this.formView=this._createFormView(),this._enableUserBalloonInteractions()}_createActionsView(){const e=this.editor,n=new Kpe(e.locale,e.config.get("link"),_V(e)),s=e.commands.get("link"),r=e.commands.get("unlink");return n.bind("href").to(s,"value"),n.editButtonView.bind("isEnabled").to(s),n.unlinkButtonView.bind("isEnabled").to(r),this.listenTo(n,"edit",()=>{this._addFormView()}),this.listenTo(n,"unlink",()=>{e.execute("unlink"),this._hideUI()}),n.keystrokes.set("Esc",(o,a)=>{this._hideUI(),a()}),n.keystrokes.set(yh,(o,a)=>{this._addFormView(),a()}),n}_createFormView(){const e=this.editor,n=e.commands.get("link"),s=e.config.get("link.defaultProtocol"),r=new(cw(qpe))(e.locale,n,Ype(e));return r.urlInputView.fieldView.bind("value").to(n,"value"),r.urlInputView.bind("isEnabled").to(n,"isEnabled"),r.saveButtonView.bind("isEnabled").to(n,"isEnabled"),this.listenTo(r,"submit",()=>{if(r.isValid()){const{value:o}=r.urlInputView.fieldView.element,a=DC(o,s);e.execute("link",a,r.getDecoratorSwitchesState()),this._closeFormView()}}),this.listenTo(r.urlInputView,"change:errorText",()=>{e.ui.update()}),this.listenTo(r,"cancel",()=>{this._closeFormView()}),r.keystrokes.set("Esc",(o,a)=>{this._closeFormView(),a()}),r}_createToolbarLinkButton(){const e=this.editor;e.ui.componentFactory.add("link",()=>{const n=this._createButton(rt);return n.set({tooltip:!0}),n}),e.ui.componentFactory.add("menuBar:link",()=>{const n=this._createButton(Xn);return n.set({role:"menuitemcheckbox"}),n})}_createButton(e){const n=this.editor,s=n.locale,r=n.commands.get("link"),o=new e(n.locale),a=s.t;return o.set({label:a("Link"),icon:EV,keystroke:yh,isToggleable:!0}),o.bind("isEnabled").to(r,"isEnabled"),o.bind("isOn").to(r,"value",l=>!!l),this.listenTo(o,"execute",()=>this._showUI(!0)),o}_enableBalloonActivators(){const e=this.editor,n=e.editing.view.document;this.listenTo(n,"click",()=>{this._getSelectedLinkElement()&&this._showUI()}),e.keystrokes.set(yh,(s,r)=>{r(),e.commands.get("link").isEnabled&&this._showUI(!0)})}_enableUserBalloonInteractions(){this.editor.keystrokes.set("Tab",(e,n)=>{this._areActionsVisible&&!this.actionsView.focusTracker.isFocused&&(this.actionsView.focus(),n())},{priority:"high"}),this.editor.keystrokes.set("Esc",(e,n)=>{this._isUIVisible&&(this._hideUI(),n())}),Za({emitter:this.formView,activator:()=>this._isUIInPanel,contextElements:()=>[this._balloon.view.element],callback:()=>this._hideUI()})}_addActionsView(){this.actionsView||this._createViews(),!this._areActionsInPanel&&this._balloon.add({view:this.actionsView,position:this._getBalloonPositionData()})}_addFormView(){if(this.formView||this._createViews(),this._isFormInPanel)return;const n=this.editor.commands.get("link");this.formView.disableCssTransitions(),this.formView.resetFormStatus(),this._balloon.add({view:this.formView,position:this._getBalloonPositionData()}),this.formView.urlInputView.fieldView.value=n.value||"",this._balloon.visibleView===this.formView&&this.formView.urlInputView.fieldView.select(),this.formView.enableCssTransitions()}_closeFormView(){const e=this.editor.commands.get("link");e.restoreManualDecoratorStates(),e.value!==void 0?this._removeFormView():this._hideUI()}_removeFormView(){this._isFormInPanel&&(this.formView.saveButtonView.focus(),this.formView.urlInputView.fieldView.reset(),this._balloon.remove(this.formView),this.editor.editing.view.focus(),this._hideFakeVisualSelection())}_showUI(e=!1){this.formView||this._createViews(),this._getSelectedLinkElement()?(this._areActionsVisible?this._addFormView():this._addActionsView(),e&&this._balloon.showStack("main")):(this._showFakeVisualSelection(),this._addActionsView(),e&&this._balloon.showStack("main"),this._addFormView()),this._startUpdatingUI()}_hideUI(){if(!this._isUIInPanel)return;const e=this.editor;this.stopListening(e.ui,"update"),this.stopListening(this._balloon,"change:visibleView"),e.editing.view.focus(),this._removeFormView(),this._balloon.remove(this.actionsView),this._hideFakeVisualSelection()}_startUpdatingUI(){const e=this.editor,n=e.editing.view.document;let s=this._getSelectedLinkElement(),r=a();const o=()=>{const l=this._getSelectedLinkElement(),c=a();s&&!l||!s&&c!==r?this._hideUI():this._isUIVisible&&this._balloon.updatePosition(this._getBalloonPositionData()),s=l,r=c};function a(){return n.selection.focus.getAncestors().reverse().find(l=>l.is("element"))}this.listenTo(e.ui,"update",o),this.listenTo(this._balloon,"change:visibleView",o)}get _isFormInPanel(){return!!this.formView&&this._balloon.hasView(this.formView)}get _areActionsInPanel(){return!!this.actionsView&&this._balloon.hasView(this.actionsView)}get _areActionsVisible(){return!!this.actionsView&&this._balloon.visibleView===this.actionsView}get _isUIInPanel(){return this._isFormInPanel||this._areActionsInPanel}get _isUIVisible(){const e=this._balloon.visibleView;return!!this.formView&&e==this.formView||this._areActionsVisible}_getBalloonPositionData(){const e=this.editor.editing.view,n=this.editor.model,s=e.document;let r;if(n.markers.has(Kr)){const o=Array.from(this.editor.editing.mapper.markerNameToElements(Kr)),a=e.createRange(e.createPositionBefore(o[0]),e.createPositionAfter(o[o.length-1]));r=e.domConverter.viewRangeToDom(a)}else r=()=>{const o=this._getSelectedLinkElement();return o?e.domConverter.mapViewToDom(o):e.domConverter.viewRangeToDom(s.selection.getFirstRange())};return{target:r}}_getSelectedLinkElement(){const e=this.editor.editing.view,n=e.document.selection,s=n.getSelectedElement();if(n.isCollapsed||s&&En(s))return W1(n.getFirstPosition());{const r=n.getFirstRange().getTrimmed(),o=W1(r.start),a=W1(r.end);return!o||o!=a?null:e.createRangeIn(o).getTrimmed().isEqual(r)?o:null}}_showFakeVisualSelection(){const e=this.editor.model;e.change(n=>{const s=e.document.selection.getFirstRange();if(e.markers.has(Kr))n.updateMarker(Kr,{range:s});else if(s.start.isAtEnd){const r=s.start.getLastMatchingPosition(({item:o})=>!e.schema.isContent(o),{boundaries:s});n.addMarker(Kr,{usingOperation:!1,affectsData:!1,range:n.createRange(r,s.end)})}else n.addMarker(Kr,{usingOperation:!1,affectsData:!1,range:s})})}_hideFakeVisualSelection(){const e=this.editor.model;e.markers.has(Kr)&&e.change(n=>{n.removeMarker(Kr)})}}function W1(i){return i.getAncestors().find(t=>Npe(t))||null}function Ype(i){const t=i.t,e=i.config.get("link.allowCreatingEmptyLinks");return[n=>{if(!e&&!n.url.length)return t("Link URL must not be empty.")}]}const Zpe=4,xV=new RegExp("(^|\\s)(((?:(?:(?:https?|ftp):)?\\/\\/)(?:\\S+(?::\\S*)?@)?(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(((?!www\\.)|(www\\.))(?![-_])(?:[-_a-z0-9\\u00a1-\\uffff]{1,63}\\.)+(?:[a-z\\u00a1-\\uffff]{2,63})))(?::\\d{2,5})?(?:[/?#]\\S*)?)|((www.|(\\S+@))((?![-_])(?:[-_a-z0-9\\u00a1-\\uffff]{1,63}\\.))+(?:[a-z\\u00a1-\\uffff]{2,63})))$","i"),Xpe=2;class Jpe extends ie{static get requires(){return[co,ww]}static get pluginName(){return"AutoLink"}static get isOfficialPlugin(){return!0}init(){const e=this.editor.model.document.selection;e.on("change:range",()=>{this.isEnabled=!e.anchor.parent.is("element","codeBlock")}),this._enableTypingHandling()}afterInit(){this._enableEnterHandling(),this._enableShiftEnterHandling(),this._enablePasteLinking()}_expandLinkRange(t,e){return e.textNode&&e.textNode.hasAttribute("linkHref")?mw(e,"linkHref",e.textNode.getAttribute("linkHref"),t):null}_selectEntireLinks(t,e){const s=this.editor.model,r=s.document.selection,o=r.getFirstPosition(),a=r.getLastPosition();let l=e.getJoined(this._expandLinkRange(s,o)||e);l&&(l=l.getJoined(this._expandLinkRange(s,a)||e)),l&&(l.start.isBefore(o)||l.end.isAfter(a))&&t.setSelection(l)}_enablePasteLinking(){const t=this.editor,e=t.model,n=e.document.selection,s=t.plugins.get("ClipboardPipeline"),r=t.commands.get("link");s.on("inputTransformation",(o,a)=>{if(!this.isEnabled||!r.isEnabled||n.isCollapsed||a.method!=="paste"||n.rangeCount>1)return;const l=n.getFirstRange(),c=a.dataTransfer.getData("text/plain");if(!c)return;const h=c.match(xV);h&&h[2]===c&&(e.change(f=>{this._selectEntireLinks(f,l),r.execute(c)}),o.stop())},{priority:"high"})}_enableTypingHandling(){const t=this.editor,e=new CC(t.model,n=>{let s=n;if(!Qpe(s))return;s=s.slice(0,-1),"!.:,;?".includes(s[s.length-1])&&(s=s.slice(0,-1));const r=l5(s);if(r)return{url:r,removedTrailingCharacters:n.length-s.length}});e.on("matched:data",(n,s)=>{const{batch:r,range:o,url:a,removedTrailingCharacters:l}=s;if(!r.isTyping)return;const c=o.end.getShiftedBy(-l),h=c.getShiftedBy(-a.length),f=t.model.createRange(h,c);this._applyAutoLink(a,f)}),e.bind("isEnabled").to(this)}_enableEnterHandling(){const t=this.editor,e=t.model,n=t.commands.get("enter");n&&n.on("execute",()=>{const s=e.document.selection.getFirstPosition();if(!s.parent.previousSibling)return;const r=e.createRangeIn(s.parent.previousSibling);this._checkAndApplyAutoLinkOnRange(r)})}_enableShiftEnterHandling(){const t=this.editor,e=t.model,n=t.commands.get("shiftEnter");n&&n.on("execute",()=>{const s=e.document.selection.getFirstPosition(),r=e.createRange(e.createPositionAt(s.parent,0),s.getShiftedBy(-1));this._checkAndApplyAutoLinkOnRange(r)})}_checkAndApplyAutoLinkOnRange(t){const e=this.editor.model,{text:n,range:s}=ML(t,e),r=l5(n);if(r){const o=e.createRange(s.end.getShiftedBy(-r.length),s.end);this._applyAutoLink(r,o)}}_applyAutoLink(t,e){const n=this.editor.model,s=this.editor.config.get("link.defaultProtocol"),r=DC(t,s);!this.isEnabled||!ebe(e,n)||!vV(r)||tbe(e)||this._persistAutoLink(r,e)}_persistAutoLink(t,e){const n=this.editor.model,s=this.editor.plugins.get("Delete");n.enqueueChange(r=>{r.setAttribute("linkHref",t,e),n.enqueueChange(()=>{s.requestUndoOnBackspace()})})}}function Qpe(i){return i.length>Zpe&&i[i.length-1]===" "&&i[i.length-2]!==" "}function l5(i){const t=xV.exec(i);return t?t[Xpe]:null}function ebe(i,t){return t.schema.checkAttributeInSelection(t.createSelection(i),"linkHref")}function tbe(i){const t=i.start.nodeAfter;return!!t&&t.hasAttribute("linkHref")}class nbe extends ie{static get requires(){return[ww,CV,Jpe]}static get pluginName(){return"Link"}static get isOfficialPlugin(){return!0}}class ibe extends ie{static get requires(){return["ImageEditing","ImageUtils",ww]}static get pluginName(){return"LinkImageEditing"}static get isOfficialPlugin(){return!0}afterInit(){const t=this.editor,e=t.model.schema;t.plugins.has("ImageBlockEditing")&&e.extend("imageBlock",{allowAttributes:["linkHref"]}),t.conversion.for("upcast").add(sbe(t)),t.conversion.for("downcast").add(rbe(t)),this._enableAutomaticDecorators(),this._enableManualDecorators()}_enableAutomaticDecorators(){const t=this.editor,n=t.commands.get("link").automaticDecorators;n.length&&t.conversion.for("downcast").add(n.getDispatcherForLinkedImage())}_enableManualDecorators(){const t=this.editor,e=t.commands.get("link");for(const n of e.manualDecorators)t.plugins.has("ImageBlockEditing")&&t.model.schema.extend("imageBlock",{allowAttributes:n.id}),t.plugins.has("ImageInlineEditing")&&t.model.schema.extend("imageInline",{allowAttributes:n.id}),t.conversion.for("downcast").add(obe(n)),t.conversion.for("upcast").add(abe(t,n))}}function sbe(i){const t=i.plugins.has("ImageInlineEditing"),e=i.plugins.get("ImageUtils");return n=>{n.on("element:a",(s,r,o)=>{const a=r.viewItem,l=e.findViewImgElement(a);if(!l)return;const c=l.findAncestor(p=>e.isBlockImageView(p));if(t&&!c)return;const h={attributes:["href"]};if(!o.consumable.consume(a,h))return;const f=a.getAttribute("href");if(!f)return;let m=r.modelCursor.parent;if(!m.is("element","imageBlock")){const p=o.convertItem(l,r.modelCursor);r.modelRange=p.modelRange,r.modelCursor=p.modelCursor,m=r.modelCursor.nodeBefore}m&&m.is("element","imageBlock")&&o.writer.setAttribute("linkHref",f,m)},{priority:"high"})}}function rbe(i){const t=i.plugins.get("ImageUtils");return e=>{e.on("attribute:linkHref:imageBlock",(n,s,r)=>{if(!r.consumable.consume(s.item,n.name))return;const o=r.mapper.toViewElement(s.item),a=r.writer,l=Array.from(o.getChildren()).find(f=>f.is("element","a")),c=t.findViewImgElement(o),h=c.parent.is("element","picture")?c.parent:c;if(l)s.attributeNewValue?a.setAttribute("href",s.attributeNewValue,l):(a.move(a.createRangeOn(h),a.createPositionAt(o,0)),a.remove(l));else{const f=a.createContainerElement("a",{href:s.attributeNewValue});a.insert(a.createPositionAt(o,0),f),a.move(a.createRangeOn(h),a.createPositionAt(f,0))}},{priority:"high"})}}function obe(i){return t=>{t.on(`attribute:${i.id}:imageBlock`,(e,n,s)=>{const r=s.mapper.toViewElement(n.item),o=Array.from(r.getChildren()).find(a=>a.is("element","a"));if(o){for(const[a,l]of xr(i.attributes))s.writer.setAttribute(a,l,o);i.classes&&s.writer.addClass(i.classes,o);for(const a in i.styles)s.writer.setStyle(a,i.styles[a],o)}})}}function abe(i,t){const e=i.plugins.has("ImageInlineEditing"),n=i.plugins.get("ImageUtils");return s=>{s.on("element:a",(r,o,a)=>{const l=o.viewItem,c=n.findViewImgElement(l);if(!c)return;const h=c.findAncestor(v=>n.isBlockImageView(v));if(e&&!h)return;const m=new Cs(t._createPattern()).match(l);if(!m||!a.consumable.consume(l,m.match))return;const p=o.modelCursor.nodeBefore||o.modelCursor.parent;a.writer.setAttribute(t.id,!0,p)},{priority:"high"})}}class lbe extends ie{static get requires(){return[ww,CV,"ImageBlockEditing"]}static get pluginName(){return"LinkImageUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.editing.view.document;this.listenTo(e,"click",(n,s)=>{this._isSelectedLinkedImage(t.model.document.selection)&&(s.preventDefault(),n.stop())},{priority:"high"}),this._createToolbarLinkImageButton()}_createToolbarLinkImageButton(){const t=this.editor,e=t.t;t.ui.componentFactory.add("linkImage",n=>{const s=new rt(n),r=t.plugins.get("LinkUI"),o=t.commands.get("link");return s.set({isEnabled:!0,label:e("Link image"),icon:EV,keystroke:yh,tooltip:!0,isToggleable:!0}),s.bind("isEnabled").to(o,"isEnabled"),s.bind("isOn").to(o,"value",a=>!!a),this.listenTo(s,"execute",()=>{this._isSelectedLinkedImage(t.model.document.selection)?r._addActionsView():r._showUI(!0)}),s})}_isSelectedLinkedImage(t){const e=t.getSelectedElement();return this.editor.plugins.get("ImageUtils").isImage(e)&&e.hasAttribute("linkHref")}}class cbe extends ie{static get requires(){return[ibe,lbe]}static get pluginName(){return"LinkImage"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class Ks{constructor(t,e){b(this,"_startElement");b(this,"_referenceIndent");b(this,"_isForward");b(this,"_includeSelf");b(this,"_sameAttributes");b(this,"_sameIndent");b(this,"_lowerIndent");b(this,"_higherIndent");this._startElement=t,this._referenceIndent=t.getAttribute("listIndent"),this._isForward=e.direction=="forward",this._includeSelf=!!e.includeSelf,this._sameAttributes=Qt(e.sameAttributes||[]),this._sameIndent=!!e.sameIndent,this._lowerIndent=!!e.lowerIndent,this._higherIndent=!!e.higherIndent}static first(t,e){const s=new this(t,e)[Symbol.iterator]();return Tn(s)}*[Symbol.iterator](){const t=[];for(const{node:e}of new Wf(this._getStartNode(),this._isForward?"forward":"backward")){const n=e.getAttribute("listIndent");if(n<this._referenceIndent){if(!this._lowerIndent)break;this._referenceIndent=n}else if(n>this._referenceIndent){if(!this._higherIndent)continue;if(!this._isForward){t.push(e);continue}}else{if(!this._sameIndent){if(this._higherIndent){t.length&&(yield*t,t.length=0);break}continue}if(this._sameAttributes.some(s=>e.getAttribute(s)!==this._startElement.getAttribute(s)))break}t.length&&(yield*t,t.length=0),yield e}}_getStartNode(){return this._includeSelf?this._startElement:this._isForward?this._startElement.nextSibling:this._startElement.previousSibling}}class Wf{constructor(t,e="forward"){b(this,"_node");b(this,"_isForward");b(this,"_previousNodesByIndent",[]);b(this,"_previous",null);b(this,"_previousNodeIndent",null);this._node=t,this._isForward=e==="forward"}[Symbol.iterator](){return this}next(){if(!Wt(this._node))return{done:!0,value:void 0};const t=this._node.getAttribute("listIndent");let e=null;if(this._previous){const s=this._previousNodeIndent;t>s?this._previousNodesByIndent[s]=this._previous:t<s?(e=this._previousNodesByIndent[t]||null,this._previousNodesByIndent.length=t):e=this._previous}const n={node:this._node,previous:this._previous,previousNodeInList:e};return this._previous=this._node,this._previousNodeIndent=t,this._node=this._isForward?this._node.nextSibling:this._node.previousSibling,{value:n,done:!1}}}class ube{constructor(t){b(this,"_listHead");this._listHead=t}[Symbol.iterator](){return new Wf(this._listHead)}}class Wu{static next(){return yi()}}function Wt(i){return!!i&&i.is("element")&&i.hasAttribute("listItemId")}function qu(i,t={}){return[...ja(i,{...t,direction:"backward"}),...ja(i,{...t,direction:"forward"})]}function ja(i,t={}){const e=t.direction=="forward",n=Array.from(new Ks(i,{...t,includeSelf:e,sameIndent:!0,sameAttributes:"listItemId"}));return e?n:n.reverse()}function dbe(i){return Array.from(new Ks(i,{direction:"forward",higherIndent:!0}))}function TV(i,t){const e=new Ks(i,{sameIndent:!0,sameAttributes:"listType",...t}),n=new Ks(i,{sameIndent:!0,sameAttributes:"listType",includeSelf:!0,direction:"forward",...t});return[...Array.from(e).reverse(),...n]}function Ko(i){return!Ks.first(i,{sameIndent:!0,sameAttributes:"listItemId"})}function c5(i){return!Ks.first(i,{direction:"forward",sameIndent:!0,sameAttributes:"listItemId"})}function qf(i,t={}){i=Qt(i);const e=t.withNested!==!1,n=new Set;for(const s of i)for(const r of qu(s,{higherIndent:e}))n.add(r);return lc(n)}function vw(i){i=Qt(i);const t=new Set;for(const e of i)for(const n of TV(e))t.add(n);return lc(t)}function BC(i,t){const e=ja(i,{direction:"forward"}),n=Wu.next();for(const s of e)t.setAttribute("listItemId",n,s);return e}function w_(i,t,e){const n={};for(const[r,o]of t.getAttributes())r.startsWith("list")&&(n[r]=o);const s=ja(i,{direction:"forward"});for(const r of s)e.setAttributes(n,r);return s}function v_(i,t,{expand:e,indentBy:n=1}={}){i=Qt(i);const s=e?qf(i):i;for(const r of s){const o=r.getAttribute("listIndent")+n;o<0?yw(r,t):t.setAttribute("listIndent",o,r)}return s}function hbe(i,t){i=Qt(i);const e=qf(i),n=new Set,s=Math.min(...e.map(o=>o.getAttribute("listIndent"))),r=new Map;for(const o of e)r.set(o,Ks.first(o,{lowerIndent:!0}));for(const o of e){if(n.has(o))continue;n.add(o);const a=o.getAttribute("listIndent")-1;if(a<0){yw(o,t);continue}if(o.getAttribute("listIndent")==s){const l=mbe(o,r.get(o),t);for(const c of l)n.add(c);if(l.length)continue}t.setAttribute("listIndent",a,o)}return lc(n)}function yw(i,t){i=Qt(i);for(const e of i)e.is("element","listItem")&&t.rename(e,"paragraph");for(const e of i)for(const n of e.getAttributeKeys())n.startsWith("list")&&t.removeAttribute(n,e);return i}function pf(i){if(!i.length)return!1;const t=i[0].getAttribute("listItemId");return t?!i.some(e=>e.getAttribute("listItemId")!=t):!1}function fbe(i,t){const e=[];let n=Number.POSITIVE_INFINITY;for(const{node:s}of new Wf(i.nextSibling)){const r=s.getAttribute("listIndent");if(r==0)break;r<n&&(n=r);const o=r-n;t.setAttribute("listIndent",o,s),e.push(s)}return e}function lc(i){return Array.from(i).filter(t=>t.root.rootName!=="$graveyard").sort((t,e)=>t.index-e.index)}function bf(i){const t=i.document.selection.getSelectedElement();return t&&i.schema.isObject(t)&&i.schema.isBlock(t)?t:null}function q1(i,t){return t.checkChild(i.parent,"listItem")&&t.checkChild(i,"$text")&&!t.isObject(i)}function ob(i){return i=="numbered"||i=="customNumbered"}function mbe(i,t,e){return ja(t,{direction:"forward"}).pop().index>i.index?w_(i,t,e):[]}class u5 extends lt{constructor(e,n){super(e);b(this,"_direction");this._direction=n}refresh(){this.isEnabled=this._checkEnabled()}execute(){const e=this.editor.model,n=d5(e.document.selection);e.change(s=>{const r=[];pf(n)&&!Ko(n[0])?(this._direction=="forward"&&r.push(...v_(n,s)),r.push(...BC(n[0],s))):this._direction=="forward"?r.push(...v_(n,s,{expand:!0})):r.push(...hbe(n,s));for(const o of r){if(!o.hasAttribute("listType"))continue;const a=Ks.first(o,{sameIndent:!0});a&&s.setAttribute("listType",a.getAttribute("listType"),o)}this._fireAfterExecute(r)})}_fireAfterExecute(e){this.fire("afterExecute",lc(new Set(e)))}_checkEnabled(){let e=d5(this.editor.model.document.selection),n=e[0];if(!n)return!1;if(this._direction=="backward"||pf(e)&&!Ko(e[0]))return!0;e=qf(e),n=e[0];const s=Ks.first(n,{sameIndent:!0});return s?s.getAttribute("listType")==n.getAttribute("listType"):!1}}function d5(i){const t=Array.from(i.getSelectedBlocks()),e=t.findIndex(n=>!Wt(n));return e!=-1&&(t.length=e),t}class _h extends lt{constructor(e,n,s={}){super(e);b(this,"type");b(this,"_listWalkerOptions");this.type=n,this._listWalkerOptions=s.multiLevel?{higherIndent:!0,lowerIndent:!0,sameAttributes:[]}:void 0}refresh(){this.value=this._getValue(),this.isEnabled=this._checkEnabled()}execute(e={}){const n=this.editor.model,s=n.document,r=bf(n),o=Array.from(s.selection.getSelectedBlocks()).filter(l=>n.schema.checkAttribute(l,"listType")||q1(l,n.schema)),a=e.forceValue!==void 0?!e.forceValue:this.value;n.change(l=>{if(a){const c=o[o.length-1],h=ja(c,{direction:"forward"}),f=[];h.length>1&&f.push(...BC(h[1],l)),f.push(...yw(o,l)),f.push(...fbe(c,l)),this._fireAfterExecute(f)}else if((r||s.selection.isCollapsed)&&Wt(o[0])){const c=TV(r||o[0],this._listWalkerOptions);for(const h of c)l.setAttributes({...e.additionalAttributes,listType:this.type},h);this._fireAfterExecute(c)}else{const c=[];for(const h of o)if(!h.hasAttribute("listType"))!h.is("element","listItem")&&q1(h,n.schema)&&l.rename(h,"listItem"),l.setAttributes({...e.additionalAttributes,listIndent:0,listItemId:Wu.next(),listType:this.type},h),c.push(h);else for(const f of qf(h,{withNested:!1}))f.getAttribute("listType")!=this.type&&(l.setAttributes({...e.additionalAttributes,listType:this.type},f),c.push(f));this._fireAfterExecute(c)}})}_fireAfterExecute(e){this.fire("afterExecute",lc(new Set(e)))}_getValue(){const e=this.editor.model.document.selection,n=Array.from(e.getSelectedBlocks());if(!n.length)return!1;for(const s of n)if(s.getAttribute("listType")!=this.type)return!1;return!0}_checkEnabled(){const e=this.editor.model,n=e.schema,s=e.document.selection,r=Array.from(s.getSelectedBlocks());if(!r.length)return!1;if(this.value)return!0;for(const o of r)if(n.checkAttribute(o,"listType")||q1(o,n))return!0;return!1}}class h5 extends lt{constructor(e,n){super(e);b(this,"_direction");this._direction=n}refresh(){this.isEnabled=this._checkEnabled()}execute({shouldMergeOnBlocksContentLevel:e=!1}={}){const n=this.editor.model,s=n.document.selection,r=[];n.change(o=>{const{firstElement:a,lastElement:l}=this._getMergeSubjectElements(s,e),c=a.getAttribute("listIndent")||0,h=l.getAttribute("listIndent"),f=l.getAttribute("listItemId");if(c!=h){const m=dbe(l);r.push(...v_([l,...m],o,{indentBy:c-h,expand:c<h}))}if(e){let m=s;s.isCollapsed&&(m=o.createSelection(o.createRange(o.createPositionAt(a,"end"),o.createPositionAt(l,0)))),n.deleteContent(m,{doNotResetEntireContent:s.isCollapsed});const p=m.getLastPosition().parent,v=p.nextSibling;r.push(p),v&&v!==l&&v.getAttribute("listItemId")==f&&r.push(...w_(v,p,o))}else r.push(...w_(l,a,o));this._fireAfterExecute(r)})}_fireAfterExecute(e){this.fire("afterExecute",lc(new Set(e)))}_checkEnabled(){const e=this.editor.model,n=e.document.selection,s=bf(e);if(n.isCollapsed||s){const r=s||n.getFirstPosition().parent;if(!Wt(r))return!1;const o=this._direction=="backward"?r.previousSibling:r.nextSibling;if(!o||pf([r,o]))return!1}else{const r=n.getLastPosition(),o=n.getFirstPosition();if(r.parent===o.parent||!Wt(r.parent))return!1}return!0}_getMergeSubjectElements(e,n){const s=this.editor.model,r=bf(s);let o,a;if(e.isCollapsed||r){const l=r||e.getFirstPosition().parent,c=Ko(l);this._direction=="backward"?(a=l,c&&!n?o=Ks.first(l,{sameIndent:!0,lowerIndent:!0}):o=l.previousSibling):(o=l,a=l.nextSibling)}else o=e.getFirstPosition().parent,a=e.getLastPosition().parent;return{firstElement:o,lastElement:a}}}class f5 extends lt{constructor(e,n){super(e);b(this,"_direction");this._direction=n}refresh(){this.isEnabled=this._checkEnabled()}execute(){this.editor.model.change(n=>{const s=BC(this._getStartBlock(),n);this._fireAfterExecute(s)})}_fireAfterExecute(e){this.fire("afterExecute",lc(new Set(e)))}_checkEnabled(){const e=this.editor.model.document.selection,n=this._getStartBlock();return e.isCollapsed&&Wt(n)&&!Ko(n)}_getStartBlock(){const n=this.editor.model.document.selection.getFirstPosition().parent;return this._direction=="before"?n:n.nextSibling}}class gbe extends ie{static get pluginName(){return"ListUtils"}static get isOfficialPlugin(){return!0}expandListBlocksToCompleteList(t){return vw(t)}isFirstBlockOfListItem(t){return Ko(t)}isListItemBlock(t){return Wt(t)}expandListBlocksToCompleteItems(t,e={}){return qf(t,e)}isNumberedListType(t){return ob(t)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function pbe(i){return i.is("element","ol")||i.is("element","ul")}function y_(i){return i.is("element","li")}function bbe(i){let t=0,e=i.parent;for(;e;){if(y_(e))t++;else{const n=e.previousSibling;n&&y_(n)&&t++}e=e.parent}return t}function wbe(i,t,e,n=SV(e,t)){return i.createAttributeElement(kV(e),null,{priority:2*t/100-100,id:n})}function vbe(i,t,e){return i.createAttributeElement("li",null,{priority:(2*t+1)/100-100,id:e})}function kV(i){return i=="numbered"||i=="customNumbered"?"ol":"ul"}function SV(i,t){return`list-${i}-${t}`}function hr(i,t,e){const n=i.nodeBefore;if(Wt(n)){let s=n;for(const{node:r}of new Wf(s,"backward"))if(s=r,e.has(s)||(e.add(s),t.has(n)))return;t.add(s)}else{const s=i.nodeAfter;Wt(s)&&t.add(s)}}function ybe(i,t){let e=0,n=-1,s=null,r=!1;for(const{node:o}of i){const a=o.getAttribute("listIndent");if(a>e){let l;s===null?(s=a-e,l=e):(s>a&&(s=a),l=a-s),l>n+1&&(l=n+1),t.setAttribute("listIndent",l,o),r=!0,n=l}else s=null,e=a+1,n=a}return r}function _be(i,t,e){const n=new Set;let s=!1;for(const{node:r}of i){if(n.has(r))continue;let o=r.getAttribute("listType"),a=r.getAttribute("listItemId");if(t.has(a)&&(a=Wu.next()),t.add(a),r.is("element","listItem")){r.getAttribute("listItemId")!=a&&(e.setAttribute("listItemId",a,r),s=!0);continue}for(const l of ja(r,{direction:"forward"}))n.add(l),l.getAttribute("listType")!=o&&(a=Wu.next(),o=l.getAttribute("listType")),l.getAttribute("listItemId")!=a&&(e.setAttribute("listItemId",a,l),s=!0)}return s}function Ebe(){return(i,t,e)=>{const{writer:n,schema:s}=e;if(!t.modelRange)return;const r=Array.from(t.modelRange.getItems({shallow:!0})).filter(f=>s.checkAttribute(f,"listItemId"));if(!r.length)return;const o=Wu.next(),a=bbe(t.viewItem);let l=t.viewItem.parent&&t.viewItem.parent.is("element","ol")?"numbered":"bulleted";const c=r[0].getAttribute("listType");c&&(l=c);const h={listItemId:o,listIndent:a,listType:l};for(const f of r)f.hasAttribute("listItemId")||n.setAttributes(h,f);r.length>1&&r[1].getAttribute("listItemId")!=h.listItemId&&e.keepEmptyElement(r[0])}}function Cbe(i,t,e,n){return()=>{const a=i.document.differ.getChanges(),l=[],c=new Set,h=new Set,f=new Set;for(const m of a)if(m.type=="insert"&&m.name!="$text")hr(m.position,c,f),m.attributes.has("listItemId")?h.add(m.position.nodeAfter):hr(m.position.getShiftedBy(m.length),c,f);else if(m.type=="remove"&&m.attributes.has("listItemId"))hr(m.position,c,f);else if(m.type=="attribute"){const p=m.range.start.nodeAfter;e.includes(m.attributeKey)?(hr(m.range.start,c,f),m.attributeNewValue===null?(hr(m.range.start.getShiftedBy(1),c,f),r(p)&&l.push(p)):h.add(p)):Wt(p)&&r(p)&&l.push(p)}for(const m of c.values())l.push(...s(m,h));for(const m of new Set(l))t.reconvertItem(m)};function s(a,l){const c=[],h=new Set,f=[];for(const{node:m,previous:p}of new Wf(a)){if(h.has(m))continue;const v=m.getAttribute("listIndent");p&&v<p.getAttribute("listIndent")&&(f.length=v+1),f[v]=Object.fromEntries(Array.from(m.getAttributes()).filter(([E])=>e.includes(E)));const _=ja(m,{direction:"forward"});for(const E of _)h.add(E),(r(E,_)||o(E,f,l))&&c.push(E)}return c}function r(a,l){const c=t.mapper.toViewElement(a);if(!c)return!1;if(n.fire("checkElement",{modelElement:a,viewElement:c}))return!0;if(!a.is("element","paragraph")&&!a.is("element","listItem"))return!1;const f=PV(a,e,l);return f&&c.is("element","p")?!0:!!(!f&&c.is("element","span"))}function o(a,l,c){if(c.has(a))return!1;const h=t.mapper.toViewElement(a);let f=l.length-1;for(let m=h.parent;!m.is("editableElement");m=m.parent){const p=y_(m),v=pbe(m);if(!v&&!p)continue;const _=`checkAttributes:${p?"item":"list"}`;if(n.fire(_,{viewElement:m,modelAttributes:l[f]}))break;if(v&&(f--,f<0))return!1}return!0}}function m5(i,t,e,{dataPipeline:n}={}){const s=Ibe(i);return(r,o,a)=>{const{writer:l,mapper:c,consumable:h}=a,f=o.item;if(!i.includes(o.attributeKey)||!s(f,h))return;const m=Tbe(f,c,e);AV(m,l,c),Abe(m,l);const p=Sbe(f,m,t,l,{dataPipeline:n});Pbe(f,p,t,l)}}function xbe(i){return(t,e,n)=>{const{writer:s,mapper:r}=n,o=t.name.split(":")[1];if(!i.checkAttribute(o,"listItemId"))return;const a=r.toViewPosition(e.position),l=e.position.getShiftedBy(e.length),c=r.toViewPosition(l,{isPhantom:!0}),f=s.createRange(a,c).getTrimmed().end.nodeBefore;/* istanbul ignore next -- @preserve */f&&AV(f,s,r)}}function g5(i,{dataPipeline:t}={}){return(e,{writer:n})=>{if(!PV(e,i))return null;if(!t)return n.createContainerElement("span",{class:"ck-list-bogus-paragraph"});const s=n.createContainerElement("p");return n.setCustomProperty("dataPipeline:transparentRendering",!0,s),s}}function Tbe(i,t,e){const n=e.createRangeOn(i);return t.toViewRange(n).getTrimmed().end.nodeBefore}function kbe(i,t){return(e,n)=>{if(n.modelPosition.offset>0)return;const s=n.modelPosition.parent;if(!Wt(s)||!i.some(c=>c.scope=="itemMarker"&&c.canInjectMarkerIntoElement&&c.canInjectMarkerIntoElement(s)))return;const r=n.mapper.toViewElement(s),o=t.createRangeIn(r),a=o.getWalker();let l=o.start;for(const{item:c}of a){if(c.is("element")&&n.mapper.toModelElement(c)||c.is("$textProxy"))break;c.is("element")&&c.getCustomProperty("listItemMarker")&&(l=t.createPositionAfter(c),a.skip(({previousPosition:h})=>!h.isEqual(l)))}n.viewPosition=l}}function AV(i,t,e){for(;i.parent.is("attributeElement")&&i.parent.getCustomProperty("listItemWrapper");)t.unwrap(t.createRangeOn(i),i.parent);const n=[];s(t.createPositionBefore(i).getWalker({direction:"backward"})),s(t.createRangeIn(i).getWalker());for(const r of n)t.remove(r);function s(r){for(const{item:o}of r){if(o.is("element")&&e.toModelElement(o))break;o.is("element")&&o.getCustomProperty("listItemMarker")&&n.push(o)}}}function Sbe(i,t,e,n,{dataPipeline:s}){let r=n.createRangeOn(t);if(!Ko(i))return r;for(const o of e){if(o.scope!="itemMarker")continue;const a=o.createElement(n,i,{dataPipeline:s});if(!a||(n.setCustomProperty("listItemMarker",!0,a),o.canInjectMarkerIntoElement&&o.canInjectMarkerIntoElement(i)?n.insert(n.createPositionAt(t,0),a):(n.insert(r.start,a),r=n.createRange(n.createPositionBefore(a),n.createPositionAfter(t))),!o.createWrapperElement||!o.canWrapElement))continue;const l=o.createWrapperElement(n,i,{dataPipeline:s});n.setCustomProperty("listItemWrapper",!0,l),o.canWrapElement(i)?r=n.wrap(r,l):(r=n.wrap(n.createRangeOn(a),l),r=n.createRange(r.start,n.createPositionAfter(t)))}return r}function Abe(i,t){let e=i.parent;for(;e.is("attributeElement")&&["ul","ol","li"].includes(e.name);){const n=e.parent;t.unwrap(t.createRangeOn(i),e),e=n}}function Pbe(i,t,e,n){if(!i.hasAttribute("listIndent"))return;const s=i.getAttribute("listIndent");let r=i;for(let o=s;o>=0;o--){const a=vbe(n,o,r.getAttribute("listItemId")),l=wbe(n,o,r.getAttribute("listType"));for(const c of e)(c.scope=="list"||c.scope=="item")&&r.hasAttribute(c.attributeName)&&c.setAttributeOnDowncast(n,r.getAttribute(c.attributeName),c.scope=="list"?l:a);if(t=n.wrap(t,a),t=n.wrap(t,l),o==0||(r=Ks.first(r,{lowerIndent:!0}),!r))break}}function Ibe(i){return(t,e)=>{const n=[];for(const s of i)t.hasAttribute(s)&&n.push(`attribute:${s}`);return n.every(s=>e.test(t,s)!==!1)?(n.forEach(s=>e.consume(t,s)),!0):!1}}function PV(i,t,e=qu(i)){if(!Wt(i))return!1;for(const n of i.getAttributeKeys())if(!(n.startsWith("selection:")||n=="htmlEmptyBlock")&&!t.includes(n))return!1;return e.length<2}const cp=["listType","listIndent","listItemId"];class wf extends ie{constructor(e){super(e);b(this,"_downcastStrategies",[]);e.config.define("list.multiBlock",!0)}static get pluginName(){return"ListEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[gw,co,gbe,Gs]}init(){const e=this.editor,n=e.model,s=e.config.get("list.multiBlock");if(e.plugins.has("LegacyListEditing"))throw new B("list-feature-conflict",this,{conflictPlugin:"LegacyListEditing"});n.schema.register("$listItem",{allowAttributes:cp}),s?(n.schema.extend("$container",{allowAttributesOf:"$listItem"}),n.schema.extend("$block",{allowAttributesOf:"$listItem"}),n.schema.extend("$blockObject",{allowAttributesOf:"$listItem"})):n.schema.register("listItem",{inheritAllFrom:"$block",allowAttributesOf:"$listItem"});for(const r of cp)n.schema.setAttributeProperties(r,{copyOnReplace:!0});e.commands.add("numberedList",new _h(e,"numbered")),e.commands.add("bulletedList",new _h(e,"bulleted")),e.commands.add("customNumberedList",new _h(e,"customNumbered",{multiLevel:!0})),e.commands.add("customBulletedList",new _h(e,"customBulleted",{multiLevel:!0})),e.commands.add("indentList",new u5(e,"forward")),e.commands.add("outdentList",new u5(e,"backward")),e.commands.add("splitListItemBefore",new f5(e,"before")),e.commands.add("splitListItemAfter",new f5(e,"after")),s&&(e.commands.add("mergeListItemBackward",new h5(e,"backward")),e.commands.add("mergeListItemForward",new h5(e,"forward"))),this._setupDeleteIntegration(),this._setupEnterIntegration(),this._setupTabIntegration(),this._setupClipboardIntegration(),this._setupAccessibilityIntegration()}afterInit(){const n=this.editor.commands,s=n.get("indent"),r=n.get("outdent");s&&s.registerChildCommand(n.get("indentList"),{priority:"high"}),r&&r.registerChildCommand(n.get("outdentList"),{priority:"lowest"}),this._setupModelPostFixing(),this._setupConversion()}registerDowncastStrategy(e){this._downcastStrategies.push(e)}getListAttributeNames(){return[...cp,...this._downcastStrategies.map(e=>e.attributeName)]}_setupDeleteIntegration(){const e=this.editor,n=e.commands.get("mergeListItemBackward"),s=e.commands.get("mergeListItemForward");this.listenTo(e.editing.view.document,"delete",(r,o)=>{const a=e.model.document.selection;bf(e.model)||e.model.change(()=>{const l=a.getFirstPosition();if(a.isCollapsed&&o.direction=="backward"){if(!l.isAtStart)return;const c=l.parent;if(!Wt(c))return;if(!Ks.first(c,{sameAttributes:"listType",sameIndent:!0})&&c.getAttribute("listIndent")===0)c5(c)||e.execute("splitListItemAfter"),e.execute("outdentList");else{if(!n||!n.isEnabled)return;n.execute({shouldMergeOnBlocksContentLevel:p5(e.model,"backward")})}o.preventDefault(),r.stop()}else{if(a.isCollapsed&&!a.getLastPosition().isAtEnd||!s||!s.isEnabled)return;s.execute({shouldMergeOnBlocksContentLevel:p5(e.model,"forward")}),o.preventDefault(),r.stop()}})},{context:"li"})}_setupEnterIntegration(){const e=this.editor,n=e.model,s=e.commands,r=s.get("enter");this.listenTo(e.editing.view.document,"enter",(o,a)=>{const l=n.document,c=l.selection.getFirstPosition().parent;if(l.selection.isCollapsed&&Wt(c)&&c.isEmpty&&!a.isSoft){const h=Ko(c),f=c5(c);h&&f?(e.execute("outdentList"),a.preventDefault(),o.stop()):h&&!f?(e.execute("splitListItemAfter"),a.preventDefault(),o.stop()):f&&(e.execute("splitListItemBefore"),a.preventDefault(),o.stop())}},{context:"li"}),this.listenTo(r,"afterExecute",()=>{const o=s.get("splitListItemBefore");if(o.refresh(),!o.isEnabled)return;const l=e.model.document.selection.getLastPosition().parent;qu(l).length===2&&o.execute()})}_setupTabIntegration(){const e=this.editor;this.listenTo(e.editing.view.document,"tab",(n,s)=>{const r=s.shiftKey?"outdentList":"indentList";this.editor.commands.get(r).isEnabled&&(e.execute(r),s.stopPropagation(),s.preventDefault(),n.stop())},{context:"li"})}_setupConversion(){const e=this.editor,n=e.model,s=this.getListAttributeNames(),r=e.config.get("list.multiBlock"),o=r?"paragraph":"listItem";e.conversion.for("upcast").elementToElement({view:"li",model:(l,{writer:c})=>c.createElement(o,{listType:""})}).elementToElement({view:"p",model:(l,{writer:c})=>l.parent&&l.parent.is("element","li")?c.createElement(o,{listType:""}):null,converterPriority:"high"}).add(l=>{l.on("element:li",Ebe())}),r||e.conversion.for("downcast").elementToElement({model:"listItem",view:"p"}),e.conversion.for("editingDowncast").elementToElement({model:o,view:g5(s),converterPriority:"high"}).add(l=>{l.on("attribute",m5(s,this._downcastStrategies,n)),l.on("remove",xbe(n.schema))}),e.conversion.for("dataDowncast").elementToElement({model:o,view:g5(s,{dataPipeline:!0}),converterPriority:"high"}).add(l=>{l.on("attribute",m5(s,this._downcastStrategies,n,{dataPipeline:!0}))});const a=kbe(this._downcastStrategies,e.editing.view);e.editing.mapper.on("modelToViewPosition",a),e.data.mapper.on("modelToViewPosition",a),this.listenTo(n.document,"change:data",Cbe(n,e.editing,s,this),{priority:"high"}),this.on("checkAttributes:item",(l,{viewElement:c,modelAttributes:h})=>{c.id!=h.listItemId&&(l.return=!0,l.stop())}),this.on("checkAttributes:list",(l,{viewElement:c,modelAttributes:h})=>{(c.name!=kV(h.listType)||c.id!=SV(h.listType,h.listIndent))&&(l.return=!0,l.stop())})}_setupModelPostFixing(){const e=this.editor.model,n=this.getListAttributeNames();e.document.registerPostFixer(s=>Rbe(e,s,n,this)),this.on("postFixer",(s,{listNodes:r,writer:o})=>{s.return=ybe(r,o)||s.return},{priority:"high"}),this.on("postFixer",(s,{listNodes:r,writer:o,seenIds:a})=>{s.return=_be(r,a,o)||s.return},{priority:"high"})}_setupClipboardIntegration(){const e=this.editor.model,n=this.editor.plugins.get("ClipboardPipeline");this.listenTo(e,"insertContent",Obe(e),{priority:"high"}),this.listenTo(n,"outputTransformation",(s,r)=>{e.change(o=>{const a=Array.from(r.content.getChildren()),l=a[a.length-1];if(a.length>1&&l.is("element")&&l.isEmpty&&a.slice(0,-1).every(Wt)&&o.remove(l),r.method=="copy"||r.method=="cut"){const c=Array.from(r.content.getChildren());pf(c)&&yw(c,o)}})})}_setupAccessibilityIntegration(){const e=this.editor,n=e.t;e.accessibility.addKeystrokeInfoGroup({id:"list",label:n("Keystrokes that can be used in a list"),keystrokes:[{label:n("Increase list item indent"),keystroke:"Tab"},{label:n("Decrease list item indent"),keystroke:"Shift+Tab"}]})}}function Rbe(i,t,e,n){const s=i.document.differ.getChanges(),r=new Set,o=new Set,a=n.editor.config.get("list.multiBlock");let l=!1;for(const h of s){if(h.type=="insert"&&h.name!="$text"){const f=h.position.nodeAfter;if(!i.schema.checkAttribute(f,"listItemId"))for(const m of Array.from(f.getAttributeKeys()))e.includes(m)&&(t.removeAttribute(m,f),l=!0);hr(h.position,o,r),h.attributes.has("listItemId")||hr(h.position.getShiftedBy(h.length),o,r);for(const{item:m,previousPosition:p}of i.createRangeIn(f))Wt(m)&&hr(p,o,r)}else h.type=="remove"?hr(h.position,o,r):h.type=="attribute"&&e.includes(h.attributeKey)&&(hr(h.range.start,o,r),h.attributeNewValue===null&&hr(h.range.start.getShiftedBy(1),o,r));if(!a&&h.type=="attribute"&&cp.includes(h.attributeKey)){const f=h.range.start.nodeAfter;h.attributeNewValue===null&&f&&f.is("element","listItem")?(t.rename(f,"paragraph"),l=!0):h.attributeOldValue===null&&f&&f.is("element")&&f.name!="listItem"&&(t.rename(f,"listItem"),l=!0)}}const c=new Set;for(const h of o.values())l=n.fire("postFixer",{listNodes:new ube(h),listHead:h,writer:t,seenIds:c})||l;return l}function Obe(i){return(t,[e,n])=>{const s=e.is("documentFragment")?Array.from(e.getChildren()):[e];if(!s.length)return;const o=(n?i.createSelection(n):i.document.selection).getFirstPosition();let a;if(Wt(o.parent))a=o.parent;else if(Wt(o.nodeBefore)&&Wt(o.nodeAfter))a=o.nodeBefore;else return;i.change(l=>{const c=a.getAttribute("listType"),h=a.getAttribute("listIndent"),f=s[0].getAttribute("listIndent")||0,m=Math.max(h-f,0);for(const p of s){const v=Wt(p);a.is("element","listItem")&&p.is("element","paragraph")&&l.rename(p,"listItem"),l.setAttributes({listIndent:(v?p.getAttribute("listIndent"):0)+m,listItemId:v?p.getAttribute("listItemId"):Wu.next(),listType:c},p)}})}}function p5(i,t){const e=i.document.selection;if(!e.isCollapsed)return!bf(i);if(t==="forward")return!0;const s=e.getFirstPosition().parent,r=s.previousSibling;return i.schema.isObject(r)?!1:r.isEmpty?!0:pf([s,r])}function __(i,t,e,n){i.ui.componentFactory.add(t,()=>{const s=b5(rt,i,t,e,n);return s.set({tooltip:!0,isToggleable:!0}),s}),i.ui.componentFactory.add(`menuBar:${t}`,()=>{const s=b5(Xn,i,t,e,n);return s.set({role:"menuitemcheckbox",isToggleable:!0}),s})}function b5(i,t,e,n,s){const r=t.commands.get(e),o=new i(t.locale);return o.set({label:n,icon:s}),o.bind("isOn","isEnabled").to(r,"value","isEnabled"),o.on("execute",()=>{t.execute(e),t.editing.view.focus()}),o}class Nbe extends ie{static get pluginName(){return"ListUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor.t;this.editor.ui.componentFactory.has("numberedList")||__(this.editor,"numberedList",t("Numbered List"),ke.numberedList),this.editor.ui.componentFactory.has("bulletedList")||__(this.editor,"bulletedList",t("Bulleted List"),ke.bulletedList)}}class Mbe extends ie{static get requires(){return[wf,Nbe]}static get pluginName(){return"List"}static get isOfficialPlugin(){return!0}}class Lbe extends lt{refresh(){const t=this._getValue();this.value=t,this.isEnabled=t!=null}execute({startIndex:t=1}={}){const e=this.editor.model,n=e.document;let s=Array.from(n.selection.getSelectedBlocks()).filter(r=>Wt(r)&&ob(r.getAttribute("listType")));s=vw(s),e.change(r=>{for(const o of s)r.setAttribute("listStart",t>=0?t:1,o)})}_getValue(){const e=this.editor.model.document,n=Tn(e.selection.getSelectedBlocks());return n&&Wt(n)&&ob(n.getAttribute("listType"))?n.getAttribute("listStart"):null}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const IV={},RV={},OV={},NV=[{listStyle:"disc",typeAttribute:"disc",listType:"bulleted"},{listStyle:"circle",typeAttribute:"circle",listType:"bulleted"},{listStyle:"square",typeAttribute:"square",listType:"bulleted"},{listStyle:"decimal",typeAttribute:"1",listType:"numbered"},{listStyle:"decimal-leading-zero",typeAttribute:null,listType:"numbered"},{listStyle:"lower-roman",typeAttribute:"i",listType:"numbered"},{listStyle:"upper-roman",typeAttribute:"I",listType:"numbered"},{listStyle:"lower-alpha",typeAttribute:"a",listType:"numbered"},{listStyle:"upper-alpha",typeAttribute:"A",listType:"numbered"},{listStyle:"lower-latin",typeAttribute:"a",listType:"numbered"},{listStyle:"upper-latin",typeAttribute:"A",listType:"numbered"}];for(const{listStyle:i,typeAttribute:t,listType:e}of NV)IV[i]=e,RV[i]=t,t&&(OV[t]=i);function MV(){return NV.map(i=>i.listStyle)}function FC(i){return IV[i]||null}function LV(i){return OV[i]||null}function E_(i){return RV[i]||null}function Vbe(i){switch(i){case"lower-alpha":return"lower-latin";case"upper-alpha":return"upper-latin";default:return i}}class Dbe extends lt{constructor(e,n,s){super(e);b(this,"defaultType");b(this,"_supportedTypes");this.defaultType=n,this._supportedTypes=s}refresh(){this.value=this._getValue(),this.isEnabled=this._checkEnabled()}execute(e={}){const n=this.editor.model,s=n.document;n.change(r=>{this._tryToConvertItemsToList(e);let o=Array.from(s.selection.getSelectedBlocks()).filter(a=>a.hasAttribute("listType"));if(o.length){o=vw(o);for(const a of o)r.setAttribute("listStyle",e.type||this.defaultType,a)}})}isStyleTypeSupported(e){return this._supportedTypes?this._supportedTypes.includes(e):!0}_getValue(){const e=Tn(this.editor.model.document.selection.getSelectedBlocks());return Wt(e)?e.getAttribute("listStyle"):null}_checkEnabled(){const e=this.editor,n=e.commands.get("numberedList"),s=e.commands.get("bulletedList");return n.isEnabled||s.isEnabled}_tryToConvertItemsToList(e){if(!e.type)return;const n=FC(e.type);if(!n)return;const s=this.editor,r=`${n}List`;s.commands.get(r).value||s.execute(r)}}class Bbe extends lt{refresh(){const t=this._getValue();this.value=t,this.isEnabled=t!=null}execute(t={}){const e=this.editor.model,n=e.document;let s=Array.from(n.selection.getSelectedBlocks()).filter(r=>Wt(r)&&r.getAttribute("listType")=="numbered");s=vw(s),e.change(r=>{for(const o of s)r.setAttribute("listReversed",!!t.reversed,o)})}_getValue(){const e=this.editor.model.document,n=Tn(e.selection.getSelectedBlocks());return Wt(n)&&n.getAttribute("listType")=="numbered"?n.getAttribute("listReversed"):null}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function w5(i){return(t,e,n)=>{const{writer:s,schema:r,consumable:o}=n;if(o.test(e.viewItem,i.viewConsumables)===!1)return;e.modelRange||Object.assign(e,n.convertChildren(e.viewItem,e.modelCursor));let a=!1;for(const l of e.modelRange.getItems({shallow:!0}))r.checkAttribute(l,i.attributeName)&&i.appliesToListItem(l)&&(l.hasAttribute(i.attributeName)||(s.setAttribute(i.attributeName,i.getAttributeOnUpcast(e.viewItem),l),a=!0));a&&o.consume(e.viewItem,i.viewConsumables)}}class Fbe extends ie{static get pluginName(){return"ListPropertiesUtils"}static get isOfficialPlugin(){return!0}getAllSupportedStyleTypes(){return MV()}getListTypeFromListStyleType(t){return FC(t)}getListStyleTypeFromTypeAttribute(t){return LV(t)}getTypeAttributeFromListStyleType(t){return E_(t)}}function VV(i){const{startIndex:t,reversed:e,styles:n}=i;return{styles:$be(n),startIndex:t||!1,reversed:e||!1}}function $be(i){const t={listTypes:["bulleted","numbered"],useAttribute:!1};return i===!0||(i?Array.isArray(i)||typeof i=="string"?t.listTypes=Qt(i):(t.listTypes=i.listTypes?Qt(i.listTypes):t.listTypes,t.useAttribute=!!i.useAttribute,i.listStyleTypes&&(t.listStyleTypes=i.listStyleTypes)):t.listTypes=[]),t}const ch="default";class zbe extends ie{static get requires(){return[wf,Fbe]}static get pluginName(){return"ListPropertiesEditing"}static get isOfficialPlugin(){return!0}constructor(t){super(t),t.config.define("list.properties",{styles:!0,startIndex:!1,reversed:!1})}init(){const t=this.editor,e=t.model,n=t.plugins.get(wf),s=t.config.get("list.properties"),r=jbe(s);for(const o of r)o.addCommand(t),e.schema.extend("$listItem",{allowAttributes:o.attributeName}),n.registerDowncastStrategy({scope:"list",attributeName:o.attributeName,setAttributeOnDowncast(a,l,c){o.setAttributeOnDowncast(a,l,c)}});t.conversion.for("upcast").add(o=>{for(const a of r)o.on("element:ol",w5(a)),o.on("element:ul",w5(a))}),n.on("checkAttributes:list",(o,{viewElement:a,modelAttributes:l})=>{for(const c of r)c.getAttributeOnUpcast(a)!=l[c.attributeName]&&(o.return=!0,o.stop())}),this.listenTo(t.commands.get("indentList"),"afterExecute",(o,a)=>{e.change(l=>{for(const c of a)for(const h of r)h.appliesToListItem(c)&&l.setAttribute(h.attributeName,h.defaultValue,c)})}),n.on("postFixer",(o,{listNodes:a,writer:l})=>{for(const{node:c}of a)for(const h of r)h.hasValidAttribute(c)||(h.appliesToListItem(c)?l.setAttribute(h.attributeName,h.defaultValue,c):l.removeAttribute(h.attributeName,c),o.return=!0)}),n.on("postFixer",(o,{listNodes:a,writer:l})=>{for(const{node:c,previousNodeInList:h}of a)if(h&&h.getAttribute("listType")==c.getAttribute("listType"))for(const f of r){const{attributeName:m}=f;if(!f.appliesToListItem(c))continue;const p=h.getAttribute(m);c.getAttribute(m)!=p&&(l.setAttribute(m,p,c),o.return=!0)}})}}function jbe(i){const t=[],e=VV(i);if(i.styles){const n=e.styles.useAttribute;t.push({attributeName:"listStyle",defaultValue:ch,viewConsumables:{styles:"list-style-type"},addCommand(s){let r=MV();n&&(r=r.filter(o=>!!E_(o))),s.commands.add("listStyle",new Dbe(s,ch,r))},appliesToListItem(s){return s.getAttribute("listType")=="numbered"||s.getAttribute("listType")=="bulleted"},hasValidAttribute(s){if(!this.appliesToListItem(s))return!s.hasAttribute("listStyle");if(!s.hasAttribute("listStyle"))return!1;const r=s.getAttribute("listStyle");return r==ch?!0:FC(r)==s.getAttribute("listType")},setAttributeOnDowncast(s,r,o){if(r&&r!==ch)if(n){const a=E_(r);if(a){s.setAttribute("type",a,o);return}}else{s.setStyle("list-style-type",r,o);return}s.removeStyle("list-style-type",o),s.removeAttribute("type",o)},getAttributeOnUpcast(s){const r=s.getStyle("list-style-type");if(r)return Vbe(r);const o=s.getAttribute("type");return o?LV(o):ch}})}return i.reversed&&t.push({attributeName:"listReversed",defaultValue:!1,viewConsumables:{attributes:"reversed"},addCommand(n){n.commands.add("listReversed",new Bbe(n))},appliesToListItem(n){return n.getAttribute("listType")=="numbered"},hasValidAttribute(n){return this.appliesToListItem(n)==n.hasAttribute("listReversed")},setAttributeOnDowncast(n,s,r){s?n.setAttribute("reversed","reversed",r):n.removeAttribute("reversed",r)},getAttributeOnUpcast(n){return n.hasAttribute("reversed")}}),i.startIndex&&t.push({attributeName:"listStart",defaultValue:1,viewConsumables:{attributes:"start"},addCommand(n){n.commands.add("listStart",new Lbe(n))},appliesToListItem(n){return ob(n.getAttribute("listType"))},hasValidAttribute(n){return this.appliesToListItem(n)==n.hasAttribute("listStart")},setAttributeOnDowncast(n,s,r){s==0||s>1?n.setAttribute("start",s,r):n.removeAttribute("start",r)},getAttributeOnUpcast(n){const s=n.getAttribute("start");return s>=0?s:1}}),t}class DV extends Oe{constructor(e,{enabledProperties:n,styleButtonViews:s,styleGridAriaLabel:r}){super(e);b(this,"children");b(this,"stylesView",null);b(this,"additionalPropertiesCollapsibleView",null);b(this,"startIndexFieldView",null);b(this,"reversedSwitchButtonView",null);b(this,"focusTracker",new ln);b(this,"keystrokes",new wn);b(this,"focusables",new ai);b(this,"focusCycler");const o=["ck","ck-list-properties"];this.children=this.createCollection(),this.focusCycler=new Oi({focusables:this.focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),s&&s.length?(this.stylesView=this._createStylesView(s,r),this.children.add(this.stylesView)):o.push("ck-list-properties_without-styles"),(n.startIndex||n.reversed)&&(this._addNumberedListPropertyViews(n),o.push("ck-list-properties_with-numbered-properties")),this.setTemplate({tag:"div",attributes:{class:o},children:this.children})}render(){if(super.render(),this.stylesView){this.focusables.add(this.stylesView),this.focusTracker.add(this.stylesView.element),(this.startIndexFieldView||this.reversedSwitchButtonView)&&(this.focusables.add(this.children.last.buttonView),this.focusTracker.add(this.children.last.buttonView.element));for(const e of this.stylesView.children)this.stylesView.focusTracker.add(e.element);bC({keystrokeHandler:this.stylesView.keystrokes,focusTracker:this.stylesView.focusTracker,gridItems:this.stylesView.children,numberOfColumns:()=>Re.window.getComputedStyle(this.stylesView.element).getPropertyValue("grid-template-columns").split(" ").length,uiLanguageDirection:this.locale&&this.locale.uiLanguageDirection})}if(this.startIndexFieldView){this.focusables.add(this.startIndexFieldView),this.focusTracker.add(this.startIndexFieldView.element);const e=n=>n.stopPropagation();this.keystrokes.set("arrowright",e),this.keystrokes.set("arrowleft",e),this.keystrokes.set("arrowup",e),this.keystrokes.set("arrowdown",e)}this.reversedSwitchButtonView&&(this.focusables.add(this.reversedSwitchButtonView),this.focusTracker.add(this.reversedSwitchButtonView.element)),this.keystrokes.listenTo(this.element)}focus(){this.focusCycler.focusFirst()}focusLast(){this.focusCycler.focusLast()}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}_createStylesView(e,n){const s=new Oe(this.locale);return s.children=s.createCollection(),s.children.addMany(e),s.setTemplate({tag:"div",attributes:{"aria-label":n,class:["ck","ck-list-styles-list"]},children:s.children}),s.children.delegate("execute").to(this),s.focus=function(){for(const r of this.children)if(r instanceof rt&&r.isOn){r.focus();return}this.children.first.focus()},s.focusTracker=new ln,s.keystrokes=new wn,s.render(),s.keystrokes.listenTo(s.element),s}_addNumberedListPropertyViews(e){const n=this.locale.t,s=[];e.startIndex&&(this.startIndexFieldView=this._createStartIndexField(),s.push(this.startIndexFieldView)),e.reversed&&(this.reversedSwitchButtonView=this._createReversedSwitchButton(),s.push(this.reversedSwitchButtonView)),this.stylesView?(this.additionalPropertiesCollapsibleView=new aL(this.locale,s),this.additionalPropertiesCollapsibleView.set({label:n("List properties"),isCollapsed:!0}),this.additionalPropertiesCollapsibleView.buttonView.bind("isEnabled").toMany(s,"isEnabled",(...r)=>r.some(o=>o)),this.additionalPropertiesCollapsibleView.buttonView.on("change:isEnabled",(r,o,a)=>{a||(this.additionalPropertiesCollapsibleView.isCollapsed=!0)}),this.children.add(this.additionalPropertiesCollapsibleView)):this.children.addMany(s)}_createStartIndexField(){const e=this.locale.t,n=new Mn(this.locale,wL);return n.set({label:e("Start at"),class:"ck-numbered-list-properties__start-index"}),n.fieldView.set({min:0,step:1,value:1,inputMode:"numeric"}),n.fieldView.on("input",()=>{const s=n.fieldView.element,r=s.valueAsNumber;if(Number.isNaN(r)){n.errorText=e("Invalid start index value.");return}s.checkValidity()?this.fire("listStart",{startIndex:r}):n.errorText=e("Start index must be greater than 0.")}),n}_createReversedSwitchButton(){const e=this.locale.t,n=new jf(this.locale);return n.set({withText:!0,label:e("Reversed order"),class:"ck-numbered-list-properties__reversed-order"}),n.delegate("execute").to(this,"listReversed"),n}}var Hbe='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M11 27a3 3 0 1 1 0 6 3 3 0 0 1 0-6zm0-9a3 3 0 1 1 0 6 3 3 0 0 1 0-6zm0-9a3 3 0 1 1 0 6 3 3 0 0 1 0-6z"/></svg>',Ube='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M11 27a3 3 0 1 1 0 6 3 3 0 0 1 0-6zm0 1a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm0-10a3 3 0 1 1 0 6 3 3 0 0 1 0-6zm0 1a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm0-10a3 3 0 1 1 0 6 3 3 0 0 1 0-6zm0 1a2 2 0 1 0 0 4 2 2 0 0 0 0-4z"/></svg>',Wbe='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M14 27v6H8v-6h6zm0-9v6H8v-6h6zm0-9v6H8V9h6z"/></svg>',qbe='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M10.29 15V8.531H9.286c-.14.393-.4.736-.778 1.03-.378.295-.728.495-1.05.6v1.121a4.257 4.257 0 0 0 1.595-.936V15h1.235zm3.343 0v-1.235h-1.235V15h1.235zM11.3 24v-1.147H8.848c.064-.111.148-.226.252-.343.104-.117.351-.354.74-.712.39-.357.66-.631.81-.821.225-.288.39-.562.494-.824.104-.263.156-.539.156-.829 0-.51-.182-.936-.545-1.279-.363-.342-.863-.514-1.499-.514-.58 0-1.063.148-1.45.444-.387.296-.617.784-.69 1.463l1.23.124c.024-.36.112-.619.264-.774.153-.155.358-.233.616-.233.26 0 .465.074.613.222.148.148.222.36.222.635 0 .25-.085.501-.255.756-.126.185-.468.536-1.024 1.055-.692.641-1.155 1.156-1.389 1.544-.234.389-.375.8-.422 1.233H11.3zm2.333 0v-1.235h-1.235V24h1.235zM9.204 34.11c.615 0 1.129-.2 1.542-.598.413-.398.62-.88.62-1.446 0-.39-.11-.722-.332-.997a1.5 1.5 0 0 0-.886-.532c.619-.337.928-.788.928-1.353 0-.399-.151-.756-.453-1.073-.366-.386-.852-.58-1.459-.58a2.25 2.25 0 0 0-.96.2 1.617 1.617 0 0 0-.668.55c-.16.232-.28.544-.358.933l1.138.194c.032-.282.123-.495.272-.642.15-.146.33-.22.54-.22.215 0 .386.065.515.194s.193.302.193.518c0 .255-.087.46-.263.613-.176.154-.43.227-.765.218l-.136 1.006c.22-.061.409-.092.567-.092.24 0 .444.09.61.272.168.182.251.428.251.739 0 .328-.087.589-.261.782a.833.833 0 0 1-.644.29.841.841 0 0 1-.607-.242c-.167-.16-.27-.394-.307-.698l-1.196.145c.062.542.285.98.668 1.316.384.335.868.503 1.45.503zm4.43-.11v-1.235h-1.236V34h1.235z"/></svg>',Gbe='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M5.714 15.11c.624 0 1.11-.22 1.46-.66.421-.533.632-1.408.632-2.627 0-1.222-.21-2.096-.629-2.624-.351-.445-.839-.668-1.463-.668-.624 0-1.11.22-1.459.66-.422.533-.633 1.406-.633 2.619 0 1.236.192 2.095.576 2.577.384.482.89.723 1.516.723zm0-1.024a.614.614 0 0 1-.398-.14c-.115-.094-.211-.283-.287-.565-.077-.283-.115-.802-.115-1.558s.043-1.294.128-1.613c.064-.246.155-.417.272-.512a.617.617 0 0 1 .4-.143.61.61 0 0 1 .398.143c.116.095.211.284.288.567.076.283.114.802.114 1.558s-.043 1.292-.128 1.608c-.064.246-.155.417-.272.512a.617.617 0 0 1-.4.143zm6.078.914V8.531H10.79c-.14.393-.4.736-.778 1.03-.378.295-.728.495-1.05.6v1.121a4.257 4.257 0 0 0 1.595-.936V15h1.235zm3.344 0v-1.235h-1.235V15h1.235zm-9.422 9.11c.624 0 1.11-.22 1.46-.66.421-.533.632-1.408.632-2.627 0-1.222-.21-2.096-.629-2.624-.351-.445-.839-.668-1.463-.668-.624 0-1.11.22-1.459.66-.422.533-.633 1.406-.633 2.619 0 1.236.192 2.095.576 2.577.384.482.89.723 1.516.723zm0-1.024a.614.614 0 0 1-.398-.14c-.115-.094-.211-.283-.287-.565-.077-.283-.115-.802-.115-1.558s.043-1.294.128-1.613c.064-.246.155-.417.272-.512a.617.617 0 0 1 .4-.143.61.61 0 0 1 .398.143c.116.095.211.284.288.567.076.283.114.802.114 1.558s-.043 1.292-.128 1.608c-.064.246-.155.417-.272.512a.617.617 0 0 1-.4.143zm7.088.914v-1.147H10.35c.065-.111.149-.226.253-.343.104-.117.35-.354.74-.712.39-.357.66-.631.81-.821.225-.288.39-.562.493-.824.104-.263.156-.539.156-.829 0-.51-.181-.936-.544-1.279-.364-.342-.863-.514-1.499-.514-.58 0-1.063.148-1.45.444-.387.296-.617.784-.69 1.463l1.23.124c.024-.36.112-.619.264-.774.152-.155.357-.233.615-.233.261 0 .465.074.613.222.148.148.222.36.222.635 0 .25-.085.501-.255.756-.126.185-.467.536-1.024 1.055-.691.641-1.154 1.156-1.388 1.544-.235.389-.375.8-.422 1.233h4.328zm2.334 0v-1.235h-1.235V24h1.235zM5.714 34.11c.624 0 1.11-.22 1.46-.66.421-.533.632-1.408.632-2.627 0-1.222-.21-2.096-.629-2.624-.351-.445-.839-.668-1.463-.668-.624 0-1.11.22-1.459.66-.422.533-.633 1.406-.633 2.619 0 1.236.192 2.095.576 2.577.384.482.89.723 1.516.723zm0-1.024a.614.614 0 0 1-.398-.14c-.115-.094-.211-.283-.287-.565-.077-.283-.115-.802-.115-1.558s.043-1.294.128-1.613c.064-.246.155-.417.272-.512a.617.617 0 0 1 .4-.143.61.61 0 0 1 .398.143c.116.095.211.284.288.567.076.283.114.802.114 1.558s-.043 1.292-.128 1.608c-.064.246-.155.417-.272.512a.617.617 0 0 1-.4.143zm4.992 1.024c.616 0 1.13-.2 1.543-.598.413-.398.62-.88.62-1.446 0-.39-.111-.722-.332-.997a1.5 1.5 0 0 0-.886-.532c.618-.337.927-.788.927-1.353 0-.399-.15-.756-.452-1.073-.366-.386-.853-.58-1.46-.58a2.25 2.25 0 0 0-.96.2 1.617 1.617 0 0 0-.667.55c-.16.232-.28.544-.359.933l1.139.194c.032-.282.123-.495.272-.642.15-.146.33-.22.54-.22.214 0 .386.065.515.194s.193.302.193.518c0 .255-.088.46-.264.613-.175.154-.43.227-.764.218l-.136 1.006c.22-.061.408-.092.566-.092.24 0 .444.09.611.272.167.182.25.428.25.739 0 .328-.086.589-.26.782a.833.833 0 0 1-.644.29.841.841 0 0 1-.607-.242c-.167-.16-.27-.394-.308-.698l-1.195.145c.062.542.284.98.668 1.316.384.335.867.503 1.45.503zm4.43-.11v-1.235h-1.235V34h1.235z"/></svg>',Kbe='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M11.88 8.7V7.558h-1.234V8.7h1.234zm0 5.3V9.333h-1.234V14h1.234zm2.5 0v-1.235h-1.234V14h1.235zm-4.75 4.7v-1.142H8.395V18.7H9.63zm0 5.3v-4.667H8.395V24H9.63zm2.5-5.3v-1.142h-1.234V18.7h1.235zm0 5.3v-4.667h-1.234V24h1.235zm2.501 0v-1.235h-1.235V24h1.235zM7.38 28.7v-1.142H6.145V28.7H7.38zm0 5.3v-4.667H6.145V34H7.38zm2.5-5.3v-1.142H8.646V28.7H9.88zm0 5.3v-4.667H8.646V34H9.88zm2.5-5.3v-1.142h-1.234V28.7h1.235zm0 5.3v-4.667h-1.234V34h1.235zm2.501 0v-1.235h-1.235V34h1.235z"/></svg>',Ybe='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M11.916 15V8.558h-1.301V15h1.3zm2.465 0v-1.235h-1.235V15h1.235zM9.665 25v-6.442h-1.3V25h1.3zm2.5 0v-6.442h-1.3V25h1.3zm2.466 0v-1.235h-1.235V25h1.235zm-7.216 9v-6.442h-1.3V34h1.3zm2.5 0v-6.442h-1.3V34h1.3zm2.501 0v-6.442h-1.3V34h1.3zm2.465 0v-1.235h-1.235V34h1.235z"/></svg>',Zbe='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M9.62 14.105c.272 0 .528-.05.768-.153s.466-.257.677-.462c.009.024.023.072.044.145.047.161.086.283.119.365h1.221a2.649 2.649 0 0 1-.222-.626c-.04-.195-.059-.498-.059-.908l.013-1.441c0-.536-.055-.905-.165-1.105-.11-.201-.3-.367-.569-.497-.27-.13-.68-.195-1.23-.195-.607 0-1.064.108-1.371.325-.308.217-.525.55-.65 1.002l1.12.202c.076-.217.176-.369.299-.455.123-.086.294-.13.514-.13.325 0 .546.05.663.152.118.101.176.27.176.508v.123c-.222.093-.622.194-1.2.303-.427.082-.755.178-.982.288-.227.11-.403.268-.53.474a1.327 1.327 0 0 0-.188.706c0 .398.138.728.415.988.277.261.656.391 1.136.391zm.368-.87a.675.675 0 0 1-.492-.189.606.606 0 0 1-.193-.448c0-.176.08-.32.241-.435.106-.07.33-.142.673-.215a7.19 7.19 0 0 0 .751-.19v.247c0 .296-.016.496-.048.602a.773.773 0 0 1-.295.409 1.07 1.07 0 0 1-.637.22zm4.645.765v-1.235h-1.235V14h1.235zM10.2 25.105c.542 0 1.003-.215 1.382-.646.38-.43.57-1.044.57-1.84 0-.771-.187-1.362-.559-1.774a1.82 1.82 0 0 0-1.41-.617c-.522 0-.973.216-1.354.65v-2.32H7.594V25h1.147v-.686a1.9 1.9 0 0 0 .67.592c.26.133.523.2.79.2zm-.299-.975c-.354 0-.638-.164-.852-.492-.153-.232-.229-.59-.229-1.073 0-.468.098-.818.295-1.048a.93.93 0 0 1 .738-.345c.302 0 .55.118.743.354.193.236.29.62.29 1.154 0 .5-.096.868-.288 1.1-.192.233-.424.35-.697.35zm4.478.87v-1.235h-1.234V25h1.234zm-4.017 9.105c.6 0 1.08-.142 1.437-.426.357-.284.599-.704.725-1.261l-1.213-.207c-.061.326-.167.555-.316.688a.832.832 0 0 1-.576.2.916.916 0 0 1-.75-.343c-.185-.228-.278-.62-.278-1.173 0-.498.091-.853.274-1.066.183-.212.429-.318.736-.318.232 0 .42.061.565.184.145.123.238.306.28.55l1.216-.22c-.146-.501-.387-.874-.722-1.119-.336-.244-.788-.366-1.356-.366-.695 0-1.245.214-1.653.643-.407.43-.61 1.03-.61 1.8 0 .762.202 1.358.608 1.788.406.431.95.646 1.633.646zM14.633 34v-1.235h-1.235V34h1.235z"/></svg>',Xbe='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="m7.88 15 .532-1.463h2.575L11.549 15h1.415l-2.58-6.442H9.01L6.5 15h1.38zm2.69-2.549H8.811l.87-2.39.887 2.39zM14.88 15v-1.235h-1.234V15h1.234zM9.352 25c.83-.006 1.352-.02 1.569-.044.346-.038.636-.14.872-.305.236-.166.422-.387.558-.664.137-.277.205-.562.205-.855 0-.372-.106-.695-.317-.97-.21-.276-.512-.471-.905-.585a1.51 1.51 0 0 0 .661-.567 1.5 1.5 0 0 0 .244-.83c0-.28-.066-.53-.197-.754a1.654 1.654 0 0 0-.495-.539 1.676 1.676 0 0 0-.672-.266c-.25-.042-.63-.063-1.14-.063H7.158V25h2.193zm.142-3.88H8.46v-1.49h.747c.612 0 .983.007 1.112.022.217.026.38.102.49.226.11.125.165.287.165.486a.68.68 0 0 1-.192.503.86.86 0 0 1-.525.23 11.47 11.47 0 0 1-.944.023h.18zm.17 2.795H8.46v-1.723h1.05c.592 0 .977.03 1.154.092.177.062.313.16.406.295a.84.84 0 0 1 .14.492c0 .228-.06.41-.181.547a.806.806 0 0 1-.473.257c-.126.026-.423.04-.892.04zM14.88 25v-1.235h-1.234V25h1.234zm-5.018 9.11c.691 0 1.262-.17 1.711-.512.45-.341.772-.864.965-1.567l-1.261-.4c-.109.472-.287.818-.536 1.037-.25.22-.547.33-.892.33-.47 0-.85-.173-1.143-.519-.293-.345-.44-.925-.44-1.74 0-.767.15-1.322.447-1.665.297-.343.684-.514 1.162-.514.346 0 .64.096.881.29.242.193.4.457.477.79l1.288-.307c-.147-.516-.367-.911-.66-1.187-.492-.465-1.132-.698-1.92-.698-.902 0-1.63.296-2.184.89-.554.593-.83 1.426-.83 2.498 0 1.014.275 1.813.825 2.397.551.585 1.254.877 2.11.877zM14.88 34v-1.235h-1.234V34h1.234z"/></svg>';class Jbe extends ie{static get pluginName(){return"ListPropertiesUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.locale.t,n=t.config.get("list.properties"),s=VV(n),r=s.styles.listTypes;if(r.includes("bulleted")){const o=[{label:e("Toggle the disc list style"),tooltip:e("Disc"),type:"disc",icon:Hbe},{label:e("Toggle the circle list style"),tooltip:e("Circle"),type:"circle",icon:Ube},{label:e("Toggle the square list style"),tooltip:e("Square"),type:"square",icon:Wbe}],a=e("Bulleted List"),l=e("Bulleted list styles toolbar"),c="bulletedList";t.ui.componentFactory.add(c,v5({editor:t,normalizedConfig:s,parentCommandName:c,buttonLabel:a,buttonIcon:ke.bulletedList,styleGridAriaLabel:l,styleDefinitions:o})),t.ui.componentFactory.add(`menuBar:${c}`,y5({editor:t,normalizedConfig:s,parentCommandName:c,buttonLabel:a,styleGridAriaLabel:l,styleDefinitions:o}))}if(r.includes("numbered")||n.startIndex||n.reversed){const o=[{label:e("Toggle the decimal list style"),tooltip:e("Decimal"),type:"decimal",icon:qbe},{label:e("Toggle the decimal with leading zero list style"),tooltip:e("Decimal with leading zero"),type:"decimal-leading-zero",icon:Gbe},{label:e("Toggle the lower–roman list style"),tooltip:e("Lower–roman"),type:"lower-roman",icon:Kbe},{label:e("Toggle the upper–roman list style"),tooltip:e("Upper-roman"),type:"upper-roman",icon:Ybe},{label:e("Toggle the lower–latin list style"),tooltip:e("Lower-latin"),type:"lower-latin",icon:Zbe},{label:e("Toggle the upper–latin list style"),tooltip:e("Upper-latin"),type:"upper-latin",icon:Xbe}],a=e("Numbered List"),l=e("Numbered list styles toolbar"),c="numberedList";t.ui.componentFactory.add(c,v5({editor:t,normalizedConfig:s,parentCommandName:c,buttonLabel:a,buttonIcon:ke.numberedList,styleGridAriaLabel:l,styleDefinitions:o})),r.includes("numbered")&&t.ui.componentFactory.add(`menuBar:${c}`,y5({editor:t,normalizedConfig:s,parentCommandName:c,buttonLabel:a,styleGridAriaLabel:l,styleDefinitions:o}))}}}function v5({editor:i,normalizedConfig:t,parentCommandName:e,buttonLabel:n,buttonIcon:s,styleGridAriaLabel:r,styleDefinitions:o}){const a=i.commands.get(e);return l=>{const c=vi(l,Hf),h=c.buttonView;return c.bind("isEnabled").to(a),c.class="ck-list-styles-dropdown",h.on("execute",()=>{i.execute(e),i.editing.view.focus()}),h.set({label:n,icon:s,tooltip:!0,isToggleable:!0}),h.bind("isOn").to(a,"value",f=>!!f),c.once("change:isOpen",()=>{const f=Qbe({editor:i,normalizedConfig:t,dropdownView:c,parentCommandName:e,styleGridAriaLabel:r,styleDefinitions:o});c.panelView.children.add(f)}),c.on("execute",()=>{i.editing.view.focus()}),c}}function BV({editor:i,listStyleCommand:t,parentCommandName:e}){const n=i.locale,s=i.commands.get(e);return({label:r,type:o,icon:a,tooltip:l})=>{const c=new rt(n);return c.set({label:r,icon:a,tooltip:l}),c.bind("isOn").to(t,"value",h=>h===o),c.on("execute",()=>{s.value?t.value===o?i.execute(e):t.value!==o&&i.execute("listStyle",{type:o}):i.model.change(()=>{i.execute("listStyle",{type:o})})}),c}}function Qbe({editor:i,normalizedConfig:t,dropdownView:e,parentCommandName:n,styleDefinitions:s,styleGridAriaLabel:r}){const o=i.locale,a={...t,...n!="numberedList"?{startIndex:!1,reversed:!1}:null},l=n.replace("List","");let c=null;if(t.styles.listTypes.includes(l)){const f=i.commands.get("listStyle"),m=BV({editor:i,parentCommandName:n,listStyleCommand:f}),p=t.styles.listStyleTypes;let v=s;if(p){const E=p[l];E&&(v=s.filter(x=>E.includes(x.type)))}const _=FV(f);c=v.filter(_).map(m)}const h=new DV(o,{styleGridAriaLabel:r,enabledProperties:a,styleButtonViews:c});if(t.styles.listTypes.includes(l)&&fw(e,()=>h.stylesView.children.find(f=>f.isOn)),a.startIndex){const f=i.commands.get("listStart");h.startIndexFieldView.bind("isEnabled").to(f),h.startIndexFieldView.fieldView.bind("value").to(f),h.on("listStart",(m,p)=>i.execute("listStart",p))}if(a.reversed){const f=i.commands.get("listReversed");h.reversedSwitchButtonView.bind("isEnabled").to(f),h.reversedSwitchButtonView.bind("isOn").to(f,"value",m=>!!m),h.on("listReversed",()=>{const m=f.value;i.execute("listReversed",{reversed:!m})})}return h.delegate("execute").to(e),h}function y5({editor:i,normalizedConfig:t,parentCommandName:e,buttonLabel:n,styleGridAriaLabel:s,styleDefinitions:r}){return o=>{const a=new ps(o),l=i.commands.get(e),c=i.commands.get("listStyle"),h=FV(c),f=BV({editor:i,parentCommandName:e,listStyleCommand:c}),m=t.styles.listStyleTypes;let p=r;if(m){const E=l.type,x=m[E];x&&(p=r.filter(k=>x.includes(k.type)))}const v=p.filter(h).map(f),_=new DV(o,{styleGridAriaLabel:s,enabledProperties:{...t,startIndex:!1,reversed:!1},styleButtonViews:v});return _.delegate("execute").to(a),a.buttonView.set({label:n,icon:ke[e]}),a.panelView.children.add(_),a.bind("isEnabled").to(l,"isEnabled"),a.on("execute",()=>{i.editing.view.focus()}),a}}function FV(i){return typeof i.isStyleTypeSupported=="function"?t=>i.isStyleTypeSupported(t.type):()=>!0}class ewe extends ie{static get requires(){return[zbe,Jbe]}static get pluginName(){return"ListProperties"}static get isOfficialPlugin(){return!0}}class twe extends lt{constructor(t){super(t),this.on("execute",()=>{this.refresh()},{priority:"highest"})}refresh(){const t=this._getSelectedItems();this.value=this._getValue(t),this.isEnabled=!!t.length}execute(t={}){this.editor.model.change(e=>{const n=this._getSelectedItems(),s=t.forceValue===void 0?!this._getValue(n):t.forceValue;for(const r of n)s?e.setAttribute("todoListChecked",!0,r):e.removeAttribute("todoListChecked",r)})}_getValue(t){return t.every(e=>e.getAttribute("todoListChecked"))}_getSelectedItems(){const t=this.editor.model,e=t.schema,n=t.document.selection.getFirstRange(),s=n.start.parent,r=[];e.checkAttribute(s,"todoListChecked")&&r.push(...qu(s));for(const o of n.getItems({shallow:!0}))e.checkAttribute(o,"todoListChecked")&&!r.includes(o)&&r.push(...qu(o));return r}}class nwe extends fo{constructor(){super(...arguments);b(this,"domEventType",["change"])}onDomEvent(e){if(e.target){const n=this.view.domConverter.mapDomToView(e.target);n&&n.is("element","input")&&n.getAttribute("type")=="checkbox"&&n.findAncestor({classes:"todo-list__label"})&&this.fire("todoCheckboxChange",e)}}}const iwe=ew("Ctrl+Enter");class swe extends ie{static get pluginName(){return"TodoListEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[wf]}init(){const t=this.editor,e=t.model,n=t.editing,s=t.plugins.get(wf),o=t.config.get("list.multiBlock")?"paragraph":"listItem";t.commands.add("todoList",new _h(t,"todo")),t.commands.add("checkTodoList",new twe(t)),n.view.addObserver(nwe),e.schema.extend("$listItem",{allowAttributes:"todoListChecked"}),e.schema.addAttributeCheck(a=>{const l=a.last;if(!l.getAttribute("listItemId")||l.getAttribute("listType")!="todo")return!1},"todoListChecked"),t.conversion.for("upcast").add(a=>{a.on("element:input",owe()),a.on("element:li",rwe(),{priority:"low"}),a.on("element:label",G1({name:"label",classes:"todo-list__label"})),a.on("element:label",G1({name:"label",classes:["todo-list__label","todo-list__label_without-description"]})),a.on("element:span",G1({name:"span",classes:"todo-list__label__description"})),a.on("element:ul",awe({name:"ul",classes:"todo-list"}))}),t.conversion.for("downcast").elementToElement({model:o,view:(a,{writer:l})=>{if(Vg(a,s.getListAttributeNames()))return l.createContainerElement("span",{class:"todo-list__label__description"})},converterPriority:"highest"}),s.registerDowncastStrategy({scope:"list",attributeName:"listType",setAttributeOnDowncast(a,l,c){l=="todo"?a.addClass("todo-list",c):a.removeClass("todo-list",c)}}),s.registerDowncastStrategy({scope:"itemMarker",attributeName:"todoListChecked",createElement(a,l,{dataPipeline:c}){if(l.getAttribute("listType")!="todo")return null;const h=a.createUIElement("input",{type:"checkbox",...l.getAttribute("todoListChecked")?{checked:"checked"}:null,...c?{disabled:"disabled"}:{tabindex:"-1"}});if(c)return h;const f=a.createContainerElement("span",{contenteditable:"false"},h);return f.getFillerOffset=()=>null,f},canWrapElement(a){return Vg(a,s.getListAttributeNames())},createWrapperElement(a,l,{dataPipeline:c}){const h=["todo-list__label"];return Vg(l,s.getListAttributeNames())||h.push("todo-list__label_without-description"),a.createAttributeElement(c?"label":"span",{class:h.join(" ")})}}),s.on("checkElement",(a,{modelElement:l,viewElement:c})=>{const h=Vg(l,s.getListAttributeNames());c.hasClass("todo-list__label__description")!=h&&(a.return=!0,a.stop())}),s.on("checkElement",(a,{modelElement:l,viewElement:c})=>{const h=l.getAttribute("listType")=="todo"&&Ko(l);let f=!1;const m=t.editing.view.createPositionBefore(c).getWalker({direction:"backward"});for(const{item:p}of m){if(p.is("element")&&t.editing.mapper.toModelElement(p))break;p.is("element","input")&&p.getAttribute("type")=="checkbox"&&(f=!0)}f!=h&&(a.return=!0,a.stop())}),s.on("postFixer",(a,{listNodes:l,writer:c})=>{for(const{node:h,previousNodeInList:f}of l){if(!f||f.getAttribute("listItemId")!=h.getAttribute("listItemId"))continue;const m=f.hasAttribute("todoListChecked"),p=h.hasAttribute("todoListChecked");p&&!m?(c.removeAttribute("todoListChecked",h),a.return=!0):!p&&m&&(c.setAttribute("todoListChecked",!0,h),a.return=!0)}}),e.document.registerPostFixer(a=>{const l=e.document.differ.getChanges();let c=!1;for(const h of l)if(h.type=="attribute"&&h.attributeKey=="listType"){const f=h.range.start.nodeAfter;h.attributeOldValue=="todo"&&f.hasAttribute("todoListChecked")&&(a.removeAttribute("todoListChecked",f),c=!0)}else if(h.type=="insert"&&h.name!="$text")for(const{item:f}of a.createRangeOn(h.position.nodeAfter))f.is("element")&&f.getAttribute("listType")!="todo"&&f.hasAttribute("todoListChecked")&&(a.removeAttribute("todoListChecked",f),c=!0);return c}),this.listenTo(n.view.document,"keydown",(a,l)=>{Kl(l)===iwe&&(t.execute("checkTodoList"),a.stop())},{priority:"high"}),this.listenTo(n.view.document,"todoCheckboxChange",(a,l)=>{const c=l.target;if(!c||!c.is("element","input"))return;const h=n.view.createPositionAfter(c),m=n.mapper.toModelPosition(h).parent;m&&Wt(m)&&m.getAttribute("listType")=="todo"&&this._handleCheckmarkChange(m)}),this.listenTo(n.view.document,"arrowKey",cwe(e,t.locale),{context:"$text"}),this.listenTo(n.mapper,"viewToModelPosition",(a,l)=>{const c=l.viewPosition.parent,h=c.is("attributeElement","li")&&l.viewPosition.offset==0,f=_5(c)&&l.viewPosition.offset<=1,m=c.is("element","span")&&c.getAttribute("contenteditable")=="false"&&_5(c.parent);if(!h&&!f&&!m)return;const p=l.modelPosition.nodeAfter;p&&p.getAttribute("listType")=="todo"&&(l.modelPosition=e.createPositionAt(p,0))},{priority:"low"}),this._initAriaAnnouncements()}_handleCheckmarkChange(t){const e=this.editor,n=e.model,s=Array.from(n.document.selection.getRanges());n.change(r=>{r.setSelection(t,"end"),e.execute("checkTodoList"),r.setSelection(s)})}_initAriaAnnouncements(){const{model:t,ui:e,t:n}=this.editor;let s=null;e&&t.document.selection.on("change:range",()=>{const r=t.document.selection.focus.parent,o=E5(s),a=E5(r);o&&!a?e.ariaLiveAnnouncer.announce(n("Leaving a to-do list")):!o&&a&&e.ariaLiveAnnouncer.announce(n("Entering a to-do list")),s=r})}}function rwe(){return(i,t,e)=>{const{writer:n,schema:s}=e;if(!t.modelRange)return;const r=Array.from(t.modelRange.getItems({shallow:!0})).filter(o=>o.getAttribute("listType")==="todo"&&s.checkAttribute(o,"listItemId")).reduce((o,a)=>{const l=a.getAttribute("listItemId");return o.has(l)||o.set(l,qu(a)),o},new Map);for(const[,o]of r.entries())if(o.some(a=>a.getAttribute("todoListChecked")))for(const a of o)n.setAttribute("todoListChecked",!0,a)}}function owe(){return(i,t,e)=>{const n=t.modelCursor,s=n.parent,r=t.viewItem;if(!e.consumable.test(r,{name:!0})||r.getAttribute("type")!="checkbox"||!n.isAtStart||!s.hasAttribute("listType"))return;e.consumable.consume(r,{name:!0});const o=e.writer;o.setAttribute("listType","todo",s),t.viewItem.hasAttribute("checked")&&o.setAttribute("todoListChecked",!0,s),t.modelRange=o.createRange(n)}}function G1(i){const t=new Cs(i);return(e,n,s)=>{const r=t.match(n.viewItem);r&&s.consumable.consume(n.viewItem,r.match)&&Object.assign(n,s.convertChildren(n.viewItem,n.modelCursor))}}function awe(i){const t=new Cs(i);return(e,n,s)=>{const r=t.match(n.viewItem);if(!r)return;const o=r.match;o.name=!1,s.consumable.consume(n.viewItem,o)}}function Vg(i,t){return(i.is("element","paragraph")||i.is("element","listItem"))&&i.getAttribute("listType")=="todo"&&Ko(i)&&lwe(i,t)}function lwe(i,t){for(const e of i.getAttributeKeys())if(!e.startsWith("selection:")&&!t.includes(e))return!1;return!0}function cwe(i,t){return(e,n)=>{const s=tw(n.keyCode,t.contentLanguageDirection),r=i.schema,o=i.document.selection;if(!o.isCollapsed)return;const a=o.getFirstPosition(),l=a.parent;if(s=="right"&&a.isAtEnd){const c=r.getNearestSelectionRange(i.createPositionAfter(l),"forward");if(!c)return;const h=c.start.parent;h&&Wt(h)&&h.getAttribute("listType")=="todo"&&(i.change(f=>f.setSelection(c)),n.preventDefault(),n.stopPropagation(),e.stop())}else if(s=="left"&&a.isAtStart&&Wt(l)&&l.getAttribute("listType")=="todo"){const c=r.getNearestSelectionRange(i.createPositionBefore(l),"backward");if(!c)return;i.change(h=>h.setSelection(c)),n.preventDefault(),n.stopPropagation(),e.stop()}}}function _5(i){return!!i&&i.is("attributeElement")&&i.hasClass("todo-list__label")}function E5(i){return!i||!i.is("element","paragraph")&&!i.is("element","listItem")?!1:i.getAttribute("listType")=="todo"}class uwe extends ie{static get pluginName(){return"TodoListUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor.t;__(this.editor,"todoList",t("To-do List"),ke.todoList)}}class dwe extends ie{static get requires(){return[swe,uwe]}static get pluginName(){return"TodoList"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 *//**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function C5(i,t){const e=(n,s,r)=>{if(!r.consumable.consume(s.item,n.name))return;const o=s.attributeNewValue,a=r.writer,l=r.mapper.toViewElement(s.item),c=[...l.getChildren()].find(f=>f.getCustomProperty("media-content"));a.remove(c);const h=i.getMediaViewElement(a,o,t);a.insert(a.createPositionAt(l,0),h)};return n=>{n.on("attribute:url:media",e)}}function hwe(i,t,e){return t.setCustomProperty("media",!0,i),kC(i,t,{label:e})}function x5(i,t,e,n){return i.createContainerElement("figure",{class:"media"},[t.getMediaViewElement(i,e,n),i.createSlot()])}function T5(i){const t=i.getSelectedElement();return t&&t.is("element","media")?t:null}function $V(i,t,e,n){i.change(s=>{const r=s.createElement("media",{url:t});i.insertObject(r,e,null,{setSelection:"on",findOptimalPosition:n?"auto":void 0})})}class fwe extends lt{refresh(){const t=this.editor.model,e=t.document.selection,n=T5(e);this.value=n?n.getAttribute("url"):void 0,this.isEnabled=gwe(e)||mwe(e,t)}execute(t){const e=this.editor.model,n=e.document.selection,s=T5(n);s?e.change(r=>{r.setAttribute("url",t,s)}):$V(e,t,n,!0)}}function mwe(i,t){let n=BL(i,t).start.parent;return n.isEmpty&&!t.schema.isLimit(n)&&(n=n.parent),t.schema.checkChild(n,"media")}function gwe(i){const t=i.getSelectedElement();return!!t&&t.name==="media"}var pwe='<svg viewBox="0 0 64 42" xmlns="http://www.w3.org/2000/svg"><path d="M47.426 17V3.713L63.102 0v19.389h-.001l.001.272c0 1.595-2.032 3.43-4.538 4.098-2.506.668-4.538-.083-4.538-1.678 0-1.594 2.032-3.43 4.538-4.098.914-.244 2.032-.565 2.888-.603V4.516L49.076 7.447v9.556A1.014 1.014 0 0 0 49 17h-1.574zM29.5 17h-8.343a7.073 7.073 0 1 0-4.657 4.06v3.781H3.3a2.803 2.803 0 0 1-2.8-2.804V8.63a2.803 2.803 0 0 1 2.8-2.805h4.082L8.58 2.768A1.994 1.994 0 0 1 10.435 1.5h8.985c.773 0 1.477.448 1.805 1.149l1.488 3.177H26.7c1.546 0 2.8 1.256 2.8 2.805V17zm-11.637 0H17.5a1 1 0 0 0-1 1v.05A4.244 4.244 0 1 1 17.863 17zm29.684 2c.97 0 .953-.048.953.889v20.743c0 .953.016.905-.953.905H19.453c-.97 0-.953.048-.953-.905V19.89c0-.937-.016-.889.97-.889h28.077zm-4.701 19.338V22.183H24.154v16.155h18.692zM20.6 21.375v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616V37.53H20.6zm24.233-16.155v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615V37.53h-1.615zM29.485 25.283a.4.4 0 0 1 .593-.35l9.05 4.977a.4.4 0 0 1 0 .701l-9.05 4.978a.4.4 0 0 1-.593-.35v-9.956z"/></svg>';const bwe="0 0 64 42";class wwe{constructor(t,e){b(this,"locale");b(this,"providerDefinitions");const n=e.providers,s=e.extraProviders||[],r=new Set(e.removeProviders),o=n.concat(s).filter(a=>{const l=a.name;return l?!r.has(l):(Tt("media-embed-no-provider-name",{provider:a}),!1)});this.locale=t,this.providerDefinitions=o}hasMedia(t){return!!this._getMedia(t)}getMediaViewElement(t,e,n){return this._getMedia(e).getViewElement(t,n)}_getMedia(t){if(!t)return new k5(this.locale);t=t.trim();for(const e of this.providerDefinitions){const n=e.html,s=Qt(e.url);for(const r of s){const o=this._getUrlMatches(t,r);if(o)return new k5(this.locale,t,o,n)}}return null}_getUrlMatches(t,e){let n=t.match(e);if(n)return n;let s=t.replace(/^https?:\/\//,"");return n=s.match(e),n||(s=s.replace(/^www\./,""),n=s.match(e),n)?n:null}}class k5{constructor(t,e,n,s){b(this,"url");b(this,"_locale");b(this,"_match");b(this,"_previewRenderer");this.url=this._getValidUrl(e),this._locale=t,this._match=n,this._previewRenderer=s}getViewElement(t,e){const n={};let s;if(e.renderForEditingView||e.renderMediaPreview&&this.url&&this._previewRenderer){this.url&&(n["data-oembed-url"]=this.url),e.renderForEditingView&&(n.class="ck-media__wrapper");const r=this._getPreviewHtml(e);s=t.createRawElement("div",n,(o,a)=>{a.setContentOf(o,r)})}else this.url&&(n.url=this.url),s=t.createEmptyElement(e.elementName,n);return t.setCustomProperty("media-content",!0,s),s}_getPreviewHtml(t){return this._previewRenderer?this._previewRenderer(this._match):this.url&&t.renderForEditingView?this._getPlaceholderHtml():""}_getPlaceholderHtml(){const t=new lo,e=this._locale.t;return t.content=pwe,t.viewBox=bwe,new Zi({tag:"div",attributes:{class:"ck ck-reset_all ck-media__placeholder"},children:[{tag:"div",attributes:{class:"ck-media__placeholder__icon"},children:[t]},{tag:"a",attributes:{class:"ck-media__placeholder__url",target:"_blank",rel:"noopener noreferrer",href:this.url,"data-cke-tooltip-text":e("Open media in new tab")},children:[{tag:"span",attributes:{class:"ck-media__placeholder__url__text"},children:[this.url]}]}]}).render().outerHTML}_getValidUrl(t){return t?t.match(/^https?/)?t:"https://"+t:null}}class ab extends ie{constructor(e){super(e);b(this,"registry");e.config.define("mediaEmbed",{elementName:"oembed",providers:[{name:"dailymotion",url:[/^dailymotion\.com\/video\/(\w+)/,/^dai.ly\/(\w+)/],html:n=>`<div style="position: relative; padding-bottom: 100%; height: 0; "><iframe src="https://www.dailymotion.com/embed/video/${n[1]}" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" width="480" height="270" allowfullscreen allow="autoplay"></iframe></div>`},{name:"spotify",url:[/^open\.spotify\.com\/(artist\/\w+)/,/^open\.spotify\.com\/(album\/\w+)/,/^open\.spotify\.com\/(track\/\w+)/],html:n=>`<div style="position: relative; padding-bottom: 100%; height: 0; padding-bottom: 126%;"><iframe src="https://open.spotify.com/embed/${n[1]}" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" allowtransparency="true" allow="encrypted-media"></iframe></div>`},{name:"youtube",url:[/^(?:m\.)?youtube\.com\/watch\?v=([\w-]+)(?:&t=(\d+))?/,/^(?:m\.)?youtube\.com\/shorts\/([\w-]+)(?:\?t=(\d+))?/,/^(?:m\.)?youtube\.com\/v\/([\w-]+)(?:\?t=(\d+))?/,/^youtube\.com\/embed\/([\w-]+)(?:\?start=(\d+))?/,/^youtu\.be\/([\w-]+)(?:\?t=(\d+))?/],html:n=>{const s=n[1],r=n[2];return`<div style="position: relative; padding-bottom: 100%; height: 0; padding-bottom: 56.2493%;"><iframe src="https://www.youtube.com/embed/${s}${r?`?start=${r}`:""}" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div>`}},{name:"vimeo",url:[/^vimeo\.com\/(\d+)/,/^vimeo\.com\/[^/]+\/[^/]+\/video\/(\d+)/,/^vimeo\.com\/album\/[^/]+\/video\/(\d+)/,/^vimeo\.com\/channels\/[^/]+\/(\d+)/,/^vimeo\.com\/groups\/[^/]+\/videos\/(\d+)/,/^vimeo\.com\/ondemand\/[^/]+\/(\d+)/,/^player\.vimeo\.com\/video\/(\d+)/],html:n=>`<div style="position: relative; padding-bottom: 100%; height: 0; padding-bottom: 56.2493%;"><iframe src="https://player.vimeo.com/video/${n[1]}" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe></div>`},{name:"instagram",url:[/^instagram\.com\/p\/(\w+)/,/^instagram\.com\/reel\/(\w+)/]},{name:"twitter",url:[/^twitter\.com/,/^x\.com/]},{name:"googleMaps",url:[/^google\.com\/maps/,/^goo\.gl\/maps/,/^maps\.google\.com/,/^maps\.app\.goo\.gl/]},{name:"flickr",url:/^flickr\.com/},{name:"facebook",url:/^facebook\.com/}]}),this.registry=new wwe(e.locale,e.config.get("mediaEmbed"))}static get pluginName(){return"MediaEmbedEditing"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,n=e.model.schema,s=e.t,r=e.conversion,o=e.config.get("mediaEmbed.previewsInData"),a=e.config.get("mediaEmbed.elementName"),l=this.registry;e.commands.add("mediaEmbed",new fwe(e)),n.register("media",{inheritAllFrom:"$blockObject",allowAttributes:["url"]}),r.for("dataDowncast").elementToStructure({model:"media",view:(c,{writer:h})=>{const f=c.getAttribute("url");return x5(h,l,f,{elementName:a,renderMediaPreview:!!f&&o})}}),r.for("dataDowncast").add(C5(l,{elementName:a,renderMediaPreview:o})),r.for("editingDowncast").elementToStructure({model:"media",view:(c,{writer:h})=>{const f=c.getAttribute("url"),m=x5(h,l,f,{elementName:a,renderForEditingView:!0});return hwe(m,h,s("media widget"))}}),r.for("editingDowncast").add(C5(l,{elementName:a,renderForEditingView:!0})),r.for("upcast").elementToElement({view:c=>["oembed",a].includes(c.name)&&c.getAttribute("url")?{name:!0}:null,model:(c,{writer:h})=>{const f=c.getAttribute("url");return l.hasMedia(f)?h.createElement("media",{url:f}):null}}).elementToElement({view:{name:"div",attributes:{"data-oembed-url":!0}},model:(c,{writer:h})=>{const f=c.getAttribute("data-oembed-url");return l.hasMedia(f)?h.createElement("media",{url:f}):null}}).add(c=>{const h=(f,m,p)=>{if(!p.consumable.consume(m.viewItem,{name:!0,classes:"media"}))return;const{modelRange:v,modelCursor:_}=p.convertChildren(m.viewItem,m.modelCursor);m.modelRange=v,m.modelCursor=_,Tn(v.getItems())||p.consumable.revert(m.viewItem,{name:!0,classes:"media"})};c.on("element:figure",h)})}}const vwe=/^(?:http(s)?:\/\/)?[\w-]+\.[\w-.~:/?#[\]@!$&'()*+,;=%]+$/;class ywe extends ie{constructor(e){super(e);b(this,"_timeoutId");b(this,"_positionToInsert");this._timeoutId=null,this._positionToInsert=null}static get requires(){return[PC,co,RC]}static get pluginName(){return"AutoMediaEmbed"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,n=e.model.document,s=e.plugins.get("ClipboardPipeline");this.listenTo(s,"inputTransformation",()=>{const o=n.selection.getFirstRange(),a=On.fromPosition(o.start);a.stickiness="toPrevious";const l=On.fromPosition(o.end);l.stickiness="toNext",n.once("change:data",()=>{this._embedMediaBetweenPositions(a,l),a.detach(),l.detach()},{priority:"high"})}),e.commands.get("undo").on("execute",()=>{this._timeoutId&&(Re.window.clearTimeout(this._timeoutId),this._positionToInsert.detach(),this._timeoutId=null,this._positionToInsert=null)},{priority:"high"})}_embedMediaBetweenPositions(e,n){const s=this.editor,r=s.plugins.get(ab).registry,o=new ki(e,n),a=o.getWalker({ignoreElementEnd:!0});let l="";for(const h of a)h.item.is("$textProxy")&&(l+=h.item.data);if(l=l.trim(),!l.match(vwe)){o.detach();return}if(!r.hasMedia(l)){o.detach();return}if(!s.commands.get("mediaEmbed").isEnabled){o.detach();return}this._positionToInsert=On.fromPosition(e),this._timeoutId=Re.window.setTimeout(()=>{s.model.change(h=>{this._timeoutId=null,h.remove(o),o.detach();let f=null;this._positionToInsert.root.rootName!=="$graveyard"&&(f=this._positionToInsert),$V(s.model,l,f,!1),this._positionToInsert.detach(),this._positionToInsert=null}),s.plugins.get(co).requestUndoOnBackspace()},100)}}class _we extends Oe{constructor(e,n){super(n);b(this,"focusTracker");b(this,"keystrokes");b(this,"urlInputView");b(this,"_validators");b(this,"_urlInputViewInfoDefault");b(this,"_urlInputViewInfoTip");this.focusTracker=new ln,this.keystrokes=new wn,this.set("mediaURLInputValue",""),this.urlInputView=this._createUrlInput(),this._validators=e,this.setTemplate({tag:"form",attributes:{class:["ck","ck-media-form","ck-responsive-form"],tabindex:"-1"},children:[this.urlInputView]})}render(){super.render(),Xa({view:this}),this.focusTracker.add(this.urlInputView.element),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this.urlInputView.focus()}get url(){return this.urlInputView.fieldView.element.value.trim()}set url(e){this.urlInputView.fieldView.value=e.trim()}isValid(){this.resetFormStatus();for(const e of this._validators){const n=e(this);if(n)return this.urlInputView.errorText=n,!1}return!0}resetFormStatus(){this.urlInputView.errorText=null,this.urlInputView.infoText=this._urlInputViewInfoDefault}_createUrlInput(){const e=this.locale.t,n=new Mn(this.locale,$s),s=n.fieldView;return this._urlInputViewInfoDefault=e("Paste the media URL in the input."),this._urlInputViewInfoTip=e("Tip: Paste the URL into the content to embed faster."),n.label=e("Media URL"),n.infoText=this._urlInputViewInfoDefault,s.inputMode="url",s.on("input",()=>{n.infoText=s.element.value?this._urlInputViewInfoTip:this._urlInputViewInfoDefault,this.mediaURLInputValue=s.element.value.trim()}),n}}var Ewe='<svg viewBox="0 0 22 20" xmlns="http://www.w3.org/2000/svg"><path d="M1.587 1.5c-.612 0-.601-.029-.601.551v14.84c0 .59-.01.559.591.559h18.846c.602 0 .591.03.591-.56V2.052c0-.58.01-.55-.591-.55H1.587Zm.701.971h1.003v1H2.288v-1Zm16.448 0h1.003v1h-1.003v-1Zm-14.24 1h13.008v12H4.467l.029-12Zm-2.208 1h1.003v1H2.288v-1Zm16.448 0h1.003v1h-1.003v-1Zm-16.448 2h1.003v1H2.288v-1Zm16.448 0h1.003v1h-1.003v-1Zm-16.448 2h1.003v1H2.288v-1Zm16.448 0h1.003v1h-1.003v-1Zm-16.448 2h1.003v1H2.288v-1Zm16.448 0h1.003v1h-1.003v-1Zm-16.448 2h1.003l-.029 1h-.974v-1Zm16.448 0h1.003v1h-1.003v-1Zm-16.448 2h.974v1h-.974v-1Zm16.448 0h1.003v1h-1.003v-1Z"/><path d="M8.374 6.648a.399.399 0 0 1 .395-.4.402.402 0 0 1 .2.049l5.148 2.824a.4.4 0 0 1 0 .7l-5.148 2.824a.403.403 0 0 1-.595-.35V6.648Z"/></svg>';class Cwe extends ie{constructor(){super(...arguments);b(this,"_formView")}static get requires(){return[ab,hf]}static get pluginName(){return"MediaEmbedUI"}static get isOfficialPlugin(){return!0}init(){const e=this.editor;e.ui.componentFactory.add("mediaEmbed",()=>{const n=this.editor.locale.t,s=this._createDialogButton(rt);return s.tooltip=!0,s.label=n("Insert media"),s}),e.ui.componentFactory.add("menuBar:mediaEmbed",()=>{const n=this.editor.locale.t,s=this._createDialogButton(Xn);return s.label=n("Media"),s})}_createDialogButton(e){const n=this.editor,s=new e(n.locale),r=n.commands.get("mediaEmbed"),o=this.editor.plugins.get("Dialog");return s.icon=Ewe,s.bind("isEnabled").to(r,"isEnabled"),s.on("execute",()=>{o.id==="mediaEmbed"?o.hide():this._showDialog()}),s}_showDialog(){const e=this.editor,n=e.plugins.get("Dialog"),s=e.commands.get("mediaEmbed"),r=e.locale.t;if(!this._formView){const o=e.plugins.get(ab).registry;this._formView=new(cw(_we))(xwe(e.t,o),e.locale),this._formView.on("submit",()=>this._handleSubmitForm())}n.show({id:"mediaEmbed",title:r("Insert media"),content:this._formView,isModal:!0,onShow:()=>{this._formView.url=s.value||"",this._formView.resetFormStatus(),this._formView.urlInputView.fieldView.select()},actionButtons:[{label:r("Cancel"),withText:!0,onExecute:()=>n.hide()},{label:r("Accept"),class:"ck-button-action",withText:!0,onExecute:()=>this._handleSubmitForm()}]})}_handleSubmitForm(){const e=this.editor,n=e.plugins.get("Dialog");this._formView.isValid()&&(e.execute("mediaEmbed",this._formView.url),n.hide(),e.editing.view.focus())}}function xwe(i,t){return[e=>{if(!e.url.length)return i("The URL must not be empty.")},e=>{if(!t.hasMedia(e.url))return i("This media URL is not supported.")}]}class Twe extends ie{static get requires(){return[ab,Cwe,ywe,Uf]}static get pluginName(){return"MediaEmbed"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const S5={"(":")","[":"]","{":"}"};class kwe extends lt{constructor(t){super(t),this._isEnabledBasedOnSelection=!1}refresh(){const t=this.editor.model,e=t.document;this.isEnabled=t.schema.checkAttributeInSelection(e.selection,"mention")}execute(t){const e=this.editor.model,s=e.document.selection,r=typeof t.mention=="string"?{id:t.mention}:t.mention,o=r.id,a=t.range||s.getFirstRange();if(!e.canEditAt(a))return;const l=t.text||o,c=zV({_text:l,id:o},r);if(!o.startsWith(t.marker))throw new B("mentioncommand-incorrect-id",this);e.change(h=>{const f=xr(s.getAttributes()),m=new Map(f.entries());m.set("mention",c);const p=e.insertContent(h.createText(l,m),a),v=p.start.nodeBefore,_=p.end.nodeAfter,E=_&&_.is("$text")&&_.data.startsWith(" ");let x=!1;if(v&&_&&v.is("$text")&&_.is("$text")){const k=v.data.slice(-1),A=k in S5,S=A&&_.data.startsWith(S5[k]);x=A&&S}!x&&!E&&e.insertContent(h.createText(" ",f),a.start.getShiftedBy(l.length))})}}class Swe extends ie{static get pluginName(){return"MentionEditing"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.model,n=e.document;e.schema.extend("$text",{allowAttributes:"mention"}),t.conversion.for("upcast").elementToAttribute({view:{name:"span",attributes:"data-mention",classes:"mention"},model:{key:"mention",value:s=>jV(s)}}),t.conversion.for("downcast").attributeToElement({model:"mention",view:Pwe}),t.conversion.for("downcast").add(Awe),n.registerPostFixer(s=>Owe(s,n,e.schema)),n.registerPostFixer(s=>Nwe(s,n)),n.registerPostFixer(s=>Iwe(s,n)),t.commands.add("mention",new kwe(t))}}function zV(i,t){return Object.assign({uid:yi()},i,t||{})}function jV(i,t){const e=i.getAttribute("data-mention"),n=i.getChild(0);if(!n)return;const s={id:e,_text:n.data};return zV(s,t)}function Awe(i){i.on("attribute:mention",(t,e,n)=>{const s=e.attributeNewValue;if(!e.item.is("$textProxy")||!s)return;const r=e.range.start;(r.textNode||r.nodeAfter).data!=s._text&&n.consumable.consume(e.item,t.name)},{priority:"highest"})}function Pwe(i,{writer:t}){if(!i)return;const e={class:"mention","data-mention":i.id},n={id:i.uid,priority:20};return t.createAttributeElement("span",e,n)}function Iwe(i,t){const e=t.selection,n=e.focus;return e.isCollapsed&&e.hasAttribute("mention")&&Rwe(n)?(i.removeSelectionAttribute("mention"),!0):!1}function Rwe(i){const t=i.isAtStart;return i.nodeBefore&&i.nodeBefore.is("$text")||t}function Owe(i,t,e){const n=t.differ.getChanges();let s=!1;for(const r of n){if(r.type=="attribute")continue;const o=r.position;if(r.name=="$text"){const a=o.textNode&&o.textNode.nextSibling;s=_l(o.textNode,i)||s,s=_l(a,i)||s,s=_l(o.nodeBefore,i)||s,s=_l(o.nodeAfter,i)||s}if(r.name!="$text"&&r.type=="insert"){const a=o.nodeAfter;for(const l of i.createRangeIn(a).getItems())s=_l(l,i)||s}if(r.type=="insert"&&e.isInline(r.name)){const a=o.nodeAfter&&o.nodeAfter.nextSibling;s=_l(o.nodeBefore,i)||s,s=_l(a,i)||s}}return s}function Nwe(i,t){const e=t.differ.getChanges();let n=!1;for(const s of e)if(s.type==="attribute"&&s.attributeKey!="mention"){const r=s.range.start.nodeBefore,o=s.range.end.nodeAfter;for(const a of[r,o])HV(a)&&a.getAttribute(s.attributeKey)!=s.attributeNewValue&&(i.setAttribute(s.attributeKey,s.attributeNewValue,a),n=!0)}return n}function HV(i){if(!i||!(i.is("$text")||i.is("$textProxy"))||!i.hasAttribute("mention"))return!1;const t=i.data,n=i.getAttribute("mention")._text;return t!=n}function _l(i,t){return HV(i)?(t.removeAttribute("mention",i),!0):!1}class Mwe extends dw{constructor(e){super(e);b(this,"selected");b(this,"position");this.extendTemplate({attributes:{class:["ck-mentions"],tabindex:"-1"}})}selectFirst(){this.select(0)}selectNext(){const e=this.selected,n=this.items.getIndex(e);this.select(n+1)}selectPrevious(){const e=this.selected,n=this.items.getIndex(e);this.select(n-1)}select(e){let n=0;e>0&&e<this.items.length?n=e:e<0&&(n=this.items.length-1);const s=this.items.get(n);this.selected!==s&&(this.selected&&this.selected.removeHighlight(),s.highlight(),this.selected=s,this._isItemVisibleInScrolledArea(s)||(this.element.scrollTop=s.element.offsetTop))}executeSelected(){this.selected.fire("execute")}_isItemVisibleInScrolledArea(e){return new at(this.element).contains(new at(e.element))}}class Lwe extends Oe{constructor(e,n){super(e);b(this,"domElement");this.template=void 0,this.domElement=n,this.domElement.classList.add("ck-button"),this.set("isOn",!1),this.on("change:isOn",(s,r,o)=>{o?(this.domElement.classList.add("ck-on"),this.domElement.classList.remove("ck-off")):(this.domElement.classList.add("ck-off"),this.domElement.classList.remove("ck-on"))}),this.listenTo(this.domElement,"click",()=>{this.fire("execute")})}render(){super.render(),this.element=this.domElement}focus(){this.domElement.focus()}}class Vwe extends Go{constructor(){super(...arguments);b(this,"item");b(this,"marker")}highlight(){const e=this.children.first;e.isOn=!0}removeHighlight(){const e=this.children.first;e.isOn=!1}}const Dg=3,Dwe=[gt.arrowup,gt.arrowdown,gt.esc],Bwe=[gt.enter,gt.tab];class Fwe extends ie{constructor(e){super(e);b(this,"_mentionsView");b(this,"_mentionsConfigurations");b(this,"_balloon");b(this,"_items",new oi);b(this,"_lastRequested");b(this,"_requestFeedDebounced");this._mentionsView=this._createMentionView(),this._mentionsConfigurations=new Map,this._requestFeedDebounced=qs(this._requestFeed,100),e.config.define("mention",{feeds:[]})}static get pluginName(){return"MentionUI"}static get isOfficialPlugin(){return!0}static get requires(){return[kr]}init(){const e=this.editor,n=e.config.get("mention.commitKeys")||Bwe,s=Dwe.concat(n);this._balloon=e.plugins.get(kr),e.editing.view.document.on("keydown",(a,l)=>{o(l.keyCode)&&this._isUIVisible&&(l.preventDefault(),a.stop(),l.keyCode==gt.arrowdown&&this._mentionsView.selectNext(),l.keyCode==gt.arrowup&&this._mentionsView.selectPrevious(),n.includes(l.keyCode)&&this._mentionsView.executeSelected(),l.keyCode==gt.esc&&this._hideUIAndRemoveMarker())},{priority:"highest"}),Za({emitter:this._mentionsView,activator:()=>this._isUIVisible,contextElements:()=>[this._balloon.view.element],callback:()=>this._hideUIAndRemoveMarker()});const r=e.config.get("mention.feeds");for(const a of r){const{feed:l,marker:c,dropdownLimit:h}=a;if(!qwe(c))throw new B("mentionconfig-incorrect-marker",null,{marker:c});const f=typeof l=="function"?l.bind(this.editor):Hwe(l),m=a.itemRenderer,p={marker:c,feedCallback:f,itemRenderer:m,dropdownLimit:h};this._mentionsConfigurations.set(c,p)}this._setupTextWatcher(r),this.listenTo(e,"change:isReadOnly",()=>{this._hideUIAndRemoveMarker()}),this.on("requestFeed:response",(a,l)=>this._handleFeedResponse(l)),this.on("requestFeed:error",()=>this._hideUIAndRemoveMarker());function o(a){return s.includes(a)}}destroy(){super.destroy(),this._mentionsView.destroy()}get _isUIVisible(){return this._balloon.visibleView===this._mentionsView}_createMentionView(){const e=this.editor.locale,n=new Mwe(e);return n.items.bindTo(this._items).using(s=>{const{item:r,marker:o}=s,{dropdownLimit:a}=this._mentionsConfigurations.get(o),l=a||this.editor.config.get("mention.dropdownLimit")||10;if(n.items.length>=l)return null;const c=new Vwe(e),h=this._renderItem(r,o);return h.delegate("execute").to(c),c.children.add(h),c.item=r,c.marker=o,c.on("execute",()=>{n.fire("execute",{item:r,marker:o})}),c}),n.on("execute",(s,r)=>{const o=this.editor,a=o.model,l=r.item,c=r.marker,h=o.model.markers.get("mention"),f=a.createPositionAt(a.document.selection.focus),m=a.createPositionAt(h.getStart()),p=a.createRange(m,f);this._hideUIAndRemoveMarker(),o.execute("mention",{mention:l,text:l.text,marker:c,range:p}),o.editing.view.focus()}),n}_getItemRenderer(e){const{itemRenderer:n}=this._mentionsConfigurations.get(e);return n}_requestFeed(e,n){this._lastRequested=n;const{feedCallback:s}=this._mentionsConfigurations.get(e),r=s(n);if(!(r instanceof Promise)){this.fire("requestFeed:response",{feed:r,marker:e,feedText:n});return}r.then(a=>{this._lastRequested==n?this.fire("requestFeed:response",{feed:a,marker:e,feedText:n}):this.fire("requestFeed:discarded",{feed:a,marker:e,feedText:n})}).catch(a=>{this.fire("requestFeed:error",{error:a}),Tt("mention-feed-callback-error",{marker:e})})}_setupTextWatcher(e){const n=this.editor,s=e.map(a=>({...a,pattern:WV(a.marker,a.minimumCharacters||0)})),r=new CC(n.model,zwe(s));r.on("matched",(a,l)=>{const c=UV(s,l.text),f=n.model.document.selection.focus,m=n.model.createPositionAt(f.parent,c.position);if(Uwe(f)||Wwe(m)){this._hideUIAndRemoveMarker();return}const p=jwe(c,l.text),v=c.marker.length+p.length,_=f.getShiftedBy(-v),E=f.getShiftedBy(-p.length),x=n.model.createRange(_,E);if(K1(n)){const k=n.model.markers.get("mention");n.model.change(A=>{A.updateMarker(k,{range:x})})}else n.model.change(k=>{k.addMarker("mention",{range:x,usingOperation:!1,affectsData:!1})});this._requestFeedDebounced(c.marker,p)}),r.on("unmatched",()=>{this._hideUIAndRemoveMarker()});const o=n.commands.get("mention");return r.bind("isEnabled").to(o),r}_handleFeedResponse(e){const{feed:n,marker:s}=e;if(!K1(this.editor))return;this._items.clear();for(const o of n){const a=typeof o!="object"?{id:o,text:o}:o;this._items.add({item:a,marker:s})}const r=this.editor.model.markers.get("mention");this._items.length?this._showOrUpdateUI(r):this._hideUIAndRemoveMarker()}_showOrUpdateUI(e){this._isUIVisible?this._balloon.updatePosition(this._getBalloonPanelPositionData(e,this._mentionsView.position)):this._balloon.add({view:this._mentionsView,position:this._getBalloonPanelPositionData(e,this._mentionsView.position),singleViewMode:!0}),this._mentionsView.position=this._balloon.view.position,this._mentionsView.selectFirst()}_hideUIAndRemoveMarker(){this._balloon.hasView(this._mentionsView)&&this._balloon.remove(this._mentionsView),K1(this.editor)&&this.editor.model.change(e=>e.removeMarker("mention")),this._mentionsView.position=void 0}_renderItem(e,n){const s=this.editor;let r,o=e.id;const a=this._getItemRenderer(n);if(a){const l=a(e);typeof l!="string"?r=new Lwe(s.locale,l):o=l}if(!r){const l=new rt(s.locale);l.label=o,l.withText=!0,r=l}return r}_getBalloonPanelPositionData(e,n){const s=this.editor,r=s.editing,o=r.view.domConverter,a=r.mapper,l=s.locale.uiLanguageDirection;return{target:()=>{let c=e.getRange();c.start.root.rootName=="$graveyard"&&(c=s.model.document.selection.getFirstRange());const h=a.toViewRange(c);return at.getDomRangeRects(o.viewRangeToDom(h)).pop()},limiter:()=>{const c=this.editor.editing.view,f=c.document.selection.editableElement;return f?c.domConverter.mapViewToDom(f.root):null},positions:$we(n,l)}}}function $we(i,t){const e={caret_se:n=>({top:n.bottom+Dg,left:n.right,name:"caret_se",config:{withArrow:!1}}),caret_ne:(n,s)=>({top:n.top-s.height-Dg,left:n.right,name:"caret_ne",config:{withArrow:!1}}),caret_sw:(n,s)=>({top:n.bottom+Dg,left:n.right-s.width,name:"caret_sw",config:{withArrow:!1}}),caret_nw:(n,s)=>({top:n.top-s.height-Dg,left:n.right-s.width,name:"caret_nw",config:{withArrow:!1}})};return Object.prototype.hasOwnProperty.call(e,i)?[e[i]]:t!=="rtl"?[e.caret_se,e.caret_sw,e.caret_ne,e.caret_nw]:[e.caret_sw,e.caret_se,e.caret_nw,e.caret_ne]}function UV(i,t){let e;for(const n of i){const s=t.lastIndexOf(n.marker);s>0&&!t.substring(s-1).match(n.pattern)||(!e||s>=e.position)&&(e={marker:n.marker,position:s,minimumCharacters:n.minimumCharacters,pattern:n.pattern})}return e}function WV(i,t){const e=t==0?"*":`{${t},}`,n=Xe.features.isRegExpUnicodePropertySupported?`\\p{Ps}\\p{Pi}"'`:`\\(\\[{"'`,s=".";i=i.replace(/[.*+?^${}()\-|[\]\\]/g,"\\$&");const r=`(?:^|[ ${n}])(${i})(${s}${e})$`;return new RegExp(r,"u")}function zwe(i){return e=>{const n=UV(i,e);if(!n)return!1;let s=0;n.position!==0&&(s=n.position-1);const r=e.substring(s);return n.pattern.test(r)}}function jwe(i,t){let e=0;i.position!==0&&(e=i.position-1);const n=WV(i.marker,0);return t.substring(e).match(n)[2]}function Hwe(i){return t=>i.filter(n=>(typeof n=="string"?n:String(n.id)).toLowerCase().includes(t.toLowerCase()))}function Uwe(i){const t=i.textNode&&i.textNode.hasAttribute("mention"),e=i.nodeBefore;return t||e&&e.is("$text")&&e.hasAttribute("mention")}function Wwe(i){const t=i.nodeAfter;return t&&t.is("$text")&&t.hasAttribute("mention")}function qwe(i){return!!i}function K1(i){return i.model.markers.has("mention")}class Gwe extends ie{toMentionAttribute(t,e){return jV(t,e)}static get pluginName(){return"Mention"}static get isOfficialPlugin(){return!0}static get requires(){return[Swe,Fwe]}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 *//**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Kwe(i,t){const e=[];for(const n of t.createRangeIn(i)){const s=n.item;s.is("element","a")&&!s.hasAttribute("href")&&(s.hasAttribute("id")||s.hasAttribute("name"))&&e.push(s)}for(const n of e){const s=n.parent.getChildIndex(n)+1,r=n.getChildren();t.insertChild(s,r,n.parent)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Ywe(i){const t=parseFloat(i);return i.endsWith("pt")?du(t*96/72):i.endsWith("pc")?du(t*12*96/72):i.endsWith("in")?du(t*96):i.endsWith("cm")?du(t*96/2.54):i.endsWith("mm")?du(t/10*96/2.54):i}function A5(i){return i!==void 0&&i.endsWith("px")}function du(i){return i.toFixed(2).replace(/\.?0+$/,"")+"px"}function Zwe(i,t,e){if(!i.childCount)return;const n=new Qo(i.document),s=Jwe(i,n);if(!s.length)return;const r={},o=[];for(const a of s)if(a.indent!==void 0){Qwe(a)||(o.length=0);const l=`${a.id}:${a.indent}`,c=Math.min(a.indent-1,o.length);if(c<o.length&&o[c].id!==a.id&&(o.length=c),c<o.length-1)o.length=c+1;else{const f=eve(a,t);if(c>o.length-1||o[c].listElement.name!=f.type){c==0&&f.type=="ol"&&a.id!==void 0&&r[l]&&(f.startIndex=r[l]);const m=sve(f,n,e);if(A5(a.marginLeft)&&(c==0||A5(o[c-1].marginLeft))){let p=a.marginLeft;c>0&&(p=du(parseFloat(p)-parseFloat(o[c-1].marginLeft))),n.setStyle("padding-left",p,m)}if(o.length==0){const p=a.element.parent,v=p.getChildIndex(a.element)+1;n.insertChild(v,m,p)}else{const p=o[c-1].listItemElements;n.appendChild(m,p[p.length-1])}o[c]={...a,listElement:m,listItemElements:[]},c==0&&a.id!==void 0&&(r[l]=f.startIndex||1)}}const h=a.element.name=="li"?a.element:n.createElement("li");n.appendChild(h,o[c].listElement),o[c].listItemElements.push(h),c==0&&a.id!==void 0&&r[l]++,a.element!=h&&n.appendChild(a.element,h),ove(a.element,n),n.removeStyle("text-indent",a.element),n.removeStyle("margin-left",a.element)}else{const l=o.find(c=>c.marginLeft==a.marginLeft);if(l){const c=l.listItemElements;n.appendChild(a.element,c[c.length-1]),n.removeStyle("margin-left",a.element)}else o.length=0}}function Xwe(i,t){for(const e of t.createRangeIn(i)){const n=e.item;if(n.is("element","li")){const s=n.getChild(0);s&&s.is("element","p")&&t.unwrapElement(s)}}}function Jwe(i,t){const e=t.createRangeIn(i),n=[],s=new Set;for(const r of e.getItems()){if(!r.is("element")||!r.name.match(/^(p|h\d+|li|div)$/))continue;let o=ave(r);if(o!==void 0&&parseFloat(o)==0&&!Array.from(r.getClassNames()).find(a=>a.startsWith("MsoList"))&&(o=void 0),r.hasStyle("mso-list")||o!==void 0&&s.has(o)){const a=rve(r);n.push({element:r,id:a.id,order:a.order,indent:a.indent,marginLeft:o}),o!==void 0&&s.add(o)}else s.clear()}return n}function Qwe(i){const t=i.element.previousSibling;return P5(t||i.element.parent)}function P5(i){return i.is("element","ol")||i.is("element","ul")}function eve(i,t){const e=new RegExp(`@list l${i.id}:level${i.indent}\\s*({[^}]*)`,"gi"),n=/mso-level-number-format:([^;]{0,100});/gi,s=/mso-level-start-at:\s{0,100}([0-9]{0,10})\s{0,100};/gi,r=new RegExp(`@list\\s+l${i.id}:level\\d\\s*{[^{]*mso-level-text:"%\\d\\\\.`,"gi"),o=new RegExp(`@list l${i.id}:level\\d\\s*{[^{]*mso-level-number-format:`,"gi"),a=r.exec(t),l=o.exec(t),c=a&&!l,h=e.exec(t);let f="decimal",m="ol",p=null;if(h&&h[1]){const v=n.exec(h[1]);if(v&&v[1]&&(f=v[1].trim(),m=f!=="bullet"&&f!=="image"?"ol":"ul"),f==="bullet"){const _=tve(i.element);_&&(f=_)}else{const _=s.exec(h[1]);_&&_[1]&&(p=parseInt(_[1]))}c&&(m="ol")}return{type:m,startIndex:p,style:ive(f),isLegalStyleList:c}}function tve(i){if(i.name=="li"&&i.parent.name=="ul"&&i.parent.hasAttribute("type"))return i.parent.getAttribute("type");const t=nve(i);if(!t)return null;const e=t._data;return e==="o"?"circle":e==="·"?"disc":e==="§"?"square":null}function nve(i){if(i.getChild(0).is("$text"))return null;for(const t of i.getChildren()){if(!t.is("element","span"))continue;const e=t.getChild(0);if(e)return e.is("$text")?e:e.getChild(0)}/* istanbul ignore next -- @preserve */return null}function ive(i){if(i.startsWith("arabic-leading-zero"))return"decimal-leading-zero";switch(i){case"alpha-upper":return"upper-alpha";case"alpha-lower":return"lower-alpha";case"roman-upper":return"upper-roman";case"roman-lower":return"lower-roman";case"circle":case"disc":case"square":return i;default:return null}}function sve(i,t,e){const n=t.createElement(i.type);return i.style&&t.setStyle("list-style-type",i.style,n),i.startIndex&&i.startIndex>1&&t.setAttribute("start",i.startIndex,n),i.isLegalStyleList&&e&&t.addClass("legal-list",n),n}function rve(i){const t=i.getStyle("mso-list");if(t===void 0)return{};const e=t.match(/(^|\s{1,100})l(\d+)/i),n=t.match(/\s{0,100}lfo(\d+)/i),s=t.match(/\s{0,100}level(\d+)/i);return e&&n&&s?{id:e[2],order:n[1],indent:parseInt(s[1])}:{indent:1}}function ove(i,t){const e=new Cs({name:"span",styles:{"mso-list":"Ignore"}}),n=t.createRangeIn(i);for(const s of n)s.type==="elementStart"&&e.match(s.item)&&t.remove(s.item)}function ave(i){const t=i.getStyle("margin-left");return t===void 0||t.endsWith("px")?t:Ywe(t)}function lve(i,t){if(!i.childCount)return;const e=new Qo(i.document),n=uve(i,e);dve(n,i,e),fve(n,i,e),hve(i,e);const s=mve(i,e);s.length&&pve(s,gve(t),e)}function cve(i){return btoa(i.match(/\w{2}/g).map(t=>String.fromCharCode(parseInt(t,16))).join(""))}function uve(i,t){const e=t.createRangeIn(i),n=new Cs({name:/v:(.+)/}),s=[];for(const r of e){if(r.type!="elementStart")continue;const o=r.item,a=o.previousSibling,l=a&&a.is("element")?a.name:null,c=["Chart"],h=n.match(o),f=o.getAttribute("o:gfxdata"),m=l==="v:shapetype",p=f&&c.some(v=>o.getAttribute("id").includes(v));h&&f&&!m&&!p&&s.push(r.item.getAttribute("id"))}return s}function dve(i,t,e){const n=e.createRangeIn(t),s=new Cs({name:"img"}),r=[];for(const o of n)if(o.item.is("element")&&s.match(o.item)){const a=o.item,l=a.getAttribute("v:shapes")?a.getAttribute("v:shapes").split(" "):[];l.length&&l.every(c=>i.indexOf(c)>-1)?r.push(a):a.getAttribute("src")||r.push(a)}for(const o of r)e.remove(o)}function hve(i,t){const e=t.createRangeIn(i),n=new Cs({name:/v:(.+)/}),s=[];for(const r of e)r.type=="elementStart"&&n.match(r.item)&&s.push(r.item);for(const r of s)t.remove(r)}function fve(i,t,e){const n=e.createRangeIn(t),s=[];for(const a of n)if(a.type=="elementStart"&&a.item.is("element","v:shape")){const l=a.item.getAttribute("id");if(i.includes(l))continue;r(a.item.parent.getChildren(),l)||s.push(a.item)}for(const a of s){const l={src:o(a)};a.hasAttribute("alt")&&(l.alt=a.getAttribute("alt"));const c=e.createElement("img",l);e.insertChild(a.index+1,c,a.parent)}function r(a,l){for(const c of a){/* istanbul ignore else -- @preserve */if(c.is("element")&&(c.name=="img"&&c.getAttribute("v:shapes")==l||r(c.getChildren(),l)))return!0}return!1}function o(a){for(const l of a.getChildren()){/* istanbul ignore else -- @preserve */if(l.is("element")&&l.getAttribute("src"))return l.getAttribute("src")}}}function mve(i,t){const e=t.createRangeIn(i),n=new Cs({name:"img"}),s=[];for(const r of e)r.item.is("element")&&n.match(r.item)&&r.item.getAttribute("src").startsWith("file://")&&s.push(r.item);return s}function gve(i){if(!i)return[];const t=/{\\pict[\s\S]+?\\bliptag-?\d+(\\blipupi-?\d+)?({\\\*\\blipuid\s?[\da-fA-F]+)?[\s}]*?/,e=new RegExp("(?:("+t.source+"))([\\da-fA-F\\s]+)\\}","g"),n=i.match(e),s=[];if(n)for(const r of n){let o=!1;r.includes("\\pngblip")?o="image/png":r.includes("\\jpegblip")&&(o="image/jpeg"),o&&s.push({hex:r.replace(t,"").replace(/[^\da-fA-F]/g,""),type:o})}return s}function pve(i,t,e){if(i.length===t.length)for(let n=0;n<i.length;n++){const s=`data:${t[n].type};base64,${cve(t[n].hex)}`;e.setAttribute("src",s,i[n])}}function bve(i){const t=[],e=new Qo(i.document);for(const{item:n}of e.createRangeIn(i))if(n.is("element")){for(const s of n.getClassNames())/\bmso/gi.exec(s)&&e.removeClass(s,n);for(const s of n.getStyleNames())/\bmso/gi.exec(s)&&e.removeStyle(s,n);(n.is("element","w:sdt")||n.is("element","w:sdtpr")&&n.isEmpty||n.is("element","o:p")&&n.isEmpty)&&t.push(n)}for(const n of t){const s=n.parent,r=s.getChildIndex(n);e.insertChild(r,n.getChildren(),s),e.remove(n)}}const wve=/<meta\s*name="?generator"?\s*content="?microsoft\s*word\s*\d+"?\/?>/i,vve=/xmlns:o="urn:schemas-microsoft-com/i;class yve{constructor(t,e=!1){b(this,"document");b(this,"hasMultiLevelListPlugin");this.document=t,this.hasMultiLevelListPlugin=e}isActive(t){return wve.test(t)||vve.test(t)}execute(t){const e=new Qo(this.document),{body:n,stylesString:s}=t._parsedData;Kwe(n,e),Zwe(n,s,this.hasMultiLevelListPlugin),lve(n,t.dataTransfer.getData("text/rtf")),bve(n),t.content=n}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function _ve(i,t){for(const e of i.getChildren())if(e.is("element","b")&&e.getStyle("font-weight")==="normal"){const n=i.getChildIndex(e);t.remove(e),t.insertChild(n,e.getChildren(),i)}}function Eve(i,t){const e=new iw(t.document.stylesProcessor),n=new rw(e,{renderingMode:"data"}),s=n.blockElements,r=n.inlineObjectElements,o=[];for(const a of t.createRangeIn(i)){const l=a.item;if(l.is("element","br")){const c=I5(l,"forward",t,{blockElements:s,inlineObjectElements:r}),h=I5(l,"backward",t,{blockElements:s,inlineObjectElements:r}),f=R5(c,s);(R5(h,s)||f)&&o.push(l)}}for(const a of o)a.hasClass("Apple-interchange-newline")?t.remove(a):t.replace(a,t.createElement("p"))}function I5(i,t,e,{blockElements:n,inlineObjectElements:s}){let r=e.createPositionAt(i,t=="forward"?"after":"before");return r=r.getLastMatchingPosition(({item:o})=>o.is("element")&&!n.includes(o.name)&&!s.includes(o.name),{direction:t}),t=="forward"?r.nodeAfter:r.nodeBefore}function R5(i,t){return!!i&&i.is("element")&&t.includes(i.name)}const Cve=/id=("|')docs-internal-guid-[-0-9a-f]+("|')/i;class xve{constructor(t){b(this,"document");this.document=t}isActive(t){return Cve.test(t)}execute(t){const e=new Qo(this.document),{body:n}=t._parsedData;_ve(n,e),Xwe(n,e),Eve(n,e),t.content=n}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Tve(i,t){for(const e of i.getChildren())e.is("element","table")&&e.hasAttribute("xmlns")&&t.removeAttribute("xmlns",e)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function kve(i,t){for(const e of i.getChildren())if(e.is("element","google-sheets-html-origin")){const n=i.getChildIndex(e);t.remove(e),t.insertChild(n,e.getChildren(),i)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Sve(i,t){for(const e of i.getChildren())e.is("element","table")&&e.getStyle("width")==="0px"&&t.removeStyle("width",e)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Ave(i,t){for(const e of Array.from(i.getChildren()))e.is("element","style")&&t.remove(e)}const Pve=/<google-sheets-html-origin/i;class Ive{constructor(t){b(this,"document");this.document=t}isActive(t){return Pve.test(t)}execute(t){const e=new Qo(this.document),{body:n}=t._parsedData;kve(n,e),Tve(n,e),Sve(n,e),Ave(n,e),t.content=n}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Rve(i){return O5(O5(i)).replace(/(<span\s+style=['"]mso-spacerun:yes['"]>[^\S\r\n]*?)[\r\n]+([^\S\r\n]*<\/span>)/g,"$1$2").replace(/<span\s+style=['"]mso-spacerun:yes['"]><\/span>/g,"").replace(/(<span\s+style=['"]letter-spacing:[^'"]+?['"]>)[\r\n]+(<\/span>)/g,"$1 $2").replace(/ <\//g," </").replace(/ <o:p><\/o:p>/g," <o:p></o:p>").replace(/<o:p>(&nbsp;|\u00A0)<\/o:p>/g,"").replace(/>([^\S\r\n]*[\r\n]\s*)</g,"><")}function Ove(i){i.querySelectorAll("span[style*=spacerun]").forEach(t=>{const e=t,n=e.innerText.length||0;e.innerText=Array(n+1).join("  ").substr(0,n)})}function O5(i){return i.replace(/<span(?: class="Apple-converted-space"|)>(\s+)<\/span>/g,(t,e)=>e.length===1?" ":Array(e.length+1).join("  ").substr(0,e.length))}function Nve(i,t){const e=new DOMParser;i=i.replace(/<!--\[if gte vml 1]>/g,""),i=i.replace(/<o:SmartTagType(?:\s+[^\s>=]+(?:="[^"]*")?)*\s*\/?>/gi,"");const n=Rve(Vve(i)),s=e.parseFromString(n,"text/html");Ove(s);const r=s.body.innerHTML,o=Mve(s,t),a=Lve(s);return{body:o,bodyString:r,styles:a.styles,stylesString:a.stylesString}}function Mve(i,t){const e=new iw(t),n=new rw(e,{renderingMode:"data"}),s=i.createDocumentFragment(),r=i.body.childNodes;for(;r.length>0;)s.appendChild(r[0]);return n.domToView(s,{skipComments:!0})}function Lve(i){const t=[],e=[],n=Array.from(i.getElementsByTagName("style"));for(const s of n)s.sheet&&s.sheet.cssRules&&s.sheet.cssRules.length&&(t.push(s.sheet),e.push(s.innerHTML));return{styles:t,stylesString:e.join(" ")}}function Vve(i){const t="</body>",e="</html>",n=i.indexOf(t);if(n<0)return i;const s=i.indexOf(e,n+t.length);return i.substring(0,n+t.length)+(s>=0?i.substring(s):"")}class Dve extends ie{static get pluginName(){return"PasteFromOffice"}static get isOfficialPlugin(){return!0}static get requires(){return[Gs]}init(){const t=this.editor,e=t.plugins.get("ClipboardPipeline"),n=t.editing.view.document,s=[],r=this.editor.plugins.has("MultiLevelList");s.push(new yve(n,r)),s.push(new xve(n)),s.push(new Ive(n)),e.on("inputTransformation",(o,a)=>{if(a._isTransformedWithPasteFromOffice||t.model.document.selection.getFirstPosition().parent.is("element","codeBlock"))return;const c=a.dataTransfer.getData("text/html"),h=s.find(f=>f.isActive(c));h&&(a._parsedData||(a._parsedData=Nve(c,n.stylesProcessor)),h.execute(a),a._isTransformedWithPasteFromOffice=!0)},{priority:"high"})}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 *//**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function $C(i,t){const{modelAttribute:e,styleName:n,viewElement:s,defaultValue:r,reduceBoxSides:o=!1,shouldUpcast:a=()=>!0}=t;i.for("upcast").attributeToAttribute({view:{name:s,styles:{[n]:/[\s\S]+/}},model:{key:e,value:l=>{if(!a(l))return;const c=l.getNormalizedStyle(n),h=o?dp(c):c;if(r!==h)return h}}})}function C_(i,t,e,n){i.for("upcast").add(s=>s.on("element:"+t,(r,o,a)=>{if(!o.modelRange)return;const l=["border-top-width","border-top-color","border-top-style","border-bottom-width","border-bottom-color","border-bottom-style","border-right-width","border-right-color","border-right-style","border-left-width","border-left-color","border-left-style"].filter(p=>o.viewItem.hasStyle(p));if(!l.length)return;const c={styles:l};if(!a.consumable.test(o.viewItem,c))return;const h=[...o.modelRange.getItems({shallow:!0})].pop();a.consumable.consume(o.viewItem,c);const f={style:o.viewItem.getNormalizedStyle("border-style"),color:o.viewItem.getNormalizedStyle("border-color"),width:o.viewItem.getNormalizedStyle("border-width")},m={style:dp(f.style),color:dp(f.color),width:dp(f.width)};m.style!==n.style&&a.writer.setAttribute(e.style,m.style,h),m.color!==n.color&&a.writer.setAttribute(e.color,m.color,h),m.width!==n.width&&a.writer.setAttribute(e.width,m.width,h)}))}function zh(i,t){const{modelElement:e,modelAttribute:n,styleName:s}=t;i.for("downcast").attributeToAttribute({model:{name:e,key:n},view:r=>({key:"style",value:{[s]:r}})})}function up(i,t){const{modelAttribute:e,styleName:n}=t;i.for("downcast").add(s=>s.on(`attribute:${e}:table`,(r,o,a)=>{const{item:l,attributeNewValue:c}=o,{mapper:h,writer:f}=a;if(!a.consumable.consume(o.item,r.name))return;const m=[...h.toViewElement(l).getChildren()].find(p=>p.is("element","table"));c?f.setStyle(n,c,m):f.removeStyle(n,m)}))}function dp(i){if(!i)return;const t=["top","right","bottom","left"];if(!t.every(r=>i[r]))return i;const n=i.top;return t.every(r=>i[r]===n)?n:i}function _n(i,t,e,n,s=1){t!=null&&s!==void 0&&s!==null&&t>s?n.setAttribute(i,t,e):n.removeAttribute(i,e)}function cc(i,t,e={}){const n=i.createElement("tableCell",e);return i.insertElement("paragraph",n),i.insert(n,t),n}function x_(i,t){const e=t.parent.parent,n=parseInt(e.getAttribute("headingColumns")||"0"),{column:s}=i.getCellLocation(t);return!!n&&s<n}function hp(i,t,e){const{modelAttribute:n}=e;i.extend("tableCell",{allowAttributes:[n]}),$C(t,{viewElement:/^(td|th)$/,...e}),zh(t,{modelElement:"tableCell",...e})}function Bl(i){const t=i.getSelectedElement();return t&&t.is("element","table")?t:i.getFirstPosition().findAncestor("table")}function Bve(){return i=>{i.on("element:figure",(t,e,n)=>{if(!n.consumable.test(e.viewItem,{name:!0,classes:"table"}))return;const s=zve(e.viewItem);if(!s||!n.consumable.test(s,{name:!0}))return;n.consumable.consume(e.viewItem,{name:!0,classes:"table"});const r=n.convertItem(s,e.modelCursor),o=Tn(r.modelRange.getItems());if(!o){n.consumable.revert(e.viewItem,{name:!0,classes:"table"});return}n.convertChildren(e.viewItem,n.writer.createPositionAt(o,"end")),n.updateConversionResult(o,e)})}}function Fve(){return i=>{i.on("element:table",(t,e,n)=>{const s=e.viewItem;if(!n.consumable.test(s,{name:!0}))return;const{rows:r,headingRows:o,headingColumns:a}=jve(s),l={};a&&(l.headingColumns=a),o&&(l.headingRows=o);const c=n.writer.createElement("table",l);if(n.safeInsert(c,e.modelCursor)){if(n.consumable.consume(s,{name:!0}),r.forEach(h=>n.convertItem(h,n.writer.createPositionAt(c,"end"))),n.convertChildren(s,n.writer.createPositionAt(c,"end")),c.isEmpty){const h=n.writer.createElement("tableRow");n.writer.insert(h,n.writer.createPositionAt(c,"end")),cc(n.writer,n.writer.createPositionAt(h,"end"))}n.updateConversionResult(c,e)}})}}function $ve(){return i=>{i.on("element:tr",(t,e)=>{e.viewItem.isEmpty&&e.modelCursor.index==0&&t.stop()},{priority:"high"})}}function N5(i){return t=>{t.on(`element:${i}`,(e,n,{writer:s})=>{if(!n.modelRange)return;const r=n.modelRange.start.nodeAfter,o=s.createPositionAt(r,0);if(n.viewItem.isEmpty){s.insertElement("paragraph",o);return}const a=Array.from(r.getChildren());if(a.every(l=>l.is("element","$marker"))){const l=s.createElement("paragraph");s.insert(l,s.createPositionAt(r,0));for(const c of a)s.move(s.createRangeOn(c),s.createPositionAt(l,"end"))}},{priority:"low"})}}function zve(i){for(const t of i.getChildren())if(t.is("element","table"))return t}function jve(i){let t=0,e;const n=[],s=[];let r;for(const o of Array.from(i.getChildren())){if(o.name!=="tbody"&&o.name!=="thead"&&o.name!=="tfoot")continue;o.name==="thead"&&!r&&(r=o);const a=Array.from(o.getChildren()).filter(c=>c.is("element","tr"));let l=null;for(const c of a){const h=Array.from(c.getChildren()).filter(f=>f.is("element","td")||f.is("element","th"));if(r&&o===r||o.name==="tbody"&&h.length>0&&(l===null||h.length===l)&&h.every(f=>f.is("element","th")))t++,n.push(c);else{s.push(c);const f=Hve(c);(!e||f<e)&&(e=f)}l=Math.max(l||0,h.length)}}return{headingRows:t,headingColumns:e||0,rows:[...n,...s]}}function Hve(i){let t=0,e=0;const n=Array.from(i.getChildren()).filter(s=>s.name==="th"||s.name==="td");for(;e<n.length&&n[e].name==="th";){const s=n[e],r=parseInt(s.getAttribute("colspan")||"1");t=t+r,e++}return t}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class Bt{constructor(t,e={}){b(this,"_table");b(this,"_startRow");b(this,"_endRow");b(this,"_startColumn");b(this,"_endColumn");b(this,"_includeAllSlots");b(this,"_skipRows");b(this,"_row");b(this,"_rowIndex");b(this,"_column");b(this,"_cellIndex");b(this,"_spannedCells");b(this,"_nextCellAtColumn");b(this,"_jumpedToStartRow",!1);this._table=t,this._startRow=e.row!==void 0?e.row:e.startRow||0,this._endRow=e.row!==void 0?e.row:e.endRow,this._startColumn=e.column!==void 0?e.column:e.startColumn||0,this._endColumn=e.column!==void 0?e.column:e.endColumn,this._includeAllSlots=!!e.includeAllSlots,this._skipRows=new Set,this._row=0,this._rowIndex=0,this._column=0,this._cellIndex=0,this._spannedCells=new Map,this._nextCellAtColumn=-1}[Symbol.iterator](){return this}next(){this._canJumpToStartRow()&&this._jumpToNonSpannedRowClosestToStartRow();const t=this._table.getChild(this._rowIndex);if(!t||this._isOverEndRow())return{done:!0,value:void 0};if(!t.is("element","tableRow"))return this._rowIndex++,this.next();if(this._isOverEndColumn())return this._advanceToNextRow();let e=null;const n=this._getSpanned();if(n)this._includeAllSlots&&!this._shouldSkipSlot()&&(e=this._formatOutValue(n.cell,n.row,n.column));else{const s=t.getChild(this._cellIndex);if(!s)return this._advanceToNextRow();const r=parseInt(s.getAttribute("colspan")||"1"),o=parseInt(s.getAttribute("rowspan")||"1");(r>1||o>1)&&this._recordSpans(s,o,r),this._shouldSkipSlot()||(e=this._formatOutValue(s)),this._nextCellAtColumn=this._column+r}return this._column++,this._column==this._nextCellAtColumn&&this._cellIndex++,e||this.next()}skipRow(t){this._skipRows.add(t)}_advanceToNextRow(){return this._row++,this._rowIndex++,this._column=0,this._cellIndex=0,this._nextCellAtColumn=-1,this.next()}_isOverEndRow(){return this._endRow!==void 0&&this._row>this._endRow}_isOverEndColumn(){return this._endColumn!==void 0&&this._column>this._endColumn}_formatOutValue(t,e=this._row,n=this._column){return{done:!1,value:new Uve(this,t,e,n)}}_shouldSkipSlot(){const t=this._skipRows.has(this._row),e=this._row<this._startRow,n=this._column<this._startColumn,s=this._endColumn!==void 0&&this._column>this._endColumn;return t||e||n||s}_getSpanned(){const t=this._spannedCells.get(this._row);return t&&t.get(this._column)||null}_recordSpans(t,e,n){const s={cell:t,row:this._row,column:this._column};for(let r=this._row;r<this._row+e;r++)for(let o=this._column;o<this._column+n;o++)(r!=this._row||o!=this._column)&&this._markSpannedCell(r,o,s)}_markSpannedCell(t,e,n){this._spannedCells.has(t)||this._spannedCells.set(t,new Map),this._spannedCells.get(t).set(e,n)}_canJumpToStartRow(){return!!this._startRow&&this._startRow>0&&!this._jumpedToStartRow}_jumpToNonSpannedRowClosestToStartRow(){const t=this._getRowLength(0);for(let e=this._startRow;!this._jumpedToStartRow;e--)t===this._getRowLength(e)&&(this._row=e,this._rowIndex=e,this._jumpedToStartRow=!0)}_getRowLength(t){return[...this._table.getChild(t).getChildren()].reduce((n,s)=>n+parseInt(s.getAttribute("colspan")||"1"),0)}}class Uve{constructor(t,e,n,s){b(this,"cell");b(this,"row");b(this,"column");b(this,"cellAnchorRow");b(this,"cellAnchorColumn");b(this,"_cellIndex");b(this,"_rowIndex");b(this,"_table");this.cell=e,this.row=t._row,this.column=t._column,this.cellAnchorRow=n,this.cellAnchorColumn=s,this._cellIndex=t._cellIndex,this._rowIndex=t._rowIndex,this._table=t._table}get isAnchor(){return this.row===this.cellAnchorRow&&this.column===this.cellAnchorColumn}get cellWidth(){return parseInt(this.cell.getAttribute("colspan")||"1")}get cellHeight(){return parseInt(this.cell.getAttribute("rowspan")||"1")}get rowIndex(){return this._rowIndex}getPositionBefore(){return this._table.root.document.model.createPositionAt(this._table.getChild(this.row),this._cellIndex)}}function M5(i,t){return(e,{writer:n})=>{const s=e.getAttribute("headingRows")||0,r=n.createContainerElement("table",null,[]),o=n.createContainerElement("figure",{class:"table"},r);s>0&&n.insert(n.createPositionAt(r,"end"),n.createContainerElement("thead",null,n.createSlot(a=>a.is("element","tableRow")&&a.index<s))),s<i.getRows(e)&&n.insert(n.createPositionAt(r,"end"),n.createContainerElement("tbody",null,n.createSlot(a=>a.is("element","tableRow")&&a.index>=s)));for(const{positionOffset:a,filter:l}of t.additionalSlots)n.insert(n.createPositionAt(r,a),n.createSlot(l));return n.insert(n.createPositionAt(r,"after"),n.createSlot(a=>a.is("element","tableRow")?!1:!t.additionalSlots.some(({filter:l})=>l(a)))),t.asWidget?qve(o,n):o}}function Wve(){return(i,{writer:t})=>i.isEmpty?t.createEmptyElement("tr"):t.createContainerElement("tr")}function L5(i={}){return(t,{writer:e})=>{const n=t.parent,s=n.parent,r=s.getChildIndex(n),o=new Bt(s,{row:r}),a=s.getAttribute("headingRows")||0,l=s.getAttribute("headingColumns")||0;let c=null;for(const h of o)if(h.cell==t){const m=h.row<a||h.column<l?"th":"td";c=i.asWidget?SC(e.createEditableElement(m),e):e.createContainerElement(m);break}return c}}function V5(i={}){return(t,{writer:e})=>{if(!t.parent.is("element","tableCell")||!qV(t))return null;if(i.asWidget)return e.createContainerElement("span",{class:"ck-table-bogus-paragraph"});{const n=e.createContainerElement("p");return e.setCustomProperty("dataPipeline:transparentRendering",!0,n),n}}}function qV(i){return i.parent.childCount==1&&!Gve(i)}function qve(i,t){return t.setCustomProperty("table",!0,i),kC(i,t,{hasSelectionHandle:!0})}function Gve(i){for(const t of i.getAttributeKeys())if(!(t.startsWith("selection:")||t=="htmlEmptyBlock"))return!0;return!1}class Kve extends lt{refresh(){const t=this.editor.model,e=t.document.selection,n=t.schema;this.isEnabled=Yve(e,n)}execute(t={}){const e=this.editor,n=e.model,s=e.plugins.get("TableUtils"),r=e.config.get("table.defaultHeadings.rows"),o=e.config.get("table.defaultHeadings.columns");t.headingRows===void 0&&r&&(t.headingRows=r),t.headingColumns===void 0&&o&&(t.headingColumns=o),n.change(a=>{const l=s.createTable(a,t);n.insertObject(l,null,null,{findOptimalPosition:"auto"}),a.setSelection(a.createPositionAt(l.getNodeByPath([0,0,0]),0))})}}function Yve(i,t){const e=i.getFirstPosition().parent,n=e===e.root?e:e.parent;return t.checkChild(n,"table")}class D5 extends lt{constructor(e,n={}){super(e);b(this,"order");this.order=n.order||"below"}refresh(){const e=this.editor.model.document.selection,s=!!this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(e).length;this.isEnabled=s}execute(){const e=this.editor,n=e.model.document.selection,s=e.plugins.get("TableUtils"),r=this.order==="above",o=s.getSelectionAffectedTableCells(n),a=s.getRowIndexes(o),l=r?a.first:a.last,c=o[0].findAncestor("table");s.insertRows(c,{at:r?l:l+1,copyStructureFromAbove:!r})}}class B5 extends lt{constructor(e,n={}){super(e);b(this,"order");this.order=n.order||"right"}refresh(){const e=this.editor.model.document.selection,s=!!this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(e).length;this.isEnabled=s}execute(){const e=this.editor,n=e.model.document.selection,s=e.plugins.get("TableUtils"),r=this.order==="left",o=s.getSelectionAffectedTableCells(n),a=s.getColumnIndexes(o),l=r?a.first:a.last,c=o[0].findAncestor("table");s.insertColumns(c,{columns:1,at:r?l:l+1})}}class F5 extends lt{constructor(e,n={}){super(e);b(this,"direction");this.direction=n.direction||"horizontally"}refresh(){const n=this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(this.editor.model.document.selection);this.isEnabled=n.length===1}execute(){const e=this.editor.plugins.get("TableUtils"),n=e.getSelectionAffectedTableCells(this.editor.model.document.selection)[0];this.direction==="horizontally"?e.splitCellHorizontally(n,2):e.splitCellVertically(n,2)}}function GV(i,t,e){const{startRow:n,startColumn:s,endRow:r,endColumn:o}=t,a=e.createElement("table"),l=r-n+1;for(let h=0;h<l;h++)e.insertElement("tableRow",a,"end");const c=[...new Bt(i,{startRow:n,endRow:r,startColumn:s,endColumn:o,includeAllSlots:!0})];for(const{row:h,column:f,cell:m,isAnchor:p,cellAnchorRow:v,cellAnchorColumn:_}of c){const E=h-n,x=a.getChild(E);if(!p)(v<n||_<s)&&cc(e,e.createPositionAt(x,"end"));else{const k=e.cloneElement(m);e.append(k,x),JV(k,h,f,r,o,e)}}return Zve(a,i,n,s,e),a}function KV(i,t,e=0){const n=[],s=new Bt(i,{startRow:e,endRow:t-1});for(const r of s){const{row:o,cellHeight:a}=r,l=o+a-1;o<t&&t<=l&&n.push(r)}return n}function YV(i,t,e){const n=i.parent,s=n.parent,r=n.index,o=parseInt(i.getAttribute("rowspan")),a=t-r,l={},c=o-a;c>1&&(l.rowspan=c);const h=parseInt(i.getAttribute("colspan")||"1");h>1&&(l.colspan=h);const f=r,m=f+a,p=[...new Bt(s,{startRow:f,endRow:m,includeAllSlots:!0})];let v=null,_;for(const E of p){const{row:x,column:k,cell:A}=E;A===i&&_===void 0&&(_=k),_!==void 0&&_===k&&x===m&&(v=cc(e,E.getPositionBefore(),l))}return _n("rowspan",a,i,e),v}function ZV(i,t){const e=[],n=new Bt(i);for(const s of n){const{column:r,cellWidth:o}=s,a=r+o-1;r<t&&t<=a&&e.push(s)}return e}function XV(i,t,e,n){const s=parseInt(i.getAttribute("colspan")),r=e-t,o={},a=s-r;a>1&&(o.colspan=a);const l=parseInt(i.getAttribute("rowspan")||"1");l>1&&(o.rowspan=l);const c=cc(n,n.createPositionAfter(i),o);return _n("colspan",r,i,n),c}function JV(i,t,e,n,s,r){const o=parseInt(i.getAttribute("colspan")||"1"),a=parseInt(i.getAttribute("rowspan")||"1");if(e+o-1>s){const h=s-e+1;_n("colspan",h,i,r,1)}if(t+a-1>n){const h=n-t+1;_n("rowspan",h,i,r,1)}}function Zve(i,t,e,n,s){const r=parseInt(t.getAttribute("headingRows")||"0");if(r>0){const a=r-e;_n("headingRows",a,i,s,0)}const o=parseInt(t.getAttribute("headingColumns")||"0");if(o>0){const a=o-n;_n("headingColumns",a,i,s,0)}}function T_(i,t){const e=t.getColumns(i),n=new Array(e).fill(0);for(const{column:r}of new Bt(i))n[r]++;const s=n.reduce((r,o,a)=>o?r:[...r,a],[]);if(s.length>0){const r=s[s.length-1];return t.removeColumns(i,{at:r}),!0}return!1}function k_(i,t){const e=[],n=t.getRows(i);for(let s=0;s<n;s++)i.getChild(s).isEmpty&&e.push(s);if(e.length>0){const s=e[e.length-1];return t.removeRows(i,{at:s}),!0}return!1}function zC(i,t){T_(i,t)||k_(i,t)}function QV(i,t){const e=Array.from(new Bt(i,{startColumn:t.firstColumn,endColumn:t.lastColumn,row:t.lastRow}));if(e.every(({cellHeight:r})=>r===1))return t.lastRow;const s=e[0].cellHeight-1;return t.lastRow+s}function eD(i,t){const e=Array.from(new Bt(i,{startRow:t.firstRow,endRow:t.lastRow,column:t.lastColumn}));if(e.every(({cellWidth:r})=>r===1))return t.lastColumn;const s=e[0].cellWidth-1;return t.lastColumn+s}class Bg extends lt{constructor(e,n){super(e);b(this,"direction");b(this,"isHorizontal");this.direction=n.direction,this.isHorizontal=this.direction=="right"||this.direction=="left"}refresh(){const e=this._getMergeableCell();this.value=e,this.isEnabled=!!e}execute(){const e=this.editor.model,n=e.document,r=this.editor.plugins.get("TableUtils").getTableCellsContainingSelection(n.selection)[0],o=this.value,a=this.direction;e.change(l=>{const c=a=="right"||a=="down",h=c?r:o,f=c?o:r,m=f.parent;Qve(f,h,l);const p=this.isHorizontal?"colspan":"rowspan",v=parseInt(r.getAttribute(p)||"1"),_=parseInt(o.getAttribute(p)||"1");l.setAttribute(p,v+_,h),l.setSelection(l.createRangeIn(h));const E=this.editor.plugins.get("TableUtils"),x=m.findAncestor("table");zC(x,E)})}_getMergeableCell(){const n=this.editor.model.document,s=this.editor.plugins.get("TableUtils"),r=s.getTableCellsContainingSelection(n.selection)[0];if(!r)return;const o=this.isHorizontal?Xve(r,this.direction,s):Jve(r,this.direction,s);if(!o)return;const a=this.isHorizontal?"rowspan":"colspan",l=parseInt(r.getAttribute(a)||"1");if(parseInt(o.getAttribute(a)||"1")===l)return o}}function Xve(i,t,e){const s=i.parent.parent,r=t=="right"?i.nextSibling:i.previousSibling,o=(s.getAttribute("headingColumns")||0)>0;if(!r)return;const a=t=="right"?i:r,l=t=="right"?r:i,{column:c}=e.getCellLocation(a),{column:h}=e.getCellLocation(l),f=parseInt(a.getAttribute("colspan")||"1"),m=x_(e,a),p=x_(e,l);return o&&m!=p?void 0:c+f===h?r:void 0}function Jve(i,t,e){const n=i.parent,s=n.parent,r=s.getChildIndex(n);if(t=="down"&&r===e.getRows(s)-1||t=="up"&&r===0)return null;const o=parseInt(i.getAttribute("rowspan")||"1"),a=s.getAttribute("headingRows")||0,l=t=="down"&&r+o===a,c=t=="up"&&r===a;if(a&&(l||c))return null;const h=parseInt(i.getAttribute("rowspan")||"1"),f=t=="down"?r+h:r,m=[...new Bt(s,{endRow:f})],v=m.find(E=>E.cell===i).column,_=m.find(({row:E,cellHeight:x,column:k})=>k!==v?!1:t=="down"?E===f:f===E+x);return _&&_.cell?_.cell:null}function Qve(i,t,e){$5(i)||($5(t)&&e.remove(e.createRangeIn(t)),e.move(e.createRangeIn(i),e.createPositionAt(t,"end"))),e.remove(i)}function $5(i){const t=i.getChild(0);return i.childCount==1&&t.is("element","paragraph")&&t.isEmpty}class e0e extends lt{refresh(){const t=this.editor.plugins.get("TableUtils"),e=t.getSelectionAffectedTableCells(this.editor.model.document.selection),n=e[0];if(n){const s=n.findAncestor("table"),o=t.getRows(s)-1,a=t.getRowIndexes(e),l=a.first===0&&a.last===o;this.isEnabled=!l}else this.isEnabled=!1}execute(){const t=this.editor.model,e=this.editor.plugins.get("TableUtils"),n=e.getSelectionAffectedTableCells(t.document.selection),s=e.getRowIndexes(n),r=n[0],o=r.findAncestor("table"),a=e.getCellLocation(r).column;t.change(l=>{const c=s.last-s.first+1;e.removeRows(o,{at:s.first,rows:c});const h=t0e(o,s.first,a,e.getRows(o));l.setSelection(l.createPositionAt(h,0))})}}function t0e(i,t,e,n){const s=i.getChild(Math.min(t,n-1));let r=s.getChild(0),o=0;for(const a of s.getChildren()){if(o>e)return r;r=a,o+=parseInt(a.getAttribute("colspan")||"1")}return r}class n0e extends lt{refresh(){const t=this.editor.plugins.get("TableUtils"),e=t.getSelectionAffectedTableCells(this.editor.model.document.selection),n=e[0];if(n){const s=n.findAncestor("table"),r=t.getColumns(s),{first:o,last:a}=t.getColumnIndexes(e);this.isEnabled=a-o<r-1}else this.isEnabled=!1}execute(){const t=this.editor.plugins.get("TableUtils"),[e,n]=s0e(this.editor.model.document.selection,t),s=e.parent.parent,r=[...new Bt(s)],o={first:r.find(l=>l.cell===e).column,last:r.find(l=>l.cell===n).column},a=i0e(r,e,n,o);this.editor.model.change(l=>{const c=o.last-o.first+1;t.removeColumns(s,{at:o.first,columns:c}),l.setSelection(l.createPositionAt(a,0))})}}function i0e(i,t,e,n){return parseInt(e.getAttribute("colspan")||"1")>1?e:t.previousSibling||e.nextSibling?e.nextSibling||t.previousSibling:n.first?i.reverse().find(({column:r})=>r<n.first).cell:i.reverse().find(({column:r})=>r>n.last).cell}function s0e(i,t){const e=t.getSelectionAffectedTableCells(i),n=e[0],s=e.pop(),r=[n,s];return n.isBefore(s)?r:r.reverse()}class r0e extends lt{refresh(){const t=this.editor.plugins.get("TableUtils"),e=this.editor.model,n=t.getSelectionAffectedTableCells(e.document.selection),s=n.length>0;this.isEnabled=s,this.value=s&&n.every(r=>this._isInHeading(r,r.parent.parent))}execute(t={}){if(t.forceValue===this.value)return;const e=this.editor.plugins.get("TableUtils"),n=this.editor.model,s=e.getSelectionAffectedTableCells(n.document.selection),r=s[0].findAncestor("table"),{first:o,last:a}=e.getRowIndexes(s),l=this.value?o:a+1,c=r.getAttribute("headingRows")||0;n.change(h=>{if(l){const f=l>c?c:0,m=KV(r,l,f);for(const{cell:p}of m)YV(p,l,h)}_n("headingRows",l,r,h,0)})}_isInHeading(t,e){const n=parseInt(e.getAttribute("headingRows")||"0");return!!n&&t.parent.index<n}}class o0e extends lt{refresh(){const t=this.editor.model,e=this.editor.plugins.get("TableUtils"),n=e.getSelectionAffectedTableCells(t.document.selection),s=n.length>0;this.isEnabled=s,this.value=s&&n.every(r=>x_(e,r))}execute(t={}){if(t.forceValue===this.value)return;const e=this.editor.plugins.get("TableUtils"),n=this.editor.model,s=e.getSelectionAffectedTableCells(n.document.selection),r=s[0].findAncestor("table"),{first:o,last:a}=e.getColumnIndexes(s),l=this.value?o:a+1;n.change(c=>{if(l){const h=ZV(r,l);for(const{cell:f,column:m}of h)XV(f,m,l,c)}_n("headingColumns",l,r,c,0)})}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const a0e=5,S_=40,l0e=2;function c0e(i){const t=new Set;for(const e of i.document.differ.getChanges()){let n=null;switch(e.type){case"insert":n=["table","tableRow","tableCell"].includes(e.name)?e.position:null;break;case"remove":n=["tableRow","tableCell"].includes(e.name)?e.position:null;break;case"attribute":e.range.start.nodeAfter&&(n=["table","tableRow","tableCell"].includes(e.range.start.nodeAfter.name)?e.range.start:null);break}if(!n)continue;const s=n.nodeAfter&&n.nodeAfter.is("element","table")?n.nodeAfter:n.findAncestor("table");for(const r of i.createRangeOn(s).getItems())r.is("element","table")&&Gf(r)&&t.add(r)}return t}function u0e(i,t){return S_*100/tD(i,t)}function tD(i,t){const e=z5(i,"tbody",t)||z5(i,"thead",t),n=t.editing.view.domConverter.mapViewToDom(e);return A_(n)}function z5(i,t,e){return[...[...e.editing.mapper.toViewElement(i).getChildren()].find(r=>r.is("element","table")).getChildren()].find(r=>r.is("element",t))}function A_(i){const t=Re.window.getComputedStyle(i);return t.boxSizing==="border-box"?parseFloat(t.width)-parseFloat(t.paddingLeft)-parseFloat(t.paddingRight)-parseFloat(t.borderLeftWidth)-parseFloat(t.borderRightWidth):parseFloat(t.width)}function d0e(i,t){const e=t.getCellLocation(i).column,n=i.getAttribute("colspan")||1;return{leftEdge:e,rightEdge:e+n-1}}function Wi(i){const t=Math.pow(10,l0e),e=typeof i=="number"?i:parseFloat(i);return Math.round(e*t)/t}function h0e(i,t,e){return i<=t?Wi(t):i>=e?Wi(e):Wi(i)}function f0e(i,t){return Array(i).fill(t)}function vf(i){return i.map(t=>typeof t=="number"?t:parseFloat(t)).filter(t=>!Number.isNaN(t)).reduce((t,e)=>t+e,0)}function jC(i){const t=i.map(s=>s==="auto"?s:parseFloat(s.replace("%","")));let e=m0e(t);const n=vf(e);return n!==100&&(e=e.map(s=>Wi(s*100/n)).map((s,r,o)=>{if(!(r===o.length-1))return s;const l=vf(o);return Wi(s+100-l)})),e.map(s=>s+"%")}function m0e(i){const t=i.filter(s=>s==="auto").length;if(t===0)return i.map(s=>Wi(s));const e=vf(i),n=Math.max((100-e)/t,a0e);return i.map(s=>s==="auto"?n:s).map(s=>Wi(s))}function g0e(i){const t=Re.window.getComputedStyle(i);return t.boxSizing==="border-box"?parseInt(t.width):parseFloat(t.width)+parseFloat(t.paddingLeft)+parseFloat(t.paddingRight)+parseFloat(t.borderWidth)}function nD(i,t,e,n){for(let s=0;s<Math.max(e.length,i.length);s++){const r=i[s],o=e[s];o?r?n.setAttribute("columnWidth",o,r):n.appendElement("tableColumn",{columnWidth:o},t):n.remove(r)}}function Gf(i){if(i.is("element","tableColumnGroup"))return i;const t=i.getChildren();return Array.from(t).find(e=>e.is("element","tableColumnGroup"))}function Kf(i){const t=Gf(i);return t?Array.from(t.getChildren()):[]}function p0e(i){return Kf(i).map(t=>t.getAttribute("columnWidth"))}function b0e(i,t){return Kf(i).reduce((n,s)=>{const r=s.getAttribute("columnWidth"),o=s.getAttribute("colSpan");if(!o)return n.push(r),n;for(let a=0;a<o;a++)n.push(r);return t.removeAttribute("colSpan",s),n},[])}class Kn extends ie{static get pluginName(){return"TableUtils"}static get isOfficialPlugin(){return!0}init(){this.decorate("insertColumns"),this.decorate("insertRows")}getCellLocation(t){const e=t.parent,n=e.parent,s=n.getChildIndex(e),r=new Bt(n,{row:s});for(const{cell:o,row:a,column:l}of r)if(o===t)return{row:a,column:l};/* istanbul ignore next -- @preserve */}createTable(t,e){const n=t.createElement("table"),s=e.rows||2,r=e.columns||2;return Y1(t,n,0,s,r),e.headingRows&&_n("headingRows",Math.min(e.headingRows,s),n,t,0),e.headingColumns&&_n("headingColumns",Math.min(e.headingColumns,r),n,t,0),n}insertRows(t,e={}){const n=this.editor.model,s=e.at||0,r=e.rows||1,o=e.copyStructureFromAbove!==void 0,a=e.copyStructureFromAbove?s-1:s,l=this.getRows(t),c=this.getColumns(t);if(s>l)throw new B("tableutils-insertrows-insert-out-of-range",this,{options:e});n.change(h=>{const f=t.getAttribute("headingRows")||0;if(f>s&&_n("headingRows",f+r,t,h,0),!o&&(s===0||s===l)){Y1(h,t,s,r,c);return}const m=o?Math.max(s,a):s,p=new Bt(t,{endRow:m}),v=new Array(c).fill(1);for(const{row:_,column:E,cellHeight:x,cellWidth:k,cell:A}of p){const S=_+x-1,O=_<s&&s<=S,P=_<=a&&a<=S;O?(h.setAttribute("rowspan",x+r,A),v[E]=-k):o&&P&&(v[E]=k)}for(let _=0;_<r;_++){const E=h.createElement("tableRow");h.insert(E,t,s);for(let x=0;x<v.length;x++){const k=v[x],A=h.createPositionAt(E,"end");k>0&&cc(h,A,k>1?{colspan:k}:void 0),x+=Math.abs(k)-1}}})}insertColumns(t,e={}){const n=this.editor.model,s=e.at||0,r=e.columns||1;n.change(o=>{const a=t.getAttribute("headingColumns");s<a&&o.setAttribute("headingColumns",a+r,t);const l=this.getColumns(t);if(s===0||l===s){for(const h of t.getChildren())h.is("element","tableRow")&&hu(r,o,o.createPositionAt(h,s?"end":0));return}const c=new Bt(t,{column:s,includeAllSlots:!0});for(const h of c){const{row:f,cell:m,cellAnchorColumn:p,cellAnchorRow:v,cellWidth:_,cellHeight:E}=h;if(p<s){o.setAttribute("colspan",_+r,m);const x=v+E-1;for(let k=f;k<=x;k++)c.skipRow(k)}else hu(r,o,h.getPositionBefore())}})}removeRows(t,e){const n=this.editor.model,s=e.rows||1,r=this.getRows(t),o=e.at,a=o+s-1;if(a>r-1)throw new B("tableutils-removerows-row-index-out-of-range",this,{table:t,options:e});n.change(l=>{const c={first:o,last:a},{cellsToMove:h,cellsToTrim:f}=y0e(t,c);if(h.size){const m=a+1;_0e(t,m,h,l)}for(let m=a;m>=o;m--)l.remove(t.getChild(m));for(const{rowspan:m,cell:p}of f)_n("rowspan",m,p,l);v0e(t,c,l),T_(t,this)||k_(t,this)})}removeColumns(t,e){const n=this.editor.model,s=e.at,r=e.columns||1,o=e.at+r-1;n.change(a=>{w0e(t,{first:s,last:o},a);const l=Kf(t);for(let c=o;c>=s;c--){for(const{cell:h,column:f,cellWidth:m}of[...new Bt(t)])f<=c&&m>1&&f+m>c?_n("colspan",m-1,h,a):f===c&&a.remove(h);if(l[c]){const h=c===0?l[1]:l[c-1],f=parseFloat(l[c].getAttribute("columnWidth")),m=parseFloat(h.getAttribute("columnWidth"));a.remove(l[c]),a.setAttribute("columnWidth",f+m+"%",h)}}k_(t,this)||T_(t,this)})}splitCellVertically(t,e=2){const n=this.editor.model,r=t.parent.parent,o=parseInt(t.getAttribute("rowspan")||"1"),a=parseInt(t.getAttribute("colspan")||"1");n.change(l=>{if(a>1){const{newCellsSpan:c,updatedSpan:h}=j5(a,e);_n("colspan",h,t,l);const f={};c>1&&(f.colspan=c),o>1&&(f.rowspan=o);const m=a>e?e-1:a-1;hu(m,l,l.createPositionAfter(t),f)}if(a<e){const c=e-a,h=[...new Bt(r)],{column:f}=h.find(({cell:_})=>_===t),m=h.filter(({cell:_,cellWidth:E,column:x})=>{const k=_!==t&&x===f,A=x<f&&x+E>f;return k||A});for(const{cell:_,cellWidth:E}of m)l.setAttribute("colspan",E+c,_);const p={};o>1&&(p.rowspan=o),hu(c,l,l.createPositionAfter(t),p);const v=r.getAttribute("headingColumns")||0;v>f&&_n("headingColumns",v+c,r,l)}})}splitCellHorizontally(t,e=2){const n=this.editor.model,s=t.parent,r=s.parent,o=r.getChildIndex(s),a=parseInt(t.getAttribute("rowspan")||"1"),l=parseInt(t.getAttribute("colspan")||"1");n.change(c=>{if(a>1){const h=[...new Bt(r,{startRow:o,endRow:o+a-1,includeAllSlots:!0})],{newCellsSpan:f,updatedSpan:m}=j5(a,e);_n("rowspan",m,t,c);const{column:p}=h.find(({cell:E})=>E===t),v={};f>1&&(v.rowspan=f),l>1&&(v.colspan=l);let _=0;for(const E of h){const{column:x,row:k}=E,A=k>=o+m,S=x===p;_>=f&&S&&(_=0),A&&S&&(_||hu(1,c,E.getPositionBefore(),v),_++)}}if(a<e){const h=e-a,f=[...new Bt(r,{startRow:0,endRow:o})];for(const{cell:v,cellHeight:_,row:E}of f)if(v!==t&&E+_>o){const x=_+h;c.setAttribute("rowspan",x,v)}const m={};l>1&&(m.colspan=l),Y1(c,r,o+1,h,1,m);const p=r.getAttribute("headingRows")||0;p>o&&_n("headingRows",p+h,r,c)}})}getColumns(t){return[...t.getChild(0).getChildren()].filter(n=>n.is("element","tableCell")).reduce((n,s)=>{const r=parseInt(s.getAttribute("colspan")||"1");return n+r},0)}getRows(t){return Array.from(t.getChildren()).reduce((e,n)=>n.is("element","tableRow")?e+1:e,0)}createTableWalker(t,e={}){return new Bt(t,e)}getSelectedTableCells(t){const e=[];for(const n of this.sortRanges(t.getRanges())){const s=n.getContainedElement();s&&s.is("element","tableCell")&&e.push(s)}return e}getTableCellsContainingSelection(t){const e=[];for(const n of t.getRanges()){const s=n.start.findAncestor("tableCell");s&&e.push(s)}return e}getSelectionAffectedTableCells(t){const e=this.getSelectedTableCells(t);return e.length?e:this.getTableCellsContainingSelection(t)}getRowIndexes(t){const e=t.map(n=>n.parent.index);return this._getFirstLastIndexesObject(e)}getColumnIndexes(t){const e=t[0].findAncestor("table"),s=[...new Bt(e)].filter(r=>t.includes(r.cell)).map(r=>r.column);return this._getFirstLastIndexesObject(s)}isSelectionRectangular(t){if(t.length<2||!this._areCellInTheSameTableSection(t))return!1;const e=new Set,n=new Set;let s=0;for(const o of t){const{row:a,column:l}=this.getCellLocation(o),c=parseInt(o.getAttribute("rowspan"))||1,h=parseInt(o.getAttribute("colspan"))||1;e.add(a),n.add(l),c>1&&e.add(a+c-1),h>1&&n.add(l+h-1),s+=c*h}return C0e(e,n)==s}sortRanges(t){return Array.from(t).sort(E0e)}_getFirstLastIndexesObject(t){const e=t.sort((r,o)=>r-o),n=e[0],s=e[e.length-1];return{first:n,last:s}}_areCellInTheSameTableSection(t){const e=t[0].findAncestor("table"),n=this.getRowIndexes(t),s=parseInt(e.getAttribute("headingRows"))||0;if(!this._areIndexesInSameSection(n,s))return!1;const r=this.getColumnIndexes(t),o=parseInt(e.getAttribute("headingColumns"))||0;return this._areIndexesInSameSection(r,o)}_areIndexesInSameSection({first:t,last:e},n){const s=t<n,r=e<n;return s===r}}function Y1(i,t,e,n,s,r={}){for(let o=0;o<n;o++){const a=i.createElement("tableRow");i.insert(a,t,e),hu(s,i,i.createPositionAt(a,"end"),r)}}function hu(i,t,e,n={}){for(let s=0;s<i;s++)cc(t,e,n)}function j5(i,t){if(i<t)return{newCellsSpan:1,updatedSpan:1};const e=Math.floor(i/t),n=i-e*t+e;return{newCellsSpan:e,updatedSpan:n}}function w0e(i,t,e){const n=i.getAttribute("headingColumns")||0;if(n&&t.first<n){const s=Math.min(n-1,t.last)-t.first+1;e.setAttribute("headingColumns",n-s,i)}}function v0e(i,{first:t,last:e},n){const s=i.getAttribute("headingRows")||0;if(t<s){const r=e<s?s-(e-t+1):t;_n("headingRows",r,i,n,0)}}function y0e(i,{first:t,last:e}){const n=new Map,s=[];for(const{row:r,column:o,cellHeight:a,cell:l}of new Bt(i,{endRow:e})){const c=r+a-1;if(r>=t&&r<=e&&c>e){const m=e-r+1,p=a-m;n.set(o,{cell:l,rowspan:p})}if(r<t&&c>=t){let m;c>=e?m=e-t+1:m=c-t+1,s.push({cell:l,rowspan:a-m})}}return{cellsToMove:n,cellsToTrim:s}}function _0e(i,t,e,n){const r=[...new Bt(i,{includeAllSlots:!0,row:t})],o=i.getChild(t);let a;for(const{column:l,cell:c,isAnchor:h}of r)if(e.has(l)){const{cell:f,rowspan:m}=e.get(l),p=a?n.createPositionAfter(a):n.createPositionAt(o,0);n.move(n.createRangeOn(f),p),_n("rowspan",m,f,n),a=f}else h&&(a=c)}function E0e(i,t){const e=i.start,n=t.start;return e.isBefore(n)?-1:1}function C0e(i,t){const e=Array.from(i.values()),n=Array.from(t.values()),s=Math.max(...e),r=Math.min(...e),o=Math.max(...n),a=Math.min(...n);return(s-r+1)*(o-a+1)}class x0e extends lt{refresh(){const t=this.editor.plugins.get(Kn),e=t.getSelectedTableCells(this.editor.model.document.selection);this.isEnabled=t.isSelectionRectangular(e)}execute(){const t=this.editor.model,e=this.editor.plugins.get(Kn);t.change(n=>{const s=e.getSelectedTableCells(t.document.selection),r=s.shift(),{mergeWidth:o,mergeHeight:a}=k0e(r,s,e);_n("colspan",o,r,n),_n("rowspan",a,r,n);for(const c of s)T0e(c,r,n);const l=r.findAncestor("table");zC(l,e),n.setSelection(r,"in")})}}function T0e(i,t,e){H5(i)||(H5(t)&&e.remove(e.createRangeIn(t)),e.move(e.createRangeIn(i),e.createPositionAt(t,"end"))),e.remove(i)}function H5(i){const t=i.getChild(0);return i.childCount==1&&t.is("element","paragraph")&&t.isEmpty}function k0e(i,t,e){let n=0,s=0;for(const c of t){const{row:h,column:f}=e.getCellLocation(c);n=U5(c,f,n,"colspan"),s=U5(c,h,s,"rowspan")}const{row:r,column:o}=e.getCellLocation(i),a=n-o,l=s-r;return{mergeWidth:a,mergeHeight:l}}function U5(i,t,e,n){const s=parseInt(i.getAttribute(n)||"1");return Math.max(e,t+s)}class S0e extends lt{constructor(t){super(t),this.affectsData=!1}refresh(){const e=this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(this.editor.model.document.selection);this.isEnabled=e.length>0}execute(){const t=this.editor.model,e=this.editor.plugins.get("TableUtils"),n=e.getSelectionAffectedTableCells(t.document.selection),s=e.getRowIndexes(n),r=n[0].findAncestor("table"),o=[];for(let a=s.first;a<=s.last;a++)for(const l of r.getChild(a).getChildren())o.push(t.createRangeOn(l));t.change(a=>{a.setSelection(o)})}}class A0e extends lt{constructor(t){super(t),this.affectsData=!1}refresh(){const e=this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(this.editor.model.document.selection);this.isEnabled=e.length>0}execute(){const t=this.editor.plugins.get("TableUtils"),e=this.editor.model,n=t.getSelectionAffectedTableCells(e.document.selection),s=n[0],r=n.pop(),o=s.findAncestor("table"),a=t.getCellLocation(s),l=t.getCellLocation(r),c=Math.min(a.column,l.column),h=Math.max(a.column,l.column),f=[];for(const m of new Bt(o,{startColumn:c,endColumn:h}))f.push(e.createRangeOn(m.cell));e.change(m=>{m.setSelection(f)})}}function P0e(i){i.document.registerPostFixer(t=>I0e(t,i))}function I0e(i,t){const e=t.document.differ.getChanges();let n=!1;const s=new Set;for(const r of e){let o=null;r.type=="insert"&&r.name=="table"&&(o=r.position.nodeAfter),(r.type=="insert"||r.type=="remove")&&(r.name=="tableRow"||r.name=="tableCell")&&(o=r.position.findAncestor("table")),L0e(r)&&(o=r.range.start.findAncestor("table")),o&&!s.has(o)&&(n=R0e(o,i)||n,n=O0e(o,i)||n,s.add(o))}return n}function R0e(i,t){let e=!1;const n=N0e(i);if(n.length){e=!0;for(const s of n)_n("rowspan",s.rowspan,s.cell,t,1)}return e}function O0e(i,t){let e=!1;const n=M0e(i),s=[];for(const[l,c]of n.entries())!c&&i.getChild(l).is("element","tableRow")&&s.push(l);if(s.length){e=!0;for(const l of s.reverse())t.remove(i.getChild(l)),n.splice(l,1)}const r=n.filter((l,c)=>i.getChild(c).is("element","tableRow")),o=r[0];if(!r.every(l=>l===o)){const l=r.reduce((c,h)=>h>c?h:c,0);for(const[c,h]of r.entries()){const f=l-h;if(f){for(let m=0;m<f;m++)cc(t,t.createPositionAt(i.getChild(c),"end"));e=!0}}}return e}function N0e(i){const t=parseInt(i.getAttribute("headingRows")||"0"),e=Array.from(i.getChildren()).reduce((s,r)=>r.is("element","tableRow")?s+1:s,0),n=[];for(const{row:s,cell:r,cellHeight:o}of new Bt(i)){if(o<2)continue;const l=s<t?t:e;if(s+o>l){const c=l-s;n.push({cell:r,rowspan:c})}}return n}function M0e(i){const t=new Array(i.childCount).fill(0);for(const{rowIndex:e}of new Bt(i,{includeAllSlots:!0}))t[e]++;return t}function L0e(i){if(i.type!=="attribute")return!1;const t=i.attributeKey;return t==="headingRows"||t==="colspan"||t==="rowspan"}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function V0e(i){i.document.registerPostFixer(t=>D0e(t,i))}function D0e(i,t){const e=t.document.differ.getChanges();let n=!1;for(const s of e)s.type=="insert"&&s.name=="table"&&(n=B0e(s.position.nodeAfter,i)||n),s.type=="insert"&&s.name=="tableRow"&&(n=iD(s.position.nodeAfter,i)||n),s.type=="insert"&&s.name=="tableCell"&&(n=P_(s.position.nodeAfter,i)||n),(s.type=="remove"||s.type=="insert")&&F0e(s)&&(n=P_(s.position.parent,i)||n);return n}function B0e(i,t){let e=!1;for(const n of i.getChildren())n.is("element","tableRow")&&(e=iD(n,t)||e);return e}function iD(i,t){let e=!1;for(const n of i.getChildren())e=P_(n,t)||e;return e}function P_(i,t){if(i.childCount==0)return t.insertElement("paragraph",i),!0;const e=Array.from(i.getChildren()).filter(n=>n.is("$text"));for(const n of e)t.wrap(t.createRangeOn(n),"paragraph");return!!e.length}function F0e(i){return i.position.parent.is("element","tableCell")?i.type=="insert"&&i.name=="$text"||i.type=="remove":!1}function $0e(i,t){const e=i.document.differ;for(const n of e.getChanges()){let s,r=!1;if(n.type=="attribute"){const c=n.range.start.nodeAfter;if(!c||!c.is("element","table")||n.attributeKey!="headingRows"&&n.attributeKey!="headingColumns")continue;s=c,r=n.attributeKey=="headingRows"}else(n.name=="tableRow"||n.name=="tableCell")&&(s=n.position.findAncestor("table"),r=n.name=="tableRow");if(!s)continue;const o=s.getAttribute("headingRows")||0,a=s.getAttribute("headingColumns")||0,l=new Bt(s);for(const c of l){const f=c.row<o||c.column<a?"th":"td",m=t.mapper.toViewElement(c.cell);m&&m.is("element")&&m.name!=f&&t.reconvertItem(r?c.cell.parent:c.cell)}}}function z0e(i,t){const e=i.document.differ,n=new Set;for(const s of e.getChanges()){const r=s.type=="attribute"?s.range.start.parent:s.position.parent;r.is("element","tableCell")&&n.add(r)}for(const s of n.values()){const r=Array.from(s.getChildren()).filter(o=>j0e(o,t.mapper));for(const o of r)t.reconvertItem(o)}}function j0e(i,t){if(!i.is("element","paragraph"))return!1;const e=t.toViewElement(i);return e?qV(i)!==e.is("element","span"):!1}class Yf extends ie{constructor(e){super(e);b(this,"_additionalSlots");this._additionalSlots=[]}static get pluginName(){return"TableEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[Kn]}init(){const e=this.editor,n=e.model,s=n.schema,r=e.conversion,o=e.plugins.get(Kn);s.register("table",{inheritAllFrom:"$blockObject",allowAttributes:["headingRows","headingColumns"]}),s.register("tableRow",{allowIn:"table",isLimit:!0}),s.register("tableCell",{allowContentOf:"$container",allowIn:"tableRow",allowAttributes:["colspan","rowspan"],isLimit:!0,isSelectable:!0}),r.for("upcast").add(Bve()),r.for("upcast").add(Fve()),r.for("editingDowncast").elementToStructure({model:{name:"table",attributes:["headingRows"]},view:M5(o,{asWidget:!0,additionalSlots:this._additionalSlots})}),r.for("dataDowncast").elementToStructure({model:{name:"table",attributes:["headingRows"]},view:M5(o,{additionalSlots:this._additionalSlots})}),r.for("upcast").elementToElement({model:"tableRow",view:"tr"}),r.for("upcast").add($ve()),r.for("downcast").elementToElement({model:"tableRow",view:Wve()}),r.for("upcast").elementToElement({model:"tableCell",view:"td"}),r.for("upcast").elementToElement({model:"tableCell",view:"th"}),r.for("upcast").add(N5("td")),r.for("upcast").add(N5("th")),r.for("editingDowncast").elementToElement({model:"tableCell",view:L5({asWidget:!0})}),r.for("dataDowncast").elementToElement({model:"tableCell",view:L5()}),r.for("editingDowncast").elementToElement({model:"paragraph",view:V5({asWidget:!0}),converterPriority:"high"}),r.for("dataDowncast").elementToElement({model:"paragraph",view:V5(),converterPriority:"high"}),r.for("downcast").attributeToAttribute({model:"colspan",view:"colspan"}),r.for("upcast").attributeToAttribute({model:{key:"colspan",value:W5("colspan")},view:"colspan"}),r.for("downcast").attributeToAttribute({model:"rowspan",view:"rowspan"}),r.for("upcast").attributeToAttribute({model:{key:"rowspan",value:W5("rowspan")},view:"rowspan"}),e.config.define("table.defaultHeadings.rows",0),e.config.define("table.defaultHeadings.columns",0),e.commands.add("insertTable",new Kve(e)),e.commands.add("insertTableRowAbove",new D5(e,{order:"above"})),e.commands.add("insertTableRowBelow",new D5(e,{order:"below"})),e.commands.add("insertTableColumnLeft",new B5(e,{order:"left"})),e.commands.add("insertTableColumnRight",new B5(e,{order:"right"})),e.commands.add("removeTableRow",new e0e(e)),e.commands.add("removeTableColumn",new n0e(e)),e.commands.add("splitTableCellVertically",new F5(e,{direction:"vertically"})),e.commands.add("splitTableCellHorizontally",new F5(e,{direction:"horizontally"})),e.commands.add("mergeTableCells",new x0e(e)),e.commands.add("mergeTableCellRight",new Bg(e,{direction:"right"})),e.commands.add("mergeTableCellLeft",new Bg(e,{direction:"left"})),e.commands.add("mergeTableCellDown",new Bg(e,{direction:"down"})),e.commands.add("mergeTableCellUp",new Bg(e,{direction:"up"})),e.commands.add("setTableColumnHeader",new o0e(e)),e.commands.add("setTableRowHeader",new r0e(e)),e.commands.add("selectTableRow",new S0e(e)),e.commands.add("selectTableColumn",new A0e(e)),P0e(n),V0e(n),this.listenTo(n.document,"change:data",()=>{$0e(n,e.editing),z0e(n,e.editing)})}registerAdditionalSlot(e){this._additionalSlots.push(e)}}function W5(i){return t=>{const e=parseInt(t.getAttribute(i));return Number.isNaN(e)||e<=0?null:e}}class q5 extends Oe{constructor(e){super(e);b(this,"items");b(this,"keystrokes");b(this,"focusTracker");const n=this.bindTemplate;this.items=this._createGridCollection(),this.keystrokes=new wn,this.focusTracker=new ln,this.set("rows",0),this.set("columns",0),this.bind("label").to(this,"columns",this,"rows",(s,r)=>`${r} × ${s}`),this.setTemplate({tag:"div",attributes:{class:["ck"]},children:[{tag:"div",attributes:{class:["ck-insert-table-dropdown__grid"]},on:{"mouseover@.ck-insert-table-dropdown-grid-box":n.to("boxover")},children:this.items},{tag:"div",attributes:{class:["ck","ck-insert-table-dropdown__label"],"aria-hidden":!0},children:[{text:n.to("label")}]}],on:{mousedown:n.to(s=>{s.preventDefault()}),click:n.to(()=>{this.fire("execute")})}}),this.on("boxover",(s,r)=>{const{row:o,column:a}=r.target.dataset;this.items.get((parseInt(o,10)-1)*10+(parseInt(a,10)-1)).focus()}),this.focusTracker.on("change:focusedElement",(s,r,o)=>{if(!o)return;const{row:a,column:l}=o.dataset;this.set({rows:parseInt(a),columns:parseInt(l)})}),this.on("change:columns",()=>this._highlightGridBoxes()),this.on("change:rows",()=>this._highlightGridBoxes())}render(){super.render(),bC({keystrokeHandler:this.keystrokes,focusTracker:this.focusTracker,gridItems:this.items,numberOfColumns:10,uiLanguageDirection:this.locale&&this.locale.uiLanguageDirection});for(const e of this.items)this.focusTracker.add(e.element);this.keystrokes.listenTo(this.element)}reset(){this.set({rows:1,columns:1})}focus(){this.items.get(0).focus()}focusLast(){this.items.get(0).focus()}_highlightGridBoxes(){const e=this.rows,n=this.columns;this.items.map((s,r)=>{const o=Math.floor(r/10),a=r%10,l=o<e&&a<n;s.set("isOn",l)})}_createGridButton(e,n,s,r){const o=new rt(e);return o.set({label:r,class:"ck-insert-table-dropdown-grid-box"}),o.extendTemplate({attributes:{"data-row":n,"data-column":s}}),o}_createGridCollection(){const e=[];for(let n=0;n<100;n++){const s=Math.floor(n/10),r=n%10,o=`${s+1} × ${r+1}`;e.push(this._createGridButton(this.locale,s+1,r+1,o))}return this.createCollection(e)}}var H0e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1zM2 2v16h16V2H2z" opacity=".6"/><path d="M18 7v1H2V7h16zm0 5v1H2v-1h16z" opacity=".6"/><path d="M14 1v18a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V1a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1zm-2 1H8v4h4V2zm0 6H8v4h4V8zm0 6H8v4h4v-4z"/></svg>',U0e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1zM2 2v16h16V2H2z" opacity=".6"/><path d="M7 2h1v16H7V2zm5 0h1v16h-1V2z" opacity=".6"/><path d="M1 6h18a1 1 0 0 1 1 1v6a1 1 0 0 1-1 1H1a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1zm1 2v4h4V8H2zm6 0v4h4V8H8zm6 0v4h4V8h-4z"/></svg>',W0e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1zM2 2v16h16V2H2z" opacity=".6"/><path d="M7 2h1v16H7V2zm5 0h1v7h-1V2zm6 5v1H2V7h16zM8 12v1H2v-1h6z" opacity=".6"/><path d="M7 7h12a1 1 0 0 1 1 1v11a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V8a1 1 0 0 1 1-1zm1 2v9h10V9H8z"/></svg>';class q0e extends ie{static get pluginName(){return"TableUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=this.editor.t,s=t.locale.contentLanguageDirection==="ltr";t.ui.componentFactory.add("insertTable",r=>{const o=t.commands.get("insertTable"),a=vi(r);a.bind("isEnabled").to(o),a.buttonView.set({icon:ke.table,label:e("Insert table"),tooltip:!0});let l;return a.on("change:isOpen",()=>{l||(l=new q5(r),a.panelView.children.add(l),l.delegate("execute").to(a),a.on("execute",()=>{t.execute("insertTable",{rows:l.rows,columns:l.columns}),t.editing.view.focus()}))}),a}),t.ui.componentFactory.add("menuBar:insertTable",r=>{const o=t.commands.get("insertTable"),a=new ps(r),l=new q5(r);return l.delegate("execute").to(a),a.on("change:isOpen",(c,h,f)=>{f||l.reset()}),l.on("execute",()=>{t.execute("insertTable",{rows:l.rows,columns:l.columns}),t.editing.view.focus()}),a.buttonView.set({label:e("Table"),icon:ke.table}),a.panelView.children.add(l),a.bind("isEnabled").to(o),a}),t.ui.componentFactory.add("tableColumn",r=>{const o=[{type:"switchbutton",model:{commandName:"setTableColumnHeader",label:e("Header column"),bindIsOn:!0}},{type:"separator"},{type:"button",model:{commandName:s?"insertTableColumnLeft":"insertTableColumnRight",label:e("Insert column left")}},{type:"button",model:{commandName:s?"insertTableColumnRight":"insertTableColumnLeft",label:e("Insert column right")}},{type:"button",model:{commandName:"removeTableColumn",label:e("Delete column")}},{type:"button",model:{commandName:"selectTableColumn",label:e("Select column")}}];return this._prepareDropdown(e("Column"),H0e,o,r)}),t.ui.componentFactory.add("tableRow",r=>{const o=[{type:"switchbutton",model:{commandName:"setTableRowHeader",label:e("Header row"),bindIsOn:!0}},{type:"separator"},{type:"button",model:{commandName:"insertTableRowAbove",label:e("Insert row above")}},{type:"button",model:{commandName:"insertTableRowBelow",label:e("Insert row below")}},{type:"button",model:{commandName:"removeTableRow",label:e("Delete row")}},{type:"button",model:{commandName:"selectTableRow",label:e("Select row")}}];return this._prepareDropdown(e("Row"),U0e,o,r)}),t.ui.componentFactory.add("mergeTableCells",r=>{const o=[{type:"button",model:{commandName:"mergeTableCellUp",label:e("Merge cell up")}},{type:"button",model:{commandName:s?"mergeTableCellRight":"mergeTableCellLeft",label:e("Merge cell right")}},{type:"button",model:{commandName:"mergeTableCellDown",label:e("Merge cell down")}},{type:"button",model:{commandName:s?"mergeTableCellLeft":"mergeTableCellRight",label:e("Merge cell left")}},{type:"separator"},{type:"button",model:{commandName:"splitTableCellVertically",label:e("Split cell vertically")}},{type:"button",model:{commandName:"splitTableCellHorizontally",label:e("Split cell horizontally")}}];return this._prepareMergeSplitButtonDropdown(e("Merge cells"),W0e,o,r)})}_prepareDropdown(t,e,n,s){const r=this.editor,o=vi(s),a=this._fillDropdownWithListOptions(o,n);return o.buttonView.set({label:t,icon:e,tooltip:!0}),o.bind("isEnabled").toMany(a,"isEnabled",(...l)=>l.some(c=>c)),this.listenTo(o,"execute",l=>{r.execute(l.source.commandName),l.source instanceof jf||r.editing.view.focus()}),o}_prepareMergeSplitButtonDropdown(t,e,n,s){const r=this.editor,o=vi(s,Hf),a="mergeTableCells",l=r.commands.get(a),c=this._fillDropdownWithListOptions(o,n);return o.buttonView.set({label:t,icon:e,tooltip:!0,isEnabled:!0}),o.bind("isEnabled").toMany([l,...c],"isEnabled",(...h)=>h.some(f=>f)),this.listenTo(o.buttonView,"execute",()=>{r.execute(a),r.editing.view.focus()}),this.listenTo(o,"execute",h=>{r.execute(h.source.commandName),r.editing.view.focus()}),o}_fillDropdownWithListOptions(t,e){const n=this.editor,s=[],r=new oi;for(const o of e)G0e(o,n,s,r);return oc(t,r),s}}function G0e(i,t,e,n){if(i.type==="button"||i.type==="switchbutton"){const s=i.model=new Yl(i.model),{commandName:r,bindIsOn:o}=i.model,a=t.commands.get(r);e.push(a),s.set({commandName:r}),s.bind("isEnabled").to(a),o&&s.bind("isOn").to(a,"value"),s.set({withText:!0})}n.add(i)}class Fl extends ie{static get pluginName(){return"TableSelection"}static get isOfficialPlugin(){return!0}static get requires(){return[Kn,Kn]}init(){const t=this.editor,e=t.model,n=t.editing.view;this.listenTo(e,"deleteContent",(s,r)=>this._handleDeleteContent(s,r),{priority:"high"}),this.listenTo(n.document,"insertText",(s,r)=>this._handleInsertTextEvent(s,r),{priority:"high"}),this._defineSelectionConverter(),this._enablePluginDisabling()}getSelectedTableCells(){const t=this.editor.plugins.get(Kn),e=this.editor.model.document.selection,n=t.getSelectedTableCells(e);return n.length==0?null:n}getSelectionAsFragment(){const t=this.editor.plugins.get(Kn),e=this.getSelectedTableCells();return e?this.editor.model.change(n=>{const s=n.createDocumentFragment(),{first:r,last:o}=t.getColumnIndexes(e),{first:a,last:l}=t.getRowIndexes(e),c=e[0].findAncestor("table");let h=l,f=o;if(t.isSelectionRectangular(e)){const v={firstColumn:r,lastColumn:o,firstRow:a,lastRow:l};h=QV(c,v),f=eD(c,v)}const p=GV(c,{startRow:a,startColumn:r,endRow:h,endColumn:f},n);return n.insert(p,s,0),s}):null}setCellSelection(t,e){const n=this._getCellsToSelect(t,e);this.editor.model.change(s=>{s.setSelection(n.cells.map(r=>s.createRangeOn(r)),{backward:n.backward})})}getFocusCell(){const n=[...this.editor.model.document.selection.getRanges()].pop().getContainedElement();return n&&n.is("element","tableCell")?n:null}getAnchorCell(){const t=this.editor.model.document.selection,n=Tn(t.getRanges()).getContainedElement();return n&&n.is("element","tableCell")?n:null}_defineSelectionConverter(){const t=this.editor,e=new Set;t.conversion.for("editingDowncast").add(s=>s.on("selection",(r,o,a)=>{const l=a.writer;n(l);const c=this.getSelectedTableCells();if(!c)return;for(const f of c){const m=a.mapper.toViewElement(f);l.addClass("ck-editor__editable_selected",m),e.add(m)}const h=a.mapper.toViewElement(c[c.length-1]);l.setSelection(h,0)},{priority:"lowest"}));function n(s){for(const r of e)s.removeClass("ck-editor__editable_selected",r);e.clear()}}_enablePluginDisabling(){const t=this.editor;this.on("change:isEnabled",()=>{if(!this.isEnabled){const e=this.getSelectedTableCells();if(!e)return;t.model.change(n=>{const s=n.createPositionAt(e[0],0),r=t.model.schema.getNearestSelectionRange(s);n.setSelection(r)})}})}_handleDeleteContent(t,e){const n=this.editor.plugins.get(Kn),s=e[0],r=e[1],o=this.editor.model,a=!r||r.direction=="backward",l=n.getSelectedTableCells(s);l.length&&(t.stop(),o.change(c=>{const h=l[a?l.length-1:0];o.change(m=>{for(const p of l)o.deleteContent(m.createSelection(p,"in"))});const f=o.schema.getNearestSelectionRange(c.createPositionAt(h,0));s.is("documentSelection")?c.setSelection(f):s.setTo(f)}))}_handleInsertTextEvent(t,e){const n=this.editor,s=this.getSelectedTableCells();if(!s)return;const r=n.editing.view,o=n.editing.mapper,a=s.map(l=>r.createRangeOn(o.toViewElement(l)));e.selection=r.createSelection(a)}_getCellsToSelect(t,e){const n=this.editor.plugins.get("TableUtils"),s=n.getCellLocation(t),r=n.getCellLocation(e),o=Math.min(s.row,r.row),a=Math.max(s.row,r.row),l=Math.min(s.column,r.column),c=Math.max(s.column,r.column),h=new Array(a-o+1).fill(null).map(()=>[]),f={startRow:o,endRow:a,startColumn:l,endColumn:c};for(const{row:v,cell:_}of new Bt(t.findAncestor("table"),f))h[v-o].push(_);const m=r.row<s.row,p=r.column<s.column;return m&&h.reverse(),p&&h.forEach(v=>v.reverse()),{cells:h.flat(),backward:m||p}}}class K0e extends ie{static get pluginName(){return"TableClipboard"}static get isOfficialPlugin(){return!0}static get requires(){return[$h,Gs,Fl,Kn]}init(){const t=this.editor,e=t.editing.view.document;this.listenTo(e,"copy",(n,s)=>this._onCopyCut(n,s)),this.listenTo(e,"cut",(n,s)=>this._onCopyCut(n,s)),this.listenTo(t.model,"insertContent",(n,[s,r])=>this._onInsertContent(n,s,r),{priority:"high"}),this.decorate("_replaceTableSlotCell")}_onCopyCut(t,e){const n=this.editor.editing.view,s=this.editor.plugins.get(Fl),r=this.editor.plugins.get($h);s.getSelectedTableCells()&&(t.name=="cut"&&!this.editor.model.canEditAt(this.editor.model.document.selection)||(e.preventDefault(),t.stop(),this.editor.model.enqueueChange({isUndoable:t.name==="cut"},()=>{const o=r._copySelectedFragmentWithMarkers(t.name,this.editor.model.document.selection,()=>s.getSelectionAsFragment());n.document.fire("clipboardOutput",{dataTransfer:e.dataTransfer,content:this.editor.data.toView(o),method:t.name})})))}_onInsertContent(t,e,n){if(n&&!n.is("documentSelection"))return;const s=this.editor.model,r=this.editor.plugins.get(Kn),o=this.editor.plugins.get($h),a=this.getTableIfOnlyTableInContent(e,s);if(!a)return;const l=r.getSelectionAffectedTableCells(s.document.selection);if(!l.length){zC(a,r);return}t.stop(),e.is("documentFragment")?o._pasteMarkersIntoTransformedElement(e.markers,c=>this._replaceSelectedCells(a,l,c)):this.editor.model.change(c=>{this._replaceSelectedCells(a,l,c)})}_replaceSelectedCells(t,e,n){const s=this.editor.plugins.get(Kn),r={width:s.getColumns(t),height:s.getRows(t)},o=Y0e(e,r,n,s),a=o.lastRow-o.firstRow+1,l=o.lastColumn-o.firstColumn+1,c={startRow:0,startColumn:0,endRow:Math.min(a,r.height)-1,endColumn:Math.min(l,r.width)-1};t=GV(t,c,n);const h=e[0].findAncestor("table"),f=this._replaceSelectedCellsWithPasted(t,r,h,o,n);if(this.editor.plugins.get("TableSelection").isEnabled){const m=s.sortRanges(f.map(p=>n.createRangeOn(p)));n.setSelection(m)}else n.setSelection(f[0],0);return h}_replaceSelectedCellsWithPasted(t,e,n,s,r){const{width:o,height:a}=e,l=X0e(t,o,a),c=[...new Bt(n,{startRow:s.firstRow,endRow:s.lastRow,startColumn:s.firstColumn,endColumn:s.lastColumn,includeAllSlots:!0})],h=[];let f;for(const E of c){const{row:x,column:k}=E;k===s.firstColumn&&(f=E.getPositionBefore());const A=x-s.firstRow,S=k-s.firstColumn,O=l[A%a][S%o],P=O?r.cloneElement(O):null,N=this._replaceTableSlotCell(E,P,f,r);N&&(JV(N,x,k,s.lastRow,s.lastColumn,r),h.push(N),f=r.createPositionAfter(N))}const m=parseInt(n.getAttribute("headingRows")||"0"),p=parseInt(n.getAttribute("headingColumns")||"0"),v=s.firstRow<m&&m<=s.lastRow,_=s.firstColumn<p&&p<=s.lastColumn;if(v){const E={first:s.firstColumn,last:s.lastColumn},x=I_(n,m,E,r,s.firstRow);h.push(...x)}if(_){const E={first:s.firstRow,last:s.lastRow},x=R_(n,p,E,r);h.push(...x)}return h}_replaceTableSlotCell(t,e,n,s){const{cell:r,isAnchor:o}=t;return o&&s.remove(r),e?(s.insert(e,n),e):null}getTableIfOnlyTableInContent(t,e){if(!t.is("documentFragment")&&!t.is("element"))return null;if(t.is("element","table"))return t;if(t.childCount==1&&t.getChild(0).is("element","table"))return t.getChild(0);const n=e.createRangeIn(t);for(const s of n.getItems())if(s.is("element","table")){const r=e.createRange(n.start,e.createPositionBefore(s));if(e.hasContent(r,{ignoreWhitespaces:!0}))return null;const o=e.createRange(e.createPositionAfter(s),n.end);return e.hasContent(o,{ignoreWhitespaces:!0})?null:s}return null}}function Y0e(i,t,e,n){const s=i[0].findAncestor("table"),r=n.getColumnIndexes(i),o=n.getRowIndexes(i),a={firstColumn:r.first,lastColumn:r.last,firstRow:o.first,lastRow:o.last},l=i.length===1;return l&&(a.lastRow+=t.height-1,a.lastColumn+=t.width-1,Z0e(s,a.lastRow+1,a.lastColumn+1,n)),l||!n.isSelectionRectangular(i)?J0e(s,a,e):(a.lastRow=QV(s,a),a.lastColumn=eD(s,a)),a}function Z0e(i,t,e,n){const s=n.getColumns(i),r=n.getRows(i);e>s&&n.insertColumns(i,{at:s,columns:e-s}),t>r&&n.insertRows(i,{at:r,rows:t-r})}function X0e(i,t,e){const n=new Array(e).fill(null).map(()=>new Array(t).fill(null));for(const{column:s,row:r,cell:o}of new Bt(i))n[r][s]=o;return n}function J0e(i,t,e){const{firstRow:n,lastRow:s,firstColumn:r,lastColumn:o}=t,a={first:n,last:s},l={first:r,last:o};R_(i,r,a,e),R_(i,o+1,a,e),I_(i,n,l,e),I_(i,s+1,l,e,n)}function I_(i,t,e,n,s=0){return t<1?void 0:KV(i,t,s).filter(({column:a,cellWidth:l})=>sD(a,l,e)).map(({cell:a})=>YV(a,t,n))}function R_(i,t,e,n){return t<1?void 0:ZV(i,t).filter(({row:o,cellHeight:a})=>sD(o,a,e)).map(({cell:o,column:a})=>XV(o,a,t,n))}function sD(i,t,e){const n=i+t-1,{first:s,last:r}=e,o=i>=s&&i<=r,a=i<s&&n>=s;return o||a}class Q0e extends ie{static get pluginName(){return"TableKeyboard"}static get isOfficialPlugin(){return!0}static get requires(){return[Fl,Kn]}init(){const t=this.editor,n=t.editing.view.document,s=t.t;this.listenTo(n,"arrowKey",(...r)=>this._onArrowKey(...r),{context:"table"}),this.listenTo(n,"tab",(...r)=>this._handleTabOnSelectedTable(...r),{context:"figure"}),this.listenTo(n,"tab",(...r)=>this._handleTab(...r),{context:["th","td"]}),t.accessibility.addKeystrokeInfoGroup({id:"table",label:s("Keystrokes that can be used in a table cell"),keystrokes:[{label:s("Move the selection to the next cell"),keystroke:"Tab"},{label:s("Move the selection to the previous cell"),keystroke:"Shift+Tab"},{label:s("Insert a new table row (when in the last cell of a table)"),keystroke:"Tab"},{label:s("Navigate through the table"),keystroke:[["arrowup"],["arrowright"],["arrowdown"],["arrowleft"]]}]})}_handleTabOnSelectedTable(t,e){const n=this.editor,r=n.model.document.selection.getSelectedElement();!r||!r.is("element","table")||(e.preventDefault(),e.stopPropagation(),t.stop(),n.model.change(o=>{o.setSelection(o.createRangeIn(r.getChild(0).getChild(0)))}))}_handleTab(t,e){const n=this.editor,s=this.editor.plugins.get(Kn),r=this.editor.plugins.get("TableSelection"),o=n.model.document.selection,a=!e.shiftKey;let l=s.getTableCellsContainingSelection(o)[0];if(l||(l=r.getFocusCell()),!l)return;e.preventDefault(),e.stopPropagation(),t.stop();const c=l.parent,h=c.parent,f=h.getChildIndex(c),m=c.getChildIndex(l),p=m===0;if(!a&&p&&f===0){n.model.change(x=>{x.setSelection(x.createRangeOn(h))});return}const v=m===c.childCount-1,_=f===s.getRows(h)-1;if(a&&_&&v&&(n.execute("insertTableRowBelow"),f===s.getRows(h)-1)){n.model.change(x=>{x.setSelection(x.createRangeOn(h))});return}let E;if(a&&v)E=h.getChild(f+1).getChild(0);else if(!a&&p){const x=h.getChild(f-1);E=x.getChild(x.childCount-1)}else E=c.getChild(m+(a?1:-1));n.model.change(x=>{x.setSelection(x.createRangeIn(E))})}_onArrowKey(t,e){const n=this.editor,s=e.keyCode,r=tw(s,n.locale.contentLanguageDirection);this._handleArrowKeys(r,e.shiftKey)&&(e.preventDefault(),e.stopPropagation(),t.stop())}_handleArrowKeys(t,e){const n=this.editor.plugins.get(Kn),s=this.editor.plugins.get("TableSelection"),r=this.editor.model,o=r.document.selection,a=["right","down"].includes(t),l=n.getSelectedTableCells(o);if(l.length){let h;return e?h=s.getFocusCell():h=a?l[l.length-1]:l[0],this._navigateFromCellInDirection(h,t,e),!0}const c=o.focus.findAncestor("tableCell");/* istanbul ignore if: paranoid check -- @preserve */if(!c)return!1;if(!o.isCollapsed)if(e){if(o.isBackward==a&&!o.containsEntireContent(c))return!1}else{const h=o.getSelectedElement();if(!h||!r.schema.isObject(h))return!1}return this._isSelectionAtCellEdge(o,c,a)?(this._navigateFromCellInDirection(c,t,e),!0):!1}_isSelectionAtCellEdge(t,e,n){const s=this.editor.model,r=this.editor.model.schema,o=n?t.getLastPosition():t.getFirstPosition();if(!r.getLimitElement(o).is("element","tableCell"))return s.createPositionAt(e,n?"end":0).isTouching(o);const a=s.createSelection(o);return s.modifySelection(a,{direction:n?"forward":"backward"}),o.isEqual(a.focus)}_navigateFromCellInDirection(t,e,n=!1){const s=this.editor.model,r=t.findAncestor("table"),o=[...new Bt(r,{includeAllSlots:!0})],{row:a,column:l}=o[o.length-1],c=o.find(({cell:k})=>k==t);let{row:h,column:f}=c;switch(e){case"left":f--;break;case"up":h--;break;case"right":f+=c.cellWidth;break;case"down":h+=c.cellHeight;break}const m=h<0||h>a,p=f<0&&h<=0,v=f>l&&h>=a;if(m||p||v){s.change(k=>{k.setSelection(k.createRangeOn(r))});return}f<0?(f=n?0:l,h--):f>l&&(f=n?l:0,h++);const _=o.find(k=>k.row==h&&k.column==f).cell,E=["right","down"].includes(e),x=this.editor.plugins.get("TableSelection");if(n&&x.isEnabled){const k=x.getAnchorCell()||t;x.setCellSelection(k,_)}else{const k=s.createPositionAt(_,E?0:"end");s.change(A=>{A.setSelection(k)})}}}class rD extends fo{constructor(){super(...arguments);b(this,"domEventType",["mousemove","mouseleave"])}onDomEvent(e){this.fire(e.type,e)}}class e1e extends ie{static get pluginName(){return"TableMouse"}static get isOfficialPlugin(){return!0}static get requires(){return[Fl,Kn]}init(){this.editor.editing.view.addObserver(rD),this._enableShiftClickSelection(),this._enableMouseDragSelection()}_enableShiftClickSelection(){const t=this.editor,e=t.plugins.get(Kn);let n=!1;const s=t.plugins.get(Fl);this.listenTo(t.editing.view.document,"mousedown",(r,o)=>{const a=t.model.document.selection;if(!this.isEnabled||!s.isEnabled||!o.domEvent.shiftKey)return;const l=s.getAnchorCell()||e.getTableCellsContainingSelection(a)[0];if(!l)return;const c=this._getModelTableCellFromDomEvent(o);c&&G5(l,c)&&(n=!0,s.setCellSelection(l,c),o.preventDefault())}),this.listenTo(t.editing.view.document,"mouseup",()=>{n=!1}),this.listenTo(t.editing.view.document,"selectionChange",r=>{n&&r.stop()},{priority:"highest"})}_enableMouseDragSelection(){const t=this.editor;let e,n,s=!1,r=!1;const o=t.plugins.get(Fl);this.listenTo(t.editing.view.document,"mousedown",(a,l)=>{!this.isEnabled||!o.isEnabled||l.domEvent.shiftKey||l.domEvent.ctrlKey||l.domEvent.altKey||(e=this._getModelTableCellFromDomEvent(l))}),this.listenTo(t.editing.view.document,"mousemove",(a,l)=>{if(!l.domEvent.buttons||!e)return;const c=this._getModelTableCellFromDomEvent(l);c&&G5(e,c)&&(n=c,!s&&n!=e&&(s=!0)),s&&(r=!0,o.setCellSelection(e,n),l.preventDefault())}),this.listenTo(t.editing.view.document,"mouseup",()=>{s=!1,r=!1,e=null,n=null}),this.listenTo(t.editing.view.document,"selectionChange",a=>{r&&a.stop()},{priority:"highest"})}_getModelTableCellFromDomEvent(t){const e=t.target,n=this.editor.editing.view.createPositionAt(e,0);return this.editor.editing.mapper.toModelPosition(n).parent.findAncestor("tableCell",{includeSelf:!0})}}function G5(i,t){return i.parent.parent==t.parent.parent}class t1e extends ie{static get requires(){return[Yf,q0e,Fl,e1e,Q0e,K0e,Uf]}static get pluginName(){return"Table"}static get isOfficialPlugin(){return!0}}function oD(i){const t=aD(i);return t||_w(i)}function aD(i){const t=i.getSelectedElement();return t&&lD(t)?t:null}function _w(i){const t=i.getFirstPosition();if(!t)return null;let e=t.parent;for(;e;){if(e.is("element")&&lD(e))return e;e=e.parent}return null}function lD(i){return!!i.getCustomProperty("table")&&En(i)}class n1e extends ie{static get requires(){return[tb]}static get pluginName(){return"TableToolbar"}static get isOfficialPlugin(){return!0}afterInit(){const t=this.editor,e=t.t,n=t.plugins.get(tb),s=t.config.get("table.contentToolbar"),r=t.config.get("table.tableToolbar");s&&n.register("tableContent",{ariaLabel:e("Table toolbar"),items:s,getRelatedElement:_w}),r&&n.register("table",{ariaLabel:e("Table toolbar"),items:r,getRelatedElement:aD})}}class i1e extends Oe{constructor(e,n){super(e);b(this,"options");b(this,"focusTracker");b(this,"focusCycler");b(this,"_focusables");b(this,"dropdownView");b(this,"inputView");b(this,"keystrokes");b(this,"_stillTyping");this.set("value",""),this.set("isReadOnly",!1),this.set("isFocused",!1),this.set("isEmpty",!0),this.options=n,this.focusTracker=new ln,this._focusables=new ai,this.dropdownView=this._createDropdownView(),this.inputView=this._createInputTextView(),this.keystrokes=new wn,this._stillTyping=!1,this.focusCycler=new Oi({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-input-color"]},children:[this.dropdownView,this.inputView]}),this.on("change:value",(s,r,o)=>this._setInputValue(o))}render(){super.render(),[this.inputView,this.dropdownView.buttonView].forEach(e=>{this.focusTracker.add(e.element),this._focusables.add(e)}),this.keystrokes.listenTo(this.element)}focus(e){e===-1?this.focusCycler.focusLast():this.focusCycler.focusFirst()}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}_createDropdownView(){const e=this.locale,n=e.t,s=this.bindTemplate,r=this._createColorSelector(e),o=vi(e),a=new Oe;return a.setTemplate({tag:"span",attributes:{class:["ck","ck-input-color__button__preview"],style:{backgroundColor:s.to("value")}},children:[{tag:"span",attributes:{class:["ck","ck-input-color__button__preview__no-color-indicator",s.if("value","ck-hidden",l=>l!="")]}}]}),o.buttonView.extendTemplate({attributes:{class:"ck-input-color__button"}}),o.buttonView.children.add(a),o.buttonView.label=n("Color picker"),o.buttonView.tooltip=!0,o.panelPosition=e.uiLanguageDirection==="rtl"?"se":"sw",o.panelView.children.add(r),o.bind("isEnabled").to(this,"isReadOnly",l=>!l),o.on("change:isOpen",(l,c,h)=>{h&&(r.updateSelectedColors(),r.showColorGridsFragment())}),o}_createInputTextView(){const e=this.locale,n=new hL(e);return n.extendTemplate({on:{blur:n.bindTemplate.to("blur")}}),n.value=this.value,n.bind("isReadOnly","hasError").to(this),this.bind("isFocused","isEmpty").to(n),n.on("input",()=>{const s=n.element.value,r=this.options.colorDefinitions.find(o=>s===o.label);this._stillTyping=!0,this.value=r&&r.color||s}),n.on("blur",()=>{this._stillTyping=!1,this._setInputValue(n.element.value)}),n.delegate("input").to(this),n}_createColorSelector(e){const n=e.t,s=this.options.defaultColorValue||"",r=n(s?"Restore default":"Remove color"),o=new yC(e,{colors:this.options.colorDefinitions,columns:this.options.columns,removeButtonLabel:r,colorPickerLabel:n("Color picker"),colorPickerViewConfig:this.options.colorPickerConfig===!1?!1:{...this.options.colorPickerConfig,hideInput:!0}});o.appendUI(),o.on("execute",(l,c)=>{if(c.source==="colorPickerSaveButton"){this.dropdownView.isOpen=!1;return}this.value=c.value||s,this.fire("input"),c.source!=="colorPicker"&&(this.dropdownView.isOpen=!1)});let a=this.value;return o.on("colorPicker:cancel",()=>{this.value=a,this.fire("input"),this.dropdownView.isOpen=!1}),o.colorGridsFragmentView.colorPickerButtonView.on("execute",()=>{a=this.value}),o.bind("selectedColor").to(this,"value"),o}_setInputValue(e){if(!this._stillTyping){const n=K5(e),s=this.options.colorDefinitions.find(r=>n===K5(r.color));s?this.inputView.value=s.label:this.inputView.value=e||""}}}function K5(i){return i.replace(/([(,])\s+/g,"$1").replace(/^\s+|\s+(?=[),\s]|$)/g,"").replace(/,|\s/g," ")}const HC=i=>i==="";function UC(i){return{none:i("None"),solid:i("Solid"),dotted:i("Dotted"),dashed:i("Dashed"),double:i("Double"),groove:i("Groove"),ridge:i("Ridge"),inset:i("Inset"),outset:i("Outset")}}function cD(i){return i('The color is invalid. Try "#FF0000" or "rgb(255,0,0)" or "red".')}function uD(i){return i('The value is invalid. Try "10px" or "2em" or simply "2".')}function lb(i){return i=i.trim().toLowerCase(),HC(i)||B4(i)}function jh(i){return i=i.trim(),HC(i)||fD(i)||aw(i)||F4(i)}function dD(i){return i=i.trim(),HC(i)||fD(i)||aw(i)}function hD(i,t){const e=new oi,n=UC(i.t);for(const s in n){const r={type:"button",model:new Yl({_borderStyleValue:s,label:n[s],role:"menuitemradio",withText:!0})};s==="none"?r.model.bind("isOn").to(i,"borderStyle",o=>t==="none"?!o:o===s):r.model.bind("isOn").to(i,"borderStyle",o=>o===s),e.add(r)}return e}function O_(i){const{view:t,icons:e,toolbar:n,labels:s,propertyName:r,nameToValue:o,defaultValue:a}=i;for(const l in s){const c=new rt(t.locale);c.set({role:"radio",isToggleable:!0,label:s[l],icon:e[l],tooltip:s[l]});const h=o?o(l):l;c.bind("isOn").to(t,r,f=>{let m=f;return f===""&&a&&(m=a),h===m}),c.on("execute",()=>{t[r]=h}),n.items.add(c)}}const cb=[{color:"hsl(0, 0%, 0%)",label:"Black"},{color:"hsl(0, 0%, 30%)",label:"Dim grey"},{color:"hsl(0, 0%, 60%)",label:"Grey"},{color:"hsl(0, 0%, 90%)",label:"Light grey"},{color:"hsl(0, 0%, 100%)",label:"White",hasBorder:!0},{color:"hsl(0, 75%, 60%)",label:"Red"},{color:"hsl(30, 75%, 60%)",label:"Orange"},{color:"hsl(60, 75%, 60%)",label:"Yellow"},{color:"hsl(90, 75%, 60%)",label:"Light green"},{color:"hsl(120, 75%, 60%)",label:"Green"},{color:"hsl(150, 75%, 60%)",label:"Aquamarine"},{color:"hsl(180, 75%, 60%)",label:"Turquoise"},{color:"hsl(210, 75%, 60%)",label:"Light blue"},{color:"hsl(240, 75%, 60%)",label:"Blue"},{color:"hsl(270, 75%, 60%)",label:"Purple"}];function ub(i){return(t,e,n)=>{const s=new i1e(t.locale,{colorDefinitions:s1e(i.colorConfig),columns:i.columns,defaultColorValue:i.defaultColorValue,colorPickerConfig:i.colorPickerConfig});return s.inputView.set({id:e,ariaDescribedById:n}),s.bind("isReadOnly").to(t,"isEnabled",r=>!r),s.bind("hasError").to(t,"errorText",r=>!!r),s.on("input",()=>{t.errorText=null}),t.bind("isEmpty","isFocused").to(s),s}}function fD(i){const t=parseFloat(i);return!Number.isNaN(t)&&i===String(t)}function s1e(i){return i.map(t=>({color:t.model,label:t.label,options:{hasBorder:t.hasBorder}}))}class cs extends Oe{constructor(e,n={}){super(e);b(this,"children");const s=this.bindTemplate;this.set("class",n.class||null),this.children=this.createCollection(),n.children&&n.children.forEach(r=>this.children.add(r)),this.set("_role",null),this.set("_ariaLabelledBy",null),n.labelView&&this.set({_role:"group",_ariaLabelledBy:n.labelView.id}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-form__row",s.to("class")],role:s.to("_role"),"aria-labelledby":s.to("_ariaLabelledBy")},children:this.children})}}class r1e extends Oe{constructor(e,n){super(e);b(this,"options");b(this,"focusTracker");b(this,"keystrokes");b(this,"children");b(this,"borderStyleDropdown");b(this,"borderWidthInput");b(this,"borderColorInput");b(this,"backgroundInput");b(this,"paddingInput");b(this,"widthInput");b(this,"heightInput");b(this,"horizontalAlignmentToolbar");b(this,"verticalAlignmentToolbar");b(this,"saveButtonView");b(this,"cancelButtonView");b(this,"_focusables");b(this,"_focusCycler");this.set({borderStyle:"",borderWidth:"",borderColor:"",padding:"",backgroundColor:"",width:"",height:"",horizontalAlignment:"",verticalAlignment:""}),this.options=n;const{borderStyleDropdown:s,borderWidthInput:r,borderColorInput:o,borderRowLabel:a}=this._createBorderFields(),{backgroundRowLabel:l,backgroundInput:c}=this._createBackgroundFields(),{widthInput:h,operatorLabel:f,heightInput:m,dimensionsLabel:p}=this._createDimensionFields(),{horizontalAlignmentToolbar:v,verticalAlignmentToolbar:_,alignmentLabel:E}=this._createAlignmentFields();this.focusTracker=new ln,this.keystrokes=new wn,this.children=this.createCollection(),this.borderStyleDropdown=s,this.borderWidthInput=r,this.borderColorInput=o,this.backgroundInput=c,this.paddingInput=this._createPaddingField(),this.widthInput=h,this.heightInput=m,this.horizontalAlignmentToolbar=v,this.verticalAlignmentToolbar=_;const{saveButtonView:x,cancelButtonView:k}=this._createActionButtons();this.saveButtonView=x,this.cancelButtonView=k,this._focusables=new ai,this._focusCycler=new Oi({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.children.add(new wC(e,{label:this.t("Cell properties")})),this.children.add(new cs(e,{labelView:a,children:[a,s,o,r],class:"ck-table-form__border-row"})),this.children.add(new cs(e,{labelView:l,children:[l,c],class:"ck-table-form__background-row"})),this.children.add(new cs(e,{children:[new cs(e,{labelView:p,children:[p,h,f,m],class:"ck-table-form__dimensions-row"}),new cs(e,{children:[this.paddingInput],class:"ck-table-cell-properties-form__padding-row"})]})),this.children.add(new cs(e,{labelView:E,children:[E,v,_],class:"ck-table-cell-properties-form__alignment-row"})),this.children.add(new cs(e,{children:[this.saveButtonView,this.cancelButtonView],class:"ck-table-form__action-row"})),this.setTemplate({tag:"form",attributes:{class:["ck","ck-form","ck-table-form","ck-table-cell-properties-form"],tabindex:"-1"},children:this.children})}render(){super.render(),Xa({view:this}),[this.borderColorInput,this.backgroundInput].forEach(e=>{this._focusCycler.chain(e.fieldView.focusCycler)}),[this.borderStyleDropdown,this.borderColorInput,this.borderWidthInput,this.backgroundInput,this.widthInput,this.heightInput,this.paddingInput,this.horizontalAlignmentToolbar,this.verticalAlignmentToolbar,this.saveButtonView,this.cancelButtonView].forEach(e=>{this._focusables.add(e),this.focusTracker.add(e.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}_createBorderFields(){const e=this.options.defaultTableCellProperties,n={style:e.borderStyle,width:e.borderWidth,color:e.borderColor},s=ub({colorConfig:this.options.borderColors,columns:5,defaultColorValue:n.color,colorPickerConfig:this.options.colorPickerConfig}),r=this.locale,o=this.t,a=o("Style"),l=new Fs(r);l.text=o("Border");const c=UC(o),h=new Mn(r,vL);h.set({label:a,class:"ck-table-form__border-style"}),h.fieldView.buttonView.set({ariaLabel:a,ariaLabelledBy:void 0,isOn:!1,withText:!0,tooltip:a}),h.fieldView.buttonView.bind("label").to(this,"borderStyle",p=>c[p||"none"]),h.fieldView.on("execute",p=>{this.borderStyle=p.source._borderStyleValue}),h.bind("isEmpty").to(this,"borderStyle",p=>!p),oc(h.fieldView,hD(this,n.style),{role:"menu",ariaLabel:a});const f=new Mn(r,$s);f.set({label:o("Width"),class:"ck-table-form__border-width"}),f.fieldView.bind("value").to(this,"borderWidth"),f.bind("isEnabled").to(this,"borderStyle",Fg),f.fieldView.on("input",()=>{this.borderWidth=f.fieldView.element.value});const m=new Mn(r,s);return m.set({label:o("Color"),class:"ck-table-form__border-color"}),m.fieldView.bind("value").to(this,"borderColor"),m.bind("isEnabled").to(this,"borderStyle",Fg),m.fieldView.on("input",()=>{this.borderColor=m.fieldView.value}),this.on("change:borderStyle",(p,v,_,E)=>{Fg(_)||(this.borderColor="",this.borderWidth=""),Fg(E)||(this.borderColor=n.color,this.borderWidth=n.width)}),{borderRowLabel:l,borderStyleDropdown:h,borderColorInput:m,borderWidthInput:f}}_createBackgroundFields(){const e=this.locale,n=this.t,s=new Fs(e);s.text=n("Background");const r=ub({colorConfig:this.options.backgroundColors,columns:5,defaultColorValue:this.options.defaultTableCellProperties.backgroundColor,colorPickerConfig:this.options.colorPickerConfig}),o=new Mn(e,r);return o.set({label:n("Color"),class:"ck-table-cell-properties-form__background"}),o.fieldView.bind("value").to(this,"backgroundColor"),o.fieldView.on("input",()=>{this.backgroundColor=o.fieldView.value}),{backgroundRowLabel:s,backgroundInput:o}}_createDimensionFields(){const e=this.locale,n=this.t,s=new Fs(e);s.text=n("Dimensions");const r=new Mn(e,$s);r.set({label:n("Width"),class:"ck-table-form__dimensions-row__width"}),r.fieldView.bind("value").to(this,"width"),r.fieldView.on("input",()=>{this.width=r.fieldView.element.value});const o=new Oe(e);o.setTemplate({tag:"span",attributes:{class:["ck-table-form__dimension-operator"]},children:[{text:"×"}]});const a=new Mn(e,$s);return a.set({label:n("Height"),class:"ck-table-form__dimensions-row__height"}),a.fieldView.bind("value").to(this,"height"),a.fieldView.on("input",()=>{this.height=a.fieldView.element.value}),{dimensionsLabel:s,widthInput:r,operatorLabel:o,heightInput:a}}_createPaddingField(){const e=this.locale,n=this.t,s=new Mn(e,$s);return s.set({label:n("Padding"),class:"ck-table-cell-properties-form__padding"}),s.fieldView.bind("value").to(this,"padding"),s.fieldView.on("input",()=>{this.padding=s.fieldView.element.value}),s}_createAlignmentFields(){const e=this.locale,n=this.t,s=new Fs(e),r={left:ke.alignLeft,center:ke.alignCenter,right:ke.alignRight,justify:ke.alignJustify,top:ke.alignTop,middle:ke.alignMiddle,bottom:ke.alignBottom};s.text=n("Table cell text alignment");const o=new Uu(e),a=e.contentLanguageDirection==="rtl";o.set({isCompact:!0,role:"radiogroup",ariaLabel:n("Horizontal text alignment toolbar")}),O_({view:this,icons:r,toolbar:o,labels:this._horizontalAlignmentLabels,propertyName:"horizontalAlignment",nameToValue:c=>{if(a){if(c==="left")return"right";if(c==="right")return"left"}return c},defaultValue:this.options.defaultTableCellProperties.horizontalAlignment});const l=new Uu(e);return l.set({isCompact:!0,role:"radiogroup",ariaLabel:n("Vertical text alignment toolbar")}),O_({view:this,icons:r,toolbar:l,labels:this._verticalAlignmentLabels,propertyName:"verticalAlignment",defaultValue:this.options.defaultTableCellProperties.verticalAlignment}),{horizontalAlignmentToolbar:o,verticalAlignmentToolbar:l,alignmentLabel:s}}_createActionButtons(){const e=this.locale,n=this.t,s=new rt(e),r=new rt(e),o=[this.borderWidthInput,this.borderColorInput,this.backgroundInput,this.paddingInput];return s.set({label:n("Save"),icon:ke.check,class:"ck-button-save",type:"submit",withText:!0}),s.bind("isEnabled").toMany(o,"errorText",(...a)=>a.every(l=>!l)),r.set({label:n("Cancel"),icon:ke.cancel,class:"ck-button-cancel",withText:!0}),r.delegate("execute").to(this,"cancel"),{saveButtonView:s,cancelButtonView:r}}get _horizontalAlignmentLabels(){const e=this.locale,n=this.t,s=n("Align cell text to the left"),r=n("Align cell text to the center"),o=n("Align cell text to the right"),a=n("Justify cell text");return e.uiLanguageDirection==="rtl"?{right:o,center:r,left:s,justify:a}:{left:s,center:r,right:o,justify:a}}get _verticalAlignmentLabels(){const e=this.t;return{top:e("Align cell text to the top"),middle:e("Align cell text to the middle"),bottom:e("Align cell text to the bottom")}}}function Fg(i){return i!=="none"}const N_=[Ti.defaultPositions.northArrowSouth,Ti.defaultPositions.northArrowSouthWest,Ti.defaultPositions.northArrowSouthEast,Ti.defaultPositions.southArrowNorth,Ti.defaultPositions.southArrowNorthWest,Ti.defaultPositions.southArrowNorthEast,Ti.defaultPositions.viewportStickyNorth];function mD(i,t){const e=i.plugins.get("ContextualBalloon"),n=i.editing.view.document.selection;let s;t==="cell"?_w(n)&&(s=pD(i)):oD(n)&&(s=gD(i)),s&&e.updatePosition(s)}function gD(i){const t=i.model.document.selection,e=Bl(t),n=i.editing.mapper.toViewElement(e);return{target:i.editing.view.domConverter.mapViewToDom(n),positions:N_}}function pD(i){const t=i.editing.mapper,e=i.editing.view.domConverter,n=i.model.document.selection;if(n.rangeCount>1)return{target:()=>o1e(n.getRanges(),i),positions:N_};const s=bD(n.getFirstPosition()),r=t.toViewElement(s);return{target:e.mapViewToDom(r),positions:N_}}function bD(i){return i.nodeAfter&&i.nodeAfter.is("element","tableCell")?i.nodeAfter:i.findAncestor("tableCell")}function o1e(i,t){const e=t.editing.mapper,n=t.editing.view.domConverter,s=Array.from(i).map(r=>{const o=bD(r.start),a=e.toViewElement(o);return new at(n.mapViewToDom(a))});return at.getBoundingRect(s)}var a1e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.105 18-.17 1H2.5A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1h15A1.5 1.5 0 0 1 19 2.5v9.975l-.85-.124-.15-.302V8h-5v4h.021l-.172.351-1.916.28-.151.027c-.287.063-.54.182-.755.341L8 13v5h3.105zM2 12h5V8H2v4zm10-4H8v4h4V8zM2 2v5h5V2H2zm0 16h5v-5H2v5zM13 7h5V2h-5v5zM8 2v5h4V2H8z" opacity=".6"/><path d="m15.5 11.5 1.323 2.68 2.957.43-2.14 2.085.505 2.946L15.5 18.25l-2.645 1.39.505-2.945-2.14-2.086 2.957-.43L15.5 11.5zM13 6a1 1 0 0 1 1 1v3.172a2.047 2.047 0 0 0-.293.443l-.858 1.736-1.916.28-.151.027A1.976 1.976 0 0 0 9.315 14H7a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h6zm-1 2H8v4h4V8z"/></svg>';function uc(i){if(!i||!Yt(i))return i;const{top:t,right:e,bottom:n,left:s}=i;if(t==e&&e==n&&n==s)return t}function dc(i,t){const e=parseFloat(i);return Number.isNaN(e)||String(e)!==String(i)?i:`${e}${t}`}function wD(i,t={}){const e={borderStyle:"none",borderWidth:"",borderColor:"",backgroundColor:"",width:"",height:"",...i};return t.includeAlignmentProperty&&!e.alignment&&(e.alignment="center"),t.includePaddingProperty&&!e.padding&&(e.padding=""),t.includeVerticalAlignmentProperty&&!e.verticalAlignment&&(e.verticalAlignment="middle"),t.includeHorizontalAlignmentProperty&&!e.horizontalAlignment&&(e.horizontalAlignment=t.isRightToLeftContent?"right":"left"),e}function vD(i,t){return wD({borderStyle:"double",borderColor:"hsl(0, 0%, 70%)",borderWidth:"1px",...i},t)}function WC(i,t){return wD({borderStyle:"solid",borderColor:"hsl(0, 0%, 75%)",borderWidth:"1px",...i},t)}const l1e=500,Y5={borderStyle:"tableCellBorderStyle",borderColor:"tableCellBorderColor",borderWidth:"tableCellBorderWidth",height:"tableCellHeight",width:"tableCellWidth",padding:"tableCellPadding",backgroundColor:"tableCellBackgroundColor",horizontalAlignment:"tableCellHorizontalAlignment",verticalAlignment:"tableCellVerticalAlignment"};class c1e extends ie{constructor(e){super(e);b(this,"_defaultTableCellProperties");b(this,"_balloon");b(this,"view");b(this,"_undoStepBatch");b(this,"_isReady");e.config.define("table.tableCellProperties",{borderColors:cb,backgroundColors:cb})}static get requires(){return[kr]}static get pluginName(){return"TableCellPropertiesUI"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,n=e.t;this._defaultTableCellProperties=WC(e.config.get("table.tableCellProperties.defaultProperties"),{includeVerticalAlignmentProperty:!0,includeHorizontalAlignmentProperty:!0,includePaddingProperty:!0,isRightToLeftContent:e.locale.contentLanguageDirection==="rtl"}),this._balloon=e.plugins.get(kr),this.view=null,this._isReady=!1,e.ui.componentFactory.add("tableCellProperties",s=>{const r=new rt(s);r.set({label:n("Cell properties"),icon:a1e,tooltip:!0}),this.listenTo(r,"execute",()=>this._showView());const o=Object.values(Y5).map(a=>e.commands.get(a));return r.bind("isEnabled").toMany(o,"isEnabled",(...a)=>a.some(l=>l)),r})}destroy(){super.destroy(),this.view&&this.view.destroy()}_createPropertiesView(){const e=this.editor,n=e.config.get("table.tableCellProperties"),s=mf(n.borderColors),r=ff(e.locale,s),o=mf(n.backgroundColors),a=ff(e.locale,o),l=n.colorPicker!==!1,c=new r1e(e.locale,{borderColors:r,backgroundColors:a,defaultTableCellProperties:this._defaultTableCellProperties,colorPickerConfig:l?n.colorPicker||{}:!1}),h=e.t;c.render(),this.listenTo(c,"submit",()=>{this._hideView()}),this.listenTo(c,"cancel",()=>{this._undoStepBatch.operations.length&&e.execute("undo",this._undoStepBatch),this._hideView()}),c.keystrokes.set("Esc",(p,v)=>{this._hideView(),v()}),Za({emitter:c,activator:()=>this._isViewInBalloon,contextElements:[this._balloon.view.element],callback:()=>this._hideView()});const f=cD(h),m=uD(h);return c.on("change:borderStyle",this._getPropertyChangeCallback("tableCellBorderStyle")),c.on("change:borderColor",this._getValidatedPropertyChangeCallback({viewField:c.borderColorInput,commandName:"tableCellBorderColor",errorText:f,validator:lb})),c.on("change:borderWidth",this._getValidatedPropertyChangeCallback({viewField:c.borderWidthInput,commandName:"tableCellBorderWidth",errorText:m,validator:dD})),c.on("change:padding",this._getValidatedPropertyChangeCallback({viewField:c.paddingInput,commandName:"tableCellPadding",errorText:m,validator:jh})),c.on("change:width",this._getValidatedPropertyChangeCallback({viewField:c.widthInput,commandName:"tableCellWidth",errorText:m,validator:jh})),c.on("change:height",this._getValidatedPropertyChangeCallback({viewField:c.heightInput,commandName:"tableCellHeight",errorText:m,validator:jh})),c.on("change:backgroundColor",this._getValidatedPropertyChangeCallback({viewField:c.backgroundInput,commandName:"tableCellBackgroundColor",errorText:f,validator:lb})),c.on("change:horizontalAlignment",this._getPropertyChangeCallback("tableCellHorizontalAlignment")),c.on("change:verticalAlignment",this._getPropertyChangeCallback("tableCellVerticalAlignment")),c}_fillViewFormFromCommandValues(){const e=this.editor.commands,n=e.get("tableCellBorderStyle");Object.entries(Y5).map(([s,r])=>{const o=this._defaultTableCellProperties[s]||"";return[s,e.get(r).value||o]}).forEach(([s,r])=>{(s==="borderColor"||s==="borderWidth")&&n.value==="none"||this.view.set(s,r)}),this._isReady=!0}_showView(){const e=this.editor;this.view||(this.view=this._createPropertiesView()),this.listenTo(e.ui,"update",()=>{this._updateView()}),this._fillViewFormFromCommandValues(),this._balloon.add({view:this.view,position:pD(e)}),this._undoStepBatch=e.model.createBatch(),this.view.focus()}_hideView(){const e=this.editor;this.stopListening(e.ui,"update"),this._isReady=!1,this.view.saveButtonView.focus(),this._balloon.remove(this.view),this.editor.editing.view.focus()}_updateView(){const e=this.editor,n=e.editing.view.document;_w(n.selection)?this._isViewVisible&&mD(e,"cell"):this._hideView()}get _isViewVisible(){return!!this.view&&this._balloon.visibleView===this.view}get _isViewInBalloon(){return!!this.view&&this._balloon.hasView(this.view)}_getPropertyChangeCallback(e){return(n,s,r)=>{this._isReady&&this.editor.execute(e,{value:r,batch:this._undoStepBatch})}}_getValidatedPropertyChangeCallback(e){const{commandName:n,viewField:s,validator:r,errorText:o}=e,a=qs(()=>{s.errorText=o},l1e);return(l,c,h)=>{a.cancel(),this._isReady&&(r(h)?(this.editor.execute(n,{value:h,batch:this._undoStepBatch}),s.errorText=null):a())}}}class ea extends lt{constructor(e,n,s){super(e);b(this,"attributeName");b(this,"_defaultValue");this.attributeName=n,this._defaultValue=s}refresh(){const e=this.editor,s=this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(e.model.document.selection);this.isEnabled=!!s.length,this.value=this._getSingleValue(s)}execute(e={}){const{value:n,batch:s}=e,r=this.editor.model,a=this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(r.document.selection),l=this._getValueToSet(n);r.enqueueChange(s,c=>{l?a.forEach(h=>c.setAttribute(this.attributeName,l,h)):a.forEach(h=>c.removeAttribute(this.attributeName,h))})}_getAttribute(e){if(!e)return;const n=e.getAttribute(this.attributeName);if(n!==this._defaultValue)return n}_getValueToSet(e){if(e!==this._defaultValue)return e}_getSingleValue(e){const n=this._getAttribute(e[0]);return e.every(r=>this._getAttribute(r)===n)?n:void 0}}class u1e extends ea{constructor(t,e){super(t,"tableCellWidth",e)}_getValueToSet(t){if(t=dc(t,"px"),t!==this._defaultValue)return t}}class yD extends ie{static get pluginName(){return"TableCellWidthEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[Yf]}init(){const t=this.editor,e=WC(t.config.get("table.tableCellProperties.defaultProperties"));hp(t.model.schema,t.conversion,{modelAttribute:"tableCellWidth",styleName:"width",defaultValue:e.width}),t.commands.add("tableCellWidth",new u1e(t,e.width))}}class d1e extends ea{constructor(t,e){super(t,"tableCellPadding",e)}_getAttribute(t){if(!t)return;const e=uc(t.getAttribute(this.attributeName));if(e!==this._defaultValue)return e}_getValueToSet(t){const e=dc(t,"px");if(e!==this._defaultValue)return e}}class h1e extends ea{constructor(t,e){super(t,"tableCellHeight",e)}_getValueToSet(t){const e=dc(t,"px");if(e!==this._defaultValue)return e}}class f1e extends ea{constructor(t,e){super(t,"tableCellBackgroundColor",e)}}class m1e extends ea{constructor(t,e){super(t,"tableCellVerticalAlignment",e)}}class g1e extends ea{constructor(t,e){super(t,"tableCellHorizontalAlignment",e)}}class p1e extends ea{constructor(t,e){super(t,"tableCellBorderStyle",e)}_getAttribute(t){if(!t)return;const e=uc(t.getAttribute(this.attributeName));if(e!==this._defaultValue)return e}}class b1e extends ea{constructor(t,e){super(t,"tableCellBorderColor",e)}_getAttribute(t){if(!t)return;const e=uc(t.getAttribute(this.attributeName));if(e!==this._defaultValue)return e}}class w1e extends ea{constructor(t,e){super(t,"tableCellBorderWidth",e)}_getAttribute(t){if(!t)return;const e=uc(t.getAttribute(this.attributeName));if(e!==this._defaultValue)return e}_getValueToSet(t){const e=dc(t,"px");if(e!==this._defaultValue)return e}}const Z5=/^(top|middle|bottom)$/,X5=/^(left|center|right|justify)$/;class v1e extends ie{static get pluginName(){return"TableCellPropertiesEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[Yf,yD]}init(){const t=this.editor,e=t.model.schema,n=t.conversion;t.config.define("table.tableCellProperties.defaultProperties",{});const s=WC(t.config.get("table.tableCellProperties.defaultProperties"),{includeVerticalAlignmentProperty:!0,includeHorizontalAlignmentProperty:!0,includePaddingProperty:!0,isRightToLeftContent:t.locale.contentLanguageDirection==="rtl"});t.data.addStyleProcessorRules(z4),y1e(e,n,{color:s.borderColor,style:s.borderStyle,width:s.borderWidth}),t.commands.add("tableCellBorderStyle",new p1e(t,s.borderStyle)),t.commands.add("tableCellBorderColor",new b1e(t,s.borderColor)),t.commands.add("tableCellBorderWidth",new w1e(t,s.borderWidth)),hp(e,n,{modelAttribute:"tableCellHeight",styleName:"height",defaultValue:s.height}),t.commands.add("tableCellHeight",new h1e(t,s.height)),t.data.addStyleProcessorRules(wle),hp(e,n,{modelAttribute:"tableCellPadding",styleName:"padding",reduceBoxSides:!0,defaultValue:s.padding}),t.commands.add("tableCellPadding",new d1e(t,s.padding)),t.data.addStyleProcessorRules(fC),hp(e,n,{modelAttribute:"tableCellBackgroundColor",styleName:"background-color",defaultValue:s.backgroundColor}),t.commands.add("tableCellBackgroundColor",new f1e(t,s.backgroundColor)),_1e(e,n,s.horizontalAlignment),t.commands.add("tableCellHorizontalAlignment",new g1e(t,s.horizontalAlignment)),E1e(e,n,s.verticalAlignment),t.commands.add("tableCellVerticalAlignment",new m1e(t,s.verticalAlignment))}}function y1e(i,t,e){const n={width:"tableCellBorderWidth",color:"tableCellBorderColor",style:"tableCellBorderStyle"};i.extend("tableCell",{allowAttributes:Object.values(n)}),C_(t,"td",n,e),C_(t,"th",n,e),zh(t,{modelElement:"tableCell",modelAttribute:n.style,styleName:"border-style"}),zh(t,{modelElement:"tableCell",modelAttribute:n.color,styleName:"border-color"}),zh(t,{modelElement:"tableCell",modelAttribute:n.width,styleName:"border-width"})}function _1e(i,t,e){i.extend("tableCell",{allowAttributes:["tableCellHorizontalAlignment"]}),t.for("downcast").attributeToAttribute({model:{name:"tableCell",key:"tableCellHorizontalAlignment"},view:n=>({key:"style",value:{"text-align":n}})}),t.for("upcast").attributeToAttribute({view:{name:/^(td|th)$/,styles:{"text-align":X5}},model:{key:"tableCellHorizontalAlignment",value:n=>{const s=n.getStyle("text-align");return s===e?null:s}}}).attributeToAttribute({view:{name:/^(td|th)$/,attributes:{align:X5}},model:{key:"tableCellHorizontalAlignment",value:n=>{const s=n.getAttribute("align");return s===e?null:s}}})}function E1e(i,t,e){i.extend("tableCell",{allowAttributes:["tableCellVerticalAlignment"]}),t.for("downcast").attributeToAttribute({model:{name:"tableCell",key:"tableCellVerticalAlignment"},view:n=>({key:"style",value:{"vertical-align":n}})}),t.for("upcast").attributeToAttribute({view:{name:/^(td|th)$/,styles:{"vertical-align":Z5}},model:{key:"tableCellVerticalAlignment",value:n=>{const s=n.getStyle("vertical-align");return s===e?null:s}}}).attributeToAttribute({view:{name:/^(td|th)$/,attributes:{valign:Z5}},model:{key:"tableCellVerticalAlignment",value:n=>{const s=n.getAttribute("valign");return s===e?null:s}}})}class C1e extends ie{static get pluginName(){return"TableCellProperties"}static get isOfficialPlugin(){return!0}static get requires(){return[v1e,c1e]}}class hc extends lt{constructor(e,n,s){super(e);b(this,"attributeName");b(this,"_defaultValue");this.attributeName=n,this._defaultValue=s}refresh(){const n=this.editor.model.document.selection,s=Bl(n);this.isEnabled=!!s,this.value=this._getValue(s)}execute(e={}){const n=this.editor.model,s=n.document.selection,{value:r,batch:o}=e,a=Bl(s),l=this._getValueToSet(r);n.enqueueChange(o,c=>{l?c.setAttribute(this.attributeName,l,a):c.removeAttribute(this.attributeName,a)})}_getValue(e){if(!e)return;const n=e.getAttribute(this.attributeName);if(n!==this._defaultValue)return n}_getValueToSet(e){if(e!==this._defaultValue)return e}}class x1e extends hc{constructor(t,e){super(t,"tableBackgroundColor",e)}}class T1e extends hc{constructor(t,e){super(t,"tableBorderColor",e)}_getValue(t){if(!t)return;const e=uc(t.getAttribute(this.attributeName));if(e!==this._defaultValue)return e}}class k1e extends hc{constructor(t,e){super(t,"tableBorderStyle",e)}_getValue(t){if(!t)return;const e=uc(t.getAttribute(this.attributeName));if(e!==this._defaultValue)return e}}class S1e extends hc{constructor(t,e){super(t,"tableBorderWidth",e)}_getValue(t){if(!t)return;const e=uc(t.getAttribute(this.attributeName));if(e!==this._defaultValue)return e}_getValueToSet(t){const e=dc(t,"px");if(e!==this._defaultValue)return e}}class A1e extends hc{constructor(t,e){super(t,"tableWidth",e)}_getValueToSet(t){if(t=dc(t,"px"),t!==this._defaultValue)return t}}class P1e extends hc{constructor(t,e){super(t,"tableHeight",e)}_getValueToSet(t){if(t=dc(t,"px"),t!==this._defaultValue)return t}}class I1e extends hc{constructor(t,e){super(t,"tableAlignment",e)}}const R1e=/^(left|center|right)$/,O1e=/^(left|none|right)$/;class N1e extends ie{static get pluginName(){return"TablePropertiesEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[Yf]}init(){const t=this.editor,e=t.model.schema,n=t.conversion;t.config.define("table.tableProperties.defaultProperties",{});const s=vD(t.config.get("table.tableProperties.defaultProperties"),{includeAlignmentProperty:!0});t.data.addStyleProcessorRules(z4),M1e(e,n,{color:s.borderColor,style:s.borderStyle,width:s.borderWidth}),t.commands.add("tableBorderColor",new T1e(t,s.borderColor)),t.commands.add("tableBorderStyle",new k1e(t,s.borderStyle)),t.commands.add("tableBorderWidth",new S1e(t,s.borderWidth)),L1e(e,n,s.alignment),t.commands.add("tableAlignment",new I1e(t,s.alignment)),J5(e,n,{modelAttribute:"tableWidth",styleName:"width",defaultValue:s.width}),t.commands.add("tableWidth",new A1e(t,s.width)),J5(e,n,{modelAttribute:"tableHeight",styleName:"height",defaultValue:s.height}),t.commands.add("tableHeight",new P1e(t,s.height)),t.data.addStyleProcessorRules(fC),V1e(e,n,{modelAttribute:"tableBackgroundColor",styleName:"background-color",defaultValue:s.backgroundColor}),t.commands.add("tableBackgroundColor",new x1e(t,s.backgroundColor))}}function M1e(i,t,e){const n={width:"tableBorderWidth",color:"tableBorderColor",style:"tableBorderStyle"};i.extend("table",{allowAttributes:Object.values(n)}),C_(t,"table",n,e),up(t,{modelAttribute:n.color,styleName:"border-color"}),up(t,{modelAttribute:n.style,styleName:"border-style"}),up(t,{modelAttribute:n.width,styleName:"border-width"})}function L1e(i,t,e){i.extend("table",{allowAttributes:["tableAlignment"]}),t.for("downcast").attributeToAttribute({model:{name:"table",key:"tableAlignment"},view:n=>({key:"style",value:{float:n==="center"?"none":n}}),converterPriority:"high"}),t.for("upcast").attributeToAttribute({view:{name:/^(table|figure)$/,styles:{float:O1e}},model:{key:"tableAlignment",value:n=>{let s=n.getStyle("float");return s==="none"&&(s="center"),s===e?null:s}}}).attributeToAttribute({view:{attributes:{align:R1e}},model:{name:"table",key:"tableAlignment",value:n=>{const s=n.getAttribute("align");return s===e?null:s}}})}function V1e(i,t,e){const{modelAttribute:n}=e;i.extend("table",{allowAttributes:[n]}),$C(t,{viewElement:"table",...e}),up(t,e)}function J5(i,t,e){const{modelAttribute:n}=e;i.extend("table",{allowAttributes:[n]}),$C(t,{viewElement:/^(table|figure)$/,shouldUpcast:s=>!(s.name=="table"&&s.parent.name=="figure"),...e}),zh(t,{modelElement:"table",...e})}class D1e extends Oe{constructor(e,n){super(e);b(this,"options");b(this,"focusTracker");b(this,"keystrokes");b(this,"children");b(this,"borderStyleDropdown");b(this,"borderWidthInput");b(this,"borderColorInput");b(this,"backgroundInput");b(this,"widthInput");b(this,"heightInput");b(this,"alignmentToolbar");b(this,"saveButtonView");b(this,"cancelButtonView");b(this,"_focusables");b(this,"_focusCycler");this.set({borderStyle:"",borderWidth:"",borderColor:"",backgroundColor:"",width:"",height:"",alignment:""}),this.options=n;const{borderStyleDropdown:s,borderWidthInput:r,borderColorInput:o,borderRowLabel:a}=this._createBorderFields(),{backgroundRowLabel:l,backgroundInput:c}=this._createBackgroundFields(),{widthInput:h,operatorLabel:f,heightInput:m,dimensionsLabel:p}=this._createDimensionFields(),{alignmentToolbar:v,alignmentLabel:_}=this._createAlignmentFields();this.focusTracker=new ln,this.keystrokes=new wn,this.children=this.createCollection(),this.borderStyleDropdown=s,this.borderWidthInput=r,this.borderColorInput=o,this.backgroundInput=c,this.widthInput=h,this.heightInput=m,this.alignmentToolbar=v;const{saveButtonView:E,cancelButtonView:x}=this._createActionButtons();this.saveButtonView=E,this.cancelButtonView=x,this._focusables=new ai,this._focusCycler=new Oi({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.children.add(new wC(e,{label:this.t("Table properties")})),this.children.add(new cs(e,{labelView:a,children:[a,s,o,r],class:"ck-table-form__border-row"})),this.children.add(new cs(e,{labelView:l,children:[l,c],class:"ck-table-form__background-row"})),this.children.add(new cs(e,{children:[new cs(e,{labelView:p,children:[p,h,f,m],class:"ck-table-form__dimensions-row"}),new cs(e,{labelView:_,children:[_,v],class:"ck-table-properties-form__alignment-row"})]})),this.children.add(new cs(e,{children:[this.saveButtonView,this.cancelButtonView],class:"ck-table-form__action-row"})),this.setTemplate({tag:"form",attributes:{class:["ck","ck-form","ck-table-form","ck-table-properties-form"],tabindex:"-1"},children:this.children})}render(){super.render(),Xa({view:this}),[this.borderColorInput,this.backgroundInput].forEach(e=>{this._focusCycler.chain(e.fieldView.focusCycler)}),[this.borderStyleDropdown,this.borderColorInput,this.borderWidthInput,this.backgroundInput,this.widthInput,this.heightInput,this.alignmentToolbar,this.saveButtonView,this.cancelButtonView].forEach(e=>{this._focusables.add(e),this.focusTracker.add(e.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}_createBorderFields(){const e=this.options.defaultTableProperties,n={style:e.borderStyle,width:e.borderWidth,color:e.borderColor},s=ub({colorConfig:this.options.borderColors,columns:5,defaultColorValue:n.color,colorPickerConfig:this.options.colorPickerConfig}),r=this.locale,o=this.t,a=o("Style"),l=new Fs(r);l.text=o("Border");const c=UC(o),h=new Mn(r,vL);h.set({label:a,class:"ck-table-form__border-style"}),h.fieldView.buttonView.set({ariaLabel:a,ariaLabelledBy:void 0,isOn:!1,withText:!0,tooltip:a}),h.fieldView.buttonView.bind("label").to(this,"borderStyle",p=>c[p||"none"]),h.fieldView.on("execute",p=>{this.borderStyle=p.source._borderStyleValue}),h.bind("isEmpty").to(this,"borderStyle",p=>!p),oc(h.fieldView,hD(this,n.style),{role:"menu",ariaLabel:a});const f=new Mn(r,$s);f.set({label:o("Width"),class:"ck-table-form__border-width"}),f.fieldView.bind("value").to(this,"borderWidth"),f.bind("isEnabled").to(this,"borderStyle",$g),f.fieldView.on("input",()=>{this.borderWidth=f.fieldView.element.value});const m=new Mn(r,s);return m.set({label:o("Color"),class:"ck-table-form__border-color"}),m.fieldView.bind("value").to(this,"borderColor"),m.bind("isEnabled").to(this,"borderStyle",$g),m.fieldView.on("input",()=>{this.borderColor=m.fieldView.value}),this.on("change:borderStyle",(p,v,_,E)=>{$g(_)||(this.borderColor="",this.borderWidth=""),$g(E)||(this.borderColor=n.color,this.borderWidth=n.width)}),{borderRowLabel:l,borderStyleDropdown:h,borderColorInput:m,borderWidthInput:f}}_createBackgroundFields(){const e=this.locale,n=this.t,s=new Fs(e);s.text=n("Background");const r=ub({colorConfig:this.options.backgroundColors,columns:5,defaultColorValue:this.options.defaultTableProperties.backgroundColor,colorPickerConfig:this.options.colorPickerConfig}),o=new Mn(e,r);return o.set({label:n("Color"),class:"ck-table-properties-form__background"}),o.fieldView.bind("value").to(this,"backgroundColor"),o.fieldView.on("input",()=>{this.backgroundColor=o.fieldView.value}),{backgroundRowLabel:s,backgroundInput:o}}_createDimensionFields(){const e=this.locale,n=this.t,s=new Fs(e);s.text=n("Dimensions");const r=new Mn(e,$s);r.set({label:n("Width"),class:"ck-table-form__dimensions-row__width"}),r.fieldView.bind("value").to(this,"width"),r.fieldView.on("input",()=>{this.width=r.fieldView.element.value});const o=new Oe(e);o.setTemplate({tag:"span",attributes:{class:["ck-table-form__dimension-operator"]},children:[{text:"×"}]});const a=new Mn(e,$s);return a.set({label:n("Height"),class:"ck-table-form__dimensions-row__height"}),a.fieldView.bind("value").to(this,"height"),a.fieldView.on("input",()=>{this.height=a.fieldView.element.value}),{dimensionsLabel:s,widthInput:r,operatorLabel:o,heightInput:a}}_createAlignmentFields(){const e=this.locale,n=this.t,s=new Fs(e);s.text=n("Alignment");const r=new Uu(e);return r.set({role:"radiogroup",isCompact:!0,ariaLabel:n("Table alignment toolbar")}),O_({view:this,icons:{left:ke.objectLeft,center:ke.objectCenter,right:ke.objectRight},toolbar:r,labels:this._alignmentLabels,propertyName:"alignment",defaultValue:this.options.defaultTableProperties.alignment}),{alignmentLabel:s,alignmentToolbar:r}}_createActionButtons(){const e=this.locale,n=this.t,s=new rt(e),r=new rt(e),o=[this.borderWidthInput,this.borderColorInput,this.backgroundInput,this.widthInput,this.heightInput];return s.set({label:n("Save"),icon:ke.check,class:"ck-button-save",type:"submit",withText:!0}),s.bind("isEnabled").toMany(o,"errorText",(...a)=>a.every(l=>!l)),r.set({label:n("Cancel"),icon:ke.cancel,class:"ck-button-cancel",withText:!0}),r.delegate("execute").to(this,"cancel"),{saveButtonView:s,cancelButtonView:r}}get _alignmentLabels(){const e=this.locale,n=this.t,s=n("Align table to the left"),r=n("Center table"),o=n("Align table to the right");return e.uiLanguageDirection==="rtl"?{right:o,center:r,left:s}:{left:s,center:r,right:o}}}function $g(i){return i!=="none"}var B1e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M8 2v5h4V2h1v5h5v1h-5v4h.021l-.172.351-1.916.28-.151.027c-.287.063-.54.182-.755.341L8 13v5H7v-5H2v-1h5V8H2V7h5V2h1zm4 6H8v4h4V8z" opacity=".6"/><path d="m15.5 11.5 1.323 2.68 2.957.43-2.14 2.085.505 2.946L15.5 18.25l-2.645 1.39.505-2.945-2.14-2.086 2.957-.43L15.5 11.5zM17 1a2 2 0 0 1 2 2v9.475l-.85-.124-.857-1.736a2.048 2.048 0 0 0-.292-.44L17 3H3v14h7.808l.402.392L10.935 19H3a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h14z"/></svg>';const F1e=500,Q5={borderStyle:"tableBorderStyle",borderColor:"tableBorderColor",borderWidth:"tableBorderWidth",backgroundColor:"tableBackgroundColor",width:"tableWidth",height:"tableHeight",alignment:"tableAlignment"};class $1e extends ie{constructor(e){super(e);b(this,"_defaultTableProperties");b(this,"_balloon");b(this,"view",null);b(this,"_undoStepBatch");b(this,"_isReady");e.config.define("table.tableProperties",{borderColors:cb,backgroundColors:cb})}static get requires(){return[kr]}static get pluginName(){return"TablePropertiesUI"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,n=e.t;this._defaultTableProperties=vD(e.config.get("table.tableProperties.defaultProperties"),{includeAlignmentProperty:!0}),this._balloon=e.plugins.get(kr),e.ui.componentFactory.add("tableProperties",s=>{const r=new rt(s);r.set({label:n("Table properties"),icon:B1e,tooltip:!0}),this.listenTo(r,"execute",()=>this._showView());const o=Object.values(Q5).map(a=>e.commands.get(a));return r.bind("isEnabled").toMany(o,"isEnabled",(...a)=>a.some(l=>l)),r})}destroy(){super.destroy(),this.view&&this.view.destroy()}_createPropertiesView(){const e=this.editor,n=e.config.get("table.tableProperties"),s=mf(n.borderColors),r=ff(e.locale,s),o=mf(n.backgroundColors),a=ff(e.locale,o),l=n.colorPicker!==!1,c=new D1e(e.locale,{borderColors:r,backgroundColors:a,defaultTableProperties:this._defaultTableProperties,colorPickerConfig:l?n.colorPicker||{}:!1}),h=e.t;c.render(),this.listenTo(c,"submit",()=>{this._hideView()}),this.listenTo(c,"cancel",()=>{this._undoStepBatch.operations.length&&e.execute("undo",this._undoStepBatch),this._hideView()}),c.keystrokes.set("Esc",(p,v)=>{this._hideView(),v()}),Za({emitter:c,activator:()=>this._isViewInBalloon,contextElements:[this._balloon.view.element],callback:()=>this._hideView()});const f=cD(h),m=uD(h);return c.on("change:borderStyle",this._getPropertyChangeCallback("tableBorderStyle")),c.on("change:borderColor",this._getValidatedPropertyChangeCallback({viewField:c.borderColorInput,commandName:"tableBorderColor",errorText:f,validator:lb})),c.on("change:borderWidth",this._getValidatedPropertyChangeCallback({viewField:c.borderWidthInput,commandName:"tableBorderWidth",errorText:m,validator:dD})),c.on("change:backgroundColor",this._getValidatedPropertyChangeCallback({viewField:c.backgroundInput,commandName:"tableBackgroundColor",errorText:f,validator:lb})),c.on("change:width",this._getValidatedPropertyChangeCallback({viewField:c.widthInput,commandName:"tableWidth",errorText:m,validator:jh})),c.on("change:height",this._getValidatedPropertyChangeCallback({viewField:c.heightInput,commandName:"tableHeight",errorText:m,validator:jh})),c.on("change:alignment",this._getPropertyChangeCallback("tableAlignment")),c}_fillViewFormFromCommandValues(){const e=this.editor.commands,n=e.get("tableBorderStyle");Object.entries(Q5).map(([s,r])=>{const o=s,a=this._defaultTableProperties[o]||"";return[o,e.get(r).value||a]}).forEach(([s,r])=>{(s==="borderColor"||s==="borderWidth")&&n.value==="none"||this.view.set(s,r)}),this._isReady=!0}_showView(){const e=this.editor;this.view||(this.view=this._createPropertiesView()),this.listenTo(e.ui,"update",()=>{this._updateView()}),this._fillViewFormFromCommandValues(),this._balloon.add({view:this.view,position:gD(e)}),this._undoStepBatch=e.model.createBatch(),this.view.focus()}_hideView(){const e=this.editor;this.stopListening(e.ui,"update"),this._isReady=!1,this.view.saveButtonView.focus(),this._balloon.remove(this.view),this.editor.editing.view.focus()}_updateView(){const e=this.editor,n=e.editing.view.document;oD(n.selection)?this._isViewVisible&&mD(e,"table"):this._hideView()}get _isViewVisible(){return!!this.view&&this._balloon.visibleView===this.view}get _isViewInBalloon(){return!!this.view&&this._balloon.hasView(this.view)}_getPropertyChangeCallback(e){return(n,s,r)=>{this._isReady&&this.editor.execute(e,{value:r,batch:this._undoStepBatch})}}_getValidatedPropertyChangeCallback(e){const{commandName:n,viewField:s,validator:r,errorText:o}=e,a=qs(()=>{s.errorText=o},F1e);return(l,c,h)=>{a.cancel(),this._isReady&&(r(h)?(this.editor.execute(n,{value:h,batch:this._undoStepBatch}),s.errorText=null):a())}}}class z1e extends ie{static get pluginName(){return"TableProperties"}static get isOfficialPlugin(){return!0}static get requires(){return[N1e,$1e]}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function j1e(i){i.document.registerPostFixer(t=>H1e(t,i))}function H1e(i,t){const e=t.document.differ.getChanges();let n=!1;for(const s of e){if(s.type!="insert")continue;const r=s.position.parent;if(r.is("element","table")||s.name=="table"){const o=s.name=="table"?s.position.nodeAfter:r,a=Array.from(o.getChildren()).filter(c=>c.is("element","caption")),l=a.shift();if(!l)continue;for(const c of a)i.move(i.createRangeIn(c),l,"end"),i.remove(c);l.nextSibling&&(i.move(i.createRangeOn(l),o,"end"),n=!0),n=!!a.length||n}}return n}function eR(i){return!!i&&i.is("element","table")}function M_(i){for(const t of i.getChildren())if(t.is("element","caption"))return t;return null}function U1e(i){const t=Bl(i);return t?M_(t):null}function W1e(i){const t=i.parent;return i.name=="figcaption"&&t&&t.is("element","figure")&&t.hasClass("table")?{name:!0}:i.name=="caption"&&t&&t.is("element","table")?{name:!0}:null}class q1e extends lt{refresh(){const t=this.editor,e=Bl(t.model.document.selection);this.isEnabled=!!e,this.isEnabled?this.value=!!M_(e):this.value=!1}execute({focusCaptionOnShow:t=!1}={}){this.editor.model.change(e=>{this.value?this._hideTableCaption(e):this._showTableCaption(e,t)})}_showTableCaption(t,e){const n=this.editor.model,s=Bl(n.document.selection),a=this.editor.plugins.get("TableCaptionEditing")._getSavedCaption(s)||t.createElement("caption");n.insertContent(a,s,"end"),e&&t.setSelection(a,"in")}_hideTableCaption(t){const e=this.editor.model,n=Bl(e.document.selection),s=this.editor.plugins.get("TableCaptionEditing"),r=M_(n);s._saveCaption(n,r),e.deleteContent(t.createSelection(r,"on"))}}class G1e extends ie{constructor(e){super(e);b(this,"_savedCaptionsMap");this._savedCaptionsMap=new WeakMap}static get pluginName(){return"TableCaptionEditing"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,n=e.model.schema,s=e.editing.view,r=e.t;n.isRegistered("caption")?n.extend("caption",{allowIn:"table"}):n.register("caption",{allowIn:"table",allowContentOf:"$block",isLimit:!0}),e.commands.add("toggleTableCaption",new q1e(this.editor)),e.conversion.for("upcast").elementToElement({view:W1e,model:"caption"}),e.conversion.for("dataDowncast").elementToElement({model:"caption",view:(o,{writer:a})=>eR(o.parent)?a.createContainerElement("figcaption"):null}),e.conversion.for("editingDowncast").elementToElement({model:"caption",view:(o,{writer:a})=>{if(!eR(o.parent))return null;const l=a.createEditableElement("figcaption");return a.setCustomProperty("tableCaption",!0,l),l.placeholder=r("Enter table caption"),nC({view:s,element:l,keepOnFocus:!0}),SC(l,a)}}),j1e(e.model)}_getSavedCaption(e){const n=this._savedCaptionsMap.get(e);return n?fn.fromJSON(n):null}_saveCaption(e,n){this._savedCaptionsMap.set(e,n.toJSON())}}class K1e extends ie{static get pluginName(){return"TableCaptionUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.editing.view,n=t.t;t.ui.componentFactory.add("toggleTableCaption",s=>{const r=t.commands.get("toggleTableCaption"),o=new rt(s);return o.set({icon:ke.caption,tooltip:!0,isToggleable:!0}),o.bind("isOn","isEnabled").to(r,"value","isEnabled"),o.bind("label").to(r,"value",a=>n(a?"Toggle caption off":"Toggle caption on")),this.listenTo(o,"execute",()=>{if(t.execute("toggleTableCaption",{focusCaptionOnShow:!0}),r.value){const a=U1e(t.model.document.selection),l=t.editing.mapper.toViewElement(a);if(!l)return;e.scrollToTheSelection(),e.change(c=>{c.addClass("table__caption_highlighted",l)})}t.editing.view.focus()}),o})}}class Y1e extends ie{static get pluginName(){return"TableCaption"}static get isOfficialPlugin(){return!0}static get requires(){return[G1e,K1e]}}class Z1e extends lt{refresh(){this.isEnabled=!0}execute(t={}){const{model:e,plugins:n}=this.editor;let{table:s=e.document.selection.getSelectedElement(),columnWidths:r,tableWidth:o}=t;r&&(r=Array.isArray(r)?r:r.split(",")),e.change(a=>{o?a.setAttribute("tableWidth",o,s):a.removeAttribute("tableWidth",s);const l=n.get("TableColumnResizeEditing").getColumnGroupElement(s);if(!r&&!l)return;if(!r)return a.remove(l);const c=jC(r);if(l)Array.from(l.getChildren()).forEach((h,f)=>a.setAttribute("columnWidth",c[f],h));else{const h=a.createElement("tableColumnGroup");c.forEach(f=>a.appendElement("tableColumn",{columnWidth:f},h)),a.append(h,s)}})}}function X1e(i){return t=>t.on("element:colgroup",(e,n,s)=>{const r=n.modelCursor.findAncestor("table"),o=Gf(r);if(!o)return;const a=Kf(o),l=i.getColumns(r);let c=b0e(o,s.writer);c=Array.from({length:l},(h,f)=>c[f]||"auto"),(c.length!=a.length||c.includes("auto"))&&nD(a,o,jC(c),s.writer)},{priority:"low"})}function J1e(){return i=>i.on("insert:table",(t,e,n)=>{const s=n.writer,r=e.item,o=n.mapper.toViewElement(r),a=o.is("element","table")?o:Array.from(o.getChildren()).find(c=>c.is("element","table"));Gf(r)?s.addClass("ck-table-resized",a):s.removeClass("ck-table-resized",a)},{priority:"low"})}class Q1e extends ie{constructor(e){super(e);b(this,"_isResizingActive");b(this,"_resizingData");b(this,"_domEmitter");b(this,"_tableUtilsPlugin");this._isResizingActive=!1,this.set("_isResizingAllowed",!0),this._resizingData=null,this._domEmitter=new(Ri()),this._tableUtilsPlugin=e.plugins.get("TableUtils"),this.on("change:_isResizingAllowed",(n,s,r)=>{const o=r?"removeClass":"addClass";e.editing.view.change(a=>{for(const l of e.editing.view.document.roots)a[o]("ck-column-resize_disabled",e.editing.view.document.getRoot(l.rootName))})})}static get requires(){return[Yf,Kn]}static get pluginName(){return"TableColumnResizeEditing"}static get isOfficialPlugin(){return!0}init(){this._extendSchema(),this._registerPostFixer(),this._registerConverters(),this._registerResizingListeners(),this._registerResizerInserter();const e=this.editor,n=e.plugins.get("TableColumnResize");e.plugins.get("TableEditing").registerAdditionalSlot({filter:o=>o.is("element","tableColumnGroup"),positionOffset:0});const r=new Z1e(e);e.commands.add("resizeTableWidth",r),e.commands.add("resizeColumnWidths",r),this.bind("_isResizingAllowed").to(e,"isReadOnly",n,"isEnabled",r,"isEnabled",(o,a,l)=>!o&&a&&l)}destroy(){this._domEmitter.stopListening(),super.destroy()}getColumnGroupElement(e){return Gf(e)}getTableColumnElements(e){return Kf(e)}getTableColumnsWidths(e){return p0e(e)}_extendSchema(){this.editor.model.schema.extend("table",{allowAttributes:["tableWidth"]}),this.editor.model.schema.register("tableColumnGroup",{allowIn:"table",isLimit:!0}),this.editor.model.schema.register("tableColumn",{allowIn:"tableColumnGroup",allowAttributes:["columnWidth","colSpan"],isLimit:!0})}_registerPostFixer(){const n=this.editor.model;n.document.registerPostFixer(o=>{let a=!1;for(const l of c0e(n)){const c=this.getColumnGroupElement(l),h=this.getTableColumnElements(c),f=this.getTableColumnsWidths(c);let m=jC(f);m=s(m,l,this),!Up(f,m)&&(nD(h,c,m,o),a=!0)}return a});function s(o,a,l){const c=l._tableUtilsPlugin.getColumns(a);if(c-o.length===0)return o;const f=o.map(p=>Number(p.replace("%",""))),m=r(l.editor.model.document.differ,a);for(const p of m){const v=c-f.length;if(v===0)continue;const _=v>0,E=l._tableUtilsPlugin.getCellLocation(p).column;if(_){const x=u0e(a,l.editor),k=f0e(v,x);f.splice(E,0,...k)}else{const x=f.splice(E,Math.abs(v));f[E]+=vf(x)}}return f.map(p=>p+"%")}function r(o,a){const l=new Set;for(const c of o.getChanges())if(c.type=="insert"&&c.position.nodeAfter&&c.position.nodeAfter.name=="tableCell"&&c.position.nodeAfter.getAncestors().includes(a))l.add(c.position.nodeAfter);else if(c.type=="remove"){const h=c.position.nodeBefore||c.position.nodeAfter;h.name=="tableCell"&&h.getAncestors().includes(a)&&l.add(h)}return l}}_registerConverters(){const n=this.editor.conversion;n.for("upcast").attributeToAttribute({view:{name:"figure",key:"style",value:{width:/[\s\S]+/}},model:{name:"table",key:"tableWidth",value:s=>s.getStyle("width")}}),n.for("downcast").attributeToAttribute({model:{name:"table",key:"tableWidth"},view:s=>({name:"figure",key:"style",value:{width:s}})}),n.elementToElement({model:"tableColumnGroup",view:"colgroup"}),n.elementToElement({model:"tableColumn",view:"col"}),n.for("downcast").add(J1e()),n.for("upcast").add(X1e(this._tableUtilsPlugin)),n.for("upcast").attributeToAttribute({view:{name:"col",styles:{width:/.*/}},model:{key:"columnWidth",value:s=>{const r=s.getStyle("width");return!r||!r.endsWith("%")&&!r.endsWith("pt")?"auto":r}}}),n.for("upcast").attributeToAttribute({view:{name:"col",key:"span"},model:"colSpan"}),n.for("downcast").attributeToAttribute({model:{name:"tableColumn",key:"columnWidth"},view:s=>({key:"style",value:{width:s}})})}_registerResizingListeners(){const e=this.editor.editing.view;e.addObserver(rD),e.document.on("mousedown",this._onMouseDownHandler.bind(this),{priority:"high"}),this._domEmitter.listenTo(Re.window.document,"mousemove",$u(this._onMouseMoveHandler.bind(this),50)),this._domEmitter.listenTo(Re.window.document,"mouseup",this._onMouseUpHandler.bind(this))}_onMouseDownHandler(e,n){const s=n.target;if(!s.hasClass("ck-table-column-resizer")||!this._isResizingAllowed)return;const r=this.editor,o=r.editing.mapper.toModelElement(s.findAncestor("figure"));if(!r.model.canEditAt(o))return;n.preventDefault(),e.stop();const a=h(o,this._tableUtilsPlugin,r),l=s.findAncestor("table"),c=r.editing.view;Array.from(l.getChildren()).find(p=>p.is("element","colgroup"))||c.change(p=>{f(p,a,l)}),this._isResizingActive=!0,this._resizingData=this._getResizingData(n,a),c.change(p=>m(p,l,this._resizingData));function h(p,v,_){const E=Array(v.getColumns(p)),x=new Bt(p);for(const k of x){const A=_.editing.mapper.toViewElement(k.cell),S=_.editing.view.domConverter.mapViewToDom(A),O=g0e(S);(!E[k.column]||O<E[k.column])&&(E[k.column]=Wi(O))}return E}function f(p,v,_){const E=p.createContainerElement("colgroup");for(let x=0;x<v.length;x++){const k=p.createEmptyElement("col"),A=`${Wi(v[x]/vf(v)*100)}%`;p.setStyle("width",A,k),p.insert(p.createPositionAt(E,"end"),k)}p.insert(p.createPositionAt(_,0),E)}function m(p,v,_){const E=_.widths.viewFigureWidth/_.widths.viewFigureParentWidth;p.addClass("ck-table-resized",v),p.addClass("ck-table-column-resizer__active",_.elements.viewResizer),p.setStyle("width",`${Wi(E*100)}%`,v.findAncestor("figure"))}}_onMouseMoveHandler(e,n){if(!this._isResizingActive)return;if(!this._isResizingAllowed){this._onMouseUpHandler();return}const{columnPosition:s,flags:{isRightEdge:r,isTableCentered:o,isLtrContent:a},elements:{viewFigure:l,viewLeftColumn:c,viewRightColumn:h},widths:{viewFigureParentWidth:f,tableWidth:m,leftColumnWidth:p,rightColumnWidth:v}}=this._resizingData,_=-p+S_,E=r?f-m:v-S_,x=(a?1:-1)*(r&&o?2:1),k=h0e((n.clientX-s)*x,Math.min(_,0),Math.max(E,0));k!==0&&this.editor.editing.view.change(A=>{const S=Wi((p+k)*100/m);if(A.setStyle("width",`${S}%`,c),r){const O=Wi((m+k)*100/f);A.setStyle("width",`${O}%`,l)}else{const O=Wi((v-k)*100/m);A.setStyle("width",`${O}%`,h)}})}_onMouseUpHandler(){if(!this._isResizingActive)return;const{viewResizer:e,modelTable:n,viewFigure:s,viewColgroup:r}=this._resizingData.elements,o=this.editor,a=o.editing.view,l=this.getColumnGroupElement(n),c=Array.from(r.getChildren()).filter(E=>E.is("view:element")),h=l?this.getTableColumnsWidths(l):null,f=c.map(E=>E.getStyle("width")),m=!Up(h,f),p=n.getAttribute("tableWidth"),v=s.getStyle("width"),_=p!==v;(m||_)&&(this._isResizingAllowed?o.execute("resizeTableWidth",{table:n,tableWidth:`${Wi(v)}%`,columnWidths:f}):a.change(E=>{if(h)for(const x of c)E.setStyle("width",h.shift(),x);else E.remove(r);_&&(p?E.setStyle("width",p,s):E.removeStyle("width",s)),!h&&!p&&E.removeClass("ck-table-resized",[...s.getChildren()].find(x=>x.name==="table"))})),a.change(E=>{E.removeClass("ck-table-column-resizer__active",e)}),this._isResizingActive=!1,this._resizingData=null}_getResizingData(e,n){const s=this.editor,r=e.domEvent.clientX,o=e.target,a=o.findAncestor("td")||o.findAncestor("th"),l=s.editing.mapper.toModelElement(a),c=l.findAncestor("table"),h=d0e(l,this._tableUtilsPlugin).rightEdge,f=this._tableUtilsPlugin.getColumns(c)-1,m=h===f,p=!c.hasAttribute("tableAlignment"),v=s.locale.contentLanguageDirection!=="rtl",_=a.findAncestor("table"),E=_.findAncestor("figure"),x=[..._.getChildren()].find(M=>M.is("element","colgroup")),k=x.getChild(h),A=m?void 0:x.getChild(h+1),S=A_(s.editing.view.domConverter.mapViewToDom(E.parent)),O=A_(s.editing.view.domConverter.mapViewToDom(E)),P=tD(c,s),N=n[h],L=m?void 0:n[h+1];return{columnPosition:r,flags:{isRightEdge:m,isTableCentered:p,isLtrContent:v},elements:{viewResizer:o,modelTable:c,viewFigure:E,viewColgroup:x,viewLeftColumn:k,viewRightColumn:A},widths:{viewFigureParentWidth:S,viewFigureWidth:O,tableWidth:P,leftColumnWidth:N,rightColumnWidth:L}}}_registerResizerInserter(){this.editor.conversion.for("editingDowncast").add(e=>{e.on("insert:tableCell",(n,s,r)=>{const o=s.item,a=r.mapper.toViewElement(o),l=r.writer;l.insert(l.createPositionAt(a,"end"),l.createUIElement("div",{class:"ck-table-column-resizer"}))},{priority:"lowest"})})}}class eye extends ie{static get requires(){return[Q1e,yD]}static get pluginName(){return"TableColumnResize"}static get isOfficialPlugin(){return!0}}const tye="GPL",tR={colors:[{color:"#222",label:"primary"},{color:"#47564a",label:"secondary"},{color:"#cbc6a3",label:"tertiary"},{color:"#42b983",label:"success"},{color:"#e53e3e",label:"danger"},{color:"#fbfcf8",label:"light"},{color:"#757779",label:"dark"},{color:"#308760",label:"info"},{color:"#cccccc",label:"gray"},{color:"#dfdbcf",label:"background"}],columns:5,documentColors:10},nye=({content:i,setContent:t})=>{const e=R.useRef(null),n=R.useRef(null),[s,r]=R.useState(!1);R.useEffect(()=>(r(!0),()=>r(!1)),[]);const{editorConfig:o}=R.useMemo(()=>s?{editorConfig:{toolbar:{items:["heading","|","fontSize","fontFamily","fontColor","fontBackgroundColor","|","bold","italic","underline","alignment","|","link","mediaEmbed","insertTable","blockQuote","|","bulletedList","numberedList","todoList","outdent","indent","|","toggleImageCaption","imageTextAlternative","|","imageStyle:inline","imageStyle:wrapText","imageStyle:breakText","|","resizeImage"],shouldNotGroupWhenFull:!1},plugins:[hhe,Mhe,mge,Lhe,nfe,Bhe,ame,xme,ege,Yme,Mme,Ume,age,xge,Ige,kge,Xge,lpe,vpe,LC,ype,Kge,xpe,kpe,jhe,nbe,cbe,Mbe,ewe,Twe,Gwe,nb,Dve,t1e,Y1e,C1e,eye,z1e,n1e,khe,dwe,qhe],fontFamily:{supportAllValues:!0},fontSize:{options:[10,12,14,"default",18,20,22],supportAllValues:!0},heading:{options:[{model:"paragraph",title:"Paragraph",class:"ck-heading_paragraph"},{model:"heading1",view:"h1",title:"Heading 1",class:"ck-heading_heading1"},{model:"heading2",view:"h2",title:"Heading 2",class:"ck-heading_heading2"},{model:"heading3",view:"h3",title:"Heading 3",class:"ck-heading_heading3"},{model:"heading4",view:"h4",title:"Heading 4",class:"ck-heading_heading4"},{model:"heading5",view:"h5",title:"Heading 5",class:"ck-heading_heading5"},{model:"heading6",view:"h6",title:"Heading 6",class:"ck-heading_heading6"}]},image:{toolbar:["toggleImageCaption","imageTextAlternative","|","imageStyle:inline","imageStyle:wrapText","imageStyle:breakText","|","resizeImage"]},initialData:"",licenseKey:tye,link:{addTargetToExternalLinks:!0,defaultProtocol:"https://",decorators:{toggleDownloadable:{mode:"manual",label:"Downloadable",attributes:{download:"file"}}}},list:{properties:{styles:!0,startIndex:!0,reversed:!0}},placeholder:"請輸入內文",table:{contentToolbar:["tableColumn","tableRow","mergeTableCells","tableProperties","tableCellProperties"]},fontColor:tR,fontBackgroundColor:tR}}:{},[s]);return y.jsx("div",{className:"main-container",children:y.jsx("div",{className:"editor-container editor-container_classic-editor",ref:e,children:y.jsx("div",{className:"editor-container__editor",children:y.jsx("div",{ref:n,children:o&&y.jsx(DN,{editor:ume,data:i,config:o,onChange:(a,l)=>t(l.getData())})})})})})},iye={BASE_URL:"/react-and-bloom/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_BASE:"https://ec-course-api.hexschool.io/v2",VITE_API_PATH:"and-bloom"},{VITE_API_BASE:Z1,VITE_API_PATH:X1}=iye,nR={author:"",description:"",image:"",isPublic:!0,tag:[],title:"",content:"",create_at:""},sye=R.forwardRef(({selectedArticle:i,getList:t},e)=>{const n=Vn(),[s,r]=R.useState(!1),o=R.useRef(null),a=R.useRef(null),[l,c]=R.useState(""),{register:h,handleSubmit:f,watch:m,getValues:p,setValue:v,reset:_,control:E,formState:{errors:x}}=Lf({mode:"onTouched",defaultValues:nR});R.useEffect(()=>{o.current&&(a.current=new Er(o.current))},[]);const[k,A,S,O]=IE({control:E,name:["image","isPublic","tag","content"]}),P=async q=>{var ve,Se,_e;const K=(ve=q.target.files)==null?void 0:ve[0],te=new FormData;if(K){te.append("file-to-upload",K),q.target.files=new DataTransfer().files;try{r(!0);const be=document.cookie.replace(/(?:(?:^|.*;\s*)andBloom\s*=\s*([^;]*).*$)|^.*$/,"$1");Ke.defaults.headers.common.Authorization=be;const he=await Ke.post(`${Z1}/api/${X1}/admin/upload`,te,{headers:{"Content-Type":"multipart/form-data"}});v("image",he.data.imageUrl,{shouldValidate:!0})}catch(be){be instanceof $t&&(console.log((Se=be==null?void 0:be.response)==null?void 0:Se.data.message),n(bn({text:(_e=be==null?void 0:be.response)==null?void 0:_e.data.message,type:"danger"})))}finally{r(!1)}}},N=async q=>{var K,te,ve;try{n(ct(!0));const Se=document.cookie.replace(/(?:(?:^|.*;\s*)andBloom\s*=\s*([^;]*).*$)|^.*$/,"$1");Ke.defaults.headers.common.Authorization=Se;const _e=await Ke[i?"put":"post"](`${Z1}/api/${X1}/admin/article${i?`/${i.id}`:""}`,{data:q});t(),(K=a.current)==null||K.hide(),n(bn({text:_e==null?void 0:_e.data.message,type:"success"}))}catch(Se){Se instanceof $t&&(console.log((te=Se==null?void 0:Se.response)==null?void 0:te.data.message),n(bn({text:(ve=Se==null?void 0:Se.response)==null?void 0:ve.data.message,type:"danger"})))}finally{n(ct(!1))}};R.useEffect(()=>{const q=o.current,K=()=>{_(nR)};return q==null||q.addEventListener("hidden.bs.modal",K),()=>q==null?void 0:q.removeEventListener("hidden.bs.modal",K)},[o,_]),R.useEffect(()=>{const q=o.current,K=async()=>{var te,ve;if(i)try{n(ct(!0));const Se=document.cookie.replace(/(?:(?:^|.*;\s*)andBloom\s*=\s*([^;]*).*$)|^.*$/,"$1");Ke.defaults.headers.common.Authorization=Se;const _e=await Ke.get(`${Z1}/api/${X1}/admin/article/${i.id}`);_({...i,content:(te=_e.data.article)==null?void 0:te.content,create_at:Ho(i.create_at)})}catch(Se){Se instanceof $t&&console.log((ve=Se==null?void 0:Se.response)==null?void 0:ve.data.message)}finally{n(ct(!1))}};return q==null||q.addEventListener("shown.bs.modal",K),()=>q==null?void 0:q.removeEventListener("shown.bs.modal",K)},[i,o,_,n]),R.useImperativeHandle(e,()=>({show:()=>{var q;(q=a.current)==null||q.show()},hide:()=>{var q;(q=a.current)==null||q.hide()}}));const L=q=>{const K=[...S];K.splice(q,1),v("tag",K)},M=()=>{v("tag",[...S,l]),c("")},F=q=>{v("content",q)};return y.jsx("div",{className:"modal fade","data-bs-focus":!1,"data-bs-keyboard":!1,"data-bs-backdrop":"static",tabIndex:-1,ref:o,children:y.jsx("div",{className:"modal-dialog modal-lg",children:y.jsxs("div",{className:"modal-content",children:[y.jsxs("div",{className:"modal-header",children:[y.jsx("h2",{className:"modal-title fs-5",children:i?"編輯文章":"新增文章"}),y.jsx("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),y.jsxs("form",{onSubmit:f(N),children:[y.jsx("div",{className:"modal-body",children:y.jsxs("div",{className:"row",children:[y.jsx("div",{className:"mb-3",children:y.jsx(Gi,{id:"title",label:"文章標題",type:"text",placeholder:"請輸入標題",register:h,errors:x,rules:{required:"文章標題必填"}})}),y.jsx("div",{className:"mb-3",children:y.jsx(Gi,{id:"author",label:"作者",type:"text",placeholder:"請輸入作者",register:h,errors:x,rules:{required:"作者必填"}})}),y.jsx("div",{className:"col-lg-6 mb-3",children:y.jsx(gr,{id:"tag",label:"文章標籤",errors:x,children:y.jsxs("div",{className:`d-block ${x.is_enabled&&"is-invalid"}`,children:[y.jsxs("div",{className:"input-group",children:[y.jsx("input",{type:"text",className:"form-control w-auto",placeholder:"請輸入標籤",value:l,onChange:q=>c(q.target.value)}),y.jsx("button",{className:"btn btn-secondary",type:"button",onClick:M,children:"加入標籤"})]}),S==null?void 0:S.map((q,K)=>y.jsxs("span",{className:"badge rounded-pill bg-primary mt-2 me-2",children:[q,y.jsx("i",{className:"bi bi-x-lg opacity-75 cursor-pointer ps-1",onClick:()=>L(K)})]},`tag-${K}`))]})})}),y.jsx("div",{className:"col-lg-6 mb-3",children:y.jsx(Gi,{id:"create_at",label:"文章日期",type:"date",placeholder:"請輸入文章日期",register:h,errors:x,rules:{required:"文章日期必填",setValueAs:q=>q?new Date(q).getTime()/1e3:null}})}),y.jsx("div",{className:"mb-3",children:y.jsx(gr,{id:"isPublic",label:"是否公開",errors:x,children:y.jsxs("div",{className:`d-block ${x.isPublic&&"is-invalid"}`,role:"group",children:[y.jsx("input",{type:"checkbox",className:"btn-check",id:"enabled",...h("isPublic")}),y.jsx("label",{className:`btn px-4 ${A?"btn-success":"btn-danger"}`,htmlFor:"enabled",children:A?"公開":"隱藏"})]})})}),y.jsx("div",{className:"col-md-6 mb-3",children:y.jsxs(gr,{id:"image",label:"文章主圖",isRequired:!0,errors:x,children:[y.jsxs("div",{children:[y.jsx("input",{id:"mainImage",type:"file",className:"form-control d-none",disabled:!!s,onChange:P}),y.jsxs("label",{className:`btn btn-primary ${s&&"opacity-50"}`,htmlFor:"mainImage",children:[s&&y.jsx("span",{className:"spinner-grow spinner-grow-sm me-2"}),"上傳圖片"]})]}),k&&y.jsx("img",{src:k,alt:"主圖",className:"img-fluid mt-3"}),y.jsx("input",{id:"image",className:`form-control-sm form-control-plaintext ${k?"":"d-none"}`,readOnly:!0,...h("image",{required:"請上傳主圖"})})]})}),y.jsx("div",{className:"mb-3",children:y.jsx(gu,{id:"description",label:"文章說明",placeholder:"請輸入文章內容",register:h,errors:x,rules:{required:"文章說明必填"}})}),y.jsx("div",{className:"mb-3",children:y.jsx(gr,{id:"content",label:"內文",errors:x,isRequired:!0,children:y.jsx(nye,{content:O,setContent:F})})})]})}),y.jsxs("div",{className:"modal-footer",children:[y.jsx(an,{btnStyle:"btn btn-outline-secondary px-4","data-bs-dismiss":"modal",children:"取消"}),y.jsx(an,{type:"submit",btnStyle:"btn btn-secondary px-4",children:"儲存"})]})]})]})})})}),rye=R.memo(sye),oye={BASE_URL:"/react-and-bloom/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_BASE:"https://ec-course-api.hexschool.io/v2",VITE_API_PATH:"and-bloom"},{VITE_API_BASE:iR,VITE_API_PATH:sR}=oye,aye=()=>{const i=Vn(),[t,e]=R.useState([]),[n,s]=R.useState(1),[r,o]=R.useState(1),[a,l]=R.useState(null),c=R.useRef(null),h=R.useRef(null),f=R.useCallback(async()=>{var E,x,k;try{i(ct(!0));const A=document.cookie.replace(/(?:(?:^|.*;\s*)andBloom\s*=\s*([^;]*).*$)|^.*$/,"$1");Ke.defaults.headers.common.Authorization=A;const S=await Ke.get(`${iR}/api/${sR}/admin/articles?page=${n}`);e(S.data.articles),o((E=S.data.pagination)==null?void 0:E.total_pages),s((x=S.data.pagination)==null?void 0:x.current_page)}catch(A){A instanceof $t&&console.log((k=A==null?void 0:A.response)==null?void 0:k.data.message)}finally{i(ct(!1))}},[n,i]);R.useEffect(()=>{f()},[f]);const m=R.useCallback(()=>{var E;(E=c.current)==null||E.show()},[]),p=R.useCallback(()=>{var E;(E=h.current)==null||E.show()},[]),v=R.useCallback(()=>{l(null),m()},[m]),_=R.useCallback(async E=>{var x,k,A;if(E)try{i(ct(!0));const S=await Ke.delete(`${iR}/api/${sR}/admin/article/${E}`);i(bn({text:S==null?void 0:S.data.message,type:"success"})),f(),(x=h.current)==null||x.hide()}catch(S){S instanceof $t&&(console.log((k=S==null?void 0:S.response)==null?void 0:k.data.message),i(bn({text:(A=S==null?void 0:S.response)==null?void 0:A.data.message,type:"danger"})))}finally{i(ct(!1)),l(null)}},[i,f]);return y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"d-flex justify-content-between align-items-center pb-3 mb-3 border-bottom",children:[y.jsx("h3",{className:"mb-0",children:"文章列表"}),y.jsx(an,{btnStyle:"btn-sm btn-secondary",handleClick:v,children:"新增"})]}),t.length?y.jsxs(y.Fragment,{children:[t.map(E=>y.jsx(zZ,{showModal:m,setSelectedArticle:l,showAlertModal:p,article:E},E.id)),y.jsx("div",{className:"d-flex justify-content-center my-5",children:y.jsx(ed,{currentPage:n,totalPages:r,setCurrentPage:s})})]}):y.jsx("p",{className:"text-center",children:"尚無文章，請新增文章"}),y.jsx(rye,{ref:c,selectedArticle:a,getList:f}),y.jsx(Nf,{ref:h,nextFn:()=>_((a==null?void 0:a.id)||""),children:y.jsxs("p",{className:"text-center py-4",children:["刪除後無法復原，您確定刪除",y.jsx("strong",{children:a==null?void 0:a.title}),"嗎？"]})})]})},lye=gj([{path:"",element:y.jsx(cZ,{})},{path:"/",element:y.jsx(Eq,{}),children:[{path:"products",element:y.jsx(pZ,{})},{path:"product/:id",element:y.jsx(gZ,{})},{path:"cart",element:y.jsx(eY,{})},{path:"checkout/:id",element:y.jsx(OZ,{})},{path:"articles",element:y.jsx(MZ,{})},{path:"article/:id",element:y.jsx(FZ,{})}]},{path:"/login",element:y.jsx(vZ,{})},{path:"/admin",element:y.jsx(gq,{}),children:[{index:!0,loader:async()=>Z$("/admin/products")},{path:"products",element:y.jsx(aG,{})},{path:"orders",element:y.jsx(Jq,{})},{path:"coupons",element:y.jsx(PZ,{})},{path:"articles",element:y.jsx(aye,{})}]},{path:"*",element:y.jsx(yZ,{})}]),cye=()=>y.jsxs(y.Fragment,{children:[y.jsx(jz,{router:lye}),y.jsx(EH,{}),y.jsx(vH,{})]});r$.createRoot(document.getElementById("root")).render(y.jsx(y.Fragment,{children:y.jsx(y$,{store:rq,children:y.jsx(cye,{})})}))});export default uye();
