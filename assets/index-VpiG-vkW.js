var j6=Object.defineProperty;var H6=(i,t,e)=>t in i?j6(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e;var U6=(i,t)=>()=>(t||i((t={exports:{}}).exports,t),t.exports);var b=(i,t,e)=>H6(i,typeof t!="symbol"?t+"":t,e);var Q1e=U6((qi,Gi)=>{function W6(i,t){for(var e=0;e<t.length;e++){const n=t[e];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in i)){const r=Object.getOwnPropertyDescriptor(n,s);r&&Object.defineProperty(i,s,r.get?r:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function e(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(s){if(s.ep)return;s.ep=!0;const r=e(s);fetch(s.href,r)}})();function d_(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Iv={exports:{}},pd={},Rv={exports:{}},ct={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wk;function q6(){if(Wk)return ct;Wk=1;var i=Symbol.for("react.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),r=Symbol.for("react.provider"),o=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;function g(j){return j===null||typeof j!="object"?null:(j=f&&j[f]||j["@@iterator"],typeof j=="function"?j:null)}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y=Object.assign,E={};function C(j,ie,Ve){this.props=j,this.context=ie,this.refs=E,this.updater=Ve||p}C.prototype.isReactComponent={},C.prototype.setState=function(j,ie){if(typeof j!="object"&&typeof j!="function"&&j!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,ie,"setState")},C.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")};function k(){}k.prototype=C.prototype;function T(j,ie,Ve){this.props=j,this.context=ie,this.refs=E,this.updater=Ve||p}var P=T.prototype=new k;P.constructor=T,y(P,C.prototype),P.isPureReactComponent=!0;var S=Array.isArray,O=Object.prototype.hasOwnProperty,A={current:null},N={key:!0,ref:!0,__self:!0,__source:!0};function L(j,ie,Ve){var Be,je={},ze=null,st=null;if(ie!=null)for(Be in ie.ref!==void 0&&(st=ie.ref),ie.key!==void 0&&(ze=""+ie.key),ie)O.call(ie,Be)&&!N.hasOwnProperty(Be)&&(je[Be]=ie[Be]);var Je=arguments.length-2;if(Je===1)je.children=Ve;else if(1<Je){for(var rt=Array(Je),ut=0;ut<Je;ut++)rt[ut]=arguments[ut+2];je.children=rt}if(j&&j.defaultProps)for(Be in Je=j.defaultProps,Je)je[Be]===void 0&&(je[Be]=Je[Be]);return{$$typeof:i,type:j,key:ze,ref:st,props:je,_owner:A.current}}function M(j,ie){return{$$typeof:i,type:j.type,key:ie,ref:j.ref,props:j.props,_owner:j._owner}}function B(j){return typeof j=="object"&&j!==null&&j.$$typeof===i}function U(j){var ie={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function(Ve){return ie[Ve]})}var q=/\/+/g;function ee(j,ie){return typeof j=="object"&&j!==null&&j.key!=null?U(""+j.key):ie.toString(36)}function me(j,ie,Ve,Be,je){var ze=typeof j;(ze==="undefined"||ze==="boolean")&&(j=null);var st=!1;if(j===null)st=!0;else switch(ze){case"string":case"number":st=!0;break;case"object":switch(j.$$typeof){case i:case t:st=!0}}if(st)return st=j,je=je(st),j=Be===""?"."+ee(st,0):Be,S(je)?(Ve="",j!=null&&(Ve=j.replace(q,"$&/")+"/"),me(je,ie,Ve,"",function(ut){return ut})):je!=null&&(B(je)&&(je=M(je,Ve+(!je.key||st&&st.key===je.key?"":(""+je.key).replace(q,"$&/")+"/")+j)),ie.push(je)),1;if(st=0,Be=Be===""?".":Be+":",S(j))for(var Je=0;Je<j.length;Je++){ze=j[Je];var rt=Be+ee(ze,Je);st+=me(ze,ie,Ve,rt,je)}else if(rt=g(j),typeof rt=="function")for(j=rt.call(j),Je=0;!(ze=j.next()).done;)ze=ze.value,rt=Be+ee(ze,Je++),st+=me(ze,ie,Ve,rt,je);else if(ze==="object")throw ie=String(j),Error("Objects are not valid as a React child (found: "+(ie==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":ie)+"). If you meant to render a collection of children, use an array instead.");return st}function _e(j,ie,Ve){if(j==null)return j;var Be=[],je=0;return me(j,Be,"","",function(ze){return ie.call(Ve,ze,je++)}),Be}function ge(j){if(j._status===-1){var ie=j._result;ie=ie(),ie.then(function(Ve){(j._status===0||j._status===-1)&&(j._status=1,j._result=Ve)},function(Ve){(j._status===0||j._status===-1)&&(j._status=2,j._result=Ve)}),j._status===-1&&(j._status=0,j._result=ie)}if(j._status===1)return j._result.default;throw j._result}var pe={current:null},ae={transition:null},le={ReactCurrentDispatcher:pe,ReactCurrentBatchConfig:ae,ReactCurrentOwner:A};function re(){throw Error("act(...) is not supported in production builds of React.")}return ct.Children={map:_e,forEach:function(j,ie,Ve){_e(j,function(){ie.apply(this,arguments)},Ve)},count:function(j){var ie=0;return _e(j,function(){ie++}),ie},toArray:function(j){return _e(j,function(ie){return ie})||[]},only:function(j){if(!B(j))throw Error("React.Children.only expected to receive a single React element child.");return j}},ct.Component=C,ct.Fragment=e,ct.Profiler=s,ct.PureComponent=T,ct.StrictMode=n,ct.Suspense=l,ct.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=le,ct.act=re,ct.cloneElement=function(j,ie,Ve){if(j==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+j+".");var Be=y({},j.props),je=j.key,ze=j.ref,st=j._owner;if(ie!=null){if(ie.ref!==void 0&&(ze=ie.ref,st=A.current),ie.key!==void 0&&(je=""+ie.key),j.type&&j.type.defaultProps)var Je=j.type.defaultProps;for(rt in ie)O.call(ie,rt)&&!N.hasOwnProperty(rt)&&(Be[rt]=ie[rt]===void 0&&Je!==void 0?Je[rt]:ie[rt])}var rt=arguments.length-2;if(rt===1)Be.children=Ve;else if(1<rt){Je=Array(rt);for(var ut=0;ut<rt;ut++)Je[ut]=arguments[ut+2];Be.children=Je}return{$$typeof:i,type:j.type,key:je,ref:ze,props:Be,_owner:st}},ct.createContext=function(j){return j={$$typeof:o,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},j.Provider={$$typeof:r,_context:j},j.Consumer=j},ct.createElement=L,ct.createFactory=function(j){var ie=L.bind(null,j);return ie.type=j,ie},ct.createRef=function(){return{current:null}},ct.forwardRef=function(j){return{$$typeof:a,render:j}},ct.isValidElement=B,ct.lazy=function(j){return{$$typeof:h,_payload:{_status:-1,_result:j},_init:ge}},ct.memo=function(j,ie){return{$$typeof:u,type:j,compare:ie===void 0?null:ie}},ct.startTransition=function(j){var ie=ae.transition;ae.transition={};try{j()}finally{ae.transition=ie}},ct.unstable_act=re,ct.useCallback=function(j,ie){return pe.current.useCallback(j,ie)},ct.useContext=function(j){return pe.current.useContext(j)},ct.useDebugValue=function(){},ct.useDeferredValue=function(j){return pe.current.useDeferredValue(j)},ct.useEffect=function(j,ie){return pe.current.useEffect(j,ie)},ct.useId=function(){return pe.current.useId()},ct.useImperativeHandle=function(j,ie,Ve){return pe.current.useImperativeHandle(j,ie,Ve)},ct.useInsertionEffect=function(j,ie){return pe.current.useInsertionEffect(j,ie)},ct.useLayoutEffect=function(j,ie){return pe.current.useLayoutEffect(j,ie)},ct.useMemo=function(j,ie){return pe.current.useMemo(j,ie)},ct.useReducer=function(j,ie,Ve){return pe.current.useReducer(j,ie,Ve)},ct.useRef=function(j){return pe.current.useRef(j)},ct.useState=function(j){return pe.current.useState(j)},ct.useSyncExternalStore=function(j,ie,Ve){return pe.current.useSyncExternalStore(j,ie,Ve)},ct.useTransition=function(){return pe.current.useTransition()},ct.version="18.3.1",ct}var qk;function Hp(){return qk||(qk=1,Rv.exports=q6()),Rv.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gk;function G6(){if(Gk)return pd;Gk=1;var i=Hp(),t=Symbol.for("react.element"),e=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,s=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,r={key:!0,ref:!0,__self:!0,__source:!0};function o(a,l,u){var h,f={},g=null,p=null;u!==void 0&&(g=""+u),l.key!==void 0&&(g=""+l.key),l.ref!==void 0&&(p=l.ref);for(h in l)n.call(l,h)&&!r.hasOwnProperty(h)&&(f[h]=l[h]);if(a&&a.defaultProps)for(h in l=a.defaultProps,l)f[h]===void 0&&(f[h]=l[h]);return{$$typeof:t,type:a,key:g,ref:p,props:f,_owner:s.current}}return pd.Fragment=e,pd.jsx=o,pd.jsxs=o,pd}var Kk;function K6(){return Kk||(Kk=1,Iv.exports=G6()),Iv.exports}var v=K6(),li="top",Zi="bottom",Xi="right",ci="left",Up="auto",yu=[li,Zi,Xi,ci],gl="start",Qc="end",H5="clippingParents",h_="viewport",Ic="popper",U5="reference",A1=yu.reduce(function(i,t){return i.concat([t+"-"+gl,t+"-"+Qc])},[]),f_=[].concat(yu,[Up]).reduce(function(i,t){return i.concat([t,t+"-"+gl,t+"-"+Qc])},[]),W5="beforeRead",q5="read",G5="afterRead",K5="beforeMain",Y5="main",Z5="afterMain",X5="beforeWrite",J5="write",Q5="afterWrite",eR=[W5,q5,G5,K5,Y5,Z5,X5,J5,Q5];function Sr(i){return i?(i.nodeName||"").toLowerCase():null}function Ji(i){if(i==null)return window;if(i.toString()!=="[object Window]"){var t=i.ownerDocument;return t&&t.defaultView||window}return i}function pl(i){var t=Ji(i).Element;return i instanceof t||i instanceof Element}function ys(i){var t=Ji(i).HTMLElement;return i instanceof t||i instanceof HTMLElement}function m_(i){if(typeof ShadowRoot>"u")return!1;var t=Ji(i).ShadowRoot;return i instanceof t||i instanceof ShadowRoot}function Y6(i){var t=i.state;Object.keys(t.elements).forEach(function(e){var n=t.styles[e]||{},s=t.attributes[e]||{},r=t.elements[e];!ys(r)||!Sr(r)||(Object.assign(r.style,n),Object.keys(s).forEach(function(o){var a=s[o];a===!1?r.removeAttribute(o):r.setAttribute(o,a===!0?"":a)}))})}function Z6(i){var t=i.state,e={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,e.popper),t.styles=e,t.elements.arrow&&Object.assign(t.elements.arrow.style,e.arrow),function(){Object.keys(t.elements).forEach(function(n){var s=t.elements[n],r=t.attributes[n]||{},o=Object.keys(t.styles.hasOwnProperty(n)?t.styles[n]:e[n]),a=o.reduce(function(l,u){return l[u]="",l},{});!ys(s)||!Sr(s)||(Object.assign(s.style,a),Object.keys(r).forEach(function(l){s.removeAttribute(l)}))})}}const g_={name:"applyStyles",enabled:!0,phase:"write",fn:Y6,effect:Z6,requires:["computeStyles"]};function Cr(i){return i.split("-")[0]}var ol=Math.max,jg=Math.min,eu=Math.round;function P1(){var i=navigator.userAgentData;return i!=null&&i.brands&&Array.isArray(i.brands)?i.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function tR(){return!/^((?!chrome|android).)*safari/i.test(P1())}function tu(i,t,e){t===void 0&&(t=!1),e===void 0&&(e=!1);var n=i.getBoundingClientRect(),s=1,r=1;t&&ys(i)&&(s=i.offsetWidth>0&&eu(n.width)/i.offsetWidth||1,r=i.offsetHeight>0&&eu(n.height)/i.offsetHeight||1);var o=pl(i)?Ji(i):window,a=o.visualViewport,l=!tR()&&e,u=(n.left+(l&&a?a.offsetLeft:0))/s,h=(n.top+(l&&a?a.offsetTop:0))/r,f=n.width/s,g=n.height/r;return{width:f,height:g,top:h,right:u+f,bottom:h+g,left:u,x:u,y:h}}function p_(i){var t=tu(i),e=i.offsetWidth,n=i.offsetHeight;return Math.abs(t.width-e)<=1&&(e=t.width),Math.abs(t.height-n)<=1&&(n=t.height),{x:i.offsetLeft,y:i.offsetTop,width:e,height:n}}function nR(i,t){var e=t.getRootNode&&t.getRootNode();if(i.contains(t))return!0;if(e&&m_(e)){var n=t;do{if(n&&i.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function lo(i){return Ji(i).getComputedStyle(i)}function X6(i){return["table","td","th"].indexOf(Sr(i))>=0}function va(i){return((pl(i)?i.ownerDocument:i.document)||window.document).documentElement}function Wp(i){return Sr(i)==="html"?i:i.assignedSlot||i.parentNode||(m_(i)?i.host:null)||va(i)}function Yk(i){return!ys(i)||lo(i).position==="fixed"?null:i.offsetParent}function J6(i){var t=/firefox/i.test(P1()),e=/Trident/i.test(P1());if(e&&ys(i)){var n=lo(i);if(n.position==="fixed")return null}var s=Wp(i);for(m_(s)&&(s=s.host);ys(s)&&["html","body"].indexOf(Sr(s))<0;){var r=lo(s);if(r.transform!=="none"||r.perspective!=="none"||r.contain==="paint"||["transform","perspective"].indexOf(r.willChange)!==-1||t&&r.willChange==="filter"||t&&r.filter&&r.filter!=="none")return s;s=s.parentNode}return null}function Kh(i){for(var t=Ji(i),e=Yk(i);e&&X6(e)&&lo(e).position==="static";)e=Yk(e);return e&&(Sr(e)==="html"||Sr(e)==="body"&&lo(e).position==="static")?t:e||J6(i)||t}function b_(i){return["top","bottom"].indexOf(i)>=0?"x":"y"}function Xd(i,t,e){return ol(i,jg(t,e))}function Q6(i,t,e){var n=Xd(i,t,e);return n>e?e:n}function iR(){return{top:0,right:0,bottom:0,left:0}}function sR(i){return Object.assign({},iR(),i)}function rR(i,t){return t.reduce(function(e,n){return e[n]=i,e},{})}var e7=function(t,e){return t=typeof t=="function"?t(Object.assign({},e.rects,{placement:e.placement})):t,sR(typeof t!="number"?t:rR(t,yu))};function t7(i){var t,e=i.state,n=i.name,s=i.options,r=e.elements.arrow,o=e.modifiersData.popperOffsets,a=Cr(e.placement),l=b_(a),u=[ci,Xi].indexOf(a)>=0,h=u?"height":"width";if(!(!r||!o)){var f=e7(s.padding,e),g=p_(r),p=l==="y"?li:ci,y=l==="y"?Zi:Xi,E=e.rects.reference[h]+e.rects.reference[l]-o[l]-e.rects.popper[h],C=o[l]-e.rects.reference[l],k=Kh(r),T=k?l==="y"?k.clientHeight||0:k.clientWidth||0:0,P=E/2-C/2,S=f[p],O=T-g[h]-f[y],A=T/2-g[h]/2+P,N=Xd(S,A,O),L=l;e.modifiersData[n]=(t={},t[L]=N,t.centerOffset=N-A,t)}}function n7(i){var t=i.state,e=i.options,n=e.element,s=n===void 0?"[data-popper-arrow]":n;s!=null&&(typeof s=="string"&&(s=t.elements.popper.querySelector(s),!s)||nR(t.elements.popper,s)&&(t.elements.arrow=s))}const oR={name:"arrow",enabled:!0,phase:"main",fn:t7,effect:n7,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function nu(i){return i.split("-")[1]}var i7={top:"auto",right:"auto",bottom:"auto",left:"auto"};function s7(i,t){var e=i.x,n=i.y,s=t.devicePixelRatio||1;return{x:eu(e*s)/s||0,y:eu(n*s)/s||0}}function Zk(i){var t,e=i.popper,n=i.popperRect,s=i.placement,r=i.variation,o=i.offsets,a=i.position,l=i.gpuAcceleration,u=i.adaptive,h=i.roundOffsets,f=i.isFixed,g=o.x,p=g===void 0?0:g,y=o.y,E=y===void 0?0:y,C=typeof h=="function"?h({x:p,y:E}):{x:p,y:E};p=C.x,E=C.y;var k=o.hasOwnProperty("x"),T=o.hasOwnProperty("y"),P=ci,S=li,O=window;if(u){var A=Kh(e),N="clientHeight",L="clientWidth";if(A===Ji(e)&&(A=va(e),lo(A).position!=="static"&&a==="absolute"&&(N="scrollHeight",L="scrollWidth")),A=A,s===li||(s===ci||s===Xi)&&r===Qc){S=Zi;var M=f&&A===O&&O.visualViewport?O.visualViewport.height:A[N];E-=M-n.height,E*=l?1:-1}if(s===ci||(s===li||s===Zi)&&r===Qc){P=Xi;var B=f&&A===O&&O.visualViewport?O.visualViewport.width:A[L];p-=B-n.width,p*=l?1:-1}}var U=Object.assign({position:a},u&&i7),q=h===!0?s7({x:p,y:E},Ji(e)):{x:p,y:E};if(p=q.x,E=q.y,l){var ee;return Object.assign({},U,(ee={},ee[S]=T?"0":"",ee[P]=k?"0":"",ee.transform=(O.devicePixelRatio||1)<=1?"translate("+p+"px, "+E+"px)":"translate3d("+p+"px, "+E+"px, 0)",ee))}return Object.assign({},U,(t={},t[S]=T?E+"px":"",t[P]=k?p+"px":"",t.transform="",t))}function r7(i){var t=i.state,e=i.options,n=e.gpuAcceleration,s=n===void 0?!0:n,r=e.adaptive,o=r===void 0?!0:r,a=e.roundOffsets,l=a===void 0?!0:a,u={placement:Cr(t.placement),variation:nu(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:s,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,Zk(Object.assign({},u,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:o,roundOffsets:l})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,Zk(Object.assign({},u,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const w_={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:r7,data:{}};var Im={passive:!0};function o7(i){var t=i.state,e=i.instance,n=i.options,s=n.scroll,r=s===void 0?!0:s,o=n.resize,a=o===void 0?!0:o,l=Ji(t.elements.popper),u=[].concat(t.scrollParents.reference,t.scrollParents.popper);return r&&u.forEach(function(h){h.addEventListener("scroll",e.update,Im)}),a&&l.addEventListener("resize",e.update,Im),function(){r&&u.forEach(function(h){h.removeEventListener("scroll",e.update,Im)}),a&&l.removeEventListener("resize",e.update,Im)}}const v_={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:o7,data:{}};var a7={left:"right",right:"left",bottom:"top",top:"bottom"};function pg(i){return i.replace(/left|right|bottom|top/g,function(t){return a7[t]})}var l7={start:"end",end:"start"};function Xk(i){return i.replace(/start|end/g,function(t){return l7[t]})}function y_(i){var t=Ji(i),e=t.pageXOffset,n=t.pageYOffset;return{scrollLeft:e,scrollTop:n}}function __(i){return tu(va(i)).left+y_(i).scrollLeft}function c7(i,t){var e=Ji(i),n=va(i),s=e.visualViewport,r=n.clientWidth,o=n.clientHeight,a=0,l=0;if(s){r=s.width,o=s.height;var u=tR();(u||!u&&t==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}return{width:r,height:o,x:a+__(i),y:l}}function u7(i){var t,e=va(i),n=y_(i),s=(t=i.ownerDocument)==null?void 0:t.body,r=ol(e.scrollWidth,e.clientWidth,s?s.scrollWidth:0,s?s.clientWidth:0),o=ol(e.scrollHeight,e.clientHeight,s?s.scrollHeight:0,s?s.clientHeight:0),a=-n.scrollLeft+__(i),l=-n.scrollTop;return lo(s||e).direction==="rtl"&&(a+=ol(e.clientWidth,s?s.clientWidth:0)-r),{width:r,height:o,x:a,y:l}}function E_(i){var t=lo(i),e=t.overflow,n=t.overflowX,s=t.overflowY;return/auto|scroll|overlay|hidden/.test(e+s+n)}function aR(i){return["html","body","#document"].indexOf(Sr(i))>=0?i.ownerDocument.body:ys(i)&&E_(i)?i:aR(Wp(i))}function Jd(i,t){var e;t===void 0&&(t=[]);var n=aR(i),s=n===((e=i.ownerDocument)==null?void 0:e.body),r=Ji(n),o=s?[r].concat(r.visualViewport||[],E_(n)?n:[]):n,a=t.concat(o);return s?a:a.concat(Jd(Wp(o)))}function I1(i){return Object.assign({},i,{left:i.x,top:i.y,right:i.x+i.width,bottom:i.y+i.height})}function d7(i,t){var e=tu(i,!1,t==="fixed");return e.top=e.top+i.clientTop,e.left=e.left+i.clientLeft,e.bottom=e.top+i.clientHeight,e.right=e.left+i.clientWidth,e.width=i.clientWidth,e.height=i.clientHeight,e.x=e.left,e.y=e.top,e}function Jk(i,t,e){return t===h_?I1(c7(i,e)):pl(t)?d7(t,e):I1(u7(va(i)))}function h7(i){var t=Jd(Wp(i)),e=["absolute","fixed"].indexOf(lo(i).position)>=0,n=e&&ys(i)?Kh(i):i;return pl(n)?t.filter(function(s){return pl(s)&&nR(s,n)&&Sr(s)!=="body"}):[]}function f7(i,t,e,n){var s=t==="clippingParents"?h7(i):[].concat(t),r=[].concat(s,[e]),o=r[0],a=r.reduce(function(l,u){var h=Jk(i,u,n);return l.top=ol(h.top,l.top),l.right=jg(h.right,l.right),l.bottom=jg(h.bottom,l.bottom),l.left=ol(h.left,l.left),l},Jk(i,o,n));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function lR(i){var t=i.reference,e=i.element,n=i.placement,s=n?Cr(n):null,r=n?nu(n):null,o=t.x+t.width/2-e.width/2,a=t.y+t.height/2-e.height/2,l;switch(s){case li:l={x:o,y:t.y-e.height};break;case Zi:l={x:o,y:t.y+t.height};break;case Xi:l={x:t.x+t.width,y:a};break;case ci:l={x:t.x-e.width,y:a};break;default:l={x:t.x,y:t.y}}var u=s?b_(s):null;if(u!=null){var h=u==="y"?"height":"width";switch(r){case gl:l[u]=l[u]-(t[h]/2-e[h]/2);break;case Qc:l[u]=l[u]+(t[h]/2-e[h]/2);break}}return l}function iu(i,t){t===void 0&&(t={});var e=t,n=e.placement,s=n===void 0?i.placement:n,r=e.strategy,o=r===void 0?i.strategy:r,a=e.boundary,l=a===void 0?H5:a,u=e.rootBoundary,h=u===void 0?h_:u,f=e.elementContext,g=f===void 0?Ic:f,p=e.altBoundary,y=p===void 0?!1:p,E=e.padding,C=E===void 0?0:E,k=sR(typeof C!="number"?C:rR(C,yu)),T=g===Ic?U5:Ic,P=i.rects.popper,S=i.elements[y?T:g],O=f7(pl(S)?S:S.contextElement||va(i.elements.popper),l,h,o),A=tu(i.elements.reference),N=lR({reference:A,element:P,strategy:"absolute",placement:s}),L=I1(Object.assign({},P,N)),M=g===Ic?L:A,B={top:O.top-M.top+k.top,bottom:M.bottom-O.bottom+k.bottom,left:O.left-M.left+k.left,right:M.right-O.right+k.right},U=i.modifiersData.offset;if(g===Ic&&U){var q=U[s];Object.keys(B).forEach(function(ee){var me=[Xi,Zi].indexOf(ee)>=0?1:-1,_e=[li,Zi].indexOf(ee)>=0?"y":"x";B[ee]+=q[_e]*me})}return B}function m7(i,t){t===void 0&&(t={});var e=t,n=e.placement,s=e.boundary,r=e.rootBoundary,o=e.padding,a=e.flipVariations,l=e.allowedAutoPlacements,u=l===void 0?f_:l,h=nu(n),f=h?a?A1:A1.filter(function(y){return nu(y)===h}):yu,g=f.filter(function(y){return u.indexOf(y)>=0});g.length===0&&(g=f);var p=g.reduce(function(y,E){return y[E]=iu(i,{placement:E,boundary:s,rootBoundary:r,padding:o})[Cr(E)],y},{});return Object.keys(p).sort(function(y,E){return p[y]-p[E]})}function g7(i){if(Cr(i)===Up)return[];var t=pg(i);return[Xk(i),t,Xk(t)]}function p7(i){var t=i.state,e=i.options,n=i.name;if(!t.modifiersData[n]._skip){for(var s=e.mainAxis,r=s===void 0?!0:s,o=e.altAxis,a=o===void 0?!0:o,l=e.fallbackPlacements,u=e.padding,h=e.boundary,f=e.rootBoundary,g=e.altBoundary,p=e.flipVariations,y=p===void 0?!0:p,E=e.allowedAutoPlacements,C=t.options.placement,k=Cr(C),T=k===C,P=l||(T||!y?[pg(C)]:g7(C)),S=[C].concat(P).reduce(function(Be,je){return Be.concat(Cr(je)===Up?m7(t,{placement:je,boundary:h,rootBoundary:f,padding:u,flipVariations:y,allowedAutoPlacements:E}):je)},[]),O=t.rects.reference,A=t.rects.popper,N=new Map,L=!0,M=S[0],B=0;B<S.length;B++){var U=S[B],q=Cr(U),ee=nu(U)===gl,me=[li,Zi].indexOf(q)>=0,_e=me?"width":"height",ge=iu(t,{placement:U,boundary:h,rootBoundary:f,altBoundary:g,padding:u}),pe=me?ee?Xi:ci:ee?Zi:li;O[_e]>A[_e]&&(pe=pg(pe));var ae=pg(pe),le=[];if(r&&le.push(ge[q]<=0),a&&le.push(ge[pe]<=0,ge[ae]<=0),le.every(function(Be){return Be})){M=U,L=!1;break}N.set(U,le)}if(L)for(var re=y?3:1,j=function(je){var ze=S.find(function(st){var Je=N.get(st);if(Je)return Je.slice(0,je).every(function(rt){return rt})});if(ze)return M=ze,"break"},ie=re;ie>0;ie--){var Ve=j(ie);if(Ve==="break")break}t.placement!==M&&(t.modifiersData[n]._skip=!0,t.placement=M,t.reset=!0)}}const cR={name:"flip",enabled:!0,phase:"main",fn:p7,requiresIfExists:["offset"],data:{_skip:!1}};function Qk(i,t,e){return e===void 0&&(e={x:0,y:0}),{top:i.top-t.height-e.y,right:i.right-t.width+e.x,bottom:i.bottom-t.height+e.y,left:i.left-t.width-e.x}}function eT(i){return[li,Xi,Zi,ci].some(function(t){return i[t]>=0})}function b7(i){var t=i.state,e=i.name,n=t.rects.reference,s=t.rects.popper,r=t.modifiersData.preventOverflow,o=iu(t,{elementContext:"reference"}),a=iu(t,{altBoundary:!0}),l=Qk(o,n),u=Qk(a,s,r),h=eT(l),f=eT(u);t.modifiersData[e]={referenceClippingOffsets:l,popperEscapeOffsets:u,isReferenceHidden:h,hasPopperEscaped:f},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":h,"data-popper-escaped":f})}const uR={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:b7};function w7(i,t,e){var n=Cr(i),s=[ci,li].indexOf(n)>=0?-1:1,r=typeof e=="function"?e(Object.assign({},t,{placement:i})):e,o=r[0],a=r[1];return o=o||0,a=(a||0)*s,[ci,Xi].indexOf(n)>=0?{x:a,y:o}:{x:o,y:a}}function v7(i){var t=i.state,e=i.options,n=i.name,s=e.offset,r=s===void 0?[0,0]:s,o=f_.reduce(function(h,f){return h[f]=w7(f,t.rects,r),h},{}),a=o[t.placement],l=a.x,u=a.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=u),t.modifiersData[n]=o}const dR={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:v7};function y7(i){var t=i.state,e=i.name;t.modifiersData[e]=lR({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}const C_={name:"popperOffsets",enabled:!0,phase:"read",fn:y7,data:{}};function _7(i){return i==="x"?"y":"x"}function E7(i){var t=i.state,e=i.options,n=i.name,s=e.mainAxis,r=s===void 0?!0:s,o=e.altAxis,a=o===void 0?!1:o,l=e.boundary,u=e.rootBoundary,h=e.altBoundary,f=e.padding,g=e.tether,p=g===void 0?!0:g,y=e.tetherOffset,E=y===void 0?0:y,C=iu(t,{boundary:l,rootBoundary:u,padding:f,altBoundary:h}),k=Cr(t.placement),T=nu(t.placement),P=!T,S=b_(k),O=_7(S),A=t.modifiersData.popperOffsets,N=t.rects.reference,L=t.rects.popper,M=typeof E=="function"?E(Object.assign({},t.rects,{placement:t.placement})):E,B=typeof M=="number"?{mainAxis:M,altAxis:M}:Object.assign({mainAxis:0,altAxis:0},M),U=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,q={x:0,y:0};if(A){if(r){var ee,me=S==="y"?li:ci,_e=S==="y"?Zi:Xi,ge=S==="y"?"height":"width",pe=A[S],ae=pe+C[me],le=pe-C[_e],re=p?-L[ge]/2:0,j=T===gl?N[ge]:L[ge],ie=T===gl?-L[ge]:-N[ge],Ve=t.elements.arrow,Be=p&&Ve?p_(Ve):{width:0,height:0},je=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:iR(),ze=je[me],st=je[_e],Je=Xd(0,N[ge],Be[ge]),rt=P?N[ge]/2-re-Je-ze-B.mainAxis:j-Je-ze-B.mainAxis,ut=P?-N[ge]/2+re+Je+st+B.mainAxis:ie+Je+st+B.mainAxis,Zt=t.elements.arrow&&Kh(t.elements.arrow),kn=Zt?S==="y"?Zt.clientTop||0:Zt.clientLeft||0:0,rs=(ee=U==null?void 0:U[S])!=null?ee:0,Wn=pe+rt-rs-kn,Aa=pe+ut-rs,Co=Xd(p?jg(ae,Wn):ae,pe,p?ol(le,Aa):le);A[S]=Co,q[S]=Co-pe}if(a){var lr,F=S==="x"?li:ci,Y=S==="x"?Zi:Xi,te=A[O],ye=O==="y"?"height":"width",be=te+C[F],he=te-C[Y],Me=[li,ci].indexOf(k)!==-1,Qe=(lr=U==null?void 0:U[O])!=null?lr:0,pt=Me?be:te-N[ye]-L[ye]-Qe+B.altAxis,ht=Me?te+N[ye]+L[ye]-Qe-B.altAxis:he,yn=p&&Me?Q6(pt,te,ht):Xd(p?pt:be,te,p?ht:he);A[O]=yn,q[O]=yn-te}t.modifiersData[n]=q}}const hR={name:"preventOverflow",enabled:!0,phase:"main",fn:E7,requiresIfExists:["offset"]};function C7(i){return{scrollLeft:i.scrollLeft,scrollTop:i.scrollTop}}function x7(i){return i===Ji(i)||!ys(i)?y_(i):C7(i)}function k7(i){var t=i.getBoundingClientRect(),e=eu(t.width)/i.offsetWidth||1,n=eu(t.height)/i.offsetHeight||1;return e!==1||n!==1}function T7(i,t,e){e===void 0&&(e=!1);var n=ys(t),s=ys(t)&&k7(t),r=va(t),o=tu(i,s,e),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(n||!n&&!e)&&((Sr(t)!=="body"||E_(r))&&(a=x7(t)),ys(t)?(l=tu(t,!0),l.x+=t.clientLeft,l.y+=t.clientTop):r&&(l.x=__(r))),{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function S7(i){var t=new Map,e=new Set,n=[];i.forEach(function(r){t.set(r.name,r)});function s(r){e.add(r.name);var o=[].concat(r.requires||[],r.requiresIfExists||[]);o.forEach(function(a){if(!e.has(a)){var l=t.get(a);l&&s(l)}}),n.push(r)}return i.forEach(function(r){e.has(r.name)||s(r)}),n}function A7(i){var t=S7(i);return eR.reduce(function(e,n){return e.concat(t.filter(function(s){return s.phase===n}))},[])}function P7(i){var t;return function(){return t||(t=new Promise(function(e){Promise.resolve().then(function(){t=void 0,e(i())})})),t}}function I7(i){var t=i.reduce(function(e,n){var s=e[n.name];return e[n.name]=s?Object.assign({},s,n,{options:Object.assign({},s.options,n.options),data:Object.assign({},s.data,n.data)}):n,e},{});return Object.keys(t).map(function(e){return t[e]})}var tT={placement:"bottom",modifiers:[],strategy:"absolute"};function nT(){for(var i=arguments.length,t=new Array(i),e=0;e<i;e++)t[e]=arguments[e];return!t.some(function(n){return!(n&&typeof n.getBoundingClientRect=="function")})}function qp(i){i===void 0&&(i={});var t=i,e=t.defaultModifiers,n=e===void 0?[]:e,s=t.defaultOptions,r=s===void 0?tT:s;return function(a,l,u){u===void 0&&(u=r);var h={placement:"bottom",orderedModifiers:[],options:Object.assign({},tT,r),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},f=[],g=!1,p={state:h,setOptions:function(k){var T=typeof k=="function"?k(h.options):k;E(),h.options=Object.assign({},r,h.options,T),h.scrollParents={reference:pl(a)?Jd(a):a.contextElement?Jd(a.contextElement):[],popper:Jd(l)};var P=A7(I7([].concat(n,h.options.modifiers)));return h.orderedModifiers=P.filter(function(S){return S.enabled}),y(),p.update()},forceUpdate:function(){if(!g){var k=h.elements,T=k.reference,P=k.popper;if(nT(T,P)){h.rects={reference:T7(T,Kh(P),h.options.strategy==="fixed"),popper:p_(P)},h.reset=!1,h.placement=h.options.placement,h.orderedModifiers.forEach(function(B){return h.modifiersData[B.name]=Object.assign({},B.data)});for(var S=0;S<h.orderedModifiers.length;S++){if(h.reset===!0){h.reset=!1,S=-1;continue}var O=h.orderedModifiers[S],A=O.fn,N=O.options,L=N===void 0?{}:N,M=O.name;typeof A=="function"&&(h=A({state:h,options:L,name:M,instance:p})||h)}}}},update:P7(function(){return new Promise(function(C){p.forceUpdate(),C(h)})}),destroy:function(){E(),g=!0}};if(!nT(a,l))return p;p.setOptions(u).then(function(C){!g&&u.onFirstUpdate&&u.onFirstUpdate(C)});function y(){h.orderedModifiers.forEach(function(C){var k=C.name,T=C.options,P=T===void 0?{}:T,S=C.effect;if(typeof S=="function"){var O=S({state:h,name:k,instance:p,options:P}),A=function(){};f.push(O||A)}})}function E(){f.forEach(function(C){return C()}),f=[]}return p}}var R7=qp(),O7=[v_,C_,w_,g_],N7=qp({defaultModifiers:O7}),M7=[v_,C_,w_,g_,dR,cR,hR,oR,uR],x_=qp({defaultModifiers:M7});const fR=Object.freeze(Object.defineProperty({__proto__:null,afterMain:Z5,afterRead:G5,afterWrite:Q5,applyStyles:g_,arrow:oR,auto:Up,basePlacements:yu,beforeMain:K5,beforeRead:W5,beforeWrite:X5,bottom:Zi,clippingParents:H5,computeStyles:w_,createPopper:x_,createPopperBase:R7,createPopperLite:N7,detectOverflow:iu,end:Qc,eventListeners:v_,flip:cR,hide:uR,left:ci,main:Y5,modifierPhases:eR,offset:dR,placements:f_,popper:Ic,popperGenerator:qp,popperOffsets:C_,preventOverflow:hR,read:q5,reference:U5,right:Xi,start:gl,top:li,variationPlacements:A1,viewport:h_,write:J5},Symbol.toStringTag,{value:"Module"}));/*!
  * Bootstrap v5.3.3 (https://getbootstrap.com/)
  * Copyright 2011-2024 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */const Zo=new Map,Ov={set(i,t,e){Zo.has(i)||Zo.set(i,new Map);const n=Zo.get(i);if(!n.has(t)&&n.size!==0){console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(n.keys())[0]}.`);return}n.set(t,e)},get(i,t){return Zo.has(i)&&Zo.get(i).get(t)||null},remove(i,t){if(!Zo.has(i))return;const e=Zo.get(i);e.delete(t),e.size===0&&Zo.delete(i)}},L7=1e6,V7=1e3,R1="transitionend",mR=i=>(i&&window.CSS&&window.CSS.escape&&(i=i.replace(/#([^\s"#']+)/g,(t,e)=>`#${CSS.escape(e)}`)),i),D7=i=>i==null?`${i}`:Object.prototype.toString.call(i).match(/\s([a-z]+)/i)[1].toLowerCase(),B7=i=>{do i+=Math.floor(Math.random()*L7);while(document.getElementById(i));return i},F7=i=>{if(!i)return 0;let{transitionDuration:t,transitionDelay:e}=window.getComputedStyle(i);const n=Number.parseFloat(t),s=Number.parseFloat(e);return!n&&!s?0:(t=t.split(",")[0],e=e.split(",")[0],(Number.parseFloat(t)+Number.parseFloat(e))*V7)},gR=i=>{i.dispatchEvent(new Event(R1))},no=i=>!i||typeof i!="object"?!1:(typeof i.jquery<"u"&&(i=i[0]),typeof i.nodeType<"u"),da=i=>no(i)?i.jquery?i[0]:i:typeof i=="string"&&i.length>0?document.querySelector(mR(i)):null,_u=i=>{if(!no(i)||i.getClientRects().length===0)return!1;const t=getComputedStyle(i).getPropertyValue("visibility")==="visible",e=i.closest("details:not([open])");if(!e)return t;if(e!==i){const n=i.closest("summary");if(n&&n.parentNode!==e||n===null)return!1}return t},ha=i=>!i||i.nodeType!==Node.ELEMENT_NODE||i.classList.contains("disabled")?!0:typeof i.disabled<"u"?i.disabled:i.hasAttribute("disabled")&&i.getAttribute("disabled")!=="false",pR=i=>{if(!document.documentElement.attachShadow)return null;if(typeof i.getRootNode=="function"){const t=i.getRootNode();return t instanceof ShadowRoot?t:null}return i instanceof ShadowRoot?i:i.parentNode?pR(i.parentNode):null},Hg=()=>{},Yh=i=>{i.offsetHeight},bR=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,Nv=[],$7=i=>{document.readyState==="loading"?(Nv.length||document.addEventListener("DOMContentLoaded",()=>{for(const t of Nv)t()}),Nv.push(i)):i()},_s=()=>document.documentElement.dir==="rtl",As=i=>{$7(()=>{const t=bR();if(t){const e=i.NAME,n=t.fn[e];t.fn[e]=i.jQueryInterface,t.fn[e].Constructor=i,t.fn[e].noConflict=()=>(t.fn[e]=n,i.jQueryInterface)}})},ki=(i,t=[],e=i)=>typeof i=="function"?i(...t):e,wR=(i,t,e=!0)=>{if(!e){ki(i);return}const s=F7(t)+5;let r=!1;const o=({target:a})=>{a===t&&(r=!0,t.removeEventListener(R1,o),ki(i))};t.addEventListener(R1,o),setTimeout(()=>{r||gR(t)},s)},k_=(i,t,e,n)=>{const s=i.length;let r=i.indexOf(t);return r===-1?!e&&n?i[s-1]:i[0]:(r+=e?1:-1,n&&(r=(r+s)%s),i[Math.max(0,Math.min(r,s-1))])},z7=/[^.]*(?=\..*)\.|.*/,j7=/\..*/,H7=/::\d+$/,Mv={};let iT=1;const vR={mouseenter:"mouseover",mouseleave:"mouseout"},U7=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function yR(i,t){return t&&`${t}::${iT++}`||i.uidEvent||iT++}function _R(i){const t=yR(i);return i.uidEvent=t,Mv[t]=Mv[t]||{},Mv[t]}function W7(i,t){return function e(n){return T_(n,{delegateTarget:i}),e.oneOff&&de.off(i,n.type,t),t.apply(i,[n])}}function q7(i,t,e){return function n(s){const r=i.querySelectorAll(t);for(let{target:o}=s;o&&o!==this;o=o.parentNode)for(const a of r)if(a===o)return T_(s,{delegateTarget:o}),n.oneOff&&de.off(i,s.type,t,e),e.apply(o,[s])}}function ER(i,t,e=null){return Object.values(i).find(n=>n.callable===t&&n.delegationSelector===e)}function CR(i,t,e){const n=typeof t=="string",s=n?e:t||e;let r=xR(i);return U7.has(r)||(r=i),[n,s,r]}function sT(i,t,e,n,s){if(typeof t!="string"||!i)return;let[r,o,a]=CR(t,e,n);t in vR&&(o=(y=>function(E){if(!E.relatedTarget||E.relatedTarget!==E.delegateTarget&&!E.delegateTarget.contains(E.relatedTarget))return y.call(this,E)})(o));const l=_R(i),u=l[a]||(l[a]={}),h=ER(u,o,r?e:null);if(h){h.oneOff=h.oneOff&&s;return}const f=yR(o,t.replace(z7,"")),g=r?q7(i,e,o):W7(i,o);g.delegationSelector=r?e:null,g.callable=o,g.oneOff=s,g.uidEvent=f,u[f]=g,i.addEventListener(a,g,r)}function O1(i,t,e,n,s){const r=ER(t[e],n,s);r&&(i.removeEventListener(e,r,!!s),delete t[e][r.uidEvent])}function G7(i,t,e,n){const s=t[e]||{};for(const[r,o]of Object.entries(s))r.includes(n)&&O1(i,t,e,o.callable,o.delegationSelector)}function xR(i){return i=i.replace(j7,""),vR[i]||i}const de={on(i,t,e,n){sT(i,t,e,n,!1)},one(i,t,e,n){sT(i,t,e,n,!0)},off(i,t,e,n){if(typeof t!="string"||!i)return;const[s,r,o]=CR(t,e,n),a=o!==t,l=_R(i),u=l[o]||{},h=t.startsWith(".");if(typeof r<"u"){if(!Object.keys(u).length)return;O1(i,l,o,r,s?e:null);return}if(h)for(const f of Object.keys(l))G7(i,l,f,t.slice(1));for(const[f,g]of Object.entries(u)){const p=f.replace(H7,"");(!a||t.includes(p))&&O1(i,l,o,g.callable,g.delegationSelector)}},trigger(i,t,e){if(typeof t!="string"||!i)return null;const n=bR(),s=xR(t),r=t!==s;let o=null,a=!0,l=!0,u=!1;r&&n&&(o=n.Event(t,e),n(i).trigger(o),a=!o.isPropagationStopped(),l=!o.isImmediatePropagationStopped(),u=o.isDefaultPrevented());const h=T_(new Event(t,{bubbles:a,cancelable:!0}),e);return u&&h.preventDefault(),l&&i.dispatchEvent(h),h.defaultPrevented&&o&&o.preventDefault(),h}};function T_(i,t={}){for(const[e,n]of Object.entries(t))try{i[e]=n}catch{Object.defineProperty(i,e,{configurable:!0,get(){return n}})}return i}function rT(i){if(i==="true")return!0;if(i==="false")return!1;if(i===Number(i).toString())return Number(i);if(i===""||i==="null")return null;if(typeof i!="string")return i;try{return JSON.parse(decodeURIComponent(i))}catch{return i}}function Lv(i){return i.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}const io={setDataAttribute(i,t,e){i.setAttribute(`data-bs-${Lv(t)}`,e)},removeDataAttribute(i,t){i.removeAttribute(`data-bs-${Lv(t)}`)},getDataAttributes(i){if(!i)return{};const t={},e=Object.keys(i.dataset).filter(n=>n.startsWith("bs")&&!n.startsWith("bsConfig"));for(const n of e){let s=n.replace(/^bs/,"");s=s.charAt(0).toLowerCase()+s.slice(1,s.length),t[s]=rT(i.dataset[n])}return t},getDataAttribute(i,t){return rT(i.getAttribute(`data-bs-${Lv(t)}`))}};let Zh=class{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(t){return t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t}_mergeConfigObj(t,e){const n=no(e)?io.getDataAttribute(e,"config"):{};return{...this.constructor.Default,...typeof n=="object"?n:{},...no(e)?io.getDataAttributes(e):{},...typeof t=="object"?t:{}}}_typeCheckConfig(t,e=this.constructor.DefaultType){for(const[n,s]of Object.entries(e)){const r=t[n],o=no(r)?"element":D7(r);if(!new RegExp(s).test(o))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${n}" provided type "${o}" but expected type "${s}".`)}}};const K7="5.3.3";class ir extends Zh{constructor(t,e){super(),t=da(t),t&&(this._element=t,this._config=this._getConfig(e),Ov.set(this._element,this.constructor.DATA_KEY,this))}dispose(){Ov.remove(this._element,this.constructor.DATA_KEY),de.off(this._element,this.constructor.EVENT_KEY);for(const t of Object.getOwnPropertyNames(this))this[t]=null}_queueCallback(t,e,n=!0){wR(t,e,n)}_getConfig(t){return t=this._mergeConfigObj(t,this._element),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}static getInstance(t){return Ov.get(da(t),this.DATA_KEY)}static getOrCreateInstance(t,e={}){return this.getInstance(t)||new this(t,typeof e=="object"?e:null)}static get VERSION(){return K7}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(t){return`${t}${this.EVENT_KEY}`}}const Vv=i=>{let t=i.getAttribute("data-bs-target");if(!t||t==="#"){let e=i.getAttribute("href");if(!e||!e.includes("#")&&!e.startsWith("."))return null;e.includes("#")&&!e.startsWith("#")&&(e=`#${e.split("#")[1]}`),t=e&&e!=="#"?e.trim():null}return t?t.split(",").map(e=>mR(e)).join(","):null},He={find(i,t=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(t,i))},findOne(i,t=document.documentElement){return Element.prototype.querySelector.call(t,i)},children(i,t){return[].concat(...i.children).filter(e=>e.matches(t))},parents(i,t){const e=[];let n=i.parentNode.closest(t);for(;n;)e.push(n),n=n.parentNode.closest(t);return e},prev(i,t){let e=i.previousElementSibling;for(;e;){if(e.matches(t))return[e];e=e.previousElementSibling}return[]},next(i,t){let e=i.nextElementSibling;for(;e;){if(e.matches(t))return[e];e=e.nextElementSibling}return[]},focusableChildren(i){const t=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(e=>`${e}:not([tabindex^="-"])`).join(",");return this.find(t,i).filter(e=>!ha(e)&&_u(e))},getSelectorFromElement(i){const t=Vv(i);return t&&He.findOne(t)?t:null},getElementFromSelector(i){const t=Vv(i);return t?He.findOne(t):null},getMultipleElementsFromSelector(i){const t=Vv(i);return t?He.find(t):[]}},Gp=(i,t="hide")=>{const e=`click.dismiss${i.EVENT_KEY}`,n=i.NAME;de.on(document,e,`[data-bs-dismiss="${n}"]`,function(s){if(["A","AREA"].includes(this.tagName)&&s.preventDefault(),ha(this))return;const r=He.getElementFromSelector(this)||this.closest(`.${n}`);i.getOrCreateInstance(r)[t]()})},Y7="alert",Z7="bs.alert",kR=`.${Z7}`,X7=`close${kR}`,J7=`closed${kR}`,Q7="fade",eB="show";class Kp extends ir{static get NAME(){return Y7}close(){if(de.trigger(this._element,X7).defaultPrevented)return;this._element.classList.remove(eB);const e=this._element.classList.contains(Q7);this._queueCallback(()=>this._destroyElement(),this._element,e)}_destroyElement(){this._element.remove(),de.trigger(this._element,J7),this.dispose()}static jQueryInterface(t){return this.each(function(){const e=Kp.getOrCreateInstance(this);if(typeof t=="string"){if(e[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);e[t](this)}})}}Gp(Kp,"close");As(Kp);const tB="button",nB="bs.button",iB=`.${nB}`,sB=".data-api",rB="active",oT='[data-bs-toggle="button"]',oB=`click${iB}${sB}`;let TR=class SR extends ir{static get NAME(){return tB}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle(rB))}static jQueryInterface(t){return this.each(function(){const e=SR.getOrCreateInstance(this);t==="toggle"&&e[t]()})}};de.on(document,oB,oT,i=>{i.preventDefault();const t=i.target.closest(oT);TR.getOrCreateInstance(t).toggle()});As(TR);const aB="swipe",Eu=".bs.swipe",lB=`touchstart${Eu}`,cB=`touchmove${Eu}`,uB=`touchend${Eu}`,dB=`pointerdown${Eu}`,hB=`pointerup${Eu}`,fB="touch",mB="pen",gB="pointer-event",pB=40,bB={endCallback:null,leftCallback:null,rightCallback:null},wB={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class Ug extends Zh{constructor(t,e){super(),this._element=t,!(!t||!Ug.isSupported())&&(this._config=this._getConfig(e),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return bB}static get DefaultType(){return wB}static get NAME(){return aB}dispose(){de.off(this._element,Eu)}_start(t){if(!this._supportPointerEvents){this._deltaX=t.touches[0].clientX;return}this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX)}_end(t){this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX-this._deltaX),this._handleSwipe(),ki(this._config.endCallback)}_move(t){this._deltaX=t.touches&&t.touches.length>1?0:t.touches[0].clientX-this._deltaX}_handleSwipe(){const t=Math.abs(this._deltaX);if(t<=pB)return;const e=t/this._deltaX;this._deltaX=0,e&&ki(e>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(de.on(this._element,dB,t=>this._start(t)),de.on(this._element,hB,t=>this._end(t)),this._element.classList.add(gB)):(de.on(this._element,lB,t=>this._start(t)),de.on(this._element,cB,t=>this._move(t)),de.on(this._element,uB,t=>this._end(t)))}_eventIsPointerPenTouch(t){return this._supportPointerEvents&&(t.pointerType===mB||t.pointerType===fB)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const vB="carousel",yB="bs.carousel",ya=`.${yB}`,AR=".data-api",_B="ArrowLeft",EB="ArrowRight",CB=500,bd="next",pc="prev",Rc="left",bg="right",xB=`slide${ya}`,Dv=`slid${ya}`,kB=`keydown${ya}`,TB=`mouseenter${ya}`,SB=`mouseleave${ya}`,AB=`dragstart${ya}`,PB=`load${ya}${AR}`,IB=`click${ya}${AR}`,PR="carousel",Rm="active",RB="slide",OB="carousel-item-end",NB="carousel-item-start",MB="carousel-item-next",LB="carousel-item-prev",IR=".active",RR=".carousel-item",VB=IR+RR,DB=".carousel-item img",BB=".carousel-indicators",FB="[data-bs-slide], [data-bs-slide-to]",$B='[data-bs-ride="carousel"]',zB={[_B]:bg,[EB]:Rc},jB={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},HB={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class Xh extends ir{constructor(t,e){super(t,e),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=He.findOne(BB,this._element),this._addEventListeners(),this._config.ride===PR&&this.cycle()}static get Default(){return jB}static get DefaultType(){return HB}static get NAME(){return vB}next(){this._slide(bd)}nextWhenVisible(){!document.hidden&&_u(this._element)&&this.next()}prev(){this._slide(pc)}pause(){this._isSliding&&gR(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){if(this._config.ride){if(this._isSliding){de.one(this._element,Dv,()=>this.cycle());return}this.cycle()}}to(t){const e=this._getItems();if(t>e.length-1||t<0)return;if(this._isSliding){de.one(this._element,Dv,()=>this.to(t));return}const n=this._getItemIndex(this._getActive());if(n===t)return;const s=t>n?bd:pc;this._slide(s,e[t])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(t){return t.defaultInterval=t.interval,t}_addEventListeners(){this._config.keyboard&&de.on(this._element,kB,t=>this._keydown(t)),this._config.pause==="hover"&&(de.on(this._element,TB,()=>this.pause()),de.on(this._element,SB,()=>this._maybeEnableCycle())),this._config.touch&&Ug.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const n of He.find(DB,this._element))de.on(n,AB,s=>s.preventDefault());const e={leftCallback:()=>this._slide(this._directionToOrder(Rc)),rightCallback:()=>this._slide(this._directionToOrder(bg)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),CB+this._config.interval))}};this._swipeHelper=new Ug(this._element,e)}_keydown(t){if(/input|textarea/i.test(t.target.tagName))return;const e=zB[t.key];e&&(t.preventDefault(),this._slide(this._directionToOrder(e)))}_getItemIndex(t){return this._getItems().indexOf(t)}_setActiveIndicatorElement(t){if(!this._indicatorsElement)return;const e=He.findOne(IR,this._indicatorsElement);e.classList.remove(Rm),e.removeAttribute("aria-current");const n=He.findOne(`[data-bs-slide-to="${t}"]`,this._indicatorsElement);n&&(n.classList.add(Rm),n.setAttribute("aria-current","true"))}_updateInterval(){const t=this._activeElement||this._getActive();if(!t)return;const e=Number.parseInt(t.getAttribute("data-bs-interval"),10);this._config.interval=e||this._config.defaultInterval}_slide(t,e=null){if(this._isSliding)return;const n=this._getActive(),s=t===bd,r=e||k_(this._getItems(),n,s,this._config.wrap);if(r===n)return;const o=this._getItemIndex(r),a=p=>de.trigger(this._element,p,{relatedTarget:r,direction:this._orderToDirection(t),from:this._getItemIndex(n),to:o});if(a(xB).defaultPrevented||!n||!r)return;const u=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(o),this._activeElement=r;const h=s?NB:OB,f=s?MB:LB;r.classList.add(f),Yh(r),n.classList.add(h),r.classList.add(h);const g=()=>{r.classList.remove(h,f),r.classList.add(Rm),n.classList.remove(Rm,f,h),this._isSliding=!1,a(Dv)};this._queueCallback(g,n,this._isAnimated()),u&&this.cycle()}_isAnimated(){return this._element.classList.contains(RB)}_getActive(){return He.findOne(VB,this._element)}_getItems(){return He.find(RR,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(t){return _s()?t===Rc?pc:bd:t===Rc?bd:pc}_orderToDirection(t){return _s()?t===pc?Rc:bg:t===pc?bg:Rc}static jQueryInterface(t){return this.each(function(){const e=Xh.getOrCreateInstance(this,t);if(typeof t=="number"){e.to(t);return}if(typeof t=="string"){if(e[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);e[t]()}})}}de.on(document,IB,FB,function(i){const t=He.getElementFromSelector(this);if(!t||!t.classList.contains(PR))return;i.preventDefault();const e=Xh.getOrCreateInstance(t),n=this.getAttribute("data-bs-slide-to");if(n){e.to(n),e._maybeEnableCycle();return}if(io.getDataAttribute(this,"slide")==="next"){e.next(),e._maybeEnableCycle();return}e.prev(),e._maybeEnableCycle()});de.on(window,PB,()=>{const i=He.find($B);for(const t of i)Xh.getOrCreateInstance(t)});As(Xh);const UB="collapse",WB="bs.collapse",Jh=`.${WB}`,qB=".data-api",GB=`show${Jh}`,KB=`shown${Jh}`,YB=`hide${Jh}`,ZB=`hidden${Jh}`,XB=`click${Jh}${qB}`,Bv="show",$c="collapse",Om="collapsing",JB="collapsed",QB=`:scope .${$c} .${$c}`,eF="collapse-horizontal",tF="width",nF="height",iF=".collapse.show, .collapse.collapsing",N1='[data-bs-toggle="collapse"]',sF={parent:null,toggle:!0},rF={parent:"(null|element)",toggle:"boolean"};class vh extends ir{constructor(t,e){super(t,e),this._isTransitioning=!1,this._triggerArray=[];const n=He.find(N1);for(const s of n){const r=He.getSelectorFromElement(s),o=He.find(r).filter(a=>a===this._element);r!==null&&o.length&&this._triggerArray.push(s)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return sF}static get DefaultType(){return rF}static get NAME(){return UB}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let t=[];if(this._config.parent&&(t=this._getFirstLevelChildren(iF).filter(a=>a!==this._element).map(a=>vh.getOrCreateInstance(a,{toggle:!1}))),t.length&&t[0]._isTransitioning||de.trigger(this._element,GB).defaultPrevented)return;for(const a of t)a.hide();const n=this._getDimension();this._element.classList.remove($c),this._element.classList.add(Om),this._element.style[n]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const s=()=>{this._isTransitioning=!1,this._element.classList.remove(Om),this._element.classList.add($c,Bv),this._element.style[n]="",de.trigger(this._element,KB)},o=`scroll${n[0].toUpperCase()+n.slice(1)}`;this._queueCallback(s,this._element,!0),this._element.style[n]=`${this._element[o]}px`}hide(){if(this._isTransitioning||!this._isShown()||de.trigger(this._element,YB).defaultPrevented)return;const e=this._getDimension();this._element.style[e]=`${this._element.getBoundingClientRect()[e]}px`,Yh(this._element),this._element.classList.add(Om),this._element.classList.remove($c,Bv);for(const s of this._triggerArray){const r=He.getElementFromSelector(s);r&&!this._isShown(r)&&this._addAriaAndCollapsedClass([s],!1)}this._isTransitioning=!0;const n=()=>{this._isTransitioning=!1,this._element.classList.remove(Om),this._element.classList.add($c),de.trigger(this._element,ZB)};this._element.style[e]="",this._queueCallback(n,this._element,!0)}_isShown(t=this._element){return t.classList.contains(Bv)}_configAfterMerge(t){return t.toggle=!!t.toggle,t.parent=da(t.parent),t}_getDimension(){return this._element.classList.contains(eF)?tF:nF}_initializeChildren(){if(!this._config.parent)return;const t=this._getFirstLevelChildren(N1);for(const e of t){const n=He.getElementFromSelector(e);n&&this._addAriaAndCollapsedClass([e],this._isShown(n))}}_getFirstLevelChildren(t){const e=He.find(QB,this._config.parent);return He.find(t,this._config.parent).filter(n=>!e.includes(n))}_addAriaAndCollapsedClass(t,e){if(t.length)for(const n of t)n.classList.toggle(JB,!e),n.setAttribute("aria-expanded",e)}static jQueryInterface(t){const e={};return typeof t=="string"&&/show|hide/.test(t)&&(e.toggle=!1),this.each(function(){const n=vh.getOrCreateInstance(this,e);if(typeof t=="string"){if(typeof n[t]>"u")throw new TypeError(`No method named "${t}"`);n[t]()}})}}de.on(document,XB,N1,function(i){(i.target.tagName==="A"||i.delegateTarget&&i.delegateTarget.tagName==="A")&&i.preventDefault();for(const t of He.getMultipleElementsFromSelector(this))vh.getOrCreateInstance(t,{toggle:!1}).toggle()});As(vh);const aT="dropdown",oF="bs.dropdown",Tl=`.${oF}`,S_=".data-api",aF="Escape",lT="Tab",lF="ArrowUp",cT="ArrowDown",cF=2,uF=`hide${Tl}`,dF=`hidden${Tl}`,hF=`show${Tl}`,fF=`shown${Tl}`,OR=`click${Tl}${S_}`,NR=`keydown${Tl}${S_}`,mF=`keyup${Tl}${S_}`,Oc="show",gF="dropup",pF="dropend",bF="dropstart",wF="dropup-center",vF="dropdown-center",Qa='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',yF=`${Qa}.${Oc}`,wg=".dropdown-menu",_F=".navbar",EF=".navbar-nav",CF=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",xF=_s()?"top-end":"top-start",kF=_s()?"top-start":"top-end",TF=_s()?"bottom-end":"bottom-start",SF=_s()?"bottom-start":"bottom-end",AF=_s()?"left-start":"right-start",PF=_s()?"right-start":"left-start",IF="top",RF="bottom",OF={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},NF={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class xr extends ir{constructor(t,e){super(t,e),this._popper=null,this._parent=this._element.parentNode,this._menu=He.next(this._element,wg)[0]||He.prev(this._element,wg)[0]||He.findOne(wg,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return OF}static get DefaultType(){return NF}static get NAME(){return aT}toggle(){return this._isShown()?this.hide():this.show()}show(){if(ha(this._element)||this._isShown())return;const t={relatedTarget:this._element};if(!de.trigger(this._element,hF,t).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(EF))for(const n of[].concat(...document.body.children))de.on(n,"mouseover",Hg);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(Oc),this._element.classList.add(Oc),de.trigger(this._element,fF,t)}}hide(){if(ha(this._element)||!this._isShown())return;const t={relatedTarget:this._element};this._completeHide(t)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(t){if(!de.trigger(this._element,uF,t).defaultPrevented){if("ontouchstart"in document.documentElement)for(const n of[].concat(...document.body.children))de.off(n,"mouseover",Hg);this._popper&&this._popper.destroy(),this._menu.classList.remove(Oc),this._element.classList.remove(Oc),this._element.setAttribute("aria-expanded","false"),io.removeDataAttribute(this._menu,"popper"),de.trigger(this._element,dF,t)}}_getConfig(t){if(t=super._getConfig(t),typeof t.reference=="object"&&!no(t.reference)&&typeof t.reference.getBoundingClientRect!="function")throw new TypeError(`${aT.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return t}_createPopper(){if(typeof fR>"u")throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let t=this._element;this._config.reference==="parent"?t=this._parent:no(this._config.reference)?t=da(this._config.reference):typeof this._config.reference=="object"&&(t=this._config.reference);const e=this._getPopperConfig();this._popper=x_(t,this._menu,e)}_isShown(){return this._menu.classList.contains(Oc)}_getPlacement(){const t=this._parent;if(t.classList.contains(pF))return AF;if(t.classList.contains(bF))return PF;if(t.classList.contains(wF))return IF;if(t.classList.contains(vF))return RF;const e=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return t.classList.contains(gF)?e?kF:xF:e?SF:TF}_detectNavbar(){return this._element.closest(_F)!==null}_getOffset(){const{offset:t}=this._config;return typeof t=="string"?t.split(",").map(e=>Number.parseInt(e,10)):typeof t=="function"?e=>t(e,this._element):t}_getPopperConfig(){const t={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(io.setDataAttribute(this._menu,"popper","static"),t.modifiers=[{name:"applyStyles",enabled:!1}]),{...t,...ki(this._config.popperConfig,[t])}}_selectMenuItem({key:t,target:e}){const n=He.find(CF,this._menu).filter(s=>_u(s));n.length&&k_(n,e,t===cT,!n.includes(e)).focus()}static jQueryInterface(t){return this.each(function(){const e=xr.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof e[t]>"u")throw new TypeError(`No method named "${t}"`);e[t]()}})}static clearMenus(t){if(t.button===cF||t.type==="keyup"&&t.key!==lT)return;const e=He.find(yF);for(const n of e){const s=xr.getInstance(n);if(!s||s._config.autoClose===!1)continue;const r=t.composedPath(),o=r.includes(s._menu);if(r.includes(s._element)||s._config.autoClose==="inside"&&!o||s._config.autoClose==="outside"&&o||s._menu.contains(t.target)&&(t.type==="keyup"&&t.key===lT||/input|select|option|textarea|form/i.test(t.target.tagName)))continue;const a={relatedTarget:s._element};t.type==="click"&&(a.clickEvent=t),s._completeHide(a)}}static dataApiKeydownHandler(t){const e=/input|textarea/i.test(t.target.tagName),n=t.key===aF,s=[lF,cT].includes(t.key);if(!s&&!n||e&&!n)return;t.preventDefault();const r=this.matches(Qa)?this:He.prev(this,Qa)[0]||He.next(this,Qa)[0]||He.findOne(Qa,t.delegateTarget.parentNode),o=xr.getOrCreateInstance(r);if(s){t.stopPropagation(),o.show(),o._selectMenuItem(t);return}o._isShown()&&(t.stopPropagation(),o.hide(),r.focus())}}de.on(document,NR,Qa,xr.dataApiKeydownHandler);de.on(document,NR,wg,xr.dataApiKeydownHandler);de.on(document,OR,xr.clearMenus);de.on(document,mF,xr.clearMenus);de.on(document,OR,Qa,function(i){i.preventDefault(),xr.getOrCreateInstance(this).toggle()});As(xr);const MR="backdrop",MF="fade",uT="show",dT=`mousedown.bs.${MR}`,LF={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},VF={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class LR extends Zh{constructor(t){super(),this._config=this._getConfig(t),this._isAppended=!1,this._element=null}static get Default(){return LF}static get DefaultType(){return VF}static get NAME(){return MR}show(t){if(!this._config.isVisible){ki(t);return}this._append();const e=this._getElement();this._config.isAnimated&&Yh(e),e.classList.add(uT),this._emulateAnimation(()=>{ki(t)})}hide(t){if(!this._config.isVisible){ki(t);return}this._getElement().classList.remove(uT),this._emulateAnimation(()=>{this.dispose(),ki(t)})}dispose(){this._isAppended&&(de.off(this._element,dT),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const t=document.createElement("div");t.className=this._config.className,this._config.isAnimated&&t.classList.add(MF),this._element=t}return this._element}_configAfterMerge(t){return t.rootElement=da(t.rootElement),t}_append(){if(this._isAppended)return;const t=this._getElement();this._config.rootElement.append(t),de.on(t,dT,()=>{ki(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(t){wR(t,this._getElement(),this._config.isAnimated)}}const DF="focustrap",BF="bs.focustrap",Wg=`.${BF}`,FF=`focusin${Wg}`,$F=`keydown.tab${Wg}`,zF="Tab",jF="forward",hT="backward",HF={autofocus:!0,trapElement:null},UF={autofocus:"boolean",trapElement:"element"};class VR extends Zh{constructor(t){super(),this._config=this._getConfig(t),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return HF}static get DefaultType(){return UF}static get NAME(){return DF}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),de.off(document,Wg),de.on(document,FF,t=>this._handleFocusin(t)),de.on(document,$F,t=>this._handleKeydown(t)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,de.off(document,Wg))}_handleFocusin(t){const{trapElement:e}=this._config;if(t.target===document||t.target===e||e.contains(t.target))return;const n=He.focusableChildren(e);n.length===0?e.focus():this._lastTabNavDirection===hT?n[n.length-1].focus():n[0].focus()}_handleKeydown(t){t.key===zF&&(this._lastTabNavDirection=t.shiftKey?hT:jF)}}const fT=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",mT=".sticky-top",Nm="padding-right",gT="margin-right";class M1{constructor(){this._element=document.body}getWidth(){const t=document.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}hide(){const t=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,Nm,e=>e+t),this._setElementAttributes(fT,Nm,e=>e+t),this._setElementAttributes(mT,gT,e=>e-t)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,Nm),this._resetElementAttributes(fT,Nm),this._resetElementAttributes(mT,gT)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(t,e,n){const s=this.getWidth(),r=o=>{if(o!==this._element&&window.innerWidth>o.clientWidth+s)return;this._saveInitialAttribute(o,e);const a=window.getComputedStyle(o).getPropertyValue(e);o.style.setProperty(e,`${n(Number.parseFloat(a))}px`)};this._applyManipulationCallback(t,r)}_saveInitialAttribute(t,e){const n=t.style.getPropertyValue(e);n&&io.setDataAttribute(t,e,n)}_resetElementAttributes(t,e){const n=s=>{const r=io.getDataAttribute(s,e);if(r===null){s.style.removeProperty(e);return}io.removeDataAttribute(s,e),s.style.setProperty(e,r)};this._applyManipulationCallback(t,n)}_applyManipulationCallback(t,e){if(no(t)){e(t);return}for(const n of He.find(t,this._element))e(n)}}const WF="modal",qF="bs.modal",Es=`.${qF}`,GF=".data-api",KF="Escape",YF=`hide${Es}`,ZF=`hidePrevented${Es}`,DR=`hidden${Es}`,BR=`show${Es}`,XF=`shown${Es}`,JF=`resize${Es}`,QF=`click.dismiss${Es}`,e8=`mousedown.dismiss${Es}`,t8=`keydown.dismiss${Es}`,n8=`click${Es}${GF}`,pT="modal-open",i8="fade",bT="show",Fv="modal-static",s8=".modal.show",r8=".modal-dialog",o8=".modal-body",a8='[data-bs-toggle="modal"]',l8={backdrop:!0,focus:!0,keyboard:!0},c8={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class Js extends ir{constructor(t,e){super(t,e),this._dialog=He.findOne(r8,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new M1,this._addEventListeners()}static get Default(){return l8}static get DefaultType(){return c8}static get NAME(){return WF}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){this._isShown||this._isTransitioning||de.trigger(this._element,BR,{relatedTarget:t}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(pT),this._adjustDialog(),this._backdrop.show(()=>this._showElement(t)))}hide(){!this._isShown||this._isTransitioning||de.trigger(this._element,YF).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(bT),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){de.off(window,Es),de.off(this._dialog,Es),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new LR({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new VR({trapElement:this._element})}_showElement(t){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const e=He.findOne(o8,this._dialog);e&&(e.scrollTop=0),Yh(this._element),this._element.classList.add(bT);const n=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,de.trigger(this._element,XF,{relatedTarget:t})};this._queueCallback(n,this._dialog,this._isAnimated())}_addEventListeners(){de.on(this._element,t8,t=>{if(t.key===KF){if(this._config.keyboard){this.hide();return}this._triggerBackdropTransition()}}),de.on(window,JF,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),de.on(this._element,e8,t=>{de.one(this._element,QF,e=>{if(!(this._element!==t.target||this._element!==e.target)){if(this._config.backdrop==="static"){this._triggerBackdropTransition();return}this._config.backdrop&&this.hide()}})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(pT),this._resetAdjustments(),this._scrollBar.reset(),de.trigger(this._element,DR)})}_isAnimated(){return this._element.classList.contains(i8)}_triggerBackdropTransition(){if(de.trigger(this._element,ZF).defaultPrevented)return;const e=this._element.scrollHeight>document.documentElement.clientHeight,n=this._element.style.overflowY;n==="hidden"||this._element.classList.contains(Fv)||(e||(this._element.style.overflowY="hidden"),this._element.classList.add(Fv),this._queueCallback(()=>{this._element.classList.remove(Fv),this._queueCallback(()=>{this._element.style.overflowY=n},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const t=this._element.scrollHeight>document.documentElement.clientHeight,e=this._scrollBar.getWidth(),n=e>0;if(n&&!t){const s=_s()?"paddingLeft":"paddingRight";this._element.style[s]=`${e}px`}if(!n&&t){const s=_s()?"paddingRight":"paddingLeft";this._element.style[s]=`${e}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(t,e){return this.each(function(){const n=Js.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof n[t]>"u")throw new TypeError(`No method named "${t}"`);n[t](e)}})}}de.on(document,n8,a8,function(i){const t=He.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&i.preventDefault(),de.one(t,BR,s=>{s.defaultPrevented||de.one(t,DR,()=>{_u(this)&&this.focus()})});const e=He.findOne(s8);e&&Js.getInstance(e).hide(),Js.getOrCreateInstance(t).toggle(this)});Gp(Js);As(Js);const u8="offcanvas",d8="bs.offcanvas",bo=`.${d8}`,FR=".data-api",h8=`load${bo}${FR}`,f8="Escape",wT="show",vT="showing",yT="hiding",m8="offcanvas-backdrop",$R=".offcanvas.show",g8=`show${bo}`,p8=`shown${bo}`,b8=`hide${bo}`,_T=`hidePrevented${bo}`,zR=`hidden${bo}`,w8=`resize${bo}`,v8=`click${bo}${FR}`,y8=`keydown.dismiss${bo}`,_8='[data-bs-toggle="offcanvas"]',E8={backdrop:!0,keyboard:!0,scroll:!1},C8={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class fa extends ir{constructor(t,e){super(t,e),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return E8}static get DefaultType(){return C8}static get NAME(){return u8}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){if(this._isShown||de.trigger(this._element,g8,{relatedTarget:t}).defaultPrevented)return;this._isShown=!0,this._backdrop.show(),this._config.scroll||new M1().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(vT);const n=()=>{(!this._config.scroll||this._config.backdrop)&&this._focustrap.activate(),this._element.classList.add(wT),this._element.classList.remove(vT),de.trigger(this._element,p8,{relatedTarget:t})};this._queueCallback(n,this._element,!0)}hide(){if(!this._isShown||de.trigger(this._element,b8).defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(yT),this._backdrop.hide();const e=()=>{this._element.classList.remove(wT,yT),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new M1().reset(),de.trigger(this._element,zR)};this._queueCallback(e,this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const t=()=>{if(this._config.backdrop==="static"){de.trigger(this._element,_T);return}this.hide()},e=!!this._config.backdrop;return new LR({className:m8,isVisible:e,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:e?t:null})}_initializeFocusTrap(){return new VR({trapElement:this._element})}_addEventListeners(){de.on(this._element,y8,t=>{if(t.key===f8){if(this._config.keyboard){this.hide();return}de.trigger(this._element,_T)}})}static jQueryInterface(t){return this.each(function(){const e=fa.getOrCreateInstance(this,t);if(typeof t=="string"){if(e[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);e[t](this)}})}}de.on(document,v8,_8,function(i){const t=He.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&i.preventDefault(),ha(this))return;de.one(t,zR,()=>{_u(this)&&this.focus()});const e=He.findOne($R);e&&e!==t&&fa.getInstance(e).hide(),fa.getOrCreateInstance(t).toggle(this)});de.on(window,h8,()=>{for(const i of He.find($R))fa.getOrCreateInstance(i).show()});de.on(window,w8,()=>{for(const i of He.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(i).position!=="fixed"&&fa.getOrCreateInstance(i).hide()});Gp(fa);As(fa);const x8=/^aria-[\w-]*$/i,jR={"*":["class","dir","id","lang","role",x8],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},k8=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),T8=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,S8=(i,t)=>{const e=i.nodeName.toLowerCase();return t.includes(e)?k8.has(e)?!!T8.test(i.nodeValue):!0:t.filter(n=>n instanceof RegExp).some(n=>n.test(e))};function A8(i,t,e){if(!i.length)return i;if(e&&typeof e=="function")return e(i);const s=new window.DOMParser().parseFromString(i,"text/html"),r=[].concat(...s.body.querySelectorAll("*"));for(const o of r){const a=o.nodeName.toLowerCase();if(!Object.keys(t).includes(a)){o.remove();continue}const l=[].concat(...o.attributes),u=[].concat(t["*"]||[],t[a]||[]);for(const h of l)S8(h,u)||o.removeAttribute(h.nodeName)}return s.body.innerHTML}const P8="TemplateFactory",I8={allowList:jR,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},R8={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},O8={entry:"(string|element|function|null)",selector:"(string|element)"};class N8 extends Zh{constructor(t){super(),this._config=this._getConfig(t)}static get Default(){return I8}static get DefaultType(){return R8}static get NAME(){return P8}getContent(){return Object.values(this._config.content).map(t=>this._resolvePossibleFunction(t)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(t){return this._checkContent(t),this._config.content={...this._config.content,...t},this}toHtml(){const t=document.createElement("div");t.innerHTML=this._maybeSanitize(this._config.template);for(const[s,r]of Object.entries(this._config.content))this._setContent(t,r,s);const e=t.children[0],n=this._resolvePossibleFunction(this._config.extraClass);return n&&e.classList.add(...n.split(" ")),e}_typeCheckConfig(t){super._typeCheckConfig(t),this._checkContent(t.content)}_checkContent(t){for(const[e,n]of Object.entries(t))super._typeCheckConfig({selector:e,entry:n},O8)}_setContent(t,e,n){const s=He.findOne(n,t);if(s){if(e=this._resolvePossibleFunction(e),!e){s.remove();return}if(no(e)){this._putElementInTemplate(da(e),s);return}if(this._config.html){s.innerHTML=this._maybeSanitize(e);return}s.textContent=e}}_maybeSanitize(t){return this._config.sanitize?A8(t,this._config.allowList,this._config.sanitizeFn):t}_resolvePossibleFunction(t){return ki(t,[this])}_putElementInTemplate(t,e){if(this._config.html){e.innerHTML="",e.append(t);return}e.textContent=t.textContent}}const M8="tooltip",L8=new Set(["sanitize","allowList","sanitizeFn"]),$v="fade",V8="modal",Mm="show",D8=".tooltip-inner",ET=`.${V8}`,CT="hide.bs.modal",wd="hover",zv="focus",B8="click",F8="manual",$8="hide",z8="hidden",j8="show",H8="shown",U8="inserted",W8="click",q8="focusin",G8="focusout",K8="mouseenter",Y8="mouseleave",Z8={AUTO:"auto",TOP:"top",RIGHT:_s()?"left":"right",BOTTOM:"bottom",LEFT:_s()?"right":"left"},X8={allowList:jR,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},J8={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class Cu extends ir{constructor(t,e){if(typeof fR>"u")throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(t,e),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return X8}static get DefaultType(){return J8}static get NAME(){return M8}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){if(this._isEnabled){if(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()){this._leave();return}this._enter()}}dispose(){clearTimeout(this._timeout),de.off(this._element.closest(ET),CT,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!(this._isWithContent()&&this._isEnabled))return;const t=de.trigger(this._element,this.constructor.eventName(j8)),n=(pR(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(t.defaultPrevented||!n)return;this._disposePopper();const s=this._getTipElement();this._element.setAttribute("aria-describedby",s.getAttribute("id"));const{container:r}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(r.append(s),de.trigger(this._element,this.constructor.eventName(U8))),this._popper=this._createPopper(s),s.classList.add(Mm),"ontouchstart"in document.documentElement)for(const a of[].concat(...document.body.children))de.on(a,"mouseover",Hg);const o=()=>{de.trigger(this._element,this.constructor.eventName(H8)),this._isHovered===!1&&this._leave(),this._isHovered=!1};this._queueCallback(o,this.tip,this._isAnimated())}hide(){if(!this._isShown()||de.trigger(this._element,this.constructor.eventName($8)).defaultPrevented)return;if(this._getTipElement().classList.remove(Mm),"ontouchstart"in document.documentElement)for(const s of[].concat(...document.body.children))de.off(s,"mouseover",Hg);this._activeTrigger[B8]=!1,this._activeTrigger[zv]=!1,this._activeTrigger[wd]=!1,this._isHovered=null;const n=()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),de.trigger(this._element,this.constructor.eventName(z8)))};this._queueCallback(n,this.tip,this._isAnimated())}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(t){const e=this._getTemplateFactory(t).toHtml();if(!e)return null;e.classList.remove($v,Mm),e.classList.add(`bs-${this.constructor.NAME}-auto`);const n=B7(this.constructor.NAME).toString();return e.setAttribute("id",n),this._isAnimated()&&e.classList.add($v),e}setContent(t){this._newContent=t,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(t){return this._templateFactory?this._templateFactory.changeContent(t):this._templateFactory=new N8({...this._config,content:t,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[D8]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(t){return this.constructor.getOrCreateInstance(t.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains($v)}_isShown(){return this.tip&&this.tip.classList.contains(Mm)}_createPopper(t){const e=ki(this._config.placement,[this,t,this._element]),n=Z8[e.toUpperCase()];return x_(this._element,t,this._getPopperConfig(n))}_getOffset(){const{offset:t}=this._config;return typeof t=="string"?t.split(",").map(e=>Number.parseInt(e,10)):typeof t=="function"?e=>t(e,this._element):t}_resolvePossibleFunction(t){return ki(t,[this._element])}_getPopperConfig(t){const e={placement:t,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:n=>{this._getTipElement().setAttribute("data-popper-placement",n.state.placement)}}]};return{...e,...ki(this._config.popperConfig,[e])}}_setListeners(){const t=this._config.trigger.split(" ");for(const e of t)if(e==="click")de.on(this._element,this.constructor.eventName(W8),this._config.selector,n=>{this._initializeOnDelegatedTarget(n).toggle()});else if(e!==F8){const n=e===wd?this.constructor.eventName(K8):this.constructor.eventName(q8),s=e===wd?this.constructor.eventName(Y8):this.constructor.eventName(G8);de.on(this._element,n,this._config.selector,r=>{const o=this._initializeOnDelegatedTarget(r);o._activeTrigger[r.type==="focusin"?zv:wd]=!0,o._enter()}),de.on(this._element,s,this._config.selector,r=>{const o=this._initializeOnDelegatedTarget(r);o._activeTrigger[r.type==="focusout"?zv:wd]=o._element.contains(r.relatedTarget),o._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},de.on(this._element.closest(ET),CT,this._hideModalHandler)}_fixTitle(){const t=this._element.getAttribute("title");t&&(!this._element.getAttribute("aria-label")&&!this._element.textContent.trim()&&this._element.setAttribute("aria-label",t),this._element.setAttribute("data-bs-original-title",t),this._element.removeAttribute("title"))}_enter(){if(this._isShown()||this._isHovered){this._isHovered=!0;return}this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show)}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(t,e){clearTimeout(this._timeout),this._timeout=setTimeout(t,e)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(t){const e=io.getDataAttributes(this._element);for(const n of Object.keys(e))L8.has(n)&&delete e[n];return t={...e,...typeof t=="object"&&t?t:{}},t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t.container=t.container===!1?document.body:da(t.container),typeof t.delay=="number"&&(t.delay={show:t.delay,hide:t.delay}),typeof t.title=="number"&&(t.title=t.title.toString()),typeof t.content=="number"&&(t.content=t.content.toString()),t}_getDelegateConfig(){const t={};for(const[e,n]of Object.entries(this._config))this.constructor.Default[e]!==n&&(t[e]=n);return t.selector=!1,t.trigger="manual",t}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(t){return this.each(function(){const e=Cu.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof e[t]>"u")throw new TypeError(`No method named "${t}"`);e[t]()}})}}As(Cu);const Q8="popover",e9=".popover-header",t9=".popover-body",n9={...Cu.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},i9={...Cu.DefaultType,content:"(null|string|element|function)"};class A_ extends Cu{static get Default(){return n9}static get DefaultType(){return i9}static get NAME(){return Q8}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[e9]:this._getTitle(),[t9]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(t){return this.each(function(){const e=A_.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof e[t]>"u")throw new TypeError(`No method named "${t}"`);e[t]()}})}}As(A_);const s9="scrollspy",r9="bs.scrollspy",P_=`.${r9}`,o9=".data-api",a9=`activate${P_}`,xT=`click${P_}`,l9=`load${P_}${o9}`,c9="dropdown-item",bc="active",u9='[data-bs-spy="scroll"]',jv="[href]",d9=".nav, .list-group",kT=".nav-link",h9=".nav-item",f9=".list-group-item",m9=`${kT}, ${h9} > ${kT}, ${f9}`,g9=".dropdown",p9=".dropdown-toggle",b9={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},w9={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class Yp extends ir{constructor(t,e){super(t,e),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return b9}static get DefaultType(){return w9}static get NAME(){return s9}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const t of this._observableSections.values())this._observer.observe(t)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(t){return t.target=da(t.target)||document.body,t.rootMargin=t.offset?`${t.offset}px 0px -30%`:t.rootMargin,typeof t.threshold=="string"&&(t.threshold=t.threshold.split(",").map(e=>Number.parseFloat(e))),t}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(de.off(this._config.target,xT),de.on(this._config.target,xT,jv,t=>{const e=this._observableSections.get(t.target.hash);if(e){t.preventDefault();const n=this._rootElement||window,s=e.offsetTop-this._element.offsetTop;if(n.scrollTo){n.scrollTo({top:s,behavior:"smooth"});return}n.scrollTop=s}}))}_getNewObserver(){const t={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(e=>this._observerCallback(e),t)}_observerCallback(t){const e=o=>this._targetLinks.get(`#${o.target.id}`),n=o=>{this._previousScrollData.visibleEntryTop=o.target.offsetTop,this._process(e(o))},s=(this._rootElement||document.documentElement).scrollTop,r=s>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=s;for(const o of t){if(!o.isIntersecting){this._activeTarget=null,this._clearActiveClass(e(o));continue}const a=o.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(r&&a){if(n(o),!s)return;continue}!r&&!a&&n(o)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const t=He.find(jv,this._config.target);for(const e of t){if(!e.hash||ha(e))continue;const n=He.findOne(decodeURI(e.hash),this._element);_u(n)&&(this._targetLinks.set(decodeURI(e.hash),e),this._observableSections.set(e.hash,n))}}_process(t){this._activeTarget!==t&&(this._clearActiveClass(this._config.target),this._activeTarget=t,t.classList.add(bc),this._activateParents(t),de.trigger(this._element,a9,{relatedTarget:t}))}_activateParents(t){if(t.classList.contains(c9)){He.findOne(p9,t.closest(g9)).classList.add(bc);return}for(const e of He.parents(t,d9))for(const n of He.prev(e,m9))n.classList.add(bc)}_clearActiveClass(t){t.classList.remove(bc);const e=He.find(`${jv}.${bc}`,t);for(const n of e)n.classList.remove(bc)}static jQueryInterface(t){return this.each(function(){const e=Yp.getOrCreateInstance(this,t);if(typeof t=="string"){if(e[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);e[t]()}})}}de.on(window,l9,()=>{for(const i of He.find(u9))Yp.getOrCreateInstance(i)});As(Yp);const v9="tab",y9="bs.tab",Sl=`.${y9}`,_9=`hide${Sl}`,E9=`hidden${Sl}`,C9=`show${Sl}`,x9=`shown${Sl}`,k9=`click${Sl}`,T9=`keydown${Sl}`,S9=`load${Sl}`,A9="ArrowLeft",TT="ArrowRight",P9="ArrowUp",ST="ArrowDown",Hv="Home",AT="End",el="active",PT="fade",Uv="show",I9="dropdown",HR=".dropdown-toggle",R9=".dropdown-menu",Wv=`:not(${HR})`,O9='.list-group, .nav, [role="tablist"]',N9=".nav-item, .list-group-item",M9=`.nav-link${Wv}, .list-group-item${Wv}, [role="tab"]${Wv}`,UR='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',qv=`${M9}, ${UR}`,L9=`.${el}[data-bs-toggle="tab"], .${el}[data-bs-toggle="pill"], .${el}[data-bs-toggle="list"]`;class su extends ir{constructor(t){super(t),this._parent=this._element.closest(O9),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),de.on(this._element,T9,e=>this._keydown(e)))}static get NAME(){return v9}show(){const t=this._element;if(this._elemIsActive(t))return;const e=this._getActiveElem(),n=e?de.trigger(e,_9,{relatedTarget:t}):null;de.trigger(t,C9,{relatedTarget:e}).defaultPrevented||n&&n.defaultPrevented||(this._deactivate(e,t),this._activate(t,e))}_activate(t,e){if(!t)return;t.classList.add(el),this._activate(He.getElementFromSelector(t));const n=()=>{if(t.getAttribute("role")!=="tab"){t.classList.add(Uv);return}t.removeAttribute("tabindex"),t.setAttribute("aria-selected",!0),this._toggleDropDown(t,!0),de.trigger(t,x9,{relatedTarget:e})};this._queueCallback(n,t,t.classList.contains(PT))}_deactivate(t,e){if(!t)return;t.classList.remove(el),t.blur(),this._deactivate(He.getElementFromSelector(t));const n=()=>{if(t.getAttribute("role")!=="tab"){t.classList.remove(Uv);return}t.setAttribute("aria-selected",!1),t.setAttribute("tabindex","-1"),this._toggleDropDown(t,!1),de.trigger(t,E9,{relatedTarget:e})};this._queueCallback(n,t,t.classList.contains(PT))}_keydown(t){if(![A9,TT,P9,ST,Hv,AT].includes(t.key))return;t.stopPropagation(),t.preventDefault();const e=this._getChildren().filter(s=>!ha(s));let n;if([Hv,AT].includes(t.key))n=e[t.key===Hv?0:e.length-1];else{const s=[TT,ST].includes(t.key);n=k_(e,t.target,s,!0)}n&&(n.focus({preventScroll:!0}),su.getOrCreateInstance(n).show())}_getChildren(){return He.find(qv,this._parent)}_getActiveElem(){return this._getChildren().find(t=>this._elemIsActive(t))||null}_setInitialAttributes(t,e){this._setAttributeIfNotExists(t,"role","tablist");for(const n of e)this._setInitialAttributesOnChild(n)}_setInitialAttributesOnChild(t){t=this._getInnerElement(t);const e=this._elemIsActive(t),n=this._getOuterElement(t);t.setAttribute("aria-selected",e),n!==t&&this._setAttributeIfNotExists(n,"role","presentation"),e||t.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(t,"role","tab"),this._setInitialAttributesOnTargetPanel(t)}_setInitialAttributesOnTargetPanel(t){const e=He.getElementFromSelector(t);e&&(this._setAttributeIfNotExists(e,"role","tabpanel"),t.id&&this._setAttributeIfNotExists(e,"aria-labelledby",`${t.id}`))}_toggleDropDown(t,e){const n=this._getOuterElement(t);if(!n.classList.contains(I9))return;const s=(r,o)=>{const a=He.findOne(r,n);a&&a.classList.toggle(o,e)};s(HR,el),s(R9,Uv),n.setAttribute("aria-expanded",e)}_setAttributeIfNotExists(t,e,n){t.hasAttribute(e)||t.setAttribute(e,n)}_elemIsActive(t){return t.classList.contains(el)}_getInnerElement(t){return t.matches(qv)?t:He.findOne(qv,t)}_getOuterElement(t){return t.closest(N9)||t}static jQueryInterface(t){return this.each(function(){const e=su.getOrCreateInstance(this);if(typeof t=="string"){if(e[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);e[t]()}})}}de.on(document,k9,UR,function(i){["A","AREA"].includes(this.tagName)&&i.preventDefault(),!ha(this)&&su.getOrCreateInstance(this).show()});de.on(window,S9,()=>{for(const i of He.find(L9))su.getOrCreateInstance(i)});As(su);const V9="toast",D9="bs.toast",_a=`.${D9}`,B9=`mouseover${_a}`,F9=`mouseout${_a}`,$9=`focusin${_a}`,z9=`focusout${_a}`,j9=`hide${_a}`,H9=`hidden${_a}`,U9=`show${_a}`,W9=`shown${_a}`,q9="fade",IT="hide",Lm="show",Vm="showing",G9={animation:"boolean",autohide:"boolean",delay:"number"},K9={animation:!0,autohide:!0,delay:5e3};let I_=class WR extends ir{constructor(t,e){super(t,e),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return K9}static get DefaultType(){return G9}static get NAME(){return V9}show(){if(de.trigger(this._element,U9).defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add(q9);const e=()=>{this._element.classList.remove(Vm),de.trigger(this._element,W9),this._maybeScheduleHide()};this._element.classList.remove(IT),Yh(this._element),this._element.classList.add(Lm,Vm),this._queueCallback(e,this._element,this._config.animation)}hide(){if(!this.isShown()||de.trigger(this._element,j9).defaultPrevented)return;const e=()=>{this._element.classList.add(IT),this._element.classList.remove(Vm,Lm),de.trigger(this._element,H9)};this._element.classList.add(Vm),this._queueCallback(e,this._element,this._config.animation)}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(Lm),super.dispose()}isShown(){return this._element.classList.contains(Lm)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(t,e){switch(t.type){case"mouseover":case"mouseout":{this._hasMouseInteraction=e;break}case"focusin":case"focusout":{this._hasKeyboardInteraction=e;break}}if(e){this._clearTimeout();return}const n=t.relatedTarget;this._element===n||this._element.contains(n)||this._maybeScheduleHide()}_setListeners(){de.on(this._element,B9,t=>this._onInteraction(t,!0)),de.on(this._element,F9,t=>this._onInteraction(t,!1)),de.on(this._element,$9,t=>this._onInteraction(t,!0)),de.on(this._element,z9,t=>this._onInteraction(t,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(t){return this.each(function(){const e=WR.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof e[t]>"u")throw new TypeError(`No method named "${t}"`);e[t](this)}})}};Gp(I_);As(I_);var Dm={},Gv={exports:{}},vi={},Kv={exports:{}},Yv={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RT;function Y9(){return RT||(RT=1,function(i){function t(ae,le){var re=ae.length;ae.push(le);e:for(;0<re;){var j=re-1>>>1,ie=ae[j];if(0<s(ie,le))ae[j]=le,ae[re]=ie,re=j;else break e}}function e(ae){return ae.length===0?null:ae[0]}function n(ae){if(ae.length===0)return null;var le=ae[0],re=ae.pop();if(re!==le){ae[0]=re;e:for(var j=0,ie=ae.length,Ve=ie>>>1;j<Ve;){var Be=2*(j+1)-1,je=ae[Be],ze=Be+1,st=ae[ze];if(0>s(je,re))ze<ie&&0>s(st,je)?(ae[j]=st,ae[ze]=re,j=ze):(ae[j]=je,ae[Be]=re,j=Be);else if(ze<ie&&0>s(st,re))ae[j]=st,ae[ze]=re,j=ze;else break e}}return le}function s(ae,le){var re=ae.sortIndex-le.sortIndex;return re!==0?re:ae.id-le.id}if(typeof performance=="object"&&typeof performance.now=="function"){var r=performance;i.unstable_now=function(){return r.now()}}else{var o=Date,a=o.now();i.unstable_now=function(){return o.now()-a}}var l=[],u=[],h=1,f=null,g=3,p=!1,y=!1,E=!1,C=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function P(ae){for(var le=e(u);le!==null;){if(le.callback===null)n(u);else if(le.startTime<=ae)n(u),le.sortIndex=le.expirationTime,t(l,le);else break;le=e(u)}}function S(ae){if(E=!1,P(ae),!y)if(e(l)!==null)y=!0,ge(O);else{var le=e(u);le!==null&&pe(S,le.startTime-ae)}}function O(ae,le){y=!1,E&&(E=!1,k(L),L=-1),p=!0;var re=g;try{for(P(le),f=e(l);f!==null&&(!(f.expirationTime>le)||ae&&!U());){var j=f.callback;if(typeof j=="function"){f.callback=null,g=f.priorityLevel;var ie=j(f.expirationTime<=le);le=i.unstable_now(),typeof ie=="function"?f.callback=ie:f===e(l)&&n(l),P(le)}else n(l);f=e(l)}if(f!==null)var Ve=!0;else{var Be=e(u);Be!==null&&pe(S,Be.startTime-le),Ve=!1}return Ve}finally{f=null,g=re,p=!1}}var A=!1,N=null,L=-1,M=5,B=-1;function U(){return!(i.unstable_now()-B<M)}function q(){if(N!==null){var ae=i.unstable_now();B=ae;var le=!0;try{le=N(!0,ae)}finally{le?ee():(A=!1,N=null)}}else A=!1}var ee;if(typeof T=="function")ee=function(){T(q)};else if(typeof MessageChannel<"u"){var me=new MessageChannel,_e=me.port2;me.port1.onmessage=q,ee=function(){_e.postMessage(null)}}else ee=function(){C(q,0)};function ge(ae){N=ae,A||(A=!0,ee())}function pe(ae,le){L=C(function(){ae(i.unstable_now())},le)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(ae){ae.callback=null},i.unstable_continueExecution=function(){y||p||(y=!0,ge(O))},i.unstable_forceFrameRate=function(ae){0>ae||125<ae?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<ae?Math.floor(1e3/ae):5},i.unstable_getCurrentPriorityLevel=function(){return g},i.unstable_getFirstCallbackNode=function(){return e(l)},i.unstable_next=function(ae){switch(g){case 1:case 2:case 3:var le=3;break;default:le=g}var re=g;g=le;try{return ae()}finally{g=re}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(ae,le){switch(ae){case 1:case 2:case 3:case 4:case 5:break;default:ae=3}var re=g;g=ae;try{return le()}finally{g=re}},i.unstable_scheduleCallback=function(ae,le,re){var j=i.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?j+re:j):re=j,ae){case 1:var ie=-1;break;case 2:ie=250;break;case 5:ie=1073741823;break;case 4:ie=1e4;break;default:ie=5e3}return ie=re+ie,ae={id:h++,callback:le,priorityLevel:ae,startTime:re,expirationTime:ie,sortIndex:-1},re>j?(ae.sortIndex=re,t(u,ae),e(l)===null&&ae===e(u)&&(E?(k(L),L=-1):E=!0,pe(S,re-j))):(ae.sortIndex=ie,t(l,ae),y||p||(y=!0,ge(O))),ae},i.unstable_shouldYield=U,i.unstable_wrapCallback=function(ae){var le=g;return function(){var re=g;g=le;try{return ae.apply(this,arguments)}finally{g=re}}}}(Yv)),Yv}var OT;function Z9(){return OT||(OT=1,Kv.exports=Y9()),Kv.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NT;function X9(){if(NT)return vi;NT=1;var i=Hp(),t=Z9();function e(c){for(var d="https://reactjs.org/docs/error-decoder.html?invariant="+c,m=1;m<arguments.length;m++)d+="&args[]="+encodeURIComponent(arguments[m]);return"Minified React error #"+c+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,s={};function r(c,d){o(c,d),o(c+"Capture",d)}function o(c,d){for(s[c]=d,c=0;c<d.length;c++)n.add(d[c])}var a=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),l=Object.prototype.hasOwnProperty,u=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h={},f={};function g(c){return l.call(f,c)?!0:l.call(h,c)?!1:u.test(c)?f[c]=!0:(h[c]=!0,!1)}function p(c,d,m,w){if(m!==null&&m.type===0)return!1;switch(typeof d){case"function":case"symbol":return!0;case"boolean":return w?!1:m!==null?!m.acceptsBooleans:(c=c.toLowerCase().slice(0,5),c!=="data-"&&c!=="aria-");default:return!1}}function y(c,d,m,w){if(d===null||typeof d>"u"||p(c,d,m,w))return!0;if(w)return!1;if(m!==null)switch(m.type){case 3:return!d;case 4:return d===!1;case 5:return isNaN(d);case 6:return isNaN(d)||1>d}return!1}function E(c,d,m,w,_,x,I){this.acceptsBooleans=d===2||d===3||d===4,this.attributeName=w,this.attributeNamespace=_,this.mustUseProperty=m,this.propertyName=c,this.type=d,this.sanitizeURL=x,this.removeEmptyString=I}var C={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(c){C[c]=new E(c,0,!1,c,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(c){var d=c[0];C[d]=new E(d,1,!1,c[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(c){C[c]=new E(c,2,!1,c.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(c){C[c]=new E(c,2,!1,c,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(c){C[c]=new E(c,3,!1,c.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(c){C[c]=new E(c,3,!0,c,null,!1,!1)}),["capture","download"].forEach(function(c){C[c]=new E(c,4,!1,c,null,!1,!1)}),["cols","rows","size","span"].forEach(function(c){C[c]=new E(c,6,!1,c,null,!1,!1)}),["rowSpan","start"].forEach(function(c){C[c]=new E(c,5,!1,c.toLowerCase(),null,!1,!1)});var k=/[\-:]([a-z])/g;function T(c){return c[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(c){var d=c.replace(k,T);C[d]=new E(d,1,!1,c,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(c){var d=c.replace(k,T);C[d]=new E(d,1,!1,c,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(c){var d=c.replace(k,T);C[d]=new E(d,1,!1,c,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(c){C[c]=new E(c,1,!1,c.toLowerCase(),null,!1,!1)}),C.xlinkHref=new E("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(c){C[c]=new E(c,1,!1,c.toLowerCase(),null,!0,!0)});function P(c,d,m,w){var _=C.hasOwnProperty(d)?C[d]:null;(_!==null?_.type!==0:w||!(2<d.length)||d[0]!=="o"&&d[0]!=="O"||d[1]!=="n"&&d[1]!=="N")&&(y(d,m,_,w)&&(m=null),w||_===null?g(d)&&(m===null?c.removeAttribute(d):c.setAttribute(d,""+m)):_.mustUseProperty?c[_.propertyName]=m===null?_.type===3?!1:"":m:(d=_.attributeName,w=_.attributeNamespace,m===null?c.removeAttribute(d):(_=_.type,m=_===3||_===4&&m===!0?"":""+m,w?c.setAttributeNS(w,d,m):c.setAttribute(d,m))))}var S=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,O=Symbol.for("react.element"),A=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),L=Symbol.for("react.strict_mode"),M=Symbol.for("react.profiler"),B=Symbol.for("react.provider"),U=Symbol.for("react.context"),q=Symbol.for("react.forward_ref"),ee=Symbol.for("react.suspense"),me=Symbol.for("react.suspense_list"),_e=Symbol.for("react.memo"),ge=Symbol.for("react.lazy"),pe=Symbol.for("react.offscreen"),ae=Symbol.iterator;function le(c){return c===null||typeof c!="object"?null:(c=ae&&c[ae]||c["@@iterator"],typeof c=="function"?c:null)}var re=Object.assign,j;function ie(c){if(j===void 0)try{throw Error()}catch(m){var d=m.stack.trim().match(/\n( *(at )?)/);j=d&&d[1]||""}return`
`+j+c}var Ve=!1;function Be(c,d){if(!c||Ve)return"";Ve=!0;var m=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(d)if(d=function(){throw Error()},Object.defineProperty(d.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(d,[])}catch(X){var w=X}Reflect.construct(c,[],d)}else{try{d.call()}catch(X){w=X}c.call(d.prototype)}else{try{throw Error()}catch(X){w=X}c()}}catch(X){if(X&&w&&typeof X.stack=="string"){for(var _=X.stack.split(`
`),x=w.stack.split(`
`),I=_.length-1,V=x.length-1;1<=I&&0<=V&&_[I]!==x[V];)V--;for(;1<=I&&0<=V;I--,V--)if(_[I]!==x[V]){if(I!==1||V!==1)do if(I--,V--,0>V||_[I]!==x[V]){var $=`
`+_[I].replace(" at new "," at ");return c.displayName&&$.includes("<anonymous>")&&($=$.replace("<anonymous>",c.displayName)),$}while(1<=I&&0<=V);break}}}finally{Ve=!1,Error.prepareStackTrace=m}return(c=c?c.displayName||c.name:"")?ie(c):""}function je(c){switch(c.tag){case 5:return ie(c.type);case 16:return ie("Lazy");case 13:return ie("Suspense");case 19:return ie("SuspenseList");case 0:case 2:case 15:return c=Be(c.type,!1),c;case 11:return c=Be(c.type.render,!1),c;case 1:return c=Be(c.type,!0),c;default:return""}}function ze(c){if(c==null)return null;if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case N:return"Fragment";case A:return"Portal";case M:return"Profiler";case L:return"StrictMode";case ee:return"Suspense";case me:return"SuspenseList"}if(typeof c=="object")switch(c.$$typeof){case U:return(c.displayName||"Context")+".Consumer";case B:return(c._context.displayName||"Context")+".Provider";case q:var d=c.render;return c=c.displayName,c||(c=d.displayName||d.name||"",c=c!==""?"ForwardRef("+c+")":"ForwardRef"),c;case _e:return d=c.displayName||null,d!==null?d:ze(c.type)||"Memo";case ge:d=c._payload,c=c._init;try{return ze(c(d))}catch{}}return null}function st(c){var d=c.type;switch(c.tag){case 24:return"Cache";case 9:return(d.displayName||"Context")+".Consumer";case 10:return(d._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return c=d.render,c=c.displayName||c.name||"",d.displayName||(c!==""?"ForwardRef("+c+")":"ForwardRef");case 7:return"Fragment";case 5:return d;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ze(d);case 8:return d===L?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof d=="function")return d.displayName||d.name||null;if(typeof d=="string")return d}return null}function Je(c){switch(typeof c){case"boolean":case"number":case"string":case"undefined":return c;case"object":return c;default:return""}}function rt(c){var d=c.type;return(c=c.nodeName)&&c.toLowerCase()==="input"&&(d==="checkbox"||d==="radio")}function ut(c){var d=rt(c)?"checked":"value",m=Object.getOwnPropertyDescriptor(c.constructor.prototype,d),w=""+c[d];if(!c.hasOwnProperty(d)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var _=m.get,x=m.set;return Object.defineProperty(c,d,{configurable:!0,get:function(){return _.call(this)},set:function(I){w=""+I,x.call(this,I)}}),Object.defineProperty(c,d,{enumerable:m.enumerable}),{getValue:function(){return w},setValue:function(I){w=""+I},stopTracking:function(){c._valueTracker=null,delete c[d]}}}}function Zt(c){c._valueTracker||(c._valueTracker=ut(c))}function kn(c){if(!c)return!1;var d=c._valueTracker;if(!d)return!0;var m=d.getValue(),w="";return c&&(w=rt(c)?c.checked?"true":"false":c.value),c=w,c!==m?(d.setValue(c),!0):!1}function rs(c){if(c=c||(typeof document<"u"?document:void 0),typeof c>"u")return null;try{return c.activeElement||c.body}catch{return c.body}}function Wn(c,d){var m=d.checked;return re({},d,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:m??c._wrapperState.initialChecked})}function Aa(c,d){var m=d.defaultValue==null?"":d.defaultValue,w=d.checked!=null?d.checked:d.defaultChecked;m=Je(d.value!=null?d.value:m),c._wrapperState={initialChecked:w,initialValue:m,controlled:d.type==="checkbox"||d.type==="radio"?d.checked!=null:d.value!=null}}function Co(c,d){d=d.checked,d!=null&&P(c,"checked",d,!1)}function lr(c,d){Co(c,d);var m=Je(d.value),w=d.type;if(m!=null)w==="number"?(m===0&&c.value===""||c.value!=m)&&(c.value=""+m):c.value!==""+m&&(c.value=""+m);else if(w==="submit"||w==="reset"){c.removeAttribute("value");return}d.hasOwnProperty("value")?Y(c,d.type,m):d.hasOwnProperty("defaultValue")&&Y(c,d.type,Je(d.defaultValue)),d.checked==null&&d.defaultChecked!=null&&(c.defaultChecked=!!d.defaultChecked)}function F(c,d,m){if(d.hasOwnProperty("value")||d.hasOwnProperty("defaultValue")){var w=d.type;if(!(w!=="submit"&&w!=="reset"||d.value!==void 0&&d.value!==null))return;d=""+c._wrapperState.initialValue,m||d===c.value||(c.value=d),c.defaultValue=d}m=c.name,m!==""&&(c.name=""),c.defaultChecked=!!c._wrapperState.initialChecked,m!==""&&(c.name=m)}function Y(c,d,m){(d!=="number"||rs(c.ownerDocument)!==c)&&(m==null?c.defaultValue=""+c._wrapperState.initialValue:c.defaultValue!==""+m&&(c.defaultValue=""+m))}var te=Array.isArray;function ye(c,d,m,w){if(c=c.options,d){d={};for(var _=0;_<m.length;_++)d["$"+m[_]]=!0;for(m=0;m<c.length;m++)_=d.hasOwnProperty("$"+c[m].value),c[m].selected!==_&&(c[m].selected=_),_&&w&&(c[m].defaultSelected=!0)}else{for(m=""+Je(m),d=null,_=0;_<c.length;_++){if(c[_].value===m){c[_].selected=!0,w&&(c[_].defaultSelected=!0);return}d!==null||c[_].disabled||(d=c[_])}d!==null&&(d.selected=!0)}}function be(c,d){if(d.dangerouslySetInnerHTML!=null)throw Error(e(91));return re({},d,{value:void 0,defaultValue:void 0,children:""+c._wrapperState.initialValue})}function he(c,d){var m=d.value;if(m==null){if(m=d.children,d=d.defaultValue,m!=null){if(d!=null)throw Error(e(92));if(te(m)){if(1<m.length)throw Error(e(93));m=m[0]}d=m}d==null&&(d=""),m=d}c._wrapperState={initialValue:Je(m)}}function Me(c,d){var m=Je(d.value),w=Je(d.defaultValue);m!=null&&(m=""+m,m!==c.value&&(c.value=m),d.defaultValue==null&&c.defaultValue!==m&&(c.defaultValue=m)),w!=null&&(c.defaultValue=""+w)}function Qe(c){var d=c.textContent;d===c._wrapperState.initialValue&&d!==""&&d!==null&&(c.value=d)}function pt(c){switch(c){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ht(c,d){return c==null||c==="http://www.w3.org/1999/xhtml"?pt(d):c==="http://www.w3.org/2000/svg"&&d==="foreignObject"?"http://www.w3.org/1999/xhtml":c}var yn,xo=function(c){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(d,m,w,_){MSApp.execUnsafeLocalFunction(function(){return c(d,m,w,_)})}:c}(function(c,d){if(c.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in c)c.innerHTML=d;else{for(yn=yn||document.createElement("div"),yn.innerHTML="<svg>"+d.valueOf().toString()+"</svg>",d=yn.firstChild;c.firstChild;)c.removeChild(c.firstChild);for(;d.firstChild;)c.appendChild(d.firstChild)}});function Is(c,d){if(d){var m=c.firstChild;if(m&&m===c.lastChild&&m.nodeType===3){m.nodeValue=d;return}}c.textContent=d}var Tn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},jl=["Webkit","ms","Moz","O"];Object.keys(Tn).forEach(function(c){jl.forEach(function(d){d=d+c.charAt(0).toUpperCase()+c.substring(1),Tn[d]=Tn[c]})});function ko(c,d,m){return d==null||typeof d=="boolean"||d===""?"":m||typeof d!="number"||d===0||Tn.hasOwnProperty(c)&&Tn[c]?(""+d).trim():d+"px"}function Pa(c,d){c=c.style;for(var m in d)if(d.hasOwnProperty(m)){var w=m.indexOf("--")===0,_=ko(m,d[m],w);m==="float"&&(m="cssFloat"),w?c.setProperty(m,_):c[m]=_}}var Hl=re({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ul(c,d){if(d){if(Hl[c]&&(d.children!=null||d.dangerouslySetInnerHTML!=null))throw Error(e(137,c));if(d.dangerouslySetInnerHTML!=null){if(d.children!=null)throw Error(e(60));if(typeof d.dangerouslySetInnerHTML!="object"||!("__html"in d.dangerouslySetInnerHTML))throw Error(e(61))}if(d.style!=null&&typeof d.style!="object")throw Error(e(62))}}function To(c,d){if(c.indexOf("-")===-1)return typeof d.is=="string";switch(c){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Wl=null;function Ia(c){return c=c.target||c.srcElement||window,c.correspondingUseElement&&(c=c.correspondingUseElement),c.nodeType===3?c.parentNode:c}var Mu=null,Mr=null,So=null;function Lu(c){if(c=td(c)){if(typeof Mu!="function")throw Error(e(280));var d=c.stateNode;d&&(d=Wf(d),Mu(c.stateNode,c.type,d))}}function Ra(c){Mr?So?So.push(c):So=[c]:Mr=c}function Oa(){if(Mr){var c=Mr,d=So;if(So=Mr=null,Lu(c),d)for(c=0;c<d.length;c++)Lu(d[c])}}function xf(c,d){return c(d)}function kf(){}var z=!1;function W(c,d,m){if(z)return c(d,m);z=!0;try{return xf(c,d,m)}finally{z=!1,(Mr!==null||So!==null)&&(kf(),Oa())}}function Q(c,d){var m=c.stateNode;if(m===null)return null;var w=Wf(m);if(w===null)return null;m=w[d];e:switch(d){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(w=!w.disabled)||(c=c.type,w=!(c==="button"||c==="input"||c==="select"||c==="textarea")),c=!w;break e;default:c=!1}if(c)return null;if(m&&typeof m!="function")throw Error(e(231,d,typeof m));return m}var ue=!1;if(a)try{var Te={};Object.defineProperty(Te,"passive",{get:function(){ue=!0}}),window.addEventListener("test",Te,Te),window.removeEventListener("test",Te,Te)}catch{ue=!1}function $e(c,d,m,w,_,x,I,V,$){var X=Array.prototype.slice.call(arguments,3);try{d.apply(m,X)}catch(ce){this.onError(ce)}}var Ge=!1,Ae=null,Oe=!1,ke=null,tt={onError:function(c){Ge=!0,Ae=c}};function at(c,d,m,w,_,x,I,V,$){Ge=!1,Ae=null,$e.apply(tt,arguments)}function Nt(c,d,m,w,_,x,I,V,$){if(at.apply(this,arguments),Ge){if(Ge){var X=Ae;Ge=!1,Ae=null}else throw Error(e(198));Oe||(Oe=!0,ke=X)}}function Ft(c){var d=c,m=c;if(c.alternate)for(;d.return;)d=d.return;else{c=d;do d=c,d.flags&4098&&(m=d.return),c=d.return;while(c)}return d.tag===3?m:null}function Mt(c){if(c.tag===13){var d=c.memoizedState;if(d===null&&(c=c.alternate,c!==null&&(d=c.memoizedState)),d!==null)return d.dehydrated}return null}function At(c){if(Ft(c)!==c)throw Error(e(188))}function cn(c){var d=c.alternate;if(!d){if(d=Ft(c),d===null)throw Error(e(188));return d!==c?null:c}for(var m=c,w=d;;){var _=m.return;if(_===null)break;var x=_.alternate;if(x===null){if(w=_.return,w!==null){m=w;continue}break}if(_.child===x.child){for(x=_.child;x;){if(x===m)return At(_),c;if(x===w)return At(_),d;x=x.sibling}throw Error(e(188))}if(m.return!==w.return)m=_,w=x;else{for(var I=!1,V=_.child;V;){if(V===m){I=!0,m=_,w=x;break}if(V===w){I=!0,w=_,m=x;break}V=V.sibling}if(!I){for(V=x.child;V;){if(V===m){I=!0,m=x,w=_;break}if(V===w){I=!0,w=x,m=_;break}V=V.sibling}if(!I)throw Error(e(189))}}if(m.alternate!==w)throw Error(e(190))}if(m.tag!==3)throw Error(e(188));return m.stateNode.current===m?c:d}function Lr(c){return c=cn(c),c!==null?Ao(c):null}function Ao(c){if(c.tag===5||c.tag===6)return c;for(c=c.child;c!==null;){var d=Ao(c);if(d!==null)return d;c=c.sibling}return null}var os=t.unstable_scheduleCallback,Ri=t.unstable_cancelCallback,Vu=t.unstable_shouldYield,Na=t.unstable_requestPaint,xt=t.unstable_now,ql=t.unstable_getCurrentPriorityLevel,Po=t.unstable_ImmediatePriority,kt=t.unstable_UserBlockingPriority,un=t.unstable_NormalPriority,Gl=t.unstable_LowPriority,Io=t.unstable_IdlePriority,$t=null,Vn=null;function Tf(c){if(Vn&&typeof Vn.onCommitFiberRoot=="function")try{Vn.onCommitFiberRoot($t,c,void 0,(c.current.flags&128)===128)}catch{}}var Oi=Math.clz32?Math.clz32:aD,rD=Math.log,oD=Math.LN2;function aD(c){return c>>>=0,c===0?32:31-(rD(c)/oD|0)|0}var Sf=64,Af=4194304;function Du(c){switch(c&-c){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return c&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return c}}function Pf(c,d){var m=c.pendingLanes;if(m===0)return 0;var w=0,_=c.suspendedLanes,x=c.pingedLanes,I=m&268435455;if(I!==0){var V=I&~_;V!==0?w=Du(V):(x&=I,x!==0&&(w=Du(x)))}else I=m&~_,I!==0?w=Du(I):x!==0&&(w=Du(x));if(w===0)return 0;if(d!==0&&d!==w&&!(d&_)&&(_=w&-w,x=d&-d,_>=x||_===16&&(x&4194240)!==0))return d;if(w&4&&(w|=m&16),d=c.entangledLanes,d!==0)for(c=c.entanglements,d&=w;0<d;)m=31-Oi(d),_=1<<m,w|=c[m],d&=~_;return w}function lD(c,d){switch(c){case 1:case 2:case 4:return d+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function cD(c,d){for(var m=c.suspendedLanes,w=c.pingedLanes,_=c.expirationTimes,x=c.pendingLanes;0<x;){var I=31-Oi(x),V=1<<I,$=_[I];$===-1?(!(V&m)||V&w)&&(_[I]=lD(V,d)):$<=d&&(c.expiredLanes|=V),x&=~V}}function Xb(c){return c=c.pendingLanes&-1073741825,c!==0?c:c&1073741824?1073741824:0}function EC(){var c=Sf;return Sf<<=1,!(Sf&4194240)&&(Sf=64),c}function Jb(c){for(var d=[],m=0;31>m;m++)d.push(c);return d}function Bu(c,d,m){c.pendingLanes|=d,d!==536870912&&(c.suspendedLanes=0,c.pingedLanes=0),c=c.eventTimes,d=31-Oi(d),c[d]=m}function uD(c,d){var m=c.pendingLanes&~d;c.pendingLanes=d,c.suspendedLanes=0,c.pingedLanes=0,c.expiredLanes&=d,c.mutableReadLanes&=d,c.entangledLanes&=d,d=c.entanglements;var w=c.eventTimes;for(c=c.expirationTimes;0<m;){var _=31-Oi(m),x=1<<_;d[_]=0,w[_]=-1,c[_]=-1,m&=~x}}function Qb(c,d){var m=c.entangledLanes|=d;for(c=c.entanglements;m;){var w=31-Oi(m),_=1<<w;_&d|c[w]&d&&(c[w]|=d),m&=~_}}var Tt=0;function CC(c){return c&=-c,1<c?4<c?c&268435455?16:536870912:4:1}var xC,ew,kC,TC,SC,tw=!1,If=[],Ro=null,Oo=null,No=null,Fu=new Map,$u=new Map,Mo=[],dD="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function AC(c,d){switch(c){case"focusin":case"focusout":Ro=null;break;case"dragenter":case"dragleave":Oo=null;break;case"mouseover":case"mouseout":No=null;break;case"pointerover":case"pointerout":Fu.delete(d.pointerId);break;case"gotpointercapture":case"lostpointercapture":$u.delete(d.pointerId)}}function zu(c,d,m,w,_,x){return c===null||c.nativeEvent!==x?(c={blockedOn:d,domEventName:m,eventSystemFlags:w,nativeEvent:x,targetContainers:[_]},d!==null&&(d=td(d),d!==null&&ew(d)),c):(c.eventSystemFlags|=w,d=c.targetContainers,_!==null&&d.indexOf(_)===-1&&d.push(_),c)}function hD(c,d,m,w,_){switch(d){case"focusin":return Ro=zu(Ro,c,d,m,w,_),!0;case"dragenter":return Oo=zu(Oo,c,d,m,w,_),!0;case"mouseover":return No=zu(No,c,d,m,w,_),!0;case"pointerover":var x=_.pointerId;return Fu.set(x,zu(Fu.get(x)||null,c,d,m,w,_)),!0;case"gotpointercapture":return x=_.pointerId,$u.set(x,zu($u.get(x)||null,c,d,m,w,_)),!0}return!1}function PC(c){var d=Ma(c.target);if(d!==null){var m=Ft(d);if(m!==null){if(d=m.tag,d===13){if(d=Mt(m),d!==null){c.blockedOn=d,SC(c.priority,function(){kC(m)});return}}else if(d===3&&m.stateNode.current.memoizedState.isDehydrated){c.blockedOn=m.tag===3?m.stateNode.containerInfo:null;return}}}c.blockedOn=null}function Rf(c){if(c.blockedOn!==null)return!1;for(var d=c.targetContainers;0<d.length;){var m=iw(c.domEventName,c.eventSystemFlags,d[0],c.nativeEvent);if(m===null){m=c.nativeEvent;var w=new m.constructor(m.type,m);Wl=w,m.target.dispatchEvent(w),Wl=null}else return d=td(m),d!==null&&ew(d),c.blockedOn=m,!1;d.shift()}return!0}function IC(c,d,m){Rf(c)&&m.delete(d)}function fD(){tw=!1,Ro!==null&&Rf(Ro)&&(Ro=null),Oo!==null&&Rf(Oo)&&(Oo=null),No!==null&&Rf(No)&&(No=null),Fu.forEach(IC),$u.forEach(IC)}function ju(c,d){c.blockedOn===d&&(c.blockedOn=null,tw||(tw=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,fD)))}function Hu(c){function d(_){return ju(_,c)}if(0<If.length){ju(If[0],c);for(var m=1;m<If.length;m++){var w=If[m];w.blockedOn===c&&(w.blockedOn=null)}}for(Ro!==null&&ju(Ro,c),Oo!==null&&ju(Oo,c),No!==null&&ju(No,c),Fu.forEach(d),$u.forEach(d),m=0;m<Mo.length;m++)w=Mo[m],w.blockedOn===c&&(w.blockedOn=null);for(;0<Mo.length&&(m=Mo[0],m.blockedOn===null);)PC(m),m.blockedOn===null&&Mo.shift()}var Kl=S.ReactCurrentBatchConfig,Of=!0;function mD(c,d,m,w){var _=Tt,x=Kl.transition;Kl.transition=null;try{Tt=1,nw(c,d,m,w)}finally{Tt=_,Kl.transition=x}}function gD(c,d,m,w){var _=Tt,x=Kl.transition;Kl.transition=null;try{Tt=4,nw(c,d,m,w)}finally{Tt=_,Kl.transition=x}}function nw(c,d,m,w){if(Of){var _=iw(c,d,m,w);if(_===null)yw(c,d,w,Nf,m),AC(c,w);else if(hD(_,c,d,m,w))w.stopPropagation();else if(AC(c,w),d&4&&-1<dD.indexOf(c)){for(;_!==null;){var x=td(_);if(x!==null&&xC(x),x=iw(c,d,m,w),x===null&&yw(c,d,w,Nf,m),x===_)break;_=x}_!==null&&w.stopPropagation()}else yw(c,d,w,null,m)}}var Nf=null;function iw(c,d,m,w){if(Nf=null,c=Ia(w),c=Ma(c),c!==null)if(d=Ft(c),d===null)c=null;else if(m=d.tag,m===13){if(c=Mt(d),c!==null)return c;c=null}else if(m===3){if(d.stateNode.current.memoizedState.isDehydrated)return d.tag===3?d.stateNode.containerInfo:null;c=null}else d!==c&&(c=null);return Nf=c,null}function RC(c){switch(c){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ql()){case Po:return 1;case kt:return 4;case un:case Gl:return 16;case Io:return 536870912;default:return 16}default:return 16}}var Lo=null,sw=null,Mf=null;function OC(){if(Mf)return Mf;var c,d=sw,m=d.length,w,_="value"in Lo?Lo.value:Lo.textContent,x=_.length;for(c=0;c<m&&d[c]===_[c];c++);var I=m-c;for(w=1;w<=I&&d[m-w]===_[x-w];w++);return Mf=_.slice(c,1<w?1-w:void 0)}function Lf(c){var d=c.keyCode;return"charCode"in c?(c=c.charCode,c===0&&d===13&&(c=13)):c=d,c===10&&(c=13),32<=c||c===13?c:0}function Vf(){return!0}function NC(){return!1}function Ni(c){function d(m,w,_,x,I){this._reactName=m,this._targetInst=_,this.type=w,this.nativeEvent=x,this.target=I,this.currentTarget=null;for(var V in c)c.hasOwnProperty(V)&&(m=c[V],this[V]=m?m(x):x[V]);return this.isDefaultPrevented=(x.defaultPrevented!=null?x.defaultPrevented:x.returnValue===!1)?Vf:NC,this.isPropagationStopped=NC,this}return re(d.prototype,{preventDefault:function(){this.defaultPrevented=!0;var m=this.nativeEvent;m&&(m.preventDefault?m.preventDefault():typeof m.returnValue!="unknown"&&(m.returnValue=!1),this.isDefaultPrevented=Vf)},stopPropagation:function(){var m=this.nativeEvent;m&&(m.stopPropagation?m.stopPropagation():typeof m.cancelBubble!="unknown"&&(m.cancelBubble=!0),this.isPropagationStopped=Vf)},persist:function(){},isPersistent:Vf}),d}var Yl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(c){return c.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},rw=Ni(Yl),Uu=re({},Yl,{view:0,detail:0}),pD=Ni(Uu),ow,aw,Wu,Df=re({},Uu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:cw,button:0,buttons:0,relatedTarget:function(c){return c.relatedTarget===void 0?c.fromElement===c.srcElement?c.toElement:c.fromElement:c.relatedTarget},movementX:function(c){return"movementX"in c?c.movementX:(c!==Wu&&(Wu&&c.type==="mousemove"?(ow=c.screenX-Wu.screenX,aw=c.screenY-Wu.screenY):aw=ow=0,Wu=c),ow)},movementY:function(c){return"movementY"in c?c.movementY:aw}}),MC=Ni(Df),bD=re({},Df,{dataTransfer:0}),wD=Ni(bD),vD=re({},Uu,{relatedTarget:0}),lw=Ni(vD),yD=re({},Yl,{animationName:0,elapsedTime:0,pseudoElement:0}),_D=Ni(yD),ED=re({},Yl,{clipboardData:function(c){return"clipboardData"in c?c.clipboardData:window.clipboardData}}),CD=Ni(ED),xD=re({},Yl,{data:0}),LC=Ni(xD),kD={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},TD={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},SD={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function AD(c){var d=this.nativeEvent;return d.getModifierState?d.getModifierState(c):(c=SD[c])?!!d[c]:!1}function cw(){return AD}var PD=re({},Uu,{key:function(c){if(c.key){var d=kD[c.key]||c.key;if(d!=="Unidentified")return d}return c.type==="keypress"?(c=Lf(c),c===13?"Enter":String.fromCharCode(c)):c.type==="keydown"||c.type==="keyup"?TD[c.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:cw,charCode:function(c){return c.type==="keypress"?Lf(c):0},keyCode:function(c){return c.type==="keydown"||c.type==="keyup"?c.keyCode:0},which:function(c){return c.type==="keypress"?Lf(c):c.type==="keydown"||c.type==="keyup"?c.keyCode:0}}),ID=Ni(PD),RD=re({},Df,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),VC=Ni(RD),OD=re({},Uu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:cw}),ND=Ni(OD),MD=re({},Yl,{propertyName:0,elapsedTime:0,pseudoElement:0}),LD=Ni(MD),VD=re({},Df,{deltaX:function(c){return"deltaX"in c?c.deltaX:"wheelDeltaX"in c?-c.wheelDeltaX:0},deltaY:function(c){return"deltaY"in c?c.deltaY:"wheelDeltaY"in c?-c.wheelDeltaY:"wheelDelta"in c?-c.wheelDelta:0},deltaZ:0,deltaMode:0}),DD=Ni(VD),BD=[9,13,27,32],uw=a&&"CompositionEvent"in window,qu=null;a&&"documentMode"in document&&(qu=document.documentMode);var FD=a&&"TextEvent"in window&&!qu,DC=a&&(!uw||qu&&8<qu&&11>=qu),BC=" ",FC=!1;function $C(c,d){switch(c){case"keyup":return BD.indexOf(d.keyCode)!==-1;case"keydown":return d.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zC(c){return c=c.detail,typeof c=="object"&&"data"in c?c.data:null}var Zl=!1;function $D(c,d){switch(c){case"compositionend":return zC(d);case"keypress":return d.which!==32?null:(FC=!0,BC);case"textInput":return c=d.data,c===BC&&FC?null:c;default:return null}}function zD(c,d){if(Zl)return c==="compositionend"||!uw&&$C(c,d)?(c=OC(),Mf=sw=Lo=null,Zl=!1,c):null;switch(c){case"paste":return null;case"keypress":if(!(d.ctrlKey||d.altKey||d.metaKey)||d.ctrlKey&&d.altKey){if(d.char&&1<d.char.length)return d.char;if(d.which)return String.fromCharCode(d.which)}return null;case"compositionend":return DC&&d.locale!=="ko"?null:d.data;default:return null}}var jD={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jC(c){var d=c&&c.nodeName&&c.nodeName.toLowerCase();return d==="input"?!!jD[c.type]:d==="textarea"}function HC(c,d,m,w){Ra(w),d=jf(d,"onChange"),0<d.length&&(m=new rw("onChange","change",null,m,w),c.push({event:m,listeners:d}))}var Gu=null,Ku=null;function HD(c){ax(c,0)}function Bf(c){var d=tc(c);if(kn(d))return c}function UD(c,d){if(c==="change")return d}var UC=!1;if(a){var dw;if(a){var hw="oninput"in document;if(!hw){var WC=document.createElement("div");WC.setAttribute("oninput","return;"),hw=typeof WC.oninput=="function"}dw=hw}else dw=!1;UC=dw&&(!document.documentMode||9<document.documentMode)}function qC(){Gu&&(Gu.detachEvent("onpropertychange",GC),Ku=Gu=null)}function GC(c){if(c.propertyName==="value"&&Bf(Ku)){var d=[];HC(d,Ku,c,Ia(c)),W(HD,d)}}function WD(c,d,m){c==="focusin"?(qC(),Gu=d,Ku=m,Gu.attachEvent("onpropertychange",GC)):c==="focusout"&&qC()}function qD(c){if(c==="selectionchange"||c==="keyup"||c==="keydown")return Bf(Ku)}function GD(c,d){if(c==="click")return Bf(d)}function KD(c,d){if(c==="input"||c==="change")return Bf(d)}function YD(c,d){return c===d&&(c!==0||1/c===1/d)||c!==c&&d!==d}var Rs=typeof Object.is=="function"?Object.is:YD;function Yu(c,d){if(Rs(c,d))return!0;if(typeof c!="object"||c===null||typeof d!="object"||d===null)return!1;var m=Object.keys(c),w=Object.keys(d);if(m.length!==w.length)return!1;for(w=0;w<m.length;w++){var _=m[w];if(!l.call(d,_)||!Rs(c[_],d[_]))return!1}return!0}function KC(c){for(;c&&c.firstChild;)c=c.firstChild;return c}function YC(c,d){var m=KC(c);c=0;for(var w;m;){if(m.nodeType===3){if(w=c+m.textContent.length,c<=d&&w>=d)return{node:m,offset:d-c};c=w}e:{for(;m;){if(m.nextSibling){m=m.nextSibling;break e}m=m.parentNode}m=void 0}m=KC(m)}}function ZC(c,d){return c&&d?c===d?!0:c&&c.nodeType===3?!1:d&&d.nodeType===3?ZC(c,d.parentNode):"contains"in c?c.contains(d):c.compareDocumentPosition?!!(c.compareDocumentPosition(d)&16):!1:!1}function XC(){for(var c=window,d=rs();d instanceof c.HTMLIFrameElement;){try{var m=typeof d.contentWindow.location.href=="string"}catch{m=!1}if(m)c=d.contentWindow;else break;d=rs(c.document)}return d}function fw(c){var d=c&&c.nodeName&&c.nodeName.toLowerCase();return d&&(d==="input"&&(c.type==="text"||c.type==="search"||c.type==="tel"||c.type==="url"||c.type==="password")||d==="textarea"||c.contentEditable==="true")}function ZD(c){var d=XC(),m=c.focusedElem,w=c.selectionRange;if(d!==m&&m&&m.ownerDocument&&ZC(m.ownerDocument.documentElement,m)){if(w!==null&&fw(m)){if(d=w.start,c=w.end,c===void 0&&(c=d),"selectionStart"in m)m.selectionStart=d,m.selectionEnd=Math.min(c,m.value.length);else if(c=(d=m.ownerDocument||document)&&d.defaultView||window,c.getSelection){c=c.getSelection();var _=m.textContent.length,x=Math.min(w.start,_);w=w.end===void 0?x:Math.min(w.end,_),!c.extend&&x>w&&(_=w,w=x,x=_),_=YC(m,x);var I=YC(m,w);_&&I&&(c.rangeCount!==1||c.anchorNode!==_.node||c.anchorOffset!==_.offset||c.focusNode!==I.node||c.focusOffset!==I.offset)&&(d=d.createRange(),d.setStart(_.node,_.offset),c.removeAllRanges(),x>w?(c.addRange(d),c.extend(I.node,I.offset)):(d.setEnd(I.node,I.offset),c.addRange(d)))}}for(d=[],c=m;c=c.parentNode;)c.nodeType===1&&d.push({element:c,left:c.scrollLeft,top:c.scrollTop});for(typeof m.focus=="function"&&m.focus(),m=0;m<d.length;m++)c=d[m],c.element.scrollLeft=c.left,c.element.scrollTop=c.top}}var XD=a&&"documentMode"in document&&11>=document.documentMode,Xl=null,mw=null,Zu=null,gw=!1;function JC(c,d,m){var w=m.window===m?m.document:m.nodeType===9?m:m.ownerDocument;gw||Xl==null||Xl!==rs(w)||(w=Xl,"selectionStart"in w&&fw(w)?w={start:w.selectionStart,end:w.selectionEnd}:(w=(w.ownerDocument&&w.ownerDocument.defaultView||window).getSelection(),w={anchorNode:w.anchorNode,anchorOffset:w.anchorOffset,focusNode:w.focusNode,focusOffset:w.focusOffset}),Zu&&Yu(Zu,w)||(Zu=w,w=jf(mw,"onSelect"),0<w.length&&(d=new rw("onSelect","select",null,d,m),c.push({event:d,listeners:w}),d.target=Xl)))}function Ff(c,d){var m={};return m[c.toLowerCase()]=d.toLowerCase(),m["Webkit"+c]="webkit"+d,m["Moz"+c]="moz"+d,m}var Jl={animationend:Ff("Animation","AnimationEnd"),animationiteration:Ff("Animation","AnimationIteration"),animationstart:Ff("Animation","AnimationStart"),transitionend:Ff("Transition","TransitionEnd")},pw={},QC={};a&&(QC=document.createElement("div").style,"AnimationEvent"in window||(delete Jl.animationend.animation,delete Jl.animationiteration.animation,delete Jl.animationstart.animation),"TransitionEvent"in window||delete Jl.transitionend.transition);function $f(c){if(pw[c])return pw[c];if(!Jl[c])return c;var d=Jl[c],m;for(m in d)if(d.hasOwnProperty(m)&&m in QC)return pw[c]=d[m];return c}var ex=$f("animationend"),tx=$f("animationiteration"),nx=$f("animationstart"),ix=$f("transitionend"),sx=new Map,rx="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Vo(c,d){sx.set(c,d),r(d,[c])}for(var bw=0;bw<rx.length;bw++){var ww=rx[bw],JD=ww.toLowerCase(),QD=ww[0].toUpperCase()+ww.slice(1);Vo(JD,"on"+QD)}Vo(ex,"onAnimationEnd"),Vo(tx,"onAnimationIteration"),Vo(nx,"onAnimationStart"),Vo("dblclick","onDoubleClick"),Vo("focusin","onFocus"),Vo("focusout","onBlur"),Vo(ix,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),r("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),r("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),r("onBeforeInput",["compositionend","keypress","textInput","paste"]),r("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),r("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),r("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),e6=new Set("cancel close invalid load scroll toggle".split(" ").concat(Xu));function ox(c,d,m){var w=c.type||"unknown-event";c.currentTarget=m,Nt(w,d,void 0,c),c.currentTarget=null}function ax(c,d){d=(d&4)!==0;for(var m=0;m<c.length;m++){var w=c[m],_=w.event;w=w.listeners;e:{var x=void 0;if(d)for(var I=w.length-1;0<=I;I--){var V=w[I],$=V.instance,X=V.currentTarget;if(V=V.listener,$!==x&&_.isPropagationStopped())break e;ox(_,V,X),x=$}else for(I=0;I<w.length;I++){if(V=w[I],$=V.instance,X=V.currentTarget,V=V.listener,$!==x&&_.isPropagationStopped())break e;ox(_,V,X),x=$}}}if(Oe)throw c=ke,Oe=!1,ke=null,c}function zt(c,d){var m=d[Tw];m===void 0&&(m=d[Tw]=new Set);var w=c+"__bubble";m.has(w)||(lx(d,c,2,!1),m.add(w))}function vw(c,d,m){var w=0;d&&(w|=4),lx(m,c,w,d)}var zf="_reactListening"+Math.random().toString(36).slice(2);function Ju(c){if(!c[zf]){c[zf]=!0,n.forEach(function(m){m!=="selectionchange"&&(e6.has(m)||vw(m,!1,c),vw(m,!0,c))});var d=c.nodeType===9?c:c.ownerDocument;d===null||d[zf]||(d[zf]=!0,vw("selectionchange",!1,d))}}function lx(c,d,m,w){switch(RC(d)){case 1:var _=mD;break;case 4:_=gD;break;default:_=nw}m=_.bind(null,d,m,c),_=void 0,!ue||d!=="touchstart"&&d!=="touchmove"&&d!=="wheel"||(_=!0),w?_!==void 0?c.addEventListener(d,m,{capture:!0,passive:_}):c.addEventListener(d,m,!0):_!==void 0?c.addEventListener(d,m,{passive:_}):c.addEventListener(d,m,!1)}function yw(c,d,m,w,_){var x=w;if(!(d&1)&&!(d&2)&&w!==null)e:for(;;){if(w===null)return;var I=w.tag;if(I===3||I===4){var V=w.stateNode.containerInfo;if(V===_||V.nodeType===8&&V.parentNode===_)break;if(I===4)for(I=w.return;I!==null;){var $=I.tag;if(($===3||$===4)&&($=I.stateNode.containerInfo,$===_||$.nodeType===8&&$.parentNode===_))return;I=I.return}for(;V!==null;){if(I=Ma(V),I===null)return;if($=I.tag,$===5||$===6){w=x=I;continue e}V=V.parentNode}}w=w.return}W(function(){var X=x,ce=Ia(m),fe=[];e:{var oe=sx.get(c);if(oe!==void 0){var Se=rw,Ie=c;switch(c){case"keypress":if(Lf(m)===0)break e;case"keydown":case"keyup":Se=ID;break;case"focusin":Ie="focus",Se=lw;break;case"focusout":Ie="blur",Se=lw;break;case"beforeblur":case"afterblur":Se=lw;break;case"click":if(m.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Se=MC;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Se=wD;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Se=ND;break;case ex:case tx:case nx:Se=_D;break;case ix:Se=LD;break;case"scroll":Se=pD;break;case"wheel":Se=DD;break;case"copy":case"cut":case"paste":Se=CD;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Se=VC}var Ne=(d&4)!==0,dn=!Ne&&c==="scroll",G=Ne?oe!==null?oe+"Capture":null:oe;Ne=[];for(var H=X,K;H!==null;){K=H;var we=K.stateNode;if(K.tag===5&&we!==null&&(K=we,G!==null&&(we=Q(H,G),we!=null&&Ne.push(Qu(H,we,K)))),dn)break;H=H.return}0<Ne.length&&(oe=new Se(oe,Ie,null,m,ce),fe.push({event:oe,listeners:Ne}))}}if(!(d&7)){e:{if(oe=c==="mouseover"||c==="pointerover",Se=c==="mouseout"||c==="pointerout",oe&&m!==Wl&&(Ie=m.relatedTarget||m.fromElement)&&(Ma(Ie)||Ie[Vr]))break e;if((Se||oe)&&(oe=ce.window===ce?ce:(oe=ce.ownerDocument)?oe.defaultView||oe.parentWindow:window,Se?(Ie=m.relatedTarget||m.toElement,Se=X,Ie=Ie?Ma(Ie):null,Ie!==null&&(dn=Ft(Ie),Ie!==dn||Ie.tag!==5&&Ie.tag!==6)&&(Ie=null)):(Se=null,Ie=X),Se!==Ie)){if(Ne=MC,we="onMouseLeave",G="onMouseEnter",H="mouse",(c==="pointerout"||c==="pointerover")&&(Ne=VC,we="onPointerLeave",G="onPointerEnter",H="pointer"),dn=Se==null?oe:tc(Se),K=Ie==null?oe:tc(Ie),oe=new Ne(we,H+"leave",Se,m,ce),oe.target=dn,oe.relatedTarget=K,we=null,Ma(ce)===X&&(Ne=new Ne(G,H+"enter",Ie,m,ce),Ne.target=K,Ne.relatedTarget=dn,we=Ne),dn=we,Se&&Ie)t:{for(Ne=Se,G=Ie,H=0,K=Ne;K;K=Ql(K))H++;for(K=0,we=G;we;we=Ql(we))K++;for(;0<H-K;)Ne=Ql(Ne),H--;for(;0<K-H;)G=Ql(G),K--;for(;H--;){if(Ne===G||G!==null&&Ne===G.alternate)break t;Ne=Ql(Ne),G=Ql(G)}Ne=null}else Ne=null;Se!==null&&cx(fe,oe,Se,Ne,!1),Ie!==null&&dn!==null&&cx(fe,dn,Ie,Ne,!0)}}e:{if(oe=X?tc(X):window,Se=oe.nodeName&&oe.nodeName.toLowerCase(),Se==="select"||Se==="input"&&oe.type==="file")var De=UD;else if(jC(oe))if(UC)De=KD;else{De=qD;var Ue=WD}else(Se=oe.nodeName)&&Se.toLowerCase()==="input"&&(oe.type==="checkbox"||oe.type==="radio")&&(De=GD);if(De&&(De=De(c,X))){HC(fe,De,m,ce);break e}Ue&&Ue(c,oe,X),c==="focusout"&&(Ue=oe._wrapperState)&&Ue.controlled&&oe.type==="number"&&Y(oe,"number",oe.value)}switch(Ue=X?tc(X):window,c){case"focusin":(jC(Ue)||Ue.contentEditable==="true")&&(Xl=Ue,mw=X,Zu=null);break;case"focusout":Zu=mw=Xl=null;break;case"mousedown":gw=!0;break;case"contextmenu":case"mouseup":case"dragend":gw=!1,JC(fe,m,ce);break;case"selectionchange":if(XD)break;case"keydown":case"keyup":JC(fe,m,ce)}var We;if(uw)e:{switch(c){case"compositionstart":var et="onCompositionStart";break e;case"compositionend":et="onCompositionEnd";break e;case"compositionupdate":et="onCompositionUpdate";break e}et=void 0}else Zl?$C(c,m)&&(et="onCompositionEnd"):c==="keydown"&&m.keyCode===229&&(et="onCompositionStart");et&&(DC&&m.locale!=="ko"&&(Zl||et!=="onCompositionStart"?et==="onCompositionEnd"&&Zl&&(We=OC()):(Lo=ce,sw="value"in Lo?Lo.value:Lo.textContent,Zl=!0)),Ue=jf(X,et),0<Ue.length&&(et=new LC(et,c,null,m,ce),fe.push({event:et,listeners:Ue}),We?et.data=We:(We=zC(m),We!==null&&(et.data=We)))),(We=FD?$D(c,m):zD(c,m))&&(X=jf(X,"onBeforeInput"),0<X.length&&(ce=new LC("onBeforeInput","beforeinput",null,m,ce),fe.push({event:ce,listeners:X}),ce.data=We))}ax(fe,d)})}function Qu(c,d,m){return{instance:c,listener:d,currentTarget:m}}function jf(c,d){for(var m=d+"Capture",w=[];c!==null;){var _=c,x=_.stateNode;_.tag===5&&x!==null&&(_=x,x=Q(c,m),x!=null&&w.unshift(Qu(c,x,_)),x=Q(c,d),x!=null&&w.push(Qu(c,x,_))),c=c.return}return w}function Ql(c){if(c===null)return null;do c=c.return;while(c&&c.tag!==5);return c||null}function cx(c,d,m,w,_){for(var x=d._reactName,I=[];m!==null&&m!==w;){var V=m,$=V.alternate,X=V.stateNode;if($!==null&&$===w)break;V.tag===5&&X!==null&&(V=X,_?($=Q(m,x),$!=null&&I.unshift(Qu(m,$,V))):_||($=Q(m,x),$!=null&&I.push(Qu(m,$,V)))),m=m.return}I.length!==0&&c.push({event:d,listeners:I})}var t6=/\r\n?/g,n6=/\u0000|\uFFFD/g;function ux(c){return(typeof c=="string"?c:""+c).replace(t6,`
`).replace(n6,"")}function Hf(c,d,m){if(d=ux(d),ux(c)!==d&&m)throw Error(e(425))}function Uf(){}var _w=null,Ew=null;function Cw(c,d){return c==="textarea"||c==="noscript"||typeof d.children=="string"||typeof d.children=="number"||typeof d.dangerouslySetInnerHTML=="object"&&d.dangerouslySetInnerHTML!==null&&d.dangerouslySetInnerHTML.__html!=null}var xw=typeof setTimeout=="function"?setTimeout:void 0,i6=typeof clearTimeout=="function"?clearTimeout:void 0,dx=typeof Promise=="function"?Promise:void 0,s6=typeof queueMicrotask=="function"?queueMicrotask:typeof dx<"u"?function(c){return dx.resolve(null).then(c).catch(r6)}:xw;function r6(c){setTimeout(function(){throw c})}function kw(c,d){var m=d,w=0;do{var _=m.nextSibling;if(c.removeChild(m),_&&_.nodeType===8)if(m=_.data,m==="/$"){if(w===0){c.removeChild(_),Hu(d);return}w--}else m!=="$"&&m!=="$?"&&m!=="$!"||w++;m=_}while(m);Hu(d)}function Do(c){for(;c!=null;c=c.nextSibling){var d=c.nodeType;if(d===1||d===3)break;if(d===8){if(d=c.data,d==="$"||d==="$!"||d==="$?")break;if(d==="/$")return null}}return c}function hx(c){c=c.previousSibling;for(var d=0;c;){if(c.nodeType===8){var m=c.data;if(m==="$"||m==="$!"||m==="$?"){if(d===0)return c;d--}else m==="/$"&&d++}c=c.previousSibling}return null}var ec=Math.random().toString(36).slice(2),cr="__reactFiber$"+ec,ed="__reactProps$"+ec,Vr="__reactContainer$"+ec,Tw="__reactEvents$"+ec,o6="__reactListeners$"+ec,a6="__reactHandles$"+ec;function Ma(c){var d=c[cr];if(d)return d;for(var m=c.parentNode;m;){if(d=m[Vr]||m[cr]){if(m=d.alternate,d.child!==null||m!==null&&m.child!==null)for(c=hx(c);c!==null;){if(m=c[cr])return m;c=hx(c)}return d}c=m,m=c.parentNode}return null}function td(c){return c=c[cr]||c[Vr],!c||c.tag!==5&&c.tag!==6&&c.tag!==13&&c.tag!==3?null:c}function tc(c){if(c.tag===5||c.tag===6)return c.stateNode;throw Error(e(33))}function Wf(c){return c[ed]||null}var Sw=[],nc=-1;function Bo(c){return{current:c}}function jt(c){0>nc||(c.current=Sw[nc],Sw[nc]=null,nc--)}function Lt(c,d){nc++,Sw[nc]=c.current,c.current=d}var Fo={},qn=Bo(Fo),mi=Bo(!1),La=Fo;function ic(c,d){var m=c.type.contextTypes;if(!m)return Fo;var w=c.stateNode;if(w&&w.__reactInternalMemoizedUnmaskedChildContext===d)return w.__reactInternalMemoizedMaskedChildContext;var _={},x;for(x in m)_[x]=d[x];return w&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=d,c.__reactInternalMemoizedMaskedChildContext=_),_}function gi(c){return c=c.childContextTypes,c!=null}function qf(){jt(mi),jt(qn)}function fx(c,d,m){if(qn.current!==Fo)throw Error(e(168));Lt(qn,d),Lt(mi,m)}function mx(c,d,m){var w=c.stateNode;if(d=d.childContextTypes,typeof w.getChildContext!="function")return m;w=w.getChildContext();for(var _ in w)if(!(_ in d))throw Error(e(108,st(c)||"Unknown",_));return re({},m,w)}function Gf(c){return c=(c=c.stateNode)&&c.__reactInternalMemoizedMergedChildContext||Fo,La=qn.current,Lt(qn,c),Lt(mi,mi.current),!0}function gx(c,d,m){var w=c.stateNode;if(!w)throw Error(e(169));m?(c=mx(c,d,La),w.__reactInternalMemoizedMergedChildContext=c,jt(mi),jt(qn),Lt(qn,c)):jt(mi),Lt(mi,m)}var Dr=null,Kf=!1,Aw=!1;function px(c){Dr===null?Dr=[c]:Dr.push(c)}function l6(c){Kf=!0,px(c)}function $o(){if(!Aw&&Dr!==null){Aw=!0;var c=0,d=Tt;try{var m=Dr;for(Tt=1;c<m.length;c++){var w=m[c];do w=w(!0);while(w!==null)}Dr=null,Kf=!1}catch(_){throw Dr!==null&&(Dr=Dr.slice(c+1)),os(Po,$o),_}finally{Tt=d,Aw=!1}}return null}var sc=[],rc=0,Yf=null,Zf=0,as=[],ls=0,Va=null,Br=1,Fr="";function Da(c,d){sc[rc++]=Zf,sc[rc++]=Yf,Yf=c,Zf=d}function bx(c,d,m){as[ls++]=Br,as[ls++]=Fr,as[ls++]=Va,Va=c;var w=Br;c=Fr;var _=32-Oi(w)-1;w&=~(1<<_),m+=1;var x=32-Oi(d)+_;if(30<x){var I=_-_%5;x=(w&(1<<I)-1).toString(32),w>>=I,_-=I,Br=1<<32-Oi(d)+_|m<<_|w,Fr=x+c}else Br=1<<x|m<<_|w,Fr=c}function Pw(c){c.return!==null&&(Da(c,1),bx(c,1,0))}function Iw(c){for(;c===Yf;)Yf=sc[--rc],sc[rc]=null,Zf=sc[--rc],sc[rc]=null;for(;c===Va;)Va=as[--ls],as[ls]=null,Fr=as[--ls],as[ls]=null,Br=as[--ls],as[ls]=null}var Mi=null,Li=null,Kt=!1,Os=null;function wx(c,d){var m=hs(5,null,null,0);m.elementType="DELETED",m.stateNode=d,m.return=c,d=c.deletions,d===null?(c.deletions=[m],c.flags|=16):d.push(m)}function vx(c,d){switch(c.tag){case 5:var m=c.type;return d=d.nodeType!==1||m.toLowerCase()!==d.nodeName.toLowerCase()?null:d,d!==null?(c.stateNode=d,Mi=c,Li=Do(d.firstChild),!0):!1;case 6:return d=c.pendingProps===""||d.nodeType!==3?null:d,d!==null?(c.stateNode=d,Mi=c,Li=null,!0):!1;case 13:return d=d.nodeType!==8?null:d,d!==null?(m=Va!==null?{id:Br,overflow:Fr}:null,c.memoizedState={dehydrated:d,treeContext:m,retryLane:1073741824},m=hs(18,null,null,0),m.stateNode=d,m.return=c,c.child=m,Mi=c,Li=null,!0):!1;default:return!1}}function Rw(c){return(c.mode&1)!==0&&(c.flags&128)===0}function Ow(c){if(Kt){var d=Li;if(d){var m=d;if(!vx(c,d)){if(Rw(c))throw Error(e(418));d=Do(m.nextSibling);var w=Mi;d&&vx(c,d)?wx(w,m):(c.flags=c.flags&-4097|2,Kt=!1,Mi=c)}}else{if(Rw(c))throw Error(e(418));c.flags=c.flags&-4097|2,Kt=!1,Mi=c}}}function yx(c){for(c=c.return;c!==null&&c.tag!==5&&c.tag!==3&&c.tag!==13;)c=c.return;Mi=c}function Xf(c){if(c!==Mi)return!1;if(!Kt)return yx(c),Kt=!0,!1;var d;if((d=c.tag!==3)&&!(d=c.tag!==5)&&(d=c.type,d=d!=="head"&&d!=="body"&&!Cw(c.type,c.memoizedProps)),d&&(d=Li)){if(Rw(c))throw _x(),Error(e(418));for(;d;)wx(c,d),d=Do(d.nextSibling)}if(yx(c),c.tag===13){if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(e(317));e:{for(c=c.nextSibling,d=0;c;){if(c.nodeType===8){var m=c.data;if(m==="/$"){if(d===0){Li=Do(c.nextSibling);break e}d--}else m!=="$"&&m!=="$!"&&m!=="$?"||d++}c=c.nextSibling}Li=null}}else Li=Mi?Do(c.stateNode.nextSibling):null;return!0}function _x(){for(var c=Li;c;)c=Do(c.nextSibling)}function oc(){Li=Mi=null,Kt=!1}function Nw(c){Os===null?Os=[c]:Os.push(c)}var c6=S.ReactCurrentBatchConfig;function nd(c,d,m){if(c=m.ref,c!==null&&typeof c!="function"&&typeof c!="object"){if(m._owner){if(m=m._owner,m){if(m.tag!==1)throw Error(e(309));var w=m.stateNode}if(!w)throw Error(e(147,c));var _=w,x=""+c;return d!==null&&d.ref!==null&&typeof d.ref=="function"&&d.ref._stringRef===x?d.ref:(d=function(I){var V=_.refs;I===null?delete V[x]:V[x]=I},d._stringRef=x,d)}if(typeof c!="string")throw Error(e(284));if(!m._owner)throw Error(e(290,c))}return c}function Jf(c,d){throw c=Object.prototype.toString.call(d),Error(e(31,c==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":c))}function Ex(c){var d=c._init;return d(c._payload)}function Cx(c){function d(G,H){if(c){var K=G.deletions;K===null?(G.deletions=[H],G.flags|=16):K.push(H)}}function m(G,H){if(!c)return null;for(;H!==null;)d(G,H),H=H.sibling;return null}function w(G,H){for(G=new Map;H!==null;)H.key!==null?G.set(H.key,H):G.set(H.index,H),H=H.sibling;return G}function _(G,H){return G=Ko(G,H),G.index=0,G.sibling=null,G}function x(G,H,K){return G.index=K,c?(K=G.alternate,K!==null?(K=K.index,K<H?(G.flags|=2,H):K):(G.flags|=2,H)):(G.flags|=1048576,H)}function I(G){return c&&G.alternate===null&&(G.flags|=2),G}function V(G,H,K,we){return H===null||H.tag!==6?(H=xv(K,G.mode,we),H.return=G,H):(H=_(H,K),H.return=G,H)}function $(G,H,K,we){var De=K.type;return De===N?ce(G,H,K.props.children,we,K.key):H!==null&&(H.elementType===De||typeof De=="object"&&De!==null&&De.$$typeof===ge&&Ex(De)===H.type)?(we=_(H,K.props),we.ref=nd(G,H,K),we.return=G,we):(we=Em(K.type,K.key,K.props,null,G.mode,we),we.ref=nd(G,H,K),we.return=G,we)}function X(G,H,K,we){return H===null||H.tag!==4||H.stateNode.containerInfo!==K.containerInfo||H.stateNode.implementation!==K.implementation?(H=kv(K,G.mode,we),H.return=G,H):(H=_(H,K.children||[]),H.return=G,H)}function ce(G,H,K,we,De){return H===null||H.tag!==7?(H=Wa(K,G.mode,we,De),H.return=G,H):(H=_(H,K),H.return=G,H)}function fe(G,H,K){if(typeof H=="string"&&H!==""||typeof H=="number")return H=xv(""+H,G.mode,K),H.return=G,H;if(typeof H=="object"&&H!==null){switch(H.$$typeof){case O:return K=Em(H.type,H.key,H.props,null,G.mode,K),K.ref=nd(G,null,H),K.return=G,K;case A:return H=kv(H,G.mode,K),H.return=G,H;case ge:var we=H._init;return fe(G,we(H._payload),K)}if(te(H)||le(H))return H=Wa(H,G.mode,K,null),H.return=G,H;Jf(G,H)}return null}function oe(G,H,K,we){var De=H!==null?H.key:null;if(typeof K=="string"&&K!==""||typeof K=="number")return De!==null?null:V(G,H,""+K,we);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case O:return K.key===De?$(G,H,K,we):null;case A:return K.key===De?X(G,H,K,we):null;case ge:return De=K._init,oe(G,H,De(K._payload),we)}if(te(K)||le(K))return De!==null?null:ce(G,H,K,we,null);Jf(G,K)}return null}function Se(G,H,K,we,De){if(typeof we=="string"&&we!==""||typeof we=="number")return G=G.get(K)||null,V(H,G,""+we,De);if(typeof we=="object"&&we!==null){switch(we.$$typeof){case O:return G=G.get(we.key===null?K:we.key)||null,$(H,G,we,De);case A:return G=G.get(we.key===null?K:we.key)||null,X(H,G,we,De);case ge:var Ue=we._init;return Se(G,H,K,Ue(we._payload),De)}if(te(we)||le(we))return G=G.get(K)||null,ce(H,G,we,De,null);Jf(H,we)}return null}function Ie(G,H,K,we){for(var De=null,Ue=null,We=H,et=H=0,Pn=null;We!==null&&et<K.length;et++){We.index>et?(Pn=We,We=null):Pn=We.sibling;var wt=oe(G,We,K[et],we);if(wt===null){We===null&&(We=Pn);break}c&&We&&wt.alternate===null&&d(G,We),H=x(wt,H,et),Ue===null?De=wt:Ue.sibling=wt,Ue=wt,We=Pn}if(et===K.length)return m(G,We),Kt&&Da(G,et),De;if(We===null){for(;et<K.length;et++)We=fe(G,K[et],we),We!==null&&(H=x(We,H,et),Ue===null?De=We:Ue.sibling=We,Ue=We);return Kt&&Da(G,et),De}for(We=w(G,We);et<K.length;et++)Pn=Se(We,G,et,K[et],we),Pn!==null&&(c&&Pn.alternate!==null&&We.delete(Pn.key===null?et:Pn.key),H=x(Pn,H,et),Ue===null?De=Pn:Ue.sibling=Pn,Ue=Pn);return c&&We.forEach(function(Yo){return d(G,Yo)}),Kt&&Da(G,et),De}function Ne(G,H,K,we){var De=le(K);if(typeof De!="function")throw Error(e(150));if(K=De.call(K),K==null)throw Error(e(151));for(var Ue=De=null,We=H,et=H=0,Pn=null,wt=K.next();We!==null&&!wt.done;et++,wt=K.next()){We.index>et?(Pn=We,We=null):Pn=We.sibling;var Yo=oe(G,We,wt.value,we);if(Yo===null){We===null&&(We=Pn);break}c&&We&&Yo.alternate===null&&d(G,We),H=x(Yo,H,et),Ue===null?De=Yo:Ue.sibling=Yo,Ue=Yo,We=Pn}if(wt.done)return m(G,We),Kt&&Da(G,et),De;if(We===null){for(;!wt.done;et++,wt=K.next())wt=fe(G,wt.value,we),wt!==null&&(H=x(wt,H,et),Ue===null?De=wt:Ue.sibling=wt,Ue=wt);return Kt&&Da(G,et),De}for(We=w(G,We);!wt.done;et++,wt=K.next())wt=Se(We,G,et,wt.value,we),wt!==null&&(c&&wt.alternate!==null&&We.delete(wt.key===null?et:wt.key),H=x(wt,H,et),Ue===null?De=wt:Ue.sibling=wt,Ue=wt);return c&&We.forEach(function(z6){return d(G,z6)}),Kt&&Da(G,et),De}function dn(G,H,K,we){if(typeof K=="object"&&K!==null&&K.type===N&&K.key===null&&(K=K.props.children),typeof K=="object"&&K!==null){switch(K.$$typeof){case O:e:{for(var De=K.key,Ue=H;Ue!==null;){if(Ue.key===De){if(De=K.type,De===N){if(Ue.tag===7){m(G,Ue.sibling),H=_(Ue,K.props.children),H.return=G,G=H;break e}}else if(Ue.elementType===De||typeof De=="object"&&De!==null&&De.$$typeof===ge&&Ex(De)===Ue.type){m(G,Ue.sibling),H=_(Ue,K.props),H.ref=nd(G,Ue,K),H.return=G,G=H;break e}m(G,Ue);break}else d(G,Ue);Ue=Ue.sibling}K.type===N?(H=Wa(K.props.children,G.mode,we,K.key),H.return=G,G=H):(we=Em(K.type,K.key,K.props,null,G.mode,we),we.ref=nd(G,H,K),we.return=G,G=we)}return I(G);case A:e:{for(Ue=K.key;H!==null;){if(H.key===Ue)if(H.tag===4&&H.stateNode.containerInfo===K.containerInfo&&H.stateNode.implementation===K.implementation){m(G,H.sibling),H=_(H,K.children||[]),H.return=G,G=H;break e}else{m(G,H);break}else d(G,H);H=H.sibling}H=kv(K,G.mode,we),H.return=G,G=H}return I(G);case ge:return Ue=K._init,dn(G,H,Ue(K._payload),we)}if(te(K))return Ie(G,H,K,we);if(le(K))return Ne(G,H,K,we);Jf(G,K)}return typeof K=="string"&&K!==""||typeof K=="number"?(K=""+K,H!==null&&H.tag===6?(m(G,H.sibling),H=_(H,K),H.return=G,G=H):(m(G,H),H=xv(K,G.mode,we),H.return=G,G=H),I(G)):m(G,H)}return dn}var ac=Cx(!0),xx=Cx(!1),Qf=Bo(null),em=null,lc=null,Mw=null;function Lw(){Mw=lc=em=null}function Vw(c){var d=Qf.current;jt(Qf),c._currentValue=d}function Dw(c,d,m){for(;c!==null;){var w=c.alternate;if((c.childLanes&d)!==d?(c.childLanes|=d,w!==null&&(w.childLanes|=d)):w!==null&&(w.childLanes&d)!==d&&(w.childLanes|=d),c===m)break;c=c.return}}function cc(c,d){em=c,Mw=lc=null,c=c.dependencies,c!==null&&c.firstContext!==null&&(c.lanes&d&&(pi=!0),c.firstContext=null)}function cs(c){var d=c._currentValue;if(Mw!==c)if(c={context:c,memoizedValue:d,next:null},lc===null){if(em===null)throw Error(e(308));lc=c,em.dependencies={lanes:0,firstContext:c}}else lc=lc.next=c;return d}var Ba=null;function Bw(c){Ba===null?Ba=[c]:Ba.push(c)}function kx(c,d,m,w){var _=d.interleaved;return _===null?(m.next=m,Bw(d)):(m.next=_.next,_.next=m),d.interleaved=m,$r(c,w)}function $r(c,d){c.lanes|=d;var m=c.alternate;for(m!==null&&(m.lanes|=d),m=c,c=c.return;c!==null;)c.childLanes|=d,m=c.alternate,m!==null&&(m.childLanes|=d),m=c,c=c.return;return m.tag===3?m.stateNode:null}var zo=!1;function Fw(c){c.updateQueue={baseState:c.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Tx(c,d){c=c.updateQueue,d.updateQueue===c&&(d.updateQueue={baseState:c.baseState,firstBaseUpdate:c.firstBaseUpdate,lastBaseUpdate:c.lastBaseUpdate,shared:c.shared,effects:c.effects})}function zr(c,d){return{eventTime:c,lane:d,tag:0,payload:null,callback:null,next:null}}function jo(c,d,m){var w=c.updateQueue;if(w===null)return null;if(w=w.shared,bt&2){var _=w.pending;return _===null?d.next=d:(d.next=_.next,_.next=d),w.pending=d,$r(c,m)}return _=w.interleaved,_===null?(d.next=d,Bw(w)):(d.next=_.next,_.next=d),w.interleaved=d,$r(c,m)}function tm(c,d,m){if(d=d.updateQueue,d!==null&&(d=d.shared,(m&4194240)!==0)){var w=d.lanes;w&=c.pendingLanes,m|=w,d.lanes=m,Qb(c,m)}}function Sx(c,d){var m=c.updateQueue,w=c.alternate;if(w!==null&&(w=w.updateQueue,m===w)){var _=null,x=null;if(m=m.firstBaseUpdate,m!==null){do{var I={eventTime:m.eventTime,lane:m.lane,tag:m.tag,payload:m.payload,callback:m.callback,next:null};x===null?_=x=I:x=x.next=I,m=m.next}while(m!==null);x===null?_=x=d:x=x.next=d}else _=x=d;m={baseState:w.baseState,firstBaseUpdate:_,lastBaseUpdate:x,shared:w.shared,effects:w.effects},c.updateQueue=m;return}c=m.lastBaseUpdate,c===null?m.firstBaseUpdate=d:c.next=d,m.lastBaseUpdate=d}function nm(c,d,m,w){var _=c.updateQueue;zo=!1;var x=_.firstBaseUpdate,I=_.lastBaseUpdate,V=_.shared.pending;if(V!==null){_.shared.pending=null;var $=V,X=$.next;$.next=null,I===null?x=X:I.next=X,I=$;var ce=c.alternate;ce!==null&&(ce=ce.updateQueue,V=ce.lastBaseUpdate,V!==I&&(V===null?ce.firstBaseUpdate=X:V.next=X,ce.lastBaseUpdate=$))}if(x!==null){var fe=_.baseState;I=0,ce=X=$=null,V=x;do{var oe=V.lane,Se=V.eventTime;if((w&oe)===oe){ce!==null&&(ce=ce.next={eventTime:Se,lane:0,tag:V.tag,payload:V.payload,callback:V.callback,next:null});e:{var Ie=c,Ne=V;switch(oe=d,Se=m,Ne.tag){case 1:if(Ie=Ne.payload,typeof Ie=="function"){fe=Ie.call(Se,fe,oe);break e}fe=Ie;break e;case 3:Ie.flags=Ie.flags&-65537|128;case 0:if(Ie=Ne.payload,oe=typeof Ie=="function"?Ie.call(Se,fe,oe):Ie,oe==null)break e;fe=re({},fe,oe);break e;case 2:zo=!0}}V.callback!==null&&V.lane!==0&&(c.flags|=64,oe=_.effects,oe===null?_.effects=[V]:oe.push(V))}else Se={eventTime:Se,lane:oe,tag:V.tag,payload:V.payload,callback:V.callback,next:null},ce===null?(X=ce=Se,$=fe):ce=ce.next=Se,I|=oe;if(V=V.next,V===null){if(V=_.shared.pending,V===null)break;oe=V,V=oe.next,oe.next=null,_.lastBaseUpdate=oe,_.shared.pending=null}}while(!0);if(ce===null&&($=fe),_.baseState=$,_.firstBaseUpdate=X,_.lastBaseUpdate=ce,d=_.shared.interleaved,d!==null){_=d;do I|=_.lane,_=_.next;while(_!==d)}else x===null&&(_.shared.lanes=0);za|=I,c.lanes=I,c.memoizedState=fe}}function Ax(c,d,m){if(c=d.effects,d.effects=null,c!==null)for(d=0;d<c.length;d++){var w=c[d],_=w.callback;if(_!==null){if(w.callback=null,w=m,typeof _!="function")throw Error(e(191,_));_.call(w)}}}var id={},ur=Bo(id),sd=Bo(id),rd=Bo(id);function Fa(c){if(c===id)throw Error(e(174));return c}function $w(c,d){switch(Lt(rd,d),Lt(sd,c),Lt(ur,id),c=d.nodeType,c){case 9:case 11:d=(d=d.documentElement)?d.namespaceURI:ht(null,"");break;default:c=c===8?d.parentNode:d,d=c.namespaceURI||null,c=c.tagName,d=ht(d,c)}jt(ur),Lt(ur,d)}function uc(){jt(ur),jt(sd),jt(rd)}function Px(c){Fa(rd.current);var d=Fa(ur.current),m=ht(d,c.type);d!==m&&(Lt(sd,c),Lt(ur,m))}function zw(c){sd.current===c&&(jt(ur),jt(sd))}var Xt=Bo(0);function im(c){for(var d=c;d!==null;){if(d.tag===13){var m=d.memoizedState;if(m!==null&&(m=m.dehydrated,m===null||m.data==="$?"||m.data==="$!"))return d}else if(d.tag===19&&d.memoizedProps.revealOrder!==void 0){if(d.flags&128)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===c)break;for(;d.sibling===null;){if(d.return===null||d.return===c)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}var jw=[];function Hw(){for(var c=0;c<jw.length;c++)jw[c]._workInProgressVersionPrimary=null;jw.length=0}var sm=S.ReactCurrentDispatcher,Uw=S.ReactCurrentBatchConfig,$a=0,Jt=null,_n=null,Sn=null,rm=!1,od=!1,ad=0,u6=0;function Gn(){throw Error(e(321))}function Ww(c,d){if(d===null)return!1;for(var m=0;m<d.length&&m<c.length;m++)if(!Rs(c[m],d[m]))return!1;return!0}function qw(c,d,m,w,_,x){if($a=x,Jt=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,sm.current=c===null||c.memoizedState===null?m6:g6,c=m(w,_),od){x=0;do{if(od=!1,ad=0,25<=x)throw Error(e(301));x+=1,Sn=_n=null,d.updateQueue=null,sm.current=p6,c=m(w,_)}while(od)}if(sm.current=lm,d=_n!==null&&_n.next!==null,$a=0,Sn=_n=Jt=null,rm=!1,d)throw Error(e(300));return c}function Gw(){var c=ad!==0;return ad=0,c}function dr(){var c={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Sn===null?Jt.memoizedState=Sn=c:Sn=Sn.next=c,Sn}function us(){if(_n===null){var c=Jt.alternate;c=c!==null?c.memoizedState:null}else c=_n.next;var d=Sn===null?Jt.memoizedState:Sn.next;if(d!==null)Sn=d,_n=c;else{if(c===null)throw Error(e(310));_n=c,c={memoizedState:_n.memoizedState,baseState:_n.baseState,baseQueue:_n.baseQueue,queue:_n.queue,next:null},Sn===null?Jt.memoizedState=Sn=c:Sn=Sn.next=c}return Sn}function ld(c,d){return typeof d=="function"?d(c):d}function Kw(c){var d=us(),m=d.queue;if(m===null)throw Error(e(311));m.lastRenderedReducer=c;var w=_n,_=w.baseQueue,x=m.pending;if(x!==null){if(_!==null){var I=_.next;_.next=x.next,x.next=I}w.baseQueue=_=x,m.pending=null}if(_!==null){x=_.next,w=w.baseState;var V=I=null,$=null,X=x;do{var ce=X.lane;if(($a&ce)===ce)$!==null&&($=$.next={lane:0,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null}),w=X.hasEagerState?X.eagerState:c(w,X.action);else{var fe={lane:ce,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null};$===null?(V=$=fe,I=w):$=$.next=fe,Jt.lanes|=ce,za|=ce}X=X.next}while(X!==null&&X!==x);$===null?I=w:$.next=V,Rs(w,d.memoizedState)||(pi=!0),d.memoizedState=w,d.baseState=I,d.baseQueue=$,m.lastRenderedState=w}if(c=m.interleaved,c!==null){_=c;do x=_.lane,Jt.lanes|=x,za|=x,_=_.next;while(_!==c)}else _===null&&(m.lanes=0);return[d.memoizedState,m.dispatch]}function Yw(c){var d=us(),m=d.queue;if(m===null)throw Error(e(311));m.lastRenderedReducer=c;var w=m.dispatch,_=m.pending,x=d.memoizedState;if(_!==null){m.pending=null;var I=_=_.next;do x=c(x,I.action),I=I.next;while(I!==_);Rs(x,d.memoizedState)||(pi=!0),d.memoizedState=x,d.baseQueue===null&&(d.baseState=x),m.lastRenderedState=x}return[x,w]}function Ix(){}function Rx(c,d){var m=Jt,w=us(),_=d(),x=!Rs(w.memoizedState,_);if(x&&(w.memoizedState=_,pi=!0),w=w.queue,Zw(Mx.bind(null,m,w,c),[c]),w.getSnapshot!==d||x||Sn!==null&&Sn.memoizedState.tag&1){if(m.flags|=2048,cd(9,Nx.bind(null,m,w,_,d),void 0,null),An===null)throw Error(e(349));$a&30||Ox(m,d,_)}return _}function Ox(c,d,m){c.flags|=16384,c={getSnapshot:d,value:m},d=Jt.updateQueue,d===null?(d={lastEffect:null,stores:null},Jt.updateQueue=d,d.stores=[c]):(m=d.stores,m===null?d.stores=[c]:m.push(c))}function Nx(c,d,m,w){d.value=m,d.getSnapshot=w,Lx(d)&&Vx(c)}function Mx(c,d,m){return m(function(){Lx(d)&&Vx(c)})}function Lx(c){var d=c.getSnapshot;c=c.value;try{var m=d();return!Rs(c,m)}catch{return!0}}function Vx(c){var d=$r(c,1);d!==null&&Vs(d,c,1,-1)}function Dx(c){var d=dr();return typeof c=="function"&&(c=c()),d.memoizedState=d.baseState=c,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ld,lastRenderedState:c},d.queue=c,c=c.dispatch=f6.bind(null,Jt,c),[d.memoizedState,c]}function cd(c,d,m,w){return c={tag:c,create:d,destroy:m,deps:w,next:null},d=Jt.updateQueue,d===null?(d={lastEffect:null,stores:null},Jt.updateQueue=d,d.lastEffect=c.next=c):(m=d.lastEffect,m===null?d.lastEffect=c.next=c:(w=m.next,m.next=c,c.next=w,d.lastEffect=c)),c}function Bx(){return us().memoizedState}function om(c,d,m,w){var _=dr();Jt.flags|=c,_.memoizedState=cd(1|d,m,void 0,w===void 0?null:w)}function am(c,d,m,w){var _=us();w=w===void 0?null:w;var x=void 0;if(_n!==null){var I=_n.memoizedState;if(x=I.destroy,w!==null&&Ww(w,I.deps)){_.memoizedState=cd(d,m,x,w);return}}Jt.flags|=c,_.memoizedState=cd(1|d,m,x,w)}function Fx(c,d){return om(8390656,8,c,d)}function Zw(c,d){return am(2048,8,c,d)}function $x(c,d){return am(4,2,c,d)}function zx(c,d){return am(4,4,c,d)}function jx(c,d){if(typeof d=="function")return c=c(),d(c),function(){d(null)};if(d!=null)return c=c(),d.current=c,function(){d.current=null}}function Hx(c,d,m){return m=m!=null?m.concat([c]):null,am(4,4,jx.bind(null,d,c),m)}function Xw(){}function Ux(c,d){var m=us();d=d===void 0?null:d;var w=m.memoizedState;return w!==null&&d!==null&&Ww(d,w[1])?w[0]:(m.memoizedState=[c,d],c)}function Wx(c,d){var m=us();d=d===void 0?null:d;var w=m.memoizedState;return w!==null&&d!==null&&Ww(d,w[1])?w[0]:(c=c(),m.memoizedState=[c,d],c)}function qx(c,d,m){return $a&21?(Rs(m,d)||(m=EC(),Jt.lanes|=m,za|=m,c.baseState=!0),d):(c.baseState&&(c.baseState=!1,pi=!0),c.memoizedState=m)}function d6(c,d){var m=Tt;Tt=m!==0&&4>m?m:4,c(!0);var w=Uw.transition;Uw.transition={};try{c(!1),d()}finally{Tt=m,Uw.transition=w}}function Gx(){return us().memoizedState}function h6(c,d,m){var w=qo(c);if(m={lane:w,action:m,hasEagerState:!1,eagerState:null,next:null},Kx(c))Yx(d,m);else if(m=kx(c,d,m,w),m!==null){var _=si();Vs(m,c,w,_),Zx(m,d,w)}}function f6(c,d,m){var w=qo(c),_={lane:w,action:m,hasEagerState:!1,eagerState:null,next:null};if(Kx(c))Yx(d,_);else{var x=c.alternate;if(c.lanes===0&&(x===null||x.lanes===0)&&(x=d.lastRenderedReducer,x!==null))try{var I=d.lastRenderedState,V=x(I,m);if(_.hasEagerState=!0,_.eagerState=V,Rs(V,I)){var $=d.interleaved;$===null?(_.next=_,Bw(d)):(_.next=$.next,$.next=_),d.interleaved=_;return}}catch{}finally{}m=kx(c,d,_,w),m!==null&&(_=si(),Vs(m,c,w,_),Zx(m,d,w))}}function Kx(c){var d=c.alternate;return c===Jt||d!==null&&d===Jt}function Yx(c,d){od=rm=!0;var m=c.pending;m===null?d.next=d:(d.next=m.next,m.next=d),c.pending=d}function Zx(c,d,m){if(m&4194240){var w=d.lanes;w&=c.pendingLanes,m|=w,d.lanes=m,Qb(c,m)}}var lm={readContext:cs,useCallback:Gn,useContext:Gn,useEffect:Gn,useImperativeHandle:Gn,useInsertionEffect:Gn,useLayoutEffect:Gn,useMemo:Gn,useReducer:Gn,useRef:Gn,useState:Gn,useDebugValue:Gn,useDeferredValue:Gn,useTransition:Gn,useMutableSource:Gn,useSyncExternalStore:Gn,useId:Gn,unstable_isNewReconciler:!1},m6={readContext:cs,useCallback:function(c,d){return dr().memoizedState=[c,d===void 0?null:d],c},useContext:cs,useEffect:Fx,useImperativeHandle:function(c,d,m){return m=m!=null?m.concat([c]):null,om(4194308,4,jx.bind(null,d,c),m)},useLayoutEffect:function(c,d){return om(4194308,4,c,d)},useInsertionEffect:function(c,d){return om(4,2,c,d)},useMemo:function(c,d){var m=dr();return d=d===void 0?null:d,c=c(),m.memoizedState=[c,d],c},useReducer:function(c,d,m){var w=dr();return d=m!==void 0?m(d):d,w.memoizedState=w.baseState=d,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:c,lastRenderedState:d},w.queue=c,c=c.dispatch=h6.bind(null,Jt,c),[w.memoizedState,c]},useRef:function(c){var d=dr();return c={current:c},d.memoizedState=c},useState:Dx,useDebugValue:Xw,useDeferredValue:function(c){return dr().memoizedState=c},useTransition:function(){var c=Dx(!1),d=c[0];return c=d6.bind(null,c[1]),dr().memoizedState=c,[d,c]},useMutableSource:function(){},useSyncExternalStore:function(c,d,m){var w=Jt,_=dr();if(Kt){if(m===void 0)throw Error(e(407));m=m()}else{if(m=d(),An===null)throw Error(e(349));$a&30||Ox(w,d,m)}_.memoizedState=m;var x={value:m,getSnapshot:d};return _.queue=x,Fx(Mx.bind(null,w,x,c),[c]),w.flags|=2048,cd(9,Nx.bind(null,w,x,m,d),void 0,null),m},useId:function(){var c=dr(),d=An.identifierPrefix;if(Kt){var m=Fr,w=Br;m=(w&~(1<<32-Oi(w)-1)).toString(32)+m,d=":"+d+"R"+m,m=ad++,0<m&&(d+="H"+m.toString(32)),d+=":"}else m=u6++,d=":"+d+"r"+m.toString(32)+":";return c.memoizedState=d},unstable_isNewReconciler:!1},g6={readContext:cs,useCallback:Ux,useContext:cs,useEffect:Zw,useImperativeHandle:Hx,useInsertionEffect:$x,useLayoutEffect:zx,useMemo:Wx,useReducer:Kw,useRef:Bx,useState:function(){return Kw(ld)},useDebugValue:Xw,useDeferredValue:function(c){var d=us();return qx(d,_n.memoizedState,c)},useTransition:function(){var c=Kw(ld)[0],d=us().memoizedState;return[c,d]},useMutableSource:Ix,useSyncExternalStore:Rx,useId:Gx,unstable_isNewReconciler:!1},p6={readContext:cs,useCallback:Ux,useContext:cs,useEffect:Zw,useImperativeHandle:Hx,useInsertionEffect:$x,useLayoutEffect:zx,useMemo:Wx,useReducer:Yw,useRef:Bx,useState:function(){return Yw(ld)},useDebugValue:Xw,useDeferredValue:function(c){var d=us();return _n===null?d.memoizedState=c:qx(d,_n.memoizedState,c)},useTransition:function(){var c=Yw(ld)[0],d=us().memoizedState;return[c,d]},useMutableSource:Ix,useSyncExternalStore:Rx,useId:Gx,unstable_isNewReconciler:!1};function Ns(c,d){if(c&&c.defaultProps){d=re({},d),c=c.defaultProps;for(var m in c)d[m]===void 0&&(d[m]=c[m]);return d}return d}function Jw(c,d,m,w){d=c.memoizedState,m=m(w,d),m=m==null?d:re({},d,m),c.memoizedState=m,c.lanes===0&&(c.updateQueue.baseState=m)}var cm={isMounted:function(c){return(c=c._reactInternals)?Ft(c)===c:!1},enqueueSetState:function(c,d,m){c=c._reactInternals;var w=si(),_=qo(c),x=zr(w,_);x.payload=d,m!=null&&(x.callback=m),d=jo(c,x,_),d!==null&&(Vs(d,c,_,w),tm(d,c,_))},enqueueReplaceState:function(c,d,m){c=c._reactInternals;var w=si(),_=qo(c),x=zr(w,_);x.tag=1,x.payload=d,m!=null&&(x.callback=m),d=jo(c,x,_),d!==null&&(Vs(d,c,_,w),tm(d,c,_))},enqueueForceUpdate:function(c,d){c=c._reactInternals;var m=si(),w=qo(c),_=zr(m,w);_.tag=2,d!=null&&(_.callback=d),d=jo(c,_,w),d!==null&&(Vs(d,c,w,m),tm(d,c,w))}};function Xx(c,d,m,w,_,x,I){return c=c.stateNode,typeof c.shouldComponentUpdate=="function"?c.shouldComponentUpdate(w,x,I):d.prototype&&d.prototype.isPureReactComponent?!Yu(m,w)||!Yu(_,x):!0}function Jx(c,d,m){var w=!1,_=Fo,x=d.contextType;return typeof x=="object"&&x!==null?x=cs(x):(_=gi(d)?La:qn.current,w=d.contextTypes,x=(w=w!=null)?ic(c,_):Fo),d=new d(m,x),c.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=cm,c.stateNode=d,d._reactInternals=c,w&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=_,c.__reactInternalMemoizedMaskedChildContext=x),d}function Qx(c,d,m,w){c=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(m,w),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(m,w),d.state!==c&&cm.enqueueReplaceState(d,d.state,null)}function Qw(c,d,m,w){var _=c.stateNode;_.props=m,_.state=c.memoizedState,_.refs={},Fw(c);var x=d.contextType;typeof x=="object"&&x!==null?_.context=cs(x):(x=gi(d)?La:qn.current,_.context=ic(c,x)),_.state=c.memoizedState,x=d.getDerivedStateFromProps,typeof x=="function"&&(Jw(c,d,x,m),_.state=c.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(d=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),d!==_.state&&cm.enqueueReplaceState(_,_.state,null),nm(c,m,_,w),_.state=c.memoizedState),typeof _.componentDidMount=="function"&&(c.flags|=4194308)}function dc(c,d){try{var m="",w=d;do m+=je(w),w=w.return;while(w);var _=m}catch(x){_=`
Error generating stack: `+x.message+`
`+x.stack}return{value:c,source:d,stack:_,digest:null}}function ev(c,d,m){return{value:c,source:null,stack:m??null,digest:d??null}}function tv(c,d){try{console.error(d.value)}catch(m){setTimeout(function(){throw m})}}var b6=typeof WeakMap=="function"?WeakMap:Map;function ek(c,d,m){m=zr(-1,m),m.tag=3,m.payload={element:null};var w=d.value;return m.callback=function(){pm||(pm=!0,pv=w),tv(c,d)},m}function tk(c,d,m){m=zr(-1,m),m.tag=3;var w=c.type.getDerivedStateFromError;if(typeof w=="function"){var _=d.value;m.payload=function(){return w(_)},m.callback=function(){tv(c,d)}}var x=c.stateNode;return x!==null&&typeof x.componentDidCatch=="function"&&(m.callback=function(){tv(c,d),typeof w!="function"&&(Uo===null?Uo=new Set([this]):Uo.add(this));var I=d.stack;this.componentDidCatch(d.value,{componentStack:I!==null?I:""})}),m}function nk(c,d,m){var w=c.pingCache;if(w===null){w=c.pingCache=new b6;var _=new Set;w.set(d,_)}else _=w.get(d),_===void 0&&(_=new Set,w.set(d,_));_.has(m)||(_.add(m),c=R6.bind(null,c,d,m),d.then(c,c))}function ik(c){do{var d;if((d=c.tag===13)&&(d=c.memoizedState,d=d!==null?d.dehydrated!==null:!0),d)return c;c=c.return}while(c!==null);return null}function sk(c,d,m,w,_){return c.mode&1?(c.flags|=65536,c.lanes=_,c):(c===d?c.flags|=65536:(c.flags|=128,m.flags|=131072,m.flags&=-52805,m.tag===1&&(m.alternate===null?m.tag=17:(d=zr(-1,1),d.tag=2,jo(m,d,1))),m.lanes|=1),c)}var w6=S.ReactCurrentOwner,pi=!1;function ii(c,d,m,w){d.child=c===null?xx(d,null,m,w):ac(d,c.child,m,w)}function rk(c,d,m,w,_){m=m.render;var x=d.ref;return cc(d,_),w=qw(c,d,m,w,x,_),m=Gw(),c!==null&&!pi?(d.updateQueue=c.updateQueue,d.flags&=-2053,c.lanes&=~_,jr(c,d,_)):(Kt&&m&&Pw(d),d.flags|=1,ii(c,d,w,_),d.child)}function ok(c,d,m,w,_){if(c===null){var x=m.type;return typeof x=="function"&&!Cv(x)&&x.defaultProps===void 0&&m.compare===null&&m.defaultProps===void 0?(d.tag=15,d.type=x,ak(c,d,x,w,_)):(c=Em(m.type,null,w,d,d.mode,_),c.ref=d.ref,c.return=d,d.child=c)}if(x=c.child,!(c.lanes&_)){var I=x.memoizedProps;if(m=m.compare,m=m!==null?m:Yu,m(I,w)&&c.ref===d.ref)return jr(c,d,_)}return d.flags|=1,c=Ko(x,w),c.ref=d.ref,c.return=d,d.child=c}function ak(c,d,m,w,_){if(c!==null){var x=c.memoizedProps;if(Yu(x,w)&&c.ref===d.ref)if(pi=!1,d.pendingProps=w=x,(c.lanes&_)!==0)c.flags&131072&&(pi=!0);else return d.lanes=c.lanes,jr(c,d,_)}return nv(c,d,m,w,_)}function lk(c,d,m){var w=d.pendingProps,_=w.children,x=c!==null?c.memoizedState:null;if(w.mode==="hidden")if(!(d.mode&1))d.memoizedState={baseLanes:0,cachePool:null,transitions:null},Lt(fc,Vi),Vi|=m;else{if(!(m&1073741824))return c=x!==null?x.baseLanes|m:m,d.lanes=d.childLanes=1073741824,d.memoizedState={baseLanes:c,cachePool:null,transitions:null},d.updateQueue=null,Lt(fc,Vi),Vi|=c,null;d.memoizedState={baseLanes:0,cachePool:null,transitions:null},w=x!==null?x.baseLanes:m,Lt(fc,Vi),Vi|=w}else x!==null?(w=x.baseLanes|m,d.memoizedState=null):w=m,Lt(fc,Vi),Vi|=w;return ii(c,d,_,m),d.child}function ck(c,d){var m=d.ref;(c===null&&m!==null||c!==null&&c.ref!==m)&&(d.flags|=512,d.flags|=2097152)}function nv(c,d,m,w,_){var x=gi(m)?La:qn.current;return x=ic(d,x),cc(d,_),m=qw(c,d,m,w,x,_),w=Gw(),c!==null&&!pi?(d.updateQueue=c.updateQueue,d.flags&=-2053,c.lanes&=~_,jr(c,d,_)):(Kt&&w&&Pw(d),d.flags|=1,ii(c,d,m,_),d.child)}function uk(c,d,m,w,_){if(gi(m)){var x=!0;Gf(d)}else x=!1;if(cc(d,_),d.stateNode===null)dm(c,d),Jx(d,m,w),Qw(d,m,w,_),w=!0;else if(c===null){var I=d.stateNode,V=d.memoizedProps;I.props=V;var $=I.context,X=m.contextType;typeof X=="object"&&X!==null?X=cs(X):(X=gi(m)?La:qn.current,X=ic(d,X));var ce=m.getDerivedStateFromProps,fe=typeof ce=="function"||typeof I.getSnapshotBeforeUpdate=="function";fe||typeof I.UNSAFE_componentWillReceiveProps!="function"&&typeof I.componentWillReceiveProps!="function"||(V!==w||$!==X)&&Qx(d,I,w,X),zo=!1;var oe=d.memoizedState;I.state=oe,nm(d,w,I,_),$=d.memoizedState,V!==w||oe!==$||mi.current||zo?(typeof ce=="function"&&(Jw(d,m,ce,w),$=d.memoizedState),(V=zo||Xx(d,m,V,w,oe,$,X))?(fe||typeof I.UNSAFE_componentWillMount!="function"&&typeof I.componentWillMount!="function"||(typeof I.componentWillMount=="function"&&I.componentWillMount(),typeof I.UNSAFE_componentWillMount=="function"&&I.UNSAFE_componentWillMount()),typeof I.componentDidMount=="function"&&(d.flags|=4194308)):(typeof I.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=w,d.memoizedState=$),I.props=w,I.state=$,I.context=X,w=V):(typeof I.componentDidMount=="function"&&(d.flags|=4194308),w=!1)}else{I=d.stateNode,Tx(c,d),V=d.memoizedProps,X=d.type===d.elementType?V:Ns(d.type,V),I.props=X,fe=d.pendingProps,oe=I.context,$=m.contextType,typeof $=="object"&&$!==null?$=cs($):($=gi(m)?La:qn.current,$=ic(d,$));var Se=m.getDerivedStateFromProps;(ce=typeof Se=="function"||typeof I.getSnapshotBeforeUpdate=="function")||typeof I.UNSAFE_componentWillReceiveProps!="function"&&typeof I.componentWillReceiveProps!="function"||(V!==fe||oe!==$)&&Qx(d,I,w,$),zo=!1,oe=d.memoizedState,I.state=oe,nm(d,w,I,_);var Ie=d.memoizedState;V!==fe||oe!==Ie||mi.current||zo?(typeof Se=="function"&&(Jw(d,m,Se,w),Ie=d.memoizedState),(X=zo||Xx(d,m,X,w,oe,Ie,$)||!1)?(ce||typeof I.UNSAFE_componentWillUpdate!="function"&&typeof I.componentWillUpdate!="function"||(typeof I.componentWillUpdate=="function"&&I.componentWillUpdate(w,Ie,$),typeof I.UNSAFE_componentWillUpdate=="function"&&I.UNSAFE_componentWillUpdate(w,Ie,$)),typeof I.componentDidUpdate=="function"&&(d.flags|=4),typeof I.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof I.componentDidUpdate!="function"||V===c.memoizedProps&&oe===c.memoizedState||(d.flags|=4),typeof I.getSnapshotBeforeUpdate!="function"||V===c.memoizedProps&&oe===c.memoizedState||(d.flags|=1024),d.memoizedProps=w,d.memoizedState=Ie),I.props=w,I.state=Ie,I.context=$,w=X):(typeof I.componentDidUpdate!="function"||V===c.memoizedProps&&oe===c.memoizedState||(d.flags|=4),typeof I.getSnapshotBeforeUpdate!="function"||V===c.memoizedProps&&oe===c.memoizedState||(d.flags|=1024),w=!1)}return iv(c,d,m,w,x,_)}function iv(c,d,m,w,_,x){ck(c,d);var I=(d.flags&128)!==0;if(!w&&!I)return _&&gx(d,m,!1),jr(c,d,x);w=d.stateNode,w6.current=d;var V=I&&typeof m.getDerivedStateFromError!="function"?null:w.render();return d.flags|=1,c!==null&&I?(d.child=ac(d,c.child,null,x),d.child=ac(d,null,V,x)):ii(c,d,V,x),d.memoizedState=w.state,_&&gx(d,m,!0),d.child}function dk(c){var d=c.stateNode;d.pendingContext?fx(c,d.pendingContext,d.pendingContext!==d.context):d.context&&fx(c,d.context,!1),$w(c,d.containerInfo)}function hk(c,d,m,w,_){return oc(),Nw(_),d.flags|=256,ii(c,d,m,w),d.child}var sv={dehydrated:null,treeContext:null,retryLane:0};function rv(c){return{baseLanes:c,cachePool:null,transitions:null}}function fk(c,d,m){var w=d.pendingProps,_=Xt.current,x=!1,I=(d.flags&128)!==0,V;if((V=I)||(V=c!==null&&c.memoizedState===null?!1:(_&2)!==0),V?(x=!0,d.flags&=-129):(c===null||c.memoizedState!==null)&&(_|=1),Lt(Xt,_&1),c===null)return Ow(d),c=d.memoizedState,c!==null&&(c=c.dehydrated,c!==null)?(d.mode&1?c.data==="$!"?d.lanes=8:d.lanes=1073741824:d.lanes=1,null):(I=w.children,c=w.fallback,x?(w=d.mode,x=d.child,I={mode:"hidden",children:I},!(w&1)&&x!==null?(x.childLanes=0,x.pendingProps=I):x=Cm(I,w,0,null),c=Wa(c,w,m,null),x.return=d,c.return=d,x.sibling=c,d.child=x,d.child.memoizedState=rv(m),d.memoizedState=sv,c):ov(d,I));if(_=c.memoizedState,_!==null&&(V=_.dehydrated,V!==null))return v6(c,d,I,w,V,_,m);if(x){x=w.fallback,I=d.mode,_=c.child,V=_.sibling;var $={mode:"hidden",children:w.children};return!(I&1)&&d.child!==_?(w=d.child,w.childLanes=0,w.pendingProps=$,d.deletions=null):(w=Ko(_,$),w.subtreeFlags=_.subtreeFlags&14680064),V!==null?x=Ko(V,x):(x=Wa(x,I,m,null),x.flags|=2),x.return=d,w.return=d,w.sibling=x,d.child=w,w=x,x=d.child,I=c.child.memoizedState,I=I===null?rv(m):{baseLanes:I.baseLanes|m,cachePool:null,transitions:I.transitions},x.memoizedState=I,x.childLanes=c.childLanes&~m,d.memoizedState=sv,w}return x=c.child,c=x.sibling,w=Ko(x,{mode:"visible",children:w.children}),!(d.mode&1)&&(w.lanes=m),w.return=d,w.sibling=null,c!==null&&(m=d.deletions,m===null?(d.deletions=[c],d.flags|=16):m.push(c)),d.child=w,d.memoizedState=null,w}function ov(c,d){return d=Cm({mode:"visible",children:d},c.mode,0,null),d.return=c,c.child=d}function um(c,d,m,w){return w!==null&&Nw(w),ac(d,c.child,null,m),c=ov(d,d.pendingProps.children),c.flags|=2,d.memoizedState=null,c}function v6(c,d,m,w,_,x,I){if(m)return d.flags&256?(d.flags&=-257,w=ev(Error(e(422))),um(c,d,I,w)):d.memoizedState!==null?(d.child=c.child,d.flags|=128,null):(x=w.fallback,_=d.mode,w=Cm({mode:"visible",children:w.children},_,0,null),x=Wa(x,_,I,null),x.flags|=2,w.return=d,x.return=d,w.sibling=x,d.child=w,d.mode&1&&ac(d,c.child,null,I),d.child.memoizedState=rv(I),d.memoizedState=sv,x);if(!(d.mode&1))return um(c,d,I,null);if(_.data==="$!"){if(w=_.nextSibling&&_.nextSibling.dataset,w)var V=w.dgst;return w=V,x=Error(e(419)),w=ev(x,w,void 0),um(c,d,I,w)}if(V=(I&c.childLanes)!==0,pi||V){if(w=An,w!==null){switch(I&-I){case 4:_=2;break;case 16:_=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:_=32;break;case 536870912:_=268435456;break;default:_=0}_=_&(w.suspendedLanes|I)?0:_,_!==0&&_!==x.retryLane&&(x.retryLane=_,$r(c,_),Vs(w,c,_,-1))}return Ev(),w=ev(Error(e(421))),um(c,d,I,w)}return _.data==="$?"?(d.flags|=128,d.child=c.child,d=O6.bind(null,c),_._reactRetry=d,null):(c=x.treeContext,Li=Do(_.nextSibling),Mi=d,Kt=!0,Os=null,c!==null&&(as[ls++]=Br,as[ls++]=Fr,as[ls++]=Va,Br=c.id,Fr=c.overflow,Va=d),d=ov(d,w.children),d.flags|=4096,d)}function mk(c,d,m){c.lanes|=d;var w=c.alternate;w!==null&&(w.lanes|=d),Dw(c.return,d,m)}function av(c,d,m,w,_){var x=c.memoizedState;x===null?c.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:w,tail:m,tailMode:_}:(x.isBackwards=d,x.rendering=null,x.renderingStartTime=0,x.last=w,x.tail=m,x.tailMode=_)}function gk(c,d,m){var w=d.pendingProps,_=w.revealOrder,x=w.tail;if(ii(c,d,w.children,m),w=Xt.current,w&2)w=w&1|2,d.flags|=128;else{if(c!==null&&c.flags&128)e:for(c=d.child;c!==null;){if(c.tag===13)c.memoizedState!==null&&mk(c,m,d);else if(c.tag===19)mk(c,m,d);else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===d)break e;for(;c.sibling===null;){if(c.return===null||c.return===d)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}w&=1}if(Lt(Xt,w),!(d.mode&1))d.memoizedState=null;else switch(_){case"forwards":for(m=d.child,_=null;m!==null;)c=m.alternate,c!==null&&im(c)===null&&(_=m),m=m.sibling;m=_,m===null?(_=d.child,d.child=null):(_=m.sibling,m.sibling=null),av(d,!1,_,m,x);break;case"backwards":for(m=null,_=d.child,d.child=null;_!==null;){if(c=_.alternate,c!==null&&im(c)===null){d.child=_;break}c=_.sibling,_.sibling=m,m=_,_=c}av(d,!0,m,null,x);break;case"together":av(d,!1,null,null,void 0);break;default:d.memoizedState=null}return d.child}function dm(c,d){!(d.mode&1)&&c!==null&&(c.alternate=null,d.alternate=null,d.flags|=2)}function jr(c,d,m){if(c!==null&&(d.dependencies=c.dependencies),za|=d.lanes,!(m&d.childLanes))return null;if(c!==null&&d.child!==c.child)throw Error(e(153));if(d.child!==null){for(c=d.child,m=Ko(c,c.pendingProps),d.child=m,m.return=d;c.sibling!==null;)c=c.sibling,m=m.sibling=Ko(c,c.pendingProps),m.return=d;m.sibling=null}return d.child}function y6(c,d,m){switch(d.tag){case 3:dk(d),oc();break;case 5:Px(d);break;case 1:gi(d.type)&&Gf(d);break;case 4:$w(d,d.stateNode.containerInfo);break;case 10:var w=d.type._context,_=d.memoizedProps.value;Lt(Qf,w._currentValue),w._currentValue=_;break;case 13:if(w=d.memoizedState,w!==null)return w.dehydrated!==null?(Lt(Xt,Xt.current&1),d.flags|=128,null):m&d.child.childLanes?fk(c,d,m):(Lt(Xt,Xt.current&1),c=jr(c,d,m),c!==null?c.sibling:null);Lt(Xt,Xt.current&1);break;case 19:if(w=(m&d.childLanes)!==0,c.flags&128){if(w)return gk(c,d,m);d.flags|=128}if(_=d.memoizedState,_!==null&&(_.rendering=null,_.tail=null,_.lastEffect=null),Lt(Xt,Xt.current),w)break;return null;case 22:case 23:return d.lanes=0,lk(c,d,m)}return jr(c,d,m)}var pk,lv,bk,wk;pk=function(c,d){for(var m=d.child;m!==null;){if(m.tag===5||m.tag===6)c.appendChild(m.stateNode);else if(m.tag!==4&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===d)break;for(;m.sibling===null;){if(m.return===null||m.return===d)return;m=m.return}m.sibling.return=m.return,m=m.sibling}},lv=function(){},bk=function(c,d,m,w){var _=c.memoizedProps;if(_!==w){c=d.stateNode,Fa(ur.current);var x=null;switch(m){case"input":_=Wn(c,_),w=Wn(c,w),x=[];break;case"select":_=re({},_,{value:void 0}),w=re({},w,{value:void 0}),x=[];break;case"textarea":_=be(c,_),w=be(c,w),x=[];break;default:typeof _.onClick!="function"&&typeof w.onClick=="function"&&(c.onclick=Uf)}Ul(m,w);var I;m=null;for(X in _)if(!w.hasOwnProperty(X)&&_.hasOwnProperty(X)&&_[X]!=null)if(X==="style"){var V=_[X];for(I in V)V.hasOwnProperty(I)&&(m||(m={}),m[I]="")}else X!=="dangerouslySetInnerHTML"&&X!=="children"&&X!=="suppressContentEditableWarning"&&X!=="suppressHydrationWarning"&&X!=="autoFocus"&&(s.hasOwnProperty(X)?x||(x=[]):(x=x||[]).push(X,null));for(X in w){var $=w[X];if(V=_!=null?_[X]:void 0,w.hasOwnProperty(X)&&$!==V&&($!=null||V!=null))if(X==="style")if(V){for(I in V)!V.hasOwnProperty(I)||$&&$.hasOwnProperty(I)||(m||(m={}),m[I]="");for(I in $)$.hasOwnProperty(I)&&V[I]!==$[I]&&(m||(m={}),m[I]=$[I])}else m||(x||(x=[]),x.push(X,m)),m=$;else X==="dangerouslySetInnerHTML"?($=$?$.__html:void 0,V=V?V.__html:void 0,$!=null&&V!==$&&(x=x||[]).push(X,$)):X==="children"?typeof $!="string"&&typeof $!="number"||(x=x||[]).push(X,""+$):X!=="suppressContentEditableWarning"&&X!=="suppressHydrationWarning"&&(s.hasOwnProperty(X)?($!=null&&X==="onScroll"&&zt("scroll",c),x||V===$||(x=[])):(x=x||[]).push(X,$))}m&&(x=x||[]).push("style",m);var X=x;(d.updateQueue=X)&&(d.flags|=4)}},wk=function(c,d,m,w){m!==w&&(d.flags|=4)};function ud(c,d){if(!Kt)switch(c.tailMode){case"hidden":d=c.tail;for(var m=null;d!==null;)d.alternate!==null&&(m=d),d=d.sibling;m===null?c.tail=null:m.sibling=null;break;case"collapsed":m=c.tail;for(var w=null;m!==null;)m.alternate!==null&&(w=m),m=m.sibling;w===null?d||c.tail===null?c.tail=null:c.tail.sibling=null:w.sibling=null}}function Kn(c){var d=c.alternate!==null&&c.alternate.child===c.child,m=0,w=0;if(d)for(var _=c.child;_!==null;)m|=_.lanes|_.childLanes,w|=_.subtreeFlags&14680064,w|=_.flags&14680064,_.return=c,_=_.sibling;else for(_=c.child;_!==null;)m|=_.lanes|_.childLanes,w|=_.subtreeFlags,w|=_.flags,_.return=c,_=_.sibling;return c.subtreeFlags|=w,c.childLanes=m,d}function _6(c,d,m){var w=d.pendingProps;switch(Iw(d),d.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Kn(d),null;case 1:return gi(d.type)&&qf(),Kn(d),null;case 3:return w=d.stateNode,uc(),jt(mi),jt(qn),Hw(),w.pendingContext&&(w.context=w.pendingContext,w.pendingContext=null),(c===null||c.child===null)&&(Xf(d)?d.flags|=4:c===null||c.memoizedState.isDehydrated&&!(d.flags&256)||(d.flags|=1024,Os!==null&&(vv(Os),Os=null))),lv(c,d),Kn(d),null;case 5:zw(d);var _=Fa(rd.current);if(m=d.type,c!==null&&d.stateNode!=null)bk(c,d,m,w,_),c.ref!==d.ref&&(d.flags|=512,d.flags|=2097152);else{if(!w){if(d.stateNode===null)throw Error(e(166));return Kn(d),null}if(c=Fa(ur.current),Xf(d)){w=d.stateNode,m=d.type;var x=d.memoizedProps;switch(w[cr]=d,w[ed]=x,c=(d.mode&1)!==0,m){case"dialog":zt("cancel",w),zt("close",w);break;case"iframe":case"object":case"embed":zt("load",w);break;case"video":case"audio":for(_=0;_<Xu.length;_++)zt(Xu[_],w);break;case"source":zt("error",w);break;case"img":case"image":case"link":zt("error",w),zt("load",w);break;case"details":zt("toggle",w);break;case"input":Aa(w,x),zt("invalid",w);break;case"select":w._wrapperState={wasMultiple:!!x.multiple},zt("invalid",w);break;case"textarea":he(w,x),zt("invalid",w)}Ul(m,x),_=null;for(var I in x)if(x.hasOwnProperty(I)){var V=x[I];I==="children"?typeof V=="string"?w.textContent!==V&&(x.suppressHydrationWarning!==!0&&Hf(w.textContent,V,c),_=["children",V]):typeof V=="number"&&w.textContent!==""+V&&(x.suppressHydrationWarning!==!0&&Hf(w.textContent,V,c),_=["children",""+V]):s.hasOwnProperty(I)&&V!=null&&I==="onScroll"&&zt("scroll",w)}switch(m){case"input":Zt(w),F(w,x,!0);break;case"textarea":Zt(w),Qe(w);break;case"select":case"option":break;default:typeof x.onClick=="function"&&(w.onclick=Uf)}w=_,d.updateQueue=w,w!==null&&(d.flags|=4)}else{I=_.nodeType===9?_:_.ownerDocument,c==="http://www.w3.org/1999/xhtml"&&(c=pt(m)),c==="http://www.w3.org/1999/xhtml"?m==="script"?(c=I.createElement("div"),c.innerHTML="<script><\/script>",c=c.removeChild(c.firstChild)):typeof w.is=="string"?c=I.createElement(m,{is:w.is}):(c=I.createElement(m),m==="select"&&(I=c,w.multiple?I.multiple=!0:w.size&&(I.size=w.size))):c=I.createElementNS(c,m),c[cr]=d,c[ed]=w,pk(c,d,!1,!1),d.stateNode=c;e:{switch(I=To(m,w),m){case"dialog":zt("cancel",c),zt("close",c),_=w;break;case"iframe":case"object":case"embed":zt("load",c),_=w;break;case"video":case"audio":for(_=0;_<Xu.length;_++)zt(Xu[_],c);_=w;break;case"source":zt("error",c),_=w;break;case"img":case"image":case"link":zt("error",c),zt("load",c),_=w;break;case"details":zt("toggle",c),_=w;break;case"input":Aa(c,w),_=Wn(c,w),zt("invalid",c);break;case"option":_=w;break;case"select":c._wrapperState={wasMultiple:!!w.multiple},_=re({},w,{value:void 0}),zt("invalid",c);break;case"textarea":he(c,w),_=be(c,w),zt("invalid",c);break;default:_=w}Ul(m,_),V=_;for(x in V)if(V.hasOwnProperty(x)){var $=V[x];x==="style"?Pa(c,$):x==="dangerouslySetInnerHTML"?($=$?$.__html:void 0,$!=null&&xo(c,$)):x==="children"?typeof $=="string"?(m!=="textarea"||$!=="")&&Is(c,$):typeof $=="number"&&Is(c,""+$):x!=="suppressContentEditableWarning"&&x!=="suppressHydrationWarning"&&x!=="autoFocus"&&(s.hasOwnProperty(x)?$!=null&&x==="onScroll"&&zt("scroll",c):$!=null&&P(c,x,$,I))}switch(m){case"input":Zt(c),F(c,w,!1);break;case"textarea":Zt(c),Qe(c);break;case"option":w.value!=null&&c.setAttribute("value",""+Je(w.value));break;case"select":c.multiple=!!w.multiple,x=w.value,x!=null?ye(c,!!w.multiple,x,!1):w.defaultValue!=null&&ye(c,!!w.multiple,w.defaultValue,!0);break;default:typeof _.onClick=="function"&&(c.onclick=Uf)}switch(m){case"button":case"input":case"select":case"textarea":w=!!w.autoFocus;break e;case"img":w=!0;break e;default:w=!1}}w&&(d.flags|=4)}d.ref!==null&&(d.flags|=512,d.flags|=2097152)}return Kn(d),null;case 6:if(c&&d.stateNode!=null)wk(c,d,c.memoizedProps,w);else{if(typeof w!="string"&&d.stateNode===null)throw Error(e(166));if(m=Fa(rd.current),Fa(ur.current),Xf(d)){if(w=d.stateNode,m=d.memoizedProps,w[cr]=d,(x=w.nodeValue!==m)&&(c=Mi,c!==null))switch(c.tag){case 3:Hf(w.nodeValue,m,(c.mode&1)!==0);break;case 5:c.memoizedProps.suppressHydrationWarning!==!0&&Hf(w.nodeValue,m,(c.mode&1)!==0)}x&&(d.flags|=4)}else w=(m.nodeType===9?m:m.ownerDocument).createTextNode(w),w[cr]=d,d.stateNode=w}return Kn(d),null;case 13:if(jt(Xt),w=d.memoizedState,c===null||c.memoizedState!==null&&c.memoizedState.dehydrated!==null){if(Kt&&Li!==null&&d.mode&1&&!(d.flags&128))_x(),oc(),d.flags|=98560,x=!1;else if(x=Xf(d),w!==null&&w.dehydrated!==null){if(c===null){if(!x)throw Error(e(318));if(x=d.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(e(317));x[cr]=d}else oc(),!(d.flags&128)&&(d.memoizedState=null),d.flags|=4;Kn(d),x=!1}else Os!==null&&(vv(Os),Os=null),x=!0;if(!x)return d.flags&65536?d:null}return d.flags&128?(d.lanes=m,d):(w=w!==null,w!==(c!==null&&c.memoizedState!==null)&&w&&(d.child.flags|=8192,d.mode&1&&(c===null||Xt.current&1?En===0&&(En=3):Ev())),d.updateQueue!==null&&(d.flags|=4),Kn(d),null);case 4:return uc(),lv(c,d),c===null&&Ju(d.stateNode.containerInfo),Kn(d),null;case 10:return Vw(d.type._context),Kn(d),null;case 17:return gi(d.type)&&qf(),Kn(d),null;case 19:if(jt(Xt),x=d.memoizedState,x===null)return Kn(d),null;if(w=(d.flags&128)!==0,I=x.rendering,I===null)if(w)ud(x,!1);else{if(En!==0||c!==null&&c.flags&128)for(c=d.child;c!==null;){if(I=im(c),I!==null){for(d.flags|=128,ud(x,!1),w=I.updateQueue,w!==null&&(d.updateQueue=w,d.flags|=4),d.subtreeFlags=0,w=m,m=d.child;m!==null;)x=m,c=w,x.flags&=14680066,I=x.alternate,I===null?(x.childLanes=0,x.lanes=c,x.child=null,x.subtreeFlags=0,x.memoizedProps=null,x.memoizedState=null,x.updateQueue=null,x.dependencies=null,x.stateNode=null):(x.childLanes=I.childLanes,x.lanes=I.lanes,x.child=I.child,x.subtreeFlags=0,x.deletions=null,x.memoizedProps=I.memoizedProps,x.memoizedState=I.memoizedState,x.updateQueue=I.updateQueue,x.type=I.type,c=I.dependencies,x.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),m=m.sibling;return Lt(Xt,Xt.current&1|2),d.child}c=c.sibling}x.tail!==null&&xt()>mc&&(d.flags|=128,w=!0,ud(x,!1),d.lanes=4194304)}else{if(!w)if(c=im(I),c!==null){if(d.flags|=128,w=!0,m=c.updateQueue,m!==null&&(d.updateQueue=m,d.flags|=4),ud(x,!0),x.tail===null&&x.tailMode==="hidden"&&!I.alternate&&!Kt)return Kn(d),null}else 2*xt()-x.renderingStartTime>mc&&m!==1073741824&&(d.flags|=128,w=!0,ud(x,!1),d.lanes=4194304);x.isBackwards?(I.sibling=d.child,d.child=I):(m=x.last,m!==null?m.sibling=I:d.child=I,x.last=I)}return x.tail!==null?(d=x.tail,x.rendering=d,x.tail=d.sibling,x.renderingStartTime=xt(),d.sibling=null,m=Xt.current,Lt(Xt,w?m&1|2:m&1),d):(Kn(d),null);case 22:case 23:return _v(),w=d.memoizedState!==null,c!==null&&c.memoizedState!==null!==w&&(d.flags|=8192),w&&d.mode&1?Vi&1073741824&&(Kn(d),d.subtreeFlags&6&&(d.flags|=8192)):Kn(d),null;case 24:return null;case 25:return null}throw Error(e(156,d.tag))}function E6(c,d){switch(Iw(d),d.tag){case 1:return gi(d.type)&&qf(),c=d.flags,c&65536?(d.flags=c&-65537|128,d):null;case 3:return uc(),jt(mi),jt(qn),Hw(),c=d.flags,c&65536&&!(c&128)?(d.flags=c&-65537|128,d):null;case 5:return zw(d),null;case 13:if(jt(Xt),c=d.memoizedState,c!==null&&c.dehydrated!==null){if(d.alternate===null)throw Error(e(340));oc()}return c=d.flags,c&65536?(d.flags=c&-65537|128,d):null;case 19:return jt(Xt),null;case 4:return uc(),null;case 10:return Vw(d.type._context),null;case 22:case 23:return _v(),null;case 24:return null;default:return null}}var hm=!1,Yn=!1,C6=typeof WeakSet=="function"?WeakSet:Set,Pe=null;function hc(c,d){var m=c.ref;if(m!==null)if(typeof m=="function")try{m(null)}catch(w){nn(c,d,w)}else m.current=null}function cv(c,d,m){try{m()}catch(w){nn(c,d,w)}}var vk=!1;function x6(c,d){if(_w=Of,c=XC(),fw(c)){if("selectionStart"in c)var m={start:c.selectionStart,end:c.selectionEnd};else e:{m=(m=c.ownerDocument)&&m.defaultView||window;var w=m.getSelection&&m.getSelection();if(w&&w.rangeCount!==0){m=w.anchorNode;var _=w.anchorOffset,x=w.focusNode;w=w.focusOffset;try{m.nodeType,x.nodeType}catch{m=null;break e}var I=0,V=-1,$=-1,X=0,ce=0,fe=c,oe=null;t:for(;;){for(var Se;fe!==m||_!==0&&fe.nodeType!==3||(V=I+_),fe!==x||w!==0&&fe.nodeType!==3||($=I+w),fe.nodeType===3&&(I+=fe.nodeValue.length),(Se=fe.firstChild)!==null;)oe=fe,fe=Se;for(;;){if(fe===c)break t;if(oe===m&&++X===_&&(V=I),oe===x&&++ce===w&&($=I),(Se=fe.nextSibling)!==null)break;fe=oe,oe=fe.parentNode}fe=Se}m=V===-1||$===-1?null:{start:V,end:$}}else m=null}m=m||{start:0,end:0}}else m=null;for(Ew={focusedElem:c,selectionRange:m},Of=!1,Pe=d;Pe!==null;)if(d=Pe,c=d.child,(d.subtreeFlags&1028)!==0&&c!==null)c.return=d,Pe=c;else for(;Pe!==null;){d=Pe;try{var Ie=d.alternate;if(d.flags&1024)switch(d.tag){case 0:case 11:case 15:break;case 1:if(Ie!==null){var Ne=Ie.memoizedProps,dn=Ie.memoizedState,G=d.stateNode,H=G.getSnapshotBeforeUpdate(d.elementType===d.type?Ne:Ns(d.type,Ne),dn);G.__reactInternalSnapshotBeforeUpdate=H}break;case 3:var K=d.stateNode.containerInfo;K.nodeType===1?K.textContent="":K.nodeType===9&&K.documentElement&&K.removeChild(K.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(e(163))}}catch(we){nn(d,d.return,we)}if(c=d.sibling,c!==null){c.return=d.return,Pe=c;break}Pe=d.return}return Ie=vk,vk=!1,Ie}function dd(c,d,m){var w=d.updateQueue;if(w=w!==null?w.lastEffect:null,w!==null){var _=w=w.next;do{if((_.tag&c)===c){var x=_.destroy;_.destroy=void 0,x!==void 0&&cv(d,m,x)}_=_.next}while(_!==w)}}function fm(c,d){if(d=d.updateQueue,d=d!==null?d.lastEffect:null,d!==null){var m=d=d.next;do{if((m.tag&c)===c){var w=m.create;m.destroy=w()}m=m.next}while(m!==d)}}function uv(c){var d=c.ref;if(d!==null){var m=c.stateNode;switch(c.tag){case 5:c=m;break;default:c=m}typeof d=="function"?d(c):d.current=c}}function yk(c){var d=c.alternate;d!==null&&(c.alternate=null,yk(d)),c.child=null,c.deletions=null,c.sibling=null,c.tag===5&&(d=c.stateNode,d!==null&&(delete d[cr],delete d[ed],delete d[Tw],delete d[o6],delete d[a6])),c.stateNode=null,c.return=null,c.dependencies=null,c.memoizedProps=null,c.memoizedState=null,c.pendingProps=null,c.stateNode=null,c.updateQueue=null}function _k(c){return c.tag===5||c.tag===3||c.tag===4}function Ek(c){e:for(;;){for(;c.sibling===null;){if(c.return===null||_k(c.return))return null;c=c.return}for(c.sibling.return=c.return,c=c.sibling;c.tag!==5&&c.tag!==6&&c.tag!==18;){if(c.flags&2||c.child===null||c.tag===4)continue e;c.child.return=c,c=c.child}if(!(c.flags&2))return c.stateNode}}function dv(c,d,m){var w=c.tag;if(w===5||w===6)c=c.stateNode,d?m.nodeType===8?m.parentNode.insertBefore(c,d):m.insertBefore(c,d):(m.nodeType===8?(d=m.parentNode,d.insertBefore(c,m)):(d=m,d.appendChild(c)),m=m._reactRootContainer,m!=null||d.onclick!==null||(d.onclick=Uf));else if(w!==4&&(c=c.child,c!==null))for(dv(c,d,m),c=c.sibling;c!==null;)dv(c,d,m),c=c.sibling}function hv(c,d,m){var w=c.tag;if(w===5||w===6)c=c.stateNode,d?m.insertBefore(c,d):m.appendChild(c);else if(w!==4&&(c=c.child,c!==null))for(hv(c,d,m),c=c.sibling;c!==null;)hv(c,d,m),c=c.sibling}var Dn=null,Ms=!1;function Ho(c,d,m){for(m=m.child;m!==null;)Ck(c,d,m),m=m.sibling}function Ck(c,d,m){if(Vn&&typeof Vn.onCommitFiberUnmount=="function")try{Vn.onCommitFiberUnmount($t,m)}catch{}switch(m.tag){case 5:Yn||hc(m,d);case 6:var w=Dn,_=Ms;Dn=null,Ho(c,d,m),Dn=w,Ms=_,Dn!==null&&(Ms?(c=Dn,m=m.stateNode,c.nodeType===8?c.parentNode.removeChild(m):c.removeChild(m)):Dn.removeChild(m.stateNode));break;case 18:Dn!==null&&(Ms?(c=Dn,m=m.stateNode,c.nodeType===8?kw(c.parentNode,m):c.nodeType===1&&kw(c,m),Hu(c)):kw(Dn,m.stateNode));break;case 4:w=Dn,_=Ms,Dn=m.stateNode.containerInfo,Ms=!0,Ho(c,d,m),Dn=w,Ms=_;break;case 0:case 11:case 14:case 15:if(!Yn&&(w=m.updateQueue,w!==null&&(w=w.lastEffect,w!==null))){_=w=w.next;do{var x=_,I=x.destroy;x=x.tag,I!==void 0&&(x&2||x&4)&&cv(m,d,I),_=_.next}while(_!==w)}Ho(c,d,m);break;case 1:if(!Yn&&(hc(m,d),w=m.stateNode,typeof w.componentWillUnmount=="function"))try{w.props=m.memoizedProps,w.state=m.memoizedState,w.componentWillUnmount()}catch(V){nn(m,d,V)}Ho(c,d,m);break;case 21:Ho(c,d,m);break;case 22:m.mode&1?(Yn=(w=Yn)||m.memoizedState!==null,Ho(c,d,m),Yn=w):Ho(c,d,m);break;default:Ho(c,d,m)}}function xk(c){var d=c.updateQueue;if(d!==null){c.updateQueue=null;var m=c.stateNode;m===null&&(m=c.stateNode=new C6),d.forEach(function(w){var _=N6.bind(null,c,w);m.has(w)||(m.add(w),w.then(_,_))})}}function Ls(c,d){var m=d.deletions;if(m!==null)for(var w=0;w<m.length;w++){var _=m[w];try{var x=c,I=d,V=I;e:for(;V!==null;){switch(V.tag){case 5:Dn=V.stateNode,Ms=!1;break e;case 3:Dn=V.stateNode.containerInfo,Ms=!0;break e;case 4:Dn=V.stateNode.containerInfo,Ms=!0;break e}V=V.return}if(Dn===null)throw Error(e(160));Ck(x,I,_),Dn=null,Ms=!1;var $=_.alternate;$!==null&&($.return=null),_.return=null}catch(X){nn(_,d,X)}}if(d.subtreeFlags&12854)for(d=d.child;d!==null;)kk(d,c),d=d.sibling}function kk(c,d){var m=c.alternate,w=c.flags;switch(c.tag){case 0:case 11:case 14:case 15:if(Ls(d,c),hr(c),w&4){try{dd(3,c,c.return),fm(3,c)}catch(Ne){nn(c,c.return,Ne)}try{dd(5,c,c.return)}catch(Ne){nn(c,c.return,Ne)}}break;case 1:Ls(d,c),hr(c),w&512&&m!==null&&hc(m,m.return);break;case 5:if(Ls(d,c),hr(c),w&512&&m!==null&&hc(m,m.return),c.flags&32){var _=c.stateNode;try{Is(_,"")}catch(Ne){nn(c,c.return,Ne)}}if(w&4&&(_=c.stateNode,_!=null)){var x=c.memoizedProps,I=m!==null?m.memoizedProps:x,V=c.type,$=c.updateQueue;if(c.updateQueue=null,$!==null)try{V==="input"&&x.type==="radio"&&x.name!=null&&Co(_,x),To(V,I);var X=To(V,x);for(I=0;I<$.length;I+=2){var ce=$[I],fe=$[I+1];ce==="style"?Pa(_,fe):ce==="dangerouslySetInnerHTML"?xo(_,fe):ce==="children"?Is(_,fe):P(_,ce,fe,X)}switch(V){case"input":lr(_,x);break;case"textarea":Me(_,x);break;case"select":var oe=_._wrapperState.wasMultiple;_._wrapperState.wasMultiple=!!x.multiple;var Se=x.value;Se!=null?ye(_,!!x.multiple,Se,!1):oe!==!!x.multiple&&(x.defaultValue!=null?ye(_,!!x.multiple,x.defaultValue,!0):ye(_,!!x.multiple,x.multiple?[]:"",!1))}_[ed]=x}catch(Ne){nn(c,c.return,Ne)}}break;case 6:if(Ls(d,c),hr(c),w&4){if(c.stateNode===null)throw Error(e(162));_=c.stateNode,x=c.memoizedProps;try{_.nodeValue=x}catch(Ne){nn(c,c.return,Ne)}}break;case 3:if(Ls(d,c),hr(c),w&4&&m!==null&&m.memoizedState.isDehydrated)try{Hu(d.containerInfo)}catch(Ne){nn(c,c.return,Ne)}break;case 4:Ls(d,c),hr(c);break;case 13:Ls(d,c),hr(c),_=c.child,_.flags&8192&&(x=_.memoizedState!==null,_.stateNode.isHidden=x,!x||_.alternate!==null&&_.alternate.memoizedState!==null||(gv=xt())),w&4&&xk(c);break;case 22:if(ce=m!==null&&m.memoizedState!==null,c.mode&1?(Yn=(X=Yn)||ce,Ls(d,c),Yn=X):Ls(d,c),hr(c),w&8192){if(X=c.memoizedState!==null,(c.stateNode.isHidden=X)&&!ce&&c.mode&1)for(Pe=c,ce=c.child;ce!==null;){for(fe=Pe=ce;Pe!==null;){switch(oe=Pe,Se=oe.child,oe.tag){case 0:case 11:case 14:case 15:dd(4,oe,oe.return);break;case 1:hc(oe,oe.return);var Ie=oe.stateNode;if(typeof Ie.componentWillUnmount=="function"){w=oe,m=oe.return;try{d=w,Ie.props=d.memoizedProps,Ie.state=d.memoizedState,Ie.componentWillUnmount()}catch(Ne){nn(w,m,Ne)}}break;case 5:hc(oe,oe.return);break;case 22:if(oe.memoizedState!==null){Ak(fe);continue}}Se!==null?(Se.return=oe,Pe=Se):Ak(fe)}ce=ce.sibling}e:for(ce=null,fe=c;;){if(fe.tag===5){if(ce===null){ce=fe;try{_=fe.stateNode,X?(x=_.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none"):(V=fe.stateNode,$=fe.memoizedProps.style,I=$!=null&&$.hasOwnProperty("display")?$.display:null,V.style.display=ko("display",I))}catch(Ne){nn(c,c.return,Ne)}}}else if(fe.tag===6){if(ce===null)try{fe.stateNode.nodeValue=X?"":fe.memoizedProps}catch(Ne){nn(c,c.return,Ne)}}else if((fe.tag!==22&&fe.tag!==23||fe.memoizedState===null||fe===c)&&fe.child!==null){fe.child.return=fe,fe=fe.child;continue}if(fe===c)break e;for(;fe.sibling===null;){if(fe.return===null||fe.return===c)break e;ce===fe&&(ce=null),fe=fe.return}ce===fe&&(ce=null),fe.sibling.return=fe.return,fe=fe.sibling}}break;case 19:Ls(d,c),hr(c),w&4&&xk(c);break;case 21:break;default:Ls(d,c),hr(c)}}function hr(c){var d=c.flags;if(d&2){try{e:{for(var m=c.return;m!==null;){if(_k(m)){var w=m;break e}m=m.return}throw Error(e(160))}switch(w.tag){case 5:var _=w.stateNode;w.flags&32&&(Is(_,""),w.flags&=-33);var x=Ek(c);hv(c,x,_);break;case 3:case 4:var I=w.stateNode.containerInfo,V=Ek(c);dv(c,V,I);break;default:throw Error(e(161))}}catch($){nn(c,c.return,$)}c.flags&=-3}d&4096&&(c.flags&=-4097)}function k6(c,d,m){Pe=c,Tk(c)}function Tk(c,d,m){for(var w=(c.mode&1)!==0;Pe!==null;){var _=Pe,x=_.child;if(_.tag===22&&w){var I=_.memoizedState!==null||hm;if(!I){var V=_.alternate,$=V!==null&&V.memoizedState!==null||Yn;V=hm;var X=Yn;if(hm=I,(Yn=$)&&!X)for(Pe=_;Pe!==null;)I=Pe,$=I.child,I.tag===22&&I.memoizedState!==null?Pk(_):$!==null?($.return=I,Pe=$):Pk(_);for(;x!==null;)Pe=x,Tk(x),x=x.sibling;Pe=_,hm=V,Yn=X}Sk(c)}else _.subtreeFlags&8772&&x!==null?(x.return=_,Pe=x):Sk(c)}}function Sk(c){for(;Pe!==null;){var d=Pe;if(d.flags&8772){var m=d.alternate;try{if(d.flags&8772)switch(d.tag){case 0:case 11:case 15:Yn||fm(5,d);break;case 1:var w=d.stateNode;if(d.flags&4&&!Yn)if(m===null)w.componentDidMount();else{var _=d.elementType===d.type?m.memoizedProps:Ns(d.type,m.memoizedProps);w.componentDidUpdate(_,m.memoizedState,w.__reactInternalSnapshotBeforeUpdate)}var x=d.updateQueue;x!==null&&Ax(d,x,w);break;case 3:var I=d.updateQueue;if(I!==null){if(m=null,d.child!==null)switch(d.child.tag){case 5:m=d.child.stateNode;break;case 1:m=d.child.stateNode}Ax(d,I,m)}break;case 5:var V=d.stateNode;if(m===null&&d.flags&4){m=V;var $=d.memoizedProps;switch(d.type){case"button":case"input":case"select":case"textarea":$.autoFocus&&m.focus();break;case"img":$.src&&(m.src=$.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(d.memoizedState===null){var X=d.alternate;if(X!==null){var ce=X.memoizedState;if(ce!==null){var fe=ce.dehydrated;fe!==null&&Hu(fe)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(e(163))}Yn||d.flags&512&&uv(d)}catch(oe){nn(d,d.return,oe)}}if(d===c){Pe=null;break}if(m=d.sibling,m!==null){m.return=d.return,Pe=m;break}Pe=d.return}}function Ak(c){for(;Pe!==null;){var d=Pe;if(d===c){Pe=null;break}var m=d.sibling;if(m!==null){m.return=d.return,Pe=m;break}Pe=d.return}}function Pk(c){for(;Pe!==null;){var d=Pe;try{switch(d.tag){case 0:case 11:case 15:var m=d.return;try{fm(4,d)}catch($){nn(d,m,$)}break;case 1:var w=d.stateNode;if(typeof w.componentDidMount=="function"){var _=d.return;try{w.componentDidMount()}catch($){nn(d,_,$)}}var x=d.return;try{uv(d)}catch($){nn(d,x,$)}break;case 5:var I=d.return;try{uv(d)}catch($){nn(d,I,$)}}}catch($){nn(d,d.return,$)}if(d===c){Pe=null;break}var V=d.sibling;if(V!==null){V.return=d.return,Pe=V;break}Pe=d.return}}var T6=Math.ceil,mm=S.ReactCurrentDispatcher,fv=S.ReactCurrentOwner,ds=S.ReactCurrentBatchConfig,bt=0,An=null,mn=null,Bn=0,Vi=0,fc=Bo(0),En=0,hd=null,za=0,gm=0,mv=0,fd=null,bi=null,gv=0,mc=1/0,Hr=null,pm=!1,pv=null,Uo=null,bm=!1,Wo=null,wm=0,md=0,bv=null,vm=-1,ym=0;function si(){return bt&6?xt():vm!==-1?vm:vm=xt()}function qo(c){return c.mode&1?bt&2&&Bn!==0?Bn&-Bn:c6.transition!==null?(ym===0&&(ym=EC()),ym):(c=Tt,c!==0||(c=window.event,c=c===void 0?16:RC(c.type)),c):1}function Vs(c,d,m,w){if(50<md)throw md=0,bv=null,Error(e(185));Bu(c,m,w),(!(bt&2)||c!==An)&&(c===An&&(!(bt&2)&&(gm|=m),En===4&&Go(c,Bn)),wi(c,w),m===1&&bt===0&&!(d.mode&1)&&(mc=xt()+500,Kf&&$o()))}function wi(c,d){var m=c.callbackNode;cD(c,d);var w=Pf(c,c===An?Bn:0);if(w===0)m!==null&&Ri(m),c.callbackNode=null,c.callbackPriority=0;else if(d=w&-w,c.callbackPriority!==d){if(m!=null&&Ri(m),d===1)c.tag===0?l6(Rk.bind(null,c)):px(Rk.bind(null,c)),s6(function(){!(bt&6)&&$o()}),m=null;else{switch(CC(w)){case 1:m=Po;break;case 4:m=kt;break;case 16:m=un;break;case 536870912:m=Io;break;default:m=un}m=Fk(m,Ik.bind(null,c))}c.callbackPriority=d,c.callbackNode=m}}function Ik(c,d){if(vm=-1,ym=0,bt&6)throw Error(e(327));var m=c.callbackNode;if(gc()&&c.callbackNode!==m)return null;var w=Pf(c,c===An?Bn:0);if(w===0)return null;if(w&30||w&c.expiredLanes||d)d=_m(c,w);else{d=w;var _=bt;bt|=2;var x=Nk();(An!==c||Bn!==d)&&(Hr=null,mc=xt()+500,Ha(c,d));do try{P6();break}catch(V){Ok(c,V)}while(!0);Lw(),mm.current=x,bt=_,mn!==null?d=0:(An=null,Bn=0,d=En)}if(d!==0){if(d===2&&(_=Xb(c),_!==0&&(w=_,d=wv(c,_))),d===1)throw m=hd,Ha(c,0),Go(c,w),wi(c,xt()),m;if(d===6)Go(c,w);else{if(_=c.current.alternate,!(w&30)&&!S6(_)&&(d=_m(c,w),d===2&&(x=Xb(c),x!==0&&(w=x,d=wv(c,x))),d===1))throw m=hd,Ha(c,0),Go(c,w),wi(c,xt()),m;switch(c.finishedWork=_,c.finishedLanes=w,d){case 0:case 1:throw Error(e(345));case 2:Ua(c,bi,Hr);break;case 3:if(Go(c,w),(w&130023424)===w&&(d=gv+500-xt(),10<d)){if(Pf(c,0)!==0)break;if(_=c.suspendedLanes,(_&w)!==w){si(),c.pingedLanes|=c.suspendedLanes&_;break}c.timeoutHandle=xw(Ua.bind(null,c,bi,Hr),d);break}Ua(c,bi,Hr);break;case 4:if(Go(c,w),(w&4194240)===w)break;for(d=c.eventTimes,_=-1;0<w;){var I=31-Oi(w);x=1<<I,I=d[I],I>_&&(_=I),w&=~x}if(w=_,w=xt()-w,w=(120>w?120:480>w?480:1080>w?1080:1920>w?1920:3e3>w?3e3:4320>w?4320:1960*T6(w/1960))-w,10<w){c.timeoutHandle=xw(Ua.bind(null,c,bi,Hr),w);break}Ua(c,bi,Hr);break;case 5:Ua(c,bi,Hr);break;default:throw Error(e(329))}}}return wi(c,xt()),c.callbackNode===m?Ik.bind(null,c):null}function wv(c,d){var m=fd;return c.current.memoizedState.isDehydrated&&(Ha(c,d).flags|=256),c=_m(c,d),c!==2&&(d=bi,bi=m,d!==null&&vv(d)),c}function vv(c){bi===null?bi=c:bi.push.apply(bi,c)}function S6(c){for(var d=c;;){if(d.flags&16384){var m=d.updateQueue;if(m!==null&&(m=m.stores,m!==null))for(var w=0;w<m.length;w++){var _=m[w],x=_.getSnapshot;_=_.value;try{if(!Rs(x(),_))return!1}catch{return!1}}}if(m=d.child,d.subtreeFlags&16384&&m!==null)m.return=d,d=m;else{if(d===c)break;for(;d.sibling===null;){if(d.return===null||d.return===c)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function Go(c,d){for(d&=~mv,d&=~gm,c.suspendedLanes|=d,c.pingedLanes&=~d,c=c.expirationTimes;0<d;){var m=31-Oi(d),w=1<<m;c[m]=-1,d&=~w}}function Rk(c){if(bt&6)throw Error(e(327));gc();var d=Pf(c,0);if(!(d&1))return wi(c,xt()),null;var m=_m(c,d);if(c.tag!==0&&m===2){var w=Xb(c);w!==0&&(d=w,m=wv(c,w))}if(m===1)throw m=hd,Ha(c,0),Go(c,d),wi(c,xt()),m;if(m===6)throw Error(e(345));return c.finishedWork=c.current.alternate,c.finishedLanes=d,Ua(c,bi,Hr),wi(c,xt()),null}function yv(c,d){var m=bt;bt|=1;try{return c(d)}finally{bt=m,bt===0&&(mc=xt()+500,Kf&&$o())}}function ja(c){Wo!==null&&Wo.tag===0&&!(bt&6)&&gc();var d=bt;bt|=1;var m=ds.transition,w=Tt;try{if(ds.transition=null,Tt=1,c)return c()}finally{Tt=w,ds.transition=m,bt=d,!(bt&6)&&$o()}}function _v(){Vi=fc.current,jt(fc)}function Ha(c,d){c.finishedWork=null,c.finishedLanes=0;var m=c.timeoutHandle;if(m!==-1&&(c.timeoutHandle=-1,i6(m)),mn!==null)for(m=mn.return;m!==null;){var w=m;switch(Iw(w),w.tag){case 1:w=w.type.childContextTypes,w!=null&&qf();break;case 3:uc(),jt(mi),jt(qn),Hw();break;case 5:zw(w);break;case 4:uc();break;case 13:jt(Xt);break;case 19:jt(Xt);break;case 10:Vw(w.type._context);break;case 22:case 23:_v()}m=m.return}if(An=c,mn=c=Ko(c.current,null),Bn=Vi=d,En=0,hd=null,mv=gm=za=0,bi=fd=null,Ba!==null){for(d=0;d<Ba.length;d++)if(m=Ba[d],w=m.interleaved,w!==null){m.interleaved=null;var _=w.next,x=m.pending;if(x!==null){var I=x.next;x.next=_,w.next=I}m.pending=w}Ba=null}return c}function Ok(c,d){do{var m=mn;try{if(Lw(),sm.current=lm,rm){for(var w=Jt.memoizedState;w!==null;){var _=w.queue;_!==null&&(_.pending=null),w=w.next}rm=!1}if($a=0,Sn=_n=Jt=null,od=!1,ad=0,fv.current=null,m===null||m.return===null){En=1,hd=d,mn=null;break}e:{var x=c,I=m.return,V=m,$=d;if(d=Bn,V.flags|=32768,$!==null&&typeof $=="object"&&typeof $.then=="function"){var X=$,ce=V,fe=ce.tag;if(!(ce.mode&1)&&(fe===0||fe===11||fe===15)){var oe=ce.alternate;oe?(ce.updateQueue=oe.updateQueue,ce.memoizedState=oe.memoizedState,ce.lanes=oe.lanes):(ce.updateQueue=null,ce.memoizedState=null)}var Se=ik(I);if(Se!==null){Se.flags&=-257,sk(Se,I,V,x,d),Se.mode&1&&nk(x,X,d),d=Se,$=X;var Ie=d.updateQueue;if(Ie===null){var Ne=new Set;Ne.add($),d.updateQueue=Ne}else Ie.add($);break e}else{if(!(d&1)){nk(x,X,d),Ev();break e}$=Error(e(426))}}else if(Kt&&V.mode&1){var dn=ik(I);if(dn!==null){!(dn.flags&65536)&&(dn.flags|=256),sk(dn,I,V,x,d),Nw(dc($,V));break e}}x=$=dc($,V),En!==4&&(En=2),fd===null?fd=[x]:fd.push(x),x=I;do{switch(x.tag){case 3:x.flags|=65536,d&=-d,x.lanes|=d;var G=ek(x,$,d);Sx(x,G);break e;case 1:V=$;var H=x.type,K=x.stateNode;if(!(x.flags&128)&&(typeof H.getDerivedStateFromError=="function"||K!==null&&typeof K.componentDidCatch=="function"&&(Uo===null||!Uo.has(K)))){x.flags|=65536,d&=-d,x.lanes|=d;var we=tk(x,V,d);Sx(x,we);break e}}x=x.return}while(x!==null)}Lk(m)}catch(De){d=De,mn===m&&m!==null&&(mn=m=m.return);continue}break}while(!0)}function Nk(){var c=mm.current;return mm.current=lm,c===null?lm:c}function Ev(){(En===0||En===3||En===2)&&(En=4),An===null||!(za&268435455)&&!(gm&268435455)||Go(An,Bn)}function _m(c,d){var m=bt;bt|=2;var w=Nk();(An!==c||Bn!==d)&&(Hr=null,Ha(c,d));do try{A6();break}catch(_){Ok(c,_)}while(!0);if(Lw(),bt=m,mm.current=w,mn!==null)throw Error(e(261));return An=null,Bn=0,En}function A6(){for(;mn!==null;)Mk(mn)}function P6(){for(;mn!==null&&!Vu();)Mk(mn)}function Mk(c){var d=Bk(c.alternate,c,Vi);c.memoizedProps=c.pendingProps,d===null?Lk(c):mn=d,fv.current=null}function Lk(c){var d=c;do{var m=d.alternate;if(c=d.return,d.flags&32768){if(m=E6(m,d),m!==null){m.flags&=32767,mn=m;return}if(c!==null)c.flags|=32768,c.subtreeFlags=0,c.deletions=null;else{En=6,mn=null;return}}else if(m=_6(m,d,Vi),m!==null){mn=m;return}if(d=d.sibling,d!==null){mn=d;return}mn=d=c}while(d!==null);En===0&&(En=5)}function Ua(c,d,m){var w=Tt,_=ds.transition;try{ds.transition=null,Tt=1,I6(c,d,m,w)}finally{ds.transition=_,Tt=w}return null}function I6(c,d,m,w){do gc();while(Wo!==null);if(bt&6)throw Error(e(327));m=c.finishedWork;var _=c.finishedLanes;if(m===null)return null;if(c.finishedWork=null,c.finishedLanes=0,m===c.current)throw Error(e(177));c.callbackNode=null,c.callbackPriority=0;var x=m.lanes|m.childLanes;if(uD(c,x),c===An&&(mn=An=null,Bn=0),!(m.subtreeFlags&2064)&&!(m.flags&2064)||bm||(bm=!0,Fk(un,function(){return gc(),null})),x=(m.flags&15990)!==0,m.subtreeFlags&15990||x){x=ds.transition,ds.transition=null;var I=Tt;Tt=1;var V=bt;bt|=4,fv.current=null,x6(c,m),kk(m,c),ZD(Ew),Of=!!_w,Ew=_w=null,c.current=m,k6(m),Na(),bt=V,Tt=I,ds.transition=x}else c.current=m;if(bm&&(bm=!1,Wo=c,wm=_),x=c.pendingLanes,x===0&&(Uo=null),Tf(m.stateNode),wi(c,xt()),d!==null)for(w=c.onRecoverableError,m=0;m<d.length;m++)_=d[m],w(_.value,{componentStack:_.stack,digest:_.digest});if(pm)throw pm=!1,c=pv,pv=null,c;return wm&1&&c.tag!==0&&gc(),x=c.pendingLanes,x&1?c===bv?md++:(md=0,bv=c):md=0,$o(),null}function gc(){if(Wo!==null){var c=CC(wm),d=ds.transition,m=Tt;try{if(ds.transition=null,Tt=16>c?16:c,Wo===null)var w=!1;else{if(c=Wo,Wo=null,wm=0,bt&6)throw Error(e(331));var _=bt;for(bt|=4,Pe=c.current;Pe!==null;){var x=Pe,I=x.child;if(Pe.flags&16){var V=x.deletions;if(V!==null){for(var $=0;$<V.length;$++){var X=V[$];for(Pe=X;Pe!==null;){var ce=Pe;switch(ce.tag){case 0:case 11:case 15:dd(8,ce,x)}var fe=ce.child;if(fe!==null)fe.return=ce,Pe=fe;else for(;Pe!==null;){ce=Pe;var oe=ce.sibling,Se=ce.return;if(yk(ce),ce===X){Pe=null;break}if(oe!==null){oe.return=Se,Pe=oe;break}Pe=Se}}}var Ie=x.alternate;if(Ie!==null){var Ne=Ie.child;if(Ne!==null){Ie.child=null;do{var dn=Ne.sibling;Ne.sibling=null,Ne=dn}while(Ne!==null)}}Pe=x}}if(x.subtreeFlags&2064&&I!==null)I.return=x,Pe=I;else e:for(;Pe!==null;){if(x=Pe,x.flags&2048)switch(x.tag){case 0:case 11:case 15:dd(9,x,x.return)}var G=x.sibling;if(G!==null){G.return=x.return,Pe=G;break e}Pe=x.return}}var H=c.current;for(Pe=H;Pe!==null;){I=Pe;var K=I.child;if(I.subtreeFlags&2064&&K!==null)K.return=I,Pe=K;else e:for(I=H;Pe!==null;){if(V=Pe,V.flags&2048)try{switch(V.tag){case 0:case 11:case 15:fm(9,V)}}catch(De){nn(V,V.return,De)}if(V===I){Pe=null;break e}var we=V.sibling;if(we!==null){we.return=V.return,Pe=we;break e}Pe=V.return}}if(bt=_,$o(),Vn&&typeof Vn.onPostCommitFiberRoot=="function")try{Vn.onPostCommitFiberRoot($t,c)}catch{}w=!0}return w}finally{Tt=m,ds.transition=d}}return!1}function Vk(c,d,m){d=dc(m,d),d=ek(c,d,1),c=jo(c,d,1),d=si(),c!==null&&(Bu(c,1,d),wi(c,d))}function nn(c,d,m){if(c.tag===3)Vk(c,c,m);else for(;d!==null;){if(d.tag===3){Vk(d,c,m);break}else if(d.tag===1){var w=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof w.componentDidCatch=="function"&&(Uo===null||!Uo.has(w))){c=dc(m,c),c=tk(d,c,1),d=jo(d,c,1),c=si(),d!==null&&(Bu(d,1,c),wi(d,c));break}}d=d.return}}function R6(c,d,m){var w=c.pingCache;w!==null&&w.delete(d),d=si(),c.pingedLanes|=c.suspendedLanes&m,An===c&&(Bn&m)===m&&(En===4||En===3&&(Bn&130023424)===Bn&&500>xt()-gv?Ha(c,0):mv|=m),wi(c,d)}function Dk(c,d){d===0&&(c.mode&1?(d=Af,Af<<=1,!(Af&130023424)&&(Af=4194304)):d=1);var m=si();c=$r(c,d),c!==null&&(Bu(c,d,m),wi(c,m))}function O6(c){var d=c.memoizedState,m=0;d!==null&&(m=d.retryLane),Dk(c,m)}function N6(c,d){var m=0;switch(c.tag){case 13:var w=c.stateNode,_=c.memoizedState;_!==null&&(m=_.retryLane);break;case 19:w=c.stateNode;break;default:throw Error(e(314))}w!==null&&w.delete(d),Dk(c,m)}var Bk;Bk=function(c,d,m){if(c!==null)if(c.memoizedProps!==d.pendingProps||mi.current)pi=!0;else{if(!(c.lanes&m)&&!(d.flags&128))return pi=!1,y6(c,d,m);pi=!!(c.flags&131072)}else pi=!1,Kt&&d.flags&1048576&&bx(d,Zf,d.index);switch(d.lanes=0,d.tag){case 2:var w=d.type;dm(c,d),c=d.pendingProps;var _=ic(d,qn.current);cc(d,m),_=qw(null,d,w,c,_,m);var x=Gw();return d.flags|=1,typeof _=="object"&&_!==null&&typeof _.render=="function"&&_.$$typeof===void 0?(d.tag=1,d.memoizedState=null,d.updateQueue=null,gi(w)?(x=!0,Gf(d)):x=!1,d.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,Fw(d),_.updater=cm,d.stateNode=_,_._reactInternals=d,Qw(d,w,c,m),d=iv(null,d,w,!0,x,m)):(d.tag=0,Kt&&x&&Pw(d),ii(null,d,_,m),d=d.child),d;case 16:w=d.elementType;e:{switch(dm(c,d),c=d.pendingProps,_=w._init,w=_(w._payload),d.type=w,_=d.tag=L6(w),c=Ns(w,c),_){case 0:d=nv(null,d,w,c,m);break e;case 1:d=uk(null,d,w,c,m);break e;case 11:d=rk(null,d,w,c,m);break e;case 14:d=ok(null,d,w,Ns(w.type,c),m);break e}throw Error(e(306,w,""))}return d;case 0:return w=d.type,_=d.pendingProps,_=d.elementType===w?_:Ns(w,_),nv(c,d,w,_,m);case 1:return w=d.type,_=d.pendingProps,_=d.elementType===w?_:Ns(w,_),uk(c,d,w,_,m);case 3:e:{if(dk(d),c===null)throw Error(e(387));w=d.pendingProps,x=d.memoizedState,_=x.element,Tx(c,d),nm(d,w,null,m);var I=d.memoizedState;if(w=I.element,x.isDehydrated)if(x={element:w,isDehydrated:!1,cache:I.cache,pendingSuspenseBoundaries:I.pendingSuspenseBoundaries,transitions:I.transitions},d.updateQueue.baseState=x,d.memoizedState=x,d.flags&256){_=dc(Error(e(423)),d),d=hk(c,d,w,m,_);break e}else if(w!==_){_=dc(Error(e(424)),d),d=hk(c,d,w,m,_);break e}else for(Li=Do(d.stateNode.containerInfo.firstChild),Mi=d,Kt=!0,Os=null,m=xx(d,null,w,m),d.child=m;m;)m.flags=m.flags&-3|4096,m=m.sibling;else{if(oc(),w===_){d=jr(c,d,m);break e}ii(c,d,w,m)}d=d.child}return d;case 5:return Px(d),c===null&&Ow(d),w=d.type,_=d.pendingProps,x=c!==null?c.memoizedProps:null,I=_.children,Cw(w,_)?I=null:x!==null&&Cw(w,x)&&(d.flags|=32),ck(c,d),ii(c,d,I,m),d.child;case 6:return c===null&&Ow(d),null;case 13:return fk(c,d,m);case 4:return $w(d,d.stateNode.containerInfo),w=d.pendingProps,c===null?d.child=ac(d,null,w,m):ii(c,d,w,m),d.child;case 11:return w=d.type,_=d.pendingProps,_=d.elementType===w?_:Ns(w,_),rk(c,d,w,_,m);case 7:return ii(c,d,d.pendingProps,m),d.child;case 8:return ii(c,d,d.pendingProps.children,m),d.child;case 12:return ii(c,d,d.pendingProps.children,m),d.child;case 10:e:{if(w=d.type._context,_=d.pendingProps,x=d.memoizedProps,I=_.value,Lt(Qf,w._currentValue),w._currentValue=I,x!==null)if(Rs(x.value,I)){if(x.children===_.children&&!mi.current){d=jr(c,d,m);break e}}else for(x=d.child,x!==null&&(x.return=d);x!==null;){var V=x.dependencies;if(V!==null){I=x.child;for(var $=V.firstContext;$!==null;){if($.context===w){if(x.tag===1){$=zr(-1,m&-m),$.tag=2;var X=x.updateQueue;if(X!==null){X=X.shared;var ce=X.pending;ce===null?$.next=$:($.next=ce.next,ce.next=$),X.pending=$}}x.lanes|=m,$=x.alternate,$!==null&&($.lanes|=m),Dw(x.return,m,d),V.lanes|=m;break}$=$.next}}else if(x.tag===10)I=x.type===d.type?null:x.child;else if(x.tag===18){if(I=x.return,I===null)throw Error(e(341));I.lanes|=m,V=I.alternate,V!==null&&(V.lanes|=m),Dw(I,m,d),I=x.sibling}else I=x.child;if(I!==null)I.return=x;else for(I=x;I!==null;){if(I===d){I=null;break}if(x=I.sibling,x!==null){x.return=I.return,I=x;break}I=I.return}x=I}ii(c,d,_.children,m),d=d.child}return d;case 9:return _=d.type,w=d.pendingProps.children,cc(d,m),_=cs(_),w=w(_),d.flags|=1,ii(c,d,w,m),d.child;case 14:return w=d.type,_=Ns(w,d.pendingProps),_=Ns(w.type,_),ok(c,d,w,_,m);case 15:return ak(c,d,d.type,d.pendingProps,m);case 17:return w=d.type,_=d.pendingProps,_=d.elementType===w?_:Ns(w,_),dm(c,d),d.tag=1,gi(w)?(c=!0,Gf(d)):c=!1,cc(d,m),Jx(d,w,_),Qw(d,w,_,m),iv(null,d,w,!0,c,m);case 19:return gk(c,d,m);case 22:return lk(c,d,m)}throw Error(e(156,d.tag))};function Fk(c,d){return os(c,d)}function M6(c,d,m,w){this.tag=c,this.key=m,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=w,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function hs(c,d,m,w){return new M6(c,d,m,w)}function Cv(c){return c=c.prototype,!(!c||!c.isReactComponent)}function L6(c){if(typeof c=="function")return Cv(c)?1:0;if(c!=null){if(c=c.$$typeof,c===q)return 11;if(c===_e)return 14}return 2}function Ko(c,d){var m=c.alternate;return m===null?(m=hs(c.tag,d,c.key,c.mode),m.elementType=c.elementType,m.type=c.type,m.stateNode=c.stateNode,m.alternate=c,c.alternate=m):(m.pendingProps=d,m.type=c.type,m.flags=0,m.subtreeFlags=0,m.deletions=null),m.flags=c.flags&14680064,m.childLanes=c.childLanes,m.lanes=c.lanes,m.child=c.child,m.memoizedProps=c.memoizedProps,m.memoizedState=c.memoizedState,m.updateQueue=c.updateQueue,d=c.dependencies,m.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},m.sibling=c.sibling,m.index=c.index,m.ref=c.ref,m}function Em(c,d,m,w,_,x){var I=2;if(w=c,typeof c=="function")Cv(c)&&(I=1);else if(typeof c=="string")I=5;else e:switch(c){case N:return Wa(m.children,_,x,d);case L:I=8,_|=8;break;case M:return c=hs(12,m,d,_|2),c.elementType=M,c.lanes=x,c;case ee:return c=hs(13,m,d,_),c.elementType=ee,c.lanes=x,c;case me:return c=hs(19,m,d,_),c.elementType=me,c.lanes=x,c;case pe:return Cm(m,_,x,d);default:if(typeof c=="object"&&c!==null)switch(c.$$typeof){case B:I=10;break e;case U:I=9;break e;case q:I=11;break e;case _e:I=14;break e;case ge:I=16,w=null;break e}throw Error(e(130,c==null?c:typeof c,""))}return d=hs(I,m,d,_),d.elementType=c,d.type=w,d.lanes=x,d}function Wa(c,d,m,w){return c=hs(7,c,w,d),c.lanes=m,c}function Cm(c,d,m,w){return c=hs(22,c,w,d),c.elementType=pe,c.lanes=m,c.stateNode={isHidden:!1},c}function xv(c,d,m){return c=hs(6,c,null,d),c.lanes=m,c}function kv(c,d,m){return d=hs(4,c.children!==null?c.children:[],c.key,d),d.lanes=m,d.stateNode={containerInfo:c.containerInfo,pendingChildren:null,implementation:c.implementation},d}function V6(c,d,m,w,_){this.tag=d,this.containerInfo=c,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Jb(0),this.expirationTimes=Jb(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Jb(0),this.identifierPrefix=w,this.onRecoverableError=_,this.mutableSourceEagerHydrationData=null}function Tv(c,d,m,w,_,x,I,V,$){return c=new V6(c,d,m,V,$),d===1?(d=1,x===!0&&(d|=8)):d=0,x=hs(3,null,null,d),c.current=x,x.stateNode=c,x.memoizedState={element:w,isDehydrated:m,cache:null,transitions:null,pendingSuspenseBoundaries:null},Fw(x),c}function D6(c,d,m){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:A,key:w==null?null:""+w,children:c,containerInfo:d,implementation:m}}function $k(c){if(!c)return Fo;c=c._reactInternals;e:{if(Ft(c)!==c||c.tag!==1)throw Error(e(170));var d=c;do{switch(d.tag){case 3:d=d.stateNode.context;break e;case 1:if(gi(d.type)){d=d.stateNode.__reactInternalMemoizedMergedChildContext;break e}}d=d.return}while(d!==null);throw Error(e(171))}if(c.tag===1){var m=c.type;if(gi(m))return mx(c,m,d)}return d}function zk(c,d,m,w,_,x,I,V,$){return c=Tv(m,w,!0,c,_,x,I,V,$),c.context=$k(null),m=c.current,w=si(),_=qo(m),x=zr(w,_),x.callback=d??null,jo(m,x,_),c.current.lanes=_,Bu(c,_,w),wi(c,w),c}function xm(c,d,m,w){var _=d.current,x=si(),I=qo(_);return m=$k(m),d.context===null?d.context=m:d.pendingContext=m,d=zr(x,I),d.payload={element:c},w=w===void 0?null:w,w!==null&&(d.callback=w),c=jo(_,d,I),c!==null&&(Vs(c,_,I,x),tm(c,_,I)),I}function km(c){if(c=c.current,!c.child)return null;switch(c.child.tag){case 5:return c.child.stateNode;default:return c.child.stateNode}}function jk(c,d){if(c=c.memoizedState,c!==null&&c.dehydrated!==null){var m=c.retryLane;c.retryLane=m!==0&&m<d?m:d}}function Sv(c,d){jk(c,d),(c=c.alternate)&&jk(c,d)}var Hk=typeof reportError=="function"?reportError:function(c){console.error(c)};function Av(c){this._internalRoot=c}Tm.prototype.render=Av.prototype.render=function(c){var d=this._internalRoot;if(d===null)throw Error(e(409));xm(c,d,null,null)},Tm.prototype.unmount=Av.prototype.unmount=function(){var c=this._internalRoot;if(c!==null){this._internalRoot=null;var d=c.containerInfo;ja(function(){xm(null,c,null,null)}),d[Vr]=null}};function Tm(c){this._internalRoot=c}Tm.prototype.unstable_scheduleHydration=function(c){if(c){var d=TC();c={blockedOn:null,target:c,priority:d};for(var m=0;m<Mo.length&&d!==0&&d<Mo[m].priority;m++);Mo.splice(m,0,c),m===0&&PC(c)}};function Pv(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)}function Sm(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11&&(c.nodeType!==8||c.nodeValue!==" react-mount-point-unstable "))}function Uk(){}function B6(c,d,m,w,_){if(_){if(typeof w=="function"){var x=w;w=function(){var X=km(I);x.call(X)}}var I=zk(d,w,c,0,null,!1,!1,"",Uk);return c._reactRootContainer=I,c[Vr]=I.current,Ju(c.nodeType===8?c.parentNode:c),ja(),I}for(;_=c.lastChild;)c.removeChild(_);if(typeof w=="function"){var V=w;w=function(){var X=km($);V.call(X)}}var $=Tv(c,0,!1,null,null,!1,!1,"",Uk);return c._reactRootContainer=$,c[Vr]=$.current,Ju(c.nodeType===8?c.parentNode:c),ja(function(){xm(d,$,m,w)}),$}function Am(c,d,m,w,_){var x=m._reactRootContainer;if(x){var I=x;if(typeof _=="function"){var V=_;_=function(){var $=km(I);V.call($)}}xm(d,I,c,_)}else I=B6(m,d,c,_,w);return km(I)}xC=function(c){switch(c.tag){case 3:var d=c.stateNode;if(d.current.memoizedState.isDehydrated){var m=Du(d.pendingLanes);m!==0&&(Qb(d,m|1),wi(d,xt()),!(bt&6)&&(mc=xt()+500,$o()))}break;case 13:ja(function(){var w=$r(c,1);if(w!==null){var _=si();Vs(w,c,1,_)}}),Sv(c,1)}},ew=function(c){if(c.tag===13){var d=$r(c,134217728);if(d!==null){var m=si();Vs(d,c,134217728,m)}Sv(c,134217728)}},kC=function(c){if(c.tag===13){var d=qo(c),m=$r(c,d);if(m!==null){var w=si();Vs(m,c,d,w)}Sv(c,d)}},TC=function(){return Tt},SC=function(c,d){var m=Tt;try{return Tt=c,d()}finally{Tt=m}},Mu=function(c,d,m){switch(d){case"input":if(lr(c,m),d=m.name,m.type==="radio"&&d!=null){for(m=c;m.parentNode;)m=m.parentNode;for(m=m.querySelectorAll("input[name="+JSON.stringify(""+d)+'][type="radio"]'),d=0;d<m.length;d++){var w=m[d];if(w!==c&&w.form===c.form){var _=Wf(w);if(!_)throw Error(e(90));kn(w),lr(w,_)}}}break;case"textarea":Me(c,m);break;case"select":d=m.value,d!=null&&ye(c,!!m.multiple,d,!1)}},xf=yv,kf=ja;var F6={usingClientEntryPoint:!1,Events:[td,tc,Wf,Ra,Oa,yv]},gd={findFiberByHostInstance:Ma,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},$6={bundleType:gd.bundleType,version:gd.version,rendererPackageName:gd.rendererPackageName,rendererConfig:gd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:S.ReactCurrentDispatcher,findHostInstanceByFiber:function(c){return c=Lr(c),c===null?null:c.stateNode},findFiberByHostInstance:gd.findFiberByHostInstance,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Pm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Pm.isDisabled&&Pm.supportsFiber)try{$t=Pm.inject($6),Vn=Pm}catch{}}return vi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=F6,vi.createPortal=function(c,d){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Pv(d))throw Error(e(200));return D6(c,d,null,m)},vi.createRoot=function(c,d){if(!Pv(c))throw Error(e(299));var m=!1,w="",_=Hk;return d!=null&&(d.unstable_strictMode===!0&&(m=!0),d.identifierPrefix!==void 0&&(w=d.identifierPrefix),d.onRecoverableError!==void 0&&(_=d.onRecoverableError)),d=Tv(c,1,!1,null,null,m,!1,w,_),c[Vr]=d.current,Ju(c.nodeType===8?c.parentNode:c),new Av(d)},vi.findDOMNode=function(c){if(c==null)return null;if(c.nodeType===1)return c;var d=c._reactInternals;if(d===void 0)throw typeof c.render=="function"?Error(e(188)):(c=Object.keys(c).join(","),Error(e(268,c)));return c=Lr(d),c=c===null?null:c.stateNode,c},vi.flushSync=function(c){return ja(c)},vi.hydrate=function(c,d,m){if(!Sm(d))throw Error(e(200));return Am(null,c,d,!0,m)},vi.hydrateRoot=function(c,d,m){if(!Pv(c))throw Error(e(405));var w=m!=null&&m.hydratedSources||null,_=!1,x="",I=Hk;if(m!=null&&(m.unstable_strictMode===!0&&(_=!0),m.identifierPrefix!==void 0&&(x=m.identifierPrefix),m.onRecoverableError!==void 0&&(I=m.onRecoverableError)),d=zk(d,null,c,1,m??null,_,!1,x,I),c[Vr]=d.current,Ju(c),w)for(c=0;c<w.length;c++)m=w[c],_=m._getVersion,_=_(m._source),d.mutableSourceEagerHydrationData==null?d.mutableSourceEagerHydrationData=[m,_]:d.mutableSourceEagerHydrationData.push(m,_);return new Tm(d)},vi.render=function(c,d,m){if(!Sm(d))throw Error(e(200));return Am(null,c,d,!1,m)},vi.unmountComponentAtNode=function(c){if(!Sm(c))throw Error(e(40));return c._reactRootContainer?(ja(function(){Am(null,null,c,!1,function(){c._reactRootContainer=null,c[Vr]=null})}),!0):!1},vi.unstable_batchedUpdates=yv,vi.unstable_renderSubtreeIntoContainer=function(c,d,m,w){if(!Sm(m))throw Error(e(200));if(c==null||c._reactInternals===void 0)throw Error(e(38));return Am(c,d,m,!1,w)},vi.version="18.3.1-next-f1338f8080-20240426",vi}var MT;function J9(){if(MT)return Gv.exports;MT=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(t){console.error(t)}}return i(),Gv.exports=X9(),Gv.exports}var LT;function Q9(){if(LT)return Dm;LT=1;var i=J9();return Dm.createRoot=i.createRoot,Dm.hydrateRoot=i.hydrateRoot,Dm}var e$=Q9(),R=Hp();const Ke=d_(R);var Zv={exports:{}},Xv={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VT;function t$(){if(VT)return Xv;VT=1;var i=Hp();function t(l,u){return l===u&&(l!==0||1/l===1/u)||l!==l&&u!==u}var e=typeof Object.is=="function"?Object.is:t,n=i.useSyncExternalStore,s=i.useRef,r=i.useEffect,o=i.useMemo,a=i.useDebugValue;return Xv.useSyncExternalStoreWithSelector=function(l,u,h,f,g){var p=s(null);if(p.current===null){var y={hasValue:!1,value:null};p.current=y}else y=p.current;p=o(function(){function C(O){if(!k){if(k=!0,T=O,O=f(O),g!==void 0&&y.hasValue){var A=y.value;if(g(A,O))return P=A}return P=O}if(A=P,e(T,O))return A;var N=f(O);return g!==void 0&&g(A,N)?(T=O,A):(T=O,P=N)}var k=!1,T,P,S=h===void 0?null:h;return[function(){return C(u())},S===null?void 0:function(){return C(S())}]},[u,h,f,g]);var E=n(l,p[0],p[1]);return r(function(){y.hasValue=!0,y.value=E},[E]),a(E),E},Xv}var DT;function n$(){return DT||(DT=1,Zv.exports=t$()),Zv.exports}var i$=n$();function s$(i){i()}function r$(){let i=null,t=null;return{clear(){i=null,t=null},notify(){s$(()=>{let e=i;for(;e;)e.callback(),e=e.next})},get(){const e=[];let n=i;for(;n;)e.push(n),n=n.next;return e},subscribe(e){let n=!0;const s=t={callback:e,next:null,prev:t};return s.prev?s.prev.next=s:i=s,function(){!n||i===null||(n=!1,s.next?s.next.prev=s.prev:t=s.prev,s.prev?s.prev.next=s.next:i=s.next)}}}}var BT={notify(){},get:()=>[]};function o$(i,t){let e,n=BT,s=0,r=!1;function o(E){h();const C=n.subscribe(E);let k=!1;return()=>{k||(k=!0,C(),f())}}function a(){n.notify()}function l(){y.onStateChange&&y.onStateChange()}function u(){return r}function h(){s++,e||(e=i.subscribe(l),n=r$())}function f(){s--,e&&s===0&&(e(),e=void 0,n.clear(),n=BT)}function g(){r||(r=!0,h())}function p(){r&&(r=!1,f())}const y={addNestedSub:o,notifyNestedSubs:a,handleChangeWrapper:l,isSubscribed:u,trySubscribe:g,tryUnsubscribe:p,getListeners:()=>n};return y}var a$=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",l$=a$(),c$=()=>typeof navigator<"u"&&navigator.product==="ReactNative",u$=c$(),d$=()=>l$||u$?R.useLayoutEffect:R.useEffect,h$=d$(),Jv=Symbol.for("react-redux-context"),Qv=typeof globalThis<"u"?globalThis:{};function f$(){if(!R.createContext)return{};const i=Qv[Jv]??(Qv[Jv]=new Map);let t=i.get(R.createContext);return t||(t=R.createContext(null),i.set(R.createContext,t)),t}var ma=f$();function m$(i){const{children:t,context:e,serverState:n,store:s}=i,r=R.useMemo(()=>{const l=o$(s);return{store:s,subscription:l,getServerState:n?()=>n:void 0}},[s,n]),o=R.useMemo(()=>s.getState(),[s]);h$(()=>{const{subscription:l}=r;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),o!==s.getState()&&l.notifyNestedSubs(),()=>{l.tryUnsubscribe(),l.onStateChange=void 0}},[r,o]);const a=e||ma;return R.createElement(a.Provider,{value:r},t)}var g$=m$;function R_(i=ma){return function(){return R.useContext(i)}}var qR=R_();function GR(i=ma){const t=i===ma?qR:R_(i),e=()=>{const{store:n}=t();return n};return Object.assign(e,{withTypes:()=>e}),e}var p$=GR();function b$(i=ma){const t=i===ma?p$:GR(i),e=()=>t().dispatch;return Object.assign(e,{withTypes:()=>e}),e}var w$=b$(),v$=(i,t)=>i===t;function y$(i=ma){const t=i===ma?qR:R_(i),e=(n,s={})=>{const{equalityFn:r=v$}=typeof s=="function"?{equalityFn:s}:s,o=t(),{store:a,subscription:l,getServerState:u}=o;R.useRef(!0);const h=R.useCallback({[n.name](g){return n(g)}}[n.name],[n]),f=i$.useSyncExternalStoreWithSelector(l.addNestedSub,a.getState,u||a.getState,h,r);return R.useDebugValue(f),f};return Object.assign(e,{withTypes:()=>e}),e}var Zp=y$(),vd={},FT;function _$(){if(FT)return vd;FT=1,Object.defineProperty(vd,"__esModule",{value:!0}),vd.parse=o,vd.serialize=u;const i=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,t=/^[\u0021-\u003A\u003C-\u007E]*$/,e=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,n=/^[\u0020-\u003A\u003D-\u007E]*$/,s=Object.prototype.toString,r=(()=>{const g=function(){};return g.prototype=Object.create(null),g})();function o(g,p){const y=new r,E=g.length;if(E<2)return y;const C=(p==null?void 0:p.decode)||h;let k=0;do{const T=g.indexOf("=",k);if(T===-1)break;const P=g.indexOf(";",k),S=P===-1?E:P;if(T>S){k=g.lastIndexOf(";",T-1)+1;continue}const O=a(g,k,T),A=l(g,T,O),N=g.slice(O,A);if(y[N]===void 0){let L=a(g,T+1,S),M=l(g,S,L);const B=C(g.slice(L,M));y[N]=B}k=S+1}while(k<E);return y}function a(g,p,y){do{const E=g.charCodeAt(p);if(E!==32&&E!==9)return p}while(++p<y);return y}function l(g,p,y){for(;p>y;){const E=g.charCodeAt(--p);if(E!==32&&E!==9)return p+1}return y}function u(g,p,y){const E=(y==null?void 0:y.encode)||encodeURIComponent;if(!i.test(g))throw new TypeError(`argument name is invalid: ${g}`);const C=E(p);if(!t.test(C))throw new TypeError(`argument val is invalid: ${p}`);let k=g+"="+C;if(!y)return k;if(y.maxAge!==void 0){if(!Number.isInteger(y.maxAge))throw new TypeError(`option maxAge is invalid: ${y.maxAge}`);k+="; Max-Age="+y.maxAge}if(y.domain){if(!e.test(y.domain))throw new TypeError(`option domain is invalid: ${y.domain}`);k+="; Domain="+y.domain}if(y.path){if(!n.test(y.path))throw new TypeError(`option path is invalid: ${y.path}`);k+="; Path="+y.path}if(y.expires){if(!f(y.expires)||!Number.isFinite(y.expires.valueOf()))throw new TypeError(`option expires is invalid: ${y.expires}`);k+="; Expires="+y.expires.toUTCString()}if(y.httpOnly&&(k+="; HttpOnly"),y.secure&&(k+="; Secure"),y.partitioned&&(k+="; Partitioned"),y.priority)switch(typeof y.priority=="string"?y.priority.toLowerCase():void 0){case"low":k+="; Priority=Low";break;case"medium":k+="; Priority=Medium";break;case"high":k+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${y.priority}`)}if(y.sameSite)switch(typeof y.sameSite=="string"?y.sameSite.toLowerCase():y.sameSite){case!0:case"strict":k+="; SameSite=Strict";break;case"lax":k+="; SameSite=Lax";break;case"none":k+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${y.sameSite}`)}return k}function h(g){if(g.indexOf("%")===-1)return g;try{return decodeURIComponent(g)}catch{return g}}function f(g){return s.call(g)==="[object Date]"}return vd}_$();/**
 * react-router v7.1.5
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var $T="popstate";function E$(i={}){function t(s,r){let{pathname:o="/",search:a="",hash:l=""}=wo(s.location.hash.substring(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),yh("",{pathname:o,search:a,hash:l},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function e(s,r){let o=s.document.querySelector("base"),a="";if(o&&o.getAttribute("href")){let l=s.location.href,u=l.indexOf("#");a=u===-1?l:l.slice(0,u)}return a+"#"+(typeof r=="string"?r:ga(r))}function n(s,r){Nn(s.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(r)})`)}return x$(t,e,n,i)}function ft(i,t){if(i===!1||i===null||typeof i>"u")throw new Error(t)}function Nn(i,t){if(!i){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function C$(){return Math.random().toString(36).substring(2,10)}function zT(i,t){return{usr:i.state,key:i.key,idx:t}}function yh(i,t,e=null,n){return{pathname:typeof i=="string"?i:i.pathname,search:"",hash:"",...typeof t=="string"?wo(t):t,state:e,key:t&&t.key||n||C$()}}function ga({pathname:i="/",search:t="",hash:e=""}){return t&&t!=="?"&&(i+=t.charAt(0)==="?"?t:"?"+t),e&&e!=="#"&&(i+=e.charAt(0)==="#"?e:"#"+e),i}function wo(i){let t={};if(i){let e=i.indexOf("#");e>=0&&(t.hash=i.substring(e),i=i.substring(0,e));let n=i.indexOf("?");n>=0&&(t.search=i.substring(n),i=i.substring(0,n)),i&&(t.pathname=i)}return t}function x$(i,t,e,n={}){let{window:s=document.defaultView,v5Compat:r=!1}=n,o=s.history,a="POP",l=null,u=h();u==null&&(u=0,o.replaceState({...o.state,idx:u},""));function h(){return(o.state||{idx:null}).idx}function f(){a="POP";let C=h(),k=C==null?null:C-u;u=C,l&&l({action:a,location:E.location,delta:k})}function g(C,k){a="PUSH";let T=yh(E.location,C,k);e(T,C),u=h()+1;let P=zT(T,u),S=E.createHref(T);try{o.pushState(P,"",S)}catch(O){if(O instanceof DOMException&&O.name==="DataCloneError")throw O;s.location.assign(S)}r&&l&&l({action:a,location:E.location,delta:1})}function p(C,k){a="REPLACE";let T=yh(E.location,C,k);e(T,C),u=h();let P=zT(T,u),S=E.createHref(T);o.replaceState(P,"",S),r&&l&&l({action:a,location:E.location,delta:0})}function y(C){let k=s.location.origin!=="null"?s.location.origin:s.location.href,T=typeof C=="string"?C:ga(C);return T=T.replace(/ $/,"%20"),ft(k,`No window.location.(origin|href) available to create URL for href: ${T}`),new URL(T,k)}let E={get action(){return a},get location(){return i(s,o)},listen(C){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener($T,f),l=C,()=>{s.removeEventListener($T,f),l=null}},createHref(C){return t(s,C)},createURL:y,encodeLocation(C){let k=y(C);return{pathname:k.pathname,search:k.search,hash:k.hash}},push:g,replace:p,go(C){return o.go(C)}};return E}var k$=new Set(["lazy","caseSensitive","path","id","index","children"]);function T$(i){return i.index===!0}function qg(i,t,e=[],n={}){return i.map((s,r)=>{let o=[...e,String(r)],a=typeof s.id=="string"?s.id:o.join("-");if(ft(s.index!==!0||!s.children,"Cannot specify children on an index route"),ft(!n[a],`Found a route id collision on id "${a}".  Route id's must be globally unique within Data Router usages`),T$(s)){let l={...s,...t(s),id:a};return n[a]=l,l}else{let l={...s,...t(s),id:a,children:void 0};return n[a]=l,s.children&&(l.children=qg(s.children,t,o,n)),l}})}function ia(i,t,e="/"){return vg(i,t,e,!1)}function vg(i,t,e,n){let s=typeof t=="string"?wo(t):t,r=Qs(s.pathname||"/",e);if(r==null)return null;let o=KR(i);A$(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let u=F$(r);a=D$(o[l],u,n)}return a}function S$(i,t){let{route:e,pathname:n,params:s}=i;return{id:e.id,pathname:n,params:s,data:t[e.id],handle:e.handle}}function KR(i,t=[],e=[],n=""){let s=(r,o,a)=>{let l={relativePath:a===void 0?r.path||"":a,caseSensitive:r.caseSensitive===!0,childrenIndex:o,route:r};l.relativePath.startsWith("/")&&(ft(l.relativePath.startsWith(n),`Absolute route path "${l.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),l.relativePath=l.relativePath.slice(n.length));let u=kr([n,l.relativePath]),h=e.concat(l);r.children&&r.children.length>0&&(ft(r.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${u}".`),KR(r.children,t,h,u)),!(r.path==null&&!r.index)&&t.push({path:u,score:L$(u,r.index),routesMeta:h})};return i.forEach((r,o)=>{var a;if(r.path===""||!((a=r.path)!=null&&a.includes("?")))s(r,o);else for(let l of YR(r.path))s(r,o,l)}),t}function YR(i){let t=i.split("/");if(t.length===0)return[];let[e,...n]=t,s=e.endsWith("?"),r=e.replace(/\?$/,"");if(n.length===0)return s?[r,""]:[r];let o=YR(n.join("/")),a=[];return a.push(...o.map(l=>l===""?r:[r,l].join("/"))),s&&a.push(...o),a.map(l=>i.startsWith("/")&&l===""?"/":l)}function A$(i){i.sort((t,e)=>t.score!==e.score?e.score-t.score:V$(t.routesMeta.map(n=>n.childrenIndex),e.routesMeta.map(n=>n.childrenIndex)))}var P$=/^:[\w-]+$/,I$=3,R$=2,O$=1,N$=10,M$=-2,jT=i=>i==="*";function L$(i,t){let e=i.split("/"),n=e.length;return e.some(jT)&&(n+=M$),t&&(n+=R$),e.filter(s=>!jT(s)).reduce((s,r)=>s+(P$.test(r)?I$:r===""?O$:N$),n)}function V$(i,t){return i.length===t.length&&i.slice(0,-1).every((n,s)=>n===t[s])?i[i.length-1]-t[t.length-1]:0}function D$(i,t,e=!1){let{routesMeta:n}=i,s={},r="/",o=[];for(let a=0;a<n.length;++a){let l=n[a],u=a===n.length-1,h=r==="/"?t:t.slice(r.length)||"/",f=Gg({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},h),g=l.route;if(!f&&u&&e&&!n[n.length-1].route.index&&(f=Gg({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},h)),!f)return null;Object.assign(s,f.params),o.push({params:s,pathname:kr([r,f.pathname]),pathnameBase:j$(kr([r,f.pathnameBase])),route:g}),f.pathnameBase!=="/"&&(r=kr([r,f.pathnameBase]))}return o}function Gg(i,t){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[e,n]=B$(i.path,i.caseSensitive,i.end),s=t.match(e);if(!s)return null;let r=s[0],o=r.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:n.reduce((u,{paramName:h,isOptional:f},g)=>{if(h==="*"){let y=a[g]||"";o=r.slice(0,r.length-y.length).replace(/(.)\/+$/,"$1")}const p=a[g];return f&&!p?u[h]=void 0:u[h]=(p||"").replace(/%2F/g,"/"),u},{}),pathname:r,pathnameBase:o,pattern:i}}function B$(i,t=!1,e=!0){Nn(i==="*"||!i.endsWith("*")||i.endsWith("/*"),`Route path "${i}" will be treated as if it were "${i.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${i.replace(/\*$/,"/*")}".`);let n=[],s="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(n.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return i.endsWith("*")?(n.push({paramName:"*"}),s+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):e?s+="\\/*$":i!==""&&i!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),n]}function F$(i){try{return i.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Nn(!1,`The URL path "${i}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),i}}function Qs(i,t){if(t==="/")return i;if(!i.toLowerCase().startsWith(t.toLowerCase()))return null;let e=t.endsWith("/")?t.length-1:t.length,n=i.charAt(e);return n&&n!=="/"?null:i.slice(e)||"/"}function $$(i,t="/"){let{pathname:e,search:n="",hash:s=""}=typeof i=="string"?wo(i):i;return{pathname:e?e.startsWith("/")?e:z$(e,t):t,search:H$(n),hash:U$(s)}}function z$(i,t){let e=t.replace(/\/+$/,"").split("/");return i.split("/").forEach(s=>{s===".."?e.length>1&&e.pop():s!=="."&&e.push(s)}),e.length>1?e.join("/"):"/"}function e0(i,t,e,n){return`Cannot include a '${i}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${e}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function ZR(i){return i.filter((t,e)=>e===0||t.route.path&&t.route.path.length>0)}function O_(i){let t=ZR(i);return t.map((e,n)=>n===t.length-1?e.pathname:e.pathnameBase)}function N_(i,t,e,n=!1){let s;typeof i=="string"?s=wo(i):(s={...i},ft(!s.pathname||!s.pathname.includes("?"),e0("?","pathname","search",s)),ft(!s.pathname||!s.pathname.includes("#"),e0("#","pathname","hash",s)),ft(!s.search||!s.search.includes("#"),e0("#","search","hash",s)));let r=i===""||s.pathname==="",o=r?"/":s.pathname,a;if(o==null)a=e;else{let f=t.length-1;if(!n&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),f-=1;s.pathname=g.join("/")}a=f>=0?t[f]:"/"}let l=$$(s,a),u=o&&o!=="/"&&o.endsWith("/"),h=(r||o===".")&&e.endsWith("/");return!l.pathname.endsWith("/")&&(u||h)&&(l.pathname+="/"),l}var kr=i=>i.join("/").replace(/\/\/+/g,"/"),j$=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),H$=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,U$=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i,W$=(i,t=302)=>{let e=t;typeof e=="number"?e={status:e}:typeof e.status>"u"&&(e.status=302);let n=new Headers(e.headers);return n.set("Location",i),new Response(null,{...e,headers:n})},Kg=class{constructor(i,t,e,n=!1){this.status=i,this.statusText=t||"",this.internal=n,e instanceof Error?(this.data=e.toString(),this.error=e):this.data=e}};function _h(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}var XR=["POST","PUT","PATCH","DELETE"],q$=new Set(XR),G$=["GET",...XR],K$=new Set(G$),Y$=new Set([301,302,303,307,308]),Z$=new Set([307,308]),t0={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},X$={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},yd={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},M_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,J$=i=>({hasErrorBoundary:!!i.hasErrorBoundary}),JR="remix-router-transitions",QR=Symbol("ResetLoaderData");function Q$(i){const t=i.window?i.window:typeof window<"u"?window:void 0,e=typeof t<"u"&&typeof t.document<"u"&&typeof t.document.createElement<"u";ft(i.routes.length>0,"You must provide a non-empty routes array to createRouter");let n=i.mapRouteProperties||J$,s={},r=qg(i.routes,n,void 0,s),o,a=i.basename||"/",l=i.dataStrategy||sz,u=i.patchRoutesOnNavigation,h={...i.future},f=null,g=new Set,p=null,y=null,E=null,C=i.hydrationData!=null,k=ia(r,i.history.location,a),T=!1,P=null;if(k==null&&!u){let z=bs(404,{pathname:i.history.location.pathname}),{matches:W,route:Q}=QT(r);k=W,P={[Q.id]:z}}k&&!i.hydrationData&&Ra(k,r,i.history.location.pathname).active&&(k=null);let S;if(k)if(k.some(z=>z.route.lazy))S=!1;else if(!k.some(z=>z.route.loader))S=!0;else{let z=i.hydrationData?i.hydrationData.loaderData:null,W=i.hydrationData?i.hydrationData.errors:null;if(W){let Q=k.findIndex(ue=>W[ue.route.id]!==void 0);S=k.slice(0,Q+1).every(ue=>!V1(ue.route,z,W))}else S=k.every(Q=>!V1(Q.route,z,W))}else{S=!1,k=[];let z=Ra(null,r,i.history.location.pathname);z.active&&z.matches&&(T=!0,k=z.matches)}let O,A={historyAction:i.history.action,location:i.history.location,matches:k,initialized:S,navigation:t0,restoreScrollPosition:i.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:i.hydrationData&&i.hydrationData.loaderData||{},actionData:i.hydrationData&&i.hydrationData.actionData||null,errors:i.hydrationData&&i.hydrationData.errors||P,fetchers:new Map,blockers:new Map},N="POP",L=!1,M,B=!1,U=new Map,q=null,ee=!1,me=!1,_e=new Set,ge=new Map,pe=0,ae=-1,le=new Map,re=new Set,j=new Map,ie=new Map,Ve=new Set,Be=new Map,je,ze=null;function st(){if(f=i.history.listen(({action:z,location:W,delta:Q})=>{if(je){je(),je=void 0;return}Nn(Be.size===0||Q!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let ue=Wl({currentLocation:A.location,nextLocation:W,historyAction:z});if(ue&&Q!=null){let Te=new Promise($e=>{je=$e});i.history.go(Q*-1),To(ue,{state:"blocked",location:W,proceed(){To(ue,{state:"proceeding",proceed:void 0,reset:void 0,location:W}),Te.then(()=>i.history.go(Q))},reset(){let $e=new Map(A.blockers);$e.set(ue,yd),ut({blockers:$e})}});return}return Wn(z,W)}),e){gz(t,U);let z=()=>pz(t,U);t.addEventListener("pagehide",z),q=()=>t.removeEventListener("pagehide",z)}return A.initialized||Wn("POP",A.location,{initialHydration:!0}),O}function Je(){f&&f(),q&&q(),g.clear(),M&&M.abort(),A.fetchers.forEach((z,W)=>xo(W)),A.blockers.forEach((z,W)=>Ul(W))}function rt(z){return g.add(z),()=>g.delete(z)}function ut(z,W={}){A={...A,...z};let Q=[],ue=[];A.fetchers.forEach((Te,$e)=>{Te.state==="idle"&&(Ve.has($e)?Q.push($e):ue.push($e))}),Ve.forEach(Te=>{!A.fetchers.has(Te)&&!ge.has(Te)&&Q.push(Te)}),[...g].forEach(Te=>Te(A,{deletedFetchers:Q,viewTransitionOpts:W.viewTransitionOpts,flushSync:W.flushSync===!0})),Q.forEach(Te=>xo(Te)),ue.forEach(Te=>A.fetchers.delete(Te))}function Zt(z,W,{flushSync:Q}={}){var ke,tt;let ue=A.actionData!=null&&A.navigation.formMethod!=null&&$s(A.navigation.formMethod)&&A.navigation.state==="loading"&&((ke=z.state)==null?void 0:ke._isRedirect)!==!0,Te;W.actionData?Object.keys(W.actionData).length>0?Te=W.actionData:Te=null:ue?Te=A.actionData:Te=null;let $e=W.loaderData?XT(A.loaderData,W.loaderData,W.matches||[],W.errors):A.loaderData,Ge=A.blockers;Ge.size>0&&(Ge=new Map(Ge),Ge.forEach((at,Nt)=>Ge.set(Nt,yd)));let Ae=L===!0||A.navigation.formMethod!=null&&$s(A.navigation.formMethod)&&((tt=z.state)==null?void 0:tt._isRedirect)!==!0;o&&(r=o,o=void 0),ee||N==="POP"||(N==="PUSH"?i.history.push(z,z.state):N==="REPLACE"&&i.history.replace(z,z.state));let Oe;if(N==="POP"){let at=U.get(A.location.pathname);at&&at.has(z.pathname)?Oe={currentLocation:A.location,nextLocation:z}:U.has(z.pathname)&&(Oe={currentLocation:z,nextLocation:A.location})}else if(B){let at=U.get(A.location.pathname);at?at.add(z.pathname):(at=new Set([z.pathname]),U.set(A.location.pathname,at)),Oe={currentLocation:A.location,nextLocation:z}}ut({...W,actionData:Te,loaderData:$e,historyAction:N,location:z,initialized:!0,navigation:t0,revalidation:"idle",restoreScrollPosition:Lu(z,W.matches||A.matches),preventScrollReset:Ae,blockers:Ge},{viewTransitionOpts:Oe,flushSync:Q===!0}),N="POP",L=!1,B=!1,ee=!1,me=!1,ze==null||ze.resolve(),ze=null}async function kn(z,W){if(typeof z=="number"){i.history.go(z);return}let Q=L1(A.location,A.matches,a,z,W==null?void 0:W.fromRouteId,W==null?void 0:W.relative),{path:ue,submission:Te,error:$e}=HT(!1,Q,W),Ge=A.location,Ae=yh(A.location,ue,W&&W.state);Ae={...Ae,...i.history.encodeLocation(Ae)};let Oe=W&&W.replace!=null?W.replace:void 0,ke="PUSH";Oe===!0?ke="REPLACE":Oe===!1||Te!=null&&$s(Te.formMethod)&&Te.formAction===A.location.pathname+A.location.search&&(ke="REPLACE");let tt=W&&"preventScrollReset"in W?W.preventScrollReset===!0:void 0,at=(W&&W.flushSync)===!0,Nt=Wl({currentLocation:Ge,nextLocation:Ae,historyAction:ke});if(Nt){To(Nt,{state:"blocked",location:Ae,proceed(){To(Nt,{state:"proceeding",proceed:void 0,reset:void 0,location:Ae}),kn(z,W)},reset(){let Ft=new Map(A.blockers);Ft.set(Nt,yd),ut({blockers:Ft})}});return}await Wn(ke,Ae,{submission:Te,pendingError:$e,preventScrollReset:tt,replace:W&&W.replace,enableViewTransition:W&&W.viewTransition,flushSync:at})}function rs(){ze||(ze=bz()),Qe(),ut({revalidation:"loading"});let z=ze.promise;return A.navigation.state==="submitting"?z:A.navigation.state==="idle"?(Wn(A.historyAction,A.location,{startUninterruptedRevalidation:!0}),z):(Wn(N||A.historyAction,A.navigation.location,{overrideNavigation:A.navigation,enableViewTransition:B===!0}),z)}async function Wn(z,W,Q){M&&M.abort(),M=null,N=z,ee=(Q&&Q.startUninterruptedRevalidation)===!0,So(A.location,A.matches),L=(Q&&Q.preventScrollReset)===!0,B=(Q&&Q.enableViewTransition)===!0;let ue=o||r,Te=Q&&Q.overrideNavigation,$e=Q!=null&&Q.initialHydration&&A.matches&&A.matches.length>0&&!T?A.matches:ia(ue,W,a),Ge=(Q&&Q.flushSync)===!0;if($e&&A.initialized&&!me&&uz(A.location,W)&&!(Q&&Q.submission&&$s(Q.submission.formMethod))){Zt(W,{matches:$e},{flushSync:Ge});return}let Ae=Ra($e,ue,W.pathname);if(Ae.active&&Ae.matches&&($e=Ae.matches),!$e){let{error:Mt,notFoundMatches:At,route:cn}=Ia(W.pathname);Zt(W,{matches:At,loaderData:{},errors:{[cn.id]:Mt}},{flushSync:Ge});return}M=new AbortController;let Oe=wc(i.history,W,M.signal,Q&&Q.submission),ke;if(Q&&Q.pendingError)ke=[Ja($e).route.id,{type:"error",error:Q.pendingError}];else if(Q&&Q.submission&&$s(Q.submission.formMethod)){let Mt=await Aa(Oe,W,Q.submission,$e,Ae.active,{replace:Q.replace,flushSync:Ge});if(Mt.shortCircuited)return;if(Mt.pendingActionResult){let[At,cn]=Mt.pendingActionResult;if($i(cn)&&_h(cn.error)&&cn.error.status===404){M=null,Zt(W,{matches:Mt.matches,loaderData:{},errors:{[At]:cn.error}});return}}$e=Mt.matches||$e,ke=Mt.pendingActionResult,Te=n0(W,Q.submission),Ge=!1,Ae.active=!1,Oe=wc(i.history,Oe.url,Oe.signal)}let{shortCircuited:tt,matches:at,loaderData:Nt,errors:Ft}=await Co(Oe,W,$e,Ae.active,Te,Q&&Q.submission,Q&&Q.fetcherSubmission,Q&&Q.replace,Q&&Q.initialHydration===!0,Ge,ke);tt||(M=null,Zt(W,{matches:at||$e,...JT(ke),loaderData:Nt,errors:Ft}))}async function Aa(z,W,Q,ue,Te,$e={}){Qe();let Ge=fz(W,Q);if(ut({navigation:Ge},{flushSync:$e.flushSync===!0}),Te){let ke=await Oa(ue,W.pathname,z.signal);if(ke.type==="aborted")return{shortCircuited:!0};if(ke.type==="error"){let tt=Ja(ke.partialMatches).route.id;return{matches:ke.partialMatches,pendingActionResult:[tt,{type:"error",error:ke.error}]}}else if(ke.matches)ue=ke.matches;else{let{notFoundMatches:tt,error:at,route:Nt}=Ia(W.pathname);return{matches:tt,pendingActionResult:[Nt.id,{type:"error",error:at}]}}}let Ae,Oe=$d(ue,W);if(!Oe.route.action&&!Oe.route.lazy)Ae={type:"error",error:bs(405,{method:z.method,pathname:W.pathname,routeId:Oe.route.id})};else if(Ae=(await he("action",A,z,[Oe],ue,null))[Oe.route.id],z.signal.aborted)return{shortCircuited:!0};if(tl(Ae)){let ke;return $e&&$e.replace!=null?ke=$e.replace:ke=KT(Ae.response.headers.get("Location"),new URL(z.url),a)===A.location.pathname+A.location.search,await be(z,Ae,!0,{submission:Q,replace:ke}),{shortCircuited:!0}}if($i(Ae)){let ke=Ja(ue,Oe.route.id);return($e&&$e.replace)!==!0&&(N="PUSH"),{matches:ue,pendingActionResult:[ke.route.id,Ae]}}return{matches:ue,pendingActionResult:[Oe.route.id,Ae]}}async function Co(z,W,Q,ue,Te,$e,Ge,Ae,Oe,ke,tt){let at=Te||n0(W,$e),Nt=$e||Ge||tS(at),Ft=!ee&&!Oe;if(ue){if(Ft){let un=lr(tt);ut({navigation:at,...un!==void 0?{actionData:un}:{}},{flushSync:ke})}let kt=await Oa(Q,W.pathname,z.signal);if(kt.type==="aborted")return{shortCircuited:!0};if(kt.type==="error"){let un=Ja(kt.partialMatches).route.id;return{matches:kt.partialMatches,loaderData:{},errors:{[un]:kt.error}}}else if(kt.matches)Q=kt.matches;else{let{error:un,notFoundMatches:Gl,route:Io}=Ia(W.pathname);return{matches:Gl,loaderData:{},errors:{[Io.id]:un}}}}let Mt=o||r,[At,cn]=WT(i.history,A,Q,Nt,W,Oe===!0,me,_e,Ve,j,re,Mt,a,tt);if(ae=++pe,At.length===0&&cn.length===0){let kt=ko();return Zt(W,{matches:Q,loaderData:{},errors:tt&&$i(tt[1])?{[tt[0]]:tt[1].error}:null,...JT(tt),...kt?{fetchers:new Map(A.fetchers)}:{}},{flushSync:ke}),{shortCircuited:!0}}if(Ft){let kt={};if(!ue){kt.navigation=at;let un=lr(tt);un!==void 0&&(kt.actionData=un)}cn.length>0&&(kt.fetchers=F(cn)),ut(kt,{flushSync:ke})}cn.forEach(kt=>{Tn(kt.key),kt.controller&&ge.set(kt.key,kt.controller)});let Lr=()=>cn.forEach(kt=>Tn(kt.key));M&&M.signal.addEventListener("abort",Lr);let{loaderResults:Ao,fetcherResults:os}=await Me(A,Q,At,cn,z);if(z.signal.aborted)return{shortCircuited:!0};M&&M.signal.removeEventListener("abort",Lr),cn.forEach(kt=>ge.delete(kt.key));let Ri=Bm(Ao);if(Ri)return await be(z,Ri.result,!0,{replace:Ae}),{shortCircuited:!0};if(Ri=Bm(os),Ri)return re.add(Ri.key),await be(z,Ri.result,!0,{replace:Ae}),{shortCircuited:!0};let{loaderData:Vu,errors:Na}=ZT(A,Q,Ao,tt,cn,os);Oe&&A.errors&&(Na={...A.errors,...Na});let xt=ko(),ql=Pa(ae),Po=xt||ql||cn.length>0;return{matches:Q,loaderData:Vu,errors:Na,...Po?{fetchers:new Map(A.fetchers)}:{}}}function lr(z){if(z&&!$i(z[1]))return{[z[0]]:z[1].data};if(A.actionData)return Object.keys(A.actionData).length===0?null:A.actionData}function F(z){return z.forEach(W=>{let Q=A.fetchers.get(W.key),ue=_d(void 0,Q?Q.data:void 0);A.fetchers.set(W.key,ue)}),new Map(A.fetchers)}async function Y(z,W,Q,ue){Tn(z);let Te=(ue&&ue.flushSync)===!0,$e=o||r,Ge=L1(A.location,A.matches,a,Q,W,ue==null?void 0:ue.relative),Ae=ia($e,Ge,a),Oe=Ra(Ae,$e,Ge);if(Oe.active&&Oe.matches&&(Ae=Oe.matches),!Ae){ht(z,W,bs(404,{pathname:Ge}),{flushSync:Te});return}let{path:ke,submission:tt,error:at}=HT(!0,Ge,ue);if(at){ht(z,W,at,{flushSync:Te});return}let Nt=$d(Ae,ke),Ft=(ue&&ue.preventScrollReset)===!0;if(tt&&$s(tt.formMethod)){await te(z,W,ke,Nt,Ae,Oe.active,Te,Ft,tt);return}j.set(z,{routeId:W,path:ke}),await ye(z,W,ke,Nt,Ae,Oe.active,Te,Ft,tt)}async function te(z,W,Q,ue,Te,$e,Ge,Ae,Oe){Qe(),j.delete(z);function ke($t){if(!$t.route.action&&!$t.route.lazy){let Vn=bs(405,{method:Oe.formMethod,pathname:Q,routeId:W});return ht(z,W,Vn,{flushSync:Ge}),!0}return!1}if(!$e&&ke(ue))return;let tt=A.fetchers.get(z);pt(z,mz(Oe,tt),{flushSync:Ge});let at=new AbortController,Nt=wc(i.history,Q,at.signal,Oe);if($e){let $t=await Oa(Te,Q,Nt.signal);if($t.type==="aborted")return;if($t.type==="error"){ht(z,W,$t.error,{flushSync:Ge});return}else if($t.matches){if(Te=$t.matches,ue=$d(Te,Q),ke(ue))return}else{ht(z,W,bs(404,{pathname:Q}),{flushSync:Ge});return}}ge.set(z,at);let Ft=pe,At=(await he("action",A,Nt,[ue],Te,z))[ue.route.id];if(Nt.signal.aborted){ge.get(z)===at&&ge.delete(z);return}if(Ve.has(z)){if(tl(At)||$i(At)){pt(z,Qo(void 0));return}}else{if(tl(At))if(ge.delete(z),ae>Ft){pt(z,Qo(void 0));return}else return re.add(z),pt(z,_d(Oe)),be(Nt,At,!1,{fetcherSubmission:Oe,preventScrollReset:Ae});if($i(At)){ht(z,W,At.error);return}}let cn=A.navigation.location||A.location,Lr=wc(i.history,cn,at.signal),Ao=o||r,os=A.navigation.state!=="idle"?ia(Ao,A.navigation.location,a):A.matches;ft(os,"Didn't find any matches after fetcher action");let Ri=++pe;le.set(z,Ri);let Vu=_d(Oe,At.data);A.fetchers.set(z,Vu);let[Na,xt]=WT(i.history,A,os,Oe,cn,!1,me,_e,Ve,j,re,Ao,a,[ue.route.id,At]);xt.filter($t=>$t.key!==z).forEach($t=>{let Vn=$t.key,Tf=A.fetchers.get(Vn),Oi=_d(void 0,Tf?Tf.data:void 0);A.fetchers.set(Vn,Oi),Tn(Vn),$t.controller&&ge.set(Vn,$t.controller)}),ut({fetchers:new Map(A.fetchers)});let ql=()=>xt.forEach($t=>Tn($t.key));at.signal.addEventListener("abort",ql);let{loaderResults:Po,fetcherResults:kt}=await Me(A,os,Na,xt,Lr);if(at.signal.aborted)return;at.signal.removeEventListener("abort",ql),le.delete(z),ge.delete(z),xt.forEach($t=>ge.delete($t.key));let un=Bm(Po);if(un)return be(Lr,un.result,!1,{preventScrollReset:Ae});if(un=Bm(kt),un)return re.add(un.key),be(Lr,un.result,!1,{preventScrollReset:Ae});let{loaderData:Gl,errors:Io}=ZT(A,os,Po,void 0,xt,kt);if(A.fetchers.has(z)){let $t=Qo(At.data);A.fetchers.set(z,$t)}Pa(Ri),A.navigation.state==="loading"&&Ri>ae?(ft(N,"Expected pending action"),M&&M.abort(),Zt(A.navigation.location,{matches:os,loaderData:Gl,errors:Io,fetchers:new Map(A.fetchers)})):(ut({errors:Io,loaderData:XT(A.loaderData,Gl,os,Io),fetchers:new Map(A.fetchers)}),me=!1)}async function ye(z,W,Q,ue,Te,$e,Ge,Ae,Oe){let ke=A.fetchers.get(z);pt(z,_d(Oe,ke?ke.data:void 0),{flushSync:Ge});let tt=new AbortController,at=wc(i.history,Q,tt.signal);if($e){let At=await Oa(Te,Q,at.signal);if(At.type==="aborted")return;if(At.type==="error"){ht(z,W,At.error,{flushSync:Ge});return}else if(At.matches)Te=At.matches,ue=$d(Te,Q);else{ht(z,W,bs(404,{pathname:Q}),{flushSync:Ge});return}}ge.set(z,tt);let Nt=pe,Mt=(await he("loader",A,at,[ue],Te,z))[ue.route.id];if(ge.get(z)===tt&&ge.delete(z),!at.signal.aborted){if(Ve.has(z)){pt(z,Qo(void 0));return}if(tl(Mt))if(ae>Nt){pt(z,Qo(void 0));return}else{re.add(z),await be(at,Mt,!1,{preventScrollReset:Ae});return}if($i(Mt)){ht(z,W,Mt.error);return}pt(z,Qo(Mt.data))}}async function be(z,W,Q,{submission:ue,fetcherSubmission:Te,preventScrollReset:$e,replace:Ge}={}){W.response.headers.has("X-Remix-Revalidate")&&(me=!0);let Ae=W.response.headers.get("Location");ft(Ae,"Expected a Location header on the redirect Response"),Ae=KT(Ae,new URL(z.url),a);let Oe=yh(A.location,Ae,{_isRedirect:!0});if(e){let Mt=!1;if(W.response.headers.has("X-Remix-Reload-Document"))Mt=!0;else if(M_.test(Ae)){const At=i.history.createURL(Ae);Mt=At.origin!==t.location.origin||Qs(At.pathname,a)==null}if(Mt){Ge?t.location.replace(Ae):t.location.assign(Ae);return}}M=null;let ke=Ge===!0||W.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:tt,formAction:at,formEncType:Nt}=A.navigation;!ue&&!Te&&tt&&at&&Nt&&(ue=tS(A.navigation));let Ft=ue||Te;if(Z$.has(W.response.status)&&Ft&&$s(Ft.formMethod))await Wn(ke,Oe,{submission:{...Ft,formAction:Ae},preventScrollReset:$e||L,enableViewTransition:Q?B:void 0});else{let Mt=n0(Oe,ue);await Wn(ke,Oe,{overrideNavigation:Mt,fetcherSubmission:Te,preventScrollReset:$e||L,enableViewTransition:Q?B:void 0})}}async function he(z,W,Q,ue,Te,$e){let Ge,Ae={};try{Ge=await rz(l,z,W,Q,ue,Te,$e,s,n)}catch(Oe){return ue.forEach(ke=>{Ae[ke.route.id]={type:"error",error:Oe}}),Ae}for(let[Oe,ke]of Object.entries(Ge))if(dz(ke)){let tt=ke.result;Ae[Oe]={type:"redirect",response:lz(tt,Q,Oe,Te,a)}}else Ae[Oe]=await az(ke);return Ae}async function Me(z,W,Q,ue,Te){let $e=he("loader",z,Te,Q,W,null),Ge=Promise.all(ue.map(async ke=>{if(ke.matches&&ke.match&&ke.controller){let at=(await he("loader",z,wc(i.history,ke.path,ke.controller.signal),[ke.match],ke.matches,ke.key))[ke.match.route.id];return{[ke.key]:at}}else return Promise.resolve({[ke.key]:{type:"error",error:bs(404,{pathname:ke.path})}})})),Ae=await $e,Oe=(await Ge).reduce((ke,tt)=>Object.assign(ke,tt),{});return{loaderResults:Ae,fetcherResults:Oe}}function Qe(){me=!0,j.forEach((z,W)=>{ge.has(W)&&_e.add(W),Tn(W)})}function pt(z,W,Q={}){A.fetchers.set(z,W),ut({fetchers:new Map(A.fetchers)},{flushSync:(Q&&Q.flushSync)===!0})}function ht(z,W,Q,ue={}){let Te=Ja(A.matches,W);xo(z),ut({errors:{[Te.route.id]:Q},fetchers:new Map(A.fetchers)},{flushSync:(ue&&ue.flushSync)===!0})}function yn(z){return ie.set(z,(ie.get(z)||0)+1),Ve.has(z)&&Ve.delete(z),A.fetchers.get(z)||X$}function xo(z){let W=A.fetchers.get(z);ge.has(z)&&!(W&&W.state==="loading"&&le.has(z))&&Tn(z),j.delete(z),le.delete(z),re.delete(z),Ve.delete(z),_e.delete(z),A.fetchers.delete(z)}function Is(z){let W=(ie.get(z)||0)-1;W<=0?(ie.delete(z),Ve.add(z)):ie.set(z,W),ut({fetchers:new Map(A.fetchers)})}function Tn(z){let W=ge.get(z);W&&(W.abort(),ge.delete(z))}function jl(z){for(let W of z){let Q=yn(W),ue=Qo(Q.data);A.fetchers.set(W,ue)}}function ko(){let z=[],W=!1;for(let Q of re){let ue=A.fetchers.get(Q);ft(ue,`Expected fetcher: ${Q}`),ue.state==="loading"&&(re.delete(Q),z.push(Q),W=!0)}return jl(z),W}function Pa(z){let W=[];for(let[Q,ue]of le)if(ue<z){let Te=A.fetchers.get(Q);ft(Te,`Expected fetcher: ${Q}`),Te.state==="loading"&&(Tn(Q),le.delete(Q),W.push(Q))}return jl(W),W.length>0}function Hl(z,W){let Q=A.blockers.get(z)||yd;return Be.get(z)!==W&&Be.set(z,W),Q}function Ul(z){A.blockers.delete(z),Be.delete(z)}function To(z,W){let Q=A.blockers.get(z)||yd;ft(Q.state==="unblocked"&&W.state==="blocked"||Q.state==="blocked"&&W.state==="blocked"||Q.state==="blocked"&&W.state==="proceeding"||Q.state==="blocked"&&W.state==="unblocked"||Q.state==="proceeding"&&W.state==="unblocked",`Invalid blocker state transition: ${Q.state} -> ${W.state}`);let ue=new Map(A.blockers);ue.set(z,W),ut({blockers:ue})}function Wl({currentLocation:z,nextLocation:W,historyAction:Q}){if(Be.size===0)return;Be.size>1&&Nn(!1,"A router only supports one blocker at a time");let ue=Array.from(Be.entries()),[Te,$e]=ue[ue.length-1],Ge=A.blockers.get(Te);if(!(Ge&&Ge.state==="proceeding")&&$e({currentLocation:z,nextLocation:W,historyAction:Q}))return Te}function Ia(z){let W=bs(404,{pathname:z}),Q=o||r,{matches:ue,route:Te}=QT(Q);return{notFoundMatches:ue,route:Te,error:W}}function Mu(z,W,Q){if(p=z,E=W,y=Q||null,!C&&A.navigation===t0){C=!0;let ue=Lu(A.location,A.matches);ue!=null&&ut({restoreScrollPosition:ue})}return()=>{p=null,E=null,y=null}}function Mr(z,W){return y&&y(z,W.map(ue=>S$(ue,A.loaderData)))||z.key}function So(z,W){if(p&&E){let Q=Mr(z,W);p[Q]=E()}}function Lu(z,W){if(p){let Q=Mr(z,W),ue=p[Q];if(typeof ue=="number")return ue}return null}function Ra(z,W,Q){if(u)if(z){if(Object.keys(z[0].params).length>0)return{active:!0,matches:vg(W,Q,a,!0)}}else return{active:!0,matches:vg(W,Q,a,!0)||[]};return{active:!1,matches:null}}async function Oa(z,W,Q){if(!u)return{type:"success",matches:z};let ue=z;for(;;){let Te=o==null,$e=o||r,Ge=s;try{await u({path:W,matches:ue,patch:(ke,tt)=>{Q.aborted||GT(ke,tt,$e,Ge,n)}})}catch(ke){return{type:"error",error:ke,partialMatches:ue}}finally{Te&&!Q.aborted&&(r=[...r])}if(Q.aborted)return{type:"aborted"};let Ae=ia($e,W,a);if(Ae)return{type:"success",matches:Ae};let Oe=vg($e,W,a,!0);if(!Oe||ue.length===Oe.length&&ue.every((ke,tt)=>ke.route.id===Oe[tt].route.id))return{type:"success",matches:null};ue=Oe}}function xf(z){s={},o=qg(z,n,void 0,s)}function kf(z,W){let Q=o==null;GT(z,W,o||r,s,n),Q&&(r=[...r],ut({}))}return O={get basename(){return a},get future(){return h},get state(){return A},get routes(){return r},get window(){return t},initialize:st,subscribe:rt,enableScrollRestoration:Mu,navigate:kn,fetch:Y,revalidate:rs,createHref:z=>i.history.createHref(z),encodeLocation:z=>i.history.encodeLocation(z),getFetcher:yn,deleteFetcher:Is,dispose:Je,getBlocker:Hl,deleteBlocker:Ul,patchRoutes:kf,_internalFetchControllers:ge,_internalSetRoutes:xf},O}function ez(i){return i!=null&&("formData"in i&&i.formData!=null||"body"in i&&i.body!==void 0)}function L1(i,t,e,n,s,r){let o,a;if(s){o=[];for(let u of t)if(o.push(u),u.route.id===s){a=u;break}}else o=t,a=t[t.length-1];let l=N_(n||".",O_(o),Qs(i.pathname,e)||i.pathname,r==="path");if(n==null&&(l.search=i.search,l.hash=i.hash),(n==null||n===""||n===".")&&a){let u=L_(l.search);if(a.route.index&&!u)l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index";else if(!a.route.index&&u){let h=new URLSearchParams(l.search),f=h.getAll("index");h.delete("index"),f.filter(p=>p).forEach(p=>h.append("index",p));let g=h.toString();l.search=g?`?${g}`:""}}return e!=="/"&&(l.pathname=l.pathname==="/"?e:kr([e,l.pathname])),ga(l)}function HT(i,t,e){if(!e||!ez(e))return{path:t};if(e.formMethod&&!hz(e.formMethod))return{path:t,error:bs(405,{method:e.formMethod})};let n=()=>({path:t,error:bs(400,{type:"invalid-body"})}),r=(e.formMethod||"get").toUpperCase(),o=t3(t);if(e.body!==void 0){if(e.formEncType==="text/plain"){if(!$s(r))return n();let f=typeof e.body=="string"?e.body:e.body instanceof FormData||e.body instanceof URLSearchParams?Array.from(e.body.entries()).reduce((g,[p,y])=>`${g}${p}=${y}
`,""):String(e.body);return{path:t,submission:{formMethod:r,formAction:o,formEncType:e.formEncType,formData:void 0,json:void 0,text:f}}}else if(e.formEncType==="application/json"){if(!$s(r))return n();try{let f=typeof e.body=="string"?JSON.parse(e.body):e.body;return{path:t,submission:{formMethod:r,formAction:o,formEncType:e.formEncType,formData:void 0,json:f,text:void 0}}}catch{return n()}}}ft(typeof FormData=="function","FormData is not available in this environment");let a,l;if(e.formData)a=D1(e.formData),l=e.formData;else if(e.body instanceof FormData)a=D1(e.body),l=e.body;else if(e.body instanceof URLSearchParams)a=e.body,l=YT(a);else if(e.body==null)a=new URLSearchParams,l=new FormData;else try{a=new URLSearchParams(e.body),l=YT(a)}catch{return n()}let u={formMethod:r,formAction:o,formEncType:e&&e.formEncType||"application/x-www-form-urlencoded",formData:l,json:void 0,text:void 0};if($s(u.formMethod))return{path:t,submission:u};let h=wo(t);return i&&h.search&&L_(h.search)&&a.append("index",""),h.search=`?${a}`,{path:ga(h),submission:u}}function UT(i,t,e=!1){let n=i.findIndex(s=>s.route.id===t);return n>=0?i.slice(0,e?n+1:n):i}function WT(i,t,e,n,s,r,o,a,l,u,h,f,g,p){let y=p?$i(p[1])?p[1].error:p[1].data:void 0,E=i.createURL(t.location),C=i.createURL(s),k=e;r&&t.errors?k=UT(e,Object.keys(t.errors)[0],!0):p&&$i(p[1])&&(k=UT(e,p[0]));let T=p?p[1].statusCode:void 0,P=T&&T>=400,S=k.filter((A,N)=>{let{route:L}=A;if(L.lazy)return!0;if(L.loader==null)return!1;if(r)return V1(L,t.loaderData,t.errors);if(tz(t.loaderData,t.matches[N],A))return!0;let M=t.matches[N],B=A;return qT(A,{currentUrl:E,currentParams:M.params,nextUrl:C,nextParams:B.params,...n,actionResult:y,actionStatus:T,defaultShouldRevalidate:P?!1:o||E.pathname+E.search===C.pathname+C.search||E.search!==C.search||nz(M,B)})}),O=[];return u.forEach((A,N)=>{if(r||!e.some(q=>q.route.id===A.routeId)||l.has(N))return;let L=ia(f,A.path,g);if(!L){O.push({key:N,routeId:A.routeId,path:A.path,matches:null,match:null,controller:null});return}let M=t.fetchers.get(N),B=$d(L,A.path),U=!1;h.has(N)?U=!1:a.has(N)?(a.delete(N),U=!0):M&&M.state!=="idle"&&M.data===void 0?U=o:U=qT(B,{currentUrl:E,currentParams:t.matches[t.matches.length-1].params,nextUrl:C,nextParams:e[e.length-1].params,...n,actionResult:y,actionStatus:T,defaultShouldRevalidate:P?!1:o}),U&&O.push({key:N,routeId:A.routeId,path:A.path,matches:L,match:B,controller:new AbortController})}),[S,O]}function V1(i,t,e){if(i.lazy)return!0;if(!i.loader)return!1;let n=t!=null&&t[i.id]!==void 0,s=e!=null&&e[i.id]!==void 0;return!n&&s?!1:typeof i.loader=="function"&&i.loader.hydrate===!0?!0:!n&&!s}function tz(i,t,e){let n=!t||e.route.id!==t.route.id,s=!i.hasOwnProperty(e.route.id);return n||s}function nz(i,t){let e=i.route.path;return i.pathname!==t.pathname||e!=null&&e.endsWith("*")&&i.params["*"]!==t.params["*"]}function qT(i,t){if(i.route.shouldRevalidate){let e=i.route.shouldRevalidate(t);if(typeof e=="boolean")return e}return t.defaultShouldRevalidate}function GT(i,t,e,n,s){let r;if(i){let l=n[i];ft(l,`No route found to patch children into: routeId = ${i}`),l.children||(l.children=[]),r=l.children}else r=e;let o=t.filter(l=>!r.some(u=>e3(l,u))),a=qg(o,s,[i||"_","patch",String((r==null?void 0:r.length)||"0")],n);r.push(...a)}function e3(i,t){return"id"in i&&"id"in t&&i.id===t.id?!0:i.index===t.index&&i.path===t.path&&i.caseSensitive===t.caseSensitive?(!i.children||i.children.length===0)&&(!t.children||t.children.length===0)?!0:i.children.every((e,n)=>{var s;return(s=t.children)==null?void 0:s.some(r=>e3(e,r))}):!1}async function iz(i,t,e){if(!i.lazy)return;let n=await i.lazy();if(!i.lazy)return;let s=e[i.id];ft(s,"No route found in manifest");let r={};for(let o in n){let l=s[o]!==void 0&&o!=="hasErrorBoundary";Nn(!l,`Route "${s.id}" has a static property "${o}" defined but its lazy function is also returning a value for this property. The lazy route property "${o}" will be ignored.`),!l&&!k$.has(o)&&(r[o]=n[o])}Object.assign(s,r),Object.assign(s,{...t(s),lazy:void 0})}async function sz({matches:i}){let t=i.filter(n=>n.shouldLoad);return(await Promise.all(t.map(n=>n.resolve()))).reduce((n,s,r)=>Object.assign(n,{[t[r].route.id]:s}),{})}async function rz(i,t,e,n,s,r,o,a,l,u){let h=r.map(p=>p.route.lazy?iz(p.route,l,a):void 0),f=r.map((p,y)=>{let E=h[y],C=s.some(T=>T.route.id===p.route.id);return{...p,shouldLoad:C,resolve:async T=>(T&&n.method==="GET"&&(p.route.lazy||p.route.loader)&&(C=!0),C?oz(t,n,p,E,T,u):Promise.resolve({type:"data",result:void 0}))}}),g=await i({matches:f,request:n,params:r[0].params,fetcherKey:o,context:u});try{await Promise.all(h)}catch{}return g}async function oz(i,t,e,n,s,r){let o,a,l=u=>{let h,f=new Promise((y,E)=>h=E);a=()=>h(),t.signal.addEventListener("abort",a);let g=y=>typeof u!="function"?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${i}" [routeId: ${e.route.id}]`)):u({request:t,params:e.params,context:r},...y!==void 0?[y]:[]),p=(async()=>{try{return{type:"data",result:await(s?s(E=>g(E)):g())}}catch(y){return{type:"error",result:y}}})();return Promise.race([p,f])};try{let u=e.route[i];if(n)if(u){let h,[f]=await Promise.all([l(u).catch(g=>{h=g}),n]);if(h!==void 0)throw h;o=f}else if(await n,u=e.route[i],u)o=await l(u);else if(i==="action"){let h=new URL(t.url),f=h.pathname+h.search;throw bs(405,{method:t.method,pathname:f,routeId:e.route.id})}else return{type:"data",result:void 0};else if(u)o=await l(u);else{let h=new URL(t.url),f=h.pathname+h.search;throw bs(404,{pathname:f})}}catch(u){return{type:"error",result:u}}finally{a&&t.signal.removeEventListener("abort",a)}return o}async function az(i){var n,s,r,o,a,l;let{result:t,type:e}=i;if(n3(t)){let u;try{let h=t.headers.get("Content-Type");h&&/\bapplication\/json\b/.test(h)?t.body==null?u=null:u=await t.json():u=await t.text()}catch(h){return{type:"error",error:h}}return e==="error"?{type:"error",error:new Kg(t.status,t.statusText,u),statusCode:t.status,headers:t.headers}:{type:"data",data:u,statusCode:t.status,headers:t.headers}}return e==="error"?eS(t)?t.data instanceof Error?{type:"error",error:t.data,statusCode:(n=t.init)==null?void 0:n.status,headers:(s=t.init)!=null&&s.headers?new Headers(t.init.headers):void 0}:{type:"error",error:new Kg(((r=t.init)==null?void 0:r.status)||500,void 0,t.data),statusCode:_h(t)?t.status:void 0,headers:(o=t.init)!=null&&o.headers?new Headers(t.init.headers):void 0}:{type:"error",error:t,statusCode:_h(t)?t.status:void 0}:eS(t)?{type:"data",data:t.data,statusCode:(a=t.init)==null?void 0:a.status,headers:(l=t.init)!=null&&l.headers?new Headers(t.init.headers):void 0}:{type:"data",data:t}}function lz(i,t,e,n,s){let r=i.headers.get("Location");if(ft(r,"Redirects returned/thrown from loaders/actions must have a Location header"),!M_.test(r)){let o=n.slice(0,n.findIndex(a=>a.route.id===e)+1);r=L1(new URL(t.url),o,s,r),i.headers.set("Location",r)}return i}function KT(i,t,e){if(M_.test(i)){let n=i,s=n.startsWith("//")?new URL(t.protocol+n):new URL(n),r=Qs(s.pathname,e)!=null;if(s.origin===t.origin&&r)return s.pathname+s.search+s.hash}return i}function wc(i,t,e,n){let s=i.createURL(t3(t)).toString(),r={signal:e};if(n&&$s(n.formMethod)){let{formMethod:o,formEncType:a}=n;r.method=o.toUpperCase(),a==="application/json"?(r.headers=new Headers({"Content-Type":a}),r.body=JSON.stringify(n.json)):a==="text/plain"?r.body=n.text:a==="application/x-www-form-urlencoded"&&n.formData?r.body=D1(n.formData):r.body=n.formData}return new Request(s,r)}function D1(i){let t=new URLSearchParams;for(let[e,n]of i.entries())t.append(e,typeof n=="string"?n:n.name);return t}function YT(i){let t=new FormData;for(let[e,n]of i.entries())t.append(e,n);return t}function cz(i,t,e,n=!1,s=!1){let r={},o=null,a,l=!1,u={},h=e&&$i(e[1])?e[1].error:void 0;return i.forEach(f=>{if(!(f.route.id in t))return;let g=f.route.id,p=t[g];if(ft(!tl(p),"Cannot handle redirect results in processLoaderData"),$i(p)){let y=p.error;if(h!==void 0&&(y=h,h=void 0),o=o||{},s)o[g]=y;else{let E=Ja(i,g);o[E.route.id]==null&&(o[E.route.id]=y)}n||(r[g]=QR),l||(l=!0,a=_h(p.error)?p.error.status:500),p.headers&&(u[g]=p.headers)}else r[g]=p.data,p.statusCode&&p.statusCode!==200&&!l&&(a=p.statusCode),p.headers&&(u[g]=p.headers)}),h!==void 0&&e&&(o={[e[0]]:h},r[e[0]]=void 0),{loaderData:r,errors:o,statusCode:a||200,loaderHeaders:u}}function ZT(i,t,e,n,s,r){let{loaderData:o,errors:a}=cz(t,e,n);return s.forEach(l=>{let{key:u,match:h,controller:f}=l,g=r[u];if(ft(g,"Did not find corresponding fetcher result"),!(f&&f.signal.aborted))if($i(g)){let p=Ja(i.matches,h==null?void 0:h.route.id);a&&a[p.route.id]||(a={...a,[p.route.id]:g.error}),i.fetchers.delete(u)}else if(tl(g))ft(!1,"Unhandled fetcher revalidation redirect");else{let p=Qo(g.data);i.fetchers.set(u,p)}}),{loaderData:o,errors:a}}function XT(i,t,e,n){let s=Object.entries(t).filter(([,r])=>r!==QR).reduce((r,[o,a])=>(r[o]=a,r),{});for(let r of e){let o=r.route.id;if(!t.hasOwnProperty(o)&&i.hasOwnProperty(o)&&r.route.loader&&(s[o]=i[o]),n&&n.hasOwnProperty(o))break}return s}function JT(i){return i?$i(i[1])?{actionData:{}}:{actionData:{[i[0]]:i[1].data}}:{}}function Ja(i,t){return(t?i.slice(0,i.findIndex(n=>n.route.id===t)+1):[...i]).reverse().find(n=>n.route.hasErrorBoundary===!0)||i[0]}function QT(i){let t=i.length===1?i[0]:i.find(e=>e.index||!e.path||e.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:t}],route:t}}function bs(i,{pathname:t,routeId:e,method:n,type:s,message:r}={}){let o="Unknown Server Error",a="Unknown @remix-run/router error";return i===400?(o="Bad Request",n&&t&&e?a=`You made a ${n} request to "${t}" but did not provide a \`loader\` for route "${e}", so there is no way to handle the request.`:s==="invalid-body"&&(a="Unable to encode submission body")):i===403?(o="Forbidden",a=`Route "${e}" does not match URL "${t}"`):i===404?(o="Not Found",a=`No route matches URL "${t}"`):i===405&&(o="Method Not Allowed",n&&t&&e?a=`You made a ${n.toUpperCase()} request to "${t}" but did not provide an \`action\` for route "${e}", so there is no way to handle the request.`:n&&(a=`Invalid request method "${n.toUpperCase()}"`)),new Kg(i||500,o,new Error(a),!0)}function Bm(i){let t=Object.entries(i);for(let e=t.length-1;e>=0;e--){let[n,s]=t[e];if(tl(s))return{key:n,result:s}}}function t3(i){let t=typeof i=="string"?wo(i):i;return ga({...t,hash:""})}function uz(i,t){return i.pathname!==t.pathname||i.search!==t.search?!1:i.hash===""?t.hash!=="":i.hash===t.hash?!0:t.hash!==""}function dz(i){return n3(i.result)&&Y$.has(i.result.status)}function $i(i){return i.type==="error"}function tl(i){return(i&&i.type)==="redirect"}function eS(i){return typeof i=="object"&&i!=null&&"type"in i&&"data"in i&&"init"in i&&i.type==="DataWithResponseInit"}function n3(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.headers=="object"&&typeof i.body<"u"}function hz(i){return K$.has(i.toUpperCase())}function $s(i){return q$.has(i.toUpperCase())}function L_(i){return new URLSearchParams(i).getAll("index").some(t=>t==="")}function $d(i,t){let e=typeof t=="string"?wo(t).search:t.search;if(i[i.length-1].route.index&&L_(e||""))return i[i.length-1];let n=ZR(i);return n[n.length-1]}function tS(i){let{formMethod:t,formAction:e,formEncType:n,text:s,formData:r,json:o}=i;if(!(!t||!e||!n)){if(s!=null)return{formMethod:t,formAction:e,formEncType:n,formData:void 0,json:void 0,text:s};if(r!=null)return{formMethod:t,formAction:e,formEncType:n,formData:r,json:void 0,text:void 0};if(o!==void 0)return{formMethod:t,formAction:e,formEncType:n,formData:void 0,json:o,text:void 0}}}function n0(i,t){return t?{state:"loading",location:i,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}:{state:"loading",location:i,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function fz(i,t){return{state:"submitting",location:i,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}}function _d(i,t){return i?{state:"loading",formMethod:i.formMethod,formAction:i.formAction,formEncType:i.formEncType,formData:i.formData,json:i.json,text:i.text,data:t}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function mz(i,t){return{state:"submitting",formMethod:i.formMethod,formAction:i.formAction,formEncType:i.formEncType,formData:i.formData,json:i.json,text:i.text,data:t?t.data:void 0}}function Qo(i){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:i}}function gz(i,t){try{let e=i.sessionStorage.getItem(JR);if(e){let n=JSON.parse(e);for(let[s,r]of Object.entries(n||{}))r&&Array.isArray(r)&&t.set(s,new Set(r||[]))}}catch{}}function pz(i,t){if(t.size>0){let e={};for(let[n,s]of t)e[n]=[...s];try{i.sessionStorage.setItem(JR,JSON.stringify(e))}catch(n){Nn(!1,`Failed to save applied view transitions in sessionStorage (${n}).`)}}}function bz(){let i,t,e=new Promise((n,s)=>{i=async r=>{n(r);try{await e}catch{}},t=async r=>{s(r);try{await e}catch{}}});return{promise:e,resolve:i,reject:t}}var Al=R.createContext(null);Al.displayName="DataRouter";var Qh=R.createContext(null);Qh.displayName="DataRouterState";var V_=R.createContext({isTransitioning:!1});V_.displayName="ViewTransition";var i3=R.createContext(new Map);i3.displayName="Fetchers";var wz=R.createContext(null);wz.displayName="Await";var Rr=R.createContext(null);Rr.displayName="Navigation";var Xp=R.createContext(null);Xp.displayName="Location";var sr=R.createContext({outlet:null,matches:[],isDataRoute:!1});sr.displayName="Route";var D_=R.createContext(null);D_.displayName="RouteError";function vz(i,{relative:t}={}){ft(ef(),"useHref() may be used only in the context of a <Router> component.");let{basename:e,navigator:n}=R.useContext(Rr),{hash:s,pathname:r,search:o}=tf(i,{relative:t}),a=r;return e!=="/"&&(a=r==="/"?e:kr([e,r])),n.createHref({pathname:a,search:o,hash:s})}function ef(){return R.useContext(Xp)!=null}function Ea(){return ft(ef(),"useLocation() may be used only in the context of a <Router> component."),R.useContext(Xp).location}var s3="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function r3(i){R.useContext(Rr).static||R.useLayoutEffect(i)}function Pl(){let{isDataRoute:i}=R.useContext(sr);return i?Mz():yz()}function yz(){ft(ef(),"useNavigate() may be used only in the context of a <Router> component.");let i=R.useContext(Al),{basename:t,navigator:e}=R.useContext(Rr),{matches:n}=R.useContext(sr),{pathname:s}=Ea(),r=JSON.stringify(O_(n)),o=R.useRef(!1);return r3(()=>{o.current=!0}),R.useCallback((l,u={})=>{if(Nn(o.current,s3),!o.current)return;if(typeof l=="number"){e.go(l);return}let h=N_(l,JSON.parse(r),s,u.relative==="path");i==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:kr([t,h.pathname])),(u.replace?e.replace:e.push)(h,u.state,u)},[t,e,r,s,i])}var _z=R.createContext(null);function Ez(i){let t=R.useContext(sr).outlet;return t&&R.createElement(_z.Provider,{value:i},t)}function B_(){let{matches:i}=R.useContext(sr),t=i[i.length-1];return t?t.params:{}}function tf(i,{relative:t}={}){let{matches:e}=R.useContext(sr),{pathname:n}=Ea(),s=JSON.stringify(O_(e));return R.useMemo(()=>N_(i,JSON.parse(s),n,t==="path"),[i,s,n,t])}function Cz(i,t,e,n){ft(ef(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s,static:r}=R.useContext(Rr),{matches:o}=R.useContext(sr),a=o[o.length-1],l=a?a.params:{},u=a?a.pathname:"/",h=a?a.pathnameBase:"/",f=a&&a.route;{let T=f&&f.path||"";o3(u,!f||T.endsWith("*")||T.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${T}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${T}"> to <Route path="${T==="/"?"*":`${T}/*`}">.`)}let g=Ea(),p;p=g;let y=p.pathname||"/",E=y;if(h!=="/"){let T=h.replace(/^\//,"").split("/");E="/"+y.replace(/^\//,"").split("/").slice(T.length).join("/")}let C=!r&&e&&e.matches&&e.matches.length>0?e.matches:ia(i,{pathname:E});return Nn(f||C!=null,`No routes matched location "${p.pathname}${p.search}${p.hash}" `),Nn(C==null||C[C.length-1].route.element!==void 0||C[C.length-1].route.Component!==void 0||C[C.length-1].route.lazy!==void 0,`Matched leaf route at location "${p.pathname}${p.search}${p.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),Az(C&&C.map(T=>Object.assign({},T,{params:Object.assign({},l,T.params),pathname:kr([h,s.encodeLocation?s.encodeLocation(T.pathname).pathname:T.pathname]),pathnameBase:T.pathnameBase==="/"?h:kr([h,s.encodeLocation?s.encodeLocation(T.pathnameBase).pathname:T.pathnameBase])})),o,e,n)}function xz(){let i=Nz(),t=_h(i)?`${i.status} ${i.statusText}`:i instanceof Error?i.message:JSON.stringify(i),e=i instanceof Error?i.stack:null,n="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:n},r={padding:"2px 4px",backgroundColor:n},o=null;return console.error("Error handled by React Router default ErrorBoundary:",i),o=R.createElement(R.Fragment,null,R.createElement("p",null,"💿 Hey developer 👋"),R.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",R.createElement("code",{style:r},"ErrorBoundary")," or"," ",R.createElement("code",{style:r},"errorElement")," prop on your route.")),R.createElement(R.Fragment,null,R.createElement("h2",null,"Unexpected Application Error!"),R.createElement("h3",{style:{fontStyle:"italic"}},t),e?R.createElement("pre",{style:s},e):null,o)}var kz=R.createElement(xz,null),Tz=class extends R.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,t){return t.location!==i.location||t.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:t.error,location:t.location,revalidation:i.revalidation||t.revalidation}}componentDidCatch(i,t){console.error("React Router caught the following error during render",i,t)}render(){return this.state.error!==void 0?R.createElement(sr.Provider,{value:this.props.routeContext},R.createElement(D_.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Sz({routeContext:i,match:t,children:e}){let n=R.useContext(Al);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),R.createElement(sr.Provider,{value:i},e)}function Az(i,t=[],e=null,n=null){if(i==null){if(!e)return null;if(e.errors)i=e.matches;else if(t.length===0&&!e.initialized&&e.matches.length>0)i=e.matches;else return null}let s=i,r=e==null?void 0:e.errors;if(r!=null){let l=s.findIndex(u=>u.route.id&&(r==null?void 0:r[u.route.id])!==void 0);ft(l>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(r).join(",")}`),s=s.slice(0,Math.min(s.length,l+1))}let o=!1,a=-1;if(e)for(let l=0;l<s.length;l++){let u=s[l];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(a=l),u.route.id){let{loaderData:h,errors:f}=e,g=u.route.loader&&!h.hasOwnProperty(u.route.id)&&(!f||f[u.route.id]===void 0);if(u.route.lazy||g){o=!0,a>=0?s=s.slice(0,a+1):s=[s[0]];break}}}return s.reduceRight((l,u,h)=>{let f,g=!1,p=null,y=null;e&&(f=r&&u.route.id?r[u.route.id]:void 0,p=u.route.errorElement||kz,o&&(a<0&&h===0?(o3("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),g=!0,y=null):a===h&&(g=!0,y=u.route.hydrateFallbackElement||null)));let E=t.concat(s.slice(0,h+1)),C=()=>{let k;return f?k=p:g?k=y:u.route.Component?k=R.createElement(u.route.Component,null):u.route.element?k=u.route.element:k=l,R.createElement(Sz,{match:u,routeContext:{outlet:l,matches:E,isDataRoute:e!=null},children:k})};return e&&(u.route.ErrorBoundary||u.route.errorElement||h===0)?R.createElement(Tz,{location:e.location,revalidation:e.revalidation,component:p,error:f,children:C(),routeContext:{outlet:null,matches:E,isDataRoute:!0}}):C()},null)}function F_(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Pz(i){let t=R.useContext(Al);return ft(t,F_(i)),t}function Iz(i){let t=R.useContext(Qh);return ft(t,F_(i)),t}function Rz(i){let t=R.useContext(sr);return ft(t,F_(i)),t}function $_(i){let t=Rz(i),e=t.matches[t.matches.length-1];return ft(e.route.id,`${i} can only be used on routes that contain a unique "id"`),e.route.id}function Oz(){return $_("useRouteId")}function Nz(){var n;let i=R.useContext(D_),t=Iz("useRouteError"),e=$_("useRouteError");return i!==void 0?i:(n=t.errors)==null?void 0:n[e]}function Mz(){let{router:i}=Pz("useNavigate"),t=$_("useNavigate"),e=R.useRef(!1);return r3(()=>{e.current=!0}),R.useCallback(async(s,r={})=>{Nn(e.current,s3),e.current&&(typeof s=="number"?i.navigate(s):await i.navigate(s,{fromRouteId:t,...r}))},[i,t])}var nS={};function o3(i,t,e){!t&&!nS[i]&&(nS[i]=!0,Nn(!1,e))}var iS={};function sS(i,t){!i&&!iS[t]&&(iS[t]=!0,console.warn(t))}function Lz(i){let t={hasErrorBoundary:i.hasErrorBoundary||i.ErrorBoundary!=null||i.errorElement!=null};return i.Component&&(i.element&&Nn(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(t,{element:R.createElement(i.Component),Component:void 0})),i.HydrateFallback&&(i.hydrateFallbackElement&&Nn(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(t,{hydrateFallbackElement:R.createElement(i.HydrateFallback),HydrateFallback:void 0})),i.ErrorBoundary&&(i.errorElement&&Nn(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(t,{errorElement:R.createElement(i.ErrorBoundary),ErrorBoundary:void 0})),t}var Vz=class{constructor(){this.status="pending",this.promise=new Promise((i,t)=>{this.resolve=e=>{this.status==="pending"&&(this.status="resolved",i(e))},this.reject=e=>{this.status==="pending"&&(this.status="rejected",t(e))}})}};function Dz({router:i,flushSync:t}){let[e,n]=R.useState(i.state),[s,r]=R.useState(),[o,a]=R.useState({isTransitioning:!1}),[l,u]=R.useState(),[h,f]=R.useState(),[g,p]=R.useState(),y=R.useRef(new Map),E=R.useCallback((P,{deletedFetchers:S,flushSync:O,viewTransitionOpts:A})=>{P.fetchers.forEach((L,M)=>{L.data!==void 0&&y.current.set(M,L.data)}),S.forEach(L=>y.current.delete(L)),sS(O===!1||t!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let N=i.window!=null&&i.window.document!=null&&typeof i.window.document.startViewTransition=="function";if(sS(A==null||N,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!A||!N){t&&O?t(()=>n(P)):R.startTransition(()=>n(P));return}if(t&&O){t(()=>{h&&(l&&l.resolve(),h.skipTransition()),a({isTransitioning:!0,flushSync:!0,currentLocation:A.currentLocation,nextLocation:A.nextLocation})});let L=i.window.document.startViewTransition(()=>{t(()=>n(P))});L.finished.finally(()=>{t(()=>{u(void 0),f(void 0),r(void 0),a({isTransitioning:!1})})}),t(()=>f(L));return}h?(l&&l.resolve(),h.skipTransition(),p({state:P,currentLocation:A.currentLocation,nextLocation:A.nextLocation})):(r(P),a({isTransitioning:!0,flushSync:!1,currentLocation:A.currentLocation,nextLocation:A.nextLocation}))},[i.window,t,h,l]);R.useLayoutEffect(()=>i.subscribe(E),[i,E]),R.useEffect(()=>{o.isTransitioning&&!o.flushSync&&u(new Vz)},[o]),R.useEffect(()=>{if(l&&s&&i.window){let P=s,S=l.promise,O=i.window.document.startViewTransition(async()=>{R.startTransition(()=>n(P)),await S});O.finished.finally(()=>{u(void 0),f(void 0),r(void 0),a({isTransitioning:!1})}),f(O)}},[s,l,i.window]),R.useEffect(()=>{l&&s&&e.location.key===s.location.key&&l.resolve()},[l,h,e.location,s]),R.useEffect(()=>{!o.isTransitioning&&g&&(r(g.state),a({isTransitioning:!0,flushSync:!1,currentLocation:g.currentLocation,nextLocation:g.nextLocation}),p(void 0))},[o.isTransitioning,g]);let C=R.useMemo(()=>({createHref:i.createHref,encodeLocation:i.encodeLocation,go:P=>i.navigate(P),push:(P,S,O)=>i.navigate(P,{state:S,preventScrollReset:O==null?void 0:O.preventScrollReset}),replace:(P,S,O)=>i.navigate(P,{replace:!0,state:S,preventScrollReset:O==null?void 0:O.preventScrollReset})}),[i]),k=i.basename||"/",T=R.useMemo(()=>({router:i,navigator:C,static:!1,basename:k}),[i,C,k]);return R.createElement(R.Fragment,null,R.createElement(Al.Provider,{value:T},R.createElement(Qh.Provider,{value:e},R.createElement(i3.Provider,{value:y.current},R.createElement(V_.Provider,{value:o},R.createElement($z,{basename:k,location:e.location,navigationType:e.historyAction,navigator:C},R.createElement(Bz,{routes:i.routes,future:i.future,state:e})))))),null)}var Bz=R.memo(Fz);function Fz({routes:i,future:t,state:e}){return Cz(i,void 0,e,t)}function a3(i){return Ez(i.context)}function $z({basename:i="/",children:t=null,location:e,navigationType:n="POP",navigator:s,static:r=!1}){ft(!ef(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=i.replace(/^\/*/,"/"),a=R.useMemo(()=>({basename:o,navigator:s,static:r,future:{}}),[o,s,r]);typeof e=="string"&&(e=wo(e));let{pathname:l="/",search:u="",hash:h="",state:f=null,key:g="default"}=e,p=R.useMemo(()=>{let y=Qs(l,o);return y==null?null:{location:{pathname:y,search:u,hash:h,state:f,key:g},navigationType:n}},[o,l,u,h,f,g,n]);return Nn(p!=null,`<Router basename="${o}"> is not able to match the URL "${l}${u}${h}" because it does not start with the basename, so the <Router> won't render anything.`),p==null?null:R.createElement(Rr.Provider,{value:a},R.createElement(Xp.Provider,{children:t,value:p}))}var yg="get",_g="application/x-www-form-urlencoded";function Jp(i){return i!=null&&typeof i.tagName=="string"}function zz(i){return Jp(i)&&i.tagName.toLowerCase()==="button"}function jz(i){return Jp(i)&&i.tagName.toLowerCase()==="form"}function Hz(i){return Jp(i)&&i.tagName.toLowerCase()==="input"}function Uz(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function Wz(i,t){return i.button===0&&(!t||t==="_self")&&!Uz(i)}var Fm=null;function qz(){if(Fm===null)try{new FormData(document.createElement("form"),0),Fm=!1}catch{Fm=!0}return Fm}var Gz=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function i0(i){return i!=null&&!Gz.has(i)?(Nn(!1,`"${i}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${_g}"`),null):i}function Kz(i,t){let e,n,s,r,o;if(jz(i)){let a=i.getAttribute("action");n=a?Qs(a,t):null,e=i.getAttribute("method")||yg,s=i0(i.getAttribute("enctype"))||_g,r=new FormData(i)}else if(zz(i)||Hz(i)&&(i.type==="submit"||i.type==="image")){let a=i.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=i.getAttribute("formaction")||a.getAttribute("action");if(n=l?Qs(l,t):null,e=i.getAttribute("formmethod")||a.getAttribute("method")||yg,s=i0(i.getAttribute("formenctype"))||i0(a.getAttribute("enctype"))||_g,r=new FormData(a,i),!qz()){let{name:u,type:h,value:f}=i;if(h==="image"){let g=u?`${u}.`:"";r.append(`${g}x`,"0"),r.append(`${g}y`,"0")}else u&&r.append(u,f)}}else{if(Jp(i))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');e=yg,n=null,s=_g,o=i}return r&&s==="text/plain"&&(o=r,r=void 0),{action:n,method:e.toLowerCase(),encType:s,formData:r,body:o}}function z_(i,t){if(i===!1||i===null||typeof i>"u")throw new Error(t)}async function Yz(i,t){if(i.id in t)return t[i.id];try{let e=await import(i.module);return t[i.id]=e,e}catch(e){return console.error(`Error loading route module \`${i.module}\`, reloading page...`),console.error(e),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Zz(i){return i==null?!1:i.href==null?i.rel==="preload"&&typeof i.imageSrcSet=="string"&&typeof i.imageSizes=="string":typeof i.rel=="string"&&typeof i.href=="string"}async function Xz(i,t,e){let n=await Promise.all(i.map(async s=>{let r=t.routes[s.route.id];if(r){let o=await Yz(r,e);return o.links?o.links():[]}return[]}));return tj(n.flat(1).filter(Zz).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function rS(i,t,e,n,s,r){let o=(l,u)=>e[u]?l.route.id!==e[u].route.id:!0,a=(l,u)=>{var h;return e[u].pathname!==l.pathname||((h=e[u].route.path)==null?void 0:h.endsWith("*"))&&e[u].params["*"]!==l.params["*"]};return r==="assets"?t.filter((l,u)=>o(l,u)||a(l,u)):r==="data"?t.filter((l,u)=>{var f;let h=n.routes[l.route.id];if(!h||!h.hasLoader)return!1;if(o(l,u)||a(l,u))return!0;if(l.route.shouldRevalidate){let g=l.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((f=e[0])==null?void 0:f.params)||{},nextUrl:new URL(i,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof g=="boolean")return g}return!0}):[]}function Jz(i,t){return Qz(i.map(e=>{let n=t.routes[e.route.id];if(!n)return[];let s=[n.module];return n.imports&&(s=s.concat(n.imports)),s}).flat(1))}function Qz(i){return[...new Set(i)]}function ej(i){let t={},e=Object.keys(i).sort();for(let n of e)t[n]=i[n];return t}function tj(i,t){let e=new Set;return new Set(t),i.reduce((n,s)=>{let r=JSON.stringify(ej(s));return e.has(r)||(e.add(r),n.push({key:r,link:s})),n},[])}function nj(i){let t=typeof i=="string"?new URL(i,typeof window>"u"?"server://singlefetch/":window.location.origin):i;return t.pathname==="/"?t.pathname="_root.data":t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function ij(){let i=R.useContext(Al);return z_(i,"You must render this element inside a <DataRouterContext.Provider> element"),i}function sj(){let i=R.useContext(Qh);return z_(i,"You must render this element inside a <DataRouterStateContext.Provider> element"),i}var j_=R.createContext(void 0);j_.displayName="FrameworkContext";function l3(){let i=R.useContext(j_);return z_(i,"You must render this element inside a <HydratedRouter> element"),i}function rj(i,t){let e=R.useContext(j_),[n,s]=R.useState(!1),[r,o]=R.useState(!1),{onFocus:a,onBlur:l,onMouseEnter:u,onMouseLeave:h,onTouchStart:f}=t,g=R.useRef(null);R.useEffect(()=>{if(i==="render"&&o(!0),i==="viewport"){let E=k=>{k.forEach(T=>{o(T.isIntersecting)})},C=new IntersectionObserver(E,{threshold:.5});return g.current&&C.observe(g.current),()=>{C.disconnect()}}},[i]),R.useEffect(()=>{if(n){let E=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(E)}}},[n]);let p=()=>{s(!0)},y=()=>{s(!1),o(!1)};return e?i!=="intent"?[r,g,{}]:[r,g,{onFocus:Ed(a,p),onBlur:Ed(l,y),onMouseEnter:Ed(u,p),onMouseLeave:Ed(h,y),onTouchStart:Ed(f,p)}]:[!1,g,{}]}function Ed(i,t){return e=>{i&&i(e),e.defaultPrevented||t(e)}}function oj({page:i,...t}){let{router:e}=ij(),n=R.useMemo(()=>ia(e.routes,i,e.basename),[e.routes,i,e.basename]);return n?R.createElement(lj,{page:i,matches:n,...t}):null}function aj(i){let{manifest:t,routeModules:e}=l3(),[n,s]=R.useState([]);return R.useEffect(()=>{let r=!1;return Xz(i,t,e).then(o=>{r||s(o)}),()=>{r=!0}},[i,t,e]),n}function lj({page:i,matches:t,...e}){let n=Ea(),{manifest:s,routeModules:r}=l3(),{loaderData:o,matches:a}=sj(),l=R.useMemo(()=>rS(i,t,a,s,n,"data"),[i,t,a,s,n]),u=R.useMemo(()=>rS(i,t,a,s,n,"assets"),[i,t,a,s,n]),h=R.useMemo(()=>{if(i===n.pathname+n.search+n.hash)return[];let p=new Set,y=!1;if(t.forEach(C=>{var T;let k=s.routes[C.route.id];!k||!k.hasLoader||(!l.some(P=>P.route.id===C.route.id)&&C.route.id in o&&((T=r[C.route.id])!=null&&T.shouldRevalidate)||k.hasClientLoader?y=!0:p.add(C.route.id))}),p.size===0)return[];let E=nj(i);return y&&p.size>0&&E.searchParams.set("_routes",t.filter(C=>p.has(C.route.id)).map(C=>C.route.id).join(",")),[E.pathname+E.search]},[o,n,s,l,t,i,r]),f=R.useMemo(()=>Jz(u,s),[u,s]),g=aj(u);return R.createElement(R.Fragment,null,h.map(p=>R.createElement("link",{key:p,rel:"prefetch",as:"fetch",href:p,...e})),f.map(p=>R.createElement("link",{key:p,rel:"modulepreload",href:p,...e})),g.map(({key:p,link:y})=>R.createElement("link",{key:p,...y})))}function cj(...i){return t=>{i.forEach(e=>{typeof e=="function"?e(t):e!=null&&(e.current=t)})}}var c3=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{c3&&(window.__reactRouterVersion="7.1.5")}catch{}function uj(i,t){return Q$({basename:t==null?void 0:t.basename,future:t==null?void 0:t.future,history:E$({window:t==null?void 0:t.window}),hydrationData:dj(),routes:i,mapRouteProperties:Lz,dataStrategy:t==null?void 0:t.dataStrategy,patchRoutesOnNavigation:t==null?void 0:t.patchRoutesOnNavigation,window:t==null?void 0:t.window}).initialize()}function dj(){let i=window==null?void 0:window.__staticRouterHydrationData;return i&&i.errors&&(i={...i,errors:hj(i.errors)}),i}function hj(i){if(!i)return null;let t=Object.entries(i),e={};for(let[n,s]of t)if(s&&s.__type==="RouteErrorResponse")e[n]=new Kg(s.status,s.statusText,s.data,s.internal===!0);else if(s&&s.__type==="Error"){if(s.__subType){let r=window[s.__subType];if(typeof r=="function")try{let o=new r(s.message);o.stack="",e[n]=o}catch{}}if(e[n]==null){let r=new Error(s.message);r.stack="",e[n]=r}}else e[n]=s;return e}var u3=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,d3=R.forwardRef(function({onClick:t,discover:e="render",prefetch:n="none",relative:s,reloadDocument:r,replace:o,state:a,target:l,to:u,preventScrollReset:h,viewTransition:f,...g},p){let{basename:y}=R.useContext(Rr),E=typeof u=="string"&&u3.test(u),C,k=!1;if(typeof u=="string"&&E&&(C=u,c3))try{let M=new URL(window.location.href),B=u.startsWith("//")?new URL(M.protocol+u):new URL(u),U=Qs(B.pathname,y);B.origin===M.origin&&U!=null?u=U+B.search+B.hash:k=!0}catch{Nn(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let T=vz(u,{relative:s}),[P,S,O]=rj(n,g),A=gj(u,{replace:o,state:a,target:l,preventScrollReset:h,relative:s,viewTransition:f});function N(M){t&&t(M),M.defaultPrevented||A(M)}let L=R.createElement("a",{...g,...O,href:C||T,onClick:k||r?t:N,ref:cj(p,S),target:l,"data-discover":!E&&e==="render"?"true":void 0});return P&&!E?R.createElement(R.Fragment,null,L,R.createElement(oj,{page:T})):L});d3.displayName="Link";var on=R.forwardRef(function({"aria-current":t="page",caseSensitive:e=!1,className:n="",end:s=!1,style:r,to:o,viewTransition:a,children:l,...u},h){let f=tf(o,{relative:u.relative}),g=Ea(),p=R.useContext(Qh),{navigator:y,basename:E}=R.useContext(Rr),C=p!=null&&yj(f)&&a===!0,k=y.encodeLocation?y.encodeLocation(f).pathname:f.pathname,T=g.pathname,P=p&&p.navigation&&p.navigation.location?p.navigation.location.pathname:null;e||(T=T.toLowerCase(),P=P?P.toLowerCase():null,k=k.toLowerCase()),P&&E&&(P=Qs(P,E)||P);const S=k!=="/"&&k.endsWith("/")?k.length-1:k.length;let O=T===k||!s&&T.startsWith(k)&&T.charAt(S)==="/",A=P!=null&&(P===k||!s&&P.startsWith(k)&&P.charAt(k.length)==="/"),N={isActive:O,isPending:A,isTransitioning:C},L=O?t:void 0,M;typeof n=="function"?M=n(N):M=[n,O?"active":null,A?"pending":null,C?"transitioning":null].filter(Boolean).join(" ");let B=typeof r=="function"?r(N):r;return R.createElement(d3,{...u,"aria-current":L,className:M,ref:h,style:B,to:o,viewTransition:a},typeof l=="function"?l(N):l)});on.displayName="NavLink";var fj=R.forwardRef(({discover:i="render",fetcherKey:t,navigate:e,reloadDocument:n,replace:s,state:r,method:o=yg,action:a,onSubmit:l,relative:u,preventScrollReset:h,viewTransition:f,...g},p)=>{let y=wj(),E=vj(a,{relative:u}),C=o.toLowerCase()==="get"?"get":"post",k=typeof a=="string"&&u3.test(a),T=P=>{if(l&&l(P),P.defaultPrevented)return;P.preventDefault();let S=P.nativeEvent.submitter,O=(S==null?void 0:S.getAttribute("formmethod"))||o;y(S||P.currentTarget,{fetcherKey:t,method:O,navigate:e,replace:s,state:r,relative:u,preventScrollReset:h,viewTransition:f})};return R.createElement("form",{ref:p,method:C,action:E,onSubmit:n?l:T,...g,"data-discover":!k&&i==="render"?"true":void 0})});fj.displayName="Form";function mj(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function h3(i){let t=R.useContext(Al);return ft(t,mj(i)),t}function gj(i,{target:t,replace:e,state:n,preventScrollReset:s,relative:r,viewTransition:o}={}){let a=Pl(),l=Ea(),u=tf(i,{relative:r});return R.useCallback(h=>{if(Wz(h,t)){h.preventDefault();let f=e!==void 0?e:ga(l)===ga(u);a(i,{replace:f,state:n,preventScrollReset:s,relative:r,viewTransition:o})}},[l,a,u,e,n,t,i,s,r,o])}var pj=0,bj=()=>`__${String(++pj)}__`;function wj(){let{router:i}=h3("useSubmit"),{basename:t}=R.useContext(Rr),e=Oz();return R.useCallback(async(n,s={})=>{let{action:r,method:o,encType:a,formData:l,body:u}=Kz(n,t);if(s.navigate===!1){let h=s.fetcherKey||bj();await i.fetch(h,e,s.action||r,{preventScrollReset:s.preventScrollReset,formData:l,body:u,formMethod:s.method||o,formEncType:s.encType||a,flushSync:s.flushSync})}else await i.navigate(s.action||r,{preventScrollReset:s.preventScrollReset,formData:l,body:u,formMethod:s.method||o,formEncType:s.encType||a,replace:s.replace,state:s.state,fromRouteId:e,flushSync:s.flushSync,viewTransition:s.viewTransition})},[i,t,e])}function vj(i,{relative:t}={}){let{basename:e}=R.useContext(Rr),n=R.useContext(sr);ft(n,"useFormAction must be used inside a RouteContext");let[s]=n.matches.slice(-1),r={...tf(i||".",{relative:t})},o=Ea();if(i==null){r.search=o.search;let a=new URLSearchParams(r.search),l=a.getAll("index");if(l.some(h=>h==="")){a.delete("index"),l.filter(f=>f).forEach(f=>a.append("index",f));let h=a.toString();r.search=h?`?${h}`:""}}return(!i||i===".")&&s.route.index&&(r.search=r.search?r.search.replace(/^\?/,"?index&"):"?index"),e!=="/"&&(r.pathname=r.pathname==="/"?e:kr([e,r.pathname])),ga(r)}function yj(i,t={}){let e=R.useContext(V_);ft(e!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=h3("useViewTransitionState"),s=tf(i,{relative:t.relative});if(!e.isTransitioning)return!1;let r=Qs(e.currentLocation.pathname,n)||e.currentLocation.pathname,o=Qs(e.nextLocation.pathname,n)||e.nextLocation.pathname;return Gg(s.pathname,o)!=null||Gg(s.pathname,r)!=null}new TextEncoder;function Fn(i){return`Minified Redux error #${i}; visit https://redux.js.org/Errors?code=${i} for the full message or use the non-minified dev environment for full errors. `}var _j=typeof Symbol=="function"&&Symbol.observable||"@@observable",oS=_j,s0=()=>Math.random().toString(36).substring(7).split("").join("."),Ej={INIT:`@@redux/INIT${s0()}`,REPLACE:`@@redux/REPLACE${s0()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${s0()}`},Yg=Ej;function H_(i){if(typeof i!="object"||i===null)return!1;let t=i;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(i)===t||Object.getPrototypeOf(i)===null}function f3(i,t,e){if(typeof i!="function")throw new Error(Fn(2));if(typeof t=="function"&&typeof e=="function"||typeof e=="function"&&typeof arguments[3]=="function")throw new Error(Fn(0));if(typeof t=="function"&&typeof e>"u"&&(e=t,t=void 0),typeof e<"u"){if(typeof e!="function")throw new Error(Fn(1));return e(f3)(i,t)}let n=i,s=t,r=new Map,o=r,a=0,l=!1;function u(){o===r&&(o=new Map,r.forEach((C,k)=>{o.set(k,C)}))}function h(){if(l)throw new Error(Fn(3));return s}function f(C){if(typeof C!="function")throw new Error(Fn(4));if(l)throw new Error(Fn(5));let k=!0;u();const T=a++;return o.set(T,C),function(){if(k){if(l)throw new Error(Fn(6));k=!1,u(),o.delete(T),r=null}}}function g(C){if(!H_(C))throw new Error(Fn(7));if(typeof C.type>"u")throw new Error(Fn(8));if(typeof C.type!="string")throw new Error(Fn(17));if(l)throw new Error(Fn(9));try{l=!0,s=n(s,C)}finally{l=!1}return(r=o).forEach(T=>{T()}),C}function p(C){if(typeof C!="function")throw new Error(Fn(10));n=C,g({type:Yg.REPLACE})}function y(){const C=f;return{subscribe(k){if(typeof k!="object"||k===null)throw new Error(Fn(11));function T(){const S=k;S.next&&S.next(h())}return T(),{unsubscribe:C(T)}},[oS](){return this}}}return g({type:Yg.INIT}),{dispatch:g,subscribe:f,getState:h,replaceReducer:p,[oS]:y}}function Cj(i){Object.keys(i).forEach(t=>{const e=i[t];if(typeof e(void 0,{type:Yg.INIT})>"u")throw new Error(Fn(12));if(typeof e(void 0,{type:Yg.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Fn(13))})}function xj(i){const t=Object.keys(i),e={};for(let r=0;r<t.length;r++){const o=t[r];typeof i[o]=="function"&&(e[o]=i[o])}const n=Object.keys(e);let s;try{Cj(e)}catch(r){s=r}return function(o={},a){if(s)throw s;let l=!1;const u={};for(let h=0;h<n.length;h++){const f=n[h],g=e[f],p=o[f],y=g(p,a);if(typeof y>"u")throw a&&a.type,new Error(Fn(14));u[f]=y,l=l||y!==p}return l=l||n.length!==Object.keys(o).length,l?u:o}}function Zg(...i){return i.length===0?t=>t:i.length===1?i[0]:i.reduce((t,e)=>(...n)=>t(e(...n)))}function kj(...i){return t=>(e,n)=>{const s=t(e,n);let r=()=>{throw new Error(Fn(15))};const o={getState:s.getState,dispatch:(l,...u)=>r(l,...u)},a=i.map(l=>l(o));return r=Zg(...a)(s.dispatch),{...s,dispatch:r}}}function Tj(i){return H_(i)&&"type"in i&&typeof i.type=="string"}var m3=Symbol.for("immer-nothing"),aS=Symbol.for("immer-draftable"),Qi=Symbol.for("immer-state");function Hs(i,...t){throw new Error(`[Immer] minified error nr: ${i}. Full error at: https://bit.ly/3cXEKWf`)}var ru=Object.getPrototypeOf;function bl(i){return!!i&&!!i[Qi]}function co(i){var t;return i?g3(i)||Array.isArray(i)||!!i[aS]||!!((t=i.constructor)!=null&&t[aS])||eb(i)||tb(i):!1}var Sj=Object.prototype.constructor.toString();function g3(i){if(!i||typeof i!="object")return!1;const t=ru(i);if(t===null)return!0;const e=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return e===Object?!0:typeof e=="function"&&Function.toString.call(e)===Sj}function Xg(i,t){Qp(i)===0?Reflect.ownKeys(i).forEach(e=>{t(e,i[e],i)}):i.forEach((e,n)=>t(n,e,i))}function Qp(i){const t=i[Qi];return t?t.type_:Array.isArray(i)?1:eb(i)?2:tb(i)?3:0}function B1(i,t){return Qp(i)===2?i.has(t):Object.prototype.hasOwnProperty.call(i,t)}function p3(i,t,e){const n=Qp(i);n===2?i.set(t,e):n===3?i.add(e):i[t]=e}function Aj(i,t){return i===t?i!==0||1/i===1/t:i!==i&&t!==t}function eb(i){return i instanceof Map}function tb(i){return i instanceof Set}function Xa(i){return i.copy_||i.base_}function F1(i,t){if(eb(i))return new Map(i);if(tb(i))return new Set(i);if(Array.isArray(i))return Array.prototype.slice.call(i);const e=g3(i);if(t===!0||t==="class_only"&&!e){const n=Object.getOwnPropertyDescriptors(i);delete n[Qi];let s=Reflect.ownKeys(n);for(let r=0;r<s.length;r++){const o=s[r],a=n[o];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(n[o]={configurable:!0,writable:!0,enumerable:a.enumerable,value:i[o]})}return Object.create(ru(i),n)}else{const n=ru(i);if(n!==null&&e)return{...i};const s=Object.create(n);return Object.assign(s,i)}}function U_(i,t=!1){return nb(i)||bl(i)||!co(i)||(Qp(i)>1&&(i.set=i.add=i.clear=i.delete=Pj),Object.freeze(i),t&&Object.entries(i).forEach(([e,n])=>U_(n,!0))),i}function Pj(){Hs(2)}function nb(i){return Object.isFrozen(i)}var Ij={};function wl(i){const t=Ij[i];return t||Hs(0,i),t}var Eh;function b3(){return Eh}function Rj(i,t){return{drafts_:[],parent_:i,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function lS(i,t){t&&(wl("Patches"),i.patches_=[],i.inversePatches_=[],i.patchListener_=t)}function $1(i){z1(i),i.drafts_.forEach(Oj),i.drafts_=null}function z1(i){i===Eh&&(Eh=i.parent_)}function cS(i){return Eh=Rj(Eh,i)}function Oj(i){const t=i[Qi];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function uS(i,t){t.unfinalizedDrafts_=t.drafts_.length;const e=t.drafts_[0];return i!==void 0&&i!==e?(e[Qi].modified_&&($1(t),Hs(4)),co(i)&&(i=Jg(t,i),t.parent_||Qg(t,i)),t.patches_&&wl("Patches").generateReplacementPatches_(e[Qi].base_,i,t.patches_,t.inversePatches_)):i=Jg(t,e,[]),$1(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),i!==m3?i:void 0}function Jg(i,t,e){if(nb(t))return t;const n=t[Qi];if(!n)return Xg(t,(s,r)=>dS(i,n,t,s,r,e)),t;if(n.scope_!==i)return t;if(!n.modified_)return Qg(i,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const s=n.copy_;let r=s,o=!1;n.type_===3&&(r=new Set(s),s.clear(),o=!0),Xg(r,(a,l)=>dS(i,n,s,a,l,e,o)),Qg(i,s,!1),e&&i.patches_&&wl("Patches").generatePatches_(n,e,i.patches_,i.inversePatches_)}return n.copy_}function dS(i,t,e,n,s,r,o){if(bl(s)){const a=r&&t&&t.type_!==3&&!B1(t.assigned_,n)?r.concat(n):void 0,l=Jg(i,s,a);if(p3(e,n,l),bl(l))i.canAutoFreeze_=!1;else return}else o&&e.add(s);if(co(s)&&!nb(s)){if(!i.immer_.autoFreeze_&&i.unfinalizedDrafts_<1)return;Jg(i,s),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&Object.prototype.propertyIsEnumerable.call(e,n)&&Qg(i,s)}}function Qg(i,t,e=!1){!i.parent_&&i.immer_.autoFreeze_&&i.canAutoFreeze_&&U_(t,e)}function Nj(i,t){const e=Array.isArray(i),n={type_:e?1:0,scope_:t?t.scope_:b3(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:i,draft_:null,copy_:null,revoke_:null,isManual_:!1};let s=n,r=W_;e&&(s=[n],r=Ch);const{revoke:o,proxy:a}=Proxy.revocable(s,r);return n.draft_=a,n.revoke_=o,a}var W_={get(i,t){if(t===Qi)return i;const e=Xa(i);if(!B1(e,t))return Mj(i,e,t);const n=e[t];return i.finalized_||!co(n)?n:n===r0(i.base_,t)?(o0(i),i.copy_[t]=H1(n,i)):n},has(i,t){return t in Xa(i)},ownKeys(i){return Reflect.ownKeys(Xa(i))},set(i,t,e){const n=w3(Xa(i),t);if(n!=null&&n.set)return n.set.call(i.draft_,e),!0;if(!i.modified_){const s=r0(Xa(i),t),r=s==null?void 0:s[Qi];if(r&&r.base_===e)return i.copy_[t]=e,i.assigned_[t]=!1,!0;if(Aj(e,s)&&(e!==void 0||B1(i.base_,t)))return!0;o0(i),j1(i)}return i.copy_[t]===e&&(e!==void 0||t in i.copy_)||Number.isNaN(e)&&Number.isNaN(i.copy_[t])||(i.copy_[t]=e,i.assigned_[t]=!0),!0},deleteProperty(i,t){return r0(i.base_,t)!==void 0||t in i.base_?(i.assigned_[t]=!1,o0(i),j1(i)):delete i.assigned_[t],i.copy_&&delete i.copy_[t],!0},getOwnPropertyDescriptor(i,t){const e=Xa(i),n=Reflect.getOwnPropertyDescriptor(e,t);return n&&{writable:!0,configurable:i.type_!==1||t!=="length",enumerable:n.enumerable,value:e[t]}},defineProperty(){Hs(11)},getPrototypeOf(i){return ru(i.base_)},setPrototypeOf(){Hs(12)}},Ch={};Xg(W_,(i,t)=>{Ch[i]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Ch.deleteProperty=function(i,t){return Ch.set.call(this,i,t,void 0)};Ch.set=function(i,t,e){return W_.set.call(this,i[0],t,e,i[0])};function r0(i,t){const e=i[Qi];return(e?Xa(e):i)[t]}function Mj(i,t,e){var s;const n=w3(t,e);return n?"value"in n?n.value:(s=n.get)==null?void 0:s.call(i.draft_):void 0}function w3(i,t){if(!(t in i))return;let e=ru(i);for(;e;){const n=Object.getOwnPropertyDescriptor(e,t);if(n)return n;e=ru(e)}}function j1(i){i.modified_||(i.modified_=!0,i.parent_&&j1(i.parent_))}function o0(i){i.copy_||(i.copy_=F1(i.base_,i.scope_.immer_.useStrictShallowCopy_))}var Lj=class{constructor(i){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,e,n)=>{if(typeof t=="function"&&typeof e!="function"){const r=e;e=t;const o=this;return function(l=r,...u){return o.produce(l,h=>e.call(this,h,...u))}}typeof e!="function"&&Hs(6),n!==void 0&&typeof n!="function"&&Hs(7);let s;if(co(t)){const r=cS(this),o=H1(t,void 0);let a=!0;try{s=e(o),a=!1}finally{a?$1(r):z1(r)}return lS(r,n),uS(s,r)}else if(!t||typeof t!="object"){if(s=e(t),s===void 0&&(s=t),s===m3&&(s=void 0),this.autoFreeze_&&U_(s,!0),n){const r=[],o=[];wl("Patches").generateReplacementPatches_(t,s,r,o),n(r,o)}return s}else Hs(1,t)},this.produceWithPatches=(t,e)=>{if(typeof t=="function")return(o,...a)=>this.produceWithPatches(o,l=>t(l,...a));let n,s;return[this.produce(t,e,(o,a)=>{n=o,s=a}),n,s]},typeof(i==null?void 0:i.autoFreeze)=="boolean"&&this.setAutoFreeze(i.autoFreeze),typeof(i==null?void 0:i.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(i.useStrictShallowCopy)}createDraft(i){co(i)||Hs(8),bl(i)&&(i=Vj(i));const t=cS(this),e=H1(i,void 0);return e[Qi].isManual_=!0,z1(t),e}finishDraft(i,t){const e=i&&i[Qi];(!e||!e.isManual_)&&Hs(9);const{scope_:n}=e;return lS(n,t),uS(void 0,n)}setAutoFreeze(i){this.autoFreeze_=i}setUseStrictShallowCopy(i){this.useStrictShallowCopy_=i}applyPatches(i,t){let e;for(e=t.length-1;e>=0;e--){const s=t[e];if(s.path.length===0&&s.op==="replace"){i=s.value;break}}e>-1&&(t=t.slice(e+1));const n=wl("Patches").applyPatches_;return bl(i)?n(i,t):this.produce(i,s=>n(s,t))}};function H1(i,t){const e=eb(i)?wl("MapSet").proxyMap_(i,t):tb(i)?wl("MapSet").proxySet_(i,t):Nj(i,t);return(t?t.scope_:b3()).drafts_.push(e),e}function Vj(i){return bl(i)||Hs(10,i),v3(i)}function v3(i){if(!co(i)||nb(i))return i;const t=i[Qi];let e;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,e=F1(i,t.scope_.immer_.useStrictShallowCopy_)}else e=F1(i,!0);return Xg(e,(n,s)=>{p3(e,n,v3(s))}),t&&(t.finalized_=!1),e}var es=new Lj,y3=es.produce;es.produceWithPatches.bind(es);es.setAutoFreeze.bind(es);es.setUseStrictShallowCopy.bind(es);es.applyPatches.bind(es);es.createDraft.bind(es);es.finishDraft.bind(es);function _3(i){return({dispatch:e,getState:n})=>s=>r=>typeof r=="function"?r(e,n,i):s(r)}var Dj=_3(),Bj=_3,Fj=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Zg:Zg.apply(null,arguments)},$j=i=>i&&typeof i.match=="function";function Qd(i,t){function e(...n){if(t){let s=t(...n);if(!s)throw new Error(so(0));return{type:i,payload:s.payload,..."meta"in s&&{meta:s.meta},..."error"in s&&{error:s.error}}}return{type:i,payload:n[0]}}return e.toString=()=>`${i}`,e.type=i,e.match=n=>Tj(n)&&n.type===i,e}var E3=class zd extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,zd.prototype)}static get[Symbol.species](){return zd}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new zd(...t[0].concat(this)):new zd(...t.concat(this))}};function hS(i){return co(i)?y3(i,()=>{}):i}function fS(i,t,e){return i.has(t)?i.get(t):i.set(t,e(t)).get(t)}function zj(i){return typeof i=="boolean"}var jj=()=>function(t){const{thunk:e=!0,immutableCheck:n=!0,serializableCheck:s=!0,actionCreatorCheck:r=!0}=t??{};let o=new E3;return e&&(zj(e)?o.push(Dj):o.push(Bj(e.extraArgument))),o},Hj="RTK_autoBatch",mS=i=>t=>{setTimeout(t,i)},Uj=(i={type:"raf"})=>t=>(...e)=>{const n=t(...e);let s=!0,r=!1,o=!1;const a=new Set,l=i.type==="tick"?queueMicrotask:i.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:mS(10):i.type==="callback"?i.queueNotification:mS(i.timeout),u=()=>{o=!1,r&&(r=!1,a.forEach(h=>h()))};return Object.assign({},n,{subscribe(h){const f=()=>s&&h(),g=n.subscribe(f);return a.add(h),()=>{g(),a.delete(h)}},dispatch(h){var f;try{return s=!((f=h==null?void 0:h.meta)!=null&&f[Hj]),r=!s,r&&(o||(o=!0,l(u))),n.dispatch(h)}finally{s=!0}}})},Wj=i=>function(e){const{autoBatch:n=!0}=e??{};let s=new E3(i);return n&&s.push(Uj(typeof n=="object"?n:void 0)),s};function qj(i){const t=jj(),{reducer:e=void 0,middleware:n,devTools:s=!0,preloadedState:r=void 0,enhancers:o=void 0}=i;let a;if(typeof e=="function")a=e;else if(H_(e))a=xj(e);else throw new Error(so(1));let l;typeof n=="function"?l=n(t):l=t();let u=Zg;s&&(u=Fj({trace:!1,...typeof s=="object"&&s}));const h=kj(...l),f=Wj(h);let g=typeof o=="function"?o(f):f();const p=u(...g);return f3(a,r,p)}function C3(i){const t={},e=[];let n;const s={addCase(r,o){const a=typeof r=="string"?r:r.type;if(!a)throw new Error(so(28));if(a in t)throw new Error(so(29));return t[a]=o,s},addMatcher(r,o){return e.push({matcher:r,reducer:o}),s},addDefaultCase(r){return n=r,s}};return i(s),[t,e,n]}function Gj(i){return typeof i=="function"}function Kj(i,t){let[e,n,s]=C3(t),r;if(Gj(i))r=()=>hS(i());else{const a=hS(i);r=()=>a}function o(a=r(),l){let u=[e[l.type],...n.filter(({matcher:h})=>h(l)).map(({reducer:h})=>h)];return u.filter(h=>!!h).length===0&&(u=[s]),u.reduce((h,f)=>{if(f)if(bl(h)){const p=f(h,l);return p===void 0?h:p}else{if(co(h))return y3(h,g=>f(g,l));{const g=f(h,l);if(g===void 0){if(h===null)return h;throw Error("A case reducer on a non-draftable value must not return undefined")}return g}}return h},a)}return o.getInitialState=r,o}var Yj=(i,t)=>$j(i)?i.match(t):i(t);function Zj(...i){return t=>i.some(e=>Yj(e,t))}var Xj="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Jj=(i=21)=>{let t="",e=i;for(;e--;)t+=Xj[Math.random()*64|0];return t},Qj=["name","message","stack","code"],a0=class{constructor(i,t){b(this,"_type");this.payload=i,this.meta=t}},gS=class{constructor(i,t){b(this,"_type");this.payload=i,this.meta=t}},eH=i=>{if(typeof i=="object"&&i!==null){const t={};for(const e of Qj)typeof i[e]=="string"&&(t[e]=i[e]);return t}return{message:String(i)}},q_=(()=>{function i(t,e,n){const s=Qd(t+"/fulfilled",(l,u,h,f)=>({payload:l,meta:{...f||{},arg:h,requestId:u,requestStatus:"fulfilled"}})),r=Qd(t+"/pending",(l,u,h)=>({payload:void 0,meta:{...h||{},arg:u,requestId:l,requestStatus:"pending"}})),o=Qd(t+"/rejected",(l,u,h,f,g)=>({payload:f,error:(n&&n.serializeError||eH)(l||"Rejected"),meta:{...g||{},arg:h,requestId:u,rejectedWithValue:!!f,requestStatus:"rejected",aborted:(l==null?void 0:l.name)==="AbortError",condition:(l==null?void 0:l.name)==="ConditionError"}}));function a(l){return(u,h,f)=>{const g=n!=null&&n.idGenerator?n.idGenerator(l):Jj(),p=new AbortController;let y,E;function C(T){E=T,p.abort()}const k=async function(){var S,O;let T;try{let A=(S=n==null?void 0:n.condition)==null?void 0:S.call(n,l,{getState:h,extra:f});if(nH(A)&&(A=await A),A===!1||p.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};const N=new Promise((L,M)=>{y=()=>{M({name:"AbortError",message:E||"Aborted"})},p.signal.addEventListener("abort",y)});u(r(g,l,(O=n==null?void 0:n.getPendingMeta)==null?void 0:O.call(n,{requestId:g,arg:l},{getState:h,extra:f}))),T=await Promise.race([N,Promise.resolve(e(l,{dispatch:u,getState:h,extra:f,requestId:g,signal:p.signal,abort:C,rejectWithValue:(L,M)=>new a0(L,M),fulfillWithValue:(L,M)=>new gS(L,M)})).then(L=>{if(L instanceof a0)throw L;return L instanceof gS?s(L.payload,g,l,L.meta):s(L,g,l)})])}catch(A){T=A instanceof a0?o(null,g,l,A.payload,A.meta):o(A,g,l)}finally{y&&p.signal.removeEventListener("abort",y)}return n&&!n.dispatchConditionRejection&&o.match(T)&&T.meta.condition||u(T),T}();return Object.assign(k,{abort:C,requestId:g,arg:l,unwrap(){return k.then(tH)}})}}return Object.assign(a,{pending:r,rejected:o,fulfilled:s,settled:Zj(o,s),typePrefix:t})}return i.withTypes=()=>i,i})();function tH(i){if(i.meta&&i.meta.rejectedWithValue)throw i.payload;if(i.error)throw i.error;return i.payload}function nH(i){return i!==null&&typeof i=="object"&&typeof i.then=="function"}var iH=Symbol.for("rtk-slice-createasyncthunk");function sH(i,t){return`${i}/${t}`}function rH({creators:i}={}){var e;const t=(e=i==null?void 0:i.asyncThunk)==null?void 0:e[iH];return function(s){const{name:r,reducerPath:o=r}=s;if(!r)throw new Error(so(11));const a=(typeof s.reducers=="function"?s.reducers(aH()):s.reducers)||{},l=Object.keys(a),u={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},h={addCase(P,S){const O=typeof P=="string"?P:P.type;if(!O)throw new Error(so(12));if(O in u.sliceCaseReducersByType)throw new Error(so(13));return u.sliceCaseReducersByType[O]=S,h},addMatcher(P,S){return u.sliceMatchers.push({matcher:P,reducer:S}),h},exposeAction(P,S){return u.actionCreators[P]=S,h},exposeCaseReducer(P,S){return u.sliceCaseReducersByName[P]=S,h}};l.forEach(P=>{const S=a[P],O={reducerName:P,type:sH(r,P),createNotation:typeof s.reducers=="function"};cH(S)?dH(O,S,h,t):lH(O,S,h)});function f(){const[P={},S=[],O=void 0]=typeof s.extraReducers=="function"?C3(s.extraReducers):[s.extraReducers],A={...P,...u.sliceCaseReducersByType};return Kj(s.initialState,N=>{for(let L in A)N.addCase(L,A[L]);for(let L of u.sliceMatchers)N.addMatcher(L.matcher,L.reducer);for(let L of S)N.addMatcher(L.matcher,L.reducer);O&&N.addDefaultCase(O)})}const g=P=>P,p=new Map;let y;function E(P,S){return y||(y=f()),y(P,S)}function C(){return y||(y=f()),y.getInitialState()}function k(P,S=!1){function O(N){let L=N[P];return typeof L>"u"&&S&&(L=C()),L}function A(N=g){const L=fS(p,S,()=>new WeakMap);return fS(L,N,()=>{const M={};for(const[B,U]of Object.entries(s.selectors??{}))M[B]=oH(U,N,C,S);return M})}return{reducerPath:P,getSelectors:A,get selectors(){return A(O)},selectSlice:O}}const T={name:r,reducer:E,actions:u.actionCreators,caseReducers:u.sliceCaseReducersByName,getInitialState:C,...k(o),injectInto(P,{reducerPath:S,...O}={}){const A=S??o;return P.inject({reducerPath:A,reducer:E},O),{...T,...k(A,!0)}}};return T}}function oH(i,t,e,n){function s(r,...o){let a=t(r);return typeof a>"u"&&n&&(a=e()),i(a,...o)}return s.unwrapped=i,s}var G_=rH();function aH(){function i(t,e){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...e}}return i.withTypes=()=>i,{reducer(t){return Object.assign({[t.name](...e){return t(...e)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,e){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:e}},asyncThunk:i}}function lH({type:i,reducerName:t,createNotation:e},n,s){let r,o;if("reducer"in n){if(e&&!uH(n))throw new Error(so(17));r=n.reducer,o=n.prepare}else r=n;s.addCase(i,r).exposeCaseReducer(t,r).exposeAction(t,o?Qd(i,o):Qd(i))}function cH(i){return i._reducerDefinitionType==="asyncThunk"}function uH(i){return i._reducerDefinitionType==="reducerWithPrepare"}function dH({type:i,reducerName:t},e,n,s){if(!s)throw new Error(so(18));const{payloadCreator:r,fulfilled:o,pending:a,rejected:l,settled:u,options:h}=e,f=s(i,r,h);n.exposeAction(t,f),o&&n.addCase(f.fulfilled,o),a&&n.addCase(f.pending,a),l&&n.addCase(f.rejected,l),u&&n.addMatcher(f.settled,u),n.exposeCaseReducer(t,{fulfilled:o||$m,pending:a||$m,rejected:l||$m,settled:u||$m})}function $m(){}function so(i){return`Minified Redux Toolkit error #${i}; visit https://redux-toolkit.js.org/Errors?code=${i} for the full message or use the non-minified dev environment for full errors. `}const x3=G_({name:"loading",initialState:{isFullPageLoading:!1},reducers:{setIsFullPageLoading(i,t){i.isFullPageLoading=t.payload}}}),{setIsFullPageLoading:Xe}=x3.actions,hH=i=>i.loading,fH=x3.reducer,mH=()=>{const{isFullPageLoading:i}=Zp(hH);return v.jsx(v.Fragment,{children:i&&v.jsx("div",{className:"fixed-top w-100 h-100 bg-white bg-opacity-75 d-flex justify-content-center align-items-center",style:{zIndex:"2000"},children:v.jsx("div",{className:"spinner-border text-primary",children:v.jsx("span",{className:"visually-hidden",children:"Loading..."})})})})},k3=G_({name:"toast",initialState:{text:"",type:"",id:""},reducers:{setMessage(i,t){return t.payload}}}),en=q_("toast/asyncSetMessage",(i,{dispatch:t,requestId:e})=>{t(k3.actions.setMessage({...i,id:e}))}),gH=i=>i.toast,pH=k3.reducer,bH=R.memo(()=>{const i=R.useRef(null),t=R.useRef(null),{text:e,type:n,id:s}=Zp(gH);R.useEffect(()=>{i.current&&(t.current=new I_(i.current))},[]);const r=R.useCallback(()=>{var o;(o=t.current)==null||o.show()},[]);return R.useEffect(()=>{s&&r()},[r,s]),v.jsx("div",{className:"toast-container position-fixed bottom-0 end-0 p-3",children:v.jsx("div",{id:"toast",className:`toast text-bg-${n}`,role:"alert","aria-live":"assertive","aria-atomic":"true",ref:i,children:v.jsxs("div",{className:"toast-body d-flex",children:[e,v.jsx("button",{type:"button",className:"btn-close ms-auto flex-shrink-0","data-bs-dismiss":"toast","aria-label":"Close"})]})})})});function T3(i,t){return function(){return i.apply(t,arguments)}}const{toString:wH}=Object.prototype,{getPrototypeOf:K_}=Object,ib=(i=>t=>{const e=wH.call(t);return i[e]||(i[e]=e.slice(8,-1).toLowerCase())})(Object.create(null)),rr=i=>(i=i.toLowerCase(),t=>ib(t)===i),sb=i=>t=>typeof t===i,{isArray:xu}=Array,xh=sb("undefined");function vH(i){return i!==null&&!xh(i)&&i.constructor!==null&&!xh(i.constructor)&&Ki(i.constructor.isBuffer)&&i.constructor.isBuffer(i)}const S3=rr("ArrayBuffer");function yH(i){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(i):t=i&&i.buffer&&S3(i.buffer),t}const _H=sb("string"),Ki=sb("function"),A3=sb("number"),rb=i=>i!==null&&typeof i=="object",EH=i=>i===!0||i===!1,Eg=i=>{if(ib(i)!=="object")return!1;const t=K_(i);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in i)&&!(Symbol.iterator in i)},CH=rr("Date"),xH=rr("File"),kH=rr("Blob"),TH=rr("FileList"),SH=i=>rb(i)&&Ki(i.pipe),AH=i=>{let t;return i&&(typeof FormData=="function"&&i instanceof FormData||Ki(i.append)&&((t=ib(i))==="formdata"||t==="object"&&Ki(i.toString)&&i.toString()==="[object FormData]"))},PH=rr("URLSearchParams"),[IH,RH,OH,NH]=["ReadableStream","Request","Response","Headers"].map(rr),MH=i=>i.trim?i.trim():i.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function nf(i,t,{allOwnKeys:e=!1}={}){if(i===null||typeof i>"u")return;let n,s;if(typeof i!="object"&&(i=[i]),xu(i))for(n=0,s=i.length;n<s;n++)t.call(null,i[n],n,i);else{const r=e?Object.getOwnPropertyNames(i):Object.keys(i),o=r.length;let a;for(n=0;n<o;n++)a=r[n],t.call(null,i[a],a,i)}}function P3(i,t){t=t.toLowerCase();const e=Object.keys(i);let n=e.length,s;for(;n-- >0;)if(s=e[n],t===s.toLowerCase())return s;return null}const nl=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,I3=i=>!xh(i)&&i!==nl;function U1(){const{caseless:i}=I3(this)&&this||{},t={},e=(n,s)=>{const r=i&&P3(t,s)||s;Eg(t[r])&&Eg(n)?t[r]=U1(t[r],n):Eg(n)?t[r]=U1({},n):xu(n)?t[r]=n.slice():t[r]=n};for(let n=0,s=arguments.length;n<s;n++)arguments[n]&&nf(arguments[n],e);return t}const LH=(i,t,e,{allOwnKeys:n}={})=>(nf(t,(s,r)=>{e&&Ki(s)?i[r]=T3(s,e):i[r]=s},{allOwnKeys:n}),i),VH=i=>(i.charCodeAt(0)===65279&&(i=i.slice(1)),i),DH=(i,t,e,n)=>{i.prototype=Object.create(t.prototype,n),i.prototype.constructor=i,Object.defineProperty(i,"super",{value:t.prototype}),e&&Object.assign(i.prototype,e)},BH=(i,t,e,n)=>{let s,r,o;const a={};if(t=t||{},i==null)return t;do{for(s=Object.getOwnPropertyNames(i),r=s.length;r-- >0;)o=s[r],(!n||n(o,i,t))&&!a[o]&&(t[o]=i[o],a[o]=!0);i=e!==!1&&K_(i)}while(i&&(!e||e(i,t))&&i!==Object.prototype);return t},FH=(i,t,e)=>{i=String(i),(e===void 0||e>i.length)&&(e=i.length),e-=t.length;const n=i.indexOf(t,e);return n!==-1&&n===e},$H=i=>{if(!i)return null;if(xu(i))return i;let t=i.length;if(!A3(t))return null;const e=new Array(t);for(;t-- >0;)e[t]=i[t];return e},zH=(i=>t=>i&&t instanceof i)(typeof Uint8Array<"u"&&K_(Uint8Array)),jH=(i,t)=>{const n=(i&&i[Symbol.iterator]).call(i);let s;for(;(s=n.next())&&!s.done;){const r=s.value;t.call(i,r[0],r[1])}},HH=(i,t)=>{let e;const n=[];for(;(e=i.exec(t))!==null;)n.push(e);return n},UH=rr("HTMLFormElement"),WH=i=>i.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,n,s){return n.toUpperCase()+s}),pS=(({hasOwnProperty:i})=>(t,e)=>i.call(t,e))(Object.prototype),qH=rr("RegExp"),R3=(i,t)=>{const e=Object.getOwnPropertyDescriptors(i),n={};nf(e,(s,r)=>{let o;(o=t(s,r,i))!==!1&&(n[r]=o||s)}),Object.defineProperties(i,n)},GH=i=>{R3(i,(t,e)=>{if(Ki(i)&&["arguments","caller","callee"].indexOf(e)!==-1)return!1;const n=i[e];if(Ki(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+e+"'")})}})},KH=(i,t)=>{const e={},n=s=>{s.forEach(r=>{e[r]=!0})};return xu(i)?n(i):n(String(i).split(t)),e},YH=()=>{},ZH=(i,t)=>i!=null&&Number.isFinite(i=+i)?i:t,l0="abcdefghijklmnopqrstuvwxyz",bS="0123456789",O3={DIGIT:bS,ALPHA:l0,ALPHA_DIGIT:l0+l0.toUpperCase()+bS},XH=(i=16,t=O3.ALPHA_DIGIT)=>{let e="";const{length:n}=t;for(;i--;)e+=t[Math.random()*n|0];return e};function JH(i){return!!(i&&Ki(i.append)&&i[Symbol.toStringTag]==="FormData"&&i[Symbol.iterator])}const QH=i=>{const t=new Array(10),e=(n,s)=>{if(rb(n)){if(t.indexOf(n)>=0)return;if(!("toJSON"in n)){t[s]=n;const r=xu(n)?[]:{};return nf(n,(o,a)=>{const l=e(o,s+1);!xh(l)&&(r[a]=l)}),t[s]=void 0,r}}return n};return e(i,0)},eU=rr("AsyncFunction"),tU=i=>i&&(rb(i)||Ki(i))&&Ki(i.then)&&Ki(i.catch),N3=((i,t)=>i?setImmediate:t?((e,n)=>(nl.addEventListener("message",({source:s,data:r})=>{s===nl&&r===e&&n.length&&n.shift()()},!1),s=>{n.push(s),nl.postMessage(e,"*")}))(`axios@${Math.random()}`,[]):e=>setTimeout(e))(typeof setImmediate=="function",Ki(nl.postMessage)),nU=typeof queueMicrotask<"u"?queueMicrotask.bind(nl):typeof process<"u"&&process.nextTick||N3,ne={isArray:xu,isArrayBuffer:S3,isBuffer:vH,isFormData:AH,isArrayBufferView:yH,isString:_H,isNumber:A3,isBoolean:EH,isObject:rb,isPlainObject:Eg,isReadableStream:IH,isRequest:RH,isResponse:OH,isHeaders:NH,isUndefined:xh,isDate:CH,isFile:xH,isBlob:kH,isRegExp:qH,isFunction:Ki,isStream:SH,isURLSearchParams:PH,isTypedArray:zH,isFileList:TH,forEach:nf,merge:U1,extend:LH,trim:MH,stripBOM:VH,inherits:DH,toFlatObject:BH,kindOf:ib,kindOfTest:rr,endsWith:FH,toArray:$H,forEachEntry:jH,matchAll:HH,isHTMLForm:UH,hasOwnProperty:pS,hasOwnProp:pS,reduceDescriptors:R3,freezeMethods:GH,toObjectSet:KH,toCamelCase:WH,noop:YH,toFiniteNumber:ZH,findKey:P3,global:nl,isContextDefined:I3,ALPHABET:O3,generateString:XH,isSpecCompliantForm:JH,toJSONObject:QH,isAsyncFn:eU,isThenable:tU,setImmediate:N3,asap:nU};function it(i,t,e,n,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=i,this.name="AxiosError",t&&(this.code=t),e&&(this.config=e),n&&(this.request=n),s&&(this.response=s,this.status=s.status?s.status:null)}ne.inherits(it,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ne.toJSONObject(this.config),code:this.code,status:this.status}}});const M3=it.prototype,L3={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(i=>{L3[i]={value:i}});Object.defineProperties(it,L3);Object.defineProperty(M3,"isAxiosError",{value:!0});it.from=(i,t,e,n,s,r)=>{const o=Object.create(M3);return ne.toFlatObject(i,o,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),it.call(o,i.message,t,e,n,s),o.cause=i,o.name=i.name,r&&Object.assign(o,r),o};const iU=null;function W1(i){return ne.isPlainObject(i)||ne.isArray(i)}function V3(i){return ne.endsWith(i,"[]")?i.slice(0,-2):i}function wS(i,t,e){return i?i.concat(t).map(function(s,r){return s=V3(s),!e&&r?"["+s+"]":s}).join(e?".":""):t}function sU(i){return ne.isArray(i)&&!i.some(W1)}const rU=ne.toFlatObject(ne,{},null,function(t){return/^is[A-Z]/.test(t)});function ob(i,t,e){if(!ne.isObject(i))throw new TypeError("target must be an object");t=t||new FormData,e=ne.toFlatObject(e,{metaTokens:!0,dots:!1,indexes:!1},!1,function(E,C){return!ne.isUndefined(C[E])});const n=e.metaTokens,s=e.visitor||h,r=e.dots,o=e.indexes,l=(e.Blob||typeof Blob<"u"&&Blob)&&ne.isSpecCompliantForm(t);if(!ne.isFunction(s))throw new TypeError("visitor must be a function");function u(y){if(y===null)return"";if(ne.isDate(y))return y.toISOString();if(!l&&ne.isBlob(y))throw new it("Blob is not supported. Use a Buffer instead.");return ne.isArrayBuffer(y)||ne.isTypedArray(y)?l&&typeof Blob=="function"?new Blob([y]):Buffer.from(y):y}function h(y,E,C){let k=y;if(y&&!C&&typeof y=="object"){if(ne.endsWith(E,"{}"))E=n?E:E.slice(0,-2),y=JSON.stringify(y);else if(ne.isArray(y)&&sU(y)||(ne.isFileList(y)||ne.endsWith(E,"[]"))&&(k=ne.toArray(y)))return E=V3(E),k.forEach(function(P,S){!(ne.isUndefined(P)||P===null)&&t.append(o===!0?wS([E],S,r):o===null?E:E+"[]",u(P))}),!1}return W1(y)?!0:(t.append(wS(C,E,r),u(y)),!1)}const f=[],g=Object.assign(rU,{defaultVisitor:h,convertValue:u,isVisitable:W1});function p(y,E){if(!ne.isUndefined(y)){if(f.indexOf(y)!==-1)throw Error("Circular reference detected in "+E.join("."));f.push(y),ne.forEach(y,function(k,T){(!(ne.isUndefined(k)||k===null)&&s.call(t,k,ne.isString(T)?T.trim():T,E,g))===!0&&p(k,E?E.concat(T):[T])}),f.pop()}}if(!ne.isObject(i))throw new TypeError("data must be an object");return p(i),t}function vS(i){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(i).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function Y_(i,t){this._pairs=[],i&&ob(i,this,t)}const D3=Y_.prototype;D3.append=function(t,e){this._pairs.push([t,e])};D3.toString=function(t){const e=t?function(n){return t.call(this,n,vS)}:vS;return this._pairs.map(function(s){return e(s[0])+"="+e(s[1])},"").join("&")};function oU(i){return encodeURIComponent(i).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function B3(i,t,e){if(!t)return i;const n=e&&e.encode||oU;ne.isFunction(e)&&(e={serialize:e});const s=e&&e.serialize;let r;if(s?r=s(t,e):r=ne.isURLSearchParams(t)?t.toString():new Y_(t,e).toString(n),r){const o=i.indexOf("#");o!==-1&&(i=i.slice(0,o)),i+=(i.indexOf("?")===-1?"?":"&")+r}return i}class yS{constructor(){this.handlers=[]}use(t,e,n){return this.handlers.push({fulfilled:t,rejected:e,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){ne.forEach(this.handlers,function(n){n!==null&&t(n)})}}const F3={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},aU=typeof URLSearchParams<"u"?URLSearchParams:Y_,lU=typeof FormData<"u"?FormData:null,cU=typeof Blob<"u"?Blob:null,uU={isBrowser:!0,classes:{URLSearchParams:aU,FormData:lU,Blob:cU},protocols:["http","https","file","blob","url","data"]},Z_=typeof window<"u"&&typeof document<"u",q1=typeof navigator=="object"&&navigator||void 0,dU=Z_&&(!q1||["ReactNative","NativeScript","NS"].indexOf(q1.product)<0),hU=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",fU=Z_&&window.location.href||"http://localhost",mU=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Z_,hasStandardBrowserEnv:dU,hasStandardBrowserWebWorkerEnv:hU,navigator:q1,origin:fU},Symbol.toStringTag,{value:"Module"})),Qn={...mU,...uU};function gU(i,t){return ob(i,new Qn.classes.URLSearchParams,Object.assign({visitor:function(e,n,s,r){return Qn.isNode&&ne.isBuffer(e)?(this.append(n,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}function pU(i){return ne.matchAll(/\w+|\[(\w*)]/g,i).map(t=>t[0]==="[]"?"":t[1]||t[0])}function bU(i){const t={},e=Object.keys(i);let n;const s=e.length;let r;for(n=0;n<s;n++)r=e[n],t[r]=i[r];return t}function $3(i){function t(e,n,s,r){let o=e[r++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),l=r>=e.length;return o=!o&&ne.isArray(s)?s.length:o,l?(ne.hasOwnProp(s,o)?s[o]=[s[o],n]:s[o]=n,!a):((!s[o]||!ne.isObject(s[o]))&&(s[o]=[]),t(e,n,s[o],r)&&ne.isArray(s[o])&&(s[o]=bU(s[o])),!a)}if(ne.isFormData(i)&&ne.isFunction(i.entries)){const e={};return ne.forEachEntry(i,(n,s)=>{t(pU(n),s,e,0)}),e}return null}function wU(i,t,e){if(ne.isString(i))try{return(t||JSON.parse)(i),ne.trim(i)}catch(n){if(n.name!=="SyntaxError")throw n}return(0,JSON.stringify)(i)}const sf={transitional:F3,adapter:["xhr","http","fetch"],transformRequest:[function(t,e){const n=e.getContentType()||"",s=n.indexOf("application/json")>-1,r=ne.isObject(t);if(r&&ne.isHTMLForm(t)&&(t=new FormData(t)),ne.isFormData(t))return s?JSON.stringify($3(t)):t;if(ne.isArrayBuffer(t)||ne.isBuffer(t)||ne.isStream(t)||ne.isFile(t)||ne.isBlob(t)||ne.isReadableStream(t))return t;if(ne.isArrayBufferView(t))return t.buffer;if(ne.isURLSearchParams(t))return e.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let a;if(r){if(n.indexOf("application/x-www-form-urlencoded")>-1)return gU(t,this.formSerializer).toString();if((a=ne.isFileList(t))||n.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return ob(a?{"files[]":t}:t,l&&new l,this.formSerializer)}}return r||s?(e.setContentType("application/json",!1),wU(t)):t}],transformResponse:[function(t){const e=this.transitional||sf.transitional,n=e&&e.forcedJSONParsing,s=this.responseType==="json";if(ne.isResponse(t)||ne.isReadableStream(t))return t;if(t&&ne.isString(t)&&(n&&!this.responseType||s)){const o=!(e&&e.silentJSONParsing)&&s;try{return JSON.parse(t)}catch(a){if(o)throw a.name==="SyntaxError"?it.from(a,it.ERR_BAD_RESPONSE,this,null,this.response):a}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Qn.classes.FormData,Blob:Qn.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ne.forEach(["delete","get","head","post","put","patch"],i=>{sf.headers[i]={}});const vU=ne.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),yU=i=>{const t={};let e,n,s;return i&&i.split(`
`).forEach(function(o){s=o.indexOf(":"),e=o.substring(0,s).trim().toLowerCase(),n=o.substring(s+1).trim(),!(!e||t[e]&&vU[e])&&(e==="set-cookie"?t[e]?t[e].push(n):t[e]=[n]:t[e]=t[e]?t[e]+", "+n:n)}),t},_S=Symbol("internals");function Cd(i){return i&&String(i).trim().toLowerCase()}function Cg(i){return i===!1||i==null?i:ne.isArray(i)?i.map(Cg):String(i)}function _U(i){const t=Object.create(null),e=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=e.exec(i);)t[n[1]]=n[2];return t}const EU=i=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(i.trim());function c0(i,t,e,n,s){if(ne.isFunction(n))return n.call(this,t,e);if(s&&(t=e),!!ne.isString(t)){if(ne.isString(n))return t.indexOf(n)!==-1;if(ne.isRegExp(n))return n.test(t)}}function CU(i){return i.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,e,n)=>e.toUpperCase()+n)}function xU(i,t){const e=ne.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(i,n+e,{value:function(s,r,o){return this[n].call(this,t,s,r,o)},configurable:!0})})}let Si=class{constructor(t){t&&this.set(t)}set(t,e,n){const s=this;function r(a,l,u){const h=Cd(l);if(!h)throw new Error("header name must be a non-empty string");const f=ne.findKey(s,h);(!f||s[f]===void 0||u===!0||u===void 0&&s[f]!==!1)&&(s[f||l]=Cg(a))}const o=(a,l)=>ne.forEach(a,(u,h)=>r(u,h,l));if(ne.isPlainObject(t)||t instanceof this.constructor)o(t,e);else if(ne.isString(t)&&(t=t.trim())&&!EU(t))o(yU(t),e);else if(ne.isHeaders(t))for(const[a,l]of t.entries())r(l,a,n);else t!=null&&r(e,t,n);return this}get(t,e){if(t=Cd(t),t){const n=ne.findKey(this,t);if(n){const s=this[n];if(!e)return s;if(e===!0)return _U(s);if(ne.isFunction(e))return e.call(this,s,n);if(ne.isRegExp(e))return e.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,e){if(t=Cd(t),t){const n=ne.findKey(this,t);return!!(n&&this[n]!==void 0&&(!e||c0(this,this[n],n,e)))}return!1}delete(t,e){const n=this;let s=!1;function r(o){if(o=Cd(o),o){const a=ne.findKey(n,o);a&&(!e||c0(n,n[a],a,e))&&(delete n[a],s=!0)}}return ne.isArray(t)?t.forEach(r):r(t),s}clear(t){const e=Object.keys(this);let n=e.length,s=!1;for(;n--;){const r=e[n];(!t||c0(this,this[r],r,t,!0))&&(delete this[r],s=!0)}return s}normalize(t){const e=this,n={};return ne.forEach(this,(s,r)=>{const o=ne.findKey(n,r);if(o){e[o]=Cg(s),delete e[r];return}const a=t?CU(r):String(r).trim();a!==r&&delete e[r],e[a]=Cg(s),n[a]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const e=Object.create(null);return ne.forEach(this,(n,s)=>{n!=null&&n!==!1&&(e[s]=t&&ne.isArray(n)?n.join(", "):n)}),e}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,e])=>t+": "+e).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...e){const n=new this(t);return e.forEach(s=>n.set(s)),n}static accessor(t){const n=(this[_S]=this[_S]={accessors:{}}).accessors,s=this.prototype;function r(o){const a=Cd(o);n[a]||(xU(s,o),n[a]=!0)}return ne.isArray(t)?t.forEach(r):r(t),this}};Si.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ne.reduceDescriptors(Si.prototype,({value:i},t)=>{let e=t[0].toUpperCase()+t.slice(1);return{get:()=>i,set(n){this[e]=n}}});ne.freezeMethods(Si);function u0(i,t){const e=this||sf,n=t||e,s=Si.from(n.headers);let r=n.data;return ne.forEach(i,function(a){r=a.call(e,r,s.normalize(),t?t.status:void 0)}),s.normalize(),r}function z3(i){return!!(i&&i.__CANCEL__)}function ku(i,t,e){it.call(this,i??"canceled",it.ERR_CANCELED,t,e),this.name="CanceledError"}ne.inherits(ku,it,{__CANCEL__:!0});function j3(i,t,e){const n=e.config.validateStatus;!e.status||!n||n(e.status)?i(e):t(new it("Request failed with status code "+e.status,[it.ERR_BAD_REQUEST,it.ERR_BAD_RESPONSE][Math.floor(e.status/100)-4],e.config,e.request,e))}function kU(i){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(i);return t&&t[1]||""}function TU(i,t){i=i||10;const e=new Array(i),n=new Array(i);let s=0,r=0,o;return t=t!==void 0?t:1e3,function(l){const u=Date.now(),h=n[r];o||(o=u),e[s]=l,n[s]=u;let f=r,g=0;for(;f!==s;)g+=e[f++],f=f%i;if(s=(s+1)%i,s===r&&(r=(r+1)%i),u-o<t)return;const p=h&&u-h;return p?Math.round(g*1e3/p):void 0}}function SU(i,t){let e=0,n=1e3/t,s,r;const o=(u,h=Date.now())=>{e=h,s=null,r&&(clearTimeout(r),r=null),i.apply(null,u)};return[(...u)=>{const h=Date.now(),f=h-e;f>=n?o(u,h):(s=u,r||(r=setTimeout(()=>{r=null,o(s)},n-f)))},()=>s&&o(s)]}const ep=(i,t,e=3)=>{let n=0;const s=TU(50,250);return SU(r=>{const o=r.loaded,a=r.lengthComputable?r.total:void 0,l=o-n,u=s(l),h=o<=a;n=o;const f={loaded:o,total:a,progress:a?o/a:void 0,bytes:l,rate:u||void 0,estimated:u&&a&&h?(a-o)/u:void 0,event:r,lengthComputable:a!=null,[t?"download":"upload"]:!0};i(f)},e)},ES=(i,t)=>{const e=i!=null;return[n=>t[0]({lengthComputable:e,total:i,loaded:n}),t[1]]},CS=i=>(...t)=>ne.asap(()=>i(...t)),AU=Qn.hasStandardBrowserEnv?((i,t)=>e=>(e=new URL(e,Qn.origin),i.protocol===e.protocol&&i.host===e.host&&(t||i.port===e.port)))(new URL(Qn.origin),Qn.navigator&&/(msie|trident)/i.test(Qn.navigator.userAgent)):()=>!0,PU=Qn.hasStandardBrowserEnv?{write(i,t,e,n,s,r){const o=[i+"="+encodeURIComponent(t)];ne.isNumber(e)&&o.push("expires="+new Date(e).toGMTString()),ne.isString(n)&&o.push("path="+n),ne.isString(s)&&o.push("domain="+s),r===!0&&o.push("secure"),document.cookie=o.join("; ")},read(i){const t=document.cookie.match(new RegExp("(^|;\\s*)("+i+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(i){this.write(i,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function IU(i){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(i)}function RU(i,t){return t?i.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):i}function H3(i,t){return i&&!IU(t)?RU(i,t):t}const xS=i=>i instanceof Si?{...i}:i;function vl(i,t){t=t||{};const e={};function n(u,h,f,g){return ne.isPlainObject(u)&&ne.isPlainObject(h)?ne.merge.call({caseless:g},u,h):ne.isPlainObject(h)?ne.merge({},h):ne.isArray(h)?h.slice():h}function s(u,h,f,g){if(ne.isUndefined(h)){if(!ne.isUndefined(u))return n(void 0,u,f,g)}else return n(u,h,f,g)}function r(u,h){if(!ne.isUndefined(h))return n(void 0,h)}function o(u,h){if(ne.isUndefined(h)){if(!ne.isUndefined(u))return n(void 0,u)}else return n(void 0,h)}function a(u,h,f){if(f in t)return n(u,h);if(f in i)return n(void 0,u)}const l={url:r,method:r,data:r,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(u,h,f)=>s(xS(u),xS(h),f,!0)};return ne.forEach(Object.keys(Object.assign({},i,t)),function(h){const f=l[h]||s,g=f(i[h],t[h],h);ne.isUndefined(g)&&f!==a||(e[h]=g)}),e}const U3=i=>{const t=vl({},i);let{data:e,withXSRFToken:n,xsrfHeaderName:s,xsrfCookieName:r,headers:o,auth:a}=t;t.headers=o=Si.from(o),t.url=B3(H3(t.baseURL,t.url),i.params,i.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let l;if(ne.isFormData(e)){if(Qn.hasStandardBrowserEnv||Qn.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((l=o.getContentType())!==!1){const[u,...h]=l?l.split(";").map(f=>f.trim()).filter(Boolean):[];o.setContentType([u||"multipart/form-data",...h].join("; "))}}if(Qn.hasStandardBrowserEnv&&(n&&ne.isFunction(n)&&(n=n(t)),n||n!==!1&&AU(t.url))){const u=s&&r&&PU.read(r);u&&o.set(s,u)}return t},OU=typeof XMLHttpRequest<"u",NU=OU&&function(i){return new Promise(function(e,n){const s=U3(i);let r=s.data;const o=Si.from(s.headers).normalize();let{responseType:a,onUploadProgress:l,onDownloadProgress:u}=s,h,f,g,p,y;function E(){p&&p(),y&&y(),s.cancelToken&&s.cancelToken.unsubscribe(h),s.signal&&s.signal.removeEventListener("abort",h)}let C=new XMLHttpRequest;C.open(s.method.toUpperCase(),s.url,!0),C.timeout=s.timeout;function k(){if(!C)return;const P=Si.from("getAllResponseHeaders"in C&&C.getAllResponseHeaders()),O={data:!a||a==="text"||a==="json"?C.responseText:C.response,status:C.status,statusText:C.statusText,headers:P,config:i,request:C};j3(function(N){e(N),E()},function(N){n(N),E()},O),C=null}"onloadend"in C?C.onloadend=k:C.onreadystatechange=function(){!C||C.readyState!==4||C.status===0&&!(C.responseURL&&C.responseURL.indexOf("file:")===0)||setTimeout(k)},C.onabort=function(){C&&(n(new it("Request aborted",it.ECONNABORTED,i,C)),C=null)},C.onerror=function(){n(new it("Network Error",it.ERR_NETWORK,i,C)),C=null},C.ontimeout=function(){let S=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const O=s.transitional||F3;s.timeoutErrorMessage&&(S=s.timeoutErrorMessage),n(new it(S,O.clarifyTimeoutError?it.ETIMEDOUT:it.ECONNABORTED,i,C)),C=null},r===void 0&&o.setContentType(null),"setRequestHeader"in C&&ne.forEach(o.toJSON(),function(S,O){C.setRequestHeader(O,S)}),ne.isUndefined(s.withCredentials)||(C.withCredentials=!!s.withCredentials),a&&a!=="json"&&(C.responseType=s.responseType),u&&([g,y]=ep(u,!0),C.addEventListener("progress",g)),l&&C.upload&&([f,p]=ep(l),C.upload.addEventListener("progress",f),C.upload.addEventListener("loadend",p)),(s.cancelToken||s.signal)&&(h=P=>{C&&(n(!P||P.type?new ku(null,i,C):P),C.abort(),C=null)},s.cancelToken&&s.cancelToken.subscribe(h),s.signal&&(s.signal.aborted?h():s.signal.addEventListener("abort",h)));const T=kU(s.url);if(T&&Qn.protocols.indexOf(T)===-1){n(new it("Unsupported protocol "+T+":",it.ERR_BAD_REQUEST,i));return}C.send(r||null)})},MU=(i,t)=>{const{length:e}=i=i?i.filter(Boolean):[];if(t||e){let n=new AbortController,s;const r=function(u){if(!s){s=!0,a();const h=u instanceof Error?u:this.reason;n.abort(h instanceof it?h:new ku(h instanceof Error?h.message:h))}};let o=t&&setTimeout(()=>{o=null,r(new it(`timeout ${t} of ms exceeded`,it.ETIMEDOUT))},t);const a=()=>{i&&(o&&clearTimeout(o),o=null,i.forEach(u=>{u.unsubscribe?u.unsubscribe(r):u.removeEventListener("abort",r)}),i=null)};i.forEach(u=>u.addEventListener("abort",r));const{signal:l}=n;return l.unsubscribe=()=>ne.asap(a),l}},LU=function*(i,t){let e=i.byteLength;if(e<t){yield i;return}let n=0,s;for(;n<e;)s=n+t,yield i.slice(n,s),n=s},VU=async function*(i,t){for await(const e of DU(i))yield*LU(e,t)},DU=async function*(i){if(i[Symbol.asyncIterator]){yield*i;return}const t=i.getReader();try{for(;;){const{done:e,value:n}=await t.read();if(e)break;yield n}}finally{await t.cancel()}},kS=(i,t,e,n)=>{const s=VU(i,t);let r=0,o,a=l=>{o||(o=!0,n&&n(l))};return new ReadableStream({async pull(l){try{const{done:u,value:h}=await s.next();if(u){a(),l.close();return}let f=h.byteLength;if(e){let g=r+=f;e(g)}l.enqueue(new Uint8Array(h))}catch(u){throw a(u),u}},cancel(l){return a(l),s.return()}},{highWaterMark:2})},ab=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",W3=ab&&typeof ReadableStream=="function",BU=ab&&(typeof TextEncoder=="function"?(i=>t=>i.encode(t))(new TextEncoder):async i=>new Uint8Array(await new Response(i).arrayBuffer())),q3=(i,...t)=>{try{return!!i(...t)}catch{return!1}},FU=W3&&q3(()=>{let i=!1;const t=new Request(Qn.origin,{body:new ReadableStream,method:"POST",get duplex(){return i=!0,"half"}}).headers.has("Content-Type");return i&&!t}),TS=64*1024,G1=W3&&q3(()=>ne.isReadableStream(new Response("").body)),tp={stream:G1&&(i=>i.body)};ab&&(i=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!tp[t]&&(tp[t]=ne.isFunction(i[t])?e=>e[t]():(e,n)=>{throw new it(`Response type '${t}' is not supported`,it.ERR_NOT_SUPPORT,n)})})})(new Response);const $U=async i=>{if(i==null)return 0;if(ne.isBlob(i))return i.size;if(ne.isSpecCompliantForm(i))return(await new Request(Qn.origin,{method:"POST",body:i}).arrayBuffer()).byteLength;if(ne.isArrayBufferView(i)||ne.isArrayBuffer(i))return i.byteLength;if(ne.isURLSearchParams(i)&&(i=i+""),ne.isString(i))return(await BU(i)).byteLength},zU=async(i,t)=>{const e=ne.toFiniteNumber(i.getContentLength());return e??$U(t)},jU=ab&&(async i=>{let{url:t,method:e,data:n,signal:s,cancelToken:r,timeout:o,onDownloadProgress:a,onUploadProgress:l,responseType:u,headers:h,withCredentials:f="same-origin",fetchOptions:g}=U3(i);u=u?(u+"").toLowerCase():"text";let p=MU([s,r&&r.toAbortSignal()],o),y;const E=p&&p.unsubscribe&&(()=>{p.unsubscribe()});let C;try{if(l&&FU&&e!=="get"&&e!=="head"&&(C=await zU(h,n))!==0){let O=new Request(t,{method:"POST",body:n,duplex:"half"}),A;if(ne.isFormData(n)&&(A=O.headers.get("content-type"))&&h.setContentType(A),O.body){const[N,L]=ES(C,ep(CS(l)));n=kS(O.body,TS,N,L)}}ne.isString(f)||(f=f?"include":"omit");const k="credentials"in Request.prototype;y=new Request(t,{...g,signal:p,method:e.toUpperCase(),headers:h.normalize().toJSON(),body:n,duplex:"half",credentials:k?f:void 0});let T=await fetch(y);const P=G1&&(u==="stream"||u==="response");if(G1&&(a||P&&E)){const O={};["status","statusText","headers"].forEach(M=>{O[M]=T[M]});const A=ne.toFiniteNumber(T.headers.get("content-length")),[N,L]=a&&ES(A,ep(CS(a),!0))||[];T=new Response(kS(T.body,TS,N,()=>{L&&L(),E&&E()}),O)}u=u||"text";let S=await tp[ne.findKey(tp,u)||"text"](T,i);return!P&&E&&E(),await new Promise((O,A)=>{j3(O,A,{data:S,headers:Si.from(T.headers),status:T.status,statusText:T.statusText,config:i,request:y})})}catch(k){throw E&&E(),k&&k.name==="TypeError"&&/fetch/i.test(k.message)?Object.assign(new it("Network Error",it.ERR_NETWORK,i,y),{cause:k.cause||k}):it.from(k,k&&k.code,i,y)}}),K1={http:iU,xhr:NU,fetch:jU};ne.forEach(K1,(i,t)=>{if(i){try{Object.defineProperty(i,"name",{value:t})}catch{}Object.defineProperty(i,"adapterName",{value:t})}});const SS=i=>`- ${i}`,HU=i=>ne.isFunction(i)||i===null||i===!1,G3={getAdapter:i=>{i=ne.isArray(i)?i:[i];const{length:t}=i;let e,n;const s={};for(let r=0;r<t;r++){e=i[r];let o;if(n=e,!HU(e)&&(n=K1[(o=String(e)).toLowerCase()],n===void 0))throw new it(`Unknown adapter '${o}'`);if(n)break;s[o||"#"+r]=n}if(!n){const r=Object.entries(s).map(([a,l])=>`adapter ${a} `+(l===!1?"is not supported by the environment":"is not available in the build"));let o=t?r.length>1?`since :
`+r.map(SS).join(`
`):" "+SS(r[0]):"as no adapter specified";throw new it("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return n},adapters:K1};function d0(i){if(i.cancelToken&&i.cancelToken.throwIfRequested(),i.signal&&i.signal.aborted)throw new ku(null,i)}function AS(i){return d0(i),i.headers=Si.from(i.headers),i.data=u0.call(i,i.transformRequest),["post","put","patch"].indexOf(i.method)!==-1&&i.headers.setContentType("application/x-www-form-urlencoded",!1),G3.getAdapter(i.adapter||sf.adapter)(i).then(function(n){return d0(i),n.data=u0.call(i,i.transformResponse,n),n.headers=Si.from(n.headers),n},function(n){return z3(n)||(d0(i),n&&n.response&&(n.response.data=u0.call(i,i.transformResponse,n.response),n.response.headers=Si.from(n.response.headers))),Promise.reject(n)})}const K3="1.7.9",lb={};["object","boolean","number","function","string","symbol"].forEach((i,t)=>{lb[i]=function(n){return typeof n===i||"a"+(t<1?"n ":" ")+i}});const PS={};lb.transitional=function(t,e,n){function s(r,o){return"[Axios v"+K3+"] Transitional option '"+r+"'"+o+(n?". "+n:"")}return(r,o,a)=>{if(t===!1)throw new it(s(o," has been removed"+(e?" in "+e:"")),it.ERR_DEPRECATED);return e&&!PS[o]&&(PS[o]=!0,console.warn(s(o," has been deprecated since v"+e+" and will be removed in the near future"))),t?t(r,o,a):!0}};lb.spelling=function(t){return(e,n)=>(console.warn(`${n} is likely a misspelling of ${t}`),!0)};function UU(i,t,e){if(typeof i!="object")throw new it("options must be an object",it.ERR_BAD_OPTION_VALUE);const n=Object.keys(i);let s=n.length;for(;s-- >0;){const r=n[s],o=t[r];if(o){const a=i[r],l=a===void 0||o(a,r,i);if(l!==!0)throw new it("option "+r+" must be "+l,it.ERR_BAD_OPTION_VALUE);continue}if(e!==!0)throw new it("Unknown option "+r,it.ERR_BAD_OPTION)}}const xg={assertOptions:UU,validators:lb},fr=xg.validators;let al=class{constructor(t){this.defaults=t,this.interceptors={request:new yS,response:new yS}}async request(t,e){try{return await this._request(t,e)}catch(n){if(n instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const r=s.stack?s.stack.replace(/^.+\n/,""):"";try{n.stack?r&&!String(n.stack).endsWith(r.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+r):n.stack=r}catch{}}throw n}}_request(t,e){typeof t=="string"?(e=e||{},e.url=t):e=t||{},e=vl(this.defaults,e);const{transitional:n,paramsSerializer:s,headers:r}=e;n!==void 0&&xg.assertOptions(n,{silentJSONParsing:fr.transitional(fr.boolean),forcedJSONParsing:fr.transitional(fr.boolean),clarifyTimeoutError:fr.transitional(fr.boolean)},!1),s!=null&&(ne.isFunction(s)?e.paramsSerializer={serialize:s}:xg.assertOptions(s,{encode:fr.function,serialize:fr.function},!0)),xg.assertOptions(e,{baseUrl:fr.spelling("baseURL"),withXsrfToken:fr.spelling("withXSRFToken")},!0),e.method=(e.method||this.defaults.method||"get").toLowerCase();let o=r&&ne.merge(r.common,r[e.method]);r&&ne.forEach(["delete","get","head","post","put","patch","common"],y=>{delete r[y]}),e.headers=Si.concat(o,r);const a=[];let l=!0;this.interceptors.request.forEach(function(E){typeof E.runWhen=="function"&&E.runWhen(e)===!1||(l=l&&E.synchronous,a.unshift(E.fulfilled,E.rejected))});const u=[];this.interceptors.response.forEach(function(E){u.push(E.fulfilled,E.rejected)});let h,f=0,g;if(!l){const y=[AS.bind(this),void 0];for(y.unshift.apply(y,a),y.push.apply(y,u),g=y.length,h=Promise.resolve(e);f<g;)h=h.then(y[f++],y[f++]);return h}g=a.length;let p=e;for(f=0;f<g;){const y=a[f++],E=a[f++];try{p=y(p)}catch(C){E.call(this,C);break}}try{h=AS.call(this,p)}catch(y){return Promise.reject(y)}for(f=0,g=u.length;f<g;)h=h.then(u[f++],u[f++]);return h}getUri(t){t=vl(this.defaults,t);const e=H3(t.baseURL,t.url);return B3(e,t.params,t.paramsSerializer)}};ne.forEach(["delete","get","head","options"],function(t){al.prototype[t]=function(e,n){return this.request(vl(n||{},{method:t,url:e,data:(n||{}).data}))}});ne.forEach(["post","put","patch"],function(t){function e(n){return function(r,o,a){return this.request(vl(a||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:r,data:o}))}}al.prototype[t]=e(),al.prototype[t+"Form"]=e(!0)});let WU=class Y3{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let e;this.promise=new Promise(function(r){e=r});const n=this;this.promise.then(s=>{if(!n._listeners)return;let r=n._listeners.length;for(;r-- >0;)n._listeners[r](s);n._listeners=null}),this.promise.then=s=>{let r;const o=new Promise(a=>{n.subscribe(a),r=a}).then(s);return o.cancel=function(){n.unsubscribe(r)},o},t(function(r,o,a){n.reason||(n.reason=new ku(r,o,a),e(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const e=this._listeners.indexOf(t);e!==-1&&this._listeners.splice(e,1)}toAbortSignal(){const t=new AbortController,e=n=>{t.abort(n)};return this.subscribe(e),t.signal.unsubscribe=()=>this.unsubscribe(e),t.signal}static source(){let t;return{token:new Y3(function(s){t=s}),cancel:t}}};function qU(i){return function(e){return i.apply(null,e)}}function GU(i){return ne.isObject(i)&&i.isAxiosError===!0}const Y1={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Y1).forEach(([i,t])=>{Y1[t]=i});function Z3(i){const t=new al(i),e=T3(al.prototype.request,t);return ne.extend(e,al.prototype,t,{allOwnKeys:!0}),ne.extend(e,t,null,{allOwnKeys:!0}),e.create=function(s){return Z3(vl(i,s))},e}const Le=Z3(sf);Le.Axios=al;Le.CanceledError=ku;Le.CancelToken=WU;Le.isCancel=z3;Le.VERSION=K3;Le.toFormData=ob;Le.AxiosError=it;Le.Cancel=Le.CanceledError;Le.all=function(t){return Promise.all(t)};Le.spread=qU;Le.isAxiosError=GU;Le.mergeConfig=vl;Le.AxiosHeaders=Si;Le.formToJSON=i=>$3(ne.isHTMLForm(i)?new FormData(i):i);Le.getAdapter=G3.getAdapter;Le.HttpStatusCode=Y1;Le.default=Le;const{Axios:sye,AxiosError:St,CanceledError:rye,isCancel:oye,CancelToken:aye,VERSION:lye,all:cye,Cancel:uye,isAxiosError:dye,spread:hye,toFormData:fye,AxiosHeaders:mye,HttpStatusCode:gye,formToJSON:pye,getAdapter:bye,mergeConfig:wye}=Le;var ei=function(){return ei=Object.assign||function(t){for(var e,n=1,s=arguments.length;n<s;n++){e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},ei.apply(this,arguments)};function kh(i,t,e){if(e||arguments.length===2)for(var n=0,s=t.length,r;n<s;n++)(r||!(n in t))&&(r||(r=Array.prototype.slice.call(t,0,n)),r[n]=t[n]);return i.concat(r||Array.prototype.slice.call(t))}var Ht="-ms-",eh="-moz-",_t="-webkit-",X3="comm",cb="rule",X_="decl",KU="@import",J3="@keyframes",YU="@layer",Q3=Math.abs,J_=String.fromCharCode,Z1=Object.assign;function ZU(i,t){return Rn(i,0)^45?(((t<<2^Rn(i,0))<<2^Rn(i,1))<<2^Rn(i,2))<<2^Rn(i,3):0}function eO(i){return i.trim()}function Jr(i,t){return(i=t.exec(i))?i[0]:i}function lt(i,t,e){return i.replace(t,e)}function kg(i,t,e){return i.indexOf(t,e)}function Rn(i,t){return i.charCodeAt(t)|0}function ou(i,t,e){return i.slice(t,e)}function vr(i){return i.length}function tO(i){return i.length}function jd(i,t){return t.push(i),i}function XU(i,t){return i.map(t).join("")}function IS(i,t){return i.filter(function(e){return!Jr(e,t)})}var ub=1,au=1,nO=0,Cs=0,wn=0,Tu="";function db(i,t,e,n,s,r,o,a){return{value:i,root:t,parent:e,type:n,props:s,children:r,line:ub,column:au,length:o,return:"",siblings:a}}function ea(i,t){return Z1(db("",null,null,"",null,null,0,i.siblings),i,{length:-i.length},t)}function vc(i){for(;i.root;)i=ea(i.root,{children:[i]});jd(i,i.siblings)}function JU(){return wn}function QU(){return wn=Cs>0?Rn(Tu,--Cs):0,au--,wn===10&&(au=1,ub--),wn}function Ys(){return wn=Cs<nO?Rn(Tu,Cs++):0,au++,wn===10&&(au=1,ub++),wn}function ll(){return Rn(Tu,Cs)}function Tg(){return Cs}function hb(i,t){return ou(Tu,i,t)}function X1(i){switch(i){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function eW(i){return ub=au=1,nO=vr(Tu=i),Cs=0,[]}function tW(i){return Tu="",i}function h0(i){return eO(hb(Cs-1,J1(i===91?i+2:i===40?i+1:i)))}function nW(i){for(;(wn=ll())&&wn<33;)Ys();return X1(i)>2||X1(wn)>3?"":" "}function iW(i,t){for(;--t&&Ys()&&!(wn<48||wn>102||wn>57&&wn<65||wn>70&&wn<97););return hb(i,Tg()+(t<6&&ll()==32&&Ys()==32))}function J1(i){for(;Ys();)switch(wn){case i:return Cs;case 34:case 39:i!==34&&i!==39&&J1(wn);break;case 40:i===41&&J1(i);break;case 92:Ys();break}return Cs}function sW(i,t){for(;Ys()&&i+wn!==57;)if(i+wn===84&&ll()===47)break;return"/*"+hb(t,Cs-1)+"*"+J_(i===47?i:Ys())}function rW(i){for(;!X1(ll());)Ys();return hb(i,Cs)}function oW(i){return tW(Sg("",null,null,null,[""],i=eW(i),0,[0],i))}function Sg(i,t,e,n,s,r,o,a,l){for(var u=0,h=0,f=o,g=0,p=0,y=0,E=1,C=1,k=1,T=0,P="",S=s,O=r,A=n,N=P;C;)switch(y=T,T=Ys()){case 40:if(y!=108&&Rn(N,f-1)==58){kg(N+=lt(h0(T),"&","&\f"),"&\f",Q3(u?a[u-1]:0))!=-1&&(k=-1);break}case 34:case 39:case 91:N+=h0(T);break;case 9:case 10:case 13:case 32:N+=nW(y);break;case 92:N+=iW(Tg()-1,7);continue;case 47:switch(ll()){case 42:case 47:jd(aW(sW(Ys(),Tg()),t,e,l),l);break;default:N+="/"}break;case 123*E:a[u++]=vr(N)*k;case 125*E:case 59:case 0:switch(T){case 0:case 125:C=0;case 59+h:k==-1&&(N=lt(N,/\f/g,"")),p>0&&vr(N)-f&&jd(p>32?OS(N+";",n,e,f-1,l):OS(lt(N," ","")+";",n,e,f-2,l),l);break;case 59:N+=";";default:if(jd(A=RS(N,t,e,u,h,s,a,P,S=[],O=[],f,r),r),T===123)if(h===0)Sg(N,t,A,A,S,r,f,a,O);else switch(g===99&&Rn(N,3)===110?100:g){case 100:case 108:case 109:case 115:Sg(i,A,A,n&&jd(RS(i,A,A,0,0,s,a,P,s,S=[],f,O),O),s,O,f,a,n?S:O);break;default:Sg(N,A,A,A,[""],O,0,a,O)}}u=h=p=0,E=k=1,P=N="",f=o;break;case 58:f=1+vr(N),p=y;default:if(E<1){if(T==123)--E;else if(T==125&&E++==0&&QU()==125)continue}switch(N+=J_(T),T*E){case 38:k=h>0?1:(N+="\f",-1);break;case 44:a[u++]=(vr(N)-1)*k,k=1;break;case 64:ll()===45&&(N+=h0(Ys())),g=ll(),h=f=vr(P=N+=rW(Tg())),T++;break;case 45:y===45&&vr(N)==2&&(E=0)}}return r}function RS(i,t,e,n,s,r,o,a,l,u,h,f){for(var g=s-1,p=s===0?r:[""],y=tO(p),E=0,C=0,k=0;E<n;++E)for(var T=0,P=ou(i,g+1,g=Q3(C=o[E])),S=i;T<y;++T)(S=eO(C>0?p[T]+" "+P:lt(P,/&\f/g,p[T])))&&(l[k++]=S);return db(i,t,e,s===0?cb:a,l,u,h,f)}function aW(i,t,e,n){return db(i,t,e,X3,J_(JU()),ou(i,2,-2),0,n)}function OS(i,t,e,n,s){return db(i,t,e,X_,ou(i,0,n),ou(i,n+1,-1),n,s)}function iO(i,t,e){switch(ZU(i,t)){case 5103:return _t+"print-"+i+i;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return _t+i+i;case 4789:return eh+i+i;case 5349:case 4246:case 4810:case 6968:case 2756:return _t+i+eh+i+Ht+i+i;case 5936:switch(Rn(i,t+11)){case 114:return _t+i+Ht+lt(i,/[svh]\w+-[tblr]{2}/,"tb")+i;case 108:return _t+i+Ht+lt(i,/[svh]\w+-[tblr]{2}/,"tb-rl")+i;case 45:return _t+i+Ht+lt(i,/[svh]\w+-[tblr]{2}/,"lr")+i}case 6828:case 4268:case 2903:return _t+i+Ht+i+i;case 6165:return _t+i+Ht+"flex-"+i+i;case 5187:return _t+i+lt(i,/(\w+).+(:[^]+)/,_t+"box-$1$2"+Ht+"flex-$1$2")+i;case 5443:return _t+i+Ht+"flex-item-"+lt(i,/flex-|-self/g,"")+(Jr(i,/flex-|baseline/)?"":Ht+"grid-row-"+lt(i,/flex-|-self/g,""))+i;case 4675:return _t+i+Ht+"flex-line-pack"+lt(i,/align-content|flex-|-self/g,"")+i;case 5548:return _t+i+Ht+lt(i,"shrink","negative")+i;case 5292:return _t+i+Ht+lt(i,"basis","preferred-size")+i;case 6060:return _t+"box-"+lt(i,"-grow","")+_t+i+Ht+lt(i,"grow","positive")+i;case 4554:return _t+lt(i,/([^-])(transform)/g,"$1"+_t+"$2")+i;case 6187:return lt(lt(lt(i,/(zoom-|grab)/,_t+"$1"),/(image-set)/,_t+"$1"),i,"")+i;case 5495:case 3959:return lt(i,/(image-set\([^]*)/,_t+"$1$`$1");case 4968:return lt(lt(i,/(.+:)(flex-)?(.*)/,_t+"box-pack:$3"+Ht+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+_t+i+i;case 4200:if(!Jr(i,/flex-|baseline/))return Ht+"grid-column-align"+ou(i,t)+i;break;case 2592:case 3360:return Ht+lt(i,"template-","")+i;case 4384:case 3616:return e&&e.some(function(n,s){return t=s,Jr(n.props,/grid-\w+-end/)})?~kg(i+(e=e[t].value),"span",0)?i:Ht+lt(i,"-start","")+i+Ht+"grid-row-span:"+(~kg(e,"span",0)?Jr(e,/\d+/):+Jr(e,/\d+/)-+Jr(i,/\d+/))+";":Ht+lt(i,"-start","")+i;case 4896:case 4128:return e&&e.some(function(n){return Jr(n.props,/grid-\w+-start/)})?i:Ht+lt(lt(i,"-end","-span"),"span ","")+i;case 4095:case 3583:case 4068:case 2532:return lt(i,/(.+)-inline(.+)/,_t+"$1$2")+i;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(vr(i)-1-t>6)switch(Rn(i,t+1)){case 109:if(Rn(i,t+4)!==45)break;case 102:return lt(i,/(.+:)(.+)-([^]+)/,"$1"+_t+"$2-$3$1"+eh+(Rn(i,t+3)==108?"$3":"$2-$3"))+i;case 115:return~kg(i,"stretch",0)?iO(lt(i,"stretch","fill-available"),t,e)+i:i}break;case 5152:case 5920:return lt(i,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,function(n,s,r,o,a,l,u){return Ht+s+":"+r+u+(o?Ht+s+"-span:"+(a?l:+l-+r)+u:"")+i});case 4949:if(Rn(i,t+6)===121)return lt(i,":",":"+_t)+i;break;case 6444:switch(Rn(i,Rn(i,14)===45?18:11)){case 120:return lt(i,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+_t+(Rn(i,14)===45?"inline-":"")+"box$3$1"+_t+"$2$3$1"+Ht+"$2box$3")+i;case 100:return lt(i,":",":"+Ht)+i}break;case 5719:case 2647:case 2135:case 3927:case 2391:return lt(i,"scroll-","scroll-snap-")+i}return i}function np(i,t){for(var e="",n=0;n<i.length;n++)e+=t(i[n],n,i,t)||"";return e}function lW(i,t,e,n){switch(i.type){case YU:if(i.children.length)break;case KU:case X_:return i.return=i.return||i.value;case X3:return"";case J3:return i.return=i.value+"{"+np(i.children,n)+"}";case cb:if(!vr(i.value=i.props.join(",")))return""}return vr(e=np(i.children,n))?i.return=i.value+"{"+e+"}":""}function cW(i){var t=tO(i);return function(e,n,s,r){for(var o="",a=0;a<t;a++)o+=i[a](e,n,s,r)||"";return o}}function uW(i){return function(t){t.root||(t=t.return)&&i(t)}}function dW(i,t,e,n){if(i.length>-1&&!i.return)switch(i.type){case X_:i.return=iO(i.value,i.length,e);return;case J3:return np([ea(i,{value:lt(i.value,"@","@"+_t)})],n);case cb:if(i.length)return XU(e=i.props,function(s){switch(Jr(s,n=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":vc(ea(i,{props:[lt(s,/:(read-\w+)/,":"+eh+"$1")]})),vc(ea(i,{props:[s]})),Z1(i,{props:IS(e,n)});break;case"::placeholder":vc(ea(i,{props:[lt(s,/:(plac\w+)/,":"+_t+"input-$1")]})),vc(ea(i,{props:[lt(s,/:(plac\w+)/,":"+eh+"$1")]})),vc(ea(i,{props:[lt(s,/:(plac\w+)/,Ht+"input-$1")]})),vc(ea(i,{props:[s]})),Z1(i,{props:IS(e,n)});break}return""})}}var hW={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Fi={},lu=typeof process<"u"&&Fi!==void 0&&(Fi.REACT_APP_SC_ATTR||Fi.SC_ATTR)||"data-styled",sO="active",rO="data-styled-version",fb="6.1.14",Q_=`/*!sc*/
`,ip=typeof window<"u"&&"HTMLElement"in window,fW=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&Fi!==void 0&&Fi.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&Fi.REACT_APP_SC_DISABLE_SPEEDY!==""?Fi.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&Fi.REACT_APP_SC_DISABLE_SPEEDY:typeof process<"u"&&Fi!==void 0&&Fi.SC_DISABLE_SPEEDY!==void 0&&Fi.SC_DISABLE_SPEEDY!==""&&Fi.SC_DISABLE_SPEEDY!=="false"&&Fi.SC_DISABLE_SPEEDY),mW={},mb=Object.freeze([]),cu=Object.freeze({});function oO(i,t,e){return e===void 0&&(e=cu),i.theme!==e.theme&&i.theme||t||e.theme}var aO=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),gW=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,pW=/(^-|-$)/g;function NS(i){return i.replace(gW,"-").replace(pW,"")}var bW=/(a)(d)/gi,zm=52,MS=function(i){return String.fromCharCode(i+(i>25?39:97))};function Q1(i){var t,e="";for(t=Math.abs(i);t>zm;t=t/zm|0)e=MS(t%zm)+e;return(MS(t%zm)+e).replace(bW,"$1-$2")}var f0,lO=5381,zc=function(i,t){for(var e=t.length;e;)i=33*i^t.charCodeAt(--e);return i},cO=function(i){return zc(lO,i)};function uO(i){return Q1(cO(i)>>>0)}function wW(i){return i.displayName||i.name||"Component"}function m0(i){return typeof i=="string"&&!0}var dO=typeof Symbol=="function"&&Symbol.for,hO=dO?Symbol.for("react.memo"):60115,vW=dO?Symbol.for("react.forward_ref"):60112,yW={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},_W={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},fO={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},EW=((f0={})[vW]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},f0[hO]=fO,f0);function LS(i){return("type"in(t=i)&&t.type.$$typeof)===hO?fO:"$$typeof"in i?EW[i.$$typeof]:yW;var t}var CW=Object.defineProperty,xW=Object.getOwnPropertyNames,VS=Object.getOwnPropertySymbols,kW=Object.getOwnPropertyDescriptor,TW=Object.getPrototypeOf,DS=Object.prototype;function mO(i,t,e){if(typeof t!="string"){if(DS){var n=TW(t);n&&n!==DS&&mO(i,n,e)}var s=xW(t);VS&&(s=s.concat(VS(t)));for(var r=LS(i),o=LS(t),a=0;a<s.length;++a){var l=s[a];if(!(l in _W||e&&e[l]||o&&l in o||r&&l in r)){var u=kW(t,l);try{CW(i,l,u)}catch{}}}}return i}function uu(i){return typeof i=="function"}function eE(i){return typeof i=="object"&&"styledComponentId"in i}function il(i,t){return i&&t?"".concat(i," ").concat(t):i||t||""}function ey(i,t){if(i.length===0)return"";for(var e=i[0],n=1;n<i.length;n++)e+=i[n];return e}function Th(i){return i!==null&&typeof i=="object"&&i.constructor.name===Object.name&&!("props"in i&&i.$$typeof)}function ty(i,t,e){if(e===void 0&&(e=!1),!e&&!Th(i)&&!Array.isArray(i))return t;if(Array.isArray(t))for(var n=0;n<t.length;n++)i[n]=ty(i[n],t[n]);else if(Th(t))for(var n in t)i[n]=ty(i[n],t[n]);return i}function tE(i,t){Object.defineProperty(i,"toString",{value:t})}function rf(i){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(i," for more information.").concat(t.length>0?" Args: ".concat(t.join(", ")):""))}var SW=function(){function i(t){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=t}return i.prototype.indexOfGroup=function(t){for(var e=0,n=0;n<t;n++)e+=this.groupSizes[n];return e},i.prototype.insertRules=function(t,e){if(t>=this.groupSizes.length){for(var n=this.groupSizes,s=n.length,r=s;t>=r;)if((r<<=1)<0)throw rf(16,"".concat(t));this.groupSizes=new Uint32Array(r),this.groupSizes.set(n),this.length=r;for(var o=s;o<r;o++)this.groupSizes[o]=0}for(var a=this.indexOfGroup(t+1),l=(o=0,e.length);o<l;o++)this.tag.insertRule(a,e[o])&&(this.groupSizes[t]++,a++)},i.prototype.clearGroup=function(t){if(t<this.length){var e=this.groupSizes[t],n=this.indexOfGroup(t),s=n+e;this.groupSizes[t]=0;for(var r=n;r<s;r++)this.tag.deleteRule(n)}},i.prototype.getGroup=function(t){var e="";if(t>=this.length||this.groupSizes[t]===0)return e;for(var n=this.groupSizes[t],s=this.indexOfGroup(t),r=s+n,o=s;o<r;o++)e+="".concat(this.tag.getRule(o)).concat(Q_);return e},i}(),Ag=new Map,sp=new Map,Pg=1,jm=function(i){if(Ag.has(i))return Ag.get(i);for(;sp.has(Pg);)Pg++;var t=Pg++;return Ag.set(i,t),sp.set(t,i),t},AW=function(i,t){Pg=t+1,Ag.set(i,t),sp.set(t,i)},PW="style[".concat(lu,"][").concat(rO,'="').concat(fb,'"]'),IW=new RegExp("^".concat(lu,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),RW=function(i,t,e){for(var n,s=e.split(","),r=0,o=s.length;r<o;r++)(n=s[r])&&i.registerName(t,n)},OW=function(i,t){for(var e,n=((e=t.textContent)!==null&&e!==void 0?e:"").split(Q_),s=[],r=0,o=n.length;r<o;r++){var a=n[r].trim();if(a){var l=a.match(IW);if(l){var u=0|parseInt(l[1],10),h=l[2];u!==0&&(AW(h,u),RW(i,h,l[3]),i.getTag().insertRules(u,s)),s.length=0}else s.push(a)}}},BS=function(i){for(var t=document.querySelectorAll(PW),e=0,n=t.length;e<n;e++){var s=t[e];s&&s.getAttribute(lu)!==sO&&(OW(i,s),s.parentNode&&s.parentNode.removeChild(s))}};function NW(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null}var gO=function(i){var t=document.head,e=i||t,n=document.createElement("style"),s=function(a){var l=Array.from(a.querySelectorAll("style[".concat(lu,"]")));return l[l.length-1]}(e),r=s!==void 0?s.nextSibling:null;n.setAttribute(lu,sO),n.setAttribute(rO,fb);var o=NW();return o&&n.setAttribute("nonce",o),e.insertBefore(n,r),n},MW=function(){function i(t){this.element=gO(t),this.element.appendChild(document.createTextNode("")),this.sheet=function(e){if(e.sheet)return e.sheet;for(var n=document.styleSheets,s=0,r=n.length;s<r;s++){var o=n[s];if(o.ownerNode===e)return o}throw rf(17)}(this.element),this.length=0}return i.prototype.insertRule=function(t,e){try{return this.sheet.insertRule(e,t),this.length++,!0}catch{return!1}},i.prototype.deleteRule=function(t){this.sheet.deleteRule(t),this.length--},i.prototype.getRule=function(t){var e=this.sheet.cssRules[t];return e&&e.cssText?e.cssText:""},i}(),LW=function(){function i(t){this.element=gO(t),this.nodes=this.element.childNodes,this.length=0}return i.prototype.insertRule=function(t,e){if(t<=this.length&&t>=0){var n=document.createTextNode(e);return this.element.insertBefore(n,this.nodes[t]||null),this.length++,!0}return!1},i.prototype.deleteRule=function(t){this.element.removeChild(this.nodes[t]),this.length--},i.prototype.getRule=function(t){return t<this.length?this.nodes[t].textContent:""},i}(),VW=function(){function i(t){this.rules=[],this.length=0}return i.prototype.insertRule=function(t,e){return t<=this.length&&(this.rules.splice(t,0,e),this.length++,!0)},i.prototype.deleteRule=function(t){this.rules.splice(t,1),this.length--},i.prototype.getRule=function(t){return t<this.length?this.rules[t]:""},i}(),FS=ip,DW={isServer:!ip,useCSSOMInjection:!fW},rp=function(){function i(t,e,n){t===void 0&&(t=cu),e===void 0&&(e={});var s=this;this.options=ei(ei({},DW),t),this.gs=e,this.names=new Map(n),this.server=!!t.isServer,!this.server&&ip&&FS&&(FS=!1,BS(this)),tE(this,function(){return function(r){for(var o=r.getTag(),a=o.length,l="",u=function(f){var g=function(k){return sp.get(k)}(f);if(g===void 0)return"continue";var p=r.names.get(g),y=o.getGroup(f);if(p===void 0||!p.size||y.length===0)return"continue";var E="".concat(lu,".g").concat(f,'[id="').concat(g,'"]'),C="";p!==void 0&&p.forEach(function(k){k.length>0&&(C+="".concat(k,","))}),l+="".concat(y).concat(E,'{content:"').concat(C,'"}').concat(Q_)},h=0;h<a;h++)u(h);return l}(s)})}return i.registerId=function(t){return jm(t)},i.prototype.rehydrate=function(){!this.server&&ip&&BS(this)},i.prototype.reconstructWithOptions=function(t,e){return e===void 0&&(e=!0),new i(ei(ei({},this.options),t),this.gs,e&&this.names||void 0)},i.prototype.allocateGSInstance=function(t){return this.gs[t]=(this.gs[t]||0)+1},i.prototype.getTag=function(){return this.tag||(this.tag=(t=function(e){var n=e.useCSSOMInjection,s=e.target;return e.isServer?new VW(s):n?new MW(s):new LW(s)}(this.options),new SW(t)));var t},i.prototype.hasNameForId=function(t,e){return this.names.has(t)&&this.names.get(t).has(e)},i.prototype.registerName=function(t,e){if(jm(t),this.names.has(t))this.names.get(t).add(e);else{var n=new Set;n.add(e),this.names.set(t,n)}},i.prototype.insertRules=function(t,e,n){this.registerName(t,e),this.getTag().insertRules(jm(t),n)},i.prototype.clearNames=function(t){this.names.has(t)&&this.names.get(t).clear()},i.prototype.clearRules=function(t){this.getTag().clearGroup(jm(t)),this.clearNames(t)},i.prototype.clearTag=function(){this.tag=void 0},i}(),BW=/&/g,FW=/^\s*\/\/.*$/gm;function pO(i,t){return i.map(function(e){return e.type==="rule"&&(e.value="".concat(t," ").concat(e.value),e.value=e.value.replaceAll(",",",".concat(t," ")),e.props=e.props.map(function(n){return"".concat(t," ").concat(n)})),Array.isArray(e.children)&&e.type!=="@keyframes"&&(e.children=pO(e.children,t)),e})}function $W(i){var t,e,n,s=cu,r=s.options,o=r===void 0?cu:r,a=s.plugins,l=a===void 0?mb:a,u=function(g,p,y){return y.startsWith(e)&&y.endsWith(e)&&y.replaceAll(e,"").length>0?".".concat(t):g},h=l.slice();h.push(function(g){g.type===cb&&g.value.includes("&")&&(g.props[0]=g.props[0].replace(BW,e).replace(n,u))}),o.prefix&&h.push(dW),h.push(lW);var f=function(g,p,y,E){p===void 0&&(p=""),y===void 0&&(y=""),E===void 0&&(E="&"),t=E,e=p,n=new RegExp("\\".concat(e,"\\b"),"g");var C=g.replace(FW,""),k=oW(y||p?"".concat(y," ").concat(p," { ").concat(C," }"):C);o.namespace&&(k=pO(k,o.namespace));var T=[];return np(k,cW(h.concat(uW(function(P){return T.push(P)})))),T};return f.hash=l.length?l.reduce(function(g,p){return p.name||rf(15),zc(g,p.name)},lO).toString():"",f}var zW=new rp,ny=$W(),bO=Ke.createContext({shouldForwardProp:void 0,styleSheet:zW,stylis:ny});bO.Consumer;Ke.createContext(void 0);function iy(){return R.useContext(bO)}var jW=function(){function i(t,e){var n=this;this.inject=function(s,r){r===void 0&&(r=ny);var o=n.name+r.hash;s.hasNameForId(n.id,o)||s.insertRules(n.id,o,r(n.rules,o,"@keyframes"))},this.name=t,this.id="sc-keyframes-".concat(t),this.rules=e,tE(this,function(){throw rf(12,String(n.name))})}return i.prototype.getName=function(t){return t===void 0&&(t=ny),this.name+t.hash},i}(),HW=function(i){return i>="A"&&i<="Z"};function $S(i){for(var t="",e=0;e<i.length;e++){var n=i[e];if(e===1&&n==="-"&&i[0]==="-")return i;HW(n)?t+="-"+n.toLowerCase():t+=n}return t.startsWith("ms-")?"-"+t:t}var wO=function(i){return i==null||i===!1||i===""},vO=function(i){var t,e,n=[];for(var s in i){var r=i[s];i.hasOwnProperty(s)&&!wO(r)&&(Array.isArray(r)&&r.isCss||uu(r)?n.push("".concat($S(s),":"),r,";"):Th(r)?n.push.apply(n,kh(kh(["".concat(s," {")],vO(r),!1),["}"],!1)):n.push("".concat($S(s),": ").concat((t=s,(e=r)==null||typeof e=="boolean"||e===""?"":typeof e!="number"||e===0||t in hW||t.startsWith("--")?String(e).trim():"".concat(e,"px")),";")))}return n};function la(i,t,e,n){if(wO(i))return[];if(eE(i))return[".".concat(i.styledComponentId)];if(uu(i)){if(!uu(r=i)||r.prototype&&r.prototype.isReactComponent||!t)return[i];var s=i(t);return la(s,t,e,n)}var r;return i instanceof jW?e?(i.inject(e,n),[i.getName(n)]):[i]:Th(i)?vO(i):Array.isArray(i)?Array.prototype.concat.apply(mb,i.map(function(o){return la(o,t,e,n)})):[i.toString()]}function yO(i){for(var t=0;t<i.length;t+=1){var e=i[t];if(uu(e)&&!eE(e))return!1}return!0}var UW=cO(fb),WW=function(){function i(t,e,n){this.rules=t,this.staticRulesId="",this.isStatic=(n===void 0||n.isStatic)&&yO(t),this.componentId=e,this.baseHash=zc(UW,e),this.baseStyle=n,rp.registerId(e)}return i.prototype.generateAndInjectStyles=function(t,e,n){var s=this.baseStyle?this.baseStyle.generateAndInjectStyles(t,e,n):"";if(this.isStatic&&!n.hash)if(this.staticRulesId&&e.hasNameForId(this.componentId,this.staticRulesId))s=il(s,this.staticRulesId);else{var r=ey(la(this.rules,t,e,n)),o=Q1(zc(this.baseHash,r)>>>0);if(!e.hasNameForId(this.componentId,o)){var a=n(r,".".concat(o),void 0,this.componentId);e.insertRules(this.componentId,o,a)}s=il(s,o),this.staticRulesId=o}else{for(var l=zc(this.baseHash,n.hash),u="",h=0;h<this.rules.length;h++){var f=this.rules[h];if(typeof f=="string")u+=f;else if(f){var g=ey(la(f,t,e,n));l=zc(l,g+h),u+=g}}if(u){var p=Q1(l>>>0);e.hasNameForId(this.componentId,p)||e.insertRules(this.componentId,p,n(u,".".concat(p),void 0,this.componentId)),s=il(s,p)}}return s},i}(),nE=Ke.createContext(void 0);nE.Consumer;var g0={};function qW(i,t,e){var n=eE(i),s=i,r=!m0(i),o=t.attrs,a=o===void 0?mb:o,l=t.componentId,u=l===void 0?function(S,O){var A=typeof S!="string"?"sc":NS(S);g0[A]=(g0[A]||0)+1;var N="".concat(A,"-").concat(uO(fb+A+g0[A]));return O?"".concat(O,"-").concat(N):N}(t.displayName,t.parentComponentId):l,h=t.displayName,f=h===void 0?function(S){return m0(S)?"styled.".concat(S):"Styled(".concat(wW(S),")")}(i):h,g=t.displayName&&t.componentId?"".concat(NS(t.displayName),"-").concat(t.componentId):t.componentId||u,p=n&&s.attrs?s.attrs.concat(a).filter(Boolean):a,y=t.shouldForwardProp;if(n&&s.shouldForwardProp){var E=s.shouldForwardProp;if(t.shouldForwardProp){var C=t.shouldForwardProp;y=function(S,O){return E(S,O)&&C(S,O)}}else y=E}var k=new WW(e,g,n?s.componentStyle:void 0);function T(S,O){return function(A,N,L){var M=A.attrs,B=A.componentStyle,U=A.defaultProps,q=A.foldedComponentIds,ee=A.styledComponentId,me=A.target,_e=Ke.useContext(nE),ge=iy(),pe=A.shouldForwardProp||ge.shouldForwardProp,ae=oO(N,_e,U)||cu,le=function(je,ze,st){for(var Je,rt=ei(ei({},ze),{className:void 0,theme:st}),ut=0;ut<je.length;ut+=1){var Zt=uu(Je=je[ut])?Je(rt):Je;for(var kn in Zt)rt[kn]=kn==="className"?il(rt[kn],Zt[kn]):kn==="style"?ei(ei({},rt[kn]),Zt[kn]):Zt[kn]}return ze.className&&(rt.className=il(rt.className,ze.className)),rt}(M,N,ae),re=le.as||me,j={};for(var ie in le)le[ie]===void 0||ie[0]==="$"||ie==="as"||ie==="theme"&&le.theme===ae||(ie==="forwardedAs"?j.as=le.forwardedAs:pe&&!pe(ie,re)||(j[ie]=le[ie]));var Ve=function(je,ze){var st=iy(),Je=je.generateAndInjectStyles(ze,st.styleSheet,st.stylis);return Je}(B,le),Be=il(q,ee);return Ve&&(Be+=" "+Ve),le.className&&(Be+=" "+le.className),j[m0(re)&&!aO.has(re)?"class":"className"]=Be,L&&(j.ref=L),R.createElement(re,j)}(P,S,O)}T.displayName=f;var P=Ke.forwardRef(T);return P.attrs=p,P.componentStyle=k,P.displayName=f,P.shouldForwardProp=y,P.foldedComponentIds=n?il(s.foldedComponentIds,s.styledComponentId):"",P.styledComponentId=g,P.target=n?s.target:i,Object.defineProperty(P,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(S){this._foldedDefaultProps=n?function(O){for(var A=[],N=1;N<arguments.length;N++)A[N-1]=arguments[N];for(var L=0,M=A;L<M.length;L++)ty(O,M[L],!0);return O}({},s.defaultProps,S):S}}),tE(P,function(){return".".concat(P.styledComponentId)}),r&&mO(P,i,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),P}function zS(i,t){for(var e=[i[0]],n=0,s=t.length;n<s;n+=1)e.push(t[n],i[n+1]);return e}var jS=function(i){return Object.assign(i,{isCss:!0})};function _O(i){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];if(uu(i)||Th(i))return jS(la(zS(mb,kh([i],t,!0))));var n=i;return t.length===0&&n.length===1&&typeof n[0]=="string"?la(n):jS(la(zS(n,t)))}function sy(i,t,e){if(e===void 0&&(e=cu),!t)throw rf(1,t);var n=function(s){for(var r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];return i(t,e,_O.apply(void 0,kh([s],r,!1)))};return n.attrs=function(s){return sy(i,t,ei(ei({},e),{attrs:Array.prototype.concat(e.attrs,s).filter(Boolean)}))},n.withConfig=function(s){return sy(i,t,ei(ei({},e),s))},n}var EO=function(i){return sy(qW,i)},mt=EO;aO.forEach(function(i){mt[i]=EO(i)});var GW=function(){function i(t,e){this.rules=t,this.componentId=e,this.isStatic=yO(t),rp.registerId(this.componentId+1)}return i.prototype.createStyles=function(t,e,n,s){var r=s(ey(la(this.rules,e,n,s)),""),o=this.componentId+t;n.insertRules(o,o,r)},i.prototype.removeStyles=function(t,e){e.clearRules(this.componentId+t)},i.prototype.renderStyles=function(t,e,n,s){t>2&&rp.registerId(this.componentId+t),this.removeStyles(t,n),this.createStyles(t,e,n,s)},i}();function gb(i){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];var n=_O.apply(void 0,kh([i],t,!1)),s="sc-global-".concat(uO(JSON.stringify(n))),r=new GW(n,s),o=function(l){var u=iy(),h=Ke.useContext(nE),f=Ke.useRef(u.styleSheet.allocateGSInstance(s)).current;return u.styleSheet.server&&a(f,l,u.styleSheet,h,u.stylis),Ke.useLayoutEffect(function(){if(!u.styleSheet.server)return a(f,l,u.styleSheet,h,u.stylis),function(){return r.removeStyles(f,u.styleSheet)}},[f,l,u.styleSheet,h,u.stylis]),null};function a(l,u,h,f,g){if(r.isStatic)r.renderStyles(l,mW,h,g);else{var p=ei(ei({},u),{theme:oO(u,f,o.defaultProps)});r.renderStyles(l,p,h,g)}}return Ke.memo(o)}const KW={BASE_URL:"/react-and-bloom/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_BASE:"https://ec-course-api.hexschool.io/v2",VITE_API_PATH:"and-bloom"},{VITE_API_BASE:CO,VITE_API_PATH:xO}=KW,kO=G_({name:"cart",initialState:{cart:[],coupon:null,total:0,final_total:0},reducers:{setCart(i,t){i.cart=t.payload},setTotal(i,t){i.total=t.payload},setFinalTotal(i,t){i.final_total=t.payload},setCoupon(i,t){i.coupon=t.payload}}}),of=q_("cart/asyncGetCart",async({isShowLoading:i=!0}={},{dispatch:t,requestId:e})=>{var n,s,r,o,a,l;try{i&&t(Xe(!0));const u=await Le.get(`${CO}/api/${xO}/cart`);t(YW((n=u.data.data)==null?void 0:n.carts)),t(ZW((s=u.data.data)==null?void 0:s.total)),t(XW((r=u.data.data)==null?void 0:r.final_total)),(o=u.data.data)!=null&&o.carts.length&&t(JW((a=u.data.data)==null?void 0:a.carts[0].coupon))}catch(u){u instanceof St&&console.log((l=u==null?void 0:u.response)==null?void 0:l.data.message)}finally{t(Xe(!1))}}),iE=q_("cart/asyncAddCart",async(i,{dispatch:t,requestId:e})=>{var n,s;try{t(Xe(!0));const r=await Le.post(`${CO}/api/${xO}/cart`,{data:{product_id:i.productId,qty:i.qty||1}});t(en({text:r==null?void 0:r.data.message,type:"success"})),await t(of())}catch(r){r instanceof St&&(console.log((n=r==null?void 0:r.response)==null?void 0:n.data.message),t(en({text:(s=r==null?void 0:r.response)==null?void 0:s.data.message,type:"danger"})))}finally{t(Xe(!1))}}),{setCart:YW,setTotal:ZW,setFinalTotal:XW,setCoupon:JW}=kO.actions,TO=i=>i.cart,QW=kO.reducer,eq=qj({reducer:{toast:pH,loading:fH,cart:QW}}),vn=()=>w$(),qt=R.memo(({type:i="button",children:t,btnStyle:e="btn-secondary",handleClick:n=()=>{},...s})=>v.jsx("button",{type:i,className:`btn rounded-pill px-3 ${e}`,onClick:n,...s,children:t})),tq=R.forwardRef(({children:i,nextFn:t},e)=>{const n=R.useRef(null),s=R.useRef(null);return R.useEffect(()=>{n.current&&(s.current=new Js(n.current))},[]),R.useImperativeHandle(e,()=>({show:()=>{var r;(r=s.current)==null||r.show()},hide:()=>{var r;(r=s.current)==null||r.hide()}})),v.jsx("div",{className:"modal fade",tabIndex:-1,ref:n,children:v.jsx("div",{className:"modal-dialog",children:v.jsxs("div",{className:"modal-content",children:[v.jsxs("div",{className:"modal-header",children:[v.jsx("h2",{className:"modal-title fs-5",children:"注意"}),v.jsx("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),v.jsx("div",{className:"modal-body",children:i}),v.jsxs("div",{className:"modal-footer",children:[v.jsx(qt,{btnStyle:"btn btn-outline-secondary","data-bs-dismiss":"modal",children:"取消"}),v.jsx(qt,{btnStyle:"btn btn-secondary",handleClick:t,children:"確認"})]})]})})})}),af=R.memo(tq),nq={BASE_URL:"/react-and-bloom/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_BASE:"https://ec-course-api.hexschool.io/v2",VITE_API_PATH:"and-bloom"},{VITE_API_BASE:iq}=nq,sq=mt("nav")`
  height: 70px;
  box-shadow: 0 1px 5px rgba(0,0,0,0.1);
  background-color: rgba(255,255,255,0.5);

  @supports (animation-timeline: scroll()) {
    background-color: rgba(255,255,255,0.1);
    backdrop-filter: blur(10px);
  }
`,Hm=mt("span")`
  position: relative;
  padding-top: 1rem;
  padding-bottom: 1rem;

  &::before {
    content: '';
    height: 1px;
    width: 0;
    background-color: black;
    position: absolute;
    bottom: 10px;
    transition: width 0.3s ease-in-out;
  }

  &:hover::before {
    width: 100%;
  }
`,rq=mt("h1")`
  font-family: 'Cormorant Garamond', Didot, 'Bodoni MT', 'Noto Serif Display', 'URW Palladio L', P052, Sylfaen, serif;
  color: black;
  font-size: 32px;
  margin: 0;
`,oq=()=>{const i=vn(),t=R.useRef(null),e=Pl(),n=R.useCallback(()=>{var r;(r=t.current)==null||r.show()},[]),s=async()=>{var r,o,a;try{i(Xe(!0)),await Le.post(`${iq}/logout`),(r=t.current)==null||r.hide(),e("/login")}catch(l){l instanceof St&&(console.log((o=l==null?void 0:l.response)==null?void 0:o.data.message),i(en({text:(a=l==null?void 0:l.response)==null?void 0:a.data.message,type:"danger"})))}finally{i(Xe(!1))}};return v.jsxs(v.Fragment,{children:[v.jsxs(sq,{className:"fixed-top py-3 px-5 d-flex align-items-center",children:[v.jsx(on,{to:"/admin",className:"d-flex align-items-center px-4",children:v.jsxs(rq,{children:["&",v.jsx("em",{children:"Bloom"})]})}),v.jsxs("div",{className:"d-flex align-items-center ms-auto",children:[v.jsx(on,{to:"/",className:"btn btn-outline-primary rounded-pill px-4 mx-4 py-1",children:"前台"}),v.jsx(on,{to:"/admin/products",className:"px-4",children:v.jsx(Hm,{children:"產品管理"})}),v.jsx(on,{to:"/admin/orders",className:"px-4",children:v.jsx(Hm,{children:"訂單管理"})}),v.jsx(on,{to:"/admin/coupons",className:"px-4",children:v.jsx(Hm,{children:"優惠券管理"})}),v.jsx(on,{to:"/admin/articles",className:"px-4",children:v.jsx(Hm,{children:"文章管理"})}),v.jsx("i",{className:"bi bi-box-arrow-right fs-4 cursor-pointer px-4",onClick:n})]})]}),v.jsx(af,{ref:t,nextFn:s,children:v.jsx("p",{className:"text-center py-4",children:"您確定登出系統嗎？"})})]})},aq={BASE_URL:"/react-and-bloom/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_BASE:"https://ec-course-api.hexschool.io/v2",VITE_API_PATH:"and-bloom"},{VITE_API_BASE:lq}=aq,cq=gb`
  body {
    padding-top: 70px;
    min-height: 100vh;
    overflow-x: hidden;
  }
`,uq=()=>{const i=Pl();return R.useEffect(()=>{(async()=>{var t;try{const e=document.cookie.replace(/(?:(?:^|.*;\s*)andBloom\s*=\s*([^;]*).*$)|^.*$/,"$1");Le.defaults.headers.common.Authorization=e,await Le.post(`${lq}/api/user/check`)}catch(e){e instanceof St&&console.log((t=e==null?void 0:e.response)==null?void 0:t.data.message),i("/login")}})()},[i]),v.jsxs(v.Fragment,{children:[v.jsx(cq,{}),v.jsx(oq,{}),v.jsx("div",{className:"container my-5",children:v.jsx(a3,{})})]})},SO=()=>v.jsx("small",{className:"d-block position-absolute bottom-0 w-100",children:v.jsxs("small",{className:"p-2 p-md-4 mx-4 d-flex flex-column flex-md-row justify-content-between",children:[v.jsx("span",{children:"© &Bloom 2025 All Rights Reserved."}),v.jsx("span",{children:"所有資源為練習使用，無商業用途。"})]})}),dq=mt("nav")`
  height: 70px;
  box-shadow: 0 1px 5px rgba(0,0,0,0.1);
  background-color: rgba(255,255,255,0.5);
  transform: translateY(0);
  transition: 0.5s cubic-bezier(.77,0,.18,1) 0.15s;

  @supports (animation-timeline: scroll()) {
    background-color: rgba(255,255,255,0.1);
    backdrop-filter: blur(10px);
  }

  &.hidden:not(.active) {
    transform: translateY(-100%);
  }

  &.active {
    background-color: var(--background);
    backdrop-filter: none;
    box-shadow: none;
  }
`,p0=mt("span")`
  position: relative;
  padding-top: 1rem;
  padding-bottom: 1rem;
  font-size: 0.875rem;

  &::before {
    content: '';
    height: 1px;
    width: 0;
    background-color: black;
    position: absolute;
    bottom: 10px;
    transition: width 0.3s ease-in-out;
  }

  &:hover::before {
    width: 100%;
  }
`,hq=mt("h1")`
  font-family: 'Cormorant Garamond', Didot, 'Bodoni MT', 'Noto Serif Display', 'URW Palladio L', P052, Sylfaen, serif;
  color: black;
  font-size: 32px;
  margin: 0;
`,fq=mt("div")`
  position: relative;
  width: 25px;
  height: 17px;
  transform: scale(0.8);
  .line {
    position: absolute;
    width: 100%;
    height: 2px;
    border-radius: 1px;
    background-color: black;
    transition: opacity .3s, width .3s ease, top .3s ease, transform .3s .2s ease;
    &:nth-child(1) {
      top: 0;
    }
    &:nth-child(2) {
      top: 50%;
    }
    &:nth-child(3) {
      top: 100%;
      width: 50%;
    }
  }
  &:hover {
    .line {
      &:nth-child(2) {
        width: 50%;
      }
      &:nth-child(3) {
        width: 100%;
      }
    }
  }
  &.active {
    .line {
      &:nth-child(1) {
        top: 50%;
        transform: rotate(-135deg);
        transform-origin: center;
      }
      &:nth-child(2) {
        opacity: 0;
      }
      &:nth-child(3) {
        top: 50%;
        transform: rotate(135deg);
        transform-origin: center;
        width: 100%;
      }
    }
  }
`,mq=mt("div")`
  position: fixed;
  top: 70px;
  left: 0;
  bottom: 0;
  width: 100%;
  background-color: var(--background);
  transform: translateY(100%);
  transition: transform 0.5s cubic-bezier(.77,0,.18,1) 0.15s;
  trasition-origin: bottom;
  z-index: 990;

  a {
    transform: translateY(-200%);
    opacity: 0;
    transition: 0.6s cubic-bezier(.77,0,.18,1) 0.3s;
  }

  &.active {
    transform: translateY(0);

    a {
      transform: translateY(0);
      opacity: 1;
    }
  }
`,HS=()=>{const{cart:i}=Zp(TO),t=R.useMemo(()=>i.reduce((e,n)=>e+n.qty,0),[i]);return v.jsxs(v.Fragment,{children:[v.jsx(on,{to:"/products",className:"my-5 my-lg-0 px-4",children:v.jsx(p0,{children:"PLANTS・所有植栽"})}),v.jsx(on,{to:"/articles",className:"my-5 my-lg-0 px-4",children:v.jsx(p0,{children:"ARTICLES・植物專欄"})}),v.jsx(on,{to:"/cart",className:"my-5 my-lg-0 px-4",children:v.jsxs(p0,{className:"position-relative",children:["CART・購物車",t?v.jsxs("span",{className:"position-absolute top-25 start-100 translate-middle badge rounded-pill text-bg-info ms-1",children:[t,v.jsx("span",{className:"visually-hidden",children:"unread messages"})]}):""]})}),v.jsx(on,{to:"/admin",className:"btn btn-sm btn-outline-primary rounded-pill px-4 mx-4 py-1 my-5 my-lg-0 ",children:"後台"})]})},AO=R.forwardRef((i,t)=>{const e=vn(),n=Ea(),[s,r]=R.useState(!1);R.useEffect(()=>{e(of({isShowLoading:!1}))},[e]);const o=()=>{r(!s)};return R.useEffect(()=>{r(!1)},[n]),v.jsxs(v.Fragment,{children:[v.jsxs(dq,{ref:t,className:`py-3 px-4 px-xl-5 fixed-top d-flex align-items-center ${s?"active":""}`,children:[v.jsx(on,{to:"/",className:"d-flex align-items-center px-lg-4",children:v.jsxs(hq,{children:["&",v.jsx("em",{children:"Bloom"})]})}),v.jsx("div",{className:"d-none d-lg-flex align-items-center ms-auto",children:v.jsx(HS,{})}),v.jsxs(fq,{onClick:o,className:`ms-auto cursor-pointer d-lg-none ${s?"active":""}`,children:[v.jsx("div",{className:"line"}),v.jsx("div",{className:"line"}),v.jsx("div",{className:"line"})]})]}),v.jsx(mq,{className:`d-lg-none d-flex flex-column align-items-center ${s?"active":""}`,children:v.jsx(HS,{})})]})}),gq=gb`
  body {
    padding-top: 70px;
    min-height: 100vh;
    overflow-x: hidden;
    background-color: var(--background);
  }

  .root {
    position: relative;
    display: flex;
    flex-direction: column;
    min-height: calc(100vh - 70px);
    padding-bottom: 73px;
  }

  .page-link {
    background-color: var(--background);
  }
`,pq=()=>{const i=R.useRef(null),t=R.useRef(0);return R.useEffect(()=>{const e=()=>{var n,s;window.scrollY>t.current?(n=i.current)==null||n.classList.add("hidden"):(s=i.current)==null||s.classList.remove("hidden"),t.current=window.scrollY};return window.addEventListener("scroll",e),()=>{window.removeEventListener("scroll",e)}},[]),v.jsxs(v.Fragment,{children:[v.jsx(gq,{}),v.jsx(AO,{ref:i}),v.jsx(a3,{}),v.jsx(SO,{})]})},pb=R.memo(({isEnabled:i,labels:t=["停用","啟用"]})=>{const e=i?{icon:"bi-check-circle-fill",class:"text-success"}:{icon:"bi-x-circle-fill",class:"text-danger"};return v.jsxs("small",{className:`d-flex align-items-center ${e.class}`,children:[v.jsx("i",{className:`me-2 bi ${e.icon}`}),t[i?"1":"0"]]})}),bq=mt("li")`
  margin-top: -1px;
  &:hover {
    background-color: #f8f9fa;
    z-index: 1000;
    border-color: rgba(0, 0, 0, 0.3);
  }
`,wq=R.memo(({showModal:i,order:t,setSelectedOrder:e,showAlertModal:n})=>{const{id:s,user:r,products:o,total:a,is_paid:l,message:u}=t,h=R.useMemo(()=>{var y;if(t!=null&&t.products)return((y=Object.values(t==null?void 0:t.products))==null?void 0:y.reduce((E,C)=>E+(C.total*100-C.final_total*100),0))/100},[t]),f=R.useMemo(()=>{var y,E,C,k;if(!(!(t!=null&&t.products)||!((E=(y=Object.values(t==null?void 0:t.products))==null?void 0:y[0])!=null&&E.coupon)))return(k=(C=Object.values(t==null?void 0:t.products))==null?void 0:C[0])==null?void 0:k.coupon},[t]),g=R.useCallback(y=>{e({...y,discount:h,coupon:f}),i()},[e,h,f,i]),p=R.useCallback(y=>{e(y),n()},[n,e]);return v.jsx(bq,{className:"card mb-3",children:v.jsx("div",{className:"card-body",children:v.jsxs("div",{className:"row w-100 justify-content-between align-items-center",children:[v.jsx("div",{className:"col-md",children:v.jsx("p",{className:"mb-0 ms-4",children:r.name})}),v.jsxs("div",{className:"col-md-4",children:[v.jsx("span",{className:"badge rounded-pill bg-primary fs-sm mb-1",children:"訂購品項"}),Object.values(o).map((y,E)=>v.jsxs("small",{className:`d-flex py-1 my-1 border-bottom ${E===0&&"border-top"}`,children:[y.product.title," * ",y.qty,v.jsxs("span",{className:"ms-auto",children:["$",y.total]})]},`${s}-${y.id}`)),f?v.jsxs("small",{className:"d-flex pb-1 mb-1 border-bottom",children:[v.jsxs("span",{className:"flex-shrink-0",children:["優惠券折扣",`（${f.title} ${f.percent} 折）`]}),v.jsxs("span",{className:"ms-auto text-danger",children:["-$",h]})]}):"",v.jsxs("small",{className:"fw-bold d-flex pb-1 mb-1 border-bottom",children:["總金額",v.jsxs("span",{className:"ms-auto",children:["$",a]})]})]}),v.jsx("div",{className:"col-md d-flex justify-content-center",children:v.jsx(pb,{isEnabled:l,labels:["未付款","已付款"]})}),v.jsxs("div",{className:"col-md d-flex align-items-center justify-content-end",children:[v.jsx(qt,{btnStyle:"btn-sm btn-secondary",handleClick:()=>g(t),children:"編輯"}),v.jsx(qt,{btnStyle:"btn-sm btn-outline-primary ms-2",handleClick:()=>p(t),children:"刪除"})]})]})})})});var lf=i=>i.type==="checkbox",sl=i=>i instanceof Date,ri=i=>i==null;const PO=i=>typeof i=="object";var fn=i=>!ri(i)&&!Array.isArray(i)&&PO(i)&&!sl(i),vq=i=>fn(i)&&i.target?lf(i.target)?i.target.checked:i.target.value:i,yq=i=>i.substring(0,i.search(/\.\d+(\.|$)/))||i,_q=(i,t)=>i.has(yq(t)),Eq=i=>{const t=i.constructor&&i.constructor.prototype;return fn(t)&&t.hasOwnProperty("isPrototypeOf")},sE=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Di(i){let t;const e=Array.isArray(i),n=typeof FileList<"u"?i instanceof FileList:!1;if(i instanceof Date)t=new Date(i);else if(i instanceof Set)t=new Set(i);else if(!(sE&&(i instanceof Blob||n))&&(e||fn(i)))if(t=e?[]:{},!e&&!Eq(i))t=i;else for(const s in i)i.hasOwnProperty(s)&&(t[s]=Di(i[s]));else return i;return t}var bb=i=>Array.isArray(i)?i.filter(Boolean):[],pn=i=>i===void 0,Re=(i,t,e)=>{if(!t||!fn(i))return e;const n=bb(t.split(/[,[\].]+?/)).reduce((s,r)=>ri(s)?s:s[r],i);return pn(n)||n===i?pn(i[t])?e:i[t]:n},pr=i=>typeof i=="boolean",rE=i=>/^\w*$/.test(i),IO=i=>bb(i.replace(/["|']|\]/g,"").split(/\.|\[/)),Ut=(i,t,e)=>{let n=-1;const s=rE(t)?[t]:IO(t),r=s.length,o=r-1;for(;++n<r;){const a=s[n];let l=e;if(n!==o){const u=i[a];l=fn(u)||Array.isArray(u)?u:isNaN(+s[n+1])?{}:[]}if(a==="__proto__"||a==="constructor"||a==="prototype")return;i[a]=l,i=i[a]}return i};const US={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Us={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Ur={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},Cq=Ke.createContext(null),xq=()=>Ke.useContext(Cq);var kq=(i,t,e,n=!0)=>{const s={defaultValues:t._defaultValues};for(const r in i)Object.defineProperty(s,r,{get:()=>{const o=r;return t._proxyFormState[o]!==Us.all&&(t._proxyFormState[o]=!n||Us.all),i[o]}});return s},yi=i=>fn(i)&&!Object.keys(i).length,Tq=(i,t,e,n)=>{e(i);const{name:s,...r}=i;return yi(r)||Object.keys(r).length>=Object.keys(t).length||Object.keys(r).find(o=>t[o]===Us.all)},th=i=>Array.isArray(i)?i:[i],Sq=(i,t,e)=>!i||!t||i===t||th(i).some(n=>n&&(e?n===t:n.startsWith(t)||t.startsWith(n)));function RO(i){const t=Ke.useRef(i);t.current=i,Ke.useEffect(()=>{const e=!i.disabled&&t.current.subject&&t.current.subject.subscribe({next:t.current.next});return()=>{e&&e.unsubscribe()}},[i.disabled])}var Er=i=>typeof i=="string",OO=(i,t,e,n,s)=>Er(i)?(n&&t.watch.add(i),Re(e,i,s)):Array.isArray(i)?i.map(r=>(n&&t.watch.add(r),Re(e,r))):(n&&(t.watchAll=!0),e);function oE(i){const t=xq(),{control:e=t.control,name:n,defaultValue:s,disabled:r,exact:o}=i||{},a=Ke.useRef(n);a.current=n,RO({disabled:r,subject:e._subjects.values,next:h=>{Sq(a.current,h.name,o)&&u(Di(OO(a.current,e._names,h.values||e._formValues,!1,s)))}});const[l,u]=Ke.useState(e._getWatch(n,s));return Ke.useEffect(()=>e._removeUnmounted()),l}var Aq=(i,t,e,n,s)=>t?{...e[i],types:{...e[i]&&e[i].types?e[i].types:{},[n]:s||!0}}:{},WS=i=>({isOnSubmit:!i||i===Us.onSubmit,isOnBlur:i===Us.onBlur,isOnChange:i===Us.onChange,isOnAll:i===Us.all,isOnTouch:i===Us.onTouched}),qS=(i,t,e)=>!e&&(t.watchAll||t.watch.has(i)||[...t.watch].some(n=>i.startsWith(n)&&/^\.\w+/.test(i.slice(n.length))));const nh=(i,t,e,n)=>{for(const s of e||Object.keys(i)){const r=Re(i,s);if(r){const{_f:o,...a}=r;if(o){if(o.refs&&o.refs[0]&&t(o.refs[0],s)&&!n)return!0;if(o.ref&&t(o.ref,o.name)&&!n)return!0;if(nh(a,t))break}else if(fn(a)&&nh(a,t))break}}};var Pq=(i,t,e)=>{const n=th(Re(i,e));return Ut(n,"root",t[e]),Ut(i,e,n),i},aE=i=>i.type==="file",yr=i=>typeof i=="function",op=i=>{if(!sE)return!1;const t=i?i.ownerDocument:0;return i instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},Ig=i=>Er(i),lE=i=>i.type==="radio",ap=i=>i instanceof RegExp;const GS={value:!1,isValid:!1},KS={value:!0,isValid:!0};var NO=i=>{if(Array.isArray(i)){if(i.length>1){const t=i.filter(e=>e&&e.checked&&!e.disabled).map(e=>e.value);return{value:t,isValid:!!t.length}}return i[0].checked&&!i[0].disabled?i[0].attributes&&!pn(i[0].attributes.value)?pn(i[0].value)||i[0].value===""?KS:{value:i[0].value,isValid:!0}:KS:GS}return GS};const YS={isValid:!1,value:null};var MO=i=>Array.isArray(i)?i.reduce((t,e)=>e&&e.checked&&!e.disabled?{isValid:!0,value:e.value}:t,YS):YS;function ZS(i,t,e="validate"){if(Ig(i)||Array.isArray(i)&&i.every(Ig)||pr(i)&&!i)return{type:e,message:Ig(i)?i:"",ref:t}}var yc=i=>fn(i)&&!ap(i)?i:{value:i,message:""},XS=async(i,t,e,n,s,r)=>{const{ref:o,refs:a,required:l,maxLength:u,minLength:h,min:f,max:g,pattern:p,validate:y,name:E,valueAsNumber:C,mount:k}=i._f,T=Re(e,E);if(!k||t.has(E))return{};const P=a?a[0]:o,S=q=>{s&&P.reportValidity&&(P.setCustomValidity(pr(q)?"":q||""),P.reportValidity())},O={},A=lE(o),N=lf(o),L=A||N,M=(C||aE(o))&&pn(o.value)&&pn(T)||op(o)&&o.value===""||T===""||Array.isArray(T)&&!T.length,B=Aq.bind(null,E,n,O),U=(q,ee,me,_e=Ur.maxLength,ge=Ur.minLength)=>{const pe=q?ee:me;O[E]={type:q?_e:ge,message:pe,ref:o,...B(q?_e:ge,pe)}};if(r?!Array.isArray(T)||!T.length:l&&(!L&&(M||ri(T))||pr(T)&&!T||N&&!NO(a).isValid||A&&!MO(a).isValid)){const{value:q,message:ee}=Ig(l)?{value:!!l,message:l}:yc(l);if(q&&(O[E]={type:Ur.required,message:ee,ref:P,...B(Ur.required,ee)},!n))return S(ee),O}if(!M&&(!ri(f)||!ri(g))){let q,ee;const me=yc(g),_e=yc(f);if(!ri(T)&&!isNaN(T)){const ge=o.valueAsNumber||T&&+T;ri(me.value)||(q=ge>me.value),ri(_e.value)||(ee=ge<_e.value)}else{const ge=o.valueAsDate||new Date(T),pe=re=>new Date(new Date().toDateString()+" "+re),ae=o.type=="time",le=o.type=="week";Er(me.value)&&T&&(q=ae?pe(T)>pe(me.value):le?T>me.value:ge>new Date(me.value)),Er(_e.value)&&T&&(ee=ae?pe(T)<pe(_e.value):le?T<_e.value:ge<new Date(_e.value))}if((q||ee)&&(U(!!q,me.message,_e.message,Ur.max,Ur.min),!n))return S(O[E].message),O}if((u||h)&&!M&&(Er(T)||r&&Array.isArray(T))){const q=yc(u),ee=yc(h),me=!ri(q.value)&&T.length>+q.value,_e=!ri(ee.value)&&T.length<+ee.value;if((me||_e)&&(U(me,q.message,ee.message),!n))return S(O[E].message),O}if(p&&!M&&Er(T)){const{value:q,message:ee}=yc(p);if(ap(q)&&!T.match(q)&&(O[E]={type:Ur.pattern,message:ee,ref:o,...B(Ur.pattern,ee)},!n))return S(ee),O}if(y){if(yr(y)){const q=await y(T,e),ee=ZS(q,P);if(ee&&(O[E]={...ee,...B(Ur.validate,ee.message)},!n))return S(ee.message),O}else if(fn(y)){let q={};for(const ee in y){if(!yi(q)&&!n)break;const me=ZS(await y[ee](T,e),P,ee);me&&(q={...me,...B(ee,me.message)},S(me.message),n&&(O[E]=q))}if(!yi(q)&&(O[E]={ref:P,...q},!n))return O}}return S(!0),O};function Iq(i,t){const e=t.slice(0,-1).length;let n=0;for(;n<e;)i=pn(i)?n++:i[t[n++]];return i}function Rq(i){for(const t in i)if(i.hasOwnProperty(t)&&!pn(i[t]))return!1;return!0}function Cn(i,t){const e=Array.isArray(t)?t:rE(t)?[t]:IO(t),n=e.length===1?i:Iq(i,e),s=e.length-1,r=e[s];return n&&delete n[r],s!==0&&(fn(n)&&yi(n)||Array.isArray(n)&&Rq(n))&&Cn(i,e.slice(0,-1)),i}var b0=()=>{let i=[];return{get observers(){return i},next:s=>{for(const r of i)r.next&&r.next(s)},subscribe:s=>(i.push(s),{unsubscribe:()=>{i=i.filter(r=>r!==s)}}),unsubscribe:()=>{i=[]}}},ry=i=>ri(i)||!PO(i);function sa(i,t){if(ry(i)||ry(t))return i===t;if(sl(i)&&sl(t))return i.getTime()===t.getTime();const e=Object.keys(i),n=Object.keys(t);if(e.length!==n.length)return!1;for(const s of e){const r=i[s];if(!n.includes(s))return!1;if(s!=="ref"){const o=t[s];if(sl(r)&&sl(o)||fn(r)&&fn(o)||Array.isArray(r)&&Array.isArray(o)?!sa(r,o):r!==o)return!1}}return!0}var LO=i=>i.type==="select-multiple",Oq=i=>lE(i)||lf(i),w0=i=>op(i)&&i.isConnected,VO=i=>{for(const t in i)if(yr(i[t]))return!0;return!1};function lp(i,t={}){const e=Array.isArray(i);if(fn(i)||e)for(const n in i)Array.isArray(i[n])||fn(i[n])&&!VO(i[n])?(t[n]=Array.isArray(i[n])?[]:{},lp(i[n],t[n])):ri(i[n])||(t[n]=!0);return t}function DO(i,t,e){const n=Array.isArray(i);if(fn(i)||n)for(const s in i)Array.isArray(i[s])||fn(i[s])&&!VO(i[s])?pn(t)||ry(e[s])?e[s]=Array.isArray(i[s])?lp(i[s],[]):{...lp(i[s])}:DO(i[s],ri(t)?{}:t[s],e[s]):e[s]=!sa(i[s],t[s]);return e}var xd=(i,t)=>DO(i,t,lp(t)),BO=(i,{valueAsNumber:t,valueAsDate:e,setValueAs:n})=>pn(i)?i:t?i===""?NaN:i&&+i:e&&Er(i)?new Date(i):n?n(i):i;function v0(i){const t=i.ref;return aE(t)?t.files:lE(t)?MO(i.refs).value:LO(t)?[...t.selectedOptions].map(({value:e})=>e):lf(t)?NO(i.refs).value:BO(pn(t.value)?i.ref.value:t.value,i)}var Nq=(i,t,e,n)=>{const s={};for(const r of i){const o=Re(t,r);o&&Ut(s,r,o._f)}return{criteriaMode:e,names:[...i],fields:s,shouldUseNativeValidation:n}},kd=i=>pn(i)?i:ap(i)?i.source:fn(i)?ap(i.value)?i.value.source:i.value:i;const JS="AsyncFunction";var Mq=i=>!!i&&!!i.validate&&!!(yr(i.validate)&&i.validate.constructor.name===JS||fn(i.validate)&&Object.values(i.validate).find(t=>t.constructor.name===JS)),Lq=i=>i.mount&&(i.required||i.min||i.max||i.maxLength||i.minLength||i.pattern||i.validate);function QS(i,t,e){const n=Re(i,e);if(n||rE(e))return{error:n,name:e};const s=e.split(".");for(;s.length;){const r=s.join("."),o=Re(t,r),a=Re(i,r);if(o&&!Array.isArray(o)&&e!==r)return{name:e};if(a&&a.type)return{name:r,error:a};s.pop()}return{name:e}}var Vq=(i,t,e,n,s)=>s.isOnAll?!1:!e&&s.isOnTouch?!(t||i):(e?n.isOnBlur:s.isOnBlur)?!i:(e?n.isOnChange:s.isOnChange)?i:!0,Dq=(i,t)=>!bb(Re(i,t)).length&&Cn(i,t);const Bq={mode:Us.onSubmit,reValidateMode:Us.onChange,shouldFocusError:!0};function Fq(i={}){let t={...Bq,...i},e={submitCount:0,isDirty:!1,isLoading:yr(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},n={},s=fn(t.defaultValues)||fn(t.values)?Di(t.defaultValues||t.values)||{}:{},r=t.shouldUnregister?{}:Di(s),o={action:!1,mount:!1,watch:!1},a={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},l,u=0;const h={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},f={values:b0(),array:b0(),state:b0()},g=WS(t.mode),p=WS(t.reValidateMode),y=t.criteriaMode===Us.all,E=F=>Y=>{clearTimeout(u),u=setTimeout(F,Y)},C=async F=>{if(!t.disabled&&(h.isValid||F)){const Y=t.resolver?yi((await L()).errors):await B(n,!0);Y!==e.isValid&&f.state.next({isValid:Y})}},k=(F,Y)=>{!t.disabled&&(h.isValidating||h.validatingFields)&&((F||Array.from(a.mount)).forEach(te=>{te&&(Y?Ut(e.validatingFields,te,Y):Cn(e.validatingFields,te))}),f.state.next({validatingFields:e.validatingFields,isValidating:!yi(e.validatingFields)}))},T=(F,Y=[],te,ye,be=!0,he=!0)=>{if(ye&&te&&!t.disabled){if(o.action=!0,he&&Array.isArray(Re(n,F))){const Me=te(Re(n,F),ye.argA,ye.argB);be&&Ut(n,F,Me)}if(he&&Array.isArray(Re(e.errors,F))){const Me=te(Re(e.errors,F),ye.argA,ye.argB);be&&Ut(e.errors,F,Me),Dq(e.errors,F)}if(h.touchedFields&&he&&Array.isArray(Re(e.touchedFields,F))){const Me=te(Re(e.touchedFields,F),ye.argA,ye.argB);be&&Ut(e.touchedFields,F,Me)}h.dirtyFields&&(e.dirtyFields=xd(s,r)),f.state.next({name:F,isDirty:q(F,Y),dirtyFields:e.dirtyFields,errors:e.errors,isValid:e.isValid})}else Ut(r,F,Y)},P=(F,Y)=>{Ut(e.errors,F,Y),f.state.next({errors:e.errors})},S=F=>{e.errors=F,f.state.next({errors:e.errors,isValid:!1})},O=(F,Y,te,ye)=>{const be=Re(n,F);if(be){const he=Re(r,F,pn(te)?Re(s,F):te);pn(he)||ye&&ye.defaultChecked||Y?Ut(r,F,Y?he:v0(be._f)):_e(F,he),o.mount&&C()}},A=(F,Y,te,ye,be)=>{let he=!1,Me=!1;const Qe={name:F};if(!t.disabled){const pt=!!(Re(n,F)&&Re(n,F)._f&&Re(n,F)._f.disabled);if(!te||ye){h.isDirty&&(Me=e.isDirty,e.isDirty=Qe.isDirty=q(),he=Me!==Qe.isDirty);const ht=pt||sa(Re(s,F),Y);Me=!!(!pt&&Re(e.dirtyFields,F)),ht||pt?Cn(e.dirtyFields,F):Ut(e.dirtyFields,F,!0),Qe.dirtyFields=e.dirtyFields,he=he||h.dirtyFields&&Me!==!ht}if(te){const ht=Re(e.touchedFields,F);ht||(Ut(e.touchedFields,F,te),Qe.touchedFields=e.touchedFields,he=he||h.touchedFields&&ht!==te)}he&&be&&f.state.next(Qe)}return he?Qe:{}},N=(F,Y,te,ye)=>{const be=Re(e.errors,F),he=h.isValid&&pr(Y)&&e.isValid!==Y;if(t.delayError&&te?(l=E(()=>P(F,te)),l(t.delayError)):(clearTimeout(u),l=null,te?Ut(e.errors,F,te):Cn(e.errors,F)),(te?!sa(be,te):be)||!yi(ye)||he){const Me={...ye,...he&&pr(Y)?{isValid:Y}:{},errors:e.errors,name:F};e={...e,...Me},f.state.next(Me)}},L=async F=>{k(F,!0);const Y=await t.resolver(r,t.context,Nq(F||a.mount,n,t.criteriaMode,t.shouldUseNativeValidation));return k(F),Y},M=async F=>{const{errors:Y}=await L(F);if(F)for(const te of F){const ye=Re(Y,te);ye?Ut(e.errors,te,ye):Cn(e.errors,te)}else e.errors=Y;return Y},B=async(F,Y,te={valid:!0})=>{for(const ye in F){const be=F[ye];if(be){const{_f:he,...Me}=be;if(he){const Qe=a.array.has(he.name),pt=be._f&&Mq(be._f);pt&&h.validatingFields&&k([ye],!0);const ht=await XS(be,a.disabled,r,y,t.shouldUseNativeValidation&&!Y,Qe);if(pt&&h.validatingFields&&k([ye]),ht[he.name]&&(te.valid=!1,Y))break;!Y&&(Re(ht,he.name)?Qe?Pq(e.errors,ht,he.name):Ut(e.errors,he.name,ht[he.name]):Cn(e.errors,he.name))}!yi(Me)&&await B(Me,Y,te)}}return te.valid},U=()=>{for(const F of a.unMount){const Y=Re(n,F);Y&&(Y._f.refs?Y._f.refs.every(te=>!w0(te)):!w0(Y._f.ref))&&ze(F)}a.unMount=new Set},q=(F,Y)=>!t.disabled&&(F&&Y&&Ut(r,F,Y),!sa(j(),s)),ee=(F,Y,te)=>OO(F,a,{...o.mount?r:pn(Y)?s:Er(F)?{[F]:Y}:Y},te,Y),me=F=>bb(Re(o.mount?r:s,F,t.shouldUnregister?Re(s,F,[]):[])),_e=(F,Y,te={})=>{const ye=Re(n,F);let be=Y;if(ye){const he=ye._f;he&&(!he.disabled&&Ut(r,F,BO(Y,he)),be=op(he.ref)&&ri(Y)?"":Y,LO(he.ref)?[...he.ref.options].forEach(Me=>Me.selected=be.includes(Me.value)):he.refs?lf(he.ref)?he.refs.length>1?he.refs.forEach(Me=>(!Me.defaultChecked||!Me.disabled)&&(Me.checked=Array.isArray(be)?!!be.find(Qe=>Qe===Me.value):be===Me.value)):he.refs[0]&&(he.refs[0].checked=!!be):he.refs.forEach(Me=>Me.checked=Me.value===be):aE(he.ref)?he.ref.value="":(he.ref.value=be,he.ref.type||f.values.next({name:F,values:{...r}})))}(te.shouldDirty||te.shouldTouch)&&A(F,be,te.shouldTouch,te.shouldDirty,!0),te.shouldValidate&&re(F)},ge=(F,Y,te)=>{for(const ye in Y){const be=Y[ye],he=`${F}.${ye}`,Me=Re(n,he);(a.array.has(F)||fn(be)||Me&&!Me._f)&&!sl(be)?ge(he,be,te):_e(he,be,te)}},pe=(F,Y,te={})=>{const ye=Re(n,F),be=a.array.has(F),he=Di(Y);Ut(r,F,he),be?(f.array.next({name:F,values:{...r}}),(h.isDirty||h.dirtyFields)&&te.shouldDirty&&f.state.next({name:F,dirtyFields:xd(s,r),isDirty:q(F,he)})):ye&&!ye._f&&!ri(he)?ge(F,he,te):_e(F,he,te),qS(F,a)&&f.state.next({...e}),f.values.next({name:o.mount?F:void 0,values:{...r}})},ae=async F=>{o.mount=!0;const Y=F.target;let te=Y.name,ye=!0;const be=Re(n,te),he=()=>Y.type?v0(be._f):vq(F),Me=Qe=>{ye=Number.isNaN(Qe)||sl(Qe)&&isNaN(Qe.getTime())||sa(Qe,Re(r,te,Qe))};if(be){let Qe,pt;const ht=he(),yn=F.type===US.BLUR||F.type===US.FOCUS_OUT,xo=!Lq(be._f)&&!t.resolver&&!Re(e.errors,te)&&!be._f.deps||Vq(yn,Re(e.touchedFields,te),e.isSubmitted,p,g),Is=qS(te,a,yn);Ut(r,te,ht),yn?(be._f.onBlur&&be._f.onBlur(F),l&&l(0)):be._f.onChange&&be._f.onChange(F);const Tn=A(te,ht,yn,!1),jl=!yi(Tn)||Is;if(!yn&&f.values.next({name:te,type:F.type,values:{...r}}),xo)return h.isValid&&(t.mode==="onBlur"&&yn?C():yn||C()),jl&&f.state.next({name:te,...Is?{}:Tn});if(!yn&&Is&&f.state.next({...e}),t.resolver){const{errors:ko}=await L([te]);if(Me(ht),ye){const Pa=QS(e.errors,n,te),Hl=QS(ko,n,Pa.name||te);Qe=Hl.error,te=Hl.name,pt=yi(ko)}}else k([te],!0),Qe=(await XS(be,a.disabled,r,y,t.shouldUseNativeValidation))[te],k([te]),Me(ht),ye&&(Qe?pt=!1:h.isValid&&(pt=await B(n,!0)));ye&&(be._f.deps&&re(be._f.deps),N(te,pt,Qe,Tn))}},le=(F,Y)=>{if(Re(e.errors,Y)&&F.focus)return F.focus(),1},re=async(F,Y={})=>{let te,ye;const be=th(F);if(t.resolver){const he=await M(pn(F)?F:be);te=yi(he),ye=F?!be.some(Me=>Re(he,Me)):te}else F?(ye=(await Promise.all(be.map(async he=>{const Me=Re(n,he);return await B(Me&&Me._f?{[he]:Me}:Me)}))).every(Boolean),!(!ye&&!e.isValid)&&C()):ye=te=await B(n);return f.state.next({...!Er(F)||h.isValid&&te!==e.isValid?{}:{name:F},...t.resolver||!F?{isValid:te}:{},errors:e.errors}),Y.shouldFocus&&!ye&&nh(n,le,F?be:a.mount),ye},j=F=>{const Y={...o.mount?r:s};return pn(F)?Y:Er(F)?Re(Y,F):F.map(te=>Re(Y,te))},ie=(F,Y)=>({invalid:!!Re((Y||e).errors,F),isDirty:!!Re((Y||e).dirtyFields,F),error:Re((Y||e).errors,F),isValidating:!!Re(e.validatingFields,F),isTouched:!!Re((Y||e).touchedFields,F)}),Ve=F=>{F&&th(F).forEach(Y=>Cn(e.errors,Y)),f.state.next({errors:F?e.errors:{}})},Be=(F,Y,te)=>{const ye=(Re(n,F,{_f:{}})._f||{}).ref,be=Re(e.errors,F)||{},{ref:he,message:Me,type:Qe,...pt}=be;Ut(e.errors,F,{...pt,...Y,ref:ye}),f.state.next({name:F,errors:e.errors,isValid:!1}),te&&te.shouldFocus&&ye&&ye.focus&&ye.focus()},je=(F,Y)=>yr(F)?f.values.subscribe({next:te=>F(ee(void 0,Y),te)}):ee(F,Y,!0),ze=(F,Y={})=>{for(const te of F?th(F):a.mount)a.mount.delete(te),a.array.delete(te),Y.keepValue||(Cn(n,te),Cn(r,te)),!Y.keepError&&Cn(e.errors,te),!Y.keepDirty&&Cn(e.dirtyFields,te),!Y.keepTouched&&Cn(e.touchedFields,te),!Y.keepIsValidating&&Cn(e.validatingFields,te),!t.shouldUnregister&&!Y.keepDefaultValue&&Cn(s,te);f.values.next({values:{...r}}),f.state.next({...e,...Y.keepDirty?{isDirty:q()}:{}}),!Y.keepIsValid&&C()},st=({disabled:F,name:Y,field:te,fields:ye})=>{(pr(F)&&o.mount||F||a.disabled.has(Y))&&(F?a.disabled.add(Y):a.disabled.delete(Y),A(Y,v0(te?te._f:Re(ye,Y)._f),!1,!1,!0))},Je=(F,Y={})=>{let te=Re(n,F);const ye=pr(Y.disabled)||pr(t.disabled);return Ut(n,F,{...te||{},_f:{...te&&te._f?te._f:{ref:{name:F}},name:F,mount:!0,...Y}}),a.mount.add(F),te?st({field:te,disabled:pr(Y.disabled)?Y.disabled:t.disabled,name:F}):O(F,!0,Y.value),{...ye?{disabled:Y.disabled||t.disabled}:{},...t.progressive?{required:!!Y.required,min:kd(Y.min),max:kd(Y.max),minLength:kd(Y.minLength),maxLength:kd(Y.maxLength),pattern:kd(Y.pattern)}:{},name:F,onChange:ae,onBlur:ae,ref:be=>{if(be){Je(F,Y),te=Re(n,F);const he=pn(be.value)&&be.querySelectorAll&&be.querySelectorAll("input,select,textarea")[0]||be,Me=Oq(he),Qe=te._f.refs||[];if(Me?Qe.find(pt=>pt===he):he===te._f.ref)return;Ut(n,F,{_f:{...te._f,...Me?{refs:[...Qe.filter(w0),he,...Array.isArray(Re(s,F))?[{}]:[]],ref:{type:he.type,name:F}}:{ref:he}}}),O(F,!1,void 0,he)}else te=Re(n,F,{}),te._f&&(te._f.mount=!1),(t.shouldUnregister||Y.shouldUnregister)&&!(_q(a.array,F)&&o.action)&&a.unMount.add(F)}}},rt=()=>t.shouldFocusError&&nh(n,le,a.mount),ut=F=>{pr(F)&&(f.state.next({disabled:F}),nh(n,(Y,te)=>{const ye=Re(n,te);ye&&(Y.disabled=ye._f.disabled||F,Array.isArray(ye._f.refs)&&ye._f.refs.forEach(be=>{be.disabled=ye._f.disabled||F}))},0,!1))},Zt=(F,Y)=>async te=>{let ye;te&&(te.preventDefault&&te.preventDefault(),te.persist&&te.persist());let be=Di(r);if(a.disabled.size)for(const he of a.disabled)Ut(be,he,void 0);if(f.state.next({isSubmitting:!0}),t.resolver){const{errors:he,values:Me}=await L();e.errors=he,be=Me}else await B(n);if(Cn(e.errors,"root"),yi(e.errors)){f.state.next({errors:{}});try{await F(be,te)}catch(he){ye=he}}else Y&&await Y({...e.errors},te),rt(),setTimeout(rt);if(f.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:yi(e.errors)&&!ye,submitCount:e.submitCount+1,errors:e.errors}),ye)throw ye},kn=(F,Y={})=>{Re(n,F)&&(pn(Y.defaultValue)?pe(F,Di(Re(s,F))):(pe(F,Y.defaultValue),Ut(s,F,Di(Y.defaultValue))),Y.keepTouched||Cn(e.touchedFields,F),Y.keepDirty||(Cn(e.dirtyFields,F),e.isDirty=Y.defaultValue?q(F,Di(Re(s,F))):q()),Y.keepError||(Cn(e.errors,F),h.isValid&&C()),f.state.next({...e}))},rs=(F,Y={})=>{const te=F?Di(F):s,ye=Di(te),be=yi(F),he=be?s:ye;if(Y.keepDefaultValues||(s=te),!Y.keepValues){if(Y.keepDirtyValues){const Me=new Set([...a.mount,...Object.keys(xd(s,r))]);for(const Qe of Array.from(Me))Re(e.dirtyFields,Qe)?Ut(he,Qe,Re(r,Qe)):pe(Qe,Re(he,Qe))}else{if(sE&&pn(F))for(const Me of a.mount){const Qe=Re(n,Me);if(Qe&&Qe._f){const pt=Array.isArray(Qe._f.refs)?Qe._f.refs[0]:Qe._f.ref;if(op(pt)){const ht=pt.closest("form");if(ht){ht.reset();break}}}}n={}}r=t.shouldUnregister?Y.keepDefaultValues?Di(s):{}:Di(he),f.array.next({values:{...he}}),f.values.next({values:{...he}})}a={mount:Y.keepDirtyValues?a.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!h.isValid||!!Y.keepIsValid||!!Y.keepDirtyValues,o.watch=!!t.shouldUnregister,f.state.next({submitCount:Y.keepSubmitCount?e.submitCount:0,isDirty:be?!1:Y.keepDirty?e.isDirty:!!(Y.keepDefaultValues&&!sa(F,s)),isSubmitted:Y.keepIsSubmitted?e.isSubmitted:!1,dirtyFields:be?{}:Y.keepDirtyValues?Y.keepDefaultValues&&r?xd(s,r):e.dirtyFields:Y.keepDefaultValues&&F?xd(s,F):Y.keepDirty?e.dirtyFields:{},touchedFields:Y.keepTouched?e.touchedFields:{},errors:Y.keepErrors?e.errors:{},isSubmitSuccessful:Y.keepIsSubmitSuccessful?e.isSubmitSuccessful:!1,isSubmitting:!1})},Wn=(F,Y)=>rs(yr(F)?F(r):F,Y);return{control:{register:Je,unregister:ze,getFieldState:ie,handleSubmit:Zt,setError:Be,_executeSchema:L,_getWatch:ee,_getDirty:q,_updateValid:C,_removeUnmounted:U,_updateFieldArray:T,_updateDisabledField:st,_getFieldArray:me,_reset:rs,_resetDefaultValues:()=>yr(t.defaultValues)&&t.defaultValues().then(F=>{Wn(F,t.resetOptions),f.state.next({isLoading:!1})}),_updateFormState:F=>{e={...e,...F}},_disableForm:ut,_subjects:f,_proxyFormState:h,_setErrors:S,get _fields(){return n},get _formValues(){return r},get _state(){return o},set _state(F){o=F},get _defaultValues(){return s},get _names(){return a},set _names(F){a=F},get _formState(){return e},set _formState(F){e=F},get _options(){return t},set _options(F){t={...t,...F}}},trigger:re,register:Je,handleSubmit:Zt,watch:je,setValue:pe,getValues:j,reset:Wn,resetField:kn,clearErrors:Ve,unregister:ze,setError:Be,setFocus:(F,Y={})=>{const te=Re(n,F),ye=te&&te._f;if(ye){const be=ye.refs?ye.refs[0]:ye.ref;be.focus&&(be.focus(),Y.shouldSelect&&yr(be.select)&&be.select())}},getFieldState:ie}}function cf(i={}){const t=Ke.useRef(void 0),e=Ke.useRef(void 0),[n,s]=Ke.useState({isDirty:!1,isValidating:!1,isLoading:yr(i.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:i.errors||{},disabled:i.disabled||!1,defaultValues:yr(i.defaultValues)?void 0:i.defaultValues});t.current||(t.current={...Fq(i),formState:n});const r=t.current.control;return r._options=i,RO({subject:r._subjects.state,next:o=>{Tq(o,r._proxyFormState,r._updateFormState)&&s({...r._formState})}}),Ke.useEffect(()=>r._disableForm(i.disabled),[r,i.disabled]),Ke.useEffect(()=>{if(r._proxyFormState.isDirty){const o=r._getDirty();o!==n.isDirty&&r._subjects.state.next({isDirty:o})}},[r,n.isDirty]),Ke.useEffect(()=>{i.values&&!sa(i.values,e.current)?(r._reset(i.values,r._options.resetOptions),e.current=i.values,s(o=>({...o}))):r._resetDefaultValues()},[i.values,r]),Ke.useEffect(()=>{i.errors&&r._setErrors(i.errors)},[i.errors,r]),Ke.useEffect(()=>{r._state.mount||(r._updateValid(),r._state.mount=!0),r._state.watch&&(r._state.watch=!1,r._subjects.state.next({...r._formState})),r._removeUnmounted()}),Ke.useEffect(()=>{i.shouldUnregister&&r._subjects.values.next({values:r._getWatch()})},[i.shouldUnregister,r]),t.current.formState=kq(n,r),t.current}const Ws=R.memo(({id:i,label:t,children:e,isRequired:n=!1,errors:s})=>{const r=i.includes(".")?i.split(".").reduce((o,a)=>o==null?void 0:o[a],s):s==null?void 0:s[i];return v.jsxs(v.Fragment,{children:[v.jsxs("label",{htmlFor:i,className:"form-label d-block mb-1",children:[t,n&&v.jsx("span",{className:"text-danger ms-1",children:"*"})]}),e,r&&v.jsx("small",{className:"text-danger",children:String(r==null?void 0:r.message)})]})}),Ti=R.memo(({id:i,label:t,type:e="text",placeholder:n="請輸入內容",register:s,rules:r,errors:o})=>{const a=i.includes(".")?i.split(".").reduce((l,u)=>l==null?void 0:l[u],o):o==null?void 0:o[i];return v.jsx(v.Fragment,{children:v.jsx(Ws,{id:i,label:t,isRequired:!!r,errors:o,children:v.jsx("input",{id:i,type:e,placeholder:n,className:`form-control ${a&&"is-invalid"}`,...s(i,r)})})})}),jc=R.memo(({id:i,label:t,rows:e=3,placeholder:n="請輸入內容",register:s,rules:r,errors:o})=>v.jsx(v.Fragment,{children:v.jsx(Ws,{id:i,label:t,isRequired:!!r,errors:o,children:v.jsx("textarea",{rows:e,id:i,placeholder:n,className:`form-control ${o[i]&&"is-invalid"}`,...s(i,r)})})})),$q={BASE_URL:"/react-and-bloom/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_BASE:"https://ec-course-api.hexschool.io/v2",VITE_API_PATH:"and-bloom"},{VITE_API_BASE:zq,VITE_API_PATH:jq}=$q,eA={create_at:"",id:"",is_paid:!1,message:"",products:{},user:{address:"",email:"",name:"",tel:""},num:0,total:0,remark:""},Hq=R.forwardRef(({selectedOrder:i,getOrders:t},e)=>{const n=vn(),s=R.useRef(null),r=R.useRef(null),{register:o,handleSubmit:a,watch:l,getValues:u,setValue:h,reset:f,control:g,formState:{errors:p}}=cf({mode:"onTouched",defaultValues:eA}),[y,E,C,k,T,P,S,O]=l(["id","products","user","total","message","is_paid","coupon","discount"]);R.useEffect(()=>{s.current&&(r.current=new Js(s.current))},[]);const A=async N=>{var L,M,B;try{n(Xe(!0));const U=document.cookie.replace(/(?:(?:^|.*;\s*)andBloom\s*=\s*([^;]*).*$)|^.*$/,"$1");Le.defaults.headers.common.Authorization=U;const q=await Le.put(`${zq}/api/${jq}/admin/order/${i==null?void 0:i.id}`,{data:N});t(),(L=r.current)==null||L.hide(),n(en({text:q==null?void 0:q.data.message,type:"success"}))}catch(U){U instanceof St&&(console.log((M=U==null?void 0:U.response)==null?void 0:M.data.message),n(en({text:(B=U==null?void 0:U.response)==null?void 0:B.data.message,type:"danger"})))}finally{n(Xe(!1))}};return R.useEffect(()=>{const N=s.current,L=()=>{f(eA)};return N==null||N.addEventListener("hidden.bs.modal",L),()=>N==null?void 0:N.removeEventListener("hidden.bs.modal",L)},[s,f]),R.useEffect(()=>{const N=s.current,L=()=>{i&&f(i)};return N==null||N.addEventListener("shown.bs.modal",L),()=>N==null?void 0:N.removeEventListener("shown.bs.modal",L)},[i,s,f]),R.useImperativeHandle(e,()=>({show:()=>{var N;(N=r.current)==null||N.show()},hide:()=>{var N;(N=r.current)==null||N.hide()}})),v.jsx("div",{className:"modal fade","data-bs-backdrop":"static",tabIndex:-1,ref:s,children:v.jsx("div",{className:"modal-dialog modal-lg",children:v.jsxs("div",{className:"modal-content",children:[v.jsxs("div",{className:"modal-header",children:[v.jsx("h2",{className:"modal-title fs-5",children:"編輯訂單"}),v.jsx("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),v.jsxs("form",{onSubmit:a(A),children:[v.jsx("div",{className:"modal-body",children:v.jsxs("div",{className:"row",children:[v.jsxs("div",{className:"col-md-6 mb-3",children:[v.jsx("label",{className:"form-label d-block mb-1",children:"訂購者"}),v.jsx("input",{type:"text",className:"form-control-plaintext",value:C.name,readOnly:!0})]}),v.jsxs("div",{className:"col-md-6 mb-3",children:[v.jsx("label",{className:"form-label d-block mb-1",children:"Email"}),v.jsx("input",{type:"email",className:"form-control-plaintext",value:C.email,readOnly:!0})]}),v.jsx("div",{className:"col-md-6 mb-3",children:v.jsx(Ti,{id:"user.tel",label:"訂購者電話",type:"tel",placeholder:"請輸入訂購者電話",register:o,errors:p,rules:{required:"電話必填",minLength:{value:8,message:"電話不少於 8 碼"},maxLength:{value:12,message:"電話不大於 12 碼"},pattern:{value:/^[0-9]*$/,message:"電話需為數字"}}})}),v.jsx("div",{className:"col-md-6 mb-4",children:v.jsx(Ti,{id:"user.address",label:"收件地址",type:"text",placeholder:"請輸入收件地址",register:o,errors:p,rules:{required:"收件地址必填"}})}),v.jsxs("div",{className:"mb-3",children:[v.jsx("label",{className:"form-label d-block mb-1",children:"訂購品項"}),v.jsxs("div",{className:"row gx-2 text-dark",children:[v.jsx("div",{className:"col-4",children:v.jsx("small",{className:"d-block p-1 my-1 border-bottom",children:"產品名稱"})}),v.jsx("div",{className:"col-2",children:v.jsx("small",{className:"d-block p-1 my-1 border-bottom",children:"數量"})}),v.jsx("div",{className:"col-3",children:v.jsx("small",{className:"d-block p-1 my-1 border-bottom",children:"單價"})}),v.jsx("div",{className:"col-3",children:v.jsx("small",{className:"d-block p-1 my-1 border-bottom",children:"小計"})})]}),Object.values(E).map(N=>v.jsxs("div",{className:"row gx-2",children:[v.jsx("div",{className:"col-4",children:v.jsx("div",{className:"p-1 my-1 border-bottom",children:N.product.title})}),v.jsx("div",{className:"col-2",children:v.jsx("div",{className:"p-1 my-1 border-bottom",children:N.qty})}),v.jsx("div",{className:"col-3",children:v.jsxs("div",{className:"p-1 my-1 border-bottom",children:["$",N.product.price]})}),v.jsx("div",{className:"col-3",children:v.jsxs("div",{className:"p-1 my-1 border-bottom",children:["$",N.total]})})]},`modal-${y}-${N.id}`)),S?v.jsxs("div",{className:"row gx-2",children:[v.jsx("div",{className:"col-9",children:v.jsxs("div",{className:"d-block p-1 my-1 border-bottom",children:["優惠券折扣",`（${S.title} ${S.percent} 折）`]})}),v.jsx("div",{className:"col-3",children:v.jsxs("div",{className:"d-block p-1 my-1 border-bottom text-danger",children:["-$",O]})})]}):"",v.jsxs("div",{className:"row gx-2 fw-bold",children:[v.jsx("div",{className:"col-9",children:v.jsx("div",{className:"d-block p-1 my-1 border-bottom",children:"總金額"})}),v.jsx("div",{className:"col-3",children:v.jsxs("div",{className:"d-block p-1 my-1 border-bottom",children:["$",k]})})]})]}),v.jsx("div",{className:"mb-3",children:v.jsx(Ws,{id:"is_paid",label:"是否付款",errors:p,children:v.jsxs("div",{className:`d-block ${p.is_paid&&"is-invalid"}`,role:"group",children:[v.jsx("input",{type:"checkbox",className:"btn-check",id:"paid",...o("is_paid")}),v.jsx("label",{className:`btn px-4 ${P?"btn-success":"btn-danger"}`,htmlFor:"paid",children:P?"已付款":"未付款"})]})})}),v.jsxs("div",{className:"mb-3",children:[v.jsx("label",{className:"form-label d-block mb-1",children:"訂單留言"}),v.jsx("textarea",{className:"form-control",rows:3,value:T,readOnly:!0,disabled:!0})]}),v.jsx("div",{className:"mb-3",children:v.jsx(jc,{id:"rematk",label:"管理者備註",placeholder:"請輸入管理者備註",register:o,errors:p})})]})}),v.jsxs("div",{className:"modal-footer",children:[v.jsx(qt,{btnStyle:"btn btn-outline-secondary px-4","data-bs-dismiss":"modal",children:"取消"}),v.jsx(qt,{type:"submit",btnStyle:"btn btn-secondary px-4",children:"儲存"})]})]})]})})})}),Uq=R.memo(Hq),Su=R.memo(({currentPage:i,totalPages:t=0,setCurrentPage:e})=>{let n=[];return t===0?n=[1]:t<=5?n=[...Array(t)].map((s,r)=>r+1):i<=4?n=[1,2,3,4,5,"...",t]:i>=t-3?n=[1,"...",...[...Array(5)].map((s,r)=>t-(4-r))]:n=[1,"...",...[...Array(3)].map((s,r)=>i-1+r),"...",t],v.jsx(v.Fragment,{children:v.jsx("nav",{"aria-label":"pagination navigation",children:v.jsxs("ul",{className:"pagination align-items-center",children:[v.jsx("li",{className:`page-item ${i===1?"disabled":""}`,children:v.jsx("span",{className:"page-link border-0 page-link-prev","aria-label":"Previous",onClick:()=>e(i-1),children:v.jsxs("span",{children:[v.jsx("i",{className:"bi bi-arrow-left-short"}),v.jsx("span",{className:"d-none d-sm-inline-block ms-1",children:"上一頁"})]})})}),n.map((s,r)=>v.jsx("li",{className:`page-item ${i===s?"active":""} ${s==="..."?"disabled":""}`,children:v.jsx("span",{className:"page-link border-0 rounded-3",onClick:()=>e(s),children:s})},`page_${r}`)),v.jsx("li",{className:`page-item ${i===t?"disabled":""}`,children:v.jsx("span",{className:"page-link border-0 page-link-next","aria-label":"Next",onClick:()=>e(i+1),children:v.jsxs("span",{children:[v.jsx("span",{className:"d-none d-sm-inline-block me-1",children:"下一頁"}),v.jsx("i",{className:"bi bi-arrow-right-short"})]})})})]})})})}),Wq={BASE_URL:"/react-and-bloom/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_BASE:"https://ec-course-api.hexschool.io/v2",VITE_API_PATH:"and-bloom"},{VITE_API_BASE:tA,VITE_API_PATH:nA}=Wq,qq=()=>{const i=vn(),[t,e]=R.useState([]),[n,s]=R.useState(1),[r,o]=R.useState(1),[a,l]=R.useState(null),u=R.useRef(null),h=R.useRef(null),f=R.useCallback(async()=>{var E,C,k;try{i(Xe(!0));const T=document.cookie.replace(/(?:(?:^|.*;\s*)andBloom\s*=\s*([^;]*).*$)|^.*$/,"$1");Le.defaults.headers.common.Authorization=T;const P=await Le.get(`${tA}/api/${nA}/admin/orders?page=${n}`);e(P.data.orders),o((E=P.data.pagination)==null?void 0:E.total_pages),s((C=P.data.pagination)==null?void 0:C.current_page)}catch(T){T instanceof St&&console.log((k=T==null?void 0:T.response)==null?void 0:k.data.message)}finally{i(Xe(!1))}},[n,i]);R.useEffect(()=>{f()},[f]);const g=R.useCallback(()=>{var E;(E=u.current)==null||E.show()},[]),p=R.useCallback(()=>{var E;(E=h.current)==null||E.show()},[]),y=R.useCallback(async E=>{var C,k,T;if(E)try{i(Xe(!0));const P=await Le.delete(`${tA}/api/${nA}/admin/order/${E}`);i(en({text:P==null?void 0:P.data.message,type:"success"})),f(),l(null),(C=h.current)==null||C.hide()}catch(P){P instanceof St&&(console.log((k=P==null?void 0:P.response)==null?void 0:k.data.message),i(en({text:(T=P==null?void 0:P.response)==null?void 0:T.data.message,type:"danger"})),l(null))}finally{i(Xe(!1))}},[i,f]);return v.jsxs(v.Fragment,{children:[v.jsx("div",{className:"d-flex justify-content-between align-items-center pb-3 mb-3 border-bottom",children:v.jsx("h3",{className:"mb-0",children:"訂單列表"})}),t.length?v.jsxs(v.Fragment,{children:[t.map(E=>v.jsx(wq,{showModal:g,setSelectedOrder:l,showAlertModal:p,order:E},E.id)),v.jsx("div",{className:"d-flex justify-content-center my-5",children:v.jsx(Su,{currentPage:n,totalPages:r,setCurrentPage:s})})]}):v.jsx("p",{className:"text-center",children:"尚無訂單"}),v.jsx(Uq,{ref:u,selectedOrder:a,getOrders:f}),v.jsx(af,{ref:h,nextFn:()=>y((a==null?void 0:a.id)||""),children:v.jsx("p",{className:"text-center py-4",children:"刪除後無法復原，您確定刪除該筆訂單嗎？"})})]})},Gq=mt.div`
  width: 80px;
  height: 80px;
`,Kq=mt("li")`
  margin-top: -1px;
  &:hover {
    background-color: #f8f9fa;
    z-index: 1000;
    border-color: rgba(0, 0, 0, 0.3);
  }
`,Yq=R.memo(({showModal:i,product:t,setSelectedProduct:e,showAlertModal:n})=>{const{title:s,price:r,origin_price:o,is_enabled:a,category:l}=t,u=R.useCallback(f=>{e(f),i()},[i,e]),h=R.useCallback(f=>{e(f),n()},[n,e]);return v.jsx(Kq,{className:"card mb-3",children:v.jsx("div",{className:"card-body",children:v.jsxs("div",{className:"row w-100 justify-content-between align-items-center",children:[v.jsx("div",{className:"col-auto",children:v.jsx(Gq,{className:"image-container rounded-circle overflow-hidden border",children:v.jsx("img",{src:t.imageUrl,alt:s,className:"w-100 h-100 object-fit-cover"})})}),v.jsxs("div",{className:"col-md-4",children:[v.jsx("span",{className:"badge rounded-pill bg-primary fs-sm mb-2",children:l}),v.jsx("h6",{className:"mt-1 mb-2",children:s})]}),v.jsxs("div",{className:"col-md d-flex justify-content-center align-items-center",children:[v.jsxs("p",{className:"mb-0 me-2",children:["$ ",r]}),v.jsxs("small",{className:"text-muted text-decoration-line-through",children:["$ ",o]})]}),v.jsx("div",{className:"col-md d-flex justify-content-center",children:v.jsx(pb,{isEnabled:a})}),v.jsxs("div",{className:"col-md d-flex align-items-center justify-content-end",children:[v.jsx(qt,{btnStyle:"btn-sm btn-secondary",handleClick:()=>u(t),children:"編輯"}),v.jsx(qt,{btnStyle:"btn-sm btn-outline-primary ms-2",handleClick:()=>h(t),children:"刪除"})]})]})})})}),Zq={BASE_URL:"/react-and-bloom/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_BASE:"https://ec-course-api.hexschool.io/v2",VITE_API_PATH:"and-bloom"},{VITE_API_BASE:iA,VITE_API_PATH:sA}=Zq,Xq=mt("div")`
  right: 5px;
  top: 0;
  cursor: pointer;
`,rA={title:"",category:"",unit:"",origin_price:null,price:null,description:"",content:"",is_enabled:1,imageUrl:"",imagesUrl:[],petCareNotes:"",floriography:""},Jq=R.forwardRef(({selectedProduct:i,getProducts:t},e)=>{const n=vn(),[s,r]=R.useState(""),o=R.useRef(null),a=R.useRef(null),{register:l,handleSubmit:u,watch:h,getValues:f,setValue:g,reset:p,control:y,formState:{errors:E}}=cf({mode:"onTouched",defaultValues:rA});R.useEffect(()=>{o.current&&(a.current=new Js(o.current))},[]);const[C,k,T]=oE({control:y,name:["imageUrl","imagesUrl","is_enabled"]}),P=async(A,N)=>{var B,U,q;const L=(B=A.target.files)==null?void 0:B[0],M=new FormData;if(L){M.append("file-to-upload",L),A.target.files=new DataTransfer().files;try{r(N);const ee=document.cookie.replace(/(?:(?:^|.*;\s*)andBloom\s*=\s*([^;]*).*$)|^.*$/,"$1");Le.defaults.headers.common.Authorization=ee;const me=await Le.post(`${iA}/api/${sA}/admin/upload`,M,{headers:{"Content-Type":"multipart/form-data"}});N==="imageUrl"?g("imageUrl",me.data.imageUrl,{shouldValidate:!0}):g("imagesUrl",[...k,me.data.imageUrl],{shouldValidate:!0})}catch(ee){ee instanceof St&&(console.log((U=ee==null?void 0:ee.response)==null?void 0:U.data.message),n(en({text:(q=ee==null?void 0:ee.response)==null?void 0:q.data.message,type:"danger"})))}finally{r("")}}},S=A=>{const N=[...k];N.splice(A,1),g("imagesUrl",N)},O=async A=>{var N,L,M;try{n(Xe(!0));const B=document.cookie.replace(/(?:(?:^|.*;\s*)andBloom\s*=\s*([^;]*).*$)|^.*$/,"$1");Le.defaults.headers.common.Authorization=B;const U=await Le[i?"put":"post"](`${iA}/api/${sA}/admin/product${i?`/${i.id}`:""}`,{data:A});t(),(N=a.current)==null||N.hide(),n(en({text:U==null?void 0:U.data.message,type:"success"}))}catch(B){B instanceof St&&(console.log((L=B==null?void 0:B.response)==null?void 0:L.data.message),n(en({text:(M=B==null?void 0:B.response)==null?void 0:M.data.message,type:"danger"})))}finally{n(Xe(!1))}};return R.useEffect(()=>{const A=o.current,N=()=>{p(rA)};return A==null||A.addEventListener("hidden.bs.modal",N),()=>A==null?void 0:A.removeEventListener("hidden.bs.modal",N)},[o,p]),R.useEffect(()=>{const A=o.current,N=()=>{i&&p(i)};return A==null||A.addEventListener("shown.bs.modal",N),()=>A==null?void 0:A.removeEventListener("shown.bs.modal",N)},[i,o,p]),R.useImperativeHandle(e,()=>({show:()=>{var A;(A=a.current)==null||A.show()},hide:()=>{var A;(A=a.current)==null||A.hide()}})),v.jsx("div",{className:"modal fade","data-bs-backdrop":"static",tabIndex:-1,ref:o,children:v.jsx("div",{className:"modal-dialog modal-lg",children:v.jsxs("div",{className:"modal-content",children:[v.jsxs("div",{className:"modal-header",children:[v.jsx("h2",{className:"modal-title fs-5",children:i?"編輯產品":"新增產品"}),v.jsx("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),v.jsxs("form",{onSubmit:u(O),children:[v.jsx("div",{className:"modal-body",children:v.jsxs("div",{className:"row",children:[v.jsx("div",{className:"mb-3",children:v.jsx(Ti,{id:"title",label:"產品名稱",type:"text",placeholder:"請輸入名稱",register:l,errors:E,rules:{required:"產品名稱必填"}})}),v.jsx("div",{className:"col-md-6 mb-3",children:v.jsx(Ti,{id:"category",label:"分類",type:"text",placeholder:"請輸入分類",register:l,errors:E,rules:{required:"分類必填"}})}),v.jsx("div",{className:"col-md-6 mb-3",children:v.jsx(Ti,{id:"unit",label:"單位",type:"text",placeholder:"請輸入單位",register:l,errors:E,rules:{required:"單位必填"}})}),v.jsx("div",{className:"col-md-6 mb-3",children:v.jsx(Ti,{id:"origin_price",label:"原價",type:"number",placeholder:"請輸入原價",register:l,errors:E,rules:{required:"原價必填",min:{value:0,message:"價格需大於 0"},valueAsNumber:!0}})}),v.jsx("div",{className:"col-md-6 mb-3",children:v.jsx(Ti,{id:"price",label:"售價",type:"number",placeholder:"請輸入售價",register:l,errors:E,rules:{required:"售價必填",min:{value:0,message:"價格需大於 0"},valueAsNumber:!0,validate:A=>Number(A)<=Number(f().origin_price)||"售價必須小於等於原價"}})}),v.jsx("div",{className:"mb-3",children:v.jsx(jc,{id:"description",label:"產品描述",placeholder:"請輸入產品描述",register:l,errors:E})}),v.jsx("div",{className:"mb-3",children:v.jsx(jc,{id:"content",label:"說明內容",placeholder:"請輸入說明內容",register:l,errors:E})}),v.jsx("div",{className:"mb-3",children:v.jsx(jc,{id:"petCareNotes",label:"寵物注意事項",placeholder:"請輸入注意事項",register:l,errors:E})}),v.jsx("div",{className:"mb-3",children:v.jsx(jc,{id:"floriography",label:"花語",placeholder:"請輸入花語",register:l,errors:E})}),v.jsx("div",{className:"mb-3",children:v.jsx(Ws,{id:"is_enabled",label:"是否啟用",errors:E,children:v.jsxs("div",{className:`d-block ${E.is_enabled&&"is-invalid"}`,role:"group",children:[v.jsx("input",{type:"checkbox",className:"btn-check",id:"enabled",...l("is_enabled")}),v.jsx("label",{className:`btn px-4 ${T?"btn-success":"btn-danger"}`,htmlFor:"enabled",children:T?"啟用":"停用"})]})})}),v.jsx("div",{className:"col-md-6 mb-3",children:v.jsxs(Ws,{id:"imageUrl",label:"主圖",isRequired:!0,errors:E,children:[v.jsxs("div",{children:[v.jsx("input",{id:"mainImage",type:"file",className:"form-control d-none",disabled:!!s,onChange:A=>P(A,"imageUrl")}),v.jsxs("label",{className:`btn btn-primary ${s&&"opacity-50"}`,htmlFor:"mainImage",children:[s==="imageUrl"&&v.jsx("span",{className:"spinner-grow spinner-grow-sm me-2"}),"上傳圖片"]})]}),C&&v.jsx("img",{src:C,alt:"主圖",className:"img-fluid mt-3"}),v.jsx("input",{id:"imageUrl",className:`form-control-sm form-control-plaintext ${C?"":"d-none"}`,readOnly:!0,...l("imageUrl",{required:"請上傳主圖"})})]})}),v.jsx("div",{className:"col-md-6 mb-3",children:v.jsxs(Ws,{id:"imagesUrl",label:"副圖（最多三張）",errors:E,children:[v.jsxs("div",{children:[v.jsx("input",{id:"subImages",type:"file",className:"form-control d-none",disabled:(k==null?void 0:k.length)>=3||!!s,onChange:A=>P(A,"imagesUrl")}),v.jsxs("label",{className:`btn btn-primary ${((k==null?void 0:k.length)>=3||!!s)&&"opacity-50"}`,htmlFor:"subImages",children:[s==="imagesUrl"&&v.jsx("span",{className:"spinner-grow spinner-grow-sm me-2"}),"上傳圖片"]})]}),(k==null?void 0:k.length)>0&&k.map((A,N)=>v.jsxs("div",{className:"position-relative mt-3 mb-2",children:[v.jsx("img",{src:A,alt:"副圖",className:"img-fluid"}),v.jsx("input",{type:"text",className:"form-control-sm form-control-plaintext",value:A,readOnly:!0}),v.jsx(Xq,{className:"position-absolute bi bi-x fs-2",onClick:()=>S(N)})]},N))]})})]})}),v.jsxs("div",{className:"modal-footer",children:[v.jsx(qt,{btnStyle:"btn btn-outline-secondary px-4","data-bs-dismiss":"modal",children:"取消"}),v.jsx(qt,{type:"submit",btnStyle:"btn btn-secondary px-4",children:"儲存"})]})]})]})})})}),Qq=R.memo(Jq),eG={BASE_URL:"/react-and-bloom/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_BASE:"https://ec-course-api.hexschool.io/v2",VITE_API_PATH:"and-bloom"},{VITE_API_BASE:oA,VITE_API_PATH:aA}=eG,tG=()=>{const i=vn(),[t,e]=R.useState([]),[n,s]=R.useState(1),[r,o]=R.useState(1),[a,l]=R.useState(null),u=R.useRef(null),h=R.useRef(null),f=R.useCallback(async()=>{var C,k,T;try{i(Xe(!0));const P=document.cookie.replace(/(?:(?:^|.*;\s*)andBloom\s*=\s*([^;]*).*$)|^.*$/,"$1");Le.defaults.headers.common.Authorization=P;const S=await Le.get(`${oA}/api/${aA}/admin/products?page=${n}`);e(S.data.products),o((C=S.data.pagination)==null?void 0:C.total_pages),s((k=S.data.pagination)==null?void 0:k.current_page)}catch(P){P instanceof St&&console.log((T=P==null?void 0:P.response)==null?void 0:T.data.message)}finally{i(Xe(!1))}},[n,i]);R.useEffect(()=>{f()},[f]);const g=R.useCallback(()=>{var C;(C=u.current)==null||C.show()},[]),p=R.useCallback(()=>{var C;(C=h.current)==null||C.show()},[]),y=R.useCallback(()=>{l(null),g()},[g]),E=R.useCallback(async C=>{var k,T,P;if(C)try{i(Xe(!0));const S=await Le.delete(`${oA}/api/${aA}/admin/product/${C}`);i(en({text:S==null?void 0:S.data.message,type:"success"})),f(),(k=h.current)==null||k.hide()}catch(S){S instanceof St&&(console.log((T=S==null?void 0:S.response)==null?void 0:T.data.message),i(en({text:(P=S==null?void 0:S.response)==null?void 0:P.data.message,type:"danger"})))}finally{i(Xe(!1)),l(null)}},[i,f]);return v.jsxs(v.Fragment,{children:[v.jsxs("div",{className:"d-flex justify-content-between align-items-center pb-3 mb-3 border-bottom",children:[v.jsx("h3",{className:"mb-0",children:"產品列表"}),v.jsx(qt,{btnStyle:"btn-sm btn-secondary",handleClick:y,children:"新增"})]}),t.length?v.jsxs(v.Fragment,{children:[t.map(C=>v.jsx(Yq,{showModal:g,setSelectedProduct:l,showAlertModal:p,product:C},C.id)),v.jsx("div",{className:"d-flex justify-content-center my-5",children:v.jsx(Su,{currentPage:n,totalPages:r,setCurrentPage:s})})]}):v.jsx("p",{className:"text-center",children:"尚無產品，請新增產品"}),v.jsx(Qq,{ref:u,selectedProduct:a,getProducts:f}),v.jsx(af,{ref:h,nextFn:()=>E((a==null?void 0:a.id)||""),children:v.jsxs("p",{className:"text-center py-4",children:["刪除後無法復原，您確定刪除",v.jsx("strong",{children:a==null?void 0:a.title}),"嗎？"]})})]})};function lA(i){return i!==null&&typeof i=="object"&&"constructor"in i&&i.constructor===Object}function cE(i,t){i===void 0&&(i={}),t===void 0&&(t={});const e=["__proto__","constructor","prototype"];Object.keys(t).filter(n=>e.indexOf(n)<0).forEach(n=>{typeof i[n]>"u"?i[n]=t[n]:lA(t[n])&&lA(i[n])&&Object.keys(t[n]).length>0&&cE(i[n],t[n])})}const FO={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector(){return null},querySelectorAll(){return[]},getElementById(){return null},createEvent(){return{initEvent(){}}},createElement(){return{children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName(){return[]}}},createElementNS(){return{}},importNode(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function Ca(){const i=typeof document<"u"?document:{};return cE(i,FO),i}const nG={document:FO,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle(){return{getPropertyValue(){return""}}},Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia(){return{}},requestAnimationFrame(i){return typeof setTimeout>"u"?(i(),null):setTimeout(i,0)},cancelAnimationFrame(i){typeof setTimeout>"u"||clearTimeout(i)}};function di(){const i=typeof window<"u"?window:{};return cE(i,nG),i}function iG(i){return i===void 0&&(i=""),i.trim().split(" ").filter(t=>!!t.trim())}function sG(i){const t=i;Object.keys(t).forEach(e=>{try{t[e]=null}catch{}try{delete t[e]}catch{}})}function oy(i,t){return t===void 0&&(t=0),setTimeout(i,t)}function cl(){return Date.now()}function rG(i){const t=di();let e;return t.getComputedStyle&&(e=t.getComputedStyle(i,null)),!e&&i.currentStyle&&(e=i.currentStyle),e||(e=i.style),e}function oG(i,t){t===void 0&&(t="x");const e=di();let n,s,r;const o=rG(i);return e.WebKitCSSMatrix?(s=o.transform||o.webkitTransform,s.split(",").length>6&&(s=s.split(", ").map(a=>a.replace(",",".")).join(", ")),r=new e.WebKitCSSMatrix(s==="none"?"":s)):(r=o.MozTransform||o.OTransform||o.MsTransform||o.msTransform||o.transform||o.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),n=r.toString().split(",")),t==="x"&&(e.WebKitCSSMatrix?s=r.m41:n.length===16?s=parseFloat(n[12]):s=parseFloat(n[4])),t==="y"&&(e.WebKitCSSMatrix?s=r.m42:n.length===16?s=parseFloat(n[13]):s=parseFloat(n[5])),s||0}function Hd(i){return typeof i=="object"&&i!==null&&i.constructor&&Object.prototype.toString.call(i).slice(8,-1)==="Object"}function aG(i){return typeof window<"u"&&typeof window.HTMLElement<"u"?i instanceof HTMLElement:i&&(i.nodeType===1||i.nodeType===11)}function zi(){const i=Object(arguments.length<=0?void 0:arguments[0]),t=["__proto__","constructor","prototype"];for(let e=1;e<arguments.length;e+=1){const n=e<0||arguments.length<=e?void 0:arguments[e];if(n!=null&&!aG(n)){const s=Object.keys(Object(n)).filter(r=>t.indexOf(r)<0);for(let r=0,o=s.length;r<o;r+=1){const a=s[r],l=Object.getOwnPropertyDescriptor(n,a);l!==void 0&&l.enumerable&&(Hd(i[a])&&Hd(n[a])?n[a].__swiper__?i[a]=n[a]:zi(i[a],n[a]):!Hd(i[a])&&Hd(n[a])?(i[a]={},n[a].__swiper__?i[a]=n[a]:zi(i[a],n[a])):i[a]=n[a])}}}return i}function Um(i,t,e){i.style.setProperty(t,e)}function $O(i){let{swiper:t,targetPosition:e,side:n}=i;const s=di(),r=-t.translate;let o=null,a;const l=t.params.speed;t.wrapperEl.style.scrollSnapType="none",s.cancelAnimationFrame(t.cssModeFrameID);const u=e>r?"next":"prev",h=(g,p)=>u==="next"&&g>=p||u==="prev"&&g<=p,f=()=>{a=new Date().getTime(),o===null&&(o=a);const g=Math.max(Math.min((a-o)/l,1),0),p=.5-Math.cos(g*Math.PI)/2;let y=r+p*(e-r);if(h(y,e)&&(y=e),t.wrapperEl.scrollTo({[n]:y}),h(y,e)){t.wrapperEl.style.overflow="hidden",t.wrapperEl.style.scrollSnapType="",setTimeout(()=>{t.wrapperEl.style.overflow="",t.wrapperEl.scrollTo({[n]:y})}),s.cancelAnimationFrame(t.cssModeFrameID);return}t.cssModeFrameID=s.requestAnimationFrame(f)};f()}function qs(i,t){t===void 0&&(t="");const e=di(),n=[...i.children];return e.HTMLSlotElement&&i instanceof HTMLSlotElement&&n.push(...i.assignedElements()),t?n.filter(s=>s.matches(t)):n}function lG(i,t){const e=[t];for(;e.length>0;){const n=e.shift();if(i===n)return!0;e.push(...n.children,...n.shadowRoot?n.shadowRoot.children:[],...n.assignedElements?n.assignedElements():[])}}function cG(i,t){const e=di();let n=t.contains(i);return!n&&e.HTMLSlotElement&&t instanceof HTMLSlotElement&&(n=[...t.assignedElements()].includes(i),n||(n=lG(i,t))),n}function cp(i){try{console.warn(i);return}catch{}}function up(i,t){t===void 0&&(t=[]);const e=document.createElement(i);return e.classList.add(...Array.isArray(t)?t:iG(t)),e}function uG(i,t){const e=[];for(;i.previousElementSibling;){const n=i.previousElementSibling;t?n.matches(t)&&e.push(n):e.push(n),i=n}return e}function dG(i,t){const e=[];for(;i.nextElementSibling;){const n=i.nextElementSibling;t?n.matches(t)&&e.push(n):e.push(n),i=n}return e}function aa(i,t){return di().getComputedStyle(i,null).getPropertyValue(t)}function cA(i){let t=i,e;if(t){for(e=0;(t=t.previousSibling)!==null;)t.nodeType===1&&(e+=1);return e}}function hG(i,t){const e=[];let n=i.parentElement;for(;n;)e.push(n),n=n.parentElement;return e}function y0(i,t){function e(n){n.target===i&&(t.call(i,n),i.removeEventListener("transitionend",e))}t&&i.addEventListener("transitionend",e)}function uA(i,t,e){const n=di();return i[t==="width"?"offsetWidth":"offsetHeight"]+parseFloat(n.getComputedStyle(i,null).getPropertyValue(t==="width"?"margin-right":"margin-top"))+parseFloat(n.getComputedStyle(i,null).getPropertyValue(t==="width"?"margin-left":"margin-bottom"))}function Wr(i){return(Array.isArray(i)?i:[i]).filter(t=>!!t)}let _0;function fG(){const i=di(),t=Ca();return{smoothScroll:t.documentElement&&t.documentElement.style&&"scrollBehavior"in t.documentElement.style,touch:!!("ontouchstart"in i||i.DocumentTouch&&t instanceof i.DocumentTouch)}}function zO(){return _0||(_0=fG()),_0}let E0;function mG(i){let{userAgent:t}=i===void 0?{}:i;const e=zO(),n=di(),s=n.navigator.platform,r=t||n.navigator.userAgent,o={ios:!1,android:!1},a=n.screen.width,l=n.screen.height,u=r.match(/(Android);?[\s\/]+([\d.]+)?/);let h=r.match(/(iPad).*OS\s([\d_]+)/);const f=r.match(/(iPod)(.*OS\s([\d_]+))?/),g=!h&&r.match(/(iPhone\sOS|iOS)\s([\d_]+)/),p=s==="Win32";let y=s==="MacIntel";const E=["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"];return!h&&y&&e.touch&&E.indexOf(`${a}x${l}`)>=0&&(h=r.match(/(Version)\/([\d.]+)/),h||(h=[0,1,"13_0_0"]),y=!1),u&&!p&&(o.os="android",o.android=!0),(h||g||f)&&(o.os="ios",o.ios=!0),o}function jO(i){return i===void 0&&(i={}),E0||(E0=mG(i)),E0}let C0;function gG(){const i=di(),t=jO();let e=!1;function n(){const a=i.navigator.userAgent.toLowerCase();return a.indexOf("safari")>=0&&a.indexOf("chrome")<0&&a.indexOf("android")<0}if(n()){const a=String(i.navigator.userAgent);if(a.includes("Version/")){const[l,u]=a.split("Version/")[1].split(" ")[0].split(".").map(h=>Number(h));e=l<16||l===16&&u<2}}const s=/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(i.navigator.userAgent),r=n(),o=r||s&&t.ios;return{isSafari:e||r,needPerspectiveFix:e,need3dFix:o,isWebView:s}}function HO(){return C0||(C0=gG()),C0}function pG(i){let{swiper:t,on:e,emit:n}=i;const s=di();let r=null,o=null;const a=()=>{!t||t.destroyed||!t.initialized||(n("beforeResize"),n("resize"))},l=()=>{!t||t.destroyed||!t.initialized||(r=new ResizeObserver(f=>{o=s.requestAnimationFrame(()=>{const{width:g,height:p}=t;let y=g,E=p;f.forEach(C=>{let{contentBoxSize:k,contentRect:T,target:P}=C;P&&P!==t.el||(y=T?T.width:(k[0]||k).inlineSize,E=T?T.height:(k[0]||k).blockSize)}),(y!==g||E!==p)&&a()})}),r.observe(t.el))},u=()=>{o&&s.cancelAnimationFrame(o),r&&r.unobserve&&t.el&&(r.unobserve(t.el),r=null)},h=()=>{!t||t.destroyed||!t.initialized||n("orientationchange")};e("init",()=>{if(t.params.resizeObserver&&typeof s.ResizeObserver<"u"){l();return}s.addEventListener("resize",a),s.addEventListener("orientationchange",h)}),e("destroy",()=>{u(),s.removeEventListener("resize",a),s.removeEventListener("orientationchange",h)})}function bG(i){let{swiper:t,extendParams:e,on:n,emit:s}=i;const r=[],o=di(),a=function(h,f){f===void 0&&(f={});const g=o.MutationObserver||o.WebkitMutationObserver,p=new g(y=>{if(t.__preventObserver__)return;if(y.length===1){s("observerUpdate",y[0]);return}const E=function(){s("observerUpdate",y[0])};o.requestAnimationFrame?o.requestAnimationFrame(E):o.setTimeout(E,0)});p.observe(h,{attributes:typeof f.attributes>"u"?!0:f.attributes,childList:t.isElement||(typeof f.childList>"u"?!0:f).childList,characterData:typeof f.characterData>"u"?!0:f.characterData}),r.push(p)},l=()=>{if(t.params.observer){if(t.params.observeParents){const h=hG(t.hostEl);for(let f=0;f<h.length;f+=1)a(h[f])}a(t.hostEl,{childList:t.params.observeSlideChildren}),a(t.wrapperEl,{attributes:!1})}},u=()=>{r.forEach(h=>{h.disconnect()}),r.splice(0,r.length)};e({observer:!1,observeParents:!1,observeSlideChildren:!1}),n("init",l),n("destroy",u)}var wG={on(i,t,e){const n=this;if(!n.eventsListeners||n.destroyed||typeof t!="function")return n;const s=e?"unshift":"push";return i.split(" ").forEach(r=>{n.eventsListeners[r]||(n.eventsListeners[r]=[]),n.eventsListeners[r][s](t)}),n},once(i,t,e){const n=this;if(!n.eventsListeners||n.destroyed||typeof t!="function")return n;function s(){n.off(i,s),s.__emitterProxy&&delete s.__emitterProxy;for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];t.apply(n,o)}return s.__emitterProxy=t,n.on(i,s,e)},onAny(i,t){const e=this;if(!e.eventsListeners||e.destroyed||typeof i!="function")return e;const n=t?"unshift":"push";return e.eventsAnyListeners.indexOf(i)<0&&e.eventsAnyListeners[n](i),e},offAny(i){const t=this;if(!t.eventsListeners||t.destroyed||!t.eventsAnyListeners)return t;const e=t.eventsAnyListeners.indexOf(i);return e>=0&&t.eventsAnyListeners.splice(e,1),t},off(i,t){const e=this;return!e.eventsListeners||e.destroyed||!e.eventsListeners||i.split(" ").forEach(n=>{typeof t>"u"?e.eventsListeners[n]=[]:e.eventsListeners[n]&&e.eventsListeners[n].forEach((s,r)=>{(s===t||s.__emitterProxy&&s.__emitterProxy===t)&&e.eventsListeners[n].splice(r,1)})}),e},emit(){const i=this;if(!i.eventsListeners||i.destroyed||!i.eventsListeners)return i;let t,e,n;for(var s=arguments.length,r=new Array(s),o=0;o<s;o++)r[o]=arguments[o];return typeof r[0]=="string"||Array.isArray(r[0])?(t=r[0],e=r.slice(1,r.length),n=i):(t=r[0].events,e=r[0].data,n=r[0].context||i),e.unshift(n),(Array.isArray(t)?t:t.split(" ")).forEach(l=>{i.eventsAnyListeners&&i.eventsAnyListeners.length&&i.eventsAnyListeners.forEach(u=>{u.apply(n,[l,...e])}),i.eventsListeners&&i.eventsListeners[l]&&i.eventsListeners[l].forEach(u=>{u.apply(n,e)})}),i}};function vG(){const i=this;let t,e;const n=i.el;typeof i.params.width<"u"&&i.params.width!==null?t=i.params.width:t=n.clientWidth,typeof i.params.height<"u"&&i.params.height!==null?e=i.params.height:e=n.clientHeight,!(t===0&&i.isHorizontal()||e===0&&i.isVertical())&&(t=t-parseInt(aa(n,"padding-left")||0,10)-parseInt(aa(n,"padding-right")||0,10),e=e-parseInt(aa(n,"padding-top")||0,10)-parseInt(aa(n,"padding-bottom")||0,10),Number.isNaN(t)&&(t=0),Number.isNaN(e)&&(e=0),Object.assign(i,{width:t,height:e,size:i.isHorizontal()?t:e}))}function yG(){const i=this;function t(B,U){return parseFloat(B.getPropertyValue(i.getDirectionLabel(U))||0)}const e=i.params,{wrapperEl:n,slidesEl:s,size:r,rtlTranslate:o,wrongRTL:a}=i,l=i.virtual&&e.virtual.enabled,u=l?i.virtual.slides.length:i.slides.length,h=qs(s,`.${i.params.slideClass}, swiper-slide`),f=l?i.virtual.slides.length:h.length;let g=[];const p=[],y=[];let E=e.slidesOffsetBefore;typeof E=="function"&&(E=e.slidesOffsetBefore.call(i));let C=e.slidesOffsetAfter;typeof C=="function"&&(C=e.slidesOffsetAfter.call(i));const k=i.snapGrid.length,T=i.slidesGrid.length;let P=e.spaceBetween,S=-E,O=0,A=0;if(typeof r>"u")return;typeof P=="string"&&P.indexOf("%")>=0?P=parseFloat(P.replace("%",""))/100*r:typeof P=="string"&&(P=parseFloat(P)),i.virtualSize=-P,h.forEach(B=>{o?B.style.marginLeft="":B.style.marginRight="",B.style.marginBottom="",B.style.marginTop=""}),e.centeredSlides&&e.cssMode&&(Um(n,"--swiper-centered-offset-before",""),Um(n,"--swiper-centered-offset-after",""));const N=e.grid&&e.grid.rows>1&&i.grid;N?i.grid.initSlides(h):i.grid&&i.grid.unsetSlides();let L;const M=e.slidesPerView==="auto"&&e.breakpoints&&Object.keys(e.breakpoints).filter(B=>typeof e.breakpoints[B].slidesPerView<"u").length>0;for(let B=0;B<f;B+=1){L=0;let U;if(h[B]&&(U=h[B]),N&&i.grid.updateSlide(B,U,h),!(h[B]&&aa(U,"display")==="none")){if(e.slidesPerView==="auto"){M&&(h[B].style[i.getDirectionLabel("width")]="");const q=getComputedStyle(U),ee=U.style.transform,me=U.style.webkitTransform;if(ee&&(U.style.transform="none"),me&&(U.style.webkitTransform="none"),e.roundLengths)L=i.isHorizontal()?uA(U,"width"):uA(U,"height");else{const _e=t(q,"width"),ge=t(q,"padding-left"),pe=t(q,"padding-right"),ae=t(q,"margin-left"),le=t(q,"margin-right"),re=q.getPropertyValue("box-sizing");if(re&&re==="border-box")L=_e+ae+le;else{const{clientWidth:j,offsetWidth:ie}=U;L=_e+ge+pe+ae+le+(ie-j)}}ee&&(U.style.transform=ee),me&&(U.style.webkitTransform=me),e.roundLengths&&(L=Math.floor(L))}else L=(r-(e.slidesPerView-1)*P)/e.slidesPerView,e.roundLengths&&(L=Math.floor(L)),h[B]&&(h[B].style[i.getDirectionLabel("width")]=`${L}px`);h[B]&&(h[B].swiperSlideSize=L),y.push(L),e.centeredSlides?(S=S+L/2+O/2+P,O===0&&B!==0&&(S=S-r/2-P),B===0&&(S=S-r/2-P),Math.abs(S)<1/1e3&&(S=0),e.roundLengths&&(S=Math.floor(S)),A%e.slidesPerGroup===0&&g.push(S),p.push(S)):(e.roundLengths&&(S=Math.floor(S)),(A-Math.min(i.params.slidesPerGroupSkip,A))%i.params.slidesPerGroup===0&&g.push(S),p.push(S),S=S+L+P),i.virtualSize+=L+P,O=L,A+=1}}if(i.virtualSize=Math.max(i.virtualSize,r)+C,o&&a&&(e.effect==="slide"||e.effect==="coverflow")&&(n.style.width=`${i.virtualSize+P}px`),e.setWrapperSize&&(n.style[i.getDirectionLabel("width")]=`${i.virtualSize+P}px`),N&&i.grid.updateWrapperSize(L,g),!e.centeredSlides){const B=[];for(let U=0;U<g.length;U+=1){let q=g[U];e.roundLengths&&(q=Math.floor(q)),g[U]<=i.virtualSize-r&&B.push(q)}g=B,Math.floor(i.virtualSize-r)-Math.floor(g[g.length-1])>1&&g.push(i.virtualSize-r)}if(l&&e.loop){const B=y[0]+P;if(e.slidesPerGroup>1){const U=Math.ceil((i.virtual.slidesBefore+i.virtual.slidesAfter)/e.slidesPerGroup),q=B*e.slidesPerGroup;for(let ee=0;ee<U;ee+=1)g.push(g[g.length-1]+q)}for(let U=0;U<i.virtual.slidesBefore+i.virtual.slidesAfter;U+=1)e.slidesPerGroup===1&&g.push(g[g.length-1]+B),p.push(p[p.length-1]+B),i.virtualSize+=B}if(g.length===0&&(g=[0]),P!==0){const B=i.isHorizontal()&&o?"marginLeft":i.getDirectionLabel("marginRight");h.filter((U,q)=>!e.cssMode||e.loop?!0:q!==h.length-1).forEach(U=>{U.style[B]=`${P}px`})}if(e.centeredSlides&&e.centeredSlidesBounds){let B=0;y.forEach(q=>{B+=q+(P||0)}),B-=P;const U=B>r?B-r:0;g=g.map(q=>q<=0?-E:q>U?U+C:q)}if(e.centerInsufficientSlides){let B=0;y.forEach(q=>{B+=q+(P||0)}),B-=P;const U=(e.slidesOffsetBefore||0)+(e.slidesOffsetAfter||0);if(B+U<r){const q=(r-B-U)/2;g.forEach((ee,me)=>{g[me]=ee-q}),p.forEach((ee,me)=>{p[me]=ee+q})}}if(Object.assign(i,{slides:h,snapGrid:g,slidesGrid:p,slidesSizesGrid:y}),e.centeredSlides&&e.cssMode&&!e.centeredSlidesBounds){Um(n,"--swiper-centered-offset-before",`${-g[0]}px`),Um(n,"--swiper-centered-offset-after",`${i.size/2-y[y.length-1]/2}px`);const B=-i.snapGrid[0],U=-i.slidesGrid[0];i.snapGrid=i.snapGrid.map(q=>q+B),i.slidesGrid=i.slidesGrid.map(q=>q+U)}if(f!==u&&i.emit("slidesLengthChange"),g.length!==k&&(i.params.watchOverflow&&i.checkOverflow(),i.emit("snapGridLengthChange")),p.length!==T&&i.emit("slidesGridLengthChange"),e.watchSlidesProgress&&i.updateSlidesOffset(),i.emit("slidesUpdated"),!l&&!e.cssMode&&(e.effect==="slide"||e.effect==="fade")){const B=`${e.containerModifierClass}backface-hidden`,U=i.el.classList.contains(B);f<=e.maxBackfaceHiddenSlides?U||i.el.classList.add(B):U&&i.el.classList.remove(B)}}function _G(i){const t=this,e=[],n=t.virtual&&t.params.virtual.enabled;let s=0,r;typeof i=="number"?t.setTransition(i):i===!0&&t.setTransition(t.params.speed);const o=a=>n?t.slides[t.getSlideIndexByData(a)]:t.slides[a];if(t.params.slidesPerView!=="auto"&&t.params.slidesPerView>1)if(t.params.centeredSlides)(t.visibleSlides||[]).forEach(a=>{e.push(a)});else for(r=0;r<Math.ceil(t.params.slidesPerView);r+=1){const a=t.activeIndex+r;if(a>t.slides.length&&!n)break;e.push(o(a))}else e.push(o(t.activeIndex));for(r=0;r<e.length;r+=1)if(typeof e[r]<"u"){const a=e[r].offsetHeight;s=a>s?a:s}(s||s===0)&&(t.wrapperEl.style.height=`${s}px`)}function EG(){const i=this,t=i.slides,e=i.isElement?i.isHorizontal()?i.wrapperEl.offsetLeft:i.wrapperEl.offsetTop:0;for(let n=0;n<t.length;n+=1)t[n].swiperSlideOffset=(i.isHorizontal()?t[n].offsetLeft:t[n].offsetTop)-e-i.cssOverflowAdjustment()}const dA=(i,t,e)=>{t&&!i.classList.contains(e)?i.classList.add(e):!t&&i.classList.contains(e)&&i.classList.remove(e)};function CG(i){i===void 0&&(i=this&&this.translate||0);const t=this,e=t.params,{slides:n,rtlTranslate:s,snapGrid:r}=t;if(n.length===0)return;typeof n[0].swiperSlideOffset>"u"&&t.updateSlidesOffset();let o=-i;s&&(o=i),t.visibleSlidesIndexes=[],t.visibleSlides=[];let a=e.spaceBetween;typeof a=="string"&&a.indexOf("%")>=0?a=parseFloat(a.replace("%",""))/100*t.size:typeof a=="string"&&(a=parseFloat(a));for(let l=0;l<n.length;l+=1){const u=n[l];let h=u.swiperSlideOffset;e.cssMode&&e.centeredSlides&&(h-=n[0].swiperSlideOffset);const f=(o+(e.centeredSlides?t.minTranslate():0)-h)/(u.swiperSlideSize+a),g=(o-r[0]+(e.centeredSlides?t.minTranslate():0)-h)/(u.swiperSlideSize+a),p=-(o-h),y=p+t.slidesSizesGrid[l],E=p>=0&&p<=t.size-t.slidesSizesGrid[l],C=p>=0&&p<t.size-1||y>1&&y<=t.size||p<=0&&y>=t.size;C&&(t.visibleSlides.push(u),t.visibleSlidesIndexes.push(l)),dA(u,C,e.slideVisibleClass),dA(u,E,e.slideFullyVisibleClass),u.progress=s?-f:f,u.originalProgress=s?-g:g}}function xG(i){const t=this;if(typeof i>"u"){const h=t.rtlTranslate?-1:1;i=t&&t.translate&&t.translate*h||0}const e=t.params,n=t.maxTranslate()-t.minTranslate();let{progress:s,isBeginning:r,isEnd:o,progressLoop:a}=t;const l=r,u=o;if(n===0)s=0,r=!0,o=!0;else{s=(i-t.minTranslate())/n;const h=Math.abs(i-t.minTranslate())<1,f=Math.abs(i-t.maxTranslate())<1;r=h||s<=0,o=f||s>=1,h&&(s=0),f&&(s=1)}if(e.loop){const h=t.getSlideIndexByData(0),f=t.getSlideIndexByData(t.slides.length-1),g=t.slidesGrid[h],p=t.slidesGrid[f],y=t.slidesGrid[t.slidesGrid.length-1],E=Math.abs(i);E>=g?a=(E-g)/y:a=(E+y-p)/y,a>1&&(a-=1)}Object.assign(t,{progress:s,progressLoop:a,isBeginning:r,isEnd:o}),(e.watchSlidesProgress||e.centeredSlides&&e.autoHeight)&&t.updateSlidesProgress(i),r&&!l&&t.emit("reachBeginning toEdge"),o&&!u&&t.emit("reachEnd toEdge"),(l&&!r||u&&!o)&&t.emit("fromEdge"),t.emit("progress",s)}const x0=(i,t,e)=>{t&&!i.classList.contains(e)?i.classList.add(e):!t&&i.classList.contains(e)&&i.classList.remove(e)};function kG(){const i=this,{slides:t,params:e,slidesEl:n,activeIndex:s}=i,r=i.virtual&&e.virtual.enabled,o=i.grid&&e.grid&&e.grid.rows>1,a=f=>qs(n,`.${e.slideClass}${f}, swiper-slide${f}`)[0];let l,u,h;if(r)if(e.loop){let f=s-i.virtual.slidesBefore;f<0&&(f=i.virtual.slides.length+f),f>=i.virtual.slides.length&&(f-=i.virtual.slides.length),l=a(`[data-swiper-slide-index="${f}"]`)}else l=a(`[data-swiper-slide-index="${s}"]`);else o?(l=t.find(f=>f.column===s),h=t.find(f=>f.column===s+1),u=t.find(f=>f.column===s-1)):l=t[s];l&&(o||(h=dG(l,`.${e.slideClass}, swiper-slide`)[0],e.loop&&!h&&(h=t[0]),u=uG(l,`.${e.slideClass}, swiper-slide`)[0],e.loop&&!u===0&&(u=t[t.length-1]))),t.forEach(f=>{x0(f,f===l,e.slideActiveClass),x0(f,f===h,e.slideNextClass),x0(f,f===u,e.slidePrevClass)}),i.emitSlidesClasses()}const Rg=(i,t)=>{if(!i||i.destroyed||!i.params)return;const e=()=>i.isElement?"swiper-slide":`.${i.params.slideClass}`,n=t.closest(e());if(n){let s=n.querySelector(`.${i.params.lazyPreloaderClass}`);!s&&i.isElement&&(n.shadowRoot?s=n.shadowRoot.querySelector(`.${i.params.lazyPreloaderClass}`):requestAnimationFrame(()=>{n.shadowRoot&&(s=n.shadowRoot.querySelector(`.${i.params.lazyPreloaderClass}`),s&&s.remove())})),s&&s.remove()}},k0=(i,t)=>{if(!i.slides[t])return;const e=i.slides[t].querySelector('[loading="lazy"]');e&&e.removeAttribute("loading")},ay=i=>{if(!i||i.destroyed||!i.params)return;let t=i.params.lazyPreloadPrevNext;const e=i.slides.length;if(!e||!t||t<0)return;t=Math.min(t,e);const n=i.params.slidesPerView==="auto"?i.slidesPerViewDynamic():Math.ceil(i.params.slidesPerView),s=i.activeIndex;if(i.params.grid&&i.params.grid.rows>1){const o=s,a=[o-t];a.push(...Array.from({length:t}).map((l,u)=>o+n+u)),i.slides.forEach((l,u)=>{a.includes(l.column)&&k0(i,u)});return}const r=s+n-1;if(i.params.rewind||i.params.loop)for(let o=s-t;o<=r+t;o+=1){const a=(o%e+e)%e;(a<s||a>r)&&k0(i,a)}else for(let o=Math.max(s-t,0);o<=Math.min(r+t,e-1);o+=1)o!==s&&(o>r||o<s)&&k0(i,o)};function TG(i){const{slidesGrid:t,params:e}=i,n=i.rtlTranslate?i.translate:-i.translate;let s;for(let r=0;r<t.length;r+=1)typeof t[r+1]<"u"?n>=t[r]&&n<t[r+1]-(t[r+1]-t[r])/2?s=r:n>=t[r]&&n<t[r+1]&&(s=r+1):n>=t[r]&&(s=r);return e.normalizeSlideIndex&&(s<0||typeof s>"u")&&(s=0),s}function SG(i){const t=this,e=t.rtlTranslate?t.translate:-t.translate,{snapGrid:n,params:s,activeIndex:r,realIndex:o,snapIndex:a}=t;let l=i,u;const h=p=>{let y=p-t.virtual.slidesBefore;return y<0&&(y=t.virtual.slides.length+y),y>=t.virtual.slides.length&&(y-=t.virtual.slides.length),y};if(typeof l>"u"&&(l=TG(t)),n.indexOf(e)>=0)u=n.indexOf(e);else{const p=Math.min(s.slidesPerGroupSkip,l);u=p+Math.floor((l-p)/s.slidesPerGroup)}if(u>=n.length&&(u=n.length-1),l===r&&!t.params.loop){u!==a&&(t.snapIndex=u,t.emit("snapIndexChange"));return}if(l===r&&t.params.loop&&t.virtual&&t.params.virtual.enabled){t.realIndex=h(l);return}const f=t.grid&&s.grid&&s.grid.rows>1;let g;if(t.virtual&&s.virtual.enabled&&s.loop)g=h(l);else if(f){const p=t.slides.find(E=>E.column===l);let y=parseInt(p.getAttribute("data-swiper-slide-index"),10);Number.isNaN(y)&&(y=Math.max(t.slides.indexOf(p),0)),g=Math.floor(y/s.grid.rows)}else if(t.slides[l]){const p=t.slides[l].getAttribute("data-swiper-slide-index");p?g=parseInt(p,10):g=l}else g=l;Object.assign(t,{previousSnapIndex:a,snapIndex:u,previousRealIndex:o,realIndex:g,previousIndex:r,activeIndex:l}),t.initialized&&ay(t),t.emit("activeIndexChange"),t.emit("snapIndexChange"),(t.initialized||t.params.runCallbacksOnInit)&&(o!==g&&t.emit("realIndexChange"),t.emit("slideChange"))}function AG(i,t){const e=this,n=e.params;let s=i.closest(`.${n.slideClass}, swiper-slide`);!s&&e.isElement&&t&&t.length>1&&t.includes(i)&&[...t.slice(t.indexOf(i)+1,t.length)].forEach(a=>{!s&&a.matches&&a.matches(`.${n.slideClass}, swiper-slide`)&&(s=a)});let r=!1,o;if(s){for(let a=0;a<e.slides.length;a+=1)if(e.slides[a]===s){r=!0,o=a;break}}if(s&&r)e.clickedSlide=s,e.virtual&&e.params.virtual.enabled?e.clickedIndex=parseInt(s.getAttribute("data-swiper-slide-index"),10):e.clickedIndex=o;else{e.clickedSlide=void 0,e.clickedIndex=void 0;return}n.slideToClickedSlide&&e.clickedIndex!==void 0&&e.clickedIndex!==e.activeIndex&&e.slideToClickedSlide()}var PG={updateSize:vG,updateSlides:yG,updateAutoHeight:_G,updateSlidesOffset:EG,updateSlidesProgress:CG,updateProgress:xG,updateSlidesClasses:kG,updateActiveIndex:SG,updateClickedSlide:AG};function IG(i){i===void 0&&(i=this.isHorizontal()?"x":"y");const t=this,{params:e,rtlTranslate:n,translate:s,wrapperEl:r}=t;if(e.virtualTranslate)return n?-s:s;if(e.cssMode)return s;let o=oG(r,i);return o+=t.cssOverflowAdjustment(),n&&(o=-o),o||0}function RG(i,t){const e=this,{rtlTranslate:n,params:s,wrapperEl:r,progress:o}=e;let a=0,l=0;const u=0;e.isHorizontal()?a=n?-i:i:l=i,s.roundLengths&&(a=Math.floor(a),l=Math.floor(l)),e.previousTranslate=e.translate,e.translate=e.isHorizontal()?a:l,s.cssMode?r[e.isHorizontal()?"scrollLeft":"scrollTop"]=e.isHorizontal()?-a:-l:s.virtualTranslate||(e.isHorizontal()?a-=e.cssOverflowAdjustment():l-=e.cssOverflowAdjustment(),r.style.transform=`translate3d(${a}px, ${l}px, ${u}px)`);let h;const f=e.maxTranslate()-e.minTranslate();f===0?h=0:h=(i-e.minTranslate())/f,h!==o&&e.updateProgress(i),e.emit("setTranslate",e.translate,t)}function OG(){return-this.snapGrid[0]}function NG(){return-this.snapGrid[this.snapGrid.length-1]}function MG(i,t,e,n,s){i===void 0&&(i=0),t===void 0&&(t=this.params.speed),e===void 0&&(e=!0),n===void 0&&(n=!0);const r=this,{params:o,wrapperEl:a}=r;if(r.animating&&o.preventInteractionOnTransition)return!1;const l=r.minTranslate(),u=r.maxTranslate();let h;if(n&&i>l?h=l:n&&i<u?h=u:h=i,r.updateProgress(h),o.cssMode){const f=r.isHorizontal();if(t===0)a[f?"scrollLeft":"scrollTop"]=-h;else{if(!r.support.smoothScroll)return $O({swiper:r,targetPosition:-h,side:f?"left":"top"}),!0;a.scrollTo({[f?"left":"top"]:-h,behavior:"smooth"})}return!0}return t===0?(r.setTransition(0),r.setTranslate(h),e&&(r.emit("beforeTransitionStart",t,s),r.emit("transitionEnd"))):(r.setTransition(t),r.setTranslate(h),e&&(r.emit("beforeTransitionStart",t,s),r.emit("transitionStart")),r.animating||(r.animating=!0,r.onTranslateToWrapperTransitionEnd||(r.onTranslateToWrapperTransitionEnd=function(g){!r||r.destroyed||g.target===this&&(r.wrapperEl.removeEventListener("transitionend",r.onTranslateToWrapperTransitionEnd),r.onTranslateToWrapperTransitionEnd=null,delete r.onTranslateToWrapperTransitionEnd,r.animating=!1,e&&r.emit("transitionEnd"))}),r.wrapperEl.addEventListener("transitionend",r.onTranslateToWrapperTransitionEnd))),!0}var LG={getTranslate:IG,setTranslate:RG,minTranslate:OG,maxTranslate:NG,translateTo:MG};function VG(i,t){const e=this;e.params.cssMode||(e.wrapperEl.style.transitionDuration=`${i}ms`,e.wrapperEl.style.transitionDelay=i===0?"0ms":""),e.emit("setTransition",i,t)}function UO(i){let{swiper:t,runCallbacks:e,direction:n,step:s}=i;const{activeIndex:r,previousIndex:o}=t;let a=n;if(a||(r>o?a="next":r<o?a="prev":a="reset"),t.emit(`transition${s}`),e&&r!==o){if(a==="reset"){t.emit(`slideResetTransition${s}`);return}t.emit(`slideChangeTransition${s}`),a==="next"?t.emit(`slideNextTransition${s}`):t.emit(`slidePrevTransition${s}`)}}function DG(i,t){i===void 0&&(i=!0);const e=this,{params:n}=e;n.cssMode||(n.autoHeight&&e.updateAutoHeight(),UO({swiper:e,runCallbacks:i,direction:t,step:"Start"}))}function BG(i,t){i===void 0&&(i=!0);const e=this,{params:n}=e;e.animating=!1,!n.cssMode&&(e.setTransition(0),UO({swiper:e,runCallbacks:i,direction:t,step:"End"}))}var FG={setTransition:VG,transitionStart:DG,transitionEnd:BG};function $G(i,t,e,n,s){i===void 0&&(i=0),e===void 0&&(e=!0),typeof i=="string"&&(i=parseInt(i,10));const r=this;let o=i;o<0&&(o=0);const{params:a,snapGrid:l,slidesGrid:u,previousIndex:h,activeIndex:f,rtlTranslate:g,wrapperEl:p,enabled:y}=r;if(!y&&!n&&!s||r.destroyed||r.animating&&a.preventInteractionOnTransition)return!1;typeof t>"u"&&(t=r.params.speed);const E=Math.min(r.params.slidesPerGroupSkip,o);let C=E+Math.floor((o-E)/r.params.slidesPerGroup);C>=l.length&&(C=l.length-1);const k=-l[C];if(a.normalizeSlideIndex)for(let N=0;N<u.length;N+=1){const L=-Math.floor(k*100),M=Math.floor(u[N]*100),B=Math.floor(u[N+1]*100);typeof u[N+1]<"u"?L>=M&&L<B-(B-M)/2?o=N:L>=M&&L<B&&(o=N+1):L>=M&&(o=N)}if(r.initialized&&o!==f&&(!r.allowSlideNext&&(g?k>r.translate&&k>r.minTranslate():k<r.translate&&k<r.minTranslate())||!r.allowSlidePrev&&k>r.translate&&k>r.maxTranslate()&&(f||0)!==o))return!1;o!==(h||0)&&e&&r.emit("beforeSlideChangeStart"),r.updateProgress(k);let T;o>f?T="next":o<f?T="prev":T="reset";const P=r.virtual&&r.params.virtual.enabled;if(!(P&&s)&&(g&&-k===r.translate||!g&&k===r.translate))return r.updateActiveIndex(o),a.autoHeight&&r.updateAutoHeight(),r.updateSlidesClasses(),a.effect!=="slide"&&r.setTranslate(k),T!=="reset"&&(r.transitionStart(e,T),r.transitionEnd(e,T)),!1;if(a.cssMode){const N=r.isHorizontal(),L=g?k:-k;if(t===0)P&&(r.wrapperEl.style.scrollSnapType="none",r._immediateVirtual=!0),P&&!r._cssModeVirtualInitialSet&&r.params.initialSlide>0?(r._cssModeVirtualInitialSet=!0,requestAnimationFrame(()=>{p[N?"scrollLeft":"scrollTop"]=L})):p[N?"scrollLeft":"scrollTop"]=L,P&&requestAnimationFrame(()=>{r.wrapperEl.style.scrollSnapType="",r._immediateVirtual=!1});else{if(!r.support.smoothScroll)return $O({swiper:r,targetPosition:L,side:N?"left":"top"}),!0;p.scrollTo({[N?"left":"top"]:L,behavior:"smooth"})}return!0}const A=HO().isSafari;return P&&!s&&A&&r.isElement&&r.virtual.update(!1,!1,o),r.setTransition(t),r.setTranslate(k),r.updateActiveIndex(o),r.updateSlidesClasses(),r.emit("beforeTransitionStart",t,n),r.transitionStart(e,T),t===0?r.transitionEnd(e,T):r.animating||(r.animating=!0,r.onSlideToWrapperTransitionEnd||(r.onSlideToWrapperTransitionEnd=function(L){!r||r.destroyed||L.target===this&&(r.wrapperEl.removeEventListener("transitionend",r.onSlideToWrapperTransitionEnd),r.onSlideToWrapperTransitionEnd=null,delete r.onSlideToWrapperTransitionEnd,r.transitionEnd(e,T))}),r.wrapperEl.addEventListener("transitionend",r.onSlideToWrapperTransitionEnd)),!0}function zG(i,t,e,n){i===void 0&&(i=0),e===void 0&&(e=!0),typeof i=="string"&&(i=parseInt(i,10));const s=this;if(s.destroyed)return;typeof t>"u"&&(t=s.params.speed);const r=s.grid&&s.params.grid&&s.params.grid.rows>1;let o=i;if(s.params.loop)if(s.virtual&&s.params.virtual.enabled)o=o+s.virtual.slidesBefore;else{let a;if(r){const g=o*s.params.grid.rows;a=s.slides.find(p=>p.getAttribute("data-swiper-slide-index")*1===g).column}else a=s.getSlideIndexByData(o);const l=r?Math.ceil(s.slides.length/s.params.grid.rows):s.slides.length,{centeredSlides:u}=s.params;let h=s.params.slidesPerView;h==="auto"?h=s.slidesPerViewDynamic():(h=Math.ceil(parseFloat(s.params.slidesPerView,10)),u&&h%2===0&&(h=h+1));let f=l-a<h;if(u&&(f=f||a<Math.ceil(h/2)),n&&u&&s.params.slidesPerView!=="auto"&&!r&&(f=!1),f){const g=u?a<s.activeIndex?"prev":"next":a-s.activeIndex-1<s.params.slidesPerView?"next":"prev";s.loopFix({direction:g,slideTo:!0,activeSlideIndex:g==="next"?a+1:a-l+1,slideRealIndex:g==="next"?s.realIndex:void 0})}if(r){const g=o*s.params.grid.rows;o=s.slides.find(p=>p.getAttribute("data-swiper-slide-index")*1===g).column}else o=s.getSlideIndexByData(o)}return requestAnimationFrame(()=>{s.slideTo(o,t,e,n)}),s}function jG(i,t,e){t===void 0&&(t=!0);const n=this,{enabled:s,params:r,animating:o}=n;if(!s||n.destroyed)return n;typeof i>"u"&&(i=n.params.speed);let a=r.slidesPerGroup;r.slidesPerView==="auto"&&r.slidesPerGroup===1&&r.slidesPerGroupAuto&&(a=Math.max(n.slidesPerViewDynamic("current",!0),1));const l=n.activeIndex<r.slidesPerGroupSkip?1:a,u=n.virtual&&r.virtual.enabled;if(r.loop){if(o&&!u&&r.loopPreventsSliding)return!1;if(n.loopFix({direction:"next"}),n._clientLeft=n.wrapperEl.clientLeft,n.activeIndex===n.slides.length-1&&r.cssMode)return requestAnimationFrame(()=>{n.slideTo(n.activeIndex+l,i,t,e)}),!0}return r.rewind&&n.isEnd?n.slideTo(0,i,t,e):n.slideTo(n.activeIndex+l,i,t,e)}function HG(i,t,e){t===void 0&&(t=!0);const n=this,{params:s,snapGrid:r,slidesGrid:o,rtlTranslate:a,enabled:l,animating:u}=n;if(!l||n.destroyed)return n;typeof i>"u"&&(i=n.params.speed);const h=n.virtual&&s.virtual.enabled;if(s.loop){if(u&&!h&&s.loopPreventsSliding)return!1;n.loopFix({direction:"prev"}),n._clientLeft=n.wrapperEl.clientLeft}const f=a?n.translate:-n.translate;function g(T){return T<0?-Math.floor(Math.abs(T)):Math.floor(T)}const p=g(f),y=r.map(T=>g(T)),E=s.freeMode&&s.freeMode.enabled;let C=r[y.indexOf(p)-1];if(typeof C>"u"&&(s.cssMode||E)){let T;r.forEach((P,S)=>{p>=P&&(T=S)}),typeof T<"u"&&(C=E?r[T]:r[T>0?T-1:T])}let k=0;if(typeof C<"u"&&(k=o.indexOf(C),k<0&&(k=n.activeIndex-1),s.slidesPerView==="auto"&&s.slidesPerGroup===1&&s.slidesPerGroupAuto&&(k=k-n.slidesPerViewDynamic("previous",!0)+1,k=Math.max(k,0))),s.rewind&&n.isBeginning){const T=n.params.virtual&&n.params.virtual.enabled&&n.virtual?n.virtual.slides.length-1:n.slides.length-1;return n.slideTo(T,i,t,e)}else if(s.loop&&n.activeIndex===0&&s.cssMode)return requestAnimationFrame(()=>{n.slideTo(k,i,t,e)}),!0;return n.slideTo(k,i,t,e)}function UG(i,t,e){t===void 0&&(t=!0);const n=this;if(!n.destroyed)return typeof i>"u"&&(i=n.params.speed),n.slideTo(n.activeIndex,i,t,e)}function WG(i,t,e,n){t===void 0&&(t=!0),n===void 0&&(n=.5);const s=this;if(s.destroyed)return;typeof i>"u"&&(i=s.params.speed);let r=s.activeIndex;const o=Math.min(s.params.slidesPerGroupSkip,r),a=o+Math.floor((r-o)/s.params.slidesPerGroup),l=s.rtlTranslate?s.translate:-s.translate;if(l>=s.snapGrid[a]){const u=s.snapGrid[a],h=s.snapGrid[a+1];l-u>(h-u)*n&&(r+=s.params.slidesPerGroup)}else{const u=s.snapGrid[a-1],h=s.snapGrid[a];l-u<=(h-u)*n&&(r-=s.params.slidesPerGroup)}return r=Math.max(r,0),r=Math.min(r,s.slidesGrid.length-1),s.slideTo(r,i,t,e)}function qG(){const i=this;if(i.destroyed)return;const{params:t,slidesEl:e}=i,n=t.slidesPerView==="auto"?i.slidesPerViewDynamic():t.slidesPerView;let s=i.clickedIndex,r;const o=i.isElement?"swiper-slide":`.${t.slideClass}`;if(t.loop){if(i.animating)return;r=parseInt(i.clickedSlide.getAttribute("data-swiper-slide-index"),10),t.centeredSlides?s<i.loopedSlides-n/2||s>i.slides.length-i.loopedSlides+n/2?(i.loopFix(),s=i.getSlideIndex(qs(e,`${o}[data-swiper-slide-index="${r}"]`)[0]),oy(()=>{i.slideTo(s)})):i.slideTo(s):s>i.slides.length-n?(i.loopFix(),s=i.getSlideIndex(qs(e,`${o}[data-swiper-slide-index="${r}"]`)[0]),oy(()=>{i.slideTo(s)})):i.slideTo(s)}else i.slideTo(s)}var GG={slideTo:$G,slideToLoop:zG,slideNext:jG,slidePrev:HG,slideReset:UG,slideToClosest:WG,slideToClickedSlide:qG};function KG(i){const t=this,{params:e,slidesEl:n}=t;if(!e.loop||t.virtual&&t.params.virtual.enabled)return;const s=()=>{qs(n,`.${e.slideClass}, swiper-slide`).forEach((f,g)=>{f.setAttribute("data-swiper-slide-index",g)})},r=t.grid&&e.grid&&e.grid.rows>1,o=e.slidesPerGroup*(r?e.grid.rows:1),a=t.slides.length%o!==0,l=r&&t.slides.length%e.grid.rows!==0,u=h=>{for(let f=0;f<h;f+=1){const g=t.isElement?up("swiper-slide",[e.slideBlankClass]):up("div",[e.slideClass,e.slideBlankClass]);t.slidesEl.append(g)}};if(a){if(e.loopAddBlankSlides){const h=o-t.slides.length%o;u(h),t.recalcSlides(),t.updateSlides()}else cp("Swiper Loop Warning: The number of slides is not even to slidesPerGroup, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");s()}else if(l){if(e.loopAddBlankSlides){const h=e.grid.rows-t.slides.length%e.grid.rows;u(h),t.recalcSlides(),t.updateSlides()}else cp("Swiper Loop Warning: The number of slides is not even to grid.rows, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");s()}else s();t.loopFix({slideRealIndex:i,direction:e.centeredSlides?void 0:"next"})}function YG(i){let{slideRealIndex:t,slideTo:e=!0,direction:n,setTranslate:s,activeSlideIndex:r,byController:o,byMousewheel:a}=i===void 0?{}:i;const l=this;if(!l.params.loop)return;l.emit("beforeLoopFix");const{slides:u,allowSlidePrev:h,allowSlideNext:f,slidesEl:g,params:p}=l,{centeredSlides:y}=p;if(l.allowSlidePrev=!0,l.allowSlideNext=!0,l.virtual&&p.virtual.enabled){e&&(!p.centeredSlides&&l.snapIndex===0?l.slideTo(l.virtual.slides.length,0,!1,!0):p.centeredSlides&&l.snapIndex<p.slidesPerView?l.slideTo(l.virtual.slides.length+l.snapIndex,0,!1,!0):l.snapIndex===l.snapGrid.length-1&&l.slideTo(l.virtual.slidesBefore,0,!1,!0)),l.allowSlidePrev=h,l.allowSlideNext=f,l.emit("loopFix");return}let E=p.slidesPerView;E==="auto"?E=l.slidesPerViewDynamic():(E=Math.ceil(parseFloat(p.slidesPerView,10)),y&&E%2===0&&(E=E+1));const C=p.slidesPerGroupAuto?E:p.slidesPerGroup;let k=C;k%C!==0&&(k+=C-k%C),k+=p.loopAdditionalSlides,l.loopedSlides=k;const T=l.grid&&p.grid&&p.grid.rows>1;u.length<E+k?cp("Swiper Loop Warning: The number of slides is not enough for loop mode, it will be disabled and not function properly. You need to add more slides (or make duplicates) or lower the values of slidesPerView and slidesPerGroup parameters"):T&&p.grid.fill==="row"&&cp("Swiper Loop Warning: Loop mode is not compatible with grid.fill = `row`");const P=[],S=[];let O=l.activeIndex;typeof r>"u"?r=l.getSlideIndex(u.find(ee=>ee.classList.contains(p.slideActiveClass))):O=r;const A=n==="next"||!n,N=n==="prev"||!n;let L=0,M=0;const B=T?Math.ceil(u.length/p.grid.rows):u.length,q=(T?u[r].column:r)+(y&&typeof s>"u"?-E/2+.5:0);if(q<k){L=Math.max(k-q,C);for(let ee=0;ee<k-q;ee+=1){const me=ee-Math.floor(ee/B)*B;if(T){const _e=B-me-1;for(let ge=u.length-1;ge>=0;ge-=1)u[ge].column===_e&&P.push(ge)}else P.push(B-me-1)}}else if(q+E>B-k){M=Math.max(q-(B-k*2),C);for(let ee=0;ee<M;ee+=1){const me=ee-Math.floor(ee/B)*B;T?u.forEach((_e,ge)=>{_e.column===me&&S.push(ge)}):S.push(me)}}if(l.__preventObserver__=!0,requestAnimationFrame(()=>{l.__preventObserver__=!1}),N&&P.forEach(ee=>{u[ee].swiperLoopMoveDOM=!0,g.prepend(u[ee]),u[ee].swiperLoopMoveDOM=!1}),A&&S.forEach(ee=>{u[ee].swiperLoopMoveDOM=!0,g.append(u[ee]),u[ee].swiperLoopMoveDOM=!1}),l.recalcSlides(),p.slidesPerView==="auto"?l.updateSlides():T&&(P.length>0&&N||S.length>0&&A)&&l.slides.forEach((ee,me)=>{l.grid.updateSlide(me,ee,l.slides)}),p.watchSlidesProgress&&l.updateSlidesOffset(),e){if(P.length>0&&N){if(typeof t>"u"){const ee=l.slidesGrid[O],_e=l.slidesGrid[O+L]-ee;a?l.setTranslate(l.translate-_e):(l.slideTo(O+Math.ceil(L),0,!1,!0),s&&(l.touchEventsData.startTranslate=l.touchEventsData.startTranslate-_e,l.touchEventsData.currentTranslate=l.touchEventsData.currentTranslate-_e))}else if(s){const ee=T?P.length/p.grid.rows:P.length;l.slideTo(l.activeIndex+ee,0,!1,!0),l.touchEventsData.currentTranslate=l.translate}}else if(S.length>0&&A)if(typeof t>"u"){const ee=l.slidesGrid[O],_e=l.slidesGrid[O-M]-ee;a?l.setTranslate(l.translate-_e):(l.slideTo(O-M,0,!1,!0),s&&(l.touchEventsData.startTranslate=l.touchEventsData.startTranslate-_e,l.touchEventsData.currentTranslate=l.touchEventsData.currentTranslate-_e))}else{const ee=T?S.length/p.grid.rows:S.length;l.slideTo(l.activeIndex-ee,0,!1,!0)}}if(l.allowSlidePrev=h,l.allowSlideNext=f,l.controller&&l.controller.control&&!o){const ee={slideRealIndex:t,direction:n,setTranslate:s,activeSlideIndex:r,byController:!0};Array.isArray(l.controller.control)?l.controller.control.forEach(me=>{!me.destroyed&&me.params.loop&&me.loopFix({...ee,slideTo:me.params.slidesPerView===p.slidesPerView?e:!1})}):l.controller.control instanceof l.constructor&&l.controller.control.params.loop&&l.controller.control.loopFix({...ee,slideTo:l.controller.control.params.slidesPerView===p.slidesPerView?e:!1})}l.emit("loopFix")}function ZG(){const i=this,{params:t,slidesEl:e}=i;if(!t.loop||i.virtual&&i.params.virtual.enabled)return;i.recalcSlides();const n=[];i.slides.forEach(s=>{const r=typeof s.swiperSlideIndex>"u"?s.getAttribute("data-swiper-slide-index")*1:s.swiperSlideIndex;n[r]=s}),i.slides.forEach(s=>{s.removeAttribute("data-swiper-slide-index")}),n.forEach(s=>{e.append(s)}),i.recalcSlides(),i.slideTo(i.realIndex,0)}var XG={loopCreate:KG,loopFix:YG,loopDestroy:ZG};function JG(i){const t=this;if(!t.params.simulateTouch||t.params.watchOverflow&&t.isLocked||t.params.cssMode)return;const e=t.params.touchEventsTarget==="container"?t.el:t.wrapperEl;t.isElement&&(t.__preventObserver__=!0),e.style.cursor="move",e.style.cursor=i?"grabbing":"grab",t.isElement&&requestAnimationFrame(()=>{t.__preventObserver__=!1})}function QG(){const i=this;i.params.watchOverflow&&i.isLocked||i.params.cssMode||(i.isElement&&(i.__preventObserver__=!0),i[i.params.touchEventsTarget==="container"?"el":"wrapperEl"].style.cursor="",i.isElement&&requestAnimationFrame(()=>{i.__preventObserver__=!1}))}var eK={setGrabCursor:JG,unsetGrabCursor:QG};function tK(i,t){t===void 0&&(t=this);function e(n){if(!n||n===Ca()||n===di())return null;n.assignedSlot&&(n=n.assignedSlot);const s=n.closest(i);return!s&&!n.getRootNode?null:s||e(n.getRootNode().host)}return e(t)}function hA(i,t,e){const n=di(),{params:s}=i,r=s.edgeSwipeDetection,o=s.edgeSwipeThreshold;return r&&(e<=o||e>=n.innerWidth-o)?r==="prevent"?(t.preventDefault(),!0):!1:!0}function nK(i){const t=this,e=Ca();let n=i;n.originalEvent&&(n=n.originalEvent);const s=t.touchEventsData;if(n.type==="pointerdown"){if(s.pointerId!==null&&s.pointerId!==n.pointerId)return;s.pointerId=n.pointerId}else n.type==="touchstart"&&n.targetTouches.length===1&&(s.touchId=n.targetTouches[0].identifier);if(n.type==="touchstart"){hA(t,n,n.targetTouches[0].pageX);return}const{params:r,touches:o,enabled:a}=t;if(!a||!r.simulateTouch&&n.pointerType==="mouse"||t.animating&&r.preventInteractionOnTransition)return;!t.animating&&r.cssMode&&r.loop&&t.loopFix();let l=n.target;if(r.touchEventsTarget==="wrapper"&&!cG(l,t.wrapperEl)||"which"in n&&n.which===3||"button"in n&&n.button>0||s.isTouched&&s.isMoved)return;const u=!!r.noSwipingClass&&r.noSwipingClass!=="",h=n.composedPath?n.composedPath():n.path;u&&n.target&&n.target.shadowRoot&&h&&(l=h[0]);const f=r.noSwipingSelector?r.noSwipingSelector:`.${r.noSwipingClass}`,g=!!(n.target&&n.target.shadowRoot);if(r.noSwiping&&(g?tK(f,l):l.closest(f))){t.allowClick=!0;return}if(r.swipeHandler&&!l.closest(r.swipeHandler))return;o.currentX=n.pageX,o.currentY=n.pageY;const p=o.currentX,y=o.currentY;if(!hA(t,n,p))return;Object.assign(s,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),o.startX=p,o.startY=y,s.touchStartTime=cl(),t.allowClick=!0,t.updateSize(),t.swipeDirection=void 0,r.threshold>0&&(s.allowThresholdMove=!1);let E=!0;l.matches(s.focusableElements)&&(E=!1,l.nodeName==="SELECT"&&(s.isTouched=!1)),e.activeElement&&e.activeElement.matches(s.focusableElements)&&e.activeElement!==l&&(n.pointerType==="mouse"||n.pointerType!=="mouse"&&!l.matches(s.focusableElements))&&e.activeElement.blur();const C=E&&t.allowTouchMove&&r.touchStartPreventDefault;(r.touchStartForcePreventDefault||C)&&!l.isContentEditable&&n.preventDefault(),r.freeMode&&r.freeMode.enabled&&t.freeMode&&t.animating&&!r.cssMode&&t.freeMode.onTouchStart(),t.emit("touchStart",n)}function iK(i){const t=Ca(),e=this,n=e.touchEventsData,{params:s,touches:r,rtlTranslate:o,enabled:a}=e;if(!a||!s.simulateTouch&&i.pointerType==="mouse")return;let l=i;if(l.originalEvent&&(l=l.originalEvent),l.type==="pointermove"&&(n.touchId!==null||l.pointerId!==n.pointerId))return;let u;if(l.type==="touchmove"){if(u=[...l.changedTouches].find(A=>A.identifier===n.touchId),!u||u.identifier!==n.touchId)return}else u=l;if(!n.isTouched){n.startMoving&&n.isScrolling&&e.emit("touchMoveOpposite",l);return}const h=u.pageX,f=u.pageY;if(l.preventedByNestedSwiper){r.startX=h,r.startY=f;return}if(!e.allowTouchMove){l.target.matches(n.focusableElements)||(e.allowClick=!1),n.isTouched&&(Object.assign(r,{startX:h,startY:f,currentX:h,currentY:f}),n.touchStartTime=cl());return}if(s.touchReleaseOnEdges&&!s.loop){if(e.isVertical()){if(f<r.startY&&e.translate<=e.maxTranslate()||f>r.startY&&e.translate>=e.minTranslate()){n.isTouched=!1,n.isMoved=!1;return}}else if(h<r.startX&&e.translate<=e.maxTranslate()||h>r.startX&&e.translate>=e.minTranslate())return}if(t.activeElement&&t.activeElement.matches(n.focusableElements)&&t.activeElement!==l.target&&l.pointerType!=="mouse"&&t.activeElement.blur(),t.activeElement&&l.target===t.activeElement&&l.target.matches(n.focusableElements)){n.isMoved=!0,e.allowClick=!1;return}n.allowTouchCallbacks&&e.emit("touchMove",l),r.previousX=r.currentX,r.previousY=r.currentY,r.currentX=h,r.currentY=f;const g=r.currentX-r.startX,p=r.currentY-r.startY;if(e.params.threshold&&Math.sqrt(g**2+p**2)<e.params.threshold)return;if(typeof n.isScrolling>"u"){let A;e.isHorizontal()&&r.currentY===r.startY||e.isVertical()&&r.currentX===r.startX?n.isScrolling=!1:g*g+p*p>=25&&(A=Math.atan2(Math.abs(p),Math.abs(g))*180/Math.PI,n.isScrolling=e.isHorizontal()?A>s.touchAngle:90-A>s.touchAngle)}if(n.isScrolling&&e.emit("touchMoveOpposite",l),typeof n.startMoving>"u"&&(r.currentX!==r.startX||r.currentY!==r.startY)&&(n.startMoving=!0),n.isScrolling||l.type==="touchmove"&&n.preventTouchMoveFromPointerMove){n.isTouched=!1;return}if(!n.startMoving)return;e.allowClick=!1,!s.cssMode&&l.cancelable&&l.preventDefault(),s.touchMoveStopPropagation&&!s.nested&&l.stopPropagation();let y=e.isHorizontal()?g:p,E=e.isHorizontal()?r.currentX-r.previousX:r.currentY-r.previousY;s.oneWayMovement&&(y=Math.abs(y)*(o?1:-1),E=Math.abs(E)*(o?1:-1)),r.diff=y,y*=s.touchRatio,o&&(y=-y,E=-E);const C=e.touchesDirection;e.swipeDirection=y>0?"prev":"next",e.touchesDirection=E>0?"prev":"next";const k=e.params.loop&&!s.cssMode,T=e.touchesDirection==="next"&&e.allowSlideNext||e.touchesDirection==="prev"&&e.allowSlidePrev;if(!n.isMoved){if(k&&T&&e.loopFix({direction:e.swipeDirection}),n.startTranslate=e.getTranslate(),e.setTransition(0),e.animating){const A=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0,detail:{bySwiperTouchMove:!0}});e.wrapperEl.dispatchEvent(A)}n.allowMomentumBounce=!1,s.grabCursor&&(e.allowSlideNext===!0||e.allowSlidePrev===!0)&&e.setGrabCursor(!0),e.emit("sliderFirstMove",l)}let P;if(new Date().getTime(),s._loopSwapReset!==!1&&n.isMoved&&n.allowThresholdMove&&C!==e.touchesDirection&&k&&T&&Math.abs(y)>=1){Object.assign(r,{startX:h,startY:f,currentX:h,currentY:f,startTranslate:n.currentTranslate}),n.loopSwapReset=!0,n.startTranslate=n.currentTranslate;return}e.emit("sliderMove",l),n.isMoved=!0,n.currentTranslate=y+n.startTranslate;let S=!0,O=s.resistanceRatio;if(s.touchReleaseOnEdges&&(O=0),y>0?(k&&T&&!P&&n.allowThresholdMove&&n.currentTranslate>(s.centeredSlides?e.minTranslate()-e.slidesSizesGrid[e.activeIndex+1]-(s.slidesPerView!=="auto"&&e.slides.length-s.slidesPerView>=2?e.slidesSizesGrid[e.activeIndex+1]+e.params.spaceBetween:0)-e.params.spaceBetween:e.minTranslate())&&e.loopFix({direction:"prev",setTranslate:!0,activeSlideIndex:0}),n.currentTranslate>e.minTranslate()&&(S=!1,s.resistance&&(n.currentTranslate=e.minTranslate()-1+(-e.minTranslate()+n.startTranslate+y)**O))):y<0&&(k&&T&&!P&&n.allowThresholdMove&&n.currentTranslate<(s.centeredSlides?e.maxTranslate()+e.slidesSizesGrid[e.slidesSizesGrid.length-1]+e.params.spaceBetween+(s.slidesPerView!=="auto"&&e.slides.length-s.slidesPerView>=2?e.slidesSizesGrid[e.slidesSizesGrid.length-1]+e.params.spaceBetween:0):e.maxTranslate())&&e.loopFix({direction:"next",setTranslate:!0,activeSlideIndex:e.slides.length-(s.slidesPerView==="auto"?e.slidesPerViewDynamic():Math.ceil(parseFloat(s.slidesPerView,10)))}),n.currentTranslate<e.maxTranslate()&&(S=!1,s.resistance&&(n.currentTranslate=e.maxTranslate()+1-(e.maxTranslate()-n.startTranslate-y)**O))),S&&(l.preventedByNestedSwiper=!0),!e.allowSlideNext&&e.swipeDirection==="next"&&n.currentTranslate<n.startTranslate&&(n.currentTranslate=n.startTranslate),!e.allowSlidePrev&&e.swipeDirection==="prev"&&n.currentTranslate>n.startTranslate&&(n.currentTranslate=n.startTranslate),!e.allowSlidePrev&&!e.allowSlideNext&&(n.currentTranslate=n.startTranslate),s.threshold>0)if(Math.abs(y)>s.threshold||n.allowThresholdMove){if(!n.allowThresholdMove){n.allowThresholdMove=!0,r.startX=r.currentX,r.startY=r.currentY,n.currentTranslate=n.startTranslate,r.diff=e.isHorizontal()?r.currentX-r.startX:r.currentY-r.startY;return}}else{n.currentTranslate=n.startTranslate;return}!s.followFinger||s.cssMode||((s.freeMode&&s.freeMode.enabled&&e.freeMode||s.watchSlidesProgress)&&(e.updateActiveIndex(),e.updateSlidesClasses()),s.freeMode&&s.freeMode.enabled&&e.freeMode&&e.freeMode.onTouchMove(),e.updateProgress(n.currentTranslate),e.setTranslate(n.currentTranslate))}function sK(i){const t=this,e=t.touchEventsData;let n=i;n.originalEvent&&(n=n.originalEvent);let s;if(n.type==="touchend"||n.type==="touchcancel"){if(s=[...n.changedTouches].find(O=>O.identifier===e.touchId),!s||s.identifier!==e.touchId)return}else{if(e.touchId!==null||n.pointerId!==e.pointerId)return;s=n}if(["pointercancel","pointerout","pointerleave","contextmenu"].includes(n.type)&&!(["pointercancel","contextmenu"].includes(n.type)&&(t.browser.isSafari||t.browser.isWebView)))return;e.pointerId=null,e.touchId=null;const{params:o,touches:a,rtlTranslate:l,slidesGrid:u,enabled:h}=t;if(!h||!o.simulateTouch&&n.pointerType==="mouse")return;if(e.allowTouchCallbacks&&t.emit("touchEnd",n),e.allowTouchCallbacks=!1,!e.isTouched){e.isMoved&&o.grabCursor&&t.setGrabCursor(!1),e.isMoved=!1,e.startMoving=!1;return}o.grabCursor&&e.isMoved&&e.isTouched&&(t.allowSlideNext===!0||t.allowSlidePrev===!0)&&t.setGrabCursor(!1);const f=cl(),g=f-e.touchStartTime;if(t.allowClick){const O=n.path||n.composedPath&&n.composedPath();t.updateClickedSlide(O&&O[0]||n.target,O),t.emit("tap click",n),g<300&&f-e.lastClickTime<300&&t.emit("doubleTap doubleClick",n)}if(e.lastClickTime=cl(),oy(()=>{t.destroyed||(t.allowClick=!0)}),!e.isTouched||!e.isMoved||!t.swipeDirection||a.diff===0&&!e.loopSwapReset||e.currentTranslate===e.startTranslate&&!e.loopSwapReset){e.isTouched=!1,e.isMoved=!1,e.startMoving=!1;return}e.isTouched=!1,e.isMoved=!1,e.startMoving=!1;let p;if(o.followFinger?p=l?t.translate:-t.translate:p=-e.currentTranslate,o.cssMode)return;if(o.freeMode&&o.freeMode.enabled){t.freeMode.onTouchEnd({currentPos:p});return}const y=p>=-t.maxTranslate()&&!t.params.loop;let E=0,C=t.slidesSizesGrid[0];for(let O=0;O<u.length;O+=O<o.slidesPerGroupSkip?1:o.slidesPerGroup){const A=O<o.slidesPerGroupSkip-1?1:o.slidesPerGroup;typeof u[O+A]<"u"?(y||p>=u[O]&&p<u[O+A])&&(E=O,C=u[O+A]-u[O]):(y||p>=u[O])&&(E=O,C=u[u.length-1]-u[u.length-2])}let k=null,T=null;o.rewind&&(t.isBeginning?T=o.virtual&&o.virtual.enabled&&t.virtual?t.virtual.slides.length-1:t.slides.length-1:t.isEnd&&(k=0));const P=(p-u[E])/C,S=E<o.slidesPerGroupSkip-1?1:o.slidesPerGroup;if(g>o.longSwipesMs){if(!o.longSwipes){t.slideTo(t.activeIndex);return}t.swipeDirection==="next"&&(P>=o.longSwipesRatio?t.slideTo(o.rewind&&t.isEnd?k:E+S):t.slideTo(E)),t.swipeDirection==="prev"&&(P>1-o.longSwipesRatio?t.slideTo(E+S):T!==null&&P<0&&Math.abs(P)>o.longSwipesRatio?t.slideTo(T):t.slideTo(E))}else{if(!o.shortSwipes){t.slideTo(t.activeIndex);return}t.navigation&&(n.target===t.navigation.nextEl||n.target===t.navigation.prevEl)?n.target===t.navigation.nextEl?t.slideTo(E+S):t.slideTo(E):(t.swipeDirection==="next"&&t.slideTo(k!==null?k:E+S),t.swipeDirection==="prev"&&t.slideTo(T!==null?T:E))}}function fA(){const i=this,{params:t,el:e}=i;if(e&&e.offsetWidth===0)return;t.breakpoints&&i.setBreakpoint();const{allowSlideNext:n,allowSlidePrev:s,snapGrid:r}=i,o=i.virtual&&i.params.virtual.enabled;i.allowSlideNext=!0,i.allowSlidePrev=!0,i.updateSize(),i.updateSlides(),i.updateSlidesClasses();const a=o&&t.loop;(t.slidesPerView==="auto"||t.slidesPerView>1)&&i.isEnd&&!i.isBeginning&&!i.params.centeredSlides&&!a?i.slideTo(i.slides.length-1,0,!1,!0):i.params.loop&&!o?i.slideToLoop(i.realIndex,0,!1,!0):i.slideTo(i.activeIndex,0,!1,!0),i.autoplay&&i.autoplay.running&&i.autoplay.paused&&(clearTimeout(i.autoplay.resizeTimeout),i.autoplay.resizeTimeout=setTimeout(()=>{i.autoplay&&i.autoplay.running&&i.autoplay.paused&&i.autoplay.resume()},500)),i.allowSlidePrev=s,i.allowSlideNext=n,i.params.watchOverflow&&r!==i.snapGrid&&i.checkOverflow()}function rK(i){const t=this;t.enabled&&(t.allowClick||(t.params.preventClicks&&i.preventDefault(),t.params.preventClicksPropagation&&t.animating&&(i.stopPropagation(),i.stopImmediatePropagation())))}function oK(){const i=this,{wrapperEl:t,rtlTranslate:e,enabled:n}=i;if(!n)return;i.previousTranslate=i.translate,i.isHorizontal()?i.translate=-t.scrollLeft:i.translate=-t.scrollTop,i.translate===0&&(i.translate=0),i.updateActiveIndex(),i.updateSlidesClasses();let s;const r=i.maxTranslate()-i.minTranslate();r===0?s=0:s=(i.translate-i.minTranslate())/r,s!==i.progress&&i.updateProgress(e?-i.translate:i.translate),i.emit("setTranslate",i.translate,!1)}function aK(i){const t=this;Rg(t,i.target),!(t.params.cssMode||t.params.slidesPerView!=="auto"&&!t.params.autoHeight)&&t.update()}function lK(){const i=this;i.documentTouchHandlerProceeded||(i.documentTouchHandlerProceeded=!0,i.params.touchReleaseOnEdges&&(i.el.style.touchAction="auto"))}const WO=(i,t)=>{const e=Ca(),{params:n,el:s,wrapperEl:r,device:o}=i,a=!!n.nested,l=t==="on"?"addEventListener":"removeEventListener",u=t;!s||typeof s=="string"||(e[l]("touchstart",i.onDocumentTouchStart,{passive:!1,capture:a}),s[l]("touchstart",i.onTouchStart,{passive:!1}),s[l]("pointerdown",i.onTouchStart,{passive:!1}),e[l]("touchmove",i.onTouchMove,{passive:!1,capture:a}),e[l]("pointermove",i.onTouchMove,{passive:!1,capture:a}),e[l]("touchend",i.onTouchEnd,{passive:!0}),e[l]("pointerup",i.onTouchEnd,{passive:!0}),e[l]("pointercancel",i.onTouchEnd,{passive:!0}),e[l]("touchcancel",i.onTouchEnd,{passive:!0}),e[l]("pointerout",i.onTouchEnd,{passive:!0}),e[l]("pointerleave",i.onTouchEnd,{passive:!0}),e[l]("contextmenu",i.onTouchEnd,{passive:!0}),(n.preventClicks||n.preventClicksPropagation)&&s[l]("click",i.onClick,!0),n.cssMode&&r[l]("scroll",i.onScroll),n.updateOnWindowResize?i[u](o.ios||o.android?"resize orientationchange observerUpdate":"resize observerUpdate",fA,!0):i[u]("observerUpdate",fA,!0),s[l]("load",i.onLoad,{capture:!0}))};function cK(){const i=this,{params:t}=i;i.onTouchStart=nK.bind(i),i.onTouchMove=iK.bind(i),i.onTouchEnd=sK.bind(i),i.onDocumentTouchStart=lK.bind(i),t.cssMode&&(i.onScroll=oK.bind(i)),i.onClick=rK.bind(i),i.onLoad=aK.bind(i),WO(i,"on")}function uK(){WO(this,"off")}var dK={attachEvents:cK,detachEvents:uK};const mA=(i,t)=>i.grid&&t.grid&&t.grid.rows>1;function hK(){const i=this,{realIndex:t,initialized:e,params:n,el:s}=i,r=n.breakpoints;if(!r||r&&Object.keys(r).length===0)return;const o=Ca(),a=n.breakpointsBase==="window"||!n.breakpointsBase?n.breakpointsBase:"container",l=["window","container"].includes(n.breakpointsBase)||!n.breakpointsBase?i.el:o.querySelector(n.breakpointsBase),u=i.getBreakpoint(r,a,l);if(!u||i.currentBreakpoint===u)return;const f=(u in r?r[u]:void 0)||i.originalParams,g=mA(i,n),p=mA(i,f),y=i.params.grabCursor,E=f.grabCursor,C=n.enabled;g&&!p?(s.classList.remove(`${n.containerModifierClass}grid`,`${n.containerModifierClass}grid-column`),i.emitContainerClasses()):!g&&p&&(s.classList.add(`${n.containerModifierClass}grid`),(f.grid.fill&&f.grid.fill==="column"||!f.grid.fill&&n.grid.fill==="column")&&s.classList.add(`${n.containerModifierClass}grid-column`),i.emitContainerClasses()),y&&!E?i.unsetGrabCursor():!y&&E&&i.setGrabCursor(),["navigation","pagination","scrollbar"].forEach(A=>{if(typeof f[A]>"u")return;const N=n[A]&&n[A].enabled,L=f[A]&&f[A].enabled;N&&!L&&i[A].disable(),!N&&L&&i[A].enable()});const k=f.direction&&f.direction!==n.direction,T=n.loop&&(f.slidesPerView!==n.slidesPerView||k),P=n.loop;k&&e&&i.changeDirection(),zi(i.params,f);const S=i.params.enabled,O=i.params.loop;Object.assign(i,{allowTouchMove:i.params.allowTouchMove,allowSlideNext:i.params.allowSlideNext,allowSlidePrev:i.params.allowSlidePrev}),C&&!S?i.disable():!C&&S&&i.enable(),i.currentBreakpoint=u,i.emit("_beforeBreakpoint",f),e&&(T?(i.loopDestroy(),i.loopCreate(t),i.updateSlides()):!P&&O?(i.loopCreate(t),i.updateSlides()):P&&!O&&i.loopDestroy()),i.emit("breakpoint",f)}function fK(i,t,e){if(t===void 0&&(t="window"),!i||t==="container"&&!e)return;let n=!1;const s=di(),r=t==="window"?s.innerHeight:e.clientHeight,o=Object.keys(i).map(a=>{if(typeof a=="string"&&a.indexOf("@")===0){const l=parseFloat(a.substr(1));return{value:r*l,point:a}}return{value:a,point:a}});o.sort((a,l)=>parseInt(a.value,10)-parseInt(l.value,10));for(let a=0;a<o.length;a+=1){const{point:l,value:u}=o[a];t==="window"?s.matchMedia(`(min-width: ${u}px)`).matches&&(n=l):u<=e.clientWidth&&(n=l)}return n||"max"}var mK={setBreakpoint:hK,getBreakpoint:fK};function gK(i,t){const e=[];return i.forEach(n=>{typeof n=="object"?Object.keys(n).forEach(s=>{n[s]&&e.push(t+s)}):typeof n=="string"&&e.push(t+n)}),e}function pK(){const i=this,{classNames:t,params:e,rtl:n,el:s,device:r}=i,o=gK(["initialized",e.direction,{"free-mode":i.params.freeMode&&e.freeMode.enabled},{autoheight:e.autoHeight},{rtl:n},{grid:e.grid&&e.grid.rows>1},{"grid-column":e.grid&&e.grid.rows>1&&e.grid.fill==="column"},{android:r.android},{ios:r.ios},{"css-mode":e.cssMode},{centered:e.cssMode&&e.centeredSlides},{"watch-progress":e.watchSlidesProgress}],e.containerModifierClass);t.push(...o),s.classList.add(...t),i.emitContainerClasses()}function bK(){const i=this,{el:t,classNames:e}=i;!t||typeof t=="string"||(t.classList.remove(...e),i.emitContainerClasses())}var wK={addClasses:pK,removeClasses:bK};function vK(){const i=this,{isLocked:t,params:e}=i,{slidesOffsetBefore:n}=e;if(n){const s=i.slides.length-1,r=i.slidesGrid[s]+i.slidesSizesGrid[s]+n*2;i.isLocked=i.size>r}else i.isLocked=i.snapGrid.length===1;e.allowSlideNext===!0&&(i.allowSlideNext=!i.isLocked),e.allowSlidePrev===!0&&(i.allowSlidePrev=!i.isLocked),t&&t!==i.isLocked&&(i.isEnd=!1),t!==i.isLocked&&i.emit(i.isLocked?"lock":"unlock")}var yK={checkOverflow:vK},ly={init:!0,direction:"horizontal",oneWayMovement:!1,swiperElementNodeName:"SWIPER-CONTAINER",touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,eventsPrefix:"swiper",enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:5,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,loop:!1,loopAddBlankSlides:!0,loopAdditionalSlides:0,loopPreventsSliding:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-blank",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",slideFullyVisibleClass:"swiper-slide-fully-visible",slideNextClass:"swiper-slide-next",slidePrevClass:"swiper-slide-prev",wrapperClass:"swiper-wrapper",lazyPreloaderClass:"swiper-lazy-preloader",lazyPreloadPrevNext:0,runCallbacksOnInit:!0,_emitClasses:!1};function _K(i,t){return function(n){n===void 0&&(n={});const s=Object.keys(n)[0],r=n[s];if(typeof r!="object"||r===null){zi(t,n);return}if(i[s]===!0&&(i[s]={enabled:!0}),s==="navigation"&&i[s]&&i[s].enabled&&!i[s].prevEl&&!i[s].nextEl&&(i[s].auto=!0),["pagination","scrollbar"].indexOf(s)>=0&&i[s]&&i[s].enabled&&!i[s].el&&(i[s].auto=!0),!(s in i&&"enabled"in r)){zi(t,n);return}typeof i[s]=="object"&&!("enabled"in i[s])&&(i[s].enabled=!0),i[s]||(i[s]={enabled:!1}),zi(t,n)}}const T0={eventsEmitter:wG,update:PG,translate:LG,transition:FG,slide:GG,loop:XG,grabCursor:eK,events:dK,breakpoints:mK,checkOverflow:yK,classes:wK},S0={};let uE=class Yr{constructor(){let t,e;for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];s.length===1&&s[0].constructor&&Object.prototype.toString.call(s[0]).slice(8,-1)==="Object"?e=s[0]:[t,e]=s,e||(e={}),e=zi({},e),t&&!e.el&&(e.el=t);const o=Ca();if(e.el&&typeof e.el=="string"&&o.querySelectorAll(e.el).length>1){const h=[];return o.querySelectorAll(e.el).forEach(f=>{const g=zi({},e,{el:f});h.push(new Yr(g))}),h}const a=this;a.__swiper__=!0,a.support=zO(),a.device=jO({userAgent:e.userAgent}),a.browser=HO(),a.eventsListeners={},a.eventsAnyListeners=[],a.modules=[...a.__modules__],e.modules&&Array.isArray(e.modules)&&a.modules.push(...e.modules);const l={};a.modules.forEach(h=>{h({params:e,swiper:a,extendParams:_K(e,l),on:a.on.bind(a),once:a.once.bind(a),off:a.off.bind(a),emit:a.emit.bind(a)})});const u=zi({},ly,l);return a.params=zi({},u,S0,e),a.originalParams=zi({},a.params),a.passedParams=zi({},e),a.params&&a.params.on&&Object.keys(a.params.on).forEach(h=>{a.on(h,a.params.on[h])}),a.params&&a.params.onAny&&a.onAny(a.params.onAny),Object.assign(a,{enabled:a.params.enabled,el:t,classNames:[],slides:[],slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal(){return a.params.direction==="horizontal"},isVertical(){return a.params.direction==="vertical"},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,cssOverflowAdjustment(){return Math.trunc(this.translate/2**23)*2**23},allowSlideNext:a.params.allowSlideNext,allowSlidePrev:a.params.allowSlidePrev,touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:a.params.focusableElements,lastClickTime:0,clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,startMoving:void 0,pointerId:null,touchId:null},allowClick:!0,allowTouchMove:a.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),a.emit("_swiper"),a.params.init&&a.init(),a}getDirectionLabel(t){return this.isHorizontal()?t:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[t]}getSlideIndex(t){const{slidesEl:e,params:n}=this,s=qs(e,`.${n.slideClass}, swiper-slide`),r=cA(s[0]);return cA(t)-r}getSlideIndexByData(t){return this.getSlideIndex(this.slides.find(e=>e.getAttribute("data-swiper-slide-index")*1===t))}recalcSlides(){const t=this,{slidesEl:e,params:n}=t;t.slides=qs(e,`.${n.slideClass}, swiper-slide`)}enable(){const t=this;t.enabled||(t.enabled=!0,t.params.grabCursor&&t.setGrabCursor(),t.emit("enable"))}disable(){const t=this;t.enabled&&(t.enabled=!1,t.params.grabCursor&&t.unsetGrabCursor(),t.emit("disable"))}setProgress(t,e){const n=this;t=Math.min(Math.max(t,0),1);const s=n.minTranslate(),o=(n.maxTranslate()-s)*t+s;n.translateTo(o,typeof e>"u"?0:e),n.updateActiveIndex(),n.updateSlidesClasses()}emitContainerClasses(){const t=this;if(!t.params._emitClasses||!t.el)return;const e=t.el.className.split(" ").filter(n=>n.indexOf("swiper")===0||n.indexOf(t.params.containerModifierClass)===0);t.emit("_containerClasses",e.join(" "))}getSlideClasses(t){const e=this;return e.destroyed?"":t.className.split(" ").filter(n=>n.indexOf("swiper-slide")===0||n.indexOf(e.params.slideClass)===0).join(" ")}emitSlidesClasses(){const t=this;if(!t.params._emitClasses||!t.el)return;const e=[];t.slides.forEach(n=>{const s=t.getSlideClasses(n);e.push({slideEl:n,classNames:s}),t.emit("_slideClass",n,s)}),t.emit("_slideClasses",e)}slidesPerViewDynamic(t,e){t===void 0&&(t="current"),e===void 0&&(e=!1);const n=this,{params:s,slides:r,slidesGrid:o,slidesSizesGrid:a,size:l,activeIndex:u}=n;let h=1;if(typeof s.slidesPerView=="number")return s.slidesPerView;if(s.centeredSlides){let f=r[u]?Math.ceil(r[u].swiperSlideSize):0,g;for(let p=u+1;p<r.length;p+=1)r[p]&&!g&&(f+=Math.ceil(r[p].swiperSlideSize),h+=1,f>l&&(g=!0));for(let p=u-1;p>=0;p-=1)r[p]&&!g&&(f+=r[p].swiperSlideSize,h+=1,f>l&&(g=!0))}else if(t==="current")for(let f=u+1;f<r.length;f+=1)(e?o[f]+a[f]-o[u]<l:o[f]-o[u]<l)&&(h+=1);else for(let f=u-1;f>=0;f-=1)o[u]-o[f]<l&&(h+=1);return h}update(){const t=this;if(!t||t.destroyed)return;const{snapGrid:e,params:n}=t;n.breakpoints&&t.setBreakpoint(),[...t.el.querySelectorAll('[loading="lazy"]')].forEach(o=>{o.complete&&Rg(t,o)}),t.updateSize(),t.updateSlides(),t.updateProgress(),t.updateSlidesClasses();function s(){const o=t.rtlTranslate?t.translate*-1:t.translate,a=Math.min(Math.max(o,t.maxTranslate()),t.minTranslate());t.setTranslate(a),t.updateActiveIndex(),t.updateSlidesClasses()}let r;if(n.freeMode&&n.freeMode.enabled&&!n.cssMode)s(),n.autoHeight&&t.updateAutoHeight();else{if((n.slidesPerView==="auto"||n.slidesPerView>1)&&t.isEnd&&!n.centeredSlides){const o=t.virtual&&n.virtual.enabled?t.virtual.slides:t.slides;r=t.slideTo(o.length-1,0,!1,!0)}else r=t.slideTo(t.activeIndex,0,!1,!0);r||s()}n.watchOverflow&&e!==t.snapGrid&&t.checkOverflow(),t.emit("update")}changeDirection(t,e){e===void 0&&(e=!0);const n=this,s=n.params.direction;return t||(t=s==="horizontal"?"vertical":"horizontal"),t===s||t!=="horizontal"&&t!=="vertical"||(n.el.classList.remove(`${n.params.containerModifierClass}${s}`),n.el.classList.add(`${n.params.containerModifierClass}${t}`),n.emitContainerClasses(),n.params.direction=t,n.slides.forEach(r=>{t==="vertical"?r.style.width="":r.style.height=""}),n.emit("changeDirection"),e&&n.update()),n}changeLanguageDirection(t){const e=this;e.rtl&&t==="rtl"||!e.rtl&&t==="ltr"||(e.rtl=t==="rtl",e.rtlTranslate=e.params.direction==="horizontal"&&e.rtl,e.rtl?(e.el.classList.add(`${e.params.containerModifierClass}rtl`),e.el.dir="rtl"):(e.el.classList.remove(`${e.params.containerModifierClass}rtl`),e.el.dir="ltr"),e.update())}mount(t){const e=this;if(e.mounted)return!0;let n=t||e.params.el;if(typeof n=="string"&&(n=document.querySelector(n)),!n)return!1;n.swiper=e,n.parentNode&&n.parentNode.host&&n.parentNode.host.nodeName===e.params.swiperElementNodeName.toUpperCase()&&(e.isElement=!0);const s=()=>`.${(e.params.wrapperClass||"").trim().split(" ").join(".")}`;let o=n&&n.shadowRoot&&n.shadowRoot.querySelector?n.shadowRoot.querySelector(s()):qs(n,s())[0];return!o&&e.params.createElements&&(o=up("div",e.params.wrapperClass),n.append(o),qs(n,`.${e.params.slideClass}`).forEach(a=>{o.append(a)})),Object.assign(e,{el:n,wrapperEl:o,slidesEl:e.isElement&&!n.parentNode.host.slideSlots?n.parentNode.host:o,hostEl:e.isElement?n.parentNode.host:n,mounted:!0,rtl:n.dir.toLowerCase()==="rtl"||aa(n,"direction")==="rtl",rtlTranslate:e.params.direction==="horizontal"&&(n.dir.toLowerCase()==="rtl"||aa(n,"direction")==="rtl"),wrongRTL:aa(o,"display")==="-webkit-box"}),!0}init(t){const e=this;if(e.initialized||e.mount(t)===!1)return e;e.emit("beforeInit"),e.params.breakpoints&&e.setBreakpoint(),e.addClasses(),e.updateSize(),e.updateSlides(),e.params.watchOverflow&&e.checkOverflow(),e.params.grabCursor&&e.enabled&&e.setGrabCursor(),e.params.loop&&e.virtual&&e.params.virtual.enabled?e.slideTo(e.params.initialSlide+e.virtual.slidesBefore,0,e.params.runCallbacksOnInit,!1,!0):e.slideTo(e.params.initialSlide,0,e.params.runCallbacksOnInit,!1,!0),e.params.loop&&e.loopCreate(),e.attachEvents();const s=[...e.el.querySelectorAll('[loading="lazy"]')];return e.isElement&&s.push(...e.hostEl.querySelectorAll('[loading="lazy"]')),s.forEach(r=>{r.complete?Rg(e,r):r.addEventListener("load",o=>{Rg(e,o.target)})}),ay(e),e.initialized=!0,ay(e),e.emit("init"),e.emit("afterInit"),e}destroy(t,e){t===void 0&&(t=!0),e===void 0&&(e=!0);const n=this,{params:s,el:r,wrapperEl:o,slides:a}=n;return typeof n.params>"u"||n.destroyed||(n.emit("beforeDestroy"),n.initialized=!1,n.detachEvents(),s.loop&&n.loopDestroy(),e&&(n.removeClasses(),r&&typeof r!="string"&&r.removeAttribute("style"),o&&o.removeAttribute("style"),a&&a.length&&a.forEach(l=>{l.classList.remove(s.slideVisibleClass,s.slideFullyVisibleClass,s.slideActiveClass,s.slideNextClass,s.slidePrevClass),l.removeAttribute("style"),l.removeAttribute("data-swiper-slide-index")})),n.emit("destroy"),Object.keys(n.eventsListeners).forEach(l=>{n.off(l)}),t!==!1&&(n.el&&typeof n.el!="string"&&(n.el.swiper=null),sG(n)),n.destroyed=!0),null}static extendDefaults(t){zi(S0,t)}static get extendedDefaults(){return S0}static get defaults(){return ly}static installModule(t){Yr.prototype.__modules__||(Yr.prototype.__modules__=[]);const e=Yr.prototype.__modules__;typeof t=="function"&&e.indexOf(t)<0&&e.push(t)}static use(t){return Array.isArray(t)?(t.forEach(e=>Yr.installModule(e)),Yr):(Yr.installModule(t),Yr)}};Object.keys(T0).forEach(i=>{Object.keys(T0[i]).forEach(t=>{uE.prototype[t]=T0[i][t]})});uE.use([pG,bG]);const qO=["eventsPrefix","injectStyles","injectStylesUrls","modules","init","_direction","oneWayMovement","swiperElementNodeName","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_enabled","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","breakpointsBase","_spaceBetween","_slidesPerView","maxBackfaceHiddenSlides","_grid","_slidesPerGroup","_slidesPerGroupSkip","_slidesPerGroupAuto","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_loop","loopAdditionalSlides","loopAddBlankSlides","loopPreventsSliding","_rewind","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideActiveClass","slideVisibleClass","slideFullyVisibleClass","slideNextClass","slidePrevClass","slideBlankClass","wrapperClass","lazyPreloaderClass","lazyPreloadPrevNext","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","_autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","creativeEffect","cardsEffect","hashNavigation","history","keyboard","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom","control"];function yl(i){return typeof i=="object"&&i!==null&&i.constructor&&Object.prototype.toString.call(i).slice(8,-1)==="Object"&&!i.__swiper__}function Yc(i,t){const e=["__proto__","constructor","prototype"];Object.keys(t).filter(n=>e.indexOf(n)<0).forEach(n=>{typeof i[n]>"u"?i[n]=t[n]:yl(t[n])&&yl(i[n])&&Object.keys(t[n]).length>0?t[n].__swiper__?i[n]=t[n]:Yc(i[n],t[n]):i[n]=t[n]})}function GO(i){return i===void 0&&(i={}),i.navigation&&typeof i.navigation.nextEl>"u"&&typeof i.navigation.prevEl>"u"}function KO(i){return i===void 0&&(i={}),i.pagination&&typeof i.pagination.el>"u"}function YO(i){return i===void 0&&(i={}),i.scrollbar&&typeof i.scrollbar.el>"u"}function ZO(i){i===void 0&&(i="");const t=i.split(" ").map(n=>n.trim()).filter(n=>!!n),e=[];return t.forEach(n=>{e.indexOf(n)<0&&e.push(n)}),e.join(" ")}function EK(i){return i===void 0&&(i=""),i?i.includes("swiper-wrapper")?i:`swiper-wrapper ${i}`:"swiper-wrapper"}function CK(i){let{swiper:t,slides:e,passedParams:n,changedParams:s,nextEl:r,prevEl:o,scrollbarEl:a,paginationEl:l}=i;const u=s.filter(M=>M!=="children"&&M!=="direction"&&M!=="wrapperClass"),{params:h,pagination:f,navigation:g,scrollbar:p,virtual:y,thumbs:E}=t;let C,k,T,P,S,O,A,N;s.includes("thumbs")&&n.thumbs&&n.thumbs.swiper&&!n.thumbs.swiper.destroyed&&h.thumbs&&(!h.thumbs.swiper||h.thumbs.swiper.destroyed)&&(C=!0),s.includes("controller")&&n.controller&&n.controller.control&&h.controller&&!h.controller.control&&(k=!0),s.includes("pagination")&&n.pagination&&(n.pagination.el||l)&&(h.pagination||h.pagination===!1)&&f&&!f.el&&(T=!0),s.includes("scrollbar")&&n.scrollbar&&(n.scrollbar.el||a)&&(h.scrollbar||h.scrollbar===!1)&&p&&!p.el&&(P=!0),s.includes("navigation")&&n.navigation&&(n.navigation.prevEl||o)&&(n.navigation.nextEl||r)&&(h.navigation||h.navigation===!1)&&g&&!g.prevEl&&!g.nextEl&&(S=!0);const L=M=>{t[M]&&(t[M].destroy(),M==="navigation"?(t.isElement&&(t[M].prevEl.remove(),t[M].nextEl.remove()),h[M].prevEl=void 0,h[M].nextEl=void 0,t[M].prevEl=void 0,t[M].nextEl=void 0):(t.isElement&&t[M].el.remove(),h[M].el=void 0,t[M].el=void 0))};s.includes("loop")&&t.isElement&&(h.loop&&!n.loop?O=!0:!h.loop&&n.loop?A=!0:N=!0),u.forEach(M=>{if(yl(h[M])&&yl(n[M]))Object.assign(h[M],n[M]),(M==="navigation"||M==="pagination"||M==="scrollbar")&&"enabled"in n[M]&&!n[M].enabled&&L(M);else{const B=n[M];(B===!0||B===!1)&&(M==="navigation"||M==="pagination"||M==="scrollbar")?B===!1&&L(M):h[M]=n[M]}}),u.includes("controller")&&!k&&t.controller&&t.controller.control&&h.controller&&h.controller.control&&(t.controller.control=h.controller.control),s.includes("children")&&e&&y&&h.virtual.enabled?(y.slides=e,y.update(!0)):s.includes("virtual")&&y&&h.virtual.enabled&&(e&&(y.slides=e),y.update(!0)),s.includes("children")&&e&&h.loop&&(N=!0),C&&E.init()&&E.update(!0),k&&(t.controller.control=h.controller.control),T&&(t.isElement&&(!l||typeof l=="string")&&(l=document.createElement("div"),l.classList.add("swiper-pagination"),l.part.add("pagination"),t.el.appendChild(l)),l&&(h.pagination.el=l),f.init(),f.render(),f.update()),P&&(t.isElement&&(!a||typeof a=="string")&&(a=document.createElement("div"),a.classList.add("swiper-scrollbar"),a.part.add("scrollbar"),t.el.appendChild(a)),a&&(h.scrollbar.el=a),p.init(),p.updateSize(),p.setTranslate()),S&&(t.isElement&&((!r||typeof r=="string")&&(r=document.createElement("div"),r.classList.add("swiper-button-next"),r.innerHTML=t.hostEl.constructor.nextButtonSvg,r.part.add("button-next"),t.el.appendChild(r)),(!o||typeof o=="string")&&(o=document.createElement("div"),o.classList.add("swiper-button-prev"),o.innerHTML=t.hostEl.constructor.prevButtonSvg,o.part.add("button-prev"),t.el.appendChild(o))),r&&(h.navigation.nextEl=r),o&&(h.navigation.prevEl=o),g.init(),g.update()),s.includes("allowSlideNext")&&(t.allowSlideNext=n.allowSlideNext),s.includes("allowSlidePrev")&&(t.allowSlidePrev=n.allowSlidePrev),s.includes("direction")&&t.changeDirection(n.direction,!1),(O||N)&&t.loopDestroy(),(A||N)&&t.loopCreate(),t.update()}function xK(i,t){i===void 0&&(i={}),t===void 0&&(t=!0);const e={on:{}},n={},s={};Yc(e,ly),e._emitClasses=!0,e.init=!1;const r={},o=qO.map(l=>l.replace(/_/,"")),a=Object.assign({},i);return Object.keys(a).forEach(l=>{typeof i[l]>"u"||(o.indexOf(l)>=0?yl(i[l])?(e[l]={},s[l]={},Yc(e[l],i[l]),Yc(s[l],i[l])):(e[l]=i[l],s[l]=i[l]):l.search(/on[A-Z]/)===0&&typeof i[l]=="function"?t?n[`${l[2].toLowerCase()}${l.substr(3)}`]=i[l]:e.on[`${l[2].toLowerCase()}${l.substr(3)}`]=i[l]:r[l]=i[l])}),["navigation","pagination","scrollbar"].forEach(l=>{e[l]===!0&&(e[l]={}),e[l]===!1&&delete e[l]}),{params:e,passedParams:s,rest:r,events:n}}function kK(i,t){let{el:e,nextEl:n,prevEl:s,paginationEl:r,scrollbarEl:o,swiper:a}=i;GO(t)&&n&&s&&(a.params.navigation.nextEl=n,a.originalParams.navigation.nextEl=n,a.params.navigation.prevEl=s,a.originalParams.navigation.prevEl=s),KO(t)&&r&&(a.params.pagination.el=r,a.originalParams.pagination.el=r),YO(t)&&o&&(a.params.scrollbar.el=o,a.originalParams.scrollbar.el=o),a.init(e)}function TK(i,t,e,n,s){const r=[];if(!t)return r;const o=l=>{r.indexOf(l)<0&&r.push(l)};if(e&&n){const l=n.map(s),u=e.map(s);l.join("")!==u.join("")&&o("children"),n.length!==e.length&&o("children")}return qO.filter(l=>l[0]==="_").map(l=>l.replace(/_/,"")).forEach(l=>{if(l in i&&l in t)if(yl(i[l])&&yl(t[l])){const u=Object.keys(i[l]),h=Object.keys(t[l]);u.length!==h.length?o(l):(u.forEach(f=>{i[l][f]!==t[l][f]&&o(l)}),h.forEach(f=>{i[l][f]!==t[l][f]&&o(l)}))}else i[l]!==t[l]&&o(l)}),r}const SK=i=>{!i||i.destroyed||!i.params.virtual||i.params.virtual&&!i.params.virtual.enabled||(i.updateSlides(),i.updateProgress(),i.updateSlidesClasses(),i.parallax&&i.params.parallax&&i.params.parallax.enabled&&i.parallax.setTranslate())};function dp(){return dp=Object.assign?Object.assign.bind():function(i){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},dp.apply(this,arguments)}function XO(i){return i.type&&i.type.displayName&&i.type.displayName.includes("SwiperSlide")}function JO(i){const t=[];return Ke.Children.toArray(i).forEach(e=>{XO(e)?t.push(e):e.props&&e.props.children&&JO(e.props.children).forEach(n=>t.push(n))}),t}function AK(i){const t=[],e={"container-start":[],"container-end":[],"wrapper-start":[],"wrapper-end":[]};return Ke.Children.toArray(i).forEach(n=>{if(XO(n))t.push(n);else if(n.props&&n.props.slot&&e[n.props.slot])e[n.props.slot].push(n);else if(n.props&&n.props.children){const s=JO(n.props.children);s.length>0?s.forEach(r=>t.push(r)):e["container-end"].push(n)}else e["container-end"].push(n)}),{slides:t,slots:e}}function PK(i,t,e){if(!e)return null;const n=h=>{let f=h;return h<0?f=t.length+h:f>=t.length&&(f=f-t.length),f},s=i.isHorizontal()?{[i.rtlTranslate?"right":"left"]:`${e.offset}px`}:{top:`${e.offset}px`},{from:r,to:o}=e,a=i.params.loop?-t.length:0,l=i.params.loop?t.length*2:t.length,u=[];for(let h=a;h<l;h+=1)h>=r&&h<=o&&u.push(t[n(h)]);return u.map((h,f)=>Ke.cloneElement(h,{swiper:i,style:s,key:h.props.virtualIndex||h.key||`slide-${f}`}))}function ih(i,t){return typeof window>"u"?R.useEffect(i,t):R.useLayoutEffect(i,t)}const gA=R.createContext(null),IK=R.createContext(null),hp=R.forwardRef(function(i,t){let{className:e,tag:n="div",wrapperTag:s="div",children:r,onSwiper:o,...a}=i===void 0?{}:i,l=!1;const[u,h]=R.useState("swiper"),[f,g]=R.useState(null),[p,y]=R.useState(!1),E=R.useRef(!1),C=R.useRef(null),k=R.useRef(null),T=R.useRef(null),P=R.useRef(null),S=R.useRef(null),O=R.useRef(null),A=R.useRef(null),N=R.useRef(null),{params:L,passedParams:M,rest:B,events:U}=xK(a),{slides:q,slots:ee}=AK(r),me=()=>{y(!p)};Object.assign(L.on,{_containerClasses(le,re){h(re)}});const _e=()=>{Object.assign(L.on,U),l=!0;const le={...L};if(delete le.wrapperClass,k.current=new uE(le),k.current.virtual&&k.current.params.virtual.enabled){k.current.virtual.slides=q;const re={cache:!1,slides:q,renderExternal:g,renderExternalUpdate:!1};Yc(k.current.params.virtual,re),Yc(k.current.originalParams.virtual,re)}};C.current||_e(),k.current&&k.current.on("_beforeBreakpoint",me);const ge=()=>{l||!U||!k.current||Object.keys(U).forEach(le=>{k.current.on(le,U[le])})},pe=()=>{!U||!k.current||Object.keys(U).forEach(le=>{k.current.off(le,U[le])})};R.useEffect(()=>()=>{k.current&&k.current.off("_beforeBreakpoint",me)}),R.useEffect(()=>{!E.current&&k.current&&(k.current.emitSlidesClasses(),E.current=!0)}),ih(()=>{if(t&&(t.current=C.current),!!C.current)return k.current.destroyed&&_e(),kK({el:C.current,nextEl:S.current,prevEl:O.current,paginationEl:A.current,scrollbarEl:N.current,swiper:k.current},L),o&&!k.current.destroyed&&o(k.current),()=>{k.current&&!k.current.destroyed&&k.current.destroy(!0,!1)}},[]),ih(()=>{ge();const le=TK(M,T.current,q,P.current,re=>re.key);return T.current=M,P.current=q,le.length&&k.current&&!k.current.destroyed&&CK({swiper:k.current,slides:q,passedParams:M,changedParams:le,nextEl:S.current,prevEl:O.current,scrollbarEl:N.current,paginationEl:A.current}),()=>{pe()}}),ih(()=>{SK(k.current)},[f]);function ae(){return L.virtual?PK(k.current,q,f):q.map((le,re)=>Ke.cloneElement(le,{swiper:k.current,swiperSlideIndex:re}))}return Ke.createElement(n,dp({ref:C,className:ZO(`${u}${e?` ${e}`:""}`)},B),Ke.createElement(IK.Provider,{value:k.current},ee["container-start"],Ke.createElement(s,{className:EK(L.wrapperClass)},ee["wrapper-start"],ae(),ee["wrapper-end"]),GO(L)&&Ke.createElement(Ke.Fragment,null,Ke.createElement("div",{ref:O,className:"swiper-button-prev"}),Ke.createElement("div",{ref:S,className:"swiper-button-next"})),YO(L)&&Ke.createElement("div",{ref:N,className:"swiper-scrollbar"}),KO(L)&&Ke.createElement("div",{ref:A,className:"swiper-pagination"}),ee["container-end"]))});hp.displayName="Swiper";const Hc=R.forwardRef(function(i,t){let{tag:e="div",children:n,className:s="",swiper:r,zoom:o,lazy:a,virtualIndex:l,swiperSlideIndex:u,...h}=i===void 0?{}:i;const f=R.useRef(null),[g,p]=R.useState("swiper-slide"),[y,E]=R.useState(!1);function C(S,O,A){O===f.current&&p(A)}ih(()=>{if(typeof u<"u"&&(f.current.swiperSlideIndex=u),t&&(t.current=f.current),!(!f.current||!r)){if(r.destroyed){g!=="swiper-slide"&&p("swiper-slide");return}return r.on("_slideClass",C),()=>{r&&r.off("_slideClass",C)}}}),ih(()=>{r&&f.current&&!r.destroyed&&p(r.getSlideClasses(f.current))},[r]);const k={isActive:g.indexOf("swiper-slide-active")>=0,isVisible:g.indexOf("swiper-slide-visible")>=0,isPrev:g.indexOf("swiper-slide-prev")>=0,isNext:g.indexOf("swiper-slide-next")>=0},T=()=>typeof n=="function"?n(k):n,P=()=>{E(!0)};return Ke.createElement(e,dp({ref:f,className:ZO(`${g}${s?` ${s}`:""}`),"data-swiper-slide-index":l,onLoad:P},h),o&&Ke.createElement(gA.Provider,{value:k},Ke.createElement("div",{className:"swiper-zoom-container","data-swiper-zoom":typeof o=="number"?o:void 0},T(),a&&!y&&Ke.createElement("div",{className:"swiper-lazy-preloader"}))),!o&&Ke.createElement(gA.Provider,{value:k},T(),a&&!y&&Ke.createElement("div",{className:"swiper-lazy-preloader"})))});Hc.displayName="SwiperSlide";const RK={BASE_URL:"/react-and-bloom/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_BASE:"https://ec-course-api.hexschool.io/v2",VITE_API_PATH:"and-bloom"},{VITE_API_BASE:OK,VITE_API_PATH:NK}=RK,MK=({item:i})=>{const t=vn(),{id:e,qty:n,total:s,product:r}=i,o=async(l,u,h)=>{var f;try{t(Xe(!0)),await Le[u?"put":"delete"](`${OK}/api/${NK}/cart/${l}`,u&&{data:{product_id:h,qty:u}}),await t(of())}catch(g){g instanceof St&&console.log((f=g==null?void 0:g.response)==null?void 0:f.data.message)}finally{t(Xe(!1))}},a=l=>{const u=l.replace(/[^0-9]+/g,"");return u&&parseInt(u)?parseInt(u):1};return v.jsx(v.Fragment,{children:v.jsx("div",{className:"border-bottom px-0 py-4",children:v.jsxs("div",{className:"d-flex",children:[v.jsx("div",{className:"image-container rounded-circle overflow-hidden border me-3",style:{width:"50px",height:"50px"},children:v.jsx("img",{src:r.imageUrl,alt:r.title,className:"w-100 h-100 object-fit-cover"})}),v.jsxs("div",{className:"flex-grow-1 flex-shrink-0 ",children:[v.jsxs("div",{className:"d-flex justify-content-between",children:[v.jsx(on,{to:`/product/${r==null?void 0:r.id}`,children:v.jsx("h6",{className:"mb-2",children:r.title})}),v.jsx("i",{className:"bi bi-x-lg opacity-75 cursor-pointer",onClick:()=>o(e,0,r.id)})]}),v.jsxs("p",{className:"mb-0 d-flex align-items-center",children:[v.jsx("span",{className:"badge rounded-pill fw-normal text-bg-secondary me-2",children:"單價"}),v.jsxs("span",{children:["$",r.price]})]}),v.jsxs("div",{className:"d-flex align-items-center mt-2",children:[v.jsx("i",{className:`bi bi-dash-square-fill fs-3 ${n===1?"cursor-default opacity-50":"cursor-pointer"}`,onClick:()=>n>1&&o(e,n-1,r.id)}),v.jsx("input",{type:"number",className:"form-control form-control-sm mx-2",value:n,onChange:l=>o(e,a(l.target.value),r.id)}),v.jsx("i",{className:"bi bi-plus-square-fill fs-3 cursor-pointer",onClick:()=>o(e,n+1,r.id)})]})]})]})})})},QO=R.memo(({id:i,label:t,children:e,errors:n})=>{const s=i.includes(".")?i.split(".").reduce((r,o)=>r==null?void 0:r[o],n):n==null?void 0:n[i];return v.jsxs(v.Fragment,{children:[v.jsxs("div",{className:"form-floating border-0 border-bottom border-black rounded-0",children:[e,v.jsx("label",{htmlFor:i,children:t})]}),s&&v.jsx("small",{className:"text-danger",children:String(s==null?void 0:s.message)})]})}),Wm=R.memo(({id:i,label:t,type:e="text",placeholder:n="請輸入內容",register:s,rules:r,errors:o})=>{const a=i.includes(".")?i.split(".").reduce((l,u)=>l==null?void 0:l[u],o):o==null?void 0:o[i];return v.jsx(v.Fragment,{children:v.jsx(QO,{id:i,label:t,errors:o,children:v.jsx("input",{id:i,type:e,placeholder:n,className:`form-control border-0 rounded-0 bg-transparent outline-0 px-0 ${a&&"is-invalid"}`,...s(i,r)})})})}),LK=R.memo(({id:i,label:t,rows:e=3,placeholder:n="請輸入內容",register:s,rules:r,errors:o})=>v.jsx(v.Fragment,{children:v.jsx(QO,{id:i,label:t,errors:o,children:v.jsx("textarea",{rows:e,id:i,placeholder:n,className:`form-control border-0 rounded-0 bg-transparent outline-0 px-0 ${o[i]&&"is-invalid"}`,...s(i,r)})})})),VK={BASE_URL:"/react-and-bloom/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_BASE:"https://ec-course-api.hexschool.io/v2",VITE_API_PATH:"and-bloom"},{VITE_API_BASE:DK,VITE_API_PATH:BK}=VK,pA={name:"",email:"",tel:"",address:"",message:""},FK=R.memo(()=>{const i=vn(),t=Pl(),{register:e,handleSubmit:n,watch:s,getValues:r,setValue:o,reset:a,control:l,formState:{errors:u}}=cf({mode:"onTouched",defaultValues:pA}),h=async f=>{var y,E;const{message:g,...p}=f;try{i(Xe(!0));const C=await Le.post(`${DK}/api/${BK}/order`,{data:{user:p,message:g}});await i(of()),a(pA),t(`/checkout/${C.data.orderId}`)}catch(C){C instanceof St&&(console.log((y=C==null?void 0:C.response)==null?void 0:y.data.message),i(en({text:(E=C==null?void 0:C.response)==null?void 0:E.data.message,type:"danger"})))}finally{i(Xe(!1))}};return v.jsxs("form",{onSubmit:n(h),children:[v.jsxs("div",{className:"row",children:[v.jsx("div",{className:"mb-3",children:v.jsx(Wm,{id:"name",label:"收件人",type:"text",placeholder:"收件人姓名",register:e,errors:u,rules:{required:"姓名必填"}})}),v.jsx("div",{className:"mb-3",children:v.jsx(Wm,{id:"tel",label:"收件人電話",type:"tel",placeholder:"收件人電話",register:e,errors:u,rules:{required:"電話必填",minLength:{value:8,message:"電話不少於 8 碼"},maxLength:{value:12,message:"電話不大於 12 碼"},pattern:{value:/^[0-9]*$/,message:"電話需為數字"}}})}),v.jsx("div",{className:"mb-3",children:v.jsx(Wm,{id:"address",label:"收件人地址",type:"text",placeholder:"收件人地址",register:e,errors:u,rules:{required:"收件人地址必填"}})}),v.jsx("div",{className:"mb-3",children:v.jsx(Wm,{id:"email",label:"Email",type:"email",placeholder:" Email",register:e,errors:u,rules:{required:"Email 必填",pattern:{value:/^\S+@\S+$/,message:"Email 格式錯誤"}}})}),v.jsx("div",{className:"",children:v.jsx(LK,{id:"message",label:"備註",placeholder:"備註",register:e,errors:u})})]}),v.jsx(qt,{type:"submit",btnStyle:"btn btn-secondary w-100 mt-5",children:"結帳"})]})}),$K=mt("div")`
  .card {
    height: 100%;
    border-radius: 20px;
    border-color: rgba(0, 0, 0, 0.3);
    background-color: white;
    overflow: hidden;
    box-shadow: 5px 5px rgba(136, 138, 140, 0.3);

    &:hover {
      background-color: #f8f9fa;
      z-index: 1000;
    }

    &:hover {
      .sub {
        opacity: 1;
      }
      .main {
        opacity: 0;
      }
    }
  }

  .main {
    opacity: 1;
    transition: opacity 0.3s ease-in;
  }

  .sub {
    opacity: 0;
    transition: opacity 0.3s ease-in;
    position: absolute;
    left: 0;
  }

  &.bg-none {
    .card {
      border-radius: 0;
      border: none;
      border-bottom: 1px solid rgba(0, 0, 0, 0.3);
      background-color: transparent;
      box-shadow: none;
      padding-bottom: 20px !important;

      &:hover {
        background-color: transparent;
      }
    }
  }
`,zK=mt("div")`
  position: relative;
  width: 30%;
  display: flex;
  align-items: stretch;
  overflow: hidden;

  img {
    object-fit: cover;
    width: 100%;
    height: 100%;
  }
`,bA=({item:i,children:t,isVerical:e,hasBg:n})=>{const{category:s,title:r,price:o,origin_price:a,imageUrl:l,imagesUrl:u}=i;return v.jsxs("div",{className:`card-body p-0 d-flex align-items-stretch ${e?"flex-column":"flex-row"}`,children:[v.jsxs(zK,{className:`flex-shrink-0 ${e?"w-100 ratio ratio-1x1":""}`,children:[v.jsx("img",{src:l,alt:`${r} image`,className:"main"}),v.jsx("img",{src:u[0],alt:`${r} image`,className:"sub"})]}),v.jsxs("div",{className:`d-flex flex-column align-items-start flex-fill ${n?"p-4":"px-4 pt-1"}`,children:[v.jsx("span",{className:"badge rounded-pill bg-primary fs-sm mb-2",children:s}),v.jsx("h5",{className:"mb-3 fw-light",children:r}),v.jsxs("div",{className:"d-flex align-items-center",children:[v.jsxs("h5",{className:`mb-0 me-3 ${o&&a&&o<a&&"text-danger"}`,children:["$ ",o]}),o&&a&&o<a?v.jsxs("small",{className:"text-muted text-decoration-line-through",children:["$ ",a]}):""]}),t]})]})},wb=({item:i,children:t,isLink:e=!1,isVerical:n=!1,hasBg:s=!0})=>{const{id:r}=i;return v.jsx($K,{className:`product-card mb-4 ${!s&&"bg-none"}`,children:e?v.jsx(on,{to:`/product/${r}`,className:"card",children:v.jsx(bA,{item:i,children:t,isVerical:n,hasBg:s})}):v.jsx("div",{className:"card",children:v.jsx(bA,{item:i,children:t,isVerical:n,hasBg:s})})},r)},jK={BASE_URL:"/react-and-bloom/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_BASE:"https://ec-course-api.hexschool.io/v2",VITE_API_PATH:"and-bloom"},{VITE_API_BASE:HK,VITE_API_PATH:UK}=jK,vb=({category:i,immediate:t=!0,isShowLoading:e=!0}={})=>{const n=vn(),[s,r]=R.useState([]),[o,a]=R.useState(1),[l,u]=R.useState(1),h=R.useCallback(async()=>{var g,p,y;const f=new URLSearchParams;f.append("page",String(o)),i&&f.append("category",i);try{e&&n(Xe(!0));const E=await Le.get(`${HK}/api/${UK}/products?${f.toString()}`);r(E.data.products),u((g=E.data.pagination)==null?void 0:g.total_pages),a((p=E.data.pagination)==null?void 0:p.current_page)}catch(E){E instanceof St&&console.log((y=E==null?void 0:E.response)==null?void 0:y.data.message)}finally{n(Xe(!1))}},[i,o,n,e]);return R.useEffect(()=>{t&&h()},[h,i,o,t]),{products:s,getProducts:h,currentPage:o,setCurrentPage:a,totalPages:l}},WK={BASE_URL:"/react-and-bloom/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_BASE:"https://ec-course-api.hexschool.io/v2",VITE_API_PATH:"and-bloom"},{VITE_API_BASE:qK,VITE_API_PATH:GK}=WK,KK=()=>{const i=vn(),{cart:t,total:e,final_total:n,coupon:s}=Zp(TO),{products:r}=vb(),o=R.useMemo(()=>r==null?void 0:r.slice(0,3),[r]),[a,l]=R.useState(""),[u,h]=R.useState({type:"",msg:""}),[f,g]=R.useState(!1),p={spaceBetween:16,slidesPerView:1,initialSlide:1,centeredSlides:!0,breakpoints:{575:{spaceBetween:32,slidesPerView:2},768:{spaceBetween:48,slidesPerView:2}}},y=(C,k)=>{C.preventDefault(),i(iE({productId:k}))},E=R.useCallback(async()=>{var C,k;try{g(!0);const T=await Le.post(`${qK}/api/${GK}/coupon`,{data:{code:a}});h({type:"success",msg:T==null?void 0:T.data.message}),i(of({isShowLoading:!1}))}catch(T){T instanceof St&&(console.log((C=T==null?void 0:T.response)==null?void 0:C.data.message),h({type:"danger",msg:(k=T==null?void 0:T.response)==null?void 0:k.data.message}))}finally{g(!1)}},[i,a]);return v.jsx(v.Fragment,{children:v.jsxs("div",{className:"container my-5",children:[v.jsxs("div",{className:"row bg-white g-0",children:[v.jsxs("div",{className:`p-4 p-lg-5 ${t.length?"col-md-7":""}`,children:[v.jsxs("div",{className:"d-flex align-items-center pb-3 mb-4",children:[v.jsx("h3",{className:"title fs-2 mb-0 me-3",children:"Your Cart"}),v.jsx("small",{className:"mt-2",children:"購｜物｜車"})]}),t.length?v.jsxs("div",{className:"mb-4",children:[t.map(C=>v.jsx(MK,{item:C},C.id)),v.jsxs("div",{className:"text-end mt-5 mb-3",children:[v.jsxs("div",{className:"input-group",children:[v.jsx("input",{type:"text",className:"form-control form-control-sm w-auto",placeholder:"請輸入優惠券代碼",value:a,onChange:C=>l(C.target.value)}),v.jsxs("button",{className:"btn btn-sm btn-secondary",type:"button",onClick:E,disabled:!a,children:["使用優惠券",f&&v.jsx("span",{className:"spinner-grow spinner-grow-sm ms-2"})]})]}),v.jsxs("div",{className:"d-flex align-items-center justify-content-between mt-1",children:[v.jsx("span",{className:"fs-tiny",children:"* 加入商品需重新套用優惠券"}),u.type?v.jsx("small",{className:`ms-auto fs-tiny text-${u.type}`,children:u.msg}):""]})]}),v.jsx("div",{className:"card",children:v.jsxs("div",{className:"card-body p-2",children:[v.jsxs("div",{className:"border-bottom mb-2 pb-2 d-flex align-items-center justify-content-between",children:[v.jsx("small",{children:"小計"}),v.jsxs("small",{children:["$",e]})]}),v.jsxs("div",{className:"border-bottom mb-2 pb-2 d-flex align-items-start justify-content-between",children:[v.jsxs("small",{children:["優惠券折扣",s?`（${s.title} ${s.percent} 折）`:""]}),v.jsx("small",{className:"text-danger",children:e-Math.round(n)>0?`-${e-Math.round(n)}`:""})]}),v.jsxs("div",{className:"d-flex align-items-center justify-content-between",children:[v.jsx("strong",{children:"總金額"}),v.jsxs("strong",{children:["$",Math.round(n)]})]})]})})]}):v.jsx("p",{className:"text-center opacity-75 mt-5",children:"購物車目前是空的，看看以下推薦商品 ↓"})]}),t.length?v.jsxs("div",{className:"p-4 p-lg-5 col-md-5",style:{backgroundColor:"var(--tertiary)"},children:[v.jsxs("div",{className:"d-flex align-items-center pb-3 mb-4",children:[v.jsx("h3",{className:"title fs-2 mb-0 me-3",children:"Checkout"}),v.jsx("small",{className:"mt-2",children:"結｜帳"})]}),v.jsx(FK,{})]}):""]}),v.jsxs("div",{className:"py-5 mt-2",children:[v.jsxs("div",{className:"d-flex flex-column align-items-center text-center",children:[v.jsx("h5",{className:"title text-center fs-4 mb-2",children:"＼ Recommendations ／"}),v.jsx("small",{className:"d-block",children:"精選商品"})]}),o.length?v.jsx(hp,{...p,className:"py-4",children:o.map(C=>v.jsx(Hc,{className:"align-self-center",children:v.jsx(wb,{isLink:!0,item:C,children:v.jsx("button",{type:"button",className:"btn btn-sm btn-secondary rounded-pill px-4 mt-3",onClick:k=>y(k,C.id),children:"加入購物車"})})},C.id))}):""]})]})})};function yb(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function YK(i,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(i,n.key,n)}}function _b(i,t,e){return t&&YK(i.prototype,t),i}function ZK(i,t,e){return t in i?Object.defineProperty(i,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):i[t]=e,i}function wA(i,t){var e=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(i,s).enumerable})),e.push.apply(e,n)}return e}function A0(i){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?wA(Object(e),!0).forEach(function(n){ZK(i,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(e)):wA(Object(e)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(e,n))})}return i}function eN(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(t&&t.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),t&&cy(i,t)}function Zs(i){return Zs=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Zs(i)}function cy(i,t){return cy=Object.setPrototypeOf||function(n,s){return n.__proto__=s,n},cy(i,t)}function XK(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function tN(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function JK(i,t){return t&&(typeof t=="object"||typeof t=="function")?t:tN(i)}function nN(i){var t=XK();return function(){var n=Zs(i),s;if(t){var r=Zs(this).constructor;s=Reflect.construct(n,arguments,r)}else s=n.apply(this,arguments);return JK(this,s)}}function QK(i,t){for(;!Object.prototype.hasOwnProperty.call(i,t)&&(i=Zs(i),i!==null););return i}function ro(i,t,e){return typeof Reflect<"u"&&Reflect.get?ro=Reflect.get:ro=function(s,r,o){var a=QK(s,r);if(a){var l=Object.getOwnPropertyDescriptor(a,r);return l.get?l.get.call(o):l.value}},ro(i,t,e||i)}function Uc(i,t){return nY(i)||sY(i,t)||iN(i,t)||oY()}function eY(i){return tY(i)||iY(i)||iN(i)||rY()}function tY(i){if(Array.isArray(i))return uy(i)}function nY(i){if(Array.isArray(i))return i}function iY(i){if(typeof Symbol<"u"&&Symbol.iterator in Object(i))return Array.from(i)}function sY(i,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(i)))){var e=[],n=!0,s=!1,r=void 0;try{for(var o=i[Symbol.iterator](),a;!(n=(a=o.next()).done)&&(e.push(a.value),!(t&&e.length===t));n=!0);}catch(l){s=!0,r=l}finally{try{!n&&o.return!=null&&o.return()}finally{if(s)throw r}}return e}}function iN(i,t){if(i){if(typeof i=="string")return uy(i,t);var e=Object.prototype.toString.call(i).slice(8,-1);if(e==="Object"&&i.constructor&&(e=i.constructor.name),e==="Map"||e==="Set")return Array.from(i);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return uy(i,t)}}function uy(i,t){(t==null||t>i.length)&&(t=i.length);for(var e=0,n=new Array(t);e<t;e++)n[e]=i[e];return n}function rY(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oY(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Zc={el:document,name:"scroll",offset:[0,0],repeat:!1,smooth:!1,initPosition:{x:0,y:0},direction:"vertical",gestureDirection:"vertical",reloadOnContextChange:!1,lerp:.1,class:"is-inview",scrollbarContainer:!1,scrollbarClass:"c-scrollbar",scrollingClass:"has-scroll-scrolling",draggingClass:"has-scroll-dragging",smoothClass:"has-scroll-smooth",initClass:"has-scroll-init",getSpeed:!1,getDirection:!1,scrollFromAnywhere:!1,multiplier:1,firefoxMultiplier:50,touchMultiplier:2,resetNativeScroll:!0,tablet:{smooth:!1,direction:"vertical",gestureDirection:"vertical",breakpoint:1024},smartphone:{smooth:!1,direction:"vertical",gestureDirection:"vertical"}},sN=function(){function i(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};yb(this,i),Object.assign(this,Zc,t),this.smartphone=Zc.smartphone,t.smartphone&&Object.assign(this.smartphone,t.smartphone),this.tablet=Zc.tablet,t.tablet&&Object.assign(this.tablet,t.tablet),this.namespace="locomotive",this.html=document.documentElement,this.windowHeight=window.innerHeight,this.windowWidth=window.innerWidth,this.windowMiddle={x:this.windowWidth/2,y:this.windowHeight/2},this.els={},this.currentElements={},this.listeners={},this.hasScrollTicking=!1,this.hasCallEventSet=!1,this.checkScroll=this.checkScroll.bind(this),this.checkResize=this.checkResize.bind(this),this.checkEvent=this.checkEvent.bind(this),this.instance={scroll:{x:0,y:0},limit:{x:this.html.offsetWidth,y:this.html.offsetHeight},currentElements:this.currentElements},this.isMobile?this.isTablet?this.context="tablet":this.context="smartphone":this.context="desktop",this.isMobile&&(this.direction=this[this.context].direction),this.direction==="horizontal"?this.directionAxis="x":this.directionAxis="y",this.getDirection&&(this.instance.direction=null),this.getDirection&&(this.instance.speed=0),this.html.classList.add(this.initClass),window.addEventListener("resize",this.checkResize,!1)}return _b(i,[{key:"init",value:function(){this.initEvents()}},{key:"checkScroll",value:function(){this.dispatchScroll()}},{key:"checkResize",value:function(){var e=this;this.resizeTick||(this.resizeTick=!0,requestAnimationFrame(function(){e.resize(),e.resizeTick=!1}))}},{key:"resize",value:function(){}},{key:"checkContext",value:function(){if(this.reloadOnContextChange){this.isMobile=/Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1||this.windowWidth<this.tablet.breakpoint,this.isTablet=this.isMobile&&this.windowWidth>=this.tablet.breakpoint;var e=this.context;if(this.isMobile?this.isTablet?this.context="tablet":this.context="smartphone":this.context="desktop",e!=this.context){var n=e=="desktop"?this.smooth:this[e].smooth,s=this.context=="desktop"?this.smooth:this[this.context].smooth;n!=s&&window.location.reload()}}}},{key:"initEvents",value:function(){var e=this;this.scrollToEls=this.el.querySelectorAll("[data-".concat(this.name,"-to]")),this.setScrollTo=this.setScrollTo.bind(this),this.scrollToEls.forEach(function(n){n.addEventListener("click",e.setScrollTo,!1)})}},{key:"setScrollTo",value:function(e){e.preventDefault(),this.scrollTo(e.currentTarget.getAttribute("data-".concat(this.name,"-href"))||e.currentTarget.getAttribute("href"),{offset:e.currentTarget.getAttribute("data-".concat(this.name,"-offset"))})}},{key:"addElements",value:function(){}},{key:"detectElements",value:function(e){var n=this,s=this.instance.scroll.y,r=s+this.windowHeight,o=this.instance.scroll.x,a=o+this.windowWidth;Object.entries(this.els).forEach(function(l){var u=Uc(l,2),h=u[0],f=u[1];if(f&&(!f.inView||e)&&(n.direction==="horizontal"?a>=f.left&&o<f.right&&n.setInView(f,h):r>=f.top&&s<f.bottom&&n.setInView(f,h)),f&&f.inView)if(n.direction==="horizontal"){var g=f.right-f.left;f.progress=(n.instance.scroll.x-(f.left-n.windowWidth))/(g+n.windowWidth),(a<f.left||o>f.right)&&n.setOutOfView(f,h)}else{var p=f.bottom-f.top;f.progress=(n.instance.scroll.y-(f.top-n.windowHeight))/(p+n.windowHeight),(r<f.top||s>f.bottom)&&n.setOutOfView(f,h)}}),this.hasScrollTicking=!1}},{key:"setInView",value:function(e,n){this.els[n].inView=!0,e.el.classList.add(e.class),this.currentElements[n]=e,e.call&&this.hasCallEventSet&&(this.dispatchCall(e,"enter"),e.repeat||(this.els[n].call=!1))}},{key:"setOutOfView",value:function(e,n){var s=this;this.els[n].inView=!1,Object.keys(this.currentElements).forEach(function(r){r===n&&delete s.currentElements[r]}),e.call&&this.hasCallEventSet&&this.dispatchCall(e,"exit"),e.repeat&&e.el.classList.remove(e.class)}},{key:"dispatchCall",value:function(e,n){this.callWay=n,this.callValue=e.call.split(",").map(function(r){return r.trim()}),this.callObj=e,this.callValue.length==1&&(this.callValue=this.callValue[0]);var s=new Event(this.namespace+"call");this.el.dispatchEvent(s)}},{key:"dispatchScroll",value:function(){var e=new Event(this.namespace+"scroll");this.el.dispatchEvent(e)}},{key:"setEvents",value:function(e,n){this.listeners[e]||(this.listeners[e]=[]);var s=this.listeners[e];s.push(n),s.length===1&&this.el.addEventListener(this.namespace+e,this.checkEvent,!1),e==="call"&&(this.hasCallEventSet=!0,this.detectElements(!0))}},{key:"unsetEvents",value:function(e,n){if(this.listeners[e]){var s=this.listeners[e],r=s.indexOf(n);r<0||(s.splice(r,1),s.index===0&&this.el.removeEventListener(this.namespace+e,this.checkEvent,!1))}}},{key:"checkEvent",value:function(e){var n=this,s=e.type.replace(this.namespace,""),r=this.listeners[s];!r||r.length===0||r.forEach(function(o){switch(s){case"scroll":return o(n.instance);case"call":return o(n.callValue,n.callWay,n.callObj);default:return o()}})}},{key:"startScroll",value:function(){}},{key:"stopScroll",value:function(){}},{key:"setScroll",value:function(e,n){this.instance.scroll={x:0,y:0}}},{key:"destroy",value:function(){var e=this;window.removeEventListener("resize",this.checkResize,!1),Object.keys(this.listeners).forEach(function(n){e.el.removeEventListener(e.namespace+n,e.checkEvent,!1)}),this.listeners={},this.scrollToEls.forEach(function(n){n.removeEventListener("click",e.setScrollTo,!1)}),this.html.classList.remove(this.initClass)}}]),i}(),aY=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function rN(i,t){return t={exports:{}},i(t,t.exports),t.exports}var oN=rN(function(i,t){(function(){function e(){var n=window,s=document;if("scrollBehavior"in s.documentElement.style&&n.__forceSmoothScrollPolyfill__!==!0)return;var r=n.HTMLElement||n.Element,o=468,a={scroll:n.scroll||n.scrollTo,scrollBy:n.scrollBy,elementScroll:r.prototype.scroll||f,scrollIntoView:r.prototype.scrollIntoView},l=n.performance&&n.performance.now?n.performance.now.bind(n.performance):Date.now;function u(S){var O=["MSIE ","Trident/","Edge/"];return new RegExp(O.join("|")).test(S)}var h=u(n.navigator.userAgent)?1:0;function f(S,O){this.scrollLeft=S,this.scrollTop=O}function g(S){return .5*(1-Math.cos(Math.PI*S))}function p(S){if(S===null||typeof S!="object"||S.behavior===void 0||S.behavior==="auto"||S.behavior==="instant")return!0;if(typeof S=="object"&&S.behavior==="smooth")return!1;throw new TypeError("behavior member of ScrollOptions "+S.behavior+" is not a valid value for enumeration ScrollBehavior.")}function y(S,O){if(O==="Y")return S.clientHeight+h<S.scrollHeight;if(O==="X")return S.clientWidth+h<S.scrollWidth}function E(S,O){var A=n.getComputedStyle(S,null)["overflow"+O];return A==="auto"||A==="scroll"}function C(S){var O=y(S,"Y")&&E(S,"Y"),A=y(S,"X")&&E(S,"X");return O||A}function k(S){for(;S!==s.body&&C(S)===!1;)S=S.parentNode||S.host;return S}function T(S){var O=l(),A,N,L,M=(O-S.startTime)/o;M=M>1?1:M,A=g(M),N=S.startX+(S.x-S.startX)*A,L=S.startY+(S.y-S.startY)*A,S.method.call(S.scrollable,N,L),(N!==S.x||L!==S.y)&&n.requestAnimationFrame(T.bind(n,S))}function P(S,O,A){var N,L,M,B,U=l();S===s.body?(N=n,L=n.scrollX||n.pageXOffset,M=n.scrollY||n.pageYOffset,B=a.scroll):(N=S,L=S.scrollLeft,M=S.scrollTop,B=f),T({scrollable:N,method:B,startTime:U,startX:L,startY:M,x:O,y:A})}n.scroll=n.scrollTo=function(){if(arguments[0]!==void 0){if(p(arguments[0])===!0){a.scroll.call(n,arguments[0].left!==void 0?arguments[0].left:typeof arguments[0]!="object"?arguments[0]:n.scrollX||n.pageXOffset,arguments[0].top!==void 0?arguments[0].top:arguments[1]!==void 0?arguments[1]:n.scrollY||n.pageYOffset);return}P.call(n,s.body,arguments[0].left!==void 0?~~arguments[0].left:n.scrollX||n.pageXOffset,arguments[0].top!==void 0?~~arguments[0].top:n.scrollY||n.pageYOffset)}},n.scrollBy=function(){if(arguments[0]!==void 0){if(p(arguments[0])){a.scrollBy.call(n,arguments[0].left!==void 0?arguments[0].left:typeof arguments[0]!="object"?arguments[0]:0,arguments[0].top!==void 0?arguments[0].top:arguments[1]!==void 0?arguments[1]:0);return}P.call(n,s.body,~~arguments[0].left+(n.scrollX||n.pageXOffset),~~arguments[0].top+(n.scrollY||n.pageYOffset))}},r.prototype.scroll=r.prototype.scrollTo=function(){if(arguments[0]!==void 0){if(p(arguments[0])===!0){if(typeof arguments[0]=="number"&&arguments[1]===void 0)throw new SyntaxError("Value could not be converted");a.elementScroll.call(this,arguments[0].left!==void 0?~~arguments[0].left:typeof arguments[0]!="object"?~~arguments[0]:this.scrollLeft,arguments[0].top!==void 0?~~arguments[0].top:arguments[1]!==void 0?~~arguments[1]:this.scrollTop);return}var S=arguments[0].left,O=arguments[0].top;P.call(this,this,typeof S>"u"?this.scrollLeft:~~S,typeof O>"u"?this.scrollTop:~~O)}},r.prototype.scrollBy=function(){if(arguments[0]!==void 0){if(p(arguments[0])===!0){a.elementScroll.call(this,arguments[0].left!==void 0?~~arguments[0].left+this.scrollLeft:~~arguments[0]+this.scrollLeft,arguments[0].top!==void 0?~~arguments[0].top+this.scrollTop:~~arguments[1]+this.scrollTop);return}this.scroll({left:~~arguments[0].left+this.scrollLeft,top:~~arguments[0].top+this.scrollTop,behavior:arguments[0].behavior})}},r.prototype.scrollIntoView=function(){if(p(arguments[0])===!0){a.scrollIntoView.call(this,arguments[0]===void 0?!0:arguments[0]);return}var S=k(this),O=S.getBoundingClientRect(),A=this.getBoundingClientRect();S!==s.body?(P.call(this,S,S.scrollLeft+A.left-O.left,S.scrollTop+A.top-O.top),n.getComputedStyle(S).position!=="fixed"&&n.scrollBy({left:O.left,top:O.top,behavior:"smooth"})):n.scrollBy({left:A.left,top:A.top,behavior:"smooth"})}}i.exports={polyfill:e}})()});oN.polyfill;var lY=function(i){eN(e,i);var t=nN(e);function e(){var n,s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return yb(this,e),n=t.call(this,s),n.resetNativeScroll&&(history.scrollRestoration&&(history.scrollRestoration="manual"),window.scrollTo(0,0)),window.addEventListener("scroll",n.checkScroll,!1),window.smoothscrollPolyfill===void 0&&(window.smoothscrollPolyfill=oN,window.smoothscrollPolyfill.polyfill()),n}return _b(e,[{key:"init",value:function(){this.instance.scroll.y=window.pageYOffset,this.addElements(),this.detectElements(),ro(Zs(e.prototype),"init",this).call(this)}},{key:"checkScroll",value:function(){var s=this;ro(Zs(e.prototype),"checkScroll",this).call(this),this.getDirection&&this.addDirection(),this.getSpeed&&(this.addSpeed(),this.speedTs=Date.now()),this.instance.scroll.y=window.pageYOffset,Object.entries(this.els).length&&(this.hasScrollTicking||(requestAnimationFrame(function(){s.detectElements()}),this.hasScrollTicking=!0))}},{key:"addDirection",value:function(){window.pageYOffset>this.instance.scroll.y?this.instance.direction!=="down"&&(this.instance.direction="down"):window.pageYOffset<this.instance.scroll.y&&this.instance.direction!=="up"&&(this.instance.direction="up")}},{key:"addSpeed",value:function(){window.pageYOffset!=this.instance.scroll.y?this.instance.speed=(window.pageYOffset-this.instance.scroll.y)/Math.max(1,Date.now()-this.speedTs):this.instance.speed=0}},{key:"resize",value:function(){Object.entries(this.els).length&&(this.windowHeight=window.innerHeight,this.updateElements())}},{key:"addElements",value:function(){var s=this;this.els={};var r=this.el.querySelectorAll("[data-"+this.name+"]");r.forEach(function(o,a){o.getBoundingClientRect();var l=o.dataset[s.name+"Class"]||s.class,u=typeof o.dataset[s.name+"Id"]=="string"?o.dataset[s.name+"Id"]:a,h,f,g=typeof o.dataset[s.name+"Offset"]=="string"?o.dataset[s.name+"Offset"].split(","):s.offset,p=o.dataset[s.name+"Repeat"],y=o.dataset[s.name+"Call"],E=o.dataset[s.name+"Target"],C;E!==void 0?C=document.querySelector("".concat(E)):C=o;var k=C.getBoundingClientRect();h=k.top+s.instance.scroll.y,f=k.left+s.instance.scroll.x;var T=h+C.offsetHeight,P=f+C.offsetWidth;p=="false"?p=!1:p!=null?p=!0:p=s.repeat;var S=s.getRelativeOffset(g);h=h+S[0],T=T-S[1];var O={el:o,targetEl:C,id:u,class:l,top:h,bottom:T,left:f,right:P,offset:g,progress:0,repeat:p,inView:!1,call:y};s.els[u]=O,o.classList.contains(l)&&s.setInView(s.els[u],u)})}},{key:"updateElements",value:function(){var s=this;Object.entries(this.els).forEach(function(r){var o=Uc(r,2),a=o[0],l=o[1],u=l.targetEl.getBoundingClientRect().top+s.instance.scroll.y,h=u+l.targetEl.offsetHeight,f=s.getRelativeOffset(l.offset);s.els[a].top=u+f[0],s.els[a].bottom=h-f[1]}),this.hasScrollTicking=!1}},{key:"getRelativeOffset",value:function(s){var r=[0,0];if(s)for(var o=0;o<s.length;o++)typeof s[o]=="string"?s[o].includes("%")?r[o]=parseInt(s[o].replace("%","")*this.windowHeight/100):r[o]=parseInt(s[o]):r[o]=s[o];return r}},{key:"scrollTo",value:function(s){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=parseInt(r.offset)||0,a=r.callback?r.callback:!1;if(typeof s=="string"){if(s==="top")s=this.html;else if(s==="bottom")s=this.html.offsetHeight-window.innerHeight;else if(s=document.querySelector(s),!s)return}else if(typeof s=="number")s=parseInt(s);else if(!(s&&s.tagName)){console.warn("`target` parameter is not valid");return}typeof s!="number"?o=s.getBoundingClientRect().top+o+this.instance.scroll.y:o=s+o;var l=function(){return parseInt(window.pageYOffset)===parseInt(o)};if(a)if(l()){a();return}else{var u=function h(){l()&&(window.removeEventListener("scroll",h),a())};window.addEventListener("scroll",u)}window.scrollTo({top:o,behavior:r.duration===0?"auto":"smooth"})}},{key:"update",value:function(){this.addElements(),this.detectElements()}},{key:"destroy",value:function(){ro(Zs(e.prototype),"destroy",this).call(this),window.removeEventListener("scroll",this.checkScroll,!1)}}]),e}(sN);/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var vA=Object.getOwnPropertySymbols,cY=Object.prototype.hasOwnProperty,uY=Object.prototype.propertyIsEnumerable;function dY(i){if(i==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(i)}function hY(){try{if(!Object.assign)return!1;var i=new String("abc");if(i[5]="de",Object.getOwnPropertyNames(i)[0]==="5")return!1;for(var t={},e=0;e<10;e++)t["_"+String.fromCharCode(e)]=e;var n=Object.getOwnPropertyNames(t).map(function(r){return t[r]});if(n.join("")!=="0123456789")return!1;var s={};return"abcdefghijklmnopqrst".split("").forEach(function(r){s[r]=r}),Object.keys(Object.assign({},s)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var fY=hY()?Object.assign:function(i,t){for(var e,n=dY(i),s,r=1;r<arguments.length;r++){e=Object(arguments[r]);for(var o in e)cY.call(e,o)&&(n[o]=e[o]);if(vA){s=vA(e);for(var a=0;a<s.length;a++)uY.call(e,s[a])&&(n[s[a]]=e[s[a]])}}return n};function aN(){}aN.prototype={on:function(i,t,e){var n=this.e||(this.e={});return(n[i]||(n[i]=[])).push({fn:t,ctx:e}),this},once:function(i,t,e){var n=this;function s(){n.off(i,s),t.apply(e,arguments)}return s._=t,this.on(i,s,e)},emit:function(i){var t=[].slice.call(arguments,1),e=((this.e||(this.e={}))[i]||[]).slice(),n=0,s=e.length;for(n;n<s;n++)e[n].fn.apply(e[n].ctx,t);return this},off:function(i,t){var e=this.e||(this.e={}),n=e[i],s=[];if(n&&t)for(var r=0,o=n.length;r<o;r++)n[r].fn!==t&&n[r].fn._!==t&&s.push(n[r]);return s.length?e[i]=s:delete e[i],this}};var mY=aN,gY=rN(function(i,t){(function(){var e;e=t!==null?t:this,e.Lethargy=function(){function n(s,r,o,a){this.stability=s!=null?Math.abs(s):8,this.sensitivity=r!=null?1+Math.abs(r):100,this.tolerance=o!=null?1+Math.abs(o):1.1,this.delay=a??150,this.lastUpDeltas=(function(){var l,u,h;for(h=[],l=1,u=this.stability*2;1<=u?l<=u:l>=u;1<=u?l++:l--)h.push(null);return h}).call(this),this.lastDownDeltas=(function(){var l,u,h;for(h=[],l=1,u=this.stability*2;1<=u?l<=u:l>=u;1<=u?l++:l--)h.push(null);return h}).call(this),this.deltasTimestamp=(function(){var l,u,h;for(h=[],l=1,u=this.stability*2;1<=u?l<=u:l>=u;1<=u?l++:l--)h.push(null);return h}).call(this)}return n.prototype.check=function(s){var r;return s=s.originalEvent||s,s.wheelDelta!=null?r=s.wheelDelta:s.deltaY!=null?r=s.deltaY*-40:(s.detail!=null||s.detail===0)&&(r=s.detail*-40),this.deltasTimestamp.push(Date.now()),this.deltasTimestamp.shift(),r>0?(this.lastUpDeltas.push(r),this.lastUpDeltas.shift(),this.isInertia(1)):(this.lastDownDeltas.push(r),this.lastDownDeltas.shift(),this.isInertia(-1))},n.prototype.isInertia=function(s){var r,o,a,l,u,h,f;return r=s===-1?this.lastDownDeltas:this.lastUpDeltas,r[0]===null?s:this.deltasTimestamp[this.stability*2-2]+this.delay>Date.now()&&r[0]===r[this.stability*2-1]?!1:(a=r.slice(0,this.stability),o=r.slice(this.stability,this.stability*2),f=a.reduce(function(g,p){return g+p}),u=o.reduce(function(g,p){return g+p}),h=f/a.length,l=u/o.length,Math.abs(h)<Math.abs(l*this.tolerance)&&this.sensitivity<Math.abs(l)?s:!1)},n.prototype.showLastUpDeltas=function(){return this.lastUpDeltas},n.prototype.showLastDownDeltas=function(){return this.lastDownDeltas},n}()}).call(aY)}),Hi=function(){return{hasWheelEvent:"onwheel"in document,hasMouseWheelEvent:"onmousewheel"in document,hasTouch:"ontouchstart"in window||window.TouchEvent||window.DocumentTouch&&document instanceof DocumentTouch,hasTouchWin:navigator.msMaxTouchPoints&&navigator.msMaxTouchPoints>1,hasPointer:!!window.navigator.msPointerEnabled,hasKeyDown:"onkeydown"in document,isFirefox:navigator.userAgent.indexOf("Firefox")>-1}}(),pY=Object.prototype.toString,bY=Object.prototype.hasOwnProperty,wY=function(i){if(!i)return console.warn("bindAll requires at least one argument.");var t=Array.prototype.slice.call(arguments,1);if(t.length===0)for(var e in i)bY.call(i,e)&&typeof i[e]=="function"&&pY.call(i[e])=="[object Function]"&&t.push(e);for(var n=0;n<t.length;n++){var s=t[n];i[s]=vY(i[s],i)}};function vY(i,t){return function(){return i.apply(t,arguments)}}var yY=gY.Lethargy,ul="virtualscroll",_Y=ss,Td={LEFT:37,UP:38,RIGHT:39,DOWN:40,SPACE:32};function ss(i){wY(this,"_onWheel","_onMouseWheel","_onTouchStart","_onTouchMove","_onKeyDown"),this.el=window,i&&i.el&&(this.el=i.el,delete i.el),this.options=fY({mouseMultiplier:1,touchMultiplier:2,firefoxMultiplier:15,keyStep:120,preventTouch:!1,unpreventTouchClass:"vs-touchmove-allowed",limitInertia:!1,useKeyboard:!0,useTouch:!0},i),this.options.limitInertia&&(this._lethargy=new yY),this._emitter=new mY,this._event={y:0,x:0,deltaX:0,deltaY:0},this.touchStartX=null,this.touchStartY=null,this.bodyTouchAction=null,this.options.passive!==void 0&&(this.listenerOptions={passive:this.options.passive})}ss.prototype._notify=function(i){var t=this._event;t.x+=t.deltaX,t.y+=t.deltaY,this._emitter.emit(ul,{x:t.x,y:t.y,deltaX:t.deltaX,deltaY:t.deltaY,originalEvent:i})};ss.prototype._onWheel=function(i){var t=this.options;if(!(this._lethargy&&this._lethargy.check(i)===!1)){var e=this._event;e.deltaX=i.wheelDeltaX||i.deltaX*-1,e.deltaY=i.wheelDeltaY||i.deltaY*-1,Hi.isFirefox&&i.deltaMode==1&&(e.deltaX*=t.firefoxMultiplier,e.deltaY*=t.firefoxMultiplier),e.deltaX*=t.mouseMultiplier,e.deltaY*=t.mouseMultiplier,this._notify(i)}};ss.prototype._onMouseWheel=function(i){if(!(this.options.limitInertia&&this._lethargy.check(i)===!1)){var t=this._event;t.deltaX=i.wheelDeltaX?i.wheelDeltaX:0,t.deltaY=i.wheelDeltaY?i.wheelDeltaY:i.wheelDelta,this._notify(i)}};ss.prototype._onTouchStart=function(i){var t=i.targetTouches?i.targetTouches[0]:i;this.touchStartX=t.pageX,this.touchStartY=t.pageY};ss.prototype._onTouchMove=function(i){var t=this.options;t.preventTouch&&!i.target.classList.contains(t.unpreventTouchClass)&&i.preventDefault();var e=this._event,n=i.targetTouches?i.targetTouches[0]:i;e.deltaX=(n.pageX-this.touchStartX)*t.touchMultiplier,e.deltaY=(n.pageY-this.touchStartY)*t.touchMultiplier,this.touchStartX=n.pageX,this.touchStartY=n.pageY,this._notify(i)};ss.prototype._onKeyDown=function(i){var t=this._event;t.deltaX=t.deltaY=0;var e=window.innerHeight-40;switch(i.keyCode){case Td.LEFT:case Td.UP:t.deltaY=this.options.keyStep;break;case Td.RIGHT:case Td.DOWN:t.deltaY=-this.options.keyStep;break;case i.shiftKey:t.deltaY=e;break;case Td.SPACE:t.deltaY=-e;break;default:return}this._notify(i)};ss.prototype._bind=function(){Hi.hasWheelEvent&&this.el.addEventListener("wheel",this._onWheel,this.listenerOptions),Hi.hasMouseWheelEvent&&this.el.addEventListener("mousewheel",this._onMouseWheel,this.listenerOptions),Hi.hasTouch&&this.options.useTouch&&(this.el.addEventListener("touchstart",this._onTouchStart,this.listenerOptions),this.el.addEventListener("touchmove",this._onTouchMove,this.listenerOptions)),Hi.hasPointer&&Hi.hasTouchWin&&(this.bodyTouchAction=document.body.style.msTouchAction,document.body.style.msTouchAction="none",this.el.addEventListener("MSPointerDown",this._onTouchStart,!0),this.el.addEventListener("MSPointerMove",this._onTouchMove,!0)),Hi.hasKeyDown&&this.options.useKeyboard&&document.addEventListener("keydown",this._onKeyDown)};ss.prototype._unbind=function(){Hi.hasWheelEvent&&this.el.removeEventListener("wheel",this._onWheel),Hi.hasMouseWheelEvent&&this.el.removeEventListener("mousewheel",this._onMouseWheel),Hi.hasTouch&&(this.el.removeEventListener("touchstart",this._onTouchStart),this.el.removeEventListener("touchmove",this._onTouchMove)),Hi.hasPointer&&Hi.hasTouchWin&&(document.body.style.msTouchAction=this.bodyTouchAction,this.el.removeEventListener("MSPointerDown",this._onTouchStart,!0),this.el.removeEventListener("MSPointerMove",this._onTouchMove,!0)),Hi.hasKeyDown&&this.options.useKeyboard&&document.removeEventListener("keydown",this._onKeyDown)};ss.prototype.on=function(i,t){this._emitter.on(ul,i,t);var e=this._emitter.e;e&&e[ul]&&e[ul].length===1&&this._bind()};ss.prototype.off=function(i,t){this._emitter.off(ul,i,t);var e=this._emitter.e;(!e[ul]||e[ul].length<=0)&&this._unbind()};ss.prototype.reset=function(){var i=this._event;i.x=0,i.y=0};ss.prototype.destroy=function(){this._emitter.off(),this._unbind()};function P0(i,t,e){return(1-e)*i+e*t}function fs(i){var t={};if(window.getComputedStyle){var e=getComputedStyle(i),n=e.transform||e.webkitTransform||e.mozTransform,s=n.match(/^matrix3d\((.+)\)$/);return s?(t.x=s?parseFloat(s[1].split(", ")[12]):0,t.y=s?parseFloat(s[1].split(", ")[13]):0):(s=n.match(/^matrix\((.+)\)$/),t.x=s?parseFloat(s[1].split(", ")[4]):0,t.y=s?parseFloat(s[1].split(", ")[5]):0),t}}function I0(i){for(var t=[];i&&i!==document;i=i.parentNode)t.push(i);return t}var EY=4,CY=.001,xY=1e-7,kY=10,Ud=11,qm=1/(Ud-1),TY=typeof Float32Array=="function";function lN(i,t){return 1-3*t+3*i}function cN(i,t){return 3*t-6*i}function uN(i){return 3*i}function fp(i,t,e){return((lN(t,e)*i+cN(t,e))*i+uN(t))*i}function dN(i,t,e){return 3*lN(t,e)*i*i+2*cN(t,e)*i+uN(t)}function SY(i,t,e,n,s){var r,o,a=0;do o=t+(e-t)/2,r=fp(o,n,s)-i,r>0?e=o:t=o;while(Math.abs(r)>xY&&++a<kY);return o}function AY(i,t,e,n){for(var s=0;s<EY;++s){var r=dN(t,e,n);if(r===0)return t;var o=fp(t,e,n)-i;t-=o/r}return t}function PY(i){return i}var IY=function(t,e,n,s){if(!(0<=t&&t<=1&&0<=n&&n<=1))throw new Error("bezier x values must be in [0, 1] range");if(t===e&&n===s)return PY;for(var r=TY?new Float32Array(Ud):new Array(Ud),o=0;o<Ud;++o)r[o]=fp(o*qm,t,n);function a(l){for(var u=0,h=1,f=Ud-1;h!==f&&r[h]<=l;++h)u+=qm;--h;var g=(l-r[h])/(r[h+1]-r[h]),p=u+g*qm,y=dN(p,t,n);return y>=CY?AY(l,p,t,n):y===0?p:SY(l,u,u+qm,t,n)}return function(u){return u===0?0:u===1?1:fp(a(u),e,s)}},qr={LEFT:37,UP:38,RIGHT:39,DOWN:40,SPACE:32,TAB:9,PAGEUP:33,PAGEDOWN:34,HOME:36,END:35},RY=function(i){eN(e,i);var t=nN(e);function e(){var n,s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return yb(this,e),history.scrollRestoration&&(history.scrollRestoration="manual"),window.scrollTo(0,0),n=t.call(this,s),n.inertia&&(n.lerp=n.inertia*.1),n.isScrolling=!1,n.isDraggingScrollbar=!1,n.isTicking=!1,n.hasScrollTicking=!1,n.parallaxElements={},n.stop=!1,n.scrollbarContainer=s.scrollbarContainer,n.checkKey=n.checkKey.bind(tN(n)),window.addEventListener("keydown",n.checkKey,!1),n}return _b(e,[{key:"init",value:function(){var s=this;this.html.classList.add(this.smoothClass),this.html.setAttribute("data-".concat(this.name,"-direction"),this.direction),this.instance=A0({delta:{x:this.initPosition.x,y:this.initPosition.y},scroll:{x:this.initPosition.x,y:this.initPosition.y}},this.instance),this.vs=new _Y({el:this.scrollFromAnywhere?document:this.el,mouseMultiplier:navigator.platform.indexOf("Win")>-1?1:.4,firefoxMultiplier:this.firefoxMultiplier,touchMultiplier:this.touchMultiplier,useKeyboard:!1,passive:!0}),this.vs.on(function(r){s.stop||s.isDraggingScrollbar||requestAnimationFrame(function(){s.updateDelta(r),s.isScrolling||s.startScrolling()})}),this.setScrollLimit(),this.initScrollBar(),this.addSections(),this.addElements(),this.checkScroll(!0),this.transformElements(!0,!0),ro(Zs(e.prototype),"init",this).call(this)}},{key:"setScrollLimit",value:function(){if(this.instance.limit.y=this.el.offsetHeight-this.windowHeight,this.direction==="horizontal"){for(var s=0,r=this.el.children,o=0;o<r.length;o++)s+=r[o].offsetWidth;this.instance.limit.x=s-this.windowWidth}}},{key:"startScrolling",value:function(){this.startScrollTs=Date.now(),this.isScrolling=!0,this.checkScroll(),this.html.classList.add(this.scrollingClass)}},{key:"stopScrolling",value:function(){cancelAnimationFrame(this.checkScrollRaf),this.startScrollTs=void 0,this.scrollToRaf&&(cancelAnimationFrame(this.scrollToRaf),this.scrollToRaf=null),this.isScrolling=!1,this.instance.scroll.y=Math.round(this.instance.scroll.y),this.html.classList.remove(this.scrollingClass)}},{key:"checkKey",value:function(s){var r=this;if(this.stop){s.keyCode==qr.TAB&&requestAnimationFrame(function(){r.html.scrollTop=0,document.body.scrollTop=0,r.html.scrollLeft=0,document.body.scrollLeft=0});return}switch(s.keyCode){case qr.TAB:requestAnimationFrame(function(){r.html.scrollTop=0,document.body.scrollTop=0,r.html.scrollLeft=0,document.body.scrollLeft=0,r.scrollTo(document.activeElement,{offset:-window.innerHeight/2})});break;case qr.UP:this.isActiveElementScrollSensitive()&&(this.instance.delta[this.directionAxis]-=240);break;case qr.DOWN:this.isActiveElementScrollSensitive()&&(this.instance.delta[this.directionAxis]+=240);break;case qr.PAGEUP:this.instance.delta[this.directionAxis]-=window.innerHeight;break;case qr.PAGEDOWN:this.instance.delta[this.directionAxis]+=window.innerHeight;break;case qr.HOME:this.instance.delta[this.directionAxis]-=this.instance.limit[this.directionAxis];break;case qr.END:this.instance.delta[this.directionAxis]+=this.instance.limit[this.directionAxis];break;case qr.SPACE:this.isActiveElementScrollSensitive()&&(s.shiftKey?this.instance.delta[this.directionAxis]-=window.innerHeight:this.instance.delta[this.directionAxis]+=window.innerHeight);break;default:return}this.instance.delta[this.directionAxis]<0&&(this.instance.delta[this.directionAxis]=0),this.instance.delta[this.directionAxis]>this.instance.limit[this.directionAxis]&&(this.instance.delta[this.directionAxis]=this.instance.limit[this.directionAxis]),this.stopScrolling(),this.isScrolling=!0,this.checkScroll(),this.html.classList.add(this.scrollingClass)}},{key:"isActiveElementScrollSensitive",value:function(){return!(document.activeElement instanceof HTMLInputElement)&&!(document.activeElement instanceof HTMLTextAreaElement)&&!(document.activeElement instanceof HTMLButtonElement)&&!(document.activeElement instanceof HTMLSelectElement)}},{key:"checkScroll",value:function(){var s=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(r||this.isScrolling||this.isDraggingScrollbar){this.hasScrollTicking||(this.checkScrollRaf=requestAnimationFrame(function(){return s.checkScroll()}),this.hasScrollTicking=!0),this.updateScroll();var o=Math.abs(this.instance.delta[this.directionAxis]-this.instance.scroll[this.directionAxis]),a=Date.now()-this.startScrollTs;if(!this.animatingScroll&&a>100&&(o<.5&&this.instance.delta[this.directionAxis]!=0||o<.5&&this.instance.delta[this.directionAxis]==0)&&this.stopScrolling(),Object.entries(this.sections).forEach(function(u){var h=Uc(u,2);h[0];var f=h[1];f.persistent||s.instance.scroll[s.directionAxis]>f.offset[s.directionAxis]&&s.instance.scroll[s.directionAxis]<f.limit[s.directionAxis]?(s.direction==="horizontal"?s.transform(f.el,-s.instance.scroll[s.directionAxis],0):s.transform(f.el,0,-s.instance.scroll[s.directionAxis]),f.inView||(f.inView=!0,f.el.style.opacity=1,f.el.style.pointerEvents="all",f.el.setAttribute("data-".concat(s.name,"-section-inview"),""))):((f.inView||r)&&(f.inView=!1,f.el.style.opacity=0,f.el.style.pointerEvents="none",f.el.removeAttribute("data-".concat(s.name,"-section-inview"))),s.transform(f.el,0,0))}),this.getDirection&&this.addDirection(),this.getSpeed&&(this.addSpeed(),this.speedTs=Date.now()),this.detectElements(),this.transformElements(),this.hasScrollbar){var l=this.instance.scroll[this.directionAxis]/this.instance.limit[this.directionAxis]*this.scrollBarLimit[this.directionAxis];this.direction==="horizontal"?this.transform(this.scrollbarThumb,l,0):this.transform(this.scrollbarThumb,0,l)}ro(Zs(e.prototype),"checkScroll",this).call(this),this.hasScrollTicking=!1}}},{key:"resize",value:function(){this.windowHeight=window.innerHeight,this.windowWidth=window.innerWidth,this.checkContext(),this.windowMiddle={x:this.windowWidth/2,y:this.windowHeight/2},this.update()}},{key:"updateDelta",value:function(s){var r,o=this[this.context]&&this[this.context].gestureDirection?this[this.context].gestureDirection:this.gestureDirection;o==="both"?r=s.deltaX+s.deltaY:o==="vertical"?r=s.deltaY:o==="horizontal"?r=s.deltaX:r=s.deltaY,this.instance.delta[this.directionAxis]-=r*this.multiplier,this.instance.delta[this.directionAxis]<0&&(this.instance.delta[this.directionAxis]=0),this.instance.delta[this.directionAxis]>this.instance.limit[this.directionAxis]&&(this.instance.delta[this.directionAxis]=this.instance.limit[this.directionAxis])}},{key:"updateScroll",value:function(s){this.isScrolling||this.isDraggingScrollbar?this.instance.scroll[this.directionAxis]=P0(this.instance.scroll[this.directionAxis],this.instance.delta[this.directionAxis],this.lerp):this.instance.scroll[this.directionAxis]>this.instance.limit[this.directionAxis]?this.setScroll(this.instance.scroll[this.directionAxis],this.instance.limit[this.directionAxis]):this.instance.scroll.y<0?this.setScroll(this.instance.scroll[this.directionAxis],0):this.setScroll(this.instance.scroll[this.directionAxis],this.instance.delta[this.directionAxis])}},{key:"addDirection",value:function(){this.instance.delta.y>this.instance.scroll.y?this.instance.direction!=="down"&&(this.instance.direction="down"):this.instance.delta.y<this.instance.scroll.y&&this.instance.direction!=="up"&&(this.instance.direction="up"),this.instance.delta.x>this.instance.scroll.x?this.instance.direction!=="right"&&(this.instance.direction="right"):this.instance.delta.x<this.instance.scroll.x&&this.instance.direction!=="left"&&(this.instance.direction="left")}},{key:"addSpeed",value:function(){this.instance.delta[this.directionAxis]!=this.instance.scroll[this.directionAxis]?this.instance.speed=(this.instance.delta[this.directionAxis]-this.instance.scroll[this.directionAxis])/Math.max(1,Date.now()-this.speedTs):this.instance.speed=0}},{key:"initScrollBar",value:function(){if(this.scrollbar=document.createElement("span"),this.scrollbarThumb=document.createElement("span"),this.scrollbar.classList.add("".concat(this.scrollbarClass)),this.scrollbarThumb.classList.add("".concat(this.scrollbarClass,"_thumb")),this.scrollbar.append(this.scrollbarThumb),this.scrollbarContainer?this.scrollbarContainer.append(this.scrollbar):document.body.append(this.scrollbar),this.getScrollBar=this.getScrollBar.bind(this),this.releaseScrollBar=this.releaseScrollBar.bind(this),this.moveScrollBar=this.moveScrollBar.bind(this),this.scrollbarThumb.addEventListener("mousedown",this.getScrollBar),window.addEventListener("mouseup",this.releaseScrollBar),window.addEventListener("mousemove",this.moveScrollBar),this.hasScrollbar=!1,this.direction=="horizontal"){if(this.instance.limit.x+this.windowWidth<=this.windowWidth)return}else if(this.instance.limit.y+this.windowHeight<=this.windowHeight)return;this.hasScrollbar=!0,this.scrollbarBCR=this.scrollbar.getBoundingClientRect(),this.scrollbarHeight=this.scrollbarBCR.height,this.scrollbarWidth=this.scrollbarBCR.width,this.direction==="horizontal"?this.scrollbarThumb.style.width="".concat(this.scrollbarWidth*this.scrollbarWidth/(this.instance.limit.x+this.scrollbarWidth),"px"):this.scrollbarThumb.style.height="".concat(this.scrollbarHeight*this.scrollbarHeight/(this.instance.limit.y+this.scrollbarHeight),"px"),this.scrollbarThumbBCR=this.scrollbarThumb.getBoundingClientRect(),this.scrollBarLimit={x:this.scrollbarWidth-this.scrollbarThumbBCR.width,y:this.scrollbarHeight-this.scrollbarThumbBCR.height}}},{key:"reinitScrollBar",value:function(){if(this.hasScrollbar=!1,this.direction=="horizontal"){if(this.instance.limit.x+this.windowWidth<=this.windowWidth)return}else if(this.instance.limit.y+this.windowHeight<=this.windowHeight)return;this.hasScrollbar=!0,this.scrollbarBCR=this.scrollbar.getBoundingClientRect(),this.scrollbarHeight=this.scrollbarBCR.height,this.scrollbarWidth=this.scrollbarBCR.width,this.direction==="horizontal"?this.scrollbarThumb.style.width="".concat(this.scrollbarWidth*this.scrollbarWidth/(this.instance.limit.x+this.scrollbarWidth),"px"):this.scrollbarThumb.style.height="".concat(this.scrollbarHeight*this.scrollbarHeight/(this.instance.limit.y+this.scrollbarHeight),"px"),this.scrollbarThumbBCR=this.scrollbarThumb.getBoundingClientRect(),this.scrollBarLimit={x:this.scrollbarWidth-this.scrollbarThumbBCR.width,y:this.scrollbarHeight-this.scrollbarThumbBCR.height}}},{key:"destroyScrollBar",value:function(){this.scrollbarThumb.removeEventListener("mousedown",this.getScrollBar),window.removeEventListener("mouseup",this.releaseScrollBar),window.removeEventListener("mousemove",this.moveScrollBar),this.scrollbar.remove()}},{key:"getScrollBar",value:function(s){this.isDraggingScrollbar=!0,this.checkScroll(),this.html.classList.remove(this.scrollingClass),this.html.classList.add(this.draggingClass)}},{key:"releaseScrollBar",value:function(s){this.isDraggingScrollbar=!1,this.isScrolling&&this.html.classList.add(this.scrollingClass),this.html.classList.remove(this.draggingClass)}},{key:"moveScrollBar",value:function(s){var r=this;this.isDraggingScrollbar&&requestAnimationFrame(function(){var o=(s.clientX-r.scrollbarBCR.left)*100/r.scrollbarWidth*r.instance.limit.x/100,a=(s.clientY-r.scrollbarBCR.top)*100/r.scrollbarHeight*r.instance.limit.y/100;a>0&&a<r.instance.limit.y&&(r.instance.delta.y=a),o>0&&o<r.instance.limit.x&&(r.instance.delta.x=o)})}},{key:"addElements",value:function(){var s=this;this.els={},this.parallaxElements={};var r=this.el.querySelectorAll("[data-".concat(this.name,"]"));r.forEach(function(o,a){var l=I0(o),u=Object.entries(s.sections).map(function(le){var re=Uc(le,2);re[0];var j=re[1];return j}).find(function(le){return l.includes(le.el)}),h=o.dataset[s.name+"Class"]||s.class,f=typeof o.dataset[s.name+"Id"]=="string"?o.dataset[s.name+"Id"]:"el"+a,g,p,y=o.dataset[s.name+"Repeat"],E=o.dataset[s.name+"Call"],C=o.dataset[s.name+"Position"],k=o.dataset[s.name+"Delay"],T=o.dataset[s.name+"Direction"],P=typeof o.dataset[s.name+"Sticky"]=="string",S=o.dataset[s.name+"Speed"]?parseFloat(o.dataset[s.name+"Speed"])/10:!1,O=typeof o.dataset[s.name+"Offset"]=="string"?o.dataset[s.name+"Offset"].split(","):s.offset,A=o.dataset[s.name+"Target"],N;A!==void 0?N=document.querySelector("".concat(A)):N=o;var L=N.getBoundingClientRect();u===null||u.inView?(g=L.top+s.instance.scroll.y-fs(N).y,p=L.left+s.instance.scroll.x-fs(N).x):(g=L.top-fs(u.el).y-fs(N).y,p=L.left-fs(u.el).x-fs(N).x);var M=g+N.offsetHeight,B=p+N.offsetWidth,U={x:(B-p)/2+p,y:(M-g)/2+g};if(P){var q=o.getBoundingClientRect(),ee=q.top,me=q.left,_e={x:me-p,y:ee-g};g+=window.innerHeight,p+=window.innerWidth,M=ee+N.offsetHeight-o.offsetHeight-_e[s.directionAxis],B=me+N.offsetWidth-o.offsetWidth-_e[s.directionAxis],U={x:(B-p)/2+p,y:(M-g)/2+g}}y=="false"?y=!1:y!=null?y=!0:y=s.repeat;var ge=[0,0];if(O)if(s.direction==="horizontal"){for(var pe=0;pe<O.length;pe++)typeof O[pe]=="string"?O[pe].includes("%")?ge[pe]=parseInt(O[pe].replace("%","")*s.windowWidth/100):ge[pe]=parseInt(O[pe]):ge[pe]=O[pe];p=p+ge[0],B=B-ge[1]}else{for(var pe=0;pe<O.length;pe++)typeof O[pe]=="string"?O[pe].includes("%")?ge[pe]=parseInt(O[pe].replace("%","")*s.windowHeight/100):ge[pe]=parseInt(O[pe]):ge[pe]=O[pe];g=g+ge[0],M=M-ge[1]}var ae={el:o,id:f,class:h,section:u,top:g,middle:U,bottom:M,left:p,right:B,offset:O,progress:0,repeat:y,inView:!1,call:E,speed:S,delay:k,position:C,target:N,direction:T,sticky:P};s.els[f]=ae,o.classList.contains(h)&&s.setInView(s.els[f],f),(S!==!1||P)&&(s.parallaxElements[f]=ae)})}},{key:"addSections",value:function(){var s=this;this.sections={};var r=this.el.querySelectorAll("[data-".concat(this.name,"-section]"));r.length===0&&(r=[this.el]),r.forEach(function(o,a){var l=typeof o.dataset[s.name+"Id"]=="string"?o.dataset[s.name+"Id"]:"section"+a,u=o.getBoundingClientRect(),h={x:u.left-window.innerWidth*1.5-fs(o).x,y:u.top-window.innerHeight*1.5-fs(o).y},f={x:h.x+u.width+window.innerWidth*2,y:h.y+u.height+window.innerHeight*2},g=typeof o.dataset[s.name+"Persistent"]=="string";o.setAttribute("data-scroll-section-id",l);var p={el:o,offset:h,limit:f,inView:!1,persistent:g,id:l};s.sections[l]=p})}},{key:"transform",value:function(s,r,o,a){var l;if(!a)l="matrix3d(1,0,0.00,0,0.00,1,0.00,0,0,0,1,0,".concat(r,",").concat(o,",0,1)");else{var u=fs(s),h=P0(u.x,r,a),f=P0(u.y,o,a);l="matrix3d(1,0,0.00,0,0.00,1,0.00,0,0,0,1,0,".concat(h,",").concat(f,",0,1)")}s.style.webkitTransform=l,s.style.msTransform=l,s.style.transform=l}},{key:"transformElements",value:function(s){var r=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,a=this.instance.scroll.x+this.windowWidth,l=this.instance.scroll.y+this.windowHeight,u={x:this.instance.scroll.x+this.windowMiddle.x,y:this.instance.scroll.y+this.windowMiddle.y};Object.entries(this.parallaxElements).forEach(function(h){var f=Uc(h,2);f[0];var g=f[1],p=!1;if(s&&(p=0),g.inView||o)switch(g.position){case"top":p=r.instance.scroll[r.directionAxis]*-g.speed;break;case"elementTop":p=(l-g.top)*-g.speed;break;case"bottom":p=(r.instance.limit[r.directionAxis]-l+r.windowHeight)*g.speed;break;case"left":p=r.instance.scroll[r.directionAxis]*-g.speed;break;case"elementLeft":p=(a-g.left)*-g.speed;break;case"right":p=(r.instance.limit[r.directionAxis]-a+r.windowHeight)*g.speed;break;default:p=(u[r.directionAxis]-g.middle[r.directionAxis])*-g.speed;break}g.sticky&&(g.inView?r.direction==="horizontal"?p=r.instance.scroll.x-g.left+window.innerWidth:p=r.instance.scroll.y-g.top+window.innerHeight:r.direction==="horizontal"?r.instance.scroll.x<g.left-window.innerWidth&&r.instance.scroll.x<g.left-window.innerWidth/2?p=0:r.instance.scroll.x>g.right&&r.instance.scroll.x>g.right+100?p=g.right-g.left+window.innerWidth:p=!1:r.instance.scroll.y<g.top-window.innerHeight&&r.instance.scroll.y<g.top-window.innerHeight/2?p=0:r.instance.scroll.y>g.bottom&&r.instance.scroll.y>g.bottom+100?p=g.bottom-g.top+window.innerHeight:p=!1),p!==!1&&(g.direction==="horizontal"||r.direction==="horizontal"&&g.direction!=="vertical"?r.transform(g.el,p,0,s?!1:g.delay):r.transform(g.el,0,p,s?!1:g.delay))})}},{key:"scrollTo",value:function(s){var r=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=parseInt(o.offset)||0,l=isNaN(parseInt(o.duration))?1e3:parseInt(o.duration),u=o.easing||[.25,0,.35,1],h=!!o.disableLerp,f=o.callback?o.callback:!1;if(u=IY.apply(void 0,eY(u)),typeof s=="string"){if(s==="top")s=0;else if(s==="bottom")s=this.instance.limit.y;else if(s==="left")s=0;else if(s==="right")s=this.instance.limit.x;else if(s=document.querySelector(s),!s)return}else if(typeof s=="number")s=parseInt(s);else if(!(s&&s.tagName)){console.warn("`target` parameter is not valid");return}if(typeof s!="number"){var g=I0(s).includes(this.el);if(!g)return;var p=s.getBoundingClientRect(),y=p.top,E=p.left,C=I0(s),k=C.find(function(M){return Object.entries(r.sections).map(function(B){var U=Uc(B,2);U[0];var q=U[1];return q}).find(function(B){return B.el==M})}),T=0;k?T=fs(k)[this.directionAxis]:T=-this.instance.scroll[this.directionAxis],this.direction==="horizontal"?a=E+a-T:a=y+a-T}else a=s+a;var P=parseFloat(this.instance.delta[this.directionAxis]),S=Math.max(0,Math.min(a,this.instance.limit[this.directionAxis])),O=S-P,A=function(B){h?r.direction==="horizontal"?r.setScroll(P+O*B,r.instance.delta.y):r.setScroll(r.instance.delta.x,P+O*B):r.instance.delta[r.directionAxis]=P+O*B};this.animatingScroll=!0,this.stopScrolling(),this.startScrolling();var N=Date.now(),L=function M(){var B=(Date.now()-N)/l;B>1?(A(1),r.animatingScroll=!1,l==0&&r.update(),f&&f()):(r.scrollToRaf=requestAnimationFrame(M),A(u(B)))};L()}},{key:"update",value:function(){this.setScrollLimit(),this.addSections(),this.addElements(),this.detectElements(),this.updateScroll(),this.transformElements(!0),this.reinitScrollBar(),this.checkScroll(!0)}},{key:"startScroll",value:function(){this.stop=!1}},{key:"stopScroll",value:function(){this.stop=!0}},{key:"setScroll",value:function(s,r){this.instance=A0(A0({},this.instance),{},{scroll:{x:s,y:r},delta:{x:s,y:r},speed:0})}},{key:"destroy",value:function(){ro(Zs(e.prototype),"destroy",this).call(this),this.stopScrolling(),this.html.classList.remove(this.smoothClass),this.vs.destroy(),this.destroyScrollBar(),window.removeEventListener("keydown",this.checkKey,!1)}}]),e}(sN),OY=function(){function i(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};yb(this,i),this.options=t,Object.assign(this,Zc,t),this.smartphone=Zc.smartphone,t.smartphone&&Object.assign(this.smartphone,t.smartphone),this.tablet=Zc.tablet,t.tablet&&Object.assign(this.tablet,t.tablet),!this.smooth&&this.direction=="horizontal"&&console.warn("🚨 `smooth:false` & `horizontal` direction are not yet compatible"),!this.tablet.smooth&&this.tablet.direction=="horizontal"&&console.warn("🚨 `smooth:false` & `horizontal` direction are not yet compatible (tablet)"),!this.smartphone.smooth&&this.smartphone.direction=="horizontal"&&console.warn("🚨 `smooth:false` & `horizontal` direction are not yet compatible (smartphone)"),this.init()}return _b(i,[{key:"init",value:function(){if(this.options.isMobile=/Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1||window.innerWidth<this.tablet.breakpoint,this.options.isTablet=this.options.isMobile&&window.innerWidth>=this.tablet.breakpoint,this.smooth&&!this.options.isMobile||this.tablet.smooth&&this.options.isTablet||this.smartphone.smooth&&this.options.isMobile&&!this.options.isTablet?this.scroll=new RY(this.options):this.scroll=new lY(this.options),this.scroll.init(),window.location.hash){var e=window.location.hash.slice(1,window.location.hash.length),n=document.getElementById(e);n&&this.scroll.scrollTo(n)}}},{key:"update",value:function(){this.scroll.update()}},{key:"start",value:function(){this.scroll.startScroll()}},{key:"stop",value:function(){this.scroll.stopScroll()}},{key:"scrollTo",value:function(e,n){this.scroll.scrollTo(e,n)}},{key:"setScroll",value:function(e,n){this.scroll.setScroll(e,n)}},{key:"on",value:function(e,n){this.scroll.setEvents(e,n)}},{key:"off",value:function(e,n){this.scroll.unsetEvents(e,n)}},{key:"destroy",value:function(){this.scroll.destroy()}}]),i}();const NY=mt("div")`
  position: relative;
  background-image: url('./banner-01.jpg');
  background-position: center;
  background-size: cover;
  width: 100%;
  height: 100vh;
  font-size: 75px;
  transform-origin: top;
  transition: background-image 3s cubic-bezier(.77,0,.18,1);
  z-index: 800;

  @media screen and (min-width: 1000px) {
    font-size: 100px;
  }

  &.is-inview {
    &::after {
      opacity: 1;
    }
  }

  &::after {
    content: '';
    position: absolute;
    inset: 0;
    background-image: linear-gradient(to bottom, transparent, var(--background) 95%);
    background-size: cover;
    background-position: center;
    opacity: 0;
    transition: opacity 3s cubic-bezier(.77,0,.18,1);
    height: 101%;
  }
`,MY=()=>v.jsx(NY,{className:"d-flex align-items-center justify-content-center","data-scroll":!0,"data-scroll-offset":"120%","data-scroll-repeat":"true",children:v.jsxs("div",{className:"text-center text-white",style:{textShadow:"0 0 0.75rem rgba(0, 0, 0, 0.75)"},children:[v.jsxs("h2",{className:"title",style:{fontSize:"1em"},"data-scroll":!0,"data-scroll-speed":"3","data-scroll-position":"top",children:["&",v.jsx("em",{children:"Bloom"})]}),v.jsx("p",{style:{fontSize:"0.925rem"},children:Array.from("植｜物｜販｜賣｜所").map((i,t)=>v.jsx("span",{className:"d-inline-block","data-scroll":!0,"data-scroll-speed":"3.5","data-scroll-position":"top","data-scroll-delay":(.13-t*.01).toFixed(2),children:i},`char-${t}`))})]})}),R0=mt("a")`
  position: relative;
  padding: 1rem;
  transition: 0.5s cubic-bezier(0,.85,.45,1);
  overflow: hidden;

  &::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    transform: translateY(-101%);
    background-color: var(--light-gray);
    transition: transform 0.2s ease;
    z-index: -1;
  }

  &:hover {
    padding: 1rem 3rem;

    &::after {
      transform: translate(0);
    }
  }
`,LY=()=>v.jsx("div",{className:"bg-light",style:{marginTop:"2rem",marginBottom:"4rem"},"data-scroll":!0,"data-scroll-speed":"-1",children:v.jsxs("div",{className:"row",style:{height:"350px"},children:[v.jsx("div",{className:"d-none d-md-block col-md-6 position-relative",children:v.jsx("img",{src:"./banner-04.jpg",alt:"banner-04",className:"opacity-75 position-absolute object-fit-cover w-100 h-100"})}),v.jsxs("div",{className:"col-md-6 p-5",children:[v.jsxs("h5",{className:"title mb-4 fs-1",children:["Contact &",v.jsx("em",{children:"Bloom"})]}),v.jsxs(R0,{href:"mailto:service@andbloom.com",target:"_blank",rel:"noopener",className:"d-flex align-items-center justify-content-between border-bottom border-dark",children:[v.jsx("i",{className:"bi bi-envelope"}),v.jsx("span",{children:"service@andbloom.com"})]}),v.jsxs(R0,{href:"tel:0800-123-123",className:"d-flex align-items-center justify-content-between border-bottom border-dark",children:[v.jsx("i",{className:"bi bi-telephone"}),v.jsx("span",{children:"0800-123-123"})]}),v.jsxs(R0,{href:"https://www.instagram.com/&bloom",target:"_blank",rel:"noopener",className:"d-flex align-items-center justify-content-between border-bottom border-dark",children:[v.jsx("i",{className:"bi bi-instagram"}),v.jsx("span",{children:"Follow &Bloom on Instagram"})]})]})]})}),hN=mt("div")`
  max-width: 100%;
  width: 1000px;
  margin-left: auto;
  margin-right: auto;
`,VY=mt(hN)`
  width: 1280px;
`,O0=mt("div")`
  overflow: hidden;
  flex-shrink: 0;

  .image-outer {
    aspect-ratio: 3 / 4;
    overflow: hidden;
    will-change: transform, opacity;

    &.is-inview {
      img {
        opacity: 1;
        transform: scale(1);
      }
    }
  }

  img {
    width: 100%;
    opacity: 0;
    transform: scale(1.5);
    transform-origin: center;
    transition: opacity 1.2s cubic-bezier(.215,.61,.355,1), transform 1.2s cubic-bezier(.215,.61,.355,1);
  }
`,yA=mt("h2")`
  line-height: 1;
  font-weight: 300;
  font-size: calc(7vw + 0.5rem);

  @media screen and (min-width: 1000px) {
    font-size: 75px;
  }

  span {
    transform: translateY(100%) rotateX(-80deg);
    opacity: 0;
    transition: opacity .8s cubic-bezier(.215,.61,.355,1), transform .8s cubic-bezier(.215,.61,.355,1);
    transform-origin: center top;
    transform-style: preserve-3d;
    transition-delay: .4s;
    display: block;
  }

  &.is-inview {
    span {
      transform: none;
      opacity: 1;
    }
  }

  strong {
    color: var(--info);
  }
`,_A=mt("div")`
  small {
    transform: scale(0);
    transition: transform 0.6s cubic-bezier(.17,.67,.3,1.33);
    transition-delay: 0.6s;
    transform-origin: top left;
    display: block;
    line-height: 200%;
    position: relative;

    &::after {
      content: '';
      position: absolute;
      bottom: -10px;
      left: 0;
      width: 200px;
      height: 2px;
      background-color: black;
      transform: scaleX(0);
      transition: transform 1.2s cubic-bezier(.77,0,.18,1);
      transition-delay: 0.6s;
      transform-origin: left;
    }
  }

  &.is-inview small {
    transform: scale(1);

    &::after {
      transform: scaleX(1);
    }
  }
`,DY=()=>v.jsxs(v.Fragment,{children:[v.jsxs(hN,{className:"d-flex align-items-center justify-content-center px-3",children:[v.jsxs("div",{className:"w-50",children:[v.jsxs(yA,{className:"title mb-5","data-scroll":!0,children:[v.jsx("span",{children:"Meet your "}),v.jsxs("span",{children:[v.jsx("strong",{className:"fw-bold",children:"plant"}),", ",v.jsx("em",{children:"bring"})," "]}),v.jsx("span",{children:"nature home"})]}),v.jsx(_A,{"data-scroll":!0,"data-scroll-speed":"1",children:v.jsxs("small",{children:["拾起一抹綠意",v.jsx("br",{}),"讓自然融入生活"]})})]}),v.jsx(O0,{className:"ms-auto w-40 w-lg-50","data-scroll":!0,"data-scroll-speed":"3",children:v.jsx("div",{className:"image-outer","data-scroll":!0,"data-scroll-speed":"-2",children:v.jsx("img",{src:"./plant-01.jpg",alt:"plant-01"})})})]}),v.jsxs(VY,{className:"d-flex align-items-center justify-content-center px-3 px-lg-5 mt-5 mt-lg-0",children:[v.jsx(O0,{className:"w-40 w-lg-30 mb-5","data-scroll":!0,"data-scroll-speed":"2",children:v.jsx("div",{className:"image-outer","data-scroll":!0,"data-scroll-speed":"-2",children:v.jsx("img",{src:"./plant-06.jpg",alt:"plant-06"})})}),v.jsxs("div",{className:"w-50 ms-auto",style:{verticalAlign:"bottom"},children:[v.jsxs(yA,{className:"title mb-5","data-scroll":!0,"data-scroll-speed":"1",children:[v.jsxs("span",{children:["Every ",v.jsx("strong",{className:"fw-bold",children:"plant"})," "]}),v.jsxs("span",{children:[v.jsx("em",{children:"whispers"})," a story "]}),v.jsx("span",{children:" of life"})]}),v.jsx(_A,{"data-scroll":!0,"data-scroll-speed":"3",children:v.jsxs("small",{children:["植物的細語",v.jsx("br",{}),"療癒生活每個角落"]})}),v.jsx(O0,{className:"d-none d-lg-block w-40 ms-auto pt-5","data-scroll":!0,"data-scroll-speed":"2",children:v.jsx("div",{className:"image-outer","data-scroll":!0,"data-scroll-speed":"-2",children:v.jsx("img",{src:"./plant-10.jpg",alt:"plant-10"})})})]})]})]}),uo=i=>{const t=new Date(i*1e3);return new Intl.DateTimeFormat("zh-TW",{year:"numeric",month:"2-digit",day:"2-digit",timeZone:"Asia/Taipei"}).format(t).replace(/\//g,"-")},BY=mt("div")`
  max-width: 1000px;
  margin: 5rem auto;

  .tags-wrap {
    margin-bottom: 2.5rem;
    padding-bottom: 2.5rem;
    border-bottom: 2px solid black;
  }
`,FY=mt("div")`
  width: 100%;
  aspect-ratio: 1 / 1;
  overflow: hidden;
  margin-top: 4rem;

  @media screen and (min-width: 768px) {
    margin-top: 0rem;
  }
`,$Y=({filterArticles:i})=>v.jsx(BY,{children:i.map((t,e)=>{const{tag:n,create_at:s,title:r,description:o,image:a,id:l}=t;return v.jsxs("div",{className:"row align-items-center my-5 py-5",children:[v.jsx("div",{className:`col-md-6 px-5 ${e%2===0?"order-md-1":"order-md-2"}`,children:v.jsxs("div",{"data-scroll":!0,"data-scroll-speed":"-1","data-scroll-delay":"0.1",children:[v.jsxs("div",{className:"tags-wrap d-flex justify-content-between align-items-center",children:[v.jsx("small",{className:"tags d-block",children:n.join("｜")}),v.jsx("small",{className:"badge rounded-pill bg-transparent border border-primary text-primary",children:uo(s)})]}),v.jsx("h5",{className:"card-title fw-light fs-3 mb-3",children:r}),v.jsx("p",{className:"mb-5 lh-lg",style:{fontSize:"0.9rem"},children:o}),v.jsxs(on,{to:`/article/${l}`,className:"btn btn-secondary rounded-pill px-5 position-relative",children:["看更多",v.jsx("span",{className:"btn-arrow ms-3 position-absolute",children:"→"})]})]})}),v.jsx("div",{className:`col-md-6 px-5 ${e%2===0?"order-md-2":"order-md-1"}`,children:v.jsx(FY,{children:v.jsx("img",{src:a,alt:r,className:"object-fit-cover h-100 w-100"})})})]},`article-${e}`)})}),zY=mt("div")`
  margin-top: -10rem;

  @media screen and (min-width: 992px) {
    margin-top: -5rem;
  }
`,jY=mt("div")`
  max-width: 750px;
  width: 100%;

  @media (min-width: 768px) {
    .product-card {
        margin-bottom: 3rem !important;
    }
  }
`,fN=mt("div")`
  left: 0;
  position: absolute;
  right: 0;
  top: 0;
`,HY=mt(fN)`
  bottom: 200px;
  top: -100px;
`,UY=({filterProducts:i})=>v.jsx(v.Fragment,{children:v.jsxs("div",{className:"row",children:[v.jsx("div",{className:"d-lg-none my-5",children:v.jsxs("div",{className:"d-flex flex-column align-items-center text-center",children:[v.jsx("h3",{className:"title fs-2 mb-3",children:"＼ New Items ／"}),v.jsxs("small",{className:"d-block",children:["最新植栽推薦 ",v.jsx("br",{}),"快來挑選你的居家綠色夥伴"]})]})}),v.jsxs("div",{className:"col-md-5 position-relative overflow-hidden d-none d-lg-block",style:{marginTop:"100px"},children:[v.jsx(HY,{id:"fixed-target"}),v.jsxs(fN,{className:"d-flex flex-column align-items-center text-center","data-scroll":!0,"data-scroll-sticky":!0,"data-scroll-target":"#fixed-target",children:[v.jsx("h3",{className:"title fs-2 mb-3",children:"＼ New Items ／"}),v.jsxs("small",{className:"d-block",children:["最新植栽推薦 ",v.jsx("br",{}),"快來挑選你的居家綠色夥伴"]}),v.jsx("svg",{className:"d-block text-white mt-4",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"50px",version:"1.1",id:"Capa_1",viewBox:"0 0 227.096 227.096",xmlSpace:"preserve",children:v.jsx("g",{children:v.jsx("polygon",{points:"152.835,39.285 146.933,45.183 211.113,109.373 0,109.373 0,117.723 211.124,117.723 146.933,181.902 152.835,187.811 227.096,113.55   "})})})]})]}),v.jsx(zY,{className:"col-md-7","data-scroll":!0,"data-scroll-delay":"0.04","data-scroll-speed":"5",children:v.jsxs(jY,{className:"text-center px-4 ps-lg-0 pe-lg-5",children:[v.jsx("div",{className:"row",children:i.length?v.jsx(v.Fragment,{children:i.map(t=>v.jsx(wb,{item:t,isLink:!0,children:v.jsx("small",{className:"d-block mt-3 pt-3 border-top text-start text-dark",children:v.jsx("small",{children:t.description})})},t.id))}):""}),v.jsxs(on,{to:"/products",className:"btn btn-secondary rounded-pill px-5 mt-4 position-relative",children:["所有植栽",v.jsx("span",{className:"btn-arrow ms-3 position-absolute",children:"→"})]})]})})]})}),WY=mt("div")`
  transition: 0.5s cubic-bezier(0,.85,.45,1) 0.5s;
  transform: translateY(100%);
  opacity: 0;

  &.is-inview {
    transform: translateY(0);
    opacity: 1;
  }
`,qY=mt("div")`
  overflow: hidden;
  flex-shrink: 0;

  .image-outer {
    aspect-ratio: 3 / 4;
    overflow: hidden;
    will-change: transform, opacity;

    &.is-inview {
      img {
        opacity: 1;
        transform: scale(1);
      }
    }
  }

  img {
    width: 100%;
    opacity: 0;
    transform: scale(1.5);
    transform-origin: center;
    transition: opacity 1.2s cubic-bezier(.215,.61,.355,1), transform 1.2s cubic-bezier(.215,.61,.355,1);
  }
`,EA=[{icon:"./icon-03.svg",title:"觀花植物",description:"鮮豔花朵點綴空間，營造溫馨氛圍",plants:[{name:"火鶴花",id:"-OFw3pnPKDo3lBndVBjm"},{name:"櫻花苔玉",id:"-OG9J1VVDk-sqPl9qMdY"}]},{icon:"./icon-02.svg",title:"多肉植物",description:"迷你療癒系，輕鬆好養不費心",plants:[{name:"沙漠玫瑰",id:"-OG9FnB6iQqIoqAhZiVb"},{name:"香葉草",id:"-OKyt5dKRrMbX_vhHIOn"}]},{icon:"./icon-04.svg",title:"大型植栽",description:"打造空間綠意焦點，提升生活質感",plants:[{name:"旅人蕉",id:"-OG9KxW4iGCfQys4TP6W"},{name:"龜背芋",id:"-OFvzAWoPIh6KN0cWBbT"}]},{icon:"./icon-01.svg",title:"觀葉植物",description:"綠意盎然，輕鬆打造療癒空間",plants:[{name:"黑葉金錢樹",id:"-OG9HPsocFyozZZ3sRJl"},{name:"小葉欖仁",id:"-OG9B2gF0BH99VU5gpya"}]}],CA=({icon:i,title:t,description:e,plants:n})=>v.jsxs(WY,{className:"py-5","data-scroll":!0,children:[v.jsx("img",{src:i,alt:t,className:"text-light mb-4",style:{maxHeight:"50px",maxWidth:"50px"}}),v.jsx("h6",{className:"fs-4 fw-light text-tertiary",children:t}),v.jsx("div",{className:"mx-auto my-3",style:{width:"1px",height:"35px",backgroundColor:"var(--gray)"}}),v.jsx("p",{className:"text-gray",children:e}),v.jsxs("small",{children:["推薦植栽：",n.map((s,r)=>v.jsxs("span",{children:[v.jsx(on,{to:`/product/${s.id}`,className:"text-white border-bottom border-white",children:s.name}),r!==n.length-1?"、":""]},`plant-${s.id}`))]})]}),GY=()=>v.jsxs("div",{className:"text-white row align-items-center bg-secondary px-4",style:{padding:"5rem 0"},children:[v.jsxs("div",{className:"col-12 text-center mb-5",children:[v.jsx("h3",{className:"title fs-2 mb-3",children:"＼ Plant Categories ／"}),v.jsxs("small",{className:"d-block",children:["探索不同植栽風格 ",v.jsx("br",{}),"為空間增添獨特氛圍"]})]}),v.jsx("div",{className:"col-md-4 d-flex flex-column align-items-center text-center",children:EA.slice(0,2).map(i=>v.jsx(CA,{...i},`category-${i.title}`))}),v.jsx("div",{className:"col-md-4 d-none d-md-block",children:v.jsx(qY,{className:"w-100",children:v.jsx("div",{className:"image-outer","data-scroll":!0,"data-scroll-speed":"3",children:v.jsx("img",{src:"./plant-08.jpg",alt:"plant-08"})})})}),v.jsx("div",{className:"col-md-4 d-flex flex-column align-items-center text-center",children:EA.slice(2).map(i=>v.jsx(CA,{...i},`category-${i.title}`))})]}),KY={BASE_URL:"/react-and-bloom/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_BASE:"https://ec-course-api.hexschool.io/v2",VITE_API_PATH:"and-bloom"},{VITE_API_BASE:YY,VITE_API_PATH:ZY}=KY,mN=({isShowLoading:i=!0}={})=>{const t=vn(),[e,n]=R.useState([]),[s,r]=R.useState(1),[o,a]=R.useState(1),l=R.useCallback(async()=>{var u,h,f;try{i&&t(Xe(!0));const g=await Le.get(`${YY}/api/${ZY}/articles?${s}`);n(g.data.articles),a((u=g.data.pagination)==null?void 0:u.total_pages),r((h=g.data.pagination)==null?void 0:h.current_page)}catch(g){g instanceof St&&console.log((f=g==null?void 0:g.response)==null?void 0:f.data.message)}finally{t(Xe(!1))}},[s,t,i]);return R.useEffect(()=>{l()},[l,s]),{articles:e,getArticles:l,currentPage:s,setCurrentPage:r,totalPages:o}},XY=gb`
  body {
    background-color: var(--background);
  }
`,JY=()=>{const i=R.useRef(null),t=R.useRef(null),e=R.useRef(null),n=R.useRef(0),{products:s}=vb({isShowLoading:!1}),r=R.useMemo(()=>s==null?void 0:s.slice(0,5),[s]),{articles:o}=mN({isShowLoading:!1}),a=R.useMemo(()=>o==null?void 0:o.slice(0,2),[o]);return R.useEffect(()=>{if(i.current)return t.current=new OY({el:i.current,smooth:!0,lerp:.06,multiplier:.5}),t.current.on("scroll",({scroll:l})=>{var u,h;l.y>n.current?(u=e.current)==null||u.classList.add("hidden"):(h=e.current)==null||h.classList.remove("hidden"),n.current=l.y}),()=>{var l;(l=t.current)==null||l.destroy()}},[]),R.useEffect(()=>{r.length&&setTimeout(()=>{var l;(l=t.current)==null||l.update()},500)},[r]),v.jsxs(v.Fragment,{children:[v.jsx(XY,{}),v.jsx(AO,{ref:e}),v.jsxs("div",{className:"overflow-hidden",ref:i,children:[v.jsx(MY,{}),v.jsx(DY,{}),v.jsx(UY,{filterProducts:r}),v.jsx(GY,{}),v.jsx($Y,{filterArticles:a}),v.jsx(LY,{}),v.jsx(SO,{})]})]})};function QY(i,t,e,n){return i.params.createElements&&Object.keys(n).forEach(s=>{if(!e[s]&&e.auto===!0){let r=qs(i.el,`.${n[s]}`)[0];r||(r=up("div",n[s]),r.className=n[s],i.el.append(r)),e[s]=r,t[s]=r}}),e}function xA(i){let{swiper:t,extendParams:e,on:n,emit:s}=i;e({navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock",navigationDisabledClass:"swiper-navigation-disabled"}}),t.navigation={nextEl:null,prevEl:null};function r(y){let E;return y&&typeof y=="string"&&t.isElement&&(E=t.el.querySelector(y)||t.hostEl.querySelector(y),E)?E:(y&&(typeof y=="string"&&(E=[...document.querySelectorAll(y)]),t.params.uniqueNavElements&&typeof y=="string"&&E&&E.length>1&&t.el.querySelectorAll(y).length===1?E=t.el.querySelector(y):E&&E.length===1&&(E=E[0])),y&&!E?y:E)}function o(y,E){const C=t.params.navigation;y=Wr(y),y.forEach(k=>{k&&(k.classList[E?"add":"remove"](...C.disabledClass.split(" ")),k.tagName==="BUTTON"&&(k.disabled=E),t.params.watchOverflow&&t.enabled&&k.classList[t.isLocked?"add":"remove"](C.lockClass))})}function a(){const{nextEl:y,prevEl:E}=t.navigation;if(t.params.loop){o(E,!1),o(y,!1);return}o(E,t.isBeginning&&!t.params.rewind),o(y,t.isEnd&&!t.params.rewind)}function l(y){y.preventDefault(),!(t.isBeginning&&!t.params.loop&&!t.params.rewind)&&(t.slidePrev(),s("navigationPrev"))}function u(y){y.preventDefault(),!(t.isEnd&&!t.params.loop&&!t.params.rewind)&&(t.slideNext(),s("navigationNext"))}function h(){const y=t.params.navigation;if(t.params.navigation=QY(t,t.originalParams.navigation,t.params.navigation,{nextEl:"swiper-button-next",prevEl:"swiper-button-prev"}),!(y.nextEl||y.prevEl))return;let E=r(y.nextEl),C=r(y.prevEl);Object.assign(t.navigation,{nextEl:E,prevEl:C}),E=Wr(E),C=Wr(C);const k=(T,P)=>{T&&T.addEventListener("click",P==="next"?u:l),!t.enabled&&T&&T.classList.add(...y.lockClass.split(" "))};E.forEach(T=>k(T,"next")),C.forEach(T=>k(T,"prev"))}function f(){let{nextEl:y,prevEl:E}=t.navigation;y=Wr(y),E=Wr(E);const C=(k,T)=>{k.removeEventListener("click",T==="next"?u:l),k.classList.remove(...t.params.navigation.disabledClass.split(" "))};y.forEach(k=>C(k,"next")),E.forEach(k=>C(k,"prev"))}n("init",()=>{t.params.navigation.enabled===!1?p():(h(),a())}),n("toEdge fromEdge lock unlock",()=>{a()}),n("destroy",()=>{f()}),n("enable disable",()=>{let{nextEl:y,prevEl:E}=t.navigation;if(y=Wr(y),E=Wr(E),t.enabled){a();return}[...y,...E].filter(C=>!!C).forEach(C=>C.classList.add(t.params.navigation.lockClass))}),n("click",(y,E)=>{let{nextEl:C,prevEl:k}=t.navigation;C=Wr(C),k=Wr(k);const T=E.target;let P=k.includes(T)||C.includes(T);if(t.isElement&&!P){const S=E.path||E.composedPath&&E.composedPath();S&&(P=S.find(O=>C.includes(O)||k.includes(O)))}if(t.params.navigation.hideOnClick&&!P){if(t.pagination&&t.params.pagination&&t.params.pagination.clickable&&(t.pagination.el===T||t.pagination.el.contains(T)))return;let S;C.length?S=C[0].classList.contains(t.params.navigation.hiddenClass):k.length&&(S=k[0].classList.contains(t.params.navigation.hiddenClass)),s(S===!0?"navigationShow":"navigationHide"),[...C,...k].filter(O=>!!O).forEach(O=>O.classList.toggle(t.params.navigation.hiddenClass))}});const g=()=>{t.el.classList.remove(...t.params.navigation.navigationDisabledClass.split(" ")),h(),a()},p=()=>{t.el.classList.add(...t.params.navigation.navigationDisabledClass.split(" ")),f()};Object.assign(t.navigation,{enable:g,disable:p,update:a,init:h,destroy:f})}function kA(i){let{swiper:t,extendParams:e,on:n}=i;e({thumbs:{swiper:null,multipleActiveThumbs:!0,autoScrollOffset:0,slideThumbActiveClass:"swiper-slide-thumb-active",thumbsContainerClass:"swiper-thumbs"}});let s=!1,r=!1;t.thumbs={swiper:null};function o(){const u=t.thumbs.swiper;if(!u||u.destroyed)return;const h=u.clickedIndex,f=u.clickedSlide;if(f&&f.classList.contains(t.params.thumbs.slideThumbActiveClass)||typeof h>"u"||h===null)return;let g;u.params.loop?g=parseInt(u.clickedSlide.getAttribute("data-swiper-slide-index"),10):g=h,t.params.loop?t.slideToLoop(g):t.slideTo(g)}function a(){const{thumbs:u}=t.params;if(s)return!1;s=!0;const h=t.constructor;if(u.swiper instanceof h)t.thumbs.swiper=u.swiper,Object.assign(t.thumbs.swiper.originalParams,{watchSlidesProgress:!0,slideToClickedSlide:!1}),Object.assign(t.thumbs.swiper.params,{watchSlidesProgress:!0,slideToClickedSlide:!1}),t.thumbs.swiper.update();else if(Hd(u.swiper)){const f=Object.assign({},u.swiper);Object.assign(f,{watchSlidesProgress:!0,slideToClickedSlide:!1}),t.thumbs.swiper=new h(f),r=!0}return t.thumbs.swiper.el.classList.add(t.params.thumbs.thumbsContainerClass),t.thumbs.swiper.on("tap",o),!0}function l(u){const h=t.thumbs.swiper;if(!h||h.destroyed)return;const f=h.params.slidesPerView==="auto"?h.slidesPerViewDynamic():h.params.slidesPerView;let g=1;const p=t.params.thumbs.slideThumbActiveClass;if(t.params.slidesPerView>1&&!t.params.centeredSlides&&(g=t.params.slidesPerView),t.params.thumbs.multipleActiveThumbs||(g=1),g=Math.floor(g),h.slides.forEach(C=>C.classList.remove(p)),h.params.loop||h.params.virtual&&h.params.virtual.enabled)for(let C=0;C<g;C+=1)qs(h.slidesEl,`[data-swiper-slide-index="${t.realIndex+C}"]`).forEach(k=>{k.classList.add(p)});else for(let C=0;C<g;C+=1)h.slides[t.realIndex+C]&&h.slides[t.realIndex+C].classList.add(p);const y=t.params.thumbs.autoScrollOffset,E=y&&!h.params.loop;if(t.realIndex!==h.realIndex||E){const C=h.activeIndex;let k,T;if(h.params.loop){const P=h.slides.find(S=>S.getAttribute("data-swiper-slide-index")===`${t.realIndex}`);k=h.slides.indexOf(P),T=t.activeIndex>t.previousIndex?"next":"prev"}else k=t.realIndex,T=k>t.previousIndex?"next":"prev";E&&(k+=T==="next"?y:-1*y),h.visibleSlidesIndexes&&h.visibleSlidesIndexes.indexOf(k)<0&&(h.params.centeredSlides?k>C?k=k-Math.floor(f/2)+1:k=k+Math.floor(f/2)-1:k>C&&h.params.slidesPerGroup,h.slideTo(k,u?0:void 0))}}n("beforeInit",()=>{const{thumbs:u}=t.params;if(!(!u||!u.swiper))if(typeof u.swiper=="string"||u.swiper instanceof HTMLElement){const h=Ca(),f=()=>{const p=typeof u.swiper=="string"?h.querySelector(u.swiper):u.swiper;if(p&&p.swiper)u.swiper=p.swiper,a(),l(!0);else if(p){const y=`${t.params.eventsPrefix}init`,E=C=>{u.swiper=C.detail[0],p.removeEventListener(y,E),a(),l(!0),u.swiper.update(),t.update()};p.addEventListener(y,E)}return p},g=()=>{if(t.destroyed)return;f()||requestAnimationFrame(g)};requestAnimationFrame(g)}else a(),l(!0)}),n("slideChange update resize observerUpdate",()=>{l()}),n("setTransition",(u,h)=>{const f=t.thumbs.swiper;!f||f.destroyed||f.setTransition(h)}),n("beforeDestroy",()=>{const u=t.thumbs.swiper;!u||u.destroyed||r&&u.destroy()}),Object.assign(t.thumbs,{init:a,update:l})}function TA(i){let{swiper:t,extendParams:e,emit:n,once:s}=i;e({freeMode:{enabled:!1,momentum:!0,momentumRatio:1,momentumBounce:!0,momentumBounceRatio:1,momentumVelocityRatio:1,sticky:!1,minimumVelocity:.02}});function r(){if(t.params.cssMode)return;const l=t.getTranslate();t.setTranslate(l),t.setTransition(0),t.touchEventsData.velocities.length=0,t.freeMode.onTouchEnd({currentPos:t.rtl?t.translate:-t.translate})}function o(){if(t.params.cssMode)return;const{touchEventsData:l,touches:u}=t;l.velocities.length===0&&l.velocities.push({position:u[t.isHorizontal()?"startX":"startY"],time:l.touchStartTime}),l.velocities.push({position:u[t.isHorizontal()?"currentX":"currentY"],time:cl()})}function a(l){let{currentPos:u}=l;if(t.params.cssMode)return;const{params:h,wrapperEl:f,rtlTranslate:g,snapGrid:p,touchEventsData:y}=t,C=cl()-y.touchStartTime;if(u<-t.minTranslate()){t.slideTo(t.activeIndex);return}if(u>-t.maxTranslate()){t.slides.length<p.length?t.slideTo(p.length-1):t.slideTo(t.slides.length-1);return}if(h.freeMode.momentum){if(y.velocities.length>1){const L=y.velocities.pop(),M=y.velocities.pop(),B=L.position-M.position,U=L.time-M.time;t.velocity=B/U,t.velocity/=2,Math.abs(t.velocity)<h.freeMode.minimumVelocity&&(t.velocity=0),(U>150||cl()-L.time>300)&&(t.velocity=0)}else t.velocity=0;t.velocity*=h.freeMode.momentumVelocityRatio,y.velocities.length=0;let k=1e3*h.freeMode.momentumRatio;const T=t.velocity*k;let P=t.translate+T;g&&(P=-P);let S=!1,O;const A=Math.abs(t.velocity)*20*h.freeMode.momentumBounceRatio;let N;if(P<t.maxTranslate())h.freeMode.momentumBounce?(P+t.maxTranslate()<-A&&(P=t.maxTranslate()-A),O=t.maxTranslate(),S=!0,y.allowMomentumBounce=!0):P=t.maxTranslate(),h.loop&&h.centeredSlides&&(N=!0);else if(P>t.minTranslate())h.freeMode.momentumBounce?(P-t.minTranslate()>A&&(P=t.minTranslate()+A),O=t.minTranslate(),S=!0,y.allowMomentumBounce=!0):P=t.minTranslate(),h.loop&&h.centeredSlides&&(N=!0);else if(h.freeMode.sticky){let L;for(let M=0;M<p.length;M+=1)if(p[M]>-P){L=M;break}Math.abs(p[L]-P)<Math.abs(p[L-1]-P)||t.swipeDirection==="next"?P=p[L]:P=p[L-1],P=-P}if(N&&s("transitionEnd",()=>{t.loopFix()}),t.velocity!==0){if(g?k=Math.abs((-P-t.translate)/t.velocity):k=Math.abs((P-t.translate)/t.velocity),h.freeMode.sticky){const L=Math.abs((g?-P:P)-t.translate),M=t.slidesSizesGrid[t.activeIndex];L<M?k=h.speed:L<2*M?k=h.speed*1.5:k=h.speed*2.5}}else if(h.freeMode.sticky){t.slideToClosest();return}h.freeMode.momentumBounce&&S?(t.updateProgress(O),t.setTransition(k),t.setTranslate(P),t.transitionStart(!0,t.swipeDirection),t.animating=!0,y0(f,()=>{!t||t.destroyed||!y.allowMomentumBounce||(n("momentumBounce"),t.setTransition(h.speed),setTimeout(()=>{t.setTranslate(O),y0(f,()=>{!t||t.destroyed||t.transitionEnd()})},0))})):t.velocity?(n("_freeModeNoMomentumRelease"),t.updateProgress(P),t.setTransition(k),t.setTranslate(P),t.transitionStart(!0,t.swipeDirection),t.animating||(t.animating=!0,y0(f,()=>{!t||t.destroyed||t.transitionEnd()}))):t.updateProgress(P),t.updateActiveIndex(),t.updateSlidesClasses()}else if(h.freeMode.sticky){t.slideToClosest();return}else h.freeMode&&n("_freeModeNoMomentumRelease");(!h.freeMode.momentum||C>=h.longSwipesMs)&&(n("_freeModeStaticRelease"),t.updateProgress(),t.updateActiveIndex(),t.updateSlidesClasses())}Object.assign(t,{freeMode:{onTouchStart:r,onTouchMove:o,onTouchEnd:a}})}const eZ={BASE_URL:"/react-and-bloom/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_BASE:"https://ec-course-api.hexschool.io/v2",VITE_API_PATH:"and-bloom"},{VITE_API_BASE:tZ,VITE_API_PATH:nZ}=eZ,iZ=gb`
  .main-swiper-side {
    aspect-ratio: 3 / 4;
    position: relative;
  }

  .main-swiper-side::after {
    content: "";
    position: absolute;
    inset: 0;
    background: linear-gradient(to bottom, transparent 75%, rgba(0, 0, 0, 0.05) 85%, rgba(0, 0, 0, 0.1));
    pointer-events: none;
  }

  .swiper-slide img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .swiper-navigation {
    z-index: 1000;
  }

  .thumb .swiper-slide {
    width: 25%;
    aspect-ratio: 1 / 1;
    opacity: 0.5;
    cursor: pointer;
  }

  .thumb .swiper-slide-thumb-active {
    opacity: 1;
  }
`,sZ=()=>{const i=vn(),{id:t}=B_(),e=Pl(),[n,s]=R.useState(null),[r,o]=R.useState(1),{products:a,getProducts:l}=vb({category:n==null?void 0:n.category,immediate:!1}),u=R.useMemo(()=>a==null?void 0:a.filter(T=>T.id!==(n==null?void 0:n.id)).slice(0,2),[n==null?void 0:n.id,a]);R.useEffect(()=>{t||e("/products"),(async()=>{var T,P;try{i(Xe(!0));const S=await Le.get(`${tZ}/api/${nZ}/product/${t}`);s(S.data.product),await l()}catch(S){S instanceof St&&(console.log((T=S==null?void 0:S.response)==null?void 0:T.data.message),((P=S==null?void 0:S.response)==null?void 0:P.status)===404&&e("*"))}finally{i(Xe(!1))}})()},[i,l,t,e]);const h=T=>{const P=T.replace(/[^0-9]+/g,"");return P&&parseInt(P)?parseInt(P):1},[f,g]=R.useState(null),[p,y]=R.useState(null),E={spaceBetween:"10px",loop:!0,modules:[TA,xA,kA]},C={slidesPerView:4,spaceBetween:"10px",freeMode:!0,watchSlidesProgress:!0,modules:[TA,xA,kA],className:"thumb"},k={觀花植物:"./icon-dark-03.svg",多肉植物:"./icon-dark-02.svg",大型植栽:"./icon-dark-04.svg",觀葉植物:"./icon-dark-01.svg"};return v.jsxs(v.Fragment,{children:[v.jsx(iZ,{}),v.jsx("div",{className:"container my-5",children:v.jsxs("div",{className:"row",children:[v.jsx("div",{className:"col-md-5 col-lg-4 mb-3 mb-md-0",children:a.length?v.jsxs(v.Fragment,{children:[v.jsxs(hp,{onSwiper:y,thumbs:{swiper:f},...E,className:"position-relative bg-background mb-2",children:[v.jsx(Hc,{className:"main-swiper-side",children:v.jsx("img",{src:n==null?void 0:n.imageUrl,className:"w-100 object-fit-cover mask-img",alt:"主圖"})}),n==null?void 0:n.imagesUrl.map((T,P)=>v.jsx(Hc,{className:"main-swiper-side",children:v.jsx("img",{src:T,alt:"附圖",className:"d-block w-100 object-fit-cover mask-img"})},`swiper-slide-${P}`)),v.jsxs("div",{className:"swiper-navigation position-absolute bottom-0 start-0 d-flex justify-content-between w-100 px-2",children:[v.jsx("i",{className:"bi bi-arrow-left fs-1 text-white cursor-pointer",onClick:()=>p==null?void 0:p.slidePrev()}),v.jsx("i",{className:"bi bi-arrow-right fs-1 text-white cursor-pointer",onClick:()=>p==null?void 0:p.slideNext()})]})]}),v.jsxs(hp,{onSwiper:g,...C,children:[v.jsx(Hc,{children:v.jsx("img",{src:n==null?void 0:n.imageUrl,className:"w-100 object-fit-cover mask-img",alt:"主圖"})}),n==null?void 0:n.imagesUrl.map((T,P)=>v.jsx(Hc,{children:v.jsx("img",{src:T,alt:"附圖",className:"d-block w-100 object-fit-cover mask-img"})},`thumb-swiper-slide-${P}`))]})]}):""}),v.jsxs("div",{className:"col-md-7 col-lg-8 d-flex flex-column",children:[v.jsxs("div",{children:[v.jsx("span",{className:"badge rounded-pill bg-primary mb-3 align-self-start",children:n==null?void 0:n.category}),v.jsx("img",{src:n!=null&&n.category?k[n==null?void 0:n.category]:"",alt:`${n==null?void 0:n.category}-icon`,className:"ms-2",style:{maxWidth:"30px",maxHeight:"30px"}})]}),v.jsx("h2",{className:"fs-3 fw-light",children:n==null?void 0:n.title}),v.jsxs("div",{className:"my-4",children:[v.jsx("div",{className:"border-top border-bottom d-flex align-items-stretch",children:v.jsxs("div",{className:"row w-100",children:[v.jsx("div",{className:"col-3 col-lg-2 d-flex align-items-center border-end",children:v.jsx("h6",{className:"my-3 fs-sm",children:"商品描述"})}),v.jsx("div",{className:"col-9 col-lg-10 my-3",children:v.jsx("p",{className:"mb-0",children:n==null?void 0:n.description})})]})}),v.jsx("div",{className:"border-bottom d-flex align-items-stretch",children:v.jsxs("div",{className:"row w-100",children:[v.jsx("div",{className:"col-3 col-lg-2 d-flex align-items-center border-end",children:v.jsx("h6",{className:"my-3 fs-sm",children:"適合溫度"})}),v.jsx("div",{className:"col-9 col-lg-10 my-3",children:v.jsx("p",{className:"mb-0",children:n==null?void 0:n.content})})]})}),v.jsx("div",{className:"border-bottom d-flex align-items-stretch",children:v.jsxs("div",{className:"row w-100",children:[v.jsx("div",{className:"col-3 col-lg-2 d-flex align-items-center border-end",children:v.jsx("h6",{className:"my-3 fs-sm",children:"寵物注意"})}),v.jsx("div",{className:"col-9 col-lg-10 my-3",children:v.jsx("p",{className:"mb-0",children:n==null?void 0:n.petCareNotes})})]})}),v.jsx("div",{className:"border-bottom d-flex align-items-stretch",children:v.jsxs("div",{className:"row w-100",children:[v.jsx("div",{className:"col-3 col-lg-2 d-flex align-items-center border-end",children:v.jsx("h6",{className:"my-3 fs-sm",children:"花語"})}),v.jsx("div",{className:"col-9 col-lg-10 my-3",children:v.jsx("p",{className:"mb-0",children:n==null?void 0:n.floriography})})]})})]}),v.jsxs("div",{className:"d-flex align-items-center mb-4",children:[v.jsxs("h4",{className:`mb-0 fst-italic fw-normal ${((n==null?void 0:n.price)??0)<((n==null?void 0:n.origin_price)??0)&&"text-danger"}`,children:["$ ",n==null?void 0:n.price]}),((n==null?void 0:n.price)??0)<((n==null?void 0:n.origin_price)??0)?v.jsxs(v.Fragment,{children:[v.jsx("span",{className:"badge rounded-pill fst-italic fw-light text-bg-danger ms-2 me-3",children:"sale"}),v.jsxs("h6",{className:"text-decoration-line-through fw-light mb-0",children:["$ ",n==null?void 0:n.origin_price]})]}):""]}),v.jsxs("div",{className:"d-flex flex-column flex-md-row align-items-md-center mt-auto",children:[v.jsxs("div",{className:"d-flex align-items-center mb-3 mb-md-0",children:[v.jsx("i",{className:`bi bi-dash-square-fill fs-3 ${r===1?"cursor-default opacity-50":"cursor-pointer"}`,onClick:()=>r>1&&o(r-1)}),v.jsx("input",{type:"number",className:"form-control w-auto mx-2",value:r,onChange:T=>o(h(T.target.value))}),v.jsx("i",{className:"bi bi-plus-square-fill fs-3 cursor-pointer",onClick:()=>o(r+1)})]}),v.jsx(qt,{type:"submit",btnStyle:"btn btn-secondary flex-shrink-0 ms-md-3",handleClick:()=>{i(iE({productId:n==null?void 0:n.id,qty:r}))},children:"加入購物車"})]})]}),u.length?v.jsx("div",{className:"mt-5",children:v.jsxs("div",{className:"border-top py-5 px-2 px-md-4 px-lg-5",children:[v.jsxs("div",{className:"d-flex flex-column align-items-center text-center",children:[v.jsx("h5",{className:"title text-center fs-2 mb-3",children:"＼ Recommendations ／"}),v.jsx("p",{className:"d-block",children:"精選商品"})]}),v.jsx("div",{className:"row row-cols-1 row-cols-md-2 gx-lg-5 my-4 my-lg-5",children:u.map(T=>v.jsx(wb,{item:T,isLink:!0},T.id))})]})}):""]})})]})},rZ=()=>{const i=vn(),[t,e]=R.useState(""),{products:n,currentPage:s,setCurrentPage:r,totalPages:o}=vb({category:t});return v.jsxs("div",{className:"container my-5",children:[v.jsxs("div",{className:"d-flex justify-content-between align-items-center pb-3 mb-5 border-bottom",children:[v.jsxs("div",{className:"d-flex align-items-center",children:[v.jsx("h3",{className:"title fs-2 mb-0 me-3",children:"All Plants"}),v.jsx("small",{className:"mt-2",children:"產｜品｜列｜表"})]}),v.jsxs("select",{name:"category",id:"category",className:"form-select form-select-sm w-auto",value:t,onChange:a=>e(a.target.value),children:[v.jsx("option",{value:"",children:"所有商品"}),v.jsx("option",{value:"大型植栽",children:"大型植栽"}),v.jsx("option",{value:"觀花植物",children:"觀花植物"}),v.jsx("option",{value:"觀葉植物",children:"觀葉植物"}),v.jsx("option",{value:"多肉植物",children:"多肉植物"})]})]}),v.jsx("div",{className:"row row-cols-1 row-cols-md-2 gx-4",children:n.map(a=>v.jsx(wb,{item:a,hasBg:!1,children:v.jsxs("div",{className:"w-100 d-flex flex-column flex-sm-row align-items-sm-center justify-content-end pt-4 mt-auto",children:[v.jsx(on,{to:`/product/${a.id}`,className:"btn btn-sm btn-outline-primary rounded-pill mb-2 mb-sm-0 me-sm-2 px-4",children:"查看更多"}),v.jsx(qt,{btnStyle:"btn-sm btn-secondary",handleClick:()=>i(iE({productId:a.id})),children:"加入購物車"})]})},a.id))}),v.jsx("div",{className:"d-flex justify-content-center my-5",children:v.jsx(Su,{currentPage:s,totalPages:o,setCurrentPage:r})})]})},oZ={BASE_URL:"/react-and-bloom/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_BASE:"https://ec-course-api.hexschool.io/v2",VITE_API_PATH:"and-bloom"},{VITE_API_BASE:aZ}=oZ,lZ=()=>{const i=vn(),[t,e]=R.useState({username:"",password:""}),n=Pl(),s=R.useCallback(o=>{const{name:a,value:l}=o.target;e(u=>({...u,[a]:l}))},[]),r=async o=>{var a,l;o.preventDefault();try{i(Xe(!0));const u=await Le.post(`${aZ}/admin/signin`,t),{token:h,expired:f}=u.data;document.cookie=`andBloom=${h}; expires=${new Date(f)}; path=/;`,setTimeout(()=>{n("/admin/products")},100)}catch(u){u instanceof St&&(console.log((a=u==null?void 0:u.response)==null?void 0:a.data.message),i(en({text:(l=u==null?void 0:u.response)==null?void 0:l.data.message,type:"danger"})))}finally{i(Xe(!1))}};return v.jsx("div",{className:"position-fixed top-0 bottom-0 start-0 end-0 d-flex align-items-center justify-content-center",children:v.jsxs("form",{id:"form",className:"form",onSubmit:r,children:[v.jsxs("div",{className:"mb-3",children:[v.jsx("label",{htmlFor:"username",className:"form-label",children:"Email"}),v.jsx("input",{type:"email",name:"username",className:"form-control",id:"username",placeholder:"email",onChange:s})]}),v.jsxs("div",{className:"mb-3",children:[v.jsx("label",{htmlFor:"password",className:"form-label",children:"Password"}),v.jsx("input",{type:"password",name:"password",className:"form-control",id:"password",placeholder:"password",onChange:s})]}),v.jsx("button",{type:"submit",className:"btn btn-primary w-100",children:"Login"})]})})},cZ=()=>v.jsxs("div",{className:"fixed-top vh-100 d-flex flex-column align-items-center justify-content-center text-center bg-secondary bg-opacity-25",children:[v.jsx("h2",{children:"404 Not Found"}),v.jsx("p",{className:"mt-2",children:"找不到頁面"}),v.jsx(on,{to:"/",className:"btn btn-secondary rounded-pill px-5 mt-3",children:"回首頁"})]}),uZ=mt("li")`
  margin-top: -1px;
  &:hover {
    background-color: #f8f9fa;
    z-index: 1000;
    border-color: rgba(0, 0, 0, 0.3);
  }
`,dZ=R.memo(({showModal:i,coupon:t,setSelectedCoupon:e,showAlertModal:n})=>{const{title:s,is_enabled:r,percent:o,due_date:a,code:l}=t,u=R.useCallback(f=>{e(f),i()},[i,e]),h=R.useCallback(f=>{e(f),n()},[n,e]);return v.jsx(uZ,{className:"card mb-3",children:v.jsx("div",{className:"card-body",children:v.jsxs("div",{className:"row w-100 justify-content-between align-items-center",children:[v.jsx("div",{className:"col-md-2",children:v.jsx("p",{className:"mb-0 ms-4",children:s})}),v.jsxs("div",{className:"col-md-2",children:[v.jsx("span",{className:"badge rounded-pill bg-primary fs-sm mb-1",children:"折扣碼"}),v.jsx("p",{className:"mb-0",children:l})]}),v.jsxs("div",{className:"col-md-2",children:[v.jsx("span",{className:"badge rounded-pill bg-primary fs-sm mb-1",children:"折扣數"}),v.jsxs("p",{className:"mb-0",children:[o," %"]})]}),v.jsxs("div",{className:"col-md-2",children:[v.jsx("span",{className:"badge rounded-pill bg-primary fs-sm mb-1",children:"到期日"}),v.jsx("p",{className:"mb-0",children:uo(a)})]}),v.jsx("div",{className:"col-md d-flex justify-content-center",children:v.jsx(pb,{isEnabled:r})}),v.jsxs("div",{className:"col-md d-flex align-items-center justify-content-end",children:[v.jsx(qt,{btnStyle:"btn-sm btn-secondary",handleClick:()=>u(t),children:"編輯"}),v.jsx(qt,{btnStyle:"btn-sm btn-outline-primary ms-2",handleClick:()=>h(t),children:"刪除"})]})]})})})}),hZ={BASE_URL:"/react-and-bloom/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_BASE:"https://ec-course-api.hexschool.io/v2",VITE_API_PATH:"and-bloom"},{VITE_API_BASE:fZ,VITE_API_PATH:mZ}=hZ,SA={title:"",is_enabled:1,percent:100,due_date:"",code:""},gZ=R.forwardRef(({selectedCoupon:i,getCoupons:t},e)=>{const n=vn(),s=R.useRef(null),r=R.useRef(null),{register:o,handleSubmit:a,watch:l,getValues:u,setValue:h,reset:f,control:g,formState:{errors:p}}=cf({mode:"onTouched",defaultValues:SA});R.useEffect(()=>{s.current&&(r.current=new Js(s.current))},[]);const[y]=oE({control:g,name:["is_enabled"]}),E=async C=>{var k,T,P;try{n(Xe(!0));const S=document.cookie.replace(/(?:(?:^|.*;\s*)andBloom\s*=\s*([^;]*).*$)|^.*$/,"$1");Le.defaults.headers.common.Authorization=S;const O=await Le[i?"put":"post"](`${fZ}/api/${mZ}/admin/coupon${i?`/${i.id}`:""}`,{data:{...C,is_enabled:C.is_enabled?1:0}});t(),(k=r.current)==null||k.hide(),n(en({text:O==null?void 0:O.data.message,type:"success"}))}catch(S){S instanceof St&&(console.log((T=S==null?void 0:S.response)==null?void 0:T.data.message),n(en({text:(P=S==null?void 0:S.response)==null?void 0:P.data.message,type:"danger"})))}finally{n(Xe(!1))}};return R.useEffect(()=>{const C=s.current,k=()=>{f(SA)};return C==null||C.addEventListener("hidden.bs.modal",k),()=>C==null?void 0:C.removeEventListener("hidden.bs.modal",k)},[s,f]),R.useEffect(()=>{const C=s.current,k=()=>{i&&f({...i,due_date:uo(i.due_date)})};return C==null||C.addEventListener("shown.bs.modal",k),()=>C==null?void 0:C.removeEventListener("shown.bs.modal",k)},[i,s,f]),R.useImperativeHandle(e,()=>({show:()=>{var C;(C=r.current)==null||C.show()},hide:()=>{var C;(C=r.current)==null||C.hide()}})),v.jsx("div",{className:"modal fade","data-bs-backdrop":"static",tabIndex:-1,ref:s,children:v.jsx("div",{className:"modal-dialog modal-lg",children:v.jsxs("div",{className:"modal-content",children:[v.jsxs("div",{className:"modal-header",children:[v.jsx("h2",{className:"modal-title fs-5",children:i?"編輯優惠券":"新增優惠券"}),v.jsx("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),v.jsxs("form",{onSubmit:a(E),children:[v.jsx("div",{className:"modal-body",children:v.jsxs("div",{className:"row",children:[v.jsx("div",{className:"mb-3",children:v.jsx(Ti,{id:"title",label:"優惠券名稱",type:"text",placeholder:"請輸入名稱",register:o,errors:p,rules:{required:"優惠券名稱必填"}})}),v.jsx("div",{className:"mb-3",children:v.jsx(Ti,{id:"code",label:"優惠券代碼",type:"text",placeholder:"請輸入代碼",register:o,errors:p,rules:{required:"優惠券代碼必填"}})}),v.jsx("div",{className:"col-md-6 mb-3",children:v.jsx(Ti,{id:"percent",label:"折扣數",type:"number",placeholder:"請輸入折扣數",register:o,errors:p,rules:{required:"折扣數必填",min:{value:50,message:"折扣數需大於 50"},max:{value:100,message:"折扣數需小於等於 100"},valueAsNumber:!0}})}),v.jsx("div",{className:"col-md-6 mb-3",children:v.jsx(Ti,{id:"due_date",label:"到期日",type:"date",placeholder:"請輸入到期日",register:o,errors:p,rules:{required:"到期日必填",setValueAs:C=>C?new Date(C).getTime()/1e3:null}})}),v.jsx("div",{className:"mb-3",children:v.jsx(Ws,{id:"is_enabled",label:"是否啟用",errors:p,children:v.jsxs("div",{className:`d-block ${p.is_enabled&&"is-invalid"}`,role:"group",children:[v.jsx("input",{type:"checkbox",className:"btn-check",id:"enabled",...o("is_enabled")}),v.jsx("label",{className:`btn px-4 ${y?"btn-success":"btn-danger"}`,htmlFor:"enabled",children:y?"啟用":"停用"})]})})})]})}),v.jsxs("div",{className:"modal-footer",children:[v.jsx(qt,{btnStyle:"btn btn-outline-secondary px-4","data-bs-dismiss":"modal",children:"取消"}),v.jsx(qt,{type:"submit",btnStyle:"btn btn-secondary px-4",children:"儲存"})]})]})]})})})}),pZ=R.memo(gZ),bZ={BASE_URL:"/react-and-bloom/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_BASE:"https://ec-course-api.hexschool.io/v2",VITE_API_PATH:"and-bloom"},{VITE_API_BASE:AA,VITE_API_PATH:PA}=bZ,wZ=()=>{const i=vn(),[t,e]=R.useState([]),[n,s]=R.useState(1),[r,o]=R.useState(1),[a,l]=R.useState(null),u=R.useRef(null),h=R.useRef(null),f=R.useCallback(async()=>{var C,k,T;try{i(Xe(!0));const P=document.cookie.replace(/(?:(?:^|.*;\s*)andBloom\s*=\s*([^;]*).*$)|^.*$/,"$1");Le.defaults.headers.common.Authorization=P;const S=await Le.get(`${AA}/api/${PA}/admin/coupons?page=${n}`);e(S.data.coupons),o((C=S.data.pagination)==null?void 0:C.total_pages),s((k=S.data.pagination)==null?void 0:k.current_page)}catch(P){P instanceof St&&console.log((T=P==null?void 0:P.response)==null?void 0:T.data.message)}finally{i(Xe(!1))}},[n,i]);R.useEffect(()=>{f()},[f]);const g=R.useCallback(()=>{var C;(C=u.current)==null||C.show()},[]),p=R.useCallback(()=>{var C;(C=h.current)==null||C.show()},[]),y=R.useCallback(()=>{l(null),g()},[g]),E=R.useCallback(async C=>{var k,T,P;if(C)try{i(Xe(!0));const S=await Le.delete(`${AA}/api/${PA}/admin/coupon/${C}`);i(en({text:S==null?void 0:S.data.message,type:"success"})),f(),(k=h.current)==null||k.hide()}catch(S){S instanceof St&&(console.log((T=S==null?void 0:S.response)==null?void 0:T.data.message),i(en({text:(P=S==null?void 0:S.response)==null?void 0:P.data.message,type:"danger"})))}finally{i(Xe(!1)),l(null)}},[i,f]);return v.jsxs(v.Fragment,{children:[v.jsxs("div",{className:"d-flex justify-content-between align-items-center pb-3 mb-3 border-bottom",children:[v.jsx("h3",{className:"mb-0",children:"優惠券列表"}),v.jsx(qt,{btnStyle:"btn-sm btn-secondary",handleClick:y,children:"新增"})]}),t.length?v.jsxs(v.Fragment,{children:[t.map(C=>v.jsx(dZ,{showModal:g,setSelectedCoupon:l,showAlertModal:p,coupon:C},C.id)),v.jsx("div",{className:"d-flex justify-content-center my-5",children:v.jsx(Su,{currentPage:n,totalPages:r,setCurrentPage:s})})]}):v.jsx("p",{className:"text-center",children:"尚無優惠券"}),v.jsx(pZ,{ref:u,selectedCoupon:a,getCoupons:f}),v.jsx(af,{ref:h,nextFn:()=>E((a==null?void 0:a.id)||""),children:v.jsxs("p",{className:"text-center py-4",children:["刪除後無法復原，您確定刪除",v.jsx("strong",{children:a==null?void 0:a.title}),"嗎？"]})})]})},vZ={BASE_URL:"/react-and-bloom/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_BASE:"https://ec-course-api.hexschool.io/v2",VITE_API_PATH:"and-bloom"},{VITE_API_BASE:IA,VITE_API_PATH:RA}=vZ,yZ=mt("p")`
  position: relative;
  display: inline-block;

  &::before, &::after {
    content: '';
    position: absolute;
    width: 75px;
    height: 1px;
    background-color: black;
    top: 50%;
    transform: translateY(-50%);
  }

  &::before {
    left: -85px;
  }

  &::after {
    right: -85px;
  }
`,_Z=()=>{var u,h,f,g,p;const i=vn(),{id:t}=B_(),[e,n]=R.useState({}),[s,r]=R.useState(!1);R.useEffect(()=>{t&&(async()=>{var y,E;try{i(Xe(!0));const C=await Le.get(`${IA}/api/${RA}/order/${t}`);n(C.data.order)}catch(C){C instanceof St&&(console.log((y=C==null?void 0:C.response)==null?void 0:y.data.message),((E=C==null?void 0:C.response)==null?void 0:E.status)===404&&n({}))}finally{i(Xe(!1))}})()},[i,t]);const o=R.useMemo(()=>{var y;if(e!=null&&e.products)return((y=Object.values(e==null?void 0:e.products))==null?void 0:y.reduce((E,C)=>E+(C.total*100-C.final_total*100),0))/100},[e]),a=R.useMemo(()=>{var y,E,C,k;if(!(!(e!=null&&e.products)||!((E=(y=Object.values(e==null?void 0:e.products))==null?void 0:y[0])!=null&&E.coupon)))return(k=(C=Object.values(e==null?void 0:e.products))==null?void 0:C[0])==null?void 0:k.coupon},[e]),l=async()=>{var y;try{i(Xe(!0)),await Le.post(`${IA}/api/${RA}/pay/${t}`),r(!0)}catch(E){E instanceof St&&console.log((y=E==null?void 0:E.response)==null?void 0:y.data.message)}finally{i(Xe(!1))}};return v.jsx(v.Fragment,{children:s?v.jsxs("div",{className:"container text-center py-5 my-5",children:[v.jsx("img",{src:"./plant-01.svg",alt:"plant-icon",className:"mb-4",style:{width:"70px"}}),v.jsx("h3",{className:"title text-info fst-italic mb-3",style:{fontSize:"64px"},children:"Thank You!"}),v.jsxs(yZ,{children:["已收到您的訂單，",v.jsx("br",{className:"d-sm-none"}),"我們將儘速為您處理"]})]}):v.jsxs("div",{className:"container my-5",children:[v.jsxs("div",{className:"d-flex align-items-center pb-3 mb-4",children:[v.jsx("h3",{className:"title fs-2 mb-0 me-3",children:"Checkout"}),v.jsx("small",{className:"mt-2",children:"訂｜單｜結｜帳"})]}),e?v.jsxs(v.Fragment,{children:[v.jsxs("div",{className:"row",children:[v.jsxs("div",{className:"mb-4 d-flex flex-column flex-md-row align-items-start align-items-md-center",children:[v.jsx("span",{className:"badge rounded-pill bg-primary me-3",children:"訂單成立時間"}),v.jsx("p",{className:"mb-md-0 me-4",children:e.create_at&&uo(e==null?void 0:e.create_at)}),v.jsx("span",{className:"badge rounded-pill bg-primary me-3",children:"付款狀態"}),v.jsx("p",{className:`mb-md-0 me-4 ${e.is_paid?"text-success":"text-danger"}`,children:e.is_paid?"已付款":"待付款"}),e.is_paid?v.jsxs(v.Fragment,{children:[v.jsx("span",{className:"badge rounded-pill bg-primary me-3",children:"付款時間"}),v.jsx("p",{className:"mb-md-0 me-4",children:e.paid_date&&uo(e.paid_date)})]}):""]}),v.jsxs("div",{className:"col-md-6 mb-4",children:[v.jsx("span",{className:"badge rounded-pill bg-primary mb-1",children:"訂購資訊"}),v.jsxs("small",{className:"d-flex py-1 my-1 border-bottom border-top",children:[v.jsx("span",{className:"flex-shrink-0 me-4",children:"訂購大名"}),v.jsx("span",{className:"ms-auto",children:(u=e.user)==null?void 0:u.name})]}),v.jsxs("small",{className:"d-flex py-1 my-1 border-bottom",children:[v.jsx("span",{className:"flex-shrink-0 me-4",children:"聯絡電話"}),v.jsx("span",{className:"ms-auto",children:(h=e.user)==null?void 0:h.tel})]}),v.jsxs("small",{className:"d-flex py-1 my-1 border-bottom",children:[v.jsx("span",{className:"flex-shrink-0 me-4",children:"收件地址"}),v.jsx("span",{className:"ms-auto",children:(f=e.user)==null?void 0:f.address})]}),v.jsxs("small",{className:"d-flex py-1 my-1 border-bottom",children:[v.jsx("span",{className:"flex-shrink-0 me-4",children:"電子郵件"}),v.jsx("span",{className:"ms-auto",children:(g=e.user)==null?void 0:g.email})]}),v.jsxs("small",{className:"d-flex py-1 my-1 border-bottom",children:[v.jsx("span",{className:"flex-shrink-0 me-4",children:"訂單備註"}),v.jsx("span",{className:"ms-auto",children:e.message})]})]}),v.jsxs("div",{className:"col-md-6 mb-4",children:[v.jsx("span",{className:"badge rounded-pill bg-primary mb-1",children:"商品明細"}),(e==null?void 0:e.products)&&((p=Object.values(e==null?void 0:e.products))==null?void 0:p.map((y,E)=>v.jsxs("small",{className:`d-flex py-1 my-1 border-bottom ${E===0&&"border-top"}`,children:[v.jsxs("span",{className:"flex-shrink-0 me-4",children:[y.product.title," * ",y.qty]}),v.jsxs("span",{className:"ms-auto",children:["$",y.total]})]},`${t}-${y.id}`))),v.jsxs("small",{className:"d-flex pb-1 mb-1 border-bottom",children:[v.jsxs("span",{className:"flex-shrink-0 me-4",children:["優惠券折扣",a?`（${a.title} ${a.percent} 折）`:""]}),a?v.jsxs("span",{className:"ms-auto text-danger",children:["-$",o]}):""]}),v.jsxs("small",{className:"fw-bold d-flex pb-1 mb-1 border-bottom",children:[v.jsx("span",{className:"flex-shrink-0 me-4",children:"總金額"}),v.jsxs("span",{className:"ms-auto",children:["$",e.total]})]})]})]}),e.is_paid?"":v.jsx("div",{className:"text-center",children:v.jsx(qt,{btnStyle:"btn btn-secondary px-5 mt-5",handleClick:l,children:"確認結帳"})})]}):v.jsxs("div",{className:"text-center",children:[v.jsx("h6",{className:"text-dark",children:"查無此訂單"}),v.jsxs(on,{to:"/cart",className:"btn btn-secondary rounded-pill px-5 mt-4 position-relative",children:["回到購物車",v.jsx("span",{className:"btn-arrow ms-3 position-absolute",children:"→"})]})]})]})})},EZ=mt("div")`
  aspect-ratio: 4 / 3;

  @media screen and (min-width: 768px) {
    aspect-ratio: 5 / 2;
  }
`,CZ=()=>{var s,r,o,a,l,u,h,f,g,p,y;const{articles:i,currentPage:t,setCurrentPage:e,totalPages:n}=mN();return v.jsxs("div",{className:"container my-5",children:[v.jsxs("div",{className:"row mb-5",children:[v.jsx(EZ,{className:"col-md-7 mb-3 mb-md-0",children:v.jsx("img",{src:(s=i[0])==null?void 0:s.image,alt:(r=i[0])==null?void 0:r.title,className:"object-fit-cover h-100 w-100"})}),v.jsxs("div",{className:"col-md-5",children:[v.jsx("div",{className:"mb-3",children:(a=(o=i[0])==null?void 0:o.tag)==null?void 0:a.map((E,C)=>v.jsx("span",{className:"badge rounded-pill bg-primary fs-sm mb-1 me-1",children:E},`tag-${C}`))}),v.jsx("h3",{className:"fw-light pb-3 mb-3 border-bottom",children:(l=i[0])==null?void 0:l.title}),v.jsxs("div",{className:"mb-3 d-flex align-items-end justify-content-between",children:[v.jsx("p",{className:"mb-0",children:((u=i[0])==null?void 0:u.create_at)&&uo((h=i[0])==null?void 0:h.create_at)}),v.jsxs("p",{className:"mb-0",children:[v.jsx("small",{children:"Posted by_"})," ",(f=i[0])==null?void 0:f.author]})]}),v.jsx("p",{className:"mb-3 text-ellipsis lh-lg",style:{fontSize:"0.9rem"},children:(g=i[0])==null?void 0:g.description}),v.jsxs(on,{to:`/article/${(p=i[0])==null?void 0:p.id}`,className:"btn btn-secondary rounded-pill px-5 position-relative",children:["看更多",v.jsx("span",{className:"btn-arrow ms-3 position-absolute",children:"→"})]})]})]}),v.jsx("div",{className:"row row-cols-1 row-cols-md-2 row-cols-lg-3",children:(y=i==null?void 0:i.slice(1))==null?void 0:y.map(E=>{var C;return v.jsxs(on,{to:`/article/${E.id}`,className:"mb-4",children:[v.jsxs("div",{className:"position-relative mb-3",style:{aspectRatio:"4 / 3"},children:[v.jsx("img",{src:E.image,alt:E.title,className:"object-fit-cover h-100 w-100"}),v.jsx("div",{className:"position-absolute bg-white bg-opacity-50",style:{bottom:0,left:0,right:0},children:v.jsx("div",{className:"p-2",children:(C=E.tag)==null?void 0:C.map((k,T)=>v.jsx("span",{className:"badge rounded-pill bg-primary fs-sm mb-y me-1",children:k},`tag-${T}`))})})]}),v.jsxs("div",{className:"mb-2 d-flex align-items-end justify-content-between",children:[v.jsx("p",{className:"mb-0",children:E.create_at&&uo(E.create_at)}),v.jsxs("p",{className:"mb-0",children:[v.jsx("small",{children:"Posted by_"})," ",E.author]})]}),v.jsx("h5",{className:"fw-light",children:E.title})]},E.id)})}),v.jsx("div",{className:"d-flex justify-content-center my-5",children:v.jsx(Su,{currentPage:t,totalPages:n,setCurrentPage:e})})]})},xZ={BASE_URL:"/react-and-bloom/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_BASE:"https://ec-course-api.hexschool.io/v2",VITE_API_PATH:"and-bloom"},{VITE_API_BASE:kZ,VITE_API_PATH:TZ}=xZ,SZ=mt("div")`
  aspect-ratio: 2 / 1;
  background: linear-gradient(135deg, #42b983, #ffed6e);
  margin-top: -70px;

  @media screen and (min-width: 768px) {
    aspect-ratio: 4 / 1;
  }
`,AZ=()=>{var r;const i=vn(),{id:t}=B_(),e=Pl(),[n,s]=R.useState(null);return R.useEffect(()=>{t||e("/articles"),(async()=>{var o,a;try{i(Xe(!0));const l=await Le.get(`${kZ}/api/${TZ}/article/${t}`);s(l.data.article)}catch(l){l instanceof St&&(console.log((o=l==null?void 0:l.response)==null?void 0:o.data.message),((a=l==null?void 0:l.response)==null?void 0:a.status)===404&&e("*"))}finally{i(Xe(!1))}})()},[i,t,e]),v.jsxs(v.Fragment,{children:[v.jsx(SZ,{className:"overflow-hidden",children:v.jsx("img",{src:n==null?void 0:n.image,alt:n==null?void 0:n.title,className:"object-fit-cover h-100 w-100 opacity-50",style:{filter:"grayscale(50%)"}})}),v.jsxs("div",{className:"container my-5",children:[v.jsx("div",{className:"mb-3",children:(r=n==null?void 0:n.tag)==null?void 0:r.map((o,a)=>v.jsx("span",{className:"badge rounded-pill bg-primary fs-sm mb-1 me-1",children:o},`tag-${a}`))}),v.jsxs("div",{className:"pb-3 mb-3 d-flex flex-column flex-lg-row align-items-lg-end justify-content-between border-bottom",children:[v.jsx("h2",{className:"fw-light mb-0 order-2 order-lg-1",children:n==null?void 0:n.title}),v.jsx("p",{className:"mb-lg-0 order-1 order-lg-2",children:(n==null?void 0:n.create_at)&&uo(n.create_at)})]}),v.jsxs("p",{className:"mb-5",children:[v.jsx("small",{children:"Posted by_"})," ",n==null?void 0:n.author]}),n!=null&&n.content?v.jsx("div",{className:"ck-content",dangerouslySetInnerHTML:{__html:n.content}}):""]})]})},PZ=mt("li")`
  margin-top: -1px;

  &:hover {
    background-color: #f8f9fa;
    z-index: 1000;
    border-color: rgba(0, 0, 0, 0.3);
  }
`,IZ=R.memo(({showModal:i,article:t,setSelectedArticle:e,showAlertModal:n})=>{const{author:s,image:r,isPublic:o,tag:a,title:l}=t,u=R.useCallback(f=>{e(f),i()},[i,e]),h=R.useCallback(f=>{e(f),n()},[n,e]);return v.jsx(PZ,{className:"card mb-3",children:v.jsx("div",{className:"card-body",children:v.jsxs("div",{className:"row w-100 justify-content-between align-items-center",children:[v.jsx("div",{className:"col-auto",children:v.jsx("div",{className:"image-container rounded-circle overflow-hidden border",style:{width:"80px",height:"80px"},children:v.jsx("img",{src:r,alt:l,className:"w-100 h-100 object-fit-cover"})})}),v.jsx("div",{className:"col-md",children:v.jsx("h6",{className:"mb-0",children:l})}),v.jsxs("div",{className:"col-md",children:[v.jsx("span",{className:"badge rounded-pill bg-primary fs-sm mb-1",children:"作者"}),v.jsx("p",{className:"mb-0",children:s})]}),v.jsxs("div",{className:"col-md",children:[v.jsx("span",{className:"badge rounded-pill bg-primary fs-sm mb-1",children:"標籤"}),v.jsx("p",{className:"mb-0",children:a.join(", ")})]}),v.jsx("div",{className:"col-md d-flex justify-content-center",children:v.jsx(pb,{isEnabled:o,labels:["隱藏","公開"]})}),v.jsxs("div",{className:"col-md d-flex align-items-center justify-content-end",children:[v.jsx(qt,{btnStyle:"btn-sm btn-secondary",handleClick:()=>u(t),children:"編輯"}),v.jsx(qt,{btnStyle:"btn-sm btn-outline-primary ms-2",handleClick:()=>h(t),children:"刪除"})]})]})})})});/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function RZ(){const i={resolve:null,promise:null};return i.promise=new Promise(t=>{i.resolve=t}),i}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function OZ(i){let t=null;return(...e)=>(t||(t={current:i(...e)}),t.current)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const Zn=new Array(256).fill("").map((i,t)=>("0"+t.toString(16)).slice(-2));function NZ(){const[i,t,e,n]=crypto.getRandomValues(new Uint32Array(4));return"e"+Zn[i>>0&255]+Zn[i>>8&255]+Zn[i>>16&255]+Zn[i>>24&255]+Zn[t>>0&255]+Zn[t>>8&255]+Zn[t>>16&255]+Zn[t>>24&255]+Zn[e>>0&255]+Zn[e>>8&255]+Zn[e>>16&255]+Zn[e>>24&255]+Zn[n>>0&255]+Zn[n>>8&255]+Zn[n>>16&255]+Zn[n>>24&255]}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function MZ(i,t){const e=i.extraPlugins||[];return{...i,extraPlugins:[...e,...t.filter(n=>!e.includes(n))]}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function gN(i){return!!i&&/^\d+\.\d+\.\d+/.test(i)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function pN(i){return i?["nightly","alpha","internal","nightly-","staging"].some(t=>i.includes(t)):!1}function LZ(i){return gN(i)||pN(i)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function VZ(i){if(!gN(i))throw new Error(`Invalid semantic version: ${i||"<blank>"}.`);const[t,e,n]=i.split(".");return{major:Number.parseInt(t,10),minor:Number.parseInt(e,10),patch:Number.parseInt(n,10)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function DZ(i){if(pN(i))return 3;const{major:t}=VZ(i);switch(!0){case t>=44:return 3;case t>=38:return 2;default:return 1}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function BZ(){const{CKEDITOR_VERSION:i,CKEDITOR:t}=window;return LZ(i)?{source:t?"cdn":"npm",version:i}:null}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function FZ(){const i=BZ();return i?DZ(i.version):null}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function bN(i,t){switch(t||(t=FZ()||void 0),t){case 1:case 2:return i===void 0;case 3:return i==="GPL";default:return!1}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function $Z(i,t){return function(n){bN(n.config.get("licenseKey"))||n.on("collectUsageData",(s,{setUsageData:r})=>{r(`integration.${i}`,t)})}}var zZ=Object.defineProperty,jZ=(i,t,e)=>t in i?zZ(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e,Ci=(i,t,e)=>jZ(i,typeof t!="symbol"?t+"":t,e);/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const wN=class vN{constructor(t,e){Ci(this,"_lifecycle"),Ci(this,"_element"),Ci(this,"_releaseLock",null),Ci(this,"_value",null),Ci(this,"_afterMountCallbacks",[]),Ci(this,"_state",{destroyedBeforeInitialization:!1,mountingInProgress:null}),Ci(this,"release",OZ(()=>{const{_releaseLock:n,_state:s,_element:r,_lifecycle:o}=this;s.mountingInProgress?s.mountingInProgress.then(()=>o.unmount({element:r,mountResult:this.value})).catch(a=>{console.error("Semaphore unmounting error:",a)}).then(n.resolve).then(()=>{this._value=null}):(s.destroyedBeforeInitialization=!0,n.resolve())})),this._element=t,this._lifecycle=e,this._lock()}get value(){return this._value}unsafeSetValue(t){this._value=t,this._afterMountCallbacks.forEach(e=>e(t)),this._afterMountCallbacks=[]}runAfterMount(t){const{_value:e,_afterMountCallbacks:n}=this;e?t(e):n.push(t)}_lock(){const{_semaphores:t}=vN,{_state:e,_element:n,_lifecycle:s}=this,r=t.get(n)||Promise.resolve(null),o=RZ();this._releaseLock=o;const a=r.then(()=>e.destroyedBeforeInitialization?Promise.resolve(void 0):(e.mountingInProgress=s.mount().then(l=>(l&&this.unsafeSetValue(l),l)),e.mountingInProgress)).then(async l=>{l&&s.afterMount&&await s.afterMount({element:n,mountResult:l})}).then(()=>o.promise).catch(l=>{console.error("Semaphore mounting error:",l)}).then(()=>{t.get(n)===a&&t.delete(n)});t.set(n,a)}};Ci(wN,"_semaphores",new Map);let HZ=wN;/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const UZ="$__CKEditorReactContextMetadata";function WZ(i,t){return{...t,[UZ]:i}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const qZ=Ke.createContext(null),GZ=i=>!!i&&typeof i=="object"&&"status"in i&&["initializing","initialized","error"].includes(i.status),yN=i=>t=>GZ(t)&&t.status===i,OA=yN("initializing"),KZ=i=>yN("initialized")(i)&&i.watchdog.state==="ready";/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const YZ=$Z("react",{version:"9.5.0",frameworkVersion:Ke.version});/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function ZZ(i){return bN(i.licenseKey)?i:MZ(i,[YZ])}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const N0="Lock from React integration (@ckeditor/ckeditor5-react)";class _N extends Ke.Component{constructor(t){super(t),Ci(this,"domContainer",Ke.createRef()),Ci(this,"editorSemaphore",null),this._checkVersion()}_checkVersion(){const{CKEDITOR_VERSION:t}=window;if(!t)return console.warn('Cannot find the "CKEDITOR_VERSION" in the "window" scope.');const[e]=t.split(".").map(Number);e>=42||t.startsWith("0.0.0")||console.warn("The <CKEditor> component requires using CKEditor 5 in version 42+ or nightly build.")}get _semaphoreValue(){const{editorSemaphore:t}=this;return t?t.value:null}get watchdog(){const{_semaphoreValue:t}=this;return t?t.watchdog:null}get editor(){const{_semaphoreValue:t}=this;return t?t.instance:null}shouldComponentUpdate(t){const{props:e,editorSemaphore:n}=this;return t.id!==e.id||t.disableWatchdog!==e.disableWatchdog?!0:(n&&(n.runAfterMount(({instance:s})=>{this._shouldUpdateEditorData(e,t,s)&&s.data.set(t.data)}),"disabled"in t&&n.runAfterMount(({instance:s})=>{t.disabled?s.enableReadOnlyMode(N0):s.disableReadOnlyMode(N0)})),!1)}componentDidMount(){OA(this.context)||this._initLifeCycleSemaphore()}componentDidUpdate(){OA(this.context)||this._initLifeCycleSemaphore()}componentWillUnmount(){this._unlockLifeCycleSemaphore()}_unlockLifeCycleSemaphore(){this.editorSemaphore&&(this.editorSemaphore.release(),this.editorSemaphore=null)}_initLifeCycleSemaphore(){this._unlockLifeCycleSemaphore(),this.editorSemaphore=new HZ(this.domContainer.current,{mount:async()=>this._initializeEditor(),afterMount:({mountResult:t})=>{const{onReady:e}=this.props;e&&this.domContainer.current!==null&&e(t.instance)},unmount:async({element:t,mountResult:e})=>{const{onAfterDestroy:n}=this.props;try{await this._destroyEditor(e),t.innerHTML=""}finally{n&&n(e.instance)}}})}render(){return Ke.createElement("div",{ref:this.domContainer})}async _initializeEditor(){if(this.props.disableWatchdog)return{instance:await this._createEditor(this.domContainer.current,this._getConfig()),watchdog:null};const t=KZ(this.context)?new XZ(this.context.watchdog):new this.props.editor.EditorWatchdog(this.props.editor,this.props.watchdogConfig),e={current:0};return t.setCreator(async(n,s)=>{var r;const{editorSemaphore:o}=this,{onAfterDestroy:a}=this.props;e.current>0&&a&&((r=o==null?void 0:o.value)!=null&&r.instance)&&a(o.value.instance);const l=await this._createEditor(n,s);return o&&e.current>0&&(o.unsafeSetValue({instance:l,watchdog:t}),setTimeout(()=>{this.props.onReady&&this.props.onReady(t.editor)})),e.current++,l}),t.on("error",(n,{error:s,causesRestart:r})=>{(this.props.onError||console.error)(s,{phase:"runtime",willEditorRestart:r})}),await t.create(this.domContainer.current,this._getConfig()).catch(n=>{(this.props.onError||console.error)(n,{phase:"initialization",willEditorRestart:!1})}),{watchdog:t,instance:t.editor}}_createEditor(t,e){const{contextItemMetadata:n}=this.props;return n&&(e=WZ(n,e)),this.props.editor.create(t,ZZ(e)).then(s=>{if("disabled"in this.props){/* istanbul ignore else -- @preserve */this.props.disabled&&s.enableReadOnlyMode(N0)}const r=s.model.document,o=s.editing.view.document;return r.on("change:data",a=>{/* istanbul ignore else -- @preserve */this.props.onChange&&this.props.onChange(a,s)}),o.on("focus",a=>{/* istanbul ignore else -- @preserve */this.props.onFocus&&this.props.onFocus(a,s)}),o.on("blur",a=>{/* istanbul ignore else -- @preserve */this.props.onBlur&&this.props.onBlur(a,s)}),s})}async _destroyEditor(t){const{watchdog:e,instance:n}=t;return new Promise((s,r)=>{/* istanbul ignore next -- @preserve */setTimeout(async()=>{try{if(e)return await e.destroy(),s();if(n)return await n.destroy(),s();s()}catch(o){console.error(o),r(o)}})})}_shouldUpdateEditorData(t,e,n){return!(t.data===e.data||n.data.get()===e.data)}_getConfig(){const t=this.props.config||{};return this.props.data&&t.initialData&&console.warn("Editor data should be provided either using `config.initialData` or `content` property. The config value takes precedence over `content` property and will be used when both are specified."),{...t,initialData:t.initialData||this.props.data||""}}}Ci(_N,"contextType",qZ);class XZ{constructor(t){Ci(this,"_contextWatchdog"),Ci(this,"_id"),Ci(this,"_creator"),this._contextWatchdog=t,this._id=NZ()}setCreator(t){this._creator=t}create(t,e){return this._contextWatchdog.add({sourceElementOrData:t,config:e,creator:this._creator,id:this._id,type:"editor"})}on(t,e){this._contextWatchdog.on("itemError",(n,{itemId:s,error:r})=>{s===this._id&&e(null,{error:r,causesRestart:void 0})})}destroy(){return this._contextWatchdog.state==="ready"?this._contextWatchdog.remove(this._id):Promise.resolve()}get editor(){return this._contextWatchdog.getItem(this._id)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function EN(...i){return t=>{i.forEach(e=>{typeof e=="function"?e(t):e!=null&&(e.current=t)})}}const JZ=R.memo(R.forwardRef(({id:i,semaphore:t,rootName:e},n)=>{const s=R.useRef(null);return R.useEffect(()=>{let r,o;return t.runAfterMount(({instance:a})=>{if(!s.current)return;o=a;const{ui:l,model:u}=o,h=u.document.getRoot(e);h&&o.ui.getEditableElement(e)&&o.detachEditable(h),r=l.view.createEditable(e,s.current),l.addEditable(r),a.editing.view.forceRender()}),()=>{if(o&&o.state!=="destroyed"&&s.current){const a=o.model.document.getRoot(e);/* istanbul ignore else -- @preserve */a&&o.detachEditable(a)}}},[t.revision]),Ke.createElement("div",{key:t.revision,id:i,ref:EN(n,s)})}));JZ.displayName="EditorEditable";const QZ=R.forwardRef(({editor:i},t)=>{const e=R.useRef(null);return R.useEffect(()=>{const n=e.current;if(!i||!n)return;const s=i.ui.view.toolbar.element;return n.appendChild(s),()=>{n.contains(s)&&n.removeChild(s)}},[i&&i.id]),Ke.createElement("div",{ref:EN(e,t)})});QZ.displayName="EditorToolbarWrapper";var CN=typeof global=="object"&&global&&global.Object===Object&&global,eX=typeof self=="object"&&self&&self.Object===Object&&self,or=CN||eX||Function("return this")(),Ar=or.Symbol,xN=Object.prototype,tX=xN.hasOwnProperty,nX=xN.toString,Sd=Ar?Ar.toStringTag:void 0;function iX(i){var t=tX.call(i,Sd),e=i[Sd];try{i[Sd]=void 0;var n=!0}catch{}var s=nX.call(i);return n&&(t?i[Sd]=e:delete i[Sd]),s}var sX=Object.prototype,rX=sX.toString;function oX(i){return rX.call(i)}var aX="[object Null]",lX="[object Undefined]",NA=Ar?Ar.toStringTag:void 0;function xa(i){return i==null?i===void 0?lX:aX:NA&&NA in Object(i)?iX(i):oX(i)}function xs(i){return i!=null&&typeof i=="object"}var cX="[object Symbol]";function Eb(i){return typeof i=="symbol"||xs(i)&&xa(i)==cX}function kN(i,t){for(var e=-1,n=i==null?0:i.length,s=Array(n);++e<n;)s[e]=t(i[e],e,i);return s}var Ii=Array.isArray,uX=1/0,MA=Ar?Ar.prototype:void 0,LA=MA?MA.toString:void 0;function TN(i){if(typeof i=="string")return i;if(Ii(i))return kN(i,TN)+"";if(Eb(i))return LA?LA.call(i):"";var t=i+"";return t=="0"&&1/i==-uX?"-0":t}var dX=/\s/;function hX(i){for(var t=i.length;t--&&dX.test(i.charAt(t)););return t}var fX=/^\s+/;function mX(i){return i&&i.slice(0,hX(i)+1).replace(fX,"")}function Ot(i){var t=typeof i;return i!=null&&(t=="object"||t=="function")}var VA=NaN,gX=/^[-+]0x[0-9a-f]+$/i,pX=/^0b[01]+$/i,bX=/^0o[0-7]+$/i,wX=parseInt;function DA(i){if(typeof i=="number")return i;if(Eb(i))return VA;if(Ot(i)){var t=typeof i.valueOf=="function"?i.valueOf():i;i=Ot(t)?t+"":t}if(typeof i!="string")return i===0?i:+i;i=mX(i);var e=pX.test(i);return e||bX.test(i)?wX(i.slice(2),e?2:8):gX.test(i)?VA:+i}function ra(i){return i}var vX="[object AsyncFunction]",yX="[object Function]",_X="[object GeneratorFunction]",EX="[object Proxy]";function _l(i){if(!Ot(i))return!1;var t=xa(i);return t==yX||t==_X||t==vX||t==EX}var M0=or["__core-js_shared__"],BA=function(){var i=/[^.]+$/.exec(M0&&M0.keys&&M0.keys.IE_PROTO||"");return i?"Symbol(src)_1."+i:""}();function CX(i){return!!BA&&BA in i}var xX=Function.prototype,kX=xX.toString;function Il(i){if(i!=null){try{return kX.call(i)}catch{}try{return i+""}catch{}}return""}var TX=/[\\^$.*+?()[\]{}|]/g,SX=/^\[object .+?Constructor\]$/,AX=Function.prototype,PX=Object.prototype,IX=AX.toString,RX=PX.hasOwnProperty,OX=RegExp("^"+IX.call(RX).replace(TX,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function NX(i){if(!Ot(i)||CX(i))return!1;var t=_l(i)?OX:SX;return t.test(Il(i))}function MX(i,t){return i==null?void 0:i[t]}function Rl(i,t){var e=MX(i,t);return NX(e)?e:void 0}var dy=Rl(or,"WeakMap"),FA=Object.create,LX=function(){function i(){}return function(t){if(!Ot(t))return{};if(FA)return FA(t);i.prototype=t;var e=new i;return i.prototype=void 0,e}}();function VX(i,t,e){switch(e.length){case 0:return i.call(t);case 1:return i.call(t,e[0]);case 2:return i.call(t,e[0],e[1]);case 3:return i.call(t,e[0],e[1],e[2])}return i.apply(t,e)}function SN(i,t){var e=-1,n=i.length;for(t||(t=Array(n));++e<n;)t[e]=i[e];return t}var DX=800,BX=16,FX=Date.now;function $X(i){var t=0,e=0;return function(){var n=FX(),s=BX-(n-e);if(e=n,s>0){if(++t>=DX)return arguments[0]}else t=0;return i.apply(void 0,arguments)}}function zX(i){return function(){return i}}var mp=function(){try{var i=Rl(Object,"defineProperty");return i({},"",{}),i}catch{}}(),jX=mp?function(i,t){return mp(i,"toString",{configurable:!0,enumerable:!1,value:zX(t),writable:!0})}:ra,HX=$X(jX);function UX(i,t){for(var e=-1,n=i==null?0:i.length;++e<n&&t(i[e],e,i)!==!1;);return i}var WX=9007199254740991,qX=/^(?:0|[1-9]\d*)$/;function Cb(i,t){var e=typeof i;return t=t??WX,!!t&&(e=="number"||e!="symbol"&&qX.test(i))&&i>-1&&i%1==0&&i<t}function xb(i,t,e){t=="__proto__"&&mp?mp(i,t,{configurable:!0,enumerable:!0,value:e,writable:!0}):i[t]=e}function uf(i,t){return i===t||i!==i&&t!==t}var GX=Object.prototype,KX=GX.hasOwnProperty;function dE(i,t,e){var n=i[t];(!(KX.call(i,t)&&uf(n,e))||e===void 0&&!(t in i))&&xb(i,t,e)}function Au(i,t,e,n){var s=!e;e||(e={});for(var r=-1,o=t.length;++r<o;){var a=t[r],l=void 0;l===void 0&&(l=i[a]),s?xb(e,a,l):dE(e,a,l)}return e}var $A=Math.max;function YX(i,t,e){return t=$A(t===void 0?i.length-1:t,0),function(){for(var n=arguments,s=-1,r=$A(n.length-t,0),o=Array(r);++s<r;)o[s]=n[t+s];s=-1;for(var a=Array(t+1);++s<t;)a[s]=n[s];return a[t]=e(o),VX(i,this,a)}}function ZX(i,t){return HX(YX(i,t,ra),i+"")}var XX=9007199254740991;function hE(i){return typeof i=="number"&&i>-1&&i%1==0&&i<=XX}function Pu(i){return i!=null&&hE(i.length)&&!_l(i)}function JX(i,t,e){if(!Ot(e))return!1;var n=typeof t;return(n=="number"?Pu(e)&&Cb(t,e.length):n=="string"&&t in e)?uf(e[t],i):!1}function AN(i){return ZX(function(t,e){var n=-1,s=e.length,r=s>1?e[s-1]:void 0,o=s>2?e[2]:void 0;for(r=i.length>3&&typeof r=="function"?(s--,r):void 0,o&&JX(e[0],e[1],o)&&(r=s<3?void 0:r,s=1),t=Object(t);++n<s;){var a=e[n];a&&i(t,a,n,r)}return t})}var QX=Object.prototype;function fE(i){var t=i&&i.constructor,e=typeof t=="function"&&t.prototype||QX;return i===e}function eJ(i,t){for(var e=-1,n=Array(i);++e<i;)n[e]=t(e);return n}var tJ="[object Arguments]";function zA(i){return xs(i)&&xa(i)==tJ}var PN=Object.prototype,nJ=PN.hasOwnProperty,iJ=PN.propertyIsEnumerable,gp=zA(function(){return arguments}())?zA:function(i){return xs(i)&&nJ.call(i,"callee")&&!iJ.call(i,"callee")};function sJ(){return!1}var IN=typeof qi=="object"&&qi&&!qi.nodeType&&qi,jA=IN&&typeof Gi=="object"&&Gi&&!Gi.nodeType&&Gi,rJ=jA&&jA.exports===IN,HA=rJ?or.Buffer:void 0,oJ=HA?HA.isBuffer:void 0,Sh=oJ||sJ,aJ="[object Arguments]",lJ="[object Array]",cJ="[object Boolean]",uJ="[object Date]",dJ="[object Error]",hJ="[object Function]",fJ="[object Map]",mJ="[object Number]",gJ="[object Object]",pJ="[object RegExp]",bJ="[object Set]",wJ="[object String]",vJ="[object WeakMap]",yJ="[object ArrayBuffer]",_J="[object DataView]",EJ="[object Float32Array]",CJ="[object Float64Array]",xJ="[object Int8Array]",kJ="[object Int16Array]",TJ="[object Int32Array]",SJ="[object Uint8Array]",AJ="[object Uint8ClampedArray]",PJ="[object Uint16Array]",IJ="[object Uint32Array]",Wt={};Wt[EJ]=Wt[CJ]=Wt[xJ]=Wt[kJ]=Wt[TJ]=Wt[SJ]=Wt[AJ]=Wt[PJ]=Wt[IJ]=!0;Wt[aJ]=Wt[lJ]=Wt[yJ]=Wt[cJ]=Wt[_J]=Wt[uJ]=Wt[dJ]=Wt[hJ]=Wt[fJ]=Wt[mJ]=Wt[gJ]=Wt[pJ]=Wt[bJ]=Wt[wJ]=Wt[vJ]=!1;function RJ(i){return xs(i)&&hE(i.length)&&!!Wt[xa(i)]}function mE(i){return function(t){return i(t)}}var RN=typeof qi=="object"&&qi&&!qi.nodeType&&qi,sh=RN&&typeof Gi=="object"&&Gi&&!Gi.nodeType&&Gi,OJ=sh&&sh.exports===RN,L0=OJ&&CN.process,du=function(){try{var i=sh&&sh.require&&sh.require("util").types;return i||L0&&L0.binding&&L0.binding("util")}catch{}}(),UA=du&&du.isTypedArray,gE=UA?mE(UA):RJ,NJ=Object.prototype,MJ=NJ.hasOwnProperty;function ON(i,t){var e=Ii(i),n=!e&&gp(i),s=!e&&!n&&Sh(i),r=!e&&!n&&!s&&gE(i),o=e||n||s||r,a=o?eJ(i.length,String):[],l=a.length;for(var u in i)(t||MJ.call(i,u))&&!(o&&(u=="length"||s&&(u=="offset"||u=="parent")||r&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||Cb(u,l)))&&a.push(u);return a}function NN(i,t){return function(e){return i(t(e))}}var LJ=NN(Object.keys,Object),VJ=Object.prototype,DJ=VJ.hasOwnProperty;function BJ(i){if(!fE(i))return LJ(i);var t=[];for(var e in Object(i))DJ.call(i,e)&&e!="constructor"&&t.push(e);return t}function df(i){return Pu(i)?ON(i):BJ(i)}function FJ(i){var t=[];if(i!=null)for(var e in Object(i))t.push(e);return t}var $J=Object.prototype,zJ=$J.hasOwnProperty;function jJ(i){if(!Ot(i))return FJ(i);var t=fE(i),e=[];for(var n in i)n=="constructor"&&(t||!zJ.call(i,n))||e.push(n);return e}function Iu(i){return Pu(i)?ON(i,!0):jJ(i)}var MN=AN(function(i,t){Au(t,Iu(t),i)}),HJ=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,UJ=/^\w*$/;function pE(i,t){if(Ii(i))return!1;var e=typeof i;return e=="number"||e=="symbol"||e=="boolean"||i==null||Eb(i)?!0:UJ.test(i)||!HJ.test(i)||t!=null&&i in Object(t)}var Ah=Rl(Object,"create");function WJ(){this.__data__=Ah?Ah(null):{},this.size=0}function qJ(i){var t=this.has(i)&&delete this.__data__[i];return this.size-=t?1:0,t}var GJ="__lodash_hash_undefined__",KJ=Object.prototype,YJ=KJ.hasOwnProperty;function ZJ(i){var t=this.__data__;if(Ah){var e=t[i];return e===GJ?void 0:e}return YJ.call(t,i)?t[i]:void 0}var XJ=Object.prototype,JJ=XJ.hasOwnProperty;function QJ(i){var t=this.__data__;return Ah?t[i]!==void 0:JJ.call(t,i)}var eQ="__lodash_hash_undefined__";function tQ(i,t){var e=this.__data__;return this.size+=this.has(i)?0:1,e[i]=Ah&&t===void 0?eQ:t,this}function El(i){var t=-1,e=i==null?0:i.length;for(this.clear();++t<e;){var n=i[t];this.set(n[0],n[1])}}El.prototype.clear=WJ;El.prototype.delete=qJ;El.prototype.get=ZJ;El.prototype.has=QJ;El.prototype.set=tQ;function nQ(){this.__data__=[],this.size=0}function kb(i,t){for(var e=i.length;e--;)if(uf(i[e][0],t))return e;return-1}var iQ=Array.prototype,sQ=iQ.splice;function rQ(i){var t=this.__data__,e=kb(t,i);if(e<0)return!1;var n=t.length-1;return e==n?t.pop():sQ.call(t,e,1),--this.size,!0}function oQ(i){var t=this.__data__,e=kb(t,i);return e<0?void 0:t[e][1]}function aQ(i){return kb(this.__data__,i)>-1}function lQ(i,t){var e=this.__data__,n=kb(e,i);return n<0?(++this.size,e.push([i,t])):e[n][1]=t,this}function vo(i){var t=-1,e=i==null?0:i.length;for(this.clear();++t<e;){var n=i[t];this.set(n[0],n[1])}}vo.prototype.clear=nQ;vo.prototype.delete=rQ;vo.prototype.get=oQ;vo.prototype.has=aQ;vo.prototype.set=lQ;var Ph=Rl(or,"Map");function cQ(){this.size=0,this.__data__={hash:new El,map:new(Ph||vo),string:new El}}function uQ(i){var t=typeof i;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?i!=="__proto__":i===null}function Tb(i,t){var e=i.__data__;return uQ(t)?e[typeof t=="string"?"string":"hash"]:e.map}function dQ(i){var t=Tb(this,i).delete(i);return this.size-=t?1:0,t}function hQ(i){return Tb(this,i).get(i)}function fQ(i){return Tb(this,i).has(i)}function mQ(i,t){var e=Tb(this,i),n=e.size;return e.set(i,t),this.size+=e.size==n?0:1,this}function yo(i){var t=-1,e=i==null?0:i.length;for(this.clear();++t<e;){var n=i[t];this.set(n[0],n[1])}}yo.prototype.clear=cQ;yo.prototype.delete=dQ;yo.prototype.get=hQ;yo.prototype.has=fQ;yo.prototype.set=mQ;var gQ="Expected a function";function bE(i,t){if(typeof i!="function"||t!=null&&typeof t!="function")throw new TypeError(gQ);var e=function(){var n=arguments,s=t?t.apply(this,n):n[0],r=e.cache;if(r.has(s))return r.get(s);var o=i.apply(this,n);return e.cache=r.set(s,o)||r,o};return e.cache=new(bE.Cache||yo),e}bE.Cache=yo;var pQ=500;function bQ(i){var t=bE(i,function(n){return e.size===pQ&&e.clear(),n}),e=t.cache;return t}var wQ=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,vQ=/\\(\\)?/g,yQ=bQ(function(i){var t=[];return i.charCodeAt(0)===46&&t.push(""),i.replace(wQ,function(e,n,s,r){t.push(s?r.replace(vQ,"$1"):n||e)}),t});function wE(i){return i==null?"":TN(i)}function Sb(i,t){return Ii(i)?i:pE(i,t)?[i]:yQ(wE(i))}var _Q=1/0;function Ru(i){if(typeof i=="string"||Eb(i))return i;var t=i+"";return t=="0"&&1/i==-_Q?"-0":t}function vE(i,t){t=Sb(t,i);for(var e=0,n=t.length;i!=null&&e<n;)i=i[Ru(t[e++])];return e&&e==n?i:void 0}function hu(i,t,e){var n=i==null?void 0:vE(i,t);return n===void 0?e:n}function LN(i,t){for(var e=-1,n=t.length,s=i.length;++e<n;)i[s+e]=t[e];return i}var yE=NN(Object.getPrototypeOf,Object),EQ="[object Object]",CQ=Function.prototype,xQ=Object.prototype,VN=CQ.toString,kQ=xQ.hasOwnProperty,TQ=VN.call(Object);function _r(i){if(!xs(i)||xa(i)!=EQ)return!1;var t=yE(i);if(t===null)return!0;var e=kQ.call(t,"constructor")&&t.constructor;return typeof e=="function"&&e instanceof e&&VN.call(e)==TQ}function DN(i,t,e){var n=-1,s=i.length;t<0&&(t=-t>s?0:s+t),e=e>s?s:e,e<0&&(e+=s),s=t>e?0:e-t>>>0,t>>>=0;for(var r=Array(s);++n<s;)r[n]=i[n+t];return r}function SQ(i,t,e){var n=i.length;return e=e===void 0?n:e,!t&&e>=n?i:DN(i,t,e)}var AQ="\\ud800-\\udfff",PQ="\\u0300-\\u036f",IQ="\\ufe20-\\ufe2f",RQ="\\u20d0-\\u20ff",OQ=PQ+IQ+RQ,NQ="\\ufe0e\\ufe0f",MQ="\\u200d",LQ=RegExp("["+MQ+AQ+OQ+NQ+"]");function BN(i){return LQ.test(i)}function VQ(i){return i.split("")}var FN="\\ud800-\\udfff",DQ="\\u0300-\\u036f",BQ="\\ufe20-\\ufe2f",FQ="\\u20d0-\\u20ff",$Q=DQ+BQ+FQ,zQ="\\ufe0e\\ufe0f",jQ="["+FN+"]",hy="["+$Q+"]",fy="\\ud83c[\\udffb-\\udfff]",HQ="(?:"+hy+"|"+fy+")",$N="[^"+FN+"]",zN="(?:\\ud83c[\\udde6-\\uddff]){2}",jN="[\\ud800-\\udbff][\\udc00-\\udfff]",UQ="\\u200d",HN=HQ+"?",UN="["+zQ+"]?",WQ="(?:"+UQ+"(?:"+[$N,zN,jN].join("|")+")"+UN+HN+")*",qQ=UN+HN+WQ,GQ="(?:"+[$N+hy+"?",hy,zN,jN,jQ].join("|")+")",KQ=RegExp(fy+"(?="+fy+")|"+GQ+qQ,"g");function YQ(i){return i.match(KQ)||[]}function ZQ(i){return BN(i)?YQ(i):VQ(i)}function XQ(i){return function(t){t=wE(t);var e=BN(t)?ZQ(t):void 0,n=e?e[0]:t.charAt(0),s=e?SQ(e,1).join(""):t.slice(1);return n[i]()+s}}var JQ=XQ("toUpperCase");function QQ(){this.__data__=new vo,this.size=0}function eee(i){var t=this.__data__,e=t.delete(i);return this.size=t.size,e}function tee(i){return this.__data__.get(i)}function nee(i){return this.__data__.has(i)}var iee=200;function see(i,t){var e=this.__data__;if(e instanceof vo){var n=e.__data__;if(!Ph||n.length<iee-1)return n.push([i,t]),this.size=++e.size,this;e=this.__data__=new yo(n)}return e.set(i,t),this.size=e.size,this}function Xs(i){var t=this.__data__=new vo(i);this.size=t.size}Xs.prototype.clear=QQ;Xs.prototype.delete=eee;Xs.prototype.get=tee;Xs.prototype.has=nee;Xs.prototype.set=see;function ree(i,t){return i&&Au(t,df(t),i)}function oee(i,t){return i&&Au(t,Iu(t),i)}var WN=typeof qi=="object"&&qi&&!qi.nodeType&&qi,WA=WN&&typeof Gi=="object"&&Gi&&!Gi.nodeType&&Gi,aee=WA&&WA.exports===WN,qA=aee?or.Buffer:void 0,GA=qA?qA.allocUnsafe:void 0;function qN(i,t){if(t)return i.slice();var e=i.length,n=GA?GA(e):new i.constructor(e);return i.copy(n),n}function lee(i,t){for(var e=-1,n=i==null?0:i.length,s=0,r=[];++e<n;){var o=i[e];t(o,e,i)&&(r[s++]=o)}return r}function GN(){return[]}var cee=Object.prototype,uee=cee.propertyIsEnumerable,KA=Object.getOwnPropertySymbols,_E=KA?function(i){return i==null?[]:(i=Object(i),lee(KA(i),function(t){return uee.call(i,t)}))}:GN;function dee(i,t){return Au(i,_E(i),t)}var hee=Object.getOwnPropertySymbols,KN=hee?function(i){for(var t=[];i;)LN(t,_E(i)),i=yE(i);return t}:GN;function fee(i,t){return Au(i,KN(i),t)}function YN(i,t,e){var n=t(i);return Ii(i)?n:LN(n,e(i))}function my(i){return YN(i,df,_E)}function mee(i){return YN(i,Iu,KN)}var gy=Rl(or,"DataView"),py=Rl(or,"Promise"),by=Rl(or,"Set"),YA="[object Map]",gee="[object Object]",ZA="[object Promise]",XA="[object Set]",JA="[object WeakMap]",QA="[object DataView]",pee=Il(gy),bee=Il(Ph),wee=Il(py),vee=Il(by),yee=Il(dy),zs=xa;(gy&&zs(new gy(new ArrayBuffer(1)))!=QA||Ph&&zs(new Ph)!=YA||py&&zs(py.resolve())!=ZA||by&&zs(new by)!=XA||dy&&zs(new dy)!=JA)&&(zs=function(i){var t=xa(i),e=t==gee?i.constructor:void 0,n=e?Il(e):"";if(n)switch(n){case pee:return QA;case bee:return YA;case wee:return ZA;case vee:return XA;case yee:return JA}return t});var _ee=Object.prototype,Eee=_ee.hasOwnProperty;function Cee(i){var t=i.length,e=new i.constructor(t);return t&&typeof i[0]=="string"&&Eee.call(i,"index")&&(e.index=i.index,e.input=i.input),e}var pp=or.Uint8Array;function EE(i){var t=new i.constructor(i.byteLength);return new pp(t).set(new pp(i)),t}function xee(i,t){var e=t?EE(i.buffer):i.buffer;return new i.constructor(e,i.byteOffset,i.byteLength)}var kee=/\w*$/;function Tee(i){var t=new i.constructor(i.source,kee.exec(i));return t.lastIndex=i.lastIndex,t}var e2=Ar?Ar.prototype:void 0,t2=e2?e2.valueOf:void 0;function See(i){return t2?Object(t2.call(i)):{}}function ZN(i,t){var e=t?EE(i.buffer):i.buffer;return new i.constructor(e,i.byteOffset,i.length)}var Aee="[object Boolean]",Pee="[object Date]",Iee="[object Map]",Ree="[object Number]",Oee="[object RegExp]",Nee="[object Set]",Mee="[object String]",Lee="[object Symbol]",Vee="[object ArrayBuffer]",Dee="[object DataView]",Bee="[object Float32Array]",Fee="[object Float64Array]",$ee="[object Int8Array]",zee="[object Int16Array]",jee="[object Int32Array]",Hee="[object Uint8Array]",Uee="[object Uint8ClampedArray]",Wee="[object Uint16Array]",qee="[object Uint32Array]";function Gee(i,t,e){var n=i.constructor;switch(t){case Vee:return EE(i);case Aee:case Pee:return new n(+i);case Dee:return xee(i,e);case Bee:case Fee:case $ee:case zee:case jee:case Hee:case Uee:case Wee:case qee:return ZN(i,e);case Iee:return new n;case Ree:case Mee:return new n(i);case Oee:return Tee(i);case Nee:return new n;case Lee:return See(i)}}function XN(i){return typeof i.constructor=="function"&&!fE(i)?LX(yE(i)):{}}var Kee="[object Map]";function Yee(i){return xs(i)&&zs(i)==Kee}var n2=du&&du.isMap,Zee=n2?mE(n2):Yee,Xee="[object Set]";function Jee(i){return xs(i)&&zs(i)==Xee}var i2=du&&du.isSet,Qee=i2?mE(i2):Jee,ete=1,tte=2,nte=4,JN="[object Arguments]",ite="[object Array]",ste="[object Boolean]",rte="[object Date]",ote="[object Error]",QN="[object Function]",ate="[object GeneratorFunction]",lte="[object Map]",cte="[object Number]",e4="[object Object]",ute="[object RegExp]",dte="[object Set]",hte="[object String]",fte="[object Symbol]",mte="[object WeakMap]",gte="[object ArrayBuffer]",pte="[object DataView]",bte="[object Float32Array]",wte="[object Float64Array]",vte="[object Int8Array]",yte="[object Int16Array]",_te="[object Int32Array]",Ete="[object Uint8Array]",Cte="[object Uint8ClampedArray]",xte="[object Uint16Array]",kte="[object Uint32Array]",Vt={};Vt[JN]=Vt[ite]=Vt[gte]=Vt[pte]=Vt[ste]=Vt[rte]=Vt[bte]=Vt[wte]=Vt[vte]=Vt[yte]=Vt[_te]=Vt[lte]=Vt[cte]=Vt[e4]=Vt[ute]=Vt[dte]=Vt[hte]=Vt[fte]=Vt[Ete]=Vt[Cte]=Vt[xte]=Vt[kte]=!0;Vt[ote]=Vt[QN]=Vt[mte]=!1;function Xc(i,t,e,n,s,r){var o,a=t&ete,l=t&tte,u=t&nte;if(e&&(o=s?e(i,n,s,r):e(i)),o!==void 0)return o;if(!Ot(i))return i;var h=Ii(i);if(h){if(o=Cee(i),!a)return SN(i,o)}else{var f=zs(i),g=f==QN||f==ate;if(Sh(i))return qN(i,a);if(f==e4||f==JN||g&&!s){if(o=l||g?{}:XN(i),!a)return l?fee(i,oee(o,i)):dee(i,ree(o,i))}else{if(!Vt[f])return s?i:{};o=Gee(i,f,a)}}r||(r=new Xs);var p=r.get(i);if(p)return p;r.set(i,o),Qee(i)?i.forEach(function(C){o.add(Xc(C,t,e,C,i,r))}):Zee(i)&&i.forEach(function(C,k){o.set(k,Xc(C,t,e,k,i,r))});var y=u?l?mee:my:l?Iu:df,E=h?void 0:y(i);return UX(E||i,function(C,k){E&&(k=C,C=i[k]),dE(o,k,Xc(C,t,e,k,i,r))}),o}var Tte=4;function t4(i){return Xc(i,Tte)}var Ste=1,Ate=4;function ar(i){return Xc(i,Ste|Ate)}var Pte=1,Ite=4;function CE(i,t){return t=typeof t=="function"?t:void 0,Xc(i,Pte|Ite,t)}var Rte="__lodash_hash_undefined__";function Ote(i){return this.__data__.set(i,Rte),this}function Nte(i){return this.__data__.has(i)}function bp(i){var t=-1,e=i==null?0:i.length;for(this.__data__=new yo;++t<e;)this.add(i[t])}bp.prototype.add=bp.prototype.push=Ote;bp.prototype.has=Nte;function Mte(i,t){for(var e=-1,n=i==null?0:i.length;++e<n;)if(t(i[e],e,i))return!0;return!1}function Lte(i,t){return i.has(t)}var Vte=1,Dte=2;function n4(i,t,e,n,s,r){var o=e&Vte,a=i.length,l=t.length;if(a!=l&&!(o&&l>a))return!1;var u=r.get(i),h=r.get(t);if(u&&h)return u==t&&h==i;var f=-1,g=!0,p=e&Dte?new bp:void 0;for(r.set(i,t),r.set(t,i);++f<a;){var y=i[f],E=t[f];if(n)var C=o?n(E,y,f,t,i,r):n(y,E,f,i,t,r);if(C!==void 0){if(C)continue;g=!1;break}if(p){if(!Mte(t,function(k,T){if(!Lte(p,T)&&(y===k||s(y,k,e,n,r)))return p.push(T)})){g=!1;break}}else if(!(y===E||s(y,E,e,n,r))){g=!1;break}}return r.delete(i),r.delete(t),g}function Bte(i){var t=-1,e=Array(i.size);return i.forEach(function(n,s){e[++t]=[s,n]}),e}function Fte(i){var t=-1,e=Array(i.size);return i.forEach(function(n){e[++t]=n}),e}var $te=1,zte=2,jte="[object Boolean]",Hte="[object Date]",Ute="[object Error]",Wte="[object Map]",qte="[object Number]",Gte="[object RegExp]",Kte="[object Set]",Yte="[object String]",Zte="[object Symbol]",Xte="[object ArrayBuffer]",Jte="[object DataView]",s2=Ar?Ar.prototype:void 0,V0=s2?s2.valueOf:void 0;function Qte(i,t,e,n,s,r,o){switch(e){case Jte:if(i.byteLength!=t.byteLength||i.byteOffset!=t.byteOffset)return!1;i=i.buffer,t=t.buffer;case Xte:return!(i.byteLength!=t.byteLength||!r(new pp(i),new pp(t)));case jte:case Hte:case qte:return uf(+i,+t);case Ute:return i.name==t.name&&i.message==t.message;case Gte:case Yte:return i==t+"";case Wte:var a=Bte;case Kte:var l=n&$te;if(a||(a=Fte),i.size!=t.size&&!l)return!1;var u=o.get(i);if(u)return u==t;n|=zte,o.set(i,t);var h=n4(a(i),a(t),n,s,r,o);return o.delete(i),h;case Zte:if(V0)return V0.call(i)==V0.call(t)}return!1}var ene=1,tne=Object.prototype,nne=tne.hasOwnProperty;function ine(i,t,e,n,s,r){var o=e&ene,a=my(i),l=a.length,u=my(t),h=u.length;if(l!=h&&!o)return!1;for(var f=l;f--;){var g=a[f];if(!(o?g in t:nne.call(t,g)))return!1}var p=r.get(i),y=r.get(t);if(p&&y)return p==t&&y==i;var E=!0;r.set(i,t),r.set(t,i);for(var C=o;++f<l;){g=a[f];var k=i[g],T=t[g];if(n)var P=o?n(T,k,g,t,i,r):n(k,T,g,i,t,r);if(!(P===void 0?k===T||s(k,T,e,n,r):P)){E=!1;break}C||(C=g=="constructor")}if(E&&!C){var S=i.constructor,O=t.constructor;S!=O&&"constructor"in i&&"constructor"in t&&!(typeof S=="function"&&S instanceof S&&typeof O=="function"&&O instanceof O)&&(E=!1)}return r.delete(i),r.delete(t),E}var sne=1,r2="[object Arguments]",o2="[object Array]",Gm="[object Object]",rne=Object.prototype,a2=rne.hasOwnProperty;function one(i,t,e,n,s,r){var o=Ii(i),a=Ii(t),l=o?o2:zs(i),u=a?o2:zs(t);l=l==r2?Gm:l,u=u==r2?Gm:u;var h=l==Gm,f=u==Gm,g=l==u;if(g&&Sh(i)){if(!Sh(t))return!1;o=!0,h=!1}if(g&&!h)return r||(r=new Xs),o||gE(i)?n4(i,t,e,n,s,r):Qte(i,t,l,e,n,s,r);if(!(e&sne)){var p=h&&a2.call(i,"__wrapped__"),y=f&&a2.call(t,"__wrapped__");if(p||y){var E=p?i.value():i,C=y?t.value():t;return r||(r=new Xs),s(E,C,e,n,r)}}return g?(r||(r=new Xs),ine(i,t,e,n,s,r)):!1}function hf(i,t,e,n,s){return i===t?!0:i==null||t==null||!xs(i)&&!xs(t)?i!==i&&t!==t:one(i,t,e,n,hf,s)}var ane=1,lne=2;function cne(i,t,e,n){var s=e.length,r=s;if(i==null)return!r;for(i=Object(i);s--;){var o=e[s];if(o[2]?o[1]!==i[o[0]]:!(o[0]in i))return!1}for(;++s<r;){o=e[s];var a=o[0],l=i[a],u=o[1];if(o[2]){if(l===void 0&&!(a in i))return!1}else{var h=new Xs,f;if(!(f===void 0?hf(u,l,ane|lne,n,h):f))return!1}}return!0}function i4(i){return i===i&&!Ot(i)}function une(i){for(var t=df(i),e=t.length;e--;){var n=t[e],s=i[n];t[e]=[n,s,i4(s)]}return t}function s4(i,t){return function(e){return e==null?!1:e[i]===t&&(t!==void 0||i in Object(e))}}function dne(i){var t=une(i);return t.length==1&&t[0][2]?s4(t[0][0],t[0][1]):function(e){return e===i||cne(e,i,t)}}function hne(i,t){return i!=null&&t in Object(i)}function fne(i,t,e){t=Sb(t,i);for(var n=-1,s=t.length,r=!1;++n<s;){var o=Ru(t[n]);if(!(r=i!=null&&e(i,o)))break;i=i[o]}return r||++n!=s?r:(s=i==null?0:i.length,!!s&&hE(s)&&Cb(o,s)&&(Ii(i)||gp(i)))}function mne(i,t){return i!=null&&fne(i,t,hne)}var gne=1,pne=2;function bne(i,t){return pE(i)&&i4(t)?s4(Ru(i),t):function(e){var n=hu(e,i);return n===void 0&&n===t?mne(e,i):hf(t,n,gne|pne)}}function wne(i){return function(t){return t==null?void 0:t[i]}}function vne(i){return function(t){return vE(t,i)}}function yne(i){return pE(i)?wne(Ru(i)):vne(i)}function r4(i){return typeof i=="function"?i:i==null?ra:typeof i=="object"?Ii(i)?bne(i[0],i[1]):dne(i):yne(i)}function _ne(i){return function(t,e,n){for(var s=-1,r=Object(t),o=n(t),a=o.length;a--;){var l=o[++s];if(e(r[l],l,r)===!1)break}return t}}var o4=_ne();function a4(i,t){return i&&o4(i,t,df)}function Ene(i,t){return function(e,n){if(e==null)return e;if(!Pu(e))return i(e,n);for(var s=e.length,r=-1,o=Object(e);++r<s&&n(o[r],r,o)!==!1;);return e}}var Cne=Ene(a4),D0=function(){return or.Date.now()},xne="Expected a function",kne=Math.max,Tne=Math.min;function ks(i,t,e){var n,s,r,o,a,l,u=0,h=!1,f=!1,g=!0;if(typeof i!="function")throw new TypeError(xne);t=DA(t)||0,Ot(e)&&(h=!!e.leading,f="maxWait"in e,r=f?kne(DA(e.maxWait)||0,t):r,g="trailing"in e?!!e.trailing:g);function p(A){var N=n,L=s;return n=s=void 0,u=A,o=i.apply(L,N),o}function y(A){return u=A,a=setTimeout(k,t),h?p(A):o}function E(A){var N=A-l,L=A-u,M=t-N;return f?Tne(M,r-L):M}function C(A){var N=A-l,L=A-u;return l===void 0||N>=t||N<0||f&&L>=r}function k(){var A=D0();if(C(A))return T(A);a=setTimeout(k,E(A))}function T(A){return a=void 0,g&&n?p(A):(n=s=void 0,o)}function P(){a!==void 0&&clearTimeout(a),u=0,n=l=s=a=void 0}function S(){return a===void 0?o:T(D0())}function O(){var A=D0(),N=C(A);if(n=arguments,s=this,l=A,N){if(a===void 0)return y(l);if(f)return clearTimeout(a),a=setTimeout(k,t),p(l)}return a===void 0&&(a=setTimeout(k,t)),o}return O.cancel=P,O.flush=S,O}function wy(i,t,e){(e!==void 0&&!uf(i[t],e)||e===void 0&&!(t in i))&&xb(i,t,e)}function Sne(i){return xs(i)&&Pu(i)}function vy(i,t){if(!(t==="constructor"&&typeof i[t]=="function")&&t!="__proto__")return i[t]}function Ane(i){return Au(i,Iu(i))}function Pne(i,t,e,n,s,r,o){var a=vy(i,e),l=vy(t,e),u=o.get(l);if(u){wy(i,e,u);return}var h=r?r(a,l,e+"",i,t,o):void 0,f=h===void 0;if(f){var g=Ii(l),p=!g&&Sh(l),y=!g&&!p&&gE(l);h=l,g||p||y?Ii(a)?h=a:Sne(a)?h=SN(a):p?(f=!1,h=qN(l,!0)):y?(f=!1,h=ZN(l,!0)):h=[]:_r(l)||gp(l)?(h=a,gp(a)?h=Ane(a):(!Ot(a)||_l(a))&&(h=XN(l))):f=!1}f&&(o.set(l,h),s(h,l,n,r,o),o.delete(l)),wy(i,e,h)}function l4(i,t,e,n,s){i!==t&&o4(t,function(r,o){if(s||(s=new Xs),Ot(r))Pne(i,t,o,e,l4,n,s);else{var a=n?n(vy(i,o),r,o+"",i,t,s):void 0;a===void 0&&(a=r),wy(i,o,a)}},Iu)}function Ine(i){var t=i==null?0:i.length;return t?i[t-1]:void 0}var c4=/[\\^$.*+?()[\]{}|]/g,Rne=RegExp(c4.source);function One(i){return i=wE(i),i&&Rne.test(i)?i.replace(c4,"\\$&"):i}function Nne(i,t){var e=-1,n=Pu(i)?Array(i.length):[];return Cne(i,function(s,r,o){n[++e]=t(s,r,o)}),n}function Mne(i,t){var e=Ii(i)?kN:Nne;return e(i,r4(t))}var Lne="[object String]";function l2(i){return typeof i=="string"||!Ii(i)&&xs(i)&&xa(i)==Lne}function Vne(i,t){return t.length<2?i:vE(i,DN(t,0,-1))}function pa(i){return xs(i)&&i.nodeType===1&&!_r(i)}function wp(i,t){return hf(i,t)}function Dne(i,t,e){e=typeof e=="function"?e:void 0;var n=e?e(i,t):void 0;return n===void 0?hf(i,t,void 0,e):!!n}function Bne(i,t){var e={};return t=r4(t),a4(i,function(n,s,r){xb(e,s,t(n,s,r))}),e}var xE=AN(function(i,t,e){l4(i,t,e)});function Fne(i,t){return t=Sb(t,i),i=Vne(i,t),i==null||delete i[Ru(Ine(t))]}function $ne(i,t,e,n){if(!Ot(i))return i;t=Sb(t,i);for(var s=-1,r=t.length,o=r-1,a=i;a!=null&&++s<r;){var l=Ru(t[s]),u=e;if(l==="__proto__"||l==="constructor"||l==="prototype")return i;if(s!=o){var h=a[l];u=void 0,u===void 0&&(u=Ot(h)?h:Cb(t[s+1])?[]:{})}dE(a,l,u),a=a[l]}return i}function u4(i,t,e){return i==null?i:$ne(i,t,e)}var zne="Expected a function";function fu(i,t,e){var n=!0,s=!0;if(typeof i!="function")throw new TypeError(zne);return Ot(e)&&(n="leading"in e?!!e.leading:n,s="trailing"in e?!!e.trailing:s),ks(i,t,{leading:n,maxWait:t,trailing:s})}function jne(i,t){return i==null?!0:Fne(i,t)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 *//**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */let yy;try{yy={window,document}}catch{/* istanbul ignore next -- @preserve */yy={window:{},document:{}}}var Ce=yy;function Hne(){try{return navigator.userAgent.toLowerCase()}catch{return""}}const qa=Hne(),Fe={isMac:d4(qa),isWindows:Une(qa),isGecko:Wne(qa),isSafari:qne(qa),isiOS:Gne(qa),isAndroid:Kne(qa),isBlink:Yne(qa),get isMediaForcedColors(){return Xne()},get isMotionReduced(){return Jne()},features:{isRegExpUnicodePropertySupported:Zne()}};function d4(i){return i.indexOf("macintosh")>-1}function Une(i){return i.indexOf("windows")>-1}function Wne(i){return!!i.match(/gecko\/\d+/)}function qne(i){return i.indexOf(" applewebkit/")>-1&&i.indexOf("chrome")===-1}function Gne(i){return!!i.match(/iphone|ipad/i)||d4(i)&&navigator.maxTouchPoints>0}function Kne(i){return i.indexOf("android")>-1}function Yne(i){return i.indexOf("chrome/")>-1&&i.indexOf("edge/")<0}function Zne(){let i=!1;try{i="ć".search(new RegExp("[\\p{L}]","u"))===0}catch{}return i}function Xne(){return Ce.window.matchMedia?Ce.window.matchMedia("(forced-colors: active)").matches:!1}function Jne(){return Ce.window.matchMedia?Ce.window.matchMedia("(prefers-reduced-motion)").matches:!1}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function h4(i,t,e,n){e=e||function(l,u){return l===u};const s=Array.isArray(i)?i:Array.prototype.slice.call(i),r=Array.isArray(t)?t:Array.prototype.slice.call(t),o=Qne(s,r,e);return n?tie(o,r.length):eie(r,o)}function Qne(i,t,e){const n=c2(i,t,e);if(n===-1)return{firstIndex:-1,lastIndexOld:-1,lastIndexNew:-1};const s=u2(i,n),r=u2(t,n),o=c2(s,r,e),a=i.length-o,l=t.length-o;return{firstIndex:n,lastIndexOld:a,lastIndexNew:l}}function c2(i,t,e){for(let n=0;n<Math.max(i.length,t.length);n++)if(i[n]===void 0||t[n]===void 0||!e(i[n],t[n]))return n;return-1}function u2(i,t){return i.slice(t).reverse()}function eie(i,t){const e=[],{firstIndex:n,lastIndexOld:s,lastIndexNew:r}=t;return r-n>0&&e.push({index:n,type:"insert",values:i.slice(n,r)}),s-n>0&&e.push({index:n+(r-n),type:"delete",howMany:s-n}),e}function tie(i,t){const{firstIndex:e,lastIndexOld:n,lastIndexNew:s}=i;if(e===-1)return Array(t).fill("equal");let r=[];return e>0&&(r=r.concat(Array(e).fill("equal"))),s-e>0&&(r=r.concat(Array(s-e).fill("insert"))),n-e>0&&(r=r.concat(Array(n-e).fill("delete"))),s<t&&(r=r.concat(Array(t-s).fill("equal"))),r}function rh(i,t,e){e=e||function(E,C){return E===C};const n=i.length,s=t.length;if(n>200||s>200||n+s>300)return rh.fastDiff(i,t,e,!0);let r,o;if(s<n){const E=i;i=t,t=E,r="delete",o="insert"}else r="insert",o="delete";const a=i.length,l=t.length,u=l-a,h={},f={};function g(E){const C=(f[E-1]!==void 0?f[E-1]:-1)+1,k=f[E+1]!==void 0?f[E+1]:-1,T=C>k?-1:1;h[E+T]&&(h[E]=h[E+T].slice(0)),h[E]||(h[E]=[]),h[E].push(C>k?r:o);let P=Math.max(C,k),S=P-E;for(;S<a&&P<l&&e(i[S],t[P]);)S++,P++,h[E].push("equal");return P}let p=0,y;do{for(y=-p;y<u;y++)f[y]=g(y);for(y=u+p;y>u;y--)f[y]=g(y);f[u]=g(u),p++}while(f[u]!==l);return h[u].slice(1)}rh.fastDiff=h4;/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function d2(){return function i(){i.called=!0}}class ho{constructor(t,e){b(this,"source");b(this,"name");b(this,"path");b(this,"stop");b(this,"off");b(this,"return");this.source=t,this.name=e,this.path=[],this.stop=d2(),this.off=d2()}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const Xn=new Array(256).fill("").map((i,t)=>("0"+t.toString(16)).slice(-2));function ni(){const[i,t,e,n]=crypto.getRandomValues(new Uint32Array(4));return"e"+Xn[i>>0&255]+Xn[i>>8&255]+Xn[i>>16&255]+Xn[i>>24&255]+Xn[t>>0&255]+Xn[t>>8&255]+Xn[t>>16&255]+Xn[t>>24&255]+Xn[e>>0&255]+Xn[e>>8&255]+Xn[e>>16&255]+Xn[e>>24&255]+Xn[n>>0&255]+Xn[n>>8&255]+Xn[n>>16&255]+Xn[n>>24&255]}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const ca={get(i="normal"){return typeof i!="number"?this[i]||this.normal:i},highest:1e5,high:1e3,normal:0,low:-1e3,lowest:-1e5};function f4(i,t){const e=ca.get(t.priority);let n=0,s=i.length;for(;n<s;){const r=n+s>>1;ca.get(i[r].priority)<e?s=r:n=r+1}i.splice(n,0,t)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const nie="https://ckeditor.com/docs/ckeditor5/latest/support/error-codes.html";class D extends Error{constructor(e,n,s){super(sie(e,s));b(this,"context");b(this,"data");this.name="CKEditorError",this.context=n,this.data=s}is(e){return e==="CKEditorError"}static rethrowUnexpectedError(e,n){if(e.is&&e.is("CKEditorError"))throw e;const s=new D(e.message,n);throw s.stack=e.stack,s}}function dt(i,t){console.warn(...g4(i,t))}function iie(i,t){console.error(...g4(i,t))}function m4(i){return`
Read more: ${nie}#error-${i}`}function sie(i,t){const e=new WeakSet,s=t?` ${JSON.stringify(t,(o,a)=>{if(typeof a=="object"&&a!==null){if(e.has(a))return`[object ${a.constructor.name}]`;e.add(a)}return a})}`:"",r=m4(i);return i+s+r}function g4(i,t){const e=m4(i);return t?[i,t,e]:[i,e]}const rie="44.3.0",oie=new Date(2025,2,5);/* istanbul ignore next -- @preserve */if(globalThis.CKEDITOR_VERSION)throw new D("ckeditor-duplicated-modules",null);globalThis.CKEDITOR_VERSION=rie;const Nc=Symbol("listeningTo"),_y=Symbol("emitterId"),Gr=Symbol("delegations"),p4=Ct(Object);function Ct(i){if(!i)return p4;class t extends i{on(n,s,r){this.listenTo(this,n,s,r)}once(n,s,r){let o=!1;const a=(l,...u)=>{o||(o=!0,l.off(),s.call(this,l,...u))};this.listenTo(this,n,a,r)}off(n,s){this.stopListening(this,n,s)}listenTo(n,s,r,o={}){let a,l;this[Nc]||(this[Nc]={});const u=this[Nc];B0(n)||b4(n);const h=B0(n);(a=u[h])||(a=u[h]={emitter:n,callbacks:{}}),(l=a.callbacks[s])||(l=a.callbacks[s]=[]),l.push(r),die(this,n,s,r,o)}stopListening(n,s,r){const o=this[Nc];let a=n&&B0(n);const l=o&&a?o[a]:void 0,u=l&&s?l.callbacks[s]:void 0;if(!(!o||n&&!l||s&&!u))if(r)F0(this,n,s,r),u.indexOf(r)!==-1&&(u.length===1?delete l.callbacks[s]:F0(this,n,s,r));else if(u){for(;r=u.pop();)F0(this,n,s,r);delete l.callbacks[s]}else if(l){for(s in l.callbacks)this.stopListening(n,s);delete o[a]}else{for(a in o)this.stopListening(o[a].emitter);delete this[Nc]}}fire(n,...s){try{const r=n instanceof ho?n:new ho(this,n),o=r.name;let a=uie(this,o);if(r.path.push(this),a){a=a.slice();for(let u=0;u<a.length;u++){const h=a[u].callback;if(h.call(this,r,...s),r.off.called&&(delete r.off.called,this._removeEventListener(o,h)),r.stop.called)break}}const l=this[Gr];if(l){const u=l.get(o),h=l.get("*");u&&h2(u,r,s),h&&h2(h,r,s)}return r.return}catch(r){/* istanbul ignore next -- @preserve */D.rethrowUnexpectedError(r,this)}}delegate(...n){return{to:(s,r)=>{this[Gr]||(this[Gr]=new Map),n.forEach(o=>{const a=this[Gr].get(o);a?a.set(s,r):this[Gr].set(o,new Map([[s,r]]))})}}}stopDelegating(n,s){if(this[Gr])if(!n)this[Gr].clear();else if(!s)this[Gr].delete(n);else{const r=this[Gr].get(n);r&&r.delete(s)}}_addEventListener(n,s,r){cie(this,n);const o=Ey(this,n),a=ca.get(r.priority),l={callback:s,priority:a};for(const u of o)f4(u,l)}_removeEventListener(n,s){const r=Ey(this,n);for(const o of r)for(let a=0;a<o.length;a++)o[a].callback==s&&(o.splice(a,1),a--)}}return t}["on","once","off","listenTo","stopListening","fire","delegate","stopDelegating","_addEventListener","_removeEventListener"].forEach(i=>{Ct[i]=p4.prototype[i]});function aie(i,t){const e=i[Nc];return e&&e[t]?e[t].emitter:null}function b4(i,t){i[_y]||(i[_y]=t||ni())}function B0(i){return i[_y]}function w4(i){return i._events||Object.defineProperty(i,"_events",{value:{}}),i._events}function lie(){return{callbacks:[],childEvents:[]}}function cie(i,t){const e=w4(i);if(e[t])return;let n=t,s=null;const r=[];for(;n!==""&&!e[n];)e[n]=lie(),r.push(e[n]),s&&e[n].childEvents.push(s),s=n,n=n.substr(0,n.lastIndexOf(":"));if(n!==""){for(const o of r)o.callbacks=e[n].callbacks.slice();e[n].childEvents.push(s)}}function Ey(i,t){const e=w4(i)[t];if(!e)return[];let n=[e.callbacks];for(let s=0;s<e.childEvents.length;s++){const r=Ey(i,e.childEvents[s]);n=n.concat(r)}return n}function uie(i,t){if(!i._events)return null;let e=t;do{const n=i._events[e];if(n&&n.callbacks&&n.callbacks.length)return n.callbacks;const s=e.lastIndexOf(":");e=s>-1?e.substring(0,s):""}while(e);return null}function h2(i,t,e){for(let[n,s]of i){s?typeof s=="function"&&(s=s(t.name)):s=t.name;const r=new ho(t.source,s);r.path=[...t.path],n.fire(r,...e)}}function die(i,t,e,n,s){t._addEventListener?t._addEventListener(e,n,s):i._addEventListener.call(t,e,n,s)}function F0(i,t,e,n){t._removeEventListener?t._removeEventListener(e,n):i._removeEventListener.call(t,e,n)}const oh=Symbol("observableProperties"),Ih=Symbol("boundObservables"),ah=Symbol("boundProperties"),Ga=Symbol("decoratedMethods"),f2=Symbol("decoratedOriginal"),v4=yt(Ct());function yt(i){var e,n,s,r,o;if(!i)return v4;class t extends(o=i,r=oh,s=Ga,n=ah,e=Ih,o){constructor(){super(...arguments);b(this,r);b(this,s);b(this,n);b(this,e)}set(u,h){if(Ot(u)){Object.keys(u).forEach(g=>{this.set(g,u[g])},this);return}$0(this);const f=this[oh];if(u in this&&!f.has(u))throw new D("observable-set-cannot-override",this);Object.defineProperty(this,u,{enumerable:!0,configurable:!0,get(){return f.get(u)},set(g){const p=f.get(u);let y=this.fire(`set:${u}`,u,g,p);y===void 0&&(y=g),(p!==y||!f.has(u))&&(f.set(u,y),this.fire(`change:${u}`,u,y,p))}}),this[u]=h}bind(...u){if(!u.length||!m2(u))throw new D("observable-bind-wrong-properties",this);if(new Set(u).size!==u.length)throw new D("observable-bind-duplicate-properties",this);$0(this);const h=this[ah];u.forEach(g=>{if(h.has(g))throw new D("observable-bind-rebind",this)});const f=new Map;return u.forEach(g=>{const p={property:g,to:[]};h.set(g,p),f.set(g,p)}),{to:hie,toMany:fie,_observable:this,_bindProperties:u,_to:[],_bindings:f}}unbind(...u){if(!this[oh])return;const h=this[ah],f=this[Ih];if(u.length){if(!m2(u))throw new D("observable-unbind-wrong-properties",this);u.forEach(g=>{const p=h.get(g);p&&(p.to.forEach(([y,E])=>{const C=f.get(y),k=C[E];k.delete(p),k.size||delete C[E],Object.keys(C).length||(f.delete(y),this.stopListening(y,"change"))}),h.delete(g))})}else f.forEach((g,p)=>{this.stopListening(p,"change")}),f.clear(),h.clear()}decorate(u){$0(this);const h=this[u];if(!h)throw new D("observablemixin-cannot-decorate-undefined",this,{object:this,methodName:u});this.on(u,(f,g)=>{f.return=h.apply(this,g)}),this[u]=function(...f){return this.fire(u,f)},this[u][f2]=h,this[Ga]||(this[Ga]=[]),this[Ga].push(u)}stopListening(u,h,f){if(!u&&this[Ga]){for(const g of this[Ga])this[g]=this[g][f2];delete this[Ga]}super.stopListening(u,h,f)}}return t}["set","bind","unbind","decorate","on","once","off","listenTo","stopListening","fire","delegate","stopDelegating","_addEventListener","_removeEventListener"].forEach(i=>{yt[i]=v4.prototype[i]});function $0(i){i[oh]||(Object.defineProperty(i,oh,{value:new Map}),Object.defineProperty(i,Ih,{value:new Map}),Object.defineProperty(i,ah,{value:new Map}))}function hie(...i){const t=gie(...i),e=Array.from(this._bindings.keys()),n=e.length;if(!t.callback&&t.to.length>1)throw new D("observable-bind-to-no-callback",this);if(n>1&&t.callback)throw new D("observable-bind-to-extra-callback",this);t.to.forEach(s=>{if(s.properties.length&&s.properties.length!==n)throw new D("observable-bind-to-properties-length",this);s.properties.length||(s.properties=this._bindProperties)}),this._to=t.to,t.callback&&(this._bindings.get(e[0]).callback=t.callback),wie(this._observable,this._to),bie(this),this._bindProperties.forEach(s=>{y4(this._observable,s)})}function fie(i,t,e){if(this._bindings.size>1)throw new D("observable-bind-to-many-not-one-binding",this);this.to(...mie(i,t),e)}function mie(i,t){const e=i.map(n=>[n,t]);return Array.prototype.concat.apply([],e)}function m2(i){return i.every(t=>typeof t=="string")}function gie(...i){if(!i.length)throw new D("observable-bind-to-parse-error",null);const t={to:[]};let e;return typeof i[i.length-1]=="function"&&(t.callback=i.pop()),i.forEach(n=>{if(typeof n=="string")e.properties.push(n);else if(typeof n=="object")e={observable:n,properties:[]},t.to.push(e);else throw new D("observable-bind-to-parse-error",null)}),t}function pie(i,t,e,n){const s=i[Ih],r=s.get(e),o=r||{};o[n]||(o[n]=new Set),o[n].add(t),r||s.set(e,o)}function bie(i){let t;i._bindings.forEach((e,n)=>{i._to.forEach(s=>{t=s.properties[e.callback?0:i._bindProperties.indexOf(n)],e.to.push([s.observable,t]),pie(i._observable,e,s.observable,t)})})}function y4(i,t){const n=i[ah].get(t);let s;n.callback?s=n.callback.apply(i,n.to.map(r=>r[0][r[1]])):(s=n.to[0],s=s[0][s[1]]),Object.prototype.hasOwnProperty.call(i,t)?i[t]=s:i.set(t,s)}function wie(i,t){t.forEach(e=>{const n=i[Ih];let s;n.get(e.observable)||i.listenTo(e.observable,"change",(r,o)=>{s=n.get(e.observable)[o],s&&s.forEach(a=>{y4(i,a.property)})})})}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class vie{constructor(){b(this,"_replacedElements");this._replacedElements=[]}replace(t,e){this._replacedElements.push({element:t,newElement:e}),t.style.display="none",e&&t.parentNode.insertBefore(e,t.nextSibling)}restore(){this._replacedElements.forEach(({element:t,newElement:e})=>{t.style.display="",e&&e.remove()}),this._replacedElements=[]}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Cy(i){let t=0;for(const e of i)t++;return t}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Jn(i,t){const e=Math.min(i.length,t.length);for(let n=0;n<e;n++)if(i[n]!=t[n])return n;return i.length==t.length?"same":i.length<t.length?"prefix":"extension"}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function ts(i){return!!(i&&i[Symbol.iterator])}function Fs(i,t,e={},n=[]){const s=e&&e.xmlns,r=s?i.createElementNS(s,t):i.createElement(t);for(const o in e)r.setAttribute(o,e[o]);(l2(n)||!ts(n))&&(n=[n]);for(let o of n)l2(o)&&(o=i.createTextNode(o)),r.appendChild(o);return r}class _4{constructor(t,e){b(this,"_config");this._config=Object.create(null),e&&this.define(g2(e)),t&&this._setObjectToTarget(this._config,t)}set(t,e){this._setToTarget(this._config,t,e)}define(t,e){this._setToTarget(this._config,t,e,!0)}get(t){return this._getFromSource(this._config,t)}*names(){for(const t of Object.keys(this._config))yield t}_setToTarget(t,e,n,s=!1){if(_r(e)){this._setObjectToTarget(t,e,s);return}const r=e.split(".");e=r.pop();for(const o of r)_r(t[o])||(t[o]=Object.create(null)),t=t[o];if(_r(n)){_r(t[e])||(t[e]=Object.create(null)),t=t[e],this._setObjectToTarget(t,n,s);return}s&&typeof t[e]<"u"||(t[e]=n)}_getFromSource(t,e){const n=e.split(".");e=n.pop();for(const s of n){if(!_r(t[s])){t=null;break}t=t[s]}return t?g2(t[e]):void 0}_setObjectToTarget(t,e,n){Object.keys(e).forEach(s=>{this._setToTarget(t,s,e[s],n)})}}function g2(i){return CE(i,yie)}function yie(i){return pa(i)||typeof i=="function"?i:void 0}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function ba(i){if(i){if(i.defaultView)return i instanceof i.defaultView.Document;if(i.ownerDocument&&i.ownerDocument.defaultView)return i instanceof i.ownerDocument.defaultView.Node}return!1}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function vp(i){const t=Object.prototype.toString.apply(i);return t=="[object Window]"||t=="[object global]"}const E4=hi(Ct());function hi(i){if(!i)return E4;class t extends i{listenTo(n,s,r,o={}){if(ba(n)||vp(n)){const a={capture:!!o.useCapture,passive:!!o.usePassive},l=this._getProxyEmitter(n,a)||new _ie(n,a);this.listenTo(l,s,r,o)}else super.listenTo(n,s,r,o)}stopListening(n,s,r){if(ba(n)||vp(n)){const o=this._getAllProxyEmitters(n);for(const a of o)this.stopListening(a,s,r)}else super.stopListening(n,s,r)}_getProxyEmitter(n,s){return aie(this,C4(n,s))}_getAllProxyEmitters(n){return[{capture:!1,passive:!1},{capture:!1,passive:!0},{capture:!0,passive:!1},{capture:!0,passive:!0}].map(s=>this._getProxyEmitter(n,s)).filter(s=>!!s)}}return t}["_getProxyEmitter","_getAllProxyEmitters","on","once","off","listenTo","stopListening","fire","delegate","stopDelegating","_addEventListener","_removeEventListener"].forEach(i=>{hi[i]=E4.prototype[i]});class _ie extends Ct(){constructor(e,n){super();b(this,"_domNode");b(this,"_options");b(this,"_domListeners");b4(this,C4(e,n)),this._domNode=e,this._options=n}attach(e){if(this._domListeners&&this._domListeners[e])return;const n=this._createDomListener(e);this._domNode.addEventListener(e,n,this._options),this._domListeners||(this._domListeners={}),this._domListeners[e]=n}detach(e){let n;this._domListeners[e]&&(!(n=this._events[e])||!n.callbacks.length)&&this._domListeners[e].removeListener()}_addEventListener(e,n,s){this.attach(e),Ct().prototype._addEventListener.call(this,e,n,s)}_removeEventListener(e,n){Ct().prototype._removeEventListener.call(this,e,n),this.detach(e)}_createDomListener(e){const n=s=>{this.fire(e,s)};return n.removeListener=()=>{this._domNode.removeEventListener(e,n,this._options),delete this._domListeners[e]},n}}function Eie(i){return i["data-ck-expando"]||(i["data-ck-expando"]=ni())}function C4(i,t){let e=Eie(i);for(const n of Object.keys(t).sort())t[n]&&(e+="-"+n);return e}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Cie(i){const t=[];let e=i;for(;e&&e.nodeType!=Node.DOCUMENT_NODE;)t.unshift(e),e=e.parentNode;return t}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function xie(i){return i instanceof HTMLTextAreaElement?i.value:i.innerHTML}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function x4(i){const t=i.ownerDocument.defaultView.getComputedStyle(i);return{top:parseInt(t.borderTopWidth,10),right:parseInt(t.borderRightWidth,10),bottom:parseInt(t.borderBottomWidth,10),left:parseInt(t.borderLeftWidth,10)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function k4(i){if(!i.target)return null;const t=i.target.ownerDocument,e=i.clientX,n=i.clientY;let s=null;return t.caretRangeFromPoint&&t.caretRangeFromPoint(e,n)?s=t.caretRangeFromPoint(e,n):i.rangeParent&&(s=t.createRange(),s.setStart(i.rangeParent,i.rangeOffset),s.collapse(!0)),s}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Qt(i){return Object.prototype.toString.call(i)=="[object Text]"}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Ab(i){return Object.prototype.toString.apply(i)=="[object Range]"}function T4(i){return!i||!i.parentNode||i.offsetParent===Ce.document.body?null:i.offsetParent}const S4=["top","right","bottom","left","width","height"];class Ye{constructor(t){b(this,"top");b(this,"right");b(this,"bottom");b(this,"left");b(this,"width");b(this,"height");b(this,"_source");const e=Ab(t);if(Object.defineProperty(this,"_source",{value:t._source||t,writable:!0,enumerable:!1}),xy(t)||e)if(e){const n=Ye.getDomRangeRects(t);Km(this,Ye.getBoundingRect(n))}else Km(this,t.getBoundingClientRect());else if(vp(t)){const{innerWidth:n,innerHeight:s}=t;Km(this,{top:0,right:n,bottom:s,left:0,width:n,height:s})}else Km(this,t)}clone(){return new Ye(this)}moveTo(t,e){return this.top=e,this.right=t+this.width,this.bottom=e+this.height,this.left=t,this}moveBy(t,e){return this.top+=e,this.right+=t,this.left+=t,this.bottom+=e,this}getIntersection(t){const e={top:Math.max(this.top,t.top),right:Math.min(this.right,t.right),bottom:Math.min(this.bottom,t.bottom),left:Math.max(this.left,t.left),width:0,height:0};if(e.width=e.right-e.left,e.height=e.bottom-e.top,e.width<0||e.height<0)return null;{const n=new Ye(e);return n._source=this._source,n}}getIntersectionArea(t){const e=this.getIntersection(t);return e?e.getArea():0}getArea(){return this.width*this.height}getVisible(){const t=this._source;let e=this.clone();if(p2(t))return e;let n=t,s=t.parentNode||t.commonAncestorContainer,r;for(;s&&!p2(s);){const o=kie(s)==="visible";n instanceof HTMLElement&&b2(n)==="absolute"&&(r=n);const a=b2(s);if(o||r&&(a==="relative"&&o||a!=="relative")){n=s,s=s.parentNode;continue}const l=new Ye(s),u=e.getIntersection(l);if(u)u.getArea()<e.getArea()&&(e=u);else return null;n=s,s=s.parentNode}return e}isEqual(t){for(const e of S4)if(this[e]!==t[e])return!1;return!0}contains(t){const e=this.getIntersection(t);return!!(e&&e.isEqual(t))}toAbsoluteRect(){const{scrollX:t,scrollY:e}=Ce.window,n=this.clone().moveBy(t,e);if(xy(n._source)){const s=T4(n._source);s&&Tie(n,s)}return n}excludeScrollbarsAndBorders(){const t=this._source;let e,n,s;if(vp(t))e=t.innerWidth-t.document.documentElement.clientWidth,n=t.innerHeight-t.document.documentElement.clientHeight,s=t.getComputedStyle(t.document.documentElement).direction;else{const r=x4(t);e=t.offsetWidth-t.clientWidth-r.left-r.right,n=t.offsetHeight-t.clientHeight-r.top-r.bottom,s=t.ownerDocument.defaultView.getComputedStyle(t).direction,this.left+=r.left,this.top+=r.top,this.right-=r.right,this.bottom-=r.bottom,this.width=this.right-this.left,this.height=this.bottom-this.top}return this.width-=e,s==="ltr"?this.right-=e:this.left+=e,this.height-=n,this.bottom-=n,this}static getDomRangeRects(t){const e=[],n=Array.from(t.getClientRects());if(n.length)for(const s of n)e.push(new Ye(s));else{let s=t.startContainer;Qt(s)&&(s=s.parentNode);const r=new Ye(s.getBoundingClientRect());r.right=r.left,r.width=0,e.push(r)}return e}static getBoundingRect(t){const e={left:Number.POSITIVE_INFINITY,top:Number.POSITIVE_INFINITY,right:Number.NEGATIVE_INFINITY,bottom:Number.NEGATIVE_INFINITY,width:0,height:0};let n=0;for(const s of t)n++,e.left=Math.min(e.left,s.left),e.top=Math.min(e.top,s.top),e.right=Math.max(e.right,s.right),e.bottom=Math.max(e.bottom,s.bottom);return n==0?null:(e.width=e.right-e.left,e.height=e.bottom-e.top,new Ye(e))}}function Km(i,t){for(const e of S4)i[e]=t[e]}function p2(i){return xy(i)?i===i.ownerDocument.body:!1}function xy(i){return i!==null&&typeof i=="object"&&i.nodeType===1&&typeof i.getBoundingClientRect=="function"}function b2(i){return i instanceof HTMLElement?i.ownerDocument.defaultView.getComputedStyle(i).position:"static"}function kie(i){return i instanceof HTMLElement?i.ownerDocument.defaultView.getComputedStyle(i).overflow:"visible"}function Tie(i,t){const e=new Ye(t),n=x4(t);let s=0,r=0;s-=e.left,r-=e.top,s+=t.scrollLeft,r+=t.scrollTop,s-=n.left,r-=n.top,i.moveBy(s,r)}var Rt;let kE=(Rt=class{constructor(t,e){b(this,"_element");b(this,"_callback");Rt._observerInstance||Rt._createObserver(),this._element=t,this._callback=e,Rt._addElementCallback(t,e),Rt._observerInstance.observe(t)}get element(){return this._element}destroy(){Rt._deleteElementCallback(this._element,this._callback)}static _addElementCallback(t,e){Rt._elementCallbacks||(Rt._elementCallbacks=new Map);let n=Rt._elementCallbacks.get(t);n||(n=new Set,Rt._elementCallbacks.set(t,n)),n.add(e)}static _deleteElementCallback(t,e){const n=Rt._getElementCallbacks(t);n&&(n.delete(e),n.size||(Rt._elementCallbacks.delete(t),Rt._observerInstance.unobserve(t))),Rt._elementCallbacks&&!Rt._elementCallbacks.size&&(Rt._observerInstance=null,Rt._elementCallbacks=null)}static _getElementCallbacks(t){return Rt._elementCallbacks?Rt._elementCallbacks.get(t):null}static _createObserver(){Rt._observerInstance=new Ce.window.ResizeObserver(t=>{for(const e of t){const n=Rt._getElementCallbacks(e.target);if(n)for(const s of n)s(e)}})}},b(Rt,"_observerInstance",null),b(Rt,"_elementCallbacks",null),Rt);/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function w2(i,t){i instanceof HTMLTextAreaElement&&(i.value=t),i.innerHTML=t}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function ff(i){return t=>t+i}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Wd(i){let t=0;for(;i.previousSibling;)i=i.previousSibling,t++;return t}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function A4(i,t,e){i.insertBefore(e,i.childNodes[t]||null)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function lh(i){return i&&i.nodeType===Node.COMMENT_NODE}function Sie(i){try{Ce.document.createAttribute(i)}catch{return!1}return!0}function fo(i){return i?Qt(i)?fo(i.parentElement):i.getClientRects?!!i.getClientRects().length:!1:!1}function TE({element:i,target:t,positions:e,limiter:n,fitInViewport:s,viewportOffsetConfig:r}){_l(t)&&(t=t()),_l(n)&&(n=n());const o=T4(i),a=Aie(r),l=new Ye(i),u=v2(t,a);let h;if(!u||!a.getIntersection(u))return null;const f={targetRect:u,elementRect:l,positionedElementAncestor:o,viewportRect:a};if(!n&&!s)h=new P4(e[0],f);else{if(n){const g=v2(n,a);g&&(f.limiterRect=g)}h=Pie(e,f)}return h}function v2(i,t){const e=new Ye(i).getVisible();return e?e.getIntersection(t):null}function Aie(i){i=Object.assign({top:0,bottom:0,left:0,right:0},i);const t=new Ye(Ce.window);return t.top+=i.top,t.height-=i.top,t.bottom-=i.bottom,t.height-=i.bottom,t}function Pie(i,t){const{elementRect:e}=t,n=e.getArea(),s=i.map(a=>new P4(a,t)).filter(a=>!!a.name);let r=0,o=null;for(const a of s){const{limiterIntersectionArea:l,viewportIntersectionArea:u}=a;if(l===n)return a;const h=u**2+l**2;h>r&&(r=h,o=a)}return o}class P4{constructor(t,e){b(this,"name");b(this,"config");b(this,"_positioningFunctionCoordinates");b(this,"_options");b(this,"_cachedRect");b(this,"_cachedAbsoluteRect");const n=t(e.targetRect,e.elementRect,e.viewportRect,e.limiterRect);if(!n)return;const{left:s,top:r,name:o,config:a}=n;this.name=o,this.config=a,this._positioningFunctionCoordinates={left:s,top:r},this._options=e}get left(){return this._absoluteRect.left}get top(){return this._absoluteRect.top}get limiterIntersectionArea(){const t=this._options.limiterRect;return t?t.getIntersectionArea(this._rect):0}get viewportIntersectionArea(){return this._options.viewportRect.getIntersectionArea(this._rect)}get _rect(){return this._cachedRect?this._cachedRect:(this._cachedRect=this._options.elementRect.clone().moveTo(this._positioningFunctionCoordinates.left,this._positioningFunctionCoordinates.top),this._cachedRect)}get _absoluteRect(){return this._cachedAbsoluteRect?this._cachedAbsoluteRect:(this._cachedAbsoluteRect=this._rect.toAbsoluteRect(),this._cachedAbsoluteRect)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function y2(i){const t=i.parentNode;t&&t.removeChild(i)}function Iie({target:i,viewportOffset:t=0,ancestorOffset:e=0,alignToTop:n,forceScroll:s}){const r=SE(i);let o=r,a=null;for(t=Nie(t);o;){let l;o==r?l=_2(i):l=_2(a),Oie({parent:l,getRect:()=>z0(i,o),alignToTop:n,ancestorOffset:e,forceScroll:s});let u=z0(i,o);const h=z0(l,o);if(u.height>h.height){const f=u.getIntersection(h);f&&(u=f)}if(Rie({window:o,rect:u,viewportOffset:t,alignToTop:n,forceScroll:s}),o.parent!=o){if(a=o.frameElement,o=o.parent,!a)return}else o=null}}function Rie({window:i,rect:t,alignToTop:e,forceScroll:n,viewportOffset:s}){const r=t.clone().moveBy(0,s.bottom),o=t.clone().moveBy(0,-s.top),a=new Ye(i).excludeScrollbarsAndBorders(),l=[o,r],u=e&&n,h=l.every(E=>a.contains(E));let{scrollX:f,scrollY:g}=i;const p=f,y=g;u?g-=a.top-t.top+s.top:h||(R4(o,a)?g-=a.top-t.top+s.top:I4(r,a)&&(e?g+=t.top-a.top-s.top:g+=t.bottom-a.bottom+s.bottom)),h||(O4(t,a)?f-=a.left-t.left+s.left:N4(t,a)&&(f+=t.right-a.right+s.right)),(f!=p||g!==y)&&i.scrollTo(f,g)}function Oie({parent:i,getRect:t,alignToTop:e,forceScroll:n,ancestorOffset:s=0,limiterElement:r}){const o=SE(i),a=e&&n;let l,u,h;const f=r||o.document.body;for(;i!=f;)u=t(),l=new Ye(i).excludeScrollbarsAndBorders(),h=l.contains(u),a?i.scrollTop-=l.top-u.top+s:h||(R4(u,l)?i.scrollTop-=l.top-u.top+s:I4(u,l)&&(e?i.scrollTop+=u.top-l.top-s:i.scrollTop+=u.bottom-l.bottom+s)),h||(O4(u,l)?i.scrollLeft-=l.left-u.left+s:N4(u,l)&&(i.scrollLeft+=u.right-l.right+s)),i=i.parentNode}function I4(i,t){return i.bottom>t.bottom}function R4(i,t){return i.top<t.top}function O4(i,t){return i.left<t.left}function N4(i,t){return i.right>t.right}function SE(i){return Ab(i)?i.startContainer.ownerDocument.defaultView:i.ownerDocument.defaultView}function _2(i){if(Ab(i)){let t=i.commonAncestorContainer;return Qt(t)&&(t=t.parentNode),t}else return i.parentNode}function z0(i,t){const e=SE(i),n=new Ye(i);if(e===t)return n;{let s=e;for(;s!=t;){const r=s.frameElement,o=new Ye(r).excludeScrollbarsAndBorders();n.moveBy(o.left,o.top),s=s.parent}}return n}function Nie(i){return typeof i=="number"?{top:i,bottom:i,left:i,right:i}:i}const Mie={ctrl:"⌃",cmd:"⌘",alt:"⌥",shift:"⇧"},Lie={ctrl:"Ctrl+",alt:"Alt+",shift:"Shift+"},E2={37:"←",38:"↑",39:"→",40:"↓",9:"⇥",33:"Page Up",34:"Page Down"},nt=$ie(),Vie=Object.fromEntries(Object.entries(nt).map(([i,t])=>{let e;return t in E2?e=E2[t]:e=i.charAt(0).toUpperCase()+i.slice(1),[t,e]}));function Cl(i){let t;if(typeof i=="string"){if(t=nt[i.toLowerCase()],!t)throw new D("keyboard-unknown-key",null,{key:i})}else t=i.keyCode+(i.altKey?nt.alt:0)+(i.ctrlKey?nt.ctrl:0)+(i.shiftKey?nt.shift:0)+(i.metaKey?nt.cmd:0);return t}function Pb(i){return typeof i=="string"&&(i=zie(i)),i.map(t=>typeof t=="string"?Bie(t):t).reduce((t,e)=>e+t,0)}function yp(i,t){let e=Pb(i);const n=Fe.isMac||Fe.isiOS;return Object.entries(n?Mie:Lie).reduce((o,[a,l])=>(e&nt[a]&&(e&=~nt[a],o+=l),o),"")+(e?Vie[e]:"")}function Die(i){return i==nt.arrowright||i==nt.arrowleft||i==nt.arrowup||i==nt.arrowdown}function Ib(i,t){const e=t==="ltr";switch(i){case nt.arrowleft:return e?"left":"right";case nt.arrowright:return e?"right":"left";case nt.arrowup:return"up";case nt.arrowdown:return"down"}}function Bie(i){if(i.endsWith("!"))return Cl(i.slice(0,-1));const t=Cl(i);return(Fe.isMac||Fe.isiOS)&&t==nt.ctrl?nt.cmd:t}function Fie(i,t){const e=Ib(i,t);return e==="down"||e==="right"}function $ie(){const i={pageup:33,pagedown:34,end:35,home:36,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,backspace:8,delete:46,enter:13,space:32,esc:27,tab:9,ctrl:1114112,shift:2228224,alt:4456448,cmd:8912896};for(let t=65;t<=90;t++){const e=String.fromCharCode(t);i[e.toLowerCase()]=t}for(let t=48;t<=57;t++)i[t-48]=t;for(let t=112;t<=123;t++)i["f"+(t-111)]=t;return Object.assign(i,{"'":222,",":108,"-":109,".":110,"/":111,";":186,"=":187,"[":219,"\\":220,"]":221,"`":223}),i}function zie(i){return i.split("+").map(t=>t.trim())}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const jie=["ar","ara","dv","div","fa","per","fas","he","heb","ku","kur","ug","uig"];function C2(i){return jie.includes(i)?"rtl":"ltr"}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Bt(i){return Array.isArray(i)?i:[i]}/* istanbul ignore else -- @preserve */Ce.window.CKEDITOR_TRANSLATIONS||(Ce.window.CKEDITOR_TRANSLATIONS={});function Hie(i,t,e=1,n){if(typeof e!="number")throw new D("translation-service-quantity-not-a-number",null,{quantity:e});const s=n||Ce.window.CKEDITOR_TRANSLATIONS,r=qie(s);r===1&&(i=Object.keys(s)[0]);const o=t.id||t.string;if(r===0||!Wie(i,o,s))return e!==1?t.plural:t.string;const a=s[i].dictionary,l=s[i].getPluralForm||(f=>f===1?0:1),u=a[o];if(typeof u=="string")return u;const h=Number(l(e));return u[h]}function Uie(i){return Array.isArray(i)?i.reduce((t,e)=>xE(t,e)):i}function Wie(i,t,e){return!!e[i]&&!!e[i].dictionary[t]}function qie(i){return Object.keys(i).length}class Gie{constructor({uiLanguage:t="en",contentLanguage:e,translations:n}={}){b(this,"uiLanguage");b(this,"uiLanguageDirection");b(this,"contentLanguage");b(this,"contentLanguageDirection");b(this,"t");b(this,"translations");this.uiLanguage=t,this.contentLanguage=e||this.uiLanguage,this.uiLanguageDirection=C2(this.uiLanguage),this.contentLanguageDirection=C2(this.contentLanguage),this.translations=Uie(n),this.t=(s,r)=>this._t(s,r)}get language(){return console.warn("locale-deprecated-language-property: The Locale#language property has been deprecated and will be removed in the near future. Please use #uiLanguage and #contentLanguage properties instead."),this.uiLanguage}_t(t,e=[]){e=Bt(e),typeof t=="string"&&(t={string:t});const s=!!t.plural?e[0]:1,r=Hie(this.uiLanguage,t,s,this.translations);return Kie(r,e)}}function Kie(i,t){return i.replace(/%(\d+)/g,(e,n)=>n<t.length?t[n]:e)}class Hn extends Ct(){constructor(e={},n={}){super();b(this,"_items");b(this,"_itemMap");b(this,"_idProperty");b(this,"_bindToCollection");b(this,"_bindToExternalToInternalMap");b(this,"_bindToInternalToExternalMap");b(this,"_skippedIndexesFromExternal");const s=ts(e);if(s||(n=e),this._items=[],this._itemMap=new Map,this._idProperty=n.idProperty||"id",this._bindToExternalToInternalMap=new WeakMap,this._bindToInternalToExternalMap=new WeakMap,this._skippedIndexesFromExternal=[],s)for(const r of e)this._items.push(r),this._itemMap.set(this._getItemIdBeforeAdding(r),r)}get length(){return this._items.length}get first(){return this._items[0]||null}get last(){return this._items[this.length-1]||null}add(e,n){return this.addMany([e],n)}addMany(e,n){if(n===void 0)n=this._items.length;else if(n>this._items.length||n<0)throw new D("collection-add-item-invalid-index",this);let s=0;for(const r of e){const o=this._getItemIdBeforeAdding(r),a=n+s;this._items.splice(a,0,r),this._itemMap.set(o,r),this.fire("add",r,a),s++}return this.fire("change",{added:e,removed:[],index:n}),this}get(e){let n;if(typeof e=="string")n=this._itemMap.get(e);else if(typeof e=="number")n=this._items[e];else throw new D("collection-get-invalid-arg",this);return n||null}has(e){if(typeof e=="string")return this._itemMap.has(e);{const n=this._idProperty,s=e[n];return s&&this._itemMap.has(s)}}getIndex(e){let n;return typeof e=="string"?n=this._itemMap.get(e):n=e,n?this._items.indexOf(n):-1}remove(e){const[n,s]=this._remove(e);return this.fire("change",{added:[],removed:[n],index:s}),n}map(e,n){return this._items.map(e,n)}forEach(e,n){this._items.forEach(e,n)}find(e,n){return this._items.find(e,n)}filter(e,n){return this._items.filter(e,n)}clear(){this._bindToCollection&&(this.stopListening(this._bindToCollection),this._bindToCollection=null);const e=Array.from(this._items);for(;this.length;)this._remove(0);this.fire("change",{added:[],removed:e,index:0})}bindTo(e){if(this._bindToCollection)throw new D("collection-bind-to-rebind",this);return this._bindToCollection=e,{as:n=>{this._setUpBindToBinding(s=>new n(s))},using:n=>{typeof n=="function"?this._setUpBindToBinding(n):this._setUpBindToBinding(s=>s[n])}}}_setUpBindToBinding(e){const n=this._bindToCollection,s=(r,o,a)=>{const l=n._bindToCollection==this,u=n._bindToInternalToExternalMap.get(o);if(l&&u)this._bindToExternalToInternalMap.set(o,u),this._bindToInternalToExternalMap.set(u,o);else{const h=e(o);if(!h){this._skippedIndexesFromExternal.push(a);return}let f=a;for(const g of this._skippedIndexesFromExternal)a>g&&f--;for(const g of n._skippedIndexesFromExternal)f>=g&&f++;this._bindToExternalToInternalMap.set(o,h),this._bindToInternalToExternalMap.set(h,o),this.add(h,f);for(let g=0;g<n._skippedIndexesFromExternal.length;g++)f<=n._skippedIndexesFromExternal[g]&&n._skippedIndexesFromExternal[g]++}};for(const r of n)s(null,r,n.getIndex(r));this.listenTo(n,"add",s),this.listenTo(n,"remove",(r,o,a)=>{const l=this._bindToExternalToInternalMap.get(o);l&&this.remove(l),this._skippedIndexesFromExternal=this._skippedIndexesFromExternal.reduce((u,h)=>(a<h&&u.push(h-1),a>h&&u.push(h),u),[])})}_getItemIdBeforeAdding(e){const n=this._idProperty;let s;if(n in e){if(s=e[n],typeof s!="string")throw new D("collection-add-invalid-id",this);if(this.get(s))throw new D("collection-add-item-already-exists",this)}else e[n]=s=ni();return s}_remove(e){let n,s,r,o=!1;const a=this._idProperty;if(typeof e=="string"?(s=e,r=this._itemMap.get(s),o=!r,r&&(n=this._items.indexOf(r))):typeof e=="number"?(n=e,r=this._items[n],o=!r,r&&(s=r[a])):(r=e,s=r[a],n=this._items.indexOf(r),o=n==-1||!this._itemMap.get(s)),o)throw new D("collection-remove-404",this);this._items.splice(n,1),this._itemMap.delete(s);const l=this._bindToInternalToExternalMap.get(r);return this._bindToInternalToExternalMap.delete(r),this._bindToExternalToInternalMap.delete(l),this.fire("remove",r,n),[r,n]}[Symbol.iterator](){return this._items[Symbol.iterator]()}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function ln(i){const t=i.next();return t.done?null:t.value}class Gt extends hi(yt()){constructor(){super();b(this,"_elements",new Set);b(this,"_externalViews",new Set);b(this,"_blurTimeout",null);this.set("isFocused",!1),this.set("focusedElement",null)}get elements(){return Array.from(this._elements.values())}get externalViews(){return Array.from(this._externalViews.values())}add(e){if(k2(e))this._addElement(e);else if(x2(e))this._addView(e);else{if(!e.element)throw new D("focustracker-add-view-missing-element",{focusTracker:this,view:e});this._addElement(e.element)}}remove(e){k2(e)?this._removeElement(e):x2(e)?this._removeView(e):this._removeElement(e.element)}_addElement(e){if(this._elements.has(e))throw new D("focustracker-add-element-already-exist",this);this.listenTo(e,"focus",()=>{const n=this.externalViews.find(s=>Yie(e,s));n?this._focus(n.element):this._focus(e)},{useCapture:!0}),this.listenTo(e,"blur",()=>{this._blur()},{useCapture:!0}),this._elements.add(e)}_removeElement(e){this._elements.has(e)&&(this.stopListening(e),this._elements.delete(e)),e===this.focusedElement&&this._blur()}_addView(e){e.element&&this._addElement(e.element),this.listenTo(e.focusTracker,"change:focusedElement",()=>{e.focusTracker.focusedElement?e.element&&this._focus(e.element):this._blur()}),this._externalViews.add(e)}_removeView(e){e.element&&this._removeElement(e.element),this.stopListening(e.focusTracker),this._externalViews.delete(e)}destroy(){this.stopListening(),this._elements.clear(),this._externalViews.clear(),this.isFocused=!1,this.focusedElement=null}_focus(e){this._clearBlurTimeout(),this.focusedElement=e,this.isFocused=!0}_blur(){this.elements.find(s=>s.contains(document.activeElement))||this.externalViews.find(s=>s.focusTracker.isFocused&&!s.focusTracker._blurTimeout)||(this._clearBlurTimeout(),this._blurTimeout=setTimeout(()=>{this.focusedElement=null,this.isFocused=!1},0))}_clearBlurTimeout(){clearTimeout(this._blurTimeout),this._blurTimeout=null}}function x2(i){return"focusTracker"in i&&i.focusTracker instanceof Gt}function k2(i){return pa(i)}function Yie(i,t){return T2(i,t)?!0:!!t.focusTracker.externalViews.find(e=>T2(i,e))}function T2(i,t){return!!t.element&&t.element.contains(document.activeElement)&&i.contains(t.element)}class tn{constructor(){b(this,"_listener");this._listener=new(hi())}listenTo(t){this._listener.listenTo(t,"keydown",(e,n)=>{this._listener.fire("_keydown:"+Cl(n),n)})}set(t,e,n={}){const s=Pb(t),r=n.priority;this._listener.listenTo(this._listener,"_keydown:"+s,(o,a)=>{n.filter&&!n.filter(a)||(e(a,()=>{a.preventDefault(),a.stopPropagation(),o.stop()}),o.return=!0)},{priority:r})}press(t){return!!this._listener.fire("_keydown:"+Cl(t),t)}stopListening(t){this._listener.stopListening(t)}destroy(){this.stopListening()}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Zie(i){const t=new Map;for(const e in i)t.set(e,i[e]);return t}function er(i){return ts(i)?new Map(i):Zie(i)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function S2(i,t,e){const n=i.length,s=t.length;for(let r=n-1;r>=e;r--)i[r+s]=i[r];for(let r=0;r<s;r++)i[e+r]=t[r]}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function AE(i,t){let e;function n(...s){n.cancel(),e=setTimeout(()=>i(...s),t)}return n.cancel=()=>{clearTimeout(e)},n}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function PE(i){try{if(!i.startsWith("ey"))return null;const t=atob(i.replace(/-/g,"+").replace(/_/g,"/"));return JSON.parse(t)}catch{return null}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Xie(){const i=[];for(let t=0;t<256;t++){let e=t;for(let n=0;n<8;n++)e&1?e=3988292384^e>>>1:e=e>>>1;i[t]=e}return i}function Jie(i){const t=Array.isArray(i)?i:[i],e=Xie();let n=-1;const s=t.map(r=>Array.isArray(r)?r.join(""):String(r)).join("");for(let r=0;r<s.length;r++){const o=s.charCodeAt(r);n=n>>>8^e[(n^o)&255]}return n=(n^-1)>>>0,n.toString(16).padStart(8,"0")}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Qie(i){return!!i&&i.length==1&&/[\u0300-\u036f\u1ab0-\u1aff\u1dc0-\u1dff\u20d0-\u20ff\ufe20-\ufe2f]/.test(i)}function ese(i){return!!i&&i.length==1&&/[\ud800-\udbff]/.test(i)}function tse(i){return!!i&&i.length==1&&/[\udc00-\udfff]/.test(i)}function IE(i,t){return ese(i.charAt(t-1))&&tse(i.charAt(t))}function RE(i,t){return Qie(i.charAt(t))}const nse=ise();function M4(i,t){const e=String(i).matchAll(nse);return Array.from(e).some(n=>n.index<t&&t<n.index+n[0].length)}function ise(){const i=[new RegExp("\\p{Emoji}[\\u{E0020}-\\u{E007E}]+\\u{E007F}","u"),new RegExp("\\p{Emoji}\\u{FE0F}?\\u{20E3}","u"),new RegExp("\\p{Emoji}\\u{FE0F}","u"),new RegExp("(?=\\p{General_Category=Other_Symbol})\\p{Emoji}\\p{Emoji_Modifier}*","u")],t=new RegExp("\\p{Regional_Indicator}{2}","u").source,e="(?:"+i.map(s=>s.source).join("|")+")",n=`${t}|${e}(?:‍${e})*`;return new RegExp(n,"ug")}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const Ad=new WeakMap;let A2=!1;function OE({view:i,element:t,text:e,isDirectHost:n=!0,keepOnFocus:s=!1}){const r=i.document;Ad.has(r)||(Ad.set(r,new Map),r.registerPostFixer(a=>j0(Ad.get(r),a)),r.on("change:isComposing",()=>{i.change(a=>j0(Ad.get(r),a))},{priority:"high"})),t.is("editableElement")&&t.on("change:placeholder",(a,l,u)=>o(u)),t.placeholder?o(t.placeholder):e&&o(e),e&&cse();function o(a){const l={text:a,isDirectHost:n,keepOnFocus:s,hostElement:n?t:null};Ad.get(r).set(t,l),i.change(u=>j0([[t,l]],u))}}function sse(i,t){return t.hasClass("ck-placeholder")?!1:(i.addClass("ck-placeholder",t),!0)}function rse(i,t){return t.hasClass("ck-placeholder")?(i.removeClass("ck-placeholder",t),!0):!1}function ose(i,t){if(!i.isAttached()||ase(i))return!1;const e=i.document,s=e.selection.anchor;return e.isComposing&&s&&s.parent===i?!1:t||!e.isFocused?!0:!!s&&s.parent!==i}function ase(i){for(const t of i.getChildren())if(!t.is("uiElement"))return!0;return!1}function j0(i,t){const e=[];let n=!1;for(const[s,r]of i)r.isDirectHost&&(e.push(s),P2(t,s,r)&&(n=!0));for(const[s,r]of i){if(r.isDirectHost)continue;const o=lse(s);o&&(e.includes(o)||(r.hostElement=o,P2(t,s,r)&&(n=!0)))}return n}function P2(i,t,e){const{text:n,isDirectHost:s,hostElement:r}=e;let o=!1;return r.getAttribute("data-placeholder")!==n&&(i.setAttribute("data-placeholder",n,r),o=!0),(s||t.childCount==1)&&ose(r,e.keepOnFocus)?sse(i,r)&&(o=!0):rse(i,r)&&(o=!0),o}function lse(i){if(i.childCount){const t=i.getChild(0);if(t.is("element")&&!t.is("uiElement")&&!t.is("attributeElement"))return t}return null}function cse(){A2||dt("enableplaceholder-deprecated-text-option"),A2=!0}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */let Ol=class{is(){throw new Error("is() method is abstract")}},Nl=class extends Ct(Ol){constructor(e){super();b(this,"document");b(this,"parent");this.document=e,this.parent=null}get index(){let e;if(!this.parent)return null;if((e=this.parent.getChildIndex(this))==-1)throw new D("view-node-not-found-in-parent",this);return e}get nextSibling(){const e=this.index;return e!==null&&this.parent.getChild(e+1)||null}get previousSibling(){const e=this.index;return e!==null&&this.parent.getChild(e-1)||null}get root(){let e=this;for(;e.parent;)e=e.parent;return e}isAttached(){return this.root.is("rootElement")}getPath(){const e=[];let n=this;for(;n.parent;)e.unshift(n.index),n=n.parent;return e}getAncestors(e={}){const n=[];let s=e.includeSelf?this:this.parent;for(;s;)n[e.parentFirst?"push":"unshift"](s),s=s.parent;return n}getCommonAncestor(e,n={}){const s=this.getAncestors(n),r=e.getAncestors(n);let o=0;for(;s[o]==r[o]&&s[o];)o++;return o===0?null:s[o-1]}isBefore(e){if(this==e||this.root!==e.root)return!1;const n=this.getPath(),s=e.getPath(),r=Jn(n,s);switch(r){case"prefix":return!0;case"extension":return!1;default:return n[r]<s[r]}}isAfter(e){return this==e||this.root!==e.root?!1:!this.isBefore(e)}_remove(){this.parent._removeChildren(this.index)}_fireChange(e,n,s){this.fire(`change:${e}`,n,s),this.parent&&this.parent._fireChange(e,n,s)}toJSON(){const e=t4(this);return delete e.parent,e}};Nl.prototype.is=function(i){return i==="node"||i==="view:node"};let zn=class ky extends Nl{constructor(e,n){super(e);b(this,"_textData");this._textData=n}get data(){return this._textData}get _data(){return this.data}set _data(e){this._fireChange("text",this),this._textData=e}isSimilar(e){return e instanceof ky?this===e||this.data===e.data:!1}_clone(){return new ky(this.document,this.data)}};zn.prototype.is=function(i){return i==="$text"||i==="view:$text"||i==="text"||i==="view:text"||i==="node"||i==="view:node"};let Qr=class extends Ol{constructor(e,n,s){super();b(this,"textNode");b(this,"data");b(this,"offsetInText");if(this.textNode=e,n<0||n>e.data.length)throw new D("view-textproxy-wrong-offsetintext",this);if(s<0||n+s>e.data.length)throw new D("view-textproxy-wrong-length",this);this.data=e.data.substring(n,n+s),this.offsetInText=n}get offsetSize(){return this.data.length}get isPartial(){return this.data.length!==this.textNode.data.length}get parent(){return this.textNode.parent}get root(){return this.textNode.root}get document(){return this.textNode.document}getAncestors(e={}){const n=[];let s=e.includeSelf?this.textNode:this.parent;for(;s!==null;)n[e.parentFirst?"push":"unshift"](s),s=s.parent;return n}};Qr.prototype.is=function(i){return i==="$textProxy"||i==="view:$textProxy"||i==="textProxy"||i==="view:textProxy"};class _p{constructor(){b(this,"_consumables",new Map)}add(t,e){let n;if(t.is("$text")||t.is("documentFragment")){this._consumables.set(t,!0);return}this._consumables.has(t)?n=this._consumables.get(t):(n=new use(t),this._consumables.set(t,n)),n.add(e?qd(e):t._getConsumables())}test(t,e){const n=this._consumables.get(t);return n===void 0?null:t.is("$text")||t.is("documentFragment")?n:n.test(qd(e))}consume(t,e){if(t.is("$text")||t.is("documentFragment"))return this.test(t,e)?(this._consumables.set(t,!1),!0):!1;const n=this._consumables.get(t);return n===void 0?!1:n.consume(qd(e))}revert(t,e){const n=this._consumables.get(t);n!==void 0&&(t.is("$text")||t.is("documentFragment")?this._consumables.set(t,!0):n.revert(qd(e)))}static createFrom(t,e){if(e||(e=new _p),t.is("$text"))e.add(t);else if(t.is("element")||t.is("documentFragment")){e.add(t);for(const n of t.getChildren())_p.createFrom(n,e)}return e}}class use{constructor(t){b(this,"element");b(this,"_canConsumeName",null);b(this,"_attributes",new Map);this.element=t}add(t){t.name&&(this._canConsumeName=!0);for(const[e,n]of t.attributes)if(n){let s=this._attributes.get(e);(!s||typeof s=="boolean")&&(s=new Map,this._attributes.set(e,s)),s.set(n,!0)}else{if(e=="style"||e=="class")throw new D("viewconsumable-invalid-attribute",this);this._attributes.set(e,!0)}}test(t){if(t.name&&!this._canConsumeName)return this._canConsumeName;for(const[e,n]of t.attributes){const s=this._attributes.get(e);if(s===void 0)return null;if(s===!1)return!1;if(s!==!0){if(n){const r=s.get(n);if(r===void 0)return null;if(!r)return!1}else for(const r of s.values())if(!r)return!1}}return!0}consume(t){if(!this.test(t))return!1;t.name&&(this._canConsumeName=!1);for(const[e,n]of t.attributes){const s=this._attributes.get(e);if(typeof s=="boolean")for(const[r]of this.element._getConsumables(e,n).attributes)this._attributes.set(r,!1);else if(n)for(const[,r]of this.element._getConsumables(e,n).attributes)s.set(r,!1);else for(const r of s.keys())s.set(r,!1)}return!0}revert(t){t.name&&(this._canConsumeName=!0);for(const[e,n]of t.attributes){const s=this._attributes.get(e);if(s===!1){this._attributes.set(e,!0);continue}if(!(s===void 0||s===!0))if(n)s.get(n)===!1&&s.set(n,!0);else for(const r of s.keys())s.set(r,!0)}}}function qd(i){const t=[];return"attributes"in i&&i.attributes&&H0(t,i.attributes),"classes"in i&&i.classes&&H0(t,i.classes,"class"),"styles"in i&&i.styles&&H0(t,i.styles,"style"),{name:i.name||!1,attributes:t}}function H0(i,t,e){if(typeof t=="string"){i.push(e?[e,t]:[t]);return}for(const n of t)Array.isArray(n)?i.push(n):i.push(e?[e,n]:[n])}class ns{constructor(...t){b(this,"_patterns",[]);this.add(...t)}add(...t){for(let e of t)(typeof e=="string"||e instanceof RegExp)&&(e={name:e}),this._patterns.push(e)}match(...t){for(const e of t)for(const n of this._patterns){const s=this._isElementMatching(e,n);if(s)return{element:e,pattern:n,match:s}}return null}matchAll(...t){const e=[];for(const n of t)for(const s of this._patterns){const r=this._isElementMatching(n,s);r&&e.push({element:n,pattern:s,match:r})}return e.length>0?e:null}getElementName(){if(this._patterns.length!==1)return null;const t=this._patterns[0],e=t.name;return typeof t!="function"&&e&&!(e instanceof RegExp)?e:null}_isElementMatching(t,e){if(typeof e=="function"){const r=e(t);return!r||typeof r!="object"?r:qd(r)}const n={};if(e.name&&(n.name=dse(e.name,t.name),!n.name))return null;const s=[];return e.attributes&&!hse(e.attributes,t,s)||e.classes&&!fse(e.classes,t,s)||e.styles&&!mse(e.styles,t,s)?null:(s.length&&(n.attributes=s),n)}}function Ep(i,t){return i===!0||i===t||i instanceof RegExp&&!!String(t).match(i)}function dse(i,t){return i instanceof RegExp?!!t.match(i):i===t}function NE(i,t){if(Array.isArray(i))return i.map(n=>typeof n!="object"||n instanceof RegExp?t?[t,n,!0]:[n,!0]:((n.key===void 0||n.value===void 0)&&dt("matcher-pattern-missing-key-or-value",n),t?[t,n.key,n.value]:[n.key,n.value]));if(typeof i!="object"||i instanceof RegExp)return[t?[t,i,!0]:[i,!0]];const e=[];for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.push(t?[t,n,i[n]]:[n,i[n]]);return e}function hse(i,t,e){let n;return typeof i=="object"&&!(i instanceof RegExp)&&!Array.isArray(i)?(i.style!==void 0&&dt("matcher-pattern-deprecated-attributes-style-key",i),i.class!==void 0&&dt("matcher-pattern-deprecated-attributes-class-key",i)):n=["class","style"],t._collectAttributesMatch(NE(i),e,n)}function fse(i,t,e){return t._collectAttributesMatch(NE(i,"class"),e)}function mse(i,t,e){return t._collectAttributesMatch(NE(i,"style"),e)}class ch{constructor(t){b(this,"_styles");b(this,"_cachedStyleNames",null);b(this,"_cachedExpandedStyleNames",null);b(this,"_styleProcessor");this._styles={},this._styleProcessor=t}get isEmpty(){return!Object.entries(this._styles).length}get size(){return this.isEmpty?0:this.getStyleNames().length}setTo(t){this.clear();const e=pse(t);for(const[n,s]of e)this._styleProcessor.toNormalizedForm(n,s,this._styles);return this}has(t){if(this.isEmpty)return!1;const n=this._styleProcessor.getReducedForm(t,this._styles).find(([s])=>s===t);return Array.isArray(n)}set(t,e){if(this._cachedStyleNames=null,this._cachedExpandedStyleNames=null,Ot(t))for(const[n,s]of Object.entries(t))this._styleProcessor.toNormalizedForm(n,s,this._styles);else this._styleProcessor.toNormalizedForm(t,e,this._styles)}remove(t){for(const e of Bt(t)){this._cachedStyleNames=null,this._cachedExpandedStyleNames=null;const n=Ty(e);jne(this._styles,n),delete this._styles[e],this._cleanEmptyObjectsOnPath(n)}}getNormalized(t){return this._styleProcessor.getNormalized(t,this._styles)}toString(){return this.isEmpty?"":this.getStylesEntries().map(t=>t.join(":")).sort().join(";")+";"}getAsString(t){if(this.isEmpty)return;if(this._styles[t]&&!Ot(this._styles[t]))return this._styles[t];const n=this._styleProcessor.getReducedForm(t,this._styles).find(([s])=>s===t);if(Array.isArray(n))return n[1]}getStyleNames(t=!1){return this.isEmpty?[]:t?(this._cachedExpandedStyleNames=this._cachedExpandedStyleNames||this._styleProcessor.getStyleNames(this._styles),this._cachedExpandedStyleNames):(this._cachedStyleNames=this._cachedStyleNames||this.getStylesEntries().map(([e])=>e),this._cachedStyleNames)}keys(){return this.getStyleNames()}clear(){this._styles={},this._cachedStyleNames=null,this._cachedExpandedStyleNames=null}isSimilar(t){if(this.size!==t.size)return!1;for(const e of this.getStyleNames())if(!t.has(e)||t.getAsString(e)!==this.getAsString(e))return!1;return!0}getStylesEntries(){const t=[],e=Object.keys(this._styles);for(const n of e)t.push(...this._styleProcessor.getReducedForm(n,this._styles));return t}_clone(){const t=new this.constructor(this._styleProcessor);return t.set(this.getNormalized()),t}_getTokensMatch(t,e){const n=[];for(const s of this.getStyleNames(!0))if(Ep(t,s)){if(e===!0){n.push(s);continue}const r=this.getAsString(s);Ep(e,r)&&n.push(s)}return n.length?n:void 0}_getConsumables(t){const e=[];if(t){e.push(t);for(const n of this._styleProcessor.getRelatedStyles(t))e.push(n)}else for(const n of this.getStyleNames()){for(const s of this._styleProcessor.getRelatedStyles(n))e.push(s);e.push(n)}return e}_canMergeFrom(t){for(const e of t.getStyleNames())if(this.has(e)&&this.getAsString(e)!==t.getAsString(e))return!1;return!0}_mergeFrom(t){for(const e of t.getStyleNames())this.has(e)||this.set(e,t.getAsString(e))}_isMatching(t){for(const e of t.getStyleNames())if(!this.has(e)||this.getAsString(e)!==t.getAsString(e))return!1;return!0}_cleanEmptyObjectsOnPath(t){const e=t.split(".");if(!(e.length>1))return;const s=e.splice(0,e.length-1).join("."),r=hu(this._styles,s);if(!r)return;!Object.keys(r).length&&this.remove(s)}}class gse{constructor(){b(this,"_normalizers");b(this,"_extractors");b(this,"_reducers");b(this,"_consumables");this._normalizers=new Map,this._extractors=new Map,this._reducers=new Map,this._consumables=new Map}toNormalizedForm(t,e,n){if(Ot(e)){U0(n,Ty(t),e);return}if(this._normalizers.has(t)){const s=this._normalizers.get(t),{path:r,value:o}=s(e);U0(n,r,o)}else U0(n,t,e)}getNormalized(t,e){if(!t)return xE({},e);if(e[t]!==void 0)return e[t];if(this._extractors.has(t)){const n=this._extractors.get(t);if(typeof n=="string")return hu(e,n);const s=n(t,e);if(s)return s}return hu(e,Ty(t))}getReducedForm(t,e){const n=this.getNormalized(t,e);return n===void 0?[]:this._reducers.has(t)?this._reducers.get(t)(n):[[t,n]]}getStyleNames(t){const e=new Set;for(const n of this._consumables.keys()){const s=this.getNormalized(n,t);s&&(typeof s!="object"||Object.keys(s).length)&&e.add(n)}for(const n of Object.keys(t))e.add(n);return Array.from(e)}getRelatedStyles(t){return this._consumables.get(t)||[]}setNormalizer(t,e){this._normalizers.set(t,e)}setExtractor(t,e){this._extractors.set(t,e)}setReducer(t,e){this._reducers.set(t,e)}setStyleRelation(t,e){this._mapStyleNames(t,e);for(const n of e)this._mapStyleNames(n,[t])}_mapStyleNames(t,e){this._consumables.has(t)||this._consumables.set(t,[]),this._consumables.get(t).push(...e)}}function pse(i){let t=null,e=0,n=0,s=null;const r=new Map;if(i==="")return r;i.charAt(i.length-1)!=";"&&(i=i+";");for(let o=0;o<i.length;o++){const a=i.charAt(o);if(t===null)switch(a){case":":s||(s=i.substr(e,o-e),n=o+1);break;case'"':case"'":t=a;break;case";":{const l=i.substr(n,o-n);s&&r.set(s.trim(),l.trim()),s=null,e=o+1;break}}else a===t&&(t=null)}return r}function Ty(i){return i.replace("-",".")}function U0(i,t,e){let n=e;Ot(e)&&(n=xE({},hu(i,t),e)),u4(i,t,n)}class W0{constructor(){b(this,"_set",new Set)}get isEmpty(){return this._set.size==0}get size(){return this._set.size}has(t){return this._set.has(t)}keys(){return Array.from(this._set.keys())}setTo(t){this.clear();for(const e of t.split(/\s+/))e&&this._set.add(e);return this}set(t){for(const e of Bt(t))e&&this._set.add(e)}remove(t){for(const e of Bt(t))this._set.delete(e)}clear(){this._set.clear()}toString(){return Array.from(this._set).join(" ")}isSimilar(t){if(this.size!==t.size)return!1;for(const e of this.keys())if(!t.has(e))return!1;return!0}_clone(){const t=new this.constructor;return t._set=new Set(this._set),t}_getTokensMatch(t){const e=[];if(t===!0){for(const n of this._set.keys())e.push(n);return e}if(typeof t=="string"){for(const n of t.split(/\s+/))if(this._set.has(n))e.push(n);else return;return e}for(const n of this._set.keys())n.match(t)&&e.push(n);return e.length?e:void 0}_getConsumables(t){return t?[t]:this.keys()}_canMergeFrom(){return!0}_mergeFrom(t){for(const e of t._set.keys())this._set.has(e)||this._set.add(e)}_isMatching(t){for(const e of t._set.keys())if(!this._set.has(e))return!1;return!0}}let mo=class L4 extends Nl{constructor(e,n,s,r){super(e);b(this,"name");b(this,"_unsafeAttributesToRender",[]);b(this,"_attrs");b(this,"_children");b(this,"_customProperties",new Map);this.name=n,this._attrs=this._parseAttributes(s),this._children=[],r&&this._insertChild(0,r)}get _classes(){return this._attrs.get("class")}get _styles(){return this._attrs.get("style")}get childCount(){return this._children.length}get isEmpty(){return this._children.length===0}getChild(e){return this._children[e]}getChildIndex(e){return this._children.indexOf(e)}getChildren(){return this._children[Symbol.iterator]()}*getAttributeKeys(){this._classes&&(yield"class"),this._styles&&(yield"style");for(const e of this._attrs.keys())e!="class"&&e!="style"&&(yield e)}*getAttributes(){for(const[e,n]of this._attrs.entries())yield[e,String(n)]}getAttribute(e){return this._attrs.has(e)?String(this._attrs.get(e)):void 0}hasAttribute(e,n){return this._attrs.has(e)?n!==void 0?_c(this.name,e)||Pd(this.name,e)?this._attrs.get(e).has(n):this._attrs.get(e)===n:!0:!1}isSimilar(e){if(!(e instanceof L4))return!1;if(this===e)return!0;if(this.name!=e.name||this._attrs.size!==e._attrs.size)return!1;for(const[n,s]of this._attrs){const r=e._attrs.get(n);if(r===void 0)return!1;if(typeof s=="string"||typeof r=="string"){if(r!==s)return!1}else if(!s.isSimilar(r))return!1}return!0}hasClass(...e){for(const n of e)if(!this._classes||!this._classes.has(n))return!1;return!0}getClassNames(){const e=this._classes?this._classes.keys():[],n=e[Symbol.iterator]();return Object.assign(e,{next:n.next.bind(n)})}getStyle(e){return this._styles&&this._styles.getAsString(e)}getNormalizedStyle(e){return this._styles&&this._styles.getNormalized(e)}getStyleNames(e){return this._styles?this._styles.getStyleNames(e):[]}hasStyle(...e){for(const n of e)if(!this._styles||!this._styles.has(n))return!1;return!0}findAncestor(...e){const n=new ns(...e);let s=this.parent;for(;s&&!s.is("documentFragment");){if(n.match(s))return s;s=s.parent}return null}getCustomProperty(e){return this._customProperties.get(e)}*getCustomProperties(){yield*this._customProperties.entries()}getIdentity(){const e=this._classes?this._classes.keys().sort().join(","):"",n=this._styles&&String(this._styles),s=Array.from(this._attrs).filter(([r])=>r!="style"&&r!="class").map(r=>`${r[0]}="${r[1]}"`).sort().join(" ");return this.name+(e==""?"":` class="${e}"`)+(n?` style="${n}"`:"")+(s==""?"":` ${s}`)}shouldRenderUnsafeAttribute(e){return this._unsafeAttributesToRender.includes(e)}_clone(e=!1){const n=[];if(e)for(const r of this.getChildren())n.push(r._clone(e));const s=new this.constructor(this.document,this.name,this._attrs,n);return s._customProperties=new Map(this._customProperties),s.getFillerOffset=this.getFillerOffset,s._unsafeAttributesToRender=this._unsafeAttributesToRender,s}_appendChild(e){return this._insertChild(this.childCount,e)}_insertChild(e,n){this._fireChange("children",this,{index:e});let s=0;const r=bse(this.document,n);for(const o of r)o.parent!==null&&o._remove(),o.parent=this,o.document=this.document,this._children.splice(e,0,o),e++,s++;return s}_removeChildren(e,n=1){this._fireChange("children",this,{index:e});for(let s=e;s<e+n;s++)this._children[s].parent=null;return this._children.splice(e,n)}_setAttribute(e,n,s=!0){if(this._fireChange("attributes",this),_c(this.name,e)||Pd(this.name,e)){let r=this._attrs.get(e);r||(r=_c(this.name,e)?new ch(this.document.stylesProcessor):new W0,this._attrs.set(e,r)),s?r.setTo(String(n)):_c(this.name,e)?Array.isArray(n)?r.set(n[0],n[1]):r.set(n):r.set(typeof n=="string"?n.split(/\s+/):n)}else this._attrs.set(e,String(n))}_removeAttribute(e,n){if(this._fireChange("attributes",this),n!==void 0&&(_c(this.name,e)||Pd(this.name,e))){const s=this._attrs.get(e);return s?(Pd(this.name,e)&&typeof n=="string"&&(n=n.split(/\s+/)),s.remove(n),s.isEmpty?this._attrs.delete(e):!1):!1}return this._attrs.delete(e)}_addClass(e){this._setAttribute("class",e,!1)}_removeClass(e){this._removeAttribute("class",e)}_setStyle(e,n){typeof e!="string"?this._setAttribute("style",e,!1):this._setAttribute("style",[e,n],!1)}_removeStyle(e){this._removeAttribute("style",e)}_collectAttributesMatch(e,n,s){for(const[r,o,a]of e){let l=!1,u=!1;for(const[h,f]of this._attrs)if(!(s&&s.includes(h)||!Ep(r,h)))if(l=!0,typeof f=="string"){if(Ep(o,f))n.push([h]),u=!0;else if(!(r instanceof RegExp))return!1}else{const g=f._getTokensMatch(o,a||!0);if(g){u=!0;for(const p of g)n.push([h,p])}else if(!(r instanceof RegExp))return!1}if(!l||!u)return!1}return!0}_getConsumables(e,n){const s=[];if(e){const r=this._attrs.get(e);if(r!==void 0)if(typeof r=="string")s.push([e]);else for(const o of r._getConsumables(n))s.push([e,o])}else for(const[r,o]of this._attrs)if(typeof o=="string")s.push([r]);else for(const a of o._getConsumables())s.push([r,a]);return{name:!e,attributes:s}}_canMergeAttributesFrom(e){if(this.name!=e.name)return!1;for(const[n,s]of e._attrs){const r=this._attrs.get(n);if(r!==void 0){if(typeof r=="string"||typeof s=="string"){if(r!==s)return!1}else if(!r._canMergeFrom(s))return!1}}return!0}_mergeAttributesFrom(e){this._fireChange("attributes",this);for(const[n,s]of e._attrs){const r=this._attrs.get(n);r===void 0||typeof r=="string"||typeof s=="string"?this._setAttribute(n,s):r._mergeFrom(s)}}_canSubtractAttributesOf(e){if(this.name!=e.name)return!1;for(const[n,s]of e._attrs){const r=this._attrs.get(n);if(r===void 0)return!1;if(typeof r=="string"||typeof s=="string"){if(r!==s)return!1}else if(!r._isMatching(s))return!1}return!0}_subtractAttributesOf(e){this._fireChange("attributes",this);for(const[n,s]of e._attrs){const r=this._attrs.get(n);typeof r=="string"||typeof s=="string"?this._attrs.delete(n):(r.remove(s.keys()),r.isEmpty&&this._attrs.delete(n))}}_setCustomProperty(e,n){this._customProperties.set(e,n)}_removeCustomProperty(e){return this._customProperties.delete(e)}_parseAttributes(e){const n=er(e);for(const[s,r]of n)if(r===null)n.delete(s);else if(_c(this.name,s)){const o=r instanceof ch?r._clone():new ch(this.document.stylesProcessor).setTo(String(r));n.set(s,o)}else if(Pd(this.name,s)){const o=r instanceof W0?r._clone():new W0().setTo(String(r));n.set(s,o)}else typeof r!="string"&&n.set(s,String(r));return n}};mo.prototype.is=function(i,t){return t?t===this.name&&(i==="element"||i==="view:element"):i==="element"||i==="view:element"||i==="node"||i==="view:node"};function bse(i,t){if(typeof t=="string")return[new zn(i,t)];ts(t)||(t=[t]);const e=[];for(const n of t)typeof n=="string"?e.push(new zn(i,n)):n instanceof Qr?e.push(new zn(i,n.data)):e.push(n);return e}function Pd(i,t){return t=="class"||i=="a"&&t=="rel"}function _c(i,t){return t=="style"}class Rh extends mo{constructor(t,e,n,s){super(t,e,n,s),this.getFillerOffset=wse}}Rh.prototype.is=function(i,t){return t?t===this.name&&(i==="containerElement"||i==="view:containerElement"||i==="element"||i==="view:element"):i==="containerElement"||i==="view:containerElement"||i==="element"||i==="view:element"||i==="node"||i==="view:node"};function wse(){const i=[...this.getChildren()],t=i[this.childCount-1];if(t&&t.is("element","br"))return this.childCount;for(const e of i)if(!e.is("uiElement"))return null;return this.childCount}class Rb extends yt(Rh){constructor(t,e,n,s){super(t,e,n,s),this.set("isReadOnly",!1),this.set("isFocused",!1),this.set("placeholder",void 0),this.bind("isReadOnly").to(t),this.bind("isFocused").to(t,"isFocused",r=>r&&t.selection.editableElement==this),this.listenTo(t.selection,"change",()=>{this.isFocused=t.isFocused&&t.selection.editableElement==this})}destroy(){this.stopListening()}}Rb.prototype.is=function(i,t){return t?t===this.name&&(i==="editableElement"||i==="view:editableElement"||i==="containerElement"||i==="view:containerElement"||i==="element"||i==="view:element"):i==="editableElement"||i==="view:editableElement"||i==="containerElement"||i==="view:containerElement"||i==="element"||i==="view:element"||i==="node"||i==="view:node"};const I2=Symbol("rootName");class V4 extends Rb{constructor(t,e){super(t,e),this.rootName="main"}get rootName(){return this.getCustomProperty(I2)}set rootName(t){this._setCustomProperty(I2,t)}set _name(t){this.name=t}}V4.prototype.is=function(i,t){return t?t===this.name&&(i==="rootElement"||i==="view:rootElement"||i==="editableElement"||i==="view:editableElement"||i==="containerElement"||i==="view:containerElement"||i==="element"||i==="view:element"):i==="rootElement"||i==="view:rootElement"||i==="editableElement"||i==="view:editableElement"||i==="containerElement"||i==="view:containerElement"||i==="element"||i==="view:element"||i==="node"||i==="view:node"};let rl=class{constructor(t={}){b(this,"direction");b(this,"boundaries");b(this,"singleCharacters");b(this,"shallow");b(this,"ignoreElementEnd");b(this,"_position");b(this,"_boundaryStartParent");b(this,"_boundaryEndParent");if(!t.boundaries&&!t.startPosition)throw new D("view-tree-walker-no-start-position",null);if(t.direction&&t.direction!="forward"&&t.direction!="backward")throw new D("view-tree-walker-unknown-direction",t.startPosition,{direction:t.direction});this.boundaries=t.boundaries||null,t.startPosition?this._position=Ee._createAt(t.startPosition):this._position=Ee._createAt(t.boundaries[t.direction=="backward"?"end":"start"]),this.direction=t.direction||"forward",this.singleCharacters=!!t.singleCharacters,this.shallow=!!t.shallow,this.ignoreElementEnd=!!t.ignoreElementEnd,this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null,this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null}[Symbol.iterator](){return this}get position(){return this._position}skip(t){let e,n;do n=this.position,e=this.next();while(!e.done&&t(e.value));e.done||(this._position=n)}jumpTo(t){this._boundaryStartParent&&t.isBefore(this.boundaries.start)?t=this.boundaries.start:this._boundaryEndParent&&t.isAfter(this.boundaries.end)&&(t=this.boundaries.end),this._position=t.clone()}next(){return this.direction=="forward"?this._next():this._previous()}_next(){let t=this.position.clone();const e=this.position,n=t.parent;if(n.parent===null&&t.offset===n.childCount)return{done:!0,value:void 0};if(n===this._boundaryEndParent&&t.offset==this.boundaries.end.offset)return{done:!0,value:void 0};let s;if(n&&n.is("view:$text")){if(t.isAtEnd)return this._position=Ee._createAfter(n),this._next();s=n.data[t.offset]}else s=n.getChild(t.offset);if(typeof s=="string"){let r;this.singleCharacters?r=1:r=(n===this._boundaryEndParent?this.boundaries.end.offset:n.data.length)-t.offset;const o=new Qr(n,t.offset,r);return t.offset+=r,this._position=t,this._formatReturnValue("text",o,e,t,r)}if(s&&s.is("view:element")){if(!this.shallow)t=new Ee(s,0);else{if(this.boundaries&&this.boundaries.end.isBefore(t))return{done:!0,value:void 0};t.offset++}return this._position=t,this._formatReturnValue("elementStart",s,e,t,1)}if(s&&s.is("view:$text")){if(this.singleCharacters)return t=new Ee(s,0),this._position=t,this._next();let r=s.data.length,o;return s==this._boundaryEndParent?(r=this.boundaries.end.offset,o=new Qr(s,0,r),t=Ee._createAfter(o)):(o=new Qr(s,0,s.data.length),t.offset++),this._position=t,this._formatReturnValue("text",o,e,t,r)}return t=Ee._createAfter(n),this._position=t,this.ignoreElementEnd?this._next():this._formatReturnValue("elementEnd",n,e,t)}_previous(){let t=this.position.clone();const e=this.position,n=t.parent;if(n.parent===null&&t.offset===0)return{done:!0,value:void 0};if(n==this._boundaryStartParent&&t.offset==this.boundaries.start.offset)return{done:!0,value:void 0};let s;if(n.is("view:$text")){if(t.isAtStart)return this._position=Ee._createBefore(n),this._previous();s=n.data[t.offset-1]}else s=n.getChild(t.offset-1);if(typeof s=="string"){let r;if(this.singleCharacters)r=1;else{const a=n===this._boundaryStartParent?this.boundaries.start.offset:0;r=t.offset-a}t.offset-=r;const o=new Qr(n,t.offset,r);return this._position=t,this._formatReturnValue("text",o,e,t,r)}if(s&&s.is("view:element"))return this.shallow?(t.offset--,this._position=t,this._formatReturnValue("elementStart",s,e,t,1)):(t=new Ee(s,s.childCount),this._position=t,this.ignoreElementEnd?this._previous():this._formatReturnValue("elementEnd",s,e,t));if(s&&s.is("view:$text")){if(this.singleCharacters)return t=new Ee(s,s.data.length),this._position=t,this._previous();let r=s.data.length,o;if(s==this._boundaryStartParent){const a=this.boundaries.start.offset;o=new Qr(s,a,s.data.length-a),r=o.data.length,t=Ee._createBefore(o)}else o=new Qr(s,0,s.data.length),t.offset--;return this._position=t,this._formatReturnValue("text",o,e,t,r)}return t=Ee._createBefore(n),this._position=t,this._formatReturnValue("elementStart",n,e,t,1)}_formatReturnValue(t,e,n,s,r){return e.is("view:$textProxy")&&(e.offsetInText+e.data.length==e.textNode.data.length&&(this.direction=="forward"&&!(this.boundaries&&this.boundaries.end.isEqual(this.position))?(s=Ee._createAfter(e.textNode),this._position=s):n=Ee._createAfter(e.textNode)),e.offsetInText===0&&(this.direction=="backward"&&!(this.boundaries&&this.boundaries.start.isEqual(this.position))?(s=Ee._createBefore(e.textNode),this._position=s):n=Ee._createBefore(e.textNode))),{done:!1,value:{type:t,item:e,previousPosition:n,nextPosition:s,length:r}}}},Ee=class Zr extends Ol{constructor(e,n){super();b(this,"parent");b(this,"offset");this.parent=e,this.offset=n}get nodeAfter(){return this.parent.is("$text")?null:this.parent.getChild(this.offset)||null}get nodeBefore(){return this.parent.is("$text")?null:this.parent.getChild(this.offset-1)||null}get isAtStart(){return this.offset===0}get isAtEnd(){const e=this.parent.is("$text")?this.parent.data.length:this.parent.childCount;return this.offset===e}get root(){return this.parent.root}get editableElement(){let e=this.parent;for(;!(e instanceof Rb);)if(e.parent)e=e.parent;else return null;return e}getShiftedBy(e){const n=Zr._createAt(this),s=n.offset+e;return n.offset=s<0?0:s,n}getLastMatchingPosition(e,n={}){n.startPosition=this;const s=new rl(n);return s.skip(e),s.position}getAncestors(){return this.parent.is("documentFragment")?[this.parent]:this.parent.getAncestors({includeSelf:!0})}getCommonAncestor(e){const n=this.getAncestors(),s=e.getAncestors();let r=0;for(;n[r]==s[r]&&n[r];)r++;return r===0?null:n[r-1]}isEqual(e){return this.parent==e.parent&&this.offset==e.offset}isBefore(e){return this.compareWith(e)=="before"}isAfter(e){return this.compareWith(e)=="after"}compareWith(e){if(this.root!==e.root)return"different";if(this.isEqual(e))return"same";const n=this.parent.is("node")?this.parent.getPath():[],s=e.parent.is("node")?e.parent.getPath():[];n.push(this.offset),s.push(e.offset);const r=Jn(n,s);switch(r){case"prefix":return"before";case"extension":return"after";default:return n[r]<s[r]?"before":"after"}}getWalker(e={}){return e.startPosition=this,new rl(e)}clone(){return new Zr(this.parent,this.offset)}static _createAt(e,n){if(e instanceof Zr)return new this(e.parent,e.offset);{const s=e;if(n=="end")n=s.is("$text")?s.data.length:s.childCount;else{if(n=="before")return this._createBefore(s);if(n=="after")return this._createAfter(s);if(n!==0&&!n)throw new D("view-createpositionat-offset-required",s)}return new Zr(s,n)}}static _createAfter(e){if(e.is("$textProxy"))return new Zr(e.textNode,e.offsetInText+e.data.length);if(!e.parent)throw new D("view-position-after-root",e,{root:e});return new Zr(e.parent,e.index+1)}static _createBefore(e){if(e.is("$textProxy"))return new Zr(e.textNode,e.offsetInText);if(!e.parent)throw new D("view-position-before-root",e,{root:e});return new Zr(e.parent,e.index)}};Ee.prototype.is=function(i){return i==="position"||i==="view:position"};let ot=class ta extends Ol{constructor(e,n=null){super();b(this,"start");b(this,"end");this.start=e.clone(),this.end=n?n.clone():e.clone()}*[Symbol.iterator](){yield*new rl({boundaries:this,ignoreElementEnd:!0})}get isCollapsed(){return this.start.isEqual(this.end)}get isFlat(){return this.start.parent===this.end.parent}get root(){return this.start.root}getEnlarged(){let e=this.start.getLastMatchingPosition(Ym,{direction:"backward"}),n=this.end.getLastMatchingPosition(Ym);return e.parent.is("$text")&&e.isAtStart&&(e=Ee._createBefore(e.parent)),n.parent.is("$text")&&n.isAtEnd&&(n=Ee._createAfter(n.parent)),new ta(e,n)}getTrimmed(){let e=this.start.getLastMatchingPosition(Ym);if(e.isAfter(this.end)||e.isEqual(this.end))return new ta(e,e);let n=this.end.getLastMatchingPosition(Ym,{direction:"backward"});const s=e.nodeAfter,r=n.nodeBefore;return s&&s.is("$text")&&(e=new Ee(s,0)),r&&r.is("$text")&&(n=new Ee(r,r.data.length)),new ta(e,n)}isEqual(e){return this==e||this.start.isEqual(e.start)&&this.end.isEqual(e.end)}containsPosition(e){return e.isAfter(this.start)&&e.isBefore(this.end)}containsRange(e,n=!1){e.isCollapsed&&(n=!1);const s=this.containsPosition(e.start)||n&&this.start.isEqual(e.start),r=this.containsPosition(e.end)||n&&this.end.isEqual(e.end);return s&&r}getDifference(e){const n=[];return this.isIntersecting(e)?(this.containsPosition(e.start)&&n.push(new ta(this.start,e.start)),this.containsPosition(e.end)&&n.push(new ta(e.end,this.end))):n.push(this.clone()),n}getIntersection(e){if(this.isIntersecting(e)){let n=this.start,s=this.end;return this.containsPosition(e.start)&&(n=e.start),this.containsPosition(e.end)&&(s=e.end),new ta(n,s)}return null}getWalker(e={}){return e.boundaries=this,new rl(e)}getCommonAncestor(){return this.start.getCommonAncestor(this.end)}getContainedElement(){if(this.isCollapsed)return null;let e=this.start.nodeAfter,n=this.end.nodeBefore;return this.start.parent.is("$text")&&this.start.isAtEnd&&this.start.parent.nextSibling&&(e=this.start.parent.nextSibling),this.end.parent.is("$text")&&this.end.isAtStart&&this.end.parent.previousSibling&&(n=this.end.parent.previousSibling),e&&e.is("element")&&e===n?e:null}clone(){return new ta(this.start,this.end)}*getItems(e={}){e.boundaries=this,e.ignoreElementEnd=!0;const n=new rl(e);for(const s of n)yield s.item}*getPositions(e={}){e.boundaries=this;const n=new rl(e);yield n.position;for(const s of n)yield s.nextPosition}isIntersecting(e){return this.start.isBefore(e.end)&&this.end.isAfter(e.start)}static _createFromParentsAndOffsets(e,n,s,r){return new this(new Ee(e,n),new Ee(s,r))}static _createFromPositionAndShift(e,n){const s=e,r=e.getShiftedBy(n);return n>0?new this(s,r):new this(r,s)}static _createIn(e){return this._createFromParentsAndOffsets(e,0,e,e.childCount)}static _createOn(e){const n=e.is("$textProxy")?e.offsetSize:1;return this._createFromPositionAndShift(Ee._createBefore(e),n)}};ot.prototype.is=function(i){return i==="range"||i==="view:range"};function Ym(i){return!!(i.item.is("attributeElement")||i.item.is("uiElement"))}let oo=class D4 extends Ct(Ol){constructor(...e){super();b(this,"_ranges");b(this,"_lastRangeBackward");b(this,"_isFake");b(this,"_fakeSelectionLabel");this._ranges=[],this._lastRangeBackward=!1,this._isFake=!1,this._fakeSelectionLabel="",e.length&&this.setTo(...e)}get isFake(){return this._isFake}get fakeSelectionLabel(){return this._fakeSelectionLabel}get anchor(){if(!this._ranges.length)return null;const e=this._ranges[this._ranges.length-1];return(this._lastRangeBackward?e.end:e.start).clone()}get focus(){if(!this._ranges.length)return null;const e=this._ranges[this._ranges.length-1];return(this._lastRangeBackward?e.start:e.end).clone()}get isCollapsed(){return this.rangeCount===1&&this._ranges[0].isCollapsed}get rangeCount(){return this._ranges.length}get isBackward(){return!this.isCollapsed&&this._lastRangeBackward}get editableElement(){return this.anchor?this.anchor.editableElement:null}*getRanges(){for(const e of this._ranges)yield e.clone()}getFirstRange(){let e=null;for(const n of this._ranges)(!e||n.start.isBefore(e.start))&&(e=n);return e?e.clone():null}getLastRange(){let e=null;for(const n of this._ranges)(!e||n.end.isAfter(e.end))&&(e=n);return e?e.clone():null}getFirstPosition(){const e=this.getFirstRange();return e?e.start.clone():null}getLastPosition(){const e=this.getLastRange();return e?e.end.clone():null}isEqual(e){if(this.isFake!=e.isFake||this.isFake&&this.fakeSelectionLabel!=e.fakeSelectionLabel||this.rangeCount!=e.rangeCount)return!1;if(this.rangeCount===0)return!0;if(!this.anchor.isEqual(e.anchor)||!this.focus.isEqual(e.focus))return!1;for(const n of this._ranges){let s=!1;for(const r of e._ranges)if(n.isEqual(r)){s=!0;break}if(!s)return!1}return!0}isSimilar(e){if(this.isBackward!=e.isBackward)return!1;const n=Cy(this.getRanges()),s=Cy(e.getRanges());if(n!=s)return!1;if(n==0)return!0;for(let r of this.getRanges()){r=r.getTrimmed();let o=!1;for(let a of e.getRanges())if(a=a.getTrimmed(),r.start.isEqual(a.start)&&r.end.isEqual(a.end)){o=!0;break}if(!o)return!1}return!0}getSelectedElement(){return this.rangeCount!==1?null:this.getFirstRange().getContainedElement()}setTo(...e){let[n,s,r]=e;if(typeof s=="object"&&(r=s,s=void 0),n===null)this._setRanges([]),this._setFakeOptions(r);else if(n instanceof D4||n instanceof ME)this._setRanges(n.getRanges(),n.isBackward),this._setFakeOptions({fake:n.isFake,label:n.fakeSelectionLabel});else if(n instanceof ot)this._setRanges([n],r&&r.backward),this._setFakeOptions(r);else if(n instanceof Ee)this._setRanges([new ot(n)]),this._setFakeOptions(r);else if(n instanceof Nl){const o=!!r&&!!r.backward;let a;if(s===void 0)throw new D("view-selection-setto-required-second-parameter",this);s=="in"?a=ot._createIn(n):s=="on"?a=ot._createOn(n):a=new ot(Ee._createAt(n,s)),this._setRanges([a],o),this._setFakeOptions(r)}else if(ts(n))this._setRanges(n,r&&r.backward),this._setFakeOptions(r);else throw new D("view-selection-setto-not-selectable",this);this.fire("change")}setFocus(e,n){if(this.anchor===null)throw new D("view-selection-setfocus-no-ranges",this);const s=Ee._createAt(e,n);if(s.compareWith(this.focus)=="same")return;const r=this.anchor;this._ranges.pop(),s.compareWith(r)=="before"?this._addRange(new ot(s,r),!0):this._addRange(new ot(r,s)),this.fire("change")}_setRanges(e,n=!1){e=Array.from(e),this._ranges=[];for(const s of e)this._addRange(s);this._lastRangeBackward=!!n}_setFakeOptions(e={}){this._isFake=!!e.fake,this._fakeSelectionLabel=e.fake&&e.label||""}_addRange(e,n=!1){if(!(e instanceof ot))throw new D("view-selection-add-range-not-range",this);this._pushRange(e),this._lastRangeBackward=!!n}_pushRange(e){for(const n of this._ranges)if(e.isIntersecting(n))throw new D("view-selection-range-intersects",this,{addedRange:e,intersectingRange:n});this._ranges.push(new ot(e.start,e.end))}};oo.prototype.is=function(i){return i==="selection"||i==="view:selection"};let ME=class extends Ct(Ol){constructor(...e){super();b(this,"_selection");this._selection=new oo,this._selection.delegate("change").to(this),e.length&&this._selection.setTo(...e)}get isFake(){return this._selection.isFake}get fakeSelectionLabel(){return this._selection.fakeSelectionLabel}get anchor(){return this._selection.anchor}get focus(){return this._selection.focus}get isCollapsed(){return this._selection.isCollapsed}get rangeCount(){return this._selection.rangeCount}get isBackward(){return this._selection.isBackward}get editableElement(){return this._selection.editableElement}get _ranges(){return this._selection._ranges}*getRanges(){yield*this._selection.getRanges()}getFirstRange(){return this._selection.getFirstRange()}getLastRange(){return this._selection.getLastRange()}getFirstPosition(){return this._selection.getFirstPosition()}getLastPosition(){return this._selection.getLastPosition()}getSelectedElement(){return this._selection.getSelectedElement()}isEqual(e){return this._selection.isEqual(e)}isSimilar(e){return this._selection.isSimilar(e)}_setTo(...e){this._selection.setTo(...e)}_setFocus(e,n){this._selection.setFocus(e,n)}};ME.prototype.is=function(i){return i==="selection"||i=="documentSelection"||i=="view:selection"||i=="view:documentSelection"};class Ou extends ho{constructor(e,n,s){super(e,n);b(this,"startRange");b(this,"_eventPhase");b(this,"_currentTarget");this.startRange=s,this._eventPhase="none",this._currentTarget=null}get eventPhase(){return this._eventPhase}get currentTarget(){return this._currentTarget}}const q0=Symbol("bubbling contexts");function Sy(i){class t extends i{fire(n,...s){try{const r=n instanceof ho?n:new ho(this,n),o=G0(this);if(!o.size)return;if(Id(r,"capturing",this),Ec(o,"$capture",r,...s))return r.return;const a=r.startRange||this.selection.getFirstRange(),l=a?a.getContainedElement():null,u=l?!!B4(o,l):!1;let h=l||vse(a);if(Id(r,"atTarget",h),!u){if(Ec(o,"$text",r,...s))return r.return;Id(r,"bubbling",h)}for(;h;){if(h.is("rootElement")){if(Ec(o,"$root",r,...s))return r.return}else if(h.is("element")&&Ec(o,h.name,r,...s))return r.return;if(Ec(o,h,r,...s))return r.return;h=h.parent,Id(r,"bubbling",h)}return Id(r,"bubbling",this),Ec(o,"$document",r,...s),r.return}catch(r){/* istanbul ignore next -- @preserve */D.rethrowUnexpectedError(r,this)}}_addEventListener(n,s,r){const o=Bt(r.context||"$document"),a=G0(this);for(const l of o){let u=a.get(l);u||(u=new(Ct()),a.set(l,u)),this.listenTo(u,n,s,r)}}_removeEventListener(n,s){const r=G0(this);for(const o of r.values())this.stopListening(o,n,s)}}return t}{const i=Sy(Object);["fire","_addEventListener","_removeEventListener"].forEach(t=>{Sy[t]=i.prototype[t]})}function Id(i,t,e){i instanceof Ou&&(i._eventPhase=t,i._currentTarget=e)}function Ec(i,t,e,...n){const s=typeof t=="string"?i.get(t):B4(i,t);return s?(s.fire(e,...n),e.stop.called):!1}function B4(i,t){for(const[e,n]of i)if(typeof e=="function"&&e(t))return n;return null}function G0(i){return i[q0]||(i[q0]=new Map),i[q0]}function vse(i){if(!i)return null;const t=i.start.parent,e=i.end.parent,n=t.getPath(),s=e.getPath();return n.length>s.length?t:e}let Ob=class extends Sy(yt()){constructor(e){super();b(this,"selection");b(this,"roots");b(this,"stylesProcessor");b(this,"_postFixers",new Set);this.selection=new ME,this.roots=new Hn({idProperty:"rootName"}),this.stylesProcessor=e,this.set("isReadOnly",!1),this.set("isFocused",!1),this.set("isSelecting",!1),this.set("isComposing",!1)}getRoot(e="main"){return this.roots.get(e)}registerPostFixer(e){this._postFixers.add(e)}destroy(){this.roots.forEach(e=>e.destroy()),this.stopListening()}_callPostFixers(e){let n=!1;do for(const s of this._postFixers)if(n=s(e),n)break;while(n)}};const R2=10;class dl extends mo{constructor(e,n,s,r){super(e,n,s,r);b(this,"_priority",R2);b(this,"_id",null);b(this,"_clonesGroup",null);this.getFillerOffset=yse}get priority(){return this._priority}get id(){return this._id}getElementsWithSameId(){if(this.id===null)throw new D("attribute-element-get-elements-with-same-id-no-id",this);return new Set(this._clonesGroup)}isSimilar(e){return this.id!==null||e.id!==null?this.id===e.id:super.isSimilar(e)&&this.priority==e.priority}_clone(e=!1){const n=super._clone(e);return n._priority=this._priority,n._id=this._id,n}_canMergeAttributesFrom(e){return this.id!==null||e.id!==null||this.priority!==e.priority?!1:super._canMergeAttributesFrom(e)}_canSubtractAttributesOf(e){return this.id!==null||e.id!==null||this.priority!==e.priority?!1:super._canSubtractAttributesOf(e)}}b(dl,"DEFAULT_PRIORITY",R2);dl.prototype.is=function(i,t){return t?t===this.name&&(i==="attributeElement"||i==="view:attributeElement"||i==="element"||i==="view:element"):i==="attributeElement"||i==="view:attributeElement"||i==="element"||i==="view:element"||i==="node"||i==="view:node"};function yse(){if(K0(this))return null;let i=this.parent;for(;i&&i.is("attributeElement");){if(K0(i)>1)return null;i=i.parent}return!i||K0(i)>1?null:this.childCount}function K0(i){return Array.from(i.getChildren()).filter(t=>!t.is("uiElement")).length}class LE extends mo{constructor(t,e,n,s){super(t,e,n,s),this.getFillerOffset=_se}_insertChild(t,e){if(e&&(e instanceof Nl||Array.from(e).length>0))throw new D("view-emptyelement-cannot-add",[this,e]);return 0}}LE.prototype.is=function(i,t){return t?t===this.name&&(i==="emptyElement"||i==="view:emptyElement"||i==="element"||i==="view:element"):i==="emptyElement"||i==="view:emptyElement"||i==="element"||i==="view:element"||i==="node"||i==="view:node"};function _se(){return null}class Nb extends mo{constructor(t,e,n,s){super(t,e,n,s),this.getFillerOffset=Cse}_insertChild(t,e){if(e&&(e instanceof Nl||Array.from(e).length>0))throw new D("view-uielement-cannot-add",[this,e]);return 0}render(t,e){return this.toDomElement(t)}toDomElement(t){const e=t.createElement(this.name);for(const n of this.getAttributeKeys())e.setAttribute(n,this.getAttribute(n));return e}}Nb.prototype.is=function(i,t){return t?t===this.name&&(i==="uiElement"||i==="view:uiElement"||i==="element"||i==="view:element"):i==="uiElement"||i==="view:uiElement"||i==="element"||i==="view:element"||i==="node"||i==="view:node"};function Ese(i){i.document.on("arrowKey",(t,e)=>xse(t,e,i.domConverter),{priority:"low"})}function Cse(){return null}function xse(i,t,e){if(t.keyCode==nt.arrowright){const n=t.domTarget.ownerDocument.defaultView.getSelection(),s=n.rangeCount==1&&n.getRangeAt(0).collapsed;if(s||t.shiftKey){const r=n.focusNode,o=n.focusOffset,a=e.domPositionToView(r,o);if(a===null)return;let l=!1;const u=a.getLastMatchingPosition(h=>(h.item.is("uiElement")&&(l=!0),!!(h.item.is("uiElement")||h.item.is("attributeElement"))));if(l){const h=e.viewPositionToDom(u);s?n.collapse(h.parent,h.offset):n.extend(h.parent,h.offset)}}}}class VE extends mo{constructor(t,e,n,s){super(t,e,n,s),this.getFillerOffset=kse}_insertChild(t,e){if(e&&(e instanceof Nl||Array.from(e).length>0))throw new D("view-rawelement-cannot-add",[this,e]);return 0}render(t,e){}}VE.prototype.is=function(i,t){return t?t===this.name&&(i==="rawElement"||i==="view:rawElement"||i==="element"||i==="view:element"):i==="rawElement"||i==="view:rawElement"||i===this.name||i==="view:"+this.name||i==="element"||i==="view:element"||i==="node"||i==="view:node"};function kse(){return null}let hl=class extends Ct(Ol){constructor(e,n){super();b(this,"document");b(this,"_children",[]);b(this,"_customProperties",new Map);this.document=e,n&&this._insertChild(0,n)}[Symbol.iterator](){return this._children[Symbol.iterator]()}get childCount(){return this._children.length}get isEmpty(){return this.childCount===0}get root(){return this}get parent(){return null}get name(){}get getFillerOffset(){}getCustomProperty(e){return this._customProperties.get(e)}*getCustomProperties(){yield*this._customProperties.entries()}_appendChild(e){return this._insertChild(this.childCount,e)}getChild(e){return this._children[e]}getChildIndex(e){return this._children.indexOf(e)}getChildren(){return this._children[Symbol.iterator]()}_insertChild(e,n){this._fireChange("children",this,{index:e});let s=0;const r=Tse(this.document,n);for(const o of r)o.parent!==null&&o._remove(),o.parent=this,this._children.splice(e,0,o),e++,s++;return s}_removeChildren(e,n=1){this._fireChange("children",this,{index:e});for(let s=e;s<e+n;s++)this._children[s].parent=null;return this._children.splice(e,n)}_fireChange(e,n,s){this.fire(`change:${e}`,n,s)}_setCustomProperty(e,n){this._customProperties.set(e,n)}_removeCustomProperty(e){return this._customProperties.delete(e)}};hl.prototype.is=function(i){return i==="documentFragment"||i==="view:documentFragment"};function Tse(i,t){return typeof t=="string"?[new zn(i,t)]:(ts(t)||(t=[t]),Array.from(t).map(e=>typeof e=="string"?new zn(i,e):e instanceof Qr?new zn(i,e.data):e))}class F4{constructor(t){b(this,"document");b(this,"_cloneGroups",new Map);b(this,"_slotFactory",null);this.document=t}setSelection(...t){this.document.selection._setTo(...t)}setSelectionFocus(t,e){this.document.selection._setFocus(t,e)}createDocumentFragment(t){return new hl(this.document,t)}createText(t){return new zn(this.document,t)}createAttributeElement(t,e,n={}){const s=new dl(this.document,t,e);return typeof n.priority=="number"&&(s._priority=n.priority),n.id&&(s._id=n.id),n.renderUnsafeAttributes&&s._unsafeAttributesToRender.push(...n.renderUnsafeAttributes),s}createContainerElement(t,e,n={},s={}){let r=null;_r(n)?s=n:r=n;const o=new Rh(this.document,t,e,r);return s.renderUnsafeAttributes&&o._unsafeAttributesToRender.push(...s.renderUnsafeAttributes),o}createEditableElement(t,e,n={}){const s=new Rb(this.document,t,e);return n.renderUnsafeAttributes&&s._unsafeAttributesToRender.push(...n.renderUnsafeAttributes),s}createEmptyElement(t,e,n={}){const s=new LE(this.document,t,e);return n.renderUnsafeAttributes&&s._unsafeAttributesToRender.push(...n.renderUnsafeAttributes),s}createUIElement(t,e,n){const s=new Nb(this.document,t,e);return n&&(s.render=n),s}createRawElement(t,e,n,s={}){const r=new VE(this.document,t,e);return n&&(r.render=n),s.renderUnsafeAttributes&&r._unsafeAttributesToRender.push(...s.renderUnsafeAttributes),r}setAttribute(t,e,n,s){s!==void 0?s._setAttribute(t,e,n):n._setAttribute(t,e)}removeAttribute(t,e,n){n!==void 0?n._removeAttribute(t,e):e._removeAttribute(t)}addClass(t,e){e._addClass(t)}removeClass(t,e){e._removeClass(t)}setStyle(t,e,n){_r(t)&&n===void 0?e._setStyle(t):n._setStyle(t,e)}removeStyle(t,e){e._removeStyle(t)}setCustomProperty(t,e,n){n._setCustomProperty(t,e)}removeCustomProperty(t,e){return e._removeCustomProperty(t)}breakAttributes(t){return t instanceof Ee?this._breakAttributes(t):this._breakAttributesRange(t)}breakContainer(t){const e=t.parent;if(!e.is("containerElement"))throw new D("view-writer-break-non-container-element",this.document);if(!e.parent)throw new D("view-writer-break-root",this.document);if(t.isAtStart)return Ee._createBefore(e);if(!t.isAtEnd){const n=e._clone(!1);this.insert(Ee._createAfter(e),n);const s=new ot(t,Ee._createAt(e,"end")),r=new Ee(n,0);this.move(s,r)}return Ee._createAfter(e)}mergeAttributes(t){const e=t.offset,n=t.parent;if(n.is("$text"))return t;if(n.is("attributeElement")&&n.childCount===0){const o=n.parent,a=n.index;return n._remove(),this._removeFromClonedElementsGroup(n),this.mergeAttributes(new Ee(o,a))}const s=n.getChild(e-1),r=n.getChild(e);if(!s||!r)return t;if(s.is("$text")&&r.is("$text"))return N2(s,r);if(s.is("attributeElement")&&r.is("attributeElement")&&s.isSimilar(r)){const o=s.childCount;return s._appendChild(r.getChildren()),r._remove(),this._removeFromClonedElementsGroup(r),this.mergeAttributes(new Ee(s,o))}return t}mergeContainers(t){const e=t.nodeBefore,n=t.nodeAfter;if(!e||!n||!e.is("containerElement")||!n.is("containerElement"))throw new D("view-writer-merge-containers-invalid-position",this.document);const s=e.getChild(e.childCount-1),r=s instanceof zn?Ee._createAt(s,"end"):Ee._createAt(e,"end");return this.move(ot._createIn(n),Ee._createAt(e,"end")),this.remove(ot._createOn(n)),r}insert(t,e){e=ts(e)?[...e]:[e],$4(e,this.document);const n=e.reduce((o,a)=>{const l=o[o.length-1],u=!a.is("uiElement");return!l||l.breakAttributes!=u?o.push({breakAttributes:u,nodes:[a]}):l.nodes.push(a),o},[]);let s=null,r=t;for(const{nodes:o,breakAttributes:a}of n){const l=this._insertNodes(r,o,a);s||(s=l.start),r=l.end}return s?new ot(s,r):new ot(t)}remove(t){const e=t instanceof ot?t:ot._createOn(t);if(Rd(e,this.document),e.isCollapsed)return new hl(this.document);const{start:n,end:s}=this._breakAttributesRange(e,!0),r=n.parent,o=s.offset-n.offset,a=r._removeChildren(n.offset,o);for(const u of a)this._removeFromClonedElementsGroup(u);const l=this.mergeAttributes(n);return e.start=l,e.end=l.clone(),new hl(this.document,a)}clear(t,e){Rd(t,this.document);const n=t.getWalker({direction:"backward",ignoreElementEnd:!0});for(const s of n){const r=s.item;let o;if(r.is("element")&&e.isSimilar(r))o=ot._createOn(r);else if(!s.nextPosition.isAfter(t.start)&&r.is("$textProxy")){const a=r.getAncestors().find(l=>l.is("element")&&e.isSimilar(l));a&&(o=ot._createIn(a))}o&&(o.end.isAfter(t.end)&&(o.end=t.end),o.start.isBefore(t.start)&&(o.start=t.start),this.remove(o))}}move(t,e){let n;if(e.isAfter(t.end)){e=this._breakAttributes(e,!0);const s=e.parent,r=s.childCount;t=this._breakAttributesRange(t,!0),n=this.remove(t),e.offset+=s.childCount-r}else n=this.remove(t);return this.insert(e,n)}wrap(t,e){if(!(e instanceof dl))throw new D("view-writer-wrap-invalid-attribute",this.document);if(Rd(t,this.document),t.isCollapsed){let n=t.start;n.parent.is("element")&&!Sse(n.parent)&&(n=n.getLastMatchingPosition(r=>r.item.is("uiElement"))),n=this._wrapPosition(n,e);const s=this.document.selection;return s.isCollapsed&&s.getFirstPosition().isEqual(t.start)&&this.setSelection(n),new ot(n)}else return this._wrapRange(t,e)}unwrap(t,e){if(!(e instanceof dl))throw new D("view-writer-unwrap-invalid-attribute",this.document);if(Rd(t,this.document),t.isCollapsed)return t;const{start:n,end:s}=this._breakAttributesRange(t,!0),r=n.parent,o=this._unwrapChildren(r,n.offset,s.offset,e),a=this.mergeAttributes(o.start);a.isEqual(o.start)||o.end.offset--;const l=this.mergeAttributes(o.end);return new ot(a,l)}rename(t,e){const n=new Rh(this.document,t,e.getAttributes());return this.insert(Ee._createAfter(e),n),this.move(ot._createIn(e),Ee._createAt(n,0)),this.remove(ot._createOn(e)),n}clearClonedElementsGroup(t){this._cloneGroups.delete(t)}createPositionAt(t,e){return Ee._createAt(t,e)}createPositionAfter(t){return Ee._createAfter(t)}createPositionBefore(t){return Ee._createBefore(t)}createRange(t,e){return new ot(t,e)}createRangeOn(t){return ot._createOn(t)}createRangeIn(t){return ot._createIn(t)}createSelection(...t){return new oo(...t)}createSlot(t="children"){if(!this._slotFactory)throw new D("view-writer-invalid-create-slot-context",this.document);return this._slotFactory(this,t)}_registerSlotFactory(t){this._slotFactory=t}_clearSlotFactory(){this._slotFactory=null}_insertNodes(t,e,n){let s;if(n?s=Ay(t):s=t.parent.is("$text")?t.parent.parent:t.parent,!s)throw new D("view-writer-invalid-position-container",this.document);let r;n?r=this._breakAttributes(t,!0):r=t.parent.is("$text")?Y0(t):t;const o=s._insertChild(r.offset,e);for(const h of e)this._addToClonedElementsGroup(h);const a=r.getShiftedBy(o),l=this.mergeAttributes(r);l.isEqual(r)||a.offset--;const u=this.mergeAttributes(a);return new ot(l,u)}_wrapChildren(t,e,n,s){let r=e;const o=[];for(;r<n;){const l=t.getChild(r),u=l.is("$text"),h=l.is("attributeElement");if(h&&l._canMergeAttributesFrom(s))l._mergeAttributesFrom(s),o.push(new Ee(t,r));else if(u||!h||Ase(s,l)){const f=s._clone();l._remove(),f._appendChild(l),t._insertChild(r,f),this._addToClonedElementsGroup(f),o.push(new Ee(t,r))}else this._wrapChildren(l,0,l.childCount,s);r++}let a=0;for(const l of o){if(l.offset-=a,l.offset==e)continue;this.mergeAttributes(l).isEqual(l)||(a++,n--)}return ot._createFromParentsAndOffsets(t,e,t,n)}_unwrapChildren(t,e,n,s){let r=e;const o=[];for(;r<n;){const l=t.getChild(r);if(!l.is("attributeElement")){r++;continue}if(l.isSimilar(s)){const u=l.getChildren(),h=l.childCount;l._remove(),t._insertChild(r,u),this._removeFromClonedElementsGroup(l),o.push(new Ee(t,r),new Ee(t,r+h)),r+=h,n+=h-1;continue}if(l._canSubtractAttributesOf(s)){l._subtractAttributesOf(s),o.push(new Ee(t,r),new Ee(t,r+1)),r++;continue}this._unwrapChildren(l,0,l.childCount,s),r++}let a=0;for(const l of o){if(l.offset-=a,l.offset==e||l.offset==n)continue;this.mergeAttributes(l).isEqual(l)||(a++,n--)}return ot._createFromParentsAndOffsets(t,e,t,n)}_wrapRange(t,e){const{start:n,end:s}=this._breakAttributesRange(t,!0),r=n.parent,o=this._wrapChildren(r,n.offset,s.offset,e),a=this.mergeAttributes(o.start);a.isEqual(o.start)||o.end.offset--;const l=this.mergeAttributes(o.end);return new ot(a,l)}_wrapPosition(t,e){if(e.isSimilar(t.parent))return O2(t.clone());t.parent.is("$text")&&(t=Y0(t));const n=this.createAttributeElement("_wrapPosition-fake-element");n._priority=Number.POSITIVE_INFINITY,n.isSimilar=()=>!1,t.parent._insertChild(t.offset,n);const s=new ot(t,t.getShiftedBy(1));this.wrap(s,e);const r=new Ee(n.parent,n.index);n._remove();const o=r.nodeBefore,a=r.nodeAfter;return o&&o.is("view:$text")&&a&&a.is("view:$text")?N2(o,a):O2(r)}_breakAttributesRange(t,e=!1){const n=t.start,s=t.end;if(Rd(t,this.document),t.isCollapsed){const l=this._breakAttributes(t.start,e);return new ot(l,l)}const r=this._breakAttributes(s,e),o=r.parent.childCount,a=this._breakAttributes(n,e);return r.offset+=r.parent.childCount-o,new ot(a,r)}_breakAttributes(t,e=!1){const n=t.offset,s=t.parent;if(t.parent.is("emptyElement"))throw new D("view-writer-cannot-break-empty-element",this.document);if(t.parent.is("uiElement"))throw new D("view-writer-cannot-break-ui-element",this.document);if(t.parent.is("rawElement"))throw new D("view-writer-cannot-break-raw-element",this.document);if(!e&&s.is("$text")&&Py(s.parent)||Py(s))return t.clone();if(s.is("$text"))return this._breakAttributes(Y0(t),e);const r=s.childCount;if(n==r){const o=new Ee(s.parent,s.index+1);return this._breakAttributes(o,e)}else if(n===0){const o=new Ee(s.parent,s.index);return this._breakAttributes(o,e)}else{const o=s.index+1,a=s._clone();s.parent._insertChild(o,a),this._addToClonedElementsGroup(a);const l=s.childCount-n,u=s._removeChildren(n,l);a._appendChild(u);const h=new Ee(s.parent,o);return this._breakAttributes(h,e)}}_addToClonedElementsGroup(t){if(!t.root.is("rootElement"))return;if(t.is("element"))for(const s of t.getChildren())this._addToClonedElementsGroup(s);const e=t.id;if(!e)return;let n=this._cloneGroups.get(e);n||(n=new Set,this._cloneGroups.set(e,n)),n.add(t),t._clonesGroup=n}_removeFromClonedElementsGroup(t){if(t.is("element"))for(const s of t.getChildren())this._removeFromClonedElementsGroup(s);const e=t.id;if(!e)return;const n=this._cloneGroups.get(e);n&&n.delete(t)}}function Sse(i){return Array.from(i.getChildren()).some(t=>!t.is("uiElement"))}function Ay(i){let t=i.parent;for(;!Py(t);){if(!t)return;t=t.parent}return t}function Ase(i,t){return i.priority<t.priority?!0:i.priority>t.priority?!1:i.getIdentity()<t.getIdentity()}function O2(i){const t=i.nodeBefore;if(t&&t.is("$text"))return new Ee(t,t.data.length);const e=i.nodeAfter;return e&&e.is("$text")?new Ee(e,0):i}function Y0(i){if(i.offset==i.parent.data.length)return new Ee(i.parent.parent,i.parent.index+1);if(i.offset===0)return new Ee(i.parent.parent,i.parent.index);const t=i.parent.data.slice(i.offset);return i.parent._data=i.parent.data.slice(0,i.offset),i.parent.parent._insertChild(i.parent.index+1,new zn(i.root.document,t)),new Ee(i.parent.parent,i.parent.index+1)}function N2(i,t){const e=i.data.length;return i._data+=t.data,t._remove(),new Ee(i,e)}const Pse=[zn,dl,Rh,LE,VE,Nb];function $4(i,t){for(const e of i){if(!Pse.some(n=>e instanceof n))throw new D("view-writer-insert-invalid-node-type",t);e.is("$text")||$4(e.getChildren(),t)}}function Py(i){return i&&(i.is("containerElement")||i.is("documentFragment"))}function Rd(i,t){const e=Ay(i.start),n=Ay(i.end);if(!e||!n||e!==n)throw new D("view-writer-invalid-range-container",t)}const z4=i=>i.createTextNode(" "),j4=i=>{const t=i.createElement("span");return t.dataset.ckeFiller="true",t.innerText=" ",t},H4=i=>{const t=i.createElement("br");return t.dataset.ckeFiller="true",t},Gs=7,Oh="⁠".repeat(Gs);function Ui(i){return typeof i=="string"?i.substr(0,Gs)===Oh:Qt(i)&&i.data.substr(0,Gs)===Oh}function Wc(i){return i.data.length==Gs&&Ui(i)}function M2(i){const t=typeof i=="string"?i:i.data;return Ui(i)?t.slice(Gs):t}function Ise(i){i.document.on("arrowKey",Rse,{priority:"low"})}function Rse(i,t){if(t.keyCode==nt.arrowleft){const e=t.domTarget.ownerDocument.defaultView.getSelection();if(e.rangeCount==1&&e.getRangeAt(0).collapsed){const n=e.getRangeAt(0).startContainer,s=e.getRangeAt(0).startOffset;Ui(n)&&s<=Gs&&e.collapse(n,0)}}}class Ose extends yt(){constructor(e,n){super();b(this,"domDocuments",new Set);b(this,"domConverter");b(this,"markedAttributes",new Set);b(this,"markedChildren",new Set);b(this,"markedTexts",new Set);b(this,"selection");b(this,"_inlineFiller",null);b(this,"_fakeSelectionContainer",null);this.domConverter=e,this.selection=n,this.set("isFocused",!1),this.set("isSelecting",!1),this.set("isComposing",!1),Fe.isBlink&&!Fe.isAndroid&&this.on("change:isSelecting",()=>{this.isSelecting||this.render()})}markToSync(e,n){if(e==="text")this.domConverter.mapViewToDom(n.parent)&&this.markedTexts.add(n);else{if(!this.domConverter.mapViewToDom(n))return;if(e==="attributes")this.markedAttributes.add(n);else if(e==="children")this.markedChildren.add(n);else throw new D("view-renderer-unknown-type",this)}}render(){if(this.isComposing&&!Fe.isAndroid)return;let e=null;const n=Fe.isBlink&&!Fe.isAndroid?!this.isSelecting:!0;for(const s of this.markedChildren)this._updateChildrenMappings(s);n?(this._inlineFiller&&!this._isSelectionInInlineFiller()&&this._removeInlineFiller(),this._inlineFiller?e=this._getInlineFillerPosition():this._needsInlineFillerAtSelection()&&(e=this.selection.getFirstPosition(),this.markedChildren.add(e.parent))):this._inlineFiller&&this._inlineFiller.parentNode&&(e=this.domConverter.domPositionToView(this._inlineFiller),e&&e.parent.is("$text")&&(e=Ee._createBefore(e.parent)));for(const s of this.markedAttributes)this._updateAttrs(s);for(const s of this.markedChildren)this._updateChildren(s,{inlineFillerPosition:e});for(const s of this.markedTexts)!this.markedChildren.has(s.parent)&&this.domConverter.mapViewToDom(s.parent)&&this._updateText(s,{inlineFillerPosition:e});if(n)if(e){const s=this.domConverter.viewPositionToDom(e),r=s.parent.ownerDocument;Ui(s.parent)?this._inlineFiller=s.parent:this._inlineFiller=L2(r,s.parent,s.offset)}else this._inlineFiller=null;this._updateFocus(),this._updateSelection(),this.domConverter._clearTemporaryCustomProperties(),this.markedTexts.clear(),this.markedAttributes.clear(),this.markedChildren.clear()}_updateChildrenMappings(e){const n=this.domConverter.mapViewToDom(e);if(!n)return;const s=Array.from(n.childNodes),r=Array.from(this.domConverter.viewChildrenToDom(e,{withChildren:!1})),o=this._diffNodeLists(s,r),a=this._findUpdateActions(o,s,r,Mse);if(a.indexOf("update")!==-1){const l={equal:0,insert:0,delete:0};for(const u of a)if(u==="update"){const h=l.equal+l.insert,f=l.equal+l.delete,g=e.getChild(h);g&&!g.is("uiElement")&&!g.is("rawElement")&&this._updateElementMappings(g,s[f]),y2(r[h]),l.equal++}else l[u]++}}_updateElementMappings(e,n){this.domConverter.unbindDomElement(n),this.domConverter.bindElements(n,e),this.markedChildren.add(e),this.markedAttributes.add(e)}_getInlineFillerPosition(){const e=this.selection.getFirstPosition();return e.parent.is("$text")?Ee._createBefore(e.parent):e}_isSelectionInInlineFiller(){if(this.selection.rangeCount!=1||!this.selection.isCollapsed)return!1;const e=this.selection.getFirstPosition(),n=this.domConverter.viewPositionToDom(e);return!!(n&&Qt(n.parent)&&Ui(n.parent))}_removeInlineFiller(){const e=this._inlineFiller;if(!Ui(e))throw new D("view-renderer-filler-was-lost",this);Wc(e)?e.remove():e.data=e.data.substr(Gs),this._inlineFiller=null}_needsInlineFillerAtSelection(){if(this.selection.rangeCount!=1||!this.selection.isCollapsed)return!1;const e=this.selection.getFirstPosition(),n=e.parent,s=e.offset;if(!this.domConverter.mapViewToDom(n.root)||!n.is("element")||!Nse(n))return!1;const r=e.nodeBefore,o=e.nodeAfter;return!(r instanceof zn||o instanceof zn||s===n.getFillerOffset()&&(!r||!r.is("element","br"))||Fe.isAndroid&&(r||o))}_updateText(e,n){const s=this.domConverter.findCorrespondingDomText(e);let o=this.domConverter.viewToDom(e).data;const a=n.inlineFillerPosition;a&&a.parent==e.parent&&a.offset==e.index&&(o=Oh+o),this._updateTextNode(s,o)}_updateAttrs(e){const n=this.domConverter.mapViewToDom(e);if(n){for(const s of Array.from(n.attributes)){const r=s.name;e.hasAttribute(r)||this.domConverter.removeDomElementAttribute(n,r)}for(const s of e.getAttributeKeys())this.domConverter.setDomElementAttribute(n,s,e.getAttribute(s),e)}}_updateChildren(e,n){const s=this.domConverter.mapViewToDom(e);if(!s)return;if(Fe.isAndroid){let g=null;for(const p of Array.from(s.childNodes)){if(g&&Qt(g)&&Qt(p)){s.normalize();break}g=p}}const r=n.inlineFillerPosition,o=s.childNodes,a=Array.from(this.domConverter.viewChildrenToDom(e,{bind:!0}));r&&r.parent===e&&L2(s.ownerDocument,a,r.offset);const l=this._diffNodeLists(o,a),u=this._findUpdateActions(l,o,a,Lse);let h=0;const f=new Set;for(const g of u)g==="delete"?(f.add(o[h]),y2(o[h])):(g==="equal"||g==="update")&&h++;h=0;for(const g of u)g==="insert"?(A4(s,h,a[h]),h++):g==="update"?(this._updateTextNode(o[h],a[h].data),h++):g==="equal"&&(this._markDescendantTextToSync(this.domConverter.domToView(a[h])),h++);for(const g of f)g.parentNode||this.domConverter.unbindDomElement(g)}_diffNodeLists(e,n){return e=Bse(e,this._fakeSelectionContainer),rh(e,n,Vse.bind(null,this.domConverter))}_findUpdateActions(e,n,s,r){if(e.indexOf("insert")===-1||e.indexOf("delete")===-1)return e;let o=[],a=[],l=[];const u={equal:0,insert:0,delete:0};for(const h of e)h==="insert"?l.push(s[u.equal+u.insert]):h==="delete"?a.push(n[u.equal+u.delete]):(o=o.concat(rh(a,l,r).map(f=>f==="equal"?"update":f)),o.push("equal"),a=[],l=[]),u[h]++;return o.concat(rh(a,l,r).map(h=>h==="equal"?"update":h))}_updateTextNode(e,n){const s=e.data;s!=n&&(Fe.isAndroid&&this.isComposing&&s.replace(/\u00A0/g," ")==n.replace(/\u00A0/g," ")||this._updateTextNodeInternal(e,n))}_updateTextNodeInternal(e,n){const s=h4(e.data,n);for(const r of s)r.type==="insert"?e.insertData(r.index,r.values.join("")):e.deleteData(r.index,r.howMany)}_markDescendantTextToSync(e){if(e){if(e.is("$text"))this.markedTexts.add(e);else if(e.is("element"))for(const n of e.getChildren())this._markDescendantTextToSync(n)}}_updateSelection(){if(Fe.isBlink&&!Fe.isAndroid&&this.isSelecting&&!this.markedChildren.size)return;if(this.selection.rangeCount===0){this._removeDomSelection(),this._removeFakeSelection();return}const e=this.domConverter.mapViewToDom(this.selection.editableElement);!this.isFocused||!e||(this.selection.isFake?this._updateFakeSelection(e):this._fakeSelectionContainer&&this._fakeSelectionContainer.isConnected?(this._removeFakeSelection(),this._updateDomSelection(e)):this.isComposing&&Fe.isAndroid||this._updateDomSelection(e))}_updateFakeSelection(e){const n=e.ownerDocument;this._fakeSelectionContainer||(this._fakeSelectionContainer=Fse(n));const s=this._fakeSelectionContainer;if(this.domConverter.bindFakeSelection(s,this.selection),!this._fakeSelectionNeedsUpdate(e))return;(!s.parentElement||s.parentElement!=e)&&e.appendChild(s),s.textContent=this.selection.fakeSelectionLabel||" ";const r=n.getSelection(),o=n.createRange();r.removeAllRanges(),o.selectNodeContents(s),r.addRange(o)}_updateDomSelection(e){const n=e.ownerDocument.defaultView.getSelection();if(!this._domSelectionNeedsUpdate(n))return;const s=this.domConverter.viewPositionToDom(this.selection.anchor),r=this.domConverter.viewPositionToDom(this.selection.focus);n.setBaseAndExtent(s.parent,s.offset,r.parent,r.offset),Fe.isGecko&&Dse(r,n)}_domSelectionNeedsUpdate(e){if(!this.domConverter.isDomSelectionCorrect(e))return!0;const n=e&&this.domConverter.domSelectionToView(e);return!(n&&this.selection.isEqual(n)||!this.selection.isCollapsed&&this.selection.isSimilar(n))}_fakeSelectionNeedsUpdate(e){const n=this._fakeSelectionContainer,s=e.ownerDocument.getSelection();return!n||n.parentElement!==e||s.anchorNode!==n&&!n.contains(s.anchorNode)?!0:n.textContent!==this.selection.fakeSelectionLabel}_removeDomSelection(){for(const e of this.domDocuments){const n=e.getSelection();if(n.rangeCount){const s=e.activeElement,r=this.domConverter.mapDomToView(s);s&&r&&n.removeAllRanges()}}}_removeFakeSelection(){const e=this._fakeSelectionContainer;e&&e.remove()}_updateFocus(){if(this.isFocused){const e=this.selection.editableElement;e&&this.domConverter.focus(e)}}}function Nse(i){if(i.getAttribute("contenteditable")=="false")return!1;const t=i.findAncestor(e=>e.hasAttribute("contenteditable"));return!t||t.getAttribute("contenteditable")=="true"}function L2(i,t,e){const n=t instanceof Array?t:t.childNodes,s=n[e];if(Qt(s))return s.data=Oh+s.data,s;{const r=i.createTextNode(Oh);return Array.isArray(t)?n.splice(e,0,r):A4(t,e,r),r}}function Mse(i,t){return ba(i)&&ba(t)&&!Qt(i)&&!Qt(t)&&!lh(i)&&!lh(t)&&i.tagName.toLowerCase()===t.tagName.toLowerCase()}function Lse(i,t){return ba(i)&&ba(t)&&Qt(i)&&Qt(t)}function Vse(i,t,e){return t===e?!0:Qt(t)&&Qt(e)?t.data===e.data:!!(i.isBlockFiller(t)&&i.isBlockFiller(e))}function Dse(i,t){let e=i.parent,n=i.offset;if(Qt(e)&&Wc(e)&&(n=Wd(e)+1,e=e.parentNode),e.nodeType!=Node.ELEMENT_NODE||n!=e.childNodes.length-1)return;const s=e.childNodes[n];s&&s.tagName=="BR"&&t.addRange(t.getRangeAt(0))}function Bse(i,t){const e=Array.from(i);return e.length==0||!t||e[e.length-1]==t&&e.pop(),e}function Fse(i){const t=i.createElement("div");return t.className="ck-fake-selection-container",Object.assign(t.style,{position:"fixed",top:0,left:"-9999px",width:"42px"}),t.textContent=" ",t}const $se=H4(Ce.document),zse=z4(Ce.document),jse=j4(Ce.document),Zm="data-ck-unsafe-attribute-",V2="data-ck-unsafe-element";class Mb{constructor(t,{blockFillerMode:e,renderingMode:n="editing"}={}){b(this,"document");b(this,"renderingMode");b(this,"blockFillerMode");b(this,"preElements");b(this,"blockElements");b(this,"inlineObjectElements");b(this,"unsafeElements");b(this,"_domDocument");b(this,"_domToViewMapping",new WeakMap);b(this,"_viewToDomMapping",new WeakMap);b(this,"_fakeSelectionMapping",new WeakMap);b(this,"_rawContentElementMatcher",new ns);b(this,"_inlineObjectElementMatcher",new ns);b(this,"_elementsWithTemporaryCustomProperties",new Set);this.document=t,this.renderingMode=n,this.blockFillerMode=e||(n==="editing"?"br":"nbsp"),this.preElements=["pre","textarea"],this.blockElements=["address","article","aside","blockquote","caption","center","dd","details","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","legend","li","main","menu","nav","ol","p","pre","section","summary","table","tbody","td","tfoot","th","thead","tr","ul"],this.inlineObjectElements=["object","iframe","input","button","textarea","select","option","video","embed","audio","img","canvas"],this.unsafeElements=["script","style"],this._domDocument=this.renderingMode==="editing"?Ce.document:Ce.document.implementation.createHTMLDocument("")}bindFakeSelection(t,e){this._fakeSelectionMapping.set(t,new oo(e))}fakeSelectionToView(t){return this._fakeSelectionMapping.get(t)}bindElements(t,e){this._domToViewMapping.set(t,e),this._viewToDomMapping.set(e,t)}unbindDomElement(t){const e=this._domToViewMapping.get(t);if(e){this._domToViewMapping.delete(t),this._viewToDomMapping.delete(e);for(const n of t.children)this.unbindDomElement(n)}}bindDocumentFragments(t,e){this._domToViewMapping.set(t,e),this._viewToDomMapping.set(e,t)}shouldRenderAttribute(t,e,n){return this.renderingMode==="data"?!0:(t=t.toLowerCase(),t.startsWith("on")||t==="srcdoc"&&e.match(/\bon\S+\s*=|javascript:|<\s*\/*script/i)?!1:n==="img"&&(t==="src"||t==="srcset")||n==="source"&&t==="srcset"?!0:!e.match(/^\s*(javascript:|data:(image\/svg|text\/x?html))/i))}setContentOf(t,e){if(this.renderingMode==="data"){t.innerHTML=e;return}const n=new DOMParser().parseFromString(e,"text/html"),s=n.createDocumentFragment(),r=n.body.childNodes;for(;r.length>0;)s.appendChild(r[0]);const o=n.createTreeWalker(s,NodeFilter.SHOW_ELEMENT),a=[];let l;for(;l=o.nextNode();)a.push(l);for(const u of a){for(const f of u.getAttributeNames())this.setDomElementAttribute(u,f,u.getAttribute(f));const h=u.tagName.toLowerCase();this._shouldRenameElement(h)&&($2(h),u.replaceWith(this._createReplacementDomElement(h,u)))}for(;t.firstChild;)t.firstChild.remove();t.append(s)}viewToDom(t,e={}){if(t.is("$text")){const n=this._processDataFromViewText(t);return this._domDocument.createTextNode(n)}else{const n=t;if(this.mapViewToDom(n))if(n.getCustomProperty("editingPipeline:doNotReuseOnce"))this._elementsWithTemporaryCustomProperties.add(n);else return this.mapViewToDom(n);let s;if(n.is("documentFragment"))s=this._domDocument.createDocumentFragment(),e.bind&&this.bindDocumentFragments(s,n);else{if(n.is("uiElement"))return n.name==="$comment"?s=this._domDocument.createComment(n.getCustomProperty("$rawContent")):s=n.render(this._domDocument,this),e.bind&&this.bindElements(s,n),s;this._shouldRenameElement(n.name)?($2(n.name),s=this._createReplacementDomElement(n.name)):n.hasAttribute("xmlns")?s=this._domDocument.createElementNS(n.getAttribute("xmlns"),n.name):s=this._domDocument.createElement(n.name),n.is("rawElement")&&n.render(s,this),e.bind&&this.bindElements(s,n);for(const r of n.getAttributeKeys())this.setDomElementAttribute(s,r,n.getAttribute(r),n)}if(e.withChildren!==!1)for(const r of this.viewChildrenToDom(n,e))s instanceof HTMLTemplateElement?s.content.appendChild(r):s.appendChild(r);return s}}setDomElementAttribute(t,e,n,s){const r=this.shouldRenderAttribute(e,n,t.tagName.toLowerCase())||s&&s.shouldRenderUnsafeAttribute(e);if(r||dt("domconverter-unsafe-attribute-detected",{domElement:t,key:e,value:n}),!Sie(e)){dt("domconverter-invalid-attribute-detected",{domElement:t,key:e,value:n});return}t.hasAttribute(e)&&!r?t.removeAttribute(e):t.hasAttribute(Zm+e)&&r&&t.removeAttribute(Zm+e),t.setAttribute(r?e:Zm+e,n)}removeDomElementAttribute(t,e){e!=V2&&(t.removeAttribute(e),t.removeAttribute(Zm+e))}*viewChildrenToDom(t,e={}){const n=t.getFillerOffset&&t.getFillerOffset();let s=0;for(const r of t.getChildren()){n===s&&(yield this._getBlockFiller());const o=r.is("element")&&!!r.getCustomProperty("dataPipeline:transparentRendering")&&!ln(r.getAttributes());if(o&&this.renderingMode=="data")if(r.is("rawElement")){const a=this._domDocument.createElement(r.name);r.render(a,this),yield*[...a.childNodes]}else yield*this.viewChildrenToDom(r,e);else o&&dt("domconverter-transparent-rendering-unsupported-in-editing-pipeline",{viewElement:r}),yield this.viewToDom(r,e);s++}n===s&&(yield this._getBlockFiller())}viewRangeToDom(t){const e=this.viewPositionToDom(t.start),n=this.viewPositionToDom(t.end),s=this._domDocument.createRange();return s.setStart(e.parent,e.offset),s.setEnd(n.parent,n.offset),s}viewPositionToDom(t){const e=t.parent;if(e.is("$text")){const n=this.findCorrespondingDomText(e);if(!n)return null;let s=t.offset;return Ui(n)&&(s+=Gs),{parent:n,offset:s}}else{let n,s,r;if(t.offset===0){if(n=this.mapViewToDom(e),!n)return null;r=n.childNodes[0]}else{const a=t.nodeBefore;if(s=a.is("$text")?this.findCorrespondingDomText(a):this.mapViewToDom(a),!s)return null;n=s.parentNode,r=s.nextSibling}if(Qt(r)&&Ui(r))return{parent:r,offset:Gs};const o=s?Wd(s)+1:0;return{parent:n,offset:o}}}domToView(t,e={}){const n=[],s=this._domToView(t,e,n),r=s.next().value;return!r||(s.next(),this._processDomInlineNodes(null,n,e),this.blockFillerMode=="br"&&B2(r))||r.is("$text")&&r.data.length==0?null:r}*domChildrenToView(t,e={},n=[]){let s=[];t instanceof HTMLTemplateElement?s=[...t.content.childNodes]:s=[...t.childNodes];for(let r=0;r<s.length;r++){const o=s[r],a=this._domToView(o,e,n),l=a.next().value;l!==null&&(this._isBlockViewElement(l)&&this._processDomInlineNodes(t,n,e),this.blockFillerMode=="br"&&B2(l)||(yield l),a.next())}this._processDomInlineNodes(t,n,e)}domSelectionToView(t){if(Gse(t))return new oo([]);if(t.rangeCount===1){let s=t.getRangeAt(0).startContainer;Qt(s)&&(s=s.parentNode);const r=this.fakeSelectionToView(s);if(r)return r}const e=this.isDomSelectionBackward(t),n=[];for(let s=0;s<t.rangeCount;s++){const r=t.getRangeAt(s),o=this.domRangeToView(r);o&&n.push(o)}return new oo(n,{backward:e})}domRangeToView(t){const e=this.domPositionToView(t.startContainer,t.startOffset),n=this.domPositionToView(t.endContainer,t.endOffset);return e&&n?new ot(e,n):null}domPositionToView(t,e=0){if(this.isBlockFiller(t))return this.domPositionToView(t.parentNode,Wd(t));const n=this.mapDomToView(t);if(n&&(n.is("uiElement")||n.is("rawElement")))return Ee._createBefore(n);if(Qt(t)){if(Wc(t))return this.domPositionToView(t.parentNode,Wd(t));const s=this.findCorrespondingViewText(t);let r=e;return s?(Ui(t)&&(r-=Gs,r=r<0?0:r),new Ee(s,r)):null}else{if(e===0){const s=this.mapDomToView(t);if(s)return new Ee(s,0)}else{const s=t.childNodes[e-1];if(Qt(s)&&Wc(s)||s&&this.isBlockFiller(s))return this.domPositionToView(s.parentNode,Wd(s));const r=Qt(s)?this.findCorrespondingViewText(s):this.mapDomToView(s);if(r&&r.parent)return new Ee(r.parent,r.index+1)}return null}}mapDomToView(t){return this.getHostViewElement(t)||this._domToViewMapping.get(t)}findCorrespondingViewText(t){if(Wc(t))return null;const e=this.getHostViewElement(t);if(e)return e;const n=t.previousSibling;if(n){if(!this.isElement(n))return null;const s=this.mapDomToView(n);if(s){const r=s.nextSibling;return r instanceof zn?r:null}}else{const s=this.mapDomToView(t.parentNode);if(s){const r=s.getChild(0);return r instanceof zn?r:null}}return null}mapViewToDom(t){return this._viewToDomMapping.get(t)}findCorrespondingDomText(t){const e=t.previousSibling;return e&&this.mapViewToDom(e)?this.mapViewToDom(e).nextSibling:!e&&t.parent&&this.mapViewToDom(t.parent)?this.mapViewToDom(t.parent).childNodes[0]:null}focus(t){const e=this.mapViewToDom(t);if(e&&e.ownerDocument.activeElement!==e){const{scrollX:n,scrollY:s}=Ce.window,r=[];D2(e,o=>{const{scrollLeft:a,scrollTop:l}=o;r.push([a,l])}),e.focus(),D2(e,o=>{const[a,l]=r.shift();o.scrollLeft=a,o.scrollTop=l}),Ce.window.scrollTo(n,s)}}_clearDomSelection(){const t=this.mapViewToDom(this.document.selection.editableElement);if(!t)return;const e=t.ownerDocument.defaultView.getSelection(),n=this.domSelectionToView(e);n&&n.rangeCount>0&&e.removeAllRanges()}isElement(t){return t&&t.nodeType==Node.ELEMENT_NODE}isDocumentFragment(t){return t&&t.nodeType==Node.DOCUMENT_FRAGMENT_NODE}isBlockFiller(t){return this.blockFillerMode=="br"?t.isEqualNode($se):F2(t,this.blockElements)?!0:t.isEqualNode(jse)||Use(t,this.blockElements)}isDomSelectionBackward(t){if(t.isCollapsed)return!1;const e=this._domDocument.createRange();try{e.setStart(t.anchorNode,t.anchorOffset),e.setEnd(t.focusNode,t.focusOffset)}catch{return!1}const n=e.collapsed;return e.detach(),n}getHostViewElement(t){const e=Cie(t);for(e.pop();e.length;){const n=e.pop(),s=this._domToViewMapping.get(n);if(s&&(s.is("uiElement")||s.is("rawElement")))return s}return null}isDomSelectionCorrect(t){return this._isDomSelectionPositionCorrect(t.anchorNode,t.anchorOffset)&&this._isDomSelectionPositionCorrect(t.focusNode,t.focusOffset)}registerRawContentMatcher(t){this._rawContentElementMatcher.add(t)}registerInlineObjectMatcher(t){this._inlineObjectElementMatcher.add(t)}_clearTemporaryCustomProperties(){for(const t of this._elementsWithTemporaryCustomProperties)t._removeCustomProperty("editingPipeline:doNotReuseOnce");this._elementsWithTemporaryCustomProperties.clear()}_getBlockFiller(){switch(this.blockFillerMode){case"nbsp":return z4(this._domDocument);case"markedNbsp":return j4(this._domDocument);case"br":return H4(this._domDocument)}}_isDomSelectionPositionCorrect(t,e){if(Qt(t)&&Ui(t)&&e<Gs||this.isElement(t)&&Ui(t.childNodes[e]))return!1;const n=this.mapDomToView(t);return!(n&&(n.is("uiElement")||n.is("rawElement")))}*_domToView(t,e,n){if(this.blockFillerMode!="br"&&F2(t,this.blockElements))return null;const s=this.getHostViewElement(t);if(s)return s;if(lh(t)&&e.skipComments)return null;if(Qt(t)){if(Wc(t))return null;{const r=t.data;if(r==="")return null;const o=new zn(this.document,r);return n.push(o),o}}else{let r=this.mapDomToView(t);if(r)return this._isInlineObjectElement(r)&&n.push(r),r;if(this.isDocumentFragment(t))r=new hl(this.document),e.bind&&this.bindDocumentFragments(t,r);else{r=this._createViewElement(t,e),e.bind&&this.bindElements(t,r);const a=t.attributes;if(a)for(let l=a.length,u=0;u<l;u++)r._setAttribute(a[u].name,a[u].value);if(this._isViewElementWithRawContent(r,e))return r._setCustomProperty("$rawContent",t.innerHTML),this._isBlockViewElement(r)||n.push(r),r;if(lh(t))return r._setCustomProperty("$rawContent",t.data),r}yield r;const o=[];if(e.withChildren!==!1)for(const a of this.domChildrenToView(t,e,o))r._appendChild(a);if(this._isInlineObjectElement(r))n.push(r),this._processDomInlineNodes(null,o,e);else for(const a of o)n.push(a)}}_processDomInlineNodes(t,e,n){if(!e.length||t&&!this.isDocumentFragment(t)&&!this._isBlockDomElement(t))return;let s=!1;for(let r=0;r<e.length;r++){const o=e[r];if(!o.is("$text")){s=!1;continue}let a,l=!1;if(this._isPreFormatted(o))a=M2(o.data);else{a=o.data.replace(/[ \n\t\r]{1,}/g," "),l=/[^\S\u00A0]/.test(a.charAt(a.length-1));const u=r>0?e[r-1]:null,h=r+1<e.length?e[r+1]:null,f=!u||u.is("element")&&u.name=="br"||s,g=h?!1:!Ui(o.data);n.withChildren!==!1&&(f&&(a=a.replace(/^ /,"")),g&&(a=a.replace(/ $/,""))),a=M2(a),this.blockFillerMode!="br"&&o.parent&&(qse(o.parent,a)?(a="",o.parent.parent&&(o.parent.parent._setCustomProperty("$hasBlockFiller",!0),o.parent._remove())):Wse(o.parent,a,this.blockElements)&&(a="",o.parent._setCustomProperty("$hasBlockFiller",!0))),a=a.replace(/ \u00A0/g,"  ");const p=h&&h.is("element")&&h.name!="br",y=h&&h.is("$text")&&h.data.charAt(0)==" ";(/[ \u00A0]\u00A0$/.test(a)||!h||p||y)&&(a=a.replace(/\u00A0$/," ")),(f||u&&u.is("element")&&u.name!="br")&&(a=a.replace(/^\u00A0/," "))}a.length==0&&o.parent?(o._remove(),e.splice(r,1),r--):(o._data=a,s=l)}e.length=0}_processDataFromViewText(t){let e=t.data;if(this._isPreFormatted(t))return e;if(e.charAt(0)==" "){const n=this._getTouchingInlineViewNode(t,!1);(n&&n.is("$textProxy")&&this._nodeEndsWithSpace(n)||!n)&&(e=" "+e.substr(1))}if(e.charAt(e.length-1)==" "){const n=this._getTouchingInlineViewNode(t,!0),s=n&&n.is("$textProxy")&&n.data.charAt(0)==" ";(e.charAt(e.length-2)==" "||!n||s)&&(e=e.substr(0,e.length-1)+" ")}return e.replace(/ {2}/g,"  ")}_nodeEndsWithSpace(t){if(this._isPreFormatted(t))return!1;const e=this._processDataFromViewText(t);return e.charAt(e.length-1)==" "}_isPreFormatted(t){if(Hse(t,this.preElements))return!0;for(const e of t.getAncestors({parentFirst:!0}))if(!(!e.is("element")||!e.hasStyle("white-space")||e.getStyle("white-space")==="inherit"))return["pre","pre-wrap","break-spaces"].includes(e.getStyle("white-space"));return!1}_getTouchingInlineViewNode(t,e){const n=new rl({startPosition:e?Ee._createAfter(t):Ee._createBefore(t),direction:e?"forward":"backward"});for(const{item:s}of n){if(s.is("$textProxy"))return s;if(s.is("element")&&s.getCustomProperty("dataPipeline:transparentRendering"))continue;if(s.is("element","br"))return null;if(this._isInlineObjectElement(s))return s;if(s.is("containerElement"))return null}return null}_isBlockDomElement(t){return this.isElement(t)&&this.blockElements.includes(t.tagName.toLowerCase())}_isBlockViewElement(t){return t.is("element")&&this.blockElements.includes(t.name)}_isInlineObjectElement(t){return t.is("element")?t.name=="br"||this.inlineObjectElements.includes(t.name)||!!this._inlineObjectElementMatcher.match(t):!1}_createViewElement(t,e){if(lh(t))return new Nb(this.document,"$comment");const n=e.keepOriginalCase?t.tagName:t.tagName.toLowerCase();return new mo(this.document,n)}_isViewElementWithRawContent(t,e){return e.withChildren!==!1&&t.is("element")&&!!this._rawContentElementMatcher.match(t)}_shouldRenameElement(t){const e=t.toLowerCase();return this.renderingMode==="editing"&&this.unsafeElements.includes(e)}_createReplacementDomElement(t,e){const n=this._domDocument.createElement("span");if(n.setAttribute(V2,t),e){for(;e.firstChild;)n.appendChild(e.firstChild);for(const s of e.getAttributeNames())n.setAttribute(s,e.getAttribute(s))}return n}}function Hse(i,t){return i.getAncestors().some(e=>e.is("element")&&t.includes(e.name))}function D2(i,t){let e=i;for(;e;)t(e),e=e.parentElement}function Use(i,t){return i.isEqualNode(zse)&&U4(i,t)&&i.parentNode.childNodes.length===1}function U4(i,t){const e=i.parentNode;return!!e&&!!e.tagName&&t.includes(e.tagName.toLowerCase())}function Wse(i,t,e){return t==" "&&i&&i.is("element")&&i.childCount==1&&e.includes(i.name)}function qse(i,t){return t==" "&&i&&i.is("element","span")&&i.childCount==1&&i.hasAttribute("data-cke-filler")}function B2(i){return i.is("element","br")&&i.hasAttribute("data-cke-filler")}function F2(i,t){return i.tagName==="BR"&&U4(i,t)&&i.parentNode.childNodes.length===1}function $2(i){i==="script"&&dt("domconverter-unsafe-script-element-detected"),i==="style"&&dt("domconverter-unsafe-style-element-detected")}function Gse(i){if(!Fe.isGecko||!i.rangeCount)return!1;const t=i.getRangeAt(0).startContainer;try{Object.prototype.toString.call(t)}catch{return!0}return!1}class Or extends hi(){constructor(e){super();b(this,"view");b(this,"document");b(this,"_isEnabled",!1);this.view=e,this.document=e.document}get isEnabled(){return this._isEnabled}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}destroy(){this.disable(),this.stopListening()}checkShouldIgnoreEventFromTarget(e){return e&&e.nodeType===3&&(e=e.parentNode),!e||e.nodeType!==1?!1:e.matches("[data-cke-ignore-events], [data-cke-ignore-events] *")}}class mu{constructor(t,e,n){b(this,"view");b(this,"document");b(this,"domEvent");b(this,"domTarget");this.view=t,this.document=t.document,this.domEvent=e,this.domTarget=e.target,MN(this,n)}get target(){return this.view.domConverter.mapDomToView(this.domTarget)}preventDefault(){this.domEvent.preventDefault()}stopPropagation(){this.domEvent.stopPropagation()}}class Nr extends Or{constructor(){super(...arguments);b(this,"useCapture",!1);b(this,"usePassive",!1)}observe(e){(typeof this.domEventType=="string"?[this.domEventType]:this.domEventType).forEach(s=>{this.listenTo(e,s,(r,o)=>{this.isEnabled&&!this.checkShouldIgnoreEventFromTarget(o.target)&&this.onDomEvent(o)},{useCapture:this.useCapture,usePassive:this.usePassive})})}stopObserving(e){this.stopListening(e)}fire(e,n,s){this.isEnabled&&this.document.fire(e,new mu(this.view,n,s))}}class Kse extends Nr{constructor(){super(...arguments);b(this,"domEventType",["keydown","keyup"])}onDomEvent(e){const n={keyCode:e.keyCode,altKey:e.altKey,ctrlKey:e.ctrlKey,shiftKey:e.shiftKey,metaKey:e.metaKey,get keystroke(){return Cl(this)}};this.fire(e.type,e,n)}}class Yse extends Or{constructor(e){super(e);b(this,"_fireSelectionChangeDoneDebounced");this._fireSelectionChangeDoneDebounced=ks(n=>{this.document.fire("selectionChangeDone",n)},200)}observe(){const e=this.document;e.on("arrowKey",(n,s)=>{e.selection.isFake&&this.isEnabled&&s.preventDefault()},{context:"$capture"}),e.on("arrowKey",(n,s)=>{e.selection.isFake&&this.isEnabled&&this._handleSelectionMove(s.keyCode)},{priority:"lowest"})}stopObserving(){}destroy(){super.destroy(),this._fireSelectionChangeDoneDebounced.cancel()}_handleSelectionMove(e){const n=this.document.selection,s=new oo(n.getRanges(),{backward:n.isBackward,fake:!1});(e==nt.arrowleft||e==nt.arrowup)&&s.setTo(s.getFirstPosition()),(e==nt.arrowright||e==nt.arrowdown)&&s.setTo(s.getLastPosition());const r={oldSelection:n,newSelection:s,domSelection:null};this.document.fire("selectionChange",r),this._fireSelectionChangeDoneDebounced(r)}}let W4=class extends Or{constructor(e){super(e);b(this,"domConverter");b(this,"_config");b(this,"_domElements");b(this,"_mutationObserver");this._config={childList:!0,characterData:!0,subtree:!0},this.domConverter=e.domConverter,this._domElements=new Set,this._mutationObserver=new window.MutationObserver(this._onMutations.bind(this))}flush(){this._onMutations(this._mutationObserver.takeRecords())}observe(e){this._domElements.add(e),this.isEnabled&&this._mutationObserver.observe(e,this._config)}stopObserving(e){if(this._domElements.delete(e),this.isEnabled){this._mutationObserver.disconnect();for(const n of this._domElements)this._mutationObserver.observe(n,this._config)}}enable(){super.enable();for(const e of this._domElements)this._mutationObserver.observe(e,this._config)}disable(){super.disable(),this._mutationObserver.disconnect()}destroy(){super.destroy(),this._mutationObserver.disconnect()}_onMutations(e){if(e.length===0)return;const n=this.domConverter,s=new Set,r=new Set;for(const a of e){const l=n.mapDomToView(a.target);l&&(l.is("uiElement")||l.is("rawElement")||a.type==="childList"&&!this._isBogusBrMutation(a)&&r.add(l))}for(const a of e){const l=n.mapDomToView(a.target);if(!(l&&(l.is("uiElement")||l.is("rawElement")))&&a.type==="characterData"){const u=n.findCorrespondingViewText(a.target);u&&!r.has(u.parent)?s.add(u):!u&&Ui(a.target)&&r.add(n.mapDomToView(a.target.parentNode))}}const o=[];for(const a of s)o.push({type:"text",node:a});for(const a of r){const l=n.mapViewToDom(a),u=Array.from(a.getChildren()),h=Array.from(n.domChildrenToView(l,{withChildren:!1}));Dne(u,h,Zse)||o.push({type:"children",node:a})}o.length&&this.document.fire("mutations",{mutations:o})}_isBogusBrMutation(e){let n=null;return e.nextSibling===null&&e.removedNodes.length===0&&e.addedNodes.length==1&&(n=this.domConverter.domToView(e.addedNodes[0],{withChildren:!1})),n&&n.is("element","br")}};function Zse(i,t){if(!Array.isArray(i))return i===t?!0:i.is("$text")&&t.is("$text")?i.data===t.data:!1}class Cp extends Nr{constructor(e){super(e);b(this,"_renderTimeoutId",null);b(this,"_isFocusChanging",!1);b(this,"domEventType",["focus","blur"]);this.useCapture=!0;const n=this.document;n.on("focus",()=>this._handleFocus()),n.on("blur",(s,r)=>this._handleBlur(r)),n.on("beforeinput",()=>{n.isFocused||this._handleFocus()},{priority:"highest"})}flush(){this._isFocusChanging&&(this._isFocusChanging=!1,this.document.isFocused=!0)}onDomEvent(e){this.fire(e.type,e)}destroy(){this._clearTimeout(),super.destroy()}_handleFocus(){this._clearTimeout(),this._isFocusChanging=!0,this._renderTimeoutId=setTimeout(()=>{this._renderTimeoutId=null,this.flush(),this.view.change(()=>{})},50)}_handleBlur(e){const n=this.document.selection.editableElement;(n===null||n===e.target)&&(this.document.isFocused=!1,this._isFocusChanging=!1,this.view.change(()=>{}))}_clearTimeout(){this._renderTimeoutId&&(clearTimeout(this._renderTimeoutId),this._renderTimeoutId=null)}}class Xse extends Or{constructor(e){super(e);b(this,"mutationObserver");b(this,"focusObserver");b(this,"selection");b(this,"domConverter");b(this,"_documents");b(this,"_fireSelectionChangeDoneDebounced");b(this,"_clearInfiniteLoopInterval");b(this,"_documentIsSelectingInactivityTimeoutDebounced");b(this,"_loopbackCounter");this.mutationObserver=e.getObserver(W4),this.focusObserver=e.getObserver(Cp),this.selection=this.document.selection,this.domConverter=e.domConverter,this._documents=new WeakSet,this._fireSelectionChangeDoneDebounced=ks(n=>{this.document.fire("selectionChangeDone",n)},200),this._clearInfiniteLoopInterval=setInterval(()=>this._clearInfiniteLoop(),1e3),this._documentIsSelectingInactivityTimeoutDebounced=ks(()=>this.document.isSelecting=!1,5e3),this._loopbackCounter=0}observe(e){const n=e.ownerDocument,s=()=>{this.document.isSelecting=!0,this._documentIsSelectingInactivityTimeoutDebounced()},r=()=>{this.document.isSelecting&&(this._handleSelectionChange(n),this.document.isSelecting=!1,this._documentIsSelectingInactivityTimeoutDebounced.cancel())};this.listenTo(e,"selectstart",s,{priority:"highest"}),this.listenTo(e,"keydown",r,{priority:"highest",useCapture:!0}),this.listenTo(e,"keyup",r,{priority:"highest",useCapture:!0}),!this._documents.has(n)&&(this.listenTo(n,"mouseup",r,{priority:"highest",useCapture:!0}),this.listenTo(n,"selectionchange",()=>{this.document.isComposing&&!Fe.isAndroid||(this._handleSelectionChange(n),this._documentIsSelectingInactivityTimeoutDebounced())}),this.listenTo(this.view.document,"compositionstart",()=>{this._handleSelectionChange(n)},{priority:"lowest"}),this._documents.add(n))}stopObserving(e){this.stopListening(e)}destroy(){super.destroy(),clearInterval(this._clearInfiniteLoopInterval),this._fireSelectionChangeDoneDebounced.cancel(),this._documentIsSelectingInactivityTimeoutDebounced.cancel()}_reportInfiniteLoop(){}_handleSelectionChange(e){if(!this.isEnabled)return;const n=e.defaultView.getSelection();if(this.checkShouldIgnoreEventFromTarget(n.anchorNode))return;this.mutationObserver.flush();const s=this.domConverter.domSelectionToView(n);if(s.rangeCount==0){this.view.hasDomSelection=!1;return}if(this.view.hasDomSelection=!0,this.focusObserver.flush(),!(this.selection.isEqual(s)&&this.domConverter.isDomSelectionCorrect(n))){if(++this._loopbackCounter>60){this._reportInfiniteLoop();return}if(this.selection.isSimilar(s))this.view.forceRender();else{const r={oldSelection:this.selection,newSelection:s,domSelection:n};this.document.fire("selectionChange",r),this._fireSelectionChangeDoneDebounced(r)}}}_clearInfiniteLoop(){this._loopbackCounter=0}}class Jse extends Nr{constructor(e){super(e);b(this,"domEventType",["compositionstart","compositionupdate","compositionend"]);const n=this.document;n.on("compositionstart",()=>{n.isComposing=!0},{priority:"low"}),n.on("compositionend",()=>{n.isComposing=!1},{priority:"low"})}onDomEvent(e){this.fire(e.type,e,{data:e.data})}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */let q4=class{constructor(t,e={}){b(this,"_files");b(this,"_native");this._files=e.cacheFiles?z2(t):null,this._native=t}get files(){return this._files||(this._files=z2(this._native)),this._files}get types(){return this._native.types}getData(t){return this._native.getData(t)}setData(t,e){this._native.setData(t,e)}set effectAllowed(t){this._native.effectAllowed=t}get effectAllowed(){return this._native.effectAllowed}set dropEffect(t){this._native.dropEffect=t}get dropEffect(){return this._native.dropEffect}setDragImage(t,e,n){this._native.setDragImage(t,e,n)}get isCanceled(){return this._native.dropEffect=="none"||!!this._native.mozUserCancelled}};function z2(i){const t=Array.from(i.files||[]),e=Array.from(i.items||[]);return t.length?t:e.filter(n=>n.kind==="file").map(n=>n.getAsFile())}class Qse extends Nr{constructor(){super(...arguments);b(this,"domEventType","beforeinput")}onDomEvent(e){const n=e.getTargetRanges(),s=this.view,r=s.document;let o=null,a=null,l=[];if(e.dataTransfer&&(o=new q4(e.dataTransfer)),e.data!==null?a=e.data:o&&(a=o.getData("text/plain")),r.selection.isFake)l=Array.from(r.selection.getRanges());else if(n.length)l=n.map(u=>{const h=s.domConverter.domPositionToView(u.startContainer,u.startOffset),f=s.domConverter.domPositionToView(u.endContainer,u.endOffset);if(h)return s.createRange(h,f);if(f)return s.createRange(f)}).filter(u=>!!u);else if(Fe.isAndroid){const u=e.target.ownerDocument.defaultView.getSelection();l=Array.from(s.domConverter.domSelectionToView(u).getRanges())}if(Fe.isAndroid&&e.inputType=="insertCompositionText"&&a&&a.endsWith(`
`)){this.fire(e.type,e,{inputType:"insertParagraph",targetRanges:[s.createRange(l[0].end)]});return}if(e.inputType=="insertText"&&a&&a.includes(`
`)){const u=a.split(/\n{1,2}/g);let h=l;for(let f=0;f<u.length;f++){const g=u[f];g!=""&&(this.fire(e.type,e,{data:g,dataTransfer:o,targetRanges:h,inputType:e.inputType,isComposing:e.isComposing}),h=[r.selection.getFirstRange()]),f+1<u.length&&(this.fire(e.type,e,{inputType:"insertParagraph",targetRanges:h}),h=[r.selection.getFirstRange()])}return}this.fire(e.type,e,{data:a,dataTransfer:o,targetRanges:l,inputType:e.inputType,isComposing:e.isComposing})}}class ere extends Or{constructor(t){super(t),this.document.on("keydown",(e,n)=>{if(this.isEnabled&&Die(n.keyCode)){const s=new Ou(this.document,"arrowKey",this.document.selection.getFirstRange());this.document.fire(s,n),s.stop.called&&e.stop()}})}observe(){}stopObserving(){}}class tre extends Or{constructor(t){super(t);const e=this.document;e.on("keydown",(n,s)=>{if(!this.isEnabled||s.keyCode!=nt.tab||s.ctrlKey)return;const r=new Ou(e,"tab",e.selection.getFirstRange());e.fire(r,s),r.stop.called&&n.stop()})}observe(){}stopObserving(){}}let nre=class extends yt(){constructor(e){super();b(this,"document");b(this,"domConverter");b(this,"domRoots",new Map);b(this,"_renderer");b(this,"_initialDomRootAttributes",new WeakMap);b(this,"_observers",new Map);b(this,"_writer");b(this,"_ongoingChange",!1);b(this,"_postFixersInProgress",!1);b(this,"_renderingDisabled",!1);b(this,"_hasChangedSinceTheLastRendering",!1);this.document=new Ob(e),this.domConverter=new Mb(this.document),this.set("isRenderingInProgress",!1),this.set("hasDomSelection",!1),this._renderer=new Ose(this.domConverter,this.document.selection),this._renderer.bind("isFocused","isSelecting","isComposing").to(this.document,"isFocused","isSelecting","isComposing"),this._writer=new F4(this.document),this.addObserver(W4),this.addObserver(Cp),this.addObserver(Xse),this.addObserver(Kse),this.addObserver(Yse),this.addObserver(Jse),this.addObserver(ere),this.addObserver(Qse),this.addObserver(tre),Ise(this),Ese(this),this.on("render",()=>{this._render(),this.document.fire("layoutChanged"),this._hasChangedSinceTheLastRendering=!1}),this.listenTo(this.document.selection,"change",()=>{this._hasChangedSinceTheLastRendering=!0}),this.listenTo(this.document,"change:isFocused",()=>{this._hasChangedSinceTheLastRendering=!0}),Fe.isiOS&&this.listenTo(this.document,"blur",(n,s)=>{this.domConverter.mapDomToView(s.domEvent.relatedTarget)||this.domConverter._clearDomSelection()}),this.listenTo(this.document,"mutations",(n,{mutations:s})=>{s.forEach(r=>this._renderer.markToSync(r.type,r.node))},{priority:"low"}),this.listenTo(this.document,"mutations",()=>{this.forceRender()},{priority:"lowest"})}attachDomRoot(e,n="main"){const s=this.document.getRoot(n);s._name=e.tagName.toLowerCase();const r={};for(const{name:a,value:l}of Array.from(e.attributes))r[a]=l,a==="class"?this._writer.addClass(l.split(" "),s):s.hasAttribute(a)||this._writer.setAttribute(a,l,s);this._initialDomRootAttributes.set(e,r);const o=()=>{this._writer.setAttribute("contenteditable",(!s.isReadOnly).toString(),s),s.isReadOnly?this._writer.addClass("ck-read-only",s):this._writer.removeClass("ck-read-only",s)};o(),this.domRoots.set(n,e),this.domConverter.bindElements(e,s),this._renderer.markToSync("children",s),this._renderer.markToSync("attributes",s),this._renderer.domDocuments.add(e.ownerDocument),s.on("change:children",(a,l)=>this._renderer.markToSync("children",l)),s.on("change:attributes",(a,l)=>this._renderer.markToSync("attributes",l)),s.on("change:text",(a,l)=>this._renderer.markToSync("text",l)),s.on("change:isReadOnly",()=>this.change(o)),s.on("change",()=>{this._hasChangedSinceTheLastRendering=!0});for(const a of this._observers.values())a.observe(e,n)}detachDomRoot(e){const n=this.domRoots.get(e);Array.from(n.attributes).forEach(({name:r})=>n.removeAttribute(r));const s=this._initialDomRootAttributes.get(n);for(const r in s)n.setAttribute(r,s[r]);this.domRoots.delete(e),this.domConverter.unbindDomElement(n);for(const r of this._observers.values())r.stopObserving(n)}getDomRoot(e="main"){return this.domRoots.get(e)}addObserver(e){let n=this._observers.get(e);if(n)return n;n=new e(this),this._observers.set(e,n);for(const[s,r]of this.domRoots)n.observe(r,s);return n.enable(),n}getObserver(e){return this._observers.get(e)}disableObservers(){for(const e of this._observers.values())e.disable()}enableObservers(){for(const e of this._observers.values())e.enable()}scrollToTheSelection({alignToTop:e,forceScroll:n,viewportOffset:s=20,ancestorOffset:r=20}={}){const o=this.document.selection.getFirstRange();if(!o)return;const a=ar({alignToTop:e,forceScroll:n,viewportOffset:s,ancestorOffset:r});typeof s=="number"&&(s={top:s,bottom:s,left:s,right:s});const l={target:this.domConverter.viewRangeToDom(o),viewportOffset:s,ancestorOffset:r,alignToTop:e,forceScroll:n};this.fire("scrollToTheSelection",l,a),Iie(l)}focus(){if(!this.document.isFocused){const e=this.document.selection.editableElement;e&&(this.domConverter.focus(e),this.forceRender())}}change(e){if(this.isRenderingInProgress||this._postFixersInProgress)throw new D("cannot-change-view-tree",this);try{if(this._ongoingChange)return e(this._writer);this._ongoingChange=!0;const n=e(this._writer);return this._ongoingChange=!1,!this._renderingDisabled&&this._hasChangedSinceTheLastRendering&&(this._postFixersInProgress=!0,this.document._callPostFixers(this._writer),this._postFixersInProgress=!1,this.fire("render")),n}catch(n){/* istanbul ignore next -- @preserve */D.rethrowUnexpectedError(n,this)}}forceRender(){this._hasChangedSinceTheLastRendering=!0,this.getObserver(Cp).flush(),this.change(()=>{})}destroy(){for(const e of this._observers.values())e.destroy();this.document.destroy(),this.stopListening()}createPositionAt(e,n){return Ee._createAt(e,n)}createPositionAfter(e){return Ee._createAfter(e)}createPositionBefore(e){return Ee._createBefore(e)}createRange(e,n){return new ot(e,n)}createRangeOn(e){return ot._createOn(e)}createRangeIn(e){return ot._createIn(e)}createSelection(...e){return new oo(...e)}_disableRendering(e){this._renderingDisabled=e,e==!1&&this.change(()=>{})}_render(){this.isRenderingInProgress=!0,this.disableObservers(),this._renderer.render(),this.enableObservers(),this.isRenderingInProgress=!1}};/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class ka{is(){throw new Error("is() method is abstract")}}class Ks extends ka{constructor(e,n,s){super();b(this,"textNode");b(this,"data");b(this,"offsetInText");if(this.textNode=e,n<0||n>e.offsetSize)throw new D("model-textproxy-wrong-offsetintext",this);if(s<0||n+s>e.offsetSize)throw new D("model-textproxy-wrong-length",this);this.data=e.data.substring(n,n+s),this.offsetInText=n}get startOffset(){return this.textNode.startOffset!==null?this.textNode.startOffset+this.offsetInText:null}get offsetSize(){return this.data.length}get endOffset(){return this.startOffset!==null?this.startOffset+this.offsetSize:null}get isPartial(){return this.offsetSize!==this.textNode.offsetSize}get parent(){return this.textNode.parent}get root(){return this.textNode.root}getPath(){const e=this.textNode.getPath();return e.length>0&&(e[e.length-1]+=this.offsetInText),e}getAncestors(e={}){const n=[];let s=e.includeSelf?this:this.parent;for(;s;)n[e.parentFirst?"push":"unshift"](s),s=s.parent;return n}hasAttribute(e){return this.textNode.hasAttribute(e)}getAttribute(e){return this.textNode.getAttribute(e)}getAttributes(){return this.textNode.getAttributes()}getAttributeKeys(){return this.textNode.getAttributeKeys()}}Ks.prototype.is=function(i){return i==="$textProxy"||i==="model:$textProxy"||i==="textProxy"||i==="model:textProxy"};class to{constructor(t){b(this,"direction");b(this,"boundaries");b(this,"singleCharacters");b(this,"shallow");b(this,"ignoreElementEnd");b(this,"_position");b(this,"_boundaryStartParent");b(this,"_boundaryEndParent");b(this,"_visitedParent");if(!t||!t.boundaries&&!t.startPosition)throw new D("model-tree-walker-no-start-position",null);const e=t.direction||"forward";if(e!="forward"&&e!="backward")throw new D("model-tree-walker-unknown-direction",t,{direction:e});this.direction=e,this.boundaries=t.boundaries||null,t.startPosition?this._position=t.startPosition.clone():this._position=se._createAt(this.boundaries[this.direction=="backward"?"end":"start"]),this.position.stickiness="toNone",this.singleCharacters=!!t.singleCharacters,this.shallow=!!t.shallow,this.ignoreElementEnd=!!t.ignoreElementEnd,this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null,this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null,this._visitedParent=this.position.parent}[Symbol.iterator](){return this}get position(){return this._position}skip(t){let e,n,s,r;do s=this.position,r=this._visitedParent,{done:e,value:n}=this.next();while(!e&&t(n));e||(this._position=s,this._visitedParent=r)}jumpTo(t){this._boundaryStartParent&&t.isBefore(this.boundaries.start)?t=this.boundaries.start:this._boundaryEndParent&&t.isAfter(this.boundaries.end)&&(t=this.boundaries.end),this._position=t.clone(),this._visitedParent=t.parent}next(){return this.direction=="forward"?this._next():this._previous()}_next(){const t=this.position,e=this.position.clone(),n=this._visitedParent;if(n.parent===null&&e.offset===n.maxOffset)return{done:!0,value:void 0};if(n===this._boundaryEndParent&&e.offset==this.boundaries.end.offset)return{done:!0,value:void 0};const s=uh(e,n),r=s||G4(e,n,s);if(r&&r.is("model:element")){if(!this.shallow)e.path.push(0),this._visitedParent=r;else{if(this.boundaries&&this.boundaries.end.isBefore(e))return{done:!0,value:void 0};e.offset++}return this._position=e,Ka("elementStart",r,t,e,1)}if(r&&r.is("model:$text")){let o;if(this.singleCharacters)o=1;else{let u=r.endOffset;this._boundaryEndParent==n&&this.boundaries.end.offset<u&&(u=this.boundaries.end.offset),o=u-e.offset}const a=e.offset-r.startOffset,l=new Ks(r,a,o);return e.offset+=o,this._position=e,Ka("text",l,t,e,o)}return e.path.pop(),e.offset++,this._position=e,this._visitedParent=n.parent,this.ignoreElementEnd?this._next():Ka("elementEnd",n,t,e)}_previous(){const t=this.position,e=this.position.clone(),n=this._visitedParent;if(n.parent===null&&e.offset===0)return{done:!0,value:void 0};if(n==this._boundaryStartParent&&e.offset==this.boundaries.start.offset)return{done:!0,value:void 0};const s=e.parent,r=uh(e,s),o=r||K4(e,s,r);if(o&&o.is("model:element"))return e.offset--,this.shallow?(this._position=e,Ka("elementStart",o,t,e,1)):(e.path.push(o.maxOffset),this._position=e,this._visitedParent=o,this.ignoreElementEnd?this._previous():Ka("elementEnd",o,t,e));if(o&&o.is("model:$text")){let a;if(this.singleCharacters)a=1;else{let h=o.startOffset;this._boundaryStartParent==n&&this.boundaries.start.offset>h&&(h=this.boundaries.start.offset),a=e.offset-h}const l=e.offset-o.startOffset,u=new Ks(o,l-a,a);return e.offset-=a,this._position=e,Ka("text",u,t,e,a)}return e.path.pop(),this._position=e,this._visitedParent=n.parent,Ka("elementStart",n,t,e,1)}}function Ka(i,t,e,n,s){return{done:!1,value:{type:i,item:t,previousPosition:e,nextPosition:n,length:s}}}class se extends ka{constructor(e,n,s="toNone"){super();b(this,"root");b(this,"path");b(this,"stickiness");if(!e.is("element")&&!e.is("documentFragment"))throw new D("model-position-root-invalid",e);if(!Array.isArray(n)||n.length===0)throw new D("model-position-path-incorrect-format",e,{path:n});e.is("rootElement")?n=n.slice():(n=[...e.getPath(),...n],e=e.root),this.root=e,this.path=n,this.stickiness=s}get offset(){return this.path[this.path.length-1]}set offset(e){this.path[this.path.length-1]=e}get parent(){let e=this.root;for(let n=0;n<this.path.length-1;n++)if(e=e.getChildAtOffset(this.path[n]),!e)throw new D("model-position-path-incorrect",this,{position:this});if(e.is("$text"))throw new D("model-position-path-incorrect",this,{position:this});return e}get index(){return this.parent.offsetToIndex(this.offset)}get textNode(){return uh(this,this.parent)}get nodeAfter(){const e=this.parent;return G4(this,e,uh(this,e))}get nodeBefore(){const e=this.parent;return K4(this,e,uh(this,e))}get isAtStart(){return this.offset===0}get isAtEnd(){return this.offset==this.parent.maxOffset}isValid(){if(this.offset<0)return!1;let e=this.root;for(let n=0;n<this.path.length-1;n++)if(e=e.getChildAtOffset(this.path[n]),!e)return!1;return this.offset<=e.maxOffset}compareWith(e){if(this.root!=e.root)return"different";const n=Jn(this.path,e.path);switch(n){case"same":return"same";case"prefix":return"before";case"extension":return"after";default:return this.path[n]<e.path[n]?"before":"after"}}getLastMatchingPosition(e,n={}){n.startPosition=this;const s=new to(n);return s.skip(e),s.position}getParentPath(){return this.path.slice(0,-1)}getAncestors(){const e=this.parent;return e.is("documentFragment")?[e]:e.getAncestors({includeSelf:!0})}findAncestor(e){const n=this.parent;return n.is("element")?n.findAncestor(e,{includeSelf:!0}):null}getCommonPath(e){if(this.root!=e.root)return[];const n=Jn(this.path,e.path),s=typeof n=="string"?Math.min(this.path.length,e.path.length):n;return this.path.slice(0,s)}getCommonAncestor(e){const n=this.getAncestors(),s=e.getAncestors();let r=0;for(;n[r]==s[r]&&n[r];)r++;return r===0?null:n[r-1]}getShiftedBy(e){const n=this.clone(),s=n.offset+e;return n.offset=s<0?0:s,n}isAfter(e){return this.compareWith(e)=="after"}isBefore(e){return this.compareWith(e)=="before"}isEqual(e){return this.compareWith(e)=="same"}isTouching(e){if(this.root!==e.root)return!1;const n=Math.min(this.path.length,e.path.length);for(let s=0;s<n;s++){const r=this.path[s]-e.path[s];if(r<-1||r>1)return!1;if(r===1)return j2(e,this,s);if(r===-1)return j2(this,e,s)}return this.path.length===e.path.length?!0:this.path.length>e.path.length?Iy(this.path,n):Iy(e.path,n)}hasSameParentAs(e){if(this.root!==e.root)return!1;const n=this.getParentPath(),s=e.getParentPath();return Jn(n,s)=="same"}getTransformedByOperation(e){let n;switch(e.type){case"insert":n=this._getTransformedByInsertOperation(e);break;case"move":case"remove":case"reinsert":n=this._getTransformedByMoveOperation(e);break;case"split":n=this._getTransformedBySplitOperation(e);break;case"merge":n=this._getTransformedByMergeOperation(e);break;default:n=se._createAt(this);break}return n}_getTransformedByInsertOperation(e){return this._getTransformedByInsertion(e.position,e.howMany)}_getTransformedByMoveOperation(e){return this._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany)}_getTransformedBySplitOperation(e){const n=e.movedRange;return n.containsPosition(this)||n.start.isEqual(this)&&this.stickiness=="toNext"?this._getCombined(e.splitPosition,e.moveTargetPosition):e.graveyardPosition?this._getTransformedByMove(e.graveyardPosition,e.insertionPosition,1):this._getTransformedByInsertion(e.insertionPosition,1)}_getTransformedByMergeOperation(e){const n=e.movedRange,s=n.containsPosition(this)||n.start.isEqual(this);let r;return s?(r=this._getCombined(e.sourcePosition,e.targetPosition),e.sourcePosition.isBefore(e.targetPosition)&&(r=r._getTransformedByDeletion(e.deletionPosition,1))):this.isEqual(e.deletionPosition)?r=se._createAt(e.deletionPosition):r=this._getTransformedByMove(e.deletionPosition,e.graveyardPosition,1),r}_getTransformedByDeletion(e,n){const s=se._createAt(this);if(this.root!=e.root)return s;if(Jn(e.getParentPath(),this.getParentPath())=="same"){if(e.offset<this.offset){if(e.offset+n>this.offset)return null;s.offset-=n}}else if(Jn(e.getParentPath(),this.getParentPath())=="prefix"){const r=e.path.length-1;if(e.offset<=this.path[r]){if(e.offset+n>this.path[r])return null;s.path[r]-=n}}return s}_getTransformedByInsertion(e,n){const s=se._createAt(this);if(this.root!=e.root)return s;if(Jn(e.getParentPath(),this.getParentPath())=="same")(e.offset<this.offset||e.offset==this.offset&&this.stickiness!="toPrevious")&&(s.offset+=n);else if(Jn(e.getParentPath(),this.getParentPath())=="prefix"){const r=e.path.length-1;e.offset<=this.path[r]&&(s.path[r]+=n)}return s}_getTransformedByMove(e,n,s){if(n=n._getTransformedByDeletion(e,s),e.isEqual(n))return se._createAt(this);const r=this._getTransformedByDeletion(e,s);return r===null||e.isEqual(this)&&this.stickiness=="toNext"||e.getShiftedBy(s).isEqual(this)&&this.stickiness=="toPrevious"?this._getCombined(e,n):r._getTransformedByInsertion(n,s)}_getCombined(e,n){const s=e.path.length-1,r=se._createAt(n);return r.stickiness=this.stickiness,r.offset=r.offset+this.path[s]-e.offset,r.path=[...r.path,...this.path.slice(s+1)],r}toJSON(){return{root:this.root.toJSON(),path:Array.from(this.path),stickiness:this.stickiness}}clone(){return new this.constructor(this.root,this.path,this.stickiness)}static _createAt(e,n,s="toNone"){if(e.is("model:position"))return new se(e.root,e.path,e.stickiness);{const r=e;if(n=="end")n=r.maxOffset;else{if(n=="before")return this._createBefore(r,s);if(n=="after")return this._createAfter(r,s);if(n!==0&&!n)throw new D("model-createpositionat-offset-required",[this,e])}if(!r.is("element")&&!r.is("documentFragment"))throw new D("model-position-parent-incorrect",[this,e]);const o=r.getPath();return o.push(n),new this(r.root,o,s)}}static _createAfter(e,n){if(!e.parent)throw new D("model-position-after-root",[this,e],{root:e});return this._createAt(e.parent,e.endOffset,n)}static _createBefore(e,n){if(!e.parent)throw new D("model-position-before-root",e,{root:e});return this._createAt(e.parent,e.startOffset,n)}static fromJSON(e,n){if(e.root==="$graveyard"){const s=new se(n.graveyard,e.path);return s.stickiness=e.stickiness,s}if(!n.getRoot(e.root))throw new D("model-position-fromjson-no-root",n,{rootName:e.root});return new se(n.getRoot(e.root),e.path,e.stickiness)}}se.prototype.is=function(i){return i==="position"||i==="model:position"};function uh(i,t){const e=t.getChildAtOffset(i.offset);return e&&e.is("$text")&&e.startOffset<i.offset?e:null}function G4(i,t,e){return e!==null?null:t.getChildAtOffset(i.offset)}function K4(i,t,e){return e!==null?null:t.getChild(t.offsetToIndex(i.offset)-1)}function j2(i,t,e){return!(e+1===i.path.length||!Iy(t.path,e+1)||!ire(i,e+1))}function Iy(i,t){for(;t<i.length;){if(i[t]!==0)return!1;t++}return!0}function ire(i,t){let e=i.parent,n=i.path.length-1,s=0;for(;n>=t;){if(i.path[n]+s!==e.maxOffset)return!1;s=1,n--,e=e.parent}return!0}class Z extends ka{constructor(e,n){super();b(this,"start");b(this,"end");this.start=se._createAt(e),this.end=n?se._createAt(n):se._createAt(e),this.start.stickiness=this.isCollapsed?"toNone":"toNext",this.end.stickiness=this.isCollapsed?"toNone":"toPrevious"}*[Symbol.iterator](){yield*new to({boundaries:this,ignoreElementEnd:!0})}get isCollapsed(){return this.start.isEqual(this.end)}get isFlat(){const e=this.start.getParentPath(),n=this.end.getParentPath();return Jn(e,n)=="same"}get root(){return this.start.root}containsPosition(e){return e.isAfter(this.start)&&e.isBefore(this.end)}containsRange(e,n=!1){e.isCollapsed&&(n=!1);const s=this.containsPosition(e.start)||n&&this.start.isEqual(e.start),r=this.containsPosition(e.end)||n&&this.end.isEqual(e.end);return s&&r}containsItem(e){const n=se._createBefore(e);return this.containsPosition(n)||this.start.isEqual(n)}isEqual(e){return this.start.isEqual(e.start)&&this.end.isEqual(e.end)}isIntersecting(e){return this.start.isBefore(e.end)&&this.end.isAfter(e.start)}getDifference(e){const n=[];return this.isIntersecting(e)?(this.containsPosition(e.start)&&n.push(new Z(this.start,e.start)),this.containsPosition(e.end)&&n.push(new Z(e.end,this.end))):n.push(new Z(this.start,this.end)),n}getIntersection(e){if(this.isIntersecting(e)){let n=this.start,s=this.end;return this.containsPosition(e.start)&&(n=e.start),this.containsPosition(e.end)&&(s=e.end),new Z(n,s)}return null}getJoined(e,n=!1){let s=this.isIntersecting(e);if(s||(this.start.isBefore(e.start)?s=n?this.end.isTouching(e.start):this.end.isEqual(e.start):s=n?e.end.isTouching(this.start):e.end.isEqual(this.start)),!s)return null;let r=this.start,o=this.end;return e.start.isBefore(r)&&(r=e.start),e.end.isAfter(o)&&(o=e.end),new Z(r,o)}getMinimalFlatRanges(){const e=[],n=this.start.getCommonPath(this.end).length,s=se._createAt(this.start);let r=s.parent;for(;s.path.length>n+1;){const o=r.maxOffset-s.offset;o!==0&&e.push(new Z(s,s.getShiftedBy(o))),s.path=s.path.slice(0,-1),s.offset++,r=r.parent}for(;s.path.length<=this.end.path.length;){const o=this.end.path[s.path.length-1],a=o-s.offset;a!==0&&e.push(new Z(s,s.getShiftedBy(a))),s.offset=o,s.path.push(0)}return e}getWalker(e={}){return e.boundaries=this,new to(e)}*getItems(e={}){e.boundaries=this,e.ignoreElementEnd=!0;const n=new to(e);for(const s of n)yield s.item}*getPositions(e={}){e.boundaries=this;const n=new to(e);yield n.position;for(const s of n)yield s.nextPosition}getTransformedByOperation(e){switch(e.type){case"insert":return this._getTransformedByInsertOperation(e);case"move":case"remove":case"reinsert":return this._getTransformedByMoveOperation(e);case"split":return[this._getTransformedBySplitOperation(e)];case"merge":return[this._getTransformedByMergeOperation(e)]}return[new Z(this.start,this.end)]}getTransformedByOperations(e){const n=[new Z(this.start,this.end)];for(const s of e)for(let r=0;r<n.length;r++){const o=n[r].getTransformedByOperation(s);n.splice(r,1,...o),r+=o.length-1}for(let s=0;s<n.length;s++){const r=n[s];for(let o=s+1;o<n.length;o++){const a=n[o];(r.containsRange(a)||a.containsRange(r)||r.isEqual(a))&&n.splice(o,1)}}return n}getCommonAncestor(){return this.start.getCommonAncestor(this.end)}getContainedElement(){if(this.isCollapsed)return null;const e=this.start.nodeAfter,n=this.end.nodeBefore;return e&&e.is("element")&&e===n?e:null}toJSON(){return{start:this.start.toJSON(),end:this.end.toJSON()}}clone(){return new this.constructor(this.start,this.end)}_getTransformedByInsertOperation(e,n=!1){return this._getTransformedByInsertion(e.position,e.howMany,n)}_getTransformedByMoveOperation(e,n=!1){const s=e.sourcePosition,r=e.howMany,o=e.targetPosition;return this._getTransformedByMove(s,o,r,n)}_getTransformedBySplitOperation(e){const n=this.start._getTransformedBySplitOperation(e);let s=this.end._getTransformedBySplitOperation(e);return this.end.isEqual(e.insertionPosition)&&(s=this.end.getShiftedBy(1)),n.root!=s.root&&(s=this.end.getShiftedBy(-1)),new Z(n,s)}_getTransformedByMergeOperation(e){if(this.start.isEqual(e.targetPosition)&&this.end.isEqual(e.deletionPosition))return new Z(this.start);let n=this.start._getTransformedByMergeOperation(e),s=this.end._getTransformedByMergeOperation(e);return n.root!=s.root&&(s=this.end.getShiftedBy(-1)),n.isAfter(s)?(e.sourcePosition.isBefore(e.targetPosition)?(n=se._createAt(s),n.offset=0):(e.deletionPosition.isEqual(n)||(s=e.deletionPosition),n=e.targetPosition),new Z(n,s)):new Z(n,s)}_getTransformedByInsertion(e,n,s=!1){if(s&&this.containsPosition(e))return[new Z(this.start,e),new Z(e.getShiftedBy(n),this.end._getTransformedByInsertion(e,n))];{const r=new Z(this.start,this.end);return r.start=r.start._getTransformedByInsertion(e,n),r.end=r.end._getTransformedByInsertion(e,n),[r]}}_getTransformedByMove(e,n,s,r=!1){if(this.isCollapsed){const g=this.start._getTransformedByMove(e,n,s);return[new Z(g)]}const o=Z._createFromPositionAndShift(e,s),a=n._getTransformedByDeletion(e,s);if(this.containsPosition(n)&&!r&&(o.containsPosition(this.start)||o.containsPosition(this.end))){const g=this.start._getTransformedByMove(e,n,s),p=this.end._getTransformedByMove(e,n,s);return[new Z(g,p)]}let l;const u=this.getDifference(o);let h=null;const f=this.getIntersection(o);if(u.length==1?h=new Z(u[0].start._getTransformedByDeletion(e,s),u[0].end._getTransformedByDeletion(e,s)):u.length==2&&(h=new Z(this.start,this.end._getTransformedByDeletion(e,s))),h?l=h._getTransformedByInsertion(a,s,f!==null||r):l=[],f){const g=new Z(f.start._getCombined(o.start,a),f.end._getCombined(o.start,a));l.length==2?l.splice(1,0,g):l.push(g)}return l}_getTransformedByDeletion(e,n){let s=this.start._getTransformedByDeletion(e,n),r=this.end._getTransformedByDeletion(e,n);return s==null&&r==null?null:(s==null&&(s=e),r==null&&(r=e),new Z(s,r))}static _createFromPositionAndShift(e,n){const s=e,r=e.getShiftedBy(n);return n>0?new this(s,r):new this(r,s)}static _createIn(e){return new this(se._createAt(e,0),se._createAt(e,e.maxOffset))}static _createOn(e){return this._createFromPositionAndShift(se._createBefore(e),e.offsetSize)}static _createFromRanges(e){if(e.length===0)throw new D("range-create-from-ranges-empty-array",null);if(e.length==1)return e[0].clone();const n=e[0];e.sort((o,a)=>o.start.isAfter(a.start)?1:-1);const s=e.indexOf(n),r=new this(n.start,n.end);for(let o=s-1;o>=0&&e[o].end.isEqual(r.start);o--)r.start=se._createAt(e[o].start);for(let o=s+1;o<e.length&&e[o].start.isEqual(r.end);o++)r.end=se._createAt(e[o].end);return r}static fromJSON(e,n){return new this(se.fromJSON(e.start,n),se.fromJSON(e.end,n))}}Z.prototype.is=function(i){return i==="range"||i==="model:range"};class Y4 extends Ct(){constructor(){super();b(this,"_modelToViewMapping",new WeakMap);b(this,"_viewToModelMapping",new WeakMap);b(this,"_viewToModelLengthCallbacks",new Map);b(this,"_markerNameToElements",new Map);b(this,"_elementToMarkerNames",new Map);b(this,"_deferredBindingRemovals",new Map);b(this,"_unboundMarkerNames",new Set);b(this,"_cache",new sre);this.on("modelToViewPosition",(e,n)=>{if(n.viewPosition)return;const s=this._modelToViewMapping.get(n.modelPosition.parent);if(!s)throw new D("mapping-model-position-view-parent-not-found",this,{modelPosition:n.modelPosition});n.viewPosition=this.findPositionIn(s,n.modelPosition.offset)},{priority:"low"}),this.on("viewToModelPosition",(e,n)=>{if(n.modelPosition)return;const s=this.findMappedViewAncestor(n.viewPosition),r=this._viewToModelMapping.get(s),o=this._toModelOffset(n.viewPosition.parent,n.viewPosition.offset,s);n.modelPosition=se._createAt(r,o)},{priority:"low"})}bindElements(e,n){this._modelToViewMapping.set(e,n),this._viewToModelMapping.set(n,e)}unbindViewElement(e,n={}){const s=this.toModelElement(e);if(this._elementToMarkerNames.has(e))for(const r of this._elementToMarkerNames.get(e))this._unboundMarkerNames.add(r);n.defer?this._deferredBindingRemovals.set(e,e.root):(this._viewToModelMapping.delete(e)&&this._cache.stopTracking(e),this._modelToViewMapping.get(s)==e&&this._modelToViewMapping.delete(s))}unbindModelElement(e){const n=this.toViewElement(e);this._modelToViewMapping.delete(e),this._viewToModelMapping.get(n)==e&&this._viewToModelMapping.delete(n)&&this._cache.stopTracking(n)}bindElementToMarker(e,n){const s=this._markerNameToElements.get(n)||new Set;s.add(e);const r=this._elementToMarkerNames.get(e)||new Set;r.add(n),this._markerNameToElements.set(n,s),this._elementToMarkerNames.set(e,r)}unbindElementFromMarkerName(e,n){const s=this._markerNameToElements.get(n);s&&(s.delete(e),s.size==0&&this._markerNameToElements.delete(n));const r=this._elementToMarkerNames.get(e);r&&(r.delete(n),r.size==0&&this._elementToMarkerNames.delete(e))}flushUnboundMarkerNames(){const e=Array.from(this._unboundMarkerNames);return this._unboundMarkerNames.clear(),e}flushDeferredBindings(){for(const[e,n]of this._deferredBindingRemovals)e.root==n&&this.unbindViewElement(e);this._deferredBindingRemovals=new Map}clearBindings(){this._modelToViewMapping=new WeakMap,this._viewToModelMapping=new WeakMap,this._markerNameToElements=new Map,this._elementToMarkerNames=new Map,this._unboundMarkerNames=new Set,this._deferredBindingRemovals=new Map}toModelElement(e){return this._viewToModelMapping.get(e)}toViewElement(e){return this._modelToViewMapping.get(e)}toModelRange(e){return new Z(this.toModelPosition(e.start),this.toModelPosition(e.end))}toViewRange(e){return new ot(this.toViewPosition(e.start),this.toViewPosition(e.end))}toModelPosition(e){const n={viewPosition:e,mapper:this};return this.fire("viewToModelPosition",n),n.modelPosition}toViewPosition(e,n={}){const s={modelPosition:e,mapper:this,isPhantom:n.isPhantom};return this.fire("modelToViewPosition",s),s.viewPosition}markerNameToElements(e){const n=this._markerNameToElements.get(e);if(!n)return null;const s=new Set;for(const r of n)if(r.is("attributeElement"))for(const o of r.getElementsWithSameId())s.add(o);else s.add(r);return s}registerViewToModelLength(e,n){this._viewToModelLengthCallbacks.set(e,n)}findMappedViewAncestor(e){let n=e.parent;for(;!this._viewToModelMapping.has(n);)n=n.parent;return n}_toModelOffset(e,n,s){if(s!=e){const o=this._toModelOffset(e.parent,e.index,s),a=this._toModelOffset(e,n,e);return o+a}if(e.is("$text"))return n;let r=0;for(let o=0;o<n;o++)r+=this.getModelLength(e.getChild(o));return r}getModelLength(e){const n=[e];let s=0;for(;n.length>0;){const r=n.pop(),o=r.name&&this._viewToModelLengthCallbacks.size>0&&this._viewToModelLengthCallbacks.get(r.name);if(o)s+=o(r);else if(this._viewToModelMapping.has(r))s+=1;else if(r.is("$text"))s+=r.data.length;else{if(r.is("uiElement"))continue;for(const a of r.getChildren())n.push(a)}}return s}findPositionIn(e,n){if(n===0)return this._moveViewPositionToTextNode(new Ee(e,0));if(this._viewToModelLengthCallbacks.size==0&&this._viewToModelMapping.has(e)){const r=this._cache.getClosest(e,n);return this._findPositionStartingFrom(r.viewPosition,r.modelOffset,n,e,!0)}else return this._findPositionStartingFrom(new Ee(e,0),0,n,e,!1)}_findPositionStartingFrom(e,n,s,r,o){let a=e.parent,l=e.offset;if(a.is("$text"))return new Ee(a,s-n);let u,h=n,f=0;for(;h<s;){if(u=a.getChild(l),!u){if(a==r)throw new D("mapping-model-offset-not-found",this,{modelOffset:s,viewContainer:r});l=a.parent.getChildIndex(a)+1,a=a.parent;continue}f=this.getModelLength(u),h+=f,l++,o&&this._cache.save(a,l,r,h)}return h==s?this._moveViewPositionToTextNode(new Ee(a,l)):this._findPositionStartingFrom(new Ee(u,0),h-f,s,r,o)}_moveViewPositionToTextNode(e){const n=e.nodeBefore,s=e.nodeAfter;return n&&n.is("view:$text")?new Ee(n,n.data.length):s&&s.is("view:$text")?new Ee(s,0):e}}class sre extends Ct(){constructor(){super(...arguments);b(this,"_cachedMapping",new WeakMap);b(this,"_nodeToCacheListIndex",new WeakMap);b(this,"_invalidateOnChildrenChangeCallback",(e,n,s)=>{this._clearCacheInsideParent(n,s.index)});b(this,"_invalidateOnTextChangeCallback",(e,n)=>{this._clearCacheStartingBefore(n)})}save(e,n,s,r){const o=this._cachedMapping.get(s),a=o.cacheMap.get(r);if(a){const f=e.getChild(n-1),g=a.viewPosition.nodeBefore?this._nodeToCacheListIndex.get(a.viewPosition.nodeBefore):0;this._nodeToCacheListIndex.set(f,g);return}const u={viewPosition:new Ee(e,n),modelOffset:r};o.maxModelOffset=r>o.maxModelOffset?r:o.maxModelOffset,o.cacheMap.set(r,u);let h=o.cacheList.length-1;for(;h>=0&&o.cacheList[h].modelOffset>r;)h--;if(o.cacheList.splice(h+1,0,u),n>0){const f=e.getChild(n-1);this._nodeToCacheListIndex.set(f,h+1)}}getClosest(e,n){const s=this._cachedMapping.get(e);let r;if(s)if(n>s.maxModelOffset)r=s.cacheList[s.cacheList.length-1];else{const a=s.cacheMap.get(n);a?r=a:r=this._findInCacheList(s.cacheList,n)}else r=this.startTracking(e);const o=this._hoistViewPosition(r.viewPosition);return{modelOffset:r.modelOffset,viewPosition:o}}_hoistViewPosition(e){for(;e.parent.parent&&!this._cachedMapping.has(e.parent)&&e.isAtEnd;){const n=e.parent.parent,s=n.getChildIndex(e.parent)+1;e=new Ee(n,s)}return e}startTracking(e){const s={viewPosition:new Ee(e,0),modelOffset:0},r={maxModelOffset:0,cacheList:[s],cacheMap:new Map([[0,s]])};return this._cachedMapping.set(e,r),e.on("change:children",this._invalidateOnChildrenChangeCallback),e.on("change:text",this._invalidateOnTextChangeCallback),s}stopTracking(e){e.off("change:children",this._invalidateOnChildrenChangeCallback),e.off("change:text",this._invalidateOnTextChangeCallback),this._cachedMapping.delete(e)}_clearCacheInsideParent(e,n){if(n==0)this._cachedMapping.has(e)?this._clearCacheAll(e):this._clearCacheStartingBefore(e);else{const s=e.getChild(n-1);this._clearCacheStartingBefore(s)}}_clearCacheAll(e){const n=this._cachedMapping.get(e);n.maxModelOffset>0&&(n.maxModelOffset=0,n.cacheList.length=1,n.cacheMap.clear(),n.cacheMap.set(0,n.cacheList[0]))}_clearCacheStartingBefore(e){const n=this._nodeToCacheListIndex.get(e);if(n===void 0){const r=e.parent;this._cachedMapping.has(r)||this._clearCacheStartingBefore(r);return}let s=e.parent;for(;!this._cachedMapping.has(s);)s=s.parent;this._clearCacheFromIndex(s,n)}_clearCacheFromIndex(e,n){n===0&&(n=1);const s=this._cachedMapping.get(e),r=s.cacheList[n-1];if(!r)return;s.maxModelOffset=r.modelOffset;const o=s.cacheList.splice(n);for(const a of o){s.cacheMap.delete(a.modelOffset);const l=a.viewPosition.nodeBefore;this._nodeToCacheListIndex.delete(l)}}_findInCacheList(e,n){let s=0,r=e.length-1,o=r-s>>1,a=e[o];for(;s<r;)a.modelOffset<n?s=o+1:r=o-1,o=s+(r-s>>1),a=e[o];return a.modelOffset<=n?a:e[o-1]}}class rre{constructor(){b(this,"_consumable",new Map);b(this,"_textProxyRegistry",new Map)}add(t,e){e=Xm(e),t instanceof Ks&&(t=this._getSymbolForTextProxy(t)),this._consumable.has(t)||this._consumable.set(t,new Map),this._consumable.get(t).set(e,!0)}consume(t,e){return e=Xm(e),t instanceof Ks&&(t=this._getSymbolForTextProxy(t)),this.test(t,e)?(this._consumable.get(t).set(e,!1),!0):!1}test(t,e){e=Xm(e),t instanceof Ks&&(t=this._getSymbolForTextProxy(t));const n=this._consumable.get(t);if(n===void 0)return null;const s=n.get(e);return s===void 0?null:s}revert(t,e){e=Xm(e),t instanceof Ks&&(t=this._getSymbolForTextProxy(t));const n=this.test(t,e);return n===!1?(this._consumable.get(t).set(e,!0),!0):n===!0?!1:null}verifyAllConsumed(t){const e=[];for(const[n,s]of this._consumable)for(const[r,o]of s){const a=r.split(":")[0];o&&t==a&&e.push({event:r,item:n.name||n.description})}if(e.length)throw new D("conversion-model-consumable-not-consumed",null,{items:e})}_getSymbolForTextProxy(t){let e=null;const n=this._textProxyRegistry.get(t.startOffset);if(n){const s=n.get(t.endOffset);s&&(e=s.get(t.parent))}return e||(e=this._addSymbolForTextProxy(t)),e}_addSymbolForTextProxy(t){const e=t.startOffset,n=t.endOffset,s=t.parent,r=Symbol("$textProxy:"+t.data);let o,a;return o=this._textProxyRegistry.get(e),o||(o=new Map,this._textProxyRegistry.set(e,o)),a=o.get(n),a||(a=new Map,o.set(n,a)),a.set(s,r),r}}function Xm(i){const t=i.split(":");return t[0]=="insert"?t[0]:t[0]=="addMarker"||t[0]=="removeMarker"?i:t.length>1?t[0]+":"+t[1]:t[0]}class Z4 extends Ct(){constructor(e){super();b(this,"_conversionApi");b(this,"_firedEventsMap");this._conversionApi={dispatcher:this,...e},this._firedEventsMap=new WeakMap}convertChanges(e,n,s){const r=this._createConversionApi(s,e.getRefreshedItems());for(const a of e.getMarkersToRemove())this._convertMarkerRemove(a.name,a.range,r);const o=this._reduceChanges(e.getChanges());for(const a of o)a.type==="insert"?this._convertInsert(Z._createFromPositionAndShift(a.position,a.length),r):a.type==="reinsert"?this._convertReinsert(Z._createFromPositionAndShift(a.position,a.length),r):a.type==="remove"?this._convertRemove(a.position,a.length,a.name,r):this._convertAttribute(a.range,a.attributeKey,a.attributeOldValue,a.attributeNewValue,r);r.mapper.flushDeferredBindings();for(const a of r.mapper.flushUnboundMarkerNames()){const l=n.get(a).getRange();this._convertMarkerRemove(a,l,r),this._convertMarkerAdd(a,l,r)}for(const a of e.getMarkersToAdd())this._convertMarkerAdd(a.name,a.range,r);r.consumable.verifyAllConsumed("insert")}convert(e,n,s,r={}){const o=this._createConversionApi(s,void 0,r);this._convertInsert(e,o);for(const[a,l]of n)this._convertMarkerAdd(a,l,o);o.consumable.verifyAllConsumed("insert")}convertSelection(e,n,s){const r=this._createConversionApi(s);this.fire("cleanSelection",{selection:e},r);const o=e.getFirstPosition().root;if(!r.mapper.toViewElement(o))return;const a=Array.from(n.getMarkersAtPosition(e.getFirstPosition()));if(this._addConsumablesForSelection(r.consumable,e,a),this.fire("selection",{selection:e},r),!!e.isCollapsed){for(const l of a)if(r.consumable.test(e,"addMarker:"+l.name)){const u=l.getRange();if(!ore(e.getFirstPosition(),l,r.mapper))continue;const h={item:e,markerName:l.name,markerRange:u};this.fire(`addMarker:${l.name}`,h,r)}for(const l of e.getAttributeKeys())if(r.consumable.test(e,"attribute:"+l)){const u={item:e,range:e.getFirstRange(),attributeKey:l,attributeOldValue:null,attributeNewValue:e.getAttribute(l)};this.fire(`attribute:${l}:$text`,u,r)}}}_convertInsert(e,n,s={}){s.doNotAddConsumables||this._addConsumablesForInsert(n.consumable,e);for(const r of e.getWalker({shallow:!0}))this._testAndFire("insert",H2(r),n)}_convertRemove(e,n,s,r){this.fire(`remove:${s}`,{position:e,length:n},r)}_convertAttribute(e,n,s,r,o){this._addConsumablesForRange(o.consumable,e,`attribute:${n}`);for(const a of e){const l={item:a.item,range:Z._createFromPositionAndShift(a.previousPosition,a.length),attributeKey:n,attributeOldValue:s,attributeNewValue:r};this._testAndFire(`attribute:${n}`,l,o)}}_convertReinsert(e,n){const s=Array.from(e.getWalker({shallow:!0}));this._addConsumablesForInsert(n.consumable,s);for(const r of s.map(H2))this._testAndFire("insert",{...r,reconversion:!0},n)}_convertMarkerAdd(e,n,s){if(n.root.rootName=="$graveyard")return;const r=`addMarker:${e}`;if(s.consumable.add(n,r),this.fire(r,{markerName:e,markerRange:n},s),!!s.consumable.consume(n,r)){this._addConsumablesForRange(s.consumable,n,r);for(const o of n.getItems()){if(!s.consumable.test(o,r))continue;const a={item:o,range:Z._createOn(o),markerName:e,markerRange:n};this.fire(r,a,s)}}}_convertMarkerRemove(e,n,s){n.root.rootName!="$graveyard"&&this.fire(`removeMarker:${e}`,{markerName:e,markerRange:n},s)}_reduceChanges(e){const n={changes:e};return this.fire("reduceChanges",n),n.changes}_addConsumablesForInsert(e,n){for(const s of n){const r=s.item;if(e.test(r,"insert")===null){e.add(r,"insert");for(const o of r.getAttributeKeys())e.add(r,"attribute:"+o)}}return e}_addConsumablesForRange(e,n,s){for(const r of n.getItems())e.add(r,s);return e}_addConsumablesForSelection(e,n,s){e.add(n,"selection");for(const r of s)e.add(n,"addMarker:"+r.name);for(const r of n.getAttributeKeys())e.add(n,"attribute:"+r);return e}_testAndFire(e,n,s){const r=are(e,n),o=n.item.is("$textProxy")?s.consumable._getSymbolForTextProxy(n.item):n.item,a=this._firedEventsMap.get(s),l=a.get(o);if(!l)a.set(o,new Set([r]));else if(!l.has(r))l.add(r);else return;this.fire(r,n,s)}_testAndFireAddAttributes(e,n){const s={item:e,range:Z._createOn(e)};for(const r of s.item.getAttributeKeys())s.attributeKey=r,s.attributeOldValue=null,s.attributeNewValue=s.item.getAttribute(r),this._testAndFire(`attribute:${r}`,s,n)}_createConversionApi(e,n=new Set,s={}){const r={...this._conversionApi,consumable:new rre,writer:e,options:s,convertItem:o=>this._convertInsert(Z._createOn(o),r),convertChildren:o=>this._convertInsert(Z._createIn(o),r,{doNotAddConsumables:!0}),convertAttributes:o=>this._testAndFireAddAttributes(o,r),canReuseView:o=>!n.has(r.mapper.toModelElement(o))};return this._firedEventsMap.set(r,new Map),r}}function ore(i,t,e){const n=t.getRange(),s=Array.from(i.getAncestors());return s.shift(),s.reverse(),!s.some(o=>{if(n.containsItem(o))return!!e.toViewElement(o).getCustomProperty("addHighlight")})}function are(i,t){const e=t.item.is("element")?t.item.name:"$text";return`${i}:${e}`}function H2(i){return{item:i.item,range:Z._createFromPositionAndShift(i.previousPosition,i.length)}}let Ml=class extends ka{constructor(e){super();b(this,"parent",null);b(this,"_attrs");b(this,"_index",null);b(this,"_startOffset",null);this._attrs=er(e)}get document(){return null}get index(){return this._index}get startOffset(){return this._startOffset}get offsetSize(){return 1}get endOffset(){return this.startOffset===null?null:this.startOffset+this.offsetSize}get nextSibling(){const e=this.index;return e!==null&&this.parent.getChild(e+1)||null}get previousSibling(){const e=this.index;return e!==null&&this.parent.getChild(e-1)||null}get root(){let e=this;for(;e.parent;)e=e.parent;return e}isAttached(){return this.parent===null?!1:this.root.isAttached()}getPath(){const e=[];let n=this;for(;n.parent;)e.unshift(n.startOffset),n=n.parent;return e}getAncestors(e={}){const n=[];let s=e.includeSelf?this:this.parent;for(;s;)n[e.parentFirst?"push":"unshift"](s),s=s.parent;return n}getCommonAncestor(e,n={}){const s=this.getAncestors(n),r=e.getAncestors(n);let o=0;for(;s[o]==r[o]&&s[o];)o++;return o===0?null:s[o-1]}isBefore(e){if(this==e||this.root!==e.root)return!1;const n=this.getPath(),s=e.getPath(),r=Jn(n,s);switch(r){case"prefix":return!0;case"extension":return!1;default:return n[r]<s[r]}}isAfter(e){return this==e||this.root!==e.root?!1:!this.isBefore(e)}hasAttribute(e){return this._attrs.has(e)}getAttribute(e){return this._attrs.get(e)}getAttributes(){return this._attrs.entries()}getAttributeKeys(){return this._attrs.keys()}toJSON(){const e={};return this._attrs.size&&(e.attributes=Array.from(this._attrs).reduce((n,s)=>(n[s[0]]=s[1],n),{})),e}_clone(e){return new this.constructor(this._attrs)}_remove(){this.parent._removeChildren(this.index)}_setAttribute(e,n){this._attrs.set(e,n)}_setAttributesTo(e){this._attrs=er(e)}_removeAttribute(e){return this._attrs.delete(e)}_clearAttributes(){this._attrs.clear()}};Ml.prototype.is=function(i){return i==="node"||i==="model:node"};class Wi extends Ct(ka){constructor(...e){super();b(this,"_lastRangeBackward",!1);b(this,"_attrs",new Map);b(this,"_ranges",[]);e.length&&this.setTo(...e)}get anchor(){if(this._ranges.length>0){const e=this._ranges[this._ranges.length-1];return this._lastRangeBackward?e.end:e.start}return null}get focus(){if(this._ranges.length>0){const e=this._ranges[this._ranges.length-1];return this._lastRangeBackward?e.start:e.end}return null}get isCollapsed(){return this._ranges.length===1?this._ranges[0].isCollapsed:!1}get rangeCount(){return this._ranges.length}get isBackward(){return!this.isCollapsed&&this._lastRangeBackward}isEqual(e){if(this.rangeCount!=e.rangeCount)return!1;if(this.rangeCount===0)return!0;if(!this.anchor.isEqual(e.anchor)||!this.focus.isEqual(e.focus))return!1;for(const n of this._ranges){let s=!1;for(const r of e._ranges)if(n.isEqual(r)){s=!0;break}if(!s)return!1}return!0}*getRanges(){for(const e of this._ranges)yield new Z(e.start,e.end)}getFirstRange(){let e=null;for(const n of this._ranges)(!e||n.start.isBefore(e.start))&&(e=n);return e?new Z(e.start,e.end):null}getLastRange(){let e=null;for(const n of this._ranges)(!e||n.end.isAfter(e.end))&&(e=n);return e?new Z(e.start,e.end):null}getFirstPosition(){const e=this.getFirstRange();return e?e.start.clone():null}getLastPosition(){const e=this.getLastRange();return e?e.end.clone():null}setTo(...e){let[n,s,r]=e;if(typeof s=="object"&&(r=s,s=void 0),n===null)this._setRanges([]);else if(n instanceof Wi)this._setRanges(n.getRanges(),n.isBackward);else if(n&&typeof n.getRanges=="function")this._setRanges(n.getRanges(),n.isBackward);else if(n instanceof Z)this._setRanges([n],!!r&&!!r.backward);else if(n instanceof se)this._setRanges([new Z(n)]);else if(n instanceof Ml){const o=!!r&&!!r.backward;let a;if(s=="in")a=Z._createIn(n);else if(s=="on")a=Z._createOn(n);else if(s!==void 0)a=new Z(se._createAt(n,s));else throw new D("model-selection-setto-required-second-parameter",[this,n]);this._setRanges([a],o)}else if(ts(n))this._setRanges(n,r&&!!r.backward);else throw new D("model-selection-setto-not-selectable",[this,n])}_setRanges(e,n=!1){const s=Array.from(e),r=s.some(o=>{if(!(o instanceof Z))throw new D("model-selection-set-ranges-not-range",[this,e]);return this._ranges.every(a=>!a.isEqual(o))});s.length===this._ranges.length&&!r||(this._replaceAllRanges(s),this._lastRangeBackward=!!n,this.fire("change:range",{directChange:!0}))}setFocus(e,n){if(this.anchor===null)throw new D("model-selection-setfocus-no-ranges",[this,e]);const s=se._createAt(e,n);if(s.compareWith(this.focus)=="same")return;const r=this.anchor;this._ranges.length&&this._popRange(),s.compareWith(r)=="before"?(this._pushRange(new Z(s,r)),this._lastRangeBackward=!0):(this._pushRange(new Z(r,s)),this._lastRangeBackward=!1),this.fire("change:range",{directChange:!0})}getAttribute(e){return this._attrs.get(e)}getAttributes(){return this._attrs.entries()}getAttributeKeys(){return this._attrs.keys()}hasAttribute(e){return this._attrs.has(e)}removeAttribute(e){this.hasAttribute(e)&&(this._attrs.delete(e),this.fire("change:attribute",{attributeKeys:[e],directChange:!0}))}setAttribute(e,n){this.getAttribute(e)!==n&&(this._attrs.set(e,n),this.fire("change:attribute",{attributeKeys:[e],directChange:!0}))}getSelectedElement(){return this.rangeCount!==1?null:this.getFirstRange().getContainedElement()}*getSelectedBlocks(){const e=new WeakSet;for(const n of this.getRanges()){const s=U2(n.start,e);cre(s,n)&&(yield s);const r=n.getWalker();for(const a of r){const l=a.item;a.type=="elementEnd"&&lre(l,e,n)?yield l:a.type=="elementStart"&&l.is("model:element")&&l.root.document.model.schema.isBlock(l)&&r.jumpTo(se._createAt(l,"end"))}const o=U2(n.end,e);ure(o,n)&&(yield o)}}containsEntireContent(e=this.anchor.root){const n=se._createAt(e,0),s=se._createAt(e,"end");return n.isTouching(this.getFirstPosition())&&s.isTouching(this.getLastPosition())}_pushRange(e){this._checkRange(e),this._ranges.push(new Z(e.start,e.end))}_checkRange(e){for(let n=0;n<this._ranges.length;n++)if(e.isIntersecting(this._ranges[n]))throw new D("model-selection-range-intersects",[this,e],{addedRange:e,intersectingRange:this._ranges[n]})}_replaceAllRanges(e){this._removeAllRanges();for(const n of e)this._pushRange(n)}_removeAllRanges(){for(;this._ranges.length>0;)this._popRange()}_popRange(){this._ranges.pop()}}Wi.prototype.is=function(i){return i==="selection"||i==="model:selection"};function X4(i,t){return t.has(i)?!1:(t.add(i),i.root.document.model.schema.isBlock(i)&&!!i.parent)}function lre(i,t,e){return X4(i,t)&&DE(i,e)}function U2(i,t){const n=i.parent.root.document.model.schema,s=i.parent.getAncestors({parentFirst:!0,includeSelf:!0});let r=!1;const o=s.find(a=>r?!1:(r=n.isLimit(a),!r&&X4(a,t)));return s.forEach(a=>t.add(a)),o}function DE(i,t){const e=dre(i);return e?!t.containsRange(Z._createOn(e),!0):!0}function cre(i,t){return i?t.isCollapsed||i.isEmpty?!0:t.start.isTouching(se._createAt(i,i.maxOffset))?!1:DE(i,t):!1}function ure(i,t){return i?t.isCollapsed||i.isEmpty?!0:t.end.isTouching(se._createAt(i,0))?!1:DE(i,t):!1}function dre(i){const t=i.root.document.model.schema;let e=i.parent;for(;e;){if(t.isBlock(e))return e;e=e.parent}}class ai extends Ct(Z){constructor(t,e){super(t,e),hre.call(this)}detach(){this.stopListening()}toRange(){return new Z(this.start,this.end)}static fromRange(t){return new ai(t.start,t.end)}}ai.prototype.is=function(i){return i==="liveRange"||i==="model:liveRange"||i=="range"||i==="model:range"};function hre(){this.listenTo(this.root.document.model,"applyOperation",(i,t)=>{const e=t[0];e.isDocumentOperation&&fre.call(this,e)},{priority:"low"})}function fre(i){const t=this.getTransformedByOperation(i),e=Z._createFromRanges(t),n=!e.isEqual(this),s=mre(this,i);let r=null;if(n){e.root.rootName=="$graveyard"&&(i.type=="remove"?r=i.sourcePosition:r=i.deletionPosition);const o=this.toRange();this.start=e.start,this.end=e.end,this.fire("change:range",o,{deletionPosition:r})}else s&&this.fire("change:content",this.toRange(),{deletionPosition:r})}function mre(i,t){switch(t.type){case"insert":return i.containsPosition(t.position);case"move":case"remove":case"reinsert":case"merge":return i.containsPosition(t.sourcePosition)||i.start.isEqual(t.sourcePosition)||i.containsPosition(t.targetPosition);case"split":return i.containsPosition(t.splitPosition)||i.containsPosition(t.insertionPosition)}return!1}class Dt extends Ml{constructor(e,n){super(n);b(this,"_data");this._data=e||""}get offsetSize(){return this.data.length}get data(){return this._data}toJSON(){const e=super.toJSON();return e.data=this.data,e}_clone(){return new Dt(this.data,this.getAttributes())}static fromJSON(e){return new Dt(e.data,e.attributes)}}Dt.prototype.is=function(i){return i==="$text"||i==="model:$text"||i==="text"||i==="model:text"||i==="node"||i==="model:node"};const Nh="selection:";class tr extends Ct(ka){constructor(e){super();b(this,"_selection");this._selection=new gre(e),this._selection.delegate("change:range").to(this),this._selection.delegate("change:attribute").to(this),this._selection.delegate("change:marker").to(this)}get isCollapsed(){return this._selection.isCollapsed}get anchor(){return this._selection.anchor}get focus(){return this._selection.focus}get rangeCount(){return this._selection.rangeCount}get hasOwnRange(){return this._selection.hasOwnRange}get isBackward(){return this._selection.isBackward}get isGravityOverridden(){return this._selection.isGravityOverridden}get markers(){return this._selection.markers}get _ranges(){return this._selection._ranges}getRanges(){return this._selection.getRanges()}getFirstPosition(){return this._selection.getFirstPosition()}getLastPosition(){return this._selection.getLastPosition()}getFirstRange(){return this._selection.getFirstRange()}getLastRange(){return this._selection.getLastRange()}getSelectedBlocks(){return this._selection.getSelectedBlocks()}getSelectedElement(){return this._selection.getSelectedElement()}containsEntireContent(e){return this._selection.containsEntireContent(e)}destroy(){this._selection.destroy()}getAttributeKeys(){return this._selection.getAttributeKeys()}getAttributes(){return this._selection.getAttributes()}getAttribute(e){return this._selection.getAttribute(e)}hasAttribute(e){return this._selection.hasAttribute(e)}refresh(){this._selection.updateMarkers(),this._selection._updateAttributes(!1)}observeMarkers(e){this._selection.observeMarkers(e)}_setFocus(e,n){this._selection.setFocus(e,n)}_setTo(...e){this._selection.setTo(...e)}_setAttribute(e,n){this._selection.setAttribute(e,n)}_removeAttribute(e){this._selection.removeAttribute(e)}_getStoredAttributes(){return this._selection.getStoredAttributes()}_overrideGravity(){return this._selection.overrideGravity()}_restoreGravity(e){this._selection.restoreGravity(e)}static _getStoreAttributeKey(e){return Nh+e}static _isStoreAttributeKey(e){return e.startsWith(Nh)}}tr.prototype.is=function(i){return i==="selection"||i=="model:selection"||i=="documentSelection"||i=="model:documentSelection"};class gre extends Wi{constructor(e){super();b(this,"markers",new Hn({idProperty:"name"}));b(this,"_model");b(this,"_document");b(this,"_attributePriority",new Map);b(this,"_selectionRestorePosition",null);b(this,"_hasChangedRange",!1);b(this,"_overriddenGravityRegister",new Set);b(this,"_observedMarkers",new Set);this._model=e.model,this._document=e,this.listenTo(this._model,"applyOperation",(n,s)=>{const r=s[0];!r.isDocumentOperation||r.type=="marker"||r.type=="rename"||r.type=="noop"||(this._ranges.length==0&&this._selectionRestorePosition&&this._fixGraveyardSelection(this._selectionRestorePosition),this._selectionRestorePosition=null,this._hasChangedRange&&(this._hasChangedRange=!1,this.fire("change:range",{directChange:!1})))},{priority:"lowest"}),this.on("change:range",()=>{this._validateSelectionRanges(this.getRanges())}),this.listenTo(this._model.markers,"update",(n,s,r,o)=>{this._updateMarker(s,o)}),this.listenTo(this._document,"change",(n,s)=>{pre(this._model,s)})}get isCollapsed(){return this._ranges.length===0?this._document._getDefaultRange().isCollapsed:super.isCollapsed}get anchor(){return super.anchor||this._document._getDefaultRange().start}get focus(){return super.focus||this._document._getDefaultRange().end}get rangeCount(){return this._ranges.length?this._ranges.length:1}get hasOwnRange(){return this._ranges.length>0}get isGravityOverridden(){return!!this._overriddenGravityRegister.size}destroy(){for(let e=0;e<this._ranges.length;e++)this._ranges[e].detach();this.stopListening()}*getRanges(){this._ranges.length?yield*super.getRanges():yield this._document._getDefaultRange()}getFirstRange(){return super.getFirstRange()||this._document._getDefaultRange()}getLastRange(){return super.getLastRange()||this._document._getDefaultRange()}setTo(...e){super.setTo(...e),this._updateAttributes(!0),this.updateMarkers()}setFocus(e,n){super.setFocus(e,n),this._updateAttributes(!0),this.updateMarkers()}setAttribute(e,n){if(this._setAttribute(e,n)){const s=[e];this.fire("change:attribute",{attributeKeys:s,directChange:!0})}}removeAttribute(e){if(this._removeAttribute(e)){const n=[e];this.fire("change:attribute",{attributeKeys:n,directChange:!0})}}overrideGravity(){const e=ni();return this._overriddenGravityRegister.add(e),this._overriddenGravityRegister.size===1&&this._updateAttributes(!0),e}restoreGravity(e){if(!this._overriddenGravityRegister.has(e))throw new D("document-selection-gravity-wrong-restore",this,{uid:e});this._overriddenGravityRegister.delete(e),this.isGravityOverridden||this._updateAttributes(!0)}observeMarkers(e){this._observedMarkers.add(e),this.updateMarkers()}_replaceAllRanges(e){this._validateSelectionRanges(e),super._replaceAllRanges(e)}_popRange(){this._ranges.pop().detach()}_pushRange(e){const n=this._prepareRange(e);n&&this._ranges.push(n)}_validateSelectionRanges(e){for(const n of e)if(!this._document._validateSelectionRange(n))throw new D("document-selection-wrong-position",this,{range:n})}_prepareRange(e){if(this._checkRange(e),e.root==this._document.graveyard)return;const n=ai.fromRange(e);return n.on("change:range",(s,r,o)=>{if(this._hasChangedRange=!0,n.root==this._document.graveyard){this._selectionRestorePosition=o.deletionPosition;const a=this._ranges.indexOf(n);this._ranges.splice(a,1),n.detach()}}),n}updateMarkers(){if(!this._observedMarkers.size)return;const e=[];let n=!1;for(const r of this._model.markers){const o=r.name.split(":",1)[0];if(!this._observedMarkers.has(o))continue;const a=r.getRange();for(const l of this.getRanges())a.containsRange(l,!l.isCollapsed)&&e.push(r)}const s=Array.from(this.markers);for(const r of e)this.markers.has(r)||(this.markers.add(r),n=!0);for(const r of Array.from(this.markers))e.includes(r)||(this.markers.remove(r),n=!0);n&&this.fire("change:marker",{oldMarkers:s,directChange:!1})}_updateMarker(e,n){const s=e.name.split(":",1)[0];if(!this._observedMarkers.has(s))return;let r=!1;const o=Array.from(this.markers),a=this.markers.has(e);if(!n)a&&(this.markers.remove(e),r=!0);else{let l=!1;for(const u of this.getRanges())if(n.containsRange(u,!u.isCollapsed)){l=!0;break}l&&!a?(this.markers.add(e),r=!0):!l&&a&&(this.markers.remove(e),r=!0)}r&&this.fire("change:marker",{oldMarkers:o,directChange:!1})}_updateAttributes(e){const n=er(this._getSurroundingAttributes()),s=er(this.getAttributes());if(e)this._attributePriority=new Map,this._attrs=new Map;else for(const[o,a]of this._attributePriority)a=="low"&&(this._attrs.delete(o),this._attributePriority.delete(o));this._setAttributesTo(n);const r=[];for(const[o,a]of this.getAttributes())(!s.has(o)||s.get(o)!==a)&&r.push(o);for(const[o]of s)this.hasAttribute(o)||r.push(o);r.length>0&&this.fire("change:attribute",{attributeKeys:r,directChange:!1})}_setAttribute(e,n,s=!0){const r=s?"normal":"low";return r=="low"&&this._attributePriority.get(e)=="normal"||super.getAttribute(e)===n?!1:(this._attrs.set(e,n),this._attributePriority.set(e,r),!0)}_removeAttribute(e,n=!0){const s=n?"normal":"low";return s=="low"&&this._attributePriority.get(e)=="normal"||(this._attributePriority.set(e,s),!super.hasAttribute(e))?!1:(this._attrs.delete(e),!0)}_setAttributesTo(e){const n=new Set;for(const[s,r]of this.getAttributes())e.get(s)!==r&&this._removeAttribute(s,!1);for(const[s,r]of e)this._setAttribute(s,r,!1)&&n.add(s);return n}*getStoredAttributes(){const e=this.getFirstPosition().parent;if(this.isCollapsed&&e.isEmpty)for(const n of e.getAttributeKeys())n.startsWith(Nh)&&(yield[n.substr(Nh.length),e.getAttribute(n)])}_getSurroundingAttributes(){const e=this.getFirstPosition(),n=this._model.schema;if(e.root.rootName=="$graveyard")return null;let s=null;if(this.isCollapsed){const r=e.textNode?e.textNode:e.nodeBefore,o=e.textNode?e.textNode:e.nodeAfter;if(this.isGravityOverridden||(s=Od(r,n)),s||(s=Od(o,n)),!this.isGravityOverridden&&!s){let a=r;for(;a&&!s;)a=a.previousSibling,s=Od(a,n)}if(!s){let a=o;for(;a&&!s;)a=a.nextSibling,s=Od(a,n)}s||(s=this.getStoredAttributes())}else{const r=this.getFirstRange();for(const o of r){if(o.item.is("element")&&n.isObject(o.item)){s=Od(o.item,n);break}if(o.type=="text"){s=o.item.getAttributes();break}}}return s}_fixGraveyardSelection(e){const n=this._model.schema.getNearestSelectionRange(e);n&&this._pushRange(n)}}function Od(i,t){if(!i)return null;if(i instanceof Ks||i instanceof Dt)return i.getAttributes();if(!t.isInline(i))return null;if(!t.isObject(i))return[];const e=[];for(const[n,s]of i.getAttributes())t.checkAttribute("$text",n)&&t.getAttributeProperties(n).copyFromObject!==!1&&e.push([n,s]);return e}function pre(i,t){const e=i.document.differ;for(const n of e.getChanges()){if(n.type!="insert")continue;const s=n.position.parent;n.length===s.maxOffset&&i.enqueueChange(t,o=>{const a=Array.from(s.getAttributeKeys()).filter(l=>l.startsWith(Nh));for(const l of a)o.removeAttribute(l,s)})}}class dh{constructor(t){b(this,"_nodes",[]);b(this,"_offsetToNode",[]);t&&this._insertNodes(0,t)}[Symbol.iterator](){return this._nodes[Symbol.iterator]()}get length(){return this._nodes.length}get maxOffset(){return this._offsetToNode.length}getNode(t){return this._nodes[t]||null}getNodeAtOffset(t){return this._offsetToNode[t]||null}getNodeIndex(t){return t.index}getNodeStartOffset(t){return t.startOffset}indexToOffset(t){if(t==this._nodes.length)return this.maxOffset;const e=this._nodes[t];if(!e)throw new D("model-nodelist-index-out-of-bounds",this);return this.getNodeStartOffset(e)}offsetToIndex(t){if(t==this._offsetToNode.length)return this._nodes.length;const e=this._offsetToNode[t];if(!e)throw new D("model-nodelist-offset-out-of-bounds",this,{offset:t,nodeList:this});return this.getNodeIndex(e)}_insertNodes(t,e){const n=[];for(const r of e){if(!(r instanceof Ml))throw new D("model-nodelist-insertnodes-not-node",this);n.push(r)}let s=this.indexToOffset(t);S2(this._nodes,n,t),S2(this._offsetToNode,bre(n),s);for(let r=t;r<this._nodes.length;r++)this._nodes[r]._index=r,this._nodes[r]._startOffset=s,s+=this._nodes[r].offsetSize}_removeNodes(t,e=1){if(e==0)return[];let n=this.indexToOffset(t);const s=this._nodes.splice(t,e),r=s[s.length-1],o=r.startOffset+r.offsetSize-n;this._offsetToNode.splice(n,o);for(const a of s)a._index=null,a._startOffset=null;for(let a=t;a<this._nodes.length;a++)this._nodes[a]._index=a,this._nodes[a]._startOffset=n,n+=this._nodes[a].offsetSize;return s}_removeNodesArray(t){if(t.length==0)return;for(const n of t)n._index=null,n._startOffset=null;this._nodes=this._nodes.filter(n=>n.index!==null),this._offsetToNode=this._offsetToNode.filter(n=>n.index!==null);let e=0;for(let n=0;n<this._nodes.length;n++)this._nodes[n]._index=n,this._nodes[n]._startOffset=e,e+=this._nodes[n].offsetSize}toJSON(){return this._nodes.map(t=>t.toJSON())}}function bre(i){const t=[];let e=0;for(const n of i)for(let s=0;s<n.offsetSize;s++)t[e++]=n;return t}let Yt=class Og extends Ml{constructor(e,n,s){super(n);b(this,"name");b(this,"_children",new dh);this.name=e,s&&this._insertChild(0,s)}get childCount(){return this._children.length}get maxOffset(){return this._children.maxOffset}get isEmpty(){return this.childCount===0}getChild(e){return this._children.getNode(e)}getChildAtOffset(e){return this._children.getNodeAtOffset(e)}getChildren(){return this._children[Symbol.iterator]()}getChildIndex(e){return this._children.getNodeIndex(e)}getChildStartOffset(e){return this._children.getNodeStartOffset(e)}offsetToIndex(e){return this._children.offsetToIndex(e)}getNodeByPath(e){let n=this;for(const s of e)n=n.getChildAtOffset(s);return n}findAncestor(e,n={}){let s=n.includeSelf?this:this.parent;for(;s;){if(s.name===e)return s;s=s.parent}return null}toJSON(){const e=super.toJSON();if(e.name=this.name,this._children.length>0){e.children=[];for(const n of this._children)e.children.push(n.toJSON())}return e}_clone(e=!1){const n=e?vre(this._children):void 0;return new Og(this.name,this.getAttributes(),n)}_appendChild(e){this._insertChild(this.childCount,e)}_insertChild(e,n){const s=wre(n);for(const r of s)r.parent!==null&&r._remove(),r.parent=this;this._children._insertNodes(e,s)}_removeChildren(e,n=1){const s=this._children._removeNodes(e,n);for(const r of s)r.parent=null;return s}_removeChildrenArray(e){this._children._removeNodesArray(e);for(const n of e)n.parent=null}static fromJSON(e){let n;if(e.children){n=[];for(const s of e.children)s.name?n.push(Og.fromJSON(s)):n.push(Dt.fromJSON(s))}return new Og(e.name,e.attributes,n)}};Yt.prototype.is=function(i,t){return t?t===this.name&&(i==="element"||i==="model:element"):i==="element"||i==="model:element"||i==="node"||i==="model:node"};function wre(i){if(typeof i=="string")return[new Dt(i)];ts(i)||(i=[i]);const t=[];for(const e of i)typeof e=="string"?t.push(new Dt(e)):e instanceof Ks?t.push(new Dt(e.data,e.getAttributes())):t.push(e);return t}function vre(i){const t=[];for(const e of i)t.push(e._clone(!0));return t}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class J4{constructor(t){b(this,"_dispatchers");this._dispatchers=t}add(t){for(const e of this._dispatchers)t(e);return this}}class yre extends J4{elementToElement(t){return this.add(Bre(t))}elementToStructure(t){return this.add(Fre(t))}attributeToElement(t){return this.add($re(t))}attributeToAttribute(t){return this.add(zre(t))}markerToElement(t){return this.add(jre(t))}markerToHighlight(t){return this.add(Ure(t))}markerToData(t){return this.add(Hre(t))}}function Q4(){return(i,t,e)=>{if(!e.consumable.consume(t.item,i.name))return;const n=e.writer,s=e.mapper.toViewPosition(t.range.start),r=n.createText(t.item.data);n.insert(s,r)}}function eM(){return(i,t,e)=>{e.convertAttributes(t.item),!t.reconversion&&t.item.is("element")&&!t.item.isEmpty&&e.convertChildren(t.item)}}function _re(){return(i,t,e)=>{const n=e.mapper.toViewPosition(t.position),s=t.position.getShiftedBy(t.length),r=e.mapper.toViewPosition(s,{isPhantom:!0}),o=e.writer.createRange(n,r),a=e.writer.remove(o.getTrimmed());for(const l of e.writer.createRangeIn(a).getItems())e.mapper.unbindViewElement(l,{defer:!0})}}function tM(i,t){const e=i.createAttributeElement("span",t.attributes);return t.classes&&e._addClass(t.classes),typeof t.priority=="number"&&(e._priority=t.priority),e._id=t.id,e}function Ere(){return(i,t,e)=>{const n=t.selection;if(n.isCollapsed||!e.consumable.consume(n,"selection"))return;const s=[];for(const r of n.getRanges())s.push(e.mapper.toViewRange(r));e.writer.setSelection(s,{backward:n.isBackward})}}function Cre(){return(i,t,e)=>{const n=t.selection;if(!n.isCollapsed||!e.consumable.consume(n,"selection"))return;const s=e.writer,r=n.getFirstPosition(),o=e.mapper.toViewPosition(r),a=s.breakAttributes(o);s.setSelection(a)}}function xre(){return(i,t,e)=>{const n=e.writer,s=n.document.selection;for(const r of s.getRanges())r.isCollapsed&&r.end.parent.isAttached()&&e.writer.mergeAttributes(r.start);n.setSelection(null)}}function kre(i){return(t,e,n)=>{if(!n.consumable.test(e.item,t.name))return;const s=i(e.attributeOldValue,n,e),r=i(e.attributeNewValue,n,e);if(!s&&!r)return;n.consumable.consume(e.item,t.name);const o=n.writer,a=o.document.selection;if(e.item instanceof Wi||e.item instanceof tr)o.wrap(a.getFirstRange(),r);else{let l=n.mapper.toViewRange(e.range);e.attributeOldValue!==null&&s&&(l=o.unwrap(l,s)),e.attributeNewValue!==null&&r&&o.wrap(l,r)}}}function Tre(i,t=Xre){return(e,n,s)=>{if(!t(n.item,s.consumable,{preflight:!0}))return;const r=i(n.item,s,n);if(!r)return;t(n.item,s.consumable);const o=s.mapper.toViewPosition(n.range.start);s.mapper.bindElements(n.item,r),s.writer.insert(o,r),s.convertAttributes(n.item),oM(r,n.item.getChildren(),s,{reconversion:n.reconversion})}}function Sre(i,t){return(e,n,s)=>{if(!t(n.item,s.consumable,{preflight:!0}))return;const r=new Map;s.writer._registerSlotFactory(Gre(n.item,r,s));const o=i(n.item,s,n);if(s.writer._clearSlotFactory(),!o)return;Kre(n.item,r,s),t(n.item,s.consumable);const a=s.mapper.toViewPosition(n.range.start);s.mapper.bindElements(n.item,o),s.writer.insert(a,o),s.convertAttributes(n.item),Yre(o,r,s,{reconversion:n.reconversion})}}function Are(i){return(t,e,n)=>{e.isOpening=!0;const s=i(e,n);e.isOpening=!1;const r=i(e,n);if(!s||!r)return;const o=e.markerRange;if(o.isCollapsed&&!n.consumable.consume(o,t.name))return;for(const u of o)if(!n.consumable.consume(u.item,t.name))return;const a=n.mapper,l=n.writer;l.insert(a.toViewPosition(o.start),s),n.mapper.bindElementToMarker(s,e.markerName),o.isCollapsed||(l.insert(a.toViewPosition(o.end),r),n.mapper.bindElementToMarker(r,e.markerName)),t.stop()}}function Pre(){return(i,t,e)=>{const n=e.mapper.markerNameToElements(t.markerName);if(n){for(const s of n)e.mapper.unbindElementFromMarkerName(s,t.markerName),e.writer.clear(e.writer.createRangeOn(s),s);e.writer.clearClonedElementsGroup(t.markerName),i.stop()}}}function Ire(i){return(t,e,n)=>{const s=i(e.markerName,n);if(!s)return;const r=e.markerRange;n.consumable.consume(r,t.name)&&(W2(r,!1,n,e,s),W2(r,!0,n,e,s),t.stop())}}function W2(i,t,e,n,s){const r=t?i.start:i.end,o=r.nodeAfter&&r.nodeAfter.is("element")?r.nodeAfter:null,a=r.nodeBefore&&r.nodeBefore.is("element")?r.nodeBefore:null;if(o||a){let u,h;t&&o||!t&&!a?(u=o,h=!0):(u=a,h=!1);const f=e.mapper.toViewElement(u);if(f){Rre(f,t,h,e,n,s);return}}const l=e.mapper.toViewPosition(r);Ore(l,t,e,n,s)}function Rre(i,t,e,n,s,r){const o=`data-${r.group}-${t?"start":"end"}-${e?"before":"after"}`,a=i.hasAttribute(o)?i.getAttribute(o).split(","):[];a.unshift(r.name),n.writer.setAttribute(o,a.join(","),i),n.mapper.bindElementToMarker(i,s.markerName)}function Ore(i,t,e,n,s){const r=`${s.group}-${t?"start":"end"}`,o=s.name?{name:s.name}:null,a=e.writer.createUIElement(r,o);e.writer.insert(i,a),e.mapper.bindElementToMarker(a,n.markerName)}function Nre(i){return(t,e,n)=>{const s=i(e.markerName,n);if(!s)return;const r=n.mapper.markerNameToElements(e.markerName);if(!r)return;for(const a of r)n.mapper.unbindElementFromMarkerName(a,e.markerName),a.is("containerElement")?(o(`data-${s.group}-start-before`,a),o(`data-${s.group}-start-after`,a),o(`data-${s.group}-end-before`,a),o(`data-${s.group}-end-after`,a)):n.writer.clear(n.writer.createRangeOn(a),a);n.writer.clearClonedElementsGroup(e.markerName),t.stop();function o(a,l){if(l.hasAttribute(a)){const u=new Set(l.getAttribute(a).split(","));u.delete(s.name),u.size==0?n.writer.removeAttribute(a,l):n.writer.setAttribute(a,Array.from(u).join(","),l)}}}}function Mre(i){return(t,e,n)=>{if(!n.consumable.test(e.item,t.name))return;const s=i(e.attributeOldValue,n,e),r=i(e.attributeNewValue,n,e);if(!s&&!r)return;n.consumable.consume(e.item,t.name);const o=n.mapper.toViewElement(e.item),a=n.writer;if(!o)throw new D("conversion-attribute-to-attribute-on-text",n.dispatcher,e);if(e.attributeOldValue!==null&&s){let l=s.value;s.key=="style"&&(typeof s.value=="string"?l=new ch(a.document.stylesProcessor).setTo(s.value).getStylesEntries().map(([u])=>u):l=Object.keys(s.value)),a.removeAttribute(s.key,l,o)}if(e.attributeNewValue!==null&&r){let l=r.value;r.key=="style"&&typeof r.value=="string"&&(l=Object.fromEntries(new ch(a.document.stylesProcessor).setTo(r.value).getStylesEntries())),a.setAttribute(r.key,l,!1,o)}}}function Lre(i){return(t,e,n)=>{if(!e.item||!(e.item instanceof Wi||e.item instanceof tr)&&!e.item.is("$textProxy"))return;const s=BE(i,e,n);if(!s||!n.consumable.consume(e.item,t.name))return;const r=n.writer,o=tM(r,s),a=r.document.selection;if(e.item instanceof Wi||e.item instanceof tr)r.wrap(a.getFirstRange(),o);else{const l=n.mapper.toViewRange(e.range),u=r.wrap(l,o);for(const h of u.getItems())if(h.is("attributeElement")&&h.isSimilar(o)){n.mapper.bindElementToMarker(h,e.markerName);break}}}}function Vre(i){return(t,e,n)=>{if(!e.item||!(e.item instanceof Yt))return;const s=BE(i,e,n);if(!s||!n.consumable.test(e.item,t.name))return;const r=n.mapper.toViewElement(e.item);if(r&&r.getCustomProperty("addHighlight")){n.consumable.consume(e.item,t.name);for(const a of Z._createIn(e.item))n.consumable.consume(a.item,t.name);r.getCustomProperty("addHighlight")(r,s,n.writer),n.mapper.bindElementToMarker(r,e.markerName)}}}function Dre(i){return(t,e,n)=>{if(e.markerRange.isCollapsed)return;const s=BE(i,e,n);if(!s)return;const r=tM(n.writer,s),o=n.mapper.markerNameToElements(e.markerName);if(o){for(const a of o)n.mapper.unbindElementFromMarkerName(a,e.markerName),a.is("attributeElement")?n.writer.unwrap(n.writer.createRangeOn(a),r):a.getCustomProperty("removeHighlight")(a,s.id,n.writer);n.writer.clearClonedElementsGroup(e.markerName),t.stop()}}}function Bre(i){const t=nM(i.model),e=Mh(i.view,"container");return t.attributes.length&&(t.children=!0),n=>{n.on(`insert:${t.name}`,Tre(e,rM(t)),{priority:i.converterPriority||"normal"}),(t.children||t.attributes.length)&&n.on("reduceChanges",sM(t),{priority:"low"})}}function Fre(i){const t=nM(i.model),e=Mh(i.view,"container");return t.children=!0,n=>{if(n._conversionApi.schema.checkChild(t.name,"$text"))throw new D("conversion-element-to-structure-disallowed-text",n,{elementName:t.name});n.on(`insert:${t.name}`,Sre(e,rM(t)),{priority:i.converterPriority||"normal"}),n.on("reduceChanges",sM(t),{priority:"low"})}}function $re(i){i=ar(i);let t=i.model;typeof t=="string"&&(t={key:t});let e=`attribute:${t.key}`;if(t.name&&(e+=":"+t.name),t.values)for(const s of t.values)i.view[s]=Mh(i.view[s],"attribute");else i.view=Mh(i.view,"attribute");const n=iM(i);return s=>{s.on(e,kre(n),{priority:i.converterPriority||"normal"})}}function zre(i){i=ar(i);let t=i.model;typeof t=="string"&&(t={key:t});let e=`attribute:${t.key}`;if(t.name&&(e+=":"+t.name),t.values)for(const s of t.values)i.view[s]=q2(i.view[s]);else i.view=q2(i.view);const n=iM(i);return s=>{s.on(e,Mre(n),{priority:i.converterPriority||"normal"})}}function jre(i){const t=Mh(i.view,"ui");return e=>{e.on(`addMarker:${i.model}`,Are(t),{priority:i.converterPriority||"normal"}),e.on(`removeMarker:${i.model}`,Pre(),{priority:i.converterPriority||"normal"})}}function Hre(i){i=ar(i);const t=i.model;let e=i.view;return e||(e=n=>({group:t,name:n.substr(i.model.length+1)})),n=>{n.on(`addMarker:${t}`,Ire(e),{priority:i.converterPriority||"normal"}),n.on(`removeMarker:${t}`,Nre(e),{priority:i.converterPriority||"normal"})}}function Ure(i){return t=>{t.on(`addMarker:${i.model}`,Lre(i.view),{priority:i.converterPriority||"normal"}),t.on(`addMarker:${i.model}`,Vre(i.view),{priority:i.converterPriority||"normal"}),t.on(`removeMarker:${i.model}`,Dre(i.view),{priority:i.converterPriority||"normal"})}}function nM(i){return typeof i=="string"&&(i={name:i}),{name:i.name,attributes:i.attributes?Bt(i.attributes):[],children:!!i.children}}function Mh(i,t){return typeof i=="function"?i:(e,n)=>Wre(i,n,t)}function Wre(i,t,e){typeof i=="string"&&(i={name:i});let n;const s=t.writer,r=Object.assign({},i.attributes);if(e=="container")n=s.createContainerElement(i.name,r);else if(e=="attribute"){const o={priority:i.priority||dl.DEFAULT_PRIORITY};n=s.createAttributeElement(i.name,r,o)}else n=s.createUIElement(i.name,r);if(i.styles){const o=Object.keys(i.styles);for(const a of o)s.setStyle(a,i.styles[a],n)}if(i.classes){const o=i.classes;if(typeof o=="string")s.addClass(o,n);else for(const a of o)s.addClass(a,n)}return n}function iM(i){return i.model.values?(t,e,n)=>{const s=i.view[t];return s?s(t,e,n):null}:i.view}function q2(i){return typeof i=="string"?t=>({key:i,value:t}):typeof i=="object"?i.value?()=>i:t=>({key:i.key,value:t}):i}function BE(i,t,e){const n=typeof i=="function"?i(t,e):i;return n?(n.priority||(n.priority=10),n.id||(n.id=t.markerName),n):null}function qre(i){return(t,e)=>{if(!t.is("element",i.name))return!1;if(e.type=="attribute"){if(i.attributes.includes(e.attributeKey))return!0}else{/* istanbul ignore else: This is always true because otherwise it would not register a reducer callback. -- @preserve */if(i.children)return!0}return!1}}function sM(i){const t=qre(i);return(e,n)=>{const s=[];n.reconvertedElements||(n.reconvertedElements=new Set);for(const r of n.changes){const o=r.type=="attribute"?r.range.start.nodeAfter:r.position.parent;if(!o||!t(o,r)){s.push(r);continue}if(!n.reconvertedElements.has(o)){n.reconvertedElements.add(o);const a=se._createBefore(o);let l=s.length;for(let u=s.length-1;u>=0;u--){const h=s[u],g=(h.type=="attribute"?h.range.start:h.position).compareWith(a);if(g=="before"||h.type=="remove"&&g=="same")break;l=u}s.splice(l,0,{type:"remove",name:o.name,position:a,length:1},{type:"reinsert",name:o.name,position:a,length:1})}}n.changes=s}}function rM(i){return(t,e,n={})=>{const s=["insert"];for(const r of i.attributes)t.hasAttribute(r)&&s.push(`attribute:${r}`);return s.every(r=>e.test(t,r))?(n.preflight||s.forEach(r=>e.consume(t,r)),!0):!1}}function Gre(i,t,e){return(n,s)=>{const r=n.createContainerElement("$slot");let o=null;if(s==="children")o=Array.from(i.getChildren());else if(typeof s=="function")o=Array.from(i.getChildren()).filter(a=>s(a));else throw new D("conversion-slot-mode-unknown",e.dispatcher,{modeOrFilter:s});return t.set(r,o),r}}function Kre(i,t,e){const n=Array.from(t.values()).flat(),s=new Set(n);if(s.size!=n.length)throw new D("conversion-slot-filter-overlap",e.dispatcher,{element:i});if(s.size!=i.childCount)throw new D("conversion-slot-filter-incomplete",e.dispatcher,{element:i})}function Yre(i,t,e,n){e.mapper.on("modelToViewPosition",o,{priority:"highest"});let s=null,r=null;for([s,r]of t)oM(i,r,e,n),e.writer.move(e.writer.createRangeIn(s),e.writer.createPositionBefore(s)),e.writer.remove(s);e.mapper.off("modelToViewPosition",o);function o(a,l){const u=l.modelPosition.nodeAfter,h=r.indexOf(u);h<0||(l.viewPosition=l.mapper.findPositionIn(s,h))}}function oM(i,t,e,n){for(const s of t)Zre(i.root,s,e,n)||e.convertItem(s)}function Zre(i,t,e,n){const{writer:s,mapper:r}=e;if(!n.reconversion)return!1;const o=r.toViewElement(t);return!o||o.root==i||!e.canReuseView(o)?!1:(s.move(s.createRangeOn(o),r.toViewPosition(se._createBefore(t))),!0)}function Xre(i,t,{preflight:e}={}){return e?t.test(i,"insert"):t.consume(i,"insert")}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function aM(i){const{schema:t,document:e}=i.model;for(const n of e.getRoots())if(n.isEmpty&&!t.checkChild(n,"$text")&&t.checkChild(n,"paragraph"))return i.insertElement("paragraph",n),!0;return!1}function lM(i,t,e){const n=e.createContext(i);return!(!e.checkChild(n,"paragraph")||!e.checkChild(n.push("paragraph"),t))}function cM(i,t){const e=t.createElement("paragraph");return t.insert(e,i),t.createPositionAt(e,0)}class Jre extends J4{elementToElement(t){return this.add(uM(t))}elementToAttribute(t){return this.add(toe(t))}attributeToAttribute(t){return this.add(noe(t))}elementToMarker(t){return this.add(ioe(t))}dataToMarker(t){return this.add(soe(t))}}function G2(){return(i,t,e)=>{if(!t.modelRange&&e.consumable.consume(t.viewItem,{name:!0})){const{modelRange:n,modelCursor:s}=e.convertChildren(t.viewItem,t.modelCursor);t.modelRange=n,t.modelCursor=s}}}function Qre(){return(i,t,{schema:e,consumable:n,writer:s})=>{let r=t.modelCursor;if(!n.test(t.viewItem))return;if(!e.checkChild(r,"$text")){if(!lM(r,"$text",e)||t.viewItem.data.trim().length==0)return;r=cM(r,s)}n.consume(t.viewItem);const o=s.createText(t.viewItem.data);s.insert(o,r),t.modelRange=s.createRange(r,r.getShiftedBy(o.offsetSize)),t.modelCursor=t.modelRange.end}}function eoe(i,t){return(e,n)=>{const s=n.newSelection,r=[];for(const a of s.getRanges())r.push(t.toModelRange(a));const o=i.createSelection(r,{backward:s.isBackward});o.isEqual(i.document.selection)||i.change(a=>{a.setSelection(o)})}}function uM(i){i=ar(i);const t=Ry(i),e=FE(i.view),n=e?`element:${e}`:"element";return s=>{s.on(n,t,{priority:i.converterPriority||"normal"})}}function toe(i){i=ar(i),dM(i);const t=hM(i,!1),e=FE(i.view),n=e?`element:${e}`:"element";return s=>{s.on(n,t,{priority:i.converterPriority||"low"})}}function noe(i){i=ar(i);let t=null;(typeof i.view=="string"||i.view.key)&&(t=aoe(i)),dM(i,t);const e=hM(i,!0);return n=>{n.on("element",e,{priority:i.converterPriority||"low"})}}function ioe(i){const t=uoe(i.model);return uM({...i,model:t})}function soe(i){i=ar(i),i.model||(i.model=s=>s?i.view+":"+s:i.view);const t={view:i.view,model:i.model},e=Ry(K2(t,"start")),n=Ry(K2(t,"end"));return s=>{s.on(`element:${i.view}-start`,e,{priority:i.converterPriority||"normal"}),s.on(`element:${i.view}-end`,n,{priority:i.converterPriority||"normal"});const r=ca.low,o=ca.highest,a=ca.get(i.converterPriority)/o;s.on("element",roe(t),{priority:r+a})}}function roe(i){return(t,e,n)=>{const s=`data-${i.view}`;if(!n.consumable.test(e.viewItem,{attributes:s+"-end-after"})&&!n.consumable.test(e.viewItem,{attributes:s+"-start-after"})&&!n.consumable.test(e.viewItem,{attributes:s+"-end-before"})&&!n.consumable.test(e.viewItem,{attributes:s+"-start-before"}))return;e.modelRange||Object.assign(e,n.convertChildren(e.viewItem,e.modelCursor)),n.consumable.consume(e.viewItem,{attributes:s+"-end-after"})&&r(e.modelRange.end,e.viewItem.getAttribute(s+"-end-after").split(",")),n.consumable.consume(e.viewItem,{attributes:s+"-start-after"})&&r(e.modelRange.end,e.viewItem.getAttribute(s+"-start-after").split(",")),n.consumable.consume(e.viewItem,{attributes:s+"-end-before"})&&r(e.modelRange.start,e.viewItem.getAttribute(s+"-end-before").split(",")),n.consumable.consume(e.viewItem,{attributes:s+"-start-before"})&&r(e.modelRange.start,e.viewItem.getAttribute(s+"-start-before").split(","));function r(o,a){for(const l of a){const u=i.model(l,n),h=n.writer.createElement("$marker",{"data-name":u});n.writer.insert(h,o),e.modelCursor.isEqual(o)?e.modelCursor=e.modelCursor.getShiftedBy(1):e.modelCursor=e.modelCursor._getTransformedByInsertion(o,1),e.modelRange=e.modelRange._getTransformedByInsertion(o,1)[0]}}}}function FE(i){return typeof i=="string"?i:typeof i=="object"&&typeof i.name=="string"?i.name:null}function Ry(i){const t=new ns(i.view);return(e,n,s)=>{const r=t.match(n.viewItem);if(!r)return;const o=r.match;if(o.name=!0,!s.consumable.test(n.viewItem,o))return;const a=ooe(i.model,n.viewItem,s);a&&s.safeInsert(a,n.modelCursor)&&(s.consumable.consume(n.viewItem,o),s.convertChildren(n.viewItem,a),s.updateConversionResult(a,n))}}function ooe(i,t,e){return i instanceof Function?i(t,e):e.writer.createElement(i)}function aoe(i){typeof i.view=="string"&&(i.view={key:i.view});const t=i.view.key,e=typeof i.view.value>"u"?/[\s\S]*/:i.view.value;let n;return t=="class"||t=="style"?n={[t=="class"?"classes":"styles"]:e}:n={attributes:{[t]:e}},i.view.name&&(n.name=i.view.name),i.view=n,t}function dM(i,t=null){const e=t===null?!0:r=>r.getAttribute(t),n=typeof i.model!="object"?i.model:i.model.key,s=typeof i.model!="object"||typeof i.model.value>"u"?e:i.model.value;i.model={key:n,value:s}}function hM(i,t){const e=new ns(i.view);return(n,s,r)=>{if(!s.modelRange&&t)return;const o=e.match(s.viewItem);if(!o||(loe(i.view,s.viewItem)?o.match.name=!0:delete o.match.name,!r.consumable.test(s.viewItem,o.match)))return;const a=i.model.key,l=typeof i.model.value=="function"?i.model.value(s.viewItem,r):i.model.value;if(l===null)return;s.modelRange||Object.assign(s,r.convertChildren(s.viewItem,s.modelCursor)),coe(s.modelRange,{key:a,value:l},t,r)&&(r.consumable.test(s.viewItem,{name:!0})&&(o.match.name=!0),r.consumable.consume(s.viewItem,o.match))}}function loe(i,t){const e=typeof i=="function"?i(t):i;return typeof e=="object"&&!FE(e)?!1:!e.classes&&!e.attributes&&!e.styles}function coe(i,t,e,n){let s=!1;for(const r of Array.from(i.getItems({shallow:e})))n.schema.checkAttribute(r,t.key)&&(s=!0,!r.hasAttribute(t.key)&&n.writer.setAttribute(t.key,t.value,r));return s}function uoe(i){return(t,e)=>{const n=typeof i=="string"?i:i(t,e);return e.writer.createElement("$marker",{"data-name":n})}}function K2(i,t){const e=(n,s)=>{const r=n.getAttribute("name"),o=i.model(r,s);return s.writer.createElement("$marker",{"data-name":o})};return{view:`${i.view}-${t}`,model:e}}function doe(i){i.document.registerPostFixer(t=>hoe(t,i))}function hoe(i,t){const e=t.document.selection,n=t.schema,s=[];let r=!1;for(const o of e.getRanges()){const a=fM(o,n);a&&!a.isEqual(o)?(s.push(a),r=!0):s.push(o)}return r&&i.setSelection(poe(s),{backward:e.isBackward}),!1}function fM(i,t){return i.isCollapsed?foe(i,t):moe(i,t)}function foe(i,t){const e=i.start,n=t.getNearestSelectionRange(e);if(!n){const r=e.getAncestors().reverse().find(o=>t.isObject(o));return r?Z._createOn(r):null}if(!n.isCollapsed)return n;const s=n.start;return e.isEqual(s)?null:new Z(s)}function moe(i,t){const{start:e,end:n}=i,s=t.checkChild(e,"$text"),r=t.checkChild(n,"$text"),o=t.getLimitElement(e),a=t.getLimitElement(n);if(o===a){if(s&&r)return null;if(goe(e,n,t)){const f=e.nodeAfter&&t.isSelectable(e.nodeAfter)?null:t.getNearestSelectionRange(e,"forward"),p=n.nodeBefore&&t.isSelectable(n.nodeBefore)?null:t.getNearestSelectionRange(n,"backward"),y=f?f.start:e,E=p?p.end:n;return new Z(y,E)}}const l=o&&!o.is("rootElement"),u=a&&!a.is("rootElement");if(l||u){const h=e.nodeAfter&&n.nodeBefore&&e.nodeAfter.parent===n.nodeBefore.parent,f=l&&(!h||!Z2(e.nodeAfter,t)),g=u&&(!h||!Z2(n.nodeBefore,t));let p=e,y=n;return f&&(p=se._createBefore(Y2(o,t))),g&&(y=se._createAfter(Y2(a,t))),new Z(p,y)}return null}function Y2(i,t){let e=i,n=e;for(;t.isLimit(n)&&n.parent;)e=n,n=n.parent;return e}function goe(i,t,e){const n=i.nodeAfter&&!e.isLimit(i.nodeAfter)||e.checkChild(i,"$text"),s=t.nodeBefore&&!e.isLimit(t.nodeBefore)||e.checkChild(t,"$text");return n||s}function poe(i){const t=[...i],e=new Set;let n=1;for(;n<t.length;){const r=t[n],o=t.slice(0,n);for(const[a,l]of o.entries())if(!e.has(a)){if(r.isEqual(l))e.add(a);else if(r.isIntersecting(l)){e.add(a),e.add(n);const u=r.getJoined(l);t.push(u)}}n++}return t.filter((r,o)=>!e.has(o))}function Z2(i,t){return i&&t.isSelectable(i)}class boe extends yt(){constructor(e,n){super();b(this,"model");b(this,"view");b(this,"mapper");b(this,"downcastDispatcher");this.model=e,this.view=new nre(n),this.mapper=new Y4,this.downcastDispatcher=new Z4({mapper:this.mapper,schema:e.schema});const s=this.model.document,r=s.selection,o=this.model.markers;this.listenTo(this.model,"_beforeChanges",()=>{this.view._disableRendering(!0)},{priority:"highest"}),this.listenTo(this.model,"_afterChanges",()=>{this.view._disableRendering(!1)},{priority:"lowest"}),this.listenTo(s,"change",()=>{this.view.change(a=>{this.downcastDispatcher.convertChanges(s.differ,o,a),this.downcastDispatcher.convertSelection(r,o,a)})},{priority:"low"}),this.listenTo(this.view.document,"selectionChange",eoe(this.model,this.mapper)),this.listenTo(this.view.document,"beforeinput",woe(this.mapper,this.model.schema,this.view),{priority:"high"}),this.downcastDispatcher.on("insert:$text",Q4(),{priority:"lowest"}),this.downcastDispatcher.on("insert",eM(),{priority:"lowest"}),this.downcastDispatcher.on("remove",_re(),{priority:"low"}),this.downcastDispatcher.on("cleanSelection",xre()),this.downcastDispatcher.on("selection",Ere(),{priority:"low"}),this.downcastDispatcher.on("selection",Cre(),{priority:"low"}),this.view.document.roots.bindTo(this.model.document.roots).using(a=>{if(a.rootName=="$graveyard")return null;const l=new V4(this.view.document,a.name);return l.rootName=a.rootName,this.mapper.bindElements(a,l),l})}destroy(){this.view.destroy(),this.stopListening()}reconvertMarker(e){const n=typeof e=="string"?e:e.name,s=this.model.markers.get(n);if(!s)throw new D("editingcontroller-reconvertmarker-marker-not-exist",this,{markerName:n});this.model.change(()=>{this.model.markers._refresh(s)})}reconvertItem(e){this.model.change(()=>{this.model.document.differ._refreshItem(e)})}}function woe(i,t,e){return(n,s)=>{if(!(e.document.isComposing&&!Fe.isAndroid))for(let r=0;r<s.targetRanges.length;r++){const o=s.targetRanges[r],a=i.toModelRange(o),l=fM(a,t);!l||l.isEqual(a)||(s.targetRanges[r]=i.toViewRange(l))}}}class voe extends yt(){constructor(){super();b(this,"_sourceDefinitions",{});b(this,"_attributeProperties",Object.create(null));b(this,"_customChildChecks",new Map);b(this,"_customAttributeChecks",new Map);b(this,"_genericCheckSymbol",Symbol("$generic"));b(this,"_compiledDefinitions");this.decorate("checkChild"),this.decorate("checkAttribute"),this.on("checkAttribute",(e,n)=>{n[0]=new ua(n[0])},{priority:"highest"}),this.on("checkChild",(e,n)=>{n[0]=new ua(n[0]),n[1]=this.getDefinition(n[1])},{priority:"highest"})}register(e,n){if(this._sourceDefinitions[e])throw new D("schema-cannot-register-item-twice",this,{itemName:e});this._sourceDefinitions[e]=[Object.assign({},n)],this._clearCache()}extend(e,n){if(!this._sourceDefinitions[e])throw new D("schema-cannot-extend-missing-item",this,{itemName:e});this._sourceDefinitions[e].push(Object.assign({},n)),this._clearCache()}getDefinitions(){return this._compiledDefinitions||this._compile(),this._compiledDefinitions}getDefinition(e){let n;return typeof e=="string"?n=e:"is"in e&&(e.is("$text")||e.is("$textProxy"))?n="$text":n=e.name,this.getDefinitions()[n]}isRegistered(e){return!!this.getDefinition(e)}isBlock(e){const n=this.getDefinition(e);return!!(n&&n.isBlock)}isLimit(e){const n=this.getDefinition(e);return n?!!(n.isLimit||n.isObject):!1}isObject(e){const n=this.getDefinition(e);return n?!!(n.isObject||n.isLimit&&n.isSelectable&&n.isContent):!1}isInline(e){const n=this.getDefinition(e);return!!(n&&n.isInline)}isSelectable(e){const n=this.getDefinition(e);return n?!!(n.isSelectable||n.isObject):!1}isContent(e){const n=this.getDefinition(e);return n?!!(n.isContent||n.isObject):!1}checkChild(e,n){return n?this._checkContextMatch(e,n):!1}checkAttribute(e,n){const s=this.getDefinition(e.last);if(!s)return!1;const r=this._evaluateAttributeChecks(e,n);return r!==void 0?r:s.allowAttributes.includes(n)}checkMerge(e,n){if(e instanceof se){const s=e.nodeBefore,r=e.nodeAfter;if(!(s instanceof Yt))throw new D("schema-check-merge-no-element-before",this);if(!(r instanceof Yt))throw new D("schema-check-merge-no-element-after",this);return this.checkMerge(s,r)}if(this.isLimit(e)||this.isLimit(n))return!1;for(const s of n.getChildren())if(!this.checkChild(e,s))return!1;return!0}addChildCheck(e,n){const s=n!==void 0?n:this._genericCheckSymbol,r=this._customChildChecks.get(s)||[];r.push(e),this._customChildChecks.set(s,r)}addAttributeCheck(e,n){const s=n!==void 0?n:this._genericCheckSymbol,r=this._customAttributeChecks.get(s)||[];r.push(e),this._customAttributeChecks.set(s,r)}setAttributeProperties(e,n){this._attributeProperties[e]=Object.assign(this.getAttributeProperties(e),n)}getAttributeProperties(e){return this._attributeProperties[e]||Object.create(null)}getLimitElement(e){let n;for(e instanceof se?n=e.parent:n=(e instanceof Z?[e]:Array.from(e.getRanges())).reduce((r,o)=>{const a=o.getCommonAncestor();return r?r.getCommonAncestor(a,{includeSelf:!0}):a},null);!this.isLimit(n)&&n.parent;)n=n.parent;return n}checkAttributeInSelection(e,n){if(e.isCollapsed){const r=[...e.getFirstPosition().getAncestors(),new Dt("",e.getAttributes())];return this.checkAttribute(r,n)}else{const s=e.getRanges();for(const r of s)for(const o of r)if(this.checkAttribute(o.item,n))return!0}return!1}*getValidRanges(e,n){e=Loe(e);for(const s of e)yield*this._getValidRangesForRange(s,n)}getNearestSelectionRange(e,n="both"){if(e.root.rootName=="$graveyard")return null;if(this.checkChild(e,"$text"))return new Z(e);let s,r;const o=e.getAncestors().reverse().find(a=>this.isLimit(a))||e.root;(n=="both"||n=="backward")&&(s=new to({boundaries:Z._createIn(o),startPosition:e,direction:"backward"})),(n=="both"||n=="forward")&&(r=new to({boundaries:Z._createIn(o),startPosition:e}));for(const a of Moe(s,r)){const l=a.walker==s?"elementEnd":"elementStart",u=a.value;if(u.type==l&&this.isObject(u.item))return Z._createOn(u.item);if(this.checkChild(u.nextPosition,"$text"))return new Z(u.nextPosition)}return null}findAllowedParent(e,n){let s=e.parent;for(;s;){if(this.checkChild(s,n))return s;if(this.isLimit(s))return null;s=s.parent}return null}setAllowedAttributes(e,n,s){const r=s.model;for(const[o,a]of Object.entries(n))r.schema.checkAttribute(e,o)&&s.setAttribute(o,a,e)}removeDisallowedAttributes(e,n){for(const s of e)if(s.is("$text"))X2(this,s,n);else{const o=Z._createIn(s).getPositions();for(const a of o){const l=a.nodeBefore||a.parent;X2(this,l,n)}}}getAttributesWithProperty(e,n,s){const r={};for(const[o,a]of e.getAttributes()){const l=this.getAttributeProperties(o);l[n]!==void 0&&(s===void 0||s===l[n])&&(r[o]=a)}return r}createContext(e){return new ua(e)}_clearCache(){this._compiledDefinitions=null}_compile(){const e={},n=this._sourceDefinitions,s=Object.keys(n);for(const o of s)e[o]=yoe(n[o],o);const r=Object.values(e);for(const o of r)_oe(e,o),Eoe(e,o),Coe(e,o),xoe(e,o);for(const o of r)koe(e,o);for(const o of r)Toe(e,o);for(const o of r)Soe(e,o);for(const o of r)Poe(e,o);for(const o of r)Ioe(e,o);this._compiledDefinitions=Aoe(e)}_checkContextMatch(e,n){const s=e.last;let r=this._evaluateChildChecks(e,n);if(r=r!==void 0?r:n.allowIn.includes(s.name),!r)return!1;const o=this.getDefinition(s),a=e.trimLast();return o?a.length==0?!0:this._checkContextMatch(a,o):!1}_evaluateChildChecks(e,n){const s=this._customChildChecks.get(this._genericCheckSymbol)||[],r=this._customChildChecks.get(n.name)||[];for(const o of[...s,...r]){const a=o(e,n);if(a!==void 0)return a}}_evaluateAttributeChecks(e,n){const s=this._customAttributeChecks.get(this._genericCheckSymbol)||[],r=this._customAttributeChecks.get(n)||[];for(const o of[...s,...r]){const a=o(e,n);if(a!==void 0)return a}}*_getValidRangesForRange(e,n){let s=e.start,r=e.start;for(const o of e.getItems({shallow:!0}))o.is("element")&&(yield*this._getValidRangesForRange(Z._createIn(o),n)),this.checkAttribute(o,n)||(s.isEqual(r)||(yield new Z(s,r)),s=se._createAfter(o)),r=se._createAfter(o);s.isEqual(r)||(yield new Z(s,r))}findOptimalInsertionRange(e,n){const s=e.getSelectedElement();if(s&&this.isObject(s)&&!this.isInline(s))return n=="before"||n=="after"?new Z(se._createAt(s,n)):Z._createOn(s);const r=ln(e.getSelectedBlocks());if(!r)return new Z(e.focus);if(r.isEmpty)return new Z(se._createAt(r,0));const o=se._createAfter(r);return e.focus.isTouching(o)?new Z(o):new Z(se._createBefore(r))}}class ua{constructor(t){b(this,"_items");if(t instanceof ua)return t;let e;typeof t=="string"?e=[t]:Array.isArray(t)?e=t:e=t.getAncestors({includeSelf:!0}),this._items=e.map(Noe)}get length(){return this._items.length}get last(){return this._items[this._items.length-1]}[Symbol.iterator](){return this._items[Symbol.iterator]()}push(t){const e=new ua([t]);return e._items=[...this._items,...e._items],e}trimLast(){const t=new ua([]);return t._items=this._items.slice(0,-1),t}getItem(t){return this._items[t]}*getNames(){yield*this._items.map(t=>t.name)}endsWith(t){return Array.from(this.getNames()).join(" ").endsWith(t)}startsWith(t){return Array.from(this.getNames()).join(" ").startsWith(t)}}function yoe(i,t){const e={name:t,allowIn:new Set,allowChildren:new Set,disallowIn:new Set,disallowChildren:new Set,allowContentOf:new Set,allowWhere:new Set,allowAttributes:new Set,disallowAttributes:new Set,allowAttributesOf:new Set,inheritTypesFrom:new Set};return Roe(i,e),mr(i,e,"allowIn"),mr(i,e,"allowChildren"),mr(i,e,"disallowIn"),mr(i,e,"disallowChildren"),mr(i,e,"allowContentOf"),mr(i,e,"allowWhere"),mr(i,e,"allowAttributes"),mr(i,e,"disallowAttributes"),mr(i,e,"allowAttributesOf"),mr(i,e,"inheritTypesFrom"),Ooe(i,e),e}function _oe(i,t){for(const e of t.allowIn){const n=i[e];n?n.allowChildren.add(t.name):t.allowIn.delete(e)}}function Eoe(i,t){for(const e of t.allowChildren){const n=i[e];n?n.allowIn.add(t.name):t.allowChildren.delete(e)}}function Coe(i,t){for(const e of t.disallowIn){const n=i[e];n?n.disallowChildren.add(t.name):t.disallowIn.delete(e)}}function xoe(i,t){for(const e of t.disallowChildren){const n=i[e];n?n.disallowIn.add(t.name):t.disallowChildren.delete(e)}}function koe(i,t){for(const e of t.disallowChildren)t.allowChildren.delete(e);for(const e of t.disallowIn)t.allowIn.delete(e);for(const e of t.disallowAttributes)t.allowAttributes.delete(e)}function Toe(i,t){for(const e of t.allowContentOf){const n=i[e];n&&(n.disallowChildren.forEach(s=>{t.allowChildren.has(s)||(t.disallowChildren.add(s),i[s].disallowIn.add(t.name))}),n.allowChildren.forEach(s=>{t.disallowChildren.has(s)||(t.allowChildren.add(s),i[s].allowIn.add(t.name))}))}}function Soe(i,t){for(const e of t.allowWhere){const n=i[e];n&&(n.disallowIn.forEach(s=>{t.allowIn.has(s)||(t.disallowIn.add(s),i[s].disallowChildren.add(t.name))}),n.allowIn.forEach(s=>{t.disallowIn.has(s)||(t.allowIn.add(s),i[s].allowChildren.add(t.name))}))}}function Aoe(i){const t={};for(const e of Object.values(i))t[e.name]={name:e.name,isBlock:!!e.isBlock,isContent:!!e.isContent,isInline:!!e.isInline,isLimit:!!e.isLimit,isObject:!!e.isObject,isSelectable:!!e.isSelectable,allowIn:Array.from(e.allowIn).filter(n=>!!i[n]),allowChildren:Array.from(e.allowChildren).filter(n=>!!i[n]),allowAttributes:Array.from(e.allowAttributes)};return t}function Poe(i,t){for(const e of t.allowAttributesOf){const n=i[e];if(!n)return;n.allowAttributes.forEach(s=>{t.disallowAttributes.has(s)||t.allowAttributes.add(s)})}}function Ioe(i,t){for(const e of t.inheritTypesFrom){const n=i[e];if(n){const s=Object.keys(n).filter(r=>r.startsWith("is"));for(const r of s)r in t||(t[r]=n[r])}}}function Roe(i,t){for(const e of i){const n=Object.keys(e).filter(s=>s.startsWith("is"));for(const s of n)t[s]=!!e[s]}}function mr(i,t,e){for(const n of i){let s=n[e];typeof s=="string"&&(s=[s]),Array.isArray(s)&&s.forEach(r=>t[e].add(r))}}function Ooe(i,t){for(const e of i){const n=e.inheritAllFrom;n&&(t.allowContentOf.add(n),t.allowWhere.add(n),t.allowAttributesOf.add(n),t.inheritTypesFrom.add(n))}}function Noe(i){return typeof i=="string"||i.is("documentFragment")?{name:typeof i=="string"?i:"$documentFragment",*getAttributeKeys(){},getAttribute(){}}:{name:i.is("element")?i.name:"$text",*getAttributeKeys(){yield*i.getAttributeKeys()},getAttribute(t){return i.getAttribute(t)}}}function*Moe(i,t){let e=!1;for(;!e;){if(e=!0,i){const n=i.next();n.done||(e=!1,yield{walker:i,value:n.value})}if(t){const n=t.next();n.done||(e=!1,yield{walker:t,value:n.value})}}}function*Loe(i){for(const t of i)yield*t.getMinimalFlatRanges()}function X2(i,t,e){for(const n of t.getAttributeKeys())i.checkAttribute(t,n)||e.removeAttribute(n,t)}class Voe extends Ct(){constructor(e){super();b(this,"conversionApi");b(this,"_splitParts",new Map);b(this,"_cursorParents",new Map);b(this,"_modelCursor",null);b(this,"_emptyElementsToKeep",new Set);this.conversionApi={...e,consumable:null,writer:null,store:null,convertItem:(n,s)=>this._convertItem(n,s),convertChildren:(n,s)=>this._convertChildren(n,s),safeInsert:(n,s)=>this._safeInsert(n,s),updateConversionResult:(n,s)=>this._updateConversionResult(n,s),splitToAllowedParent:(n,s)=>this._splitToAllowedParent(n,s),getSplitParts:n=>this._getSplitParts(n),keepEmptyElement:n=>this._keepEmptyElement(n)}}convert(e,n,s=["$root"]){this.fire("viewCleanup",e),this._modelCursor=Boe(s,n),this.conversionApi.writer=n,this.conversionApi.consumable=_p.createFrom(e),this.conversionApi.store={};const{modelRange:r}=this._convertItem(e,this._modelCursor),o=n.createDocumentFragment();if(r){this._removeEmptyElements();const a=this._modelCursor.parent,l=a._removeChildren(0,a.childCount);o._insertChild(0,l),o.markers=Doe(o,n)}return this._modelCursor=null,this._splitParts.clear(),this._cursorParents.clear(),this._emptyElementsToKeep.clear(),this.conversionApi.writer=null,this.conversionApi.store=null,o}_convertItem(e,n){const s={viewItem:e,modelCursor:n,modelRange:null};if(e.is("element")?this.fire(`element:${e.name}`,s,this.conversionApi):e.is("$text")?this.fire("text",s,this.conversionApi):this.fire("documentFragment",s,this.conversionApi),s.modelRange&&!(s.modelRange instanceof Z))throw new D("view-conversion-dispatcher-incorrect-result",this);return{modelRange:s.modelRange,modelCursor:s.modelCursor}}_convertChildren(e,n){let s=n.is("position")?n:se._createAt(n,0);const r=new Z(s);for(const o of Array.from(e.getChildren())){const a=this._convertItem(o,s);a.modelRange instanceof Z&&(r.end=a.modelRange.end,s=a.modelCursor)}return{modelRange:r,modelCursor:s}}_safeInsert(e,n){const s=this._splitToAllowedParent(e,n);return s?(this.conversionApi.writer.insert(e,s.position),!0):!1}_updateConversionResult(e,n){const s=this._getSplitParts(e),r=this.conversionApi.writer;n.modelRange||(n.modelRange=r.createRange(r.createPositionBefore(e),r.createPositionAfter(s[s.length-1])));const o=this._cursorParents.get(e);o?n.modelCursor=r.createPositionAt(o,0):n.modelCursor=n.modelRange.end}_splitToAllowedParent(e,n){const{schema:s,writer:r}=this.conversionApi;let o=s.findAllowedParent(n,e);if(o){if(o===n.parent)return{position:n};this._modelCursor.parent.getAncestors().includes(o)&&(o=null)}if(!o)return lM(n,e,s)?{position:cM(n,r)}:null;const a=this.conversionApi.writer.split(n,o),l=[];for(const h of a.range.getWalker())if(h.type=="elementEnd")l.push(h.item);else{const f=l.pop(),g=h.item;this._registerSplitPair(f,g)}const u=a.range.end.parent;return this._cursorParents.set(e,u),{position:a.position,cursorParent:u}}_registerSplitPair(e,n){this._splitParts.has(e)||this._splitParts.set(e,[e]);const s=this._splitParts.get(e);this._splitParts.set(n,s),s.push(n)}_getSplitParts(e){let n;return this._splitParts.has(e)?n=this._splitParts.get(e):n=[e],n}_keepEmptyElement(e){this._emptyElementsToKeep.add(e)}_removeEmptyElements(){const e=new Map;for(const n of this._splitParts.keys())if(n.isEmpty&&!this._emptyElementsToKeep.has(n)){const s=e.get(n.parent)||[];s.push(n),this._splitParts.delete(n),e.set(n.parent,s)}for(const[n,s]of e)n._removeChildrenArray(s);e.size&&this._removeEmptyElements()}}function Doe(i,t){const e=new Set,n=new Map,s=Z._createIn(i).getItems();for(const r of s)r.is("element","$marker")&&e.add(r);for(const r of e){const o=r.getAttribute("data-name"),a=t.createPositionBefore(r);n.has(o)?n.get(o).end=a.clone():n.set(o,new Z(a.clone())),t.remove(r)}return n}function Boe(i,t){let e;for(const n of new ua(i)){const s={};for(const o of n.getAttributeKeys())s[o]=n.getAttribute(o);const r=t.createElement(n.name,s);e&&t.insert(r,e),e=se._createAt(r,0)}return e}class Foe{getHtml(t){const n=Ce.document.implementation.createHTMLDocument("").createElement("div");return n.appendChild(t),n.innerHTML}}class $oe{constructor(t){b(this,"domParser");b(this,"domConverter");b(this,"htmlWriter");b(this,"skipComments",!0);this.domParser=new DOMParser,this.domConverter=new Mb(t,{renderingMode:"data"}),this.htmlWriter=new Foe}toData(t){const e=this.domConverter.viewToDom(t);return this.htmlWriter.getHtml(e)}toView(t){const e=this._toDom(t);return this.domConverter.domToView(e,{skipComments:this.skipComments})}registerRawContentMatcher(t){this.domConverter.registerRawContentMatcher(t)}useFillerType(t){this.domConverter.blockFillerMode=t=="marked"?"markedNbsp":"nbsp"}_toDom(t){/<(?:html|body|head|meta)(?:\s[^>]*)?>/i.test(t.trim().slice(0,1e4))||(t=`<body>${t}</body>`);const e=this.domParser.parseFromString(t,"text/html"),n=e.createDocumentFragment(),s=e.body.childNodes;for(;s.length>0;)n.appendChild(s[0]);return n}}class zoe extends Ct(){constructor(e,n){super();b(this,"model");b(this,"mapper");b(this,"downcastDispatcher");b(this,"upcastDispatcher");b(this,"viewDocument");b(this,"stylesProcessor");b(this,"htmlProcessor");b(this,"processor");b(this,"_viewWriter");this.model=e,this.mapper=new Y4,this.downcastDispatcher=new Z4({mapper:this.mapper,schema:e.schema}),this.downcastDispatcher.on("insert:$text",Q4(),{priority:"lowest"}),this.downcastDispatcher.on("insert",eM(),{priority:"lowest"}),this.upcastDispatcher=new Voe({schema:e.schema}),this.viewDocument=new Ob(n),this.stylesProcessor=n,this.htmlProcessor=new $oe(this.viewDocument),this.processor=this.htmlProcessor,this._viewWriter=new F4(this.viewDocument),this.upcastDispatcher.on("text",Qre(),{priority:"lowest"}),this.upcastDispatcher.on("element",G2(),{priority:"lowest"}),this.upcastDispatcher.on("documentFragment",G2(),{priority:"lowest"}),yt().prototype.decorate.call(this,"init"),yt().prototype.decorate.call(this,"set"),yt().prototype.decorate.call(this,"get"),yt().prototype.decorate.call(this,"toView"),yt().prototype.decorate.call(this,"toModel"),this.on("init",()=>{this.fire("ready")},{priority:"lowest"}),this.on("ready",()=>{this.model.enqueueChange({isUndoable:!1},aM)},{priority:"lowest"})}get(e={}){const{rootName:n="main",trim:s="empty"}=e;if(!this._checkIfRootsExists([n]))throw new D("datacontroller-get-non-existent-root",this);const r=this.model.document.getRoot(n);return r.isAttached()||dt("datacontroller-get-detached-root",this),s==="empty"&&!this.model.hasContent(r,{ignoreWhitespaces:!0})?"":this.stringify(r,e)}stringify(e,n={}){const s=this.toView(e,n);return this.processor.toData(s)}toView(e,n={}){const s=this.viewDocument,r=this._viewWriter;this.mapper.clearBindings();const o=Z._createIn(e),a=new hl(s);this.mapper.bindElements(e,a);const l=e.is("documentFragment")?e.markers:joe(e);return this.downcastDispatcher.convert(o,l,r,n),a}init(e){if(this.model.document.version)throw new D("datacontroller-init-document-not-empty",this);let n={};if(typeof e=="string"?n.main=e:n=e,!this._checkIfRootsExists(Object.keys(n)))throw new D("datacontroller-init-non-existent-root",this);return this.model.enqueueChange({isUndoable:!1},s=>{for(const r of Object.keys(n)){const o=this.model.document.getRoot(r);s.insert(this.parse(n[r],o),o,0)}}),Promise.resolve()}set(e,n={}){let s={};if(typeof e=="string"?s.main=e:s=e,!this._checkIfRootsExists(Object.keys(s)))throw new D("datacontroller-set-non-existent-root",this);this.model.enqueueChange(n.batchType||{},r=>{r.setSelection(null),r.removeSelectionAttribute(this.model.document.selection.getAttributeKeys());for(const o of Object.keys(s)){const a=this.model.document.getRoot(o);r.remove(r.createRangeIn(a)),r.insert(this.parse(s[o],a),a,0)}})}parse(e,n="$root"){const s=this.processor.toView(e);return this.toModel(s,n)}toModel(e,n="$root"){return this.model.change(s=>this.upcastDispatcher.convert(e,s,n))}addStyleProcessorRules(e){e(this.stylesProcessor)}registerRawContentMatcher(e){this.processor&&this.processor!==this.htmlProcessor&&this.processor.registerRawContentMatcher(e),this.htmlProcessor.registerRawContentMatcher(e)}destroy(){this.stopListening()}_checkIfRootsExists(e){for(const n of e)if(!this.model.document.getRoot(n))return!1;return!0}}function joe(i){const t=[],e=i.root.document;if(!e)return new Map;const n=Z._createIn(i);for(const s of e.model.markers){const r=s.getRange(),o=r.isCollapsed,a=r.start.isEqual(n.start)||r.end.isEqual(n.end);if(o&&a)t.push([s.name,r]);else{const l=n.getIntersection(r);l&&t.push([s.name,l])}}return t.sort(([s,r],[o,a])=>{if(r.end.compareWith(a.start)!=="after")return 1;if(r.start.compareWith(a.end)!=="before")return-1;switch(r.start.compareWith(a.start)){case"before":return 1;case"after":return-1;default:switch(r.end.compareWith(a.end)){case"before":return 1;case"after":return-1;default:return o.localeCompare(s)}}}),new Map(t)}class Hoe{constructor(t,e){b(this,"_helpers",new Map);b(this,"_downcast");b(this,"_upcast");this._downcast=Bt(t),this._createConversionHelpers({name:"downcast",dispatchers:this._downcast,isDowncast:!0}),this._upcast=Bt(e),this._createConversionHelpers({name:"upcast",dispatchers:this._upcast,isDowncast:!1})}addAlias(t,e){const n=this._downcast.includes(e);if(!this._upcast.includes(e)&&!n)throw new D("conversion-add-alias-dispatcher-not-registered",this);this._createConversionHelpers({name:t,dispatchers:[e],isDowncast:n})}for(t){if(!this._helpers.has(t))throw new D("conversion-for-unknown-group",this);return this._helpers.get(t)}elementToElement(t){this.for("downcast").elementToElement(t);for(const{model:e,view:n}of Z0(t))this.for("upcast").elementToElement({model:e,view:n,converterPriority:t.converterPriority})}attributeToElement(t){this.for("downcast").attributeToElement(t);for(const{model:e,view:n}of Z0(t))this.for("upcast").elementToAttribute({view:n,model:e,converterPriority:t.converterPriority})}attributeToAttribute(t){this.for("downcast").attributeToAttribute(t);for(const{model:e,view:n}of Z0(t))this.for("upcast").attributeToAttribute({view:n,model:e})}_createConversionHelpers({name:t,dispatchers:e,isDowncast:n}){if(this._helpers.has(t))throw new D("conversion-group-exists",this);const s=n?new yre(e):new Jre(e);this._helpers.set(t,s)}}function*Z0(i){if(i.model.values)for(const t of i.model.values){const e={key:i.model.key,value:t},n=i.view[t],s=i.upcastAlso?i.upcastAlso[t]:void 0;yield*J2(e,n,s)}else yield*J2(i.model,i.view,i.upcastAlso)}function*J2(i,t,e){if(yield{model:i,view:t},e)for(const n of Bt(e))yield{model:i,view:n}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class is{constructor(t){b(this,"baseVersion");b(this,"isDocumentOperation");b(this,"batch");this.baseVersion=t,this.isDocumentOperation=this.baseVersion!==null,this.batch=null}_validate(){}toJSON(){const t=Object.assign({},this);return t.__className=this.constructor.className,delete t.batch,delete t.isDocumentOperation,t}static get className(){return"Operation"}static fromJSON(t,e){return new this(t.baseVersion)}}function $E(i,t){const e=gM(t),n=e.reduce((o,a)=>o+a.offsetSize,0),s=i.parent;Dh(i);const r=i.index;return s._insertChild(r,e),Vh(s,r+e.length),Vh(s,r),new Z(i,i.getShiftedBy(n))}function mM(i){if(!i.isFlat)throw new D("operation-utils-remove-range-not-flat",this);const t=i.start.parent;Dh(i.start),Dh(i.end);const e=t._removeChildren(i.start.index,i.end.index-i.start.index);return Vh(t,i.start.index),e}function Lh(i,t){if(!i.isFlat)throw new D("operation-utils-move-range-not-flat",this);const e=mM(i);return t=t._getTransformedByDeletion(i.start,i.end.offset-i.start.offset),$E(t,e)}function Uoe(i,t,e){Dh(i.start),Dh(i.end);for(const n of i.getItems({shallow:!0})){const s=n.is("$textProxy")?n.textNode:n;e!==null?s._setAttribute(t,e):s._removeAttribute(t),Vh(s.parent,s.index)}Vh(i.end.parent,i.end.index)}function gM(i){const t=[];function e(n){if(typeof n=="string")t.push(new Dt(n));else if(n instanceof Ks)t.push(new Dt(n.data,n.getAttributes()));else if(n instanceof Ml)t.push(n);else if(ts(n))for(const s of n)e(s)}e(i);for(let n=1;n<t.length;n++){const s=t[n],r=t[n-1];s instanceof Dt&&r instanceof Dt&&pM(s,r)&&(t.splice(n-1,2,new Dt(r.data+s.data,r.getAttributes())),n--)}return t}function Vh(i,t){const e=i.getChild(t-1),n=i.getChild(t);if(e&&n&&e.is("$text")&&n.is("$text")&&pM(e,n)){const s=new Dt(e.data+n.data,e.getAttributes());i._removeChildren(t-1,2),i._insertChild(t-1,s)}}function Dh(i){const t=i.textNode,e=i.parent;if(t){const n=i.offset-t.startOffset,s=t.index;e._removeChildren(s,1);const r=new Dt(t.data.substr(0,n),t.getAttributes()),o=new Dt(t.data.substr(n),t.getAttributes());e._insertChild(s,[r,o])}}function pM(i,t){const e=i.getAttributes(),n=t.getAttributes();for(const s of e){if(s[1]!==t.getAttribute(s[0]))return!1;n.next()}return n.next().done}class vt extends is{constructor(e,n,s,r){super(r);b(this,"sourcePosition");b(this,"howMany");b(this,"targetPosition");this.sourcePosition=e.clone(),this.sourcePosition.stickiness="toNext",this.howMany=n,this.targetPosition=s.clone(),this.targetPosition.stickiness="toNone"}get type(){return this.targetPosition.root.rootName=="$graveyard"?"remove":this.sourcePosition.root.rootName=="$graveyard"?"reinsert":"move"}get affectedSelectable(){return[Z._createFromPositionAndShift(this.sourcePosition,this.howMany),Z._createFromPositionAndShift(this.targetPosition,0)]}clone(){return new vt(this.sourcePosition,this.howMany,this.targetPosition,this.baseVersion)}getMovedRangeStart(){return this.targetPosition._getTransformedByDeletion(this.sourcePosition,this.howMany)}getReversed(){const e=this.sourcePosition._getTransformedByInsertion(this.targetPosition,this.howMany);return new vt(this.getMovedRangeStart(),this.howMany,e,this.baseVersion+1)}_validate(){const e=this.sourcePosition.parent,n=this.targetPosition.parent,s=this.sourcePosition.offset,r=this.targetPosition.offset;if(s+this.howMany>e.maxOffset)throw new D("move-operation-nodes-do-not-exist",this);if(e===n&&s<r&&r<s+this.howMany)throw new D("move-operation-range-into-itself",this);if(this.sourcePosition.root==this.targetPosition.root&&Jn(this.sourcePosition.getParentPath(),this.targetPosition.getParentPath())=="prefix"){const o=this.sourcePosition.path.length-1;if(this.targetPosition.path[o]>=s&&this.targetPosition.path[o]<s+this.howMany)throw new D("move-operation-node-into-itself",this)}}_execute(){Lh(Z._createFromPositionAndShift(this.sourcePosition,this.howMany),this.targetPosition)}toJSON(){const e=super.toJSON();return e.sourcePosition=this.sourcePosition.toJSON(),e.targetPosition=this.targetPosition.toJSON(),e}static get className(){return"MoveOperation"}static fromJSON(e,n){const s=se.fromJSON(e.sourcePosition,n),r=se.fromJSON(e.targetPosition,n);return new this(s,e.howMany,r,e.baseVersion)}}class Mn extends is{constructor(e,n,s){super(s);b(this,"position");b(this,"nodes");b(this,"shouldReceiveAttributes");this.position=e.clone(),this.position.stickiness="toNone",this.nodes=new dh(gM(n)),this.shouldReceiveAttributes=!1}get type(){return"insert"}get howMany(){return this.nodes.maxOffset}get affectedSelectable(){return this.position.clone()}clone(){const e=new dh([...this.nodes].map(s=>s._clone(!0))),n=new Mn(this.position,e,this.baseVersion);return n.shouldReceiveAttributes=this.shouldReceiveAttributes,n}getReversed(){const e=this.position.root.document.graveyard,n=new se(e,[0]);return new vt(this.position,this.nodes.maxOffset,n,this.baseVersion+1)}_validate(){const e=this.position.parent;if(!e||e.maxOffset<this.position.offset)throw new D("insert-operation-position-invalid",this)}_execute(){const e=this.nodes;this.nodes=new dh([...e].map(n=>n._clone(!0))),$E(this.position,e)}toJSON(){const e=super.toJSON();return e.position=this.position.toJSON(),e.nodes=this.nodes.toJSON(),e}static get className(){return"InsertOperation"}static fromJSON(e,n){const s=[];for(const o of e.nodes)o.name?s.push(Yt.fromJSON(o)):s.push(Dt.fromJSON(o));const r=new Mn(se.fromJSON(e.position,n),s,e.baseVersion);return r.shouldReceiveAttributes=e.shouldReceiveAttributes,r}}class Pt extends is{constructor(e,n,s,r,o){super(o);b(this,"splitPosition");b(this,"howMany");b(this,"insertionPosition");b(this,"graveyardPosition");this.splitPosition=e.clone(),this.splitPosition.stickiness="toNext",this.howMany=n,this.insertionPosition=s,this.graveyardPosition=r?r.clone():null,this.graveyardPosition&&(this.graveyardPosition.stickiness="toNext")}get type(){return"split"}get moveTargetPosition(){const e=this.insertionPosition.path.slice();return e.push(0),new se(this.insertionPosition.root,e)}get movedRange(){const e=this.splitPosition.getShiftedBy(Number.POSITIVE_INFINITY);return new Z(this.splitPosition,e)}get affectedSelectable(){const e=[Z._createFromPositionAndShift(this.splitPosition,0),Z._createFromPositionAndShift(this.insertionPosition,0)];return this.graveyardPosition&&e.push(Z._createFromPositionAndShift(this.graveyardPosition,0)),e}clone(){return new Pt(this.splitPosition,this.howMany,this.insertionPosition,this.graveyardPosition,this.baseVersion)}getReversed(){const e=this.splitPosition.root.document.graveyard,n=new se(e,[0]);return new an(this.moveTargetPosition,this.howMany,this.splitPosition,n,this.baseVersion+1)}_validate(){const e=this.splitPosition.parent,n=this.splitPosition.offset;if(!e||e.maxOffset<n)throw new D("split-operation-position-invalid",this);if(e.parent){if(this.howMany!=e.maxOffset-this.splitPosition.offset)throw new D("split-operation-how-many-invalid",this);if(this.graveyardPosition&&!this.graveyardPosition.nodeAfter)throw new D("split-operation-graveyard-position-invalid",this)}else throw new D("split-operation-split-in-root",this)}_execute(){const e=this.splitPosition.parent;if(this.graveyardPosition)Lh(Z._createFromPositionAndShift(this.graveyardPosition,1),this.insertionPosition);else{const s=e._clone();$E(this.insertionPosition,s)}const n=new Z(se._createAt(e,this.splitPosition.offset),se._createAt(e,e.maxOffset));Lh(n,this.moveTargetPosition)}toJSON(){const e=super.toJSON();return e.splitPosition=this.splitPosition.toJSON(),e.insertionPosition=this.insertionPosition.toJSON(),this.graveyardPosition&&(e.graveyardPosition=this.graveyardPosition.toJSON()),e}static get className(){return"SplitOperation"}static getInsertionPosition(e){const n=e.path.slice(0,-1);return n[n.length-1]++,new se(e.root,n,"toPrevious")}static fromJSON(e,n){const s=se.fromJSON(e.splitPosition,n),r=se.fromJSON(e.insertionPosition,n),o=e.graveyardPosition?se.fromJSON(e.graveyardPosition,n):null;return new this(s,e.howMany,r,o,e.baseVersion)}}class an extends is{constructor(e,n,s,r,o){super(o);b(this,"sourcePosition");b(this,"howMany");b(this,"targetPosition");b(this,"graveyardPosition");this.sourcePosition=e.clone(),this.sourcePosition.stickiness="toPrevious",this.howMany=n,this.targetPosition=s.clone(),this.targetPosition.stickiness="toNext",this.graveyardPosition=r.clone()}get type(){return"merge"}get deletionPosition(){return new se(this.sourcePosition.root,this.sourcePosition.path.slice(0,-1))}get movedRange(){const e=this.sourcePosition.getShiftedBy(Number.POSITIVE_INFINITY);return new Z(this.sourcePosition,e)}get affectedSelectable(){const e=this.sourcePosition.parent;return[Z._createOn(e),Z._createFromPositionAndShift(this.targetPosition,0),Z._createFromPositionAndShift(this.graveyardPosition,0)]}clone(){return new an(this.sourcePosition,this.howMany,this.targetPosition,this.graveyardPosition,this.baseVersion)}getReversed(){const e=this.targetPosition._getTransformedByMergeOperation(this),n=this.sourcePosition.path.slice(0,-1),s=new se(this.sourcePosition.root,n)._getTransformedByMergeOperation(this);return new Pt(e,this.howMany,s,this.graveyardPosition,this.baseVersion+1)}_validate(){const e=this.sourcePosition.parent,n=this.targetPosition.parent;if(e.parent)if(n.parent){if(this.howMany!=e.maxOffset)throw new D("merge-operation-how-many-invalid",this)}else throw new D("merge-operation-target-position-invalid",this);else throw new D("merge-operation-source-position-invalid",this)}_execute(){const e=this.sourcePosition.parent,n=Z._createIn(e);Lh(n,this.targetPosition),Lh(Z._createOn(e),this.graveyardPosition)}toJSON(){const e=super.toJSON();return e.sourcePosition=e.sourcePosition.toJSON(),e.targetPosition=e.targetPosition.toJSON(),e.graveyardPosition=e.graveyardPosition.toJSON(),e}static get className(){return"MergeOperation"}static fromJSON(e,n){const s=se.fromJSON(e.sourcePosition,n),r=se.fromJSON(e.targetPosition,n),o=se.fromJSON(e.graveyardPosition,n);return new this(s,e.howMany,r,o,e.baseVersion)}}class ui extends is{constructor(e,n,s,r,o,a){super(a);b(this,"name");b(this,"oldRange");b(this,"newRange");b(this,"affectsData");b(this,"_markers");this.name=e,this.oldRange=n?n.clone():null,this.newRange=s?s.clone():null,this.affectsData=o,this._markers=r}get type(){return"marker"}get affectedSelectable(){const e=[];return this.oldRange&&e.push(this.oldRange.clone()),this.newRange&&(this.oldRange?e.push(...this.newRange.getDifference(this.oldRange)):e.push(this.newRange.clone())),e}clone(){return new ui(this.name,this.oldRange,this.newRange,this._markers,this.affectsData,this.baseVersion)}getReversed(){return new ui(this.name,this.newRange,this.oldRange,this._markers,this.affectsData,this.baseVersion+1)}_execute(){this.newRange?this._markers._set(this.name,this.newRange,!0,this.affectsData):this._markers._remove(this.name)}toJSON(){const e=super.toJSON();return this.oldRange&&(e.oldRange=this.oldRange.toJSON()),this.newRange&&(e.newRange=this.newRange.toJSON()),delete e._markers,e}static get className(){return"MarkerOperation"}static fromJSON(e,n){return new ui(e.name,e.oldRange?Z.fromJSON(e.oldRange,n):null,e.newRange?Z.fromJSON(e.newRange,n):null,n.model.markers,e.affectsData,e.baseVersion)}}class hn extends is{constructor(e,n,s,r,o){super(o);b(this,"range");b(this,"key");b(this,"oldValue");b(this,"newValue");this.range=e.clone(),this.key=n,this.oldValue=s===void 0?null:s,this.newValue=r===void 0?null:r}get type(){return this.oldValue===null?"addAttribute":this.newValue===null?"removeAttribute":"changeAttribute"}get affectedSelectable(){return this.range.clone()}clone(){return new hn(this.range,this.key,this.oldValue,this.newValue,this.baseVersion)}getReversed(){return new hn(this.range,this.key,this.newValue,this.oldValue,this.baseVersion+1)}toJSON(){const e=super.toJSON();return e.range=this.range.toJSON(),e}_validate(){if(!this.range.isFlat)throw new D("attribute-operation-range-not-flat",this);for(const e of this.range.getItems({shallow:!0})){if(this.oldValue!==null&&!wp(e.getAttribute(this.key),this.oldValue))throw new D("attribute-operation-wrong-old-value",this,{item:e,key:this.key,value:this.oldValue});if(this.oldValue===null&&this.newValue!==null&&e.hasAttribute(this.key))throw new D("attribute-operation-attribute-exists",this,{node:e,key:this.key})}}_execute(){wp(this.oldValue,this.newValue)||Uoe(this.range,this.key,this.newValue)}static get className(){return"AttributeOperation"}static fromJSON(e,n){return new hn(Z.fromJSON(e.range,n),e.key,e.oldValue,e.newValue,e.baseVersion)}}class xn extends is{get type(){return"noop"}get affectedSelectable(){return null}clone(){return new xn(this.baseVersion)}getReversed(){return new xn(this.baseVersion+1)}_execute(){}static get className(){return"NoOperation"}}class Ai extends is{constructor(e,n,s,r){super(r);b(this,"position");b(this,"oldName");b(this,"newName");this.position=e,this.position.stickiness="toNext",this.oldName=n,this.newName=s}get type(){return"rename"}get affectedSelectable(){return this.position.nodeAfter}clone(){return new Ai(this.position.clone(),this.oldName,this.newName,this.baseVersion)}getReversed(){return new Ai(this.position.clone(),this.newName,this.oldName,this.baseVersion+1)}_validate(){const e=this.position.nodeAfter;if(e instanceof Yt){if(e.name!==this.oldName)throw new D("rename-operation-wrong-name",this)}else throw new D("rename-operation-wrong-position",this)}_execute(){const e=this.position.nodeAfter;e.name=this.newName}toJSON(){const e=super.toJSON();return e.position=this.position.toJSON(),e}static get className(){return"RenameOperation"}static fromJSON(e,n){return new Ai(se.fromJSON(e.position,n),e.oldName,e.newName,e.baseVersion)}}class ao extends is{constructor(e,n,s,r,o){super(o);b(this,"root");b(this,"key");b(this,"oldValue");b(this,"newValue");this.root=e,this.key=n,this.oldValue=s===void 0?null:s,this.newValue=r===void 0?null:r}get type(){return this.oldValue===null?"addRootAttribute":this.newValue===null?"removeRootAttribute":"changeRootAttribute"}get affectedSelectable(){return this.root}clone(){return new ao(this.root,this.key,this.oldValue,this.newValue,this.baseVersion)}getReversed(){return new ao(this.root,this.key,this.newValue,this.oldValue,this.baseVersion+1)}_validate(){if(this.root!=this.root.root||this.root.is("documentFragment"))throw new D("rootattribute-operation-not-a-root",this,{root:this.root,key:this.key});if(this.oldValue!==null&&this.root.getAttribute(this.key)!==this.oldValue)throw new D("rootattribute-operation-wrong-old-value",this,{root:this.root,key:this.key});if(this.oldValue===null&&this.newValue!==null&&this.root.hasAttribute(this.key))throw new D("rootattribute-operation-attribute-exists",this,{root:this.root,key:this.key})}_execute(){this.newValue!==null?this.root._setAttribute(this.key,this.newValue):this.root._removeAttribute(this.key)}toJSON(){const e=super.toJSON();return e.root=this.root.toJSON(),e}static get className(){return"RootAttributeOperation"}static fromJSON(e,n){if(!n.getRoot(e.root))throw new D("rootattribute-operation-fromjson-no-root",this,{rootName:e.root});return new ao(n.getRoot(e.root),e.key,e.oldValue,e.newValue,e.baseVersion)}}class Tr extends is{constructor(e,n,s,r,o){super(o);b(this,"rootName");b(this,"elementName");b(this,"isAdd");b(this,"_document");if(this.rootName=e,this.elementName=n,this.isAdd=s,this._document=r,!this._document.getRoot(this.rootName)){const a=this._document.createRoot(this.elementName,this.rootName);a._isAttached=!1}}get type(){return this.isAdd?"addRoot":"detachRoot"}get affectedSelectable(){return this._document.getRoot(this.rootName)}clone(){return new Tr(this.rootName,this.elementName,this.isAdd,this._document,this.baseVersion)}getReversed(){return new Tr(this.rootName,this.elementName,!this.isAdd,this._document,this.baseVersion+1)}_execute(){this._document.getRoot(this.rootName)._isAttached=this.isAdd}toJSON(){const e=super.toJSON();return delete e._document,e}static get className(){return"RootOperation"}static fromJSON(e,n){return new Tr(e.rootName,e.elementName,e.isAdd,n,e.baseVersion)}}const Ps={};Ps[hn.className]=hn;Ps[Mn.className]=Mn;Ps[ui.className]=ui;Ps[vt.className]=vt;Ps[xn.className]=xn;Ps[is.className]=is;Ps[Ai.className]=Ai;Ps[ao.className]=ao;Ps[Tr.className]=Tr;Ps[Pt.className]=Pt;Ps[an.className]=an;class Woe{static fromJSON(t,e){return Ps[t.__className].fromJSON(t,e)}}const Oy=new Map;function gt(i,t,e){let n=Oy.get(i);n||(n=new Map,Oy.set(i,n)),n.set(t,e)}function qoe(i,t){const e=Oy.get(i);return e&&e.has(t)?e.get(t):Goe}function Goe(i){return[i]}function Q2(i,t,e={}){const n=qoe(i.constructor,t.constructor);try{return i=i.clone(),n(i,t,e)}catch(s){throw s}}function Koe(i,t,e){i=i.slice(),t=t.slice();const n=new Yoe(e.document,e.useRelations,e.forceWeakRemove);n.setOriginalOperations(i),n.setOriginalOperations(t);const s=n.originalOperations;if(i.length==0||t.length==0)return{operationsA:i,operationsB:t,originalOperations:s};const r=new WeakMap;for(const l of i)r.set(l,0);const o={nextBaseVersionA:i[i.length-1].baseVersion+1,nextBaseVersionB:t[t.length-1].baseVersion+1,originalOperationsACount:i.length,originalOperationsBCount:t.length};let a=0;for(;a<i.length;){const l=i[a],u=r.get(l);if(u==t.length){a++;continue}const h=t[u],f=Q2(l,h,n.getContext(l,h,!0)),g=Q2(h,l,n.getContext(h,l,!1));n.updateRelation(l,h),n.setOriginalOperations(f,l),n.setOriginalOperations(g,h);for(const p of f)r.set(p,u+g.length);i.splice(a,1,...f),t.splice(u,1,...g)}return tP(i),tP(t),eP(i,o.nextBaseVersionB),eP(t,o.nextBaseVersionA),{operationsA:i,operationsB:t,originalOperations:s}}class Yoe{constructor(t,e,n=!1){b(this,"originalOperations");b(this,"_history");b(this,"_useRelations");b(this,"_forceWeakRemove");b(this,"_relations");this.originalOperations=new Map,this._history=t.history,this._useRelations=e,this._forceWeakRemove=!!n,this._relations=new Map}setOriginalOperations(t,e=null){const n=e?this.originalOperations.get(e):null;for(const s of t)this.originalOperations.set(s,n||s)}updateRelation(t,e){if(t instanceof vt)e instanceof an?t.targetPosition.isEqual(e.sourcePosition)||e.movedRange.containsPosition(t.targetPosition)?this._setRelation(t,e,"insertAtSource"):t.targetPosition.isEqual(e.deletionPosition)?this._setRelation(t,e,"insertBetween"):t.targetPosition.isAfter(e.sourcePosition)&&this._setRelation(t,e,"moveTargetAfter"):e instanceof vt&&(t.targetPosition.isEqual(e.sourcePosition)||t.targetPosition.isBefore(e.sourcePosition)?this._setRelation(t,e,"insertBefore"):this._setRelation(t,e,"insertAfter"));else if(t instanceof Pt){if(e instanceof an)t.splitPosition.isBefore(e.sourcePosition)&&this._setRelation(t,e,"splitBefore");else if(e instanceof vt)if(t.splitPosition.isEqual(e.sourcePosition)||t.splitPosition.isBefore(e.sourcePosition))this._setRelation(t,e,"splitBefore");else{const n=Z._createFromPositionAndShift(e.sourcePosition,e.howMany);if(t.splitPosition.hasSameParentAs(e.sourcePosition)&&n.containsPosition(t.splitPosition)){const s=n.end.offset-t.splitPosition.offset,r=t.splitPosition.offset-n.start.offset;this._setRelation(t,e,{howMany:s,offset:r})}}}else if(t instanceof an)e instanceof an?(t.targetPosition.isEqual(e.sourcePosition)||this._setRelation(t,e,"mergeTargetNotMoved"),t.sourcePosition.isEqual(e.targetPosition)&&this._setRelation(t,e,"mergeSourceNotMoved"),t.sourcePosition.isEqual(e.sourcePosition)&&this._setRelation(t,e,"mergeSameElement")):e instanceof Pt?t.sourcePosition.isEqual(e.splitPosition)&&this._setRelation(t,e,"splitAtSource"):e instanceof vt&&e.howMany>0&&(t.sourcePosition.isEqual(e.sourcePosition.getShiftedBy(e.howMany))&&this._setRelation(t,e,"mergeSourceAffected"),t.targetPosition.isEqual(e.sourcePosition)&&this._setRelation(t,e,"mergeTargetWasBefore"));else if(t instanceof ui){const n=t.newRange;if(!n)return;if(e instanceof an){const s=n.start.isEqual(e.targetPosition),r=n.start.isEqual(e.deletionPosition),o=n.end.isEqual(e.deletionPosition),a=n.end.isEqual(e.sourcePosition);(s||r||o||a)&&this._setRelation(t,e,{wasInLeftElement:s,wasStartBeforeMergedElement:r,wasEndBeforeMergedElement:o,wasInRightElement:a})}}}getContext(t,e,n){return{aIsStrong:n,aWasUndone:this._wasUndone(t),bWasUndone:this._wasUndone(e),abRelation:this._useRelations?this._getRelation(t,e):null,baRelation:this._useRelations?this._getRelation(e,t):null,forceWeakRemove:this._forceWeakRemove}}_wasUndone(t){const e=this.originalOperations.get(t);return e.wasUndone||this._history.isUndoneOperation(e)}_getRelation(t,e){const n=this.originalOperations.get(e),s=this._history.getUndoneOperation(n);if(!s)return null;const r=this.originalOperations.get(t),o=this._relations.get(r);return o&&o.get(s)||null}_setRelation(t,e,n){const s=this.originalOperations.get(t),r=this.originalOperations.get(e);let o=this._relations.get(s);o||(o=new Map,this._relations.set(s,o)),o.set(r,n)}}function eP(i,t){for(const e of i)e.baseVersion=t++}function tP(i){const t=new Map;for(let e=0;e<i.length;e++){const n=i[e];n instanceof ui&&(n.baseVersion!==-1?t.set(n.name,{op:n,ranges:n.newRange?[n.newRange]:[]}):(n.newRange&&t.get(n.name).ranges.push(n.newRange),i.splice(e,1),e--))}for(const{op:e,ranges:n}of t.values())n.length?e.newRange=Z._createFromRanges(n):e.newRange=null}gt(hn,hn,(i,t,e)=>{if(i.key===t.key&&i.range.start.hasSameParentAs(t.range.start)){const n=i.range.getDifference(t.range).map(r=>new hn(r,i.key,i.oldValue,i.newValue,0)),s=i.range.getIntersection(t.range);return s&&e.aIsStrong&&n.push(new hn(s,t.key,t.newValue,i.newValue,0)),n.length==0?[new xn(0)]:n}else return[i]});gt(hn,Mn,(i,t)=>{if(i.range.start.hasSameParentAs(t.position)&&i.range.containsPosition(t.position)){const n=i.range._getTransformedByInsertion(t.position,t.howMany,!t.shouldReceiveAttributes).map(s=>new hn(s,i.key,i.oldValue,i.newValue,i.baseVersion));if(t.shouldReceiveAttributes){const s=bM(t,i.key,i.oldValue);s&&n.unshift(s)}return n}return i.range=i.range._getTransformedByInsertion(t.position,t.howMany,!1)[0],[i]});function bM(i,t,e){const s=i.nodes.getNode(0).getAttribute(t);if(s==e)return null;const r=new Z(i.position,i.position.getShiftedBy(i.howMany));return new hn(r,t,s,e,0)}gt(hn,an,(i,t)=>{const e=[];i.range.start.hasSameParentAs(t.deletionPosition)&&(i.range.containsPosition(t.deletionPosition)||i.range.start.isEqual(t.deletionPosition))&&e.push(Z._createFromPositionAndShift(t.graveyardPosition,1));const n=i.range._getTransformedByMergeOperation(t);return n.isCollapsed||e.push(n),e.map(s=>new hn(s,i.key,i.oldValue,i.newValue,i.baseVersion))});gt(hn,vt,(i,t)=>Zoe(i.range,t).map(n=>new hn(n,i.key,i.oldValue,i.newValue,i.baseVersion)));function Zoe(i,t){const e=Z._createFromPositionAndShift(t.sourcePosition,t.howMany);let n=null,s=[];e.containsRange(i,!0)?n=i:i.start.hasSameParentAs(e.start)?(s=i.getDifference(e),n=i.getIntersection(e)):s=[i];const r=[];for(let o of s){o=o._getTransformedByDeletion(t.sourcePosition,t.howMany);const a=t.getMovedRangeStart(),l=o.start.hasSameParentAs(a),u=o._getTransformedByInsertion(a,t.howMany,l);r.push(...u)}return n&&r.push(n._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany,!1)[0]),r}gt(hn,Pt,(i,t)=>{if(i.range.end.isEqual(t.insertionPosition))return t.graveyardPosition||i.range.end.offset++,[i];if(i.range.start.hasSameParentAs(t.splitPosition)&&i.range.containsPosition(t.splitPosition)){const e=i.clone();return e.range=new Z(t.moveTargetPosition.clone(),i.range.end._getCombined(t.splitPosition,t.moveTargetPosition)),i.range.end=t.splitPosition.clone(),i.range.end.stickiness="toPrevious",[i,e]}return i.range=i.range._getTransformedBySplitOperation(t),[i]});gt(Mn,hn,(i,t)=>{const e=[i];if(i.shouldReceiveAttributes&&i.position.hasSameParentAs(t.range.start)&&t.range.containsPosition(i.position)){const n=bM(i,t.key,t.newValue);n&&e.push(n)}return e});gt(Mn,Mn,(i,t,e)=>i.position.isEqual(t.position)&&e.aIsStrong?[i]:(i.position=i.position._getTransformedByInsertOperation(t),[i]));gt(Mn,vt,(i,t)=>(i.position=i.position._getTransformedByMoveOperation(t),[i]));gt(Mn,Pt,(i,t)=>(i.position=i.position._getTransformedBySplitOperation(t),[i]));gt(Mn,an,(i,t)=>(i.position=i.position._getTransformedByMergeOperation(t),[i]));gt(ui,Mn,(i,t)=>(i.oldRange&&(i.oldRange=i.oldRange._getTransformedByInsertOperation(t)[0]),i.newRange&&(i.newRange=i.newRange._getTransformedByInsertOperation(t)[0]),[i]));gt(ui,ui,(i,t,e)=>{if(i.name==t.name)if(e.aIsStrong)i.oldRange=t.newRange?t.newRange.clone():null;else return[new xn(0)];return[i]});gt(ui,an,(i,t)=>(i.oldRange&&(i.oldRange=i.oldRange._getTransformedByMergeOperation(t)),i.newRange&&(i.newRange=i.newRange._getTransformedByMergeOperation(t)),[i]));gt(ui,vt,(i,t)=>{const e=[i];if(i.oldRange&&(i.oldRange=Z._createFromRanges(i.oldRange._getTransformedByMoveOperation(t))),i.newRange){const n=i.newRange._getTransformedByMoveOperation(t);i.newRange=n[0];for(let s=1;s<n.length;s++){const r=i.clone();r.oldRange=null,r.newRange=n[s],r.baseVersion=-1,e.push(r)}}return e});gt(ui,Pt,(i,t,e)=>{if(i.oldRange&&(i.oldRange=i.oldRange._getTransformedBySplitOperation(t)),i.newRange){if(e.abRelation){const n=i.newRange._getTransformedBySplitOperation(t);return i.newRange.start.isEqual(t.splitPosition)&&e.abRelation.wasStartBeforeMergedElement?i.newRange.start=se._createAt(t.insertionPosition):i.newRange.start.isEqual(t.splitPosition)&&!e.abRelation.wasInLeftElement?i.newRange.start=se._createAt(t.moveTargetPosition):i.newRange.start=n.start,i.newRange.end.isEqual(t.splitPosition)&&e.abRelation.wasInRightElement?i.newRange.end=se._createAt(t.moveTargetPosition):i.newRange.end.isEqual(t.splitPosition)&&e.abRelation.wasEndBeforeMergedElement?i.newRange.end=se._createAt(t.insertionPosition):i.newRange.end=n.end,[i]}i.newRange=i.newRange._getTransformedBySplitOperation(t)}return[i]});gt(an,Mn,(i,t)=>(i.sourcePosition.hasSameParentAs(t.position)&&(i.howMany+=t.howMany),i.sourcePosition=i.sourcePosition._getTransformedByInsertOperation(t),i.targetPosition=i.targetPosition._getTransformedByInsertOperation(t),[i]));gt(an,an,(i,t,e)=>{if(i.sourcePosition.isEqual(t.sourcePosition)&&i.targetPosition.isEqual(t.targetPosition))if(e.bWasUndone){const n=t.graveyardPosition.path.slice();return n.push(0),i.sourcePosition=new se(t.graveyardPosition.root,n),i.howMany=0,[i]}else return[new xn(0)];if(i.sourcePosition.isEqual(t.sourcePosition)&&!i.targetPosition.isEqual(t.targetPosition)&&!e.bWasUndone&&e.abRelation!="splitAtSource"){const n=i.targetPosition.root.rootName=="$graveyard",s=t.targetPosition.root.rootName=="$graveyard";if(s&&!n||!(n&&!s)&&e.aIsStrong){const l=t.targetPosition._getTransformedByMergeOperation(t),u=i.targetPosition._getTransformedByMergeOperation(t);return[new vt(l,i.howMany,u,0)]}else return[new xn(0)]}return i.sourcePosition.hasSameParentAs(t.targetPosition)&&(i.howMany+=t.howMany),i.sourcePosition=i.sourcePosition._getTransformedByMergeOperation(t),i.targetPosition=i.targetPosition._getTransformedByMergeOperation(t),(!i.graveyardPosition.isEqual(t.graveyardPosition)||!e.aIsStrong)&&(i.graveyardPosition=i.graveyardPosition._getTransformedByMergeOperation(t)),[i]});gt(an,vt,(i,t,e)=>{const n=Z._createFromPositionAndShift(t.sourcePosition,t.howMany);return t.type=="remove"&&!e.bWasUndone&&i.deletionPosition.hasSameParentAs(t.sourcePosition)&&n.containsPosition(i.sourcePosition)?[new xn(0)]:(t.sourcePosition.getShiftedBy(t.howMany).isEqual(i.sourcePosition)?i.sourcePosition.stickiness="toNone":t.targetPosition.isEqual(i.sourcePosition)&&e.abRelation=="mergeSourceAffected"?i.sourcePosition.stickiness="toNext":t.sourcePosition.isEqual(i.targetPosition)?(i.targetPosition.stickiness="toNone",i.howMany-=t.howMany):t.targetPosition.isEqual(i.targetPosition)&&e.abRelation=="mergeTargetWasBefore"?(i.targetPosition.stickiness="toPrevious",i.howMany+=t.howMany):(i.sourcePosition.hasSameParentAs(t.targetPosition)&&(i.howMany+=t.howMany),i.sourcePosition.hasSameParentAs(t.sourcePosition)&&(i.howMany-=t.howMany)),i.sourcePosition=i.sourcePosition._getTransformedByMoveOperation(t),i.targetPosition=i.targetPosition._getTransformedByMoveOperation(t),i.sourcePosition.stickiness="toPrevious",i.targetPosition.stickiness="toNext",i.graveyardPosition.isEqual(t.targetPosition)||(i.graveyardPosition=i.graveyardPosition._getTransformedByMoveOperation(t)),[i])});gt(an,Pt,(i,t,e)=>{if(t.graveyardPosition&&(i.graveyardPosition=i.graveyardPosition._getTransformedByDeletion(t.graveyardPosition,1),i.deletionPosition.isEqual(t.graveyardPosition)&&(i.howMany=t.howMany)),i.targetPosition.isEqual(t.splitPosition)&&(t.graveyardPosition&&i.deletionPosition.isEqual(t.graveyardPosition)||e.abRelation=="mergeTargetNotMoved"))return i.sourcePosition=i.sourcePosition._getTransformedBySplitOperation(t),[i];if(i.sourcePosition.isEqual(t.splitPosition)){if(e.abRelation=="mergeSourceNotMoved")return i.howMany=0,i.targetPosition=i.targetPosition._getTransformedBySplitOperation(t),[i];if(e.abRelation=="mergeSameElement"||i.sourcePosition.offset>0)return i.sourcePosition=t.moveTargetPosition.clone(),i.targetPosition=i.targetPosition._getTransformedBySplitOperation(t),[i]}return i.sourcePosition.hasSameParentAs(t.splitPosition)&&(i.howMany=t.splitPosition.offset),i.sourcePosition=i.sourcePosition._getTransformedBySplitOperation(t),i.targetPosition=i.targetPosition._getTransformedBySplitOperation(t),[i]});gt(vt,Mn,(i,t)=>{const n=Z._createFromPositionAndShift(i.sourcePosition,i.howMany)._getTransformedByInsertOperation(t,!1)[0];return i.sourcePosition=n.start,i.howMany=n.end.offset-n.start.offset,i.targetPosition.isEqual(t.position)||(i.targetPosition=i.targetPosition._getTransformedByInsertOperation(t)),[i]});gt(vt,vt,(i,t,e)=>{const n=Z._createFromPositionAndShift(i.sourcePosition,i.howMany),s=Z._createFromPositionAndShift(t.sourcePosition,t.howMany);let r=e.aIsStrong,o=!e.aIsStrong;e.abRelation=="insertBefore"||e.baRelation=="insertAfter"?o=!0:(e.abRelation=="insertAfter"||e.baRelation=="insertBefore")&&(o=!1);let a;if(i.targetPosition.isEqual(t.targetPosition)&&o?a=i.targetPosition._getTransformedByDeletion(t.sourcePosition,t.howMany):a=i.targetPosition._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany),nP(i,t)&&nP(t,i))return[t.getReversed()];if(n.containsPosition(t.targetPosition)&&n.containsRange(s,!0))return n.start=n.start._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany),n.end=n.end._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany),qc([n],a);if(s.containsPosition(i.targetPosition)&&s.containsRange(n,!0))return n.start=n.start._getCombined(t.sourcePosition,t.getMovedRangeStart()),n.end=n.end._getCombined(t.sourcePosition,t.getMovedRangeStart()),qc([n],a);const h=Jn(i.sourcePosition.getParentPath(),t.sourcePosition.getParentPath());if(h=="prefix"||h=="extension")return n.start=n.start._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany),n.end=n.end._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany),qc([n],a);i.type=="remove"&&t.type!="remove"&&!e.aWasUndone&&!e.forceWeakRemove?r=!0:i.type!="remove"&&t.type=="remove"&&!e.bWasUndone&&!e.forceWeakRemove&&(r=!1);const f=[],g=n.getDifference(s);for(const y of g){y.start=y.start._getTransformedByDeletion(t.sourcePosition,t.howMany),y.end=y.end._getTransformedByDeletion(t.sourcePosition,t.howMany);const E=Jn(y.start.getParentPath(),t.getMovedRangeStart().getParentPath())=="same",C=y._getTransformedByInsertion(t.getMovedRangeStart(),t.howMany,E);f.push(...C)}const p=n.getIntersection(s);return p!==null&&r&&(p.start=p.start._getCombined(t.sourcePosition,t.getMovedRangeStart()),p.end=p.end._getCombined(t.sourcePosition,t.getMovedRangeStart()),f.length===0?f.push(p):f.length==1?s.start.isBefore(n.start)||s.start.isEqual(n.start)?f.unshift(p):f.push(p):f.splice(1,0,p)),f.length===0?[new xn(i.baseVersion)]:qc(f,a)});gt(vt,Pt,(i,t,e)=>{let n=i.targetPosition.clone();(!i.targetPosition.isEqual(t.insertionPosition)||!t.graveyardPosition||e.abRelation=="moveTargetAfter")&&(n=i.targetPosition._getTransformedBySplitOperation(t));const s=Z._createFromPositionAndShift(i.sourcePosition,i.howMany);if(s.end.isEqual(t.insertionPosition))return t.graveyardPosition||i.howMany++,i.targetPosition=n,[i];if(s.start.hasSameParentAs(t.splitPosition)&&s.containsPosition(t.splitPosition)){let a=new Z(t.splitPosition,s.end);a=a._getTransformedBySplitOperation(t);const l=[new Z(s.start,t.splitPosition),a];return qc(l,n)}i.targetPosition.isEqual(t.splitPosition)&&e.abRelation=="insertAtSource"&&(n=t.moveTargetPosition),i.targetPosition.isEqual(t.insertionPosition)&&e.abRelation=="insertBetween"&&(n=i.targetPosition);const o=[s._getTransformedBySplitOperation(t)];if(t.graveyardPosition){const a=s.start.isEqual(t.graveyardPosition)||s.containsPosition(t.graveyardPosition);i.howMany>1&&a&&!e.aWasUndone&&o.push(Z._createFromPositionAndShift(t.insertionPosition,1))}return qc(o,n)});gt(vt,an,(i,t,e)=>{const n=Z._createFromPositionAndShift(i.sourcePosition,i.howMany);if(t.deletionPosition.hasSameParentAs(i.sourcePosition)&&n.containsPosition(t.sourcePosition)){if(i.type=="remove"&&!e.forceWeakRemove){if(!e.aWasUndone){const o=[];let a=t.graveyardPosition.clone(),l=t.targetPosition._getTransformedByMergeOperation(t);const u=i.targetPosition.getTransformedByOperation(t);i.howMany>1&&(o.push(new vt(i.sourcePosition,i.howMany-1,u,0)),a=a._getTransformedByMove(i.sourcePosition,u,i.howMany-1),l=l._getTransformedByMove(i.sourcePosition,u,i.howMany-1));const h=t.deletionPosition._getCombined(i.sourcePosition,u),f=new vt(a,1,h,0),g=f.getMovedRangeStart().path.slice();g.push(0);const p=new se(f.targetPosition.root,g);l=l._getTransformedByMove(a,h,1);const y=new vt(l,t.howMany,p,0);return o.push(f),o.push(y),o}}else if(i.howMany==1)return e.bWasUndone?(i.sourcePosition=t.graveyardPosition.clone(),i.targetPosition=i.targetPosition._getTransformedByMergeOperation(t),[i]):[new xn(0)]}const r=Z._createFromPositionAndShift(i.sourcePosition,i.howMany)._getTransformedByMergeOperation(t);return i.sourcePosition=r.start,i.howMany=r.end.offset-r.start.offset,i.targetPosition=i.targetPosition._getTransformedByMergeOperation(t),[i]});gt(Ai,Mn,(i,t)=>(i.position=i.position._getTransformedByInsertOperation(t),[i]));gt(Ai,an,(i,t)=>i.position.isEqual(t.deletionPosition)?(i.position=t.graveyardPosition.clone(),i.position.stickiness="toNext",[i]):(i.position=i.position._getTransformedByMergeOperation(t),[i]));gt(Ai,vt,(i,t)=>(i.position=i.position._getTransformedByMoveOperation(t),[i]));gt(Ai,Ai,(i,t,e)=>{if(i.position.isEqual(t.position))if(e.aIsStrong)i.oldName=t.newName;else return[new xn(0)];return[i]});gt(Ai,Pt,(i,t)=>{const e=i.position.path,n=t.splitPosition.getParentPath();if(Jn(e,n)=="same"&&!t.graveyardPosition){const s=new Ai(i.position.getShiftedBy(1),i.oldName,i.newName,0);return[i,s]}return i.position=i.position._getTransformedBySplitOperation(t),[i]});gt(ao,ao,(i,t,e)=>{if(i.root===t.root&&i.key===t.key){if(!e.aIsStrong||i.newValue===t.newValue)return[new xn(0)];i.oldValue=t.newValue}return[i]});gt(Tr,Tr,(i,t)=>i.rootName===t.rootName&&i.isAdd===t.isAdd?[new xn(0)]:[i]);gt(Pt,Mn,(i,t)=>(i.splitPosition.hasSameParentAs(t.position)&&i.splitPosition.offset<t.position.offset&&(i.howMany+=t.howMany),i.splitPosition=i.splitPosition._getTransformedByInsertOperation(t),i.insertionPosition=i.insertionPosition._getTransformedByInsertOperation(t),[i]));gt(Pt,an,(i,t,e)=>{if(!i.graveyardPosition&&!e.bWasUndone&&i.splitPosition.hasSameParentAs(t.sourcePosition)){const n=t.graveyardPosition.path.slice();n.push(0);const s=new se(t.graveyardPosition.root,n),r=Pt.getInsertionPosition(new se(t.graveyardPosition.root,n)),o=new Pt(s,0,r,null,0);return i.splitPosition=i.splitPosition._getTransformedByMergeOperation(t),i.insertionPosition=Pt.getInsertionPosition(i.splitPosition),i.graveyardPosition=o.insertionPosition.clone(),i.graveyardPosition.stickiness="toNext",[o,i]}return i.splitPosition.hasSameParentAs(t.deletionPosition)&&!i.splitPosition.isAfter(t.deletionPosition)&&i.howMany--,i.splitPosition.hasSameParentAs(t.targetPosition)&&(i.howMany+=t.howMany),i.splitPosition=i.splitPosition._getTransformedByMergeOperation(t),i.insertionPosition=Pt.getInsertionPosition(i.splitPosition),i.graveyardPosition&&(i.graveyardPosition=i.graveyardPosition._getTransformedByMergeOperation(t)),[i]});gt(Pt,vt,(i,t,e)=>{const n=Z._createFromPositionAndShift(t.sourcePosition,t.howMany);if(i.graveyardPosition){const r=n.start.isEqual(i.graveyardPosition)||n.containsPosition(i.graveyardPosition);if(!e.bWasUndone&&r){const o=i.splitPosition._getTransformedByMoveOperation(t),a=i.graveyardPosition._getTransformedByMoveOperation(t),l=a.path.slice();l.push(0);const u=new se(a.root,l);return[new vt(o,i.howMany,u,0)]}i.graveyardPosition=i.graveyardPosition._getTransformedByMoveOperation(t)}const s=i.splitPosition.isEqual(t.targetPosition);if(s&&(e.baRelation=="insertAtSource"||e.abRelation=="splitBefore"))return i.howMany+=t.howMany,i.splitPosition=i.splitPosition._getTransformedByDeletion(t.sourcePosition,t.howMany),i.insertionPosition=Pt.getInsertionPosition(i.splitPosition),[i];if(s&&e.abRelation&&e.abRelation.howMany){const{howMany:r,offset:o}=e.abRelation;return i.howMany+=r,i.splitPosition=i.splitPosition.getShiftedBy(o),[i]}if(i.splitPosition.hasSameParentAs(t.sourcePosition)&&n.containsPosition(i.splitPosition)){const r=t.howMany-(i.splitPosition.offset-t.sourcePosition.offset);return i.howMany-=r,i.splitPosition.hasSameParentAs(t.targetPosition)&&i.splitPosition.offset<t.targetPosition.offset&&(i.howMany+=t.howMany),i.splitPosition=t.sourcePosition.clone(),i.insertionPosition=Pt.getInsertionPosition(i.splitPosition),[i]}return t.sourcePosition.isEqual(t.targetPosition)||(i.splitPosition.hasSameParentAs(t.sourcePosition)&&i.splitPosition.offset<=t.sourcePosition.offset&&(i.howMany-=t.howMany),i.splitPosition.hasSameParentAs(t.targetPosition)&&i.splitPosition.offset<t.targetPosition.offset&&(i.howMany+=t.howMany)),i.splitPosition.stickiness="toNone",i.splitPosition=i.splitPosition._getTransformedByMoveOperation(t),i.splitPosition.stickiness="toNext",i.graveyardPosition?i.insertionPosition=i.insertionPosition._getTransformedByMoveOperation(t):i.insertionPosition=Pt.getInsertionPosition(i.splitPosition),[i]});gt(Pt,Pt,(i,t,e)=>{if(i.splitPosition.isEqual(t.splitPosition)){if(!i.graveyardPosition&&!t.graveyardPosition)return[new xn(0)];if(i.graveyardPosition&&t.graveyardPosition&&i.graveyardPosition.isEqual(t.graveyardPosition))return[new xn(0)];if(e.abRelation=="splitBefore")return i.howMany=0,i.graveyardPosition=i.graveyardPosition._getTransformedBySplitOperation(t),[i]}if(i.graveyardPosition&&t.graveyardPosition&&i.graveyardPosition.isEqual(t.graveyardPosition)){const n=i.splitPosition.root.rootName=="$graveyard",s=t.splitPosition.root.rootName=="$graveyard";if(s&&!n||!(n&&!s)&&e.aIsStrong){const l=[];return t.howMany&&l.push(new vt(t.moveTargetPosition,t.howMany,t.splitPosition,0)),i.howMany&&l.push(new vt(i.splitPosition,i.howMany,i.moveTargetPosition,0)),l}else return[new xn(0)]}if(i.graveyardPosition&&(i.graveyardPosition=i.graveyardPosition._getTransformedBySplitOperation(t)),i.splitPosition.isEqual(t.insertionPosition)&&e.abRelation=="splitBefore")return i.howMany++,[i];if(t.splitPosition.isEqual(i.insertionPosition)&&e.baRelation=="splitBefore"){const n=t.insertionPosition.path.slice();n.push(0);const s=new se(t.insertionPosition.root,n),r=new vt(i.insertionPosition,1,s,0);return[i,r]}return i.splitPosition.hasSameParentAs(t.splitPosition)&&i.splitPosition.offset<t.splitPosition.offset&&(i.howMany-=t.howMany),i.splitPosition=i.splitPosition._getTransformedBySplitOperation(t),i.insertionPosition=Pt.getInsertionPosition(i.splitPosition),[i]});function nP(i,t){return i.targetPosition._getTransformedByDeletion(t.sourcePosition,t.howMany)===null}function qc(i,t){const e=[];for(let n=0;n<i.length;n++){const s=i[n],r=new vt(s.start,s.end.offset-s.start.offset,t,0);e.push(r);for(let o=n+1;o<i.length;o++)i[o]=i[o]._getTransformedByMove(r.sourcePosition,r.targetPosition,r.howMany)[0];t=t._getTransformedByMove(r.sourcePosition,r.targetPosition,r.howMany)}return e}class gn extends Ct(se){constructor(t,e,n="toNone"){if(super(t,e,n),!this.root.is("rootElement"))throw new D("model-liveposition-root-not-rootelement",t);Xoe.call(this)}detach(){this.stopListening()}toPosition(){return new se(this.root,this.path.slice(),this.stickiness)}static fromPosition(t,e){return new this(t.root,t.path.slice(),e||t.stickiness)}}gn.prototype.is=function(i){return i==="livePosition"||i==="model:livePosition"||i=="position"||i==="model:position"};function Xoe(){this.listenTo(this.root.document.model,"applyOperation",(i,t)=>{const e=t[0];e.isDocumentOperation&&Joe.call(this,e)},{priority:"low"})}function Joe(i){const t=this.getTransformedByOperation(i);if(!this.isEqual(t)){const e=this.toPosition();this.path=t.path,this.root=t.root,this.fire("change",e)}}class Cc{constructor(t={}){b(this,"operations");b(this,"isUndoable");b(this,"isLocal");b(this,"isUndo");b(this,"isTyping");typeof t=="string"&&(t=t==="transparent"?{isUndoable:!1}:{},dt("batch-constructor-deprecated-string-type"));const{isUndoable:e=!0,isLocal:n=!0,isUndo:s=!1,isTyping:r=!1}=t;this.operations=[],this.isUndoable=e,this.isLocal=n,this.isUndo=s,this.isTyping=r}get type(){return dt("batch-type-deprecated"),"default"}get baseVersion(){for(const t of this.operations)if(t.baseVersion!==null)return t.baseVersion;return null}addOperation(t){return t.isDocumentOperation&&(t.batch=this,this.operations.push(t)),t}}const wh=class wh{constructor(t){b(this,"_markerCollection");b(this,"_changesInElement",new Map);b(this,"_elementsSnapshots",new Map);b(this,"_elementChildrenSnapshots",new Map);b(this,"_elementState",new Map);b(this,"_changedMarkers",new Map);b(this,"_changedRoots",new Map);b(this,"_changeCount",0);b(this,"_cachedChanges",null);b(this,"_cachedChangesWithGraveyard",null);b(this,"_refreshedItems",new Set);this._markerCollection=t}get isEmpty(){return this._changesInElement.size==0&&this._changedMarkers.size==0&&this._changedRoots.size==0}bufferOperation(t){const e=t;switch(e.type){case"insert":{if(this._isInInsertedElement(e.position.parent))return;this._markInsert(e.position.parent,e.position.offset,e.nodes.maxOffset);break}case"addAttribute":case"removeAttribute":case"changeAttribute":{for(const n of e.range.getItems({shallow:!0}))this._isInInsertedElement(n.parent)||this._markAttribute(n);break}case"remove":case"move":case"reinsert":{if(e.sourcePosition.isEqual(e.targetPosition)||e.sourcePosition.getShiftedBy(e.howMany).isEqual(e.targetPosition))return;const n=this._isInInsertedElement(e.sourcePosition.parent),s=this._isInInsertedElement(e.targetPosition.parent);n||this._markRemove(e.sourcePosition.parent,e.sourcePosition.offset,e.howMany),s||this._markInsert(e.targetPosition.parent,e.getMovedRangeStart().offset,e.howMany);const r=Z._createFromPositionAndShift(e.sourcePosition,e.howMany);for(const o of r.getItems({shallow:!0}))this._setElementState(o,"move");break}case"rename":{if(this._isInInsertedElement(e.position.parent))return;this._markRemove(e.position.parent,e.position.offset,1),this._markInsert(e.position.parent,e.position.offset,1);const n=Z._createFromPositionAndShift(e.position,1);for(const s of this._markerCollection.getMarkersIntersectingRange(n)){const r=s.getData();this.bufferMarkerChange(s.name,r,r)}this._setElementState(e.position.nodeAfter,"rename");break}case"split":{const n=e.splitPosition.parent;if(!this._isInInsertedElement(n)){this._markRemove(n,e.splitPosition.offset,e.howMany);const s=Z._createFromPositionAndShift(e.splitPosition,e.howMany);for(const r of s.getItems({shallow:!0}))this._setElementState(r,"move")}this._isInInsertedElement(e.insertionPosition.parent)||this._markInsert(e.insertionPosition.parent,e.insertionPosition.offset,1),e.graveyardPosition&&(this._markRemove(e.graveyardPosition.parent,e.graveyardPosition.offset,1),this._setElementState(e.graveyardPosition.nodeAfter,"move"));break}case"merge":{const n=e.sourcePosition.parent;this._isInInsertedElement(n.parent)||this._markRemove(n.parent,n.startOffset,1);const s=e.graveyardPosition.parent;this._markInsert(s,e.graveyardPosition.offset,1),this._setElementState(n,"move");const r=e.targetPosition.parent;if(!this._isInInsertedElement(r)){this._markInsert(r,e.targetPosition.offset,n.maxOffset);const o=Z._createFromPositionAndShift(e.sourcePosition,e.howMany);for(const a of o.getItems({shallow:!0}))this._setElementState(a,"move")}break}case"detachRoot":case"addRoot":{const n=e.affectedSelectable;if(!n._isLoaded||n.isAttached()==e.isAdd)return;this._bufferRootStateChange(e.rootName,e.isAdd);break}case"addRootAttribute":case"removeRootAttribute":case"changeRootAttribute":{if(!e.root._isLoaded)return;const n=e.root.rootName;this._bufferRootAttributeChange(n,e.key,e.oldValue,e.newValue);break}}this._cachedChanges=null}bufferMarkerChange(t,e,n){e.range&&e.range.root.is("rootElement")&&!e.range.root._isLoaded&&(e.range=null),n.range&&n.range.root.is("rootElement")&&!n.range.root._isLoaded&&(n.range=null);let s=this._changedMarkers.get(t);s?s.newMarkerData=n:(s={newMarkerData:n,oldMarkerData:e},this._changedMarkers.set(t,s)),s.oldMarkerData.range==null&&n.range==null&&this._changedMarkers.delete(t)}getMarkersToRemove(){const t=[];for(const[e,n]of this._changedMarkers)n.oldMarkerData.range!=null&&t.push({name:e,range:n.oldMarkerData.range});return t}getMarkersToAdd(){const t=[];for(const[e,n]of this._changedMarkers)n.newMarkerData.range!=null&&t.push({name:e,range:n.newMarkerData.range});return t}getChangedMarkers(){return Array.from(this._changedMarkers).map(([t,e])=>({name:t,data:{oldRange:e.oldMarkerData.range,newRange:e.newMarkerData.range}}))}hasDataChanges(){if(this.getChanges().length||this._changedRoots.size>0)return!0;for(const{newMarkerData:t,oldMarkerData:e}of this._changedMarkers.values()){if(t.affectsData!==e.affectsData)return!0;if(t.affectsData){const n=t.range&&!e.range,s=!t.range&&e.range,r=t.range&&e.range&&!t.range.isEqual(e.range);if(n||s||r)return!0}}return!1}getChanges(t={}){if(this._cachedChanges)return t.includeChangesInGraveyard?this._cachedChangesWithGraveyard.slice():this._cachedChanges.slice();let e=[];for(const n of this._changesInElement.keys()){const s=this._changesInElement.get(n).sort((h,f)=>h.offset===f.offset?h.type!=f.type?h.type=="remove"?-1:1:0:h.offset<f.offset?-1:1),r=this._elementChildrenSnapshots.get(n),o=sP(n.getChildren()),a=Qoe(r.length,s);let l=0,u=0;for(const h of a)if(h==="i"){const f=this._getDiffActionForNode(o[l].node,"insert"),g=this._elementsSnapshots.get(o[l].node),p=this._getInsertDiff(n,l,f,o[l],g);e.push(p),l++}else if(h==="r"){const f=this._getDiffActionForNode(r[u].node,"remove"),g=this._getRemoveDiff(n,l,f,r[u]);e.push(g),u++}else if(h==="a"){const f=r[u].attributes,g=o[l].attributes;let p;if(o[l].name=="$text")p=new Z(se._createAt(n,l),se._createAt(n,l+1));else{const E=n.offsetToIndex(l);p=new Z(se._createAt(n,l),se._createAt(n.getChild(E),0))}const y=this._getAttributesDiff(p,f,g);e.push(...y),l++,u++}else l++,u++}e.sort((n,s)=>n.position.root!=s.position.root?n.position.root.rootName<s.position.root.rootName?-1:1:n.position.isEqual(s.position)?n.changeCount-s.changeCount:n.position.isBefore(s.position)?-1:1);for(let n=1,s=0;n<e.length;n++){const r=e[s],o=e[n],a=r.type=="remove"&&o.type=="remove"&&r.name=="$text"&&o.name=="$text"&&r.position.isEqual(o.position),l=r.type=="insert"&&o.type=="insert"&&r.name=="$text"&&o.name=="$text"&&r.position.parent==o.position.parent&&r.position.offset+r.length==o.position.offset,u=r.type=="attribute"&&o.type=="attribute"&&r.position.parent==o.position.parent&&r.range.isFlat&&o.range.isFlat&&r.position.offset+r.length==o.position.offset&&r.attributeKey==o.attributeKey&&r.attributeOldValue==o.attributeOldValue&&r.attributeNewValue==o.attributeNewValue;a||l||u?(r.length++,u&&(r.range.end=r.range.end.getShiftedBy(1)),e[n]=null):s=n}e=e.filter(n=>n);for(const n of e)delete n.changeCount,n.type=="attribute"&&(delete n.position,delete n.length);return this._changeCount=0,this._cachedChangesWithGraveyard=e,this._cachedChanges=e.filter(eae),t.includeChangesInGraveyard?this._cachedChangesWithGraveyard.slice():this._cachedChanges.slice()}getChangedRoots(){return Array.from(this._changedRoots.values()).map(t=>{const e={...t};return e.state!==void 0&&delete e.attributes,e})}getRefreshedItems(){return new Set(this._refreshedItems)}reset(){this._changesInElement.clear(),this._elementChildrenSnapshots.clear(),this._elementsSnapshots.clear(),this._elementState.clear(),this._changedMarkers.clear(),this._changedRoots.clear(),this._refreshedItems.clear(),this._cachedChanges=null}_refreshItem(t){if(this._isInInsertedElement(t.parent))return;this._markRemove(t.parent,t.startOffset,t.offsetSize),this._markInsert(t.parent,t.startOffset,t.offsetSize),this._refreshedItems.add(t),this._setElementState(t,"refresh");const e=Z._createOn(t);for(const n of this._markerCollection.getMarkersIntersectingRange(e)){const s=n.getData();this.bufferMarkerChange(n.name,s,s)}this._cachedChanges=null}_bufferRootLoad(t){if(t.isAttached()){this._bufferRootStateChange(t.rootName,!0),this._markInsert(t,0,t.maxOffset);for(const e of t.getAttributeKeys())this._bufferRootAttributeChange(t.rootName,e,null,t.getAttribute(e));for(const e of this._markerCollection)if(e.getRange().root==t){const n=e.getData();this.bufferMarkerChange(e.name,{...n,range:null},n)}}}_bufferRootStateChange(t,e){if(!this._changedRoots.has(t)){this._changedRoots.set(t,{name:t,state:e?"attached":"detached"});return}const n=this._changedRoots.get(t);n.state!==void 0?(delete n.state,n.attributes===void 0&&this._changedRoots.delete(t)):n.state=e?"attached":"detached"}_bufferRootAttributeChange(t,e,n,s){const r=this._changedRoots.get(t)||{name:t},o=r.attributes||{};if(o[e]){const a=o[e];s===a.oldValue?delete o[e]:a.newValue=s}else o[e]={oldValue:n,newValue:s};Object.entries(o).length===0?(delete r.attributes,r.state===void 0&&this._changedRoots.delete(t)):(r.attributes=o,this._changedRoots.set(t,r))}_markInsert(t,e,n){if(t.root.is("rootElement")&&!t.root._isLoaded)return;const s={type:"insert",offset:e,howMany:n,count:this._changeCount++};this._markChange(t,s)}_markRemove(t,e,n){if(t.root.is("rootElement")&&!t.root._isLoaded)return;const s={type:"remove",offset:e,howMany:n,count:this._changeCount++};this._markChange(t,s),this._removeAllNestedChanges(t,e,n)}_markAttribute(t){if(t.root.is("rootElement")&&!t.root._isLoaded)return;const e={type:"attribute",offset:t.startOffset,howMany:t.offsetSize,count:this._changeCount++};this._markChange(t.parent,e)}_markChange(t,e){this._makeSnapshots(t);const n=this._getChangesForElement(t);this._handleChange(e,n),n.push(e);for(let s=0;s<n.length;s++)n[s].howMany<1&&(n.splice(s,1),s--)}_setElementState(t,e){if(!t.is("element"))return;const n=wh._statesPriority.indexOf(this._elementState.get(t));wh._statesPriority.indexOf(e)>n&&this._elementState.set(t,e)}_getDiffActionForNode(t,e){if(!t.is("element")||!this._elementsSnapshots.has(t))return e;const n=this._elementState.get(t);return!n||n=="move"?e:n}_getChangesForElement(t){let e;return this._changesInElement.has(t)?e=this._changesInElement.get(t):(e=[],this._changesInElement.set(t,e)),e}_makeSnapshots(t){if(this._elementChildrenSnapshots.has(t))return;const e=sP(t.getChildren());this._elementChildrenSnapshots.set(t,e);for(const n of e)this._elementsSnapshots.set(n.node,n)}_handleChange(t,e){t.nodesToHandle=t.howMany;for(const n of e){const s=t.offset+t.howMany,r=n.offset+n.howMany;if(t.type=="insert"&&(n.type=="insert"&&(t.offset<=n.offset?n.offset+=t.howMany:t.offset<r&&(n.howMany+=t.nodesToHandle,t.nodesToHandle=0)),n.type=="remove"&&t.offset<n.offset&&(n.offset+=t.howMany),n.type=="attribute")){if(t.offset<=n.offset)n.offset+=t.howMany;else if(t.offset<r){const o=n.howMany;n.howMany=t.offset-n.offset,e.unshift({type:"attribute",offset:s,howMany:o-n.howMany,count:this._changeCount++})}}if(t.type=="remove"){if(n.type=="insert"){if(s<=n.offset)n.offset-=t.howMany;else if(s<=r)if(t.offset<n.offset){const o=s-n.offset;n.offset=t.offset,n.howMany-=o,t.nodesToHandle-=o}else n.howMany-=t.nodesToHandle,t.nodesToHandle=0;else if(t.offset<=n.offset)t.nodesToHandle-=n.howMany,n.howMany=0;else if(t.offset<r){const o=r-t.offset;n.howMany-=o,t.nodesToHandle-=o}}if(n.type=="remove"&&(s<=n.offset?n.offset-=t.howMany:t.offset<n.offset&&(t.nodesToHandle+=n.howMany,n.howMany=0)),n.type=="attribute"){if(s<=n.offset)n.offset-=t.howMany;else if(t.offset<n.offset){const o=s-n.offset;n.offset=t.offset,n.howMany-=o}else if(t.offset<r)if(s<=r){const o=n.howMany;n.howMany=t.offset-n.offset;const a=o-n.howMany-t.nodesToHandle;e.unshift({type:"attribute",offset:t.offset,howMany:a,count:this._changeCount++})}else n.howMany-=r-t.offset}}if(t.type=="attribute"){if(n.type=="insert")if(t.offset<n.offset&&s>n.offset){if(s>r){const o={type:"attribute",offset:r,howMany:s-r,count:this._changeCount++};this._handleChange(o,e),e.push(o)}t.nodesToHandle=n.offset-t.offset,t.howMany=t.nodesToHandle}else t.offset>=n.offset&&t.offset<r&&(s>r?(t.nodesToHandle=s-r,t.offset=r):t.nodesToHandle=0);if(n.type=="remove"&&t.offset<n.offset&&s>n.offset){const o={type:"attribute",offset:n.offset,howMany:s-n.offset,count:this._changeCount++};this._handleChange(o,e),e.push(o),t.nodesToHandle=n.offset-t.offset,t.howMany=t.nodesToHandle}n.type=="attribute"&&(t.offset>=n.offset&&s<=r?(t.nodesToHandle=0,t.howMany=0,t.offset=0):t.offset<=n.offset&&s>=r&&(n.howMany=0))}}t.howMany=t.nodesToHandle,delete t.nodesToHandle}_getInsertDiff(t,e,n,s,r){const o={type:"insert",position:se._createAt(t,e),name:s.name,attributes:new Map(s.attributes),length:1,changeCount:this._changeCount++,action:n};return n!="insert"&&r&&(o.before={name:r.name,attributes:new Map(r.attributes)}),o}_getRemoveDiff(t,e,n,s){return{type:"remove",action:n,position:se._createAt(t,e),name:s.name,attributes:new Map(s.attributes),length:1,changeCount:this._changeCount++}}_getAttributesDiff(t,e,n){const s=[];n=new Map(n);for(const[r,o]of e){const a=n.has(r)?n.get(r):null;a!==o&&s.push({type:"attribute",position:t.start,range:t.clone(),length:1,attributeKey:r,attributeOldValue:o,attributeNewValue:a,changeCount:this._changeCount++}),n.delete(r)}for(const[r,o]of n)s.push({type:"attribute",position:t.start,range:t.clone(),length:1,attributeKey:r,attributeOldValue:null,attributeNewValue:o,changeCount:this._changeCount++});return s}_isInInsertedElement(t){const e=t.parent;if(!e)return!1;const n=this._changesInElement.get(e),s=t.startOffset;if(n){for(const r of n)if(r.type=="insert"&&s>=r.offset&&s<r.offset+r.howMany)return!0}return this._isInInsertedElement(e)}_removeAllNestedChanges(t,e,n){const s=new Z(se._createAt(t,e),se._createAt(t,e+n));for(const r of s.getItems({shallow:!0}))r.is("element")&&(this._changesInElement.delete(r),this._removeAllNestedChanges(r,0,r.maxOffset))}};b(wh,"_statesPriority",[void 0,"refresh","rename","move"]);let Ny=wh;function iP(i){return{node:i,name:i.is("$text")?"$text":i.name,attributes:new Map(i.getAttributes())}}function sP(i){const t=[];for(const e of i)if(e.is("$text"))for(let n=0;n<e.data.length;++n)t.push(iP(e));else t.push(iP(e));return t}function Qoe(i,t){const e=[];let n=0,s=0;for(const r of t){if(r.offset>n){for(let o=0;o<r.offset-n;o++)e.push("e");s+=r.offset-n}if(r.type=="insert"){for(let o=0;o<r.howMany;o++)e.push("i");n=r.offset+r.howMany}else if(r.type=="remove"){for(let o=0;o<r.howMany;o++)e.push("r");n=r.offset,s+=r.howMany}else{if(r.howMany>1500)for(let o=0;o<r.howMany;o++)e.push("a");else e.push(..."a".repeat(r.howMany).split(""));n=r.offset+r.howMany,s+=r.howMany}}if(s<i)for(let r=0;r<i-s-n;r++)e.push("e");return e}function eae(i){const t="position"in i&&i.position.root.rootName=="$graveyard",e="range"in i&&i.range.root.rootName=="$graveyard";return!t&&!e}class tae{constructor(){b(this,"_operations",[]);b(this,"_undoPairs",new Map);b(this,"_undoneOperations",new Set);b(this,"_baseVersionToOperationIndex",new Map);b(this,"_version",0);b(this,"_gaps",new Map)}get version(){return this._version}set version(t){this._operations.length&&t>this._version+1&&this._gaps.set(this._version,t),this._version=t}get lastOperation(){return this._operations[this._operations.length-1]}addOperation(t){if(t.baseVersion!==this.version)throw new D("model-document-history-addoperation-incorrect-version",this,{operation:t,historyVersion:this.version});this._operations.push(t),this._version++,this._baseVersionToOperationIndex.set(t.baseVersion,this._operations.length-1)}getOperations(t,e=this.version){if(!this._operations.length)return[];const n=this._operations[0];t===void 0&&(t=n.baseVersion);let s=e-1;for(const[a,l]of this._gaps)t>a&&t<l&&(t=l),s>a&&s<l&&(s=a-1);if(s<n.baseVersion||t>this.lastOperation.baseVersion)return[];let r=this._baseVersionToOperationIndex.get(t);r===void 0&&(r=0);let o=this._baseVersionToOperationIndex.get(s);return o===void 0&&(o=this._operations.length-1),this._operations.slice(r,o+1)}getOperation(t){const e=this._baseVersionToOperationIndex.get(t);if(e!==void 0)return this._operations[e]}setOperationAsUndone(t,e){this._undoPairs.set(e,t),this._undoneOperations.add(t)}isUndoingOperation(t){return this._undoPairs.has(t)}isUndoneOperation(t){return this._undoneOperations.has(t)}getUndoneOperation(t){return this._undoPairs.get(t)}reset(){this._version=0,this._undoPairs=new Map,this._operations=[],this._undoneOperations=new Set,this._gaps=new Map,this._baseVersionToOperationIndex=new Map}}class xp extends Yt{constructor(e,n,s="main"){super(n);b(this,"rootName");b(this,"_document");b(this,"_isAttached",!0);b(this,"_isLoaded",!0);this._document=e,this.rootName=s}get document(){return this._document}isAttached(){return this._isAttached}toJSON(){return this.rootName}}xp.prototype.is=function(i,t){return t?t===this.name&&(i==="rootElement"||i==="model:rootElement"||i==="element"||i==="model:element"):i==="rootElement"||i==="model:rootElement"||i==="element"||i==="model:element"||i==="node"||i==="model:node"};const rP="$graveyard";class nae extends Ct(){constructor(e){super();b(this,"model");b(this,"history");b(this,"selection");b(this,"roots");b(this,"differ");b(this,"isReadOnly");b(this,"_postFixers");b(this,"_hasSelectionChangedFromTheLastChangeBlock");this.model=e,this.history=new tae,this.selection=new tr(this),this.roots=new Hn({idProperty:"rootName"}),this.differ=new Ny(e.markers),this.isReadOnly=!1,this._postFixers=new Set,this._hasSelectionChangedFromTheLastChangeBlock=!1,this.createRoot("$root",rP),this.listenTo(e,"applyOperation",(n,s)=>{const r=s[0];r.isDocumentOperation&&this.differ.bufferOperation(r)},{priority:"high"}),this.listenTo(e,"applyOperation",(n,s)=>{const r=s[0];r.isDocumentOperation&&this.history.addOperation(r)},{priority:"low"}),this.listenTo(this.selection,"change",()=>{this._hasSelectionChangedFromTheLastChangeBlock=!0}),this.listenTo(e.markers,"update",(n,s,r,o,a)=>{const l={...s.getData(),range:o};this.differ.bufferMarkerChange(s.name,a,l),r===null&&s.on("change",(u,h)=>{const f=s.getData();this.differ.bufferMarkerChange(s.name,{...f,range:h},f)})}),this.registerPostFixer(n=>{let s=!1;for(const r of this.roots)!r.isAttached()&&!r.isEmpty&&(n.remove(n.createRangeIn(r)),s=!0);for(const r of this.model.markers)r.getRange().root.isAttached()||(n.removeMarker(r),s=!0);return s})}get version(){return this.history.version}set version(e){this.history.version=e}get graveyard(){return this.getRoot(rP)}createRoot(e="$root",n="main"){if(this.roots.get(n))throw new D("model-document-createroot-name-exists",this,{name:n});const s=new xp(this,e,n);return this.roots.add(s),s}destroy(){this.selection.destroy(),this.stopListening()}getRoot(e="main"){return this.roots.get(e)}getRootNames(e=!1){return this.getRoots(e).map(n=>n.rootName)}getRoots(e=!1){return this.roots.filter(n=>n!=this.graveyard&&(e||n.isAttached())&&n._isLoaded)}registerPostFixer(e){this._postFixers.add(e)}toJSON(){const e=t4(this);return e.selection="[engine.model.DocumentSelection]",e.model="[engine.model.Model]",e}_handleChangeBlock(e){this._hasDocumentChangedFromTheLastChangeBlock()&&(this._callPostFixers(e),this.selection.refresh(),this.differ.hasDataChanges()?this.fire("change:data",e.batch):this.fire("change",e.batch),this.selection.refresh(),this.differ.reset()),this._hasSelectionChangedFromTheLastChangeBlock=!1}_hasDocumentChangedFromTheLastChangeBlock(){return!this.differ.isEmpty||this._hasSelectionChangedFromTheLastChangeBlock}_getDefaultRoot(){const e=this.getRoots();return e.length?e[0]:this.graveyard}_getDefaultRange(){const e=this._getDefaultRoot(),n=this.model,s=n.schema,r=n.createPositionFromPath(e,[0]);return s.getNearestSelectionRange(r)||n.createRange(r)}_validateSelectionRange(e){return e.start.isValid()&&e.end.isValid()&&oP(e.start)&&oP(e.end)}_callPostFixers(e){let n=!1;do for(const s of this._postFixers)if(this.selection.refresh(),n=s(e),n)break;while(n)}}function oP(i){const t=i.textNode;if(t){const e=t.data,n=i.offset-t.startOffset;return!IE(e,n)&&!RE(e,n)}return!0}class iae extends Ct(){constructor(){super(...arguments);b(this,"_markers",new Map)}[Symbol.iterator](){return this._markers.values()}has(e){const n=e instanceof Mc?e.name:e;return this._markers.has(n)}get(e){return this._markers.get(e)||null}_set(e,n,s=!1,r=!1){const o=e instanceof Mc?e.name:e;if(o.includes(","))throw new D("markercollection-incorrect-marker-name",this);const a=this._markers.get(o);if(a){const h=a.getData(),f=a.getRange();let g=!1;return f.isEqual(n)||(a._attachLiveRange(ai.fromRange(n)),g=!0),s!=a.managedUsingOperations&&(a._managedUsingOperations=s,g=!0),typeof r=="boolean"&&r!=a.affectsData&&(a._affectsData=r,g=!0),g&&this.fire(`update:${o}`,a,f,n,h),a}const l=ai.fromRange(n),u=new Mc(o,l,s,r);return this._markers.set(o,u),this.fire(`update:${o}`,u,null,n,{...u.getData(),range:null}),u}_remove(e){const n=e instanceof Mc?e.name:e,s=this._markers.get(n);return s?(this._markers.delete(n),this.fire(`update:${n}`,s,s.getRange(),null,s.getData()),this._destroyMarker(s),!0):!1}_refresh(e){const n=e instanceof Mc?e.name:e,s=this._markers.get(n);if(!s)throw new D("markercollection-refresh-marker-not-exists",this);const r=s.getRange();this.fire(`update:${n}`,s,r,r,s.getData())}*getMarkersAtPosition(e){for(const n of this)n.getRange().containsPosition(e)&&(yield n)}*getMarkersIntersectingRange(e){for(const n of this)n.getRange().getIntersection(e)!==null&&(yield n)}destroy(){for(const e of this._markers.values())this._destroyMarker(e);this._markers=null,this.stopListening()}*getMarkersGroup(e){for(const n of this._markers.values())n.name.startsWith(e+":")&&(yield n)}_destroyMarker(e){e.stopListening(),e._detachLiveRange()}}class Mc extends Ct(ka){constructor(e,n,s,r){super();b(this,"name");b(this,"_managedUsingOperations");b(this,"_affectsData");b(this,"_liveRange");this.name=e,this._liveRange=this._attachLiveRange(n),this._managedUsingOperations=s,this._affectsData=r}get managedUsingOperations(){if(!this._liveRange)throw new D("marker-destroyed",this);return this._managedUsingOperations}get affectsData(){if(!this._liveRange)throw new D("marker-destroyed",this);return this._affectsData}getData(){return{range:this.getRange(),affectsData:this.affectsData,managedUsingOperations:this.managedUsingOperations}}getStart(){if(!this._liveRange)throw new D("marker-destroyed",this);return this._liveRange.start.clone()}getEnd(){if(!this._liveRange)throw new D("marker-destroyed",this);return this._liveRange.end.clone()}getRange(){if(!this._liveRange)throw new D("marker-destroyed",this);return this._liveRange.toRange()}_attachLiveRange(e){return this._liveRange&&this._detachLiveRange(),e.delegate("change:range").to(this),e.delegate("change:content").to(this),this._liveRange=e,e}_detachLiveRange(){this._liveRange.stopDelegating("change:range",this),this._liveRange.stopDelegating("change:content",this),this._liveRange.detach(),this._liveRange=null}}Mc.prototype.is=function(i){return i==="marker"||i==="model:marker"};class sae extends is{constructor(e,n){super(null);b(this,"sourcePosition");b(this,"howMany");this.sourcePosition=e.clone(),this.howMany=n}get type(){return"detach"}get affectedSelectable(){return null}toJSON(){const e=super.toJSON();return e.sourcePosition=this.sourcePosition.toJSON(),e}_validate(){if(this.sourcePosition.root.document)throw new D("detach-operation-on-document-node",this)}_execute(){mM(Z._createFromPositionAndShift(this.sourcePosition,this.howMany))}static get className(){return"DetachOperation"}}class br extends ka{constructor(e){super();b(this,"markers",new Map);b(this,"_children",new dh);e&&this._insertChild(0,e)}[Symbol.iterator](){return this.getChildren()}get childCount(){return this._children.length}get maxOffset(){return this._children.maxOffset}get isEmpty(){return this.childCount===0}get nextSibling(){return null}get previousSibling(){return null}get root(){return this}get parent(){return null}get document(){return null}isAttached(){return!1}getAncestors(){return[]}getChild(e){return this._children.getNode(e)}getChildAtOffset(e){return this._children.getNodeAtOffset(e)}getChildren(){return this._children[Symbol.iterator]()}getChildIndex(e){return this._children.getNodeIndex(e)}getChildStartOffset(e){return this._children.getNodeStartOffset(e)}getPath(){return[]}getNodeByPath(e){let n=this;for(const s of e)n=n.getChildAtOffset(s);return n}offsetToIndex(e){return this._children.offsetToIndex(e)}toJSON(){const e=[];for(const n of this._children)e.push(n.toJSON());return e}static fromJSON(e){const n=[];for(const s of e)s.name?n.push(Yt.fromJSON(s)):n.push(Dt.fromJSON(s));return new br(n)}_appendChild(e){this._insertChild(this.childCount,e)}_insertChild(e,n){const s=rae(n);for(const r of s)r.parent!==null&&r._remove(),r.parent=this;this._children._insertNodes(e,s)}_removeChildren(e,n=1){const s=this._children._removeNodes(e,n);for(const r of s)r.parent=null;return s}_removeChildrenArray(e){this._children._removeNodesArray(e);for(const n of e)n.parent=null}}br.prototype.is=function(i){return i==="documentFragment"||i==="model:documentFragment"};function rae(i){return typeof i=="string"?[new Dt(i)]:(ts(i)||(i=[i]),Array.from(i).map(t=>typeof t=="string"?new Dt(t):t instanceof Ks?new Dt(t.data,t.getAttributes()):t))}class oae{constructor(t,e){b(this,"model");b(this,"batch");this.model=t,this.batch=e}createText(t,e){return new Dt(t,e)}createElement(t,e){return new Yt(t,e)}createDocumentFragment(){return new br}cloneElement(t,e=!0){return t._clone(e)}insert(t,e,n=0){if(this._assertWriterUsedCorrectly(),t instanceof Dt&&t.data=="")return;const s=se._createAt(e,n);if(t.parent)if(cP(t.root,s.root)){this.move(Z._createOn(t),s);return}else{if(t.root.document)throw new D("model-writer-insert-forbidden-move",this);this.remove(t)}const r=s.root.document?s.root.document.version:null,o=t instanceof br?t._removeChildren(0,t.childCount):t,a=new Mn(s,o,r);if(t instanceof Dt&&(a.shouldReceiveAttributes=!0),this.batch.addOperation(a),this.model.applyOperation(a),t instanceof br)for(const[l,u]of t.markers){const h=se._createAt(u.root,0),g={range:new Z(u.start._getCombined(h,s),u.end._getCombined(h,s)),usingOperation:!0,affectsData:!0};this.model.markers.has(l)?this.updateMarker(l,g):this.addMarker(l,g)}}insertText(t,e,n,s){e instanceof br||e instanceof Yt||e instanceof se?this.insert(this.createText(t),e,n):this.insert(this.createText(t,e),n,s)}insertElement(t,e,n,s){e instanceof br||e instanceof Yt||e instanceof se?this.insert(this.createElement(t),e,n):this.insert(this.createElement(t,e),n,s)}append(t,e){this.insert(t,e,"end")}appendText(t,e,n){e instanceof br||e instanceof Yt?this.insert(this.createText(t),e,"end"):this.insert(this.createText(t,e),n,"end")}appendElement(t,e,n){e instanceof br||e instanceof Yt?this.insert(this.createElement(t),e,"end"):this.insert(this.createElement(t,e),n,"end")}setAttribute(t,e,n){if(this._assertWriterUsedCorrectly(),n instanceof Z){const s=n.getMinimalFlatRanges();for(const r of s)aP(this,t,e,r)}else lP(this,t,e,n)}setAttributes(t,e){for(const[n,s]of er(t))this.setAttribute(n,s,e)}removeAttribute(t,e){if(this._assertWriterUsedCorrectly(),e instanceof Z){const n=e.getMinimalFlatRanges();for(const s of n)aP(this,t,null,s)}else lP(this,t,null,e)}clearAttributes(t){this._assertWriterUsedCorrectly();const e=n=>{for(const s of n.getAttributeKeys())this.removeAttribute(s,n)};if(!(t instanceof Z))e(t);else for(const n of t.getItems())e(n)}move(t,e,n){if(this._assertWriterUsedCorrectly(),!(t instanceof Z))throw new D("writer-move-invalid-range",this);if(!t.isFlat)throw new D("writer-move-range-not-flat",this);const s=se._createAt(e,n);if(s.isEqual(t.start))return;if(this._addOperationForAffectedMarkers("move",t),!cP(t.root,s.root))throw new D("writer-move-different-document",this);const r=t.root.document?t.root.document.version:null,o=new vt(t.start,t.end.offset-t.start.offset,s,r);this.batch.addOperation(o),this.model.applyOperation(o)}remove(t){this._assertWriterUsedCorrectly();const n=(t instanceof Z?t:Z._createOn(t)).getMinimalFlatRanges().reverse();for(const s of n)this._addOperationForAffectedMarkers("move",s),aae(s.start,s.end.offset-s.start.offset,this.batch,this.model)}merge(t){this._assertWriterUsedCorrectly();const e=t.nodeBefore,n=t.nodeAfter;if(this._addOperationForAffectedMarkers("merge",t),!(e instanceof Yt))throw new D("writer-merge-no-element-before",this);if(!(n instanceof Yt))throw new D("writer-merge-no-element-after",this);t.root.document?this._merge(t):this._mergeDetached(t)}createPositionFromPath(t,e,n){return this.model.createPositionFromPath(t,e,n)}createPositionAt(t,e){return this.model.createPositionAt(t,e)}createPositionAfter(t){return this.model.createPositionAfter(t)}createPositionBefore(t){return this.model.createPositionBefore(t)}createRange(t,e){return this.model.createRange(t,e)}createRangeIn(t){return this.model.createRangeIn(t)}createRangeOn(t){return this.model.createRangeOn(t)}createSelection(...t){return this.model.createSelection(...t)}_mergeDetached(t){const e=t.nodeBefore,n=t.nodeAfter;this.move(Z._createIn(n),se._createAt(e,"end")),this.remove(n)}_merge(t){const e=se._createAt(t.nodeBefore,"end"),n=se._createAt(t.nodeAfter,0),s=t.root.document.graveyard,r=new se(s,[0]),o=t.root.document.version,a=new an(n,t.nodeAfter.maxOffset,e,r,o);this.batch.addOperation(a),this.model.applyOperation(a)}rename(t,e){if(this._assertWriterUsedCorrectly(),!(t instanceof Yt))throw new D("writer-rename-not-element-instance",this);const n=t.root.document?t.root.document.version:null,s=new Ai(se._createBefore(t),t.name,e,n);this.batch.addOperation(s),this.model.applyOperation(s)}split(t,e){this._assertWriterUsedCorrectly();let n=t.parent;if(!n.parent)throw new D("writer-split-element-no-parent",this);if(e||(e=n.parent),!t.parent.getAncestors({includeSelf:!0}).includes(e))throw new D("writer-split-invalid-limit-element",this);let s,r;do{const o=n.root.document?n.root.document.version:null,a=n.maxOffset-t.offset,l=Pt.getInsertionPosition(t),u=new Pt(t,a,l,null,o);this.batch.addOperation(u),this.model.applyOperation(u),!s&&!r&&(s=n,r=t.parent.nextSibling),t=this.createPositionAfter(t.parent),n=t.parent}while(n!==e);return{position:t,range:new Z(se._createAt(s,"end"),se._createAt(r,0))}}wrap(t,e){if(this._assertWriterUsedCorrectly(),!t.isFlat)throw new D("writer-wrap-range-not-flat",this);const n=e instanceof Yt?e:new Yt(e);if(n.childCount>0)throw new D("writer-wrap-element-not-empty",this);if(n.parent!==null)throw new D("writer-wrap-element-attached",this);this.insert(n,t.start);const s=new Z(t.start.getShiftedBy(1),t.end.getShiftedBy(1));this.move(s,se._createAt(n,0))}unwrap(t){if(this._assertWriterUsedCorrectly(),t.parent===null)throw new D("writer-unwrap-element-no-parent",this);this.move(Z._createIn(t),this.createPositionAfter(t)),this.remove(t)}addMarker(t,e){if(this._assertWriterUsedCorrectly(),!e||typeof e.usingOperation!="boolean")throw new D("writer-addmarker-no-usingoperation",this);const n=e.usingOperation,s=e.range,r=e.affectsData===void 0?!1:e.affectsData;if(this.model.markers.has(t))throw new D("writer-addmarker-marker-exists",this);if(!s)throw new D("writer-addmarker-no-range",this);return n?(Nd(this,t,null,s,r),this.model.markers.get(t)):this.model.markers._set(t,s,n,r)}updateMarker(t,e){this._assertWriterUsedCorrectly();const n=typeof t=="string"?t:t.name,s=this.model.markers.get(n);if(!s)throw new D("writer-updatemarker-marker-not-exists",this);if(!e){dt("writer-updatemarker-reconvert-using-editingcontroller",{markerName:n}),this.model.markers._refresh(s);return}const r=typeof e.usingOperation=="boolean",o=typeof e.affectsData=="boolean",a=o?e.affectsData:s.affectsData;if(!r&&!e.range&&!o)throw new D("writer-updatemarker-wrong-options",this);const l=s.getRange(),u=e.range?e.range:l;if(r&&e.usingOperation!==s.managedUsingOperations){e.usingOperation?Nd(this,n,null,u,a):(Nd(this,n,l,null,a),this.model.markers._set(n,u,void 0,a));return}s.managedUsingOperations?Nd(this,n,l,u,a):this.model.markers._set(n,u,void 0,a)}removeMarker(t){this._assertWriterUsedCorrectly();const e=typeof t=="string"?t:t.name;if(!this.model.markers.has(e))throw new D("writer-removemarker-no-marker",this);const n=this.model.markers.get(e);if(!n.managedUsingOperations){this.model.markers._remove(e);return}const s=n.getRange();Nd(this,e,s,null,n.affectsData)}addRoot(t,e="$root"){this._assertWriterUsedCorrectly();const n=this.model.document.getRoot(t);if(n&&n.isAttached())throw new D("writer-addroot-root-exists",this);const s=this.model.document,r=new Tr(t,e,!0,s,s.version);return this.batch.addOperation(r),this.model.applyOperation(r),this.model.document.getRoot(t)}detachRoot(t){this._assertWriterUsedCorrectly();const e=typeof t=="string"?this.model.document.getRoot(t):t;if(!e||!e.isAttached())throw new D("writer-detachroot-no-root",this);for(const r of this.model.markers)r.getRange().root===e&&this.removeMarker(r);for(const r of e.getAttributeKeys())this.removeAttribute(r,e);this.remove(this.createRangeIn(e));const n=this.model.document,s=new Tr(e.rootName,e.name,!1,n,n.version);this.batch.addOperation(s),this.model.applyOperation(s)}setSelection(...t){this._assertWriterUsedCorrectly(),this.model.document.selection._setTo(...t)}setSelectionFocus(t,e){this._assertWriterUsedCorrectly(),this.model.document.selection._setFocus(t,e)}setSelectionAttribute(t,e){if(this._assertWriterUsedCorrectly(),typeof t=="string")this._setSelectionAttribute(t,e);else for(const[n,s]of er(t))this._setSelectionAttribute(n,s)}removeSelectionAttribute(t){if(this._assertWriterUsedCorrectly(),typeof t=="string")this._removeSelectionAttribute(t);else for(const e of t)this._removeSelectionAttribute(e)}overrideSelectionGravity(){return this.model.document.selection._overrideGravity()}restoreSelectionGravity(t){this.model.document.selection._restoreGravity(t)}_setSelectionAttribute(t,e){const n=this.model.document.selection;if(n.isCollapsed&&n.anchor.parent.isEmpty){const s=tr._getStoreAttributeKey(t);this.setAttribute(s,e,n.anchor.parent)}n._setAttribute(t,e)}_removeSelectionAttribute(t){const e=this.model.document.selection;if(e.isCollapsed&&e.anchor.parent.isEmpty){const n=tr._getStoreAttributeKey(t);this.removeAttribute(n,e.anchor.parent)}e._removeAttribute(t)}_assertWriterUsedCorrectly(){if(this.model._currentWriter!==this)throw new D("writer-incorrect-use",this)}_addOperationForAffectedMarkers(t,e){for(const n of this.model.markers){if(!n.managedUsingOperations)continue;const s=n.getRange();let r=!1;if(t==="move"){const o=e;r=o.containsPosition(s.start)||o.start.isEqual(s.start)||o.containsPosition(s.end)||o.end.isEqual(s.end)}else{const o=e,a=o.nodeBefore,l=o.nodeAfter,u=s.start.parent==a&&s.start.isAtEnd,h=s.end.parent==l&&s.end.offset==0,f=s.end.nodeAfter==l,g=s.start.nodeAfter==l;r=u||h||f||g}r&&this.updateMarker(n.name,{range:s})}}}function aP(i,t,e,n){const s=i.model,r=s.document;let o=n.start,a,l,u;for(const f of n.getWalker({shallow:!0}))u=f.item.getAttribute(t),a&&l!=u&&(l!=e&&h(),o=a),a=f.nextPosition,l=u;a instanceof se&&a!=o&&l!=e&&h();function h(){const f=new Z(o,a),g=f.root.document?r.version:null,p=new hn(f,t,l,e,g);i.batch.addOperation(p),s.applyOperation(p)}}function lP(i,t,e,n){const s=i.model,r=s.document,o=n.getAttribute(t);let a,l;if(o!=e){if(n.root===n){const h=n.document?r.version:null;l=new ao(n,t,o,e,h)}else{a=new Z(se._createBefore(n),i.createPositionAfter(n));const h=a.root.document?r.version:null;l=new hn(a,t,o,e,h)}i.batch.addOperation(l),s.applyOperation(l)}}function Nd(i,t,e,n,s){const r=i.model,o=r.document,a=new ui(t,e,n,r.markers,!!s,o.version);i.batch.addOperation(a),r.applyOperation(a)}function aae(i,t,e,n){let s;if(i.root.document){const r=n.document,o=new se(r.graveyard,[0]);s=new vt(i,t,o,r.version)}else s=new sae(i,t);e.addOperation(s),n.applyOperation(s)}function cP(i,t){return i===t||i instanceof xp&&t instanceof xp}function lae(i,t,e={}){if(t.isCollapsed)return;const n=t.getFirstRange();if(n.root.rootName=="$graveyard")return;const s=i.schema;i.change(r=>{if(!e.doNotResetEntireContent&&bae(s,t)){pae(r,t);return}const o={};if(!e.doNotAutoparagraph){const u=t.getSelectedElement();u&&Object.assign(o,s.getAttributesWithProperty(u,"copyOnReplace",!0))}const[a,l]=cae(n);a.isTouching(l)||r.remove(r.createRange(a,l)),e.leaveUnmerged||(dae(r,a,l),s.removeDisallowedAttributes(a.parent.getChildren(),r)),_M(r,t,a),!e.doNotAutoparagraph&&mae(s,a)&&yM(r,a,t,o),a.detach(),l.detach()})}function cae(i){const t=i.root.document.model,e=i.start;let n=i.end;if(t.hasContent(i,{ignoreMarkers:!0})){const s=uae(n);if(s&&n.isTouching(t.createPositionAt(s,0))){const r=t.createSelection(i);t.modifySelection(r,{direction:"backward"});const o=r.getLastPosition(),a=t.createRange(o,n);t.hasContent(a,{ignoreMarkers:!0})||(n=o)}}return[gn.fromPosition(e,"toPrevious"),gn.fromPosition(n,"toNext")]}function uae(i){const t=i.parent,e=t.root.document.model.schema,n=t.getAncestors({parentFirst:!0,includeSelf:!0});for(const s of n){if(e.isLimit(s))return null;if(e.isBlock(s))return s}}function dae(i,t,e){const n=i.model;if(!zE(i.model.schema,t,e))return;const[s,r]=fae(t,e);!s||!r||(!n.hasContent(s,{ignoreMarkers:!0})&&n.hasContent(r,{ignoreMarkers:!0})?vM(i,t,e,s.parent):wM(i,t,e,s.parent))}function wM(i,t,e,n){const s=t.parent,r=e.parent;if(!(s==n||r==n)){for(t=i.createPositionAfter(s),e=i.createPositionBefore(r),e.isEqual(t)||i.insert(r,t),i.merge(t);e.parent.isEmpty;){const o=e.parent;e=i.createPositionBefore(o),i.remove(o)}zE(i.model.schema,t,e)&&wM(i,t,e,n)}}function vM(i,t,e,n){const s=t.parent,r=e.parent;if(!(s==n||r==n)){for(t=i.createPositionAfter(s),e=i.createPositionBefore(r),e.isEqual(t)||i.insert(s,e);t.parent.isEmpty;){const o=t.parent;t=i.createPositionBefore(o),i.remove(o)}e=i.createPositionBefore(r),hae(i,e),zE(i.model.schema,t,e)&&vM(i,t,e,n)}}function hae(i,t){const e=t.nodeBefore,n=t.nodeAfter;e.name!=n.name&&i.rename(e,n.name),i.clearAttributes(e),i.setAttributes(Object.fromEntries(n.getAttributes()),e),i.merge(t)}function zE(i,t,e){const n=t.parent,s=e.parent;return n==s||i.isLimit(n)||i.isLimit(s)?!1:gae(t,e,i)}function fae(i,t){const e=i.getAncestors(),n=t.getAncestors();let s=0;for(;e[s]&&e[s]==n[s];)s++;return[e[s],n[s]]}function mae(i,t){const e=i.checkChild(t,"$text"),n=i.checkChild(t,"paragraph");return!e&&n}function gae(i,t,e){const n=new Z(i,t);for(const s of n.getWalker())if(e.isLimit(s.item))return!1;return!0}function yM(i,t,e,n={}){const s=i.createElement("paragraph");i.model.schema.setAllowedAttributes(s,n,i),i.insert(s,t),_M(i,e,i.createPositionAt(s,0))}function pae(i,t){const e=i.model.schema.getLimitElement(t);i.remove(i.createRangeIn(e)),yM(i,i.createPositionAt(e,0),t)}function bae(i,t){const e=i.getLimitElement(t);if(!t.containsEntireContent(e))return!1;const n=t.getFirstRange();return n.start.parent==n.end.parent?!1:i.checkChild(e,"paragraph")}function _M(i,t,e){t instanceof tr?i.setSelection(e):t.setTo(e)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function wae(i,t){return i.change(e=>{const n=e.createDocumentFragment(),s=t.getFirstRange();if(!s||s.isCollapsed)return n;const r=s.start.root,o=s.start.getCommonPath(s.end),a=r.getNodeByPath(o);let l;s.start.parent==s.end.parent?l=s:l=e.createRange(e.createPositionAt(a,s.start.path[o.length]),e.createPositionAt(a,s.end.path[o.length]+1));const u=l.end.offset-l.start.offset;for(const h of l.getItems({shallow:!0}))h.is("$textProxy")?e.appendText(h.data,h.getAttributes(),n):e.append(e.cloneElement(h,!0),n);if(l!=s){const h=s._getTransformedByMove(l.start,e.createPositionAt(n,0),u)[0],f=e.createRange(e.createPositionAt(n,0),h.start),g=e.createRange(h.end,e.createPositionAt(n,"end"));uP(g,e),uP(f,e)}return n})}function uP(i,t){const e=[];Array.from(i.getItems({direction:"backward"})).map(n=>t.createRangeOn(n)).filter(n=>(n.start.isAfter(i.start)||n.start.isEqual(i.start))&&(n.end.isBefore(i.end)||n.end.isEqual(i.end))).forEach(n=>{e.push(n.start.parent),t.remove(n)}),e.forEach(n=>{let s=n;for(;s.parent&&s.isEmpty;){const r=t.createRangeOn(s);s=s.parent,t.remove(r)}})}function vae(i,t,e){return i.change(n=>{const s=e||i.document.selection;s.isCollapsed||i.deleteContent(s,{doNotAutoparagraph:!0});const r=new yae(i,n,s.anchor),o=[];let a;if(t.is("documentFragment")){if(t.markers.size){const h=[];for(const[f,g]of t.markers){const{start:p,end:y}=g,E=p.isEqual(y);h.push({position:p,name:f,isCollapsed:E},{position:y,name:f,isCollapsed:E})}h.sort(({position:f},{position:g})=>f.isBefore(g)?1:-1);for(const{position:f,name:g,isCollapsed:p}of h){let y=null,E=null;const C=f.parent===t&&f.isAtStart,k=f.parent===t&&f.isAtEnd;!C&&!k?(y=n.createElement("$marker"),n.insert(y,f)):p&&(E=C?"start":"end"),o.push({name:g,element:y,collapsed:E})}}a=t.getChildren()}else a=[t];r.handleNodes(a);let l=r.getSelectionRange();if(t.is("documentFragment")&&o.length){const h=l?ai.fromRange(l):null,f={};for(let g=o.length-1;g>=0;g--){const{name:p,element:y,collapsed:E}=o[g],C=!f[p];if(C&&(f[p]=[]),y){const k=n.createPositionAt(y,"before");f[p].push(k),n.remove(y)}else{const k=r.getAffectedRange();if(!k){E&&f[p].push(r.position);continue}E?f[p].push(k[E]):f[p].push(C?k.start:k.end)}}for(const[g,[p,y]]of Object.entries(f))p&&y&&p.root===y.root&&p.root.document&&!n.model.markers.has(g)&&n.addMarker(g,{usingOperation:!0,affectsData:!0,range:new Z(p,y)});h&&(l=h.toRange(),h.detach())}/* istanbul ignore else -- @preserve */l&&(s instanceof tr?n.setSelection(l):s.setTo(l));const u=r.getAffectedRange()||i.createRange(s.anchor);return r.destroy(),u})}class yae{constructor(t,e,n){b(this,"model");b(this,"writer");b(this,"position");b(this,"canMergeWith");b(this,"schema");b(this,"_documentFragment");b(this,"_documentFragmentPosition");b(this,"_firstNode",null);b(this,"_lastNode",null);b(this,"_lastAutoParagraph",null);b(this,"_filterAttributesOf",[]);b(this,"_affectedStart",null);b(this,"_affectedEnd",null);b(this,"_nodeToSelect",null);this.model=t,this.writer=e,this.position=n,this.canMergeWith=new Set([this.position.parent]),this.schema=t.schema,this._documentFragment=e.createDocumentFragment(),this._documentFragmentPosition=e.createPositionAt(this._documentFragment,0)}handleNodes(t){for(const e of Array.from(t))this._handleNode(e);this._insertPartialFragment(),this._lastAutoParagraph&&this._updateLastNodeFromAutoParagraph(this._lastAutoParagraph),this._mergeOnRight(),this.schema.removeDisallowedAttributes(this._filterAttributesOf,this.writer),this._filterAttributesOf=[]}_updateLastNodeFromAutoParagraph(t){const e=this.writer.createPositionAfter(this._lastNode),n=this.writer.createPositionAfter(t);if(n.isAfter(e)){this._lastNode=t;/* istanbul ignore if -- @preserve */if(this.position.parent!=t||!this.position.isAtEnd)throw new D("insertcontent-invalid-insertion-position",this);this.position=n,this._setAffectedBoundaries(this.position)}}getSelectionRange(){return this._nodeToSelect?Z._createOn(this._nodeToSelect):this.model.schema.getNearestSelectionRange(this.position)}getAffectedRange(){return this._affectedStart?new Z(this._affectedStart,this._affectedEnd):null}destroy(){this._affectedStart&&this._affectedStart.detach(),this._affectedEnd&&this._affectedEnd.detach()}_handleNode(t){if(!this._checkAndSplitToAllowedPosition(t)){this.schema.isObject(t)||this._handleDisallowedNode(t);return}this._appendToFragment(t),this._firstNode||(this._firstNode=t),this._lastNode=t}_insertPartialFragment(){if(this._documentFragment.isEmpty)return;const t=gn.fromPosition(this.position,"toNext");this._setAffectedBoundaries(this.position),this._documentFragment.getChild(0)==this._firstNode&&(this.writer.insert(this._firstNode,this.position),this._mergeOnLeft(),this.position=t.toPosition()),this._documentFragment.isEmpty||this.writer.insert(this._documentFragment,this.position),this._documentFragmentPosition=this.writer.createPositionAt(this._documentFragment,0),this.position=t.toPosition(),t.detach()}_handleDisallowedNode(t){t.is("element")&&this.handleNodes(t.getChildren())}_appendToFragment(t){/* istanbul ignore if -- @preserve */if(!this.schema.checkChild(this.position,t))throw new D("insertcontent-wrong-position",this,{node:t,position:this.position});this.writer.insert(t,this._documentFragmentPosition),this._documentFragmentPosition=this._documentFragmentPosition.getShiftedBy(t.offsetSize),this.schema.isObject(t)&&!this.schema.checkChild(this.position,"$text")?this._nodeToSelect=t:this._nodeToSelect=null,this._filterAttributesOf.push(t)}_setAffectedBoundaries(t){this._affectedStart||(this._affectedStart=gn.fromPosition(t,"toPrevious")),(!this._affectedEnd||this._affectedEnd.isBefore(t))&&(this._affectedEnd&&this._affectedEnd.detach(),this._affectedEnd=gn.fromPosition(t,"toNext"))}_mergeOnLeft(){const t=this._firstNode;if(!(t instanceof Yt)||!this._canMergeLeft(t))return;const e=gn._createBefore(t);e.stickiness="toNext";const n=gn.fromPosition(this.position,"toNext");this._affectedStart.isEqual(e)&&(this._affectedStart.detach(),this._affectedStart=gn._createAt(e.nodeBefore,"end","toPrevious")),this._firstNode===this._lastNode&&(this._firstNode=e.nodeBefore,this._lastNode=e.nodeBefore),this.writer.merge(e),e.isEqual(this._affectedEnd)&&this._firstNode===this._lastNode&&(this._affectedEnd.detach(),this._affectedEnd=gn._createAt(e.nodeBefore,"end","toNext")),this.position=n.toPosition(),n.detach(),this._filterAttributesOf.push(this.position.parent),e.detach()}_mergeOnRight(){const t=this._lastNode;if(!(t instanceof Yt)||!this._canMergeRight(t))return;const e=gn._createAfter(t);e.stickiness="toNext";/* istanbul ignore if -- @preserve */if(!this.position.isEqual(e))throw new D("insertcontent-invalid-insertion-position",this);this.position=se._createAt(e.nodeBefore,"end");const n=gn.fromPosition(this.position,"toPrevious");this._affectedEnd.isEqual(e)&&(this._affectedEnd.detach(),this._affectedEnd=gn._createAt(e.nodeBefore,"end","toNext")),this._firstNode===this._lastNode&&(this._firstNode=e.nodeBefore,this._lastNode=e.nodeBefore),this.writer.merge(e),e.getShiftedBy(-1).isEqual(this._affectedStart)&&this._firstNode===this._lastNode&&(this._affectedStart.detach(),this._affectedStart=gn._createAt(e.nodeBefore,0,"toPrevious")),this.position=n.toPosition(),n.detach(),this._filterAttributesOf.push(this.position.parent),e.detach()}_canMergeLeft(t){const e=t.previousSibling;return e instanceof Yt&&this.canMergeWith.has(e)&&this.model.schema.checkMerge(e,t)}_canMergeRight(t){const e=t.nextSibling;return e instanceof Yt&&this.canMergeWith.has(e)&&this.model.schema.checkMerge(t,e)}_insertAutoParagraph(){this._insertPartialFragment();const t=this.writer.createElement("paragraph");this.writer.insert(t,this.position),this._setAffectedBoundaries(this.position),this._lastAutoParagraph=t,this.position=this.writer.createPositionAt(t,0)}_checkAndSplitToAllowedPosition(t){const e=this._getAllowedIn(this.position.parent,t);if(!e)return!1;for(e!=this.position.parent&&this._insertPartialFragment();e!=this.position.parent;)if(this.position.isAtStart){const n=this.position.parent;this.position=this.writer.createPositionBefore(n),n.isEmpty&&n.parent===e&&this.writer.remove(n)}else if(this.position.isAtEnd)this.position=this.writer.createPositionAfter(this.position.parent);else{const n=this.writer.createPositionAfter(this.position.parent);this._setAffectedBoundaries(this.position),this.writer.split(this.position),this.position=n,this.canMergeWith.add(this.position.nodeAfter)}return this.schema.checkChild(this.position.parent,t)||this._insertAutoParagraph(),!0}_getAllowedIn(t,e){return this.schema.checkChild(t,e)||this.schema.checkChild(t,"paragraph")&&this.schema.checkChild("paragraph",e)?t:this.schema.isLimit(t)?null:this._getAllowedIn(t.parent,e)}}function _ae(i,t,e,n={}){if(!i.schema.isObject(t))throw new D("insertobject-element-not-an-object",i,{object:t});const s=e||i.document.selection;let r=s;n.findOptimalPosition&&i.schema.isBlock(t)&&(r=i.createSelection(i.schema.findOptimalInsertionRange(s,n.findOptimalPosition)));const o=ln(s.getSelectedBlocks()),a={};return o&&Object.assign(a,i.schema.getAttributesWithProperty(o,"copyOnReplace",!0)),i.change(l=>{r.isCollapsed||i.deleteContent(r,{doNotAutoparagraph:!0});let u=t;const h=r.anchor.parent;!i.schema.checkChild(h,t)&&i.schema.checkChild(h,"paragraph")&&i.schema.checkChild("paragraph",t)&&(u=l.createElement("paragraph"),l.insert(t,u)),i.schema.setAllowedAttributes(u,a,l);const f=i.insertContent(u,r);return f.isCollapsed||n.setSelection&&Eae(l,t,n.setSelection,a),f})}function Eae(i,t,e,n){const s=i.model;if(e=="on"){i.setSelection(t,"on");return}if(e!="after")throw new D("insertobject-invalid-place-parameter-value",s);let r=t.nextSibling;if(s.schema.isInline(t)){i.setSelection(t,"after");return}!(r&&s.schema.checkChild(r,"$text"))&&s.schema.checkChild(t.parent,"paragraph")&&(r=i.createElement("paragraph"),s.schema.setAllowedAttributes(r,n,i),s.insertContent(r,i.createPositionAfter(t))),r&&i.setSelection(r,0)}const Cae=' ,.?!:;"-()';function xae(i,t,e={}){const n=i.schema,s=e.direction!="backward",r=e.unit?e.unit:"character",o=!!e.treatEmojiAsSingleUnit,a=t.focus,l=new to({boundaries:Aae(a,s),singleCharacters:!0,direction:s?"forward":"backward"}),u={walker:l,schema:n,isForward:s,unit:r,treatEmojiAsSingleUnit:o};let h;for(;h=l.next();){if(h.done)return;const f=kae(u,h.value);if(f){t instanceof tr?i.change(g=>{g.setSelectionFocus(f)}):t.setFocus(f);return}}}function kae(i,t){const{isForward:e,walker:n,unit:s,schema:r,treatEmojiAsSingleUnit:o}=i,{type:a,item:l,nextPosition:u}=t;if(a=="text")return i.unit==="word"?Sae(n,e):Tae(n,s,o);if(a==(e?"elementStart":"elementEnd")){if(r.isSelectable(l))return se._createAt(l,e?"after":"before");if(r.checkChild(u,"$text"))return u}else{if(r.isLimit(l)){n.skip(()=>!0);return}if(r.checkChild(u,"$text"))return u}}function Tae(i,t,e){const n=i.position.textNode;if(n){const s=n.data;let r=i.position.offset-n.startOffset;for(;IE(s,r)||t=="character"&&RE(s,r)||e&&M4(s,r);)i.next(),r=i.position.offset-n.startOffset}return i.position}function Sae(i,t){let e=i.position.textNode;for(e||(e=t?i.position.nodeAfter:i.position.nodeBefore);e&&e.is("$text");){const n=i.position.offset-e.startOffset;if(Iae(e,n,t))e=t?i.position.nodeAfter:i.position.nodeBefore;else{if(Pae(e.data,n,t))break;i.next()}}return i.position}function Aae(i,t){const e=i.root,n=se._createAt(e,t?"end":0);return t?new Z(i,n):new Z(n,i)}function Pae(i,t,e){const n=t+(e?0:-1);return Cae.includes(i.charAt(n))}function Iae(i,t,e){return t===(e?i.offsetSize:0)}let Rae=class extends yt(){constructor(){super();b(this,"markers");b(this,"document");b(this,"schema");b(this,"_pendingChanges");b(this,"_currentWriter");this.markers=new iae,this.document=new nae(this),this.schema=new voe,this._pendingChanges=[],this._currentWriter=null,["deleteContent","modifySelection","getSelectedContent","applyOperation"].forEach(e=>this.decorate(e)),this.on("applyOperation",(e,n)=>{n[0]._validate()},{priority:"highest"}),this.schema.register("$root",{isLimit:!0}),this.schema.register("$container",{allowIn:["$root","$container"]}),this.schema.register("$block",{allowIn:["$root","$container"],isBlock:!0}),this.schema.register("$blockObject",{allowWhere:"$block",isBlock:!0,isObject:!0}),this.schema.register("$inlineObject",{allowWhere:"$text",allowAttributesOf:"$text",isInline:!0,isObject:!0}),this.schema.register("$text",{allowIn:"$block",isInline:!0,isContent:!0}),this.schema.register("$clipboardHolder",{allowContentOf:"$root",allowChildren:"$text",isLimit:!0}),this.schema.register("$documentFragment",{allowContentOf:"$root",allowChildren:"$text",isLimit:!0}),this.schema.register("$marker"),this.schema.addChildCheck(()=>!0,"$marker"),doe(this),this.document.registerPostFixer(aM),this.on("insertContent",(e,[n,s])=>{e.return=vae(this,n,s)}),this.on("insertObject",(e,[n,s,r])=>{e.return=_ae(this,n,s,r)}),this.on("canEditAt",e=>{const n=!this.document.isReadOnly;e.return=n,n||e.stop()})}change(e){try{return this._pendingChanges.length===0?(this._pendingChanges.push({batch:new Cc,callback:e}),this._runPendingChanges()[0]):e(this._currentWriter)}catch(n){/* istanbul ignore next -- @preserve */D.rethrowUnexpectedError(n,this)}}enqueueChange(e,n){try{e?typeof e=="function"?(n=e,e=new Cc):e instanceof Cc||(e=new Cc(e)):e=new Cc,this._pendingChanges.push({batch:e,callback:n}),this._pendingChanges.length==1&&this._runPendingChanges()}catch(s){/* istanbul ignore next -- @preserve */D.rethrowUnexpectedError(s,this)}}applyOperation(e){e._execute()}insertContent(e,n,s,...r){const o=X0(n,s);return this.fire("insertContent",[e,o,s,...r])}insertObject(e,n,s,r,...o){const a=X0(n,s);return this.fire("insertObject",[e,a,r,r,...o])}deleteContent(e,n){lae(this,e,n)}modifySelection(e,n){xae(this,e,n)}getSelectedContent(e){return wae(this,e)}hasContent(e,n={}){const s=e instanceof Z?e:Z._createIn(e);if(s.isCollapsed)return!1;const{ignoreWhitespaces:r=!1,ignoreMarkers:o=!1}=n;if(!o){for(const a of this.markers.getMarkersIntersectingRange(s))if(a.affectsData)return!0}for(const a of s.getItems())if(this.schema.isContent(a))if(a.is("$textProxy"))if(r){if(a.data.search(/\S/)!==-1)return!0}else return!0;else return!0;return!1}canEditAt(e){const n=X0(e);return this.fire("canEditAt",[n])}createPositionFromPath(e,n,s){return new se(e,n,s)}createPositionAt(e,n){return se._createAt(e,n)}createPositionAfter(e){return se._createAfter(e)}createPositionBefore(e){return se._createBefore(e)}createRange(e,n){return new Z(e,n)}createRangeIn(e){return Z._createIn(e)}createRangeOn(e){return Z._createOn(e)}createSelection(...e){return new Wi(...e)}createBatch(e){return new Cc(e)}createOperationFromJSON(e){return Woe.fromJSON(e,this.document)}destroy(){this.document.destroy(),this.stopListening()}_runPendingChanges(){const e=[];this.fire("_beforeChanges");try{for(;this._pendingChanges.length;){const n=this._pendingChanges[0].batch;this._currentWriter=new oae(this,n);const s=this._pendingChanges[0].callback(this._currentWriter);e.push(s),this.document._handleChangeBlock(this._currentWriter),this._pendingChanges.shift(),this._currentWriter=null}}finally{this._pendingChanges.length=0,this._currentWriter=null,this.fire("_afterChanges")}return e}};function X0(i,t){if(i)return i instanceof Wi||i instanceof tr?i:i instanceof Ml?t||t===0?new Wi(i,t):i.is("rootElement")?new Wi(i,"in"):new Wi(i,"on"):new Wi(i)}class Oae extends Nr{constructor(){super(...arguments);b(this,"domEventType","click")}onDomEvent(e){this.fire(e.type,e)}}class Lb extends Nr{constructor(){super(...arguments);b(this,"domEventType",["mousedown","mouseup","mouseover","mouseout"])}onDomEvent(e){this.fire(e.type,e)}}class Nae extends Nr{constructor(){super(...arguments);b(this,"domEventType",["touchstart","touchend","touchmove"])}onDomEvent(e){this.fire(e.type,e)}}class _o{constructor(t){b(this,"document");this.document=t}createDocumentFragment(t){return new hl(this.document,t)}createElement(t,e,n){return new mo(this.document,t,e,n)}createText(t){return new zn(this.document,t)}clone(t,e=!1){return t._clone(e)}appendChild(t,e){return e._appendChild(t)}insertChild(t,e,n){return n._insertChild(t,e)}removeChildren(t,e,n){return n._removeChildren(t,e)}remove(t){const e=t.parent;return e?this.removeChildren(e.getChildIndex(t),1,e):[]}replace(t,e){const n=t.parent;if(n){const s=n.getChildIndex(t);return this.removeChildren(s,1,n),this.insertChild(s,e,n),!0}return!1}unwrapElement(t){const e=t.parent;if(e){const n=e.getChildIndex(t);this.remove(t),this.insertChild(n,t.getChildren(),e)}}rename(t,e){const n=new mo(this.document,t,e.getAttributes(),e.getChildren());return this.replace(e,n)?n:null}setAttribute(t,e,n){n._setAttribute(t,e)}removeAttribute(t,e){e._removeAttribute(t)}addClass(t,e){e._addClass(t)}removeClass(t,e){e._removeClass(t)}setStyle(t,e,n){_r(t)&&n===void 0?e._setStyle(t):n._setStyle(t,e)}removeStyle(t,e){e._removeStyle(t)}setCustomProperty(t,e,n){n._setCustomProperty(t,e)}removeCustomProperty(t,e){return e._removeCustomProperty(t)}createPositionAt(t,e){return Ee._createAt(t,e)}createPositionAfter(t){return Ee._createAfter(t)}createPositionBefore(t){return Ee._createBefore(t)}createRange(t,e){return new ot(t,e)}createRangeOn(t){return ot._createOn(t)}createRangeIn(t){return ot._createIn(t)}createSelection(...t){return new oo(...t)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const Mae=/^#([0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/i,Lae=/^rgb\([ ]?([0-9]{1,3}[ %]?,[ ]?){2,3}[0-9]{1,3}[ %]?\)$/i,Vae=/^rgba\([ ]?([0-9]{1,3}[ %]?,[ ]?){3}(1|[0-9]+%|[0]?\.?[0-9]+)\)$/i,Dae=/^hsl\([ ]?([0-9]{1,3}[ %]?[,]?[ ]*){3}(1|[0-9]+%|[0]?\.?[0-9]+)?\)$/i,Bae=/^hsla\([ ]?([0-9]{1,3}[ %]?,[ ]?){2,3}(1|[0-9]+%|[0]?\.?[0-9]+)\)$/i,Fae=/\w+\((?:[^()]|\([^()]*\))*\)|\S+/gi,$ae=new Set(["black","silver","gray","white","maroon","red","purple","fuchsia","green","lime","olive","yellow","navy","blue","teal","aqua","orange","aliceblue","antiquewhite","aquamarine","azure","beige","bisque","blanchedalmond","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","gainsboro","ghostwhite","gold","goldenrod","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","limegreen","linen","magenta","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","oldlace","olivedrab","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","thistle","tomato","turquoise","violet","wheat","whitesmoke","yellowgreen","activeborder","activecaption","appworkspace","background","buttonface","buttonhighlight","buttonshadow","buttontext","captiontext","graytext","highlight","highlighttext","inactiveborder","inactivecaption","inactivecaptiontext","infobackground","infotext","menu","menutext","scrollbar","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","window","windowframe","windowtext","rebeccapurple","currentcolor","transparent"]);function EM(i){return i.startsWith("#")?Mae.test(i):i.startsWith("rgb")?Lae.test(i)||Vae.test(i):i.startsWith("hsl")?Dae.test(i)||Bae.test(i):$ae.has(i.toLowerCase())}const zae=["none","hidden","dotted","dashed","solid","double","groove","ridge","inset","outset"];function jae(i){return zae.includes(i)}const Hae=/^([+-]?[0-9]*([.][0-9]+)?(px|cm|mm|in|pc|pt|ch|em|ex|rem|vh|vw|vmin|vmax)|0)$/;function Vb(i){return Hae.test(i)}const Uae=/^[+-]?[0-9]*([.][0-9]+)?%$/;function CM(i){return Uae.test(i)}const Wae=["repeat-x","repeat-y","repeat","space","round","no-repeat"];function qae(i){return Wae.includes(i)}const Gae=["center","top","bottom","left","right"];function Kae(i){return Gae.includes(i)}const Yae=["fixed","scroll","local"];function Zae(i){return Yae.includes(i)}const Xae=/^url\(/;function Jae(i){return Xae.test(i)}function hh(i=""){if(i==="")return{top:void 0,right:void 0,bottom:void 0,left:void 0};const t=jE(i),e=t[0],n=t[2]||e,s=t[1]||e,r=t[3]||s;return{top:e,bottom:n,right:s,left:r}}function fh(i){return t=>{const{top:e,right:n,bottom:s,left:r}=t,o=[];return[e,n,r,s].every(a=>!!a)?o.push([i,Qae(t)]):(e&&o.push([i+"-top",e]),n&&o.push([i+"-right",n]),s&&o.push([i+"-bottom",s]),r&&o.push([i+"-left",r])),o}}function Qae({top:i,right:t,bottom:e,left:n}){const s=[];return n!==t?s.push(i,t,e,n):e!==i?s.push(i,t,e):t!==i?s.push(i,t):s.push(i),s.join(" ")}function xM(i){return t=>({path:i,value:hh(t)})}function jE(i){const t=i.trim().slice(0,1500).matchAll(Fae);return Array.from(t).map(e=>e[0])}function HE(i){i.setNormalizer("background",ele()),i.setNormalizer("background-color",tle()),i.setReducer("background",nle()),i.setStyleRelation("background",["background-color"])}function ele(){return i=>{const t={},e=jE(i);for(const n of e)qae(n)?(t.repeat=t.repeat||[],t.repeat.push(n)):Kae(n)?(t.position=t.position||[],t.position.push(n)):Zae(n)?t.attachment=n:EM(n)?t.color=n:Jae(n)&&(t.image=n);return{path:"background",value:t}}}function tle(){return i=>({path:"background.color",value:i})}function nle(){return i=>{const t=[];return t.push(["background-color",i.color]),t}}function kM(i){i.setNormalizer("border",ile()),i.setNormalizer("border-top",Jm("top")),i.setNormalizer("border-right",Jm("right")),i.setNormalizer("border-bottom",Jm("bottom")),i.setNormalizer("border-left",Jm("left")),i.setNormalizer("border-color",J0("color")),i.setNormalizer("border-width",J0("width")),i.setNormalizer("border-style",J0("style")),i.setNormalizer("border-top-color",ms("color","top")),i.setNormalizer("border-top-style",ms("style","top")),i.setNormalizer("border-top-width",ms("width","top")),i.setNormalizer("border-right-color",ms("color","right")),i.setNormalizer("border-right-style",ms("style","right")),i.setNormalizer("border-right-width",ms("width","right")),i.setNormalizer("border-bottom-color",ms("color","bottom")),i.setNormalizer("border-bottom-style",ms("style","bottom")),i.setNormalizer("border-bottom-width",ms("width","bottom")),i.setNormalizer("border-left-color",ms("color","left")),i.setNormalizer("border-left-style",ms("style","left")),i.setNormalizer("border-left-width",ms("width","left")),i.setExtractor("border-top",Qm("top")),i.setExtractor("border-right",Qm("right")),i.setExtractor("border-bottom",Qm("bottom")),i.setExtractor("border-left",Qm("left")),i.setExtractor("border-top-color","border.color.top"),i.setExtractor("border-right-color","border.color.right"),i.setExtractor("border-bottom-color","border.color.bottom"),i.setExtractor("border-left-color","border.color.left"),i.setExtractor("border-top-width","border.width.top"),i.setExtractor("border-right-width","border.width.right"),i.setExtractor("border-bottom-width","border.width.bottom"),i.setExtractor("border-left-width","border.width.left"),i.setExtractor("border-top-style","border.style.top"),i.setExtractor("border-right-style","border.style.right"),i.setExtractor("border-bottom-style","border.style.bottom"),i.setExtractor("border-left-style","border.style.left"),i.setReducer("border-color",fh("border-color")),i.setReducer("border-style",fh("border-style")),i.setReducer("border-width",fh("border-width")),i.setReducer("border-top",eg("top")),i.setReducer("border-right",eg("right")),i.setReducer("border-bottom",eg("bottom")),i.setReducer("border-left",eg("left")),i.setReducer("border",rle()),i.setStyleRelation("border",["border-color","border-style","border-width","border-top","border-right","border-bottom","border-left","border-top-color","border-right-color","border-bottom-color","border-left-color","border-top-style","border-right-style","border-bottom-style","border-left-style","border-top-width","border-right-width","border-bottom-width","border-left-width"]),i.setStyleRelation("border-color",["border-top-color","border-right-color","border-bottom-color","border-left-color"]),i.setStyleRelation("border-style",["border-top-style","border-right-style","border-bottom-style","border-left-style"]),i.setStyleRelation("border-width",["border-top-width","border-right-width","border-bottom-width","border-left-width"]),i.setStyleRelation("border-top",["border-top-color","border-top-style","border-top-width"]),i.setStyleRelation("border-right",["border-right-color","border-right-style","border-right-width"]),i.setStyleRelation("border-bottom",["border-bottom-color","border-bottom-style","border-bottom-width"]),i.setStyleRelation("border-left",["border-left-color","border-left-style","border-left-width"])}function ile(){return i=>{const{color:t,style:e,width:n}=TM(i);return{path:"border",value:{color:hh(t),style:hh(e),width:hh(n)}}}}function Jm(i){return t=>{const{color:e,style:n,width:s}=TM(t),r={};return e!==void 0&&(r.color={[i]:e}),n!==void 0&&(r.style={[i]:n}),s!==void 0&&(r.width={[i]:s}),{path:"border",value:r}}}function J0(i){return t=>({path:"border",value:sle(t,i)})}function sle(i,t){return{[t]:hh(i)}}function ms(i,t){return e=>({path:"border",value:{[i]:{[t]:e}}})}function Qm(i){return(t,e)=>{if(e.border)return Gd(e.border,i)}}function Gd(i,t){const e={};return i.width&&i.width[t]&&(e.width=i.width[t]),i.style&&i.style[t]&&(e.style=i.style[t]),i.color&&i.color[t]&&(e.color=i.color[t]),e}function TM(i){const t={},e=jE(i);for(const n of e)Vb(n)||/thin|medium|thick/.test(n)?t.width=n:jae(n)?t.style=n:t.color=n;return t}function rle(){return t=>{const e=Gd(t,"top"),n=Gd(t,"right"),s=Gd(t,"bottom"),r=Gd(t,"left"),o=[e,n,s,r],a={width:i(o,"width"),style:i(o,"style"),color:i(o,"color")},l=Lc(a,"all");return l.length?l:[...Object.entries(a).reduce((h,[f,g])=>(g&&(h.push([`border-${f}`,g]),o.forEach(p=>delete p[f])),h),[]),...Lc(e,"top"),...Lc(n,"right"),...Lc(s,"bottom"),...Lc(r,"left")]};function i(t,e){return t.map(n=>n[e]).reduce((n,s)=>n==s?n:null)}}function eg(i){return t=>Lc(t,i)}function Lc(i,t){const e=[];if(i&&i.width&&e.push("width"),i&&i.style&&e.push("style"),i&&i.color&&e.push("color"),e.length==3){const n=e.map(s=>i[s]).join(" ");return[t=="all"?["border",n]:[`border-${t}`,n]]}return t=="all"?[]:e.map(n=>[`border-${t}-${n}`,i[n]])}function ole(i){i.setNormalizer("margin",xM("margin")),i.setNormalizer("margin-top",t=>({path:"margin.top",value:t})),i.setNormalizer("margin-right",t=>({path:"margin.right",value:t})),i.setNormalizer("margin-bottom",t=>({path:"margin.bottom",value:t})),i.setNormalizer("margin-left",t=>({path:"margin.left",value:t})),i.setReducer("margin",fh("margin")),i.setStyleRelation("margin",["margin-top","margin-right","margin-bottom","margin-left"])}function ale(i){i.setNormalizer("padding",xM("padding")),i.setNormalizer("padding-top",t=>({path:"padding.top",value:t})),i.setNormalizer("padding-right",t=>({path:"padding.right",value:t})),i.setNormalizer("padding-bottom",t=>({path:"padding.bottom",value:t})),i.setNormalizer("padding-left",t=>({path:"padding.left",value:t})),i.setReducer("padding",fh("padding")),i.setStyleRelation("padding",["padding-top","padding-right","padding-bottom","padding-left"])}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 *//**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class SM{constructor(t){b(this,"crashes",[]);b(this,"state","initializing");b(this,"_crashNumberLimit");b(this,"_now",Date.now);b(this,"_minimumNonErrorTimePeriod");b(this,"_boundErrorHandler");b(this,"_listeners");if(this.crashes=[],this._crashNumberLimit=typeof t.crashNumberLimit=="number"?t.crashNumberLimit:3,this._minimumNonErrorTimePeriod=typeof t.minimumNonErrorTimePeriod=="number"?t.minimumNonErrorTimePeriod:5e3,this._boundErrorHandler=e=>{const n="error"in e?e.error:e.reason;n instanceof Error&&this._handleError(n,e)},this._listeners={},!this._restart)throw new Error("The Watchdog class was split into the abstract `Watchdog` class and the `EditorWatchdog` class. Please, use `EditorWatchdog` if you have used the `Watchdog` class previously.")}destroy(){this._stopErrorHandling(),this._listeners={}}on(t,e){this._listeners[t]||(this._listeners[t]=[]),this._listeners[t].push(e)}off(t,e){this._listeners[t]=this._listeners[t].filter(n=>n!==e)}_fire(t,...e){const n=this._listeners[t]||[];for(const s of n)s.apply(this,[null,...e])}_startErrorHandling(){window.addEventListener("error",this._boundErrorHandler),window.addEventListener("unhandledrejection",this._boundErrorHandler)}_stopErrorHandling(){window.removeEventListener("error",this._boundErrorHandler),window.removeEventListener("unhandledrejection",this._boundErrorHandler)}_handleError(t,e){if(this._shouldReactToError(t)){this.crashes.push({message:t.message,stack:t.stack,filename:e instanceof ErrorEvent?e.filename:void 0,lineno:e instanceof ErrorEvent?e.lineno:void 0,colno:e instanceof ErrorEvent?e.colno:void 0,date:this._now()});const n=this._shouldRestart();this.state="crashed",this._fire("stateChange"),this._fire("error",{error:t,causesRestart:n}),n?this._restart():(this.state="crashedPermanently",this._fire("stateChange"))}}_shouldReactToError(t){return t.is&&t.is("CKEditorError")&&t.context!==void 0&&t.context!==null&&this.state==="ready"&&this._isErrorComingFromThisItem(t)}_shouldRestart(){if(this.crashes.length<=this._crashNumberLimit)return!0;const t=this.crashes[this.crashes.length-1].date,e=this.crashes[this.crashes.length-1-this._crashNumberLimit].date;return(t-e)/this._crashNumberLimit>this._minimumNonErrorTimePeriod}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function My(i,t=new Set){const e=[i],n=new Set;let s=0;for(;e.length>s;){const r=e[s++];if(!(n.has(r)||!lle(r)||t.has(r)))if(n.add(r),Symbol.iterator in r)try{for(const o of r)e.push(o)}catch{}else for(const o in r)o!=="defaultValue"&&e.push(r[o])}return n}function lle(i){const t=Object.prototype.toString.call(i),e=typeof i;return!(e==="number"||e==="boolean"||e==="string"||e==="symbol"||e==="function"||t==="[object Date]"||t==="[object RegExp]"||t==="[object Module]"||i===void 0||i===null||i._watchdogExcluded||i instanceof EventTarget||i instanceof Event)}function AM(i,t,e=new Set){if(i===t&&cle(i))return!0;const n=My(i,e),s=My(t,e);for(const r of n)if(s.has(r))return!0;return!1}function cle(i){return typeof i=="object"&&i!==null}class PM extends SM{constructor(e,n={}){super(n);b(this,"_editor",null);b(this,"_lifecyclePromise",null);b(this,"_throttledSave");b(this,"_data");b(this,"_lastDocumentVersion");b(this,"_elementOrData");b(this,"_initUsingData",!0);b(this,"_editables",{});b(this,"_config");b(this,"_excludedProps");this._throttledSave=fu(this._save.bind(this),typeof n.saveInterval=="number"?n.saveInterval:5e3),e&&(this._creator=(s,r)=>e.create(s,r)),this._destructor=s=>s.destroy()}get editor(){return this._editor}get _item(){return this._editor}setCreator(e){this._creator=e}setDestructor(e){this._destructor=e}_restart(){return Promise.resolve().then(()=>(this.state="initializing",this._fire("stateChange"),this._destroy())).catch(e=>{console.error("An error happened during the editor destroying.",e)}).then(()=>{const e={},n=[],s=this._config.rootsAttributes||{},r={};for(const[a,l]of Object.entries(this._data.roots))l.isLoaded?(e[a]="",r[a]=s[a]||{}):n.push(a);const o={...this._config,extraPlugins:this._config.extraPlugins||[],lazyRoots:n,rootsAttributes:r,_watchdogInitialData:this._data};return delete o.initialData,o.extraPlugins.push(ule),this._initUsingData?this.create(e,o,o.context):pa(this._elementOrData)?this.create(this._elementOrData,o,o.context):this.create(this._editables,o,o.context)}).then(()=>{this._fire("restart")})}create(e=this._elementOrData,n=this._config,s){return this._lifecyclePromise=Promise.resolve(this._lifecyclePromise).then(()=>(super._startErrorHandling(),this._elementOrData=e,this._initUsingData=typeof e=="string"||Object.keys(e).length>0&&typeof Object.values(e)[0]=="string",this._config=this._cloneEditorConfiguration(n)||{},this._config.context=s,this._creator(e,this._config))).then(r=>{this._editor=r,r.model.document.on("change:data",this._throttledSave),this._lastDocumentVersion=r.model.document.version,this._data=this._getData(),this._initUsingData||(this._editables=this._getEditables()),this.state="ready",this._fire("stateChange")}).finally(()=>{this._lifecyclePromise=null}),this._lifecyclePromise}destroy(){return this._lifecyclePromise=Promise.resolve(this._lifecyclePromise).then(()=>(this.state="destroyed",this._fire("stateChange"),super.destroy(),this._destroy())).finally(()=>{this._lifecyclePromise=null}),this._lifecyclePromise}_destroy(){return Promise.resolve().then(()=>{this._stopErrorHandling(),this._throttledSave.cancel();const e=this._editor;return this._editor=null,e.model.document.off("change:data",this._throttledSave),this._destructor(e)})}_save(){const e=this._editor.model.document.version;try{this._data=this._getData(),this._initUsingData||(this._editables=this._getEditables()),this._lastDocumentVersion=e}catch(n){console.error(n,"An error happened during restoring editor data. Editor will be restored from the previously saved data.")}}_setExcludedProperties(e){this._excludedProps=e}_getData(){const e=this._editor,n=e.model.document.roots.filter(l=>l.isAttached()&&l.rootName!="$graveyard"),{plugins:s}=e,r=s.has("CommentsRepository")&&s.get("CommentsRepository"),o=s.has("TrackChanges")&&s.get("TrackChanges"),a={roots:{},markers:{},commentThreads:JSON.stringify([]),suggestions:JSON.stringify([])};n.forEach(l=>{a.roots[l.rootName]={content:JSON.stringify(Array.from(l.getChildren())),attributes:JSON.stringify(Array.from(l.getAttributes())),isLoaded:l._isLoaded}});for(const l of e.model.markers)l._affectsData&&(a.markers[l.name]={rangeJSON:l.getRange().toJSON(),usingOperation:l._managedUsingOperations,affectsData:l._affectsData});return r&&(a.commentThreads=JSON.stringify(r.getCommentThreads({toJSON:!0,skipNotAttached:!0}))),o&&(a.suggestions=JSON.stringify(o.getSuggestions({toJSON:!0,skipNotAttached:!0}))),a}_getEditables(){const e={};for(const n of this.editor.model.document.getRootNames()){const s=this.editor.ui.getEditableElement(n);s&&(e[n]=s)}return e}_isErrorComingFromThisItem(e){return AM(this._editor,e.context,this._excludedProps)}_cloneEditorConfiguration(e){return CE(e,(n,s)=>{if(pa(n)||s==="context")return n})}}class ule{constructor(t){b(this,"editor");b(this,"_data");this.editor=t,this._data=t.config.get("_watchdogInitialData")}init(){this.editor.data.on("init",t=>{t.stop(),this.editor.model.enqueueChange({isUndoable:!1},e=>{this._restoreCollaborationData(),this._restoreEditorData(e)}),this.editor.data.fire("ready")},{priority:999})}_createNode(t,e){if("name"in e){const n=t.createElement(e.name,e.attributes);if(e.children)for(const s of e.children)n._appendChild(this._createNode(t,s));return n}else return t.createText(e.data,e.attributes)}_restoreEditorData(t){const e=this.editor;Object.entries(this._data.roots).forEach(([n,{content:s,attributes:r}])=>{const o=JSON.parse(s),a=JSON.parse(r),l=e.model.document.getRoot(n);for(const[u,h]of a)t.setAttribute(u,h,l);for(const u of o){const h=this._createNode(t,u);t.insert(h,l,"end")}}),Object.entries(this._data.markers).forEach(([n,s])=>{const{document:r}=e.model,{rangeJSON:{start:o,end:a},...l}=s,u=r.getRoot(o.root),h=t.createPositionFromPath(u,o.path,o.stickiness),f=t.createPositionFromPath(u,a.path,a.stickiness),g=t.createRange(h,f);t.addMarker(n,{range:g,...l})})}_restoreCollaborationData(){const t=JSON.parse(this._data.commentThreads),e=JSON.parse(this._data.suggestions);t.forEach(n=>{const s=this.editor.config.get("collaboration.channelId"),r=this.editor.plugins.get("CommentsRepository");r.hasCommentThread(n.threadId)&&r.getCommentThread(n.threadId).remove(),r.addCommentThread({channelId:s,...n})}),e.forEach(n=>{const s=this.editor.plugins.get("TrackChangesEditing");if(s.hasSuggestion(n.id)){const r=s.getSuggestion(n.id);r.attributes=n.attributes}else s.addSuggestionData(n)})}}const mh=Symbol("MainQueueId");class dle extends SM{constructor(e,n={}){super(n);b(this,"_watchdogs",new Map);b(this,"_watchdogConfig");b(this,"_context",null);b(this,"_contextProps",new Set);b(this,"_actionQueues",new hle);b(this,"_contextConfig");b(this,"_item");this._watchdogConfig=n,this._creator=s=>e.create(s),this._destructor=s=>s.destroy(),this._actionQueues.onEmpty(()=>{this.state==="initializing"&&(this.state="ready",this._fire("stateChange"))})}setCreator(e){this._creator=e}setDestructor(e){this._destructor=e}get context(){return this._context}create(e={}){return this._actionQueues.enqueue(mh,()=>(this._contextConfig=e,this._create()))}getItem(e){return this._getWatchdog(e)._item}getItemState(e){return this._getWatchdog(e).state}add(e){const n=dP(e);return Promise.all(n.map(s=>this._actionQueues.enqueue(s.id,()=>{if(this.state==="destroyed")throw new Error("Cannot add items to destroyed watchdog.");if(!this._context)throw new Error("Context was not created yet. You should call the `ContextWatchdog#create()` method first.");let r;if(this._watchdogs.has(s.id))throw new Error(`Item with the given id is already added: '${s.id}'.`);if(s.type==="editor")return r=new PM(null,this._watchdogConfig),r.setCreator(s.creator),r._setExcludedProperties(this._contextProps),s.destructor&&r.setDestructor(s.destructor),this._watchdogs.set(s.id,r),r.on("error",(o,{error:a,causesRestart:l})=>{this._fire("itemError",{itemId:s.id,error:a}),l&&this._actionQueues.enqueue(s.id,()=>new Promise(u=>{const h=()=>{r.off("restart",h),this._fire("itemRestart",{itemId:s.id}),u()};r.on("restart",h)}))}),r.create(s.sourceElementOrData,s.config,this._context);throw new Error(`Not supported item type: '${s.type}'.`)})))}remove(e){const n=dP(e);return Promise.all(n.map(s=>this._actionQueues.enqueue(s,()=>{const r=this._getWatchdog(s);return this._watchdogs.delete(s),r.destroy()})))}destroy(){return this._actionQueues.enqueue(mh,()=>(this.state="destroyed",this._fire("stateChange"),super.destroy(),this._destroy()))}_restart(){return this._actionQueues.enqueue(mh,()=>(this.state="initializing",this._fire("stateChange"),this._destroy().catch(e=>{console.error("An error happened during destroying the context or items.",e)}).then(()=>this._create()).then(()=>this._fire("restart"))))}_create(){return Promise.resolve().then(()=>(this._startErrorHandling(),this._creator(this._contextConfig))).then(e=>(this._context=e,this._contextProps=My(this._context),Promise.all(Array.from(this._watchdogs.values()).map(n=>(n._setExcludedProperties(this._contextProps),n.create(void 0,void 0,this._context))))))}_destroy(){return Promise.resolve().then(()=>{this._stopErrorHandling();const e=this._context;return this._context=null,this._contextProps=new Set,Promise.all(Array.from(this._watchdogs.values()).map(n=>n.destroy())).then(()=>this._destructor(e))})}_getWatchdog(e){const n=this._watchdogs.get(e);if(!n)throw new Error(`Item with the given id was not registered: ${e}.`);return n}_isErrorComingFromThisItem(e){for(const n of this._watchdogs.values())if(n._isErrorComingFromThisItem(e))return!1;return AM(this._context,e.context)}}class hle{constructor(){b(this,"_onEmptyCallbacks",[]);b(this,"_queues",new Map);b(this,"_activeActions",0)}onEmpty(t){this._onEmptyCallbacks.push(t)}enqueue(t,e){const n=t===mh;this._activeActions++,this._queues.get(t)||this._queues.set(t,Promise.resolve());const r=(n?Promise.all(this._queues.values()):Promise.all([this._queues.get(mh),this._queues.get(t)])).then(e),o=r.catch(()=>{});return this._queues.set(t,o),r.finally(()=>{this._activeActions--,this._queues.get(t)===o&&this._activeActions===0&&this._onEmptyCallbacks.forEach(a=>a())})}}function dP(i){return Array.isArray(i)?i:[i]}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class J extends yt(){constructor(e){super();b(this,"editor");b(this,"_disableStack",new Set);this.editor=e,this.set("isEnabled",!0)}forceDisabled(e){this._disableStack.add(e),this._disableStack.size==1&&(this.on("set:isEnabled",hP,{priority:"highest"}),this.isEnabled=!1)}clearForceDisabled(e){this._disableStack.delete(e),this._disableStack.size==0&&(this.off("set:isEnabled",hP),this.isEnabled=!0)}destroy(){this.stopListening()}static get isContextPlugin(){return!1}static get isOfficialPlugin(){return!1}static get isPremiumPlugin(){return!1}}function hP(i){i.return=!1,i.stop()}class Ze extends yt(){constructor(e){super();b(this,"editor");b(this,"_isEnabledBasedOnSelection");b(this,"_affectsData");b(this,"_disableStack");this.editor=e,this.set("value",void 0),this.set("isEnabled",!1),this._affectsData=!0,this._isEnabledBasedOnSelection=!0,this._disableStack=new Set,this.decorate("execute"),this.listenTo(this.editor.model.document,"change",()=>{this.refresh()}),this.listenTo(e,"change:isReadOnly",()=>{this.refresh()}),this.on("set:isEnabled",n=>{if(!this.affectsData)return;const s=e.model.document.selection,o=!(s.getFirstPosition().root.rootName=="$graveyard")&&e.model.canEditAt(s);(e.isReadOnly||this._isEnabledBasedOnSelection&&!o)&&(n.return=!1,n.stop())},{priority:"highest"}),this.on("execute",n=>{this.isEnabled||n.stop()},{priority:"high"})}get affectsData(){return this._affectsData}set affectsData(e){this._affectsData=e}refresh(){this.isEnabled=!0}forceDisabled(e){this._disableStack.add(e),this._disableStack.size==1&&(this.on("set:isEnabled",fP,{priority:"highest"}),this.isEnabled=!1)}clearForceDisabled(e){this._disableStack.delete(e),this._disableStack.size==0&&(this.off("set:isEnabled",fP),this.refresh())}execute(...e){}destroy(){this.stopListening()}}function fP(i){i.return=!1,i.stop()}class mP extends Ze{constructor(){super(...arguments);b(this,"_childCommandsDefinitions",[])}refresh(){}execute(...e){const n=this._getFirstEnabledCommand();return!!n&&n.execute(e)}registerChildCommand(e,n={}){f4(this._childCommandsDefinitions,{command:e,priority:n.priority||"normal"}),e.on("change:isEnabled",()=>this._checkEnabled()),this._checkEnabled()}_checkEnabled(){this.isEnabled=!!this._getFirstEnabledCommand()}_getFirstEnabledCommand(){const e=this._childCommandsDefinitions.find(({command:n})=>n.isEnabled);return e&&e.command}}class IM extends Ct(){constructor(e,n=[],s=[]){super();b(this,"_context");b(this,"_plugins",new Map);b(this,"_availablePlugins");b(this,"_contextPlugins");this._context=e,this._availablePlugins=new Map;for(const r of n)r.pluginName&&this._availablePlugins.set(r.pluginName,r);this._contextPlugins=new Map;for(const[r,o]of s)this._contextPlugins.set(r,o),this._contextPlugins.set(o,r),r.pluginName&&this._availablePlugins.set(r.pluginName,r)}*[Symbol.iterator](){for(const e of this._plugins)typeof e[0]=="function"&&(yield e)}get(e){const n=this._plugins.get(e);if(!n){let s=e;throw typeof e=="function"&&(s=e.pluginName||e.name),new D("plugincollection-plugin-not-loaded",this._context,{plugin:s})}return n}has(e){return this._plugins.has(e)}init(e,n=[],s=[]){const r=this,o=this._context;y(e),C(e);const a=e.filter(N=>!g(N,n)),l=[...E(a)];A(l,s);const u=S(l);return O(u,"init").then(()=>O(u,"afterInit")).then(()=>u);function h(N){return typeof N=="function"}function f(N){return h(N)&&!!N.isContextPlugin}function g(N,L){return L.some(M=>M===N||p(N)===M||p(M)===N)}function p(N){return h(N)?N.pluginName||N.name:N}function y(N,L=new Set){N.forEach(M=>{h(M)&&(L.has(M)||(L.add(M),M.pluginName&&!r._availablePlugins.has(M.pluginName)&&r._availablePlugins.set(M.pluginName,M),M.requires&&y(M.requires,L)))})}function E(N,L=new Set){return N.map(M=>h(M)?M:r._availablePlugins.get(M)).reduce((M,B)=>L.has(B)?M:(L.add(B),B.requires&&(C(B.requires,B),E(B.requires,L).forEach(U=>M.add(U))),M.add(B)),new Set)}function C(N,L=null){N.map(M=>h(M)?M:r._availablePlugins.get(M)||M).forEach(M=>{k(M,L),T(M,L),P(M,L)})}function k(N,L){if(!h(N))throw L?new D("plugincollection-soft-required",o,{missingPlugin:N,requiredBy:p(L)}):new D("plugincollection-plugin-not-found",o,{plugin:N})}function T(N,L){if(f(L)&&!f(N))throw new D("plugincollection-context-required",o,{plugin:p(N),requiredBy:p(L)})}function P(N,L){if(L&&g(N,n))throw new D("plugincollection-required",o,{plugin:p(N),requiredBy:p(L)})}function S(N){return N.map(L=>{let M=r._contextPlugins.get(L);return M=M||new L(o),r._add(L,M),M})}function O(N,L){return N.reduce((M,B)=>!B[L]||r._contextPlugins.has(B)?M:M.then(B[L].bind(B)),Promise.resolve())}function A(N,L){for(const M of L){if(typeof M!="function")throw new D("plugincollection-replace-plugin-invalid-type",null,{pluginItem:M});const B=M.pluginName;if(!B)throw new D("plugincollection-replace-plugin-missing-name",null,{pluginItem:M});if(M.requires&&M.requires.length)throw new D("plugincollection-plugin-for-replacing-cannot-have-dependencies",null,{pluginName:B});const U=r._availablePlugins.get(B);if(!U)throw new D("plugincollection-plugin-for-replacing-not-exist",null,{pluginName:B});const q=N.indexOf(U);if(q===-1){if(r._contextPlugins.has(U))return;throw new D("plugincollection-plugin-for-replacing-not-loaded",null,{pluginName:B})}if(U.requires&&U.requires.length)throw new D("plugincollection-replaced-plugin-cannot-have-dependencies",null,{pluginName:B});N.splice(q,1,M),r._availablePlugins.set(B,M)}}}destroy(){const e=[];for(const[,n]of this)typeof n.destroy=="function"&&!this._contextPlugins.has(n)&&e.push(n.destroy());return Promise.all(e)}_add(e,n){this._plugins.set(e,n);const s=e.pluginName;if(s){if(this._plugins.has(s))throw new D("plugincollection-plugin-name-conflict",null,{pluginName:s,plugin1:this._plugins.get(s).constructor,plugin2:e});this._plugins.set(s,n)}}}class kp{constructor(t){b(this,"config");b(this,"plugins");b(this,"locale");b(this,"t");b(this,"editors");b(this,"_contextOwner",null);const{translations:e,...n}=t||{};this.config=new _4(n,this.constructor.defaultConfig);const s=this.constructor.builtinPlugins;this.config.define("plugins",s),this.plugins=new IM(this,s);const r=this.config.get("language")||{};this.locale=new Gie({uiLanguage:typeof r=="string"?r:r.ui,contentLanguage:this.config.get("language.content"),translations:e}),this.t=this.locale.t,this.editors=new Hn}initPlugins(){const t=this.config.get("plugins")||[],e=this.config.get("substitutePlugins")||[];for(const n of t.concat(e)){if(typeof n!="function")throw new D("context-initplugins-constructor-only",null,{Plugin:n});if(n.isContextPlugin!==!0)throw new D("context-initplugins-invalid-plugin",null,{Plugin:n})}return this.plugins.init(t,[],e)}destroy(){return Promise.all(Array.from(this.editors,t=>t.destroy())).then(()=>this.plugins.destroy())}_addEditor(t,e){if(this._contextOwner)throw new D("context-addeditor-private-context");this.editors.add(t),e&&(this._contextOwner=t)}_removeEditor(t){return this.editors.has(t)&&this.editors.remove(t),this._contextOwner===t?this.destroy():Promise.resolve()}_getEditorConfig(){const t={};for(const e of this.config.names())["plugins","removePlugins","extraPlugins"].includes(e)||(t[e]=this.config.get(e));return t}static create(t){return new Promise(e=>{const n=new this(t);e(n.initPlugins().then(()=>n))})}}b(kp,"defaultConfig"),b(kp,"builtinPlugins");class Db extends yt(){constructor(e){super();b(this,"context");this.context=e}destroy(){this.stopListening()}static get isContextPlugin(){return!0}static get isOfficialPlugin(){return!1}static get isPremiumPlugin(){return!1}}class fle{constructor(){b(this,"_commands");this._commands=new Map}add(t,e){this._commands.set(t,e)}get(t){return this._commands.get(t)}execute(t,...e){const n=this.get(t);if(!n)throw new D("commandcollection-command-not-found",this,{commandName:t});return n.execute(...e)}*names(){yield*this._commands.keys()}*commands(){yield*this._commands.values()}[Symbol.iterator](){return this._commands[Symbol.iterator]()}destroy(){for(const t of this.commands())t.destroy()}}class mle extends tn{constructor(e){super();b(this,"editor");this.editor=e}set(e,n,s={}){if(typeof n=="string"){const r=n;n=(o,a)=>{this.editor.execute(r),a()}}super.set(e,n,s)}}const Q0="contentEditing",gP="common";class gle{constructor(t){b(this,"keystrokeInfos",new Map);b(this,"_editor");this._editor=t;const e=t.config.get("menuBar.isVisible"),n=t.locale.t;this.addKeystrokeInfoCategory({id:Q0,label:n("Content editing keystrokes"),description:n("These keyboard shortcuts allow for quick access to content editing features.")});const s=[{label:n("Close contextual balloons, dropdowns, and dialogs"),keystroke:"Esc"},{label:n("Open the accessibility help dialog"),keystroke:"Alt+0"},{label:n("Move focus between form fields (inputs, buttons, etc.)"),keystroke:[["Tab"],["Shift+Tab"]]},{label:n("Move focus to the toolbar, navigate between toolbars"),keystroke:"Alt+F10",mayRequireFn:!0},{label:n("Navigate through the toolbar or menu bar"),keystroke:[["arrowup"],["arrowright"],["arrowdown"],["arrowleft"]]},{label:n("Execute the currently focused button. Executing buttons that interact with the editor content moves the focus back to the content."),keystroke:[["Enter"],["Space"]]}];e&&s.push({label:n("Move focus to the menu bar, navigate between menu bars"),keystroke:"Alt+F9",mayRequireFn:!0}),this.addKeystrokeInfoCategory({id:"navigation",label:n("User interface and content navigation keystrokes"),description:n("Use the following keystrokes for more efficient navigation in the CKEditor 5 user interface."),groups:[{id:"common",keystrokes:s}]})}addKeystrokeInfoCategory({id:t,label:e,description:n,groups:s}){this.keystrokeInfos.set(t,{id:t,label:e,description:n,groups:new Map}),this.addKeystrokeInfoGroup({categoryId:t,id:gP}),s&&s.forEach(r=>{this.addKeystrokeInfoGroup({categoryId:t,...r})})}addKeystrokeInfoGroup({categoryId:t=Q0,id:e,label:n,keystrokes:s}){const r=this.keystrokeInfos.get(t);if(!r)throw new D("accessibility-unknown-keystroke-info-category",this._editor,{groupId:e,categoryId:t});r.groups.set(e,{id:e,label:n,keystrokes:s||[]})}addKeystrokeInfos({categoryId:t=Q0,groupId:e=gP,keystrokes:n}){if(!this.keystrokeInfos.has(t))throw new D("accessibility-unknown-keystroke-info-category",this._editor,{categoryId:t,keystrokes:n});const s=this.keystrokeInfos.get(t);if(!s.groups.has(e))throw new D("accessibility-unknown-keystroke-info-group",this._editor,{groupId:e,categoryId:t,keystrokes:n});s.groups.get(e).keystrokes.push(...n)}}function ple(i){return{sessionId:_le(),pageSessionId:Ele(),hostname:window.location.hostname,version:globalThis.CKEDITOR_VERSION,type:ble(i),plugins:wle(i.plugins),distribution:vle(),env:yle(),integration:Object.create(null),menuBar:{isVisible:!!i.config.get("menuBar.isVisible")},language:{ui:i.locale.uiLanguage,content:i.locale.contentLanguage},toolbar:{main:e1(i.config.get("toolbar")),block:e1(i.config.get("blockToolbar")),balloon:e1(i.config.get("balloonToolbar"))}}}function ble(i){return Object.getPrototypeOf(i).constructor.editorName}function wle(i){return Array.from(i).filter(([t])=>!!t.pluginName).map(([t])=>{const{pluginName:e,isContextPlugin:n,isOfficialPlugin:s,isPremiumPlugin:r}=t;return{isContext:!!n,isOfficial:!!s,isPremium:!!r,name:e}})}function e1(i){if(!i)return;const t=Array.isArray(i)?{items:i}:i,e=r(t.items||[]);return{isMultiline:e.includes("-"),shouldNotGroupWhenFull:!!t.shouldNotGroupWhenFull,items:s(e)};function s(o){return o.filter(a=>a!=="|"&&a!=="-")}function r(o){return o.flatMap(a=>typeof a=="string"?[a]:r(a.items))}}function vle(){return{channel:window[Symbol.for("cke distribution")]||"sh"}}function yle(){let i="unknown",t="unknown";return Fe.isMac?i="mac":Fe.isWindows?i="windows":Fe.isiOS?i="ios":Fe.isAndroid&&(i="android"),Fe.isGecko?t="gecko":Fe.isBlink?t="blink":Fe.isSafari&&(t="safari"),{os:i,browser:t}}function _le(){return localStorage.getItem("__ckeditor-session-id")||localStorage.setItem("__ckeditor-session-id",ni()),localStorage.getItem("__ckeditor-session-id")}function Ele(){return Ce.window.CKEDITOR_PAGE_SESSION_ID=Ce.window.CKEDITOR_PAGE_SESSION_ID||ni(),Ce.window.CKEDITOR_PAGE_SESSION_ID}class Vc extends yt(){constructor(e={}){super();b(this,"accessibility");b(this,"commands");b(this,"config");b(this,"conversion");b(this,"data");b(this,"editing");b(this,"locale");b(this,"model");b(this,"plugins");b(this,"keystrokes");b(this,"t");b(this,"_context");b(this,"_readOnlyLocks");if("sanitizeHtml"in e)throw new D("editor-config-sanitizehtml-not-supported");const n=this.constructor,{translations:s,...r}=n.defaultConfig||{},{translations:o=s,...a}=e,l=e.language||r.language;this._context=e.context||new kp({language:l,translations:o}),this._context._addEditor(this,!e.context);const u=Array.from(n.builtinPlugins||[]);this.config=new _4(a,r),this.config.define("plugins",u),this.config.define(this._context._getEditorConfig()),f(this.config),this.plugins=new IM(this,u,this._context.plugins),this.locale=this._context.locale,this.t=this.locale.t,this._readOnlyLocks=new Set,this.commands=new fle,this.set("state","initializing"),this.once("ready",()=>this.state="ready",{priority:"high"}),this.once("destroy",()=>this.state="destroyed",{priority:"high"}),this.model=new Rae,this.on("change:isReadOnly",()=>{this.model.document.isReadOnly=this.isReadOnly});const h=new gse;this.data=new zoe(this.model,h),this.editing=new boe(this.model,h),this.editing.view.document.bind("isReadOnly").to(this),this.conversion=new Hoe([this.editing.downcastDispatcher,this.data.downcastDispatcher],this.data.upcastDispatcher),this.conversion.addAlias("dataDowncast",this.data.downcastDispatcher),this.conversion.addAlias("editingDowncast",this.editing.downcastDispatcher),this.keystrokes=new mle(this),this.keystrokes.listenTo(this.editing.view.document),this.accessibility=new gle(this),g(this);function f(p){let y=p.get("licenseKey");if(!y&&window.CKEDITOR_GLOBAL_LICENSE_KEY&&(y=window.CKEDITOR_GLOBAL_LICENSE_KEY,p.set("licenseKey",y)),!y)throw new D("license-key-missing")}function g(p){const y=p.config.get("licenseKey"),E=window[Symbol.for("cke distribution")]||"sh";function C(M){p.enableReadOnlyMode(Symbol("invalidLicense")),p._showLicenseError(M)}function k(M){const B=M.split(".");return B.length!=3?null:B[1]}function T(M){return["exp","jti","vc"].every(U=>U in M)}function P(M){return Object.getOwnPropertyNames(M).sort().filter(q=>q!="vc"&&M[q]!=null).map(q=>M[q])}function S(M){const{hostname:B}=new URL(window.location.href);if(M.includes(B))return!0;const U=B.split(".");return M.filter(q=>q.includes("*")).map(q=>q.split(".")).filter(q=>q.length<=U.length).map(q=>Array(U.length-q.length).fill(q[0]==="*"?"*":"").concat(q)).some(q=>U.every((ee,me)=>q[me]===ee||q[me]==="*"))}if(y=="GPL"){E=="cloud"&&C("distributionChannel");return}const O=k(y);if(!O){C("invalid");return}const A=PE(O);if(!A){C("invalid");return}if(!T(A)){C("invalid");return}if(A.distributionChannel&&!Bt(A.distributionChannel).includes(E)){C("distributionChannel");return}if(Jie(P(A))!=A.vc.toLowerCase()){C("invalid");return}if(new Date(A.exp*1e3)<oie){C("expired");return}const L=A.licensedHosts;if(L&&L.length>0&&!S(L)){C("domainLimit");return}if(["evaluation","trial"].includes(A.licenseType)&&A.exp*1e3<Date.now()){C("expired");return}if(["development","evaluation","trial"].includes(A.licenseType)){const{licenseType:M}=A,B=M[0].toUpperCase()+M.slice(1),U=M==="evaluation"?"an":"a";console.info(`%cCKEditor 5 ${B} License`,"color: #ffffff; background: #743CCD; font-size: 14px; padding: 4px 8px; border-radius: 4px;"),console.warn(`⚠️ You are using ${U} ${M} license of CKEditor 5${M==="trial"?" which is for evaluation purposes only":""}. For production usage, please obtain a production license at https://portal.ckeditor.com/`)}if(["evaluation","trial"].includes(A.licenseType)){const M=A.licenseType,B=setTimeout(()=>{C(`${M}Limit`)},6e5);p.on("destroy",()=>{clearTimeout(B)})}A.usageEndpoint&&p.once("ready",()=>{const M={requestId:ni(),requestTime:Math.round(Date.now()/1e3),license:y,editor:Cle(p)};p._sendUsageRequest(A.usageEndpoint,M).then(B=>{const{status:U,message:q}=B;q&&console.warn(q),U!="ok"&&C("usageLimit")},()=>{iie("license-key-validation-endpoint-not-reachable",{url:A.usageEndpoint})})},{priority:"high"})}}static get editorName(){return"Editor"}get isReadOnly(){return this._readOnlyLocks.size>0}set isReadOnly(e){throw new D("editor-isreadonly-has-no-setter")}enableReadOnlyMode(e){if(typeof e!="string"&&typeof e!="symbol")throw new D("editor-read-only-lock-id-invalid",null,{lockId:e});this._readOnlyLocks.has(e)||(this._readOnlyLocks.add(e),this._readOnlyLocks.size===1&&this.fire("change:isReadOnly","isReadOnly",!0,!1))}disableReadOnlyMode(e){if(typeof e!="string"&&typeof e!="symbol")throw new D("editor-read-only-lock-id-invalid",null,{lockId:e});this._readOnlyLocks.has(e)&&(this._readOnlyLocks.delete(e),this._readOnlyLocks.size===0&&this.fire("change:isReadOnly","isReadOnly",!1,!0))}setData(e){this.data.set(e)}getData(e){return this.data.get(e)}initPlugins(){const e=this.config,n=e.get("plugins"),s=e.get("removePlugins")||[],r=e.get("extraPlugins")||[],o=e.get("substitutePlugins")||[];return this.plugins.init(n.concat(r),s,o)}destroy(){let e=Promise.resolve();return this.state=="initializing"&&(e=new Promise(n=>this.once("ready",n))),e.then(()=>{this.fire("destroy"),this.stopListening(),this.commands.destroy()}).then(()=>this.plugins.destroy()).then(()=>{this.model.destroy(),this.data.destroy(),this.editing.destroy(),this.keystrokes.destroy()}).then(()=>this._context._removeEditor(this))}execute(e,...n){try{return this.commands.execute(e,...n)}catch(s){/* istanbul ignore next -- @preserve */D.rethrowUnexpectedError(s,this)}}focus(){this.editing.view.focus()}static create(...e){throw new Error("This is an abstract method.")}_showLicenseError(e,n){setTimeout(()=>{if(e=="invalid")throw new D("invalid-license-key");if(e=="expired")throw new D("license-key-expired");if(e=="domainLimit")throw new D("license-key-domain-limit");if(e=="featureNotAllowed")throw new D("license-key-plugin-not-allowed",null,{pluginName:n});if(e=="evaluationLimit")throw new D("license-key-evaluation-limit");if(e=="trialLimit")throw new D("license-key-trial-limit");if(e=="developmentLimit")throw new D("license-key-development-limit");if(e=="usageLimit")throw new D("license-key-usage-limit");if(e=="distributionChannel")throw new D("license-key-invalid-distribution-channel")},0),this._showLicenseError=()=>{}}async _sendUsageRequest(e,n){const s=new Headers({"Content-Type":"application/json"}),r=await fetch(new URL(e),{method:"POST",headers:s,body:JSON.stringify(n)});if(!r.ok)throw new Error(`HTTP Response: ${r.status}`);return r.json()}}b(Vc,"defaultConfig"),b(Vc,"builtinPlugins"),b(Vc,"Context",kp),b(Vc,"EditorWatchdog",PM),b(Vc,"ContextWatchdog",dle);function Cle(i){const t=ple(i);function e(n,s){if(hu(t,n)!==void 0)throw new D("editor-usage-data-path-already-set",{path:n});u4(t,n,s)}return i.fire("collectUsageData",{setUsageData:e}),t}function xle(i){if(!_l(i.updateSourceElement))throw new D("attachtoform-missing-elementapi-interface",i);const t=i.sourceElement;if(kle(t)&&t.form){let e;const n=t.form,s=()=>i.updateSourceElement();_l(n.submit)&&(e=n.submit,n.submit=()=>{s(),e.apply(n)}),n.addEventListener("submit",s),i.on("destroy",()=>{n.removeEventListener("submit",s),e&&(n.submit=e)})}}function kle(i){return!!i&&i.tagName.toLowerCase()==="textarea"}function Ly(i){class t extends i{constructor(){super(...arguments);b(this,"sourceElement")}updateSourceElement(s){if(!this.sourceElement)throw new D("editor-missing-sourceelement",this);const r=this.config.get("updateSourceElementOnDestroy"),o=this.sourceElement instanceof HTMLTextAreaElement;if(!r&&!o){w2(this.sourceElement,"");return}const a=typeof s=="string"?s:this.data.get();w2(this.sourceElement,a)}}return t}Ly.updateSourceElement=Ly(Object).prototype.updateSourceElement;class Tp extends Db{constructor(){super(...arguments);b(this,"_actions")}static get pluginName(){return"PendingActions"}static get isOfficialPlugin(){return!0}init(){this.set("hasAny",!1),this._actions=new Hn({idProperty:"_id"}),this._actions.delegate("add","remove").to(this)}add(e){if(typeof e!="string")throw new D("pendingactions-add-invalid-message",this);const n=new(yt());return n.set("message",e),this._actions.add(n),this.hasAny=!0,n}remove(e){this._actions.remove(e),this.hasAny=!!this._actions.length}get first(){return this._actions.get(0)}[Symbol.iterator](){return this._actions[Symbol.iterator]()}}var Tle='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.591 10.177 4.243 4.242a1 1 0 0 1-1.415 1.415l-4.242-4.243-4.243 4.243a1 1 0 0 1-1.414-1.415l4.243-4.242L4.52 5.934A1 1 0 0 1 5.934 4.52l4.243 4.243 4.242-4.243a1 1 0 1 1 1.415 1.414l-4.243 4.243z"/></svg>',Sle='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 16h9a1 1 0 0 1 0 2H2a1 1 0 0 1 0-2z"/><path d="M17 1a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h14zm0 1.5H3a.5.5 0 0 0-.492.41L2.5 3v9a.5.5 0 0 0 .41.492L3 12.5h14a.5.5 0 0 0 .492-.41L17.5 12V3a.5.5 0 0 0-.41-.492L17 2.5z" fill-opacity=".6"/></svg>',Ale='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.972 16.615a.997.997 0 0 1-.744-.292l-4.596-4.596a1 1 0 1 1 1.414-1.414l3.926 3.926 9.937-9.937a1 1 0 0 1 1.414 1.415L7.717 16.323a.997.997 0 0 1-.745.292z"/></svg>',Ple='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.333 2 .19 2.263a5.899 5.899 0 0 1 1.458.604L14.714 3.4 16.6 5.286l-1.467 1.733c.263.452.468.942.605 1.46L18 8.666v2.666l-2.263.19a5.899 5.899 0 0 1-.604 1.458l1.467 1.733-1.886 1.886-1.733-1.467a5.899 5.899 0 0 1-1.46.605L11.334 18H8.667l-.19-2.263a5.899 5.899 0 0 1-1.458-.604L5.286 16.6 3.4 14.714l1.467-1.733a5.899 5.899 0 0 1-.604-1.458L2 11.333V8.667l2.262-.189a5.899 5.899 0 0 1 .605-1.459L3.4 5.286 5.286 3.4l1.733 1.467a5.899 5.899 0 0 1 1.46-.605L8.666 2h2.666zM10 6.267a3.733 3.733 0 1 0 0 7.466 3.733 3.733 0 0 0 0-7.466z"/></svg>',Ile='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10.209 18.717A8.5 8.5 0 1 1 18.686 9.6h-.008l.002.12a3 3 0 0 1-2.866 2.997h-.268l-.046-.002v.002h-4.791a2 2 0 1 0 0 4 1 1 0 1 1-.128 1.992 8.665 8.665 0 0 1-.372.008Zm-3.918-7.01a1.25 1.25 0 1 0-2.415-.648 1.25 1.25 0 0 0 2.415.647ZM5.723 8.18a1.25 1.25 0 1 0 .647-2.414 1.25 1.25 0 0 0-.647 2.414ZM9.76 6.155a1.25 1.25 0 1 0 .647-2.415 1.25 1.25 0 0 0-.647 2.415Zm4.028 1.759a1.25 1.25 0 1 0 .647-2.415 1.25 1.25 0 0 0-.647 2.415Z"/></svg>',Rle='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m8.636 9.531-2.758 3.94a.5.5 0 0 0 .122.696l3.224 2.284h1.314l2.636-3.736L8.636 9.53zm.288 8.451L5.14 15.396a2 2 0 0 1-.491-2.786l6.673-9.53a2 2 0 0 1 2.785-.49l3.742 2.62a2 2 0 0 1 .491 2.785l-7.269 10.053-2.147-.066z"/><path d="M4 18h5.523v-1H4zm-2 0h1v-1H2z"/></svg>',Ole='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11 1a9 9 0 1 1-8.027 13.075l1.128-1.129A7.502 7.502 0 0 0 18.5 10a7.5 7.5 0 1 0-14.962.759l-.745-.746-.76.76A9 9 0 0 1 11 1z"/><path d="M.475 8.17a.75.75 0 0 1 .978.047l.075.082 1.284 1.643 1.681-1.284a.75.75 0 0 1 .978.057l.073.083a.75.75 0 0 1-.057.978l-.083.073-2.27 1.737a.75.75 0 0 1-.973-.052l-.074-.082-1.741-2.23a.75.75 0 0 1 .13-1.052z"/><path d="M11.5 5v4.999l3.196 3.196-1.06 1.06L10.1 10.72l-.1-.113V5z"/></svg>',Nle='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M5.085 6.22 2.943 4.078a.75.75 0 1 1 1.06-1.06l2.592 2.59A11.094 11.094 0 0 1 10 5.068c4.738 0 8.578 3.101 8.578 5.083 0 1.197-1.401 2.803-3.555 3.887l1.714 1.713a.75.75 0 0 1-.09 1.138.488.488 0 0 1-.15.084.75.75 0 0 1-.821-.16L6.17 7.304c-.258.11-.51.233-.757.365l6.239 6.24-.006.005.78.78c-.388.094-.78.166-1.174.215l-1.11-1.11h.011L4.55 8.197a7.2 7.2 0 0 0-.665.514l-.112.098 4.897 4.897-.005.006 1.276 1.276a10.164 10.164 0 0 1-1.477-.117l-.479-.479-.009.009-4.863-4.863-.022.031a2.563 2.563 0 0 0-.124.2c-.043.077-.08.158-.108.241a.534.534 0 0 0-.028.133.29.29 0 0 0 .008.072.927.927 0 0 0 .082.226c.067.133.145.26.234.379l3.242 3.365.025.01.59.623c-3.265-.918-5.59-3.155-5.59-4.668 0-1.194 1.448-2.838 3.663-3.93zm7.07.531a4.632 4.632 0 0 1 1.108 5.992l.345.344.046-.018a9.313 9.313 0 0 0 2-1.112c.256-.187.5-.392.727-.613.137-.134.27-.277.392-.431.072-.091.141-.185.203-.286.057-.093.107-.19.148-.292a.72.72 0 0 0 .036-.12.29.29 0 0 0 .008-.072.492.492 0 0 0-.028-.133.999.999 0 0 0-.036-.096 2.165 2.165 0 0 0-.071-.145 2.917 2.917 0 0 0-.125-.2 3.592 3.592 0 0 0-.263-.335 5.444 5.444 0 0 0-.53-.523 7.955 7.955 0 0 0-1.054-.768 9.766 9.766 0 0 0-1.879-.891c-.337-.118-.68-.219-1.027-.301zm-2.85.21-.069.002a.508.508 0 0 0-.254.097.496.496 0 0 0-.104.679.498.498 0 0 0 .326.199l.045.005c.091.003.181.003.272.012a2.45 2.45 0 0 1 2.017 1.513c.024.061.043.125.069.185a.494.494 0 0 0 .45.287h.008a.496.496 0 0 0 .35-.158.482.482 0 0 0 .13-.335.638.638 0 0 0-.048-.219 3.379 3.379 0 0 0-.36-.723 3.438 3.438 0 0 0-2.791-1.543l-.028-.001h-.013z"/></svg>',Mle='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3.035 1C2.446 1 2 1.54 2 2.098V10.5h1.5v-8h13v8H18V2.098C18 1.539 17.48 1 16.9 1H3.035Zm10.453 2.61a1.885 1.885 0 0 0-1.442.736 1.89 1.89 0 0 0 1.011 2.976 1.903 1.903 0 0 0 2.253-1.114 1.887 1.887 0 0 0-1.822-2.598ZM7.463 8.163a.611.611 0 0 0-.432.154L5.071 10.5h5.119L7.88 8.348a.628.628 0 0 0-.417-.185Zm6.236 1.059a.62.62 0 0 0-.42.164L12.07 10.5h2.969l-.92-1.113a.618.618 0 0 0-.42-.165ZM.91 11.5a.91.91 0 0 0-.91.912v6.877c0 .505.405.91.91.91h18.178a.91.91 0 0 0 .912-.91v-6.877a.908.908 0 0 0-.912-.912H.91ZM3.668 13h1.947l2.135 5.7H5.898l-.28-.946H3.601l-.278.945H1.516L3.668 13Zm4.947 0h1.801v4.3h2.7v1.4h-4.5V13h-.001Zm4.5 0h5.4v1.4h-1.798v4.3h-1.701v-4.3h-1.9V13h-.001Zm-8.517 1.457-.614 2.059h1.262l-.648-2.059Z"/></svg>',Lle='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M12.68 13.74h-.001l4.209 4.208a1 1 0 1 0 1.414-1.414l-4.267-4.268a6 6 0 1 0-1.355 1.474ZM13 9a4 4 0 1 1-8 0 4 4 0 0 1 8 0Z"/></svg>',Vle='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.463 5.187a.888.888 0 1 1 1.254 1.255L9.16 10l3.557 3.557a.888.888 0 1 1-1.254 1.255L7.26 10.61a.888.888 0 0 1 .16-1.382l4.043-4.042z"/></svg>',Dle='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M8.537 14.813a.888.888 0 1 1-1.254-1.255L10.84 10 7.283 6.442a.888.888 0 1 1 1.254-1.255L12.74 9.39a.888.888 0 0 1-.16 1.382l-4.043 4.042z"/></svg>',Ble='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.66 9.118a.693.693 0 0 1 .956.032l3.65 3.411 2.422-2.238a.695.695 0 0 1 .945 0L17.5 13.6V2.5h-15v11.1l4.16-4.482ZM17.8 1c.652 0 1.2.47 1.2 1.1v14.362c0 .64-.532 1.038-1.184 1.038H2.184C1.532 17.5 1 17.103 1 16.462V2.1C1 1.47 1.537 1 2.2 1h15.6Zm-5.655 6a2.128 2.128 0 0 1 .157-2.364A2.133 2.133 0 1 1 12.145 7Z"/></svg>',Fle='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M1.201 1C.538 1 0 1.47 0 2.1v14.363c0 .64.534 1.037 1.186 1.037h9.494a2.97 2.97 0 0 1-.414-.287 2.998 2.998 0 0 1-1.055-2.03 3.003 3.003 0 0 1 .693-2.185l.383-.455-.02.018-3.65-3.41a.695.695 0 0 0-.957-.034L1.5 13.6V2.5h15v5.535a2.97 2.97 0 0 1 1.412.932l.088.105V2.1c0-.63-.547-1.1-1.2-1.1H1.202Zm11.713 2.803a2.146 2.146 0 0 0-2.049 1.992 2.14 2.14 0 0 0 1.28 2.096 2.13 2.13 0 0 0 2.644-3.11 2.134 2.134 0 0 0-1.875-.978Z"/><path d="M15.522 19.1a.79.79 0 0 0 .79-.79v-5.373l2.059 2.455a.79.79 0 1 0 1.211-1.015l-3.352-3.995a.79.79 0 0 0-.995-.179.784.784 0 0 0-.299.221l-3.35 3.99a.79.79 0 1 0 1.21 1.017l1.936-2.306v5.185c0 .436.353.79.79.79Z"/><path d="M15.522 19.1a.79.79 0 0 0 .79-.79v-5.373l2.059 2.455a.79.79 0 1 0 1.211-1.015l-3.352-3.995a.79.79 0 0 0-.995-.179.784.784 0 0 0-.299.221l-3.35 3.99a.79.79 0 1 0 1.21 1.017l1.936-2.306v5.185c0 .436.353.79.79.79Z"/></svg>',$le='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M1.201 1c-.662 0-1.2.47-1.2 1.1v14.248c0 .64.533 1.152 1.185 1.152h6.623v-7.236L6.617 9.15a.694.694 0 0 0-.957-.033L1.602 13.55V2.553l14.798.003V9.7H18V2.1c0-.63-.547-1.1-1.2-1.1H1.202Zm11.723 2.805a2.094 2.094 0 0 0-1.621.832 2.127 2.127 0 0 0 1.136 3.357 2.13 2.13 0 0 0 2.611-1.506 2.133 2.133 0 0 0-.76-2.244 2.13 2.13 0 0 0-1.366-.44Z"/><path clip-rule="evenodd" d="M19.898 12.369v6.187a.844.844 0 0 1-.844.844h-8.719a.844.844 0 0 1-.843-.844v-7.312a.844.844 0 0 1 .843-.844h2.531a.843.843 0 0 1 .597.248l.838.852h4.75c.223 0 .441.114.6.272a.844.844 0 0 1 .247.597Zm-1.52.654-4.377.02-1.1-1.143H11v6h7.4l-.023-4.877Z"/></svg>',zle='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M1.201 1C.538 1 0 1.47 0 2.1v14.363c0 .64.534 1.037 1.186 1.037h7.029a5.401 5.401 0 0 1 .615-4.338l.762-1.232-2.975-2.78a.696.696 0 0 0-.957-.033L1.5 13.6V2.5h15v6.023c.449.131.887.32 1.307.573l.058.033c.046.028.09.057.135.086V2.1c0-.63-.547-1.1-1.2-1.1H1.202Zm11.713 2.803a2.15 2.15 0 0 0-1.611.834 2.118 2.118 0 0 0-.438 1.158 2.14 2.14 0 0 0 1.277 2.096 2.132 2.132 0 0 0 2.645-3.11 2.13 2.13 0 0 0-1.873-.978Z"/><path d="M16.63 10.294a3.003 3.003 0 0 0-4.142.887l-.117.177a.647.647 0 0 0-.096.492.664.664 0 0 0 .278.418.7.7 0 0 0 .944-.234 1.741 1.741 0 0 1 2.478-.463 1.869 1.869 0 0 1 .476 2.55.637.637 0 0 0-.071.5.646.646 0 0 0 .309.396.627.627 0 0 0 .869-.19l.027-.041a3.226 3.226 0 0 0-.956-4.492Zm-6.061 3.78-.044.066a3.228 3.228 0 0 0 .82 4.403 3.005 3.005 0 0 0 4.275-.798l.13-.197a.626.626 0 0 0 .092-.475.638.638 0 0 0-.268-.402.713.713 0 0 0-.99.26l-.018.029a1.741 1.741 0 0 1-2.477.461 1.87 1.87 0 0 1-.475-2.55l.029-.047a.647.647 0 0 0 .086-.485.66.66 0 0 0-.275-.408l-.04-.027a.609.609 0 0 0-.845.17Z"/><path d="M15.312 13.925c.24-.36.154-.838-.19-1.067-.346-.23-.82-.124-1.059.236l-1.268 1.907c-.239.36-.153.838.192 1.067.345.23.818.123 1.057-.236l1.268-1.907Z"/></svg>',jle='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m9.239 13.938-2.88-1.663a.75.75 0 0 1 .75-1.3L9 12.067V4.75a.75.75 0 1 1 1.5 0v7.318l1.89-1.093a.75.75 0 0 1 .75 1.3l-2.879 1.663a.752.752 0 0 1-.511.187.752.752 0 0 1-.511-.187zM4.25 17a.75.75 0 1 1 0-1.5h10.5a.75.75 0 0 1 0 1.5H4.25z"/></svg>',Hle='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M9.75 11.875a.752.752 0 0 1 .508.184l2.883 1.666a.75.75 0 0 1-.659 1.344l-.091-.044-1.892-1.093.001 4.318a.75.75 0 1 1-1.5 0v-4.317l-1.89 1.092a.75.75 0 0 1-.75-1.3l2.879-1.663a.752.752 0 0 1 .51-.187zM15.25 9a.75.75 0 1 1 0 1.5H4.75a.75.75 0 1 1 0-1.5h10.5zM9.75.375a.75.75 0 0 1 .75.75v4.318l1.89-1.093.092-.045a.75.75 0 0 1 .659 1.344l-2.883 1.667a.752.752 0 0 1-.508.184.752.752 0 0 1-.511-.187L6.359 5.65a.75.75 0 0 1 .75-1.299L9 5.442V1.125a.75.75 0 0 1 .75-.75z"/></svg>',Ule='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m10.261 7.062 2.88 1.663a.75.75 0 0 1-.75 1.3L10.5 8.933v7.317a.75.75 0 1 1-1.5 0V8.932l-1.89 1.093a.75.75 0 0 1-.75-1.3l2.879-1.663a.752.752 0 0 1 .511-.187.752.752 0 0 1 .511.187zM15.25 4a.75.75 0 1 1 0 1.5H4.75a.75.75 0 0 1 0-1.5h10.5z"/></svg>',Wle='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 4c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75z"/></svg>',qle='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm2.286 4c0 .414.336.75.75.75h9.928a.75.75 0 1 0 0-1.5H5.036a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h9.928a.75.75 0 1 0 0-1.5H5.036a.75.75 0 0 0-.75.75z"/></svg>',Gle='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M18 3.75a.75.75 0 0 1-.75.75H2.75a.75.75 0 1 1 0-1.5h14.5a.75.75 0 0 1 .75.75zm0 8a.75.75 0 0 1-.75.75H2.75a.75.75 0 1 1 0-1.5h14.5a.75.75 0 0 1 .75.75zm0 4a.75.75 0 0 1-.75.75H7.321a.75.75 0 1 1 0-1.5h9.929a.75.75 0 0 1 .75.75zm0-8a.75.75 0 0 1-.75.75H7.321a.75.75 0 1 1 0-1.5h9.929a.75.75 0 0 1 .75.75z"/></svg>',Kle='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 4c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75z"/></svg>',Yle='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M12.003 7v5.5a1 1 0 0 1-1 1H2.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H3.5V12h6.997V7.5z"/></svg>',Zle='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M15.003 7v5.5a1 1 0 0 1-1 1H5.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H6.5V12h6.997V7.5z"/></svg>',Xle='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M18.003 7v5.5a1 1 0 0 1-1 1H8.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H9.5V12h6.997V7.5z"/></svg>',Jle='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M18 7v5.5a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1zm-1.505.5H3.504V12h12.991V7.5z"/></svg>',Qle='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm11.5 9H18v1.5h-4.5zM2 15h16v1.5H2z"/><path d="M12.003 7v5.5a1 1 0 0 1-1 1H2.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H3.5V12h6.997V7.5z"/></svg>',ece='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm11.5 9H18v1.5h-4.5zm0-3H18v1.5h-4.5zm0-3H18v1.5h-4.5zM2 15h16v1.5H2z"/><path d="M12.003 7v5.5a1 1 0 0 1-1 1H2.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H3.5V12h6.997V7.5z"/></svg>',tce='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2zm0-9h5v1.5H2zm0 3h5v1.5H2zm0 3h5v1.5H2z"/><path d="M18.003 7v5.5a1 1 0 0 1-1 1H8.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H9.5V12h6.997V7.5z"/></svg>',nce='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.5 17v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zM1 15.5v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm0-2v1h-1v-1h1zm-19 0v1H0v-1h1zM14.5 2v1h-1V2h1zm2 0v1h-1V2h1zm2 0v1h-1V2h1zm-8 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm8 0v1h-1V2h1zm-10 0v1h-1V2h1z"/><path d="M18.095 2H1.905C.853 2 0 2.895 0 4v12c0 1.105.853 2 1.905 2h16.19C19.147 18 20 17.105 20 16V4c0-1.105-.853-2-1.905-2zm0 1.5c.263 0 .476.224.476.5v12c0 .276-.213.5-.476.5H1.905a.489.489 0 0 1-.476-.5V4c0-.276.213-.5.476-.5h16.19z"/></svg>',ice='<svg xmlns="http://www.w3.org/2000/svg" xmlns:v="https://vecta.io/nano" viewBox="0 0 20 20"><path d="M.95 1.43a.95.95 0 0 0-.95.95v3.1a.95.95 0 0 0 .95.95h.75v6.3H.95a.95.95 0 0 0-.95.95v3.1a.95.95 0 0 0 .95.95h3.1a.95.95 0 0 0 .95-.95v-.65h1.932l1.539-1.5H5v-.95a.95.95 0 0 0-.95-.95H3.2v-6.3h.85A.95.95 0 0 0 5 5.48v-.55h10v.55a.95.95 0 0 0 .95.95h3.1a.95.95 0 0 0 .95-.95v-3.1a.95.95 0 0 0-.95-.95h-3.1a.95.95 0 0 0-.95.95v1.05H5V2.38a.95.95 0 0 0-.95-.95H.95zm.55 3.5v-2h2v2h-2zm0 9.3v2h2v-2h-2zm15-11.3v2h2v-2h-2z"/><path d="M8.139 20.004v-2.388l7.045-7.048 2.391 2.391-7.046 7.046h-2.39zm11.421-9.101a.64.64 0 0 1-.138.206l-1.165 1.168-2.391-2.391 1.167-1.163a.63.63 0 0 1 .206-.138.635.635 0 0 1 .243-.049.63.63 0 0 1 .449.187l1.491 1.488c.059.059.108.129.138.206s.049.16.049.243a.6.6 0 0 1-.049.243z"/></svg>',sce='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 16.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1ZM1 15v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 13v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 11v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 9v1H0V9h1Zm19 0v1h-1V9h1ZM1 7v1H0V7h1Zm19 0v1h-1V7h1ZM1 5v1H0V5h1Zm19 0v1h-1V5h1Zm0-2v1h-1V3h1ZM1 3v1H0V3h1Zm13.5-1.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm-8 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm8 0v1h-1v-1h1Zm-10 0v1h-1v-1h1Z"/><path d="M13 5.5H2a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h11a2 2 0 0 0 2-2v-8a2 2 0 0 0-2-2ZM13 7a.5.5 0 0 1 .5.5v8a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5v-8A.5.5 0 0 1 2 7h11Z"/></svg>',rce='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 16.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1ZM1 15v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 13v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 11v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 9v1H0V9h1Zm19 0v1h-1V9h1ZM1 7v1H0V7h1Zm19 0v1h-1V7h1ZM1 5v1H0V5h1Zm19 0v1h-1V5h1Zm0-2v1h-1V3h1ZM1 3v1H0V3h1Zm13.5-1.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm-8 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm8 0v1h-1v-1h1Zm-10 0v1h-1v-1h1Z"/><path d="M7 9.5H2a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2h5a2 2 0 0 0 2-2v-4a2 2 0 0 0-2-2ZM7 11a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5v-4A.5.5 0 0 1 2 11h5Z"/></svg>',oce='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 16.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1ZM1 15v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 13v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 11v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 9v1H0V9h1Zm19 0v1h-1V9h1ZM1 7v1H0V7h1Zm19 0v1h-1V7h1ZM1 5v1H0V5h1Zm19 0v1h-1V5h1Zm0-2v1h-1V3h1ZM1 3v1H0V3h1Zm13.5-1.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm-8 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm8 0v1h-1v-1h1Zm-10 0v1h-1v-1h1Z"/><path d="M10 7.5H2a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2v-6a2 2 0 0 0-2-2ZM10 9a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5v-6A.5.5 0 0 1 2 9h8Z"/></svg>',ace='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m7.3 17.37-.061.088a1.518 1.518 0 0 1-.934.535l-4.178.663-.806-4.153a1.495 1.495 0 0 1 .187-1.058l.056-.086L8.77 2.639c.958-1.351 2.803-1.076 4.296-.03 1.497 1.047 2.387 2.693 1.433 4.055L7.3 17.37zM9.14 4.728l-5.545 8.346 3.277 2.294 5.544-8.346L9.14 4.728zM6.07 16.512l-3.276-2.295.53 2.73 2.746-.435zM9.994 3.506 13.271 5.8c.316-.452-.16-1.333-1.065-1.966-.905-.634-1.895-.78-2.212-.328zM8 18.5 9.375 17H19v1.5H8z"/></svg>',lce='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.999 2H15a1 1 0 0 1 0 2h-1.004v13a1 1 0 1 1-2 0V4H8.999v13a1 1 0 1 1-2 0v-7A4 4 0 0 1 3 6a4 4 0 0 1 3.999-4z"/></svg>',cce='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 10.423a6.5 6.5 0 0 1 6.056-6.408l.038.67C6.448 5.423 5.354 7.663 5.22 10H9c.552 0 .5.432.5.986v4.511c0 .554-.448.503-1 .503h-5c-.552 0-.5-.449-.5-1.003v-4.574zm8 0a6.5 6.5 0 0 1 6.056-6.408l.038.67c-2.646.739-3.74 2.979-3.873 5.315H17c.552 0 .5.432.5.986v4.511c0 .554-.448.503-1 .503h-5c-.552 0-.5-.449-.5-1.003v-4.574z"/></svg>',uce='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><circle cx="9.5" cy="4.5" r="1.5"/><circle cx="9.5" cy="10.5" r="1.5"/><circle cx="9.5" cy="16.5" r="1.5"/></svg>',dce='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M5 3.25a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M12 3.25a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M5 10a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M12 10a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M5 16.75a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M12 16.75a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/></svg>',hce='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10.187 17H5.773c-.637 0-1.092-.138-1.364-.415-.273-.277-.409-.718-.409-1.323V4.738c0-.617.14-1.062.419-1.332.279-.27.73-.406 1.354-.406h4.68c.69 0 1.288.041 1.793.124.506.083.96.242 1.36.478.341.197.644.447.906.75a3.262 3.262 0 0 1 .808 2.162c0 1.401-.722 2.426-2.167 3.075C15.05 10.175 16 11.315 16 13.01a3.756 3.756 0 0 1-2.296 3.504 6.1 6.1 0 0 1-1.517.377c-.571.073-1.238.11-2 .11zm-.217-6.217H7v4.087h3.069c1.977 0 2.965-.69 2.965-2.072 0-.707-.256-1.22-.768-1.537-.512-.319-1.277-.478-2.296-.478zM7 5.13v3.619h2.606c.729 0 1.292-.067 1.69-.2a1.6 1.6 0 0 0 .91-.765c.165-.267.247-.566.247-.897 0-.707-.26-1.176-.778-1.409-.519-.232-1.31-.348-2.375-.348H7z"/></svg>',fce='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10.5 5.5H7v5h3.5a2.5 2.5 0 1 0 0-5zM5 3h6.5v.025a5 5 0 0 1 0 9.95V13H7v4a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1z"/></svg>',mce='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10 2a1 1 0 0 0-1 1v6H3a1 1 0 1 0 0 2h6v6a1 1 0 1 0 2 0v-6h6a1 1 0 1 0 0-2h-6V3a1 1 0 0 0-1-1Z"/></svg>',gce='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M9.816 11.5 7.038 4.785 4.261 11.5h5.555Zm.62 1.5H3.641l-1.666 4.028H.312l5.789-14h1.875l5.789 14h-1.663L10.436 13Z"/><path d="m12.09 17-.534-1.292.848-1.971.545 1.319L12.113 17h-.023Zm1.142-5.187.545 1.319L15.5 9.13l1.858 4.316h-3.45l.398.965h3.467L18.887 17H20l-3.873-9h-1.254l-1.641 3.813Z"/></svg>',pce='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M19 4.5 14 0H3v12.673l.868-1.041c.185-.222.4-.402.632-.54V1.5h8v5h5v7.626a2.24 2.24 0 0 1 1.5.822V4.5ZM14 5V2l3.3 3H14Zm-3.692 12.5c.062.105.133.206.213.303L11.52 19H8v-.876a2.243 2.243 0 0 0 1.82-.624h.488Zm7.518-.657a.75.75 0 0 0-1.152-.96L15.5 17.29V12H14v5.29l-1.174-1.408a.75.75 0 0 0-1.152.96l2.346 2.816a.95.95 0 0 0 1.46 0l2.346-2.815Zm-15.056-.38a.75.75 0 0 1-.096-1.056l2.346-2.815a.95.95 0 0 1 1.46 0l2.346 2.815a.75.75 0 1 1-1.152.96L6.5 14.96V20H5v-5.04l-1.174 1.408a.75.75 0 0 1-1.056.096Z"/></svg>',bce='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m14.958 9.367-2.189 1.837a.75.75 0 0 0 .965 1.149l3.788-3.18a.747.747 0 0 0 .21-.284.75.75 0 0 0-.17-.945L13.77 4.762a.75.75 0 1 0-.964 1.15l2.331 1.955H6.22A.75.75 0 0 0 6 7.9a4 4 0 1 0 1.477 7.718l-.344-1.489A2.5 2.5 0 1 1 6.039 9.4l-.008-.032h8.927z"/></svg>',wce='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m5.042 9.367 2.189 1.837a.75.75 0 0 1-.965 1.149l-3.788-3.18a.747.747 0 0 1-.21-.284.75.75 0 0 1 .17-.945L6.23 4.762a.75.75 0 1 1 .964 1.15L4.863 7.866h8.917A.75.75 0 0 1 14 7.9a4 4 0 1 1-1.477 7.718l.344-1.489a2.5 2.5 0 1 0 1.094-4.73l.008-.032H5.042z"/></svg>',vce='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M7 5.75c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zm-6 0C1 4.784 1.777 4 2.75 4c.966 0 1.75.777 1.75 1.75 0 .966-.777 1.75-1.75 1.75C1.784 7.5 1 6.723 1 5.75zm6 9c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zm-6 0c0-.966.777-1.75 1.75-1.75.966 0 1.75.777 1.75 1.75 0 .966-.777 1.75-1.75 1.75-.966 0-1.75-.777-1.75-1.75z"/></svg>',yce='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M7 5.75c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zM3.5 3v5H2V3.7H1v-1h2.5V3zM.343 17.857l2.59-3.257H2.92a.6.6 0 1 0-1.04 0H.302a2 2 0 1 1 3.995 0h-.001c-.048.405-.16.734-.333.988-.175.254-.59.692-1.244 1.312H4.3v1h-4l.043-.043zM7 14.75a.75.75 0 0 1 .75-.75h9.5a.75.75 0 1 1 0 1.5h-9.5a.75.75 0 0 1-.75-.75z"/></svg>',_ce='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m2.315 14.705 2.224-2.24a.689.689 0 0 1 .963 0 .664.664 0 0 1 0 .949L2.865 16.07a.682.682 0 0 1-.112.089.647.647 0 0 1-.852-.051L.688 14.886a.635.635 0 0 1 0-.903.647.647 0 0 1 .91 0l.717.722zm5.185.045a.75.75 0 0 1 .75-.75h9.5a.75.75 0 1 1 0 1.5h-9.5a.75.75 0 0 1-.75-.75zM2.329 5.745l2.21-2.226a.689.689 0 0 1 .963 0 .664.664 0 0 1 0 .95L2.865 7.125a.685.685 0 0 1-.496.196.644.644 0 0 1-.468-.187L.688 5.912a.635.635 0 0 1 0-.903.647.647 0 0 1 .91 0l.73.736zM7.5 5.75A.75.75 0 0 1 8.25 5h9.5a.75.75 0 1 1 0 1.5h-9.5a.75.75 0 0 1-.75-.75z"/></svg>',Ece='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M12.87 12.61a.75.75 0 0 1-.089.976l-.085.07-3.154 2.254 3.412 2.414a.75.75 0 0 1 .237.95l-.057.095a.75.75 0 0 1-.95.237l-.096-.058-4.272-3.022-.003-1.223 4.01-2.867a.75.75 0 0 1 1.047.174zm2.795-.231.095.057 4.011 2.867-.003 1.223-4.272 3.022-.095.058a.75.75 0 0 1-.88-.151l-.07-.086-.058-.095a.75.75 0 0 1 .15-.88l.087-.07 3.412-2.414-3.154-2.253-.085-.071a.75.75 0 0 1 .862-1.207zM16 0a2 2 0 0 1 2 2v9.354l-.663-.492-.837-.001V2a.5.5 0 0 0-.5-.5H2a.5.5 0 0 0-.5.5v15a.5.5 0 0 0 .5.5h3.118L7.156 19H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h14zM5.009 15l.003 1H3v-1h2.009zm2.188-2-1.471 1H5v-1h2.197zM10 11v.095L8.668 12H7v-1h3zm4-2v1H7V9h7zm0-2v1H7V7h7zm-4-2v1H5V5h5zM6 3v1H3V3h3z"/></svg>',Cce='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.627 16.5zm5.873-.196zm0-7.001V8h-13v8.5h4.341c.191.54.457 1.044.785 1.5H2a1.5 1.5 0 0 1-1.5-1.5v-13A1.5 1.5 0 0 1 2 2h4.5a1.5 1.5 0 0 1 1.06.44L9.122 4H16a1.5 1.5 0 0 1 1.5 1.5v1A1.5 1.5 0 0 1 19 8v2.531a6.027 6.027 0 0 0-1.5-1.228zM16 6.5v-1H8.5l-2-2H2v13h1V8a1.5 1.5 0 0 1 1.5-1.5H16z"/><path d="M14.5 19.5a5 5 0 1 1 0-10 5 5 0 0 1 0 10zM15 14v-2h-1v2h-2v1h2v2h1v-2h2v-1h-2z"/></svg>',xce='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M19 9v10h-2v-8h-2V9h4zM4 8.5h5V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v11.5a1 1 0 0 1-1 1H10a1 1 0 0 1-1-1V11H4v4.5a1 1 0 0 1-1 1h-.5a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1H3a1 1 0 0 1 1 1v4.5z"/></svg>',kce='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 8.5h5V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v11.5a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1V11H3v4.5a1 1 0 0 1-1 1h-.5a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1H2a1 1 0 0 1 1 1v4.5zm16.076 8.343V18.5h-6.252c.067-.626.27-1.22.61-1.78.338-.561 1.006-1.305 2.005-2.232.804-.749 1.297-1.257 1.479-1.523.245-.368.368-.732.368-1.092 0-.398-.107-.703-.32-.917-.214-.214-.51-.32-.886-.32-.372 0-.669.111-.889.336-.22.224-.347.596-.38 1.117l-1.778-.178c.106-.982.438-1.686.997-2.114.558-.427 1.257-.64 2.095-.64.918 0 1.64.247 2.164.742.525.495.787 1.11.787 1.847 0 .419-.075.818-.225 1.197-.15.378-.388.775-.714 1.19-.216.275-.605.67-1.168 1.187-.563.516-.92.859-1.07 1.028a3.11 3.11 0 0 0-.365.495h3.542z"/></svg>',Tce='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 8.5h5V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v11.5a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1V11H3v4.5a1 1 0 0 1-1 1h-.5a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1H2a1 1 0 0 1 1 1v4.5zm9.989 7.53 1.726-.209c.055.44.203.777.445 1.01.24.232.533.349.876.349.368 0 .678-.14.93-.42.251-.279.377-.655.377-1.13 0-.448-.12-.803-.362-1.066a1.153 1.153 0 0 0-.882-.393c-.228 0-.501.044-.819.133l.197-1.453c.482.012.85-.092 1.105-.315.253-.222.38-.517.38-.885 0-.313-.093-.563-.279-.75-.186-.185-.434-.278-.743-.278a1.07 1.07 0 0 0-.78.317c-.216.212-.347.52-.394.927l-1.644-.28c.114-.562.287-1.012.517-1.348.231-.337.553-.601.965-.794a3.24 3.24 0 0 1 1.387-.289c.876 0 1.579.28 2.108.838.436.457.653.973.653 1.549 0 .817-.446 1.468-1.339 1.955.533.114.96.37 1.28.768.319.398.478.878.478 1.441 0 .817-.298 1.513-.895 2.088-.596.576-1.339.864-2.228.864-.842 0-1.54-.243-2.094-.727-.555-.485-.876-1.118-.965-1.901z"/></svg>',Sce='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3.5 8.5h5V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v11.5a1 1 0 0 1-1 1h-.5a1 1 0 0 1-1-1V11h-5v4.5a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v4.5zm13.55 10v-1.873h-3.81v-1.561l4.037-5.91h1.498v5.904h1.156v1.567h-1.156V18.5H17.05zm0-3.44v-3.18l-2.14 3.18h2.14z"/></svg>',Ace='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3.5 8.5h5V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v11.5a1 1 0 0 1-1 1h-.5a1 1 0 0 1-1-1V11h-5v4.5a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v4.5zm9.578 7.607 1.777-.184c.05.402.201.72.45.955a1.223 1.223 0 0 0 1.81-.101c.258-.303.387-.759.387-1.368 0-.572-.128-1-.384-1.286-.256-.285-.59-.428-1-.428-.512 0-.971.226-1.377.679l-1.448-.21.915-4.843h4.716v1.67H15.56l-.28 1.58a2.697 2.697 0 0 1 1.219-.298 2.68 2.68 0 0 1 2.012.863c.55.576.825 1.323.825 2.241a3.36 3.36 0 0 1-.666 2.05c-.605.821-1.445 1.232-2.52 1.232-.86 0-1.56-.23-2.101-.692-.542-.461-.866-1.081-.971-1.86z"/></svg>',Pce='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3.5 8.5h5V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v11.5a1 1 0 0 1-1 1h-.5a1 1 0 0 1-1-1V11h-5v4.5a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v4.5zm15.595 2.973-1.726.19c-.043-.355-.153-.617-.33-.787-.178-.169-.409-.253-.692-.253-.377 0-.695.169-.956.507-.26.339-.424 1.043-.492 2.114.445-.525.997-.787 1.657-.787.745 0 1.383.284 1.914.85.531.568.797 1.3.797 2.197 0 .952-.28 1.716-.838 2.291-.559.576-1.276.864-2.152.864-.94 0-1.712-.365-2.317-1.095-.605-.73-.908-1.927-.908-3.59 0-1.705.316-2.935.946-3.688.63-.753 1.45-1.13 2.457-1.13.706 0 1.291.198 1.755.594.463.395.758.97.885 1.723zm-4.043 3.891c0 .58.133 1.028.4 1.343.266.315.57.473.914.473.33 0 .605-.13.825-.388.22-.258.33-.68.33-1.27 0-.604-.118-1.047-.355-1.329a1.115 1.115 0 0 0-.89-.422c-.342 0-.632.134-.869.403s-.355.666-.355 1.19z"/></svg>',Ice='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 9h16v2H2z"/></svg>',Rce='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M17 0a2 2 0 0 1 2 2v7a1 1 0 0 1 1 1v5a1 1 0 0 1-.883.993l-.118.006L19 17a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2l-.001-1.001-.116-.006A1 1 0 0 1 0 15v-5a1 1 0 0 1 .999-1L1 2a2 2 0 0 1 2-2h14zm.499 15.999h-15L2.5 17a.5.5 0 0 0 .5.5h14a.5.5 0 0 0 .5-.5l-.001-1.001zm-3.478-6.013-.014.014H14v.007l-1.525 1.525-1.46-1.46-.015.013V10h-1v5h1v-3.53l1.428 1.43.048.043.131-.129L14 11.421V15h1v-5h-.965l-.014-.014zM2 10H1v5h1v-2h2v2h1v-5H4v2H2v-2zm7 0H6v1h1v4h1v-4h1v-1zm8 0h-1v5h3v-1h-2v-4zm0-8.5H3a.5.5 0 0 0-.5.5l-.001 6.999h15L17.5 2a.5.5 0 0 0-.5-.5zM10 7v1H4V7h6zm3-2v1H4V5h9zm-3-2v1H4V3h6z"/></svg>',Oce='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm5 6c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zM2.75 16.5h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 1 0 0 1.5zM1.632 6.95 5.02 9.358a.4.4 0 0 1-.013.661l-3.39 2.207A.4.4 0 0 1 1 11.892V7.275a.4.4 0 0 1 .632-.326z"/></svg>',Nce='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm5 6c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zM2.75 16.5h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 1 0 0 1.5zm1.618-9.55L.98 9.358a.4.4 0 0 0 .013.661l3.39 2.207A.4.4 0 0 0 5 11.892V7.275a.4.4 0 0 0-.632-.326z"/></svg>',Mce='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 5.5v3h4v-3H3Zm0 4v3h4v-3H3Zm0 4v3h4v-3H3Zm5 3h4v-3H8v3Zm5 0h4v-3h-4v3Zm4-4v-3h-4v3h4Zm0-4v-3h-4v3h4Zm1.5 8A1.5 1.5 0 0 1 17 18H3a1.5 1.5 0 0 1-1.5-1.5V3c.222-.863 1.068-1.5 2-1.5h13c.932 0 1.778.637 2 1.5v13.5Zm-6.5-4v-3H8v3h4Zm0-4v-3H8v3h4Z"/></svg>',Lce=`<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m12.5 0 5 4.5v15.003h-16V0h11zM3 1.5v3.25l-1.497 1-.003 8 1.5 1v3.254L7.685 18l-.001 1.504H17.5V8.002L16 9.428l-.004-4.22-4.222-3.692L3 1.5z"/><path d="M4.06 6.64a.75.75 0 0 1 .958 1.15l-.085.07L2.29 9.75l2.646 1.89c.302.216.4.62.232.951l-.058.095a.75.75 0 0 1-.951.232l-.095-.058-3.5-2.5V9.14l3.496-2.5zm4.194 6.22a.75.75 0 0 1-.958-1.149l.085-.07 2.643-1.89-2.646-1.89a.75.75 0 0 1-.232-.952l.058-.095a.75.75 0 0 1 .95-.232l.096.058 3.5 2.5v1.22l-3.496 2.5zm7.644-.836 2.122 2.122-5.825 5.809-2.125-.005.003-2.116zm2.539-1.847 1.414 1.414a.5.5 0 0 1 0 .707l-1.06 1.06-2.122-2.12 1.061-1.061a.5.5 0 0 1 .707 0z"/></svg>
`,Vce='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M5.2 7h9.2c.6 0 1 .4 1 1v9.9c0 .5-.4 1-1 1H5.2a1 1 0 0 1-1-1V8c0-.6.4-1 1-1Zm1 1.5c-.3 0-.5.2-.5.5v8c0 .3.2.5.5.5h.5c.2 0 .5-.2.5-.5V9c0-.3-.3-.5-.5-.5h-.5Zm3.2 0c-.2 0-.5.2-.5.5v8c0 .3.3.5.5.5h.5c.3 0 .5-.2.5-.5V9c0-.3-.2-.5-.5-.5h-.5Zm3.5 0c-.2 0-.5.2-.5.5v8c0 .3.3.5.5.5h.5c.3 0 .5-.2.5-.5V9c0-.3-.2-.5-.5-.5h-.5Zm-1.4-7.1H8.3L6.5 3.6H3.8c-.5 0-.7.3-.7.8s.2.7.7.7h12c.6 0 .9-.2.9-.7 0-.5-.3-.8-1-.8h-2.4l-1.8-2.2Z"/></svg>',Dce='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path clip-rule="evenodd" d="M5.68 3.417a.238.238 0 0 0-.24.236v12.66l3.793-3.102a1.215 1.215 0 0 1 1.534 0l3.793 3.103V3.654a.238.238 0 0 0-.24-.237H5.68ZM4 3.653C4 2.74 4.752 2 5.68 2h8.64c.928 0 1.68.74 1.68 1.653v13.164c0 1-1.185 1.547-1.967.908L10 14.426l-4.033 3.299c-.782.64-1.967.092-1.967-.908V3.653Z"/></svg>',Bce='<svg viewBox="0 0 14 16" xmlns="http://www.w3.org/2000/svg"><path class="ck-icon__fill" d="M2 14.436V2a1 1 0 0 1 1-1h8a1 1 0 0 1 1 1v12.436a.5.5 0 0 1-.819.385l-3.862-3.2a.5.5 0 0 0-.638 0l-3.862 3.2A.5.5 0 0 1 2 14.436Z"/></svg>',Fce=`<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path clip-rule="evenodd" d="M8.5 8.25a1.25 1.25 0 1 1-2.499.001A1.25 1.25 0 0 1 8.5 8.25Z"/><path clip-rule="evenodd" d="M14 8.25a1.25 1.25 0 1 1-2.499.001A1.25 1.25 0 0 1 14 8.25Z"/><path clip-rule="evenodd" d="M7.127 12.088a.75.75 0 1 0-1.254.824C6.88 14.444 8.423 15.25 10 15.25c1.578 0 3.12-.805 4.127-2.338a.75.75 0 0 0-1.254-.824C12.13 13.221 11.048 13.75 10 13.75c-1.047 0-2.13-.529-2.873-1.662Z"/><path d="M10 19a9 9 0 1 0 0-18 9 9 0 0 0 0 18Zm0-1.5a7.5 7.5 0 1 1 0-15 7.5 7.5 0 0 1 0 15Z"/></svg>
`;const ve={bold:hce,cancel:Tle,caption:Sle,check:Ale,cog:Ple,colorPalette:Ile,eraser:Rle,history:Ole,image:Ble,imageUpload:Fle,imageAssetManager:$le,imageUrl:zle,lowVision:Nle,textAlternative:Mle,loupe:Lle,previousArrow:Vle,nextArrow:Dle,importExport:pce,paragraph:fce,plus:mce,text:gce,alignBottom:jle,alignMiddle:Hle,alignTop:Ule,alignLeft:Wle,alignCenter:qle,alignRight:Gle,alignJustify:Kle,objectLeft:ece,objectCenter:Zle,objectRight:tce,objectFullWidth:Jle,objectInline:Qle,objectBlockLeft:Yle,objectBlockRight:Xle,objectSizeCustom:ice,objectSizeFull:nce,objectSizeLarge:sce,objectSizeSmall:rce,objectSizeMedium:oce,pencil:ace,pilcrow:lce,quote:cce,threeVerticalDots:uce,dragIndicator:dce,redo:bce,undo:wce,bulletedList:vce,numberedList:yce,todoList:_ce,codeBlock:Ece,browseFiles:Cce,heading1:xce,heading2:kce,heading3:Tce,heading4:Sce,heading5:Ace,heading6:Pce,horizontalLine:Ice,html:Rce,indent:Oce,outdent:Nce,table:Mce,source:Lce,remove:Vce,bookmark:Dce,bookmarkInline:Bce,emoji:Fce};/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class $ce extends yt(){constructor(){super();b(this,"total");b(this,"_reader");b(this,"_data");const e=new window.FileReader;this._reader=e,this._data=void 0,this.set("loaded",0),e.onprogress=n=>{this.loaded=n.loaded}}get error(){return this._reader.error}get data(){return this._data}read(e){const n=this._reader;return this.total=e.size,new Promise((s,r)=>{n.onload=()=>{const o=n.result;this._data=o,s(o)},n.onerror=()=>{r("error")},n.onabort=()=>{r("aborted")},this._reader.readAsDataURL(e)})}abort(){this._reader.abort()}}class Gc extends J{constructor(){super(...arguments);b(this,"loaders",new Hn);b(this,"_loadersMap",new Map);b(this,"_pendingAction",null)}static get pluginName(){return"FileRepository"}static get isOfficialPlugin(){return!0}static get requires(){return[Tp]}init(){this.loaders.on("change",()=>this._updatePendingAction()),this.set("uploaded",0),this.set("uploadTotal",null),this.bind("uploadedPercent").to(this,"uploaded",this,"uploadTotal",(e,n)=>n?e/n*100:0)}getLoader(e){return this._loadersMap.get(e)||null}createLoader(e){if(!this.createUploadAdapter)return dt("filerepository-no-upload-adapter"),null;const n=new pP(Promise.resolve(e),this.createUploadAdapter);return this.loaders.add(n),this._loadersMap.set(e,n),e instanceof Promise&&n.file.then(s=>{this._loadersMap.set(s,n)}).catch(()=>{}),n.on("change:uploaded",()=>{let s=0;for(const r of this.loaders)s+=r.uploaded;this.uploaded=s}),n.on("change:uploadTotal",()=>{let s=0;for(const r of this.loaders)r.uploadTotal&&(s+=r.uploadTotal);this.uploadTotal=s}),n}destroyLoader(e){const n=e instanceof pP?e:this.getLoader(e);n._destroy(),this.loaders.remove(n),this._loadersMap.forEach((s,r)=>{s===n&&this._loadersMap.delete(r)})}_updatePendingAction(){const e=this.editor.plugins.get(Tp);if(this.loaders.length){if(!this._pendingAction){const n=this.editor.t,s=r=>`${n("Upload in progress")} ${parseInt(r)}%.`;this._pendingAction=e.add(s(this.uploadedPercent)),this._pendingAction.bind("message").to(this,"uploadedPercent",s)}}else e.remove(this._pendingAction),this._pendingAction=null}}class pP extends yt(){constructor(e,n){super();b(this,"id");b(this,"_filePromiseWrapper");b(this,"_adapter");b(this,"_reader");this.id=ni(),this._filePromiseWrapper=this._createFilePromiseWrapper(e),this._adapter=n(this),this._reader=new $ce,this.set("status","idle"),this.set("uploaded",0),this.set("uploadTotal",null),this.bind("uploadedPercent").to(this,"uploaded",this,"uploadTotal",(s,r)=>r?s/r*100:0),this.set("uploadResponse",null)}get file(){return this._filePromiseWrapper?this._filePromiseWrapper.promise.then(e=>this._filePromiseWrapper?e:null):Promise.resolve(null)}get data(){return this._reader.data}read(){if(this.status!="idle")throw new D("filerepository-read-wrong-status",this);return this.status="reading",this.file.then(e=>this._reader.read(e)).then(e=>{if(this.status!=="reading")throw this.status;return this.status="idle",e}).catch(e=>{throw e==="aborted"?(this.status="aborted","aborted"):(this.status="error",this._reader.error?this._reader.error:e)})}upload(){if(this.status!="idle")throw new D("filerepository-upload-wrong-status",this);return this.status="uploading",this.file.then(()=>this._adapter.upload()).then(e=>(this.uploadResponse=e,this.status="idle",e)).catch(e=>{throw this.status==="aborted"?"aborted":(this.status="error",e)})}abort(){const e=this.status;this.status="aborted",this._filePromiseWrapper.isFulfilled?e=="reading"?this._reader.abort():e=="uploading"&&this._adapter.abort&&this._adapter.abort():(this._filePromiseWrapper.promise.catch(()=>{}),this._filePromiseWrapper.rejecter("aborted")),this._destroy()}_destroy(){this._filePromiseWrapper=void 0,this._reader=void 0,this._adapter=void 0,this.uploadResponse=void 0}_createFilePromiseWrapper(e){const n={};return n.promise=new Promise((s,r)=>{n.rejecter=r,n.isFulfilled=!1,e.then(o=>{n.isFulfilled=!0,s(o)}).catch(o=>{n.isFulfilled=!0,r(o)})}),n}}var t1,bP;function RM(){return bP||(bP=1,t1={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}),t1}var zce=RM();const wP=d_(zce);var vP={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};function yP(i){var t,e=[],n=1,s;if(typeof i=="string")if(wP[i])e=wP[i].slice(),s="rgb";else if(i==="transparent")n=0,s="rgb",e=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(i)){var r=i.slice(1),o=r.length,a=o<=4;n=1,a?(e=[parseInt(r[0]+r[0],16),parseInt(r[1]+r[1],16),parseInt(r[2]+r[2],16)],o===4&&(n=parseInt(r[3]+r[3],16)/255)):(e=[parseInt(r[0]+r[1],16),parseInt(r[2]+r[3],16),parseInt(r[4]+r[5],16)],o===8&&(n=parseInt(r[6]+r[7],16)/255)),e[0]||(e[0]=0),e[1]||(e[1]=0),e[2]||(e[2]=0),s="rgb"}else if(t=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(i)){var l=t[1],u=l==="rgb",r=l.replace(/a$/,"");s=r;var o=r==="cmyk"?4:r==="gray"?1:3;e=t[2].trim().split(/\s*[,\/]\s*|\s+/).map(function(g,p){if(/%$/.test(g))return p===o?parseFloat(g)/100:r==="rgb"?parseFloat(g)*255/100:parseFloat(g);if(r[p]==="h"){if(/deg$/.test(g))return parseFloat(g);if(vP[g]!==void 0)return vP[g]}return parseFloat(g)}),l===r&&e.push(1),n=u||e[o]===void 0?1:e[o],e=e.slice(0,o)}else i.length>10&&/[0-9](?:\s|\/)/.test(i)&&(e=i.match(/([0-9]+)/g).map(function(h){return parseFloat(h)}),s=i.match(/([a-z])/ig).join("").toLowerCase());else isNaN(i)?Array.isArray(i)||i.length?(e=[i[0],i[1],i[2]],s="rgb",n=i.length===4?i[3]:1):i instanceof Object&&(i.r!=null||i.red!=null||i.R!=null?(s="rgb",e=[i.r||i.red||i.R||0,i.g||i.green||i.G||0,i.b||i.blue||i.B||0]):(s="hsl",e=[i.h||i.hue||i.H||0,i.s||i.saturation||i.S||0,i.l||i.lightness||i.L||i.b||i.brightness]),n=i.a||i.alpha||i.opacity||1,i.opacity!=null&&(n/=100)):(s="rgb",e=[i>>>16,(i&65280)>>>8,i&255]);return{space:s,values:e,alpha:n}}var n1,_P;function OM(){if(_P)return n1;_P=1;const i=RM(),t={};for(const s of Object.keys(i))t[i[s]]=s;const e={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};n1=e;for(const s of Object.keys(e)){if(!("channels"in e[s]))throw new Error("missing channels property: "+s);if(!("labels"in e[s]))throw new Error("missing channel labels property: "+s);if(e[s].labels.length!==e[s].channels)throw new Error("channel and label counts mismatch: "+s);const{channels:r,labels:o}=e[s];delete e[s].channels,delete e[s].labels,Object.defineProperty(e[s],"channels",{value:r}),Object.defineProperty(e[s],"labels",{value:o})}e.rgb.hsl=function(s){const r=s[0]/255,o=s[1]/255,a=s[2]/255,l=Math.min(r,o,a),u=Math.max(r,o,a),h=u-l;let f,g;u===l?f=0:r===u?f=(o-a)/h:o===u?f=2+(a-r)/h:a===u&&(f=4+(r-o)/h),f=Math.min(f*60,360),f<0&&(f+=360);const p=(l+u)/2;return u===l?g=0:p<=.5?g=h/(u+l):g=h/(2-u-l),[f,g*100,p*100]},e.rgb.hsv=function(s){let r,o,a,l,u;const h=s[0]/255,f=s[1]/255,g=s[2]/255,p=Math.max(h,f,g),y=p-Math.min(h,f,g),E=function(C){return(p-C)/6/y+1/2};return y===0?(l=0,u=0):(u=y/p,r=E(h),o=E(f),a=E(g),h===p?l=a-o:f===p?l=1/3+r-a:g===p&&(l=2/3+o-r),l<0?l+=1:l>1&&(l-=1)),[l*360,u*100,p*100]},e.rgb.hwb=function(s){const r=s[0],o=s[1];let a=s[2];const l=e.rgb.hsl(s)[0],u=1/255*Math.min(r,Math.min(o,a));return a=1-1/255*Math.max(r,Math.max(o,a)),[l,u*100,a*100]},e.rgb.cmyk=function(s){const r=s[0]/255,o=s[1]/255,a=s[2]/255,l=Math.min(1-r,1-o,1-a),u=(1-r-l)/(1-l)||0,h=(1-o-l)/(1-l)||0,f=(1-a-l)/(1-l)||0;return[u*100,h*100,f*100,l*100]};function n(s,r){return(s[0]-r[0])**2+(s[1]-r[1])**2+(s[2]-r[2])**2}return e.rgb.keyword=function(s){const r=t[s];if(r)return r;let o=1/0,a;for(const l of Object.keys(i)){const u=i[l],h=n(s,u);h<o&&(o=h,a=l)}return a},e.keyword.rgb=function(s){return i[s]},e.rgb.xyz=function(s){let r=s[0]/255,o=s[1]/255,a=s[2]/255;r=r>.04045?((r+.055)/1.055)**2.4:r/12.92,o=o>.04045?((o+.055)/1.055)**2.4:o/12.92,a=a>.04045?((a+.055)/1.055)**2.4:a/12.92;const l=r*.4124+o*.3576+a*.1805,u=r*.2126+o*.7152+a*.0722,h=r*.0193+o*.1192+a*.9505;return[l*100,u*100,h*100]},e.rgb.lab=function(s){const r=e.rgb.xyz(s);let o=r[0],a=r[1],l=r[2];o/=95.047,a/=100,l/=108.883,o=o>.008856?o**(1/3):7.787*o+16/116,a=a>.008856?a**(1/3):7.787*a+16/116,l=l>.008856?l**(1/3):7.787*l+16/116;const u=116*a-16,h=500*(o-a),f=200*(a-l);return[u,h,f]},e.hsl.rgb=function(s){const r=s[0]/360,o=s[1]/100,a=s[2]/100;let l,u,h;if(o===0)return h=a*255,[h,h,h];a<.5?l=a*(1+o):l=a+o-a*o;const f=2*a-l,g=[0,0,0];for(let p=0;p<3;p++)u=r+1/3*-(p-1),u<0&&u++,u>1&&u--,6*u<1?h=f+(l-f)*6*u:2*u<1?h=l:3*u<2?h=f+(l-f)*(2/3-u)*6:h=f,g[p]=h*255;return g},e.hsl.hsv=function(s){const r=s[0];let o=s[1]/100,a=s[2]/100,l=o;const u=Math.max(a,.01);a*=2,o*=a<=1?a:2-a,l*=u<=1?u:2-u;const h=(a+o)/2,f=a===0?2*l/(u+l):2*o/(a+o);return[r,f*100,h*100]},e.hsv.rgb=function(s){const r=s[0]/60,o=s[1]/100;let a=s[2]/100;const l=Math.floor(r)%6,u=r-Math.floor(r),h=255*a*(1-o),f=255*a*(1-o*u),g=255*a*(1-o*(1-u));switch(a*=255,l){case 0:return[a,g,h];case 1:return[f,a,h];case 2:return[h,a,g];case 3:return[h,f,a];case 4:return[g,h,a];case 5:return[a,h,f]}},e.hsv.hsl=function(s){const r=s[0],o=s[1]/100,a=s[2]/100,l=Math.max(a,.01);let u,h;h=(2-o)*a;const f=(2-o)*l;return u=o*l,u/=f<=1?f:2-f,u=u||0,h/=2,[r,u*100,h*100]},e.hwb.rgb=function(s){const r=s[0]/360;let o=s[1]/100,a=s[2]/100;const l=o+a;let u;l>1&&(o/=l,a/=l);const h=Math.floor(6*r),f=1-a;u=6*r-h,h&1&&(u=1-u);const g=o+u*(f-o);let p,y,E;switch(h){default:case 6:case 0:p=f,y=g,E=o;break;case 1:p=g,y=f,E=o;break;case 2:p=o,y=f,E=g;break;case 3:p=o,y=g,E=f;break;case 4:p=g,y=o,E=f;break;case 5:p=f,y=o,E=g;break}return[p*255,y*255,E*255]},e.cmyk.rgb=function(s){const r=s[0]/100,o=s[1]/100,a=s[2]/100,l=s[3]/100,u=1-Math.min(1,r*(1-l)+l),h=1-Math.min(1,o*(1-l)+l),f=1-Math.min(1,a*(1-l)+l);return[u*255,h*255,f*255]},e.xyz.rgb=function(s){const r=s[0]/100,o=s[1]/100,a=s[2]/100;let l,u,h;return l=r*3.2406+o*-1.5372+a*-.4986,u=r*-.9689+o*1.8758+a*.0415,h=r*.0557+o*-.204+a*1.057,l=l>.0031308?1.055*l**(1/2.4)-.055:l*12.92,u=u>.0031308?1.055*u**(1/2.4)-.055:u*12.92,h=h>.0031308?1.055*h**(1/2.4)-.055:h*12.92,l=Math.min(Math.max(0,l),1),u=Math.min(Math.max(0,u),1),h=Math.min(Math.max(0,h),1),[l*255,u*255,h*255]},e.xyz.lab=function(s){let r=s[0],o=s[1],a=s[2];r/=95.047,o/=100,a/=108.883,r=r>.008856?r**(1/3):7.787*r+16/116,o=o>.008856?o**(1/3):7.787*o+16/116,a=a>.008856?a**(1/3):7.787*a+16/116;const l=116*o-16,u=500*(r-o),h=200*(o-a);return[l,u,h]},e.lab.xyz=function(s){const r=s[0],o=s[1],a=s[2];let l,u,h;u=(r+16)/116,l=o/500+u,h=u-a/200;const f=u**3,g=l**3,p=h**3;return u=f>.008856?f:(u-16/116)/7.787,l=g>.008856?g:(l-16/116)/7.787,h=p>.008856?p:(h-16/116)/7.787,l*=95.047,u*=100,h*=108.883,[l,u,h]},e.lab.lch=function(s){const r=s[0],o=s[1],a=s[2];let l;l=Math.atan2(a,o)*360/2/Math.PI,l<0&&(l+=360);const h=Math.sqrt(o*o+a*a);return[r,h,l]},e.lch.lab=function(s){const r=s[0],o=s[1],l=s[2]/360*2*Math.PI,u=o*Math.cos(l),h=o*Math.sin(l);return[r,u,h]},e.rgb.ansi16=function(s,r=null){const[o,a,l]=s;let u=r===null?e.rgb.hsv(s)[2]:r;if(u=Math.round(u/50),u===0)return 30;let h=30+(Math.round(l/255)<<2|Math.round(a/255)<<1|Math.round(o/255));return u===2&&(h+=60),h},e.hsv.ansi16=function(s){return e.rgb.ansi16(e.hsv.rgb(s),s[2])},e.rgb.ansi256=function(s){const r=s[0],o=s[1],a=s[2];return r===o&&o===a?r<8?16:r>248?231:Math.round((r-8)/247*24)+232:16+36*Math.round(r/255*5)+6*Math.round(o/255*5)+Math.round(a/255*5)},e.ansi16.rgb=function(s){let r=s%10;if(r===0||r===7)return s>50&&(r+=3.5),r=r/10.5*255,[r,r,r];const o=(~~(s>50)+1)*.5,a=(r&1)*o*255,l=(r>>1&1)*o*255,u=(r>>2&1)*o*255;return[a,l,u]},e.ansi256.rgb=function(s){if(s>=232){const u=(s-232)*10+8;return[u,u,u]}s-=16;let r;const o=Math.floor(s/36)/5*255,a=Math.floor((r=s%36)/6)/5*255,l=r%6/5*255;return[o,a,l]},e.rgb.hex=function(s){const o=(((Math.round(s[0])&255)<<16)+((Math.round(s[1])&255)<<8)+(Math.round(s[2])&255)).toString(16).toUpperCase();return"000000".substring(o.length)+o},e.hex.rgb=function(s){const r=s.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!r)return[0,0,0];let o=r[0];r[0].length===3&&(o=o.split("").map(f=>f+f).join(""));const a=parseInt(o,16),l=a>>16&255,u=a>>8&255,h=a&255;return[l,u,h]},e.rgb.hcg=function(s){const r=s[0]/255,o=s[1]/255,a=s[2]/255,l=Math.max(Math.max(r,o),a),u=Math.min(Math.min(r,o),a),h=l-u;let f,g;return h<1?f=u/(1-h):f=0,h<=0?g=0:l===r?g=(o-a)/h%6:l===o?g=2+(a-r)/h:g=4+(r-o)/h,g/=6,g%=1,[g*360,h*100,f*100]},e.hsl.hcg=function(s){const r=s[1]/100,o=s[2]/100,a=o<.5?2*r*o:2*r*(1-o);let l=0;return a<1&&(l=(o-.5*a)/(1-a)),[s[0],a*100,l*100]},e.hsv.hcg=function(s){const r=s[1]/100,o=s[2]/100,a=r*o;let l=0;return a<1&&(l=(o-a)/(1-a)),[s[0],a*100,l*100]},e.hcg.rgb=function(s){const r=s[0]/360,o=s[1]/100,a=s[2]/100;if(o===0)return[a*255,a*255,a*255];const l=[0,0,0],u=r%1*6,h=u%1,f=1-h;let g=0;switch(Math.floor(u)){case 0:l[0]=1,l[1]=h,l[2]=0;break;case 1:l[0]=f,l[1]=1,l[2]=0;break;case 2:l[0]=0,l[1]=1,l[2]=h;break;case 3:l[0]=0,l[1]=f,l[2]=1;break;case 4:l[0]=h,l[1]=0,l[2]=1;break;default:l[0]=1,l[1]=0,l[2]=f}return g=(1-o)*a,[(o*l[0]+g)*255,(o*l[1]+g)*255,(o*l[2]+g)*255]},e.hcg.hsv=function(s){const r=s[1]/100,o=s[2]/100,a=r+o*(1-r);let l=0;return a>0&&(l=r/a),[s[0],l*100,a*100]},e.hcg.hsl=function(s){const r=s[1]/100,a=s[2]/100*(1-r)+.5*r;let l=0;return a>0&&a<.5?l=r/(2*a):a>=.5&&a<1&&(l=r/(2*(1-a))),[s[0],l*100,a*100]},e.hcg.hwb=function(s){const r=s[1]/100,o=s[2]/100,a=r+o*(1-r);return[s[0],(a-r)*100,(1-a)*100]},e.hwb.hcg=function(s){const r=s[1]/100,a=1-s[2]/100,l=a-r;let u=0;return l<1&&(u=(a-l)/(1-l)),[s[0],l*100,u*100]},e.apple.rgb=function(s){return[s[0]/65535*255,s[1]/65535*255,s[2]/65535*255]},e.rgb.apple=function(s){return[s[0]/255*65535,s[1]/255*65535,s[2]/255*65535]},e.gray.rgb=function(s){return[s[0]/100*255,s[0]/100*255,s[0]/100*255]},e.gray.hsl=function(s){return[0,0,s[0]]},e.gray.hsv=e.gray.hsl,e.gray.hwb=function(s){return[0,100,s[0]]},e.gray.cmyk=function(s){return[0,0,0,s[0]]},e.gray.lab=function(s){return[s[0],0,0]},e.gray.hex=function(s){const r=Math.round(s[0]/100*255)&255,a=((r<<16)+(r<<8)+r).toString(16).toUpperCase();return"000000".substring(a.length)+a},e.rgb.gray=function(s){return[(s[0]+s[1]+s[2])/3/255*100]},n1}var i1,EP;function jce(){if(EP)return i1;EP=1;const i=OM();function t(){const r={},o=Object.keys(i);for(let a=o.length,l=0;l<a;l++)r[o[l]]={distance:-1,parent:null};return r}function e(r){const o=t(),a=[r];for(o[r].distance=0;a.length;){const l=a.pop(),u=Object.keys(i[l]);for(let h=u.length,f=0;f<h;f++){const g=u[f],p=o[g];p.distance===-1&&(p.distance=o[l].distance+1,p.parent=l,a.unshift(g))}}return o}function n(r,o){return function(a){return o(r(a))}}function s(r,o){const a=[o[r].parent,r];let l=i[o[r].parent][r],u=o[r].parent;for(;o[u].parent;)a.unshift(o[u].parent),l=n(i[o[u].parent][u],l),u=o[u].parent;return l.conversion=a,l}return i1=function(r){const o=e(r),a={},l=Object.keys(o);for(let u=l.length,h=0;h<u;h++){const f=l[h];o[f].parent!==null&&(a[f]=s(f,o))}return a},i1}var s1,CP;function Hce(){if(CP)return s1;CP=1;const i=OM(),t=jce(),e={},n=Object.keys(i);function s(o){const a=function(...l){const u=l[0];return u==null?u:(u.length>1&&(l=u),o(l))};return"conversion"in o&&(a.conversion=o.conversion),a}function r(o){const a=function(...l){const u=l[0];if(u==null)return u;u.length>1&&(l=u);const h=o(l);if(typeof h=="object")for(let f=h.length,g=0;g<f;g++)h[g]=Math.round(h[g]);return h};return"conversion"in o&&(a.conversion=o.conversion),a}return n.forEach(o=>{e[o]={},Object.defineProperty(e[o],"channels",{value:i[o].channels}),Object.defineProperty(e[o],"labels",{value:i[o].labels});const a=t(o);Object.keys(a).forEach(u=>{const h=a[u];e[o][u]=r(h),e[o][u].raw=s(h)})}),s1=e,s1}var NM=Hce();const Uce=d_(NM),MM=W6({__proto__:null,default:Uce},[NM]),Bh=(i,t=0,e=1)=>i>e?e:i<t?t:i,$n=(i,t=0,e=Math.pow(10,t))=>Math.round(e*i)/e,Wce=i=>Zce(Vy(i)),Vy=i=>(i[0]==="#"&&(i=i.substring(1)),i.length<6?{r:parseInt(i[0]+i[0],16),g:parseInt(i[1]+i[1],16),b:parseInt(i[2]+i[2],16),a:i.length===4?$n(parseInt(i[3]+i[3],16)/255,2):1}:{r:parseInt(i.substring(0,2),16),g:parseInt(i.substring(2,4),16),b:parseInt(i.substring(4,6),16),a:i.length===8?$n(parseInt(i.substring(6,8),16)/255,2):1}),qce=i=>Yce(Kce(i)),Gce=({h:i,s:t,v:e,a:n})=>{const s=(200-t)*e/100;return{h:$n(i),s:$n(s>0&&s<200?t*e/100/(s<=100?s:200-s)*100:0),l:$n(s/2),a:$n(n,2)}},Dy=i=>{const{h:t,s:e,l:n}=Gce(i);return`hsl(${t}, ${e}%, ${n}%)`},Kce=({h:i,s:t,v:e,a:n})=>{i=i/360*6,t=t/100,e=e/100;const s=Math.floor(i),r=e*(1-t),o=e*(1-(i-s)*t),a=e*(1-(1-i+s)*t),l=s%6;return{r:$n([e,o,r,r,a,e][l]*255),g:$n([a,e,e,o,r,r][l]*255),b:$n([r,r,a,e,e,o][l]*255),a:$n(n,2)}},tg=i=>{const t=i.toString(16);return t.length<2?"0"+t:t},Yce=({r:i,g:t,b:e,a:n})=>{const s=n<1?tg($n(n*255)):"";return"#"+tg(i)+tg(t)+tg(e)+s},Zce=({r:i,g:t,b:e,a:n})=>{const s=Math.max(i,t,e),r=s-Math.min(i,t,e),o=r?s===i?(t-e)/r:s===t?2+(e-i)/r:4+(i-t)/r:0;return{h:$n(60*(o<0?o+6:o)),s:$n(s?r/s*100:0),v:$n(s/255*100),a:n}},LM=(i,t)=>{if(i===t)return!0;for(const e in i)if(i[e]!==t[e])return!1;return!0},Xce=(i,t)=>i.toLowerCase()===t.toLowerCase()?!0:LM(Vy(i),Vy(t)),xP={},VM=i=>{let t=xP[i];return t||(t=document.createElement("template"),t.innerHTML=i,xP[i]=t),t},UE=(i,t,e)=>{i.dispatchEvent(new CustomEvent(t,{bubbles:!0,detail:e}))};let Jc=!1;const By=i=>"touches"in i,Jce=i=>Jc&&!By(i)?!1:(Jc||(Jc=By(i)),!0),kP=(i,t)=>{const e=By(t)?t.touches[0]:t,n=i.el.getBoundingClientRect();UE(i.el,"move",i.getMove({x:Bh((e.pageX-(n.left+window.pageXOffset))/n.width),y:Bh((e.pageY-(n.top+window.pageYOffset))/n.height)}))},Qce=(i,t)=>{const e=t.keyCode;e>40||i.xy&&e<37||e<33||(t.preventDefault(),UE(i.el,"move",i.getMove({x:e===39?.01:e===37?-.01:e===34?.05:e===33?-.05:e===35?1:e===36?-1:0,y:e===40?.01:e===38?-.01:0},!0)))};class DM{constructor(t,e,n,s){const r=VM(`<div role="slider" tabindex="0" part="${e}" ${n}><div part="${e}-pointer"></div></div>`);t.appendChild(r.content.cloneNode(!0));const o=t.querySelector(`[part=${e}]`);o.addEventListener("mousedown",this),o.addEventListener("touchstart",this),o.addEventListener("keydown",this),this.el=o,this.xy=s,this.nodes=[o.firstChild,o]}set dragging(t){const e=t?document.addEventListener:document.removeEventListener;e(Jc?"touchmove":"mousemove",this),e(Jc?"touchend":"mouseup",this)}handleEvent(t){switch(t.type){case"mousedown":case"touchstart":if(t.preventDefault(),!Jce(t)||!Jc&&t.button!=0)return;this.el.focus(),kP(this,t),this.dragging=!0;break;case"mousemove":case"touchmove":t.preventDefault(),kP(this,t);break;case"mouseup":case"touchend":this.dragging=!1;break;case"keydown":Qce(this,t);break}}style(t){t.forEach((e,n)=>{for(const s in e)this.nodes[n].style.setProperty(s,e[s])})}}class eue extends DM{constructor(t){super(t,"hue",'aria-label="Hue" aria-valuemin="0" aria-valuemax="360"',!1)}update({h:t}){this.h=t,this.style([{left:`${t/360*100}%`,color:Dy({h:t,s:100,v:100,a:1})}]),this.el.setAttribute("aria-valuenow",`${$n(t)}`)}getMove(t,e){return{h:e?Bh(this.h+t.x*360,0,360):360*t.x}}}class tue extends DM{constructor(t){super(t,"saturation",'aria-label="Color"',!0)}update(t){this.hsva=t,this.style([{top:`${100-t.v}%`,left:`${t.s}%`,color:Dy(t)},{"background-color":Dy({h:t.h,s:100,v:100,a:1})}]),this.el.setAttribute("aria-valuetext",`Saturation ${$n(t.s)}%, Brightness ${$n(t.v)}%`)}getMove(t,e){return{s:e?Bh(this.hsva.s+t.x*100,0,100):t.x*100,v:e?Bh(this.hsva.v-t.y*100,0,100):Math.round(100-t.y*100)}}}const nue=':host{display:flex;flex-direction:column;position:relative;width:200px;height:200px;user-select:none;-webkit-user-select:none;cursor:default}:host([hidden]){display:none!important}[role=slider]{position:relative;touch-action:none;user-select:none;-webkit-user-select:none;outline:0}[role=slider]:last-child{border-radius:0 0 8px 8px}[part$=pointer]{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;display:flex;place-content:center center;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}[part$=pointer]::after{content:"";width:100%;height:100%;border-radius:inherit;background-color:currentColor}[role=slider]:focus [part$=pointer]{transform:translate(-50%,-50%) scale(1.1)}',iue="[part=hue]{flex:0 0 24px;background:linear-gradient(to right,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red 100%)}[part=hue-pointer]{top:50%;z-index:2}",sue="[part=saturation]{flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(to top,#000,transparent),linear-gradient(to right,#fff,rgba(255,255,255,0));box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}[part=saturation-pointer]{z-index:3}",ng=Symbol("same"),r1=Symbol("color"),TP=Symbol("hsva"),o1=Symbol("update"),SP=Symbol("parts"),AP=Symbol("css"),PP=Symbol("sliders");class rue extends HTMLElement{static get observedAttributes(){return["color"]}get[AP](){return[nue,iue,sue]}get[PP](){return[tue,eue]}get color(){return this[r1]}set color(t){if(!this[ng](t)){const e=this.colorModel.toHsva(t);this[o1](e),this[r1]=t}}constructor(){super();const t=VM(`<style>${this[AP].join("")}</style>`),e=this.attachShadow({mode:"open"});e.appendChild(t.content.cloneNode(!0)),e.addEventListener("move",this),this[SP]=this[PP].map(n=>new n(e))}connectedCallback(){if(this.hasOwnProperty("color")){const t=this.color;delete this.color,this.color=t}else this.color||(this.color=this.colorModel.defaultColor)}attributeChangedCallback(t,e,n){const s=this.colorModel.fromAttr(n);this[ng](s)||(this.color=s)}handleEvent(t){const e=this[TP],n={...e,...t.detail};this[o1](n);let s;!LM(n,e)&&!this[ng](s=this.colorModel.fromHsva(n))&&(this[r1]=s,UE(this,"color-changed",{value:s}))}[ng](t){return this.color&&this.colorModel.equal(t,this.color)}[o1](t){this[TP]=t,this[SP].forEach(e=>e.update(t))}}const oue={defaultColor:"#000",toHsva:Wce,fromHsva:({h:i,s:t,v:e})=>qce({h:i,s:t,v:e,a:1}),equal:Xce,fromAttr:i=>i};class aue extends rue{get colorModel(){return oue}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class Un extends Hn{constructor(e=[]){super(e,{idProperty:"viewUid"});b(this,"_parentElement");this.on("add",(n,s,r)=>{this._renderViewIntoCollectionParent(s,r)}),this.on("remove",(n,s)=>{s.element&&this._parentElement&&s.element.remove()}),this._parentElement=null}destroy(){this.map(e=>e.destroy())}setParent(e){this._parentElement=e;for(const n of this)this._renderViewIntoCollectionParent(n)}delegate(...e){if(!e.length||!lue(e))throw new D("ui-viewcollection-delegate-wrong-events",this);return{to:n=>{for(const s of this)for(const r of e)s.delegate(r).to(n);this.on("add",(s,r)=>{for(const o of e)r.delegate(o).to(n)}),this.on("remove",(s,r)=>{for(const o of e)r.stopDelegating(o,n)})}}}_renderViewIntoCollectionParent(e,n){e.isRendered||e.render(),e.element&&this._parentElement&&this._parentElement.insertBefore(e.element,this._parentElement.children[n])}remove(e){return super.remove(e)}}function lue(i){return i.every(t=>typeof t=="string")}const cue="http://www.w3.org/1999/xhtml";class Pi extends Ct(){constructor(e){super();b(this,"ns");b(this,"tag");b(this,"text");b(this,"attributes");b(this,"children");b(this,"eventListeners");b(this,"_isRendered");b(this,"_revertData");Object.assign(this,RP(IP(e))),this._isRendered=!1,this._revertData=null}render(){const e=this._renderNode({intoFragment:!0});return this._isRendered=!0,e}apply(e){return this._revertData=MP(),this._renderNode({node:e,intoFragment:!1,isApplying:!0,revertData:this._revertData}),e}revert(e){if(!this._revertData)throw new D("ui-template-revert-not-applied",[this,e]);this._revertTemplateFromNode(e,this._revertData)}*getViews(){function*e(n){if(n.children)for(const s of n.children)Sp(s)?yield s:WE(s)&&(yield*e(s))}yield*e(this)}static bind(e,n){return{to(s,r){return new uue({eventNameOrFunction:s,attribute:s,observable:e,emitter:n,callback:r})},if(s,r,o){return new BM({observable:e,emitter:n,attribute:s,valueIfTrue:r,callback:o})}}}static extend(e,n){if(e._isRendered)throw new D("template-extend-render",[this,e]);jM(e,RP(IP(n)))}_renderNode(e){let n;if(e.node?n=this.tag&&this.text:n=this.tag?this.text:!this.text,n)throw new D("ui-template-wrong-syntax",this);return this.text?this._renderText(e):this._renderElement(e)}_renderElement(e){let n=e.node;return n||(n=e.node=document.createElementNS(this.ns||cue,this.tag)),this._renderAttributes(e),this._renderElementChildren(e),this._setUpListeners(e),n}_renderText(e){let n=e.node;return n?e.revertData.text=n.textContent:n=e.node=document.createTextNode(""),Ng(this.text)?this._bindToObservable({schema:this.text,updater:hue(n),data:e}):n.textContent=this.text.join(""),n}_renderAttributes(e){if(!this.attributes)return;const n=e.node,s=e.revertData;for(const r in this.attributes){const o=n.getAttribute(r),a=this.attributes[r];s&&(s.attributes[r]=o);const l=NP(a)?a[0].ns:null;if(Ng(a)){const u=NP(a)?a[0].value:a;s&&LP(r)&&u.unshift(o),this._bindToObservable({schema:u,updater:fue(n,r,l),data:e})}else if(r=="style"&&typeof a[0]!="string")this._renderStyleAttribute(a[0],e);else{s&&o&&LP(r)&&a.unshift(o);const u=a.map(h=>h&&(h.value||h)).reduce((h,f)=>h.concat(f),[]).reduce(zM,"");gu(u)||n.setAttributeNS(l,r,u)}}}_renderStyleAttribute(e,n){const s=n.node;for(const r in e){const o=e[r];Ng(o)?this._bindToObservable({schema:[o],updater:mue(s,r),data:n}):s.style[r]=o}}_renderElementChildren(e){const n=e.node,s=e.intoFragment?document.createDocumentFragment():n,r=e.isApplying;let o=0;for(const a of this.children)if(qE(a)){if(!r){a.setParent(n);for(const l of a)s.appendChild(l.element)}}else if(Sp(a))r||(a.isRendered||a.render(),s.appendChild(a.element));else if(ba(a))s.appendChild(a);else if(r){const l=e.revertData,u=MP();l.children.push(u),a._renderNode({intoFragment:!1,node:s.childNodes[o++],isApplying:!0,revertData:u})}else s.appendChild(a.render());e.intoFragment&&n.appendChild(s)}_setUpListeners(e){if(this.eventListeners)for(const n in this.eventListeners){const s=this.eventListeners[n].map(r=>{const[o,a]=n.split("@");return r.activateDomEventListener(o,a,e)});e.revertData&&e.revertData.bindings.push(s)}}_bindToObservable({schema:e,updater:n,data:s}){const r=s.revertData;FM(e,n,s);const o=e.filter(a=>!gu(a)).filter(a=>a.observable).map(a=>a.activateAttributeListener(e,n,s));r&&r.bindings.push(o)}_revertTemplateFromNode(e,n){for(const r of n.bindings)for(const o of r)o();if(n.text){e.textContent=n.text;return}const s=e;for(const r in n.attributes){const o=n.attributes[r];o===null?s.removeAttribute(r):s.setAttribute(r,o)}for(let r=0;r<n.children.length;++r)this._revertTemplateFromNode(s.childNodes[r],n.children[r])}}class mf{constructor(t){b(this,"attribute");b(this,"observable");b(this,"emitter");b(this,"callback");this.attribute=t.attribute,this.observable=t.observable,this.emitter=t.emitter,this.callback=t.callback}getValue(t){const e=this.observable[this.attribute];return this.callback?this.callback(e,t):e}activateAttributeListener(t,e,n){const s=()=>FM(t,e,n);return this.emitter.listenTo(this.observable,`change:${this.attribute}`,s),()=>{this.emitter.stopListening(this.observable,`change:${this.attribute}`,s)}}}class uue extends mf{constructor(e){super(e);b(this,"eventNameOrFunction");this.eventNameOrFunction=e.eventNameOrFunction}activateDomEventListener(e,n,s){const r=(o,a)=>{(!n||a.target.matches(n))&&(typeof this.eventNameOrFunction=="function"?this.eventNameOrFunction(a):this.observable.fire(this.eventNameOrFunction,a))};return this.emitter.listenTo(s.node,e,r),()=>{this.emitter.stopListening(s.node,e,r)}}}class BM extends mf{constructor(e){super(e);b(this,"valueIfTrue");this.valueIfTrue=e.valueIfTrue}getValue(e){const n=super.getValue(e);return gu(n)?!1:this.valueIfTrue||!0}}function Ng(i){return i?(i.value&&(i=i.value),Array.isArray(i)?i.some(Ng):i instanceof mf):!1}function due(i,t){return i.map(e=>e instanceof mf?e.getValue(t):e)}function FM(i,t,{node:e}){const n=due(i,e);let s;i.length==1&&i[0]instanceof BM?s=n[0]:s=n.reduce(zM,""),gu(s)?t.remove():t.set(s)}function hue(i){return{set(t){i.textContent=t},remove(){i.textContent=""}}}function fue(i,t,e){return{set(n){i.setAttributeNS(e,t,n)},remove(){i.removeAttributeNS(e,t)}}}function mue(i,t){return{set(e){i.style[t]=e},remove(){i.style[t]=null}}}function IP(i){return CE(i,e=>{if(e&&(e instanceof mf||WE(e)||Sp(e)||qE(e)))return e})}function RP(i){if(typeof i=="string"?i=bue(i):i.text&&wue(i),i.on&&(i.eventListeners=pue(i.on),delete i.on),!i.text){i.attributes&&gue(i.attributes);const t=[];if(i.children)if(qE(i.children))t.push(i.children);else for(const e of i.children)WE(e)||Sp(e)||ba(e)?t.push(e):t.push(new Pi(e));i.children=t}return i}function gue(i){for(const t in i)i[t].value&&(i[t].value=Bt(i[t].value)),$M(i,t)}function pue(i){for(const t in i)$M(i,t);return i}function bue(i){return{text:[i]}}function wue(i){i.text=Bt(i.text)}function $M(i,t){i[t]=Bt(i[t])}function zM(i,t){return gu(t)?i:gu(i)?t:`${i} ${t}`}function OP(i,t){for(const e in t)i[e]?i[e].push(...t[e]):i[e]=t[e]}function jM(i,t){if(t.attributes&&(i.attributes||(i.attributes={}),OP(i.attributes,t.attributes)),t.eventListeners&&(i.eventListeners||(i.eventListeners={}),OP(i.eventListeners,t.eventListeners)),t.text&&i.text.push(...t.text),t.children&&t.children.length){if(i.children.length!=t.children.length)throw new D("ui-template-extend-children-mismatch",i);let e=0;for(const n of t.children)jM(i.children[e++],n)}}function gu(i){return!i&&i!==0}function Sp(i){return i instanceof xe}function WE(i){return i instanceof Pi}function qE(i){return i instanceof Un}function NP(i){return Ot(i[0])&&i[0].ns}function MP(){return{children:[],bindings:[],attributes:{}}}function LP(i){return i=="class"||i=="style"}class xe extends hi(yt()){constructor(e){super();b(this,"element");b(this,"isRendered");b(this,"locale");b(this,"t");b(this,"template");b(this,"_viewCollections");b(this,"_unboundChildren");b(this,"_bindTemplate");this.element=null,this.isRendered=!1,this.locale=e,this.t=e&&e.t,this._viewCollections=new Hn,this._unboundChildren=this.createCollection(),this._viewCollections.on("add",(n,s)=>{s.locale=e,s.t=e&&e.t}),this.decorate("render")}get bindTemplate(){return this._bindTemplate?this._bindTemplate:this._bindTemplate=Pi.bind(this,this)}createCollection(e){const n=new Un(e);return this._viewCollections.add(n),n}registerChild(e){ts(e)||(e=[e]);for(const n of e)this._unboundChildren.add(n)}deregisterChild(e){ts(e)||(e=[e]);for(const n of e)this._unboundChildren.remove(n)}setTemplate(e){this.template=new Pi(e)}extendTemplate(e){Pi.extend(this.template,e)}render(){if(this.isRendered)throw new D("ui-view-render-already-rendered",this);this.template&&(this.element=this.template.render(),this.registerChild(this.template.getViews())),this.isRendered=!0}destroy(){this.stopListening(),this._viewCollections.map(e=>e.destroy()),this.template&&this.template._revertData&&this.template.revert(this.element)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Ta({emitter:i,activator:t,callback:e,contextElements:n,listenerOptions:s}){i.listenTo(document,"mousedown",(r,o)=>{if(!t())return;const a=typeof o.composedPath=="function"?o.composedPath():[],l=typeof n=="function"?n():n;for(const u of l)if(u.contains(o.target)||a.includes(u))return;e()},s)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Bb(i){class t extends i{disableCssTransitions(){this._isCssTransitionsDisabled=!0}enableCssTransitions(){this._isCssTransitionsDisabled=!1}constructor(...n){super(...n),this.set("_isCssTransitionsDisabled",!1),this.initializeCssTransitionDisablerMixin()}initializeCssTransitionDisablerMixin(){this.extendTemplate({attributes:{class:[this.bindTemplate.if("_isCssTransitionsDisabled","ck-transitions-disabled")]}})}}return t}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Sa({view:i}){i.listenTo(i.element,"submit",(t,e)=>{e.preventDefault(),i.fire("submit")},{useCapture:!0})}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function GE({keystrokeHandler:i,focusTracker:t,gridItems:e,numberOfColumns:n,uiLanguageDirection:s}){const r=typeof n=="number"?()=>n:n;i.set("arrowright",o((u,h)=>s==="rtl"?l(u,h.length):a(u,h.length))),i.set("arrowleft",o((u,h)=>s==="rtl"?a(u,h.length):l(u,h.length))),i.set("arrowup",o((u,h)=>{let f=u-r();return f<0&&(f=u+r()*Math.floor(h.length/r()),f>h.length-1&&(f-=r())),f})),i.set("arrowdown",o((u,h)=>{let f=u+r();return f>h.length-1&&(f=u%r()),f}));function o(u){return h=>{const f=e.find(y=>y.element===t.focusedElement),g=e.getIndex(f),p=u(g,e);e.get(p).focus(),h.stopPropagation(),h.preventDefault()}}function a(u,h){return u===h-1?0:u+1}function l(u,h){return u===0?h-1:u-1}}const Fp=class Fp extends xe{constructor(){super();const t=this.bindTemplate;this.set("content",""),this.set("viewBox","0 0 20 20"),this.set("fillColor",""),this.set("isColorInherited",!0),this.set("isVisible",!0),this.setTemplate({tag:"svg",ns:"http://www.w3.org/2000/svg",attributes:{class:["ck","ck-icon",t.if("isVisible","ck-hidden",e=>!e),"ck-reset_all-excluded",t.if("isColorInherited","ck-icon_inherit-color")],viewBox:t.to("viewBox"),"aria-hidden":!0}})}render(){super.render(),this._updateXMLContent(),this._colorFillPaths(),this.on("change:content",()=>{this._updateXMLContent(),this._colorFillPaths()}),this.on("change:fillColor",()=>{this._colorFillPaths()})}_updateXMLContent(){if(this.content){const e=new DOMParser().parseFromString(this.content.trim(),"image/svg+xml").querySelector("svg"),n=e.getAttribute("viewBox");n&&(this.viewBox=n);for(const{name:s,value:r}of Array.from(e.attributes))Fp.presentationalAttributeNames.includes(s)&&this.element.setAttribute(s,r);for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);for(;e.childNodes.length>0;)this.element.appendChild(e.childNodes[0])}}_colorFillPaths(){this.fillColor&&this.element.querySelectorAll(".ck-icon__fill").forEach(t=>{t.style.fill=this.fillColor})}};b(Fp,"presentationalAttributeNames",["alignment-baseline","baseline-shift","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-rendering","cursor","direction","display","dominant-baseline","fill","fill-opacity","fill-rule","filter","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","image-rendering","letter-spacing","lighting-color","marker-end","marker-mid","marker-start","mask","opacity","overflow","paint-order","pointer-events","shape-rendering","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-anchor","text-decoration","text-overflow","text-rendering","transform","unicode-bidi","vector-effect","visibility","white-space","word-spacing","writing-mode"]);let Pr=Fp;class HM extends xe{constructor(){super(),this.set({style:void 0,text:void 0,id:void 0});const t=this.bindTemplate;this.setTemplate({tag:"span",attributes:{class:["ck","ck-button__label"],style:t.to("style"),id:t.to("id")},children:[{text:t.to("text")}]})}}class qe extends xe{constructor(e,n=new HM){super(e);b(this,"children");b(this,"labelView");b(this,"iconView");b(this,"keystrokeView");b(this,"_focusDelayed",null);const s=this.bindTemplate,r=ni();this.set("_ariaPressed",!1),this.set("_ariaChecked",!1),this.set("ariaLabel",void 0),this.set("ariaLabelledBy",`ck-editor__aria-label_${r}`),this.set("class",void 0),this.set("labelStyle",void 0),this.set("icon",void 0),this.set("isEnabled",!0),this.set("isOn",!1),this.set("isVisible",!0),this.set("isToggleable",!1),this.set("keystroke",void 0),this.set("label",void 0),this.set("role",void 0),this.set("tabindex",-1),this.set("tooltip",!1),this.set("tooltipPosition","s"),this.set("type","button"),this.set("withText",!1),this.set("withKeystroke",!1),this.children=this.createCollection(),this.labelView=this._setupLabelView(n),this.iconView=new Pr,this.iconView.extendTemplate({attributes:{class:"ck-button__icon"}}),this.keystrokeView=this._createKeystrokeView(),this.bind("_tooltipString").to(this,"tooltip",this,"label",this,"keystroke",this._getTooltipString.bind(this));const o={tag:"button",attributes:{class:["ck","ck-button",s.to("class"),s.if("isEnabled","ck-disabled",a=>!a),s.if("isVisible","ck-hidden",a=>!a),s.to("isOn",a=>a?"ck-on":"ck-off"),s.if("withText","ck-button_with-text"),s.if("withKeystroke","ck-button_with-keystroke")],role:s.to("role"),type:s.to("type",a=>a||"button"),tabindex:s.to("tabindex"),"aria-checked":s.to("_ariaChecked"),"aria-pressed":s.to("_ariaPressed"),"aria-label":s.to("ariaLabel"),"aria-labelledby":s.to("ariaLabelledBy"),"aria-disabled":s.if("isEnabled",!0,a=>!a),"data-cke-tooltip-text":s.to("_tooltipString"),"data-cke-tooltip-position":s.to("tooltipPosition")},children:this.children,on:{click:s.to(a=>{this.isEnabled?this.fire("execute"):a.preventDefault()})}};this.bind("_ariaPressed").to(this,"isOn",this,"isToggleable",this,"role",(a,l,u)=>!l||VP(u)?!1:String(!!a)),this.bind("_ariaChecked").to(this,"isOn",this,"isToggleable",this,"role",(a,l,u)=>!l||!VP(u)?!1:String(!!a)),Fe.isSafari&&(this._focusDelayed||(this._focusDelayed=AE(()=>this.focus(),0)),o.on.mousedown=s.to(()=>{this._focusDelayed()}),o.on.mouseup=s.to(()=>{this._focusDelayed.cancel()})),this.setTemplate(o)}render(){super.render(),this.icon&&(this.iconView.bind("content").to(this,"icon"),this.children.add(this.iconView)),this.children.add(this.labelView),this.withKeystroke&&this.keystroke&&this.children.add(this.keystrokeView)}focus(){this.element.focus()}destroy(){this._focusDelayed&&this._focusDelayed.cancel(),super.destroy()}_setupLabelView(e){return e.bind("text","style","id").to(this,"label","labelStyle","ariaLabelledBy"),e}_createKeystrokeView(){const e=new xe;return e.setTemplate({tag:"span",attributes:{class:["ck","ck-button__keystroke"]},children:[{text:this.bindTemplate.to("keystroke",n=>yp(n))}]}),e}_getTooltipString(e,n,s){return e?typeof e=="string"?e:(s&&(s=yp(s)),e instanceof Function?e(n,s):`${n}${s?` (${s})`:""}`):""}}function VP(i){switch(i){case"radio":case"checkbox":case"option":case"switch":case"menuitemcheckbox":case"menuitemradio":return!0;default:return!1}}class KE extends xe{constructor(e,n={}){super(e);b(this,"children");b(this,"iconView");const s=this.bindTemplate;this.set("label",n.label||""),this.set("class",n.class||null),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-form__header",s.to("class")]},children:this.children}),n.icon&&(this.iconView=new Pr,this.iconView.content=n.icon,this.children.add(this.iconView));const r=new xe(e);r.setTemplate({tag:"h2",attributes:{class:["ck","ck-form__header__label"],role:"presentation"},children:[{text:s.to("label")}]}),this.children.add(r)}}class fi extends Ct(){constructor(e){super();b(this,"focusables");b(this,"focusTracker");b(this,"keystrokeHandler");b(this,"actions");if(this.focusables=e.focusables,this.focusTracker=e.focusTracker,this.keystrokeHandler=e.keystrokeHandler,this.actions=e.actions,e.actions&&e.keystrokeHandler)for(const n in e.actions){let s=e.actions[n];typeof s=="string"&&(s=[s]);for(const r of s)e.keystrokeHandler.set(r,(o,a)=>{this[n](),a()},e.keystrokeHandlerOptions)}this.on("forwardCycle",()=>this.focusFirst(),{priority:"low"}),this.on("backwardCycle",()=>this.focusLast(),{priority:"low"})}get first(){return this.focusables.find(a1)||null}get last(){return this.focusables.filter(a1).slice(-1)[0]||null}get next(){return this._getDomFocusableItem(1)}get previous(){return this._getDomFocusableItem(-1)}get current(){let e=null;return this.focusTracker.focusedElement===null?null:(this.focusables.find((n,s)=>{const r=n.element===this.focusTracker.focusedElement;return r&&(e=s),r}),e)}focusFirst(){this._focus(this.first,1)}focusLast(){this._focus(this.last,-1)}focusNext(){const e=this.next;if(e&&this.focusables.getIndex(e)===this.current){this.fire("forwardCycle");return}e===this.first?this.fire("forwardCycle"):this._focus(e,1)}focusPrevious(){const e=this.previous;if(e&&this.focusables.getIndex(e)===this.current){this.fire("backwardCycle");return}e===this.last?this.fire("backwardCycle"):this._focus(e,-1)}chain(e){const n=()=>this.current===null?null:this.focusables.get(this.current);this.listenTo(e,"forwardCycle",s=>{const r=n();this.focusNext(),r!==n()&&s.stop()},{priority:"low"}),this.listenTo(e,"backwardCycle",s=>{const r=n();this.focusPrevious(),r!==n()&&s.stop()},{priority:"low"})}unchain(e){this.stopListening(e)}_focus(e,n){e&&this.focusTracker.focusedElement!==e.element&&e.focus(n)}_getDomFocusableItem(e){const n=this.focusables.length;if(!n)return null;const s=this.current;if(s===null)return this[e===1?"first":"last"];let r=this.focusables.get(s),o=(s+n+e)%n;do{const a=this.focusables.get(o);if(a1(a)){r=a;break}o=(o+n+e)%n}while(o!==s);return r}}function a1(i){return gf(i)&&fo(i.element)}function gf(i){return"focus"in i&&typeof i.focus=="function"}function vue(i){return gf(i)&&"focusCycler"in i&&i.focusCycler instanceof fi}function yue(i){class t extends i{constructor(...s){super(...s);b(this,"_onDragBound",this._onDrag.bind(this));b(this,"_onDragEndBound",this._onDragEnd.bind(this));b(this,"_lastDraggingCoordinates",{x:0,y:0});this.on("render",()=>{this._attachListeners()}),this.set("isDragging",!1)}_attachListeners(){this.listenTo(this.element,"mousedown",this._onDragStart.bind(this)),this.listenTo(this.element,"touchstart",this._onDragStart.bind(this))}_attachDragListeners(){this.listenTo(Ce.document,"mouseup",this._onDragEndBound),this.listenTo(Ce.document,"touchend",this._onDragEndBound),this.listenTo(Ce.document,"mousemove",this._onDragBound),this.listenTo(Ce.document,"touchmove",this._onDragBound)}_detachDragListeners(){this.stopListening(Ce.document,"mouseup",this._onDragEndBound),this.stopListening(Ce.document,"touchend",this._onDragEndBound),this.stopListening(Ce.document,"mousemove",this._onDragBound),this.stopListening(Ce.document,"touchmove",this._onDragBound)}_onDragStart(s,r){if(!this._isHandleElementPressed(r))return;this._attachDragListeners();let o=0,a=0;r instanceof MouseEvent?(o=r.clientX,a=r.clientY):(o=r.touches[0].clientX,a=r.touches[0].clientY),this._lastDraggingCoordinates={x:o,y:a},this.isDragging=!0}_onDrag(s,r){if(!this.isDragging){this._detachDragListeners();return}let o=0,a=0;r instanceof MouseEvent?(o=r.clientX,a=r.clientY):(o=r.touches[0].clientX,a=r.touches[0].clientY),r.preventDefault(),this.fire("drag",{deltaX:Math.round(o-this._lastDraggingCoordinates.x),deltaY:Math.round(a-this._lastDraggingCoordinates.y)}),this._lastDraggingCoordinates={x:o,y:a}}_onDragEnd(){this._detachDragListeners(),this.isDragging=!1}_isHandleElementPressed(s){return this.dragHandleElement?this.dragHandleElement===s.target||s.target instanceof HTMLElement&&this.dragHandleElement.contains(s.target):!1}}return t}class _ue extends xe{constructor(e){super(e);b(this,"children");b(this,"keystrokes");b(this,"focusCycler");b(this,"_focusTracker");b(this,"_focusables");this.children=this.createCollection(),this.keystrokes=new tn,this._focusTracker=new Gt,this._focusables=new Un,this.focusCycler=new fi({focusables:this._focusables,focusTracker:this._focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-dialog__actions"]},children:this.children})}render(){super.render(),this.keystrokes.listenTo(this.element)}setButtons(e){for(const n of e){const s=new qe(this.locale);let r;s.on("execute",()=>n.onExecute()),n.onCreate&&n.onCreate(s);for(r in n)r!="onExecute"&&r!="onCreate"&&s.set(r,n[r]);this.children.add(s)}this._updateFocusCyclableItems()}focus(e){e===-1?this.focusCycler.focusLast():this.focusCycler.focusFirst()}_updateFocusCyclableItems(){Array.from(this.children).forEach(e=>{this._focusables.add(e),this._focusTracker.add(e.element)})}}class Eue extends xe{constructor(e){super(e);b(this,"children");this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-dialog__content"]},children:this.children})}reset(){for(;this.children.length;)this.children.remove(0)}}const Ds={SCREEN_CENTER:"screen-center",EDITOR_CENTER:"editor-center",EDITOR_TOP_SIDE:"editor-top-side",EDITOR_TOP_CENTER:"editor-top-center",EDITOR_BOTTOM_CENTER:"editor-bottom-center",EDITOR_ABOVE_CENTER:"editor-above-center",EDITOR_BELOW_CENTER:"editor-below-center"},DP=ff("px"),$p=class $p extends yue(xe){constructor(e,{getCurrentDomRoot:n,getViewportOffset:s,keystrokeHandlerOptions:r}){super(e);b(this,"parts");b(this,"headerView");b(this,"closeButtonView");b(this,"actionsView");b(this,"contentView");b(this,"keystrokes");b(this,"focusTracker");b(this,"wasMoved",!1);b(this,"_getCurrentDomRoot");b(this,"_getViewportOffset");b(this,"_focusables");b(this,"_focusCycler");const o=this.bindTemplate,a=e.t;this.set("className",""),this.set("ariaLabel",a("Editor dialog")),this.set("isModal",!1),this.set("position",Ds.SCREEN_CENTER),this.set("_isVisible",!1),this.set("_isTransparent",!1),this.set("_top",0),this.set("_left",0),this._getCurrentDomRoot=n,this._getViewportOffset=s,this.decorate("moveTo"),this.parts=this.createCollection(),this.keystrokes=new tn,this.focusTracker=new Gt,this._focusables=new Un,this._focusCycler=new fi({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"},keystrokeHandlerOptions:r}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-dialog-overlay",o.if("isModal","ck-dialog-overlay__transparent",l=>!l),o.if("_isVisible","ck-hidden",l=>!l)],tabindex:"-1"},children:[{tag:"div",attributes:{tabindex:"-1",class:["ck","ck-dialog",o.if("isModal","ck-dialog_modal"),o.to("className")],role:"dialog","aria-label":o.to("ariaLabel"),style:{top:o.to("_top",l=>DP(l)),left:o.to("_left",l=>DP(l)),visibility:o.if("_isTransparent","hidden")}},children:this.parts}]})}render(){super.render(),this.keystrokes.set("Esc",(e,n)=>{e.defaultPrevented||(this.fire("close",{source:"escKeyPress"}),n())}),this.on("drag",(e,{deltaX:n,deltaY:s})=>{this.wasMoved=!0,this.moveBy(n,s)}),this.listenTo(Ce.window,"resize",()=>{this._isVisible&&!this.wasMoved&&this.updatePosition()}),this.listenTo(Ce.document,"scroll",()=>{this._isVisible&&!this.wasMoved&&this.updatePosition()}),this.on("change:_isVisible",(e,n,s)=>{s&&(this._isTransparent=!0,setTimeout(()=>{this.updatePosition(),this._isTransparent=!1,this.focus()},10))}),this.keystrokes.listenTo(this.element)}get dragHandleElement(){return this.headerView&&!this.isModal?this.headerView.element:null}setupParts({icon:e,title:n,hasCloseButton:s=!0,content:r,actionButtons:o}){n&&(this.headerView=new KE(this.locale,{icon:e}),s&&(this.closeButtonView=this._createCloseButton(),this.headerView.children.add(this.closeButtonView)),this.headerView.label=n,this.ariaLabel=n,this.parts.add(this.headerView,0)),r&&(r instanceof xe&&(r=[r]),this.contentView=new Eue(this.locale),this.contentView.children.addMany(r),this.parts.add(this.contentView)),o&&(this.actionsView=new _ue(this.locale),this.actionsView.setButtons(o),this.parts.add(this.actionsView)),this._updateFocusCyclableItems()}focus(){this._focusCycler.focusFirst()}moveTo(e,n){const s=this._getViewportRect(),r=this._getDialogRect();e+r.width>s.right&&(e=s.right-r.width),e<s.left&&(e=s.left),n<s.top&&(n=s.top),this._moveTo(e,n)}_moveTo(e,n){this._left=e,this._top=n}moveBy(e,n){this.moveTo(this._left+e,this._top+n)}_moveOffScreen(){this._moveTo(-9999,-9999)}updatePosition(){if(!this.element||!this.element.parentNode)return;const e=this._getViewportRect();let n=this.position,s;this._getCurrentDomRoot()?s=this._getVisibleDomRootRect(e):n=Ds.SCREEN_CENTER;const r=$p.defaultOffset,o=this._getDialogRect();switch(n){case Ds.EDITOR_TOP_SIDE:{if(s){const a=this.locale.contentLanguageDirection==="ltr"?s.right-o.width-r:s.left+r;this.moveTo(a,s.top+r)}else this._moveOffScreen();break}case Ds.EDITOR_CENTER:{s?this.moveTo(Math.round(s.left+s.width/2-o.width/2),Math.round(s.top+s.height/2-o.height/2)):this._moveOffScreen();break}case Ds.SCREEN_CENTER:{this.moveTo(Math.round((e.width-o.width)/2),Math.round((e.height-o.height)/2));break}case Ds.EDITOR_TOP_CENTER:{s?this.moveTo(Math.round(s.left+s.width/2-o.width/2),s.top+r):this._moveOffScreen();break}case Ds.EDITOR_BOTTOM_CENTER:{s?this.moveTo(Math.round(s.left+s.width/2-o.width/2),s.bottom-o.height-r):this._moveOffScreen();break}case Ds.EDITOR_ABOVE_CENTER:{s?this.moveTo(Math.round(s.left+s.width/2-o.width/2),s.top-o.height-r):this._moveOffScreen();break}case Ds.EDITOR_BELOW_CENTER:{s?this.moveTo(Math.round(s.left+s.width/2-o.width/2),s.bottom+r):this._moveOffScreen();break}}}_getVisibleDomRootRect(e){let n=new Ye(this._getCurrentDomRoot()).getVisible();if(n){if(n=e.getIntersection(n),!n)return null}else return null;return n}_getDialogRect(){return new Ye(this.element.firstElementChild)}_getViewportRect(){const e=new Ye(Ce.window);if(this.isModal)return e;const n={top:0,bottom:0,left:0,right:0,...this._getViewportOffset()};return e.top+=n.top,e.height-=n.top,e.bottom-=n.bottom,e.height-=n.bottom,e.left+=n.left,e.right-=n.right,e.width-=n.left+n.right,e}_updateFocusCyclableItems(){const e=[];if(this.contentView)for(const n of this.contentView.children)gf(n)&&e.push(n);this.actionsView&&e.push(this.actionsView),this.closeButtonView&&e.push(this.closeButtonView),e.forEach(n=>{this._focusables.add(n),this.focusTracker.add(n.element),vue(n)&&this._focusCycler.chain(n.focusCycler)})}_createCloseButton(){const e=new qe(this.locale),n=this.locale.t;return e.set({label:n("Close"),tooltip:!0,icon:ve.cancel}),e.on("execute",()=>this.fire("close",{source:"closeButton"})),e}};b($p,"defaultOffset",15);let Fh=$p;const Bs=class Bs extends J{constructor(e){super(e);b(this,"view");b(this,"_onHide");const n=e.t;this._initShowHideListeners(),this._initFocusToggler(),this._initMultiRootIntegration(),this.set({id:null,isOpen:!1}),e.accessibility.addKeystrokeInfos({categoryId:"navigation",keystrokes:[{label:n("Move focus in and out of an active dialog window"),keystroke:"Ctrl+F6",mayRequireFn:!0}]})}static get pluginName(){return"Dialog"}static get isOfficialPlugin(){return!0}destroy(){super.destroy(),Bs._visibleDialogPlugin===this&&this._unlockBodyScroll()}_initShowHideListeners(){this.on("show",(e,n)=>{this._show(n)}),this.on("show",(e,n)=>{n.onShow&&n.onShow(this)},{priority:"low"}),this.on("hide",()=>{Bs._visibleDialogPlugin&&Bs._visibleDialogPlugin._hide()}),this.on("hide",()=>{this._onHide&&(this._onHide(this),this._onHide=void 0)},{priority:"low"})}_initFocusToggler(){const e=this.editor;e.keystrokes.set("Ctrl+F6",(n,s)=>{!this.isOpen||this.view.isModal||(this.view.focusTracker.isFocused?e.editing.view.focus():this.view.focus(),s())})}_initMultiRootIntegration(){const e=this.editor.model;e.document.on("change:data",()=>{if(!this.view)return;const n=e.document.differ.getChangedRoots();for(const s of n)s.state&&this.view.updatePosition()})}show(e){this.hide(),this.fire(`show:${e.id}`,e)}_show({id:e,icon:n,title:s,hasCloseButton:r=!0,content:o,actionButtons:a,className:l,isModal:u,position:h,onHide:f,keystrokeHandlerOptions:g}){const p=this.editor;this.view=new Fh(p.locale,{getCurrentDomRoot:()=>p.editing.view.getDomRoot(p.model.document.selection.anchor.root.rootName),getViewportOffset:()=>p.ui.viewportOffset,keystrokeHandlerOptions:g});const y=this.view;y.on("close",()=>{this.hide()}),p.ui.view.body.add(y),p.keystrokes.listenTo(y.element),h||(h=u?Ds.SCREEN_CENTER:Ds.EDITOR_CENTER),u&&this._lockBodyScroll(),y.set({position:h,_isVisible:!0,className:l,isModal:u}),y.setupParts({icon:n,title:s,hasCloseButton:r,content:o,actionButtons:a}),this.id=e,f&&(this._onHide=f),this.isOpen=!0,Bs._visibleDialogPlugin=this}hide(){Bs._visibleDialogPlugin&&Bs._visibleDialogPlugin.fire(`hide:${Bs._visibleDialogPlugin.id}`)}_hide(){if(!this.view)return;const e=this.editor,n=this.view;n.isModal&&this._unlockBodyScroll(),n.contentView&&n.contentView.reset(),e.ui.view.body.remove(n),e.ui.focusTracker.remove(n.element),e.keystrokes.stopListening(n.element),n.destroy(),e.editing.view.focus(),this.id=null,this.isOpen=!1,Bs._visibleDialogPlugin=null}_lockBodyScroll(){document.documentElement.classList.add("ck-dialog-scroll-locked")}_unlockBodyScroll(){document.documentElement.classList.remove("ck-dialog-scroll-locked")}};b(Bs,"_visibleDialogPlugin");let $h=Bs;class pu extends qe{constructor(e,n=new HM){super(e,n);b(this,"_checkIconHolderView",new Cue);this.set({hasCheckSpace:!1,_hasCheck:this.isToggleable});const s=this.bindTemplate;this.extendTemplate({attributes:{class:["ck-list-item-button",s.if("isToggleable","ck-list-item-button_toggleable")]}}),this.bind("_hasCheck").to(this,"hasCheckSpace",this,"isToggleable",(r,o)=>r||o)}render(){super.render(),this._hasCheck&&this.children.add(this._checkIconHolderView,0),this._watchCheckIconHolderMount()}_watchCheckIconHolderMount(){this._checkIconHolderView.bind("isOn").to(this,"isOn",e=>this.isToggleable&&e),this.on("change:_hasCheck",(e,n,s)=>{const{children:r,_checkIconHolderView:o}=this;s?r.add(o,0):r.remove(o)})}}class Cue extends xe{constructor(){super();b(this,"children");b(this,"_checkIconView",this._createCheckIconView());const e=this.bindTemplate;this.children=this.createCollection(),this.set("isOn",!1),this.setTemplate({tag:"span",children:this.children,attributes:{class:["ck","ck-list-item-button__check-holder",e.to("isOn",n=>n?"ck-on":"ck-off")]}})}render(){super.render(),this.isOn&&this.children.add(this._checkIconView,0),this._watchCheckIconMount()}_watchCheckIconMount(){this.on("change:isOn",(e,n,s)=>{const{children:r,_checkIconView:o}=this;s&&!r.has(o)?r.add(o):!s&&r.has(o)&&r.remove(o)})}_createCheckIconView(){const e=new Pr;return e.content=ve.check,e.extendTemplate({attributes:{class:"ck-list-item-button__check-icon"}}),e}}class Ln extends pu{constructor(t){super(t),this.set({withText:!0,withKeystroke:!0,tooltip:!1,role:"menuitem"}),this.extendTemplate({attributes:{class:["ck-menu-bar__menu__item__button"]}})}}class ws extends xe{constructor(e){super(e);b(this,"id");this.set("text",void 0),this.set("for",void 0),this.id=`ck-editor__label_${ni()}`;const n=this.bindTemplate;this.setTemplate({tag:"label",attributes:{class:["ck","ck-label"],id:this.id,for:n.to("for")},children:[{text:n.to("text")}]})}}class xue extends xe{constructor(t,e){super(t);const n=t.t,s=new ws;s.text=n("Help Contents. To close this dialog press ESC."),this.setTemplate({tag:"div",attributes:{class:["ck","ck-accessibility-help-dialog__content"],"aria-labelledby":s.id,role:"document",tabindex:-1},children:[Fs(document,"p",{},n("Below, you can find a list of keyboard shortcuts that can be used in the editor.")),...this._createCategories(Array.from(e.values())),s]})}focus(){this.element.focus()}_createCategories(t){return t.map(e=>{const n=[Fs(document,"h3",{},e.label),...Array.from(e.groups.values()).map(s=>this._createGroup(s)).flat()];return e.description&&n.splice(1,0,Fs(document,"p",{},e.description)),Fs(document,"section",{},n)})}_createGroup(t){const e=t.keystrokes.sort((s,r)=>s.label.localeCompare(r.label)).map(s=>this._createGroupRow(s)).flat(),n=[Fs(document,"dl",{},e)];return t.label&&n.unshift(Fs(document,"h4",{},t.label)),n}_createGroupRow(t){const e=this.locale.t,n=Fs(document,"dt"),s=Fs(document,"dd"),r=Tue(t.keystroke),o=[];for(const a of r)o.push(a.map(kue).join(""));return n.innerHTML=t.label,s.innerHTML=o.join(", ")+(t.mayRequireFn&&Fe.isMac?` ${e("(may require <kbd>Fn</kbd>)")}`:""),[n,s]}}function kue(i){return yp(i).split("+").map(t=>`<kbd>${t}</kbd>`).join("+")}function Tue(i){return typeof i=="string"?[[i]]:typeof i[0]=="string"?[i]:i}var BP='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10 6.628a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Z"/><path d="M8.5 9.125a.3.3 0 0 0-.253-.296L5.11 8.327a.75.75 0 1 1 .388-1.449l4.04.716c.267.072.624.08.893.009l4.066-.724a.75.75 0 1 1 .388 1.45l-3.132.5a.3.3 0 0 0-.253.296v1.357a.3.3 0 0 0 .018.102l1.615 4.438a.75.75 0 0 1-1.41.513l-1.35-3.71a.3.3 0 0 0-.281-.197h-.209a.3.3 0 0 0-.282.198l-1.35 3.711a.75.75 0 0 1-1.41-.513l1.64-4.509a.3.3 0 0 0 .019-.103V9.125Z"/><path clip-rule="evenodd" d="M10 18.5a8.5 8.5 0 1 1 0-17 8.5 8.5 0 0 1 0 17Zm0 1.5c5.523 0 10-4.477 10-10S15.523 0 10 0 0 4.477 0 10s4.477 10 10 10Z"/></svg>';class Sue extends J{constructor(){super(...arguments);b(this,"contentView",null)}static get requires(){return[$h]}static get pluginName(){return"AccessibilityHelp"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,n=e.locale.t;e.ui.componentFactory.add("accessibilityHelp",()=>{const s=this._createButton(qe);return s.set({tooltip:!0,withText:!1,label:n("Accessibility help")}),s}),e.ui.componentFactory.add("menuBar:accessibilityHelp",()=>{const s=this._createButton(Ln);return s.label=n("Accessibility"),s}),e.keystrokes.set("Alt+0",(s,r)=>{this._toggleDialog(),r()}),this._setupRootLabels()}_createButton(e){const n=this.editor,s=n.plugins.get("Dialog"),r=n.locale,o=new e(r);return o.set({keystroke:"Alt+0",icon:BP,isToggleable:!0}),o.on("execute",()=>this._toggleDialog()),o.bind("isOn").to(s,"id",a=>a==="accessibilityHelp"),o}_setupRootLabels(){const e=this.editor,n=e.editing.view,s=e.t;e.ui.on("ready",()=>{n.change(o=>{for(const a of n.document.roots)r(o,a)}),e.on("addRoot",(o,a)=>{const l=e.editing.view.document.getRoot(a.rootName);n.change(u=>r(u,l))},{priority:"low"})});function r(o,a){const u=[a.getAttribute("aria-label"),s("Press %0 for help.",[yp("Alt+0")])].filter(h=>h).join(". ");o.setAttribute("aria-label",u,a)}}_toggleDialog(){const e=this.editor,n=e.plugins.get("Dialog"),s=e.locale.t;this.contentView||(this.contentView=new xue(e.locale,e.accessibility.keystrokeInfos)),n.id==="accessibilityHelp"?n.hide():n.show({id:"accessibilityHelp",className:"ck-accessibility-help-dialog",title:s("Accessibility help"),icon:BP,hasCloseButton:!0,content:this.contentView})}}const ps=class ps extends Un{constructor(e,n=[]){super(n);b(this,"locale");b(this,"_bodyCollectionContainer");this.locale=e}get bodyCollectionContainer(){return this._bodyCollectionContainer}attachToDom(){this._bodyCollectionContainer=new Pi({tag:"div",attributes:{class:["ck","ck-reset_all","ck-body","ck-rounded-corners"],dir:this.locale.uiLanguageDirection,role:"application"},children:this}).render(),(!ps._bodyWrapper||!ps._bodyWrapper.isConnected)&&(ps._bodyWrapper=Fs(document,"div",{class:"ck-body-wrapper"}),document.body.appendChild(ps._bodyWrapper)),ps._bodyWrapper.appendChild(this._bodyCollectionContainer)}detachFromDom(){super.destroy(),this._bodyCollectionContainer&&this._bodyCollectionContainer.remove(),ps._bodyWrapper&&!ps._bodyWrapper.childElementCount&&(ps._bodyWrapper.remove(),delete ps._bodyWrapper)}};b(ps,"_bodyWrapper");let Fy=ps;class pf extends qe{constructor(e){super(e);b(this,"toggleSwitchView");this.isToggleable=!0,this.toggleSwitchView=this._createToggleView(),this.extendTemplate({attributes:{class:"ck-switchbutton"}})}render(){super.render(),this.children.add(this.toggleSwitchView)}_createToggleView(){const e=new xe;return e.setTemplate({tag:"span",attributes:{class:["ck","ck-button__toggle"]},children:[{tag:"span",attributes:{class:["ck","ck-button__toggle__inner"]}}]}),e}}class FP extends UM(qe){}class Aue extends UM(pu){}function UM(i){class t extends i{constructor(...s){super(...s);b(this,"buttonView");b(this,"_fileInputView");this.buttonView=this,this._fileInputView=new Pue(this.locale),this._fileInputView.bind("acceptedType").to(this),this._fileInputView.bind("allowMultipleFiles").to(this),this._fileInputView.delegate("done").to(this),this.on("execute",()=>{this._fileInputView.open()}),this.extendTemplate({attributes:{class:"ck-file-dialog-button"}})}render(){super.render(),this.children.add(this._fileInputView)}}return t}class Pue extends xe{constructor(t){super(t),this.set("acceptedType",void 0),this.set("allowMultipleFiles",!1);const e=this.bindTemplate;this.setTemplate({tag:"input",attributes:{class:["ck-hidden"],type:"file",tabindex:"-1",accept:e.to("acceptedType"),multiple:e.to("allowMultipleFiles")},on:{change:e.to(()=>{this.element&&this.element.files&&this.element.files.length&&this.fire("done",this.element.files),this.element.value=""})}})}open(){this.element.click()}}var Fb='<svg viewBox="0 0 10 10" xmlns="http://www.w3.org/2000/svg"><path d="M.941 4.523a.75.75 0 1 1 1.06-1.06l3.006 3.005 3.005-3.005a.75.75 0 1 1 1.06 1.06l-3.549 3.55a.75.75 0 0 1-1.168-.136L.941 4.523z"/></svg>';class WM extends xe{constructor(e,n){super(e);b(this,"buttonView");b(this,"children");const s=this.bindTemplate;this.set("isCollapsed",!1),this.set("label",""),this.buttonView=this._createButtonView(),this.children=this.createCollection(),this.set("_collapsibleAriaLabelUid",void 0),n&&this.children.addMany(n),this.setTemplate({tag:"div",attributes:{class:["ck","ck-collapsible",s.if("isCollapsed","ck-collapsible_collapsed")]},children:[this.buttonView,{tag:"div",attributes:{class:["ck","ck-collapsible__children"],role:"region",hidden:s.if("isCollapsed","hidden"),"aria-labelledby":s.to("_collapsibleAriaLabelUid")},children:this.children}]})}render(){super.render(),this._collapsibleAriaLabelUid=this.buttonView.labelView.element.id}focus(){this.buttonView.focus()}_createButtonView(){const e=new qe(this.locale),n=e.bindTemplate;return e.set({withText:!0,icon:Fb}),e.extendTemplate({attributes:{"aria-expanded":n.to("isOn",s=>String(s))}}),e.bind("label").to(this),e.bind("isOn").to(this,"isCollapsed",s=>!s),e.on("execute",()=>{this.isCollapsed=!this.isCollapsed}),e}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function zh(i,t){const e=i.t,n={Black:e("Black"),"Dim grey":e("Dim grey"),Grey:e("Grey"),"Light grey":e("Light grey"),White:e("White"),Red:e("Red"),Orange:e("Orange"),Yellow:e("Yellow"),"Light green":e("Light green"),Green:e("Green"),Aquamarine:e("Aquamarine"),Turquoise:e("Turquoise"),"Light blue":e("Light blue"),Blue:e("Blue"),Purple:e("Purple")};return t.map(s=>{const r=n[s.label];return r&&r!=s.label&&(s.label=r),s})}function jh(i){return i.map(Iue).filter(t=>!!t)}function Iue(i){return typeof i=="string"?{model:i,label:i,hasBorder:!1,view:{name:"span",styles:{color:i}}}:{model:i.color,label:i.label||i.color,hasBorder:i.hasBorder===void 0?!1:i.hasBorder,view:{name:"span",styles:{color:`${i.color}`}}}}var Rue='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path class="ck-icon__fill" d="M16.935 5.328a2 2 0 0 1 0 2.829l-7.778 7.778a2 2 0 0 1-2.829 0L3.5 13.107a1.999 1.999 0 1 1 2.828-2.829l.707.707a1 1 0 0 0 1.414 0l5.658-5.657a2 2 0 0 1 2.828 0z"/><path d="M14.814 6.035 8.448 12.4a1 1 0 0 1-1.414 0l-1.413-1.415A1 1 0 1 0 4.207 12.4l2.829 2.829a1 1 0 0 0 1.414 0l7.778-7.778a1 1 0 1 0-1.414-1.415z"/></svg>';class qM extends qe{constructor(t){super(t);const e=this.bindTemplate;this.set("color",void 0),this.set("hasBorder",!1),this.icon=Rue,this.extendTemplate({attributes:{style:{backgroundColor:e.to("color",n=>Fe.isMediaForcedColors?null:n)},class:["ck","ck-color-grid__tile",e.if("hasBorder","ck-color-selector__color-tile_bordered")]}})}render(){super.render(),this.iconView.fillColor="hsl(0, 0%, 100%)"}}class $P extends xe{constructor(e,n){super(e);b(this,"columns");b(this,"items");b(this,"focusTracker");b(this,"keystrokes");const s=n&&n.colorDefinitions?n.colorDefinitions:[];this.columns=n&&n.columns?n.columns:5;const r={gridTemplateColumns:`repeat( ${this.columns}, 1fr)`};this.set("selectedColor",void 0),this.items=this.createCollection(),this.focusTracker=new Gt,this.keystrokes=new tn,this.items.on("add",(o,a)=>{a.isOn=a.color===this.selectedColor}),s.forEach(o=>{const a=new qM;a.set({color:o.color,label:o.label,tooltip:!0,hasBorder:o.options.hasBorder}),a.on("execute",()=>{this.fire("execute",{value:o.color,hasBorder:o.options.hasBorder,label:o.label})}),this.items.add(a)}),this.setTemplate({tag:"div",children:this.items,attributes:{class:["ck","ck-color-grid"],style:r}}),this.on("change:selectedColor",(o,a,l)=>{for(const u of this.items)u.isOn=u.color===l})}focus(){this.items.length&&this.items.first.focus()}focusLast(){this.items.length&&this.items.last.focus()}render(){super.render();for(const e of this.items)this.focusTracker.add(e.element);this.items.on("add",(e,n)=>{this.focusTracker.add(n.element)}),this.items.on("remove",(e,n)=>{this.focusTracker.remove(n.element)}),this.keystrokes.listenTo(this.element),GE({keystrokeHandler:this.keystrokes,focusTracker:this.focusTracker,gridItems:this.items,numberOfColumns:this.columns,uiLanguageDirection:this.locale&&this.locale.uiLanguageDirection})}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function GM(i,t){if(!i)return"";const e=KM(i);if(!e)return"";if(e.space===t)return i;if(!Lue(e))return"";const s=MM[e.space][t];if(!s)return"";const r=s(e.space==="hex"?e.hexValue:e.values);return Mue(r,t)}function Oue(i){if(!i)return"";const t=KM(i);return t?t.space==="hex"?t.hexValue:GM(i,"hex"):"#000"}function Nue(i,t){customElements.get(i)===void 0&&customElements.define(i,t)}function Mue(i,t){switch(t){case"hex":return`#${i}`;case"rgb":return`rgb(${i[0]}, ${i[1]}, ${i[2]})`;case"hsl":return`hsl(${i[0]}, ${i[1]}%, ${i[2]}%)`;case"hwb":return`hwb(${i[0]}, ${i[1]}, ${i[2]})`;case"lab":return`lab(${i[0]}% ${i[1]} ${i[2]})`;case"lch":return`lch(${i[0]}% ${i[1]} ${i[2]})`;default:return""}}function KM(i){if(i.startsWith("#")){const e=yP(i);return{space:"hex",values:e.values,hexValue:i,alpha:e.alpha}}const t=yP(i);return t.space?t:null}function Lue(i){return Object.keys(MM).includes(i.space)}class bn extends xe{constructor(e,n){super(e);b(this,"fieldView");b(this,"labelView");b(this,"statusView");b(this,"fieldWrapperChildren");const s=`ck-labeled-field-view-${ni()}`,r=`ck-labeled-field-view-status-${ni()}`;this.fieldView=n(this,s,r),this.set("label",void 0),this.set("isEnabled",!0),this.set("isEmpty",!0),this.set("isFocused",!1),this.set("errorText",null),this.set("infoText",null),this.set("class",void 0),this.set("placeholder",void 0),this.labelView=this._createLabelView(s),this.statusView=this._createStatusView(r),this.fieldWrapperChildren=this.createCollection([this.fieldView,this.labelView]),this.bind("_statusText").to(this,"errorText",this,"infoText",(a,l)=>a||l);const o=this.bindTemplate;this.setTemplate({tag:"div",attributes:{class:["ck","ck-labeled-field-view",o.to("class"),o.if("isEnabled","ck-disabled",a=>!a),o.if("isEmpty","ck-labeled-field-view_empty"),o.if("isFocused","ck-labeled-field-view_focused"),o.if("placeholder","ck-labeled-field-view_placeholder"),o.if("errorText","ck-error")]},children:[{tag:"div",attributes:{class:["ck","ck-labeled-field-view__input-wrapper"]},children:this.fieldWrapperChildren},this.statusView]})}_createLabelView(e){const n=new ws(this.locale);return n.for=e,n.bind("text").to(this,"label"),n}_createStatusView(e){const n=new xe(this.locale),s=this.bindTemplate;return n.setTemplate({tag:"div",attributes:{class:["ck","ck-labeled-field-view__status",s.if("errorText","ck-labeled-field-view__status_error"),s.if("_statusText","ck-hidden",r=>!r)],id:e,role:s.if("errorText","alert")},children:[{text:s.to("_statusText")}]}),n}focus(e){this.fieldView.focus(e)}}class Vue extends xe{constructor(e){super(e);b(this,"focusTracker");this.set("value",void 0),this.set("id",void 0),this.set("placeholder",void 0),this.set("tabIndex",void 0),this.set("isReadOnly",!1),this.set("hasError",!1),this.set("ariaDescribedById",void 0),this.set("ariaLabel",void 0),this.focusTracker=new Gt,this.bind("isFocused").to(this.focusTracker),this.set("isEmpty",!0);const n=this.bindTemplate;this.setTemplate({tag:"input",attributes:{class:["ck","ck-input",n.if("isFocused","ck-input_focused"),n.if("isEmpty","ck-input-text_empty"),n.if("hasError","ck-error")],id:n.to("id"),placeholder:n.to("placeholder"),tabindex:n.to("tabIndex"),readonly:n.to("isReadOnly"),"aria-invalid":n.if("hasError",!0),"aria-describedby":n.to("ariaDescribedById"),"aria-label":n.to("ariaLabel")},on:{input:n.to((...s)=>{this.fire("input",...s),this._updateIsEmpty()}),change:n.to(this._updateIsEmpty.bind(this))}})}render(){super.render(),this.focusTracker.add(this.element),this._setDomElementValue(this.value),this._updateIsEmpty(),this.on("change:value",(e,n,s)=>{this._setDomElementValue(s),this._updateIsEmpty()})}destroy(){super.destroy(),this.focusTracker.destroy()}select(){this.element.select()}focus(){this.element.focus()}reset(){this.value=this.element.value="",this._updateIsEmpty()}_updateIsEmpty(){this.isEmpty=Due(this.element)}_setDomElementValue(e){this.element.value=!e&&e!==0?"":e}}function Due(i){return!i.value}class YM extends Vue{constructor(t){super(t),this.set("inputMode","text");const e=this.bindTemplate;this.extendTemplate({attributes:{inputmode:e.to("inputMode")}})}}class ZM extends YM{constructor(t){super(t),this.extendTemplate({attributes:{type:"text",class:["ck-input-text"]}})}}class Bue extends YM{constructor(t,{min:e,max:n,step:s}={}){super(t);const r=this.bindTemplate;this.set("min",e),this.set("max",n),this.set("step",s),this.extendTemplate({attributes:{type:"number",class:["ck-input-number"],min:r.to("min"),max:r.to("max"),step:r.to("step")}})}}class Fue extends xe{constructor(e){super(e);b(this,"children");const n=this.bindTemplate;this.set("isVisible",!1),this.set("position","se"),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-reset","ck-dropdown__panel",n.to("position",s=>`ck-dropdown__panel_${s}`),n.if("isVisible","ck-dropdown__panel-visible")],tabindex:"-1"},children:this.children,on:{selectstart:n.to(s=>{s.target.tagName.toLocaleLowerCase()!=="input"&&s.preventDefault()})}})}focus(){if(this.children.length){const e=this.children.first;typeof e.focus=="function"?e.focus():dt("ui-dropdown-panel-focus-child-missing-focus",{childView:this.children.first,dropdownPanel:this})}}focusLast(){if(this.children.length){const e=this.children.last;typeof e.focusLast=="function"?e.focusLast():e.focus()}}}const Kc=class Kc extends xe{constructor(e,n,s){super(e);b(this,"buttonView");b(this,"panelView");b(this,"focusTracker");b(this,"keystrokes");b(this,"listView");b(this,"toolbarView");b(this,"menuView");const r=this.bindTemplate;this.buttonView=n,this.panelView=s,this.set("isOpen",!1),this.set("isEnabled",!0),this.set("class",void 0),this.set("id",void 0),this.set("panelPosition","auto"),this.panelView.bind("isVisible").to(this,"isOpen"),this.keystrokes=new tn,this.focusTracker=new Gt,this.setTemplate({tag:"div",attributes:{class:["ck","ck-dropdown",r.to("class"),r.if("isEnabled","ck-disabled",o=>!o)],id:r.to("id"),"aria-describedby":r.to("ariaDescribedById")},children:[n,s]}),n.extendTemplate({attributes:{class:["ck-dropdown__button"],"data-cke-tooltip-disabled":r.to("isOpen")}})}render(){super.render(),this.focusTracker.add(this.buttonView.element),this.focusTracker.add(this.panelView.element),this.listenTo(this.buttonView,"open",()=>{this.isOpen=!this.isOpen}),this.on("change:isOpen",(n,s,r)=>{if(r)if(this.panelPosition==="auto"){const o=Kc._getOptimalPosition({element:this.panelView.element,target:this.buttonView.element,fitInViewport:!0,positions:this._panelPositions});this.panelView.position=o?o.name:this._defaultPanelPositionName}else this.panelView.position=this.panelPosition}),this.keystrokes.listenTo(this.element);const e=(n,s)=>{this.isOpen&&(this.isOpen=!1,s())};this.keystrokes.set("arrowdown",(n,s)=>{this.buttonView.isEnabled&&!this.isOpen&&(this.isOpen=!0,s())}),this.keystrokes.set("arrowright",(n,s)=>{this.isOpen&&s()}),this.keystrokes.set("arrowleft",e),this.keystrokes.set("esc",e)}focus(){this.buttonView.focus()}get _panelPositions(){const{south:e,north:n,southEast:s,southWest:r,northEast:o,northWest:a,southMiddleEast:l,southMiddleWest:u,northMiddleEast:h,northMiddleWest:f}=Kc.defaultPanelPositions;return this.locale.uiLanguageDirection!=="rtl"?[s,r,l,u,e,o,a,h,f,n]:[r,s,u,l,e,a,o,f,h,n]}get _defaultPanelPositionName(){return this.locale.uiLanguageDirection==="rtl"?"sw":"se"}};b(Kc,"defaultPanelPositions",{south:(e,n)=>({top:e.bottom,left:e.left-(n.width-e.width)/2,name:"s"}),southEast:e=>({top:e.bottom,left:e.left,name:"se"}),southWest:(e,n)=>({top:e.bottom,left:e.left-n.width+e.width,name:"sw"}),southMiddleEast:(e,n)=>({top:e.bottom,left:e.left-(n.width-e.width)/4,name:"sme"}),southMiddleWest:(e,n)=>({top:e.bottom,left:e.left-(n.width-e.width)*3/4,name:"smw"}),north:(e,n)=>({top:e.top-n.height,left:e.left-(n.width-e.width)/2,name:"n"}),northEast:(e,n)=>({top:e.top-n.height,left:e.left,name:"ne"}),northWest:(e,n)=>({top:e.top-n.height,left:e.left-n.width+e.width,name:"nw"}),northMiddleEast:(e,n)=>({top:e.top-n.height,left:e.left-(n.width-e.width)/4,name:"nme"}),northMiddleWest:(e,n)=>({top:e.top-n.height,left:e.left-(n.width-e.width)*3/4,name:"nmw"})}),b(Kc,"_getOptimalPosition",TE);let $y=Kc;class XM extends qe{constructor(e){super(e);b(this,"arrowView");this.arrowView=this._createArrowView(),this.extendTemplate({attributes:{"aria-haspopup":!0,"aria-expanded":this.bindTemplate.to("isOn",n=>String(n))}}),this.delegate("execute").to(this,"open")}render(){super.render(),this.children.add(this.arrowView)}_createArrowView(){const e=new Pr;return e.content=Fb,e.extendTemplate({attributes:{class:"ck-dropdown__arrow"}}),e}}class go extends xe{constructor(e){super(e);b(this,"children");const n=this.bindTemplate;this.set("isVisible",!0),this.children=this.createCollection(),this.setTemplate({tag:"li",attributes:{class:["ck","ck-list__item",n.if("isVisible","ck-hidden",s=>!s)],role:"presentation"},children:this.children})}focus(){this.children.first&&this.children.first.focus()}}class YE extends xe{constructor(t){super(t),this.setTemplate({tag:"li",attributes:{class:["ck","ck-list__separator"]}})}}class Mg extends xe{constructor(e,n=new ws){super(e);b(this,"labelView");b(this,"items");b(this,"children");const s=this.bindTemplate,r=new $b(e);this.set({label:"",isVisible:!0}),this.labelView=n,this.labelView.bind("text").to(this,"label"),this.children=this.createCollection(),this.children.addMany([this.labelView,r]),r.set({role:"group",ariaLabelledBy:n.id}),r.focusTracker.destroy(),r.keystrokes.destroy(),this.items=r.items,this.setTemplate({tag:"li",attributes:{role:"presentation",class:["ck","ck-list__group",s.if("isVisible","ck-hidden",o=>!o)]},children:this.children})}focus(){if(this.items){const e=this.items.find(n=>!(n instanceof YE));e&&e.focus()}}}class $b extends xe{constructor(e){super(e);b(this,"focusables");b(this,"items");b(this,"focusTracker");b(this,"keystrokes");b(this,"_focusCycler");b(this,"_listItemGroupToChangeListeners",new WeakMap);const n=this.bindTemplate;this.focusables=new Un,this.items=this.createCollection(),this.focusTracker=new Gt,this.keystrokes=new tn,this._focusCycler=new fi({focusables:this.focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"arrowup",focusNext:"arrowdown"}}),this.set("ariaLabel",void 0),this.set("ariaLabelledBy",void 0),this.set("role",void 0),this.setTemplate({tag:"ul",attributes:{class:["ck","ck-reset","ck-list"],role:n.to("role"),"aria-label":n.to("ariaLabel"),"aria-labelledby":n.to("ariaLabelledBy")},children:this.items})}render(){super.render();for(const e of this.items)e instanceof Mg?this._registerFocusableItemsGroup(e):e instanceof go&&this._registerFocusableListItem(e);this.items.on("change",(e,n)=>{for(const s of n.removed)s instanceof Mg?this._deregisterFocusableItemsGroup(s):s instanceof go&&this._deregisterFocusableListItem(s);for(const s of Array.from(n.added).reverse())s instanceof Mg?this._registerFocusableItemsGroup(s,n.index):this._registerFocusableListItem(s,n.index)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}focusFirst(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}_registerFocusableListItem(e,n){this.focusTracker.add(e.element),this.focusables.add(e,n)}_deregisterFocusableListItem(e){this.focusTracker.remove(e.element),this.focusables.remove(e)}_getOnGroupItemsChangeCallback(e){return(n,s)=>{for(const r of s.removed)this._deregisterFocusableListItem(r);for(const r of Array.from(s.added).reverse())this._registerFocusableListItem(r,this.items.getIndex(e)+s.index)}}_registerFocusableItemsGroup(e,n){Array.from(e.items).forEach((r,o)=>{const a=typeof n<"u"?n+o:void 0;this._registerFocusableListItem(r,a)});const s=this._getOnGroupItemsChangeCallback(e);this._listItemGroupToChangeListeners.set(e,s),e.items.on("change",s)}_deregisterFocusableItemsGroup(e){for(const n of e.items)this._deregisterFocusableListItem(n);e.items.off("change",this._listItemGroupToChangeListeners.get(e)),this._listItemGroupToChangeListeners.delete(e)}}const zP=ff("px"),$ue={top:-99999,left:-99999,name:"arrowless",config:{withArrow:!1}},Bi=class Bi extends xe{constructor(e){super(e);b(this,"content");b(this,"_pinWhenIsVisibleCallback");b(this,"_resizeObserver");const n=this.bindTemplate;this.set("top",0),this.set("left",0),this.set("position","arrow_nw"),this.set("isVisible",!1),this.set("withArrow",!0),this.set("class",void 0),this._pinWhenIsVisibleCallback=null,this._resizeObserver=null,this.content=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-balloon-panel",n.to("position",s=>`ck-balloon-panel_${s}`),n.if("isVisible","ck-balloon-panel_visible"),n.if("withArrow","ck-balloon-panel_with-arrow"),n.to("class")],style:{top:n.to("top",zP),left:n.to("left",zP)}},children:this.content})}destroy(){this.hide(),super.destroy()}show(){this.isVisible=!0}hide(){this.isVisible=!1}attachTo(e){const n=Lg(e.target);if(n&&!fo(n))return!1;this.show();const s=Bi.defaultPositions,r=Object.assign({},{element:this.element,positions:[s.southArrowNorth,s.southArrowNorthMiddleWest,s.southArrowNorthMiddleEast,s.southArrowNorthWest,s.southArrowNorthEast,s.northArrowSouth,s.northArrowSouthMiddleWest,s.northArrowSouthMiddleEast,s.northArrowSouthWest,s.northArrowSouthEast,s.viewportStickyNorth],limiter:Ce.document.body,fitInViewport:!0},e),o=Bi._getOptimalPosition(r)||$ue,a=parseInt(o.left),l=parseInt(o.top),u=o.name,h=o.config||{},{withArrow:f=!0}=h;return this.top=l,this.left=a,this.position=u,this.withArrow=f,!0}pin(e){this.unpin(),this._startPinning(e)&&(this._pinWhenIsVisibleCallback=()=>{this.isVisible?this._startPinning(e):this._stopPinning()},this.listenTo(this,"change:isVisible",this._pinWhenIsVisibleCallback))}unpin(){this._pinWhenIsVisibleCallback&&(this._stopPinning(),this.stopListening(this,"change:isVisible",this._pinWhenIsVisibleCallback),this._pinWhenIsVisibleCallback=null,this.hide())}_startPinning(e){if(!this.attachTo(e))return!1;let n=Lg(e.target);const s=e.limiter?Lg(e.limiter):Ce.document.body;if(this.listenTo(Ce.document,"scroll",(r,o)=>{const a=o.target,l=n&&a.contains(n),u=s&&a.contains(s);(l||u||!n||!s)&&this.attachTo(e)},{useCapture:!0}),this.listenTo(Ce.window,"resize",()=>{this.attachTo(e)}),!this._resizeObserver&&(n&&Qt(n)&&(n=n.parentElement),n)){const r=()=>{fo(n)||this.unpin()};this._resizeObserver=new kE(n,r)}return!0}_stopPinning(){this.stopListening(Ce.document,"scroll"),this.stopListening(Ce.window,"resize"),this._resizeObserver&&(this._resizeObserver.destroy(),this._resizeObserver=null)}static generatePositions(e={}){const{sideOffset:n=Bi.arrowSideOffset,heightOffset:s=Bi.arrowHeightOffset,stickyVerticalOffset:r=Bi.stickyVerticalOffset,config:o}=e;return{northWestArrowSouthWest:(u,h)=>({top:a(u,h),left:u.left-n,name:"arrow_sw",...o&&{config:o}}),northWestArrowSouthMiddleWest:(u,h)=>({top:a(u,h),left:u.left-h.width*.25-n,name:"arrow_smw",...o&&{config:o}}),northWestArrowSouth:(u,h)=>({top:a(u,h),left:u.left-h.width/2,name:"arrow_s",...o&&{config:o}}),northWestArrowSouthMiddleEast:(u,h)=>({top:a(u,h),left:u.left-h.width*.75+n,name:"arrow_sme",...o&&{config:o}}),northWestArrowSouthEast:(u,h)=>({top:a(u,h),left:u.left-h.width+n,name:"arrow_se",...o&&{config:o}}),northArrowSouthWest:(u,h)=>({top:a(u,h),left:u.left+u.width/2-n,name:"arrow_sw",...o&&{config:o}}),northArrowSouthMiddleWest:(u,h)=>({top:a(u,h),left:u.left+u.width/2-h.width*.25-n,name:"arrow_smw",...o&&{config:o}}),northArrowSouth:(u,h)=>({top:a(u,h),left:u.left+u.width/2-h.width/2,name:"arrow_s",...o&&{config:o}}),northArrowSouthMiddleEast:(u,h)=>({top:a(u,h),left:u.left+u.width/2-h.width*.75+n,name:"arrow_sme",...o&&{config:o}}),northArrowSouthEast:(u,h)=>({top:a(u,h),left:u.left+u.width/2-h.width+n,name:"arrow_se",...o&&{config:o}}),northEastArrowSouthWest:(u,h)=>({top:a(u,h),left:u.right-n,name:"arrow_sw",...o&&{config:o}}),northEastArrowSouthMiddleWest:(u,h)=>({top:a(u,h),left:u.right-h.width*.25-n,name:"arrow_smw",...o&&{config:o}}),northEastArrowSouth:(u,h)=>({top:a(u,h),left:u.right-h.width/2,name:"arrow_s",...o&&{config:o}}),northEastArrowSouthMiddleEast:(u,h)=>({top:a(u,h),left:u.right-h.width*.75+n,name:"arrow_sme",...o&&{config:o}}),northEastArrowSouthEast:(u,h)=>({top:a(u,h),left:u.right-h.width+n,name:"arrow_se",...o&&{config:o}}),southWestArrowNorthWest:u=>({top:l(u),left:u.left-n,name:"arrow_nw",...o&&{config:o}}),southWestArrowNorthMiddleWest:(u,h)=>({top:l(u),left:u.left-h.width*.25-n,name:"arrow_nmw",...o&&{config:o}}),southWestArrowNorth:(u,h)=>({top:l(u),left:u.left-h.width/2,name:"arrow_n",...o&&{config:o}}),southWestArrowNorthMiddleEast:(u,h)=>({top:l(u),left:u.left-h.width*.75+n,name:"arrow_nme",...o&&{config:o}}),southWestArrowNorthEast:(u,h)=>({top:l(u),left:u.left-h.width+n,name:"arrow_ne",...o&&{config:o}}),southArrowNorthWest:u=>({top:l(u),left:u.left+u.width/2-n,name:"arrow_nw",...o&&{config:o}}),southArrowNorthMiddleWest:(u,h)=>({top:l(u),left:u.left+u.width/2-h.width*.25-n,name:"arrow_nmw",...o&&{config:o}}),southArrowNorth:(u,h)=>({top:l(u),left:u.left+u.width/2-h.width/2,name:"arrow_n",...o&&{config:o}}),southArrowNorthMiddleEast:(u,h)=>({top:l(u),left:u.left+u.width/2-h.width*.75+n,name:"arrow_nme",...o&&{config:o}}),southArrowNorthEast:(u,h)=>({top:l(u),left:u.left+u.width/2-h.width+n,name:"arrow_ne",...o&&{config:o}}),southEastArrowNorthWest:u=>({top:l(u),left:u.right-n,name:"arrow_nw",...o&&{config:o}}),southEastArrowNorthMiddleWest:(u,h)=>({top:l(u),left:u.right-h.width*.25-n,name:"arrow_nmw",...o&&{config:o}}),southEastArrowNorth:(u,h)=>({top:l(u),left:u.right-h.width/2,name:"arrow_n",...o&&{config:o}}),southEastArrowNorthMiddleEast:(u,h)=>({top:l(u),left:u.right-h.width*.75+n,name:"arrow_nme",...o&&{config:o}}),southEastArrowNorthEast:(u,h)=>({top:l(u),left:u.right-h.width+n,name:"arrow_ne",...o&&{config:o}}),westArrowEast:(u,h)=>({top:u.top+u.height/2-h.height/2,left:u.left-h.width-s,name:"arrow_e",...o&&{config:o}}),eastArrowWest:(u,h)=>({top:u.top+u.height/2-h.height/2,left:u.right+s,name:"arrow_w",...o&&{config:o}}),viewportStickyNorth:(u,h,f,g)=>{const p=g||f;return!u.getIntersection(p)||p.height-u.height>r?null:{top:p.top+r,left:u.left+u.width/2-h.width/2,name:"arrowless",config:{withArrow:!1,...o}}}};function a(u,h){return u.top-h.height-s}function l(u){return u.bottom+s}}};b(Bi,"arrowSideOffset",25),b(Bi,"arrowHeightOffset",10),b(Bi,"stickyVerticalOffset",20),b(Bi,"_getOptimalPosition",TE),b(Bi,"defaultPositions",Bi.generatePositions());let oi=Bi;function Lg(i){return pa(i)?i:Ab(i)?i.commonAncestorContainer:typeof i=="function"?Lg(i()):null}class JM extends xe{constructor(t){super(t),this.setTemplate({tag:"span",attributes:{class:["ck","ck-toolbar__separator"]}})}}class zue extends xe{constructor(t){super(t),this.setTemplate({tag:"span",attributes:{class:["ck","ck-toolbar__line-break"]}})}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function jue(i){return i.bindTemplate.to(t=>{t.target===i.element&&t.preventDefault()})}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function QM(i){if(Array.isArray(i))return{items:i,removeItems:[]};const t={items:[],removeItems:[]};return i?{...t,...i}:t}const Hue={alignLeft:ve.alignLeft,bold:ve.bold,importExport:ve.importExport,paragraph:ve.paragraph,plus:ve.plus,text:ve.text,threeVerticalDots:ve.threeVerticalDots,pilcrow:ve.pilcrow,dragIndicator:ve.dragIndicator};class bu extends xe{constructor(e,n){super(e);b(this,"options");b(this,"items");b(this,"focusTracker");b(this,"keystrokes");b(this,"itemsView");b(this,"children");b(this,"focusables");b(this,"_focusCycler");b(this,"_behavior");const s=this.bindTemplate,r=this.t;this.options=n||{},this.set("ariaLabel",r("Editor toolbar")),this.set("maxWidth","auto"),this.set("role","toolbar"),this.items=this.createCollection(),this.focusTracker=new Gt,this.keystrokes=new tn,this.set("class",void 0),this.set("isCompact",!1),this.itemsView=new Uue(e),this.children=this.createCollection(),this.children.add(this.itemsView),this.focusables=this.createCollection();const o=e.uiLanguageDirection==="rtl";this._focusCycler=new fi({focusables:this.focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:[o?"arrowright":"arrowleft","arrowup"],focusNext:[o?"arrowleft":"arrowright","arrowdown"]}});const a=["ck","ck-toolbar",s.to("class"),s.if("isCompact","ck-toolbar_compact")];this.options.shouldGroupWhenFull&&this.options.isFloating&&a.push("ck-toolbar_floating"),this.setTemplate({tag:"div",attributes:{class:a,role:s.to("role"),"aria-label":s.to("ariaLabel"),style:{maxWidth:s.to("maxWidth")},tabindex:-1},children:this.children,on:{mousedown:jue(this)}}),this._behavior=this.options.shouldGroupWhenFull?new que(this):new Wue(this)}render(){super.render(),this.focusTracker.add(this.element);for(const e of this.items)this.focusTracker.add(e);this.items.on("add",(e,n)=>{this.focusTracker.add(n)}),this.items.on("remove",(e,n)=>{this.focusTracker.remove(n)}),this.keystrokes.listenTo(this.element),this._behavior.render(this)}destroy(){return this._behavior.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy(),super.destroy()}focus(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}fillFromConfig(e,n,s){this.items.addMany(this._buildItemsFromConfig(e,n,s))}_buildItemsFromConfig(e,n,s){const r=QM(e),o=s||r.removeItems;return this._cleanItemsConfiguration(r.items,n,o).map(l=>Ot(l)?this._createNestedToolbarDropdown(l,n,o):l==="|"?new JM:l==="-"?new zue:n.create(l)).filter(l=>!!l)}_cleanItemsConfiguration(e,n,s){const r=e.filter((o,a,l)=>o==="|"?!0:s.indexOf(o)!==-1?!1:o==="-"?this.options.shouldGroupWhenFull?(dt("toolbarview-line-break-ignored-when-grouping-items",l),!1):!0:!Ot(o)&&!n.has(o)?(dt("toolbarview-item-unavailable",{item:o}),!1):!0);return this._cleanSeparatorsAndLineBreaks(r)}_cleanSeparatorsAndLineBreaks(e){const n=a=>a!=="-"&&a!=="|",s=e.length,r=e.findIndex(n);if(r===-1)return[];const o=s-e.slice().reverse().findIndex(n);return e.slice(r,o).filter((a,l,u)=>n(a)?!0:!(l>0&&u[l-1]===a))}_createNestedToolbarDropdown(e,n,s){let{label:r,icon:o,items:a,tooltip:l=!0,withText:u=!1}=e;if(a=this._cleanItemsConfiguration(a,n,s),!a.length)return null;const h=this.locale,f=ti(h);return r||dt("toolbarview-nested-toolbar-dropdown-missing-label",e),f.class="ck-toolbar__nested-toolbar-dropdown",f.buttonView.set({label:r,tooltip:l,withText:!!u}),o!==!1?f.buttonView.icon=Hue[o]||o||ve.threeVerticalDots:f.buttonView.withText=!0,zb(f,()=>f.toolbarView._buildItemsFromConfig(a,n,s)),f}}class Uue extends xe{constructor(e){super(e);b(this,"children");this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-toolbar__items"]},children:this.children})}}class Wue{constructor(t){const e=t.bindTemplate;t.set("isVertical",!1),t.itemsView.children.bindTo(t.items).using(n=>n),t.focusables.bindTo(t.items).using(n=>gf(n)?n:null),t.extendTemplate({attributes:{class:[e.if("isVertical","ck-toolbar_vertical")]}})}render(){}destroy(){}}class que{constructor(t){b(this,"view");b(this,"viewChildren");b(this,"viewFocusables");b(this,"viewItemsView");b(this,"viewFocusTracker");b(this,"viewLocale");b(this,"ungroupedItems");b(this,"groupedItems");b(this,"groupedItemsDropdown");b(this,"resizeObserver",null);b(this,"cachedPadding",null);b(this,"shouldUpdateGroupingOnNextResize",!1);b(this,"viewElement");this.view=t,this.viewChildren=t.children,this.viewFocusables=t.focusables,this.viewItemsView=t.itemsView,this.viewFocusTracker=t.focusTracker,this.viewLocale=t.locale,this.ungroupedItems=t.createCollection(),this.groupedItems=t.createCollection(),this.groupedItemsDropdown=this._createGroupedItemsDropdown(),t.itemsView.children.bindTo(this.ungroupedItems).using(e=>e),this.ungroupedItems.on("change",this._updateFocusCyclableItems.bind(this)),t.children.on("change",this._updateFocusCyclableItems.bind(this)),t.items.on("change",(e,n)=>{const s=n.index,r=Array.from(n.added);for(const o of n.removed)s>=this.ungroupedItems.length?this.groupedItems.remove(o):this.ungroupedItems.remove(o);for(let o=s;o<s+r.length;o++){const a=r[o-s];o>this.ungroupedItems.length?this.groupedItems.add(a,o-this.ungroupedItems.length):this.ungroupedItems.add(a,o)}this._updateGrouping()}),t.extendTemplate({attributes:{class:["ck-toolbar_grouping"]}})}render(t){this.viewElement=t.element,this._enableGroupingOnResize(),this._enableGroupingOnMaxWidthChange(t)}destroy(){this.groupedItemsDropdown.destroy(),this.resizeObserver.destroy()}_updateGrouping(){if(!this.viewElement.ownerDocument.body.contains(this.viewElement))return;if(!fo(this.viewElement)){this.shouldUpdateGroupingOnNextResize=!0;return}const t=this.groupedItems.length;let e;for(;this._areItemsOverflowing;)this._groupLastItem(),e=!0;if(!e&&this.groupedItems.length){for(;this.groupedItems.length&&!this._areItemsOverflowing;)this._ungroupFirstItem();this._areItemsOverflowing&&this._groupLastItem()}this.groupedItems.length!==t&&this.view.fire("groupedItemsUpdate")}get _areItemsOverflowing(){if(!this.ungroupedItems.length)return!1;const t=this.viewElement,e=this.viewLocale.uiLanguageDirection,n=new Ye(t.lastChild),s=new Ye(t);if(!this.cachedPadding){const r=Ce.window.getComputedStyle(t),o=e==="ltr"?"paddingRight":"paddingLeft";this.cachedPadding=Number.parseInt(r[o])}return e==="ltr"?n.right>s.right-this.cachedPadding:n.left<s.left+this.cachedPadding}_enableGroupingOnResize(){let t;this.resizeObserver=new kE(this.viewElement,e=>{(!t||t!==e.contentRect.width||this.shouldUpdateGroupingOnNextResize)&&(this.shouldUpdateGroupingOnNextResize=!1,this._updateGrouping(),t=e.contentRect.width)}),this._updateGrouping()}_enableGroupingOnMaxWidthChange(t){t.on("change:maxWidth",()=>{this._updateGrouping()})}_groupLastItem(){this.groupedItems.length||(this.viewChildren.add(new JM),this.viewChildren.add(this.groupedItemsDropdown),this.viewFocusTracker.add(this.groupedItemsDropdown.element)),this.groupedItems.add(this.ungroupedItems.remove(this.ungroupedItems.last),0)}_ungroupFirstItem(){this.ungroupedItems.add(this.groupedItems.remove(this.groupedItems.first)),this.groupedItems.length||(this.viewChildren.remove(this.groupedItemsDropdown),this.viewChildren.remove(this.viewChildren.last),this.viewFocusTracker.remove(this.groupedItemsDropdown.element))}_createGroupedItemsDropdown(){const t=this.viewLocale,e=t.t,n=ti(t);return n.class="ck-toolbar__grouped-dropdown",n.panelPosition=t.uiLanguageDirection==="ltr"?"sw":"se",zb(n,this.groupedItems),n.buttonView.set({label:e("Show more items"),tooltip:!0,tooltipPosition:t.uiLanguageDirection==="rtl"?"se":"sw",icon:ve.threeVerticalDots}),n}_updateFocusCyclableItems(){this.viewFocusables.clear(),this.ungroupedItems.map(t=>{gf(t)&&this.viewFocusables.add(t)}),this.groupedItems.length&&this.viewFocusables.add(this.groupedItemsDropdown)}}class bf extends xe{constructor(e,n){super(e);b(this,"children");b(this,"actionView");b(this,"arrowView");b(this,"keystrokes");b(this,"focusTracker");const s=this.bindTemplate;this.set("class",void 0),this.set("labelStyle",void 0),this.set("icon",void 0),this.set("isEnabled",!0),this.set("isOn",!1),this.set("isToggleable",!1),this.set("isVisible",!0),this.set("keystroke",void 0),this.set("withKeystroke",!1),this.set("label",void 0),this.set("tabindex",-1),this.set("tooltip",!1),this.set("tooltipPosition","s"),this.set("type","button"),this.set("withText",!1),this.children=this.createCollection(),this.actionView=this._createActionView(n),this.arrowView=this._createArrowView(),this.keystrokes=new tn,this.focusTracker=new Gt,this.setTemplate({tag:"div",attributes:{class:["ck","ck-splitbutton",s.to("class"),s.if("isVisible","ck-hidden",r=>!r),this.arrowView.bindTemplate.if("isOn","ck-splitbutton_open")]},children:this.children})}render(){super.render(),this.children.add(this.actionView),this.children.add(this.arrowView),this.focusTracker.add(this.actionView.element),this.focusTracker.add(this.arrowView.element),this.keystrokes.listenTo(this.element),this.keystrokes.set("arrowright",(e,n)=>{this.focusTracker.focusedElement===this.actionView.element&&(this.arrowView.focus(),n())}),this.keystrokes.set("arrowleft",(e,n)=>{this.focusTracker.focusedElement===this.arrowView.element&&(this.actionView.focus(),n())})}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this.actionView.focus()}_createActionView(e){const n=e||new qe;return e||n.bind("icon","isEnabled","isOn","isToggleable","keystroke","label","tabindex","tooltip","tooltipPosition","type","withText").to(this),n.extendTemplate({attributes:{class:"ck-splitbutton__action"}}),n.delegate("execute").to(this),n}_createArrowView(){const e=new qe,n=e.bindTemplate;return e.icon=Fb,e.extendTemplate({attributes:{class:["ck-splitbutton__arrow"],"data-cke-tooltip-disabled":n.to("isOn"),"aria-haspopup":!0,"aria-expanded":n.to("isOn",s=>String(s))}}),e.bind("isEnabled").to(this),e.bind("label").to(this),e.bind("tooltip").to(this),e.delegate("execute").to(this,"open"),e}}function ti(i,t=XM){const e=typeof t=="function"?new t(i):t,n=new Fue(i),s=new $y(i,e,n);return e.bind("isEnabled").to(s),e instanceof bf?e.arrowView.bind("isOn").to(s,"isOpen"):e.bind("isOn").to(s,"isOpen"),Gue(s),s}function zb(i,t,e={}){i.extendTemplate({attributes:{class:["ck-toolbar-dropdown"]}}),i.isOpen?jP(i,t,e):i.once("change:isOpen",()=>jP(i,t,e),{priority:"highest"}),e.enableActiveItemFocusOnDropdownOpen&&jb(i,()=>i.toolbarView.items.find(n=>n.isOn))}function jP(i,t,e){const n=i.locale,s=n.t,r=i.toolbarView=new bu(n),o=typeof t=="function"?t():t;r.ariaLabel=e.ariaLabel||s("Dropdown toolbar"),e.maxWidth&&(r.maxWidth=e.maxWidth),e.class&&(r.class=e.class),e.isCompact&&(r.isCompact=e.isCompact),e.isVertical&&(r.isVertical=!0),o instanceof Un?r.items.bindTo(o).using(a=>a):r.items.addMany(o),i.panelView.children.add(r),i.focusTracker.add(r),r.items.delegate("execute").to(i)}function Ll(i,t,e={}){i.isOpen?HP(i,t,e):i.once("change:isOpen",()=>HP(i,t,e),{priority:"highest"}),jb(i,()=>i.listView.items.find(n=>n instanceof go?n.children.first.isOn:!1))}function HP(i,t,e){const n=i.locale,s=i.listView=new $b(n),r=typeof t=="function"?t():t;s.ariaLabel=e.ariaLabel,s.role=e.role,tL(i,s.items,r,n),i.panelView.children.add(s),s.items.delegate("execute").to(i)}function jb(i,t){i.on("change:isOpen",()=>{if(!i.isOpen)return;const e=t();e&&(typeof e.focus=="function"?e.focus():dt("ui-dropdown-focus-child-on-open-child-missing-focus",{view:e}))},{priority:ca.low-10})}function Gue(i){Kue(i),Yue(i),Zue(i),Xue(i),Jue(i),Que(i)}function Kue(i){Ta({emitter:i,activator:()=>i.isRendered&&i.isOpen,callback:()=>{i.isOpen=!1},contextElements:()=>[i.element,...eL(i.focusTracker).filter(t=>!i.element.contains(t))]})}function eL(i){return[...i.elements,...i.externalViews.flatMap(t=>eL(t.focusTracker))]}function Yue(i){i.on("execute",t=>{t.source instanceof pf||(i.isOpen=!1)})}function Zue(i){i.focusTracker.on("change:isFocused",(t,e,n)=>{n||!i.isOpen||(i.isOpen=!1)})}function Xue(i){i.keystrokes.set("arrowdown",(t,e)=>{i.isOpen&&(i.panelView.focus(),e())}),i.keystrokes.set("arrowup",(t,e)=>{i.isOpen&&(i.panelView.focusLast(),e())})}function Jue(i){i.on("change:isOpen",(t,e,n)=>{if(n)return;i.focusTracker.elements.some(r=>r.contains(Ce.document.activeElement))&&i.buttonView.focus()})}function Que(i){i.on("change:isOpen",(t,e,n)=>{n&&i.panelView.focus()},{priority:"low"})}function tL(i,t,e,n){t.on("change",()=>{const s=[...t].reduce((o,a)=>(a instanceof go&&a.children.first instanceof pu&&o.push(a.children.first),o),[]),r=s.some(o=>o.isToggleable);s.forEach(o=>{o.hasCheckSpace=r})}),t.bindTo(e).using(s=>{if(s.type==="separator")return new YE(n);if(s.type==="group"){const r=new Mg(n);return r.set({label:s.label}),tL(i,r.items,s.items,n),r.items.delegate("execute").to(i),r}else if(s.type==="button"||s.type==="switchbutton"){const r=s.model.role==="menuitemcheckbox"||s.model.role==="menuitemradio",o=new go(n);let a;return s.type==="button"?(a=new pu(n),a.set({isToggleable:r})):a=new pf(n),a.bind(...Object.keys(s.model)).to(s.model),a.delegate("execute").to(o),o.children.add(a),o}return null})}const vs=(i,t,e)=>{const n=new ZM(i.locale);return n.set({id:t,ariaDescribedById:e}),n.bind("isReadOnly").to(i,"isEnabled",s=>!s),n.bind("hasError").to(i,"errorText",s=>!!s),n.on("input",()=>{i.errorText=null}),i.bind("isEmpty","isFocused","placeholder").to(n),n},nL=(i,t,e)=>{const n=new Bue(i.locale);return n.set({id:t,ariaDescribedById:e,inputMode:"numeric"}),n.bind("isReadOnly").to(i,"isEnabled",s=>!s),n.bind("hasError").to(i,"errorText",s=>!!s),n.on("input",()=>{i.errorText=null}),i.bind("isEmpty","isFocused","placeholder").to(n),n},iL=(i,t,e)=>{const n=ti(i.locale);return n.set({id:t,ariaDescribedById:e}),n.bind("isEnabled").to(i),n},ede=150;class tde extends xe{constructor(e,n={}){super(e);b(this,"hexInputRow");b(this,"_debounceColorPickerEvent");b(this,"_config");this.set({color:"",_hexColor:""}),this.hexInputRow=this._createInputRow();const s=this.createCollection();n.hideInput||s.add(this.hexInputRow),this.setTemplate({tag:"div",attributes:{class:["ck","ck-color-picker"],tabindex:-1},children:s}),this._config=n,this._debounceColorPickerEvent=ks(r=>{this.set("color",r),this.fire("colorSelected",{color:this.color})},ede,{leading:!0}),this.on("set:color",(r,o,a)=>{r.return=GM(a,this._config.format||"hsl")}),this.on("change:color",()=>{this._hexColor=l1(this.color)}),this.on("change:_hexColor",()=>{document.activeElement!==this.picker&&this.picker.setAttribute("color",this._hexColor),l1(this.color)!=l1(this._hexColor)&&(this.color=this._hexColor)})}render(){if(super.render(),Nue("hex-color-picker",aue),this.picker=Ce.document.createElement("hex-color-picker"),this.picker.setAttribute("class","hex-color-picker"),this.picker.setAttribute("tabindex","-1"),this._createSlidersView(),this.element){this.hexInputRow.element?this.element.insertBefore(this.picker,this.hexInputRow.element):this.element.appendChild(this.picker);const e=document.createElement("style");e.textContent='[role="slider"]:focus [part$="pointer"] {border: 1px solid #fff;outline: 1px solid var(--ck-color-focus-border);box-shadow: 0 0 0 2px #fff;}',this.picker.shadowRoot.appendChild(e)}this.picker.addEventListener("color-changed",e=>{const n=e.detail.value;this._debounceColorPickerEvent(n)})}focus(){/* istanbul ignore next -- @preserve */!this._config.hideInput&&(Fe.isGecko||Fe.isiOS||Fe.isSafari||Fe.isBlink)&&this.hexInputRow.children.get(1).focus(),this.slidersView.first.focus()}_createSlidersView(){const s=[...this.picker.shadowRoot.children].filter(r=>r.getAttribute("role")==="slider").map(r=>new nde(r));this.slidersView=this.createCollection(),s.forEach(r=>{this.slidersView.add(r)})}_createInputRow(){const e=this._createColorInput();return new sde(this.locale,e)}_createColorInput(){const e=new bn(this.locale,vs),{t:n}=this.locale;return e.set({label:n("HEX"),class:"color-picker-hex-input"}),e.fieldView.bind("value").to(this,"_hexColor",s=>e.isFocused?e.fieldView.value:s.startsWith("#")?s.substring(1):s),e.fieldView.on("input",()=>{const s=e.fieldView.element.value;if(s){const r=sL(s);r&&this._debounceColorPickerEvent(r)}}),e}isValid(){const{t:e}=this.locale;return this._config.hideInput?!0:(this.resetValidationStatus(),this.hexInputRow.getParsedColor()?!0:(this.hexInputRow.inputView.errorText=e('Please enter a valid color (e.g. "ff0000").'),!1))}resetValidationStatus(){this.hexInputRow.inputView.errorText=null}}function l1(i){let t=Oue(i);return t||(t="#000"),t.length===4&&(t="#"+[t[1],t[1],t[2],t[2],t[3],t[3]].join("")),t.toLowerCase()}class nde extends xe{constructor(t){super(),this.element=t}focus(){this.element.focus()}}class ide extends xe{constructor(t){super(t),this.setTemplate({tag:"div",attributes:{class:["ck","ck-color-picker__hash-view"]},children:"#"})}}class sde extends xe{constructor(e,n){super(e);b(this,"children");b(this,"inputView");this.inputView=n,this.children=this.createCollection([new ide,this.inputView]),this.setTemplate({tag:"div",attributes:{class:["ck","ck-color-picker__row"]},children:this.children})}getParsedColor(){return sL(this.inputView.fieldView.element.value)}}function sL(i){if(!i)return null;const t=i.trim().replace(/^#/,"");return![3,4,6,8].includes(t.length)||!/^(([0-9a-fA-F]{2}){3,4}|([0-9a-fA-F]){3,4})$/.test(t)?null:`#${t}`}class rde extends yt(Hn){constructor(t){super(t),this.set("isEmpty",!0),this.on("change",()=>{this.set("isEmpty",this.length===0)})}add(t,e){return this.find(n=>n.color===t.color)?this:super.add(t,e)}hasColor(t){return!!this.find(e=>e.color===t)}}class ode extends xe{constructor(e,{colors:n,columns:s,removeButtonLabel:r,documentColorsLabel:o,documentColorsCount:a,colorPickerLabel:l,focusTracker:u,focusables:h}){super(e);b(this,"items");b(this,"colorDefinitions");b(this,"focusTracker");b(this,"columns");b(this,"documentColors");b(this,"documentColorsCount");b(this,"staticColorsGrid");b(this,"documentColorsGrid");b(this,"colorPickerButtonView");b(this,"removeColorButtonView");b(this,"_focusables");b(this,"_documentColorsLabel");b(this,"_removeButtonLabel");b(this,"_colorPickerLabel");const f=this.bindTemplate;this.set("isVisible",!0),this.focusTracker=u,this.items=this.createCollection(),this.colorDefinitions=n,this.columns=s,this.documentColors=new rde,this.documentColorsCount=a,this._focusables=h,this._removeButtonLabel=r,this._colorPickerLabel=l,this._documentColorsLabel=o,this.setTemplate({tag:"div",attributes:{class:["ck-color-grids-fragment",f.if("isVisible","ck-hidden",g=>!g)]},children:this.items}),this.removeColorButtonView=this._createRemoveColorButton(),this.items.add(this.removeColorButtonView)}updateDocumentColors(e,n){const s=e.document,r=this.documentColorsCount;this.documentColors.clear();for(const o of s.getRoots()){const a=e.createRangeIn(o);for(const l of a.getItems())if(l.is("$textProxy")&&l.hasAttribute(n)&&(this._addColorToDocumentColors(l.getAttribute(n)),this.documentColors.length>=r))return}}updateSelectedColors(){const e=this.documentColorsGrid,n=this.staticColorsGrid,s=this.selectedColor;n.selectedColor=s,e&&(e.selectedColor=s)}render(){if(super.render(),this.staticColorsGrid=this._createStaticColorsGrid(),this.items.add(this.staticColorsGrid),this.documentColorsCount){const e=Pi.bind(this.documentColors,this.documentColors),n=new xe(this.locale);n.setTemplate({tag:"span",attributes:{class:["ck","ck-color-grid__label",e.if("isEmpty","ck-hidden")]},children:[{text:this._documentColorsLabel}]}),this.items.add(n),this.documentColorsGrid=this._createDocumentColorsGrid(),this.items.add(this.documentColorsGrid)}this._createColorPickerButton(),this._addColorSelectorElementsToFocusTracker()}focus(){this.removeColorButtonView.focus()}destroy(){super.destroy()}addColorPickerButton(){this.colorPickerButtonView&&(this.items.add(this.colorPickerButtonView),this.focusTracker.add(this.colorPickerButtonView.element),this._focusables.add(this.colorPickerButtonView))}_addColorSelectorElementsToFocusTracker(){this.focusTracker.add(this.removeColorButtonView.element),this._focusables.add(this.removeColorButtonView),this.staticColorsGrid&&(this.focusTracker.add(this.staticColorsGrid.element),this._focusables.add(this.staticColorsGrid)),this.documentColorsGrid&&(this.focusTracker.add(this.documentColorsGrid.element),this._focusables.add(this.documentColorsGrid))}_createColorPickerButton(){this.colorPickerButtonView=new qe,this.colorPickerButtonView.set({label:this._colorPickerLabel,withText:!0,icon:ve.colorPalette,class:"ck-color-selector__color-picker"}),this.colorPickerButtonView.on("execute",()=>{this.fire("colorPicker:show")})}_createRemoveColorButton(){const e=new qe;return e.set({withText:!0,icon:ve.eraser,label:this._removeButtonLabel}),e.class="ck-color-selector__remove-color",e.on("execute",()=>{this.fire("execute",{value:null,source:"removeColorButton"})}),e.render(),e}_createStaticColorsGrid(){const e=new $P(this.locale,{colorDefinitions:this.colorDefinitions,columns:this.columns});return e.on("execute",(n,s)=>{this.fire("execute",{value:s.value,source:"staticColorsGrid"})}),e}_createDocumentColorsGrid(){const e=Pi.bind(this.documentColors,this.documentColors),n=new $P(this.locale,{columns:this.columns});return n.extendTemplate({attributes:{class:e.if("isEmpty","ck-hidden")}}),n.items.bindTo(this.documentColors).using(s=>{const r=new qM;return r.set({color:s.color,hasBorder:s.options&&s.options.hasBorder}),s.label&&r.set({label:s.label,tooltip:!0}),r.on("execute",()=>{this.fire("execute",{value:s.color,source:"documentColorsGrid"})}),r}),this.documentColors.on("change:isEmpty",(s,r,o)=>{o&&(n.selectedColor=null)}),n}_addColorToDocumentColors(e){const n=this.colorDefinitions.find(s=>s.color===e);n?this.documentColors.add(Object.assign({},n)):this.documentColors.add({color:e,label:e,options:{hasBorder:!1}})}}class ade extends xe{constructor(e,{focusTracker:n,focusables:s,keystrokes:r,colorPickerViewConfig:o}){super(e);b(this,"items");b(this,"colorPickerView");b(this,"saveButtonView");b(this,"cancelButtonView");b(this,"actionBarView");b(this,"focusTracker");b(this,"keystrokes");b(this,"_focusables");b(this,"_colorPickerViewConfig");this.items=this.createCollection(),this.focusTracker=n,this.keystrokes=r,this.set("isVisible",!1),this.set("selectedColor",void 0),this._focusables=s,this._colorPickerViewConfig=o;const a=this.bindTemplate,{saveButtonView:l,cancelButtonView:u}=this._createActionButtons();this.saveButtonView=l,this.cancelButtonView=u,this.actionBarView=this._createActionBarView({saveButtonView:l,cancelButtonView:u}),this.setTemplate({tag:"div",attributes:{class:["ck-color-picker-fragment",a.if("isVisible","ck-hidden",h=>!h)]},children:this.items})}render(){super.render();const e=new tde(this.locale,{...this._colorPickerViewConfig});this.colorPickerView=e,this.colorPickerView.render(),this.selectedColor&&(e.color=this.selectedColor),this.listenTo(this,"change:selectedColor",(n,s,r)=>{e.color=r}),this.items.add(this.colorPickerView),this.items.add(this.actionBarView),this._addColorPickersElementsToFocusTracker(),this._stopPropagationOnArrowsKeys(),this._executeOnEnterPress(),this._executeUponColorChange()}destroy(){super.destroy()}focus(){this.colorPickerView.focus()}resetValidationStatus(){this.colorPickerView.resetValidationStatus()}_executeOnEnterPress(){this.keystrokes.set("enter",e=>{this.isVisible&&this.focusTracker.focusedElement!==this.cancelButtonView.element&&this.colorPickerView.isValid()&&(this.fire("execute",{value:this.selectedColor}),e.stopPropagation(),e.preventDefault())})}_stopPropagationOnArrowsKeys(){const e=n=>n.stopPropagation();this.keystrokes.set("arrowright",e),this.keystrokes.set("arrowleft",e),this.keystrokes.set("arrowup",e),this.keystrokes.set("arrowdown",e)}_addColorPickersElementsToFocusTracker(){for(const n of this.colorPickerView.slidersView)this.focusTracker.add(n.element),this._focusables.add(n);const e=this.colorPickerView.hexInputRow.children.get(1);e.element&&(this.focusTracker.add(e.element),this._focusables.add(e)),this.focusTracker.add(this.saveButtonView.element),this._focusables.add(this.saveButtonView),this.focusTracker.add(this.cancelButtonView.element),this._focusables.add(this.cancelButtonView)}_createActionBarView({saveButtonView:e,cancelButtonView:n}){const s=new xe,r=this.createCollection();return r.add(e),r.add(n),s.setTemplate({tag:"div",attributes:{class:["ck","ck-color-selector_action-bar"]},children:r}),s}_createActionButtons(){const e=this.locale,n=e.t,s=new qe(e),r=new qe(e);return s.set({icon:ve.check,class:"ck-button-save",type:"button",withText:!1,label:n("Accept")}),r.set({icon:ve.cancel,class:"ck-button-cancel",type:"button",withText:!1,label:n("Cancel")}),s.on("execute",()=>{this.colorPickerView.isValid()&&this.fire("execute",{source:"colorPickerSaveButton",value:this.selectedColor})}),r.on("execute",()=>{this.fire("colorPicker:cancel")}),{saveButtonView:s,cancelButtonView:r}}_executeUponColorChange(){this.colorPickerView.on("colorSelected",(e,n)=>{this.fire("execute",{value:n.color,source:"colorPicker"}),this.set("selectedColor",n.color)})}}class ZE extends xe{constructor(e,{colors:n,columns:s,removeButtonLabel:r,documentColorsLabel:o,documentColorsCount:a,colorPickerLabel:l,colorPickerViewConfig:u}){super(e);b(this,"focusTracker");b(this,"keystrokes");b(this,"items");b(this,"colorGridsFragmentView");b(this,"colorPickerFragmentView");b(this,"_focusCycler");b(this,"_focusables");b(this,"_colorPickerViewConfig");this.items=this.createCollection(),this.focusTracker=new Gt,this.keystrokes=new tn,this._focusables=new Un,this._colorPickerViewConfig=u,this._focusCycler=new fi({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.colorGridsFragmentView=new ode(e,{colors:n,columns:s,removeButtonLabel:r,documentColorsLabel:o,documentColorsCount:a,colorPickerLabel:l,focusTracker:this.focusTracker,focusables:this._focusables}),this.colorPickerFragmentView=new ade(e,{focusables:this._focusables,focusTracker:this.focusTracker,keystrokes:this.keystrokes,colorPickerViewConfig:u}),this.set("_isColorGridsFragmentVisible",!0),this.set("_isColorPickerFragmentVisible",!1),this.set("selectedColor",void 0),this.colorGridsFragmentView.bind("isVisible").to(this,"_isColorGridsFragmentVisible"),this.colorPickerFragmentView.bind("isVisible").to(this,"_isColorPickerFragmentVisible"),this.on("change:selectedColor",(h,f,g)=>{this.colorGridsFragmentView.set("selectedColor",g),this.colorPickerFragmentView.set("selectedColor",g)}),this.colorGridsFragmentView.on("change:selectedColor",(h,f,g)=>{this.set("selectedColor",g)}),this.colorPickerFragmentView.on("change:selectedColor",(h,f,g)=>{this.set("selectedColor",g)}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-color-selector"]},children:this.items})}render(){super.render(),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}appendUI(){this._appendColorGridsFragment(),this._colorPickerViewConfig&&this._appendColorPickerFragment()}showColorPickerFragment(){!this.colorPickerFragmentView.colorPickerView||this._isColorPickerFragmentVisible||(this._isColorPickerFragmentVisible=!0,this.colorPickerFragmentView.focus(),this.colorPickerFragmentView.resetValidationStatus(),this._isColorGridsFragmentVisible=!1)}showColorGridsFragment(){this._isColorGridsFragmentVisible||(this._isColorGridsFragmentVisible=!0,this.colorGridsFragmentView.focus(),this._isColorPickerFragmentVisible=!1)}focus(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}updateDocumentColors(e,n){this.colorGridsFragmentView.updateDocumentColors(e,n)}updateSelectedColors(){this.colorGridsFragmentView.updateSelectedColors()}_appendColorGridsFragment(){this.items.length||(this.items.add(this.colorGridsFragmentView),this.colorGridsFragmentView.delegate("execute").to(this),this.colorGridsFragmentView.delegate("colorPicker:show").to(this))}_appendColorPickerFragment(){this.items.length!==2&&(this.items.add(this.colorPickerFragmentView),this.colorGridsFragmentView.colorPickerButtonView&&this.colorGridsFragmentView.colorPickerButtonView.on("execute",()=>{this.showColorPickerFragment()}),this.colorGridsFragmentView.addColorPickerButton(),this.colorPickerFragmentView.delegate("execute").to(this),this.colorPickerFragmentView.delegate("colorPicker:cancel").to(this))}}class lde{constructor(t){b(this,"editor");b(this,"_components",new Map);this.editor=t}*names(){for(const t of this._components.values())yield t.originalName}add(t,e){this._components.set(c1(t),{callback:e,originalName:t})}create(t){if(!this.has(t))throw new D("componentfactory-item-missing",this,{name:t});return this._components.get(c1(t)).callback(this.editor.locale)}has(t){return this._components.has(c1(t))}}function c1(i){return String(i).toLowerCase()}const UP="ck-tooltip",In=class In extends hi(){constructor(e){super();b(this,"tooltipTextView");b(this,"balloonPanelView");b(this,"_currentElementWithTooltip",null);b(this,"_currentTooltipPosition",null);b(this,"_mutationObserver",null);b(this,"_pinTooltipDebounced");b(this,"_unpinTooltipDebounced");b(this,"_watchdogExcluded");if(In._editors.add(e),In._instance)return In._instance;In._instance=this,this.tooltipTextView=new xe(e.locale),this.tooltipTextView.set("text",""),this.tooltipTextView.setTemplate({tag:"span",attributes:{class:["ck","ck-tooltip__text"]},children:[{text:this.tooltipTextView.bindTemplate.to("text")}]}),this.balloonPanelView=new oi(e.locale),this.balloonPanelView.class=UP,this.balloonPanelView.content.add(this.tooltipTextView),this._mutationObserver=cde(()=>{this._updateTooltipPosition()}),this._pinTooltipDebounced=ks(this._pinTooltip,600),this._unpinTooltipDebounced=ks(this._unpinTooltip,400),this.listenTo(Ce.document,"keydown",this._onKeyDown.bind(this),{useCapture:!0}),this.listenTo(Ce.document,"mouseenter",this._onEnterOrFocus.bind(this),{useCapture:!0}),this.listenTo(Ce.document,"mouseleave",this._onLeaveOrBlur.bind(this),{useCapture:!0}),this.listenTo(Ce.document,"focus",this._onEnterOrFocus.bind(this),{useCapture:!0}),this.listenTo(Ce.document,"blur",this._onLeaveOrBlur.bind(this),{useCapture:!0}),this.listenTo(Ce.document,"scroll",this._onScroll.bind(this),{useCapture:!0}),this._watchdogExcluded=!0}destroy(e){const n=e.ui.view&&e.ui.view.body;In._editors.delete(e),this.stopListening(e.ui),n&&n.has(this.balloonPanelView)&&n.remove(this.balloonPanelView),In._editors.size||(this._unpinTooltip(),this.balloonPanelView.destroy(),this.stopListening(),In._instance=null)}static getPositioningFunctions(e){const n=In.defaultBalloonPositions;return{s:[n.southArrowNorth,n.southArrowNorthEast,n.southArrowNorthWest],n:[n.northArrowSouth],e:[n.eastArrowWest],w:[n.westArrowEast],sw:[n.southArrowNorthEast],se:[n.southArrowNorthWest]}[e]}_onKeyDown(e,n){n.key==="Escape"&&this._currentElementWithTooltip&&(this._unpinTooltip(),n.stopPropagation())}_onEnterOrFocus(e,{target:n}){const s=u1(n);if(!s){e.name==="focus"&&this._unpinTooltip();return}if(s===this._currentElementWithTooltip){this._unpinTooltipDebounced.cancel();return}this._unpinTooltip(),e.name==="focus"&&!s.matches(":hover")||s.matches("[data-cke-tooltip-instant]")?this._pinTooltip(s,d1(s)):this._pinTooltipDebounced(s,d1(s))}_onLeaveOrBlur(e,{target:n,relatedTarget:s}){if(e.name==="mouseleave"){if(!pa(n))return;const r=this.balloonPanelView.element,o=r&&(r===s||r.contains(s)),a=!o&&n===r;if(o){this._unpinTooltipDebounced.cancel();return}if(!a&&this._currentElementWithTooltip&&n!==this._currentElementWithTooltip)return;const l=u1(n),u=u1(s);(a||l&&l!==u)&&(this._pinTooltipDebounced.cancel(),this._currentElementWithTooltip&&this._currentElementWithTooltip.matches("[data-cke-tooltip-instant]")||l&&l.matches("[data-cke-tooltip-instant]")?this._unpinTooltip():this._unpinTooltipDebounced())}else{if(this._currentElementWithTooltip&&n!==this._currentElementWithTooltip)return;this._pinTooltipDebounced.cancel(),this._unpinTooltipDebounced()}}_onScroll(e,{target:n}){this._currentElementWithTooltip&&(n.contains(this.balloonPanelView.element)&&n.contains(this._currentElementWithTooltip)||this._unpinTooltip())}_pinTooltip(e,{text:n,position:s,cssClass:r}){this._unpinTooltip();const o=ln(In._editors.values()).ui.view.body;o.has(this.balloonPanelView)||o.add(this.balloonPanelView),this.tooltipTextView.text=n,this.balloonPanelView.class=[UP,r].filter(a=>a).join(" "),this.balloonPanelView.pin({target:e,positions:In.getPositioningFunctions(s)}),this._mutationObserver.attach(e);for(const a of In._editors)this.listenTo(a.ui,"update",this._updateTooltipPosition.bind(this),{priority:"low"});this._currentElementWithTooltip=e,this._currentTooltipPosition=s}_unpinTooltip(){this._unpinTooltipDebounced.cancel(),this._pinTooltipDebounced.cancel(),this.balloonPanelView.unpin();for(const e of In._editors)this.stopListening(e.ui,"update");this._currentElementWithTooltip=null,this._currentTooltipPosition=null,this.tooltipTextView.text="",this._mutationObserver.detach()}_updateTooltipPosition(){if(!this._currentElementWithTooltip)return;const e=d1(this._currentElementWithTooltip);if(!fo(this._currentElementWithTooltip)||!e.text){this._unpinTooltip();return}this.balloonPanelView.pin({target:this._currentElementWithTooltip,positions:In.getPositioningFunctions(e.position)})}};b(In,"defaultBalloonPositions",oi.generatePositions({heightOffset:5,sideOffset:13})),b(In,"_editors",new Set),b(In,"_instance",null);let zy=In;function u1(i){return pa(i)?i.closest("[data-cke-tooltip-text]:not([data-cke-tooltip-disabled])"):null}function d1(i){return{text:i.dataset.ckeTooltipText,position:i.dataset.ckeTooltipPosition||"s",cssClass:i.dataset.ckeTooltipClass||""}}function cde(i){const t=new MutationObserver(()=>{i()});return{attach(e){t.observe(e,{attributes:!0,attributeFilter:["data-cke-tooltip-text","data-cke-tooltip-position"]})},detach(){t.disconnect()}}}const ude=50,dde=350;class rL extends hi(){constructor(e,n={}){super();b(this,"editor");b(this,"_balloonView",null);b(this,"_showBalloonThrottled",fu(()=>this._showBalloon(),50,{leading:!0}));b(this,"_lastFocusedEditableElement",null);b(this,"_balloonClass");this.editor=e,this._balloonClass=n.balloonClass,e.on("ready",()=>this._handleEditorReady())}destroy(){const e=this._balloonView;e&&(e.unpin(),this._balloonView=null),this._showBalloonThrottled.cancel(),this.stopListening()}_handleEditorReady(){const e=this.editor;this._isEnabled()&&e.ui.view&&(e.ui.focusTracker.on("change:isFocused",(n,s,r)=>{this._updateLastFocusedEditableElement(),r?this._showBalloon():this._hideBalloon()}),e.ui.focusTracker.on("change:focusedElement",(n,s,r)=>{this._updateLastFocusedEditableElement(),r&&this._showBalloon()}),e.ui.on("update",()=>{this._showBalloonThrottled()}))}_getNormalizedConfig(){return{side:this.editor.locale.contentLanguageDirection==="ltr"?"right":"left",position:"border",verticalOffset:0,horizontalOffset:5}}_showBalloon(){const e=this._getBalloonAttachOptions();e&&(this._balloonView||(this._balloonView=this._createBalloonView()),this._balloonView.pin(e))}_hideBalloon(){this._balloonView&&this._balloonView.unpin()}_createBalloonView(){const e=this.editor,n=new oi,s=this._createBadgeContent();return n.content.add(s),this._balloonClass&&(n.class=this._balloonClass),e.ui.view.body.add(n),n}_getBalloonAttachOptions(){if(!this._lastFocusedEditableElement)return null;const e=this._getNormalizedConfig(),n=e.side==="right"?hde(this._lastFocusedEditableElement,e):fde(this._lastFocusedEditableElement,e);return{target:this._lastFocusedEditableElement,positions:[n]}}_updateLastFocusedEditableElement(){const e=this.editor,n=e.ui.focusTracker.isFocused,s=e.ui.focusTracker.focusedElement;if(!n||!s){this._lastFocusedEditableElement=null;return}const r=Array.from(e.ui.getEditableElementsNames()).map(o=>e.ui.getEditableElement(o));r.includes(s)?this._lastFocusedEditableElement=s:this._lastFocusedEditableElement=r[0]}}function hde(i,t){return oL(i,t,(e,n)=>e.left+e.width-n.width-t.horizontalOffset)}function fde(i,t){return oL(i,t,e=>e.left+t.horizontalOffset)}function oL(i,t,e){return(n,s)=>{const r=new Ye(i);if(r.width<dde||r.height<ude)return null;let o;t.position==="inside"?o=r.bottom-s.height:o=r.bottom-s.height/2,o-=t.verticalOffset;const a=e(r,s),u=n.clone().moveTo(a,o).getIntersection(s.clone().moveTo(a,o)).getVisible();return!u||u.getArea()<s.getArea()?null:{top:o,left:a,name:`position_${t.position}-side_${t.side}`,config:{withArrow:!1}}}}var mde=`<svg xmlns="http://www.w3.org/2000/svg" width="53" height="10" viewBox="0 0 53 10"><path fill="#1C2331" d="M31.724 1.492a15.139 15.139 0 0 0 .045 1.16 2.434 2.434 0 0 0-.687-.34 3.68 3.68 0 0 0-1.103-.166 2.332 2.332 0 0 0-1.14.255 1.549 1.549 0 0 0-.686.87c-.15.41-.225.98-.225 1.712 0 .939.148 1.659.444 2.161.297.503.792.754 1.487.754.452.015.9-.094 1.294-.316.296-.174.557-.4.771-.669l.14.852h1.282V.007h-1.623v1.485ZM31 6.496a1.77 1.77 0 0 1-.494.061.964.964 0 0 1-.521-.127.758.758 0 0 1-.296-.466 3.984 3.984 0 0 1-.093-.992 4.208 4.208 0 0 1 .098-1.052.753.753 0 0 1 .307-.477 1.08 1.08 0 0 1 .55-.122c.233-.004.466.026.69.089l.483.144v2.553c-.11.076-.213.143-.307.2a1.73 1.73 0 0 1-.417.189ZM35.68 0l-.702.004c-.322.002-.482.168-.48.497l.004.581c.002.33.164.493.486.49l.702-.004c.322-.002.481-.167.48-.496L36.165.49c-.002-.33-.164-.493-.486-.491ZM36.145 2.313l-1.612.01.034 5.482 1.613-.01-.035-5.482ZM39.623.79 37.989.8 38 2.306l-.946.056.006 1.009.949-.006.024 2.983c.003.476.143.844.419 1.106.275.26.658.39 1.148.387.132 0 .293-.01.483-.03.19-.02.38-.046.57-.08.163-.028.324-.068.482-.119l-.183-1.095-.702.004a.664.664 0 0 1-.456-.123.553.553 0 0 1-.14-.422l-.016-2.621 1.513-.01-.006-1.064-1.514.01-.01-1.503ZM46.226 2.388c-.41-.184-.956-.274-1.636-.27-.673.004-1.215.101-1.627.29-.402.179-.72.505-.888.91-.18.419-.268.979-.264 1.68.004.688.1 1.24.285 1.655.172.404.495.724.9.894.414.18.957.268 1.63.264.68-.004 1.224-.099 1.632-.284.4-.176.714-.501.878-.905.176-.418.263-.971.258-1.658-.004-.702-.097-1.261-.28-1.677a1.696 1.696 0 0 0-.888-.9Zm-.613 3.607a.77.77 0 0 1-.337.501 1.649 1.649 0 0 1-1.317.009.776.776 0 0 1-.343-.497 4.066 4.066 0 0 1-.105-1.02 4.136 4.136 0 0 1 .092-1.03.786.786 0 0 1 .337-.507 1.59 1.59 0 0 1 1.316-.008.79.79 0 0 1 .344.502c.078.337.113.683.105 1.03.012.343-.019.685-.092 1.02ZM52.114 2.07a2.67 2.67 0 0 0-1.128.278c-.39.191-.752.437-1.072.73l-.157-.846-1.273.008.036 5.572 1.623-.01-.024-3.78c.35-.124.646-.22.887-.286.26-.075.53-.114.8-.118l.45-.003.144-1.546-.286.001ZM22.083 7.426l-1.576-2.532a2.137 2.137 0 0 0-.172-.253 1.95 1.95 0 0 0-.304-.29.138.138 0 0 1 .042-.04 1.7 1.7 0 0 0 .328-.374l1.75-2.71c.01-.015.025-.028.024-.048-.01-.01-.021-.007-.031-.007L20.49 1.17a.078.078 0 0 0-.075.045l-.868 1.384c-.23.366-.46.732-.688 1.099a.108.108 0 0 1-.112.06c-.098-.005-.196-.001-.294-.002-.018 0-.038.006-.055-.007.002-.02.002-.039.005-.058a4.6 4.6 0 0 0 .046-.701V1.203c0-.02-.009-.032-.03-.03h-.033L16.93 1.17c-.084 0-.073-.01-.073.076v6.491c-.001.018.006.028.025.027h1.494c.083 0 .072.007.072-.071v-2.19c0-.055-.003-.11-.004-.166a3.366 3.366 0 0 0-.05-.417h.06c.104 0 .209.002.313-.002a.082.082 0 0 1 .084.05c.535.913 1.07 1.824 1.607 2.736a.104.104 0 0 0 .103.062c.554-.003 1.107-.002 1.66-.002l.069-.003-.019-.032-.188-.304ZM27.112 6.555c-.005-.08-.004-.08-.082-.08h-2.414c-.053 0-.106-.003-.159-.011a.279.279 0 0 1-.246-.209.558.558 0 0 1-.022-.15c0-.382 0-.762-.002-1.143 0-.032.007-.049.042-.044h2.504c.029.003.037-.012.034-.038V3.814c0-.089.013-.078-.076-.078h-2.44c-.07 0-.062.003-.062-.06v-.837c0-.047.004-.093.013-.14a.283.283 0 0 1 .241-.246.717.717 0 0 1 .146-.011h2.484c.024.002.035-.009.036-.033l.003-.038.03-.496c.01-.183.024-.365.034-.548.005-.085.003-.087-.082-.094-.218-.018-.437-.038-.655-.05a17.845 17.845 0 0 0-.657-.026 72.994 72.994 0 0 0-1.756-.016 1.7 1.7 0 0 0-.471.064 1.286 1.286 0 0 0-.817.655c-.099.196-.149.413-.145.633v3.875c0 .072.003.144.011.216a1.27 1.27 0 0 0 .711 1.029c.228.113.48.167.734.158.757-.005 1.515.002 2.272-.042.274-.016.548-.034.82-.053.03-.002.043-.008.04-.041-.008-.104-.012-.208-.019-.312a69.964 69.964 0 0 1-.05-.768ZM16.14 7.415l-.127-1.075c-.004-.03-.014-.04-.044-.037a13.125 13.125 0 0 1-.998.073c-.336.01-.672.02-1.008.016-.116-.001-.233-.014-.347-.039a.746.746 0 0 1-.45-.262c-.075-.1-.132-.211-.167-.33a3.324 3.324 0 0 1-.126-.773 9.113 9.113 0 0 1-.015-.749c0-.285.022-.57.065-.852.023-.158.066-.312.127-.46a.728.728 0 0 1 .518-.443 1.64 1.64 0 0 1 .397-.048c.628-.001 1.255.003 1.882.05.022.001.033-.006.036-.026l.003-.031.06-.55c.019-.177.036-.355.057-.532.004-.034-.005-.046-.04-.056a5.595 5.595 0 0 0-1.213-.21 10.783 10.783 0 0 0-.708-.02c-.24-.003-.48.01-.719.041a3.477 3.477 0 0 0-.625.14 1.912 1.912 0 0 0-.807.497c-.185.2-.33.433-.424.688a4.311 4.311 0 0 0-.24 1.096c-.031.286-.045.572-.042.86-.006.43.024.86.091 1.286.04.25.104.497.193.734.098.279.26.53.473.734.214.205.473.358.756.446.344.11.702.17 1.063.177a8.505 8.505 0 0 0 1.578-.083 6.11 6.11 0 0 0 .766-.18c.03-.008.047-.023.037-.057a.157.157 0 0 1-.003-.025Z"/><path fill="#AFE229" d="M6.016 6.69a1.592 1.592 0 0 0-.614.21c-.23.132-.422.32-.56.546-.044.072-.287.539-.287.539l-.836 1.528.009.006c.038.025.08.046.123.063.127.046.26.07.395.073.505.023 1.011-.007 1.517-.003.29.009.58.002.869-.022a.886.886 0 0 0 .395-.116.962.962 0 0 0 .312-.286c.056-.083.114-.163.164-.249.24-.408.48-.816.718-1.226.075-.128.148-.257.222-.386l.112-.192a1.07 1.07 0 0 0 .153-.518l-1.304.023s-1.258-.005-1.388.01Z"/><path fill="#771BFF" d="m2.848 9.044.76-1.39.184-.352c-.124-.067-.245-.14-.367-.21-.346-.204-.706-.384-1.045-.6a.984.984 0 0 1-.244-.207c-.108-.134-.136-.294-.144-.46-.021-.409-.002-.818-.009-1.227-.003-.195 0-.39.003-.585.004-.322.153-.553.427-.713l.833-.488c.22-.13.44-.257.662-.385.05-.029.105-.052.158-.077.272-.128.519-.047.76.085l.044.028c.123.06.242.125.358.196.318.178.635.357.952.537.095.056.187.117.275.184.194.144.254.35.266.578.016.284.007.569.006.853-.001.28.004.558 0 .838.592-.003 1.259 0 1.259 0l.723-.013c-.003-.292-.007-.584-.007-.876 0-.524.015-1.048-.016-1.571-.024-.42-.135-.8-.492-1.067a5.02 5.02 0 0 0-.506-.339A400.52 400.52 0 0 0 5.94.787C5.722.664 5.513.524 5.282.423 5.255.406 5.228.388 5.2.373 4.758.126 4.305-.026 3.807.21c-.097.046-.197.087-.29.14A699.896 699.896 0 0 0 .783 1.948c-.501.294-.773.717-.778 1.31-.004.36-.009.718-.001 1.077.016.754-.017 1.508.024 2.261.016.304.07.6.269.848.127.15.279.28.448.382.622.4 1.283.734 1.92 1.11l.183.109Z"/></svg>
`;const gde="Powered by";class pde extends rL{constructor(t){super(t,{balloonClass:"ck-powered-by-balloon"})}_isEnabled(){const t=this.editor;if(t.config.get("ui.poweredBy.forceVisible"))return!0;const n=t.config.get("licenseKey");if(n=="GPL")return!0;const s=PE(n.split(".")[1]);return s?!s.whiteLabel:!0}_createBadgeContent(){return new bde(this.editor.locale,this._getNormalizedConfig().label)}_getNormalizedConfig(){const t=super._getNormalizedConfig(),e=this.editor.config.get("ui.poweredBy")||{},n=e.position||t.position,s=n==="inside"?5:t.verticalOffset;return{position:n,side:e.side||t.side,label:e.label===void 0?gde:e.label,verticalOffset:e.verticalOffset!==void 0?e.verticalOffset:s,horizontalOffset:e.horizontalOffset!==void 0?e.horizontalOffset:t.horizontalOffset,forceVisible:!!e.forceVisible}}}class bde extends xe{constructor(t,e){super(t);const n=new Pr,s=this.bindTemplate;n.set({content:mde,isColorInherited:!1}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-powered-by"],"aria-hidden":!0},children:[{tag:"a",attributes:{href:"https://ckeditor.com/powered-by-ckeditor/?utm_source=ckeditor&utm_medium=referral&utm_campaign=701Dn000000hVgmIAE_powered_by_ckeditor_logo",target:"_blank",tabindex:"-1"},children:[...e?[{tag:"span",attributes:{class:["ck","ck-powered-by__label"]},children:[e]}]:[],n],on:{dragstart:s.to(r=>r.preventDefault())}}]})}}class wde extends rL{constructor(e){super(e,{balloonClass:"ck-evaluation-badge-balloon"});b(this,"licenseTypeMessage",{evaluation:"For evaluation purposes only",trial:"For evaluation purposes only",development:"For development purposes only"})}_isEnabled(){const n=this.editor.config.get("licenseKey"),s=WP(n);return!!(s&&this.licenseTypeMessage[s])}_createBadgeContent(){const e=this.editor.config.get("licenseKey"),n=WP(e);return new vde(this.editor.locale,this.licenseTypeMessage[n])}_getNormalizedConfig(){const e=super._getNormalizedConfig(),n=this.editor.config.get("ui.poweredBy")||{},s=n.position||e.position,r=n.side||e.side;return{position:s,side:r==="left"?"right":"left",verticalOffset:e.verticalOffset,horizontalOffset:e.horizontalOffset}}}class vde extends xe{constructor(t,e){super(t),this.setTemplate({tag:"div",attributes:{class:["ck","ck-evaluation-badge"],"aria-hidden":!0},children:[{tag:"span",attributes:{class:["ck","ck-evaluation-badge__label"]},children:[e]}]})}}function WP(i){if(i=="GPL")return"GPL";const t=PE(i.split(".")[1]);return t?t.licenseType||"production":null}const qP={POLITE:"polite",ASSERTIVE:"assertive"};class yde{constructor(t){b(this,"editor");b(this,"view");this.editor=t,t.once("ready",()=>{for(const e of Object.values(qP))this.announce("",e)})}announce(t,e=qP.POLITE){const n=this.editor;if(!n.ui.view)return;this.view||(this.view=new _de(n.locale),n.ui.view.body.add(this.view));const{politeness:s,isUnsafeHTML:r}=typeof e=="string"?{politeness:e}:e;let o=this.view.regionViews.find(a=>a.politeness===s);o||(o=new Ede(n,s),this.view.regionViews.add(o)),o.announce({announcement:t,isUnsafeHTML:r})}}class _de extends xe{constructor(e){super(e);b(this,"regionViews");this.regionViews=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-aria-live-announcer"]},children:this.regionViews})}}class Ede extends xe{constructor(e,n){super(e.locale);b(this,"politeness");b(this,"_domConverter");b(this,"_pruneAnnouncementsInterval");this.setTemplate({tag:"div",attributes:{"aria-live":n,"aria-relevant":"additions"},children:[{tag:"ul",attributes:{class:["ck","ck-aria-live-region-list"]}}]}),e.on("destroy",()=>{this._pruneAnnouncementsInterval!==null&&(clearInterval(this._pruneAnnouncementsInterval),this._pruneAnnouncementsInterval=null)}),this.politeness=n,this._domConverter=e.data.htmlProcessor.domConverter,this._pruneAnnouncementsInterval=setInterval(()=>{this.element&&this._listElement.firstChild&&this._listElement.firstChild.remove()},5e3)}announce({announcement:e,isUnsafeHTML:n}){if(!e.trim().length)return;const s=document.createElement("li");n?this._domConverter.setContentOf(s,e):s.innerText=e,this._listElement.appendChild(s)}get _listElement(){return this.element.querySelector("ul")}}class Vl extends go{constructor(t,e){super(t);const n=this.bindTemplate;this.extendTemplate({attributes:{class:["ck-menu-bar__menu__item"]},on:{mouseenter:n.to("mouseenter")}}),this.delegate("mouseenter").to(e)}}const ig=5,xc={toggleMenusAndFocusItemsOnHover(i){i.on("menu:mouseenter",t=>{if(!(!i.isFocusBorderEnabled&&!i.isOpen)){if(i.isOpen)for(const e of i.menus){const n=t.path[0],s=n instanceof Vl&&n.children.first===e;e.isOpen=(t.path.includes(e)||s)&&e.isEnabled}t.source.focus()}})},focusCycleMenusOnArrows(i){const t=i.locale.uiLanguageDirection==="rtl";i.on("menu:arrowright",n=>{e(n.source,t?-1:1)}),i.on("menu:arrowleft",n=>{e(n.source,t?1:-1)});function e(n,s){const r=i.children.getIndex(n),o=n.isOpen,a=i.children.length,l=i.children.get((r+a+s)%a);n.isOpen=!1,o&&(l.isOpen=!0),l.buttonView.focus()}},closeMenusWhenTheBarCloses(i){i.on("change:isOpen",()=>{i.isOpen||i.menus.forEach(t=>{t.isOpen=!1})})},closeMenuWhenAnotherOnTheSameLevelOpens(i){i.on("menu:change:isOpen",(t,e,n)=>{n&&i.menus.filter(s=>t.source.parentMenuView===s.parentMenuView&&t.source!==s&&s.isOpen).forEach(s=>{s.isOpen=!1})})},closeOnClickOutside(i){Ta({emitter:i,activator:()=>i.isOpen,callback:()=>i.close(),contextElements:()=>i.children.map(t=>t.element)})},enableFocusHighlightOnInteraction(i){let t=!1;i.on("change:isOpen",(e,n,s)=>{s||(t||(i.isFocusBorderEnabled=!1),t=!1)}),i.listenTo(i.element,"keydown",()=>{t=!0},{useCapture:!0}),i.listenTo(i.element,"keyup",()=>{t=!1},{useCapture:!0}),i.listenTo(i.element,"focus",()=>{t&&(i.isFocusBorderEnabled=!0)},{useCapture:!0})}},Xo={openAndFocusPanelOnArrowDownKey(i){i.keystrokes.set("arrowdown",(t,e)=>{i.focusTracker.focusedElement===i.buttonView.element&&(i.isOpen||(i.isOpen=!0),i.panelView.focus(),e())})},openOnArrowRightKey(i){const t=i.locale.uiLanguageDirection==="rtl"?"arrowleft":"arrowright";i.keystrokes.set(t,(e,n)=>{i.focusTracker.focusedElement!==i.buttonView.element||!i.isEnabled||(i.isOpen||(i.isOpen=!0),i.panelView.focus(),n())})},openOnButtonClick(i){i.buttonView.on("execute",()=>{i.isOpen=!0})},toggleOnButtonClick(i){i.buttonView.on("execute",()=>{i.isOpen=!i.isOpen})},openAndFocusOnEnterKeyPress(i){i.keystrokes.set("enter",(t,e)=>{i.focusTracker.focusedElement===i.buttonView.element&&(i.isOpen=!0,i.panelView.focus(),e())})},closeOnArrowLeftKey(i){const t=i.locale.uiLanguageDirection==="rtl"?"arrowright":"arrowleft";i.keystrokes.set(t,(e,n)=>{i.isOpen&&(i.isOpen=!1,i.focus(),n())})},closeOnEscKey(i){i.keystrokes.set("esc",(t,e)=>{i.isOpen&&(i.isOpen=!1,i.focus(),e())})},closeOnParentClose(i){i.parentMenuView.on("change:isOpen",(t,e,n)=>{!n&&t.source===i.parentMenuView&&(i.isOpen=!1)})}},Cde={southEast:i=>({top:i.bottom,left:i.left,name:"se"}),southWest:(i,t)=>({top:i.bottom,left:i.left-t.width+i.width,name:"sw"}),northEast:(i,t)=>({top:i.top-t.height,left:i.left,name:"ne"}),northWest:(i,t)=>({top:i.top-t.height,left:i.left-t.width+i.width,name:"nw"}),eastSouth:i=>({top:i.top,left:i.right-ig,name:"es"}),eastNorth:(i,t)=>({top:i.top-t.height,left:i.right-ig,name:"en"}),westSouth:(i,t)=>({top:i.top,left:i.left-t.width+ig,name:"ws"}),westNorth:(i,t)=>({top:i.top-t.height,left:i.left-t.width+ig,name:"wn"})},xde=[{menuId:"file",label:"File",groups:[{groupId:"export",items:["menuBar:exportPdf","menuBar:exportWord"]},{groupId:"import",items:["menuBar:importWord"]},{groupId:"revisionHistory",items:["menuBar:revisionHistory"]}]},{menuId:"edit",label:"Edit",groups:[{groupId:"undo",items:["menuBar:undo","menuBar:redo"]},{groupId:"selectAll",items:["menuBar:selectAll"]},{groupId:"findAndReplace",items:["menuBar:findAndReplace"]}]},{menuId:"view",label:"View",groups:[{groupId:"sourceEditingEnhanced",items:["menuBar:sourceEditingEnhanced"]},{groupId:"sourceEditing",items:["menuBar:sourceEditing"]},{groupId:"showBlocks",items:["menuBar:showBlocks"]},{groupId:"previewMergeFields",items:["menuBar:previewMergeFields"]},{groupId:"restrictedEditing",items:["menuBar:restrictedEditing"]}]},{menuId:"insert",label:"Insert",groups:[{groupId:"insertMainWidgets",items:["menuBar:insertImage","menuBar:ckbox","menuBar:ckfinder","menuBar:insertTable"]},{groupId:"insertInline",items:["menuBar:link","menuBar:bookmark","menuBar:comment","menuBar:insertMergeField","menuBar:emoji"]},{groupId:"insertMinorWidgets",items:["menuBar:mediaEmbed","menuBar:insertTemplate","menuBar:specialCharacters","menuBar:blockQuote","menuBar:codeBlock","menuBar:htmlEmbed"]},{groupId:"insertStructureWidgets",items:["menuBar:horizontalLine","menuBar:pageBreak","menuBar:tableOfContents"]},{groupId:"restrictedEditingException",items:["menuBar:restrictedEditingException"]}]},{menuId:"format",label:"Format",groups:[{groupId:"textAndFont",items:[{menuId:"text",label:"Text",groups:[{groupId:"basicStyles",items:["menuBar:bold","menuBar:italic","menuBar:underline","menuBar:strikethrough","menuBar:superscript","menuBar:subscript","menuBar:code"]},{groupId:"textPartLanguage",items:["menuBar:textPartLanguage"]}]},{menuId:"font",label:"Font",groups:[{groupId:"fontProperties",items:["menuBar:fontSize","menuBar:fontFamily"]},{groupId:"fontColors",items:["menuBar:fontColor","menuBar:fontBackgroundColor"]},{groupId:"highlight",items:["menuBar:highlight"]}]},"menuBar:heading"]},{groupId:"list",items:["menuBar:bulletedList","menuBar:numberedList","menuBar:multiLevelList","menuBar:todoList"]},{groupId:"indent",items:["menuBar:alignment","menuBar:indent","menuBar:outdent"]},{groupId:"caseChange",items:["menuBar:caseChange"]},{groupId:"removeFormat",items:["menuBar:removeFormat"]}]},{menuId:"tools",label:"Tools",groups:[{groupId:"aiTools",items:["menuBar:aiAssistant","menuBar:aiCommands"]},{groupId:"tools",items:["menuBar:trackChanges","menuBar:commentsArchive"]}]},{menuId:"help",label:"Help",groups:[{groupId:"help",items:["menuBar:accessibilityHelp"]}]}];function kde(i){let t;return!("items"in i)||!i.items?t={items:ar(xde),addItems:[],removeItems:[],isVisible:!0,isUsingDefaultConfig:!0,...i}:t={items:i.items,removeItems:[],addItems:[],isVisible:!0,isUsingDefaultConfig:!1,...i},t}function Tde({normalizedConfig:i,locale:t,componentFactory:e,extraItems:n}){const s=ar(i);return GP(i,s,n),Sde(i,s),GP(i,s,s.addItems),Ade(i,s,e),aL(i,s),Pde(s,t),s}function Sde(i,t){const e=t.removeItems,n=[];t.items=t.items.filter(({menuId:s})=>e.includes(s)?(n.push(s),!1):!0),Nu(t.items,s=>{s.groups=s.groups.filter(({groupId:r})=>e.includes(r)?(n.push(r),!1):!0);for(const r of s.groups)r.items=r.items.filter(o=>{const a=lL(o);return e.includes(a)?(n.push(a),!1):!0})});for(const s of e)n.includes(s)||dt("menu-bar-item-could-not-be-removed",{menuBarConfig:i,itemName:s})}function GP(i,t,e){const n=[];if(e.length!=0){for(const s of e){const r=Ode(s.position),o=Nde(s.position);if(Ide(s))if(!o)r==="start"?(t.items.unshift(s.menu),n.push(s)):r==="end"&&(t.items.push(s.menu),n.push(s));else{const a=t.items.findIndex(l=>l.menuId===o);a!=-1?r==="before"?(t.items.splice(a,0,s.menu),n.push(s)):r==="after"&&(t.items.splice(a+1,0,s.menu),n.push(s)):KP(t,s.menu,o,r)&&n.push(s)}else Rde(s)?Nu(t.items,a=>{if(a.menuId===o)r==="start"?(a.groups.unshift(s.group),n.push(s)):r==="end"&&(a.groups.push(s.group),n.push(s));else{const l=a.groups.findIndex(u=>u.groupId===o);l!==-1&&(r==="before"?(a.groups.splice(l,0,s.group),n.push(s)):r==="after"&&(a.groups.splice(l+1,0,s.group),n.push(s)))}}):KP(t,s.item,o,r)&&n.push(s)}for(const s of e)n.includes(s)||dt("menu-bar-item-could-not-be-added",{menuBarConfig:i,addedItemConfig:s})}}function KP(i,t,e,n){let s=!1;return Nu(i.items,r=>{for(const{groupId:o,items:a}of r.groups){if(s)return;if(o===e)n==="start"?(a.unshift(t),s=!0):n==="end"&&(a.push(t),s=!0);else{const l=a.findIndex(u=>lL(u)===e);l!==-1&&(n==="before"?(a.splice(l,0,t),s=!0):n==="after"&&(a.splice(l+1,0,t),s=!0))}}}),s}function Ade(i,t,e){Nu(t.items,n=>{for(const s of n.groups)s.items=s.items.filter(r=>{const o=typeof r=="string"&&!e.has(r);return o&&!t.isUsingDefaultConfig&&dt("menu-bar-item-unavailable",{menuBarConfig:i,parentMenuConfig:ar(n),componentName:r}),!o})})}function aL(i,t){const e=t.isUsingDefaultConfig;let n=!1;if(t.items=t.items.filter(s=>s.groups.length?!0:(h1(i,s,e),!1)),!t.items.length){h1(i,i,e);return}Nu(t.items,s=>{s.groups=s.groups.filter(r=>r.items.length?!0:(n=!0,!1));for(const r of s.groups)r.items=r.items.filter(o=>cL(o)&&!o.groups.length?(h1(i,o,e),n=!0,!1):!0)}),n&&aL(i,t)}function h1(i,t,e){e||dt("menu-bar-menu-empty",{menuBarConfig:i,emptyMenuConfig:t})}function Pde(i,t){const e=t.t,n={File:e({string:"File",id:"MENU_BAR_MENU_FILE"}),Edit:e({string:"Edit",id:"MENU_BAR_MENU_EDIT"}),View:e({string:"View",id:"MENU_BAR_MENU_VIEW"}),Insert:e({string:"Insert",id:"MENU_BAR_MENU_INSERT"}),Format:e({string:"Format",id:"MENU_BAR_MENU_FORMAT"}),Tools:e({string:"Tools",id:"MENU_BAR_MENU_TOOLS"}),Help:e({string:"Help",id:"MENU_BAR_MENU_HELP"}),Text:e({string:"Text",id:"MENU_BAR_MENU_TEXT"}),Font:e({string:"Font",id:"MENU_BAR_MENU_FONT"})};Nu(i.items,s=>{s.label in n&&(s.label=n[s.label])})}function Nu(i,t){if(Array.isArray(i))for(const n of i)e(n);function e(n){t(n);for(const s of n.groups)for(const r of s.items)cL(r)&&e(r)}}function Ide(i){return typeof i=="object"&&"menu"in i}function Rde(i){return typeof i=="object"&&"group"in i}function Ode(i){return i.startsWith("start")?"start":i.startsWith("end")?"end":i.startsWith("after")?"after":"before"}function Nde(i){const t=i.match(/^[^:]+:(.+)/);return t?t[1]:null}function lL(i){return typeof i=="string"?i:i.menuId}function cL(i){return typeof i=="object"&&"menuId"in i}class Mde extends yt(){constructor(e){super();b(this,"editor");b(this,"componentFactory");b(this,"focusTracker");b(this,"tooltipManager");b(this,"poweredBy");b(this,"evaluationBadge");b(this,"ariaLiveAnnouncer");b(this,"isReady",!1);b(this,"_editableElementsMap",new Map);b(this,"_focusableToolbarDefinitions",[]);b(this,"_extraMenuBarElements",[]);b(this,"_lastFocusedForeignElement",null);const n=e.editing.view;this.editor=e,this.componentFactory=new lde(e),this.focusTracker=new Gt,this.tooltipManager=new zy(e),this.poweredBy=new pde(e),this.evaluationBadge=new wde(e),this.ariaLiveAnnouncer=new yde(e),this.set("viewportOffset",this._readViewportOffsetFromConfig()),this.once("ready",()=>{this._bindBodyCollectionWithFocusTracker(),this.isReady=!0}),this.listenTo(n.document,"layoutChanged",this.update.bind(this)),this.listenTo(n,"scrollToTheSelection",this._handleScrollToTheSelection.bind(this)),this._initFocusTracking()}get element(){return null}update(){this.fire("update")}destroy(){this.stopListening(),this.focusTracker.destroy(),this.tooltipManager.destroy(this.editor),this.poweredBy.destroy(),this.evaluationBadge.destroy();for(const e of this._editableElementsMap.values())e.ckeditorInstance=null,this.editor.keystrokes.stopListening(e);this._editableElementsMap=new Map,this._focusableToolbarDefinitions=[]}setEditableElement(e,n){this._editableElementsMap.set(e,n),n.ckeditorInstance||(n.ckeditorInstance=this.editor),this.focusTracker.add(n);const s=()=>{this.editor.editing.view.getDomRoot(e)||this.editor.keystrokes.listenTo(n)};this.isReady?s():this.once("ready",s)}removeEditableElement(e){const n=this._editableElementsMap.get(e);n&&(this._editableElementsMap.delete(e),this.editor.keystrokes.stopListening(n),this.focusTracker.remove(n),n.ckeditorInstance=null)}getEditableElement(e="main"){return this._editableElementsMap.get(e)}getEditableElementsNames(){return this._editableElementsMap.keys()}addToolbar(e,n={}){e.isRendered?(this.focusTracker.add(e),this.editor.keystrokes.listenTo(e.element)):e.once("render",()=>{this.focusTracker.add(e),this.editor.keystrokes.listenTo(e.element)}),this._focusableToolbarDefinitions.push({toolbarView:e,options:n})}extendMenuBar(e){this._extraMenuBarElements.push(e)}get _editableElements(){return console.warn("editor-ui-deprecated-editable-elements: The EditorUI#_editableElements property has been deprecated and will be removed in the near future.",{editorUI:this}),this._editableElementsMap}_initMenuBar(e){const n=e.element;this.focusTracker.add(n),this.editor.keystrokes.listenTo(n);const s=kde(this.editor.config.get("menuBar")||{});e.fillFromConfig(s,this.componentFactory,this._extraMenuBarElements),this.editor.keystrokes.set("Esc",(r,o)=>{n.contains(this.editor.ui.focusTracker.focusedElement)&&(this._lastFocusedForeignElement?(this._lastFocusedForeignElement.focus(),this._lastFocusedForeignElement=null):this.editor.editing.view.focus(),o())}),this.editor.keystrokes.set("Alt+F9",(r,o)=>{n.contains(this.editor.ui.focusTracker.focusedElement)||(this._saveLastFocusedForeignElement(),e.isFocusBorderEnabled=!0,e.focus(),o())})}_readViewportOffsetFromConfig(){const e=this.editor,n=e.config.get("ui.viewportOffset");if(n)return n;const s=e.config.get("toolbar.viewportTopOffset");return s?(console.warn("editor-ui-deprecated-viewport-offset-config: The `toolbar.vieportTopOffset` configuration option is deprecated. It will be removed from future CKEditor versions. Use `ui.viewportOffset.top` instead."),{top:s}):{top:0}}_initFocusTracking(){const e=this.editor;let n;e.keystrokes.set("Alt+F10",(s,r)=>{this._saveLastFocusedForeignElement();const o=this._getCurrentFocusedToolbarDefinition();(!o||!n)&&(n=this._getFocusableCandidateToolbarDefinitions());for(let a=0;a<n.length;a++){const l=n.shift();if(n.push(l),l!==o&&this._focusFocusableCandidateToolbar(l)){o&&o.options.afterBlur&&o.options.afterBlur();break}}r()}),e.keystrokes.set("Esc",(s,r)=>{const o=this._getCurrentFocusedToolbarDefinition();o&&(this._lastFocusedForeignElement?(this._lastFocusedForeignElement.focus(),this._lastFocusedForeignElement=null):e.editing.view.focus(),o.options.afterBlur&&o.options.afterBlur(),r())})}_saveLastFocusedForeignElement(){const e=this.focusTracker.focusedElement;Array.from(this._editableElementsMap.values()).includes(e)&&!Array.from(this.editor.editing.view.domRoots.values()).includes(e)&&(this._lastFocusedForeignElement=e)}_getFocusableCandidateToolbarDefinitions(){const e=[];for(const n of this._focusableToolbarDefinitions){const{toolbarView:s,options:r}=n;(fo(s.element)||r.beforeFocus)&&e.push(n)}return e.sort((n,s)=>YP(n)-YP(s)),e}_getCurrentFocusedToolbarDefinition(){for(const e of this._focusableToolbarDefinitions)if(e.toolbarView.element&&e.toolbarView.element.contains(this.focusTracker.focusedElement))return e;return null}_focusFocusableCandidateToolbar(e){const{toolbarView:n,options:{beforeFocus:s}}=e;return s&&s(),fo(n.element)?(n.focus(),!0):!1}_handleScrollToTheSelection(e,n){const s={top:0,bottom:0,left:0,right:0,...this.viewportOffset};n.viewportOffset.top+=s.top,n.viewportOffset.bottom+=s.bottom,n.viewportOffset.left+=s.left,n.viewportOffset.right+=s.right}_bindBodyCollectionWithFocusTracker(){const e=this.view.body;for(const n of e)this.focusTracker.add(n.element);e.on("add",(n,s)=>{this.focusTracker.add(s.element)}),e.on("remove",(n,s)=>{this.focusTracker.remove(s.element)})}}function YP(i){const{toolbarView:t,options:e}=i;let n=10;return fo(t.element)&&n--,e.isContextual&&n--,n}class Lde extends xe{constructor(e){super(e);b(this,"body");b(this,"menuBarView");this.body=new Fy(e)}render(){super.render(),this.body.attachToDom()}destroy(){return this.body.detachFromDom(),super.destroy()}}class Vde extends Lde{constructor(e){super(e);b(this,"top");b(this,"main");b(this,"_voiceLabelView");this.top=this.createCollection(),this.main=this.createCollection(),this._voiceLabelView=this._createVoiceLabel(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-reset","ck-editor","ck-rounded-corners"],role:"application",dir:e.uiLanguageDirection,lang:e.uiLanguage,"aria-labelledby":this._voiceLabelView.id},children:[this._voiceLabelView,{tag:"div",attributes:{class:["ck","ck-editor__top","ck-reset_all"],role:"presentation"},children:this.top},{tag:"div",attributes:{class:["ck","ck-editor__main"],role:"presentation"},children:this.main}]})}_createVoiceLabel(){const e=this.t,n=new ws;return n.text=e("Rich Text Editor"),n.extendTemplate({attributes:{class:"ck-voice-label"}}),n}}class Dde extends xe{constructor(e,n,s){super(e);b(this,"name",null);b(this,"_editingView");b(this,"_editableElement");b(this,"_hasExternalElement");this.setTemplate({tag:"div",attributes:{class:["ck","ck-content","ck-editor__editable","ck-rounded-corners"],lang:e.contentLanguage,dir:e.contentLanguageDirection}}),this.set("isFocused",!1),this._editableElement=s,this._hasExternalElement=!!this._editableElement,this._editingView=n}render(){super.render(),this._hasExternalElement?this.template.apply(this.element=this._editableElement):this._editableElement=this.element,this.on("change:isFocused",()=>this._updateIsFocusedClasses()),this._updateIsFocusedClasses()}destroy(){this._hasExternalElement&&this.template.revert(this._editableElement),super.destroy()}get hasExternalElement(){return this._hasExternalElement}_updateIsFocusedClasses(){const e=this._editingView;e.isRenderingInProgress?s(this):n(this);function n(r){e.change(o=>{const a=e.document.getRoot(r.name);o.addClass(r.isFocused?"ck-focused":"ck-blurred",a),o.removeClass(r.isFocused?"ck-blurred":"ck-focused",a)})}function s(r){e.once("change:isRenderingInProgress",(o,a,l)=>{l?s(r):n(r)})}}}class Bde extends Dde{constructor(e,n,s,r={}){super(e,n,s);b(this,"_options");this._options=r,this.extendTemplate({attributes:{role:"textbox",class:"ck-editor__editable_inline"}})}render(){super.render();const e=this._editingView;e.change(n=>{const s=e.document.getRoot(this.name);n.setAttribute("aria-label",this.getEditableAriaLabel(),s)})}getEditableAriaLabel(){const e=this.locale.t,n=this._options.label,s=this._editableElement,r=this.name;if(typeof n=="string")return n;if(typeof n=="object")return n[r];if(typeof n=="function")return n(this);if(s){const o=s.getAttribute("aria-label");if(o)return o}return e("Rich Text Editor. Editing area: %0",r)}}class ZP extends Db{static get pluginName(){return"Notification"}static get isOfficialPlugin(){return!0}init(){this.on("show:warning",(t,e)=>{window.alert(e.message)},{priority:"lowest"})}showSuccess(t,e={}){this._showNotification({message:t,type:"success",namespace:e.namespace,title:e.title})}showInfo(t,e={}){this._showNotification({message:t,type:"info",namespace:e.namespace,title:e.title})}showWarning(t,e={}){this._showNotification({message:t,type:"warning",namespace:e.namespace,title:e.title})}_showNotification(t){const e=t.namespace?`show:${t.type}:${t.namespace}`:`show:${t.type}`;this.fire(e,{message:t.message,type:t.type,title:t.title||""})}}class xl extends yt(){constructor(t,e){super(),e&&MN(this,e),t&&this.set(t)}}const sg=ff("px");class nr extends J{constructor(e){super(e);b(this,"positionLimiter");b(this,"visibleStack");b(this,"_viewToStack",new Map);b(this,"_idToStack",new Map);b(this,"_view",null);b(this,"_rotatorView",null);b(this,"_fakePanelsView",null);this.positionLimiter=()=>{const n=this.editor.editing.view,r=n.document.selection.editableElement;return r?n.domConverter.mapViewToDom(r.root):null},this.decorate("getPositionOptions"),this.set("visibleView",null),this.set("_numberOfStacks",0),this.set("_singleViewMode",!1)}static get pluginName(){return"ContextualBalloon"}static get isOfficialPlugin(){return!0}destroy(){super.destroy(),this._view&&this._view.destroy(),this._rotatorView&&this._rotatorView.destroy(),this._fakePanelsView&&this._fakePanelsView.destroy()}get view(){return this._view||this._createPanelView(),this._view}hasView(e){return Array.from(this._viewToStack.keys()).includes(e)}add(e){if(this._view||this._createPanelView(),this.hasView(e.view))throw new D("contextualballoon-add-view-exist",[this,e]);const n=e.stackId||"main";if(!this._idToStack.has(n)){this._idToStack.set(n,new Map([[e.view,e]])),this._viewToStack.set(e.view,this._idToStack.get(n)),this._numberOfStacks=this._idToStack.size,(!this._visibleStack||e.singleViewMode)&&this.showStack(n);return}const s=this._idToStack.get(n);e.singleViewMode&&this.showStack(n),s.set(e.view,e),this._viewToStack.set(e.view,s),s===this._visibleStack&&this._showView(e)}remove(e){if(!this.hasView(e))throw new D("contextualballoon-remove-view-not-exist",[this,e]);const n=this._viewToStack.get(e);this._singleViewMode&&this.visibleView===e&&(this._singleViewMode=!1),this.visibleView===e&&(n.size===1?this._idToStack.size>1?this._showNextStack():(this.view.hide(),this.visibleView=null,this._rotatorView.hideView()):this._showView(Array.from(n.values())[n.size-2])),n.size===1?(this._idToStack.delete(this._getStackId(n)),this._numberOfStacks=this._idToStack.size):n.delete(e),this._viewToStack.delete(e)}updatePosition(e){e&&(this._visibleStack.get(this.visibleView).position=e),this.view.pin(this.getPositionOptions()),this._fakePanelsView.updatePosition()}getPositionOptions(){let e=Array.from(this._visibleStack.values()).pop().position;return e&&(e.limiter||(e=Object.assign({},e,{limiter:this.positionLimiter})),e=Object.assign({},e,{viewportOffsetConfig:this.editor.ui.viewportOffset})),e}showStack(e){this.visibleStack=e;const n=this._idToStack.get(e);if(!n)throw new D("contextualballoon-showstack-stack-not-exist",this);this._visibleStack!==n&&this._showView(Array.from(n.values()).pop())}_createPanelView(){this._view=new oi(this.editor.locale),this.editor.ui.view.body.add(this._view),this._rotatorView=this._createRotatorView(),this._fakePanelsView=this._createFakePanelsView()}get _visibleStack(){return this._viewToStack.get(this.visibleView)}_getStackId(e){return Array.from(this._idToStack.entries()).find(s=>s[1]===e)[0]}_showNextStack(){const e=Array.from(this._idToStack.values());let n=e.indexOf(this._visibleStack)+1;e[n]||(n=0),this.showStack(this._getStackId(e[n]))}_showPrevStack(){const e=Array.from(this._idToStack.values());let n=e.indexOf(this._visibleStack)-1;e[n]||(n=e.length-1),this.showStack(this._getStackId(e[n]))}_createRotatorView(){const e=new Fde(this.editor.locale),n=this.editor.locale.t;return this.view.content.add(e),e.bind("isNavigationVisible").to(this,"_numberOfStacks",this,"_singleViewMode",(s,r)=>!r&&s>1),e.on("change:isNavigationVisible",()=>this.updatePosition(),{priority:"low"}),e.bind("counter").to(this,"visibleView",this,"_numberOfStacks",(s,r)=>{if(r<2)return"";const o=Array.from(this._idToStack.values()).indexOf(this._visibleStack)+1;return n("%0 of %1",[o,r])}),e.buttonNextView.on("execute",()=>{e.focusTracker.isFocused&&this.editor.editing.view.focus(),this._showNextStack()}),e.buttonPrevView.on("execute",()=>{e.focusTracker.isFocused&&this.editor.editing.view.focus(),this._showPrevStack()}),e}_createFakePanelsView(){const e=new $de(this.editor.locale,this.view);return e.bind("numberOfPanels").to(this,"_numberOfStacks",this,"_singleViewMode",(n,s)=>!s&&n>=2?Math.min(n-1,2):0),e.listenTo(this.view,"change:top",()=>e.updatePosition()),e.listenTo(this.view,"change:left",()=>e.updatePosition()),this.editor.ui.view.body.add(e),e}_showView({view:e,balloonClassName:n="",withArrow:s=!0,singleViewMode:r=!1}){this.view.class=n,this.view.withArrow=s,this._rotatorView.showView(e),this.visibleView=e,this.view.pin(this.getPositionOptions()),this._fakePanelsView.updatePosition(),r&&(this._singleViewMode=!0)}}class Fde extends xe{constructor(e){super(e);b(this,"focusTracker");b(this,"buttonPrevView");b(this,"buttonNextView");b(this,"content");const n=e.t,s=this.bindTemplate;this.set("isNavigationVisible",!0),this.focusTracker=new Gt,this.buttonPrevView=this._createButtonView(n("Previous"),ve.previousArrow),this.buttonNextView=this._createButtonView(n("Next"),ve.nextArrow),this.content=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-balloon-rotator"],"z-index":"-1"},children:[{tag:"div",attributes:{class:["ck-balloon-rotator__navigation",s.to("isNavigationVisible",r=>r?"":"ck-hidden")]},children:[this.buttonPrevView,{tag:"span",attributes:{class:["ck-balloon-rotator__counter"]},children:[{text:s.to("counter")}]},this.buttonNextView]},{tag:"div",attributes:{class:"ck-balloon-rotator__content"},children:this.content}]})}render(){super.render(),this.focusTracker.add(this.element)}destroy(){super.destroy(),this.focusTracker.destroy()}showView(e){this.hideView(),this.content.add(e)}hideView(){this.content.clear()}_createButtonView(e,n){const s=new qe(this.locale);return s.set({label:e,icon:n,tooltip:!0}),s}}class $de extends xe{constructor(e,n){super(e);b(this,"content");b(this,"_balloonPanelView");const s=this.bindTemplate;this.set("top",0),this.set("left",0),this.set("height",0),this.set("width",0),this.set("numberOfPanels",0),this.content=this.createCollection(),this._balloonPanelView=n,this.setTemplate({tag:"div",attributes:{class:["ck-fake-panel",s.to("numberOfPanels",r=>r?"":"ck-hidden")],style:{top:s.to("top",sg),left:s.to("left",sg),width:s.to("width",sg),height:s.to("height",sg)}},children:this.content}),this.on("change:numberOfPanels",(r,o,a,l)=>{a>l?this._addPanels(a-l):this._removePanels(l-a),this.updatePosition()})}_addPanels(e){for(;e--;){const n=new xe;n.setTemplate({tag:"div"}),this.content.add(n),this.registerChild(n)}}_removePanels(e){for(;e--;){const n=this.content.last;this.content.remove(n),this.deregisterChild(n),n.destroy()}}updatePosition(){if(this.numberOfPanels){const{top:e,left:n}=this._balloonPanelView,{width:s,height:r}=new Ye(this._balloonPanelView.element);Object.assign(this,{top:e,left:n,width:s,height:r})}}}const kc=ff("px");class zde extends xe{constructor(e){super(e);b(this,"content");b(this,"contentPanelElement");b(this,"_contentPanelPlaceholder");const n=this.bindTemplate;this.set("isActive",!1),this.set("isSticky",!1),this.set("limiterElement",null),this.set("limiterBottomOffset",50),this.set("viewportTopOffset",0),this.set("_marginLeft",null),this.set("_isStickyToTheBottomOfLimiter",!1),this.set("_stickyTopOffset",null),this.set("_stickyBottomOffset",null),this.content=this.createCollection(),this._contentPanelPlaceholder=new Pi({tag:"div",attributes:{class:["ck","ck-sticky-panel__placeholder"],style:{display:n.to("isSticky",s=>s?"block":"none"),height:n.to("isSticky",s=>s?kc(this._contentPanelRect.height):null)}}}).render(),this.contentPanelElement=new Pi({tag:"div",attributes:{class:["ck","ck-sticky-panel__content",n.if("isSticky","ck-sticky-panel__content_sticky"),n.if("_isStickyToTheBottomOfLimiter","ck-sticky-panel__content_sticky_bottom-limit")],style:{width:n.to("isSticky",s=>s?kc(this._contentPanelPlaceholder.getBoundingClientRect().width):null),top:n.to("_stickyTopOffset",s=>s&&kc(s)),bottom:n.to("_stickyBottomOffset",s=>s&&kc(s)),marginLeft:n.to("_marginLeft")}},children:this.content}).render(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-sticky-panel"]},children:[this._contentPanelPlaceholder,this.contentPanelElement]})}render(){super.render(),this.checkIfShouldBeSticky(),this.listenTo(Ce.document,"scroll",()=>{this.checkIfShouldBeSticky()},{useCapture:!0}),this.listenTo(this,"change:isActive",()=>{this.checkIfShouldBeSticky()})}checkIfShouldBeSticky(){if(!this.limiterElement||!this.isActive){this._unstick();return}const e=new Ye(this.limiterElement);let n=e.getVisible();if(n){const s=new Ye(Ce.window);s.top+=this.viewportTopOffset,s.height-=this.viewportTopOffset,n=n.getIntersection(s)}if(n&&e.top<n.top){const s=n.top;if(s+this._contentPanelRect.height+this.limiterBottomOffset>n.bottom){const r=Math.max(e.bottom-n.bottom,0)+this.limiterBottomOffset;e.bottom-r>e.top+this._contentPanelRect.height?this._stickToBottomOfLimiter(r):this._unstick()}else this._contentPanelRect.height+this.limiterBottomOffset<e.height?this._stickToTopOfAncestors(s):this._unstick()}else this._unstick()}_stickToTopOfAncestors(e){this.isSticky=!0,this._isStickyToTheBottomOfLimiter=!1,this._stickyTopOffset=e,this._stickyBottomOffset=null,this._marginLeft=kc(-Ce.window.scrollX)}_stickToBottomOfLimiter(e){this.isSticky=!0,this._isStickyToTheBottomOfLimiter=!0,this._stickyTopOffset=null,this._stickyBottomOffset=e,this._marginLeft=kc(-Ce.window.scrollX)}_unstick(){this.isSticky=!1,this._isStickyToTheBottomOfLimiter=!1,this._stickyTopOffset=null,this._stickyBottomOffset=null,this._marginLeft=null}get _contentPanelRect(){return new Ye(this.contentPanelElement)}}class jde extends pu{constructor(e){super(e);b(this,"arrowView");const n=this.bindTemplate;this.set({withText:!0,role:"menuitem"}),this.arrowView=this._createArrowView(),this.extendTemplate({attributes:{class:["ck-menu-bar__menu__button"],"aria-haspopup":!0,"aria-expanded":this.bindTemplate.to("isOn",s=>String(s)),"data-cke-tooltip-disabled":n.to("isOn")},on:{mouseenter:n.to("mouseenter")}})}render(){super.render(),this.children.add(this.arrowView)}_createArrowView(){const e=new Pr;return e.content=Fb,e.extendTemplate({attributes:{class:"ck-menu-bar__menu__button__arrow"}}),e}}class Hde extends xe{constructor(e){super(e);b(this,"children");const n=this.bindTemplate;this.set("isVisible",!1),this.set("position","se"),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-reset","ck-menu-bar__menu__panel",n.to("position",s=>`ck-menu-bar__menu__panel_position_${s}`),n.if("isVisible","ck-hidden",s=>!s)],tabindex:"-1"},children:this.children,on:{selectstart:n.to(s=>{s.target.tagName.toLocaleLowerCase()!=="input"&&s.preventDefault()})}})}focus(e=1){this.children.length&&(e===1?this.children.first.focus():this.children.last.focus())}}const zp=class zp extends xe{constructor(e){super(e);b(this,"buttonView");b(this,"panelView");b(this,"focusTracker");b(this,"keystrokes");const n=this.bindTemplate;this.buttonView=new jde(e),this.buttonView.delegate("mouseenter").to(this),this.buttonView.bind("isOn","isEnabled").to(this,"isOpen","isEnabled"),this.panelView=new Hde(e),this.panelView.bind("isVisible").to(this,"isOpen"),this.keystrokes=new tn,this.focusTracker=new Gt,this.set("isOpen",!1),this.set("isEnabled",!0),this.set("panelPosition","w"),this.set("class",void 0),this.set("parentMenuView",null),this.setTemplate({tag:"div",attributes:{class:["ck","ck-menu-bar__menu",n.to("class"),n.if("isEnabled","ck-disabled",s=>!s),n.if("parentMenuView","ck-menu-bar__menu_top-level",s=>!s)]},children:[this.buttonView,this.panelView]})}render(){super.render(),this.focusTracker.add(this.buttonView.element),this.focusTracker.add(this.panelView.element),this.keystrokes.listenTo(this.element),Xo.closeOnEscKey(this),this._repositionPanelOnOpen()}_attachBehaviors(){this.parentMenuView?(Xo.openOnButtonClick(this),Xo.openOnArrowRightKey(this),Xo.closeOnArrowLeftKey(this),Xo.openAndFocusOnEnterKeyPress(this),Xo.closeOnParentClose(this)):(this._propagateArrowKeystrokeEvents(),Xo.openAndFocusPanelOnArrowDownKey(this),Xo.toggleOnButtonClick(this))}_propagateArrowKeystrokeEvents(){this.keystrokes.set("arrowright",(e,n)=>{this.fire("arrowright"),n()}),this.keystrokes.set("arrowleft",(e,n)=>{this.fire("arrowleft"),n()})}_repositionPanelOnOpen(){this.on("change:isOpen",(e,n,s)=>{if(!s)return;const r=zp._getOptimalPosition({element:this.panelView.element,target:this.buttonView.element,fitInViewport:!0,positions:this._panelPositions});this.panelView.position=r?r.name:this._defaultMenuPositionName})}focus(){this.buttonView.focus()}get _panelPositions(){const{southEast:e,southWest:n,northEast:s,northWest:r,westSouth:o,eastSouth:a,westNorth:l,eastNorth:u}=Cde;return this.locale.uiLanguageDirection==="ltr"?this.parentMenuView?[a,u,o,l]:[e,n,s,r]:this.parentMenuView?[o,l,a,u]:[n,e,r,s]}get _defaultMenuPositionName(){return this.locale.uiLanguageDirection==="ltr"?this.parentMenuView?"es":"se":this.parentMenuView?"ws":"sw"}};b(zp,"_getOptimalPosition",TE);let Yi=zp;class kl extends $b{constructor(t){super(t),this.role="menu",this.items.on("change",this._setItemsCheckSpace.bind(this))}_setItemsCheckSpace(){const t=Array.from(this.items).some(e=>{const n=XP(e);return n&&n.isToggleable});this.items.forEach(e=>{const n=XP(e);n&&(n.hasCheckSpace=t)})}}function XP(i){return i instanceof go?i.children.map(t=>Ude(t)?t.buttonView:t).find(t=>t instanceof pu):null}function Ude(i){return typeof i=="object"&&"buttonView"in i&&i.buttonView instanceof qe}class uL extends Aue{constructor(t){super(t),this.set({withText:!0,withKeystroke:!0,tooltip:!1,role:"menuitem"}),this.extendTemplate({attributes:{class:["ck-menu-bar__menu__item__button"]}})}}const JP=["mouseenter","arrowleft","arrowright","change:isOpen"];class Wde extends xe{constructor(e){super(e);b(this,"children");b(this,"menus",[]);const n=e.t,s=this.bindTemplate;this.set({isOpen:!1,isFocusBorderEnabled:!1}),this._setupIsOpenUpdater(),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-menu-bar",s.if("isFocusBorderEnabled","ck-menu-bar_focus-border-enabled")],"aria-label":n("Editor menu bar"),role:"menubar"},children:this.children})}fillFromConfig(e,n,s=[]){const r=this.locale,a=Tde({normalizedConfig:e,locale:r,componentFactory:n,extraItems:s}).items.map(l=>this._createMenu({componentFactory:n,menuDefinition:l}));this.children.addMany(a)}render(){super.render(),xc.toggleMenusAndFocusItemsOnHover(this),xc.closeMenusWhenTheBarCloses(this),xc.closeMenuWhenAnotherOnTheSameLevelOpens(this),xc.focusCycleMenusOnArrows(this),xc.closeOnClickOutside(this),xc.enableFocusHighlightOnInteraction(this)}focus(){this.children.first&&this.children.first.focus()}close(){for(const e of this.children)e.isOpen=!1}registerMenu(e,n=null){n?(e.delegate(...JP).to(n),e.parentMenuView=n):e.delegate(...JP).to(this,s=>"menu:"+s),e._attachBehaviors(),this.menus.push(e)}_createMenu({componentFactory:e,menuDefinition:n,parentMenuView:s}){const r=this.locale,o=new Yi(r);return this.registerMenu(o,s),o.buttonView.set({label:n.label}),o.once("change:isOpen",()=>{const a=new kl(r);a.ariaLabel=n.label,o.panelView.children.add(a),a.items.addMany(this._createMenuItems({menuDefinition:n,parentMenuView:o,componentFactory:e}))}),o}_createMenuItems({menuDefinition:e,parentMenuView:n,componentFactory:s}){const r=this.locale,o=[];for(const a of e.groups){for(const l of a.items){const u=new Vl(r,n);if(Ot(l))u.children.add(this._createMenu({componentFactory:s,menuDefinition:l,parentMenuView:n}));else{const h=this._createMenuItemContentFromFactory({componentName:l,componentFactory:s,parentMenuView:n});if(!h)continue;u.children.add(h)}o.push(u)}a!==e.groups[e.groups.length-1]&&o.push(new YE(r))}return o}_createMenuItemContentFromFactory({componentName:e,parentMenuView:n,componentFactory:s}){const r=s.create(e);return r instanceof Yi||r instanceof Ln||r instanceof uL?(this._registerMenuTree(r,n),r.on("execute",()=>{this.close()}),r):(dt("menu-bar-component-unsupported",{componentName:e,componentView:r}),null)}_registerMenuTree(e,n){if(!(e instanceof Yi)){e.delegate("mouseenter").to(n);return}this.registerMenu(e,n);const s=e.panelView.children.filter(o=>o instanceof kl)[0];if(!s){e.delegate("mouseenter").to(n);return}const r=s.items.filter(o=>o instanceof go);for(const o of r)this._registerMenuTree(o.children.get(0),e)}_setupIsOpenUpdater(){let e;this.on("menu:change:isOpen",(n,s,r)=>{clearTimeout(e),r?this.isOpen=!0:e=setTimeout(()=>{this.isOpen=Array.from(this.children).some(o=>o.isOpen)},0)})}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const XE=["left","right","center","justify"];function dL(i){return XE.includes(i)}function hL(i,t){return t.contentLanguageDirection=="rtl"?i==="right":i==="left"}function fL(i){const t=i.map(n=>{let s;return typeof n=="string"?s={name:n}:s=n,s}).filter(n=>{const s=XE.includes(n.name);return s||dt("alignment-config-name-not-recognized",{option:n}),s}),e=t.filter(n=>!!n.className).length;if(e&&e<t.length)throw new D("alignment-config-classnames-are-missing",{configuredOptions:i});return t.forEach((n,s,r)=>{const o=r.slice(s+1);if(o.some(l=>l.name==n.name))throw new D("alignment-config-name-already-defined",{option:n,configuredOptions:i});if(n.className&&o.some(u=>u.className==n.className))throw new D("alignment-config-classname-already-defined",{option:n,configuredOptions:i})}),t}const JE="alignment";class qde extends Ze{refresh(){const e=this.editor.locale,n=ln(this.editor.model.document.selection.getSelectedBlocks());this.isEnabled=!!n&&this._canBeAligned(n),this.isEnabled&&n.hasAttribute("alignment")?this.value=n.getAttribute("alignment"):this.value=e.contentLanguageDirection==="rtl"?"right":"left"}execute(t={}){const e=this.editor,n=e.locale,s=e.model,r=s.document,o=t.value;s.change(a=>{const l=Array.from(r.selection.getSelectedBlocks()).filter(f=>this._canBeAligned(f)),u=l[0].getAttribute("alignment");hL(o,n)||u===o||!o?Gde(l,a):Kde(l,a,o)})}_canBeAligned(t){return this.editor.model.schema.checkAttribute(t,JE)}}function Gde(i,t){for(const e of i)t.removeAttribute(JE,e)}function Kde(i,t,e){for(const n of i)t.setAttribute(JE,e,n)}class Yde extends J{static get pluginName(){return"AlignmentEditing"}static get isOfficialPlugin(){return!0}constructor(t){super(t),t.config.define("alignment",{options:XE.map(e=>({name:e}))})}init(){const t=this.editor,e=t.locale,n=t.model.schema,r=fL(t.config.get("alignment.options")).filter(u=>dL(u.name)&&!hL(u.name,e)),o=r.some(u=>!!u.className);n.extend("$block",{allowAttributes:"alignment"}),t.model.schema.setAttributeProperties("alignment",{isFormatting:!0}),o?t.conversion.attributeToAttribute(Qde(r)):t.conversion.for("downcast").attributeToAttribute(Zde(r));const a=Xde(r);for(const u of a)t.conversion.for("upcast").attributeToAttribute(u);const l=Jde(r);for(const u of l)t.conversion.for("upcast").attributeToAttribute(u);t.commands.add("alignment",new qde(t))}}function Zde(i){const t={};for(const{name:n}of i)t[n]={key:"style",value:{"text-align":n}};return{model:{key:"alignment",values:i.map(n=>n.name)},view:t}}function Xde(i){const t=[];for(const{name:e}of i)t.push({view:{key:"style",value:{"text-align":e}},model:{key:"alignment",value:e}});return t}function Jde(i){const t=[];for(const{name:e}of i)t.push({view:{key:"align",value:e},model:{key:"alignment",value:e}});return t}function Qde(i){const t={};for(const n of i)t[n.name]={key:"class",value:n.className};return{model:{key:"alignment",values:i.map(n=>n.name)},view:t}}const Md=new Map([["left",ve.alignLeft],["right",ve.alignRight],["center",ve.alignCenter],["justify",ve.alignJustify]]);class ehe extends J{get localizedOptionTitles(){const t=this.editor.t;return{left:t("Align left"),right:t("Align right"),center:t("Align center"),justify:t("Justify")}}static get pluginName(){return"AlignmentUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=fL(t.config.get("alignment.options"));e.map(n=>n.name).filter(dL).forEach(n=>this._addButton(n)),this._addToolbarDropdown(e),this._addMenuBarMenu(e)}_addButton(t){this.editor.ui.componentFactory.add(`alignment:${t}`,n=>this._createButton(n,t))}_createButton(t,e,n={}){const s=this.editor,r=s.commands.get("alignment"),o=new qe(t);return o.set({label:this.localizedOptionTitles[e],icon:Md.get(e),tooltip:!0,isToggleable:!0,...n}),o.bind("isEnabled").to(r),o.bind("isOn").to(r,"value",a=>a===e),this.listenTo(o,"execute",()=>{s.execute("alignment",{value:e}),s.editing.view.focus()}),o}_addToolbarDropdown(t){const e=this.editor;e.ui.componentFactory.add("alignment",s=>{const r=ti(s),o=s.uiLanguageDirection==="rtl"?"w":"e",a=s.t;zb(r,()=>t.map(h=>this._createButton(s,h.name,{tooltipPosition:o})),{enableActiveItemFocusOnDropdownOpen:!0,isVertical:!0,ariaLabel:a("Text alignment toolbar")}),r.buttonView.set({label:a("Text alignment"),tooltip:!0}),r.extendTemplate({attributes:{class:"ck-alignment-dropdown"}});const l=s.contentLanguageDirection==="rtl"?Md.get("right"):Md.get("left"),u=e.commands.get("alignment");return r.buttonView.bind("icon").to(u,"value",h=>Md.get(h)||l),r.bind("isEnabled").to(u,"isEnabled"),this.listenTo(r,"execute",()=>{e.editing.view.focus()}),r})}_addMenuBarMenu(t){const e=this.editor;e.ui.componentFactory.add("menuBar:alignment",n=>{const s=e.commands.get("alignment"),r=n.t,o=new Yi(n),a=new kl(n);o.bind("isEnabled").to(s),a.set({ariaLabel:r("Text alignment"),role:"menu"}),o.buttonView.set({label:r("Text alignment")});for(const l of t){const u=new Vl(n,o),h=new Ln(n);h.delegate("execute").to(o),h.set({label:this.localizedOptionTitles[l.name],icon:Md.get(l.name),role:"menuitemcheckbox",isToggleable:!0}),h.on("execute",()=>{e.execute("alignment",{value:l.name}),e.editing.view.focus()}),h.bind("isOn").to(s,"value",f=>f===l.name),h.bind("isEnabled").to(s,"isEnabled"),u.children.add(h),a.items.add(u)}return o.panelView.children.add(a),o})}}class the extends J{static get requires(){return[Yde,ehe]}static get pluginName(){return"Alignment"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 *//**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class mL{constructor(t,e=20){b(this,"model");b(this,"limit");b(this,"_isLocked");b(this,"_size");b(this,"_batch",null);b(this,"_changeCallback");b(this,"_selectionChangeCallback");this.model=t,this._size=0,this.limit=e,this._isLocked=!1,this._changeCallback=(n,s)=>{s.isLocal&&s.isUndoable&&s!==this._batch&&this._reset(!0)},this._selectionChangeCallback=()=>{this._reset()},this.model.document.on("change",this._changeCallback),this.model.document.selection.on("change:range",this._selectionChangeCallback),this.model.document.selection.on("change:attribute",this._selectionChangeCallback)}get batch(){return this._batch||(this._batch=this.model.createBatch({isTyping:!0})),this._batch}get size(){return this._size}input(t){this._size+=t,this._size>=this.limit&&this._reset(!0)}get isLocked(){return this._isLocked}lock(){this._isLocked=!0}unlock(){this._isLocked=!1}destroy(){this.model.document.off("change",this._changeCallback),this.model.document.selection.off("change:range",this._selectionChangeCallback),this.model.document.selection.off("change:attribute",this._selectionChangeCallback)}_reset(t=!1){(!this.isLocked||t)&&(this._batch=null,this._size=0)}}class nhe extends Ze{constructor(e,n){super(e);b(this,"_buffer");this._buffer=new mL(e.model,n),this._isEnabledBasedOnSelection=!1}get buffer(){return this._buffer}destroy(){super.destroy(),this._buffer.destroy()}execute(e={}){const n=this.editor.model,s=n.document,r=e.text||"",o=r.length;let a=s.selection;if(e.selection?a=e.selection:e.range&&(a=n.createSelection(e.range)),!n.canEditAt(a))return;const l=e.resultRange;n.enqueueChange(this._buffer.batch,u=>{this._buffer.lock();const h=Array.from(s.selection.getAttributes());n.deleteContent(a),r&&n.insertContent(u.createText(r,h),a),l?u.setSelection(l):a.is("documentSelection")||u.setSelection(a),this._buffer.unlock(),this._buffer.input(o)})}}const gL=["insertText","insertReplacementText"],ihe=[...gL,"insertCompositionText"];class she extends Or{constructor(e){super(e);b(this,"focusObserver");this.focusObserver=e.getObserver(Cp);const n=Fe.isAndroid?ihe:gL,s=e.document;s.on("beforeinput",(r,o)=>{if(!this.isEnabled)return;const{data:a,targetRanges:l,inputType:u,domEvent:h}=o;if(!n.includes(u))return;this.focusObserver.flush();const f=new ho(s,"insertText");s.fire(f,new mu(e,h,{text:a,selection:e.createSelection(l)})),f.stop.called&&r.stop()}),Fe.isAndroid||s.on("compositionend",(r,{data:o,domEvent:a})=>{this.isEnabled&&o&&s.fire("insertText",new mu(e,a,{text:o}))},{priority:"lowest"})}observe(){}stopObserving(){}}class pL extends J{constructor(){super(...arguments);b(this,"_compositionQueue")}static get pluginName(){return"Input"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,n=e.model,s=e.editing.view,r=e.editing.mapper,o=n.document.selection;this._compositionQueue=new rhe(e),s.addObserver(she);const a=new nhe(e,e.config.get("typing.undoStep")||20);e.commands.add("insertText",a),e.commands.add("input",a),this.listenTo(s.document,"insertText",(l,u)=>{s.document.isComposing||u.preventDefault(),Fe.isAndroid&&s.document.isComposing&&this._compositionQueue.flush("next beforeinput");const{text:h,selection:f}=u;let g;f?g=Array.from(f.getRanges()).map(E=>r.toModelRange(E)):g=Array.from(o.getRanges());let p=h;if(Fe.isAndroid){const E=Array.from(g[0].getItems()).reduce((C,k)=>C+(k.is("$textProxy")?k.data:""),"");if(E&&(E.length<=p.length?p.startsWith(E)&&(p=p.substring(E.length),g[0].start=g[0].start.getShiftedBy(E.length)):E.startsWith(p)&&(g[0].start=g[0].start.getShiftedBy(p.length),p="")),p.length==0&&g[0].isCollapsed)return}const y={text:p,selection:n.createSelection(g)};Fe.isAndroid&&s.document.isComposing?this._compositionQueue.push(y):(e.execute("insertText",y),s.scrollToTheSelection())}),Fe.isAndroid?this.listenTo(s.document,"keydown",(l,u)=>{o.isCollapsed||u.keyCode!=229||!s.document.isComposing||QP(n,a)}):this.listenTo(s.document,"compositionstart",()=>{o.isCollapsed||QP(n,a)}),Fe.isAndroid?(this.listenTo(s.document,"mutations",(l,{mutations:u})=>{if(s.document.isComposing)for(const{node:h}of u){const f=ahe(h,r),g=r.toModelElement(f);if(this._compositionQueue.isComposedElement(g)){this._compositionQueue.flush("mutations");return}}}),this.listenTo(s.document,"compositionend",()=>{this._compositionQueue.flush("composition end")}),this.listenTo(s.document,"compositionend",()=>{const l=[];for(const u of this._compositionQueue.flushComposedElements()){const h=r.toViewElement(u);h&&l.push({type:"children",node:h})}l.length&&s.document.fire("mutations",{mutations:l})},{priority:"lowest"})):this.listenTo(s.document,"compositionend",()=>{s.document.fire("mutations",{mutations:[]})},{priority:"lowest"})}destroy(){super.destroy(),this._compositionQueue.destroy()}}class rhe{constructor(t){b(this,"editor");b(this,"flushDebounced",ks(()=>this.flush("timeout"),50));b(this,"_queue",[]);b(this,"_compositionElements",new Set);this.editor=t}destroy(){for(this.flushDebounced.cancel(),this._compositionElements.clear();this._queue.length;)this.shift()}get length(){return this._queue.length}push(t){const e={text:t.text};if(t.selection){e.selectionRanges=[];for(const n of t.selection.getRanges())e.selectionRanges.push(ai.fromRange(n)),this._compositionElements.add(n.start.parent)}this._queue.push(e),this.flushDebounced()}shift(){const t=this._queue.shift(),e={text:t.text};if(t.selectionRanges){const n=t.selectionRanges.map(s=>ohe(s)).filter(s=>!!s);n.length&&(e.selection=this.editor.model.createSelection(n))}return e}flush(t){const e=this.editor,n=e.model,s=e.editing.view;if(this.flushDebounced.cancel(),!this._queue.length)return;const o=e.commands.get("insertText").buffer;n.enqueueChange(o.batch,()=>{for(o.lock();this._queue.length;){const a=this.shift();e.execute("insertText",a)}o.unlock()}),s.scrollToTheSelection()}isComposedElement(t){return this._compositionElements.has(t)}flushComposedElements(){const t=Array.from(this._compositionElements);return this._compositionElements.clear(),t}}function QP(i,t){if(!t.isEnabled)return;const e=t.buffer;e.lock(),i.enqueueChange(e.batch,()=>{i.deleteContent(i.document.selection)}),e.unlock()}function ohe(i){const t=i.toRange();return i.detach(),t.root.rootName=="$graveyard"?null:t}function ahe(i,t){let e=i.is("$text")?i.parent:i;for(;!t.toModelElement(e);)e=e.parent;return e}class eI extends Ze{constructor(e,n){super(e);b(this,"direction");b(this,"_buffer");this.direction=n,this._buffer=new mL(e.model,e.config.get("typing.undoStep")),this._isEnabledBasedOnSelection=!1}get buffer(){return this._buffer}execute(e={}){const n=this.editor.model,s=n.document;n.enqueueChange(this._buffer.batch,r=>{this._buffer.lock();const o=r.createSelection(e.selection||s.selection);if(!n.canEditAt(o))return;const a=e.sequence||1,l=o.isCollapsed;if(o.isCollapsed&&n.modifySelection(o,{direction:this.direction,unit:e.unit,treatEmojiAsSingleUnit:!0}),this._shouldEntireContentBeReplacedWithParagraph(a)){this._replaceEntireContentWithParagraph(r);return}if(this._shouldReplaceFirstBlockWithParagraph(o,a)){this.editor.execute("paragraph",{selection:o});return}if(o.isCollapsed)return;let u=0;o.getFirstRange().getMinimalFlatRanges().forEach(h=>{u+=Cy(h.getWalker({singleCharacters:!0,ignoreElementEnd:!0,shallow:!0}))}),n.deleteContent(o,{doNotResetEntireContent:l,direction:this.direction}),this._buffer.input(u),r.setSelection(o),this._buffer.unlock()})}_shouldEntireContentBeReplacedWithParagraph(e){if(e>1)return!1;const n=this.editor.model,r=n.document.selection,o=n.schema.getLimitElement(r);if(!(r.isCollapsed&&r.containsEntireContent(o))||!n.schema.checkChild(o,"paragraph"))return!1;const l=o.getChild(0);return!(l&&l.is("element","paragraph"))}_replaceEntireContentWithParagraph(e){const n=this.editor.model,r=n.document.selection,o=n.schema.getLimitElement(r),a=e.createElement("paragraph");e.remove(e.createRangeIn(o)),e.insert(a,o),e.setSelection(a,0)}_shouldReplaceFirstBlockWithParagraph(e,n){const s=this.editor.model;if(n>1||this.direction!="backward"||!e.isCollapsed)return!1;const r=e.getFirstPosition(),o=s.schema.getLimitElement(r),a=o.getChild(0);return!(r.parent!=a||!e.containsEntireContent(a)||!s.schema.checkChild(o,"paragraph")||a.name=="paragraph")}}const lhe="character",tI="word",che="codePoint",oa="selection",Dc="backward",Kd="forward",bL={deleteContent:{unit:oa,direction:Dc},deleteContentBackward:{unit:che,direction:Dc},deleteWordBackward:{unit:tI,direction:Dc},deleteHardLineBackward:{unit:oa,direction:Dc},deleteSoftLineBackward:{unit:oa,direction:Dc},deleteContentForward:{unit:lhe,direction:Kd},deleteWordForward:{unit:tI,direction:Kd},deleteHardLineForward:{unit:oa,direction:Kd},deleteSoftLineForward:{unit:oa,direction:Kd}};class uhe extends Or{constructor(t){super(t);const e=t.document;let n=0;e.on("keydown",()=>{n++}),e.on("keyup",()=>{n=0}),e.on("beforeinput",(s,r)=>{if(!this.isEnabled)return;const{targetRanges:o,domEvent:a,inputType:l}=r,u=bL[l];if(!u)return;const h={direction:u.direction,unit:u.unit,sequence:n};h.unit==oa&&(h.selectionToRemove=t.createSelection(o[0])),l==="deleteContentBackward"&&(Fe.isAndroid&&(h.sequence=1),hhe(o)&&(h.unit=oa,h.selectionToRemove=t.createSelection(o)));const f=new Ou(e,"delete",o[0]);e.fire(f,new mu(t,a,h)),f.stop.called&&s.stop()}),Fe.isBlink&&dhe(this)}observe(){}stopObserving(){}}function dhe(i){const t=i.view,e=t.document;let n=null,s=!1;e.on("keydown",(a,{keyCode:l})=>{n=l,s=!1}),e.on("keyup",(a,{keyCode:l,domEvent:u})=>{const h=e.selection,f=i.isEnabled&&l==n&&r(l)&&!h.isCollapsed&&!s;if(n=null,f){const g=h.getFirstRange(),p=new Ou(e,"delete",g),y={unit:oa,direction:o(l),selectionToRemove:h};e.fire(p,new mu(t,u,y))}}),e.on("beforeinput",(a,{inputType:l})=>{const u=bL[l];r(n)&&u&&u.direction==o(n)&&(s=!0)},{priority:"high"}),e.on("beforeinput",(a,{inputType:l,data:u})=>{n==nt.delete&&l=="insertText"&&u==""&&a.stop()},{priority:"high"});function r(a){return a==nt.backspace||a==nt.delete}function o(a){return a==nt.backspace?Dc:Kd}}function hhe(i){if(i.length!=1||i[0].isCollapsed)return!1;const t=i[0].getWalker({direction:"backward",singleCharacters:!0,ignoreElementEnd:!0});let e=0;for(const{nextPosition:n,item:s}of t){if(n.parent.is("$text")){const r=n.parent.data,o=n.offset;if(IE(r,o)||RE(r,o)||M4(r,o))continue;e++}else(s.is("containerElement")||s.is("emptyElement"))&&e++;if(e>1)return!0}return!1}class Ir extends J{constructor(){super(...arguments);b(this,"_undoOnBackspace")}static get pluginName(){return"Delete"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,n=e.editing.view,s=n.document,r=e.model.document;n.addObserver(uhe),this._undoOnBackspace=!1;const o=new eI(e,"forward");e.commands.add("deleteForward",o),e.commands.add("forwardDelete",o),e.commands.add("delete",new eI(e,"backward")),this.listenTo(s,"delete",(a,l)=>{s.isComposing||l.preventDefault();const{direction:u,sequence:h,selectionToRemove:f,unit:g}=l,p=u==="forward"?"deleteForward":"delete",y={sequence:h};if(g=="selection"){const E=Array.from(f.getRanges()).map(C=>e.editing.mapper.toModelRange(C));y.selection=e.model.createSelection(E)}else y.unit=g;e.execute(p,y),n.scrollToTheSelection()},{priority:"low"}),this.listenTo(s,"keydown",(a,l)=>{if(s.isComposing||l.keyCode!=nt.backspace||!r.selection.isCollapsed)return;const u=e.model.schema.getLimitElement(r.selection);e.model.createPositionAt(u,0).isTouching(r.selection.getFirstPosition())&&l.preventDefault()}),this.editor.plugins.has("UndoEditing")&&(this.listenTo(s,"delete",(a,l)=>{this._undoOnBackspace&&l.direction=="backward"&&l.sequence==1&&l.unit=="codePoint"&&(this._undoOnBackspace=!1,e.execute("undo"),l.preventDefault(),a.stop())},{context:"$capture"}),this.listenTo(r,"change",()=>{this._undoOnBackspace=!1}))}requestUndoOnBackspace(){this.editor.plugins.has("UndoEditing")&&(this._undoOnBackspace=!0)}}class fhe extends J{static get requires(){return[pL,Ir]}static get pluginName(){return"Typing"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function wL(i,t){let e=i.start;return{text:Array.from(i.getWalker({ignoreElementEnd:!1})).reduce((s,{item:r})=>r.is("$text")||r.is("$textProxy")?s+r.data:(e=t.createPositionAfter(r),""),""),range:t.createRange(e,i.end)}}class QE extends yt(){constructor(e,n){super();b(this,"model");b(this,"testCallback");b(this,"_hasMatch");this.model=e,this.testCallback=n,this._hasMatch=!1,this.set("isEnabled",!0),this.on("change:isEnabled",()=>{this.isEnabled?this._startListening():(this.stopListening(e.document.selection),this.stopListening(e.document))}),this._startListening()}get hasMatch(){return this._hasMatch}_startListening(){const n=this.model.document;this.listenTo(n.selection,"change:range",(s,{directChange:r})=>{if(r){if(!n.selection.isCollapsed){this.hasMatch&&(this.fire("unmatched"),this._hasMatch=!1);return}this._evaluateTextBeforeSelection("selection")}}),this.listenTo(n,"change:data",(s,r)=>{r.isUndo||!r.isLocal||this._evaluateTextBeforeSelection("data",{batch:r})})}_evaluateTextBeforeSelection(e,n={}){const s=this.model,o=s.document.selection,a=s.createRange(s.createPositionAt(o.focus.parent,0),o.focus),{text:l,range:u}=wL(a,s),h=this.testCallback(l);if(!h&&this.hasMatch&&this.fire("unmatched"),this._hasMatch=!!h,h){const f=Object.assign(n,{text:l,range:u});typeof h=="object"&&Object.assign(f,h),this.fire(`matched:${e}`,f)}}}class nI extends J{constructor(e){super(e);b(this,"attributes");b(this,"_overrideUid");b(this,"_isNextGravityRestorationSkipped",!1);this.attributes=new Set,this._overrideUid=null}static get pluginName(){return"TwoStepCaretMovement"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,n=e.model,s=e.editing.view,r=e.locale,o=n.document.selection;this.listenTo(s.document,"arrowKey",(a,l)=>{if(!o.isCollapsed||l.shiftKey||l.altKey||l.ctrlKey)return;const u=l.keyCode==nt.arrowright,h=l.keyCode==nt.arrowleft;if(!u&&!h)return;const f=r.contentLanguageDirection;let g=!1;f==="ltr"&&u||f==="rtl"&&h?g=this._handleForwardMovement(l):g=this._handleBackwardMovement(l),g===!0&&a.stop()},{context:"$text",priority:"highest"}),this.listenTo(o,"change:range",(a,l)=>{if(this._isNextGravityRestorationSkipped){this._isNextGravityRestorationSkipped=!1;return}this._isGravityOverridden&&(!l.directChange&&gs(o.getFirstPosition(),this.attributes)||this._restoreGravity())}),this._enableClickingAfterNode(),this._enableInsertContentSelectionAttributesFixer(),this._handleDeleteContentAfterNode()}registerAttribute(e){this.attributes.add(e)}_handleForwardMovement(e){const n=this.attributes,s=this.editor.model,r=s.document.selection,o=r.getFirstPosition();return this._isGravityOverridden||o.isAtStart&&Kr(r,n)?!1:gs(o,n)?(Vd(e),Kr(r,n)&&gs(o,n,!0)?Ld(s,n):this._overrideGravity(),!0):!1}_handleBackwardMovement(e){const n=this.attributes,s=this.editor.model,r=s.document.selection,o=r.getFirstPosition();return this._isGravityOverridden?(Vd(e),this._restoreGravity(),gs(o,n,!0)?Ld(s,n):rg(s,n,o),!0):o.isAtStart?Kr(r,n)?(Vd(e),rg(s,n,o),!0):!1:!Kr(r,n)&&gs(o,n,!0)?(Vd(e),rg(s,n,o),!0):iI(o,n)?o.isAtEnd&&!Kr(r,n)&&gs(o,n)?(Vd(e),rg(s,n,o),!0):(this._isNextGravityRestorationSkipped=!0,this._overrideGravity(),!1):!1}_enableClickingAfterNode(){const e=this.editor,n=e.model,s=n.document.selection,r=e.editing.view.document;e.editing.view.addObserver(Lb),e.editing.view.addObserver(Nae);let o=!1,a=!1;this.listenTo(r,"touchstart",()=>{a=!1,o=!0}),this.listenTo(r,"mousedown",()=>{a=!0}),this.listenTo(r,"selectionChange",()=>{const l=this.attributes;if(!a&&!o||(a=!1,o=!1,!s.isCollapsed)||!Kr(s,l))return;const u=s.getFirstPosition();gs(u,l)&&(u.isAtStart||gs(u,l,!0)?Ld(n,l):this._isGravityOverridden||this._overrideGravity())})}_enableInsertContentSelectionAttributesFixer(){const n=this.editor.model,s=n.document.selection,r=this.attributes;this.listenTo(n,"insertContent",()=>{const o=s.getFirstPosition();Kr(s,r)&&gs(o,r)&&Ld(n,r)},{priority:"low"})}_handleDeleteContentAfterNode(){const e=this.editor,n=e.model,s=n.document.selection,r=e.editing.view;let o=!1,a=!1;this.listenTo(r.document,"delete",(l,u)=>{o=u.direction==="backward"},{priority:"high"}),this.listenTo(n,"deleteContent",()=>{if(!o)return;const l=s.getFirstPosition();a=Kr(s,this.attributes)&&!iI(l,this.attributes)},{priority:"high"}),this.listenTo(n,"deleteContent",()=>{o&&(o=!1,!a&&e.model.enqueueChange(()=>{const l=s.getFirstPosition();Kr(s,this.attributes)&&gs(l,this.attributes)&&(l.isAtStart||gs(l,this.attributes,!0)?Ld(n,this.attributes):this._isGravityOverridden||this._overrideGravity())}))},{priority:"low"})}get _isGravityOverridden(){return!!this._overrideUid}_overrideGravity(){this._overrideUid=this.editor.model.change(e=>e.overrideSelectionGravity())}_restoreGravity(){this.editor.model.change(e=>{e.restoreSelectionGravity(this._overrideUid),this._overrideUid=null})}}function Kr(i,t){for(const e of t)if(i.hasAttribute(e))return!0;return!1}function rg(i,t,e){const n=e.nodeBefore;i.change(s=>{if(n){const r=[],o=i.schema.isObject(n)&&i.schema.isInline(n);for(const[a,l]of n.getAttributes())i.schema.checkAttribute("$text",a)&&(!o||i.schema.getAttributeProperties(a).copyFromObject!==!1)&&r.push([a,l]);s.setSelectionAttribute(r)}else s.removeSelectionAttribute(t)})}function Ld(i,t){i.change(e=>{e.removeSelectionAttribute(t)})}function Vd(i){i.preventDefault()}function iI(i,t){const e=i.getShiftedBy(-1);return gs(e,t)}function gs(i,t,e=!1){const{nodeBefore:n,nodeAfter:s}=i;for(const r of t){const o=n?n.getAttribute(r):void 0,a=s?s.getAttribute(r):void 0;if(!(e&&(o===void 0||a===void 0))&&a!==o)return!0}return!1}const sI={copyright:{from:"(c)",to:"©"},registeredTrademark:{from:"(r)",to:"®"},trademark:{from:"(tm)",to:"™"},oneHalf:{from:/(^|[^/a-z0-9])(1\/2)([^/a-z0-9])$/i,to:[null,"½",null]},oneThird:{from:/(^|[^/a-z0-9])(1\/3)([^/a-z0-9])$/i,to:[null,"⅓",null]},twoThirds:{from:/(^|[^/a-z0-9])(2\/3)([^/a-z0-9])$/i,to:[null,"⅔",null]},oneForth:{from:/(^|[^/a-z0-9])(1\/4)([^/a-z0-9])$/i,to:[null,"¼",null]},threeQuarters:{from:/(^|[^/a-z0-9])(3\/4)([^/a-z0-9])$/i,to:[null,"¾",null]},lessThanOrEqual:{from:"<=",to:"≤"},greaterThanOrEqual:{from:">=",to:"≥"},notEqual:{from:"!=",to:"≠"},arrowLeft:{from:"<-",to:"←"},arrowRight:{from:"->",to:"→"},horizontalEllipsis:{from:"...",to:"…"},enDash:{from:/(^| )(--)( )$/,to:[null,"–",null]},emDash:{from:/(^| )(---)( )$/,to:[null,"—",null]},quotesPrimary:{from:Tc('"'),to:[null,"“",null,"”"]},quotesSecondary:{from:Tc("'"),to:[null,"‘",null,"’"]},quotesPrimaryEnGb:{from:Tc("'"),to:[null,"‘",null,"’"]},quotesSecondaryEnGb:{from:Tc('"'),to:[null,"“",null,"”"]},quotesPrimaryPl:{from:Tc('"'),to:[null,"„",null,"”"]},quotesSecondaryPl:{from:Tc("'"),to:[null,"‚",null,"’"]}},rI={symbols:["copyright","registeredTrademark","trademark"],mathematical:["oneHalf","oneThird","twoThirds","oneForth","threeQuarters","lessThanOrEqual","greaterThanOrEqual","notEqual","arrowLeft","arrowRight"],typography:["horizontalEllipsis","enDash","emDash"],quotes:["quotesPrimary","quotesSecondary"]},mhe=["symbols","mathematical","typography","quotes"];class ghe extends J{static get requires(){return["Delete","Input"]}static get pluginName(){return"TextTransformation"}static get isOfficialPlugin(){return!0}constructor(t){super(t),t.config.define("typing",{transformations:{include:mhe}})}init(){const e=this.editor.model.document.selection;e.on("change:range",()=>{this.isEnabled=!e.anchor.parent.is("element","codeBlock")}),this._enableTransformationWatchers()}_enableTransformationWatchers(){const t=this.editor,e=t.model,n=t.plugins.get("Delete"),s=vhe(t.config.get("typing.transformations")),r=a=>{for(const l of s)if(l.from.test(a))return{normalizedTransformation:l}},o=new QE(t.model,r);o.on("matched:data",(a,l)=>{if(!l.batch.isTyping)return;const{from:u,to:h}=l.normalizedTransformation,f=u.exec(l.text),g=h(f.slice(1)),p=l.range;let y=f.index;e.enqueueChange(E=>{for(let C=1;C<f.length;C++){const k=f[C],T=g[C-1];if(T==null){y+=k.length;continue}const P=p.start.getShiftedBy(y),S=e.createRange(P,P.getShiftedBy(k.length)),O=whe(P);e.insertContent(E.createText(T,O),S),y+=T.length}e.enqueueChange(()=>{n.requestUndoOnBackspace()})})}),o.bind("isEnabled").to(this)}}function phe(i){return typeof i=="string"?new RegExp(`(${One(i)})$`):i}function bhe(i){return typeof i=="string"?()=>[i]:i instanceof Array?()=>i:i}function whe(i){return(i.textNode?i.textNode:i.nodeAfter).getAttributes()}function Tc(i){return new RegExp(`(^|\\s)(${i})([^${i}]*)(${i})$`)}function vhe(i){const t=i.extra||[],e=i.remove||[],n=r=>!e.includes(r),s=i.include.concat(t).filter(n);return yhe(s).filter(n).map(r=>typeof r=="string"&&sI[r]?sI[r]:r).filter(r=>typeof r=="object").map(r=>({from:phe(r.from),to:bhe(r.to)}))}function yhe(i){const t=new Set;for(const e of i)if(typeof e=="string"&&rI[e])for(const n of rI[e])t.add(n);else t.add(e);return Array.from(t)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Hb(i,t,e,n){return n.createRange(oI(i,t,e,!0,n),oI(i,t,e,!1,n))}function oI(i,t,e,n,s){let r=i.textNode||(n?i.nodeBefore:i.nodeAfter),o=null;for(;r&&r.getAttribute(t)==e;)o=r,r=n?r.previousSibling:r.nextSibling;return o?s.createPositionAt(o,n?"before":"after"):i}function _he(i,t,e,n){const s=i.editing.view,r=new Set;s.document.registerPostFixer(o=>{const a=i.model.document.selection;let l=!1;if(a.hasAttribute(t)){const u=Hb(a.getFirstPosition(),t,a.getAttribute(t),i.model),h=i.editing.mapper.toViewRange(u);for(const f of h.getItems())f.is("element",e)&&!f.hasClass(n)&&(o.addClass(n,f),r.add(f),l=!0)}return l}),i.conversion.for("editingDowncast").add(o=>{o.on("insert",a,{priority:"highest"}),o.on("remove",a,{priority:"highest"}),o.on("attribute",a,{priority:"highest"}),o.on("selection",a,{priority:"highest"});function a(){s.change(l=>{for(const u of r.values())l.removeClass(n,u),r.delete(u)})}})}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Jo(i,t,e,n){let s,r=null;typeof n=="function"?s=n:(r=i.commands.get(n),s=()=>{i.execute(n)}),i.model.document.on("change:data",(o,a)=>{if(r&&!r.isEnabled||!t.isEnabled)return;const l=ln(i.model.document.selection.getRanges());if(!l.isCollapsed||a.isUndo||!a.isLocal)return;const u=Array.from(i.model.document.differ.getChanges()),h=u[0];if(u.length!=1||h.type!=="insert"||h.name!="$text"||h.length!=1)return;const f=h.position.parent;if(f.is("element","codeBlock")||f.is("element","listItem")&&typeof n!="function"&&!["numberedList","bulletedList","todoList"].includes(n)||r&&r.value===!0)return;const g=f.getChild(0),p=i.model.createRangeOn(g);if(!p.containsRange(l)&&!l.end.isEqual(p.end))return;const y=e.exec(g.data.substr(0,l.end.offset));y&&i.model.enqueueChange(E=>{const C=E.createPositionAt(f,0),k=E.createPositionAt(f,y[0].length),T=new ai(C,k);if(s({match:y})!==!1){E.remove(T);const S=i.model.document.selection.getFirstRange(),O=E.createRangeIn(f);f.isEmpty&&!O.isEqual(S)&&!O.containsRange(S,!0)&&E.remove(f)}T.detach(),i.model.enqueueChange(()=>{i.plugins.get("Delete").requestUndoOnBackspace()})})})}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Sc(i,t,e,n){let s,r;e instanceof RegExp?s=e:r=e,r=r||(o=>{let a;const l=[],u=[];for(;(a=s.exec(o))!==null&&!(a&&a.length<4);){let{index:h,"1":f,"2":g,"3":p}=a;const y=f+g+p;h+=a[0].length-y.length;const E=[h,h+f.length],C=[h+f.length+g.length,h+f.length+g.length+p.length];l.push(E),l.push(C),u.push([h+f.length,h+f.length+g.length])}return{remove:l,format:u}}),i.model.document.on("change:data",(o,a)=>{if(a.isUndo||!a.isLocal||!t.isEnabled)return;const l=i.model,u=l.document.selection;if(!u.isCollapsed)return;const h=Array.from(l.document.differ.getChanges()),f=h[0];if(h.length!=1||f.type!=="insert"||f.name!="$text"||f.length!=1)return;const g=u.focus,p=g.parent,{text:y,range:E}=Ehe(l.createRange(l.createPositionAt(p,0),g),l),C=r(y),k=aI(E.start,C.format,l),T=aI(E.start,C.remove,l);k.length&&T.length&&l.enqueueChange(P=>{if(n(P,k)!==!1){for(const O of T.reverse())P.remove(O);l.enqueueChange(()=>{i.plugins.get("Delete").requestUndoOnBackspace()})}})})}function aI(i,t,e){return t.filter(n=>n[0]!==void 0&&n[1]!==void 0).map(n=>e.createRange(i.getShiftedBy(n[0]),i.getShiftedBy(n[1])))}function Ehe(i,t){let e=i.start;return{text:Array.from(i.getItems()).reduce((s,r)=>!(r.is("$text")||r.is("$textProxy"))||r.getAttribute("code")?(e=t.createPositionAfter(r),""):s+r.data,""),range:t.createRange(e,i.end)}}class Che extends J{static get requires(){return[Ir]}static get pluginName(){return"Autoformat"}static get isOfficialPlugin(){return!0}afterInit(){const t=this.editor,e=this.editor.t;this._addListAutoformats(),this._addBasicStylesAutoformats(),this._addHeadingAutoformats(),this._addBlockQuoteAutoformats(),this._addCodeBlockAutoformats(),this._addHorizontalLineAutoformats(),t.accessibility.addKeystrokeInfos({keystrokes:[{label:e("Revert autoformatting action"),keystroke:"Backspace"}]})}_addListAutoformats(){const t=this.editor.commands;t.get("bulletedList")&&Jo(this.editor,this,/^[*-]\s$/,"bulletedList"),t.get("numberedList")&&Jo(this.editor,this,/^1[.|)]\s$/,"numberedList"),t.get("todoList")&&Jo(this.editor,this,/^\[\s?\]\s$/,"todoList"),t.get("checkTodoList")&&Jo(this.editor,this,/^\[\s?x\s?\]\s$/,()=>{this.editor.execute("todoList"),this.editor.execute("checkTodoList")})}_addBasicStylesAutoformats(){const t=this.editor.commands;if(t.get("bold")){const e=og(this.editor,"bold");Sc(this.editor,this,/(?:^|\s)(\*\*)([^*]+)(\*\*)$/g,e),Sc(this.editor,this,/(?:^|\s)(__)([^_]+)(__)$/g,e)}if(t.get("italic")){const e=og(this.editor,"italic");Sc(this.editor,this,/(?:^|\s)(\*)([^*_]+)(\*)$/g,e),Sc(this.editor,this,/(?:^|\s)(_)([^_]+)(_)$/g,e)}if(t.get("code")){const e=og(this.editor,"code");Sc(this.editor,this,/(`)([^`]+)(`)$/g,e)}if(t.get("strikethrough")){const e=og(this.editor,"strikethrough");Sc(this.editor,this,/(~~)([^~]+)(~~)$/g,e)}}_addHeadingAutoformats(){const t=this.editor.commands.get("heading");t&&t.modelElements.filter(e=>e.match(/^heading[1-6]$/)).forEach(e=>{const n=e[7],s=new RegExp(`^(#{${n}})\\s$`);Jo(this.editor,this,s,()=>{if(!t.isEnabled||t.value===e)return!1;this.editor.execute("heading",{value:e})})})}_addBlockQuoteAutoformats(){this.editor.commands.get("blockQuote")&&Jo(this.editor,this,/^>\s$/,"blockQuote")}_addCodeBlockAutoformats(){const t=this.editor,e=t.model.document.selection;t.commands.get("codeBlock")&&Jo(t,this,/^```$/,()=>{if(e.getFirstPosition().parent.is("element","listItem"))return!1;this.editor.execute("codeBlock",{usePreviousLanguageChoice:!0})})}_addHorizontalLineAutoformats(){this.editor.commands.get("horizontalLine")&&Jo(this.editor,this,/^---$/,"horizontalLine")}}function og(i,t){return(e,n)=>{if(!i.commands.get(t).isEnabled)return!1;const r=i.model.schema.getValidRanges(n,t);for(const o of r)e.setAttribute(t,!0,o);e.removeSelectionAttribute(t)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class xhe extends J{constructor(e){super(e);b(this,"adapter");b(this,"_debouncedSave");b(this,"_lastDocumentVersion");b(this,"_savePromise");b(this,"_domEmitter");b(this,"_config");b(this,"_pendingActions");b(this,"_makeImmediateSave");b(this,"_action",null);const n=e.config.get("autosave")||{},s=n.waitingTime||1e3;this.set("state","synchronized"),this._debouncedSave=ks(this._save.bind(this),s),this._lastDocumentVersion=e.model.document.version,this._savePromise=null,this._domEmitter=new(hi()),this._config=n,this._pendingActions=e.plugins.get(Tp),this._makeImmediateSave=!1}static get pluginName(){return"Autosave"}static get isOfficialPlugin(){return!0}static get requires(){return[Tp]}init(){const e=this.editor,n=e.model.document;this.listenTo(e,"ready",()=>{this.listenTo(n,"change:data",(s,r)=>{this._saveCallbacks.length&&r.isLocal&&(this.state==="synchronized"&&(this.state="waiting",this._setPendingAction()),this.state==="waiting"&&this._debouncedSave())})}),this.listenTo(e,"destroy",()=>this._flush(),{priority:"highest"});/* istanbul ignore next -- @preserve */this._domEmitter.listenTo(window,"beforeunload",(s,r)=>{this._pendingActions.hasAny&&(r.returnValue=this._pendingActions.first.message)})}destroy(){this._domEmitter.stopListening(),super.destroy()}save(){return this._debouncedSave.cancel(),this._save()}_flush(){this._debouncedSave.flush()}_save(){return this._savePromise?(this._makeImmediateSave=this.editor.model.document.version>this._lastDocumentVersion,this._savePromise):(this._setPendingAction(),this.state="saving",this._lastDocumentVersion=this.editor.model.document.version,this._savePromise=Promise.resolve().then(()=>Promise.all(this._saveCallbacks.map(e=>e(this.editor)))).finally(()=>{this._savePromise=null}).then(()=>{if(this._makeImmediateSave)return this._makeImmediateSave=!1,this._save();this.editor.model.document.version>this._lastDocumentVersion?(this.state="waiting",this._debouncedSave()):(this.state="synchronized",this._pendingActions.remove(this._action),this._action=null)}).catch(e=>{throw this.state="error",this.state="saving",this._debouncedSave(),e}),this._savePromise)}_setPendingAction(){const e=this.editor.t;this._action||(this._action=this._pendingActions.add(e("Saving changes")))}get _saveCallbacks(){const e=[];return this.adapter&&this.adapter.save&&e.push(this.adapter.save),this._config.save&&e.push(this._config.save),e}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class eC extends Ze{constructor(e,n){super(e);b(this,"attributeKey");this.attributeKey=n}refresh(){const e=this.editor.model,n=e.document;this.value=this._getValueFromFirstAllowedNode(),this.isEnabled=e.schema.checkAttributeInSelection(n.selection,this.attributeKey)}execute(e={}){const n=this.editor.model,r=n.document.selection,o=e.forceValue===void 0?!this.value:e.forceValue;n.change(a=>{if(r.isCollapsed)o?a.setSelectionAttribute(this.attributeKey,!0):a.removeSelectionAttribute(this.attributeKey);else{const l=n.schema.getValidRanges(r.getRanges(),this.attributeKey);for(const u of l)o?a.setAttribute(this.attributeKey,o,u):a.removeAttribute(this.attributeKey,u)}})}_getValueFromFirstAllowedNode(){const e=this.editor.model,n=e.schema,s=e.document.selection;if(s.isCollapsed)return s.hasAttribute(this.attributeKey);for(const r of s.getRanges())for(const o of r.getItems())if(n.checkAttribute(o,this.attributeKey))return o.hasAttribute(this.attributeKey);return!1}}const Ac="bold";class khe extends J{static get pluginName(){return"BoldEditing"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=this.editor.t;t.model.schema.extend("$text",{allowAttributes:Ac}),t.model.schema.setAttributeProperties(Ac,{isFormatting:!0,copyOnEnter:!0}),t.conversion.attributeToElement({model:Ac,view:"strong",upcastAlso:["b",n=>{const s=n.getStyle("font-weight");return s&&(s=="bold"||Number(s)>=600)?{name:!0,styles:["font-weight"]}:null}]}),t.commands.add(Ac,new eC(t,Ac)),t.keystrokes.set("CTRL+B",Ac),t.accessibility.addKeystrokeInfos({keystrokes:[{label:e("Bold text"),keystroke:"CTRL+B"}]})}}function tC({editor:i,commandName:t,plugin:e,icon:n,label:s,keystroke:r}){return o=>{const a=i.commands.get(t),l=new o(i.locale);return l.set({label:s,icon:n,keystroke:r,isToggleable:!0}),l.bind("isEnabled").to(a,"isEnabled"),l.bind("isOn").to(a,"value"),l instanceof Ln?l.set({role:"menuitemcheckbox"}):l.set({tooltip:!0}),e.listenTo(l,"execute",()=>{i.execute(t),i.editing.view.focus()}),l}}const f1="bold";class The extends J{static get pluginName(){return"BoldUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.locale.t,n=tC({editor:t,commandName:f1,plugin:this,icon:ve.bold,label:e("Bold"),keystroke:"CTRL+B"});t.ui.componentFactory.add(f1,()=>n(qe)),t.ui.componentFactory.add("menuBar:"+f1,()=>n(Ln))}}class She extends J{static get requires(){return[khe,The]}static get pluginName(){return"Bold"}static get isOfficialPlugin(){return!0}}const Pc="italic";class Ahe extends J{static get pluginName(){return"ItalicEditing"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=this.editor.t;t.model.schema.extend("$text",{allowAttributes:Pc}),t.model.schema.setAttributeProperties(Pc,{isFormatting:!0,copyOnEnter:!0}),t.conversion.attributeToElement({model:Pc,view:"i",upcastAlso:["em",{styles:{"font-style":"italic"}}]}),t.commands.add(Pc,new eC(t,Pc)),t.keystrokes.set("CTRL+I",Pc),t.accessibility.addKeystrokeInfos({keystrokes:[{label:e("Italic text"),keystroke:"CTRL+I"}]})}}var Phe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m9.586 14.633.021.004c-.036.335.095.655.393.962.082.083.173.15.274.201h1.474a.6.6 0 1 1 0 1.2H5.304a.6.6 0 0 1 0-1.2h1.15c.474-.07.809-.182 1.005-.334.157-.122.291-.32.404-.597l2.416-9.55a1.053 1.053 0 0 0-.281-.823 1.12 1.12 0 0 0-.442-.296H8.15a.6.6 0 0 1 0-1.2h6.443a.6.6 0 1 1 0 1.2h-1.195c-.376.056-.65.155-.823.296-.215.175-.423.439-.623.79l-2.366 9.347z"/></svg>';const m1="italic";class Ihe extends J{static get pluginName(){return"ItalicUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.locale.t,n=tC({editor:t,commandName:m1,plugin:this,icon:Phe,keystroke:"CTRL+I",label:e("Italic")});t.ui.componentFactory.add(m1,()=>n(qe)),t.ui.componentFactory.add("menuBar:"+m1,()=>n(Ln))}}class Rhe extends J{static get requires(){return[Ahe,Ihe]}static get pluginName(){return"Italic"}static get isOfficialPlugin(){return!0}}const Dd="underline";class Ohe extends J{static get pluginName(){return"UnderlineEditing"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=this.editor.t;t.model.schema.extend("$text",{allowAttributes:Dd}),t.model.schema.setAttributeProperties(Dd,{isFormatting:!0,copyOnEnter:!0}),t.conversion.attributeToElement({model:Dd,view:"u",upcastAlso:{styles:{"text-decoration":"underline"}}}),t.commands.add(Dd,new eC(t,Dd)),t.keystrokes.set("CTRL+U","underline"),t.accessibility.addKeystrokeInfos({keystrokes:[{label:e("Underline text"),keystroke:"CTRL+U"}]})}}var Nhe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 18v-1.5h14V18zm2.2-8V3.6c0-.4.4-.6.8-.6.3 0 .7.2.7.6v6.2c0 2 1.3 2.8 3.2 2.8 1.9 0 3.4-.9 3.4-2.9V3.6c0-.3.4-.5.8-.5.3 0 .7.2.7.5V10c0 2.7-2.2 4-4.9 4-2.6 0-4.7-1.2-4.7-4z"/></svg>';const g1="underline";class Mhe extends J{static get pluginName(){return"UnderlineUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.locale.t,n=tC({editor:t,commandName:g1,plugin:this,icon:Nhe,label:e("Underline"),keystroke:"CTRL+U"});t.ui.componentFactory.add(g1,()=>n(qe)),t.ui.componentFactory.add("menuBar:"+g1,()=>n(Ln))}}class Lhe extends J{static get requires(){return[Ohe,Mhe]}static get pluginName(){return"Underline"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 *//**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function*vL(i,t){for(const e of t)e&&i.getAttributeProperties(e[0]).copyOnEnter&&(yield e)}class Vhe extends Ze{execute(){this.editor.model.change(t=>{this.enterBlock(t),this.fire("afterExecute",{writer:t})})}enterBlock(t){const e=this.editor.model,n=e.document.selection,s=e.schema,r=n.isCollapsed,o=n.getFirstRange(),a=o.start.parent,l=o.end.parent;if(s.isLimit(a)||s.isLimit(l))return!r&&a==l&&e.deleteContent(n),!1;if(r){const u=vL(t.model.schema,n.getAttributes());return lI(t,o.start),t.setSelectionAttribute(u),!0}else{const u=!(o.start.isAtStart&&o.end.isAtEnd),h=a==l;if(e.deleteContent(n,{leaveUnmerged:u}),u){if(h)return lI(t,n.focus),!0;t.setSelection(l,0)}}return!1}}function lI(i,t){i.split(t),i.setSelection(t.parent.nextSibling,0)}const Dhe={insertParagraph:{isSoft:!1},insertLineBreak:{isSoft:!0}};class yL extends Or{constructor(t){super(t);const e=this.document;let n=!1;e.on("keydown",(s,r)=>{n=r.shiftKey}),e.on("beforeinput",(s,r)=>{if(!this.isEnabled)return;let o=r.inputType;Fe.isSafari&&n&&o=="insertParagraph"&&(o="insertLineBreak");const a=r.domEvent,l=Dhe[o];if(!l)return;const u=new Ou(e,"enter",r.targetRanges[0]);e.fire(u,new mu(t,a,{isSoft:l.isSoft})),u.stop.called&&s.stop()})}observe(){}stopObserving(){}}class Ub extends J{static get pluginName(){return"Enter"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.editing.view,n=e.document,s=this.editor.t;e.addObserver(yL),t.commands.add("enter",new Vhe(t)),this.listenTo(n,"enter",(r,o)=>{n.isComposing||o.preventDefault(),!o.isSoft&&(t.execute("enter"),e.scrollToTheSelection())},{priority:"low"}),t.accessibility.addKeystrokeInfos({keystrokes:[{label:s("Insert a hard break (a new paragraph)"),keystroke:"Enter"}]})}}class Bhe extends Ze{execute(){const t=this.editor.model,e=t.document;t.change(n=>{$he(t,n,e.selection),this.fire("afterExecute",{writer:n})})}refresh(){const t=this.editor.model,e=t.document;this.isEnabled=Fhe(t.schema,e.selection)}}function Fhe(i,t){if(t.rangeCount>1)return!1;const e=t.anchor;if(!e||!i.checkChild(e,"softBreak"))return!1;const n=t.getFirstRange(),s=n.start.parent,r=n.end.parent;return!((jy(s,i)||jy(r,i))&&s!==r)}function $he(i,t,e){const n=e.isCollapsed,s=e.getFirstRange(),r=s.start.parent,o=s.end.parent,a=r==o;if(n){const l=vL(i.schema,e.getAttributes());cI(i,t,s.end),t.removeSelectionAttribute(e.getAttributeKeys()),t.setSelectionAttribute(l)}else{const l=!(s.start.isAtStart&&s.end.isAtEnd);i.deleteContent(e,{leaveUnmerged:l}),a?cI(i,t,e.focus):l&&t.setSelection(o,0)}}function cI(i,t,e){const n=t.createElement("softBreak");i.insertContent(n,e),t.setSelection(n,"after")}function jy(i,t){return i.is("rootElement")?!1:t.isLimit(i)||jy(i.parent,t)}class zhe extends J{static get pluginName(){return"ShiftEnter"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.model.schema,n=t.conversion,s=t.editing.view,r=s.document,o=this.editor.t;e.register("softBreak",{allowWhere:"$text",isInline:!0}),n.for("upcast").elementToElement({model:"softBreak",view:"br"}),n.for("downcast").elementToElement({model:"softBreak",view:(a,{writer:l})=>l.createEmptyElement("br")}),s.addObserver(yL),t.commands.add("shiftEnter",new Bhe(t)),this.listenTo(r,"enter",(a,l)=>{r.isComposing||l.preventDefault(),l.isSoft&&(t.execute("shiftEnter"),s.scrollToTheSelection())},{priority:"low"}),t.accessibility.addKeystrokeInfos({keystrokes:[{label:o("Insert a soft break (a <code>&lt;br&gt;</code> element)"),keystroke:"Shift+Enter"}]})}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class jhe extends Ze{refresh(){this.value=this._getValue(),this.isEnabled=this._checkEnabled()}execute(t={}){const e=this.editor.model,n=e.schema,s=e.document.selection,r=Array.from(s.getSelectedBlocks()),o=t.forceValue===void 0?!this.value:t.forceValue;e.change(a=>{if(!o)this._removeQuote(a,r.filter(ag));else{const l=r.filter(u=>ag(u)||dI(n,u));this._applyQuote(a,l)}})}_getValue(){const t=this.editor.model.document.selection,e=ln(t.getSelectedBlocks());return!!(e&&ag(e))}_checkEnabled(){if(this.value)return!0;const t=this.editor.model.document.selection,e=this.editor.model.schema,n=ln(t.getSelectedBlocks());return n?dI(e,n):!1}_removeQuote(t,e){uI(t,e).reverse().forEach(n=>{if(n.start.isAtStart&&n.end.isAtEnd){t.unwrap(n.start.parent);return}if(n.start.isAtStart){const r=t.createPositionBefore(n.start.parent);t.move(n,r);return}n.end.isAtEnd||t.split(n.end);const s=t.createPositionAfter(n.end.parent);t.move(n,s)})}_applyQuote(t,e){const n=[];uI(t,e).reverse().forEach(s=>{let r=ag(s.start);r||(r=t.createElement("blockQuote"),t.wrap(s,r)),n.push(r)}),n.reverse().reduce((s,r)=>s.nextSibling==r?(t.merge(t.createPositionAfter(s)),s):r)}}function ag(i){return i.parent.name=="blockQuote"?i.parent:null}function uI(i,t){let e,n=0;const s=[];for(;n<t.length;){const r=t[n],o=t[n+1];e||(e=i.createPositionBefore(r)),(!o||r.nextSibling!=o)&&(s.push(i.createRange(e,i.createPositionAfter(r))),e=null),n++}return s}function dI(i,t){const e=i.checkChild(t.parent,"blockQuote"),n=i.checkChild(["$root","blockQuote"],t);return e&&n}class Hhe extends J{static get pluginName(){return"BlockQuoteEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[Ub,Ir]}init(){const t=this.editor,e=t.model.schema;t.commands.add("blockQuote",new jhe(t)),e.register("blockQuote",{inheritAllFrom:"$container"}),t.conversion.elementToElement({model:"blockQuote",view:"blockquote"}),t.model.document.registerPostFixer(o=>{const a=t.model.document.differ.getChanges();for(const l of a)if(l.type=="insert"){const u=l.position.nodeAfter;if(!u)continue;if(u.is("element","blockQuote")&&u.isEmpty)return o.remove(u),!0;if(u.is("element","blockQuote")&&!e.checkChild(l.position,u))return o.unwrap(u),!0;if(u.is("element")){const h=o.createRangeIn(u);for(const f of h.getItems())if(f.is("element","blockQuote")&&!e.checkChild(o.createPositionBefore(f),f))return o.unwrap(f),!0}}else if(l.type=="remove"){const u=l.position.parent;if(u.is("element","blockQuote")&&u.isEmpty)return o.remove(u),!0}return!1});const n=this.editor.editing.view.document,s=t.model.document.selection,r=t.commands.get("blockQuote");this.listenTo(n,"enter",(o,a)=>{if(!s.isCollapsed||!r.value)return;s.getLastPosition().parent.isEmpty&&(t.execute("blockQuote"),t.editing.view.scrollToTheSelection(),a.preventDefault(),o.stop())},{context:"blockquote"}),this.listenTo(n,"delete",(o,a)=>{if(a.direction!="backward"||!s.isCollapsed||!r.value)return;const l=s.getLastPosition().parent;l.isEmpty&&!l.previousSibling&&(t.execute("blockQuote"),t.editing.view.scrollToTheSelection(),a.preventDefault(),o.stop())},{context:"blockquote"})}}class Uhe extends J{static get pluginName(){return"BlockQuoteUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor;t.ui.componentFactory.add("blockQuote",()=>{const e=this._createButton(qe);return e.set({tooltip:!0}),e}),t.ui.componentFactory.add("menuBar:blockQuote",()=>{const e=this._createButton(Ln);return e.set({role:"menuitemcheckbox"}),e})}_createButton(t){const e=this.editor,n=e.locale,s=e.commands.get("blockQuote"),r=new t(e.locale),o=n.t;return r.set({label:o("Block quote"),icon:ve.quote,isToggleable:!0}),r.bind("isEnabled").to(s,"isEnabled"),r.bind("isOn").to(s,"value"),this.listenTo(r,"execute",()=>{e.execute("blockQuote"),e.editing.view.focus()}),r}}class Whe extends J{static get requires(){return[Hhe,Uhe]}static get pluginName(){return"BlockQuote"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class qhe extends Ct(){constructor(){super(...arguments);b(this,"_stack",[])}add(e,n){const s=this._stack,r=s[0];this._insertDescriptor(e);const o=s[0];r!==o&&!p1(r,o)&&this.fire("change:top",{oldDescriptor:r,newDescriptor:o,writer:n})}remove(e,n){const s=this._stack,r=s[0];this._removeDescriptor(e);const o=s[0];r!==o&&!p1(r,o)&&this.fire("change:top",{oldDescriptor:r,newDescriptor:o,writer:n})}_insertDescriptor(e){const n=this._stack,s=n.findIndex(o=>o.id===e.id);if(p1(e,n[s]))return;s>-1&&n.splice(s,1);let r=0;for(;n[r]&&Ghe(n[r],e);)r++;n.splice(r,0,e)}_removeDescriptor(e){const n=this._stack,s=n.findIndex(r=>r.id===e);s>-1&&n.splice(s,1)}}function p1(i,t){return i&&t&&i.priority==t.priority&&Ap(i.classes)==Ap(t.classes)}function Ghe(i,t){return i.priority>t.priority?!0:i.priority<t.priority?!1:Ap(i.classes)>Ap(t.classes)}function Ap(i){return Array.isArray(i)?i.sort().join(","):i}var Khe='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M4 0v1H1v3H0V.5A.5.5 0 0 1 .5 0H4zm8 0h3.5a.5.5 0 0 1 .5.5V4h-1V1h-3V0zM4 16H.5a.5.5 0 0 1-.5-.5V12h1v3h3v1zm8 0v-1h3v-3h1v3.5a.5.5 0 0 1-.5.5H12z"/><path fill-opacity=".256" d="M1 1h14v14H1z"/><g class="ck-icon__selected-indicator"><path d="M7 0h2v1H7V0zM0 7h1v2H0V7zm15 0h1v2h-1V7zm-8 8h2v1H7v-1z"/><path fill-opacity=".254" d="M1 1h14v14H1z"/></g></svg>';const Yhe="ck-widget",hI="ck-widget_selected";function rn(i){return i.is("element")?!!i.getCustomProperty("widget"):!1}function nC(i,t,e={}){if(!i.is("containerElement"))throw new D("widget-to-widget-wrong-element-type",null,{element:i});return t.setAttribute("contenteditable","false",i),t.addClass(Yhe,i),t.setCustomProperty("widget",!0,i),i.getFillerOffset=efe,t.setCustomProperty("widgetLabel",[],i),e.label&&Jhe(i,e.label),e.hasSelectionHandle&&tfe(i,t),_L(i,t),i}function Zhe(i,t,e){if(t.classes&&e.addClass(Bt(t.classes),i),t.attributes)for(const n in t.attributes)e.setAttribute(n,t.attributes[n],i)}function Xhe(i,t,e){if(t.classes&&e.removeClass(Bt(t.classes),i),t.attributes)for(const n in t.attributes)e.removeAttribute(n,i)}function _L(i,t,e=Zhe,n=Xhe){const s=new qhe;s.on("change:top",(a,l)=>{l.oldDescriptor&&n(i,l.oldDescriptor,l.writer),l.newDescriptor&&e(i,l.newDescriptor,l.writer)});const r=(a,l,u)=>s.add(l,u),o=(a,l,u)=>s.remove(l,u);t.setCustomProperty("addHighlight",r,i),t.setCustomProperty("removeHighlight",o,i)}function Jhe(i,t){i.getCustomProperty("widgetLabel").push(t)}function Qhe(i){return i.getCustomProperty("widgetLabel").reduce((e,n)=>typeof n=="function"?e?e+". "+n():n():e?e+". "+n:n,"")}function iC(i,t,e={}){return t.addClass(["ck-editor__editable","ck-editor__nested-editable"],i),t.setAttribute("role","textbox",i),t.setAttribute("tabindex","-1",i),e.label&&t.setAttribute("aria-label",e.label,i),t.setAttribute("contenteditable",i.isReadOnly?"false":"true",i),i.on("change:isReadOnly",(n,s,r)=>{t.setAttribute("contenteditable",r?"false":"true",i)}),i.on("change:isFocused",(n,s,r)=>{r?t.addClass("ck-editor__nested-editable_focused",i):t.removeClass("ck-editor__nested-editable_focused",i)}),_L(i,t),i}function EL(i,t){const e=i.getSelectedElement();if(e){const n=na(i);if(n)return t.createRange(t.createPositionAt(e,n))}return t.schema.findOptimalInsertionRange(i)}function efe(){return null}function tfe(i,t){const e=t.createUIElement("div",{class:"ck ck-widget__selection-handle"},function(n){const s=this.toDomElement(n),r=new Pr;return r.set("content",Khe),r.render(),s.appendChild(r.element),s});t.insert(t.createPositionAt(i,0),e),t.addClass(["ck-widget_with-selection-handle"],i)}function sC(i){const t=a=>{const{width:l,paddingLeft:u,paddingRight:h}=a.ownerDocument.defaultView.getComputedStyle(a);return parseFloat(l)-(parseFloat(u)||0)-(parseFloat(h)||0)},e=i.parentElement;if(!e)return 0;let n=t(e);const s=5;let r=0,o=e;for(;isNaN(n);){if(o=o.parentElement,++r>s)return 0;n=t(o)}return n}function nfe(i,t=new Ye(i)){const e=sC(i);return e?t.width/e*100:0}const Xr="widget-type-around";function Ya(i,t,e){return!!i&&rn(i)&&!e.isInline(t)}function ife(i){return i.closest(".ck-widget__type-around__button")}function sfe(i){return i.classList.contains("ck-widget__type-around__button_before")?"before":"after"}function rfe(i,t){const e=i.closest(".ck-widget");return t.mapDomToView(e)}function na(i){return i.getAttribute(Xr)}var ofe='<svg viewBox="0 0 10 8" xmlns="http://www.w3.org/2000/svg"><path d="M9.055.263v3.972h-6.77M1 4.216l2-2.038m-2 2 2 2.038"/></svg>';const CL=["before","after"],afe=new DOMParser().parseFromString(ofe,"image/svg+xml").firstChild,fI="ck-widget__type-around_disabled";class lfe extends J{constructor(){super(...arguments);b(this,"_currentFakeCaretModelElement",null)}static get pluginName(){return"WidgetTypeAround"}static get isOfficialPlugin(){return!0}static get requires(){return[Ub,Ir]}init(){const e=this.editor,n=e.editing.view;this.on("change:isEnabled",(s,r,o)=>{n.change(a=>{for(const l of n.document.roots)o?a.removeClass(fI,l):a.addClass(fI,l)}),o||e.model.change(a=>{a.removeSelectionAttribute(Xr)})}),this._enableTypeAroundUIInjection(),this._enableInsertingParagraphsOnButtonClick(),this._enableInsertingParagraphsOnEnterKeypress(),this._enableInsertingParagraphsOnTypingKeystroke(),this._enableTypeAroundFakeCaretActivationUsingKeyboardArrows(),this._enableDeleteIntegration(),this._enableInsertContentIntegration(),this._enableInsertObjectIntegration(),this._enableDeleteContentIntegration()}destroy(){super.destroy(),this._currentFakeCaretModelElement=null}_insertParagraph(e,n){const s=this.editor,r=s.editing.view,o=s.model.schema.getAttributesWithProperty(e,"copyOnReplace",!0);s.execute("insertParagraph",{position:s.model.createPositionAt(e,n),attributes:o}),r.focus(),r.scrollToTheSelection()}_listenToIfEnabled(e,n,s,r){this.listenTo(e,n,(...o)=>{this.isEnabled&&s(...o)},r)}_insertParagraphAccordingToFakeCaretPosition(){const s=this.editor.model.document.selection,r=na(s);if(!r)return!1;const o=s.getSelectedElement();return this._insertParagraph(o,r),!0}_enableTypeAroundUIInjection(){const e=this.editor,n=e.model.schema,s=e.locale.t,r={before:s("Insert paragraph before block"),after:s("Insert paragraph after block")};e.editing.downcastDispatcher.on("insert",(o,a,l)=>{const u=l.mapper.toViewElement(a.item);u&&Ya(u,a.item,n)&&(cfe(l.writer,r,u),u.getCustomProperty("widgetLabel").push(()=>this.isEnabled?s("Press Enter to type after or press Shift + Enter to type before the widget"):""))},{priority:"low"})}_enableTypeAroundFakeCaretActivationUsingKeyboardArrows(){const e=this.editor,n=e.model,s=n.document.selection,r=n.schema,o=e.editing.view;this._listenToIfEnabled(o.document,"arrowKey",(l,u)=>{this._handleArrowKeyPress(l,u)},{context:[rn,"$text"],priority:"high"}),this._listenToIfEnabled(s,"change:range",(l,u)=>{u.directChange&&e.model.change(h=>{h.removeSelectionAttribute(Xr)})}),this._listenToIfEnabled(n.document,"change:data",()=>{const l=s.getSelectedElement();if(l){const u=e.editing.mapper.toViewElement(l);if(Ya(u,l,r))return}e.model.change(u=>{u.removeSelectionAttribute(Xr)})}),this._listenToIfEnabled(e.editing.downcastDispatcher,"selection",(l,u,h)=>{const f=h.writer;if(this._currentFakeCaretModelElement){const E=h.mapper.toViewElement(this._currentFakeCaretModelElement);E&&(f.removeClass(CL.map(a),E),this._currentFakeCaretModelElement=null)}const g=u.selection.getSelectedElement();if(!g)return;const p=h.mapper.toViewElement(g);if(!Ya(p,g,r))return;const y=na(u.selection);y&&(f.addClass(a(y),p),this._currentFakeCaretModelElement=g)}),this._listenToIfEnabled(e.ui.focusTracker,"change:isFocused",(l,u,h)=>{h||e.model.change(f=>{f.removeSelectionAttribute(Xr)})});function a(l){return`ck-widget_type-around_show-fake-caret_${l}`}}_handleArrowKeyPress(e,n){const s=this.editor,r=s.model,o=r.document.selection,a=r.schema,l=s.editing.view,u=n.keyCode,h=Fie(u,s.locale.contentLanguageDirection),f=l.document.selection.getSelectedElement(),g=s.editing.mapper.toModelElement(f);let p;Ya(f,g,a)?p=this._handleArrowKeyPressOnSelectedWidget(h):o.isCollapsed?p=this._handleArrowKeyPressWhenSelectionNextToAWidget(h):n.shiftKey||(p=this._handleArrowKeyPressWhenNonCollapsedSelection(h)),p&&(n.preventDefault(),e.stop())}_handleArrowKeyPressOnSelectedWidget(e){const s=this.editor.model,r=s.document.selection,o=na(r);return s.change(a=>{if(o){if(!(o===(e?"after":"before")))return a.removeSelectionAttribute(Xr),!0}else return a.setSelectionAttribute(Xr,e?"after":"before"),!0;return!1})}_handleArrowKeyPressWhenSelectionNextToAWidget(e){const n=this.editor,s=n.model,r=s.schema,o=n.plugins.get("Widget"),a=o._getObjectElementNextToSelection(e),l=n.editing.mapper.toViewElement(a);return Ya(l,a,r)?(s.change(u=>{o._setSelectionOverElement(a),u.setSelectionAttribute(Xr,e?"before":"after")}),!0):!1}_handleArrowKeyPressWhenNonCollapsedSelection(e){const n=this.editor,s=n.model,r=s.schema,o=n.editing.mapper,a=s.document.selection,l=e?a.getLastPosition().nodeBefore:a.getFirstPosition().nodeAfter,u=o.toViewElement(l);return Ya(u,l,r)?(s.change(h=>{h.setSelection(l,"on"),h.setSelectionAttribute(Xr,e?"after":"before")}),!0):!1}_enableInsertingParagraphsOnButtonClick(){const e=this.editor,n=e.editing.view;this._listenToIfEnabled(n.document,"mousedown",(s,r)=>{const o=ife(r.domTarget);if(!o)return;const a=sfe(o),l=rfe(o,n.domConverter),u=e.editing.mapper.toModelElement(l);this._insertParagraph(u,a),r.preventDefault(),s.stop()})}_enableInsertingParagraphsOnEnterKeypress(){const e=this.editor,n=e.model.document.selection,s=e.editing.view;this._listenToIfEnabled(s.document,"enter",(r,o)=>{if(r.eventPhase!="atTarget")return;const a=n.getSelectedElement(),l=e.editing.mapper.toViewElement(a),u=e.model.schema;let h;this._insertParagraphAccordingToFakeCaretPosition()?h=!0:Ya(l,a,u)&&(this._insertParagraph(a,o.isSoft?"before":"after"),h=!0),h&&(o.preventDefault(),r.stop())},{context:rn})}_enableInsertingParagraphsOnTypingKeystroke(){const n=this.editor.editing.view.document;this._listenToIfEnabled(n,"insertText",(s,r)=>{this._insertParagraphAccordingToFakeCaretPosition()&&(r.selection=n.selection)},{priority:"high"}),Fe.isAndroid?this._listenToIfEnabled(n,"keydown",(s,r)=>{r.keyCode==229&&this._insertParagraphAccordingToFakeCaretPosition()}):this._listenToIfEnabled(n,"compositionstart",()=>{this._insertParagraphAccordingToFakeCaretPosition()},{priority:"high"})}_enableDeleteIntegration(){const e=this.editor,n=e.editing.view,s=e.model,r=s.schema;this._listenToIfEnabled(n.document,"delete",(o,a)=>{if(o.eventPhase!="atTarget")return;const l=na(s.document.selection);if(!l)return;const u=a.direction,h=s.document.selection.getSelectedElement(),f=l==="before",g=u=="forward";if(f===g)e.execute("delete",{selection:s.createSelection(h,"on")});else{const y=r.getNearestSelectionRange(s.createPositionAt(h,l),u);if(y)if(!y.isCollapsed)s.change(E=>{E.setSelection(y),e.execute(g?"deleteForward":"delete")});else{const E=s.createSelection(y.start);if(s.modifySelection(E,{direction:u}),!E.focus.isEqual(y.start))s.change(C=>{C.setSelection(y),e.execute(g?"deleteForward":"delete")});else{const C=hfe(r,y.start.parent);s.deleteContent(s.createSelection(C,"on"),{doNotAutoparagraph:!0})}}}a.preventDefault(),o.stop()},{context:rn})}_enableInsertContentIntegration(){const e=this.editor,n=this.editor.model,s=n.document.selection;this._listenToIfEnabled(e.model,"insertContent",(r,[o,a])=>{if(a&&!a.is("documentSelection"))return;const l=na(s);if(l)return r.stop(),n.change(u=>{const h=s.getSelectedElement(),f=n.createPositionAt(h,l),g=u.createSelection(f),p=n.insertContent(o,g);return u.setSelection(g),p})},{priority:"high"})}_enableInsertObjectIntegration(){const e=this.editor,s=this.editor.model.document.selection;this._listenToIfEnabled(e.model,"insertObject",(r,o)=>{const[,a,l={}]=o;if(a&&!a.is("documentSelection"))return;const u=na(s);u&&(l.findOptimalPosition=u,o[3]=l)},{priority:"high"})}_enableDeleteContentIntegration(){const e=this.editor,s=this.editor.model.document.selection;this._listenToIfEnabled(e.model,"deleteContent",(r,[o])=>{if(o&&!o.is("documentSelection"))return;na(s)&&r.stop()},{priority:"high"})}}function cfe(i,t,e){const n=i.createUIElement("div",{class:"ck ck-reset_all ck-widget__type-around"},function(s){const r=this.toDomElement(s);return ufe(r,t),dfe(r),r});i.insert(i.createPositionAt(e,"end"),n)}function ufe(i,t){for(const e of CL){const n=new Pi({tag:"div",attributes:{class:["ck","ck-widget__type-around__button",`ck-widget__type-around__button_${e}`],title:t[e],"aria-hidden":"true"},children:[i.ownerDocument.importNode(afe,!0)]});i.appendChild(n.render())}}function dfe(i){const t=new Pi({tag:"div",attributes:{class:["ck","ck-widget__type-around__fake-caret"]}});i.appendChild(t.render())}function hfe(i,t){let e=t;for(const n of t.getAncestors({parentFirst:!0})){if(n.childCount>1||i.isLimit(n))break;e=n}return e}function ffe(i){const t=i.model;return(e,n)=>{const s=n.keyCode==nt.arrowup,r=n.keyCode==nt.arrowdown,o=n.shiftKey,a=t.document.selection;if(!s&&!r)return;const l=r;if(o&&pfe(a,l))return;const u=mfe(i,a,l);if(u){if(u.isCollapsed){if(a.isCollapsed)return;if(o)return}(u.isCollapsed||gfe(i,u,l))&&(t.change(h=>{const f=l?u.end:u.start;if(o){const g=t.createSelection(a.anchor);g.setFocus(f),h.setSelection(g)}else h.setSelection(f)}),e.stop(),n.preventDefault(),n.stopPropagation())}}}function mfe(i,t,e){const n=i.model;if(e){const s=t.isCollapsed?t.focus:t.getLastPosition(),r=mI(n,s,"forward");if(!r)return null;const o=n.createRange(s,r),a=gI(n.schema,o,"backward");return a?n.createRange(s,a):null}else{const s=t.isCollapsed?t.focus:t.getFirstPosition(),r=mI(n,s,"backward");if(!r)return null;const o=n.createRange(r,s),a=gI(n.schema,o,"forward");return a?n.createRange(a,s):null}}function mI(i,t,e){const n=i.schema,s=i.createRangeIn(t.root),r=e=="forward"?"elementStart":"elementEnd";for(const{previousPosition:o,item:a,type:l}of s.getWalker({startPosition:t,direction:e})){if(n.isLimit(a)&&!n.isInline(a))return o;if(l==r&&n.isBlock(a))return null}return null}function gI(i,t,e){const n=e=="backward"?t.end:t.start;if(i.checkChild(n,"$text"))return n;for(const{nextPosition:s}of t.getWalker({direction:e}))if(i.checkChild(s,"$text"))return s;return null}function gfe(i,t,e){const n=i.model,s=i.view.domConverter;if(e){const u=n.createSelection(t.start);n.modifySelection(u),!u.focus.isAtEnd&&!t.start.isEqual(u.focus)&&(t=n.createRange(u.focus,t.end))}const r=i.mapper.toViewRange(t),o=s.viewRangeToDom(r),a=Ye.getDomRangeRects(o);let l;for(const u of a){if(l===void 0){l=Math.round(u.bottom);continue}if(Math.round(u.top)>=l)return!1;l=Math.max(l,Math.round(u.bottom))}return!0}function pfe(i,t){return!i.isCollapsed&&i.isBackward==t}class wf extends J{constructor(){super(...arguments);b(this,"_previouslySelected",new Set)}static get pluginName(){return"Widget"}static get isOfficialPlugin(){return!0}static get requires(){return[lfe,Ir]}init(){const e=this.editor,n=e.editing.view,s=n.document,r=e.t;this.editor.editing.downcastDispatcher.on("selection",(o,a,l)=>{const u=l.writer,h=a.selection;if(h.isCollapsed)return;const f=h.getSelectedElement();if(!f)return;const g=e.editing.mapper.toViewElement(f);rn(g)&&l.consumable.consume(h,"selection")&&u.setSelection(u.createRangeOn(g),{fake:!0,label:Qhe(g)})}),this.editor.editing.downcastDispatcher.on("selection",(o,a,l)=>{this._clearPreviouslySelectedWidgets(l.writer);const u=l.writer,h=u.document.selection;let f=null;for(const g of h.getRanges())for(const p of g){const y=p.item;rn(y)&&!vfe(y,f)&&(u.addClass(hI,y),this._previouslySelected.add(y),f=y)}},{priority:"low"}),n.addObserver(Lb),this.listenTo(s,"mousedown",(...o)=>this._onMousedown(...o)),this.listenTo(s,"arrowKey",(...o)=>{this._handleSelectionChangeOnArrowKeyPress(...o)},{context:[rn,"$text"]}),this.listenTo(s,"arrowKey",(...o)=>{this._preventDefaultOnArrowKeyPress(...o)},{context:"$root"}),this.listenTo(s,"arrowKey",ffe(this.editor.editing),{context:"$text"}),this.listenTo(s,"delete",(o,a)=>{this._handleDelete(a.direction=="forward")&&(a.preventDefault(),o.stop())},{context:"$root"}),this.listenTo(s,"tab",(o,a)=>{o.eventPhase=="atTarget"&&(a.shiftKey||this._selectFirstNestedEditable()&&(a.preventDefault(),o.stop()))},{context:rn,priority:"low"}),this.listenTo(s,"tab",(o,a)=>{a.shiftKey&&this._selectAncestorWidget()&&(a.preventDefault(),o.stop())},{priority:"low"}),this.listenTo(s,"keydown",(o,a)=>{a.keystroke==nt.esc&&this._selectAncestorWidget()&&(a.preventDefault(),o.stop())},{priority:"low"}),e.accessibility.addKeystrokeInfoGroup({id:"widget",label:r("Keystrokes that can be used when a widget is selected (for example: image, table, etc.)"),keystrokes:[{label:r("Move focus from an editable area back to the parent widget"),keystroke:"Esc"},{label:r("Insert a new paragraph directly after a widget"),keystroke:"Enter"},{label:r("Insert a new paragraph directly before a widget"),keystroke:"Shift+Enter"},{label:r("Move the caret to allow typing directly before a widget"),keystroke:[["arrowup"],["arrowleft"]]},{label:r("Move the caret to allow typing directly after a widget"),keystroke:[["arrowdown"],["arrowright"]]}]})}_onMousedown(e,n){const s=this.editor,r=s.editing.view,o=r.document;let a=n.target;if(!a)return;if(n.domEvent.detail>=3){this._selectBlockContent(a)&&n.preventDefault();return}if(!rn(a)){const u=bfe(a);if(!u)return;if(rn(u))a=u;else{const h=wfe(r,n);if(h&&rn(h))a=h;else return}}Fe.isAndroid&&n.preventDefault(),o.isFocused||r.focus();const l=s.editing.mapper.toModelElement(a);this._setSelectionOverElement(l)}_selectBlockContent(e){const n=this.editor,s=n.model,r=n.editing.mapper,o=s.schema,a=r.findMappedViewAncestor(this.editor.editing.view.createPositionAt(e,0)),l=yfe(r.toModelElement(a),s.schema);return l?(s.change(u=>{const h=o.isLimit(l)?null:_fe(u.createPositionAfter(l),o),f=u.createPositionAt(l,0),g=h?u.createPositionAt(h,0):u.createPositionAt(l,"end");u.setSelection(u.createRange(f,g))}),!0):!1}_handleSelectionChangeOnArrowKeyPress(e,n){const s=n.keyCode,r=this.editor.model,o=r.schema,a=r.document.selection,l=a.getSelectedElement(),u=Ib(s,this.editor.locale.contentLanguageDirection),h=u=="down"||u=="right",f=u=="up"||u=="down";if(l&&o.isObject(l)){const p=h?a.getLastPosition():a.getFirstPosition(),y=o.getNearestSelectionRange(p,h?"forward":"backward");y&&(r.change(E=>{E.setSelection(y)}),n.preventDefault(),e.stop());return}if(!a.isCollapsed&&!n.shiftKey){const p=a.getFirstPosition(),y=a.getLastPosition(),E=p.nodeAfter,C=y.nodeBefore;(E&&o.isObject(E)||C&&o.isObject(C))&&(r.change(k=>{k.setSelection(h?y:p)}),n.preventDefault(),e.stop());return}if(!a.isCollapsed)return;const g=this._getObjectElementNextToSelection(h);if(g&&o.isObject(g)){if(o.isInline(g)&&f)return;this._setSelectionOverElement(g),n.preventDefault(),e.stop()}}_preventDefaultOnArrowKeyPress(e,n){const s=this.editor.model,r=s.schema,o=s.document.selection.getSelectedElement();o&&r.isObject(o)&&(n.preventDefault(),e.stop())}_handleDelete(e){const s=this.editor.model.document.selection;if(!this.editor.model.canEditAt(s)||!s.isCollapsed)return;const r=this._getObjectElementNextToSelection(e);if(r)return this.editor.model.change(o=>{let a=s.anchor.parent;for(;a.isEmpty;){const l=a;a=l.parent,o.remove(l)}this._setSelectionOverElement(r)}),!0}_setSelectionOverElement(e){this.editor.model.change(n=>{n.setSelection(n.createRangeOn(e))})}_getObjectElementNextToSelection(e){const n=this.editor.model,s=n.schema,r=n.document.selection,o=n.createSelection(r);if(n.modifySelection(o,{direction:e?"forward":"backward"}),o.isEqual(r))return null;const a=e?o.focus.nodeBefore:o.focus.nodeAfter;return a&&s.isObject(a)?a:null}_clearPreviouslySelectedWidgets(e){for(const n of this._previouslySelected)e.removeClass(hI,n);this._previouslySelected.clear()}_selectFirstNestedEditable(){const e=this.editor,s=this.editor.editing.view.document;for(const r of s.selection.getFirstRange().getItems())if(r.is("editableElement")){const o=e.editing.mapper.toModelElement(r);/* istanbul ignore next -- @preserve */if(!o)continue;const a=e.model.createPositionAt(o,0),l=e.model.schema.getNearestSelectionRange(a,"forward");return e.model.change(u=>{u.setSelection(l)}),!0}return!1}_selectAncestorWidget(){const e=this.editor,n=e.editing.mapper,r=e.editing.view.document.selection.getFirstPosition().parent,a=(r.is("$text")?r.parent:r).findAncestor(rn);if(!a)return!1;const l=n.toModelElement(a);/* istanbul ignore next -- @preserve */return l?(e.model.change(u=>{u.setSelection(l,"on")}),!0):!1}}function bfe(i){let t=i;for(;t;){if(t.is("editableElement")||rn(t))return t;t=t.parent}return null}function wfe(i,t){const e=k4(t.domEvent);let n=null;if(e?n=i.domConverter.domRangeToView(e):n=i.createRange(i.createPositionAt(t.target,0)),!n)return null;const s=n.start;if(!s.parent)return null;let r=s.parent;return s.parent.is("editableElement")&&(s.isAtEnd&&s.nodeBefore?r=s.nodeBefore:s.isAtStart&&s.nodeAfter&&(r=s.nodeAfter)),r.is("$text")?r.parent:r}function vfe(i,t){return t?Array.from(i.getAncestors()).includes(t):!1}function yfe(i,t){for(const e of i.getAncestors({includeSelf:!0,parentFirst:!0})){if(t.checkChild(e,"$text"))return e;if(t.isLimit(e)&&!t.isObject(e))break}return null}function _fe(i,t){const e=new to({startPosition:i});for(const{item:n}of e){if(t.isLimit(n)||!n.is("element"))return null;if(t.checkChild(n,"$text"))return n}return null}class Pp extends J{constructor(){super(...arguments);b(this,"_toolbarDefinitions",new Map);b(this,"_balloon")}static get requires(){return[nr]}static get pluginName(){return"WidgetToolbarRepository"}static get isOfficialPlugin(){return!0}init(){const e=this.editor;if(e.plugins.has("BalloonToolbar")){const n=e.plugins.get("BalloonToolbar");this.listenTo(n,"show",s=>{Efe(e.editing.view.document.selection)&&s.stop()},{priority:"high"})}this._balloon=this.editor.plugins.get("ContextualBalloon"),this.on("change:isEnabled",()=>{this._updateToolbarsVisibility()}),this.listenTo(e.ui,"update",()=>{this._updateToolbarsVisibility()}),this.listenTo(e.ui.focusTracker,"change:isFocused",()=>{this._updateToolbarsVisibility()},{priority:"low"})}destroy(){super.destroy();for(const e of this._toolbarDefinitions.values())e.view.destroy()}register(e,{ariaLabel:n,items:s,getRelatedElement:r,balloonClassName:o="ck-toolbar-container"}){if(!s.length){dt("widget-toolbar-no-items",{toolbarId:e});return}const a=this.editor,l=a.t,u=new bu(a.locale);if(u.ariaLabel=n||l("Widget toolbar"),this._toolbarDefinitions.has(e))throw new D("widget-toolbar-duplicated",this,{toolbarId:e});const h={view:u,getRelatedElement:r,balloonClassName:o,itemsConfig:s,initialized:!1};a.ui.addToolbar(u,{isContextual:!0,beforeFocus:()=>{const f=r(a.editing.view.document.selection);f&&this._showToolbar(h,f)},afterBlur:()=>{this._hideToolbar(h)}}),this._toolbarDefinitions.set(e,h)}_updateToolbarsVisibility(){let e=0,n=null,s=null;for(const r of this._toolbarDefinitions.values()){const o=r.getRelatedElement(this.editor.editing.view.document.selection);if(!this.isEnabled||!o)this._isToolbarInBalloon(r)&&this._hideToolbar(r);else if(!this.editor.ui.focusTracker.isFocused)this._isToolbarVisible(r)&&this._hideToolbar(r);else{const a=o.getAncestors().length;a>e&&(e=a,n=o,s=r)}}s&&this._showToolbar(s,n)}_hideToolbar(e){this._balloon.remove(e.view),this.stopListening(this._balloon,"change:visibleView")}_showToolbar(e,n){this._isToolbarVisible(e)?pI(this.editor,n):this._isToolbarInBalloon(e)||(e.initialized||(e.initialized=!0,e.view.fillFromConfig(e.itemsConfig,this.editor.ui.componentFactory)),this._balloon.add({view:e.view,position:xL(this.editor,n),balloonClassName:e.balloonClassName}),this.listenTo(this._balloon,"change:visibleView",()=>{for(const s of this._toolbarDefinitions.values())if(this._isToolbarVisible(s)){const r=s.getRelatedElement(this.editor.editing.view.document.selection);pI(this.editor,r)}}))}_isToolbarVisible(e){return this._balloon.visibleView===e.view}_isToolbarInBalloon(e){return this._balloon.hasView(e.view)}}function pI(i,t){const e=i.plugins.get("ContextualBalloon"),n=xL(i,t);e.updatePosition(n)}function xL(i,t){const e=i.editing.view,n=oi.defaultPositions;return{target:e.domConverter.mapViewToDom(t),positions:[n.northArrowSouth,n.northArrowSouthWest,n.northArrowSouthEast,n.southArrowNorth,n.southArrowNorthWest,n.southArrowNorthEast,n.viewportStickyNorth]}}function Efe(i){const t=i.getSelectedElement();return!!(t&&rn(t))}class Cfe extends yt(){constructor(e){super();b(this,"_referenceCoordinates");b(this,"_options");b(this,"_originalWidth");b(this,"_originalHeight");b(this,"_originalWidthPercents");b(this,"_aspectRatio");this.set("activeHandlePosition",null),this.set("proposedWidthPercents",null),this.set("proposedWidth",null),this.set("proposedHeight",null),this.set("proposedHandleHostWidth",null),this.set("proposedHandleHostHeight",null),this._options=e,this._referenceCoordinates=null}get originalWidth(){return this._originalWidth}get originalHeight(){return this._originalHeight}get originalWidthPercents(){return this._originalWidthPercents}get aspectRatio(){return this._aspectRatio}begin(e,n,s){const r=new Ye(n);this.activeHandlePosition=Tfe(e),this._referenceCoordinates=xfe(n,Sfe(this.activeHandlePosition)),this._originalWidth=r.width,this._originalHeight=r.height,this._aspectRatio=r.width/r.height;const o=s.style.width;o&&o.match(/^\d+(\.\d*)?%$/)?this._originalWidthPercents=parseFloat(o):this._originalWidthPercents=nfe(s,r)}update(e){this.proposedWidth=e.width,this.proposedHeight=e.height,this.proposedWidthPercents=e.widthPercents,this.proposedHandleHostWidth=e.handleHostWidth,this.proposedHandleHostHeight=e.handleHostHeight}}function xfe(i,t){const e=new Ye(i),n=t.split("-"),s={x:n[1]=="right"?e.right:e.left,y:n[0]=="bottom"?e.bottom:e.top};return s.x+=i.ownerDocument.defaultView.scrollX,s.y+=i.ownerDocument.defaultView.scrollY,s}function kfe(i){return`ck-widget__resizer__handle-${i}`}function Tfe(i){const t=["top-left","top-right","bottom-right","bottom-left"];for(const e of t)if(i.classList.contains(kfe(e)))return e}function Sfe(i){const t=i.split("-"),e={top:"bottom",bottom:"top",left:"right",right:"left"};return`${e[t[0]]}-${e[t[1]]}`}class Afe extends xe{constructor(){super();const t=this.bindTemplate;this.setTemplate({tag:"div",attributes:{class:["ck","ck-size-view",t.to("_viewPosition",e=>e?`ck-orientation-${e}`:"")],style:{display:t.if("_isVisible","none",e=>!e)}},children:[{text:t.to("_label")}]})}_bindToState(t,e){this.bind("_isVisible").to(e,"proposedWidth",e,"proposedHeight",(n,s)=>n!==null&&s!==null),this.bind("_label").to(e,"proposedHandleHostWidth",e,"proposedHandleHostHeight",e,"proposedWidthPercents",(n,s,r)=>t.unit==="px"?`${n}×${s}`:`${r}%`),this.bind("_viewPosition").to(e,"activeHandlePosition",e,"proposedHandleHostWidth",e,"proposedHandleHostHeight",(n,s,r)=>s<50||r<50?"above-center":n)}_dismiss(){this.unbind(),this._isVisible=!1}}class bI extends yt(){constructor(e){super();b(this,"_state");b(this,"_sizeView");b(this,"_options");b(this,"_viewResizerWrapper",null);b(this,"_initialViewWidth");this._options=e,this.set("isEnabled",!0),this.set("isSelected",!1),this.bind("isVisible").to(this,"isEnabled",this,"isSelected",(n,s)=>n&&s),this.decorate("begin"),this.decorate("cancel"),this.decorate("commit"),this.decorate("updateSize"),this.on("commit",n=>{!this.state.proposedWidth&&!this.state.proposedWidthPercents&&(this._cleanup(),n.stop())},{priority:"high"})}get state(){return this._state}show(){this._options.editor.editing.view.change(n=>{n.removeClass("ck-hidden",this._viewResizerWrapper)})}hide(){this._options.editor.editing.view.change(n=>{n.addClass("ck-hidden",this._viewResizerWrapper)})}attach(){const e=this,n=this._options.viewElement;this._options.editor.editing.view.change(r=>{const o=r.createUIElement("div",{class:"ck ck-reset_all ck-widget__resizer"},function(a){const l=this.toDomElement(a);return e._appendHandles(l),e._appendSizeUI(l),l});r.insert(r.createPositionAt(n,"end"),o),r.addClass("ck-widget_with-resizer",n),this._viewResizerWrapper=o,this.isVisible||this.hide()}),this.on("change:isVisible",()=>{this.isVisible?(this.show(),this.redraw()):this.hide()})}begin(e){this._state=new Cfe(this._options),this._sizeView._bindToState(this._options,this.state),this._initialViewWidth=this._options.viewElement.getStyle("width"),this.state.begin(e,this._getHandleHost(),this._getResizeHost())}updateSize(e){const n=this._proposeNewSize(e);this._options.editor.editing.view.change(h=>{const f=this._options.unit||"%",g=(f==="%"?n.widthPercents:n.width)+f;h.setStyle("width",g,this._options.viewElement)});const r=this._getHandleHost(),o=new Ye(r),a=Math.round(o.width),l=Math.round(o.height),u=new Ye(r);n.width=Math.round(u.width),n.height=Math.round(u.height),this.redraw(o),this.state.update({...n,handleHostWidth:a,handleHostHeight:l})}commit(){const e=this._options.unit||"%",n=(e==="%"?this.state.proposedWidthPercents:this.state.proposedWidth)+e;this._options.editor.editing.view.change(()=>{this._cleanup(),this._options.onCommit(n)})}cancel(){this._cleanup()}destroy(){this.cancel()}redraw(e){const n=this._domResizerWrapper;if(!Rfe(n))return;const s=n.parentElement,r=this._getHandleHost(),o=this._viewResizerWrapper,a=[o.getStyle("width"),o.getStyle("height"),o.getStyle("left"),o.getStyle("top")];let l;if(s.isSameNode(r)){const u=e||new Ye(r);l=[u.width+"px",u.height+"px",void 0,void 0]}else l=[r.offsetWidth+"px",r.offsetHeight+"px",r.offsetLeft+"px",r.offsetTop+"px"];Jn(a,l)!=="same"&&this._options.editor.editing.view.change(u=>{u.setStyle({width:l[0],height:l[1],left:l[2],top:l[3]},o)})}containsHandle(e){return this._domResizerWrapper.contains(e)}static isResizeHandle(e){return e.classList.contains("ck-widget__resizer__handle")}_cleanup(){this._sizeView._dismiss(),this._options.editor.editing.view.change(n=>{n.setStyle("width",this._initialViewWidth,this._options.viewElement)})}_proposeNewSize(e){const n=this.state,s=Ife(e),r=this._options.isCentered?this._options.isCentered(this):!0,o={x:n._referenceCoordinates.x-(s.x+n.originalWidth),y:s.y-n.originalHeight-n._referenceCoordinates.y};r&&n.activeHandlePosition.endsWith("-right")&&(o.x=s.x-(n._referenceCoordinates.x+n.originalWidth)),r&&(o.x*=2);let a=Math.abs(n.originalWidth+o.x),l=Math.abs(n.originalHeight+o.y);return(a/n.aspectRatio>l?"width":"height")=="width"?l=a/n.aspectRatio:a=l*n.aspectRatio,{width:Math.round(a),height:Math.round(l),widthPercents:Math.min(Math.round(n.originalWidthPercents/n.originalWidth*a*100)/100,100)}}_getResizeHost(){const e=this._domResizerWrapper.parentElement;return this._options.getResizeHost(e)}_getHandleHost(){const e=this._domResizerWrapper.parentElement;return this._options.getHandleHost(e)}get _domResizerWrapper(){return this._options.editor.editing.view.domConverter.mapViewToDom(this._viewResizerWrapper)}_appendHandles(e){const n=["top-left","top-right","bottom-right","bottom-left"];for(const s of n)e.appendChild(new Pi({tag:"div",attributes:{class:`ck-widget__resizer__handle ${Pfe(s)}`}}).render())}_appendSizeUI(e){this._sizeView=new Afe,this._sizeView.render(),e.appendChild(this._sizeView.element)}}function Pfe(i){return`ck-widget__resizer__handle-${i}`}function Ife(i){return{x:i.pageX,y:i.pageY}}function Rfe(i){return i&&i.ownerDocument&&i.ownerDocument.contains(i)}class b1 extends J{constructor(){super(...arguments);b(this,"_resizers",new Map);b(this,"_observer");b(this,"_redrawSelectedResizerThrottled")}static get pluginName(){return"WidgetResize"}static get isOfficialPlugin(){return!0}init(){const e=this.editor.editing,n=Ce.window.document;this.set("selectedResizer",null),this.set("_activeResizer",null),e.view.addObserver(Lb),this._observer=new(hi()),this.listenTo(e.view.document,"mousedown",this._mouseDownListener.bind(this),{priority:"high"}),this._observer.listenTo(n,"mousemove",this._mouseMoveListener.bind(this)),this._observer.listenTo(n,"mouseup",this._mouseUpListener.bind(this)),this._redrawSelectedResizerThrottled=fu(()=>this.redrawSelectedResizer(),200),this.editor.ui.on("update",this._redrawSelectedResizerThrottled),this.editor.model.document.on("change",()=>{for(const[r,o]of this._resizers)r.isAttached()||(this._resizers.delete(r),o.destroy())},{priority:"lowest"}),this._observer.listenTo(Ce.window,"resize",this._redrawSelectedResizerThrottled);const s=this.editor.editing.view.document.selection;s.on("change",()=>{const r=s.getSelectedElement(),o=this.getResizerByViewElement(r)||null;o?this.select(o):this.deselect()})}redrawSelectedResizer(){this.selectedResizer&&this.selectedResizer.isVisible&&this.selectedResizer.redraw()}destroy(){super.destroy(),this._observer.stopListening();for(const e of this._resizers.values())e.destroy();this._redrawSelectedResizerThrottled.cancel()}select(e){this.deselect(),this.selectedResizer=e,this.selectedResizer.isSelected=!0}deselect(){this.selectedResizer&&(this.selectedResizer.isSelected=!1),this.selectedResizer=null}attachTo(e){const n=new bI(e),s=this.editor.plugins;if(n.attach(),s.has("WidgetToolbarRepository")){const a=s.get("WidgetToolbarRepository");n.on("begin",()=>{a.forceDisabled("resize")},{priority:"lowest"}),n.on("cancel",()=>{a.clearForceDisabled("resize")},{priority:"highest"}),n.on("commit",()=>{a.clearForceDisabled("resize")},{priority:"highest"})}this._resizers.set(e.viewElement,n);const o=this.editor.editing.view.document.selection.getSelectedElement();return this.getResizerByViewElement(o)==n&&this.select(n),n}getResizerByViewElement(e){return this._resizers.get(e)}_getResizerByHandle(e){for(const n of this._resizers.values())if(n.containsHandle(e))return n}_mouseDownListener(e,n){const s=n.domTarget;bI.isResizeHandle(s)&&(this._activeResizer=this._getResizerByHandle(s)||null,this._activeResizer&&(this._activeResizer.begin(s),e.stop(),n.preventDefault()))}_mouseMoveListener(e,n){this._activeResizer&&this._activeResizer.updateSize(n)}_mouseUpListener(){this._activeResizer&&(this._activeResizer.commit(),this._activeResizer=null)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class Hh extends Nr{constructor(e){super(e);b(this,"domEventType",["paste","copy","cut","drop","dragover","dragstart","dragend","dragenter","dragleave"]);const n=this.document;this.listenTo(n,"paste",s("clipboardInput"),{priority:"low"}),this.listenTo(n,"drop",s("clipboardInput"),{priority:"low"}),this.listenTo(n,"dragover",s("dragging"),{priority:"low"});function s(r){return(o,a)=>{a.preventDefault();const l=a.dropRange?[a.dropRange]:null,u=new ho(n,r);n.fire(u,{dataTransfer:a.dataTransfer,method:o.name,targetRanges:l,target:a.target,domEvent:a.domEvent}),u.stop.called&&a.stopPropagation()}}}onDomEvent(e){const n="clipboardData"in e?e.clipboardData:e.dataTransfer,s=e.type=="drop"||e.type=="paste",r={dataTransfer:new q4(n,{cacheFiles:s})};if(e.type=="drop"||e.type=="dragover"){const o=k4(e);r.dropRange=o&&this.view.domConverter.domRangeToView(o)}this.fire(e.type,e,r)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Ofe(i){return i=i.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r?\n\r?\n/g,"</p><p>").replace(/\r?\n/g,"<br>").replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;").replace(/^\s/,"&nbsp;").replace(/\s$/,"&nbsp;").replace(/\s\s/g," &nbsp;"),(i.includes("</p><p>")||i.includes("<br>"))&&(i=`<p>${i}</p>`),i}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Nfe(i){return i.replace(/<span(?: class="Apple-converted-space"|)>(\s+)<\/span>/g,(t,e)=>e.length==1?" ":e).replace(/<!--[\s\S]*?-->/g,"")}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const wI=["figcaption","li"],vI=["ol","ul"];function kL(i,t){if(t.is("$text")||t.is("$textProxy"))return t.data;if(t.is("element","img")&&t.hasAttribute("alt"))return t.getAttribute("alt");if(t.is("element","br"))return`
`;let e="",n=null;for(const s of t.getChildren())e+=Mfe(s,n)+kL(i,s),n=s;if(t.is("rawElement")){const s=document.createElement("div");t.render(s,i),e+=TL(s)}return e}function TL(i){let t="";if(i.nodeType===Node.TEXT_NODE)return i.textContent;if(i.tagName==="BR")return`
`;for(const e of i.childNodes)t+=TL(e);return t}function Mfe(i,t){return t?i.is("element","li")&&!i.isEmpty&&i.getChild(0).is("containerElement")||vI.includes(i.name)&&vI.includes(t.name)?`

`:!i.is("containerElement")&&!t.is("containerElement")?"":wI.includes(i.name)||wI.includes(t.name)?`
`:i.is("element")&&i.getCustomProperty("dataPipeline:transparentRendering")||t.is("element")&&t.getCustomProperty("dataPipeline:transparentRendering")?"":`

`:""}class gh extends J{constructor(){super(...arguments);b(this,"_markersToCopy",new Map)}static get pluginName(){return"ClipboardMarkersUtils"}static get isOfficialPlugin(){return!0}_registerMarkerToCopy(e,n){this._markersToCopy.set(e,n)}_copySelectedFragmentWithMarkers(e,n,s=r=>r.model.getSelectedContent(r.model.document.selection)){return this.editor.model.change(r=>{const o=r.model.document.selection;r.setSelection(n);const a=this._insertFakeMarkersIntoSelection(r,r.model.document.selection,e),l=s(r),u=this._removeFakeMarkersInsideElement(r,l);for(const[h,f]of Object.entries(a)){u[h]||(u[h]=r.createRangeIn(l));for(const g of f)r.remove(g)}l.markers.clear();for(const[h,f]of Object.entries(u))l.markers.set(h,f);return r.setSelection(o),l})}_pasteMarkersIntoTransformedElement(e,n){const s=this._getPasteMarkersFromRangeMap(e);return this.editor.model.change(r=>{const o=this._insertFakeMarkersElements(r,s),a=n(r),l=this._removeFakeMarkersInsideElement(r,a);for(const u of Object.values(o).flat())r.remove(u);for(const[u,h]of Object.entries(l))r.model.markers.has(u)||r.addMarker(u,{usingOperation:!0,affectsData:!0,range:h});return a})}_pasteFragmentWithMarkers(e){const n=this._getPasteMarkersFromRangeMap(e.markers);e.markers.clear();for(const s of n)e.markers.set(s.name,s.range);return this.editor.model.insertContent(e)}_forceMarkersCopy(e,n,s={allowedActions:"all",copyPartiallySelected:!0,duplicateOnPaste:!0}){const r=this._markersToCopy.get(e);this._markersToCopy.set(e,s),n(),r?this._markersToCopy.set(e,r):this._markersToCopy.delete(e)}_isMarkerCopyable(e,n){const s=this._getMarkerClipboardConfig(e);if(!s)return!1;if(!n)return!0;const{allowedActions:r}=s;return r==="all"||r.includes(n)}_hasMarkerConfiguration(e){return!!this._getMarkerClipboardConfig(e)}_getMarkerClipboardConfig(e){const[n]=e.split(":");return this._markersToCopy.get(n)||null}_insertFakeMarkersIntoSelection(e,n,s){const r=this._getCopyableMarkersFromSelection(e,n,s);return this._insertFakeMarkersElements(e,r)}_getCopyableMarkersFromSelection(e,n,s){const r=Array.from(n.getRanges()),o=new Set(r.flatMap(l=>Array.from(e.model.markers.getMarkersIntersectingRange(l)))),a=l=>{if(!this._isMarkerCopyable(l.name,s))return!1;const{copyPartiallySelected:h}=this._getMarkerClipboardConfig(l.name);if(!h){const f=l.getRange();return r.some(g=>g.containsRange(f,!0))}return!0};return Array.from(o).filter(a).map(l=>({name:s==="dragstart"?this._getUniqueMarkerName(l.name):l.name,range:l.getRange()}))}_getPasteMarkersFromRangeMap(e,n=null){const{model:s}=this.editor;return(e instanceof Map?Array.from(e.entries()):Object.entries(e)).flatMap(([o,a])=>{if(!this._hasMarkerConfiguration(o))return[{name:o,range:a}];if(this._isMarkerCopyable(o,n)){const l=this._getMarkerClipboardConfig(o),u=s.markers.has(o)&&s.markers.get(o).getRange().root.rootName==="$graveyard";return(l.duplicateOnPaste||u)&&(o=this._getUniqueMarkerName(o)),[{name:o,range:a}]}return[]})}_insertFakeMarkersElements(e,n){const s={},r=n.flatMap(o=>{const{start:a,end:l}=o.range;return[{position:a,marker:o,type:"start"},{position:l,marker:o,type:"end"}]}).sort(({position:o},{position:a})=>o.isBefore(a)?1:-1);for(const{position:o,marker:a,type:l}of r){const u=e.createElement("$marker",{"data-name":a.name,"data-type":l});s[a.name]||(s[a.name]=[]),s[a.name].push(u),e.insert(u,o)}return s}_removeFakeMarkersInsideElement(e,n){const r=this._getAllFakeMarkersFromElement(e,n).reduce((o,a)=>{const l=a.markerElement&&e.createPositionBefore(a.markerElement);let u=o[a.name],h=!1;return u&&u.start&&u.end&&(this._getMarkerClipboardConfig(a.name).duplicateOnPaste?o[this._getUniqueMarkerName(a.name)]=o[a.name]:h=!0,u=null),h||(o[a.name]={...u,[a.type]:l}),a.markerElement&&e.remove(a.markerElement),o},{});return Bne(r,o=>new Z(o.start||e.createPositionFromPath(n,[0]),o.end||e.createPositionAt(n,"end")))}_getAllFakeMarkersFromElement(e,n){const s=Array.from(e.createRangeIn(n)).flatMap(({item:a})=>{if(!a.is("element","$marker"))return[];const l=a.getAttribute("data-name"),u=a.getAttribute("data-type");return[{markerElement:a,name:l,type:u}]}),r=[],o=[];for(const a of s)a.type==="end"&&(s.some(u=>u.name===a.name&&u.type==="start")||r.push({markerElement:null,name:a.name,type:"start"})),a.type==="start"&&(s.some(u=>u.name===a.name&&u.type==="end")||o.unshift({markerElement:null,name:a.name,type:"end"}));return[...r,...s,...o]}_getUniqueMarkerName(e){const n=e.split(":"),s=ni().substring(1,6);return n.length===3?`${n.slice(0,2).join(":")}:${s}`:`${n.join(":")}:${s}`}}class Ts extends J{static get pluginName(){return"ClipboardPipeline"}static get isOfficialPlugin(){return!0}static get requires(){return[gh]}init(){this.editor.editing.view.addObserver(Hh),this._setupPasteDrop(),this._setupCopyCut()}_fireOutputTransformationEvent(t,e,n){const s=this.editor.plugins.get("ClipboardMarkersUtils");this.editor.model.enqueueChange({isUndoable:n==="cut"},()=>{const r=s._copySelectedFragmentWithMarkers(n,e);this.fire("outputTransformation",{dataTransfer:t,content:r,method:n})})}_setupPasteDrop(){const t=this.editor,e=t.model,n=t.editing.view,s=n.document,r=this.editor.plugins.get("ClipboardMarkersUtils");this.listenTo(s,"clipboardInput",(o,a)=>{a.method=="paste"&&!t.model.canEditAt(t.model.document.selection)&&o.stop()},{priority:"highest"}),this.listenTo(s,"clipboardInput",(o,a)=>{const l=a.dataTransfer;let u;if(a.content)u=a.content;else{let g="";l.getData("text/html")?g=Nfe(l.getData("text/html")):l.getData("text/plain")&&(g=Ofe(l.getData("text/plain"))),u=this.editor.data.htmlProcessor.toView(g)}const h=new ho(this,"inputTransformation"),f=l.getData("application/ckeditor5-editor-id")||null;this.fire(h,{content:u,dataTransfer:l,sourceEditorId:f,targetRanges:a.targetRanges,method:a.method}),h.stop.called&&o.stop(),n.scrollToTheSelection()},{priority:"low"}),this.listenTo(this,"inputTransformation",(o,a)=>{if(a.content.isEmpty)return;const u=this.editor.data.toModel(a.content,"$clipboardHolder");u.childCount!=0&&(o.stop(),e.change(()=>{this.fire("contentInsertion",{content:u,method:a.method,sourceEditorId:a.sourceEditorId,dataTransfer:a.dataTransfer,targetRanges:a.targetRanges})}))},{priority:"low"}),this.listenTo(this,"contentInsertion",(o,a)=>{a.resultRange=r._pasteFragmentWithMarkers(a.content)},{priority:"low"})}_setupCopyCut(){const t=this.editor,e=t.model.document,s=t.editing.view.document,r=(o,a)=>{const l=a.dataTransfer;a.preventDefault(),this._fireOutputTransformationEvent(l,e.selection,o.name)};this.listenTo(s,"copy",r,{priority:"low"}),this.listenTo(s,"cut",(o,a)=>{t.model.canEditAt(t.model.document.selection)?r(o,a):a.preventDefault()},{priority:"low"}),this.listenTo(this,"outputTransformation",(o,a)=>{const l=t.data.toView(a.content,{isClipboardPipeline:!0});s.fire("clipboardOutput",{dataTransfer:a.dataTransfer,content:l,method:a.method})},{priority:"low"}),this.listenTo(s,"clipboardOutput",(o,a)=>{a.content.isEmpty||(a.dataTransfer.setData("text/html",this.editor.data.htmlProcessor.toData(a.content)),a.dataTransfer.setData("text/plain",kL(t.data.htmlProcessor.domConverter,a.content)),a.dataTransfer.setData("application/ckeditor5-editor-id",this.editor.id)),a.method=="cut"&&t.model.deleteContent(e.selection)},{priority:"low"})}}const w1=ff("px");class Lfe extends xe{constructor(){super();const t=this.bindTemplate;this.set({isVisible:!1,left:null,top:null,width:null}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-clipboard-drop-target-line",t.if("isVisible","ck-hidden",e=>!e)],style:{left:t.to("left",e=>w1(e)),top:t.to("top",e=>w1(e)),width:t.to("width",e=>w1(e))}}})}}class lg extends J{constructor(){super(...arguments);b(this,"removeDropMarkerDelayed",AE(()=>this.removeDropMarker(),40));b(this,"_updateDropMarkerThrottled",fu(e=>this._updateDropMarker(e),40));b(this,"_reconvertMarkerThrottled",fu(()=>{this.editor.model.markers.has("drop-target")&&this.editor.editing.reconvertMarker("drop-target")},0));b(this,"_dropTargetLineView",new Lfe);b(this,"_domEmitter",new(hi()));b(this,"_scrollables",new Map)}static get pluginName(){return"DragDropTarget"}static get isOfficialPlugin(){return!0}init(){this._setupDropMarker()}destroy(){this._domEmitter.stopListening();for(const{resizeObserver:e}of this._scrollables.values())e.destroy();return this._updateDropMarkerThrottled.cancel(),this.removeDropMarkerDelayed.cancel(),this._reconvertMarkerThrottled.cancel(),super.destroy()}updateDropMarker(e,n,s,r,o,a){this.removeDropMarkerDelayed.cancel();const l=yI(this.editor,e,n,s,r,o,a);/* istanbul ignore next -- @preserve */if(l){if(a&&a.containsRange(l))return this.removeDropMarker();this._updateDropMarkerThrottled(l)}}getFinalDropRange(e,n,s,r,o,a){const l=yI(this.editor,e,n,s,r,o,a);return this.removeDropMarker(),l}removeDropMarker(){const e=this.editor.model;this.removeDropMarkerDelayed.cancel(),this._updateDropMarkerThrottled.cancel(),this._dropTargetLineView.isVisible=!1,e.markers.has("drop-target")&&e.change(n=>{n.removeMarker("drop-target")})}_setupDropMarker(){const e=this.editor;e.ui.view.body.add(this._dropTargetLineView),e.conversion.for("editingDowncast").markerToHighlight({model:"drop-target",view:{classes:["ck-clipboard-drop-target-range"]}}),e.conversion.for("editingDowncast").markerToElement({model:"drop-target",view:(n,{writer:s})=>{if(e.model.schema.checkChild(n.markerRange.start,"$text"))return this._dropTargetLineView.isVisible=!1,this._createDropTargetPosition(s);n.markerRange.isCollapsed?this._updateDropTargetLine(n.markerRange):this._dropTargetLineView.isVisible=!1}})}_updateDropMarker(e){const n=this.editor,s=n.model.markers;n.model.change(r=>{s.has("drop-target")?s.get("drop-target").getRange().isEqual(e)||r.updateMarker("drop-target",{range:e}):r.addMarker("drop-target",{range:e,usingOperation:!1,affectsData:!1})})}_createDropTargetPosition(e){return e.createUIElement("span",{class:"ck ck-clipboard-drop-target-position"},function(n){const s=this.toDomElement(n);return s.append("⁠",n.createElement("span"),"⁠"),s})}_updateDropTargetLine(e){const n=this.editor.editing,s=e.start.nodeBefore,r=e.start.nodeAfter,o=e.start.parent,a=s?n.mapper.toViewElement(s):null,l=a?n.view.domConverter.mapViewToDom(a):null,u=r?n.mapper.toViewElement(r):null,h=u?n.view.domConverter.mapViewToDom(u):null,f=n.mapper.toViewElement(o);if(!f)return;const g=n.view.domConverter.mapViewToDom(f),p=this._getScrollableRect(f),{scrollX:y,scrollY:E}=Ce.window,C=l?new Ye(l):null,k=h?new Ye(h):null,T=new Ye(g).excludeScrollbarsAndBorders(),P=C?C.bottom:T.top,S=k?k.top:T.bottom,O=Ce.window.getComputedStyle(g),A=P<=S?(P+S)/2:S;if(p.top<A&&A<p.bottom){const N=T.left+parseFloat(O.paddingLeft),L=T.right-parseFloat(O.paddingRight),M=Math.max(N+y,p.left),B=Math.min(L+y,p.right);this._dropTargetLineView.set({isVisible:!0,left:M,top:A+E,width:B-M})}else this._dropTargetLineView.isVisible=!1}_getScrollableRect(e){const n=e.root.rootName;let s;if(this._scrollables.has(n))s=this._scrollables.get(n).domElement;else{const r=this.editor.editing.view.domConverter.mapViewToDom(e);s=Dfe(r),this._domEmitter.listenTo(s,"scroll",this._reconvertMarkerThrottled,{usePassive:!0});const o=new kE(s,this._reconvertMarkerThrottled);this._scrollables.set(n,{domElement:s,resizeObserver:o})}return new Ye(s).excludeScrollbarsAndBorders()}}function yI(i,t,e,n,s,r,o){const a=i.model,l=i.editing.mapper;let h=_I(i,t);for(;h;){if(!r){if(a.schema.checkChild(h,"$text")){if(e){const f=e[0].start,g=l.toModelPosition(f);if(!o||Array.from(o.getItems({shallow:!0})).every(y=>a.schema.checkChild(g,y))){if(a.schema.checkChild(g,"$text"))return a.createRange(g);if(f)return cg(i,_I(i,f.parent),n,s)}}}else if(a.schema.isInline(h))return cg(i,h,n,s)}if(a.schema.isBlock(h))return cg(i,h,n,s);if(a.schema.checkChild(h,"$block")){const f=Array.from(h.getChildren()).filter(y=>y.is("element")&&!Vfe(i,y));let g=0,p=f.length;if(p==0)return a.createRange(a.createPositionAt(h,"end"));for(;g<p-1;){const y=Math.floor((g+p)/2);SL(i,f[y],n,s)=="before"?p=y:g=y}return cg(i,f[g],n,s)}h=h.parent}return null}function Vfe(i,t){const e=i.editing.mapper,n=i.editing.view.domConverter,s=e.toViewElement(t);if(!s)return!0;const r=n.mapViewToDom(s);return Ce.window.getComputedStyle(r).float!="none"}function cg(i,t,e,n){const s=i.model;return s.createRange(s.createPositionAt(t,SL(i,t,e,n)))}function SL(i,t,e,n){const s=i.editing.mapper,r=i.editing.view.domConverter,o=s.toViewElement(t),a=r.mapViewToDom(o),l=new Ye(a);return i.model.schema.isInline(t)?e<(l.left+l.right)/2?"before":"after":n<(l.top+l.bottom)/2?"before":"after"}function _I(i,t){const e=i.editing.mapper,n=i.editing.view,s=e.toModelElement(t);if(s)return s;const r=n.createPositionBefore(t),o=e.findMappedViewAncestor(r);return e.toModelElement(o)}function Dfe(i){let t=i;do{t=t.parentElement;const e=Ce.window.getComputedStyle(t).overflowY;if(e=="auto"||e=="scroll")break}while(t.tagName!="BODY");return t}class Bfe extends J{constructor(){super(...arguments);b(this,"_isBlockDragging",!1);b(this,"_domEmitter",new(hi()))}static get pluginName(){return"DragDropBlockToolbar"}static get isOfficialPlugin(){return!0}init(){const e=this.editor;if(this.listenTo(e,"change:isReadOnly",(n,s,r)=>{r?(this.forceDisabled("readOnlyMode"),this._isBlockDragging=!1):this.clearForceDisabled("readOnlyMode")}),Fe.isAndroid&&this.forceDisabled("noAndroidSupport"),e.plugins.has("BlockToolbar")){const s=e.plugins.get("BlockToolbar").buttonView.element;this._domEmitter.listenTo(s,"dragstart",(r,o)=>this._handleBlockDragStart(o)),this._domEmitter.listenTo(Ce.document,"dragover",(r,o)=>this._handleBlockDragging(o)),this._domEmitter.listenTo(Ce.document,"drop",(r,o)=>this._handleBlockDragging(o)),this._domEmitter.listenTo(Ce.document,"dragend",()=>this._handleBlockDragEnd(),{useCapture:!0}),this.isEnabled&&s.setAttribute("draggable","true"),this.on("change:isEnabled",(r,o,a)=>{s.setAttribute("draggable",a?"true":"false")})}}destroy(){return this._domEmitter.stopListening(),super.destroy()}_handleBlockDragStart(e){if(!this.isEnabled)return;const n=this.editor.model,s=n.document.selection,r=this.editor.editing.view,o=Array.from(s.getSelectedBlocks()),a=n.createRange(n.createPositionBefore(o[0]),n.createPositionAfter(o[o.length-1]));n.change(l=>l.setSelection(a)),this._isBlockDragging=!0,r.focus(),r.getObserver(Hh).onDomEvent(e)}_handleBlockDragging(e){if(!this.isEnabled||!this._isBlockDragging)return;const n=e.clientX+(this.editor.locale.contentLanguageDirection=="ltr"?100:-100),s=e.clientY,r=document.elementFromPoint(n,s),o=this.editor.editing.view;!r||!r.closest(".ck-editor__editable")||o.getObserver(Hh).onDomEvent({...e,type:e.type,dataTransfer:e.dataTransfer,target:r,clientX:n,clientY:s,preventDefault:()=>e.preventDefault(),stopPropagation:()=>e.stopPropagation()})}_handleBlockDragEnd(){this._isBlockDragging=!1}}class Ffe extends J{constructor(){super(...arguments);b(this,"_draggedRange");b(this,"_draggingUid");b(this,"_draggableElement");b(this,"_clearDraggableAttributesDelayed",AE(()=>this._clearDraggableAttributes(),40));b(this,"_blockMode",!1);b(this,"_domEmitter",new(hi()));b(this,"_previewContainer")}static get pluginName(){return"DragDrop"}static get isOfficialPlugin(){return!0}static get requires(){return[Ts,wf,lg,Bfe]}init(){const e=this.editor,n=e.editing.view;this._draggedRange=null,this._draggingUid="",this._draggableElement=null,n.addObserver(Hh),n.addObserver(Lb),this._setupDragging(),this._setupContentInsertionIntegration(),this._setupClipboardInputIntegration(),this._setupDraggableAttributeHandling(),this.listenTo(e,"change:isReadOnly",(s,r,o)=>{o?this.forceDisabled("readOnlyMode"):this.clearForceDisabled("readOnlyMode")}),this.on("change:isEnabled",(s,r,o)=>{o||this._finalizeDragging(!1)}),Fe.isAndroid&&this.forceDisabled("noAndroidSupport")}destroy(){return this._draggedRange&&(this._draggedRange.detach(),this._draggedRange=null),this._previewContainer&&this._previewContainer.remove(),this._domEmitter.stopListening(),this._clearDraggableAttributesDelayed.cancel(),super.destroy()}_setupDragging(){const e=this.editor,n=e.model,s=e.editing.view,r=s.document,o=e.plugins.get(lg);this.listenTo(r,"dragstart",(a,l)=>{if(l.target&&l.target.is("editableElement")){l.preventDefault();return}if(this._prepareDraggedRange(l.target),!this._draggedRange){l.preventDefault();return}this._draggingUid=ni(),l.dataTransfer.effectAllowed=this.isEnabled?"copyMove":"copy",l.dataTransfer.setData("application/ckeditor5-dragging-uid",this._draggingUid);const u=n.createSelection(this._draggedRange.toRange());this.editor.plugins.get("ClipboardPipeline")._fireOutputTransformationEvent(l.dataTransfer,u,"dragstart");const{dataTransfer:f,domTarget:g,domEvent:p}=l,{clientX:y}=p;this._updatePreview({dataTransfer:f,domTarget:g,clientX:y}),l.stopPropagation(),this.isEnabled||(this._draggedRange.detach(),this._draggedRange=null,this._draggingUid="")},{priority:"low"}),this.listenTo(r,"dragend",(a,l)=>{this._finalizeDragging(!l.dataTransfer.isCanceled&&l.dataTransfer.dropEffect=="move")},{priority:"low"}),this._domEmitter.listenTo(Ce.document,"dragend",()=>{this._blockMode=!1},{useCapture:!0}),this.listenTo(r,"dragenter",()=>{this.isEnabled&&s.focus()}),this.listenTo(r,"dragleave",()=>{o.removeDropMarkerDelayed()}),this.listenTo(r,"dragging",(a,l)=>{if(!this.isEnabled){l.dataTransfer.dropEffect="none";return}const{clientX:u,clientY:h}=l.domEvent;o.updateDropMarker(l.target,l.targetRanges,u,h,this._blockMode,this._draggedRange),this._draggedRange||(l.dataTransfer.dropEffect="copy"),Fe.isGecko||(l.dataTransfer.effectAllowed=="copy"?l.dataTransfer.dropEffect="copy":["all","copyMove"].includes(l.dataTransfer.effectAllowed)&&(l.dataTransfer.dropEffect="move")),a.stop()},{priority:"low"})}_setupClipboardInputIntegration(){const e=this.editor,s=e.editing.view.document,r=e.plugins.get(lg);this.listenTo(s,"clipboardInput",(o,a)=>{if(a.method!="drop")return;const{clientX:l,clientY:u}=a.domEvent,h=r.getFinalDropRange(a.target,a.targetRanges,l,u,this._blockMode,this._draggedRange);if(!h){this._finalizeDragging(!1),o.stop();return}if(this._draggedRange&&this._draggingUid!=a.dataTransfer.getData("application/ckeditor5-dragging-uid")&&(this._draggedRange.detach(),this._draggedRange=null,this._draggingUid=""),EI(a.dataTransfer)=="move"&&this._draggedRange&&this._draggedRange.containsRange(h,!0)){this._finalizeDragging(!1),o.stop();return}a.targetRanges=[e.editing.mapper.toViewRange(h)]},{priority:"high"})}_setupContentInsertionIntegration(){const e=this.editor.plugins.get(Ts);e.on("contentInsertion",(n,s)=>{if(!this.isEnabled||s.method!=="drop")return;const r=s.targetRanges.map(o=>this.editor.editing.mapper.toModelRange(o));this.editor.model.change(o=>o.setSelection(r))},{priority:"high"}),e.on("contentInsertion",(n,s)=>{if(!this.isEnabled||s.method!=="drop")return;const r=EI(s.dataTransfer)=="move",o=!s.resultRange||!s.resultRange.isCollapsed;this._finalizeDragging(o&&r)},{priority:"lowest"})}_setupDraggableAttributeHandling(){const e=this.editor,n=e.editing.view,s=n.document;this.listenTo(s,"mousedown",(r,o)=>{if(Fe.isAndroid||!o)return;this._clearDraggableAttributesDelayed.cancel();let a=CI(o.target);if(Fe.isBlink&&!e.isReadOnly&&!a&&!s.selection.isCollapsed){const l=s.selection.getSelectedElement();(!l||!rn(l))&&(a=s.selection.editableElement)}a&&(n.change(l=>{l.setAttribute("draggable","true",a)}),this._draggableElement=e.editing.mapper.toModelElement(a))}),this.listenTo(s,"mouseup",()=>{Fe.isAndroid||this._clearDraggableAttributesDelayed()})}_clearDraggableAttributes(){const e=this.editor.editing;e.view.change(n=>{this._draggableElement&&this._draggableElement.root.rootName!="$graveyard"&&n.removeAttribute("draggable",e.mapper.toViewElement(this._draggableElement)),this._draggableElement=null})}_finalizeDragging(e){const n=this.editor,s=n.model;n.plugins.get(lg).removeDropMarker(),this._clearDraggableAttributes(),n.plugins.has("WidgetToolbarRepository")&&n.plugins.get("WidgetToolbarRepository").clearForceDisabled("dragDrop"),this._draggingUid="",this._previewContainer&&(this._previewContainer.remove(),this._previewContainer=void 0),this._draggedRange&&(e&&this.isEnabled&&s.change(o=>{const a=s.createSelection(this._draggedRange);s.deleteContent(a,{doNotAutoparagraph:!0});const l=a.getFirstPosition().parent;l.isEmpty&&!s.schema.checkChild(l,"$text")&&s.schema.checkChild(l,"paragraph")&&o.insertElement("paragraph",l,0)}),this._draggedRange.detach(),this._draggedRange=null)}_prepareDraggedRange(e){const n=this.editor,s=n.model,r=s.document.selection,o=e?CI(e):null;if(o){const h=n.editing.mapper.toModelElement(o);this._draggedRange=ai.fromRange(s.createRangeOn(h)),this._blockMode=s.schema.isBlock(h),n.plugins.has("WidgetToolbarRepository")&&n.plugins.get("WidgetToolbarRepository").forceDisabled("dragDrop");return}if(r.isCollapsed&&!r.getFirstPosition().parent.isEmpty)return;const a=Array.from(r.getSelectedBlocks()),l=r.getFirstRange();if(a.length==0){this._draggedRange=ai.fromRange(l);return}const u=AL(s,a);if(a.length>1)this._draggedRange=ai.fromRange(u),this._blockMode=!0;else if(a.length==1){const h=l.start.isTouching(u.start)&&l.end.isTouching(u.end);this._draggedRange=ai.fromRange(h?u:l),this._blockMode=h}s.change(h=>h.setSelection(this._draggedRange.toRange()))}_updatePreview({dataTransfer:e,domTarget:n,clientX:s}){const r=this.editor.editing.view,o=r.document.selection.editableElement,a=r.domConverter.mapViewToDom(o),l=Ce.window.getComputedStyle(a);this._previewContainer?this._previewContainer.firstElementChild&&this._previewContainer.removeChild(this._previewContainer.firstElementChild):(this._previewContainer=Fs(Ce.document,"div",{style:"position: fixed; left: -999999px;"}),Ce.document.body.appendChild(this._previewContainer));const u=new Ye(a);if(a.contains(n))return;const h=parseFloat(l.paddingLeft),f=Fs(Ce.document,"div");f.className="ck ck-content",f.style.width=l.width,f.style.paddingLeft=`${u.left-s+h}px`,Fe.isiOS&&(f.style.backgroundColor="white"),r.domConverter.setContentOf(f,e.getData("text/html")),e.setDragImage(f,0,0),this._previewContainer.appendChild(f)}}function EI(i){return Fe.isGecko?i.dropEffect:["all","copyMove"].includes(i.effectAllowed)?"move":"copy"}function CI(i){if(i.is("editableElement"))return null;if(i.hasClass("ck-widget__selection-handle"))return i.findAncestor(rn);if(rn(i))return i;const t=i.findAncestor(e=>rn(e)||e.is("editableElement"));return rn(t)?t:null}function AL(i,t){const e=t[0],n=t[t.length-1],s=e.getCommonAncestor(n),r=i.createPositionBefore(e),o=i.createPositionAfter(n);if(s&&s.is("element")&&!i.schema.isLimit(s)){const a=i.createRangeOn(s),l=r.isTouching(a.start),u=o.isTouching(a.end);if(l&&u)return AL(i,[s])}return i.createRange(r,o)}class $fe extends J{static get pluginName(){return"PastePlainText"}static get isOfficialPlugin(){return!0}static get requires(){return[Ts]}init(){const t=this.editor,e=t.model,n=t.editing.view,s=e.document.selection;n.addObserver(Hh),t.plugins.get(Ts).on("contentInsertion",(r,o)=>{zfe(o.content,e)&&e.change(a=>{const l=Array.from(s.getAttributes()).filter(([h])=>e.schema.getAttributeProperties(h).isFormatting);s.isCollapsed||e.deleteContent(s,{doNotAutoparagraph:!0}),l.push(...s.getAttributes());const u=a.createRangeIn(o.content);for(const h of u.getItems())for(const f of l)e.schema.checkAttribute(h,f[0])&&a.setAttribute(f[0],f[1],h)})})}}function zfe(i,t){let e=t.createRangeIn(i);if(i.childCount==1){const n=i.getChild(0);n.is("element")&&t.schema.isBlock(n)&&!t.schema.isObject(n)&&!t.schema.isLimit(n)&&(e=t.createRangeIn(n))}for(const n of e.getItems())if(!t.schema.isInline(n)||Array.from(n.getAttributeKeys()).find(r=>t.schema.getAttributeProperties(r).isFormatting))return!1;return!0}class rC extends J{static get pluginName(){return"Clipboard"}static get isOfficialPlugin(){return!0}static get requires(){return[gh,Ts,Ffe,$fe]}init(){const t=this.editor,e=this.editor.t;t.accessibility.addKeystrokeInfos({keystrokes:[{label:e("Copy selected content"),keystroke:"CTRL+C"},{label:e("Paste content"),keystroke:"CTRL+V"},{label:e("Paste content as plain text"),keystroke:"CTRL+SHIFT+V"}]})}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const jfe={autoRefresh:!0},xI=36e5,Hfe=5e3;class oC extends yt(){constructor(e,n={}){super();b(this,"_refresh");b(this,"_options");b(this,"_tokenRefreshTimeout");b(this,"_isDestroyed",!1);if(!e)throw new D("token-missing-token-url",this);n.initValue&&this._validateTokenValue(n.initValue),this.set("value",n.initValue),typeof e=="function"?this._refresh=e:this._refresh=()=>Ufe(e),this._options={...jfe,...n}}init(){return new Promise((e,n)=>{if(!this.value){this.refreshToken().then(e).catch(n);return}this._options.autoRefresh&&this._registerRefreshTokenTimeout(),e(this)})}refreshToken(){const e=this._options.autoRefresh;return this._refresh().then(n=>(this._validateTokenValue(n),this.set("value",n),e&&this._registerRefreshTokenTimeout(),this)).catch(n=>{throw dt("token-refresh-failed",{autoRefresh:e}),e&&this._registerRefreshTokenTimeout(Hfe),n})}destroy(){this._isDestroyed=!0,clearTimeout(this._tokenRefreshTimeout)}_validateTokenValue(e){const n=typeof e=="string",s=!/^".*"$/.test(e),r=n&&e.split(".").length===3;if(!(s&&r))throw new D("token-not-in-jwt-format",this)}_registerRefreshTokenTimeout(e){if(clearTimeout(this._tokenRefreshTimeout),this._isDestroyed)return;const n=e||this._getTokenRefreshTimeoutTime();this._tokenRefreshTimeout=setTimeout(()=>{this.refreshToken()},n)}_getTokenRefreshTimeoutTime(){try{const[,e]=this.value.split("."),{exp:n}=JSON.parse(atob(e));return n?Math.floor((n*1e3-Date.now())/2):xI}catch{return xI}}static create(e,n={}){return new oC(e,n).init()}}function Ufe(i){return new Promise((t,e)=>{const n=new XMLHttpRequest;n.open("GET",i),n.addEventListener("load",()=>{const s=n.status,r=n.response;return s<200||s>299?e(new D("token-cannot-download-new-token",null)):t(r)}),n.addEventListener("error",()=>e(new Error("Network Error"))),n.addEventListener("abort",()=>e(new Error("Abort"))),n.send()})}const Hy=/^data:(\S*?);base64,/;class Wfe extends Ct(){constructor(e,n,s){super();b(this,"file");b(this,"xhr");b(this,"_token");b(this,"_apiAddress");if(!e)throw new D("fileuploader-missing-file",null);if(!n)throw new D("fileuploader-missing-token",null);if(!s)throw new D("fileuploader-missing-api-address",null);this.file=Gfe(e)?qfe(e):e,this._token=n,this._apiAddress=s}onProgress(e){return this.on("progress",(n,s)=>e(s)),this}onError(e){return this.once("error",(n,s)=>e(s)),this}abort(){this.xhr.abort()}send(){return this._prepareRequest(),this._attachXHRListeners(),this._sendRequest()}_prepareRequest(){const e=new XMLHttpRequest;e.open("POST",this._apiAddress),e.setRequestHeader("Authorization",this._token.value),e.responseType="json",this.xhr=e}_attachXHRListeners(){const e=this.xhr,n=s=>()=>this.fire("error",s);e.addEventListener("error",n("Network Error")),e.addEventListener("abort",n("Abort"));/* istanbul ignore else -- @preserve */e.upload&&e.upload.addEventListener("progress",s=>{s.lengthComputable&&this.fire("progress",{total:s.total,uploaded:s.loaded})}),e.addEventListener("load",()=>{const s=e.status,r=e.response;if(s<200||s>299)return this.fire("error",r.message||r.error)})}_sendRequest(){const e=new FormData,n=this.xhr;return e.append("file",this.file),new Promise((s,r)=>{n.addEventListener("load",()=>{const o=n.status,a=n.response;return o<200||o>299?a.message?r(new D("fileuploader-uploading-data-failed",this,{message:a.message})):r(a.error):s(a)}),n.addEventListener("error",()=>r(new Error("Network Error"))),n.addEventListener("abort",()=>r(new Error("Abort"))),n.send(e)})}}function qfe(i,t=512){try{const e=i.match(Hy)[1],n=atob(i.replace(Hy,"")),s=[];for(let r=0;r<n.length;r+=t){const o=n.slice(r,r+t),a=new Array(o.length);for(let l=0;l<o.length;l++)a[l]=o.charCodeAt(l);s.push(new Uint8Array(a))}return new Blob(s,{type:e})}catch{throw new D("fileuploader-decoding-image-data-error",null)}}function Gfe(i){if(typeof i!="string")return!1;const t=i.match(Hy);return!!(t&&t.length)}class Kfe{constructor(t,e){b(this,"_token");b(this,"_apiAddress");if(!t)throw new D("uploadgateway-missing-token",null);if(!e)throw new D("uploadgateway-missing-api-address",null);this._token=t,this._apiAddress=e}upload(t){return new Wfe(t,this._token,this._apiAddress)}}class Yfe extends Db{static get pluginName(){return"CloudServicesCore"}static get isOfficialPlugin(){return!0}createToken(t,e){return new oC(t,e)}createUploadGateway(t,e){return new Kfe(t,e)}}class Zfe extends Db{constructor(){super(...arguments);b(this,"tokenUrl");b(this,"uploadUrl");b(this,"webSocketUrl");b(this,"bundleVersion");b(this,"token",null);b(this,"_tokens",new Map)}static get pluginName(){return"CloudServices"}static get isOfficialPlugin(){return!0}static get requires(){return[Yfe]}async init(){const n=this.context.config.get("cloudServices")||{};for(const[o,a]of Object.entries(n))this[o]=a;if(!this.tokenUrl){this.token=null;return}const r=this.context.plugins.get("CloudServicesCore").createToken(this.tokenUrl);try{this.token=await r.init(),this._tokens.set(this.tokenUrl,this.token)}catch(o){throw r.destroy(),o}}async registerTokenUrl(e){if(this._tokens.has(e))return this.getTokenFor(e);const s=await this.context.plugins.get("CloudServicesCore").createToken(e).init();return this._tokens.set(e,s),s}getTokenFor(e){const n=this._tokens.get(e);if(!n)throw new D("cloudservices-token-not-registered",this);return n}destroy(){super.destroy();for(const e of this._tokens.values())e.destroy()}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class Xfe extends Mde{constructor(e,n){super(e);b(this,"view");b(this,"_toolbarConfig");b(this,"_elementReplacer");this.view=n,this._toolbarConfig=QM(e.config.get("toolbar")),this._elementReplacer=new vie,this.listenTo(e.editing.view,"scrollToTheSelection",this._handleScrollToTheSelectionWithStickyPanel.bind(this))}get element(){return this.view.element}init(e){const n=this.editor,s=this.view,r=n.editing.view,o=s.editable,a=r.document.getRoot();o.name=a.rootName,s.render();const l=o.element;this.setEditableElement(o.name,l),s.editable.bind("isFocused").to(this.focusTracker),r.attachDomRoot(l),e&&this._elementReplacer.replace(e,this.element),this._initPlaceholder(),this._initToolbar(),s.menuBarView&&this._initMenuBar(s.menuBarView),this._initDialogPluginIntegration(),this._initContextualBalloonIntegration(),this.fire("ready")}destroy(){super.destroy();const e=this.view,n=this.editor.editing.view;this._elementReplacer.restore(),n.getDomRoot(e.editable.name)&&n.detachDomRoot(e.editable.name),e.destroy()}_initToolbar(){const e=this.view;e.stickyPanel.bind("isActive").to(this.focusTracker,"isFocused"),e.stickyPanel.limiterElement=e.element,e.stickyPanel.bind("viewportTopOffset").to(this,"viewportOffset",({top:n})=>n||0),e.toolbar.fillFromConfig(this._toolbarConfig,this.componentFactory),this.addToolbar(e.toolbar)}_initPlaceholder(){const e=this.editor,n=e.editing.view,s=n.document.getRoot(),r=e.sourceElement;let o;const a=e.config.get("placeholder");a&&(o=typeof a=="string"?a:a[this.view.editable.name]),!o&&r&&r.tagName.toLowerCase()==="textarea"&&(o=r.getAttribute("placeholder")),o&&(s.placeholder=o),OE({view:n,element:s,isDirectHost:!1,keepOnFocus:!0})}_initContextualBalloonIntegration(){if(!this.editor.plugins.has("ContextualBalloon"))return;const{stickyPanel:e}=this.view,n=this.editor.plugins.get("ContextualBalloon");n.on("getPositionOptions",r=>{const o=r.return;if(!o||!e.isSticky||!e.element)return;const a=new Ye(e.element).height,l=typeof o.target=="function"?o.target():o.target,u=typeof o.limiter=="function"?o.limiter():o.limiter;if(l&&u&&new Ye(l).height>=new Ye(u).height-a)return;const h={...o.viewportOffsetConfig},f=(h.top||0)+a;r.return={...o,viewportOffsetConfig:{...h,top:f}}},{priority:"low"});const s=()=>{n.visibleView&&n.updatePosition()};this.listenTo(e,"change:isSticky",s),this.listenTo(this.editor.ui,"change:viewportOffset",s)}_handleScrollToTheSelectionWithStickyPanel(e,n,s){const r=this.view.stickyPanel;if(r.isSticky){const o=new Ye(r.element).height;n.viewportOffset.top+=o}else{const o=()=>{this.editor.editing.view.scrollToTheSelection(s)};this.listenTo(r,"change:isSticky",o),setTimeout(()=>{this.stopListening(r,"change:isSticky",o)},20)}}_initDialogPluginIntegration(){if(!this.editor.plugins.has("Dialog"))return;const e=this.view.stickyPanel,n=this.editor.plugins.get("Dialog");n.on("show",()=>{const s=n.view;s.on("moveTo",(r,o)=>{if(!e.isSticky||s.wasMoved||s.isModal)return;const a=new Ye(e.contentPanelElement);o[1]<a.bottom+Fh.defaultOffset&&(o[1]=a.bottom+Fh.defaultOffset)},{priority:"high"})},{priority:"low"})}}class Jfe extends Vde{constructor(e,n,s={}){super(e);b(this,"stickyPanel");b(this,"toolbar");b(this,"editable");this.stickyPanel=new zde(e),this.toolbar=new bu(e,{shouldGroupWhenFull:s.shouldToolbarGroupWhenFull}),s.useMenuBar&&(this.menuBarView=new Wde(e)),this.editable=new Bde(e,n,void 0,{label:s.label})}render(){super.render(),this.menuBarView?this.stickyPanel.content.addMany([this.menuBarView,this.toolbar]):this.stickyPanel.content.add(this.toolbar),this.top.add(this.stickyPanel),this.main.add(this.editable)}}class Qfe extends Ly(Vc){constructor(e,n={}){if(!Vg(e)&&n.initialData!==void 0)throw new D("editor-create-initial-data",null);super(n);b(this,"ui");this.config.define("menuBar.isVisible",!1),this.config.get("initialData")===void 0&&this.config.set("initialData",eme(e)),Vg(e)&&(this.sourceElement=e),this.model.document.createRoot();const s=!this.config.get("toolbar.shouldNotGroupWhenFull"),r=this.config.get("menuBar"),o=new Jfe(this.locale,this.editing.view,{shouldToolbarGroupWhenFull:s,useMenuBar:r.isVisible,label:this.config.get("label")});this.ui=new Xfe(this,o),xle(this)}static get editorName(){return"ClassicEditor"}destroy(){return this.sourceElement&&this.updateSourceElement(),this.ui.destroy(),super.destroy()}static create(e,n={}){return new Promise(s=>{const r=new this(e,n);s(r.initPlugins().then(()=>r.ui.init(Vg(e)?e:null)).then(()=>r.data.init(r.config.get("initialData"))).then(()=>r.fire("ready")).then(()=>r))})}}function eme(i){return Vg(i)?xie(i):i}function Vg(i){return pa(i)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class tme extends Ze{constructor(t){super(t),this.affectsData=!1}execute(){const t=this.editor.model,e=t.document.selection;let n=t.schema.getLimitElement(e);if(e.containsEntireContent(n)||!kI(t.schema,n))do if(n=n.parent,!n)return;while(!kI(t.schema,n));t.change(s=>{s.setSelection(n,"in")})}}function kI(i,t){return i.isLimit(t)&&(i.checkChild(t,"$text")||i.checkChild(t,"paragraph"))}const nme=Pb("Ctrl+A");class ime extends J{static get pluginName(){return"SelectAllEditing"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.t,s=t.editing.view.document;t.commands.add("selectAll",new tme(t)),this.listenTo(s,"keydown",(r,o)=>{Cl(o)===nme&&(t.execute("selectAll"),o.preventDefault())}),t.accessibility.addKeystrokeInfos({keystrokes:[{label:e("Select all"),keystroke:"CTRL+A"}]})}}var sme='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M.75 15.5a.75.75 0 0 1 .75.75V18l.008.09A.5.5 0 0 0 2 18.5h1.75a.75.75 0 1 1 0 1.5H1.5l-.144-.007a1.5 1.5 0 0 1-1.35-1.349L0 18.5v-2.25a.75.75 0 0 1 .75-.75zm18.5 0a.75.75 0 0 1 .75.75v2.25l-.007.144a1.5 1.5 0 0 1-1.349 1.35L18.5 20h-2.25a.75.75 0 1 1 0-1.5H18a.5.5 0 0 0 .492-.41L18.5 18v-1.75a.75.75 0 0 1 .75-.75zm-10.45 3c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2H7.2a.2.2 0 0 1-.2-.2v-1.1c0-.11.09-.2.2-.2h1.6zm4 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2h-1.6a.2.2 0 0 1-.2-.2v-1.1c0-.11.09-.2.2-.2h1.6zm.45-5.5a.75.75 0 1 1 0 1.5h-8.5a.75.75 0 1 1 0-1.5h8.5zM1.3 11c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2H.2a.2.2 0 0 1-.2-.2v-1.6c0-.11.09-.2.2-.2h1.1zm18.5 0c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2h-1.1a.2.2 0 0 1-.2-.2v-1.6c0-.11.09-.2.2-.2h1.1zm-4.55-2a.75.75 0 1 1 0 1.5H4.75a.75.75 0 1 1 0-1.5h10.5zM1.3 7c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2H.2a.2.2 0 0 1-.2-.2V7.2c0-.11.09-.2.2-.2h1.1zm18.5 0c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2h-1.1a.2.2 0 0 1-.2-.2V7.2c0-.11.09-.2.2-.2h1.1zm-4.55-2a.75.75 0 1 1 0 1.5h-2.5a.75.75 0 1 1 0-1.5h2.5zm-5 0a.75.75 0 1 1 0 1.5h-5.5a.75.75 0 0 1 0-1.5h5.5zm-6.5-5a.75.75 0 0 1 0 1.5H2a.5.5 0 0 0-.492.41L1.5 2v1.75a.75.75 0 0 1-1.5 0V1.5l.007-.144A1.5 1.5 0 0 1 1.356.006L1.5 0h2.25zM18.5 0l.144.007a1.5 1.5 0 0 1 1.35 1.349L20 1.5v2.25a.75.75 0 1 1-1.5 0V2l-.008-.09A.5.5 0 0 0 18 1.5h-1.75a.75.75 0 1 1 0-1.5h2.25zM8.8 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2H7.2a.2.2 0 0 1-.2-.2V.2c0-.11.09-.2.2-.2h1.6zm4 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2h-1.6a.2.2 0 0 1-.2-.2V.2c0-.11.09-.2.2-.2h1.6z"/></svg>';class rme extends J{static get pluginName(){return"SelectAllUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor;t.ui.componentFactory.add("selectAll",()=>{const e=this._createButton(qe);return e.set({tooltip:!0}),e}),t.ui.componentFactory.add("menuBar:selectAll",()=>this._createButton(Ln))}_createButton(t){const e=this.editor,n=e.locale,s=e.commands.get("selectAll"),r=new t(e.locale),o=n.t;return r.set({label:o("Select all"),icon:sme,keystroke:"Ctrl+A"}),r.bind("isEnabled").to(s,"isEnabled"),this.listenTo(r,"execute",()=>{e.execute("selectAll"),e.editing.view.focus()}),r}}class ome extends J{static get requires(){return[ime,rme]}static get pluginName(){return"SelectAll"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class PL extends Ze{constructor(e){super(e);b(this,"_stack",[]);b(this,"_createdBatches",new WeakSet);this.refresh(),this._isEnabledBasedOnSelection=!1,this.listenTo(e.data,"set",(n,s)=>{s[1]={...s[1]};const r=s[1];r.batchType||(r.batchType={isUndoable:!1})},{priority:"high"}),this.listenTo(e.data,"set",(n,s)=>{s[1].batchType.isUndoable||this.clearStack()})}refresh(){this.isEnabled=this._stack.length>0}get createdBatches(){return this._createdBatches}addBatch(e){const n=this.editor.model.document.selection,s={ranges:n.hasOwnRange?Array.from(n.getRanges()):[],isBackward:n.isBackward};this._stack.push({batch:e,selection:s}),this.refresh()}clearStack(){this._stack=[],this.refresh()}_restoreSelection(e,n,s){const r=this.editor.model,o=r.document,a=[],l=e.map(h=>h.getTransformedByOperations(s)),u=l.flat();for(const h of l){const f=h.filter(g=>g.root!=o.graveyard).filter(g=>!lme(g,u));f.length&&(ame(f),a.push(f[0]))}a.length&&r.change(h=>{h.setSelection(a,{backward:n})})}_undo(e,n){const s=this.editor.model,r=s.document;this._createdBatches.add(n);const o=e.operations.slice().filter(a=>a.isDocumentOperation);o.reverse();for(const a of o){const l=a.baseVersion+1,u=Array.from(r.history.getOperations(l)),f=Koe([a.getReversed()],u,{useRelations:!0,document:this.editor.model.document,padWithNoOps:!1,forceWeakRemove:!0}).operationsA;for(let g of f){const p=g.affectedSelectable;p&&!s.canEditAt(p)&&(g=new xn(g.baseVersion)),n.addOperation(g),s.applyOperation(g),r.history.setOperationAsUndone(a,g)}}}}function ame(i){i.sort((t,e)=>t.start.isBefore(e.start)?-1:1);for(let t=1;t<i.length;t++){const n=i[t-1].getJoined(i[t],!0);n&&(t--,i.splice(t,2,n))}}function lme(i,t){return t.some(e=>e!==i&&e.containsRange(i,!0))}class cme extends PL{execute(t=null){const e=t?this._stack.findIndex(r=>r.batch==t):this._stack.length-1,n=this._stack.splice(e,1)[0],s=this.editor.model.createBatch({isUndo:!0});this.editor.model.enqueueChange(s,()=>{this._undo(n.batch,s);const r=this.editor.model.document.history.getOperations(n.batch.baseVersion);this._restoreSelection(n.selection.ranges,n.selection.isBackward,r)}),this.fire("revert",n.batch,s),this.refresh()}}class ume extends PL{execute(){const t=this._stack.pop(),e=this.editor.model.createBatch({isUndo:!0});this.editor.model.enqueueChange(e,()=>{const s=t.batch.operations[t.batch.operations.length-1].baseVersion+1,r=this.editor.model.document.history.getOperations(s);this._restoreSelection(t.selection.ranges,t.selection.isBackward,r),this._undo(t.batch,e)}),this.refresh()}}class dme extends J{constructor(){super(...arguments);b(this,"_undoCommand");b(this,"_redoCommand");b(this,"_batchRegistry",new WeakSet)}static get pluginName(){return"UndoEditing"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,n=e.t;this._undoCommand=new cme(e),this._redoCommand=new ume(e),e.commands.add("undo",this._undoCommand),e.commands.add("redo",this._redoCommand),this.listenTo(e.model,"applyOperation",(s,r)=>{const o=r[0];if(!o.isDocumentOperation)return;const a=o.batch,l=this._redoCommand.createdBatches.has(a),u=this._undoCommand.createdBatches.has(a);this._batchRegistry.has(a)||(this._batchRegistry.add(a),a.isUndoable&&(l?this._undoCommand.addBatch(a):u||(this._undoCommand.addBatch(a),this._redoCommand.clearStack())))},{priority:"highest"}),this.listenTo(this._undoCommand,"revert",(s,r,o)=>{this._redoCommand.addBatch(o)}),e.keystrokes.set("CTRL+Z","undo"),e.keystrokes.set("CTRL+Y","redo"),e.keystrokes.set("CTRL+SHIFT+Z","redo"),e.accessibility.addKeystrokeInfos({keystrokes:[{label:n("Undo"),keystroke:"CTRL+Z"},{label:n("Redo"),keystroke:[["CTRL+Y"],["CTRL+SHIFT+Z"]]}]})}}class hme extends J{static get pluginName(){return"UndoUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.locale,n=t.t,s=e.uiLanguageDirection=="ltr"?ve.undo:ve.redo,r=e.uiLanguageDirection=="ltr"?ve.redo:ve.undo;this._addButtonsToFactory("undo",n("Undo"),"CTRL+Z",s),this._addButtonsToFactory("redo",n("Redo"),"CTRL+Y",r)}_addButtonsToFactory(t,e,n,s){const r=this.editor;r.ui.componentFactory.add(t,()=>{const o=this._createButton(qe,t,e,n,s);return o.set({tooltip:!0}),o}),r.ui.componentFactory.add("menuBar:"+t,()=>this._createButton(Ln,t,e,n,s))}_createButton(t,e,n,s,r){const o=this.editor,a=o.locale,l=o.commands.get(e),u=new t(a);return u.set({label:n,icon:r,keystroke:s}),u.bind("isEnabled").to(l,"isEnabled"),this.listenTo(u,"execute",()=>{o.execute(e),o.editing.view.focus()}),u}}class aC extends J{static get requires(){return[dme,hme]}static get pluginName(){return"Undo"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class fme extends J{static get requires(){return[Sue,rC,Ub,ome,zhe,fhe,aC]}static get pluginName(){return"Essentials"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class Wb extends Ze{constructor(e,n){super(e);b(this,"attributeKey");this.attributeKey=n}refresh(){const e=this.editor.model,n=e.document;this.value=n.selection.getAttribute(this.attributeKey),this.isEnabled=e.schema.checkAttributeInSelection(n.selection,this.attributeKey)}execute(e={}){const n=this.editor.model,r=n.document.selection,o=e.value,a=e.batch,l=u=>{if(r.isCollapsed)o?u.setSelectionAttribute(this.attributeKey,o):u.removeSelectionAttribute(this.attributeKey);else{const h=n.schema.getValidRanges(r.getRanges(),this.attributeKey);for(const f of h)o?u.setAttribute(this.attributeKey,o,f):u.removeAttribute(this.attributeKey,f)}};a?n.enqueueChange(a,u=>{l(u)}):n.change(u=>{l(u)})}}const _i="fontSize",Ei="fontFamily",wr="fontColor",eo="fontBackgroundColor";function IL(i,t){const e={model:{key:i,values:[]},view:{},upcastAlso:{}};for(const n of t)e.model.values.push(n.model),e.view[n.model]=n.view,n.upcastAlso&&(e.upcastAlso[n.model]=n.upcastAlso);return e}function RL(i){return t=>gme(t.getStyle(i))}function OL(i){return(t,{writer:e})=>e.createAttributeElement("span",{style:`${i}:${t}`},{priority:7})}function mme({dropdownView:i,colors:t,columns:e,removeButtonLabel:n,colorPickerLabel:s,documentColorsLabel:r,documentColorsCount:o,colorPickerViewConfig:a}){const l=i.locale,u=new ZE(l,{colors:t,columns:e,removeButtonLabel:n,colorPickerLabel:s,documentColorsLabel:r,documentColorsCount:o,colorPickerViewConfig:a});return i.colorSelectorView=u,i.panelView.children.add(u),u}function gme(i){return i.replace(/\s/g,"")}class pme extends Wb{constructor(t){super(t,Ei)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function NL(i){return i.map(bme).filter(t=>t!==void 0)}function bme(i){if(typeof i=="object")return i;if(i==="default")return{title:"Default",model:void 0};if(typeof i=="string")return wme(i)}function wme(i){const t=i.replace(/"|'/g,"").split(","),e=t[0],n=t.map(vme).join(", ");return{title:e,model:n,view:{name:"span",styles:{"font-family":n},priority:7}}}function vme(i){return i=i.trim(),i.indexOf(" ")>0&&(i=`'${i}'`),i}class yme extends J{static get pluginName(){return"FontFamilyEditing"}static get isOfficialPlugin(){return!0}constructor(t){super(t),t.config.define(Ei,{options:["default","Arial, Helvetica, sans-serif","Courier New, Courier, monospace","Georgia, serif","Lucida Sans Unicode, Lucida Grande, sans-serif","Tahoma, Geneva, sans-serif","Times New Roman, Times, serif","Trebuchet MS, Helvetica, sans-serif","Verdana, Geneva, sans-serif"],supportAllValues:!1})}init(){const t=this.editor;t.model.schema.extend("$text",{allowAttributes:Ei}),t.model.schema.setAttributeProperties(Ei,{isFormatting:!0,copyOnEnter:!0});const e=NL(t.config.get("fontFamily.options")).filter(s=>s.model),n=IL(Ei,e);t.config.get("fontFamily.supportAllValues")?(this._prepareAnyValueConverters(),this._prepareCompatibilityConverter()):t.conversion.attributeToElement(n),t.commands.add(Ei,new pme(t))}_prepareAnyValueConverters(){const t=this.editor;t.conversion.for("downcast").attributeToElement({model:Ei,view:(e,{writer:n})=>n.createAttributeElement("span",{style:"font-family:"+e},{priority:7})}),t.conversion.for("upcast").elementToAttribute({model:{key:Ei,value:e=>e.getStyle("font-family")},view:{name:"span",styles:{"font-family":/.*/}}})}_prepareCompatibilityConverter(){this.editor.conversion.for("upcast").elementToAttribute({view:{name:"font",attributes:{face:/.*/}},model:{key:Ei,value:e=>e.getAttribute("face")}})}}var TI='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.03 3h6.149a.75.75 0 1 1 0 1.5h-5.514L11.03 3zm1.27 3h4.879a.75.75 0 1 1 0 1.5h-4.244L12.3 6zm1.27 3h3.609a.75.75 0 1 1 0 1.5h-2.973L13.57 9zm-2.754 2.5L8.038 4.785 5.261 11.5h5.555zm.62 1.5H4.641l-1.666 4.028H1.312l5.789-14h1.875l5.789 14h-1.663L11.436 13z"/></svg>';class _me extends J{static get pluginName(){return"FontFamilyUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.t,n=this._getLocalizedOptions(),s=t.commands.get(Ei),r=e("Font Family"),o=Eme(n,s);t.ui.componentFactory.add(Ei,a=>{const l=ti(a);return Ll(l,o,{role:"menu",ariaLabel:r}),l.buttonView.set({label:r,icon:TI,tooltip:!0}),l.extendTemplate({attributes:{class:"ck-font-family-dropdown"}}),l.bind("isEnabled").to(s),this.listenTo(l,"execute",u=>{t.execute(u.source.commandName,{value:u.source.commandParam}),t.editing.view.focus()}),l}),t.ui.componentFactory.add(`menuBar:${Ei}`,a=>{const l=new Yi(a);l.buttonView.set({label:r,icon:TI}),l.bind("isEnabled").to(s);const u=new kl(a);for(const h of o){const f=new Vl(a,l),g=new Ln(a);g.set({role:"menuitemradio",isToggleable:!0}),g.bind(...Object.keys(h.model)).to(h.model),g.delegate("execute").to(l),g.on("execute",()=>{t.execute(h.model.commandName,{value:h.model.commandParam}),t.editing.view.focus()}),f.children.add(g),u.items.add(f)}return l.panelView.children.add(u),l})}_getLocalizedOptions(){const t=this.editor,e=t.t;return NL(t.config.get(Ei).options).map(s=>(s.title==="Default"&&(s.title=e("Default")),s))}}function Eme(i,t){const e=new Hn;for(const n of i){const s={type:"button",model:new xl({commandName:Ei,commandParam:n.model,label:n.title,role:"menuitemradio",withText:!0})};s.model.bind("isOn").to(t,"value",r=>r===n.model?!0:!r||!n.model?!1:r.split(",")[0].replace(/'/g,"").toLowerCase()===n.model.toLowerCase()),n.view&&typeof n.view!="string"&&n.view.styles&&s.model.set("labelStyle",`font-family: ${n.view.styles["font-family"]}`),e.add(s)}return e}class Cme extends J{static get requires(){return[yme,_me]}static get pluginName(){return"FontFamily"}static get isOfficialPlugin(){return!0}}class xme extends Wb{constructor(t){super(t,_i)}}function lC(i){return i.map(t=>kme(t)).filter(t=>t!==void 0)}const SI={get tiny(){return{title:"Tiny",model:"tiny",view:{name:"span",classes:"text-tiny",priority:7}}},get small(){return{title:"Small",model:"small",view:{name:"span",classes:"text-small",priority:7}}},get big(){return{title:"Big",model:"big",view:{name:"span",classes:"text-big",priority:7}}},get huge(){return{title:"Huge",model:"huge",view:{name:"span",classes:"text-huge",priority:7}}}};function kme(i){if(typeof i=="number"&&(i=String(i)),typeof i=="object"&&Ame(i))return Uy(i);const t=Sme(i);if(t)return Uy(t);if(i==="default")return{model:void 0,title:"Default"};if(!Pme(i))return Tme(i)}function Tme(i){return typeof i=="string"&&(i={title:i,model:`${parseFloat(i)}px`}),i.view={name:"span",styles:{"font-size":i.model}},Uy(i)}function Uy(i){return i.view&&typeof i.view!="string"&&!i.view.priority&&(i.view.priority=7),i}function Sme(i){return typeof i=="string"?SI[i]:SI[i.model]}function Ame(i){return i.title&&i.model&&i.view}function Pme(i){let t;if(typeof i=="object")if(i.model)t=parseFloat(i.model);else throw new D("font-size-invalid-definition",null,i);else t=parseFloat(i);return isNaN(t)}const AI=["x-small","x-small","small","medium","large","x-large","xx-large","xxx-large"];class Ime extends J{static get pluginName(){return"FontSizeEditing"}static get isOfficialPlugin(){return!0}constructor(t){super(t),t.config.define(_i,{options:["tiny","small","default","big","huge"],supportAllValues:!1})}init(){const t=this.editor;t.model.schema.extend("$text",{allowAttributes:_i}),t.model.schema.setAttributeProperties(_i,{isFormatting:!0,copyOnEnter:!0});const e=t.config.get("fontSize.supportAllValues"),n=lC(this.editor.config.get("fontSize.options")).filter(r=>r.model),s=IL(_i,n);e?(this._prepareAnyValueConverters(s),this._prepareCompatibilityConverter()):t.conversion.attributeToElement(s),t.commands.add(_i,new xme(t))}_prepareAnyValueConverters(t){const e=this.editor,n=t.model.values.filter(s=>!Vb(String(s))&&!CM(String(s)));if(n.length)throw new D("font-size-invalid-use-of-named-presets",null,{presets:n});e.conversion.for("downcast").attributeToElement({model:_i,view:(s,{writer:r})=>{if(s)return r.createAttributeElement("span",{style:"font-size:"+s},{priority:7})}}),e.conversion.for("upcast").elementToAttribute({model:{key:_i,value:s=>s.getStyle("font-size")},view:{name:"span",styles:{"font-size":/.*/}}})}_prepareCompatibilityConverter(){this.editor.conversion.for("upcast").elementToAttribute({view:{name:"font",attributes:{size:/^[+-]?\d{1,3}$/}},model:{key:_i,value:e=>{const n=e.getAttribute("size"),s=n[0]==="-"||n[0]==="+";let r=parseInt(n,10);s&&(r=3+r);const o=AI.length-1,a=Math.min(Math.max(r,0),o);return AI[a]}}})}}var PI='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M9.816 11.5 7.038 4.785 4.261 11.5h5.555zm.62 1.5H3.641l-1.666 4.028H.312l5.789-14h1.875l5.789 14h-1.663L10.436 13zm7.55 2.279.779-.779.707.707-2.265 2.265-2.193-2.265.707-.707.765.765V4.825c0-.042 0-.083.002-.123l-.77.77-.707-.707L17.207 2.5l2.265 2.265-.707.707-.782-.782c.002.043.003.089.003.135v10.454z"/></svg>';class Rme extends J{static get pluginName(){return"FontSizeUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.t,n=this._getLocalizedOptions(),s=t.commands.get(_i),r=e("Font Size"),o=Ome(n,s);t.ui.componentFactory.add(_i,a=>{const l=ti(a);return Ll(l,o,{role:"menu",ariaLabel:r}),l.buttonView.set({label:r,icon:PI,tooltip:!0}),l.extendTemplate({attributes:{class:["ck-font-size-dropdown"]}}),l.bind("isEnabled").to(s),this.listenTo(l,"execute",u=>{t.execute(u.source.commandName,{value:u.source.commandParam}),t.editing.view.focus()}),l}),t.ui.componentFactory.add(`menuBar:${_i}`,a=>{const l=new Yi(a);l.buttonView.set({label:r,icon:PI}),l.bind("isEnabled").to(s);const u=new kl(a);for(const h of o){const f=new Vl(a,l),g=new Ln(a);g.set({role:"menuitemradio",isToggleable:!0}),g.bind(...Object.keys(h.model)).to(h.model),g.delegate("execute").to(l),g.on("execute",()=>{t.execute(h.model.commandName,{value:h.model.commandParam}),t.editing.view.focus()}),f.children.add(g),u.items.add(f)}return l.panelView.children.add(u),l})}_getLocalizedOptions(){const t=this.editor,e=t.t,n={Default:e("Default"),Tiny:e("Tiny"),Small:e("Small"),Big:e("Big"),Huge:e("Huge")};return lC(t.config.get(_i).options).map(r=>{const o=n[r.title];return o&&o!=r.title&&(r=Object.assign({},r,{title:o})),r})}}function Ome(i,t){const e=new Hn;for(const n of i){const s={type:"button",model:new xl({commandName:_i,commandParam:n.model,label:n.title,class:"ck-fontsize-option",role:"menuitemradio",withText:!0})};n.view&&typeof n.view!="string"&&(n.view.styles&&s.model.set("labelStyle",`font-size:${n.view.styles["font-size"]}`),n.view.classes&&s.model.set("class",`${s.model.class} ${n.view.classes}`)),s.model.bind("isOn").to(t,"value",r=>r===n.model),e.add(s)}return e}class Nme extends J{static get requires(){return[Ime,Rme]}static get pluginName(){return"FontSize"}static get isOfficialPlugin(){return!0}normalizeSizeOptions(t){return lC(t)}}class Mme extends Wb{constructor(t){super(t,wr)}}class Lme extends J{static get pluginName(){return"FontColorEditing"}static get isOfficialPlugin(){return!0}constructor(t){super(t),t.config.define(wr,{colors:[{color:"hsl(0, 0%, 0%)",label:"Black"},{color:"hsl(0, 0%, 30%)",label:"Dim grey"},{color:"hsl(0, 0%, 60%)",label:"Grey"},{color:"hsl(0, 0%, 90%)",label:"Light grey"},{color:"hsl(0, 0%, 100%)",label:"White",hasBorder:!0},{color:"hsl(0, 75%, 60%)",label:"Red"},{color:"hsl(30, 75%, 60%)",label:"Orange"},{color:"hsl(60, 75%, 60%)",label:"Yellow"},{color:"hsl(90, 75%, 60%)",label:"Light green"},{color:"hsl(120, 75%, 60%)",label:"Green"},{color:"hsl(150, 75%, 60%)",label:"Aquamarine"},{color:"hsl(180, 75%, 60%)",label:"Turquoise"},{color:"hsl(210, 75%, 60%)",label:"Light blue"},{color:"hsl(240, 75%, 60%)",label:"Blue"},{color:"hsl(270, 75%, 60%)",label:"Purple"}],columns:5}),t.conversion.for("upcast").elementToAttribute({view:{name:"span",styles:{color:/[\s\S]+/}},model:{key:wr,value:RL("color")}}),t.conversion.for("upcast").elementToAttribute({view:{name:"font",attributes:{color:/^#?\w+$/}},model:{key:wr,value:e=>e.getAttribute("color")}}),t.conversion.for("downcast").attributeToElement({model:wr,view:OL("color")}),t.commands.add(wr,new Mme(t)),t.model.schema.extend("$text",{allowAttributes:wr}),t.model.schema.setAttributeProperties(wr,{isFormatting:!0,copyOnEnter:!0})}}class ML extends J{constructor(e,{commandName:n,componentName:s,icon:r,dropdownLabel:o}){super(e);b(this,"commandName");b(this,"componentName");b(this,"icon");b(this,"dropdownLabel");b(this,"columns");this.commandName=n,this.componentName=s,this.icon=r,this.dropdownLabel=o,this.columns=e.config.get(`${this.componentName}.columns`)}init(){const e=this.editor,n=e.locale,s=n.t,r=e.commands.get(this.commandName),o=e.config.get(this.componentName),a=jh(o.colors),l=zh(n,a),u=o.documentColors,h=o.colorPicker!==!1;e.ui.componentFactory.add(this.componentName,f=>{const g=ti(f);let p=!1;const y=mme({dropdownView:g,colors:l.map(E=>({label:E.label,color:E.model,options:{hasBorder:E.hasBorder}})),columns:this.columns,removeButtonLabel:s("Remove color"),colorPickerLabel:s("Color picker"),documentColorsLabel:u!==0?s("Document colors"):"",documentColorsCount:u===void 0?this.columns:u,colorPickerViewConfig:h?o.colorPicker||{}:!1});return y.bind("selectedColor").to(r,"value"),g.buttonView.set({label:this.dropdownLabel,icon:this.icon,tooltip:!0}),g.extendTemplate({attributes:{class:"ck-color-ui-dropdown"}}),g.bind("isEnabled").to(r),y.on("execute",(E,C)=>{g.isOpen&&e.execute(this.commandName,{value:C.value,batch:this._undoStepBatch}),C.source!=="colorPicker"&&e.editing.view.focus(),C.source==="colorPickerSaveButton"&&(g.isOpen=!1)}),y.on("colorPicker:show",()=>{this._undoStepBatch=e.model.createBatch()}),y.on("colorPicker:cancel",()=>{this._undoStepBatch.operations.length&&(g.isOpen=!1,e.execute("undo",this._undoStepBatch)),e.editing.view.focus()}),g.on("change:isOpen",(E,C,k)=>{p||(p=!0,g.colorSelectorView.appendUI()),k&&(u!==0&&y.updateDocumentColors(e.model,this.componentName),y.updateSelectedColors(),y.showColorGridsFragment())}),jb(g,()=>g.colorSelectorView.colorGridsFragmentView.staticColorsGrid.items.find(E=>E.isOn)),g}),e.ui.componentFactory.add(`menuBar:${this.componentName}`,f=>{const g=new Yi(f);g.buttonView.set({label:this.dropdownLabel,icon:this.icon}),g.bind("isEnabled").to(r);let p=!1;const y=new ZE(f,{colors:l.map(E=>({label:E.label,color:E.model,options:{hasBorder:E.hasBorder}})),columns:this.columns,removeButtonLabel:s("Remove color"),colorPickerLabel:s("Color picker"),documentColorsLabel:u!==0?s("Document colors"):"",documentColorsCount:u===void 0?this.columns:u,colorPickerViewConfig:!1});return y.bind("selectedColor").to(r,"value"),y.delegate("execute").to(g),y.on("execute",(E,C)=>{e.execute(this.commandName,{value:C.value,batch:this._undoStepBatch}),e.editing.view.focus()}),g.on("change:isOpen",(E,C,k)=>{p||(p=!0,y.appendUI()),k&&(u!==0&&y.updateDocumentColors(e.model,this.componentName),y.updateSelectedColors(),y.showColorGridsFragment())}),g.panelView.children.add(y),g})}}var Vme='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M12.4 10.3 10 4.5l-2.4 5.8h4.8zm.5 1.2H7.1L5.7 15H4.2l5-12h1.6l5 12h-1.5L13 11.5zm3.1 7H4a1 1 0 0 1 0-2h12a1 1 0 0 1 0 2z"/></svg>';class Dme extends ML{constructor(t){const e=t.locale.t;super(t,{commandName:wr,componentName:wr,icon:Vme,dropdownLabel:e("Font Color")})}static get pluginName(){return"FontColorUI"}}class Bme extends J{static get requires(){return[Lme,Dme]}static get pluginName(){return"FontColor"}static get isOfficialPlugin(){return!0}}class Fme extends Wb{constructor(t){super(t,eo)}}class $me extends J{static get pluginName(){return"FontBackgroundColorEditing"}static get isOfficialPlugin(){return!0}constructor(t){super(t),t.config.define(eo,{colors:[{color:"hsl(0, 0%, 0%)",label:"Black"},{color:"hsl(0, 0%, 30%)",label:"Dim grey"},{color:"hsl(0, 0%, 60%)",label:"Grey"},{color:"hsl(0, 0%, 90%)",label:"Light grey"},{color:"hsl(0, 0%, 100%)",label:"White",hasBorder:!0},{color:"hsl(0, 75%, 60%)",label:"Red"},{color:"hsl(30, 75%, 60%)",label:"Orange"},{color:"hsl(60, 75%, 60%)",label:"Yellow"},{color:"hsl(90, 75%, 60%)",label:"Light green"},{color:"hsl(120, 75%, 60%)",label:"Green"},{color:"hsl(150, 75%, 60%)",label:"Aquamarine"},{color:"hsl(180, 75%, 60%)",label:"Turquoise"},{color:"hsl(210, 75%, 60%)",label:"Light blue"},{color:"hsl(240, 75%, 60%)",label:"Blue"},{color:"hsl(270, 75%, 60%)",label:"Purple"}],columns:5}),t.data.addStyleProcessorRules(HE),t.conversion.for("upcast").elementToAttribute({view:{name:"span",styles:{"background-color":/[\s\S]+/}},model:{key:eo,value:RL("background-color")}}),t.conversion.for("downcast").attributeToElement({model:eo,view:OL("background-color")}),t.commands.add(eo,new Fme(t)),t.model.schema.extend("$text",{allowAttributes:eo}),t.model.schema.setAttributeProperties(eo,{isFormatting:!0,copyOnEnter:!0})}}var zme='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M4 2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2zm8.38 9.262H7.62L10 5.506l2.38 5.756zm.532 1.285L14.34 16h1.426L10.804 4H9.196L4.234 16H5.66l1.428-3.453h5.824z"/></svg>';class jme extends ML{constructor(t){const e=t.locale.t;super(t,{commandName:eo,componentName:eo,icon:zme,dropdownLabel:e("Font Background Color")})}static get pluginName(){return"FontBackgroundColorUI"}}class Hme extends J{static get requires(){return[$me,jme]}static get pluginName(){return"FontBackgroundColor"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class Ume extends Ze{constructor(t){super(t),this._isEnabledBasedOnSelection=!1}refresh(){const t=this.editor.model,e=t.document,n=ln(e.selection.getSelectedBlocks());this.value=!!n&&n.is("element","paragraph"),this.isEnabled=!!n&&II(n,t.schema)}execute(t={}){const e=this.editor.model,n=e.document,s=t.selection||n.selection;e.canEditAt(s)&&e.change(r=>{const o=s.getSelectedBlocks();for(const a of o)!a.is("element","paragraph")&&II(a,e.schema)&&r.rename(a,"paragraph")})}}function II(i,t){return t.checkChild(i.parent,"paragraph")&&!t.isObject(i)}class Wme extends Ze{constructor(t){super(t),this._isEnabledBasedOnSelection=!1}execute(t){const e=this.editor.model,n=t.attributes;let s=t.position;return e.canEditAt(s)?e.change(r=>{if(s=this._findPositionToInsertParagraph(s,r),!s)return null;const o=r.createElement("paragraph");return n&&e.schema.setAllowedAttributes(o,n,r),e.insertContent(o,s),r.setSelection(o,"in"),r.createPositionAt(o,0)}):null}_findPositionToInsertParagraph(t,e){const n=this.editor.model;if(n.schema.checkChild(t,"paragraph"))return t;const s=n.schema.findAllowedParent(t,"paragraph");if(!s)return null;const r=t.parent,o=n.schema.checkChild(r,"$text");return r.isEmpty||o&&t.isAtEnd?n.createPositionAfter(r):!r.isEmpty&&o&&t.isAtStart?n.createPositionBefore(r):e.split(t,s).position}}const jp=class jp extends J{static get pluginName(){return"Paragraph"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.model;t.commands.add("paragraph",new Ume(t)),t.commands.add("insertParagraph",new Wme(t)),e.schema.register("paragraph",{inheritAllFrom:"$block"}),t.conversion.elementToElement({model:"paragraph",view:"p"}),t.conversion.for("upcast").elementToElement({model:(n,{writer:s})=>!jp.paragraphLikeElements.has(n.name)||n.isEmpty?null:s.createElement("paragraph"),view:/.+/,converterPriority:"low"})}};b(jp,"paragraphLikeElements",new Set(["blockquote","dd","div","dt","h1","h2","h3","h4","h5","h6","li","p","td","th"]));let Ip=jp;/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class qme extends Ze{constructor(e,n){super(e);b(this,"modelElements");this.modelElements=n}refresh(){const e=ln(this.editor.model.document.selection.getSelectedBlocks());this.value=!!e&&this.modelElements.includes(e.name)&&e.name,this.isEnabled=!!e&&this.modelElements.some(n=>RI(e,n,this.editor.model.schema))}execute(e){const n=this.editor.model,s=n.document,r=e.value;n.change(o=>{const a=Array.from(s.selection.getSelectedBlocks()).filter(l=>RI(l,r,n.schema));for(const l of a)l.is("element",r)||o.rename(l,r)})}}function RI(i,t,e){return e.checkChild(i.parent,t)&&!e.isObject(i)}const OI="paragraph";class Gme extends J{static get pluginName(){return"HeadingEditing"}static get isOfficialPlugin(){return!0}constructor(t){super(t),t.config.define("heading",{options:[{model:"paragraph",title:"Paragraph",class:"ck-heading_paragraph"},{model:"heading1",view:"h2",title:"Heading 1",class:"ck-heading_heading1"},{model:"heading2",view:"h3",title:"Heading 2",class:"ck-heading_heading2"},{model:"heading3",view:"h4",title:"Heading 3",class:"ck-heading_heading3"}]})}static get requires(){return[Ip]}init(){const t=this.editor,e=t.config.get("heading.options"),n=[];for(const s of e)s.model!=="paragraph"&&(t.model.schema.register(s.model,{inheritAllFrom:"$block"}),t.conversion.elementToElement(s),n.push(s.model));this._addDefaultH1Conversion(t),t.commands.add("heading",new qme(t,n))}afterInit(){const t=this.editor,e=t.commands.get("enter"),n=t.config.get("heading.options");e&&this.listenTo(e,"afterExecute",(s,r)=>{const o=t.model.document.selection.getFirstPosition().parent;n.some(l=>o.is("element",l.model))&&!o.is("element",OI)&&o.childCount===0&&r.writer.rename(o,OI)})}_addDefaultH1Conversion(t){t.conversion.for("upcast").elementToElement({model:"heading1",view:"h1",converterPriority:ca.low+1})}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Kme(i){const t=i.t,e={Paragraph:t("Paragraph"),"Heading 1":t("Heading 1"),"Heading 2":t("Heading 2"),"Heading 3":t("Heading 3"),"Heading 4":t("Heading 4"),"Heading 5":t("Heading 5"),"Heading 6":t("Heading 6")};return i.config.get("heading.options").map(n=>{const s=e[n.title];return s&&s!=n.title&&(n.title=s),n})}class Yme extends J{static get pluginName(){return"HeadingUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.t,n=Kme(t),s=e("Choose heading"),r=e("Heading");t.ui.componentFactory.add("heading",o=>{const a={},l=new Hn,u=t.commands.get("heading"),h=t.commands.get("paragraph"),f=[u];for(const p of n){const y={type:"button",model:new xl({label:p.title,class:p.class,role:"menuitemradio",withText:!0})};p.model==="paragraph"?(y.model.bind("isOn").to(h,"value"),y.model.set("commandName","paragraph"),f.push(h)):(y.model.bind("isOn").to(u,"value",E=>E===p.model),y.model.set({commandName:"heading",commandValue:p.model})),l.add(y),a[p.model]=p.title}const g=ti(o);return Ll(g,l,{ariaLabel:r,role:"menu"}),g.buttonView.set({ariaLabel:r,ariaLabelledBy:void 0,isOn:!1,withText:!0,tooltip:r}),g.extendTemplate({attributes:{class:["ck-heading-dropdown"]}}),g.bind("isEnabled").toMany(f,"isEnabled",(...p)=>p.some(y=>y)),g.buttonView.bind("label").to(u,"value",h,"value",(p,y)=>{const E=y?"paragraph":p;return typeof E=="boolean"||!a[E]?s:a[E]}),g.buttonView.bind("ariaLabel").to(u,"value",h,"value",(p,y)=>{const E=y?"paragraph":p;return typeof E=="boolean"||!a[E]?r:`${a[E]}, ${r}`}),this.listenTo(g,"execute",p=>{const{commandName:y,commandValue:E}=p.source;t.execute(y,E?{value:E}:void 0),t.editing.view.focus()}),g}),t.ui.componentFactory.add("menuBar:heading",o=>{const a=new Yi(o),l=t.commands.get("heading"),u=t.commands.get("paragraph"),h=[l],f=new kl(o);a.set({class:"ck-heading-dropdown"}),f.set({ariaLabel:e("Heading"),role:"menu"}),a.buttonView.set({label:e("Heading")}),a.panelView.children.add(f);for(const g of n){const p=new Vl(o,a),y=new Ln(o);p.children.add(y),f.items.add(p),y.set({isToggleable:!0,label:g.title,role:"menuitemradio",class:g.class}),y.delegate("execute").to(a),y.on("execute",()=>{const E=g.model==="paragraph"?"paragraph":"heading";t.execute(E,{value:g.model}),t.editing.view.focus()}),g.model==="paragraph"?(y.bind("isOn").to(u,"value"),h.push(u)):y.bind("isOn").to(l,"value",E=>E===g.model)}return a.bind("isEnabled").toMany(h,"isEnabled",(...g)=>g.some(p=>p)),a})}}class Zme extends J{static get requires(){return[Gme,Yme]}static get pluginName(){return"Heading"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Xme(i){return i.createContainerElement("span",{class:"image-inline"},i.createEmptyElement("img"))}function NI(i){return i.createContainerElement("figure",{class:"image"},[i.createEmptyElement("img"),i.createSlot("children")])}function LL(i,t){const e=i.plugins.get("ImageUtils"),n=i.plugins.has("ImageInlineEditing")&&i.plugins.has("ImageBlockEditing");return r=>e.isInlineImageView(r)?n&&(r.getStyle("display")=="block"||r.findAncestor(e.isBlockImageView)?"imageBlock":"imageInline")!==t?null:s(r):null;function s(r){const o={name:!0};return r.hasAttribute("src")&&(o.attributes=["src"]),o}}function cC(i,t){const e=ln(t.getSelectedBlocks());return!e||i.isObject(e)||e.isEmpty&&e.name!="listItem"?"imageBlock":"imageInline"}function Rp(i){return i&&i.endsWith("px")?parseInt(i):null}function Op(i){const t=Rp(i.getStyle("width")),e=Rp(i.getStyle("height"));return!!(t&&e)}const Jme=/^(image|image-inline)$/;class jn extends J{constructor(){super(...arguments);b(this,"_domEmitter",new(hi()))}static get pluginName(){return"ImageUtils"}static get isOfficialPlugin(){return!0}isImage(e){return this.isInlineImage(e)||this.isBlockImage(e)}isInlineImageView(e){return!!e&&e.is("element","img")}isBlockImageView(e){return!!e&&e.is("element","figure")&&e.hasClass("image")}insertImage(e={},n=null,s=null,r={}){const o=this.editor,a=o.model,l=a.document.selection,u=VL(o,n||l,s);e={...Object.fromEntries(l.getAttributes()),...e};for(const h in e)a.schema.checkAttribute(u,h)||delete e[h];return a.change(h=>{const{setImageSizes:f=!0}=r,g=h.createElement(u,e);return a.insertObject(g,n,null,{setSelection:"on",findOptimalPosition:!n&&u!="imageInline"?"auto":void 0}),g.parent?(f&&this.setImageNaturalSizeAttributes(g),g):null})}setImageNaturalSizeAttributes(e){const n=e.getAttribute("src");n&&(e.getAttribute("width")||e.getAttribute("height")||this.editor.model.change(s=>{const r=new Ce.window.Image;this._domEmitter.listenTo(r,"load",()=>{!e.getAttribute("width")&&!e.getAttribute("height")&&this.editor.model.enqueueChange(s.batch,o=>{o.setAttribute("width",r.naturalWidth,e),o.setAttribute("height",r.naturalHeight,e)}),this._domEmitter.stopListening(r,"load")}),r.src=n}))}getClosestSelectedImageWidget(e){const n=e.getFirstPosition();if(!n)return null;const s=e.getSelectedElement();if(s&&this.isImageWidget(s))return s;let r=n.parent;for(;r;){if(r.is("element")&&this.isImageWidget(r))return r;r=r.parent}return null}getClosestSelectedImageElement(e){const n=e.getSelectedElement();return this.isImage(n)?n:e.getFirstPosition().findAncestor("imageBlock")}getImageWidgetFromImageView(e){return e.findAncestor({classes:Jme})}isImageAllowed(){const n=this.editor.model.document.selection;return Qme(this.editor,n)&&ege(n)}toImageWidget(e,n,s){return n.setCustomProperty("image",!0,e),nC(e,n,{label:()=>{const a=this.findViewImgElement(e).getAttribute("alt");return a?`${a} ${s}`:s}})}isImageWidget(e){return!!e.getCustomProperty("image")&&rn(e)}isBlockImage(e){return!!e&&e.is("element","imageBlock")}isInlineImage(e){return!!e&&e.is("element","imageInline")}findViewImgElement(e){if(this.isInlineImageView(e))return e;const n=this.editor.editing.view;for(const{item:s}of n.createRangeIn(e))if(this.isInlineImageView(s))return s}destroy(){return this._domEmitter.stopListening(),super.destroy()}}function Qme(i,t){if(VL(i,t,null)=="imageBlock"){const n=tge(t,i.model);if(i.model.schema.checkChild(n,"imageBlock"))return!0}else if(i.model.schema.checkChild(t.focus,"imageInline"))return!0;return!1}function ege(i){return[...i.focus.getAncestors()].every(t=>!t.is("element","imageBlock"))}function tge(i,t){const n=EL(i,t).start.parent;return n.isEmpty&&!n.is("element","$root")?n.parent:n}function VL(i,t,e){const n=i.model.schema,s=i.config.get("image.insert.type");return i.plugins.has("ImageBlockEditing")?i.plugins.has("ImageInlineEditing")?e||(s==="inline"?"imageInline":s!=="auto"?"imageBlock":t.is("selection")?cC(n,t):n.checkChild(t,"imageInline")?"imageInline":"imageBlock"):"imageBlock":"imageInline"}const nge=new RegExp(String(/^(http(s)?:\/\/)?[\w-]+\.[\w.~:/[\]@!$&'()*+,;=%-]+/.source+/\.(jpg|jpeg|png|gif|ico|webp|JPG|JPEG|PNG|GIF|ICO|WEBP)/.source+/(\?[\w.~:/[\]@!$&'()*+,;=%-]*)?/.source+/(#[\w.~:/[\]@!$&'()*+,;=%-]*)?$/.source));class ige extends J{constructor(e){super(e);b(this,"_timeoutId");b(this,"_positionToInsert");this._timeoutId=null,this._positionToInsert=null}static get requires(){return[rC,jn,aC,Ir]}static get pluginName(){return"AutoImage"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,n=e.model.document,s=e.plugins.get("ClipboardPipeline");this.listenTo(s,"inputTransformation",()=>{const r=n.selection.getFirstRange(),o=gn.fromPosition(r.start);o.stickiness="toPrevious";const a=gn.fromPosition(r.end);a.stickiness="toNext",n.once("change:data",()=>{this._embedImageBetweenPositions(o,a),o.detach(),a.detach()},{priority:"high"})}),e.commands.get("undo").on("execute",()=>{this._timeoutId&&(Ce.window.clearTimeout(this._timeoutId),this._positionToInsert.detach(),this._timeoutId=null,this._positionToInsert=null)},{priority:"high"})}_embedImageBetweenPositions(e,n){const s=this.editor,r=new ai(e,n),o=r.getWalker({ignoreElementEnd:!0}),a=Object.fromEntries(s.model.document.selection.getAttributes()),l=this.editor.plugins.get("ImageUtils");let u="";for(const h of o)h.item.is("$textProxy")&&(u+=h.item.data);if(u=u.trim(),!u.match(nge)){r.detach();return}this._positionToInsert=gn.fromPosition(e),this._timeoutId=setTimeout(()=>{if(!s.commands.get("insertImage").isEnabled){r.detach();return}s.model.change(g=>{this._timeoutId=null,g.remove(r),r.detach();let p;this._positionToInsert.root.rootName!=="$graveyard"&&(p=this._positionToInsert.toPosition()),l.insertImage({...a,src:u},p),this._positionToInsert.detach(),this._positionToInsert=null}),s.plugins.get("Delete").requestUndoOnBackspace()},100)}}class sge extends Ze{refresh(){const n=this.editor.plugins.get("ImageUtils").getClosestSelectedImageElement(this.editor.model.document.selection);this.isEnabled=!!n,this.isEnabled&&n.hasAttribute("alt")?this.value=n.getAttribute("alt"):this.value=!1}execute(t){const e=this.editor,n=e.plugins.get("ImageUtils"),s=e.model,r=n.getClosestSelectedImageElement(s.document.selection);s.change(o=>{o.setAttribute("alt",t.newValue,r)})}}class rge extends J{static get requires(){return[jn]}static get pluginName(){return"ImageTextAlternativeEditing"}static get isOfficialPlugin(){return!0}init(){this.editor.commands.add("imageTextAlternative",new sge(this.editor))}}class oge extends xe{constructor(e){super(e);b(this,"focusTracker");b(this,"keystrokes");b(this,"labeledInput");b(this,"saveButtonView");b(this,"cancelButtonView");b(this,"_focusables");b(this,"_focusCycler");const n=this.locale.t;this.focusTracker=new Gt,this.keystrokes=new tn,this.labeledInput=this._createLabeledInputView(),this.saveButtonView=this._createButton(n("Save"),ve.check,"ck-button-save"),this.saveButtonView.type="submit",this.cancelButtonView=this._createButton(n("Cancel"),ve.cancel,"ck-button-cancel","cancel"),this._focusables=new Un,this._focusCycler=new fi({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"form",attributes:{class:["ck","ck-text-alternative-form","ck-responsive-form"],tabindex:"-1"},children:[this.labeledInput,this.saveButtonView,this.cancelButtonView]})}render(){super.render(),this.keystrokes.listenTo(this.element),Sa({view:this}),[this.labeledInput,this.saveButtonView,this.cancelButtonView].forEach(e=>{this._focusables.add(e),this.focusTracker.add(e.element)})}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}_createButton(e,n,s,r){const o=new qe(this.locale);return o.set({label:e,icon:n,tooltip:!0}),o.extendTemplate({attributes:{class:s}}),r&&o.delegate("execute").to(this,r),o}_createLabeledInputView(){const e=this.locale.t,n=new bn(this.locale,vs);return n.label=e("Text alternative"),n}}function age(i){const t=i.plugins.get("ContextualBalloon");if(i.plugins.get("ImageUtils").getClosestSelectedImageWidget(i.editing.view.document.selection)){const n=uC(i);t.updatePosition(n)}}function uC(i){const t=i.editing.view,e=oi.defaultPositions,n=i.plugins.get("ImageUtils");return{target:t.domConverter.mapViewToDom(n.getClosestSelectedImageWidget(t.document.selection)),positions:[e.northArrowSouth,e.northArrowSouthWest,e.northArrowSouthEast,e.southArrowNorth,e.southArrowNorthWest,e.southArrowNorthEast,e.viewportStickyNorth]}}class lge extends J{constructor(){super(...arguments);b(this,"_balloon");b(this,"_form")}static get requires(){return[nr]}static get pluginName(){return"ImageTextAlternativeUI"}static get isOfficialPlugin(){return!0}init(){this._createButton()}destroy(){super.destroy(),this._form&&this._form.destroy()}_createButton(){const e=this.editor,n=e.t;e.ui.componentFactory.add("imageTextAlternative",s=>{const r=e.commands.get("imageTextAlternative"),o=new qe(s);return o.set({label:n("Change image text alternative"),icon:ve.textAlternative,tooltip:!0}),o.bind("isEnabled").to(r,"isEnabled"),o.bind("isOn").to(r,"value",a=>!!a),this.listenTo(o,"execute",()=>{this._showForm()}),o})}_createForm(){const e=this.editor,s=e.editing.view.document,r=e.plugins.get("ImageUtils");this._balloon=this.editor.plugins.get("ContextualBalloon"),this._form=new(Bb(oge))(e.locale),this._form.render(),this.listenTo(this._form,"submit",()=>{e.execute("imageTextAlternative",{newValue:this._form.labeledInput.fieldView.element.value}),this._hideForm(!0)}),this.listenTo(this._form,"cancel",()=>{this._hideForm(!0)}),this._form.keystrokes.set("Esc",(o,a)=>{this._hideForm(!0),a()}),this.listenTo(e.ui,"update",()=>{r.getClosestSelectedImageWidget(s.selection)?this._isVisible&&age(e):this._hideForm(!0)}),Ta({emitter:this._form,activator:()=>this._isVisible,contextElements:()=>[this._balloon.view.element],callback:()=>this._hideForm()})}_showForm(){if(this._isVisible)return;this._form||this._createForm();const e=this.editor,n=e.commands.get("imageTextAlternative"),s=this._form.labeledInput;this._form.disableCssTransitions(),this._isInBalloon||this._balloon.add({view:this._form,position:uC(e)}),s.fieldView.value=s.fieldView.element.value=n.value||"",this._form.labeledInput.fieldView.select(),this._form.enableCssTransitions()}_hideForm(e=!1){this._isInBalloon&&(this._form.focusTracker.isFocused&&this._form.saveButtonView.focus(),this._balloon.remove(this._form),e&&this.editor.editing.view.focus())}get _isVisible(){return!!this._balloon&&this._balloon.visibleView===this._form}get _isInBalloon(){return!!this._balloon&&this._balloon.hasView(this._form)}}class dC extends J{static get requires(){return[rge,lge]}static get pluginName(){return"ImageTextAlternative"}static get isOfficialPlugin(){return!0}}function cge(i){const t=(e,n,s)=>{if(!s.consumable.test(n.viewItem,{name:!0,classes:"image"}))return;const r=i.findViewImgElement(n.viewItem);if(!r||!s.consumable.test(r,{name:!0}))return;s.consumable.consume(n.viewItem,{name:!0,classes:"image"});const o=s.convertItem(r,n.modelCursor),a=ln(o.modelRange.getItems());if(!a){s.consumable.revert(n.viewItem,{name:!0,classes:"image"});return}s.convertChildren(n.viewItem,a),s.updateConversionResult(a,n)};return e=>{e.on("element:figure",t)}}function DL(i,t){const e=(n,s,r)=>{if(!r.consumable.consume(s.item,n.name))return;const o=r.writer,a=r.mapper.toViewElement(s.item),l=i.findViewImgElement(a);s.attributeNewValue===null?(o.removeAttribute("srcset",l),o.removeAttribute("sizes",l)):s.attributeNewValue&&(o.setAttribute("srcset",s.attributeNewValue,l),o.setAttribute("sizes","100vw",l))};return n=>{n.on(`attribute:srcset:${t}`,e)}}function Np(i,t,e){const n=(s,r,o)=>{if(!o.consumable.consume(r.item,s.name))return;const a=o.writer,l=o.mapper.toViewElement(r.item),u=i.findViewImgElement(l);a.setAttribute(r.attributeKey,r.attributeNewValue||"",u)};return s=>{s.on(`attribute:${e}:${t}`,n)}}class hC extends Or{observe(t){this.listenTo(t,"load",(e,n)=>{const s=n.target;this.checkShouldIgnoreEventFromTarget(s)||s.tagName=="IMG"&&this._fireEvents(n)},{useCapture:!0})}stopObserving(t){this.stopListening(t)}_fireEvents(t){this.isEnabled&&(this.document.fire("layoutChanged"),this.document.fire("imageLoaded",t))}}class uge extends Ze{constructor(t){super(t);const e=t.config.get("image.insert.type");t.plugins.has("ImageBlockEditing")||e==="block"&&dt("image-block-plugin-required"),t.plugins.has("ImageInlineEditing")||e==="inline"&&dt("image-inline-plugin-required")}refresh(){const t=this.editor.plugins.get("ImageUtils");this.isEnabled=t.isImageAllowed()}execute(t){const e=Bt(t.source),n=this.editor.model.document.selection,s=this.editor.plugins.get("ImageUtils"),r=Object.fromEntries(n.getAttributes());e.forEach((o,a)=>{const l=n.getSelectedElement();if(typeof o=="string"&&(o={src:o}),a&&l&&s.isImage(l)){const u=this.editor.model.createPositionAfter(l);s.insertImage({...o,...r},u,t.imageType)}else t.breakBlock?s.insertImage({...o,...r},n.getFirstPosition(),t.imageType):s.insertImage({...o,...r},null,t.imageType)})}}class dge extends Ze{constructor(t){super(t),this.decorate("cleanupImage")}refresh(){const e=this.editor.plugins.get("ImageUtils"),n=this.editor.model.document.selection.getSelectedElement();this.isEnabled=e.isImage(n),this.value=this.isEnabled?n.getAttribute("src"):null}execute(t){const e=this.editor.model.document.selection.getSelectedElement(),n=this.editor.plugins.get("ImageUtils");this.editor.model.change(s=>{s.setAttribute("src",t.source,e),this.cleanupImage(s,e),n.setImageNaturalSizeAttributes(e)})}cleanupImage(t,e){t.removeAttribute("srcset",e),t.removeAttribute("sizes",e),t.removeAttribute("sources",e),t.removeAttribute("width",e),t.removeAttribute("height",e),t.removeAttribute("alt",e)}}class BL extends J{static get requires(){return[jn]}static get pluginName(){return"ImageEditing"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.conversion;t.editing.view.addObserver(hC),e.for("upcast").attributeToAttribute({view:{name:"img",key:"alt"},model:"alt"}).attributeToAttribute({view:{name:"img",key:"srcset"},model:"srcset"});const n=new uge(t),s=new dge(t);t.commands.add("insertImage",n),t.commands.add("replaceImageSource",s),t.commands.add("imageInsert",n)}}class FL extends J{static get requires(){return[jn]}static get pluginName(){return"ImageSizeAttributes"}static get isOfficialPlugin(){return!0}afterInit(){this._registerSchema(),this._registerConverters("imageBlock"),this._registerConverters("imageInline")}_registerSchema(){this.editor.plugins.has("ImageBlockEditing")&&this.editor.model.schema.extend("imageBlock",{allowAttributes:["width","height"]}),this.editor.plugins.has("ImageInlineEditing")&&this.editor.model.schema.extend("imageInline",{allowAttributes:["width","height"]})}_registerConverters(t){const e=this.editor,n=e.plugins.get("ImageUtils"),s=t==="imageBlock"?"figure":"img";e.conversion.for("upcast").attributeToAttribute({view:{name:s,styles:{width:/.+/}},model:{key:"width",value:o=>Op(o)?Rp(o.getStyle("width")):null}}).attributeToAttribute({view:{name:s,key:"width"},model:"width"}).attributeToAttribute({view:{name:s,styles:{height:/.+/}},model:{key:"height",value:o=>Op(o)?Rp(o.getStyle("height")):null}}).attributeToAttribute({view:{name:s,key:"height"},model:"height"}),e.conversion.for("editingDowncast").add(o=>{r(o,"width","width",!0,!0),r(o,"height","height",!0,!0)}),e.conversion.for("dataDowncast").add(o=>{r(o,"width","width",!1),r(o,"height","height",!1)});function r(o,a,l,u,h=!1){o.on(`attribute:${a}:${t}`,(f,g,p)=>{if(!p.consumable.consume(g.item,f.name))return;const y=p.writer,E=p.mapper.toViewElement(g.item),C=n.findViewImgElement(E);g.attributeNewValue!==null?y.setAttribute(l,g.attributeNewValue,C):y.removeAttribute(l,C);const k=g.item.getAttribute("width"),T=g.item.getAttribute("height"),P=k&&T;if(P&&h&&y.setAttribute("loading","lazy",C),g.item.hasAttribute("sources"))return;const S=g.item.hasAttribute("resizedWidth");t==="imageInline"&&!S&&!u||P&&y.setStyle("aspect-ratio",`${k}/${T}`,C)})}}}class $L extends Ze{constructor(e,n){super(e);b(this,"_modelElementName");this._modelElementName=n}refresh(){const n=this.editor.plugins.get("ImageUtils"),s=n.getClosestSelectedImageElement(this.editor.model.document.selection);this._modelElementName==="imageBlock"?this.isEnabled=n.isInlineImage(s):this.isEnabled=n.isBlockImage(s)}execute(e={}){const n=this.editor,s=this.editor.model,r=n.plugins.get("ImageUtils"),o=r.getClosestSelectedImageElement(s.document.selection),a=Object.fromEntries(o.getAttributes());return!a.src&&!a.uploadId?null:s.change(l=>{const{setImageSizes:u=!0}=e,h=Array.from(s.markers).filter(p=>p.getRange().containsItem(o)),f=r.insertImage(a,s.createSelection(o,"on"),this._modelElementName,{setImageSizes:u});if(!f)return null;const g=l.createRangeOn(f);for(const p of h){const y=p.getRange(),E=y.root.rootName!="$graveyard"?y.getJoined(g,!0):g;l.updateMarker(p,{range:E})}return{oldElement:o,newElement:f}})}}class zL extends J{static get requires(){return[jn]}static get pluginName(){return"ImagePlaceholder"}static get isOfficialPlugin(){return!0}afterInit(){this._setupSchema(),this._setupConversion(),this._setupLoadListener()}_setupSchema(){const t=this.editor.model.schema;t.isRegistered("imageBlock")&&t.extend("imageBlock",{allowAttributes:["placeholder"]}),t.isRegistered("imageInline")&&t.extend("imageInline",{allowAttributes:["placeholder"]})}_setupConversion(){const t=this.editor,e=t.conversion,n=t.plugins.get("ImageUtils");e.for("editingDowncast").add(s=>{s.on("attribute:placeholder",(r,o,a)=>{if(!a.consumable.test(o.item,r.name)||!o.item.is("element","imageBlock")&&!o.item.is("element","imageInline"))return;a.consumable.consume(o.item,r.name);const l=a.writer,u=a.mapper.toViewElement(o.item),h=n.findViewImgElement(u);o.attributeNewValue?(l.addClass("image_placeholder",h),l.setStyle("background-image",`url(${o.attributeNewValue})`,h),l.setCustomProperty("editingPipeline:doNotReuseOnce",!0,h)):(l.removeClass("image_placeholder",h),l.removeStyle("background-image",h))})})}_setupLoadListener(){const t=this.editor,e=t.model,n=t.editing,s=n.view,r=t.plugins.get("ImageUtils");s.addObserver(hC),this.listenTo(s.document,"imageLoaded",(o,a)=>{const l=s.domConverter.mapDomToView(a.target);if(!l)return;const u=r.getImageWidgetFromImageView(l);if(!u)return;const h=n.mapper.toModelElement(u);!h||!h.hasAttribute("placeholder")||e.enqueueChange({isUndoable:!1},f=>{f.removeAttribute("placeholder",h)})})}}class jL extends J{static get requires(){return[BL,FL,jn,zL,Ts]}static get pluginName(){return"ImageBlockEditing"}static get isOfficialPlugin(){return!0}init(){const t=this.editor;t.model.schema.register("imageBlock",{inheritAllFrom:"$blockObject",allowAttributes:["alt","src","srcset"]}),this._setupConversion(),t.plugins.has("ImageInlineEditing")&&(t.commands.add("imageTypeBlock",new $L(this.editor,"imageBlock")),this._setupClipboardIntegration())}_setupConversion(){const t=this.editor,e=t.t,n=t.conversion,s=t.plugins.get("ImageUtils");n.for("dataDowncast").elementToStructure({model:"imageBlock",view:(r,{writer:o})=>NI(o)}),n.for("editingDowncast").elementToStructure({model:"imageBlock",view:(r,{writer:o})=>s.toImageWidget(NI(o),o,e("image widget"))}),n.for("downcast").add(Np(s,"imageBlock","src")).add(Np(s,"imageBlock","alt")).add(DL(s,"imageBlock")),n.for("upcast").elementToElement({view:LL(t,"imageBlock"),model:(r,{writer:o})=>o.createElement("imageBlock",r.hasAttribute("src")?{src:r.getAttribute("src")}:void 0)}).add(cge(s))}_setupClipboardIntegration(){const t=this.editor,e=t.model,n=t.editing.view,s=t.plugins.get("ImageUtils"),r=t.plugins.get("ClipboardPipeline");this.listenTo(r,"inputTransformation",(o,a)=>{const l=Array.from(a.content.getChildren());let u;if(!l.every(s.isInlineImageView))return;a.targetRanges?u=t.editing.mapper.toModelRange(a.targetRanges[0]):u=e.document.selection.getFirstRange();const h=e.createSelection(u);if(cC(e.schema,h)==="imageBlock"){const f=new _o(n.document),g=l.map(p=>f.createElement("figure",{class:"image"},p));a.content=f.createDocumentFragment(g)}}),this.listenTo(r,"contentInsertion",(o,a)=>{a.method==="paste"&&e.change(l=>{const u=l.createRangeIn(a.content);for(const h of u.getItems())h.is("element","imageBlock")&&s.setImageNaturalSizeAttributes(h)})})}}class hge extends xe{constructor(e,n=[]){super(e);b(this,"focusTracker");b(this,"keystrokes");b(this,"_focusables");b(this,"_focusCycler");b(this,"children");this.focusTracker=new Gt,this.keystrokes=new tn,this._focusables=new Un,this.children=this.createCollection(),this._focusCycler=new fi({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}});for(const s of n)this.children.add(s),this._focusables.add(s),s instanceof WM&&this._focusables.addMany(s.children);this.setTemplate({tag:"form",attributes:{class:["ck","ck-image-insert-form"],tabindex:-1},children:this.children})}render(){super.render(),Sa({view:this});for(const n of this._focusables)this.focusTracker.add(n.element);this.keystrokes.listenTo(this.element);const e=n=>n.stopPropagation();this.keystrokes.set("arrowright",e),this.keystrokes.set("arrowleft",e),this.keystrokes.set("arrowup",e),this.keystrokes.set("arrowdown",e)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}}class qb extends J{constructor(e){super(e);b(this,"dropdownView");b(this,"_integrations",new Map);e.config.define("image.insert.integrations",["upload","assetManager","url"])}static get pluginName(){return"ImageInsertUI"}static get isOfficialPlugin(){return!0}static get requires(){return[jn]}init(){const e=this.editor,n=e.model.document.selection,s=e.plugins.get("ImageUtils");this.set("isImageSelected",!1),this.listenTo(e.model.document,"change",()=>{this.isImageSelected=s.isImage(n.getSelectedElement())});const r=a=>this._createToolbarComponent(a),o=a=>this._createMenuBarComponent(a);e.ui.componentFactory.add("insertImage",r),e.ui.componentFactory.add("imageInsert",r),e.ui.componentFactory.add("menuBar:insertImage",o)}registerIntegration({name:e,observable:n,buttonViewCreator:s,formViewCreator:r,menuBarButtonViewCreator:o,requiresForm:a=!1,override:l=!1}){this._integrations.has(e)&&!l&&dt("image-insert-integration-exists",{name:e}),this._integrations.set(e,{observable:n,buttonViewCreator:s,menuBarButtonViewCreator:o,formViewCreator:r,requiresForm:a})}_createToolbarComponent(e){const n=this.editor,s=e.t,r=this._prepareIntegrations();if(!r.length)return null;let o;const a=r[0];if(r.length==1){if(!a.requiresForm)return a.buttonViewCreator(!0);o=a.buttonViewCreator(!0)}else{const h=a.buttonViewCreator(!1);o=new bf(e,h),o.tooltip=!0,o.bind("label").to(this,"isImageSelected",f=>s(f?"Replace image":"Insert image"))}const l=this.dropdownView=ti(e,o),u=r.map(({observable:h})=>typeof h=="function"?h():h);return l.bind("isEnabled").toMany(u,"isEnabled",(...h)=>h.some(f=>f)),l.once("change:isOpen",()=>{const h=r.flatMap(({formViewCreator:g})=>g(r.length==1)),f=new hge(n.locale,h);l.panelView.children.add(f)}),l}_createMenuBarComponent(e){const n=e.t,s=this._prepareIntegrations();if(!s.length)return null;const r=s.flatMap(({menuBarButtonViewCreator:l})=>l(s.length==1)),o=new Yi(e),a=new kl(e);o.panelView.children.add(a),o.buttonView.set({icon:ve.image,label:n("Image")});for(const l of r){const u=new Vl(e,o);u.children.add(l),a.items.add(u),l.delegate("execute").to(o)}return o}_prepareIntegrations(){const n=this.editor.config.get("image.insert.integrations"),s=[];if(!n.length)return dt("image-insert-integrations-not-specified"),s;for(const r of n){if(!this._integrations.has(r)){["upload","assetManager","url"].includes(r)||dt("image-insert-unknown-integration",{item:r});continue}s.push(this._integrations.get(r))}return s.length||dt("image-insert-integrations-not-registered"),s}}class fge extends J{static get requires(){return[jL,wf,dC,qb]}static get pluginName(){return"ImageBlock"}static get isOfficialPlugin(){return!0}}class mge extends J{static get requires(){return[BL,FL,jn,zL,Ts]}static get pluginName(){return"ImageInlineEditing"}static get isOfficialPlugin(){return!0}init(){const t=this.editor;t.model.schema.register("imageInline",{inheritAllFrom:"$inlineObject",allowAttributes:["alt","src","srcset"],disallowIn:["caption"]}),this._setupConversion(),t.plugins.has("ImageBlockEditing")&&(t.commands.add("imageTypeInline",new $L(this.editor,"imageInline")),this._setupClipboardIntegration())}_setupConversion(){const t=this.editor,e=t.t,n=t.conversion,s=t.plugins.get("ImageUtils");n.for("dataDowncast").elementToElement({model:"imageInline",view:(r,{writer:o})=>o.createEmptyElement("img")}),n.for("editingDowncast").elementToStructure({model:"imageInline",view:(r,{writer:o})=>s.toImageWidget(Xme(o),o,e("image widget"))}),n.for("downcast").add(Np(s,"imageInline","src")).add(Np(s,"imageInline","alt")).add(DL(s,"imageInline")),n.for("upcast").elementToElement({view:LL(t,"imageInline"),model:(r,{writer:o})=>o.createElement("imageInline",r.hasAttribute("src")?{src:r.getAttribute("src")}:void 0)})}_setupClipboardIntegration(){const t=this.editor,e=t.model,n=t.editing.view,s=t.plugins.get("ImageUtils"),r=t.plugins.get("ClipboardPipeline");this.listenTo(r,"inputTransformation",(o,a)=>{const l=Array.from(a.content.getChildren());let u;if(!l.every(s.isBlockImageView))return;a.targetRanges?u=t.editing.mapper.toModelRange(a.targetRanges[0]):u=e.document.selection.getFirstRange();const h=e.createSelection(u);if(cC(e.schema,h)==="imageInline"){const f=new _o(n.document),g=l.map(p=>p.childCount===1?(Array.from(p.getAttributes()).forEach(y=>f.setAttribute(...y,s.findViewImgElement(p))),p.getChild(0)):p);a.content=f.createDocumentFragment(g)}}),this.listenTo(r,"contentInsertion",(o,a)=>{a.method==="paste"&&e.change(l=>{const u=l.createRangeIn(a.content);for(const h of u.getItems())h.is("element","imageInline")&&s.setImageNaturalSizeAttributes(h)})})}}class gge extends J{static get requires(){return[mge,wf,dC,qb]}static get pluginName(){return"ImageInline"}static get isOfficialPlugin(){return!0}}class HL extends J{static get pluginName(){return"ImageCaptionUtils"}static get isOfficialPlugin(){return!0}static get requires(){return[jn]}getCaptionFromImageModelElement(t){for(const e of t.getChildren())if(e&&e.is("element","caption"))return e;return null}getCaptionFromModelSelection(t){const e=this.editor.plugins.get("ImageUtils"),n=t.getFirstPosition().findAncestor("caption");return n&&e.isBlockImage(n.parent)?n:null}matchImageCaptionViewElement(t){const e=this.editor.plugins.get("ImageUtils");return t.name=="figcaption"&&e.isBlockImageView(t.parent)?{name:!0}:null}}class pge extends Ze{refresh(){const t=this.editor,e=t.plugins.get("ImageCaptionUtils"),n=t.plugins.get("ImageUtils");if(!t.plugins.has(jL)){this.isEnabled=!1,this.value=!1;return}const s=t.model.document.selection,r=s.getSelectedElement();if(!r){const o=e.getCaptionFromModelSelection(s);this.isEnabled=!!o,this.value=!!o;return}this.isEnabled=n.isImage(r),this.isEnabled?this.value=!!e.getCaptionFromImageModelElement(r):this.value=!1}execute(t={}){const{focusCaptionOnShow:e}=t;this.editor.model.change(n=>{this.value?this._hideImageCaption(n):this._showImageCaption(n,e)})}_showImageCaption(t,e){const s=this.editor.model.document.selection,r=this.editor.plugins.get("ImageCaptionEditing"),o=this.editor.plugins.get("ImageUtils");let a=s.getSelectedElement();const l=r._getSavedCaption(a);o.isInlineImage(a)&&(this.editor.execute("imageTypeBlock"),a=s.getSelectedElement());const u=l||t.createElement("caption");t.append(u,a),e&&t.setSelection(u,"in")}_hideImageCaption(t){const e=this.editor,n=e.model.document.selection,s=e.plugins.get("ImageCaptionEditing"),r=e.plugins.get("ImageCaptionUtils");let o=n.getSelectedElement(),a;o?a=r.getCaptionFromImageModelElement(o):(a=r.getCaptionFromModelSelection(n),o=a.parent),s._saveCaption(o,a),t.setSelection(o,"on"),t.remove(a)}}class bge extends J{constructor(e){super(e);b(this,"_savedCaptionsMap");this._savedCaptionsMap=new WeakMap}static get requires(){return[jn,HL]}static get pluginName(){return"ImageCaptionEditing"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,n=e.model.schema;n.isRegistered("caption")?n.extend("caption",{allowIn:"imageBlock"}):n.register("caption",{allowIn:"imageBlock",allowContentOf:"$block",isLimit:!0}),e.commands.add("toggleImageCaption",new pge(this.editor)),this._setupConversion(),this._setupImageTypeCommandsIntegration(),this._registerCaptionReconversion()}_setupConversion(){const e=this.editor,n=e.editing.view,s=e.plugins.get("ImageUtils"),r=e.plugins.get("ImageCaptionUtils"),o=e.t;e.conversion.for("upcast").elementToElement({view:a=>r.matchImageCaptionViewElement(a),model:"caption"}),e.conversion.for("dataDowncast").elementToElement({model:"caption",view:(a,{writer:l})=>s.isBlockImage(a.parent)?l.createContainerElement("figcaption"):null}),e.conversion.for("editingDowncast").elementToElement({model:"caption",view:(a,{writer:l})=>{if(!s.isBlockImage(a.parent))return null;const u=l.createEditableElement("figcaption");l.setCustomProperty("imageCaption",!0,u),u.placeholder=o("Enter image caption"),OE({view:n,element:u,keepOnFocus:!0});const h=a.parent.getAttribute("alt"),f=h?o("Caption for image: %0",[h]):o("Caption for the image");return iC(u,l,{label:f})}})}_setupImageTypeCommandsIntegration(){const e=this.editor,n=e.plugins.get("ImageUtils"),s=e.plugins.get("ImageCaptionUtils"),r=e.commands.get("imageTypeInline"),o=e.commands.get("imageTypeBlock"),a=l=>{if(!l.return)return;const{oldElement:u,newElement:h}=l.return;/* istanbul ignore if: paranoid check -- @preserve */if(!u)return;if(n.isBlockImage(u)){const g=s.getCaptionFromImageModelElement(u);if(g){this._saveCaption(h,g);return}}const f=this._getSavedCaption(u);f&&this._saveCaption(h,f)};r&&this.listenTo(r,"execute",a,{priority:"low"}),o&&this.listenTo(o,"execute",a,{priority:"low"})}_getSavedCaption(e){const n=this._savedCaptionsMap.get(e);return n?Yt.fromJSON(n):null}_saveCaption(e,n){this._savedCaptionsMap.set(e,n.toJSON())}_registerCaptionReconversion(){const e=this.editor,n=e.model,s=e.plugins.get("ImageUtils"),r=e.plugins.get("ImageCaptionUtils");n.document.on("change:data",()=>{const o=n.document.differ.getChanges();for(const a of o){if(a.attributeKey!=="alt")continue;const l=a.range.start.nodeAfter;if(s.isBlockImage(l)){const u=r.getCaptionFromImageModelElement(l);if(!u)return;e.editing.reconvertItem(u)}}})}}class wge extends J{static get requires(){return[HL]}static get pluginName(){return"ImageCaptionUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.editing.view,n=t.plugins.get("ImageCaptionUtils"),s=t.t;t.ui.componentFactory.add("toggleImageCaption",r=>{const o=t.commands.get("toggleImageCaption"),a=new qe(r);return a.set({icon:ve.caption,tooltip:!0,isToggleable:!0}),a.bind("isOn","isEnabled").to(o,"value","isEnabled"),a.bind("label").to(o,"value",l=>s(l?"Toggle caption off":"Toggle caption on")),this.listenTo(a,"execute",()=>{t.execute("toggleImageCaption",{focusCaptionOnShow:!0});const l=n.getCaptionFromModelSelection(t.model.document.selection);if(l){const u=t.editing.mapper.toViewElement(l);e.scrollToTheSelection(),e.change(h=>{h.addClass("image__caption_highlighted",u)})}t.editing.view.focus()}),a})}}class vge extends J{static get requires(){return[bge,wge]}static get pluginName(){return"ImageCaption"}static get isOfficialPlugin(){return!0}}function UL(i){const t=i.map(e=>e.replace("+","\\+"));return new RegExp(`^image\\/(${t.join("|")})$`)}function yge(i){return new Promise((t,e)=>{const n=i.getAttribute("src");fetch(n).then(s=>s.blob()).then(s=>{const r=WL(s,n),a=`image.${r.replace("image/","")}`,l=new File([s],a,{type:r});t(l)}).catch(s=>s&&s.name==="TypeError"?Ege(n).then(t).catch(e):e(s))})}function _ge(i,t){return!i.isInlineImageView(t)||!t.getAttribute("src")?!1:!!t.getAttribute("src").match(/^data:image\/\w+;base64,/g)||!!t.getAttribute("src").match(/^blob:/g)}function WL(i,t){return i.type?i.type:t.match(/data:(image\/\w+);base64/)?t.match(/data:(image\/\w+);base64/)[1].toLowerCase():"image/jpeg"}function Ege(i){return Cge(i).then(t=>{const e=WL(t,i),s=`image.${e.replace("image/","")}`;return new File([t],s,{type:e})})}function Cge(i){return new Promise((t,e)=>{const n=Ce.document.createElement("img");n.addEventListener("load",()=>{const s=Ce.document.createElement("canvas");s.width=n.width,s.height=n.height,s.getContext("2d").drawImage(n,0,0),s.toBlob(o=>o?t(o):e())}),n.addEventListener("error",()=>e()),n.src=i})}class xge extends J{static get pluginName(){return"ImageUploadUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor;t.ui.componentFactory.add("uploadImage",()=>this._createToolbarButton()),t.ui.componentFactory.add("imageUpload",()=>this._createToolbarButton()),t.ui.componentFactory.add("menuBar:uploadImage",()=>this._createMenuBarButton("standalone")),t.plugins.has("ImageInsertUI")&&t.plugins.get("ImageInsertUI").registerIntegration({name:"upload",observable:()=>t.commands.get("uploadImage"),buttonViewCreator:()=>this._createToolbarButton(),formViewCreator:()=>this._createDropdownButton(),menuBarButtonViewCreator:e=>this._createMenuBarButton(e?"insertOnly":"insertNested")})}_createButton(t){const e=this.editor,n=e.locale,s=e.commands.get("uploadImage"),r=e.config.get("image.upload.types"),o=UL(r),a=new t(e.locale),l=n.t;return a.set({acceptedType:r.map(u=>`image/${u}`).join(","),allowMultipleFiles:!0,label:l("Upload from computer"),icon:ve.imageUpload}),a.bind("isEnabled").to(s),a.on("done",(u,h)=>{const f=Array.from(h).filter(g=>o.test(g.type));f.length&&(e.execute("uploadImage",{file:f}),e.editing.view.focus())}),a}_createToolbarButton(){const t=this.editor.locale.t,e=this.editor.plugins.get("ImageInsertUI"),n=this.editor.commands.get("uploadImage"),s=this._createButton(FP);return s.tooltip=!0,s.bind("label").to(e,"isImageSelected",n,"isAccessAllowed",(r,o)=>t(o?r?"Replace image from computer":"Upload image from computer":"You have no image upload permissions.")),s}_createDropdownButton(){const t=this.editor.locale.t,e=this.editor.plugins.get("ImageInsertUI"),n=this._createButton(FP);return n.withText=!0,n.bind("label").to(e,"isImageSelected",s=>t(s?"Replace from computer":"Upload from computer")),n.on("execute",()=>{e.dropdownView.isOpen=!1}),n}_createMenuBarButton(t){const e=this.editor.locale.t,n=this._createButton(uL);switch(n.withText=!0,t){case"standalone":n.label=e("Image from computer");break;case"insertOnly":n.label=e("Image");break;case"insertNested":n.label=e("From computer");break}return n}}class kge extends J{constructor(e){super(e);b(this,"placeholder");b(this,"uploadStatusChange",(e,n,s)=>{const r=this.editor,o=n.item,a=o.getAttribute("uploadId");if(!s.consumable.consume(n.item,e.name))return;const l=r.plugins.get("ImageUtils"),u=r.plugins.get(Gc),h=a?n.attributeNewValue:null,f=this.placeholder,g=r.editing.mapper.toViewElement(o),p=s.writer;if(h=="reading"){MI(g,p),LI(l,f,g,p);return}if(h=="uploading"){const y=u.loaders.get(a);MI(g,p),y?(VI(g,p),Sge(g,p,y,r.editing.view),Oge(l,g,p,y)):LI(l,f,g,p);return}h=="complete"&&u.loaders.get(a)&&Pge(g,p,r.editing.view),Age(g,p),VI(g,p),Tge(g,p)});this.placeholder="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="}static get pluginName(){return"ImageUploadProgress"}static get isOfficialPlugin(){return!0}init(){const e=this.editor;e.plugins.has("ImageBlockEditing")&&e.editing.downcastDispatcher.on("attribute:uploadStatus:imageBlock",this.uploadStatusChange),e.plugins.has("ImageInlineEditing")&&e.editing.downcastDispatcher.on("attribute:uploadStatus:imageInline",this.uploadStatusChange)}}function MI(i,t){i.hasClass("ck-appear")||t.addClass("ck-appear",i)}function Tge(i,t){t.removeClass("ck-appear",i)}function LI(i,t,e,n){e.hasClass("ck-image-upload-placeholder")||n.addClass("ck-image-upload-placeholder",e);const s=i.findViewImgElement(e);s.getAttribute("src")!==t&&n.setAttribute("src",t,s),qL(e,"placeholder")||n.insert(n.createPositionAfter(s),Rge(n))}function VI(i,t){i.hasClass("ck-image-upload-placeholder")&&t.removeClass("ck-image-upload-placeholder",i),GL(i,t,"placeholder")}function Sge(i,t,e,n){const s=Ige(t);t.insert(t.createPositionAt(i,"end"),s),e.on("change:uploadedPercent",(r,o,a)=>{n.change(l=>{l.setStyle("width",a+"%",s)})})}function Age(i,t){GL(i,t,"progressBar")}function Pge(i,t,e){const n=t.createUIElement("div",{class:"ck-image-upload-complete-icon"});t.insert(t.createPositionAt(i,"end"),n),setTimeout(()=>{e.change(s=>s.remove(s.createRangeOn(n)))},3e3)}function Ige(i){const t=i.createUIElement("div",{class:"ck-progress-bar"});return i.setCustomProperty("progressBar",!0,t),t}function Rge(i){const t=i.createUIElement("div",{class:"ck-upload-placeholder-loader"});return i.setCustomProperty("placeholder",!0,t),t}function qL(i,t){for(const e of i.getChildren())if(e.getCustomProperty(t))return e}function GL(i,t,e){const n=qL(i,e);n&&t.remove(t.createRangeOn(n))}function Oge(i,t,e,n){if(n.data){const s=i.findViewImgElement(t);e.setAttribute("src",n.data,s)}}class Nge extends Ze{constructor(t){super(t),this.set("isAccessAllowed",!0)}refresh(){const t=this.editor,e=t.plugins.get("ImageUtils"),n=t.model.document.selection.getSelectedElement();this.isEnabled=e.isImageAllowed()||e.isImage(n)}execute(t){const e=Bt(t.file),n=this.editor.model.document.selection,s=this.editor.plugins.get("ImageUtils"),r=Object.fromEntries(n.getAttributes());e.forEach((o,a)=>{const l=n.getSelectedElement();if(a&&l&&s.isImage(l)){const u=this.editor.model.createPositionAfter(l);this._uploadImage(o,r,u)}else this._uploadImage(o,r)})}_uploadImage(t,e,n){const s=this.editor,o=s.plugins.get(Gc).createLoader(t),a=s.plugins.get("ImageUtils");o&&a.insertImage({...e,uploadId:o.id},n)}}class Mge extends J{constructor(e){super(e);b(this,"_uploadImageElements");b(this,"_uploadedImages",new Map);e.config.define("image",{upload:{types:["jpeg","png","gif","bmp","webp","tiff"]}}),this._uploadImageElements=new Map}static get requires(){return[Gc,ZP,Ts,jn]}static get pluginName(){return"ImageUploadEditing"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,n=e.model.document,s=e.conversion,r=e.plugins.get(Gc),o=e.plugins.get("ImageUtils"),a=e.plugins.get("ClipboardPipeline"),l=UL(e.config.get("image.upload.types")),u=new Nge(e);e.commands.add("uploadImage",u),e.commands.add("imageUpload",u),s.for("upcast").attributeToAttribute({view:{name:"img",key:"uploadId"},model:"uploadId"}).add(h=>h.on("element:img",(f,g,p)=>{if(!p.consumable.test(g.viewItem,{attributes:["data-ck-upload-id"]}))return;const y=g.viewItem.getAttribute("data-ck-upload-id");if(!y)return;const[E]=Array.from(g.modelRange.getItems({shallow:!0})),C=r.loaders.get(y);E&&(p.writer.setAttribute("uploadId",y,E),p.consumable.consume(g.viewItem,{attributes:["data-ck-upload-id"]}),C&&C.data&&p.writer.setAttribute("uploadStatus",C.status,E))},{priority:"low"})),this.listenTo(e.editing.view.document,"clipboardInput",(h,f)=>{if(Lge(f.dataTransfer))return;const g=Array.from(f.dataTransfer.files).filter(y=>y?l.test(y.type):!1);if(!g.length)return;if(h.stop(),e.model.change(y=>{f.targetRanges&&y.setSelection(f.targetRanges.map(E=>e.editing.mapper.toModelRange(E))),e.execute("uploadImage",{file:g})}),!e.commands.get("uploadImage").isAccessAllowed){const y=e.plugins.get("Notification"),E=e.locale.t;y.showWarning(E("You have no image upload permissions."),{namespace:"image"})}}),this.listenTo(a,"inputTransformation",(h,f)=>{const g=Array.from(e.editing.view.createRangeIn(f.content)).map(y=>y.item).filter(y=>_ge(o,y)&&!y.getAttribute("uploadProcessed")).map(y=>({promise:yge(y),imageElement:y}));if(!g.length)return;const p=new _o(e.editing.view.document);for(const y of g){p.setAttribute("uploadProcessed",!0,y.imageElement);const E=r.createLoader(y.promise);E&&(p.setAttribute("src","",y.imageElement),p.setAttribute("uploadId",E.id,y.imageElement))}}),e.editing.view.document.on("dragover",(h,f)=>{f.preventDefault()}),n.on("change",()=>{const h=n.differ.getChanges({includeChangesInGraveyard:!0}).reverse(),f=new Set;for(const g of h)if(g.type=="insert"&&g.name!="$text"){const p=g.position.nodeAfter,y=g.position.root.rootName=="$graveyard";for(const E of Vge(e,p)){const C=E.getAttribute("uploadId");if(!C)continue;const k=r.loaders.get(C);if(!k){!y&&this._uploadedImages.has(C)&&e.model.enqueueChange({isUndoable:!1},T=>{T.setAttribute("uploadStatus","complete",E),this.fire("uploadComplete",{data:this._uploadedImages.get(C),imageElement:E})});continue}y?f.has(C)||Array.from(this._uploadImageElements.get(C)).every(P=>P.root.rootName=="$graveyard")&&k.abort():(f.add(C),this._uploadImageElements.has(C)?this._uploadImageElements.get(C).add(E):this._uploadImageElements.set(C,new Set([E])),k.status=="idle"&&this._readAndUpload(k))}}}),this.on("uploadComplete",(h,{imageElement:f,data:g})=>{const p=g.urls?g.urls:g;this.editor.model.change(y=>{y.setAttribute("src",p.default,f),this._parseAndSetSrcsetAttributeOnImage(p,f,y),o.setImageNaturalSizeAttributes(f)})},{priority:"low"})}afterInit(){const e=this.editor.model.schema;this.editor.plugins.has("ImageBlockEditing")&&(e.extend("imageBlock",{allowAttributes:["uploadId","uploadStatus"]}),this._registerConverters("imageBlock")),this.editor.plugins.has("ImageInlineEditing")&&(e.extend("imageInline",{allowAttributes:["uploadId","uploadStatus"]}),this._registerConverters("imageInline"))}_readAndUpload(e){const n=this.editor,s=n.model,r=n.locale.t,o=n.plugins.get(Gc),a=n.plugins.get(ZP),l=n.plugins.get("ImageUtils"),u=this._uploadImageElements;return s.enqueueChange({isUndoable:!1},f=>{const g=u.get(e.id);for(const p of g)f.setAttribute("uploadStatus","reading",p)}),e.read().then(()=>{const f=e.upload();n.ui&&n.ui.ariaLiveAnnouncer.announce(r("Uploading image"));for(const g of u.get(e.id)){/* istanbul ignore next -- @preserve */if(Fe.isSafari){const p=n.editing.mapper.toViewElement(g),y=l.findViewImgElement(p);n.editing.view.once("render",()=>{if(!y.parent)return;const E=n.editing.view.domConverter.mapViewToDom(y.parent);if(!E)return;const C=E.style.display;E.style.display="none",E._ckHack=E.offsetHeight,E.style.display=C})}s.enqueueChange({isUndoable:!1},p=>{p.setAttribute("uploadStatus","uploading",g)})}return f}).then(f=>{s.enqueueChange({isUndoable:!1},g=>{for(const p of u.get(e.id))g.setAttribute("uploadStatus","complete",p),this.fire("uploadComplete",{data:f,imageElement:p});n.ui&&n.ui.ariaLiveAnnouncer.announce(r("Image upload complete")),this._uploadedImages.set(e.id,f)}),h()}).catch(f=>{if(n.ui&&n.ui.ariaLiveAnnouncer.announce(r("Error during image upload")),e.status!=="error"&&e.status!=="aborted")throw f;e.status=="error"&&f&&a.showWarning(f,{title:r("Upload failed"),namespace:"upload"}),s.enqueueChange({isUndoable:!1},g=>{for(const p of u.get(e.id))p.root.rootName!=="$graveyard"&&g.remove(p)}),h()});function h(){s.enqueueChange({isUndoable:!1},f=>{for(const g of u.get(e.id))f.removeAttribute("uploadId",g),f.removeAttribute("uploadStatus",g);u.delete(e.id)}),o.destroyLoader(e)}}_parseAndSetSrcsetAttributeOnImage(e,n,s){let r=0;const o=Object.keys(e).filter(a=>{const l=parseInt(a,10);if(!isNaN(l))return r=Math.max(r,l),!0}).map(a=>`${e[a]} ${a}w`).join(", ");if(o!=""){const a={srcset:o};!n.hasAttribute("width")&&!n.hasAttribute("height")&&(a.width=r),s.setAttributes(a,n)}}_registerConverters(e){const{conversion:n,plugins:s}=this.editor,r=s.get(Gc),o=s.get(jn);n.for("dataDowncast").add(a=>{a.on(`attribute:uploadId:${e}`,(l,u,h)=>{if(!h.consumable.test(u.item,l.name))return;const f=r.loaders.get(u.attributeNewValue);if(!f||!f.data)return null;const g=h.mapper.toViewElement(u.item),p=o.findViewImgElement(g);p&&(h.consumable.consume(u.item,l.name),h.writer.setAttribute("data-ck-upload-id",f.id,p))})})}}function Lge(i){return Array.from(i.types).includes("text/html")&&i.getData("text/html")!==""}function Vge(i,t){const e=i.plugins.get("ImageUtils");return Array.from(i.model.createRangeOn(t)).filter(n=>e.isImage(n.item)).map(n=>n.item)}class Dge extends J{static get pluginName(){return"ImageUpload"}static get isOfficialPlugin(){return!0}static get requires(){return[Mge,xge,kge]}}class Bge extends xe{constructor(e){super(e);b(this,"urlInputView");b(this,"keystrokes");this.set("imageURLInputValue",""),this.set("isImageSelected",!1),this.set("isEnabled",!0),this.keystrokes=new tn,this.urlInputView=this._createUrlInputView(),this.setTemplate({tag:"form",attributes:{class:["ck","ck-image-insert-url"],tabindex:"-1"},children:[this.urlInputView,{tag:"div",attributes:{class:["ck","ck-image-insert-url__action-row"]}}]})}render(){super.render(),Sa({view:this}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.keystrokes.destroy()}_createUrlInputView(){const e=this.locale,n=e.t,s=new bn(e,vs);return s.bind("label").to(this,"isImageSelected",r=>n(r?"Update image URL":"Insert image via URL")),s.bind("isEnabled").to(this),s.fieldView.inputMode="url",s.fieldView.placeholder="https://example.com/image.png",s.fieldView.bind("value").to(this,"imageURLInputValue",r=>r||""),s.fieldView.on("input",()=>{this.imageURLInputValue=s.fieldView.element.value.trim()}),s}focus(){this.urlInputView.focus()}}class Fge extends J{constructor(){super(...arguments);b(this,"_imageInsertUI");b(this,"_formView")}static get pluginName(){return"ImageInsertViaUrlUI"}static get isOfficialPlugin(){return!0}static get requires(){return[qb,$h]}init(){this.editor.ui.componentFactory.add("insertImageViaUrl",()=>this._createToolbarButton()),this.editor.ui.componentFactory.add("menuBar:insertImageViaUrl",()=>this._createMenuBarButton("standalone"))}afterInit(){this._imageInsertUI=this.editor.plugins.get("ImageInsertUI"),this._imageInsertUI.registerIntegration({name:"url",observable:()=>this.editor.commands.get("insertImage"),buttonViewCreator:()=>this._createToolbarButton(),formViewCreator:()=>this._createDropdownButton(),menuBarButtonViewCreator:e=>this._createMenuBarButton(e?"insertOnly":"insertNested")})}_createInsertUrlButton(e){const n=new e(this.editor.locale);return n.icon=ve.imageUrl,n.on("execute",()=>{this._showModal()}),n}_createToolbarButton(){const e=this.editor.locale.t,n=this._createInsertUrlButton(qe);return n.tooltip=!0,n.bind("label").to(this._imageInsertUI,"isImageSelected",s=>e(s?"Update image URL":"Insert image via URL")),n}_createDropdownButton(){const e=this.editor.locale.t,n=this._createInsertUrlButton(qe);return n.withText=!0,n.bind("label").to(this._imageInsertUI,"isImageSelected",s=>e(s?"Update image URL":"Insert via URL")),n}_createMenuBarButton(e){const n=this.editor.locale.t,s=this._createInsertUrlButton(Ln);switch(s.withText=!0,e){case"standalone":s.label=n("Image via URL");break;case"insertOnly":s.label=n("Image");break;case"insertNested":s.label=n("Via URL");break}return s}_createInsertUrlView(){const e=this.editor,n=e.locale,s=e.commands.get("replaceImageSource"),r=e.commands.get("insertImage"),o=new Bge(n);return o.bind("isImageSelected").to(this._imageInsertUI),o.bind("isEnabled").toMany([r,s],"isEnabled",(...a)=>a.some(l=>l)),o}_showModal(){const e=this.editor,s=e.locale.t,r=e.plugins.get("Dialog");this._formView||(this._formView=this._createInsertUrlView(),this._formView.on("submit",()=>this._handleSave()));const o=e.commands.get("replaceImageSource");this._formView.imageURLInputValue=o.value||"",r.show({id:"insertImageViaUrl",title:this._imageInsertUI.isImageSelected?s("Update image URL"):s("Insert image via URL"),isModal:!0,content:this._formView,actionButtons:[{label:s("Cancel"),withText:!0,onExecute:()=>r.hide()},{label:s("Accept"),class:"ck-button-action",withText:!0,onExecute:()=>this._handleSave()}]})}_handleSave(){this.editor.commands.get("replaceImageSource").isEnabled?this.editor.execute("replaceImageSource",{source:this._formView.imageURLInputValue}):this.editor.execute("insertImage",{source:this._formView.imageURLInputValue}),this.editor.plugins.get("Dialog").hide()}}class $ge extends J{static get pluginName(){return"ImageInsertViaUrl"}static get isOfficialPlugin(){return!0}static get requires(){return[Fge,qb]}}class zge extends Ze{refresh(){const t=this.editor,n=t.plugins.get("ImageUtils").getClosestSelectedImageElement(t.model.document.selection);this.isEnabled=!!n,!n||!n.hasAttribute("resizedWidth")?this.value=null:this.value={width:n.getAttribute("resizedWidth"),height:null}}execute(t){const e=this.editor,n=e.model,s=e.plugins.get("ImageUtils"),r=s.getClosestSelectedImageElement(n.document.selection);this.value={width:t.width,height:null},r&&n.change(o=>{o.setAttribute("resizedWidth",t.width,r),o.removeAttribute("resizedHeight",r),s.setImageNaturalSizeAttributes(r)})}}class KL extends J{static get requires(){return[jn]}static get pluginName(){return"ImageResizeEditing"}static get isOfficialPlugin(){return!0}constructor(t){super(t),t.config.define("image",{resizeUnit:"%",resizeOptions:[{name:"resizeImage:original",value:null,icon:"original"},{name:"resizeImage:custom",value:"custom",icon:"custom"},{name:"resizeImage:25",value:"25",icon:"small"},{name:"resizeImage:50",value:"50",icon:"medium"},{name:"resizeImage:75",value:"75",icon:"large"}]})}init(){const t=this.editor,e=new zge(t);this._registerConverters("imageBlock"),this._registerConverters("imageInline"),t.commands.add("resizeImage",e),t.commands.add("imageResize",e)}afterInit(){this._registerSchema()}_registerSchema(){this.editor.plugins.has("ImageBlockEditing")&&this.editor.model.schema.extend("imageBlock",{allowAttributes:["resizedWidth","resizedHeight"]}),this.editor.plugins.has("ImageInlineEditing")&&this.editor.model.schema.extend("imageInline",{allowAttributes:["resizedWidth","resizedHeight"]})}_registerConverters(t){const e=this.editor,n=e.plugins.get("ImageUtils");e.conversion.for("downcast").add(s=>s.on(`attribute:resizedWidth:${t}`,(r,o,a)=>{if(!a.consumable.consume(o.item,r.name))return;const l=a.writer,u=a.mapper.toViewElement(o.item);o.attributeNewValue!==null?(l.setStyle("width",o.attributeNewValue,u),l.addClass("image_resized",u)):(l.removeStyle("width",u),l.removeClass("image_resized",u))})),e.conversion.for("dataDowncast").attributeToAttribute({model:{name:t,key:"resizedHeight"},view:s=>({key:"style",value:{height:s}})}),e.conversion.for("editingDowncast").add(s=>s.on(`attribute:resizedHeight:${t}`,(r,o,a)=>{if(!a.consumable.consume(o.item,r.name))return;const l=a.writer,u=a.mapper.toViewElement(o.item),h=t==="imageInline"?n.findViewImgElement(u):u;o.attributeNewValue!==null?l.setStyle("height",o.attributeNewValue,h):l.removeStyle("height",h)})),e.conversion.for("upcast").attributeToAttribute({view:{name:t==="imageBlock"?"figure":"img",styles:{width:/.+/}},model:{key:"resizedWidth",value:s=>Op(s)?null:s.getStyle("width")}}),e.conversion.for("upcast").attributeToAttribute({view:{name:t==="imageBlock"?"figure":"img",styles:{height:/.+/}},model:{key:"resizedHeight",value:s=>Op(s)?null:s.getStyle("height")}})}}const v1={small:ve.objectSizeSmall,medium:ve.objectSizeMedium,large:ve.objectSizeLarge,custom:ve.objectSizeCustom,original:ve.objectSizeFull};class jge extends J{constructor(e){super(e);b(this,"_resizeUnit");this._resizeUnit=e.config.get("image.resizeUnit")}static get requires(){return[KL]}static get pluginName(){return"ImageResizeButtons"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,n=e.config.get("image.resizeOptions"),s=e.commands.get("resizeImage");this.bind("isEnabled").to(s);for(const r of n)this._registerImageResizeButton(r);this._registerImageResizeDropdown(n)}_registerImageResizeButton(e){const n=this.editor,{name:s,value:r,icon:o}=e;n.ui.componentFactory.add(s,a=>{const l=new qe(a),u=n.commands.get("resizeImage"),h=this._getOptionLabelValue(e,!0);if(!v1[o])throw new D("imageresizebuttons-missing-icon",n,e);if(l.set({label:h,icon:v1[o],tooltip:h,isToggleable:!0}),l.bind("isEnabled").to(this),n.plugins.has("ImageCustomResizeUI")&&Bd(e)){const f=n.plugins.get("ImageCustomResizeUI");this.listenTo(l,"execute",()=>{f._showForm(this._resizeUnit)})}else{const f=r?r+this._resizeUnit:null;l.bind("isOn").to(u,"value",Wy(f)),this.listenTo(l,"execute",()=>{n.execute("resizeImage",{width:f})})}return l})}_registerImageResizeDropdown(e){const n=this.editor,s=n.t,r=e.find(a=>!a.value),o=a=>{const l=n.commands.get("resizeImage"),u=ti(a,XM),h=u.buttonView,f=s("Resize image");return h.set({tooltip:f,commandValue:r.value,icon:v1.medium,isToggleable:!0,label:this._getOptionLabelValue(r),withText:!0,class:"ck-resize-image-button",ariaLabel:f,ariaLabelledBy:void 0}),h.bind("label").to(l,"value",g=>g&&g.width?g.width:this._getOptionLabelValue(r)),u.bind("isEnabled").to(this),Ll(u,()=>this._getResizeDropdownListItemDefinitions(e,l),{ariaLabel:s("Image resize list"),role:"menu"}),this.listenTo(u,"execute",g=>{"onClick"in g.source?g.source.onClick():(n.execute(g.source.commandName,{width:g.source.commandValue}),n.editing.view.focus())}),u};n.ui.componentFactory.add("resizeImage",o),n.ui.componentFactory.add("imageResize",o)}_getOptionLabelValue(e,n=!1){const s=this.editor.t;return e.label?e.label:n?Bd(e)?s("Custom image size"):e.value?s("Resize image to %0",e.value+this._resizeUnit):s("Resize image to the original size"):Bd(e)?s("Custom"):e.value?e.value+this._resizeUnit:s("Original")}_getResizeDropdownListItemDefinitions(e,n){const{editor:s}=this,r=new Hn,o=e.map(a=>Bd(a)?{...a,valueWithUnits:"custom"}:a.value?{...a,valueWithUnits:`${a.value}${this._resizeUnit}`}:{...a,valueWithUnits:null});for(const a of o){let l=null;if(s.plugins.has("ImageCustomResizeUI")&&Bd(a)){const u=s.plugins.get("ImageCustomResizeUI");l={type:"button",model:new xl({label:this._getOptionLabelValue(a),role:"menuitemradio",withText:!0,icon:null,onClick:()=>{u._showForm(this._resizeUnit)}})};const h=Mne(o,"valueWithUnits");l.model.bind("isOn").to(n,"value",Hge(h))}else l={type:"button",model:new xl({commandName:"resizeImage",commandValue:a.valueWithUnits,label:this._getOptionLabelValue(a),role:"menuitemradio",withText:!0,icon:null})},l.model.bind("isOn").to(n,"value",Wy(a.valueWithUnits));l.model.bind("isEnabled").to(n,"isEnabled"),r.add(l)}return r}}function Bd(i){return i.value==="custom"}function Wy(i){return t=>{const e=t;return i===null&&e===i?!0:e!==null&&e.width===i}}function Hge(i){return t=>!i.some(e=>Wy(e)(t))}const Uge="figure.image.ck-widget > img,figure.image.ck-widget > picture > img,figure.image.ck-widget > a > img,figure.image.ck-widget > a > picture > img,span.image-inline.ck-widget > img,span.image-inline.ck-widget > picture > img",y1="image_resized";class Wge extends J{static get requires(){return[b1,jn]}static get pluginName(){return"ImageResizeHandles"}static get isOfficialPlugin(){return!0}init(){const t=this.editor.commands.get("resizeImage");this.bind("isEnabled").to(t),this._setupResizerCreator()}_setupResizerCreator(){const t=this.editor,e=t.editing.view,n=t.plugins.get("ImageUtils");e.addObserver(hC),this.listenTo(e.document,"imageLoaded",(s,r)=>{if(!r.target.matches(Uge))return;const o=t.editing.view.domConverter,a=o.domToView(r.target),l=n.getImageWidgetFromImageView(a);let u=this.editor.plugins.get(b1).getResizerByViewElement(l);if(u){u.redraw();return}const h=t.editing.mapper,f=h.toModelElement(l);u=t.plugins.get(b1).attachTo({unit:t.config.get("image.resizeUnit"),modelElement:f,viewElement:l,editor:t,getHandleHost(g){return g.querySelector("img")},getResizeHost(){return o.mapViewToDom(h.toViewElement(f))},isCentered(){return f.getAttribute("imageStyle")=="alignCenter"},onCommit(g){e.change(p=>{p.removeClass(y1,l)}),t.execute("resizeImage",{width:g})}}),u.on("updateSize",()=>{l.hasClass(y1)||e.change(p=>{p.addClass(y1,l)});const g=f.name==="imageInline"?a:l;g.getStyle("height")&&e.change(p=>{p.removeStyle("height",g)})}),u.bind("isEnabled").to(this)})}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function YL(i){if(!i)return null;const[,t,e]=i.trim().match(/([.,\d]+)(%|px)$/)||[],n=Number.parseFloat(t);return Number.isNaN(n)?null:{value:n,unit:e}}function ZL(i,t,e){return e==="px"?{value:t.value,unit:"px"}:{value:t.value/i*100,unit:"%"}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function XL(i){const{editing:t}=i,n=i.plugins.get("ImageUtils").getClosestSelectedImageElement(i.model.document.selection);if(!n)return null;const s=t.mapper.toViewElement(n),r=t.view.domConverter.mapViewToDom(s);return{model:n,view:s,dom:r}}function qge(i,t){const e=XL(i);if(!e)return null;const n=YL(e.model.getAttribute("resizedWidth")||null);if(!n)return null;if(n.unit===t)return n;const s=sC(e.dom),r={value:new Ye(e.dom).width};return ZL(s,r,t)}class Gge extends xe{constructor(e,n,s){super(e);b(this,"focusTracker");b(this,"keystrokes");b(this,"unit");b(this,"labeledInput");b(this,"saveButtonView");b(this,"cancelButtonView");b(this,"_focusables");b(this,"_focusCycler");b(this,"_validators");const r=this.locale.t;this.focusTracker=new Gt,this.keystrokes=new tn,this.unit=n,this.labeledInput=this._createLabeledInputView(),this.saveButtonView=this._createButton(r("Save"),ve.check,"ck-button-save"),this.saveButtonView.type="submit",this.cancelButtonView=this._createButton(r("Cancel"),ve.cancel,"ck-button-cancel","cancel"),this._focusables=new Un,this._validators=s,this._focusCycler=new fi({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"form",attributes:{class:["ck","ck-image-custom-resize-form","ck-responsive-form"],tabindex:"-1"},children:[this.labeledInput,this.saveButtonView,this.cancelButtonView]})}render(){super.render(),this.keystrokes.listenTo(this.element),Sa({view:this}),[this.labeledInput,this.saveButtonView,this.cancelButtonView].forEach(e=>{this._focusables.add(e),this.focusTracker.add(e.element)})}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}_createButton(e,n,s,r){const o=new qe(this.locale);return o.set({label:e,icon:n,tooltip:!0}),o.extendTemplate({attributes:{class:s}}),r&&o.delegate("execute").to(this,r),o}_createLabeledInputView(){const e=this.locale.t,n=new bn(this.locale,nL);return n.label=e("Resize image (in %0)",this.unit),n.fieldView.set({step:.1}),n}isValid(){this.resetFormStatus();for(const e of this._validators){const n=e(this);if(n)return this.labeledInput.errorText=n,!1}return!0}resetFormStatus(){this.labeledInput.errorText=null}get rawSize(){const{element:e}=this.labeledInput.fieldView;return e?e.value:null}get parsedSize(){const{rawSize:e}=this;if(e===null)return null;const n=Number.parseFloat(e);return Number.isNaN(n)?null:n}get sizeWithUnits(){const{parsedSize:e,unit:n}=this;return e===null?null:`${e}${n}`}}function Kge(i,t){const e=XL(i);if(!e)return null;const n=sC(e.dom),s=YL(window.getComputedStyle(e.dom).minWidth)||{value:1},r=Math.max(.1,ZL(n,s,t).value);return{unit:t,lower:r,upper:t==="px"?n:100}}class Yge extends J{constructor(){super(...arguments);b(this,"_balloon");b(this,"_form")}static get requires(){return[nr]}static get pluginName(){return"ImageCustomResizeUI"}static get isOfficialPlugin(){return!0}destroy(){super.destroy(),this._form&&this._form.destroy()}_createForm(e){const n=this.editor;this._balloon=this.editor.plugins.get("ContextualBalloon"),this._form=new(Bb(Gge))(n.locale,e,Zge(n)),this._form.render(),this.listenTo(this._form,"submit",()=>{this._form.isValid()&&(n.execute("resizeImage",{width:this._form.sizeWithUnits}),this._hideForm(!0))}),this.listenTo(this._form.labeledInput,"change:errorText",()=>{n.ui.update()}),this.listenTo(this._form,"cancel",()=>{this._hideForm(!0)}),this._form.keystrokes.set("Esc",(s,r)=>{this._hideForm(!0),r()}),Ta({emitter:this._form,activator:()=>this._isVisible,contextElements:()=>[this._balloon.view.element],callback:()=>this._hideForm()})}_showForm(e){if(this._isVisible)return;this._form||this._createForm(e);const n=this.editor,s=this._form.labeledInput;this._form.disableCssTransitions(),this._form.resetFormStatus(),this._isInBalloon||this._balloon.add({view:this._form,position:uC(n)});const r=qge(n,e),o=r?r.value.toFixed(1):"",a=Kge(n,e);s.fieldView.value=s.fieldView.element.value=o,a&&Object.assign(s.fieldView,{min:a.lower.toFixed(1),max:Math.ceil(a.upper).toFixed(1)}),this._form.labeledInput.fieldView.select(),this._form.enableCssTransitions()}_hideForm(e=!1){this._isInBalloon&&(this._form.focusTracker.isFocused&&this._form.saveButtonView.focus(),this._balloon.remove(this._form),e&&this.editor.editing.view.focus())}get _isVisible(){return!!this._balloon&&this._balloon.visibleView===this._form}get _isInBalloon(){return!!this._balloon&&this._balloon.hasView(this._form)}}function Zge(i){const t=i.t;return[e=>{if(e.rawSize.trim()==="")return t("The value must not be empty.");if(e.parsedSize===null)return t("The value should be a plain number.")}]}class Xge extends J{static get requires(){return[KL,Wge,Yge,jge]}static get pluginName(){return"ImageResize"}static get isOfficialPlugin(){return!0}}class Jge extends Ze{constructor(e,n){super(e);b(this,"_defaultStyles");b(this,"_styles");this._defaultStyles={imageBlock:!1,imageInline:!1},this._styles=new Map(n.map(s=>{if(s.isDefault)for(const r of s.modelElements)this._defaultStyles[r]=s.name;return[s.name,s]}))}refresh(){const s=this.editor.plugins.get("ImageUtils").getClosestSelectedImageElement(this.editor.model.document.selection);this.isEnabled=!!s,this.isEnabled?s.hasAttribute("imageStyle")?this.value=s.getAttribute("imageStyle"):this.value=this._defaultStyles[s.name]:this.value=!1}execute(e={}){const n=this.editor,s=n.model,r=n.plugins.get("ImageUtils");s.change(o=>{const a=e.value,{setImageSizes:l=!0}=e;let u=r.getClosestSelectedImageElement(s.document.selection);a&&this.shouldConvertImageType(a,u)&&(this.editor.execute(r.isBlockImage(u)?"imageTypeInline":"imageTypeBlock",{setImageSizes:l}),u=r.getClosestSelectedImageElement(s.document.selection)),!a||this._styles.get(a).isDefault?o.removeAttribute("imageStyle",u):o.setAttribute("imageStyle",a,u),l&&r.setImageNaturalSizeAttributes(u)})}shouldConvertImageType(e,n){return!this._styles.get(e).modelElements.includes(n.name)}}const Dg={get inline(){return{name:"inline",title:"In line",icon:ve.objectInline,modelElements:["imageInline"],isDefault:!0}},get alignLeft(){return{name:"alignLeft",title:"Left aligned image",icon:ve.objectLeft,modelElements:["imageBlock","imageInline"],className:"image-style-align-left"}},get alignBlockLeft(){return{name:"alignBlockLeft",title:"Left aligned image",icon:ve.objectBlockLeft,modelElements:["imageBlock"],className:"image-style-block-align-left"}},get alignCenter(){return{name:"alignCenter",title:"Centered image",icon:ve.objectCenter,modelElements:["imageBlock"],className:"image-style-align-center"}},get alignRight(){return{name:"alignRight",title:"Right aligned image",icon:ve.objectRight,modelElements:["imageBlock","imageInline"],className:"image-style-align-right"}},get alignBlockRight(){return{name:"alignBlockRight",title:"Right aligned image",icon:ve.objectBlockRight,modelElements:["imageBlock"],className:"image-style-block-align-right"}},get block(){return{name:"block",title:"Centered image",icon:ve.objectCenter,modelElements:["imageBlock"],isDefault:!0}},get side(){return{name:"side",title:"Side image",icon:ve.objectRight,modelElements:["imageBlock"],className:"image-style-side"}}},JL={full:ve.objectFullWidth,left:ve.objectBlockLeft,right:ve.objectBlockRight,center:ve.objectCenter,inlineLeft:ve.objectLeft,inlineRight:ve.objectRight,inline:ve.objectInline},QL=[{name:"imageStyle:wrapText",title:"Wrap text",defaultItem:"imageStyle:alignLeft",items:["imageStyle:alignLeft","imageStyle:alignRight"]},{name:"imageStyle:breakText",title:"Break text",defaultItem:"imageStyle:block",items:["imageStyle:alignBlockLeft","imageStyle:block","imageStyle:alignBlockRight"]}];function Qge(i){return(i.configuredStyles.options||[]).map(n=>npe(n)).filter(n=>ipe(n,i))}function epe(i,t){return i&&t?{options:["inline","alignLeft","alignRight","alignCenter","alignBlockLeft","alignBlockRight","block","side"]}:i?{options:["block","side"]}:t?{options:["inline","alignLeft","alignRight"]}:{}}function tpe(i){return i.has("ImageBlockEditing")&&i.has("ImageInlineEditing")?[...QL]:[]}function npe(i){return typeof i=="string"?Dg[i]?i={...Dg[i]}:i={name:i}:i=spe(Dg[i.name],i),typeof i.icon=="string"&&(i.icon=JL[i.icon]||i.icon),i}function ipe(i,{isBlockPluginLoaded:t,isInlinePluginLoaded:e}){const{modelElements:n,name:s}=i;if(!n||!n.length||!s)return eV({style:i}),!1;{const r=[t?"imageBlock":null,e?"imageInline":null];if(!n.some(o=>r.includes(o)))return dt("image-style-missing-dependency",{style:i,missingPlugins:n.map(o=>o==="imageBlock"?"ImageBlockEditing":"ImageInlineEditing")}),!1}return!0}function spe(i,t){const e={...t};for(const n in i)Object.prototype.hasOwnProperty.call(t,n)||(e[n]=i[n]);return e}function eV(i){dt("image-style-configuration-definition-invalid",i)}var qy={normalizeStyles:Qge,getDefaultStylesConfiguration:epe,getDefaultDropdownDefinitions:tpe,warnInvalidStyle:eV,DEFAULT_OPTIONS:Dg,DEFAULT_ICONS:JL,DEFAULT_DROPDOWN_DEFINITIONS:QL};function rpe(i){return(t,e,n)=>{if(!n.consumable.consume(e.item,t.name))return;const s=DI(e.attributeNewValue,i),r=DI(e.attributeOldValue,i),o=n.mapper.toViewElement(e.item),a=n.writer;r&&a.removeClass(r.className,o),s&&a.addClass(s.className,o)}}function ope(i){const t={imageInline:i.filter(e=>!e.isDefault&&e.modelElements.includes("imageInline")),imageBlock:i.filter(e=>!e.isDefault&&e.modelElements.includes("imageBlock"))};return(e,n,s)=>{if(!n.modelRange)return;const r=n.viewItem,o=ln(n.modelRange.getItems());if(o&&s.schema.checkAttribute(o,"imageStyle"))for(const a of t[o.name])s.consumable.consume(r,{classes:a.className})&&s.writer.setAttribute("imageStyle",a.name,o)}}function DI(i,t){for(const e of t)if(e.name===i)return e}class tV extends J{constructor(){super(...arguments);b(this,"normalizedStyles")}static get pluginName(){return"ImageStyleEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[jn]}init(){const{normalizeStyles:e,getDefaultStylesConfiguration:n}=qy,s=this.editor,r=s.plugins.has("ImageBlockEditing"),o=s.plugins.has("ImageInlineEditing");s.config.define("image.styles",n(r,o)),this.normalizedStyles=e({configuredStyles:s.config.get("image.styles"),isBlockPluginLoaded:r,isInlinePluginLoaded:o}),this._setupConversion(r,o),this._setupPostFixer(),s.commands.add("imageStyle",new Jge(s,this.normalizedStyles))}_setupConversion(e,n){const s=this.editor,r=s.model.schema,o=rpe(this.normalizedStyles),a=ope(this.normalizedStyles);s.editing.downcastDispatcher.on("attribute:imageStyle",o),s.data.downcastDispatcher.on("attribute:imageStyle",o),e&&(r.extend("imageBlock",{allowAttributes:"imageStyle"}),s.data.upcastDispatcher.on("element:figure",a,{priority:"low"})),n&&(r.extend("imageInline",{allowAttributes:"imageStyle"}),s.data.upcastDispatcher.on("element:img",a,{priority:"low"}))}_setupPostFixer(){const e=this.editor,n=e.model.document,s=e.plugins.get(jn),r=new Map(this.normalizedStyles.map(o=>[o.name,o]));n.registerPostFixer(o=>{let a=!1;for(const l of n.differ.getChanges())if(l.type=="insert"||l.type=="attribute"&&l.attributeKey=="imageStyle"){let u=l.type=="insert"?l.position.nodeAfter:l.range.start.nodeAfter;if(u&&u.is("element","paragraph")&&u.childCount>0&&(u=u.getChild(0)),!s.isImage(u))continue;const h=u.getAttribute("imageStyle");if(!h)continue;const f=r.get(h);(!f||!f.modelElements.includes(u.name))&&(o.removeAttribute("imageStyle",u),a=!0)}return a})}}class ape extends J{static get requires(){return[tV]}static get pluginName(){return"ImageStyleUI"}static get isOfficialPlugin(){return!0}get localizedDefaultStylesTitles(){const t=this.editor.t;return{"Wrap text":t("Wrap text"),"Break text":t("Break text"),"In line":t("In line"),"Full size image":t("Full size image"),"Side image":t("Side image"),"Left aligned image":t("Left aligned image"),"Centered image":t("Centered image"),"Right aligned image":t("Right aligned image")}}init(){const t=this.editor.plugins,e=this.editor.config.get("image.toolbar")||[],n=t.get("ImageStyleEditing"),s=BI(n.normalizedStyles,this.localizedDefaultStylesTitles);for(const o of s)this._createButton(o);const r=BI([...e.filter(Ot),...qy.getDefaultDropdownDefinitions(t)],this.localizedDefaultStylesTitles);for(const o of r)this._createDropdown(o,s)}_createDropdown(t,e){const n=this.editor.ui.componentFactory;n.add(t.name,s=>{let r;const{defaultItem:o,items:a,title:l}=t,u=a.filter(p=>e.find(({name:y})=>FI(y)===p)).map(p=>{const y=n.create(p);return p===o&&(r=y),y});a.length!==u.length&&qy.warnInvalidStyle({dropdown:t});const h=ti(s,bf),f=h.buttonView,g=f.arrowView;return zb(h,u,{enableActiveItemFocusOnDropdownOpen:!0}),f.set({label:$I(l,r.label),class:null,tooltip:!0}),g.unbind("label"),g.set({label:l}),f.bind("icon").toMany(u,"isOn",(...p)=>{const y=p.findIndex(ra);return y<0?r.icon:u[y].icon}),f.bind("label").toMany(u,"isOn",(...p)=>{const y=p.findIndex(ra);return $I(l,y<0?r.label:u[y].label)}),f.bind("isOn").toMany(u,"isOn",(...p)=>p.some(ra)),f.bind("class").toMany(u,"isOn",(...p)=>p.some(ra)?"ck-splitbutton_flatten":void 0),f.on("execute",()=>{u.some(({isOn:p})=>p)?h.isOpen=!h.isOpen:r.fire("execute")}),h.bind("isEnabled").toMany(u,"isEnabled",(...p)=>p.some(ra)),this.listenTo(h,"execute",()=>{this.editor.editing.view.focus()}),h})}_createButton(t){const e=t.name;this.editor.ui.componentFactory.add(FI(e),n=>{const s=this.editor.commands.get("imageStyle"),r=new qe(n);return r.set({label:t.title,icon:t.icon,tooltip:!0,isToggleable:!0}),r.bind("isEnabled").to(s,"isEnabled"),r.bind("isOn").to(s,"value",o=>o===e),r.on("execute",this._executeCommand.bind(this,e)),r})}_executeCommand(t){this.editor.execute("imageStyle",{value:t}),this.editor.editing.view.focus()}}function BI(i,t){for(const e of i)t[e.title]&&(e.title=t[e.title]);return i}function FI(i){return`imageStyle:${i}`}function $I(i,t){return(i?i+": ":"")+t}class lpe extends J{static get requires(){return[tV,ape]}static get pluginName(){return"ImageStyle"}static get isOfficialPlugin(){return!0}}class cpe extends J{static get requires(){return[Pp,jn]}static get pluginName(){return"ImageToolbar"}static get isOfficialPlugin(){return!0}afterInit(){const t=this.editor,e=t.t,n=t.plugins.get(Pp),s=t.plugins.get("ImageUtils");n.register("image",{ariaLabel:e("Image toolbar"),items:upe(t.config.get("image.toolbar")||[]),getRelatedElement:r=>s.getClosestSelectedImageWidget(r)})}}function upe(i){return i.map(t=>Ot(t)?t.name:t)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class dpe extends J{static get pluginName(){return"IndentEditing"}static get isOfficialPlugin(){return!0}init(){const t=this.editor;t.commands.add("indent",new mP(t)),t.commands.add("outdent",new mP(t))}}class hpe extends J{static get pluginName(){return"IndentUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.locale,n=t.t,s=e.uiLanguageDirection=="ltr"?ve.indent:ve.outdent,r=e.uiLanguageDirection=="ltr"?ve.outdent:ve.indent;this._defineButton("indent",n("Increase indent"),s),this._defineButton("outdent",n("Decrease indent"),r)}_defineButton(t,e,n){const s=this.editor;s.ui.componentFactory.add(t,()=>{const r=this._createButton(qe,t,e,n);return r.set({tooltip:!0}),r}),s.ui.componentFactory.add("menuBar:"+t,()=>this._createButton(Ln,t,e,n))}_createButton(t,e,n,s){const r=this.editor,o=r.commands.get(e),a=new t(r.locale);return a.set({label:n,icon:s}),a.bind("isEnabled").to(o,"isEnabled"),this.listenTo(a,"execute",()=>{r.execute(e),r.editing.view.focus()}),a}}class fpe extends J{static get pluginName(){return"Indent"}static get isOfficialPlugin(){return!0}static get requires(){return[dpe,hpe]}}class ug extends Ze{constructor(e,n){super(e);b(this,"_indentBehavior");this._indentBehavior=n}refresh(){const n=this.editor.model,s=ln(n.document.selection.getSelectedBlocks());if(!s||!this._isIndentationChangeAllowed(s)){this.isEnabled=!1;return}this.isEnabled=this._indentBehavior.checkEnabled(s.getAttribute("blockIndent"))}execute(){const e=this.editor.model,n=this._getBlocksToChange();e.change(s=>{for(const r of n){const o=r.getAttribute("blockIndent"),a=this._indentBehavior.getNextIndent(o);a?s.setAttribute("blockIndent",a,r):s.removeAttribute("blockIndent",r)}})}_getBlocksToChange(){const n=this.editor.model.document.selection;return Array.from(n.getSelectedBlocks()).filter(r=>this._isIndentationChangeAllowed(r))}_isIndentationChangeAllowed(e){const n=this.editor;return n.model.schema.checkAttribute(e,"blockIndent")?!n.plugins.has("ListUtils")||!this._indentBehavior.isForward?!0:!n.plugins.get("ListUtils").isListItemBlock(e):!1}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class zI{constructor(t){b(this,"isForward");b(this,"offset");b(this,"unit");this.isForward=t.direction==="forward",this.offset=t.offset,this.unit=t.unit}checkEnabled(t){const e=parseFloat(t||"0");return this.isForward||e>0}getNextIndent(t){const e=parseFloat(t||"0");if(!(!t||t.endsWith(this.unit)))return this.isForward?this.offset+this.unit:void 0;const s=this.isForward?this.offset:-this.offset,r=e+s;return r>0?r+this.unit:void 0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class jI{constructor(t){b(this,"isForward");b(this,"classes");this.isForward=t.direction==="forward",this.classes=t.classes}checkEnabled(t){const e=this.classes.indexOf(t);return this.isForward?e<this.classes.length-1:e>=0}getNextIndent(t){const e=this.classes.indexOf(t),n=this.isForward?1:-1;return this.classes[e+n]}}const mpe=["paragraph","heading1","heading2","heading3","heading4","heading5","heading6"];class gpe extends J{constructor(t){super(t),t.config.define("indentBlock",{offset:40,unit:"px"})}static get pluginName(){return"IndentBlock"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.config.get("indentBlock");e.classes&&e.classes.length?(this._setupConversionUsingClasses(e.classes),t.commands.add("indentBlock",new ug(t,new jI({direction:"forward",classes:e.classes}))),t.commands.add("outdentBlock",new ug(t,new jI({direction:"backward",classes:e.classes})))):(t.data.addStyleProcessorRules(ole),this._setupConversionUsingOffset(),t.commands.add("indentBlock",new ug(t,new zI({direction:"forward",offset:e.offset,unit:e.unit}))),t.commands.add("outdentBlock",new ug(t,new zI({direction:"backward",offset:e.offset,unit:e.unit}))))}afterInit(){const t=this.editor,e=t.model.schema,n=t.commands.get("indent"),s=t.commands.get("outdent"),r=t.config.get("heading.options");(r&&r.map(l=>l.model)||mpe).forEach(l=>{e.isRegistered(l)&&e.extend(l,{allowAttributes:"blockIndent"})}),e.setAttributeProperties("blockIndent",{isFormatting:!0}),n.registerChildCommand(t.commands.get("indentBlock")),s.registerChildCommand(t.commands.get("outdentBlock"))}_setupConversionUsingOffset(){const t=this.editor.conversion,n=this.editor.locale.contentLanguageDirection==="rtl"?"margin-right":"margin-left";t.for("upcast").attributeToAttribute({view:{styles:{[n]:/[\s\S]+/}},model:{key:"blockIndent",value:s=>{if(!s.is("element","li"))return s.getStyle(n)}}}),t.for("downcast").attributeToAttribute({model:"blockIndent",view:s=>({key:"style",value:{[n]:s}})})}_setupConversionUsingClasses(t){const e={model:{key:"blockIndent",values:[]},view:{}};for(const n of t)e.model.values.push(n),e.view[n]={key:"class",value:[n]};this.editor.conversion.attributeToAttribute(e)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class ppe{constructor(){b(this,"_definitions",new Set)}get length(){return this._definitions.size}add(t){Array.isArray(t)?t.forEach(e=>this._definitions.add(e)):this._definitions.add(t)}getDispatcher(){return t=>{t.on("attribute:linkHref",(e,n,s)=>{if(!s.consumable.test(n.item,"attribute:linkHref")||!(n.item.is("selection")||s.schema.isInline(n.item)))return;const r=s.writer,o=r.document.selection;for(const a of this._definitions){const l=r.createAttributeElement("a",a.attributes,{priority:5});a.classes&&r.addClass(a.classes,l);for(const u in a.styles)r.setStyle(u,a.styles[u],l);r.setCustomProperty("link",!0,l),a.callback(n.attributeNewValue)?n.item.is("selection")?r.wrap(o.getFirstRange(),l):r.wrap(s.mapper.toViewRange(n.range),l):r.unwrap(s.mapper.toViewRange(n.range),l)}},{priority:"high"})}}getDispatcherForLinkedImage(){return t=>{t.on("attribute:linkHref:imageBlock",(e,n,{writer:s,mapper:r})=>{const o=r.toViewElement(n.item),a=Array.from(o.getChildren()).find(l=>l.is("element","a"));if(a)for(const l of this._definitions){const u=er(l.attributes);if(l.callback(n.attributeNewValue)){for(const[h,f]of u)h==="class"?s.addClass(f,a):s.setAttribute(h,f,a);l.classes&&s.addClass(l.classes,a);for(const h in l.styles)s.setStyle(h,l.styles[h],a)}else{for(const[h,f]of u)h==="class"?s.removeClass(f,a):s.removeAttribute(h,a);l.classes&&s.removeClass(l.classes,a);for(const h in l.styles)s.removeStyle(h,a)}}})}}}const bpe=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,wpe="^(?:(?:<protocols>):|[^a-z]|[a-z+.-]+(?:[^a-z+.:-]|$))",vpe=/^[\S]+@((?![-_])(?:[-\w\u00a1-\uffff]{0,63}[^-_]\.))+(?:[a-z\u00a1-\uffff]{2,})$/i,ype=/^((\w+:(\/{2,})?)|(\W))/i,_pe=["https?","ftps?","mailto"],Yd="Ctrl+K";function Epe(i){return i.is("attributeElement")&&!!i.getCustomProperty("link")}function HI(i,{writer:t}){const e=t.createAttributeElement("a",{href:i},{priority:5});return t.setCustomProperty("link",!0,e),e}function nV(i,t=_pe){const e=String(i),n=t.join("|"),s=new RegExp(`${wpe.replace("<protocols>",n)}`,"i");return Cpe(e,s)?e:"#"}function Cpe(i,t){return!!i.replace(bpe,"").match(t)}function xpe(i,t){const e={"Open in a new tab":i("Open in a new tab"),Downloadable:i("Downloadable")};return t.forEach(n=>("label"in n&&e[n.label]&&(n.label=e[n.label]),n)),t}function kpe(i){const t=[];if(i)for(const[e,n]of Object.entries(i)){const s=Object.assign({},n,{id:`link${JQ(e)}`});t.push(s)}return t}function Gy(i,t){return i?t.checkAttribute(i.name,"linkHref"):!1}function Tpe(i){return vpe.test(i)}function fC(i,t){const e=Tpe(i)?"mailto:":t,n=!!e&&!iV(i);return i&&n?e+i:i}function iV(i){return ype.test(i)}function sV(i){window.open(i,"_blank","noopener")}function rV(i){const t=i.plugins.has("BookmarkEditing")?i.plugins.get("BookmarkEditing"):null;function e(s){return!!s&&s.startsWith("#")&&!!t&&!!t.getElementForBookmarkId(s.slice(1))}function n(s){const r=s.slice(1),o=t.getElementForBookmarkId(r);i.model.change(a=>{a.setSelection(o,"on")}),i.editing.view.scrollToTheSelection({alignToTop:!0,forceScroll:!0})}return{isScrollableToTarget:e,scrollToTarget:n}}class Spe extends Ze{constructor(){super(...arguments);b(this,"manualDecorators",new Hn);b(this,"automaticDecorators",new ppe)}restoreManualDecoratorStates(){for(const e of this.manualDecorators)e.value=this._getDecoratorStateFromModel(e.id)}refresh(){const e=this.editor.model,n=e.document.selection,s=n.getSelectedElement()||ln(n.getSelectedBlocks());Gy(s,e.schema)?(this.value=s.getAttribute("linkHref"),this.isEnabled=e.schema.checkAttribute(s,"linkHref")):(this.value=n.getAttribute("linkHref"),this.isEnabled=e.schema.checkAttributeInSelection(n,"linkHref"));for(const r of this.manualDecorators)r.value=this._getDecoratorStateFromModel(r.id)}execute(e,n={}){const s=this.editor.model,r=s.document.selection,o=[],a=[];for(const l in n)n[l]?o.push(l):a.push(l);s.change(l=>{if(r.isCollapsed){const u=r.getFirstPosition();if(r.hasAttribute("linkHref")){const h=UI(r);let f=Hb(u,"linkHref",r.getAttribute("linkHref"),s);r.getAttribute("linkHref")===h&&(f=this._updateLinkContent(s,l,f,e)),l.setAttribute("linkHref",e,f),o.forEach(g=>{l.setAttribute(g,!0,f)}),a.forEach(g=>{l.removeAttribute(g,f)}),l.setSelection(l.createPositionAfter(f.end.nodeBefore))}else if(e!==""){const h=er(r.getAttributes());h.set("linkHref",e),o.forEach(g=>{h.set(g,!0)});const{end:f}=s.insertContent(l.createText(e,h),u);l.setSelection(f)}["linkHref",...o,...a].forEach(h=>{l.removeSelectionAttribute(h)})}else{const u=s.schema.getValidRanges(r.getRanges(),"linkHref"),h=[];for(const g of r.getSelectedBlocks())s.schema.checkAttribute(g,"linkHref")&&h.push(l.createRangeOn(g));const f=h.slice();for(const g of u)this._isRangeToUpdate(g,h)&&f.push(g);for(const g of f){let p=g;if(f.length===1){const y=UI(r);r.getAttribute("linkHref")===y&&(p=this._updateLinkContent(s,l,g,e),l.setSelection(l.createSelection(p)))}l.setAttribute("linkHref",e,p),o.forEach(y=>{l.setAttribute(y,!0,p)}),a.forEach(y=>{l.removeAttribute(y,p)})}}})}_getDecoratorStateFromModel(e){const n=this.editor.model,s=n.document.selection,r=s.getSelectedElement();return Gy(r,n.schema)?r.getAttribute(e):s.getAttribute(e)}_isRangeToUpdate(e,n){for(const s of n)if(s.containsRange(e))return!1;return!0}_updateLinkContent(e,n,s,r){const o=n.createText(r,{linkHref:r});return e.insertContent(o,s)}}function UI(i){if(i.isCollapsed){const t=i.getFirstPosition();return t.textNode&&t.textNode.data}else{const t=Array.from(i.getFirstRange().getItems());if(t.length>1)return null;const e=t[0];return e.is("$text")||e.is("$textProxy")?e.data:null}}class Ape extends Ze{refresh(){const t=this.editor.model,e=t.document.selection,n=e.getSelectedElement();Gy(n,t.schema)?this.isEnabled=t.schema.checkAttribute(n,"linkHref"):this.isEnabled=t.schema.checkAttributeInSelection(e,"linkHref")}execute(){const t=this.editor,e=this.editor.model,n=e.document.selection,s=t.commands.get("link");e.change(r=>{const o=n.isCollapsed?[Hb(n.getFirstPosition(),"linkHref",n.getAttribute("linkHref"),e)]:e.schema.getValidRanges(n.getRanges(),"linkHref");for(const a of o)if(r.removeAttribute("linkHref",a),s)for(const l of s.manualDecorators)r.removeAttribute(l.id,a)})}}class Ppe extends yt(){constructor({id:e,label:n,attributes:s,classes:r,styles:o,defaultValue:a}){super();b(this,"id");b(this,"defaultValue");b(this,"label");b(this,"attributes");b(this,"classes");b(this,"styles");this.id=e,this.set("value",void 0),this.defaultValue=a,this.label=n,this.attributes=s,this.classes=r,this.styles=o}_createPattern(){return{attributes:this.attributes,classes:this.classes,styles:this.styles}}}const Ipe="ck-link_selected",WI="automatic",Rpe="manual",Ope=/^(https?:)?\/\//;class Gb extends J{static get pluginName(){return"LinkEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[nI,pL,Ts]}constructor(t){super(t),t.config.define("link",{allowCreatingEmptyLinks:!1,addTargetToExternalLinks:!1})}init(){const t=this.editor,e=this.editor.config.get("link.allowedProtocols");t.model.schema.extend("$text",{allowAttributes:"linkHref"}),t.conversion.for("dataDowncast").attributeToElement({model:"linkHref",view:HI}),t.conversion.for("editingDowncast").attributeToElement({model:"linkHref",view:(r,o)=>HI(nV(r,e),o)}),t.conversion.for("upcast").elementToAttribute({view:{name:"a",attributes:{href:!0}},model:{key:"linkHref",value:r=>r.getAttribute("href")}}),t.commands.add("link",new Spe(t)),t.commands.add("unlink",new Ape(t));const n=xpe(t.t,kpe(t.config.get("link.decorators")));this._enableAutomaticDecorators(n.filter(r=>r.mode===WI)),this._enableManualDecorators(n.filter(r=>r.mode===Rpe)),t.plugins.get(nI).registerAttribute("linkHref"),_he(t,"linkHref","a",Ipe),this._enableLinkOpen(),this._enableSelectionAttributesFixer(),this._enableClipboardIntegration()}_enableAutomaticDecorators(t){const e=this.editor,s=e.commands.get("link").automaticDecorators;e.config.get("link.addTargetToExternalLinks")&&s.add({id:"linkIsExternal",mode:WI,callback:r=>!!r&&Ope.test(r),attributes:{target:"_blank",rel:"noopener noreferrer"}}),s.add(t),s.length&&e.conversion.for("downcast").add(s.getDispatcher())}_enableManualDecorators(t){if(!t.length)return;const e=this.editor,s=e.commands.get("link").manualDecorators;t.forEach(r=>{e.model.schema.extend("$text",{allowAttributes:r.id});const o=new Ppe(r);s.add(o),e.conversion.for("downcast").attributeToElement({model:o.id,view:(a,{writer:l,schema:u},{item:h})=>{if((h.is("selection")||u.isInline(h))&&a){const f=l.createAttributeElement("a",o.attributes,{priority:5});o.classes&&l.addClass(o.classes,f);for(const g in o.styles)l.setStyle(g,o.styles[g],f);return l.setCustomProperty("link",!0,f),f}}}),e.conversion.for("upcast").elementToAttribute({view:{name:"a",...o._createPattern()},model:{key:o.id}})})}_enableLinkOpen(){const t=this.editor,n=t.editing.view.document,s=rV(t);function r(o){s.isScrollableToTarget(o)?s.scrollToTarget(o):sV(o)}this.listenTo(n,"click",(o,a)=>{if(!(Fe.isMac?a.domEvent.metaKey:a.domEvent.ctrlKey))return;let u=a.domTarget;if(u.tagName.toLowerCase()!="a"&&(u=u.closest("a")),!u)return;const h=u.getAttribute("href");h&&(o.stop(),a.preventDefault(),r(h))},{context:"$capture"}),this.listenTo(n,"keydown",(o,a)=>{const u=t.commands.get("link").value;u&&a.keyCode===nt.enter&&a.altKey&&(o.stop(),r(u))})}_enableSelectionAttributesFixer(){const e=this.editor.model,n=e.document.selection;this.listenTo(n,"change:attribute",(s,{attributeKeys:r})=>{!r.includes("linkHref")||n.hasAttribute("linkHref")||e.change(o=>{Npe(o,Mpe(e.schema))})})}_enableClipboardIntegration(){const t=this.editor,e=t.model,n=this.editor.config.get("link.defaultProtocol");n&&this.listenTo(t.plugins.get("ClipboardPipeline"),"contentInsertion",(s,r)=>{e.change(o=>{const a=o.createRangeIn(r.content);for(const l of a.getItems())if(l.hasAttribute("linkHref")){const u=fC(l.getAttribute("linkHref"),n);o.setAttribute("linkHref",u,l)}})})}}function Npe(i,t){i.removeSelectionAttribute("linkHref");for(const e of t)i.removeSelectionAttribute(e)}function Mpe(i){return i.getDefinition("$text").allowAttributes.filter(e=>e.startsWith("link"))}class Lpe extends xe{constructor(e,n,s){super(e);b(this,"focusTracker",new Gt);b(this,"keystrokes",new tn);b(this,"urlInputView");b(this,"saveButtonView");b(this,"cancelButtonView");b(this,"_manualDecoratorSwitches");b(this,"children");b(this,"_validators");b(this,"_focusables",new Un);b(this,"_focusCycler");const r=e.t;this._validators=s,this.urlInputView=this._createUrlInput(),this.saveButtonView=this._createButton(r("Save"),ve.check,"ck-button-save"),this.saveButtonView.type="submit",this.cancelButtonView=this._createButton(r("Cancel"),ve.cancel,"ck-button-cancel","cancel"),this._manualDecoratorSwitches=this._createManualDecoratorSwitches(n),this.children=this._createFormChildren(n.manualDecorators),this._focusCycler=new fi({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}});const o=["ck","ck-link-form","ck-responsive-form"];n.manualDecorators.length&&o.push("ck-link-form_layout-vertical","ck-vertical-form"),this.setTemplate({tag:"form",attributes:{class:o,tabindex:"-1"},children:this.children})}getDecoratorSwitchesState(){return Array.from(this._manualDecoratorSwitches).reduce((e,n)=>(e[n.name]=n.isOn,e),{})}render(){super.render(),Sa({view:this}),[this.urlInputView,...this._manualDecoratorSwitches,this.saveButtonView,this.cancelButtonView].forEach(n=>{this._focusables.add(n),this.focusTracker.add(n.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}isValid(){this.resetFormStatus();for(const e of this._validators){const n=e(this);if(n)return this.urlInputView.errorText=n,!1}return!0}resetFormStatus(){this.urlInputView.errorText=null}_createUrlInput(){const e=this.locale.t,n=new bn(this.locale,vs);return n.fieldView.inputMode="url",n.label=e("Link URL"),n}_createButton(e,n,s,r){const o=new qe(this.locale);return o.set({label:e,icon:n,tooltip:!0}),o.extendTemplate({attributes:{class:s}}),r&&o.delegate("execute").to(this,r),o}_createManualDecoratorSwitches(e){const n=this.createCollection();for(const s of e.manualDecorators){const r=new pf(this.locale);r.set({name:s.id,label:s.label,withText:!0}),r.bind("isOn").toMany([s,e],"value",(o,a)=>a===void 0&&o===void 0?!!s.defaultValue:!!o),r.on("execute",()=>{s.set("value",!r.isOn)}),n.add(r)}return n}_createFormChildren(e){const n=this.createCollection();if(n.add(this.urlInputView),e.length){const s=new xe;s.setTemplate({tag:"ul",children:this._manualDecoratorSwitches.map(r=>({tag:"li",children:[r],attributes:{class:["ck","ck-list__item"]}})),attributes:{class:["ck","ck-reset","ck-list"]}}),n.add(s)}return n.add(this.saveButtonView),n.add(this.cancelButtonView),n}get url(){const{element:e}=this.urlInputView.fieldView;return e?e.value.trim():null}}var Vpe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.077 15 .991-1.416a.75.75 0 1 1 1.229.86l-1.148 1.64a.748.748 0 0 1-.217.206 5.251 5.251 0 0 1-8.503-5.955.741.741 0 0 1 .12-.274l1.147-1.639a.75.75 0 1 1 1.228.86L4.933 10.7l.006.003a3.75 3.75 0 0 0 6.132 4.294l.006.004zm5.494-5.335a.748.748 0 0 1-.12.274l-1.147 1.639a.75.75 0 1 1-1.228-.86l.86-1.23a3.75 3.75 0 0 0-6.144-4.301l-.86 1.229a.75.75 0 0 1-1.229-.86l1.148-1.64a.748.748 0 0 1 .217-.206 5.251 5.251 0 0 1 8.503 5.955zm-4.563-2.532a.75.75 0 0 1 .184 1.045l-3.155 4.505a.75.75 0 1 1-1.229-.86l3.155-4.506a.75.75 0 0 1 1.045-.184zm4.919 10.562-1.414 1.414a.75.75 0 1 1-1.06-1.06l1.414-1.415-1.415-1.414a.75.75 0 0 1 1.061-1.06l1.414 1.414 1.414-1.415a.75.75 0 0 1 1.061 1.061l-1.414 1.414 1.414 1.415a.75.75 0 0 1-1.06 1.06l-1.415-1.414z"/></svg>';class Dpe extends xe{constructor(e,n={},s){super(e);b(this,"focusTracker",new Gt);b(this,"keystrokes",new tn);b(this,"previewButtonView");b(this,"unlinkButtonView");b(this,"editButtonView");b(this,"_focusables",new Un);b(this,"_focusCycler");b(this,"_linkConfig");b(this,"_options");const r=e.t;this._options=s,this.previewButtonView=this._createPreviewButton(),this.unlinkButtonView=this._createButton(r("Unlink"),Vpe,"unlink"),this.editButtonView=this._createButton(r("Edit link"),ve.pencil,"edit"),this.set("href",void 0),this._linkConfig=n,this._focusCycler=new fi({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-link-actions","ck-responsive-form"],tabindex:"-1"},children:[this.previewButtonView,this.editButtonView,this.unlinkButtonView]})}render(){super.render(),[this.previewButtonView,this.editButtonView,this.unlinkButtonView].forEach(n=>{this._focusables.add(n),this.focusTracker.add(n.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}_createButton(e,n,s){const r=new qe(this.locale);return r.set({label:e,icon:n,tooltip:!0}),r.delegate("execute").to(this,s),r}_createPreviewButton(){const e=new qe(this.locale),n=this.bindTemplate,s=this.t;return e.set({withText:!0}),e.extendTemplate({attributes:{class:["ck","ck-link-actions__preview"],href:n.to("href",r=>r&&nV(r,this._linkConfig.allowedProtocols)),target:"_blank",rel:"noopener noreferrer"},on:{click:n.to(r=>{this._options&&this._options.isScrollableToTarget(this.href)?(r.preventDefault(),this._options.scrollToTarget(this.href)):sV(this.href)})}}),e.bind("tooltip").to(this,"href",r=>this._options&&this._options.isScrollableToTarget(r)?s("Scroll to target"):s("Open link in new tab")),e.bind("label").to(this,"href",r=>r||s("This link has no URL")),e.bind("isEnabled").to(this,"href",r=>!!r),e.template.tag="a",e}}var oV='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.077 15 .991-1.416a.75.75 0 1 1 1.229.86l-1.148 1.64a.748.748 0 0 1-.217.206 5.251 5.251 0 0 1-8.503-5.955.741.741 0 0 1 .12-.274l1.147-1.639a.75.75 0 1 1 1.228.86L4.933 10.7l.006.003a3.75 3.75 0 0 0 6.132 4.294l.006.004zm5.494-5.335a.748.748 0 0 1-.12.274l-1.147 1.639a.75.75 0 1 1-1.228-.86l.86-1.23a3.75 3.75 0 0 0-6.144-4.301l-.86 1.229a.75.75 0 0 1-1.229-.86l1.148-1.64a.748.748 0 0 1 .217-.206 5.251 5.251 0 0 1 8.503 5.955zm-4.563-2.532a.75.75 0 0 1 .184 1.045l-3.155 4.505a.75.75 0 1 1-1.229-.86l3.155-4.506a.75.75 0 0 1 1.045-.184z"/></svg>';const gr="link-ui";class aV extends J{constructor(){super(...arguments);b(this,"actionsView",null);b(this,"formView",null);b(this,"_balloon")}static get requires(){return[nr]}static get pluginName(){return"LinkUI"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,n=this.editor.t;e.editing.view.addObserver(Oae),this._balloon=e.plugins.get(nr),this._createToolbarLinkButton(),this._enableBalloonActivators(),e.conversion.for("editingDowncast").markerToHighlight({model:gr,view:{classes:["ck-fake-link-selection"]}}),e.conversion.for("editingDowncast").markerToElement({model:gr,view:(s,{writer:r})=>{if(!s.markerRange.isCollapsed)return null;const o=r.createUIElement("span");return r.addClass(["ck-fake-link-selection","ck-fake-link-selection_collapsed"],o),o}}),e.accessibility.addKeystrokeInfos({keystrokes:[{label:n("Create link"),keystroke:Yd},{label:n("Move out of a link"),keystroke:[["arrowleft","arrowleft"],["arrowright","arrowright"]]}]})}destroy(){super.destroy(),this.formView&&this.formView.destroy(),this.actionsView&&this.actionsView.destroy()}_createViews(){this.actionsView=this._createActionsView(),this.formView=this._createFormView(),this._enableUserBalloonInteractions()}_createActionsView(){const e=this.editor,n=new Dpe(e.locale,e.config.get("link"),rV(e)),s=e.commands.get("link"),r=e.commands.get("unlink");return n.bind("href").to(s,"value"),n.editButtonView.bind("isEnabled").to(s),n.unlinkButtonView.bind("isEnabled").to(r),this.listenTo(n,"edit",()=>{this._addFormView()}),this.listenTo(n,"unlink",()=>{e.execute("unlink"),this._hideUI()}),n.keystrokes.set("Esc",(o,a)=>{this._hideUI(),a()}),n.keystrokes.set(Yd,(o,a)=>{this._addFormView(),a()}),n}_createFormView(){const e=this.editor,n=e.commands.get("link"),s=e.config.get("link.defaultProtocol"),r=new(Bb(Lpe))(e.locale,n,Bpe(e));return r.urlInputView.fieldView.bind("value").to(n,"value"),r.urlInputView.bind("isEnabled").to(n,"isEnabled"),r.saveButtonView.bind("isEnabled").to(n,"isEnabled"),this.listenTo(r,"submit",()=>{if(r.isValid()){const{value:o}=r.urlInputView.fieldView.element,a=fC(o,s);e.execute("link",a,r.getDecoratorSwitchesState()),this._closeFormView()}}),this.listenTo(r.urlInputView,"change:errorText",()=>{e.ui.update()}),this.listenTo(r,"cancel",()=>{this._closeFormView()}),r.keystrokes.set("Esc",(o,a)=>{this._closeFormView(),a()}),r}_createToolbarLinkButton(){const e=this.editor;e.ui.componentFactory.add("link",()=>{const n=this._createButton(qe);return n.set({tooltip:!0}),n}),e.ui.componentFactory.add("menuBar:link",()=>{const n=this._createButton(Ln);return n.set({role:"menuitemcheckbox"}),n})}_createButton(e){const n=this.editor,s=n.locale,r=n.commands.get("link"),o=new e(n.locale),a=s.t;return o.set({label:a("Link"),icon:oV,keystroke:Yd,isToggleable:!0}),o.bind("isEnabled").to(r,"isEnabled"),o.bind("isOn").to(r,"value",l=>!!l),this.listenTo(o,"execute",()=>this._showUI(!0)),o}_enableBalloonActivators(){const e=this.editor,n=e.editing.view.document;this.listenTo(n,"click",()=>{this._getSelectedLinkElement()&&this._showUI()}),e.keystrokes.set(Yd,(s,r)=>{r(),e.commands.get("link").isEnabled&&this._showUI(!0)})}_enableUserBalloonInteractions(){this.editor.keystrokes.set("Tab",(e,n)=>{this._areActionsVisible&&!this.actionsView.focusTracker.isFocused&&(this.actionsView.focus(),n())},{priority:"high"}),this.editor.keystrokes.set("Esc",(e,n)=>{this._isUIVisible&&(this._hideUI(),n())}),Ta({emitter:this.formView,activator:()=>this._isUIInPanel,contextElements:()=>[this._balloon.view.element],callback:()=>this._hideUI()})}_addActionsView(){this.actionsView||this._createViews(),!this._areActionsInPanel&&this._balloon.add({view:this.actionsView,position:this._getBalloonPositionData()})}_addFormView(){if(this.formView||this._createViews(),this._isFormInPanel)return;const n=this.editor.commands.get("link");this.formView.disableCssTransitions(),this.formView.resetFormStatus(),this._balloon.add({view:this.formView,position:this._getBalloonPositionData()}),this.formView.urlInputView.fieldView.value=n.value||"",this._balloon.visibleView===this.formView&&this.formView.urlInputView.fieldView.select(),this.formView.enableCssTransitions()}_closeFormView(){const e=this.editor.commands.get("link");e.restoreManualDecoratorStates(),e.value!==void 0?this._removeFormView():this._hideUI()}_removeFormView(){this._isFormInPanel&&(this.formView.saveButtonView.focus(),this.formView.urlInputView.fieldView.reset(),this._balloon.remove(this.formView),this.editor.editing.view.focus(),this._hideFakeVisualSelection())}_showUI(e=!1){this.formView||this._createViews(),this._getSelectedLinkElement()?(this._areActionsVisible?this._addFormView():this._addActionsView(),e&&this._balloon.showStack("main")):(this._showFakeVisualSelection(),this._addActionsView(),e&&this._balloon.showStack("main"),this._addFormView()),this._startUpdatingUI()}_hideUI(){if(!this._isUIInPanel)return;const e=this.editor;this.stopListening(e.ui,"update"),this.stopListening(this._balloon,"change:visibleView"),e.editing.view.focus(),this._removeFormView(),this._balloon.remove(this.actionsView),this._hideFakeVisualSelection()}_startUpdatingUI(){const e=this.editor,n=e.editing.view.document;let s=this._getSelectedLinkElement(),r=a();const o=()=>{const l=this._getSelectedLinkElement(),u=a();s&&!l||!s&&u!==r?this._hideUI():this._isUIVisible&&this._balloon.updatePosition(this._getBalloonPositionData()),s=l,r=u};function a(){return n.selection.focus.getAncestors().reverse().find(l=>l.is("element"))}this.listenTo(e.ui,"update",o),this.listenTo(this._balloon,"change:visibleView",o)}get _isFormInPanel(){return!!this.formView&&this._balloon.hasView(this.formView)}get _areActionsInPanel(){return!!this.actionsView&&this._balloon.hasView(this.actionsView)}get _areActionsVisible(){return!!this.actionsView&&this._balloon.visibleView===this.actionsView}get _isUIInPanel(){return this._isFormInPanel||this._areActionsInPanel}get _isUIVisible(){const e=this._balloon.visibleView;return!!this.formView&&e==this.formView||this._areActionsVisible}_getBalloonPositionData(){const e=this.editor.editing.view,n=this.editor.model,s=e.document;let r;if(n.markers.has(gr)){const o=Array.from(this.editor.editing.mapper.markerNameToElements(gr)),a=e.createRange(e.createPositionBefore(o[0]),e.createPositionAfter(o[o.length-1]));r=e.domConverter.viewRangeToDom(a)}else r=()=>{const o=this._getSelectedLinkElement();return o?e.domConverter.mapViewToDom(o):e.domConverter.viewRangeToDom(s.selection.getFirstRange())};return{target:r}}_getSelectedLinkElement(){const e=this.editor.editing.view,n=e.document.selection,s=n.getSelectedElement();if(n.isCollapsed||s&&rn(s))return _1(n.getFirstPosition());{const r=n.getFirstRange().getTrimmed(),o=_1(r.start),a=_1(r.end);return!o||o!=a?null:e.createRangeIn(o).getTrimmed().isEqual(r)?o:null}}_showFakeVisualSelection(){const e=this.editor.model;e.change(n=>{const s=e.document.selection.getFirstRange();if(e.markers.has(gr))n.updateMarker(gr,{range:s});else if(s.start.isAtEnd){const r=s.start.getLastMatchingPosition(({item:o})=>!e.schema.isContent(o),{boundaries:s});n.addMarker(gr,{usingOperation:!1,affectsData:!1,range:n.createRange(r,s.end)})}else n.addMarker(gr,{usingOperation:!1,affectsData:!1,range:s})})}_hideFakeVisualSelection(){const e=this.editor.model;e.markers.has(gr)&&e.change(n=>{n.removeMarker(gr)})}}function _1(i){return i.getAncestors().find(t=>Epe(t))||null}function Bpe(i){const t=i.t,e=i.config.get("link.allowCreatingEmptyLinks");return[n=>{if(!e&&!n.url.length)return t("Link URL must not be empty.")}]}const Fpe=4,lV=new RegExp("(^|\\s)(((?:(?:(?:https?|ftp):)?\\/\\/)(?:\\S+(?::\\S*)?@)?(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(((?!www\\.)|(www\\.))(?![-_])(?:[-_a-z0-9\\u00a1-\\uffff]{1,63}\\.)+(?:[a-z\\u00a1-\\uffff]{2,63})))(?::\\d{2,5})?(?:[/?#]\\S*)?)|((www.|(\\S+@))((?![-_])(?:[-_a-z0-9\\u00a1-\\uffff]{1,63}\\.))+(?:[a-z\\u00a1-\\uffff]{2,63})))$","i"),$pe=2;class zpe extends J{static get requires(){return[Ir,Gb]}static get pluginName(){return"AutoLink"}static get isOfficialPlugin(){return!0}init(){const e=this.editor.model.document.selection;e.on("change:range",()=>{this.isEnabled=!e.anchor.parent.is("element","codeBlock")}),this._enableTypingHandling()}afterInit(){this._enableEnterHandling(),this._enableShiftEnterHandling(),this._enablePasteLinking()}_expandLinkRange(t,e){return e.textNode&&e.textNode.hasAttribute("linkHref")?Hb(e,"linkHref",e.textNode.getAttribute("linkHref"),t):null}_selectEntireLinks(t,e){const s=this.editor.model,r=s.document.selection,o=r.getFirstPosition(),a=r.getLastPosition();let l=e.getJoined(this._expandLinkRange(s,o)||e);l&&(l=l.getJoined(this._expandLinkRange(s,a)||e)),l&&(l.start.isBefore(o)||l.end.isAfter(a))&&t.setSelection(l)}_enablePasteLinking(){const t=this.editor,e=t.model,n=e.document.selection,s=t.plugins.get("ClipboardPipeline"),r=t.commands.get("link");s.on("inputTransformation",(o,a)=>{if(!this.isEnabled||!r.isEnabled||n.isCollapsed||a.method!=="paste"||n.rangeCount>1)return;const l=n.getFirstRange(),u=a.dataTransfer.getData("text/plain");if(!u)return;const h=u.match(lV);h&&h[2]===u&&(e.change(f=>{this._selectEntireLinks(f,l),r.execute(u)}),o.stop())},{priority:"high"})}_enableTypingHandling(){const t=this.editor,e=new QE(t.model,n=>{let s=n;if(!jpe(s))return;s=s.slice(0,-1),"!.:,;?".includes(s[s.length-1])&&(s=s.slice(0,-1));const r=qI(s);if(r)return{url:r,removedTrailingCharacters:n.length-s.length}});e.on("matched:data",(n,s)=>{const{batch:r,range:o,url:a,removedTrailingCharacters:l}=s;if(!r.isTyping)return;const u=o.end.getShiftedBy(-l),h=u.getShiftedBy(-a.length),f=t.model.createRange(h,u);this._applyAutoLink(a,f)}),e.bind("isEnabled").to(this)}_enableEnterHandling(){const t=this.editor,e=t.model,n=t.commands.get("enter");n&&n.on("execute",()=>{const s=e.document.selection.getFirstPosition();if(!s.parent.previousSibling)return;const r=e.createRangeIn(s.parent.previousSibling);this._checkAndApplyAutoLinkOnRange(r)})}_enableShiftEnterHandling(){const t=this.editor,e=t.model,n=t.commands.get("shiftEnter");n&&n.on("execute",()=>{const s=e.document.selection.getFirstPosition(),r=e.createRange(e.createPositionAt(s.parent,0),s.getShiftedBy(-1));this._checkAndApplyAutoLinkOnRange(r)})}_checkAndApplyAutoLinkOnRange(t){const e=this.editor.model,{text:n,range:s}=wL(t,e),r=qI(n);if(r){const o=e.createRange(s.end.getShiftedBy(-r.length),s.end);this._applyAutoLink(r,o)}}_applyAutoLink(t,e){const n=this.editor.model,s=this.editor.config.get("link.defaultProtocol"),r=fC(t,s);!this.isEnabled||!Hpe(e,n)||!iV(r)||Upe(e)||this._persistAutoLink(r,e)}_persistAutoLink(t,e){const n=this.editor.model,s=this.editor.plugins.get("Delete");n.enqueueChange(r=>{r.setAttribute("linkHref",t,e),n.enqueueChange(()=>{s.requestUndoOnBackspace()})})}}function jpe(i){return i.length>Fpe&&i[i.length-1]===" "&&i[i.length-2]!==" "}function qI(i){const t=lV.exec(i);return t?t[$pe]:null}function Hpe(i,t){return t.schema.checkAttributeInSelection(t.createSelection(i),"linkHref")}function Upe(i){const t=i.start.nodeAfter;return!!t&&t.hasAttribute("linkHref")}class Wpe extends J{static get requires(){return[Gb,aV,zpe]}static get pluginName(){return"Link"}static get isOfficialPlugin(){return!0}}class qpe extends J{static get requires(){return["ImageEditing","ImageUtils",Gb]}static get pluginName(){return"LinkImageEditing"}static get isOfficialPlugin(){return!0}afterInit(){const t=this.editor,e=t.model.schema;t.plugins.has("ImageBlockEditing")&&e.extend("imageBlock",{allowAttributes:["linkHref"]}),t.conversion.for("upcast").add(Gpe(t)),t.conversion.for("downcast").add(Kpe(t)),this._enableAutomaticDecorators(),this._enableManualDecorators()}_enableAutomaticDecorators(){const t=this.editor,n=t.commands.get("link").automaticDecorators;n.length&&t.conversion.for("downcast").add(n.getDispatcherForLinkedImage())}_enableManualDecorators(){const t=this.editor,e=t.commands.get("link");for(const n of e.manualDecorators)t.plugins.has("ImageBlockEditing")&&t.model.schema.extend("imageBlock",{allowAttributes:n.id}),t.plugins.has("ImageInlineEditing")&&t.model.schema.extend("imageInline",{allowAttributes:n.id}),t.conversion.for("downcast").add(Ype(n)),t.conversion.for("upcast").add(Zpe(t,n))}}function Gpe(i){const t=i.plugins.has("ImageInlineEditing"),e=i.plugins.get("ImageUtils");return n=>{n.on("element:a",(s,r,o)=>{const a=r.viewItem,l=e.findViewImgElement(a);if(!l)return;const u=l.findAncestor(p=>e.isBlockImageView(p));if(t&&!u)return;const h={attributes:["href"]};if(!o.consumable.consume(a,h))return;const f=a.getAttribute("href");if(!f)return;let g=r.modelCursor.parent;if(!g.is("element","imageBlock")){const p=o.convertItem(l,r.modelCursor);r.modelRange=p.modelRange,r.modelCursor=p.modelCursor,g=r.modelCursor.nodeBefore}g&&g.is("element","imageBlock")&&o.writer.setAttribute("linkHref",f,g)},{priority:"high"})}}function Kpe(i){const t=i.plugins.get("ImageUtils");return e=>{e.on("attribute:linkHref:imageBlock",(n,s,r)=>{if(!r.consumable.consume(s.item,n.name))return;const o=r.mapper.toViewElement(s.item),a=r.writer,l=Array.from(o.getChildren()).find(f=>f.is("element","a")),u=t.findViewImgElement(o),h=u.parent.is("element","picture")?u.parent:u;if(l)s.attributeNewValue?a.setAttribute("href",s.attributeNewValue,l):(a.move(a.createRangeOn(h),a.createPositionAt(o,0)),a.remove(l));else{const f=a.createContainerElement("a",{href:s.attributeNewValue});a.insert(a.createPositionAt(o,0),f),a.move(a.createRangeOn(h),a.createPositionAt(f,0))}},{priority:"high"})}}function Ype(i){return t=>{t.on(`attribute:${i.id}:imageBlock`,(e,n,s)=>{const r=s.mapper.toViewElement(n.item),o=Array.from(r.getChildren()).find(a=>a.is("element","a"));if(o){for(const[a,l]of er(i.attributes))s.writer.setAttribute(a,l,o);i.classes&&s.writer.addClass(i.classes,o);for(const a in i.styles)s.writer.setStyle(a,i.styles[a],o)}})}}function Zpe(i,t){const e=i.plugins.has("ImageInlineEditing"),n=i.plugins.get("ImageUtils");return s=>{s.on("element:a",(r,o,a)=>{const l=o.viewItem,u=n.findViewImgElement(l);if(!u)return;const h=u.findAncestor(y=>n.isBlockImageView(y));if(e&&!h)return;const g=new ns(t._createPattern()).match(l);if(!g||!a.consumable.consume(l,g.match))return;const p=o.modelCursor.nodeBefore||o.modelCursor.parent;a.writer.setAttribute(t.id,!0,p)},{priority:"high"})}}class Xpe extends J{static get requires(){return[Gb,aV,"ImageBlockEditing"]}static get pluginName(){return"LinkImageUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.editing.view.document;this.listenTo(e,"click",(n,s)=>{this._isSelectedLinkedImage(t.model.document.selection)&&(s.preventDefault(),n.stop())},{priority:"high"}),this._createToolbarLinkImageButton()}_createToolbarLinkImageButton(){const t=this.editor,e=t.t;t.ui.componentFactory.add("linkImage",n=>{const s=new qe(n),r=t.plugins.get("LinkUI"),o=t.commands.get("link");return s.set({isEnabled:!0,label:e("Link image"),icon:oV,keystroke:Yd,tooltip:!0,isToggleable:!0}),s.bind("isEnabled").to(o,"isEnabled"),s.bind("isOn").to(o,"value",a=>!!a),this.listenTo(s,"execute",()=>{this._isSelectedLinkedImage(t.model.document.selection)?r._addActionsView():r._showUI(!0)}),s})}_isSelectedLinkedImage(t){const e=t.getSelectedElement();return this.editor.plugins.get("ImageUtils").isImage(e)&&e.hasAttribute("linkHref")}}class Jpe extends J{static get requires(){return[qpe,Xpe]}static get pluginName(){return"LinkImage"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class Ss{constructor(t,e){b(this,"_startElement");b(this,"_referenceIndent");b(this,"_isForward");b(this,"_includeSelf");b(this,"_sameAttributes");b(this,"_sameIndent");b(this,"_lowerIndent");b(this,"_higherIndent");this._startElement=t,this._referenceIndent=t.getAttribute("listIndent"),this._isForward=e.direction=="forward",this._includeSelf=!!e.includeSelf,this._sameAttributes=Bt(e.sameAttributes||[]),this._sameIndent=!!e.sameIndent,this._lowerIndent=!!e.lowerIndent,this._higherIndent=!!e.higherIndent}static first(t,e){const s=new this(t,e)[Symbol.iterator]();return ln(s)}*[Symbol.iterator](){const t=[];for(const{node:e}of new vf(this._getStartNode(),this._isForward?"forward":"backward")){const n=e.getAttribute("listIndent");if(n<this._referenceIndent){if(!this._lowerIndent)break;this._referenceIndent=n}else if(n>this._referenceIndent){if(!this._higherIndent)continue;if(!this._isForward){t.push(e);continue}}else{if(!this._sameIndent){if(this._higherIndent){t.length&&(yield*t,t.length=0);break}continue}if(this._sameAttributes.some(s=>e.getAttribute(s)!==this._startElement.getAttribute(s)))break}t.length&&(yield*t,t.length=0),yield e}}_getStartNode(){return this._includeSelf?this._startElement:this._isForward?this._startElement.nextSibling:this._startElement.previousSibling}}class vf{constructor(t,e="forward"){b(this,"_node");b(this,"_isForward");b(this,"_previousNodesByIndent",[]);b(this,"_previous",null);b(this,"_previousNodeIndent",null);this._node=t,this._isForward=e==="forward"}[Symbol.iterator](){return this}next(){if(!It(this._node))return{done:!0,value:void 0};const t=this._node.getAttribute("listIndent");let e=null;if(this._previous){const s=this._previousNodeIndent;t>s?this._previousNodesByIndent[s]=this._previous:t<s?(e=this._previousNodesByIndent[t]||null,this._previousNodesByIndent.length=t):e=this._previous}const n={node:this._node,previous:this._previous,previousNodeInList:e};return this._previous=this._node,this._previousNodeIndent=t,this._node=this._isForward?this._node.nextSibling:this._node.previousSibling,{value:n,done:!1}}}class Qpe{constructor(t){b(this,"_listHead");this._listHead=t}[Symbol.iterator](){return new vf(this._listHead)}}class wu{static next(){return ni()}}function It(i){return!!i&&i.is("element")&&i.hasAttribute("listItemId")}function vu(i,t={}){return[...wa(i,{...t,direction:"backward"}),...wa(i,{...t,direction:"forward"})]}function wa(i,t={}){const e=t.direction=="forward",n=Array.from(new Ss(i,{...t,includeSelf:e,sameIndent:!0,sameAttributes:"listItemId"}));return e?n:n.reverse()}function ebe(i){return Array.from(new Ss(i,{direction:"forward",higherIndent:!0}))}function cV(i,t){const e=new Ss(i,{sameIndent:!0,sameAttributes:"listType",...t}),n=new Ss(i,{sameIndent:!0,sameAttributes:"listType",includeSelf:!0,direction:"forward",...t});return[...Array.from(e).reverse(),...n]}function po(i){return!Ss.first(i,{sameIndent:!0,sameAttributes:"listItemId"})}function GI(i){return!Ss.first(i,{direction:"forward",sameIndent:!0,sameAttributes:"listItemId"})}function yf(i,t={}){i=Bt(i);const e=t.withNested!==!1,n=new Set;for(const s of i)for(const r of vu(s,{higherIndent:e}))n.add(r);return Dl(n)}function Kb(i){i=Bt(i);const t=new Set;for(const e of i)for(const n of cV(e))t.add(n);return Dl(t)}function mC(i,t){const e=wa(i,{direction:"forward"}),n=wu.next();for(const s of e)t.setAttribute("listItemId",n,s);return e}function Ky(i,t,e){const n={};for(const[r,o]of t.getAttributes())r.startsWith("list")&&(n[r]=o);const s=wa(i,{direction:"forward"});for(const r of s)e.setAttributes(n,r);return s}function Yy(i,t,{expand:e,indentBy:n=1}={}){i=Bt(i);const s=e?yf(i):i;for(const r of s){const o=r.getAttribute("listIndent")+n;o<0?Yb(r,t):t.setAttribute("listIndent",o,r)}return s}function tbe(i,t){i=Bt(i);const e=yf(i),n=new Set,s=Math.min(...e.map(o=>o.getAttribute("listIndent"))),r=new Map;for(const o of e)r.set(o,Ss.first(o,{lowerIndent:!0}));for(const o of e){if(n.has(o))continue;n.add(o);const a=o.getAttribute("listIndent")-1;if(a<0){Yb(o,t);continue}if(o.getAttribute("listIndent")==s){const l=ibe(o,r.get(o),t);for(const u of l)n.add(u);if(l.length)continue}t.setAttribute("listIndent",a,o)}return Dl(n)}function Yb(i,t){i=Bt(i);for(const e of i)e.is("element","listItem")&&t.rename(e,"paragraph");for(const e of i)for(const n of e.getAttributeKeys())n.startsWith("list")&&t.removeAttribute(n,e);return i}function Uh(i){if(!i.length)return!1;const t=i[0].getAttribute("listItemId");return t?!i.some(e=>e.getAttribute("listItemId")!=t):!1}function nbe(i,t){const e=[];let n=Number.POSITIVE_INFINITY;for(const{node:s}of new vf(i.nextSibling)){const r=s.getAttribute("listIndent");if(r==0)break;r<n&&(n=r);const o=r-n;t.setAttribute("listIndent",o,s),e.push(s)}return e}function Dl(i){return Array.from(i).filter(t=>t.root.rootName!=="$graveyard").sort((t,e)=>t.index-e.index)}function Wh(i){const t=i.document.selection.getSelectedElement();return t&&i.schema.isObject(t)&&i.schema.isBlock(t)?t:null}function E1(i,t){return t.checkChild(i.parent,"listItem")&&t.checkChild(i,"$text")&&!t.isObject(i)}function Mp(i){return i=="numbered"||i=="customNumbered"}function ibe(i,t,e){return wa(t,{direction:"forward"}).pop().index>i.index?Ky(i,t,e):[]}class KI extends Ze{constructor(e,n){super(e);b(this,"_direction");this._direction=n}refresh(){this.isEnabled=this._checkEnabled()}execute(){const e=this.editor.model,n=YI(e.document.selection);e.change(s=>{const r=[];Uh(n)&&!po(n[0])?(this._direction=="forward"&&r.push(...Yy(n,s)),r.push(...mC(n[0],s))):this._direction=="forward"?r.push(...Yy(n,s,{expand:!0})):r.push(...tbe(n,s));for(const o of r){if(!o.hasAttribute("listType"))continue;const a=Ss.first(o,{sameIndent:!0});a&&s.setAttribute("listType",a.getAttribute("listType"),o)}this._fireAfterExecute(r)})}_fireAfterExecute(e){this.fire("afterExecute",Dl(new Set(e)))}_checkEnabled(){let e=YI(this.editor.model.document.selection),n=e[0];if(!n)return!1;if(this._direction=="backward"||Uh(e)&&!po(e[0]))return!0;e=yf(e),n=e[0];const s=Ss.first(n,{sameIndent:!0});return s?s.getAttribute("listType")==n.getAttribute("listType"):!1}}function YI(i){const t=Array.from(i.getSelectedBlocks()),e=t.findIndex(n=>!It(n));return e!=-1&&(t.length=e),t}class Zd extends Ze{constructor(e,n,s={}){super(e);b(this,"type");b(this,"_listWalkerOptions");this.type=n,this._listWalkerOptions=s.multiLevel?{higherIndent:!0,lowerIndent:!0,sameAttributes:[]}:void 0}refresh(){this.value=this._getValue(),this.isEnabled=this._checkEnabled()}execute(e={}){const n=this.editor.model,s=n.document,r=Wh(n),o=Array.from(s.selection.getSelectedBlocks()).filter(l=>n.schema.checkAttribute(l,"listType")||E1(l,n.schema)),a=e.forceValue!==void 0?!e.forceValue:this.value;n.change(l=>{if(a){const u=o[o.length-1],h=wa(u,{direction:"forward"}),f=[];h.length>1&&f.push(...mC(h[1],l)),f.push(...Yb(o,l)),f.push(...nbe(u,l)),this._fireAfterExecute(f)}else if((r||s.selection.isCollapsed)&&It(o[0])){const u=cV(r||o[0],this._listWalkerOptions);for(const h of u)l.setAttributes({...e.additionalAttributes,listType:this.type},h);this._fireAfterExecute(u)}else{const u=[];for(const h of o)if(!h.hasAttribute("listType"))!h.is("element","listItem")&&E1(h,n.schema)&&l.rename(h,"listItem"),l.setAttributes({...e.additionalAttributes,listIndent:0,listItemId:wu.next(),listType:this.type},h),u.push(h);else for(const f of yf(h,{withNested:!1}))f.getAttribute("listType")!=this.type&&(l.setAttributes({...e.additionalAttributes,listType:this.type},f),u.push(f));this._fireAfterExecute(u)}})}_fireAfterExecute(e){this.fire("afterExecute",Dl(new Set(e)))}_getValue(){const e=this.editor.model.document.selection,n=Array.from(e.getSelectedBlocks());if(!n.length)return!1;for(const s of n)if(s.getAttribute("listType")!=this.type)return!1;return!0}_checkEnabled(){const e=this.editor.model,n=e.schema,s=e.document.selection,r=Array.from(s.getSelectedBlocks());if(!r.length)return!1;if(this.value)return!0;for(const o of r)if(n.checkAttribute(o,"listType")||E1(o,n))return!0;return!1}}class ZI extends Ze{constructor(e,n){super(e);b(this,"_direction");this._direction=n}refresh(){this.isEnabled=this._checkEnabled()}execute({shouldMergeOnBlocksContentLevel:e=!1}={}){const n=this.editor.model,s=n.document.selection,r=[];n.change(o=>{const{firstElement:a,lastElement:l}=this._getMergeSubjectElements(s,e),u=a.getAttribute("listIndent")||0,h=l.getAttribute("listIndent"),f=l.getAttribute("listItemId");if(u!=h){const g=ebe(l);r.push(...Yy([l,...g],o,{indentBy:u-h,expand:u<h}))}if(e){let g=s;s.isCollapsed&&(g=o.createSelection(o.createRange(o.createPositionAt(a,"end"),o.createPositionAt(l,0)))),n.deleteContent(g,{doNotResetEntireContent:s.isCollapsed});const p=g.getLastPosition().parent,y=p.nextSibling;r.push(p),y&&y!==l&&y.getAttribute("listItemId")==f&&r.push(...Ky(y,p,o))}else r.push(...Ky(l,a,o));this._fireAfterExecute(r)})}_fireAfterExecute(e){this.fire("afterExecute",Dl(new Set(e)))}_checkEnabled(){const e=this.editor.model,n=e.document.selection,s=Wh(e);if(n.isCollapsed||s){const r=s||n.getFirstPosition().parent;if(!It(r))return!1;const o=this._direction=="backward"?r.previousSibling:r.nextSibling;if(!o||Uh([r,o]))return!1}else{const r=n.getLastPosition(),o=n.getFirstPosition();if(r.parent===o.parent||!It(r.parent))return!1}return!0}_getMergeSubjectElements(e,n){const s=this.editor.model,r=Wh(s);let o,a;if(e.isCollapsed||r){const l=r||e.getFirstPosition().parent,u=po(l);this._direction=="backward"?(a=l,u&&!n?o=Ss.first(l,{sameIndent:!0,lowerIndent:!0}):o=l.previousSibling):(o=l,a=l.nextSibling)}else o=e.getFirstPosition().parent,a=e.getLastPosition().parent;return{firstElement:o,lastElement:a}}}class XI extends Ze{constructor(e,n){super(e);b(this,"_direction");this._direction=n}refresh(){this.isEnabled=this._checkEnabled()}execute(){this.editor.model.change(n=>{const s=mC(this._getStartBlock(),n);this._fireAfterExecute(s)})}_fireAfterExecute(e){this.fire("afterExecute",Dl(new Set(e)))}_checkEnabled(){const e=this.editor.model.document.selection,n=this._getStartBlock();return e.isCollapsed&&It(n)&&!po(n)}_getStartBlock(){const n=this.editor.model.document.selection.getFirstPosition().parent;return this._direction=="before"?n:n.nextSibling}}class sbe extends J{static get pluginName(){return"ListUtils"}static get isOfficialPlugin(){return!0}expandListBlocksToCompleteList(t){return Kb(t)}isFirstBlockOfListItem(t){return po(t)}isListItemBlock(t){return It(t)}expandListBlocksToCompleteItems(t,e={}){return yf(t,e)}isNumberedListType(t){return Mp(t)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function rbe(i){return i.is("element","ol")||i.is("element","ul")}function Zy(i){return i.is("element","li")}function obe(i){let t=0,e=i.parent;for(;e;){if(Zy(e))t++;else{const n=e.previousSibling;n&&Zy(n)&&t++}e=e.parent}return t}function abe(i,t,e,n=dV(e,t)){return i.createAttributeElement(uV(e),null,{priority:2*t/100-100,id:n})}function lbe(i,t,e){return i.createAttributeElement("li",null,{priority:(2*t+1)/100-100,id:e})}function uV(i){return i=="numbered"||i=="customNumbered"?"ol":"ul"}function dV(i,t){return`list-${i}-${t}`}function js(i,t,e){const n=i.nodeBefore;if(It(n)){let s=n;for(const{node:r}of new vf(s,"backward"))if(s=r,e.has(s)||(e.add(s),t.has(n)))return;t.add(s)}else{const s=i.nodeAfter;It(s)&&t.add(s)}}function cbe(i,t){let e=0,n=-1,s=null,r=!1;for(const{node:o}of i){const a=o.getAttribute("listIndent");if(a>e){let l;s===null?(s=a-e,l=e):(s>a&&(s=a),l=a-s),l>n+1&&(l=n+1),t.setAttribute("listIndent",l,o),r=!0,n=l}else s=null,e=a+1,n=a}return r}function ube(i,t,e){const n=new Set;let s=!1;for(const{node:r}of i){if(n.has(r))continue;let o=r.getAttribute("listType"),a=r.getAttribute("listItemId");if(t.has(a)&&(a=wu.next()),t.add(a),r.is("element","listItem")){r.getAttribute("listItemId")!=a&&(e.setAttribute("listItemId",a,r),s=!0);continue}for(const l of wa(r,{direction:"forward"}))n.add(l),l.getAttribute("listType")!=o&&(a=wu.next(),o=l.getAttribute("listType")),l.getAttribute("listItemId")!=a&&(e.setAttribute("listItemId",a,l),s=!0)}return s}function dbe(){return(i,t,e)=>{const{writer:n,schema:s}=e;if(!t.modelRange)return;const r=Array.from(t.modelRange.getItems({shallow:!0})).filter(f=>s.checkAttribute(f,"listItemId"));if(!r.length)return;const o=wu.next(),a=obe(t.viewItem);let l=t.viewItem.parent&&t.viewItem.parent.is("element","ol")?"numbered":"bulleted";const u=r[0].getAttribute("listType");u&&(l=u);const h={listItemId:o,listIndent:a,listType:l};for(const f of r)f.hasAttribute("listItemId")||n.setAttributes(h,f);r.length>1&&r[1].getAttribute("listItemId")!=h.listItemId&&e.keepEmptyElement(r[0])}}function hbe(i,t,e,n){return()=>{const a=i.document.differ.getChanges(),l=[],u=new Set,h=new Set,f=new Set;for(const g of a)if(g.type=="insert"&&g.name!="$text")js(g.position,u,f),g.attributes.has("listItemId")?h.add(g.position.nodeAfter):js(g.position.getShiftedBy(g.length),u,f);else if(g.type=="remove"&&g.attributes.has("listItemId"))js(g.position,u,f);else if(g.type=="attribute"){const p=g.range.start.nodeAfter;e.includes(g.attributeKey)?(js(g.range.start,u,f),g.attributeNewValue===null?(js(g.range.start.getShiftedBy(1),u,f),r(p)&&l.push(p)):h.add(p)):It(p)&&r(p)&&l.push(p)}for(const g of u.values())l.push(...s(g,h));for(const g of new Set(l))t.reconvertItem(g)};function s(a,l){const u=[],h=new Set,f=[];for(const{node:g,previous:p}of new vf(a)){if(h.has(g))continue;const y=g.getAttribute("listIndent");p&&y<p.getAttribute("listIndent")&&(f.length=y+1),f[y]=Object.fromEntries(Array.from(g.getAttributes()).filter(([C])=>e.includes(C)));const E=wa(g,{direction:"forward"});for(const C of E)h.add(C),(r(C,E)||o(C,f,l))&&u.push(C)}return u}function r(a,l){const u=t.mapper.toViewElement(a);if(!u)return!1;if(n.fire("checkElement",{modelElement:a,viewElement:u}))return!0;if(!a.is("element","paragraph")&&!a.is("element","listItem"))return!1;const f=fV(a,e,l);return f&&u.is("element","p")?!0:!!(!f&&u.is("element","span"))}function o(a,l,u){if(u.has(a))return!1;const h=t.mapper.toViewElement(a);let f=l.length-1;for(let g=h.parent;!g.is("editableElement");g=g.parent){const p=Zy(g),y=rbe(g);if(!y&&!p)continue;const E=`checkAttributes:${p?"item":"list"}`;if(n.fire(E,{viewElement:g,modelAttributes:l[f]}))break;if(y&&(f--,f<0))return!1}return!0}}function JI(i,t,e,{dataPipeline:n}={}){const s=vbe(i);return(r,o,a)=>{const{writer:l,mapper:u,consumable:h}=a,f=o.item;if(!i.includes(o.attributeKey)||!s(f,h))return;const g=mbe(f,u,e);hV(g,l,u),bbe(g,l);const p=pbe(f,g,t,l,{dataPipeline:n});wbe(f,p,t,l)}}function fbe(i){return(t,e,n)=>{const{writer:s,mapper:r}=n,o=t.name.split(":")[1];if(!i.checkAttribute(o,"listItemId"))return;const a=r.toViewPosition(e.position),l=e.position.getShiftedBy(e.length),u=r.toViewPosition(l,{isPhantom:!0}),f=s.createRange(a,u).getTrimmed().end.nodeBefore;/* istanbul ignore next -- @preserve */f&&hV(f,s,r)}}function QI(i,{dataPipeline:t}={}){return(e,{writer:n})=>{if(!fV(e,i))return null;if(!t)return n.createContainerElement("span",{class:"ck-list-bogus-paragraph"});const s=n.createContainerElement("p");return n.setCustomProperty("dataPipeline:transparentRendering",!0,s),s}}function mbe(i,t,e){const n=e.createRangeOn(i);return t.toViewRange(n).getTrimmed().end.nodeBefore}function gbe(i,t){return(e,n)=>{if(n.modelPosition.offset>0)return;const s=n.modelPosition.parent;if(!It(s)||!i.some(u=>u.scope=="itemMarker"&&u.canInjectMarkerIntoElement&&u.canInjectMarkerIntoElement(s)))return;const r=n.mapper.toViewElement(s),o=t.createRangeIn(r),a=o.getWalker();let l=o.start;for(const{item:u}of a){if(u.is("element")&&n.mapper.toModelElement(u)||u.is("$textProxy"))break;u.is("element")&&u.getCustomProperty("listItemMarker")&&(l=t.createPositionAfter(u),a.skip(({previousPosition:h})=>!h.isEqual(l)))}n.viewPosition=l}}function hV(i,t,e){for(;i.parent.is("attributeElement")&&i.parent.getCustomProperty("listItemWrapper");)t.unwrap(t.createRangeOn(i),i.parent);const n=[];s(t.createPositionBefore(i).getWalker({direction:"backward"})),s(t.createRangeIn(i).getWalker());for(const r of n)t.remove(r);function s(r){for(const{item:o}of r){if(o.is("element")&&e.toModelElement(o))break;o.is("element")&&o.getCustomProperty("listItemMarker")&&n.push(o)}}}function pbe(i,t,e,n,{dataPipeline:s}){let r=n.createRangeOn(t);if(!po(i))return r;for(const o of e){if(o.scope!="itemMarker")continue;const a=o.createElement(n,i,{dataPipeline:s});if(!a||(n.setCustomProperty("listItemMarker",!0,a),o.canInjectMarkerIntoElement&&o.canInjectMarkerIntoElement(i)?n.insert(n.createPositionAt(t,0),a):(n.insert(r.start,a),r=n.createRange(n.createPositionBefore(a),n.createPositionAfter(t))),!o.createWrapperElement||!o.canWrapElement))continue;const l=o.createWrapperElement(n,i,{dataPipeline:s});n.setCustomProperty("listItemWrapper",!0,l),o.canWrapElement(i)?r=n.wrap(r,l):(r=n.wrap(n.createRangeOn(a),l),r=n.createRange(r.start,n.createPositionAfter(t)))}return r}function bbe(i,t){let e=i.parent;for(;e.is("attributeElement")&&["ul","ol","li"].includes(e.name);){const n=e.parent;t.unwrap(t.createRangeOn(i),e),e=n}}function wbe(i,t,e,n){if(!i.hasAttribute("listIndent"))return;const s=i.getAttribute("listIndent");let r=i;for(let o=s;o>=0;o--){const a=lbe(n,o,r.getAttribute("listItemId")),l=abe(n,o,r.getAttribute("listType"));for(const u of e)(u.scope=="list"||u.scope=="item")&&r.hasAttribute(u.attributeName)&&u.setAttributeOnDowncast(n,r.getAttribute(u.attributeName),u.scope=="list"?l:a);if(t=n.wrap(t,a),t=n.wrap(t,l),o==0||(r=Ss.first(r,{lowerIndent:!0}),!r))break}}function vbe(i){return(t,e)=>{const n=[];for(const s of i)t.hasAttribute(s)&&n.push(`attribute:${s}`);return n.every(s=>e.test(t,s)!==!1)?(n.forEach(s=>e.consume(t,s)),!0):!1}}function fV(i,t,e=vu(i)){if(!It(i))return!1;for(const n of i.getAttributeKeys())if(!(n.startsWith("selection:")||n=="htmlEmptyBlock")&&!t.includes(n))return!1;return e.length<2}const Bg=["listType","listIndent","listItemId"];class qh extends J{constructor(e){super(e);b(this,"_downcastStrategies",[]);e.config.define("list.multiBlock",!0)}static get pluginName(){return"ListEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[Ub,Ir,sbe,Ts]}init(){const e=this.editor,n=e.model,s=e.config.get("list.multiBlock");if(e.plugins.has("LegacyListEditing"))throw new D("list-feature-conflict",this,{conflictPlugin:"LegacyListEditing"});n.schema.register("$listItem",{allowAttributes:Bg}),s?(n.schema.extend("$container",{allowAttributesOf:"$listItem"}),n.schema.extend("$block",{allowAttributesOf:"$listItem"}),n.schema.extend("$blockObject",{allowAttributesOf:"$listItem"})):n.schema.register("listItem",{inheritAllFrom:"$block",allowAttributesOf:"$listItem"});for(const r of Bg)n.schema.setAttributeProperties(r,{copyOnReplace:!0});e.commands.add("numberedList",new Zd(e,"numbered")),e.commands.add("bulletedList",new Zd(e,"bulleted")),e.commands.add("customNumberedList",new Zd(e,"customNumbered",{multiLevel:!0})),e.commands.add("customBulletedList",new Zd(e,"customBulleted",{multiLevel:!0})),e.commands.add("indentList",new KI(e,"forward")),e.commands.add("outdentList",new KI(e,"backward")),e.commands.add("splitListItemBefore",new XI(e,"before")),e.commands.add("splitListItemAfter",new XI(e,"after")),s&&(e.commands.add("mergeListItemBackward",new ZI(e,"backward")),e.commands.add("mergeListItemForward",new ZI(e,"forward"))),this._setupDeleteIntegration(),this._setupEnterIntegration(),this._setupTabIntegration(),this._setupClipboardIntegration(),this._setupAccessibilityIntegration()}afterInit(){const n=this.editor.commands,s=n.get("indent"),r=n.get("outdent");s&&s.registerChildCommand(n.get("indentList"),{priority:"high"}),r&&r.registerChildCommand(n.get("outdentList"),{priority:"lowest"}),this._setupModelPostFixing(),this._setupConversion()}registerDowncastStrategy(e){this._downcastStrategies.push(e)}getListAttributeNames(){return[...Bg,...this._downcastStrategies.map(e=>e.attributeName)]}_setupDeleteIntegration(){const e=this.editor,n=e.commands.get("mergeListItemBackward"),s=e.commands.get("mergeListItemForward");this.listenTo(e.editing.view.document,"delete",(r,o)=>{const a=e.model.document.selection;Wh(e.model)||e.model.change(()=>{const l=a.getFirstPosition();if(a.isCollapsed&&o.direction=="backward"){if(!l.isAtStart)return;const u=l.parent;if(!It(u))return;if(!Ss.first(u,{sameAttributes:"listType",sameIndent:!0})&&u.getAttribute("listIndent")===0)GI(u)||e.execute("splitListItemAfter"),e.execute("outdentList");else{if(!n||!n.isEnabled)return;n.execute({shouldMergeOnBlocksContentLevel:e5(e.model,"backward")})}o.preventDefault(),r.stop()}else{if(a.isCollapsed&&!a.getLastPosition().isAtEnd||!s||!s.isEnabled)return;s.execute({shouldMergeOnBlocksContentLevel:e5(e.model,"forward")}),o.preventDefault(),r.stop()}})},{context:"li"})}_setupEnterIntegration(){const e=this.editor,n=e.model,s=e.commands,r=s.get("enter");this.listenTo(e.editing.view.document,"enter",(o,a)=>{const l=n.document,u=l.selection.getFirstPosition().parent;if(l.selection.isCollapsed&&It(u)&&u.isEmpty&&!a.isSoft){const h=po(u),f=GI(u);h&&f?(e.execute("outdentList"),a.preventDefault(),o.stop()):h&&!f?(e.execute("splitListItemAfter"),a.preventDefault(),o.stop()):f&&(e.execute("splitListItemBefore"),a.preventDefault(),o.stop())}},{context:"li"}),this.listenTo(r,"afterExecute",()=>{const o=s.get("splitListItemBefore");if(o.refresh(),!o.isEnabled)return;const l=e.model.document.selection.getLastPosition().parent;vu(l).length===2&&o.execute()})}_setupTabIntegration(){const e=this.editor;this.listenTo(e.editing.view.document,"tab",(n,s)=>{const r=s.shiftKey?"outdentList":"indentList";this.editor.commands.get(r).isEnabled&&(e.execute(r),s.stopPropagation(),s.preventDefault(),n.stop())},{context:"li"})}_setupConversion(){const e=this.editor,n=e.model,s=this.getListAttributeNames(),r=e.config.get("list.multiBlock"),o=r?"paragraph":"listItem";e.conversion.for("upcast").elementToElement({view:"li",model:(l,{writer:u})=>u.createElement(o,{listType:""})}).elementToElement({view:"p",model:(l,{writer:u})=>l.parent&&l.parent.is("element","li")?u.createElement(o,{listType:""}):null,converterPriority:"high"}).add(l=>{l.on("element:li",dbe())}),r||e.conversion.for("downcast").elementToElement({model:"listItem",view:"p"}),e.conversion.for("editingDowncast").elementToElement({model:o,view:QI(s),converterPriority:"high"}).add(l=>{l.on("attribute",JI(s,this._downcastStrategies,n)),l.on("remove",fbe(n.schema))}),e.conversion.for("dataDowncast").elementToElement({model:o,view:QI(s,{dataPipeline:!0}),converterPriority:"high"}).add(l=>{l.on("attribute",JI(s,this._downcastStrategies,n,{dataPipeline:!0}))});const a=gbe(this._downcastStrategies,e.editing.view);e.editing.mapper.on("modelToViewPosition",a),e.data.mapper.on("modelToViewPosition",a),this.listenTo(n.document,"change:data",hbe(n,e.editing,s,this),{priority:"high"}),this.on("checkAttributes:item",(l,{viewElement:u,modelAttributes:h})=>{u.id!=h.listItemId&&(l.return=!0,l.stop())}),this.on("checkAttributes:list",(l,{viewElement:u,modelAttributes:h})=>{(u.name!=uV(h.listType)||u.id!=dV(h.listType,h.listIndent))&&(l.return=!0,l.stop())})}_setupModelPostFixing(){const e=this.editor.model,n=this.getListAttributeNames();e.document.registerPostFixer(s=>ybe(e,s,n,this)),this.on("postFixer",(s,{listNodes:r,writer:o})=>{s.return=cbe(r,o)||s.return},{priority:"high"}),this.on("postFixer",(s,{listNodes:r,writer:o,seenIds:a})=>{s.return=ube(r,a,o)||s.return},{priority:"high"})}_setupClipboardIntegration(){const e=this.editor.model,n=this.editor.plugins.get("ClipboardPipeline");this.listenTo(e,"insertContent",_be(e),{priority:"high"}),this.listenTo(n,"outputTransformation",(s,r)=>{e.change(o=>{const a=Array.from(r.content.getChildren()),l=a[a.length-1];if(a.length>1&&l.is("element")&&l.isEmpty&&a.slice(0,-1).every(It)&&o.remove(l),r.method=="copy"||r.method=="cut"){const u=Array.from(r.content.getChildren());Uh(u)&&Yb(u,o)}})})}_setupAccessibilityIntegration(){const e=this.editor,n=e.t;e.accessibility.addKeystrokeInfoGroup({id:"list",label:n("Keystrokes that can be used in a list"),keystrokes:[{label:n("Increase list item indent"),keystroke:"Tab"},{label:n("Decrease list item indent"),keystroke:"Shift+Tab"}]})}}function ybe(i,t,e,n){const s=i.document.differ.getChanges(),r=new Set,o=new Set,a=n.editor.config.get("list.multiBlock");let l=!1;for(const h of s){if(h.type=="insert"&&h.name!="$text"){const f=h.position.nodeAfter;if(!i.schema.checkAttribute(f,"listItemId"))for(const g of Array.from(f.getAttributeKeys()))e.includes(g)&&(t.removeAttribute(g,f),l=!0);js(h.position,o,r),h.attributes.has("listItemId")||js(h.position.getShiftedBy(h.length),o,r);for(const{item:g,previousPosition:p}of i.createRangeIn(f))It(g)&&js(p,o,r)}else h.type=="remove"?js(h.position,o,r):h.type=="attribute"&&e.includes(h.attributeKey)&&(js(h.range.start,o,r),h.attributeNewValue===null&&js(h.range.start.getShiftedBy(1),o,r));if(!a&&h.type=="attribute"&&Bg.includes(h.attributeKey)){const f=h.range.start.nodeAfter;h.attributeNewValue===null&&f&&f.is("element","listItem")?(t.rename(f,"paragraph"),l=!0):h.attributeOldValue===null&&f&&f.is("element")&&f.name!="listItem"&&(t.rename(f,"listItem"),l=!0)}}const u=new Set;for(const h of o.values())l=n.fire("postFixer",{listNodes:new Qpe(h),listHead:h,writer:t,seenIds:u})||l;return l}function _be(i){return(t,[e,n])=>{const s=e.is("documentFragment")?Array.from(e.getChildren()):[e];if(!s.length)return;const o=(n?i.createSelection(n):i.document.selection).getFirstPosition();let a;if(It(o.parent))a=o.parent;else if(It(o.nodeBefore)&&It(o.nodeAfter))a=o.nodeBefore;else return;i.change(l=>{const u=a.getAttribute("listType"),h=a.getAttribute("listIndent"),f=s[0].getAttribute("listIndent")||0,g=Math.max(h-f,0);for(const p of s){const y=It(p);a.is("element","listItem")&&p.is("element","paragraph")&&l.rename(p,"listItem"),l.setAttributes({listIndent:(y?p.getAttribute("listIndent"):0)+g,listItemId:y?p.getAttribute("listItemId"):wu.next(),listType:u},p)}})}}function e5(i,t){const e=i.document.selection;if(!e.isCollapsed)return!Wh(i);if(t==="forward")return!0;const s=e.getFirstPosition().parent,r=s.previousSibling;return i.schema.isObject(r)?!1:r.isEmpty?!0:Uh([s,r])}function Xy(i,t,e,n){i.ui.componentFactory.add(t,()=>{const s=t5(qe,i,t,e,n);return s.set({tooltip:!0,isToggleable:!0}),s}),i.ui.componentFactory.add(`menuBar:${t}`,()=>{const s=t5(Ln,i,t,e,n);return s.set({role:"menuitemcheckbox",isToggleable:!0}),s})}function t5(i,t,e,n,s){const r=t.commands.get(e),o=new i(t.locale);return o.set({label:n,icon:s}),o.bind("isOn","isEnabled").to(r,"value","isEnabled"),o.on("execute",()=>{t.execute(e),t.editing.view.focus()}),o}class Ebe extends J{static get pluginName(){return"ListUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor.t;this.editor.ui.componentFactory.has("numberedList")||Xy(this.editor,"numberedList",t("Numbered List"),ve.numberedList),this.editor.ui.componentFactory.has("bulletedList")||Xy(this.editor,"bulletedList",t("Bulleted List"),ve.bulletedList)}}class Cbe extends J{static get requires(){return[qh,Ebe]}static get pluginName(){return"List"}static get isOfficialPlugin(){return!0}}class xbe extends Ze{refresh(){const t=this._getValue();this.value=t,this.isEnabled=t!=null}execute({startIndex:t=1}={}){const e=this.editor.model,n=e.document;let s=Array.from(n.selection.getSelectedBlocks()).filter(r=>It(r)&&Mp(r.getAttribute("listType")));s=Kb(s),e.change(r=>{for(const o of s)r.setAttribute("listStart",t>=0?t:1,o)})}_getValue(){const e=this.editor.model.document,n=ln(e.selection.getSelectedBlocks());return n&&It(n)&&Mp(n.getAttribute("listType"))?n.getAttribute("listStart"):null}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const mV={},gV={},pV={},bV=[{listStyle:"disc",typeAttribute:"disc",listType:"bulleted"},{listStyle:"circle",typeAttribute:"circle",listType:"bulleted"},{listStyle:"square",typeAttribute:"square",listType:"bulleted"},{listStyle:"decimal",typeAttribute:"1",listType:"numbered"},{listStyle:"decimal-leading-zero",typeAttribute:null,listType:"numbered"},{listStyle:"lower-roman",typeAttribute:"i",listType:"numbered"},{listStyle:"upper-roman",typeAttribute:"I",listType:"numbered"},{listStyle:"lower-alpha",typeAttribute:"a",listType:"numbered"},{listStyle:"upper-alpha",typeAttribute:"A",listType:"numbered"},{listStyle:"lower-latin",typeAttribute:"a",listType:"numbered"},{listStyle:"upper-latin",typeAttribute:"A",listType:"numbered"}];for(const{listStyle:i,typeAttribute:t,listType:e}of bV)mV[i]=e,gV[i]=t,t&&(pV[t]=i);function wV(){return bV.map(i=>i.listStyle)}function gC(i){return mV[i]||null}function vV(i){return pV[i]||null}function Jy(i){return gV[i]||null}function kbe(i){switch(i){case"lower-alpha":return"lower-latin";case"upper-alpha":return"upper-latin";default:return i}}class Tbe extends Ze{constructor(e,n,s){super(e);b(this,"defaultType");b(this,"_supportedTypes");this.defaultType=n,this._supportedTypes=s}refresh(){this.value=this._getValue(),this.isEnabled=this._checkEnabled()}execute(e={}){const n=this.editor.model,s=n.document;n.change(r=>{this._tryToConvertItemsToList(e);let o=Array.from(s.selection.getSelectedBlocks()).filter(a=>a.hasAttribute("listType"));if(o.length){o=Kb(o);for(const a of o)r.setAttribute("listStyle",e.type||this.defaultType,a)}})}isStyleTypeSupported(e){return this._supportedTypes?this._supportedTypes.includes(e):!0}_getValue(){const e=ln(this.editor.model.document.selection.getSelectedBlocks());return It(e)?e.getAttribute("listStyle"):null}_checkEnabled(){const e=this.editor,n=e.commands.get("numberedList"),s=e.commands.get("bulletedList");return n.isEnabled||s.isEnabled}_tryToConvertItemsToList(e){if(!e.type)return;const n=gC(e.type);if(!n)return;const s=this.editor,r=`${n}List`;s.commands.get(r).value||s.execute(r)}}class Sbe extends Ze{refresh(){const t=this._getValue();this.value=t,this.isEnabled=t!=null}execute(t={}){const e=this.editor.model,n=e.document;let s=Array.from(n.selection.getSelectedBlocks()).filter(r=>It(r)&&r.getAttribute("listType")=="numbered");s=Kb(s),e.change(r=>{for(const o of s)r.setAttribute("listReversed",!!t.reversed,o)})}_getValue(){const e=this.editor.model.document,n=ln(e.selection.getSelectedBlocks());return It(n)&&n.getAttribute("listType")=="numbered"?n.getAttribute("listReversed"):null}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function n5(i){return(t,e,n)=>{const{writer:s,schema:r,consumable:o}=n;if(o.test(e.viewItem,i.viewConsumables)===!1)return;e.modelRange||Object.assign(e,n.convertChildren(e.viewItem,e.modelCursor));let a=!1;for(const l of e.modelRange.getItems({shallow:!0}))r.checkAttribute(l,i.attributeName)&&i.appliesToListItem(l)&&(l.hasAttribute(i.attributeName)||(s.setAttribute(i.attributeName,i.getAttributeOnUpcast(e.viewItem),l),a=!0));a&&o.consume(e.viewItem,i.viewConsumables)}}class Abe extends J{static get pluginName(){return"ListPropertiesUtils"}static get isOfficialPlugin(){return!0}getAllSupportedStyleTypes(){return wV()}getListTypeFromListStyleType(t){return gC(t)}getListStyleTypeFromTypeAttribute(t){return vV(t)}getTypeAttributeFromListStyleType(t){return Jy(t)}}function yV(i){const{startIndex:t,reversed:e,styles:n}=i;return{styles:Pbe(n),startIndex:t||!1,reversed:e||!1}}function Pbe(i){const t={listTypes:["bulleted","numbered"],useAttribute:!1};return i===!0||(i?Array.isArray(i)||typeof i=="string"?t.listTypes=Bt(i):(t.listTypes=i.listTypes?Bt(i.listTypes):t.listTypes,t.useAttribute=!!i.useAttribute,i.listStyleTypes&&(t.listStyleTypes=i.listStyleTypes)):t.listTypes=[]),t}const Fd="default";class Ibe extends J{static get requires(){return[qh,Abe]}static get pluginName(){return"ListPropertiesEditing"}static get isOfficialPlugin(){return!0}constructor(t){super(t),t.config.define("list.properties",{styles:!0,startIndex:!1,reversed:!1})}init(){const t=this.editor,e=t.model,n=t.plugins.get(qh),s=t.config.get("list.properties"),r=Rbe(s);for(const o of r)o.addCommand(t),e.schema.extend("$listItem",{allowAttributes:o.attributeName}),n.registerDowncastStrategy({scope:"list",attributeName:o.attributeName,setAttributeOnDowncast(a,l,u){o.setAttributeOnDowncast(a,l,u)}});t.conversion.for("upcast").add(o=>{for(const a of r)o.on("element:ol",n5(a)),o.on("element:ul",n5(a))}),n.on("checkAttributes:list",(o,{viewElement:a,modelAttributes:l})=>{for(const u of r)u.getAttributeOnUpcast(a)!=l[u.attributeName]&&(o.return=!0,o.stop())}),this.listenTo(t.commands.get("indentList"),"afterExecute",(o,a)=>{e.change(l=>{for(const u of a)for(const h of r)h.appliesToListItem(u)&&l.setAttribute(h.attributeName,h.defaultValue,u)})}),n.on("postFixer",(o,{listNodes:a,writer:l})=>{for(const{node:u}of a)for(const h of r)h.hasValidAttribute(u)||(h.appliesToListItem(u)?l.setAttribute(h.attributeName,h.defaultValue,u):l.removeAttribute(h.attributeName,u),o.return=!0)}),n.on("postFixer",(o,{listNodes:a,writer:l})=>{for(const{node:u,previousNodeInList:h}of a)if(h&&h.getAttribute("listType")==u.getAttribute("listType"))for(const f of r){const{attributeName:g}=f;if(!f.appliesToListItem(u))continue;const p=h.getAttribute(g);u.getAttribute(g)!=p&&(l.setAttribute(g,p,u),o.return=!0)}})}}function Rbe(i){const t=[],e=yV(i);if(i.styles){const n=e.styles.useAttribute;t.push({attributeName:"listStyle",defaultValue:Fd,viewConsumables:{styles:"list-style-type"},addCommand(s){let r=wV();n&&(r=r.filter(o=>!!Jy(o))),s.commands.add("listStyle",new Tbe(s,Fd,r))},appliesToListItem(s){return s.getAttribute("listType")=="numbered"||s.getAttribute("listType")=="bulleted"},hasValidAttribute(s){if(!this.appliesToListItem(s))return!s.hasAttribute("listStyle");if(!s.hasAttribute("listStyle"))return!1;const r=s.getAttribute("listStyle");return r==Fd?!0:gC(r)==s.getAttribute("listType")},setAttributeOnDowncast(s,r,o){if(r&&r!==Fd)if(n){const a=Jy(r);if(a){s.setAttribute("type",a,o);return}}else{s.setStyle("list-style-type",r,o);return}s.removeStyle("list-style-type",o),s.removeAttribute("type",o)},getAttributeOnUpcast(s){const r=s.getStyle("list-style-type");if(r)return kbe(r);const o=s.getAttribute("type");return o?vV(o):Fd}})}return i.reversed&&t.push({attributeName:"listReversed",defaultValue:!1,viewConsumables:{attributes:"reversed"},addCommand(n){n.commands.add("listReversed",new Sbe(n))},appliesToListItem(n){return n.getAttribute("listType")=="numbered"},hasValidAttribute(n){return this.appliesToListItem(n)==n.hasAttribute("listReversed")},setAttributeOnDowncast(n,s,r){s?n.setAttribute("reversed","reversed",r):n.removeAttribute("reversed",r)},getAttributeOnUpcast(n){return n.hasAttribute("reversed")}}),i.startIndex&&t.push({attributeName:"listStart",defaultValue:1,viewConsumables:{attributes:"start"},addCommand(n){n.commands.add("listStart",new xbe(n))},appliesToListItem(n){return Mp(n.getAttribute("listType"))},hasValidAttribute(n){return this.appliesToListItem(n)==n.hasAttribute("listStart")},setAttributeOnDowncast(n,s,r){s==0||s>1?n.setAttribute("start",s,r):n.removeAttribute("start",r)},getAttributeOnUpcast(n){const s=n.getAttribute("start");return s>=0?s:1}}),t}class _V extends xe{constructor(e,{enabledProperties:n,styleButtonViews:s,styleGridAriaLabel:r}){super(e);b(this,"children");b(this,"stylesView",null);b(this,"additionalPropertiesCollapsibleView",null);b(this,"startIndexFieldView",null);b(this,"reversedSwitchButtonView",null);b(this,"focusTracker",new Gt);b(this,"keystrokes",new tn);b(this,"focusables",new Un);b(this,"focusCycler");const o=["ck","ck-list-properties"];this.children=this.createCollection(),this.focusCycler=new fi({focusables:this.focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),s&&s.length?(this.stylesView=this._createStylesView(s,r),this.children.add(this.stylesView)):o.push("ck-list-properties_without-styles"),(n.startIndex||n.reversed)&&(this._addNumberedListPropertyViews(n),o.push("ck-list-properties_with-numbered-properties")),this.setTemplate({tag:"div",attributes:{class:o},children:this.children})}render(){if(super.render(),this.stylesView){this.focusables.add(this.stylesView),this.focusTracker.add(this.stylesView.element),(this.startIndexFieldView||this.reversedSwitchButtonView)&&(this.focusables.add(this.children.last.buttonView),this.focusTracker.add(this.children.last.buttonView.element));for(const e of this.stylesView.children)this.stylesView.focusTracker.add(e.element);GE({keystrokeHandler:this.stylesView.keystrokes,focusTracker:this.stylesView.focusTracker,gridItems:this.stylesView.children,numberOfColumns:()=>Ce.window.getComputedStyle(this.stylesView.element).getPropertyValue("grid-template-columns").split(" ").length,uiLanguageDirection:this.locale&&this.locale.uiLanguageDirection})}if(this.startIndexFieldView){this.focusables.add(this.startIndexFieldView),this.focusTracker.add(this.startIndexFieldView.element);const e=n=>n.stopPropagation();this.keystrokes.set("arrowright",e),this.keystrokes.set("arrowleft",e),this.keystrokes.set("arrowup",e),this.keystrokes.set("arrowdown",e)}this.reversedSwitchButtonView&&(this.focusables.add(this.reversedSwitchButtonView),this.focusTracker.add(this.reversedSwitchButtonView.element)),this.keystrokes.listenTo(this.element)}focus(){this.focusCycler.focusFirst()}focusLast(){this.focusCycler.focusLast()}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}_createStylesView(e,n){const s=new xe(this.locale);return s.children=s.createCollection(),s.children.addMany(e),s.setTemplate({tag:"div",attributes:{"aria-label":n,class:["ck","ck-list-styles-list"]},children:s.children}),s.children.delegate("execute").to(this),s.focus=function(){for(const r of this.children)if(r instanceof qe&&r.isOn){r.focus();return}this.children.first.focus()},s.focusTracker=new Gt,s.keystrokes=new tn,s.render(),s.keystrokes.listenTo(s.element),s}_addNumberedListPropertyViews(e){const n=this.locale.t,s=[];e.startIndex&&(this.startIndexFieldView=this._createStartIndexField(),s.push(this.startIndexFieldView)),e.reversed&&(this.reversedSwitchButtonView=this._createReversedSwitchButton(),s.push(this.reversedSwitchButtonView)),this.stylesView?(this.additionalPropertiesCollapsibleView=new WM(this.locale,s),this.additionalPropertiesCollapsibleView.set({label:n("List properties"),isCollapsed:!0}),this.additionalPropertiesCollapsibleView.buttonView.bind("isEnabled").toMany(s,"isEnabled",(...r)=>r.some(o=>o)),this.additionalPropertiesCollapsibleView.buttonView.on("change:isEnabled",(r,o,a)=>{a||(this.additionalPropertiesCollapsibleView.isCollapsed=!0)}),this.children.add(this.additionalPropertiesCollapsibleView)):this.children.addMany(s)}_createStartIndexField(){const e=this.locale.t,n=new bn(this.locale,nL);return n.set({label:e("Start at"),class:"ck-numbered-list-properties__start-index"}),n.fieldView.set({min:0,step:1,value:1,inputMode:"numeric"}),n.fieldView.on("input",()=>{const s=n.fieldView.element,r=s.valueAsNumber;if(Number.isNaN(r)){n.errorText=e("Invalid start index value.");return}s.checkValidity()?this.fire("listStart",{startIndex:r}):n.errorText=e("Start index must be greater than 0.")}),n}_createReversedSwitchButton(){const e=this.locale.t,n=new pf(this.locale);return n.set({withText:!0,label:e("Reversed order"),class:"ck-numbered-list-properties__reversed-order"}),n.delegate("execute").to(this,"listReversed"),n}}var Obe='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M11 27a3 3 0 1 1 0 6 3 3 0 0 1 0-6zm0-9a3 3 0 1 1 0 6 3 3 0 0 1 0-6zm0-9a3 3 0 1 1 0 6 3 3 0 0 1 0-6z"/></svg>',Nbe='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M11 27a3 3 0 1 1 0 6 3 3 0 0 1 0-6zm0 1a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm0-10a3 3 0 1 1 0 6 3 3 0 0 1 0-6zm0 1a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm0-10a3 3 0 1 1 0 6 3 3 0 0 1 0-6zm0 1a2 2 0 1 0 0 4 2 2 0 0 0 0-4z"/></svg>',Mbe='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M14 27v6H8v-6h6zm0-9v6H8v-6h6zm0-9v6H8V9h6z"/></svg>',Lbe='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M10.29 15V8.531H9.286c-.14.393-.4.736-.778 1.03-.378.295-.728.495-1.05.6v1.121a4.257 4.257 0 0 0 1.595-.936V15h1.235zm3.343 0v-1.235h-1.235V15h1.235zM11.3 24v-1.147H8.848c.064-.111.148-.226.252-.343.104-.117.351-.354.74-.712.39-.357.66-.631.81-.821.225-.288.39-.562.494-.824.104-.263.156-.539.156-.829 0-.51-.182-.936-.545-1.279-.363-.342-.863-.514-1.499-.514-.58 0-1.063.148-1.45.444-.387.296-.617.784-.69 1.463l1.23.124c.024-.36.112-.619.264-.774.153-.155.358-.233.616-.233.26 0 .465.074.613.222.148.148.222.36.222.635 0 .25-.085.501-.255.756-.126.185-.468.536-1.024 1.055-.692.641-1.155 1.156-1.389 1.544-.234.389-.375.8-.422 1.233H11.3zm2.333 0v-1.235h-1.235V24h1.235zM9.204 34.11c.615 0 1.129-.2 1.542-.598.413-.398.62-.88.62-1.446 0-.39-.11-.722-.332-.997a1.5 1.5 0 0 0-.886-.532c.619-.337.928-.788.928-1.353 0-.399-.151-.756-.453-1.073-.366-.386-.852-.58-1.459-.58a2.25 2.25 0 0 0-.96.2 1.617 1.617 0 0 0-.668.55c-.16.232-.28.544-.358.933l1.138.194c.032-.282.123-.495.272-.642.15-.146.33-.22.54-.22.215 0 .386.065.515.194s.193.302.193.518c0 .255-.087.46-.263.613-.176.154-.43.227-.765.218l-.136 1.006c.22-.061.409-.092.567-.092.24 0 .444.09.61.272.168.182.251.428.251.739 0 .328-.087.589-.261.782a.833.833 0 0 1-.644.29.841.841 0 0 1-.607-.242c-.167-.16-.27-.394-.307-.698l-1.196.145c.062.542.285.98.668 1.316.384.335.868.503 1.45.503zm4.43-.11v-1.235h-1.236V34h1.235z"/></svg>',Vbe='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M5.714 15.11c.624 0 1.11-.22 1.46-.66.421-.533.632-1.408.632-2.627 0-1.222-.21-2.096-.629-2.624-.351-.445-.839-.668-1.463-.668-.624 0-1.11.22-1.459.66-.422.533-.633 1.406-.633 2.619 0 1.236.192 2.095.576 2.577.384.482.89.723 1.516.723zm0-1.024a.614.614 0 0 1-.398-.14c-.115-.094-.211-.283-.287-.565-.077-.283-.115-.802-.115-1.558s.043-1.294.128-1.613c.064-.246.155-.417.272-.512a.617.617 0 0 1 .4-.143.61.61 0 0 1 .398.143c.116.095.211.284.288.567.076.283.114.802.114 1.558s-.043 1.292-.128 1.608c-.064.246-.155.417-.272.512a.617.617 0 0 1-.4.143zm6.078.914V8.531H10.79c-.14.393-.4.736-.778 1.03-.378.295-.728.495-1.05.6v1.121a4.257 4.257 0 0 0 1.595-.936V15h1.235zm3.344 0v-1.235h-1.235V15h1.235zm-9.422 9.11c.624 0 1.11-.22 1.46-.66.421-.533.632-1.408.632-2.627 0-1.222-.21-2.096-.629-2.624-.351-.445-.839-.668-1.463-.668-.624 0-1.11.22-1.459.66-.422.533-.633 1.406-.633 2.619 0 1.236.192 2.095.576 2.577.384.482.89.723 1.516.723zm0-1.024a.614.614 0 0 1-.398-.14c-.115-.094-.211-.283-.287-.565-.077-.283-.115-.802-.115-1.558s.043-1.294.128-1.613c.064-.246.155-.417.272-.512a.617.617 0 0 1 .4-.143.61.61 0 0 1 .398.143c.116.095.211.284.288.567.076.283.114.802.114 1.558s-.043 1.292-.128 1.608c-.064.246-.155.417-.272.512a.617.617 0 0 1-.4.143zm7.088.914v-1.147H10.35c.065-.111.149-.226.253-.343.104-.117.35-.354.74-.712.39-.357.66-.631.81-.821.225-.288.39-.562.493-.824.104-.263.156-.539.156-.829 0-.51-.181-.936-.544-1.279-.364-.342-.863-.514-1.499-.514-.58 0-1.063.148-1.45.444-.387.296-.617.784-.69 1.463l1.23.124c.024-.36.112-.619.264-.774.152-.155.357-.233.615-.233.261 0 .465.074.613.222.148.148.222.36.222.635 0 .25-.085.501-.255.756-.126.185-.467.536-1.024 1.055-.691.641-1.154 1.156-1.388 1.544-.235.389-.375.8-.422 1.233h4.328zm2.334 0v-1.235h-1.235V24h1.235zM5.714 34.11c.624 0 1.11-.22 1.46-.66.421-.533.632-1.408.632-2.627 0-1.222-.21-2.096-.629-2.624-.351-.445-.839-.668-1.463-.668-.624 0-1.11.22-1.459.66-.422.533-.633 1.406-.633 2.619 0 1.236.192 2.095.576 2.577.384.482.89.723 1.516.723zm0-1.024a.614.614 0 0 1-.398-.14c-.115-.094-.211-.283-.287-.565-.077-.283-.115-.802-.115-1.558s.043-1.294.128-1.613c.064-.246.155-.417.272-.512a.617.617 0 0 1 .4-.143.61.61 0 0 1 .398.143c.116.095.211.284.288.567.076.283.114.802.114 1.558s-.043 1.292-.128 1.608c-.064.246-.155.417-.272.512a.617.617 0 0 1-.4.143zm4.992 1.024c.616 0 1.13-.2 1.543-.598.413-.398.62-.88.62-1.446 0-.39-.111-.722-.332-.997a1.5 1.5 0 0 0-.886-.532c.618-.337.927-.788.927-1.353 0-.399-.15-.756-.452-1.073-.366-.386-.853-.58-1.46-.58a2.25 2.25 0 0 0-.96.2 1.617 1.617 0 0 0-.667.55c-.16.232-.28.544-.359.933l1.139.194c.032-.282.123-.495.272-.642.15-.146.33-.22.54-.22.214 0 .386.065.515.194s.193.302.193.518c0 .255-.088.46-.264.613-.175.154-.43.227-.764.218l-.136 1.006c.22-.061.408-.092.566-.092.24 0 .444.09.611.272.167.182.25.428.25.739 0 .328-.086.589-.26.782a.833.833 0 0 1-.644.29.841.841 0 0 1-.607-.242c-.167-.16-.27-.394-.308-.698l-1.195.145c.062.542.284.98.668 1.316.384.335.867.503 1.45.503zm4.43-.11v-1.235h-1.235V34h1.235z"/></svg>',Dbe='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M11.88 8.7V7.558h-1.234V8.7h1.234zm0 5.3V9.333h-1.234V14h1.234zm2.5 0v-1.235h-1.234V14h1.235zm-4.75 4.7v-1.142H8.395V18.7H9.63zm0 5.3v-4.667H8.395V24H9.63zm2.5-5.3v-1.142h-1.234V18.7h1.235zm0 5.3v-4.667h-1.234V24h1.235zm2.501 0v-1.235h-1.235V24h1.235zM7.38 28.7v-1.142H6.145V28.7H7.38zm0 5.3v-4.667H6.145V34H7.38zm2.5-5.3v-1.142H8.646V28.7H9.88zm0 5.3v-4.667H8.646V34H9.88zm2.5-5.3v-1.142h-1.234V28.7h1.235zm0 5.3v-4.667h-1.234V34h1.235zm2.501 0v-1.235h-1.235V34h1.235z"/></svg>',Bbe='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M11.916 15V8.558h-1.301V15h1.3zm2.465 0v-1.235h-1.235V15h1.235zM9.665 25v-6.442h-1.3V25h1.3zm2.5 0v-6.442h-1.3V25h1.3zm2.466 0v-1.235h-1.235V25h1.235zm-7.216 9v-6.442h-1.3V34h1.3zm2.5 0v-6.442h-1.3V34h1.3zm2.501 0v-6.442h-1.3V34h1.3zm2.465 0v-1.235h-1.235V34h1.235z"/></svg>',Fbe='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M9.62 14.105c.272 0 .528-.05.768-.153s.466-.257.677-.462c.009.024.023.072.044.145.047.161.086.283.119.365h1.221a2.649 2.649 0 0 1-.222-.626c-.04-.195-.059-.498-.059-.908l.013-1.441c0-.536-.055-.905-.165-1.105-.11-.201-.3-.367-.569-.497-.27-.13-.68-.195-1.23-.195-.607 0-1.064.108-1.371.325-.308.217-.525.55-.65 1.002l1.12.202c.076-.217.176-.369.299-.455.123-.086.294-.13.514-.13.325 0 .546.05.663.152.118.101.176.27.176.508v.123c-.222.093-.622.194-1.2.303-.427.082-.755.178-.982.288-.227.11-.403.268-.53.474a1.327 1.327 0 0 0-.188.706c0 .398.138.728.415.988.277.261.656.391 1.136.391zm.368-.87a.675.675 0 0 1-.492-.189.606.606 0 0 1-.193-.448c0-.176.08-.32.241-.435.106-.07.33-.142.673-.215a7.19 7.19 0 0 0 .751-.19v.247c0 .296-.016.496-.048.602a.773.773 0 0 1-.295.409 1.07 1.07 0 0 1-.637.22zm4.645.765v-1.235h-1.235V14h1.235zM10.2 25.105c.542 0 1.003-.215 1.382-.646.38-.43.57-1.044.57-1.84 0-.771-.187-1.362-.559-1.774a1.82 1.82 0 0 0-1.41-.617c-.522 0-.973.216-1.354.65v-2.32H7.594V25h1.147v-.686a1.9 1.9 0 0 0 .67.592c.26.133.523.2.79.2zm-.299-.975c-.354 0-.638-.164-.852-.492-.153-.232-.229-.59-.229-1.073 0-.468.098-.818.295-1.048a.93.93 0 0 1 .738-.345c.302 0 .55.118.743.354.193.236.29.62.29 1.154 0 .5-.096.868-.288 1.1-.192.233-.424.35-.697.35zm4.478.87v-1.235h-1.234V25h1.234zm-4.017 9.105c.6 0 1.08-.142 1.437-.426.357-.284.599-.704.725-1.261l-1.213-.207c-.061.326-.167.555-.316.688a.832.832 0 0 1-.576.2.916.916 0 0 1-.75-.343c-.185-.228-.278-.62-.278-1.173 0-.498.091-.853.274-1.066.183-.212.429-.318.736-.318.232 0 .42.061.565.184.145.123.238.306.28.55l1.216-.22c-.146-.501-.387-.874-.722-1.119-.336-.244-.788-.366-1.356-.366-.695 0-1.245.214-1.653.643-.407.43-.61 1.03-.61 1.8 0 .762.202 1.358.608 1.788.406.431.95.646 1.633.646zM14.633 34v-1.235h-1.235V34h1.235z"/></svg>',$be='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="m7.88 15 .532-1.463h2.575L11.549 15h1.415l-2.58-6.442H9.01L6.5 15h1.38zm2.69-2.549H8.811l.87-2.39.887 2.39zM14.88 15v-1.235h-1.234V15h1.234zM9.352 25c.83-.006 1.352-.02 1.569-.044.346-.038.636-.14.872-.305.236-.166.422-.387.558-.664.137-.277.205-.562.205-.855 0-.372-.106-.695-.317-.97-.21-.276-.512-.471-.905-.585a1.51 1.51 0 0 0 .661-.567 1.5 1.5 0 0 0 .244-.83c0-.28-.066-.53-.197-.754a1.654 1.654 0 0 0-.495-.539 1.676 1.676 0 0 0-.672-.266c-.25-.042-.63-.063-1.14-.063H7.158V25h2.193zm.142-3.88H8.46v-1.49h.747c.612 0 .983.007 1.112.022.217.026.38.102.49.226.11.125.165.287.165.486a.68.68 0 0 1-.192.503.86.86 0 0 1-.525.23 11.47 11.47 0 0 1-.944.023h.18zm.17 2.795H8.46v-1.723h1.05c.592 0 .977.03 1.154.092.177.062.313.16.406.295a.84.84 0 0 1 .14.492c0 .228-.06.41-.181.547a.806.806 0 0 1-.473.257c-.126.026-.423.04-.892.04zM14.88 25v-1.235h-1.234V25h1.234zm-5.018 9.11c.691 0 1.262-.17 1.711-.512.45-.341.772-.864.965-1.567l-1.261-.4c-.109.472-.287.818-.536 1.037-.25.22-.547.33-.892.33-.47 0-.85-.173-1.143-.519-.293-.345-.44-.925-.44-1.74 0-.767.15-1.322.447-1.665.297-.343.684-.514 1.162-.514.346 0 .64.096.881.29.242.193.4.457.477.79l1.288-.307c-.147-.516-.367-.911-.66-1.187-.492-.465-1.132-.698-1.92-.698-.902 0-1.63.296-2.184.89-.554.593-.83 1.426-.83 2.498 0 1.014.275 1.813.825 2.397.551.585 1.254.877 2.11.877zM14.88 34v-1.235h-1.234V34h1.234z"/></svg>';class zbe extends J{static get pluginName(){return"ListPropertiesUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.locale.t,n=t.config.get("list.properties"),s=yV(n),r=s.styles.listTypes;if(r.includes("bulleted")){const o=[{label:e("Toggle the disc list style"),tooltip:e("Disc"),type:"disc",icon:Obe},{label:e("Toggle the circle list style"),tooltip:e("Circle"),type:"circle",icon:Nbe},{label:e("Toggle the square list style"),tooltip:e("Square"),type:"square",icon:Mbe}],a=e("Bulleted List"),l=e("Bulleted list styles toolbar"),u="bulletedList";t.ui.componentFactory.add(u,i5({editor:t,normalizedConfig:s,parentCommandName:u,buttonLabel:a,buttonIcon:ve.bulletedList,styleGridAriaLabel:l,styleDefinitions:o})),t.ui.componentFactory.add(`menuBar:${u}`,s5({editor:t,normalizedConfig:s,parentCommandName:u,buttonLabel:a,styleGridAriaLabel:l,styleDefinitions:o}))}if(r.includes("numbered")||n.startIndex||n.reversed){const o=[{label:e("Toggle the decimal list style"),tooltip:e("Decimal"),type:"decimal",icon:Lbe},{label:e("Toggle the decimal with leading zero list style"),tooltip:e("Decimal with leading zero"),type:"decimal-leading-zero",icon:Vbe},{label:e("Toggle the lower–roman list style"),tooltip:e("Lower–roman"),type:"lower-roman",icon:Dbe},{label:e("Toggle the upper–roman list style"),tooltip:e("Upper-roman"),type:"upper-roman",icon:Bbe},{label:e("Toggle the lower–latin list style"),tooltip:e("Lower-latin"),type:"lower-latin",icon:Fbe},{label:e("Toggle the upper–latin list style"),tooltip:e("Upper-latin"),type:"upper-latin",icon:$be}],a=e("Numbered List"),l=e("Numbered list styles toolbar"),u="numberedList";t.ui.componentFactory.add(u,i5({editor:t,normalizedConfig:s,parentCommandName:u,buttonLabel:a,buttonIcon:ve.numberedList,styleGridAriaLabel:l,styleDefinitions:o})),r.includes("numbered")&&t.ui.componentFactory.add(`menuBar:${u}`,s5({editor:t,normalizedConfig:s,parentCommandName:u,buttonLabel:a,styleGridAriaLabel:l,styleDefinitions:o}))}}}function i5({editor:i,normalizedConfig:t,parentCommandName:e,buttonLabel:n,buttonIcon:s,styleGridAriaLabel:r,styleDefinitions:o}){const a=i.commands.get(e);return l=>{const u=ti(l,bf),h=u.buttonView;return u.bind("isEnabled").to(a),u.class="ck-list-styles-dropdown",h.on("execute",()=>{i.execute(e),i.editing.view.focus()}),h.set({label:n,icon:s,tooltip:!0,isToggleable:!0}),h.bind("isOn").to(a,"value",f=>!!f),u.once("change:isOpen",()=>{const f=jbe({editor:i,normalizedConfig:t,dropdownView:u,parentCommandName:e,styleGridAriaLabel:r,styleDefinitions:o});u.panelView.children.add(f)}),u.on("execute",()=>{i.editing.view.focus()}),u}}function EV({editor:i,listStyleCommand:t,parentCommandName:e}){const n=i.locale,s=i.commands.get(e);return({label:r,type:o,icon:a,tooltip:l})=>{const u=new qe(n);return u.set({label:r,icon:a,tooltip:l}),u.bind("isOn").to(t,"value",h=>h===o),u.on("execute",()=>{s.value?t.value===o?i.execute(e):t.value!==o&&i.execute("listStyle",{type:o}):i.model.change(()=>{i.execute("listStyle",{type:o})})}),u}}function jbe({editor:i,normalizedConfig:t,dropdownView:e,parentCommandName:n,styleDefinitions:s,styleGridAriaLabel:r}){const o=i.locale,a={...t,...n!="numberedList"?{startIndex:!1,reversed:!1}:null},l=n.replace("List","");let u=null;if(t.styles.listTypes.includes(l)){const f=i.commands.get("listStyle"),g=EV({editor:i,parentCommandName:n,listStyleCommand:f}),p=t.styles.listStyleTypes;let y=s;if(p){const C=p[l];C&&(y=s.filter(k=>C.includes(k.type)))}const E=CV(f);u=y.filter(E).map(g)}const h=new _V(o,{styleGridAriaLabel:r,enabledProperties:a,styleButtonViews:u});if(t.styles.listTypes.includes(l)&&jb(e,()=>h.stylesView.children.find(f=>f.isOn)),a.startIndex){const f=i.commands.get("listStart");h.startIndexFieldView.bind("isEnabled").to(f),h.startIndexFieldView.fieldView.bind("value").to(f),h.on("listStart",(g,p)=>i.execute("listStart",p))}if(a.reversed){const f=i.commands.get("listReversed");h.reversedSwitchButtonView.bind("isEnabled").to(f),h.reversedSwitchButtonView.bind("isOn").to(f,"value",g=>!!g),h.on("listReversed",()=>{const g=f.value;i.execute("listReversed",{reversed:!g})})}return h.delegate("execute").to(e),h}function s5({editor:i,normalizedConfig:t,parentCommandName:e,buttonLabel:n,styleGridAriaLabel:s,styleDefinitions:r}){return o=>{const a=new Yi(o),l=i.commands.get(e),u=i.commands.get("listStyle"),h=CV(u),f=EV({editor:i,parentCommandName:e,listStyleCommand:u}),g=t.styles.listStyleTypes;let p=r;if(g){const C=l.type,k=g[C];k&&(p=r.filter(T=>k.includes(T.type)))}const y=p.filter(h).map(f),E=new _V(o,{styleGridAriaLabel:s,enabledProperties:{...t,startIndex:!1,reversed:!1},styleButtonViews:y});return E.delegate("execute").to(a),a.buttonView.set({label:n,icon:ve[e]}),a.panelView.children.add(E),a.bind("isEnabled").to(l,"isEnabled"),a.on("execute",()=>{i.editing.view.focus()}),a}}function CV(i){return typeof i.isStyleTypeSupported=="function"?t=>i.isStyleTypeSupported(t.type):()=>!0}class Hbe extends J{static get requires(){return[Ibe,zbe]}static get pluginName(){return"ListProperties"}static get isOfficialPlugin(){return!0}}class Ube extends Ze{constructor(t){super(t),this.on("execute",()=>{this.refresh()},{priority:"highest"})}refresh(){const t=this._getSelectedItems();this.value=this._getValue(t),this.isEnabled=!!t.length}execute(t={}){this.editor.model.change(e=>{const n=this._getSelectedItems(),s=t.forceValue===void 0?!this._getValue(n):t.forceValue;for(const r of n)s?e.setAttribute("todoListChecked",!0,r):e.removeAttribute("todoListChecked",r)})}_getValue(t){return t.every(e=>e.getAttribute("todoListChecked"))}_getSelectedItems(){const t=this.editor.model,e=t.schema,n=t.document.selection.getFirstRange(),s=n.start.parent,r=[];e.checkAttribute(s,"todoListChecked")&&r.push(...vu(s));for(const o of n.getItems({shallow:!0}))e.checkAttribute(o,"todoListChecked")&&!r.includes(o)&&r.push(...vu(o));return r}}class Wbe extends Nr{constructor(){super(...arguments);b(this,"domEventType",["change"])}onDomEvent(e){if(e.target){const n=this.view.domConverter.mapDomToView(e.target);n&&n.is("element","input")&&n.getAttribute("type")=="checkbox"&&n.findAncestor({classes:"todo-list__label"})&&this.fire("todoCheckboxChange",e)}}}const qbe=Pb("Ctrl+Enter");class Gbe extends J{static get pluginName(){return"TodoListEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[qh]}init(){const t=this.editor,e=t.model,n=t.editing,s=t.plugins.get(qh),o=t.config.get("list.multiBlock")?"paragraph":"listItem";t.commands.add("todoList",new Zd(t,"todo")),t.commands.add("checkTodoList",new Ube(t)),n.view.addObserver(Wbe),e.schema.extend("$listItem",{allowAttributes:"todoListChecked"}),e.schema.addAttributeCheck(a=>{const l=a.last;if(!l.getAttribute("listItemId")||l.getAttribute("listType")!="todo")return!1},"todoListChecked"),t.conversion.for("upcast").add(a=>{a.on("element:input",Ybe()),a.on("element:li",Kbe(),{priority:"low"}),a.on("element:label",C1({name:"label",classes:"todo-list__label"})),a.on("element:label",C1({name:"label",classes:["todo-list__label","todo-list__label_without-description"]})),a.on("element:span",C1({name:"span",classes:"todo-list__label__description"})),a.on("element:ul",Zbe({name:"ul",classes:"todo-list"}))}),t.conversion.for("downcast").elementToElement({model:o,view:(a,{writer:l})=>{if(dg(a,s.getListAttributeNames()))return l.createContainerElement("span",{class:"todo-list__label__description"})},converterPriority:"highest"}),s.registerDowncastStrategy({scope:"list",attributeName:"listType",setAttributeOnDowncast(a,l,u){l=="todo"?a.addClass("todo-list",u):a.removeClass("todo-list",u)}}),s.registerDowncastStrategy({scope:"itemMarker",attributeName:"todoListChecked",createElement(a,l,{dataPipeline:u}){if(l.getAttribute("listType")!="todo")return null;const h=a.createUIElement("input",{type:"checkbox",...l.getAttribute("todoListChecked")?{checked:"checked"}:null,...u?{disabled:"disabled"}:{tabindex:"-1"}});if(u)return h;const f=a.createContainerElement("span",{contenteditable:"false"},h);return f.getFillerOffset=()=>null,f},canWrapElement(a){return dg(a,s.getListAttributeNames())},createWrapperElement(a,l,{dataPipeline:u}){const h=["todo-list__label"];return dg(l,s.getListAttributeNames())||h.push("todo-list__label_without-description"),a.createAttributeElement(u?"label":"span",{class:h.join(" ")})}}),s.on("checkElement",(a,{modelElement:l,viewElement:u})=>{const h=dg(l,s.getListAttributeNames());u.hasClass("todo-list__label__description")!=h&&(a.return=!0,a.stop())}),s.on("checkElement",(a,{modelElement:l,viewElement:u})=>{const h=l.getAttribute("listType")=="todo"&&po(l);let f=!1;const g=t.editing.view.createPositionBefore(u).getWalker({direction:"backward"});for(const{item:p}of g){if(p.is("element")&&t.editing.mapper.toModelElement(p))break;p.is("element","input")&&p.getAttribute("type")=="checkbox"&&(f=!0)}f!=h&&(a.return=!0,a.stop())}),s.on("postFixer",(a,{listNodes:l,writer:u})=>{for(const{node:h,previousNodeInList:f}of l){if(!f||f.getAttribute("listItemId")!=h.getAttribute("listItemId"))continue;const g=f.hasAttribute("todoListChecked"),p=h.hasAttribute("todoListChecked");p&&!g?(u.removeAttribute("todoListChecked",h),a.return=!0):!p&&g&&(u.setAttribute("todoListChecked",!0,h),a.return=!0)}}),e.document.registerPostFixer(a=>{const l=e.document.differ.getChanges();let u=!1;for(const h of l)if(h.type=="attribute"&&h.attributeKey=="listType"){const f=h.range.start.nodeAfter;h.attributeOldValue=="todo"&&f.hasAttribute("todoListChecked")&&(a.removeAttribute("todoListChecked",f),u=!0)}else if(h.type=="insert"&&h.name!="$text")for(const{item:f}of a.createRangeOn(h.position.nodeAfter))f.is("element")&&f.getAttribute("listType")!="todo"&&f.hasAttribute("todoListChecked")&&(a.removeAttribute("todoListChecked",f),u=!0);return u}),this.listenTo(n.view.document,"keydown",(a,l)=>{Cl(l)===qbe&&(t.execute("checkTodoList"),a.stop())},{priority:"high"}),this.listenTo(n.view.document,"todoCheckboxChange",(a,l)=>{const u=l.target;if(!u||!u.is("element","input"))return;const h=n.view.createPositionAfter(u),g=n.mapper.toModelPosition(h).parent;g&&It(g)&&g.getAttribute("listType")=="todo"&&this._handleCheckmarkChange(g)}),this.listenTo(n.view.document,"arrowKey",Jbe(e,t.locale),{context:"$text"}),this.listenTo(n.mapper,"viewToModelPosition",(a,l)=>{const u=l.viewPosition.parent,h=u.is("attributeElement","li")&&l.viewPosition.offset==0,f=r5(u)&&l.viewPosition.offset<=1,g=u.is("element","span")&&u.getAttribute("contenteditable")=="false"&&r5(u.parent);if(!h&&!f&&!g)return;const p=l.modelPosition.nodeAfter;p&&p.getAttribute("listType")=="todo"&&(l.modelPosition=e.createPositionAt(p,0))},{priority:"low"}),this._initAriaAnnouncements()}_handleCheckmarkChange(t){const e=this.editor,n=e.model,s=Array.from(n.document.selection.getRanges());n.change(r=>{r.setSelection(t,"end"),e.execute("checkTodoList"),r.setSelection(s)})}_initAriaAnnouncements(){const{model:t,ui:e,t:n}=this.editor;let s=null;e&&t.document.selection.on("change:range",()=>{const r=t.document.selection.focus.parent,o=o5(s),a=o5(r);o&&!a?e.ariaLiveAnnouncer.announce(n("Leaving a to-do list")):!o&&a&&e.ariaLiveAnnouncer.announce(n("Entering a to-do list")),s=r})}}function Kbe(){return(i,t,e)=>{const{writer:n,schema:s}=e;if(!t.modelRange)return;const r=Array.from(t.modelRange.getItems({shallow:!0})).filter(o=>o.getAttribute("listType")==="todo"&&s.checkAttribute(o,"listItemId")).reduce((o,a)=>{const l=a.getAttribute("listItemId");return o.has(l)||o.set(l,vu(a)),o},new Map);for(const[,o]of r.entries())if(o.some(a=>a.getAttribute("todoListChecked")))for(const a of o)n.setAttribute("todoListChecked",!0,a)}}function Ybe(){return(i,t,e)=>{const n=t.modelCursor,s=n.parent,r=t.viewItem;if(!e.consumable.test(r,{name:!0})||r.getAttribute("type")!="checkbox"||!n.isAtStart||!s.hasAttribute("listType"))return;e.consumable.consume(r,{name:!0});const o=e.writer;o.setAttribute("listType","todo",s),t.viewItem.hasAttribute("checked")&&o.setAttribute("todoListChecked",!0,s),t.modelRange=o.createRange(n)}}function C1(i){const t=new ns(i);return(e,n,s)=>{const r=t.match(n.viewItem);r&&s.consumable.consume(n.viewItem,r.match)&&Object.assign(n,s.convertChildren(n.viewItem,n.modelCursor))}}function Zbe(i){const t=new ns(i);return(e,n,s)=>{const r=t.match(n.viewItem);if(!r)return;const o=r.match;o.name=!1,s.consumable.consume(n.viewItem,o)}}function dg(i,t){return(i.is("element","paragraph")||i.is("element","listItem"))&&i.getAttribute("listType")=="todo"&&po(i)&&Xbe(i,t)}function Xbe(i,t){for(const e of i.getAttributeKeys())if(!e.startsWith("selection:")&&!t.includes(e))return!1;return!0}function Jbe(i,t){return(e,n)=>{const s=Ib(n.keyCode,t.contentLanguageDirection),r=i.schema,o=i.document.selection;if(!o.isCollapsed)return;const a=o.getFirstPosition(),l=a.parent;if(s=="right"&&a.isAtEnd){const u=r.getNearestSelectionRange(i.createPositionAfter(l),"forward");if(!u)return;const h=u.start.parent;h&&It(h)&&h.getAttribute("listType")=="todo"&&(i.change(f=>f.setSelection(u)),n.preventDefault(),n.stopPropagation(),e.stop())}else if(s=="left"&&a.isAtStart&&It(l)&&l.getAttribute("listType")=="todo"){const u=r.getNearestSelectionRange(i.createPositionBefore(l),"backward");if(!u)return;i.change(h=>h.setSelection(u)),n.preventDefault(),n.stopPropagation(),e.stop()}}}function r5(i){return!!i&&i.is("attributeElement")&&i.hasClass("todo-list__label")}function o5(i){return!i||!i.is("element","paragraph")&&!i.is("element","listItem")?!1:i.getAttribute("listType")=="todo"}class Qbe extends J{static get pluginName(){return"TodoListUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor.t;Xy(this.editor,"todoList",t("To-do List"),ve.todoList)}}class ewe extends J{static get requires(){return[Gbe,Qbe]}static get pluginName(){return"TodoList"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 *//**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function a5(i,t){const e=(n,s,r)=>{if(!r.consumable.consume(s.item,n.name))return;const o=s.attributeNewValue,a=r.writer,l=r.mapper.toViewElement(s.item),u=[...l.getChildren()].find(f=>f.getCustomProperty("media-content"));a.remove(u);const h=i.getMediaViewElement(a,o,t);a.insert(a.createPositionAt(l,0),h)};return n=>{n.on("attribute:url:media",e)}}function twe(i,t,e){return t.setCustomProperty("media",!0,i),nC(i,t,{label:e})}function l5(i,t,e,n){return i.createContainerElement("figure",{class:"media"},[t.getMediaViewElement(i,e,n),i.createSlot()])}function c5(i){const t=i.getSelectedElement();return t&&t.is("element","media")?t:null}function xV(i,t,e,n){i.change(s=>{const r=s.createElement("media",{url:t});i.insertObject(r,e,null,{setSelection:"on",findOptimalPosition:n?"auto":void 0})})}class nwe extends Ze{refresh(){const t=this.editor.model,e=t.document.selection,n=c5(e);this.value=n?n.getAttribute("url"):void 0,this.isEnabled=swe(e)||iwe(e,t)}execute(t){const e=this.editor.model,n=e.document.selection,s=c5(n);s?e.change(r=>{r.setAttribute("url",t,s)}):xV(e,t,n,!0)}}function iwe(i,t){let n=EL(i,t).start.parent;return n.isEmpty&&!t.schema.isLimit(n)&&(n=n.parent),t.schema.checkChild(n,"media")}function swe(i){const t=i.getSelectedElement();return!!t&&t.name==="media"}var rwe='<svg viewBox="0 0 64 42" xmlns="http://www.w3.org/2000/svg"><path d="M47.426 17V3.713L63.102 0v19.389h-.001l.001.272c0 1.595-2.032 3.43-4.538 4.098-2.506.668-4.538-.083-4.538-1.678 0-1.594 2.032-3.43 4.538-4.098.914-.244 2.032-.565 2.888-.603V4.516L49.076 7.447v9.556A1.014 1.014 0 0 0 49 17h-1.574zM29.5 17h-8.343a7.073 7.073 0 1 0-4.657 4.06v3.781H3.3a2.803 2.803 0 0 1-2.8-2.804V8.63a2.803 2.803 0 0 1 2.8-2.805h4.082L8.58 2.768A1.994 1.994 0 0 1 10.435 1.5h8.985c.773 0 1.477.448 1.805 1.149l1.488 3.177H26.7c1.546 0 2.8 1.256 2.8 2.805V17zm-11.637 0H17.5a1 1 0 0 0-1 1v.05A4.244 4.244 0 1 1 17.863 17zm29.684 2c.97 0 .953-.048.953.889v20.743c0 .953.016.905-.953.905H19.453c-.97 0-.953.048-.953-.905V19.89c0-.937-.016-.889.97-.889h28.077zm-4.701 19.338V22.183H24.154v16.155h18.692zM20.6 21.375v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616V37.53H20.6zm24.233-16.155v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615V37.53h-1.615zM29.485 25.283a.4.4 0 0 1 .593-.35l9.05 4.977a.4.4 0 0 1 0 .701l-9.05 4.978a.4.4 0 0 1-.593-.35v-9.956z"/></svg>';const owe="0 0 64 42";class awe{constructor(t,e){b(this,"locale");b(this,"providerDefinitions");const n=e.providers,s=e.extraProviders||[],r=new Set(e.removeProviders),o=n.concat(s).filter(a=>{const l=a.name;return l?!r.has(l):(dt("media-embed-no-provider-name",{provider:a}),!1)});this.locale=t,this.providerDefinitions=o}hasMedia(t){return!!this._getMedia(t)}getMediaViewElement(t,e,n){return this._getMedia(e).getViewElement(t,n)}_getMedia(t){if(!t)return new u5(this.locale);t=t.trim();for(const e of this.providerDefinitions){const n=e.html,s=Bt(e.url);for(const r of s){const o=this._getUrlMatches(t,r);if(o)return new u5(this.locale,t,o,n)}}return null}_getUrlMatches(t,e){let n=t.match(e);if(n)return n;let s=t.replace(/^https?:\/\//,"");return n=s.match(e),n||(s=s.replace(/^www\./,""),n=s.match(e),n)?n:null}}class u5{constructor(t,e,n,s){b(this,"url");b(this,"_locale");b(this,"_match");b(this,"_previewRenderer");this.url=this._getValidUrl(e),this._locale=t,this._match=n,this._previewRenderer=s}getViewElement(t,e){const n={};let s;if(e.renderForEditingView||e.renderMediaPreview&&this.url&&this._previewRenderer){this.url&&(n["data-oembed-url"]=this.url),e.renderForEditingView&&(n.class="ck-media__wrapper");const r=this._getPreviewHtml(e);s=t.createRawElement("div",n,(o,a)=>{a.setContentOf(o,r)})}else this.url&&(n.url=this.url),s=t.createEmptyElement(e.elementName,n);return t.setCustomProperty("media-content",!0,s),s}_getPreviewHtml(t){return this._previewRenderer?this._previewRenderer(this._match):this.url&&t.renderForEditingView?this._getPlaceholderHtml():""}_getPlaceholderHtml(){const t=new Pr,e=this._locale.t;return t.content=rwe,t.viewBox=owe,new Pi({tag:"div",attributes:{class:"ck ck-reset_all ck-media__placeholder"},children:[{tag:"div",attributes:{class:"ck-media__placeholder__icon"},children:[t]},{tag:"a",attributes:{class:"ck-media__placeholder__url",target:"_blank",rel:"noopener noreferrer",href:this.url,"data-cke-tooltip-text":e("Open media in new tab")},children:[{tag:"span",attributes:{class:"ck-media__placeholder__url__text"},children:[this.url]}]}]}).render().outerHTML}_getValidUrl(t){return t?t.match(/^https?/)?t:"https://"+t:null}}class Lp extends J{constructor(e){super(e);b(this,"registry");e.config.define("mediaEmbed",{elementName:"oembed",providers:[{name:"dailymotion",url:[/^dailymotion\.com\/video\/(\w+)/,/^dai.ly\/(\w+)/],html:n=>`<div style="position: relative; padding-bottom: 100%; height: 0; "><iframe src="https://www.dailymotion.com/embed/video/${n[1]}" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" width="480" height="270" allowfullscreen allow="autoplay"></iframe></div>`},{name:"spotify",url:[/^open\.spotify\.com\/(artist\/\w+)/,/^open\.spotify\.com\/(album\/\w+)/,/^open\.spotify\.com\/(track\/\w+)/],html:n=>`<div style="position: relative; padding-bottom: 100%; height: 0; padding-bottom: 126%;"><iframe src="https://open.spotify.com/embed/${n[1]}" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" allowtransparency="true" allow="encrypted-media"></iframe></div>`},{name:"youtube",url:[/^(?:m\.)?youtube\.com\/watch\?v=([\w-]+)(?:&t=(\d+))?/,/^(?:m\.)?youtube\.com\/shorts\/([\w-]+)(?:\?t=(\d+))?/,/^(?:m\.)?youtube\.com\/v\/([\w-]+)(?:\?t=(\d+))?/,/^youtube\.com\/embed\/([\w-]+)(?:\?start=(\d+))?/,/^youtu\.be\/([\w-]+)(?:\?t=(\d+))?/],html:n=>{const s=n[1],r=n[2];return`<div style="position: relative; padding-bottom: 100%; height: 0; padding-bottom: 56.2493%;"><iframe src="https://www.youtube.com/embed/${s}${r?`?start=${r}`:""}" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div>`}},{name:"vimeo",url:[/^vimeo\.com\/(\d+)/,/^vimeo\.com\/[^/]+\/[^/]+\/video\/(\d+)/,/^vimeo\.com\/album\/[^/]+\/video\/(\d+)/,/^vimeo\.com\/channels\/[^/]+\/(\d+)/,/^vimeo\.com\/groups\/[^/]+\/videos\/(\d+)/,/^vimeo\.com\/ondemand\/[^/]+\/(\d+)/,/^player\.vimeo\.com\/video\/(\d+)/],html:n=>`<div style="position: relative; padding-bottom: 100%; height: 0; padding-bottom: 56.2493%;"><iframe src="https://player.vimeo.com/video/${n[1]}" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe></div>`},{name:"instagram",url:[/^instagram\.com\/p\/(\w+)/,/^instagram\.com\/reel\/(\w+)/]},{name:"twitter",url:[/^twitter\.com/,/^x\.com/]},{name:"googleMaps",url:[/^google\.com\/maps/,/^goo\.gl\/maps/,/^maps\.google\.com/,/^maps\.app\.goo\.gl/]},{name:"flickr",url:/^flickr\.com/},{name:"facebook",url:/^facebook\.com/}]}),this.registry=new awe(e.locale,e.config.get("mediaEmbed"))}static get pluginName(){return"MediaEmbedEditing"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,n=e.model.schema,s=e.t,r=e.conversion,o=e.config.get("mediaEmbed.previewsInData"),a=e.config.get("mediaEmbed.elementName"),l=this.registry;e.commands.add("mediaEmbed",new nwe(e)),n.register("media",{inheritAllFrom:"$blockObject",allowAttributes:["url"]}),r.for("dataDowncast").elementToStructure({model:"media",view:(u,{writer:h})=>{const f=u.getAttribute("url");return l5(h,l,f,{elementName:a,renderMediaPreview:!!f&&o})}}),r.for("dataDowncast").add(a5(l,{elementName:a,renderMediaPreview:o})),r.for("editingDowncast").elementToStructure({model:"media",view:(u,{writer:h})=>{const f=u.getAttribute("url"),g=l5(h,l,f,{elementName:a,renderForEditingView:!0});return twe(g,h,s("media widget"))}}),r.for("editingDowncast").add(a5(l,{elementName:a,renderForEditingView:!0})),r.for("upcast").elementToElement({view:u=>["oembed",a].includes(u.name)&&u.getAttribute("url")?{name:!0}:null,model:(u,{writer:h})=>{const f=u.getAttribute("url");return l.hasMedia(f)?h.createElement("media",{url:f}):null}}).elementToElement({view:{name:"div",attributes:{"data-oembed-url":!0}},model:(u,{writer:h})=>{const f=u.getAttribute("data-oembed-url");return l.hasMedia(f)?h.createElement("media",{url:f}):null}}).add(u=>{const h=(f,g,p)=>{if(!p.consumable.consume(g.viewItem,{name:!0,classes:"media"}))return;const{modelRange:y,modelCursor:E}=p.convertChildren(g.viewItem,g.modelCursor);g.modelRange=y,g.modelCursor=E,ln(y.getItems())||p.consumable.revert(g.viewItem,{name:!0,classes:"media"})};u.on("element:figure",h)})}}const lwe=/^(?:http(s)?:\/\/)?[\w-]+\.[\w-.~:/?#[\]@!$&'()*+,;=%]+$/;class cwe extends J{constructor(e){super(e);b(this,"_timeoutId");b(this,"_positionToInsert");this._timeoutId=null,this._positionToInsert=null}static get requires(){return[rC,Ir,aC]}static get pluginName(){return"AutoMediaEmbed"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,n=e.model.document,s=e.plugins.get("ClipboardPipeline");this.listenTo(s,"inputTransformation",()=>{const o=n.selection.getFirstRange(),a=gn.fromPosition(o.start);a.stickiness="toPrevious";const l=gn.fromPosition(o.end);l.stickiness="toNext",n.once("change:data",()=>{this._embedMediaBetweenPositions(a,l),a.detach(),l.detach()},{priority:"high"})}),e.commands.get("undo").on("execute",()=>{this._timeoutId&&(Ce.window.clearTimeout(this._timeoutId),this._positionToInsert.detach(),this._timeoutId=null,this._positionToInsert=null)},{priority:"high"})}_embedMediaBetweenPositions(e,n){const s=this.editor,r=s.plugins.get(Lp).registry,o=new ai(e,n),a=o.getWalker({ignoreElementEnd:!0});let l="";for(const h of a)h.item.is("$textProxy")&&(l+=h.item.data);if(l=l.trim(),!l.match(lwe)){o.detach();return}if(!r.hasMedia(l)){o.detach();return}if(!s.commands.get("mediaEmbed").isEnabled){o.detach();return}this._positionToInsert=gn.fromPosition(e),this._timeoutId=Ce.window.setTimeout(()=>{s.model.change(h=>{this._timeoutId=null,h.remove(o),o.detach();let f=null;this._positionToInsert.root.rootName!=="$graveyard"&&(f=this._positionToInsert),xV(s.model,l,f,!1),this._positionToInsert.detach(),this._positionToInsert=null}),s.plugins.get(Ir).requestUndoOnBackspace()},100)}}class uwe extends xe{constructor(e,n){super(n);b(this,"focusTracker");b(this,"keystrokes");b(this,"urlInputView");b(this,"_validators");b(this,"_urlInputViewInfoDefault");b(this,"_urlInputViewInfoTip");this.focusTracker=new Gt,this.keystrokes=new tn,this.set("mediaURLInputValue",""),this.urlInputView=this._createUrlInput(),this._validators=e,this.setTemplate({tag:"form",attributes:{class:["ck","ck-media-form","ck-responsive-form"],tabindex:"-1"},children:[this.urlInputView]})}render(){super.render(),Sa({view:this}),this.focusTracker.add(this.urlInputView.element),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this.urlInputView.focus()}get url(){return this.urlInputView.fieldView.element.value.trim()}set url(e){this.urlInputView.fieldView.value=e.trim()}isValid(){this.resetFormStatus();for(const e of this._validators){const n=e(this);if(n)return this.urlInputView.errorText=n,!1}return!0}resetFormStatus(){this.urlInputView.errorText=null,this.urlInputView.infoText=this._urlInputViewInfoDefault}_createUrlInput(){const e=this.locale.t,n=new bn(this.locale,vs),s=n.fieldView;return this._urlInputViewInfoDefault=e("Paste the media URL in the input."),this._urlInputViewInfoTip=e("Tip: Paste the URL into the content to embed faster."),n.label=e("Media URL"),n.infoText=this._urlInputViewInfoDefault,s.inputMode="url",s.on("input",()=>{n.infoText=s.element.value?this._urlInputViewInfoTip:this._urlInputViewInfoDefault,this.mediaURLInputValue=s.element.value.trim()}),n}}var dwe='<svg viewBox="0 0 22 20" xmlns="http://www.w3.org/2000/svg"><path d="M1.587 1.5c-.612 0-.601-.029-.601.551v14.84c0 .59-.01.559.591.559h18.846c.602 0 .591.03.591-.56V2.052c0-.58.01-.55-.591-.55H1.587Zm.701.971h1.003v1H2.288v-1Zm16.448 0h1.003v1h-1.003v-1Zm-14.24 1h13.008v12H4.467l.029-12Zm-2.208 1h1.003v1H2.288v-1Zm16.448 0h1.003v1h-1.003v-1Zm-16.448 2h1.003v1H2.288v-1Zm16.448 0h1.003v1h-1.003v-1Zm-16.448 2h1.003v1H2.288v-1Zm16.448 0h1.003v1h-1.003v-1Zm-16.448 2h1.003v1H2.288v-1Zm16.448 0h1.003v1h-1.003v-1Zm-16.448 2h1.003l-.029 1h-.974v-1Zm16.448 0h1.003v1h-1.003v-1Zm-16.448 2h.974v1h-.974v-1Zm16.448 0h1.003v1h-1.003v-1Z"/><path d="M8.374 6.648a.399.399 0 0 1 .395-.4.402.402 0 0 1 .2.049l5.148 2.824a.4.4 0 0 1 0 .7l-5.148 2.824a.403.403 0 0 1-.595-.35V6.648Z"/></svg>';class hwe extends J{constructor(){super(...arguments);b(this,"_formView")}static get requires(){return[Lp,$h]}static get pluginName(){return"MediaEmbedUI"}static get isOfficialPlugin(){return!0}init(){const e=this.editor;e.ui.componentFactory.add("mediaEmbed",()=>{const n=this.editor.locale.t,s=this._createDialogButton(qe);return s.tooltip=!0,s.label=n("Insert media"),s}),e.ui.componentFactory.add("menuBar:mediaEmbed",()=>{const n=this.editor.locale.t,s=this._createDialogButton(Ln);return s.label=n("Media"),s})}_createDialogButton(e){const n=this.editor,s=new e(n.locale),r=n.commands.get("mediaEmbed"),o=this.editor.plugins.get("Dialog");return s.icon=dwe,s.bind("isEnabled").to(r,"isEnabled"),s.on("execute",()=>{o.id==="mediaEmbed"?o.hide():this._showDialog()}),s}_showDialog(){const e=this.editor,n=e.plugins.get("Dialog"),s=e.commands.get("mediaEmbed"),r=e.locale.t;if(!this._formView){const o=e.plugins.get(Lp).registry;this._formView=new(Bb(uwe))(fwe(e.t,o),e.locale),this._formView.on("submit",()=>this._handleSubmitForm())}n.show({id:"mediaEmbed",title:r("Insert media"),content:this._formView,isModal:!0,onShow:()=>{this._formView.url=s.value||"",this._formView.resetFormStatus(),this._formView.urlInputView.fieldView.select()},actionButtons:[{label:r("Cancel"),withText:!0,onExecute:()=>n.hide()},{label:r("Accept"),class:"ck-button-action",withText:!0,onExecute:()=>this._handleSubmitForm()}]})}_handleSubmitForm(){const e=this.editor,n=e.plugins.get("Dialog");this._formView.isValid()&&(e.execute("mediaEmbed",this._formView.url),n.hide(),e.editing.view.focus())}}function fwe(i,t){return[e=>{if(!e.url.length)return i("The URL must not be empty.")},e=>{if(!t.hasMedia(e.url))return i("This media URL is not supported.")}]}class mwe extends J{static get requires(){return[Lp,hwe,cwe,wf]}static get pluginName(){return"MediaEmbed"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const d5={"(":")","[":"]","{":"}"};class gwe extends Ze{constructor(t){super(t),this._isEnabledBasedOnSelection=!1}refresh(){const t=this.editor.model,e=t.document;this.isEnabled=t.schema.checkAttributeInSelection(e.selection,"mention")}execute(t){const e=this.editor.model,s=e.document.selection,r=typeof t.mention=="string"?{id:t.mention}:t.mention,o=r.id,a=t.range||s.getFirstRange();if(!e.canEditAt(a))return;const l=t.text||o,u=kV({_text:l,id:o},r);if(!o.startsWith(t.marker))throw new D("mentioncommand-incorrect-id",this);e.change(h=>{const f=er(s.getAttributes()),g=new Map(f.entries());g.set("mention",u);const p=e.insertContent(h.createText(l,g),a),y=p.start.nodeBefore,E=p.end.nodeAfter,C=E&&E.is("$text")&&E.data.startsWith(" ");let k=!1;if(y&&E&&y.is("$text")&&E.is("$text")){const T=y.data.slice(-1),P=T in d5,S=P&&E.data.startsWith(d5[T]);k=P&&S}!k&&!C&&e.insertContent(h.createText(" ",f),a.start.getShiftedBy(l.length))})}}class pwe extends J{static get pluginName(){return"MentionEditing"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.model,n=e.document;e.schema.extend("$text",{allowAttributes:"mention"}),t.conversion.for("upcast").elementToAttribute({view:{name:"span",attributes:"data-mention",classes:"mention"},model:{key:"mention",value:s=>TV(s)}}),t.conversion.for("downcast").attributeToElement({model:"mention",view:wwe}),t.conversion.for("downcast").add(bwe),n.registerPostFixer(s=>_we(s,n,e.schema)),n.registerPostFixer(s=>Ewe(s,n)),n.registerPostFixer(s=>vwe(s,n)),t.commands.add("mention",new gwe(t))}}function kV(i,t){return Object.assign({uid:ni()},i,t||{})}function TV(i,t){const e=i.getAttribute("data-mention"),n=i.getChild(0);if(!n)return;const s={id:e,_text:n.data};return kV(s,t)}function bwe(i){i.on("attribute:mention",(t,e,n)=>{const s=e.attributeNewValue;if(!e.item.is("$textProxy")||!s)return;const r=e.range.start;(r.textNode||r.nodeAfter).data!=s._text&&n.consumable.consume(e.item,t.name)},{priority:"highest"})}function wwe(i,{writer:t}){if(!i)return;const e={class:"mention","data-mention":i.id},n={id:i.uid,priority:20};return t.createAttributeElement("span",e,n)}function vwe(i,t){const e=t.selection,n=e.focus;return e.isCollapsed&&e.hasAttribute("mention")&&ywe(n)?(i.removeSelectionAttribute("mention"),!0):!1}function ywe(i){const t=i.isAtStart;return i.nodeBefore&&i.nodeBefore.is("$text")||t}function _we(i,t,e){const n=t.differ.getChanges();let s=!1;for(const r of n){if(r.type=="attribute")continue;const o=r.position;if(r.name=="$text"){const a=o.textNode&&o.textNode.nextSibling;s=Za(o.textNode,i)||s,s=Za(a,i)||s,s=Za(o.nodeBefore,i)||s,s=Za(o.nodeAfter,i)||s}if(r.name!="$text"&&r.type=="insert"){const a=o.nodeAfter;for(const l of i.createRangeIn(a).getItems())s=Za(l,i)||s}if(r.type=="insert"&&e.isInline(r.name)){const a=o.nodeAfter&&o.nodeAfter.nextSibling;s=Za(o.nodeBefore,i)||s,s=Za(a,i)||s}}return s}function Ewe(i,t){const e=t.differ.getChanges();let n=!1;for(const s of e)if(s.type==="attribute"&&s.attributeKey!="mention"){const r=s.range.start.nodeBefore,o=s.range.end.nodeAfter;for(const a of[r,o])SV(a)&&a.getAttribute(s.attributeKey)!=s.attributeNewValue&&(i.setAttribute(s.attributeKey,s.attributeNewValue,a),n=!0)}return n}function SV(i){if(!i||!(i.is("$text")||i.is("$textProxy"))||!i.hasAttribute("mention"))return!1;const t=i.data,n=i.getAttribute("mention")._text;return t!=n}function Za(i,t){return SV(i)?(t.removeAttribute("mention",i),!0):!1}class Cwe extends $b{constructor(e){super(e);b(this,"selected");b(this,"position");this.extendTemplate({attributes:{class:["ck-mentions"],tabindex:"-1"}})}selectFirst(){this.select(0)}selectNext(){const e=this.selected,n=this.items.getIndex(e);this.select(n+1)}selectPrevious(){const e=this.selected,n=this.items.getIndex(e);this.select(n-1)}select(e){let n=0;e>0&&e<this.items.length?n=e:e<0&&(n=this.items.length-1);const s=this.items.get(n);this.selected!==s&&(this.selected&&this.selected.removeHighlight(),s.highlight(),this.selected=s,this._isItemVisibleInScrolledArea(s)||(this.element.scrollTop=s.element.offsetTop))}executeSelected(){this.selected.fire("execute")}_isItemVisibleInScrolledArea(e){return new Ye(this.element).contains(new Ye(e.element))}}class xwe extends xe{constructor(e,n){super(e);b(this,"domElement");this.template=void 0,this.domElement=n,this.domElement.classList.add("ck-button"),this.set("isOn",!1),this.on("change:isOn",(s,r,o)=>{o?(this.domElement.classList.add("ck-on"),this.domElement.classList.remove("ck-off")):(this.domElement.classList.add("ck-off"),this.domElement.classList.remove("ck-on"))}),this.listenTo(this.domElement,"click",()=>{this.fire("execute")})}render(){super.render(),this.element=this.domElement}focus(){this.domElement.focus()}}class kwe extends go{constructor(){super(...arguments);b(this,"item");b(this,"marker")}highlight(){const e=this.children.first;e.isOn=!0}removeHighlight(){const e=this.children.first;e.isOn=!1}}const hg=3,Twe=[nt.arrowup,nt.arrowdown,nt.esc],Swe=[nt.enter,nt.tab];class Awe extends J{constructor(e){super(e);b(this,"_mentionsView");b(this,"_mentionsConfigurations");b(this,"_balloon");b(this,"_items",new Hn);b(this,"_lastRequested");b(this,"_requestFeedDebounced");this._mentionsView=this._createMentionView(),this._mentionsConfigurations=new Map,this._requestFeedDebounced=ks(this._requestFeed,100),e.config.define("mention",{feeds:[]})}static get pluginName(){return"MentionUI"}static get isOfficialPlugin(){return!0}static get requires(){return[nr]}init(){const e=this.editor,n=e.config.get("mention.commitKeys")||Swe,s=Twe.concat(n);this._balloon=e.plugins.get(nr),e.editing.view.document.on("keydown",(a,l)=>{o(l.keyCode)&&this._isUIVisible&&(l.preventDefault(),a.stop(),l.keyCode==nt.arrowdown&&this._mentionsView.selectNext(),l.keyCode==nt.arrowup&&this._mentionsView.selectPrevious(),n.includes(l.keyCode)&&this._mentionsView.executeSelected(),l.keyCode==nt.esc&&this._hideUIAndRemoveMarker())},{priority:"highest"}),Ta({emitter:this._mentionsView,activator:()=>this._isUIVisible,contextElements:()=>[this._balloon.view.element],callback:()=>this._hideUIAndRemoveMarker()});const r=e.config.get("mention.feeds");for(const a of r){const{feed:l,marker:u,dropdownLimit:h}=a;if(!Lwe(u))throw new D("mentionconfig-incorrect-marker",null,{marker:u});const f=typeof l=="function"?l.bind(this.editor):Owe(l),g=a.itemRenderer,p={marker:u,feedCallback:f,itemRenderer:g,dropdownLimit:h};this._mentionsConfigurations.set(u,p)}this._setupTextWatcher(r),this.listenTo(e,"change:isReadOnly",()=>{this._hideUIAndRemoveMarker()}),this.on("requestFeed:response",(a,l)=>this._handleFeedResponse(l)),this.on("requestFeed:error",()=>this._hideUIAndRemoveMarker());function o(a){return s.includes(a)}}destroy(){super.destroy(),this._mentionsView.destroy()}get _isUIVisible(){return this._balloon.visibleView===this._mentionsView}_createMentionView(){const e=this.editor.locale,n=new Cwe(e);return n.items.bindTo(this._items).using(s=>{const{item:r,marker:o}=s,{dropdownLimit:a}=this._mentionsConfigurations.get(o),l=a||this.editor.config.get("mention.dropdownLimit")||10;if(n.items.length>=l)return null;const u=new kwe(e),h=this._renderItem(r,o);return h.delegate("execute").to(u),u.children.add(h),u.item=r,u.marker=o,u.on("execute",()=>{n.fire("execute",{item:r,marker:o})}),u}),n.on("execute",(s,r)=>{const o=this.editor,a=o.model,l=r.item,u=r.marker,h=o.model.markers.get("mention"),f=a.createPositionAt(a.document.selection.focus),g=a.createPositionAt(h.getStart()),p=a.createRange(g,f);this._hideUIAndRemoveMarker(),o.execute("mention",{mention:l,text:l.text,marker:u,range:p}),o.editing.view.focus()}),n}_getItemRenderer(e){const{itemRenderer:n}=this._mentionsConfigurations.get(e);return n}_requestFeed(e,n){this._lastRequested=n;const{feedCallback:s}=this._mentionsConfigurations.get(e),r=s(n);if(!(r instanceof Promise)){this.fire("requestFeed:response",{feed:r,marker:e,feedText:n});return}r.then(a=>{this._lastRequested==n?this.fire("requestFeed:response",{feed:a,marker:e,feedText:n}):this.fire("requestFeed:discarded",{feed:a,marker:e,feedText:n})}).catch(a=>{this.fire("requestFeed:error",{error:a}),dt("mention-feed-callback-error",{marker:e})})}_setupTextWatcher(e){const n=this.editor,s=e.map(a=>({...a,pattern:PV(a.marker,a.minimumCharacters||0)})),r=new QE(n.model,Iwe(s));r.on("matched",(a,l)=>{const u=AV(s,l.text),f=n.model.document.selection.focus,g=n.model.createPositionAt(f.parent,u.position);if(Nwe(f)||Mwe(g)){this._hideUIAndRemoveMarker();return}const p=Rwe(u,l.text),y=u.marker.length+p.length,E=f.getShiftedBy(-y),C=f.getShiftedBy(-p.length),k=n.model.createRange(E,C);if(x1(n)){const T=n.model.markers.get("mention");n.model.change(P=>{P.updateMarker(T,{range:k})})}else n.model.change(T=>{T.addMarker("mention",{range:k,usingOperation:!1,affectsData:!1})});this._requestFeedDebounced(u.marker,p)}),r.on("unmatched",()=>{this._hideUIAndRemoveMarker()});const o=n.commands.get("mention");return r.bind("isEnabled").to(o),r}_handleFeedResponse(e){const{feed:n,marker:s}=e;if(!x1(this.editor))return;this._items.clear();for(const o of n){const a=typeof o!="object"?{id:o,text:o}:o;this._items.add({item:a,marker:s})}const r=this.editor.model.markers.get("mention");this._items.length?this._showOrUpdateUI(r):this._hideUIAndRemoveMarker()}_showOrUpdateUI(e){this._isUIVisible?this._balloon.updatePosition(this._getBalloonPanelPositionData(e,this._mentionsView.position)):this._balloon.add({view:this._mentionsView,position:this._getBalloonPanelPositionData(e,this._mentionsView.position),singleViewMode:!0}),this._mentionsView.position=this._balloon.view.position,this._mentionsView.selectFirst()}_hideUIAndRemoveMarker(){this._balloon.hasView(this._mentionsView)&&this._balloon.remove(this._mentionsView),x1(this.editor)&&this.editor.model.change(e=>e.removeMarker("mention")),this._mentionsView.position=void 0}_renderItem(e,n){const s=this.editor;let r,o=e.id;const a=this._getItemRenderer(n);if(a){const l=a(e);typeof l!="string"?r=new xwe(s.locale,l):o=l}if(!r){const l=new qe(s.locale);l.label=o,l.withText=!0,r=l}return r}_getBalloonPanelPositionData(e,n){const s=this.editor,r=s.editing,o=r.view.domConverter,a=r.mapper,l=s.locale.uiLanguageDirection;return{target:()=>{let u=e.getRange();u.start.root.rootName=="$graveyard"&&(u=s.model.document.selection.getFirstRange());const h=a.toViewRange(u);return Ye.getDomRangeRects(o.viewRangeToDom(h)).pop()},limiter:()=>{const u=this.editor.editing.view,f=u.document.selection.editableElement;return f?u.domConverter.mapViewToDom(f.root):null},positions:Pwe(n,l)}}}function Pwe(i,t){const e={caret_se:n=>({top:n.bottom+hg,left:n.right,name:"caret_se",config:{withArrow:!1}}),caret_ne:(n,s)=>({top:n.top-s.height-hg,left:n.right,name:"caret_ne",config:{withArrow:!1}}),caret_sw:(n,s)=>({top:n.bottom+hg,left:n.right-s.width,name:"caret_sw",config:{withArrow:!1}}),caret_nw:(n,s)=>({top:n.top-s.height-hg,left:n.right-s.width,name:"caret_nw",config:{withArrow:!1}})};return Object.prototype.hasOwnProperty.call(e,i)?[e[i]]:t!=="rtl"?[e.caret_se,e.caret_sw,e.caret_ne,e.caret_nw]:[e.caret_sw,e.caret_se,e.caret_nw,e.caret_ne]}function AV(i,t){let e;for(const n of i){const s=t.lastIndexOf(n.marker);s>0&&!t.substring(s-1).match(n.pattern)||(!e||s>=e.position)&&(e={marker:n.marker,position:s,minimumCharacters:n.minimumCharacters,pattern:n.pattern})}return e}function PV(i,t){const e=t==0?"*":`{${t},}`,n=Fe.features.isRegExpUnicodePropertySupported?`\\p{Ps}\\p{Pi}"'`:`\\(\\[{"'`,s=".";i=i.replace(/[.*+?^${}()\-|[\]\\]/g,"\\$&");const r=`(?:^|[ ${n}])(${i})(${s}${e})$`;return new RegExp(r,"u")}function Iwe(i){return e=>{const n=AV(i,e);if(!n)return!1;let s=0;n.position!==0&&(s=n.position-1);const r=e.substring(s);return n.pattern.test(r)}}function Rwe(i,t){let e=0;i.position!==0&&(e=i.position-1);const n=PV(i.marker,0);return t.substring(e).match(n)[2]}function Owe(i){return t=>i.filter(n=>(typeof n=="string"?n:String(n.id)).toLowerCase().includes(t.toLowerCase()))}function Nwe(i){const t=i.textNode&&i.textNode.hasAttribute("mention"),e=i.nodeBefore;return t||e&&e.is("$text")&&e.hasAttribute("mention")}function Mwe(i){const t=i.nodeAfter;return t&&t.is("$text")&&t.hasAttribute("mention")}function Lwe(i){return!!i}function x1(i){return i.model.markers.has("mention")}class Vwe extends J{toMentionAttribute(t,e){return TV(t,e)}static get pluginName(){return"Mention"}static get isOfficialPlugin(){return!0}static get requires(){return[pwe,Awe]}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 *//**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Dwe(i,t){const e=[];for(const n of t.createRangeIn(i)){const s=n.item;s.is("element","a")&&!s.hasAttribute("href")&&(s.hasAttribute("id")||s.hasAttribute("name"))&&e.push(s)}for(const n of e){const s=n.parent.getChildIndex(n)+1,r=n.getChildren();t.insertChild(s,r,n.parent)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Bwe(i){const t=parseFloat(i);return i.endsWith("pt")?Bc(t*96/72):i.endsWith("pc")?Bc(t*12*96/72):i.endsWith("in")?Bc(t*96):i.endsWith("cm")?Bc(t*96/2.54):i.endsWith("mm")?Bc(t/10*96/2.54):i}function h5(i){return i!==void 0&&i.endsWith("px")}function Bc(i){return i.toFixed(2).replace(/\.?0+$/,"")+"px"}function Fwe(i,t,e){if(!i.childCount)return;const n=new _o(i.document),s=zwe(i,n);if(!s.length)return;const r={},o=[];for(const a of s)if(a.indent!==void 0){jwe(a)||(o.length=0);const l=`${a.id}:${a.indent}`,u=Math.min(a.indent-1,o.length);if(u<o.length&&o[u].id!==a.id&&(o.length=u),u<o.length-1)o.length=u+1;else{const f=Hwe(a,t);if(u>o.length-1||o[u].listElement.name!=f.type){u==0&&f.type=="ol"&&a.id!==void 0&&r[l]&&(f.startIndex=r[l]);const g=Gwe(f,n,e);if(h5(a.marginLeft)&&(u==0||h5(o[u-1].marginLeft))){let p=a.marginLeft;u>0&&(p=Bc(parseFloat(p)-parseFloat(o[u-1].marginLeft))),n.setStyle("padding-left",p,g)}if(o.length==0){const p=a.element.parent,y=p.getChildIndex(a.element)+1;n.insertChild(y,g,p)}else{const p=o[u-1].listItemElements;n.appendChild(g,p[p.length-1])}o[u]={...a,listElement:g,listItemElements:[]},u==0&&a.id!==void 0&&(r[l]=f.startIndex||1)}}const h=a.element.name=="li"?a.element:n.createElement("li");n.appendChild(h,o[u].listElement),o[u].listItemElements.push(h),u==0&&a.id!==void 0&&r[l]++,a.element!=h&&n.appendChild(a.element,h),Ywe(a.element,n),n.removeStyle("text-indent",a.element),n.removeStyle("margin-left",a.element)}else{const l=o.find(u=>u.marginLeft==a.marginLeft);if(l){const u=l.listItemElements;n.appendChild(a.element,u[u.length-1]),n.removeStyle("margin-left",a.element)}else o.length=0}}function $we(i,t){for(const e of t.createRangeIn(i)){const n=e.item;if(n.is("element","li")){const s=n.getChild(0);s&&s.is("element","p")&&t.unwrapElement(s)}}}function zwe(i,t){const e=t.createRangeIn(i),n=[],s=new Set;for(const r of e.getItems()){if(!r.is("element")||!r.name.match(/^(p|h\d+|li|div)$/))continue;let o=Zwe(r);if(o!==void 0&&parseFloat(o)==0&&!Array.from(r.getClassNames()).find(a=>a.startsWith("MsoList"))&&(o=void 0),r.hasStyle("mso-list")||o!==void 0&&s.has(o)){const a=Kwe(r);n.push({element:r,id:a.id,order:a.order,indent:a.indent,marginLeft:o}),o!==void 0&&s.add(o)}else s.clear()}return n}function jwe(i){const t=i.element.previousSibling;return f5(t||i.element.parent)}function f5(i){return i.is("element","ol")||i.is("element","ul")}function Hwe(i,t){const e=new RegExp(`@list l${i.id}:level${i.indent}\\s*({[^}]*)`,"gi"),n=/mso-level-number-format:([^;]{0,100});/gi,s=/mso-level-start-at:\s{0,100}([0-9]{0,10})\s{0,100};/gi,r=new RegExp(`@list\\s+l${i.id}:level\\d\\s*{[^{]*mso-level-text:"%\\d\\\\.`,"gi"),o=new RegExp(`@list l${i.id}:level\\d\\s*{[^{]*mso-level-number-format:`,"gi"),a=r.exec(t),l=o.exec(t),u=a&&!l,h=e.exec(t);let f="decimal",g="ol",p=null;if(h&&h[1]){const y=n.exec(h[1]);if(y&&y[1]&&(f=y[1].trim(),g=f!=="bullet"&&f!=="image"?"ol":"ul"),f==="bullet"){const E=Uwe(i.element);E&&(f=E)}else{const E=s.exec(h[1]);E&&E[1]&&(p=parseInt(E[1]))}u&&(g="ol")}return{type:g,startIndex:p,style:qwe(f),isLegalStyleList:u}}function Uwe(i){if(i.name=="li"&&i.parent.name=="ul"&&i.parent.hasAttribute("type"))return i.parent.getAttribute("type");const t=Wwe(i);if(!t)return null;const e=t._data;return e==="o"?"circle":e==="·"?"disc":e==="§"?"square":null}function Wwe(i){if(i.getChild(0).is("$text"))return null;for(const t of i.getChildren()){if(!t.is("element","span"))continue;const e=t.getChild(0);if(e)return e.is("$text")?e:e.getChild(0)}/* istanbul ignore next -- @preserve */return null}function qwe(i){if(i.startsWith("arabic-leading-zero"))return"decimal-leading-zero";switch(i){case"alpha-upper":return"upper-alpha";case"alpha-lower":return"lower-alpha";case"roman-upper":return"upper-roman";case"roman-lower":return"lower-roman";case"circle":case"disc":case"square":return i;default:return null}}function Gwe(i,t,e){const n=t.createElement(i.type);return i.style&&t.setStyle("list-style-type",i.style,n),i.startIndex&&i.startIndex>1&&t.setAttribute("start",i.startIndex,n),i.isLegalStyleList&&e&&t.addClass("legal-list",n),n}function Kwe(i){const t=i.getStyle("mso-list");if(t===void 0)return{};const e=t.match(/(^|\s{1,100})l(\d+)/i),n=t.match(/\s{0,100}lfo(\d+)/i),s=t.match(/\s{0,100}level(\d+)/i);return e&&n&&s?{id:e[2],order:n[1],indent:parseInt(s[1])}:{indent:1}}function Ywe(i,t){const e=new ns({name:"span",styles:{"mso-list":"Ignore"}}),n=t.createRangeIn(i);for(const s of n)s.type==="elementStart"&&e.match(s.item)&&t.remove(s.item)}function Zwe(i){const t=i.getStyle("margin-left");return t===void 0||t.endsWith("px")?t:Bwe(t)}function Xwe(i,t){if(!i.childCount)return;const e=new _o(i.document),n=Qwe(i,e);eve(n,i,e),nve(n,i,e),tve(i,e);const s=ive(i,e);s.length&&rve(s,sve(t),e)}function Jwe(i){return btoa(i.match(/\w{2}/g).map(t=>String.fromCharCode(parseInt(t,16))).join(""))}function Qwe(i,t){const e=t.createRangeIn(i),n=new ns({name:/v:(.+)/}),s=[];for(const r of e){if(r.type!="elementStart")continue;const o=r.item,a=o.previousSibling,l=a&&a.is("element")?a.name:null,u=["Chart"],h=n.match(o),f=o.getAttribute("o:gfxdata"),g=l==="v:shapetype",p=f&&u.some(y=>o.getAttribute("id").includes(y));h&&f&&!g&&!p&&s.push(r.item.getAttribute("id"))}return s}function eve(i,t,e){const n=e.createRangeIn(t),s=new ns({name:"img"}),r=[];for(const o of n)if(o.item.is("element")&&s.match(o.item)){const a=o.item,l=a.getAttribute("v:shapes")?a.getAttribute("v:shapes").split(" "):[];l.length&&l.every(u=>i.indexOf(u)>-1)?r.push(a):a.getAttribute("src")||r.push(a)}for(const o of r)e.remove(o)}function tve(i,t){const e=t.createRangeIn(i),n=new ns({name:/v:(.+)/}),s=[];for(const r of e)r.type=="elementStart"&&n.match(r.item)&&s.push(r.item);for(const r of s)t.remove(r)}function nve(i,t,e){const n=e.createRangeIn(t),s=[];for(const a of n)if(a.type=="elementStart"&&a.item.is("element","v:shape")){const l=a.item.getAttribute("id");if(i.includes(l))continue;r(a.item.parent.getChildren(),l)||s.push(a.item)}for(const a of s){const l={src:o(a)};a.hasAttribute("alt")&&(l.alt=a.getAttribute("alt"));const u=e.createElement("img",l);e.insertChild(a.index+1,u,a.parent)}function r(a,l){for(const u of a){/* istanbul ignore else -- @preserve */if(u.is("element")&&(u.name=="img"&&u.getAttribute("v:shapes")==l||r(u.getChildren(),l)))return!0}return!1}function o(a){for(const l of a.getChildren()){/* istanbul ignore else -- @preserve */if(l.is("element")&&l.getAttribute("src"))return l.getAttribute("src")}}}function ive(i,t){const e=t.createRangeIn(i),n=new ns({name:"img"}),s=[];for(const r of e)r.item.is("element")&&n.match(r.item)&&r.item.getAttribute("src").startsWith("file://")&&s.push(r.item);return s}function sve(i){if(!i)return[];const t=/{\\pict[\s\S]+?\\bliptag-?\d+(\\blipupi-?\d+)?({\\\*\\blipuid\s?[\da-fA-F]+)?[\s}]*?/,e=new RegExp("(?:("+t.source+"))([\\da-fA-F\\s]+)\\}","g"),n=i.match(e),s=[];if(n)for(const r of n){let o=!1;r.includes("\\pngblip")?o="image/png":r.includes("\\jpegblip")&&(o="image/jpeg"),o&&s.push({hex:r.replace(t,"").replace(/[^\da-fA-F]/g,""),type:o})}return s}function rve(i,t,e){if(i.length===t.length)for(let n=0;n<i.length;n++){const s=`data:${t[n].type};base64,${Jwe(t[n].hex)}`;e.setAttribute("src",s,i[n])}}function ove(i){const t=[],e=new _o(i.document);for(const{item:n}of e.createRangeIn(i))if(n.is("element")){for(const s of n.getClassNames())/\bmso/gi.exec(s)&&e.removeClass(s,n);for(const s of n.getStyleNames())/\bmso/gi.exec(s)&&e.removeStyle(s,n);(n.is("element","w:sdt")||n.is("element","w:sdtpr")&&n.isEmpty||n.is("element","o:p")&&n.isEmpty)&&t.push(n)}for(const n of t){const s=n.parent,r=s.getChildIndex(n);e.insertChild(r,n.getChildren(),s),e.remove(n)}}const ave=/<meta\s*name="?generator"?\s*content="?microsoft\s*word\s*\d+"?\/?>/i,lve=/xmlns:o="urn:schemas-microsoft-com/i;class cve{constructor(t,e=!1){b(this,"document");b(this,"hasMultiLevelListPlugin");this.document=t,this.hasMultiLevelListPlugin=e}isActive(t){return ave.test(t)||lve.test(t)}execute(t){const e=new _o(this.document),{body:n,stylesString:s}=t._parsedData;Dwe(n,e),Fwe(n,s,this.hasMultiLevelListPlugin),Xwe(n,t.dataTransfer.getData("text/rtf")),ove(n),t.content=n}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function uve(i,t){for(const e of i.getChildren())if(e.is("element","b")&&e.getStyle("font-weight")==="normal"){const n=i.getChildIndex(e);t.remove(e),t.insertChild(n,e.getChildren(),i)}}function dve(i,t){const e=new Ob(t.document.stylesProcessor),n=new Mb(e,{renderingMode:"data"}),s=n.blockElements,r=n.inlineObjectElements,o=[];for(const a of t.createRangeIn(i)){const l=a.item;if(l.is("element","br")){const u=m5(l,"forward",t,{blockElements:s,inlineObjectElements:r}),h=m5(l,"backward",t,{blockElements:s,inlineObjectElements:r}),f=g5(u,s);(g5(h,s)||f)&&o.push(l)}}for(const a of o)a.hasClass("Apple-interchange-newline")?t.remove(a):t.replace(a,t.createElement("p"))}function m5(i,t,e,{blockElements:n,inlineObjectElements:s}){let r=e.createPositionAt(i,t=="forward"?"after":"before");return r=r.getLastMatchingPosition(({item:o})=>o.is("element")&&!n.includes(o.name)&&!s.includes(o.name),{direction:t}),t=="forward"?r.nodeAfter:r.nodeBefore}function g5(i,t){return!!i&&i.is("element")&&t.includes(i.name)}const hve=/id=("|')docs-internal-guid-[-0-9a-f]+("|')/i;class fve{constructor(t){b(this,"document");this.document=t}isActive(t){return hve.test(t)}execute(t){const e=new _o(this.document),{body:n}=t._parsedData;uve(n,e),$we(n,e),dve(n,e),t.content=n}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function mve(i,t){for(const e of i.getChildren())e.is("element","table")&&e.hasAttribute("xmlns")&&t.removeAttribute("xmlns",e)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function gve(i,t){for(const e of i.getChildren())if(e.is("element","google-sheets-html-origin")){const n=i.getChildIndex(e);t.remove(e),t.insertChild(n,e.getChildren(),i)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function pve(i,t){for(const e of i.getChildren())e.is("element","table")&&e.getStyle("width")==="0px"&&t.removeStyle("width",e)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function bve(i,t){for(const e of Array.from(i.getChildren()))e.is("element","style")&&t.remove(e)}const wve=/<google-sheets-html-origin/i;class vve{constructor(t){b(this,"document");this.document=t}isActive(t){return wve.test(t)}execute(t){const e=new _o(this.document),{body:n}=t._parsedData;gve(n,e),mve(n,e),pve(n,e),bve(n,e),t.content=n}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function yve(i){return p5(p5(i)).replace(/(<span\s+style=['"]mso-spacerun:yes['"]>[^\S\r\n]*?)[\r\n]+([^\S\r\n]*<\/span>)/g,"$1$2").replace(/<span\s+style=['"]mso-spacerun:yes['"]><\/span>/g,"").replace(/(<span\s+style=['"]letter-spacing:[^'"]+?['"]>)[\r\n]+(<\/span>)/g,"$1 $2").replace(/ <\//g," </").replace(/ <o:p><\/o:p>/g," <o:p></o:p>").replace(/<o:p>(&nbsp;|\u00A0)<\/o:p>/g,"").replace(/>([^\S\r\n]*[\r\n]\s*)</g,"><")}function _ve(i){i.querySelectorAll("span[style*=spacerun]").forEach(t=>{const e=t,n=e.innerText.length||0;e.innerText=Array(n+1).join("  ").substr(0,n)})}function p5(i){return i.replace(/<span(?: class="Apple-converted-space"|)>(\s+)<\/span>/g,(t,e)=>e.length===1?" ":Array(e.length+1).join("  ").substr(0,e.length))}function Eve(i,t){const e=new DOMParser;i=i.replace(/<!--\[if gte vml 1]>/g,""),i=i.replace(/<o:SmartTagType(?:\s+[^\s>=]+(?:="[^"]*")?)*\s*\/?>/gi,"");const n=yve(kve(i)),s=e.parseFromString(n,"text/html");_ve(s);const r=s.body.innerHTML,o=Cve(s,t),a=xve(s);return{body:o,bodyString:r,styles:a.styles,stylesString:a.stylesString}}function Cve(i,t){const e=new Ob(t),n=new Mb(e,{renderingMode:"data"}),s=i.createDocumentFragment(),r=i.body.childNodes;for(;r.length>0;)s.appendChild(r[0]);return n.domToView(s,{skipComments:!0})}function xve(i){const t=[],e=[],n=Array.from(i.getElementsByTagName("style"));for(const s of n)s.sheet&&s.sheet.cssRules&&s.sheet.cssRules.length&&(t.push(s.sheet),e.push(s.innerHTML));return{styles:t,stylesString:e.join(" ")}}function kve(i){const t="</body>",e="</html>",n=i.indexOf(t);if(n<0)return i;const s=i.indexOf(e,n+t.length);return i.substring(0,n+t.length)+(s>=0?i.substring(s):"")}class Tve extends J{static get pluginName(){return"PasteFromOffice"}static get isOfficialPlugin(){return!0}static get requires(){return[Ts]}init(){const t=this.editor,e=t.plugins.get("ClipboardPipeline"),n=t.editing.view.document,s=[],r=this.editor.plugins.has("MultiLevelList");s.push(new cve(n,r)),s.push(new fve(n)),s.push(new vve(n)),e.on("inputTransformation",(o,a)=>{if(a._isTransformedWithPasteFromOffice||t.model.document.selection.getFirstPosition().parent.is("element","codeBlock"))return;const u=a.dataTransfer.getData("text/html"),h=s.find(f=>f.isActive(u));h&&(a._parsedData||(a._parsedData=Eve(u,n.stylesProcessor)),h.execute(a),a._isTransformedWithPasteFromOffice=!0)},{priority:"high"})}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 *//**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function pC(i,t){const{modelAttribute:e,styleName:n,viewElement:s,defaultValue:r,reduceBoxSides:o=!1,shouldUpcast:a=()=>!0}=t;i.for("upcast").attributeToAttribute({view:{name:s,styles:{[n]:/[\s\S]+/}},model:{key:e,value:l=>{if(!a(l))return;const u=l.getNormalizedStyle(n),h=o?$g(u):u;if(r!==h)return h}}})}function Qy(i,t,e,n){i.for("upcast").add(s=>s.on("element:"+t,(r,o,a)=>{if(!o.modelRange)return;const l=["border-top-width","border-top-color","border-top-style","border-bottom-width","border-bottom-color","border-bottom-style","border-right-width","border-right-color","border-right-style","border-left-width","border-left-color","border-left-style"].filter(p=>o.viewItem.hasStyle(p));if(!l.length)return;const u={styles:l};if(!a.consumable.test(o.viewItem,u))return;const h=[...o.modelRange.getItems({shallow:!0})].pop();a.consumable.consume(o.viewItem,u);const f={style:o.viewItem.getNormalizedStyle("border-style"),color:o.viewItem.getNormalizedStyle("border-color"),width:o.viewItem.getNormalizedStyle("border-width")},g={style:$g(f.style),color:$g(f.color),width:$g(f.width)};g.style!==n.style&&a.writer.setAttribute(e.style,g.style,h),g.color!==n.color&&a.writer.setAttribute(e.color,g.color,h),g.width!==n.width&&a.writer.setAttribute(e.width,g.width,h)}))}function ph(i,t){const{modelElement:e,modelAttribute:n,styleName:s}=t;i.for("downcast").attributeToAttribute({model:{name:e,key:n},view:r=>({key:"style",value:{[s]:r}})})}function Fg(i,t){const{modelAttribute:e,styleName:n}=t;i.for("downcast").add(s=>s.on(`attribute:${e}:table`,(r,o,a)=>{const{item:l,attributeNewValue:u}=o,{mapper:h,writer:f}=a;if(!a.consumable.consume(o.item,r.name))return;const g=[...h.toViewElement(l).getChildren()].find(p=>p.is("element","table"));u?f.setStyle(n,u,g):f.removeStyle(n,g)}))}function $g(i){if(!i)return;const t=["top","right","bottom","left"];if(!t.every(r=>i[r]))return i;const n=i.top;return t.every(r=>i[r]===n)?n:i}function sn(i,t,e,n,s=1){t!=null&&s!==void 0&&s!==null&&t>s?n.setAttribute(i,t,e):n.removeAttribute(i,e)}function Bl(i,t,e={}){const n=i.createElement("tableCell",e);return i.insertElement("paragraph",n),i.insert(n,t),n}function e_(i,t){const e=t.parent.parent,n=parseInt(e.getAttribute("headingColumns")||"0"),{column:s}=i.getCellLocation(t);return!!n&&s<n}function zg(i,t,e){const{modelAttribute:n}=e;i.extend("tableCell",{allowAttributes:[n]}),pC(t,{viewElement:/^(td|th)$/,...e}),ph(t,{modelElement:"tableCell",...e})}function fl(i){const t=i.getSelectedElement();return t&&t.is("element","table")?t:i.getFirstPosition().findAncestor("table")}function Sve(){return i=>{i.on("element:figure",(t,e,n)=>{if(!n.consumable.test(e.viewItem,{name:!0,classes:"table"}))return;const s=Ive(e.viewItem);if(!s||!n.consumable.test(s,{name:!0}))return;n.consumable.consume(e.viewItem,{name:!0,classes:"table"});const r=n.convertItem(s,e.modelCursor),o=ln(r.modelRange.getItems());if(!o){n.consumable.revert(e.viewItem,{name:!0,classes:"table"});return}n.convertChildren(e.viewItem,n.writer.createPositionAt(o,"end")),n.updateConversionResult(o,e)})}}function Ave(){return i=>{i.on("element:table",(t,e,n)=>{const s=e.viewItem;if(!n.consumable.test(s,{name:!0}))return;const{rows:r,headingRows:o,headingColumns:a}=Rve(s),l={};a&&(l.headingColumns=a),o&&(l.headingRows=o);const u=n.writer.createElement("table",l);if(n.safeInsert(u,e.modelCursor)){if(n.consumable.consume(s,{name:!0}),r.forEach(h=>n.convertItem(h,n.writer.createPositionAt(u,"end"))),n.convertChildren(s,n.writer.createPositionAt(u,"end")),u.isEmpty){const h=n.writer.createElement("tableRow");n.writer.insert(h,n.writer.createPositionAt(u,"end")),Bl(n.writer,n.writer.createPositionAt(h,"end"))}n.updateConversionResult(u,e)}})}}function Pve(){return i=>{i.on("element:tr",(t,e)=>{e.viewItem.isEmpty&&e.modelCursor.index==0&&t.stop()},{priority:"high"})}}function b5(i){return t=>{t.on(`element:${i}`,(e,n,{writer:s})=>{if(!n.modelRange)return;const r=n.modelRange.start.nodeAfter,o=s.createPositionAt(r,0);if(n.viewItem.isEmpty){s.insertElement("paragraph",o);return}const a=Array.from(r.getChildren());if(a.every(l=>l.is("element","$marker"))){const l=s.createElement("paragraph");s.insert(l,s.createPositionAt(r,0));for(const u of a)s.move(s.createRangeOn(u),s.createPositionAt(l,"end"))}},{priority:"low"})}}function Ive(i){for(const t of i.getChildren())if(t.is("element","table"))return t}function Rve(i){let t=0,e;const n=[],s=[];let r;for(const o of Array.from(i.getChildren())){if(o.name!=="tbody"&&o.name!=="thead"&&o.name!=="tfoot")continue;o.name==="thead"&&!r&&(r=o);const a=Array.from(o.getChildren()).filter(u=>u.is("element","tr"));let l=null;for(const u of a){const h=Array.from(u.getChildren()).filter(f=>f.is("element","td")||f.is("element","th"));if(r&&o===r||o.name==="tbody"&&h.length>0&&(l===null||h.length===l)&&h.every(f=>f.is("element","th")))t++,n.push(u);else{s.push(u);const f=Ove(u);(!e||f<e)&&(e=f)}l=Math.max(l||0,h.length)}}return{headingRows:t,headingColumns:e||0,rows:[...n,...s]}}function Ove(i){let t=0,e=0;const n=Array.from(i.getChildren()).filter(s=>s.name==="th"||s.name==="td");for(;e<n.length&&n[e].name==="th";){const s=n[e],r=parseInt(s.getAttribute("colspan")||"1");t=t+r,e++}return t}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class Et{constructor(t,e={}){b(this,"_table");b(this,"_startRow");b(this,"_endRow");b(this,"_startColumn");b(this,"_endColumn");b(this,"_includeAllSlots");b(this,"_skipRows");b(this,"_row");b(this,"_rowIndex");b(this,"_column");b(this,"_cellIndex");b(this,"_spannedCells");b(this,"_nextCellAtColumn");b(this,"_jumpedToStartRow",!1);this._table=t,this._startRow=e.row!==void 0?e.row:e.startRow||0,this._endRow=e.row!==void 0?e.row:e.endRow,this._startColumn=e.column!==void 0?e.column:e.startColumn||0,this._endColumn=e.column!==void 0?e.column:e.endColumn,this._includeAllSlots=!!e.includeAllSlots,this._skipRows=new Set,this._row=0,this._rowIndex=0,this._column=0,this._cellIndex=0,this._spannedCells=new Map,this._nextCellAtColumn=-1}[Symbol.iterator](){return this}next(){this._canJumpToStartRow()&&this._jumpToNonSpannedRowClosestToStartRow();const t=this._table.getChild(this._rowIndex);if(!t||this._isOverEndRow())return{done:!0,value:void 0};if(!t.is("element","tableRow"))return this._rowIndex++,this.next();if(this._isOverEndColumn())return this._advanceToNextRow();let e=null;const n=this._getSpanned();if(n)this._includeAllSlots&&!this._shouldSkipSlot()&&(e=this._formatOutValue(n.cell,n.row,n.column));else{const s=t.getChild(this._cellIndex);if(!s)return this._advanceToNextRow();const r=parseInt(s.getAttribute("colspan")||"1"),o=parseInt(s.getAttribute("rowspan")||"1");(r>1||o>1)&&this._recordSpans(s,o,r),this._shouldSkipSlot()||(e=this._formatOutValue(s)),this._nextCellAtColumn=this._column+r}return this._column++,this._column==this._nextCellAtColumn&&this._cellIndex++,e||this.next()}skipRow(t){this._skipRows.add(t)}_advanceToNextRow(){return this._row++,this._rowIndex++,this._column=0,this._cellIndex=0,this._nextCellAtColumn=-1,this.next()}_isOverEndRow(){return this._endRow!==void 0&&this._row>this._endRow}_isOverEndColumn(){return this._endColumn!==void 0&&this._column>this._endColumn}_formatOutValue(t,e=this._row,n=this._column){return{done:!1,value:new Nve(this,t,e,n)}}_shouldSkipSlot(){const t=this._skipRows.has(this._row),e=this._row<this._startRow,n=this._column<this._startColumn,s=this._endColumn!==void 0&&this._column>this._endColumn;return t||e||n||s}_getSpanned(){const t=this._spannedCells.get(this._row);return t&&t.get(this._column)||null}_recordSpans(t,e,n){const s={cell:t,row:this._row,column:this._column};for(let r=this._row;r<this._row+e;r++)for(let o=this._column;o<this._column+n;o++)(r!=this._row||o!=this._column)&&this._markSpannedCell(r,o,s)}_markSpannedCell(t,e,n){this._spannedCells.has(t)||this._spannedCells.set(t,new Map),this._spannedCells.get(t).set(e,n)}_canJumpToStartRow(){return!!this._startRow&&this._startRow>0&&!this._jumpedToStartRow}_jumpToNonSpannedRowClosestToStartRow(){const t=this._getRowLength(0);for(let e=this._startRow;!this._jumpedToStartRow;e--)t===this._getRowLength(e)&&(this._row=e,this._rowIndex=e,this._jumpedToStartRow=!0)}_getRowLength(t){return[...this._table.getChild(t).getChildren()].reduce((n,s)=>n+parseInt(s.getAttribute("colspan")||"1"),0)}}class Nve{constructor(t,e,n,s){b(this,"cell");b(this,"row");b(this,"column");b(this,"cellAnchorRow");b(this,"cellAnchorColumn");b(this,"_cellIndex");b(this,"_rowIndex");b(this,"_table");this.cell=e,this.row=t._row,this.column=t._column,this.cellAnchorRow=n,this.cellAnchorColumn=s,this._cellIndex=t._cellIndex,this._rowIndex=t._rowIndex,this._table=t._table}get isAnchor(){return this.row===this.cellAnchorRow&&this.column===this.cellAnchorColumn}get cellWidth(){return parseInt(this.cell.getAttribute("colspan")||"1")}get cellHeight(){return parseInt(this.cell.getAttribute("rowspan")||"1")}get rowIndex(){return this._rowIndex}getPositionBefore(){return this._table.root.document.model.createPositionAt(this._table.getChild(this.row),this._cellIndex)}}function w5(i,t){return(e,{writer:n})=>{const s=e.getAttribute("headingRows")||0,r=n.createContainerElement("table",null,[]),o=n.createContainerElement("figure",{class:"table"},r);s>0&&n.insert(n.createPositionAt(r,"end"),n.createContainerElement("thead",null,n.createSlot(a=>a.is("element","tableRow")&&a.index<s))),s<i.getRows(e)&&n.insert(n.createPositionAt(r,"end"),n.createContainerElement("tbody",null,n.createSlot(a=>a.is("element","tableRow")&&a.index>=s)));for(const{positionOffset:a,filter:l}of t.additionalSlots)n.insert(n.createPositionAt(r,a),n.createSlot(l));return n.insert(n.createPositionAt(r,"after"),n.createSlot(a=>a.is("element","tableRow")?!1:!t.additionalSlots.some(({filter:l})=>l(a)))),t.asWidget?Lve(o,n):o}}function Mve(){return(i,{writer:t})=>i.isEmpty?t.createEmptyElement("tr"):t.createContainerElement("tr")}function v5(i={}){return(t,{writer:e})=>{const n=t.parent,s=n.parent,r=s.getChildIndex(n),o=new Et(s,{row:r}),a=s.getAttribute("headingRows")||0,l=s.getAttribute("headingColumns")||0;let u=null;for(const h of o)if(h.cell==t){const g=h.row<a||h.column<l?"th":"td";u=i.asWidget?iC(e.createEditableElement(g),e):e.createContainerElement(g);break}return u}}function y5(i={}){return(t,{writer:e})=>{if(!t.parent.is("element","tableCell")||!IV(t))return null;if(i.asWidget)return e.createContainerElement("span",{class:"ck-table-bogus-paragraph"});{const n=e.createContainerElement("p");return e.setCustomProperty("dataPipeline:transparentRendering",!0,n),n}}}function IV(i){return i.parent.childCount==1&&!Vve(i)}function Lve(i,t){return t.setCustomProperty("table",!0,i),nC(i,t,{hasSelectionHandle:!0})}function Vve(i){for(const t of i.getAttributeKeys())if(!(t.startsWith("selection:")||t=="htmlEmptyBlock"))return!0;return!1}class Dve extends Ze{refresh(){const t=this.editor.model,e=t.document.selection,n=t.schema;this.isEnabled=Bve(e,n)}execute(t={}){const e=this.editor,n=e.model,s=e.plugins.get("TableUtils"),r=e.config.get("table.defaultHeadings.rows"),o=e.config.get("table.defaultHeadings.columns");t.headingRows===void 0&&r&&(t.headingRows=r),t.headingColumns===void 0&&o&&(t.headingColumns=o),n.change(a=>{const l=s.createTable(a,t);n.insertObject(l,null,null,{findOptimalPosition:"auto"}),a.setSelection(a.createPositionAt(l.getNodeByPath([0,0,0]),0))})}}function Bve(i,t){const e=i.getFirstPosition().parent,n=e===e.root?e:e.parent;return t.checkChild(n,"table")}class _5 extends Ze{constructor(e,n={}){super(e);b(this,"order");this.order=n.order||"below"}refresh(){const e=this.editor.model.document.selection,s=!!this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(e).length;this.isEnabled=s}execute(){const e=this.editor,n=e.model.document.selection,s=e.plugins.get("TableUtils"),r=this.order==="above",o=s.getSelectionAffectedTableCells(n),a=s.getRowIndexes(o),l=r?a.first:a.last,u=o[0].findAncestor("table");s.insertRows(u,{at:r?l:l+1,copyStructureFromAbove:!r})}}class E5 extends Ze{constructor(e,n={}){super(e);b(this,"order");this.order=n.order||"right"}refresh(){const e=this.editor.model.document.selection,s=!!this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(e).length;this.isEnabled=s}execute(){const e=this.editor,n=e.model.document.selection,s=e.plugins.get("TableUtils"),r=this.order==="left",o=s.getSelectionAffectedTableCells(n),a=s.getColumnIndexes(o),l=r?a.first:a.last,u=o[0].findAncestor("table");s.insertColumns(u,{columns:1,at:r?l:l+1})}}class C5 extends Ze{constructor(e,n={}){super(e);b(this,"direction");this.direction=n.direction||"horizontally"}refresh(){const n=this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(this.editor.model.document.selection);this.isEnabled=n.length===1}execute(){const e=this.editor.plugins.get("TableUtils"),n=e.getSelectionAffectedTableCells(this.editor.model.document.selection)[0];this.direction==="horizontally"?e.splitCellHorizontally(n,2):e.splitCellVertically(n,2)}}function RV(i,t,e){const{startRow:n,startColumn:s,endRow:r,endColumn:o}=t,a=e.createElement("table"),l=r-n+1;for(let h=0;h<l;h++)e.insertElement("tableRow",a,"end");const u=[...new Et(i,{startRow:n,endRow:r,startColumn:s,endColumn:o,includeAllSlots:!0})];for(const{row:h,column:f,cell:g,isAnchor:p,cellAnchorRow:y,cellAnchorColumn:E}of u){const C=h-n,k=a.getChild(C);if(!p)(y<n||E<s)&&Bl(e,e.createPositionAt(k,"end"));else{const T=e.cloneElement(g);e.append(T,k),VV(T,h,f,r,o,e)}}return Fve(a,i,n,s,e),a}function OV(i,t,e=0){const n=[],s=new Et(i,{startRow:e,endRow:t-1});for(const r of s){const{row:o,cellHeight:a}=r,l=o+a-1;o<t&&t<=l&&n.push(r)}return n}function NV(i,t,e){const n=i.parent,s=n.parent,r=n.index,o=parseInt(i.getAttribute("rowspan")),a=t-r,l={},u=o-a;u>1&&(l.rowspan=u);const h=parseInt(i.getAttribute("colspan")||"1");h>1&&(l.colspan=h);const f=r,g=f+a,p=[...new Et(s,{startRow:f,endRow:g,includeAllSlots:!0})];let y=null,E;for(const C of p){const{row:k,column:T,cell:P}=C;P===i&&E===void 0&&(E=T),E!==void 0&&E===T&&k===g&&(y=Bl(e,C.getPositionBefore(),l))}return sn("rowspan",a,i,e),y}function MV(i,t){const e=[],n=new Et(i);for(const s of n){const{column:r,cellWidth:o}=s,a=r+o-1;r<t&&t<=a&&e.push(s)}return e}function LV(i,t,e,n){const s=parseInt(i.getAttribute("colspan")),r=e-t,o={},a=s-r;a>1&&(o.colspan=a);const l=parseInt(i.getAttribute("rowspan")||"1");l>1&&(o.rowspan=l);const u=Bl(n,n.createPositionAfter(i),o);return sn("colspan",r,i,n),u}function VV(i,t,e,n,s,r){const o=parseInt(i.getAttribute("colspan")||"1"),a=parseInt(i.getAttribute("rowspan")||"1");if(e+o-1>s){const h=s-e+1;sn("colspan",h,i,r,1)}if(t+a-1>n){const h=n-t+1;sn("rowspan",h,i,r,1)}}function Fve(i,t,e,n,s){const r=parseInt(t.getAttribute("headingRows")||"0");if(r>0){const a=r-e;sn("headingRows",a,i,s,0)}const o=parseInt(t.getAttribute("headingColumns")||"0");if(o>0){const a=o-n;sn("headingColumns",a,i,s,0)}}function t_(i,t){const e=t.getColumns(i),n=new Array(e).fill(0);for(const{column:r}of new Et(i))n[r]++;const s=n.reduce((r,o,a)=>o?r:[...r,a],[]);if(s.length>0){const r=s[s.length-1];return t.removeColumns(i,{at:r}),!0}return!1}function n_(i,t){const e=[],n=t.getRows(i);for(let s=0;s<n;s++)i.getChild(s).isEmpty&&e.push(s);if(e.length>0){const s=e[e.length-1];return t.removeRows(i,{at:s}),!0}return!1}function bC(i,t){t_(i,t)||n_(i,t)}function DV(i,t){const e=Array.from(new Et(i,{startColumn:t.firstColumn,endColumn:t.lastColumn,row:t.lastRow}));if(e.every(({cellHeight:r})=>r===1))return t.lastRow;const s=e[0].cellHeight-1;return t.lastRow+s}function BV(i,t){const e=Array.from(new Et(i,{startRow:t.firstRow,endRow:t.lastRow,column:t.lastColumn}));if(e.every(({cellWidth:r})=>r===1))return t.lastColumn;const s=e[0].cellWidth-1;return t.lastColumn+s}class fg extends Ze{constructor(e,n){super(e);b(this,"direction");b(this,"isHorizontal");this.direction=n.direction,this.isHorizontal=this.direction=="right"||this.direction=="left"}refresh(){const e=this._getMergeableCell();this.value=e,this.isEnabled=!!e}execute(){const e=this.editor.model,n=e.document,r=this.editor.plugins.get("TableUtils").getTableCellsContainingSelection(n.selection)[0],o=this.value,a=this.direction;e.change(l=>{const u=a=="right"||a=="down",h=u?r:o,f=u?o:r,g=f.parent;jve(f,h,l);const p=this.isHorizontal?"colspan":"rowspan",y=parseInt(r.getAttribute(p)||"1"),E=parseInt(o.getAttribute(p)||"1");l.setAttribute(p,y+E,h),l.setSelection(l.createRangeIn(h));const C=this.editor.plugins.get("TableUtils"),k=g.findAncestor("table");bC(k,C)})}_getMergeableCell(){const n=this.editor.model.document,s=this.editor.plugins.get("TableUtils"),r=s.getTableCellsContainingSelection(n.selection)[0];if(!r)return;const o=this.isHorizontal?$ve(r,this.direction,s):zve(r,this.direction,s);if(!o)return;const a=this.isHorizontal?"rowspan":"colspan",l=parseInt(r.getAttribute(a)||"1");if(parseInt(o.getAttribute(a)||"1")===l)return o}}function $ve(i,t,e){const s=i.parent.parent,r=t=="right"?i.nextSibling:i.previousSibling,o=(s.getAttribute("headingColumns")||0)>0;if(!r)return;const a=t=="right"?i:r,l=t=="right"?r:i,{column:u}=e.getCellLocation(a),{column:h}=e.getCellLocation(l),f=parseInt(a.getAttribute("colspan")||"1"),g=e_(e,a),p=e_(e,l);return o&&g!=p?void 0:u+f===h?r:void 0}function zve(i,t,e){const n=i.parent,s=n.parent,r=s.getChildIndex(n);if(t=="down"&&r===e.getRows(s)-1||t=="up"&&r===0)return null;const o=parseInt(i.getAttribute("rowspan")||"1"),a=s.getAttribute("headingRows")||0,l=t=="down"&&r+o===a,u=t=="up"&&r===a;if(a&&(l||u))return null;const h=parseInt(i.getAttribute("rowspan")||"1"),f=t=="down"?r+h:r,g=[...new Et(s,{endRow:f})],y=g.find(C=>C.cell===i).column,E=g.find(({row:C,cellHeight:k,column:T})=>T!==y?!1:t=="down"?C===f:f===C+k);return E&&E.cell?E.cell:null}function jve(i,t,e){x5(i)||(x5(t)&&e.remove(e.createRangeIn(t)),e.move(e.createRangeIn(i),e.createPositionAt(t,"end"))),e.remove(i)}function x5(i){const t=i.getChild(0);return i.childCount==1&&t.is("element","paragraph")&&t.isEmpty}class Hve extends Ze{refresh(){const t=this.editor.plugins.get("TableUtils"),e=t.getSelectionAffectedTableCells(this.editor.model.document.selection),n=e[0];if(n){const s=n.findAncestor("table"),o=t.getRows(s)-1,a=t.getRowIndexes(e),l=a.first===0&&a.last===o;this.isEnabled=!l}else this.isEnabled=!1}execute(){const t=this.editor.model,e=this.editor.plugins.get("TableUtils"),n=e.getSelectionAffectedTableCells(t.document.selection),s=e.getRowIndexes(n),r=n[0],o=r.findAncestor("table"),a=e.getCellLocation(r).column;t.change(l=>{const u=s.last-s.first+1;e.removeRows(o,{at:s.first,rows:u});const h=Uve(o,s.first,a,e.getRows(o));l.setSelection(l.createPositionAt(h,0))})}}function Uve(i,t,e,n){const s=i.getChild(Math.min(t,n-1));let r=s.getChild(0),o=0;for(const a of s.getChildren()){if(o>e)return r;r=a,o+=parseInt(a.getAttribute("colspan")||"1")}return r}class Wve extends Ze{refresh(){const t=this.editor.plugins.get("TableUtils"),e=t.getSelectionAffectedTableCells(this.editor.model.document.selection),n=e[0];if(n){const s=n.findAncestor("table"),r=t.getColumns(s),{first:o,last:a}=t.getColumnIndexes(e);this.isEnabled=a-o<r-1}else this.isEnabled=!1}execute(){const t=this.editor.plugins.get("TableUtils"),[e,n]=Gve(this.editor.model.document.selection,t),s=e.parent.parent,r=[...new Et(s)],o={first:r.find(l=>l.cell===e).column,last:r.find(l=>l.cell===n).column},a=qve(r,e,n,o);this.editor.model.change(l=>{const u=o.last-o.first+1;t.removeColumns(s,{at:o.first,columns:u}),l.setSelection(l.createPositionAt(a,0))})}}function qve(i,t,e,n){return parseInt(e.getAttribute("colspan")||"1")>1?e:t.previousSibling||e.nextSibling?e.nextSibling||t.previousSibling:n.first?i.reverse().find(({column:r})=>r<n.first).cell:i.reverse().find(({column:r})=>r>n.last).cell}function Gve(i,t){const e=t.getSelectionAffectedTableCells(i),n=e[0],s=e.pop(),r=[n,s];return n.isBefore(s)?r:r.reverse()}class Kve extends Ze{refresh(){const t=this.editor.plugins.get("TableUtils"),e=this.editor.model,n=t.getSelectionAffectedTableCells(e.document.selection),s=n.length>0;this.isEnabled=s,this.value=s&&n.every(r=>this._isInHeading(r,r.parent.parent))}execute(t={}){if(t.forceValue===this.value)return;const e=this.editor.plugins.get("TableUtils"),n=this.editor.model,s=e.getSelectionAffectedTableCells(n.document.selection),r=s[0].findAncestor("table"),{first:o,last:a}=e.getRowIndexes(s),l=this.value?o:a+1,u=r.getAttribute("headingRows")||0;n.change(h=>{if(l){const f=l>u?u:0,g=OV(r,l,f);for(const{cell:p}of g)NV(p,l,h)}sn("headingRows",l,r,h,0)})}_isInHeading(t,e){const n=parseInt(e.getAttribute("headingRows")||"0");return!!n&&t.parent.index<n}}class Yve extends Ze{refresh(){const t=this.editor.model,e=this.editor.plugins.get("TableUtils"),n=e.getSelectionAffectedTableCells(t.document.selection),s=n.length>0;this.isEnabled=s,this.value=s&&n.every(r=>e_(e,r))}execute(t={}){if(t.forceValue===this.value)return;const e=this.editor.plugins.get("TableUtils"),n=this.editor.model,s=e.getSelectionAffectedTableCells(n.document.selection),r=s[0].findAncestor("table"),{first:o,last:a}=e.getColumnIndexes(s),l=this.value?o:a+1;n.change(u=>{if(l){const h=MV(r,l);for(const{cell:f,column:g}of h)LV(f,g,l,u)}sn("headingColumns",l,r,u,0)})}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const Zve=5,i_=40,Xve=2;function Jve(i){const t=new Set;for(const e of i.document.differ.getChanges()){let n=null;switch(e.type){case"insert":n=["table","tableRow","tableCell"].includes(e.name)?e.position:null;break;case"remove":n=["tableRow","tableCell"].includes(e.name)?e.position:null;break;case"attribute":e.range.start.nodeAfter&&(n=["table","tableRow","tableCell"].includes(e.range.start.nodeAfter.name)?e.range.start:null);break}if(!n)continue;const s=n.nodeAfter&&n.nodeAfter.is("element","table")?n.nodeAfter:n.findAncestor("table");for(const r of i.createRangeOn(s).getItems())r.is("element","table")&&_f(r)&&t.add(r)}return t}function Qve(i,t){return i_*100/FV(i,t)}function FV(i,t){const e=k5(i,"tbody",t)||k5(i,"thead",t),n=t.editing.view.domConverter.mapViewToDom(e);return s_(n)}function k5(i,t,e){return[...[...e.editing.mapper.toViewElement(i).getChildren()].find(r=>r.is("element","table")).getChildren()].find(r=>r.is("element",t))}function s_(i){const t=Ce.window.getComputedStyle(i);return t.boxSizing==="border-box"?parseFloat(t.width)-parseFloat(t.paddingLeft)-parseFloat(t.paddingRight)-parseFloat(t.borderLeftWidth)-parseFloat(t.borderRightWidth):parseFloat(t.width)}function e0e(i,t){const e=t.getCellLocation(i).column,n=i.getAttribute("colspan")||1;return{leftEdge:e,rightEdge:e+n-1}}function xi(i){const t=Math.pow(10,Xve),e=typeof i=="number"?i:parseFloat(i);return Math.round(e*t)/t}function t0e(i,t,e){return i<=t?xi(t):i>=e?xi(e):xi(i)}function n0e(i,t){return Array(i).fill(t)}function Gh(i){return i.map(t=>typeof t=="number"?t:parseFloat(t)).filter(t=>!Number.isNaN(t)).reduce((t,e)=>t+e,0)}function wC(i){const t=i.map(s=>s==="auto"?s:parseFloat(s.replace("%","")));let e=i0e(t);const n=Gh(e);return n!==100&&(e=e.map(s=>xi(s*100/n)).map((s,r,o)=>{if(!(r===o.length-1))return s;const l=Gh(o);return xi(s+100-l)})),e.map(s=>s+"%")}function i0e(i){const t=i.filter(s=>s==="auto").length;if(t===0)return i.map(s=>xi(s));const e=Gh(i),n=Math.max((100-e)/t,Zve);return i.map(s=>s==="auto"?n:s).map(s=>xi(s))}function s0e(i){const t=Ce.window.getComputedStyle(i);return t.boxSizing==="border-box"?parseInt(t.width):parseFloat(t.width)+parseFloat(t.paddingLeft)+parseFloat(t.paddingRight)+parseFloat(t.borderWidth)}function $V(i,t,e,n){for(let s=0;s<Math.max(e.length,i.length);s++){const r=i[s],o=e[s];o?r?n.setAttribute("columnWidth",o,r):n.appendElement("tableColumn",{columnWidth:o},t):n.remove(r)}}function _f(i){if(i.is("element","tableColumnGroup"))return i;const t=i.getChildren();return Array.from(t).find(e=>e.is("element","tableColumnGroup"))}function Ef(i){const t=_f(i);return t?Array.from(t.getChildren()):[]}function r0e(i){return Ef(i).map(t=>t.getAttribute("columnWidth"))}function o0e(i,t){return Ef(i).reduce((n,s)=>{const r=s.getAttribute("columnWidth"),o=s.getAttribute("colSpan");if(!o)return n.push(r),n;for(let a=0;a<o;a++)n.push(r);return t.removeAttribute("colSpan",s),n},[])}class On extends J{static get pluginName(){return"TableUtils"}static get isOfficialPlugin(){return!0}init(){this.decorate("insertColumns"),this.decorate("insertRows")}getCellLocation(t){const e=t.parent,n=e.parent,s=n.getChildIndex(e),r=new Et(n,{row:s});for(const{cell:o,row:a,column:l}of r)if(o===t)return{row:a,column:l};/* istanbul ignore next -- @preserve */}createTable(t,e){const n=t.createElement("table"),s=e.rows||2,r=e.columns||2;return k1(t,n,0,s,r),e.headingRows&&sn("headingRows",Math.min(e.headingRows,s),n,t,0),e.headingColumns&&sn("headingColumns",Math.min(e.headingColumns,r),n,t,0),n}insertRows(t,e={}){const n=this.editor.model,s=e.at||0,r=e.rows||1,o=e.copyStructureFromAbove!==void 0,a=e.copyStructureFromAbove?s-1:s,l=this.getRows(t),u=this.getColumns(t);if(s>l)throw new D("tableutils-insertrows-insert-out-of-range",this,{options:e});n.change(h=>{const f=t.getAttribute("headingRows")||0;if(f>s&&sn("headingRows",f+r,t,h,0),!o&&(s===0||s===l)){k1(h,t,s,r,u);return}const g=o?Math.max(s,a):s,p=new Et(t,{endRow:g}),y=new Array(u).fill(1);for(const{row:E,column:C,cellHeight:k,cellWidth:T,cell:P}of p){const S=E+k-1,O=E<s&&s<=S,A=E<=a&&a<=S;O?(h.setAttribute("rowspan",k+r,P),y[C]=-T):o&&A&&(y[C]=T)}for(let E=0;E<r;E++){const C=h.createElement("tableRow");h.insert(C,t,s);for(let k=0;k<y.length;k++){const T=y[k],P=h.createPositionAt(C,"end");T>0&&Bl(h,P,T>1?{colspan:T}:void 0),k+=Math.abs(T)-1}}})}insertColumns(t,e={}){const n=this.editor.model,s=e.at||0,r=e.columns||1;n.change(o=>{const a=t.getAttribute("headingColumns");s<a&&o.setAttribute("headingColumns",a+r,t);const l=this.getColumns(t);if(s===0||l===s){for(const h of t.getChildren())h.is("element","tableRow")&&Fc(r,o,o.createPositionAt(h,s?"end":0));return}const u=new Et(t,{column:s,includeAllSlots:!0});for(const h of u){const{row:f,cell:g,cellAnchorColumn:p,cellAnchorRow:y,cellWidth:E,cellHeight:C}=h;if(p<s){o.setAttribute("colspan",E+r,g);const k=y+C-1;for(let T=f;T<=k;T++)u.skipRow(T)}else Fc(r,o,h.getPositionBefore())}})}removeRows(t,e){const n=this.editor.model,s=e.rows||1,r=this.getRows(t),o=e.at,a=o+s-1;if(a>r-1)throw new D("tableutils-removerows-row-index-out-of-range",this,{table:t,options:e});n.change(l=>{const u={first:o,last:a},{cellsToMove:h,cellsToTrim:f}=c0e(t,u);if(h.size){const g=a+1;u0e(t,g,h,l)}for(let g=a;g>=o;g--)l.remove(t.getChild(g));for(const{rowspan:g,cell:p}of f)sn("rowspan",g,p,l);l0e(t,u,l),t_(t,this)||n_(t,this)})}removeColumns(t,e){const n=this.editor.model,s=e.at,r=e.columns||1,o=e.at+r-1;n.change(a=>{a0e(t,{first:s,last:o},a);const l=Ef(t);for(let u=o;u>=s;u--){for(const{cell:h,column:f,cellWidth:g}of[...new Et(t)])f<=u&&g>1&&f+g>u?sn("colspan",g-1,h,a):f===u&&a.remove(h);if(l[u]){const h=u===0?l[1]:l[u-1],f=parseFloat(l[u].getAttribute("columnWidth")),g=parseFloat(h.getAttribute("columnWidth"));a.remove(l[u]),a.setAttribute("columnWidth",f+g+"%",h)}}n_(t,this)||t_(t,this)})}splitCellVertically(t,e=2){const n=this.editor.model,r=t.parent.parent,o=parseInt(t.getAttribute("rowspan")||"1"),a=parseInt(t.getAttribute("colspan")||"1");n.change(l=>{if(a>1){const{newCellsSpan:u,updatedSpan:h}=T5(a,e);sn("colspan",h,t,l);const f={};u>1&&(f.colspan=u),o>1&&(f.rowspan=o);const g=a>e?e-1:a-1;Fc(g,l,l.createPositionAfter(t),f)}if(a<e){const u=e-a,h=[...new Et(r)],{column:f}=h.find(({cell:E})=>E===t),g=h.filter(({cell:E,cellWidth:C,column:k})=>{const T=E!==t&&k===f,P=k<f&&k+C>f;return T||P});for(const{cell:E,cellWidth:C}of g)l.setAttribute("colspan",C+u,E);const p={};o>1&&(p.rowspan=o),Fc(u,l,l.createPositionAfter(t),p);const y=r.getAttribute("headingColumns")||0;y>f&&sn("headingColumns",y+u,r,l)}})}splitCellHorizontally(t,e=2){const n=this.editor.model,s=t.parent,r=s.parent,o=r.getChildIndex(s),a=parseInt(t.getAttribute("rowspan")||"1"),l=parseInt(t.getAttribute("colspan")||"1");n.change(u=>{if(a>1){const h=[...new Et(r,{startRow:o,endRow:o+a-1,includeAllSlots:!0})],{newCellsSpan:f,updatedSpan:g}=T5(a,e);sn("rowspan",g,t,u);const{column:p}=h.find(({cell:C})=>C===t),y={};f>1&&(y.rowspan=f),l>1&&(y.colspan=l);let E=0;for(const C of h){const{column:k,row:T}=C,P=T>=o+g,S=k===p;E>=f&&S&&(E=0),P&&S&&(E||Fc(1,u,C.getPositionBefore(),y),E++)}}if(a<e){const h=e-a,f=[...new Et(r,{startRow:0,endRow:o})];for(const{cell:y,cellHeight:E,row:C}of f)if(y!==t&&C+E>o){const k=E+h;u.setAttribute("rowspan",k,y)}const g={};l>1&&(g.colspan=l),k1(u,r,o+1,h,1,g);const p=r.getAttribute("headingRows")||0;p>o&&sn("headingRows",p+h,r,u)}})}getColumns(t){return[...t.getChild(0).getChildren()].filter(n=>n.is("element","tableCell")).reduce((n,s)=>{const r=parseInt(s.getAttribute("colspan")||"1");return n+r},0)}getRows(t){return Array.from(t.getChildren()).reduce((e,n)=>n.is("element","tableRow")?e+1:e,0)}createTableWalker(t,e={}){return new Et(t,e)}getSelectedTableCells(t){const e=[];for(const n of this.sortRanges(t.getRanges())){const s=n.getContainedElement();s&&s.is("element","tableCell")&&e.push(s)}return e}getTableCellsContainingSelection(t){const e=[];for(const n of t.getRanges()){const s=n.start.findAncestor("tableCell");s&&e.push(s)}return e}getSelectionAffectedTableCells(t){const e=this.getSelectedTableCells(t);return e.length?e:this.getTableCellsContainingSelection(t)}getRowIndexes(t){const e=t.map(n=>n.parent.index);return this._getFirstLastIndexesObject(e)}getColumnIndexes(t){const e=t[0].findAncestor("table"),s=[...new Et(e)].filter(r=>t.includes(r.cell)).map(r=>r.column);return this._getFirstLastIndexesObject(s)}isSelectionRectangular(t){if(t.length<2||!this._areCellInTheSameTableSection(t))return!1;const e=new Set,n=new Set;let s=0;for(const o of t){const{row:a,column:l}=this.getCellLocation(o),u=parseInt(o.getAttribute("rowspan"))||1,h=parseInt(o.getAttribute("colspan"))||1;e.add(a),n.add(l),u>1&&e.add(a+u-1),h>1&&n.add(l+h-1),s+=u*h}return h0e(e,n)==s}sortRanges(t){return Array.from(t).sort(d0e)}_getFirstLastIndexesObject(t){const e=t.sort((r,o)=>r-o),n=e[0],s=e[e.length-1];return{first:n,last:s}}_areCellInTheSameTableSection(t){const e=t[0].findAncestor("table"),n=this.getRowIndexes(t),s=parseInt(e.getAttribute("headingRows"))||0;if(!this._areIndexesInSameSection(n,s))return!1;const r=this.getColumnIndexes(t),o=parseInt(e.getAttribute("headingColumns"))||0;return this._areIndexesInSameSection(r,o)}_areIndexesInSameSection({first:t,last:e},n){const s=t<n,r=e<n;return s===r}}function k1(i,t,e,n,s,r={}){for(let o=0;o<n;o++){const a=i.createElement("tableRow");i.insert(a,t,e),Fc(s,i,i.createPositionAt(a,"end"),r)}}function Fc(i,t,e,n={}){for(let s=0;s<i;s++)Bl(t,e,n)}function T5(i,t){if(i<t)return{newCellsSpan:1,updatedSpan:1};const e=Math.floor(i/t),n=i-e*t+e;return{newCellsSpan:e,updatedSpan:n}}function a0e(i,t,e){const n=i.getAttribute("headingColumns")||0;if(n&&t.first<n){const s=Math.min(n-1,t.last)-t.first+1;e.setAttribute("headingColumns",n-s,i)}}function l0e(i,{first:t,last:e},n){const s=i.getAttribute("headingRows")||0;if(t<s){const r=e<s?s-(e-t+1):t;sn("headingRows",r,i,n,0)}}function c0e(i,{first:t,last:e}){const n=new Map,s=[];for(const{row:r,column:o,cellHeight:a,cell:l}of new Et(i,{endRow:e})){const u=r+a-1;if(r>=t&&r<=e&&u>e){const g=e-r+1,p=a-g;n.set(o,{cell:l,rowspan:p})}if(r<t&&u>=t){let g;u>=e?g=e-t+1:g=u-t+1,s.push({cell:l,rowspan:a-g})}}return{cellsToMove:n,cellsToTrim:s}}function u0e(i,t,e,n){const r=[...new Et(i,{includeAllSlots:!0,row:t})],o=i.getChild(t);let a;for(const{column:l,cell:u,isAnchor:h}of r)if(e.has(l)){const{cell:f,rowspan:g}=e.get(l),p=a?n.createPositionAfter(a):n.createPositionAt(o,0);n.move(n.createRangeOn(f),p),sn("rowspan",g,f,n),a=f}else h&&(a=u)}function d0e(i,t){const e=i.start,n=t.start;return e.isBefore(n)?-1:1}function h0e(i,t){const e=Array.from(i.values()),n=Array.from(t.values()),s=Math.max(...e),r=Math.min(...e),o=Math.max(...n),a=Math.min(...n);return(s-r+1)*(o-a+1)}class f0e extends Ze{refresh(){const t=this.editor.plugins.get(On),e=t.getSelectedTableCells(this.editor.model.document.selection);this.isEnabled=t.isSelectionRectangular(e)}execute(){const t=this.editor.model,e=this.editor.plugins.get(On);t.change(n=>{const s=e.getSelectedTableCells(t.document.selection),r=s.shift(),{mergeWidth:o,mergeHeight:a}=g0e(r,s,e);sn("colspan",o,r,n),sn("rowspan",a,r,n);for(const u of s)m0e(u,r,n);const l=r.findAncestor("table");bC(l,e),n.setSelection(r,"in")})}}function m0e(i,t,e){S5(i)||(S5(t)&&e.remove(e.createRangeIn(t)),e.move(e.createRangeIn(i),e.createPositionAt(t,"end"))),e.remove(i)}function S5(i){const t=i.getChild(0);return i.childCount==1&&t.is("element","paragraph")&&t.isEmpty}function g0e(i,t,e){let n=0,s=0;for(const u of t){const{row:h,column:f}=e.getCellLocation(u);n=A5(u,f,n,"colspan"),s=A5(u,h,s,"rowspan")}const{row:r,column:o}=e.getCellLocation(i),a=n-o,l=s-r;return{mergeWidth:a,mergeHeight:l}}function A5(i,t,e,n){const s=parseInt(i.getAttribute(n)||"1");return Math.max(e,t+s)}class p0e extends Ze{constructor(t){super(t),this.affectsData=!1}refresh(){const e=this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(this.editor.model.document.selection);this.isEnabled=e.length>0}execute(){const t=this.editor.model,e=this.editor.plugins.get("TableUtils"),n=e.getSelectionAffectedTableCells(t.document.selection),s=e.getRowIndexes(n),r=n[0].findAncestor("table"),o=[];for(let a=s.first;a<=s.last;a++)for(const l of r.getChild(a).getChildren())o.push(t.createRangeOn(l));t.change(a=>{a.setSelection(o)})}}class b0e extends Ze{constructor(t){super(t),this.affectsData=!1}refresh(){const e=this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(this.editor.model.document.selection);this.isEnabled=e.length>0}execute(){const t=this.editor.plugins.get("TableUtils"),e=this.editor.model,n=t.getSelectionAffectedTableCells(e.document.selection),s=n[0],r=n.pop(),o=s.findAncestor("table"),a=t.getCellLocation(s),l=t.getCellLocation(r),u=Math.min(a.column,l.column),h=Math.max(a.column,l.column),f=[];for(const g of new Et(o,{startColumn:u,endColumn:h}))f.push(e.createRangeOn(g.cell));e.change(g=>{g.setSelection(f)})}}function w0e(i){i.document.registerPostFixer(t=>v0e(t,i))}function v0e(i,t){const e=t.document.differ.getChanges();let n=!1;const s=new Set;for(const r of e){let o=null;r.type=="insert"&&r.name=="table"&&(o=r.position.nodeAfter),(r.type=="insert"||r.type=="remove")&&(r.name=="tableRow"||r.name=="tableCell")&&(o=r.position.findAncestor("table")),x0e(r)&&(o=r.range.start.findAncestor("table")),o&&!s.has(o)&&(n=y0e(o,i)||n,n=_0e(o,i)||n,s.add(o))}return n}function y0e(i,t){let e=!1;const n=E0e(i);if(n.length){e=!0;for(const s of n)sn("rowspan",s.rowspan,s.cell,t,1)}return e}function _0e(i,t){let e=!1;const n=C0e(i),s=[];for(const[l,u]of n.entries())!u&&i.getChild(l).is("element","tableRow")&&s.push(l);if(s.length){e=!0;for(const l of s.reverse())t.remove(i.getChild(l)),n.splice(l,1)}const r=n.filter((l,u)=>i.getChild(u).is("element","tableRow")),o=r[0];if(!r.every(l=>l===o)){const l=r.reduce((u,h)=>h>u?h:u,0);for(const[u,h]of r.entries()){const f=l-h;if(f){for(let g=0;g<f;g++)Bl(t,t.createPositionAt(i.getChild(u),"end"));e=!0}}}return e}function E0e(i){const t=parseInt(i.getAttribute("headingRows")||"0"),e=Array.from(i.getChildren()).reduce((s,r)=>r.is("element","tableRow")?s+1:s,0),n=[];for(const{row:s,cell:r,cellHeight:o}of new Et(i)){if(o<2)continue;const l=s<t?t:e;if(s+o>l){const u=l-s;n.push({cell:r,rowspan:u})}}return n}function C0e(i){const t=new Array(i.childCount).fill(0);for(const{rowIndex:e}of new Et(i,{includeAllSlots:!0}))t[e]++;return t}function x0e(i){if(i.type!=="attribute")return!1;const t=i.attributeKey;return t==="headingRows"||t==="colspan"||t==="rowspan"}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function k0e(i){i.document.registerPostFixer(t=>T0e(t,i))}function T0e(i,t){const e=t.document.differ.getChanges();let n=!1;for(const s of e)s.type=="insert"&&s.name=="table"&&(n=S0e(s.position.nodeAfter,i)||n),s.type=="insert"&&s.name=="tableRow"&&(n=zV(s.position.nodeAfter,i)||n),s.type=="insert"&&s.name=="tableCell"&&(n=r_(s.position.nodeAfter,i)||n),(s.type=="remove"||s.type=="insert")&&A0e(s)&&(n=r_(s.position.parent,i)||n);return n}function S0e(i,t){let e=!1;for(const n of i.getChildren())n.is("element","tableRow")&&(e=zV(n,t)||e);return e}function zV(i,t){let e=!1;for(const n of i.getChildren())e=r_(n,t)||e;return e}function r_(i,t){if(i.childCount==0)return t.insertElement("paragraph",i),!0;const e=Array.from(i.getChildren()).filter(n=>n.is("$text"));for(const n of e)t.wrap(t.createRangeOn(n),"paragraph");return!!e.length}function A0e(i){return i.position.parent.is("element","tableCell")?i.type=="insert"&&i.name=="$text"||i.type=="remove":!1}function P0e(i,t){const e=i.document.differ;for(const n of e.getChanges()){let s,r=!1;if(n.type=="attribute"){const u=n.range.start.nodeAfter;if(!u||!u.is("element","table")||n.attributeKey!="headingRows"&&n.attributeKey!="headingColumns")continue;s=u,r=n.attributeKey=="headingRows"}else(n.name=="tableRow"||n.name=="tableCell")&&(s=n.position.findAncestor("table"),r=n.name=="tableRow");if(!s)continue;const o=s.getAttribute("headingRows")||0,a=s.getAttribute("headingColumns")||0,l=new Et(s);for(const u of l){const f=u.row<o||u.column<a?"th":"td",g=t.mapper.toViewElement(u.cell);g&&g.is("element")&&g.name!=f&&t.reconvertItem(r?u.cell.parent:u.cell)}}}function I0e(i,t){const e=i.document.differ,n=new Set;for(const s of e.getChanges()){const r=s.type=="attribute"?s.range.start.parent:s.position.parent;r.is("element","tableCell")&&n.add(r)}for(const s of n.values()){const r=Array.from(s.getChildren()).filter(o=>R0e(o,t.mapper));for(const o of r)t.reconvertItem(o)}}function R0e(i,t){if(!i.is("element","paragraph"))return!1;const e=t.toViewElement(i);return e?IV(i)!==e.is("element","span"):!1}class Cf extends J{constructor(e){super(e);b(this,"_additionalSlots");this._additionalSlots=[]}static get pluginName(){return"TableEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[On]}init(){const e=this.editor,n=e.model,s=n.schema,r=e.conversion,o=e.plugins.get(On);s.register("table",{inheritAllFrom:"$blockObject",allowAttributes:["headingRows","headingColumns"]}),s.register("tableRow",{allowIn:"table",isLimit:!0}),s.register("tableCell",{allowContentOf:"$container",allowIn:"tableRow",allowAttributes:["colspan","rowspan"],isLimit:!0,isSelectable:!0}),r.for("upcast").add(Sve()),r.for("upcast").add(Ave()),r.for("editingDowncast").elementToStructure({model:{name:"table",attributes:["headingRows"]},view:w5(o,{asWidget:!0,additionalSlots:this._additionalSlots})}),r.for("dataDowncast").elementToStructure({model:{name:"table",attributes:["headingRows"]},view:w5(o,{additionalSlots:this._additionalSlots})}),r.for("upcast").elementToElement({model:"tableRow",view:"tr"}),r.for("upcast").add(Pve()),r.for("downcast").elementToElement({model:"tableRow",view:Mve()}),r.for("upcast").elementToElement({model:"tableCell",view:"td"}),r.for("upcast").elementToElement({model:"tableCell",view:"th"}),r.for("upcast").add(b5("td")),r.for("upcast").add(b5("th")),r.for("editingDowncast").elementToElement({model:"tableCell",view:v5({asWidget:!0})}),r.for("dataDowncast").elementToElement({model:"tableCell",view:v5()}),r.for("editingDowncast").elementToElement({model:"paragraph",view:y5({asWidget:!0}),converterPriority:"high"}),r.for("dataDowncast").elementToElement({model:"paragraph",view:y5(),converterPriority:"high"}),r.for("downcast").attributeToAttribute({model:"colspan",view:"colspan"}),r.for("upcast").attributeToAttribute({model:{key:"colspan",value:P5("colspan")},view:"colspan"}),r.for("downcast").attributeToAttribute({model:"rowspan",view:"rowspan"}),r.for("upcast").attributeToAttribute({model:{key:"rowspan",value:P5("rowspan")},view:"rowspan"}),e.config.define("table.defaultHeadings.rows",0),e.config.define("table.defaultHeadings.columns",0),e.commands.add("insertTable",new Dve(e)),e.commands.add("insertTableRowAbove",new _5(e,{order:"above"})),e.commands.add("insertTableRowBelow",new _5(e,{order:"below"})),e.commands.add("insertTableColumnLeft",new E5(e,{order:"left"})),e.commands.add("insertTableColumnRight",new E5(e,{order:"right"})),e.commands.add("removeTableRow",new Hve(e)),e.commands.add("removeTableColumn",new Wve(e)),e.commands.add("splitTableCellVertically",new C5(e,{direction:"vertically"})),e.commands.add("splitTableCellHorizontally",new C5(e,{direction:"horizontally"})),e.commands.add("mergeTableCells",new f0e(e)),e.commands.add("mergeTableCellRight",new fg(e,{direction:"right"})),e.commands.add("mergeTableCellLeft",new fg(e,{direction:"left"})),e.commands.add("mergeTableCellDown",new fg(e,{direction:"down"})),e.commands.add("mergeTableCellUp",new fg(e,{direction:"up"})),e.commands.add("setTableColumnHeader",new Yve(e)),e.commands.add("setTableRowHeader",new Kve(e)),e.commands.add("selectTableRow",new p0e(e)),e.commands.add("selectTableColumn",new b0e(e)),w0e(n),k0e(n),this.listenTo(n.document,"change:data",()=>{P0e(n,e.editing),I0e(n,e.editing)})}registerAdditionalSlot(e){this._additionalSlots.push(e)}}function P5(i){return t=>{const e=parseInt(t.getAttribute(i));return Number.isNaN(e)||e<=0?null:e}}class I5 extends xe{constructor(e){super(e);b(this,"items");b(this,"keystrokes");b(this,"focusTracker");const n=this.bindTemplate;this.items=this._createGridCollection(),this.keystrokes=new tn,this.focusTracker=new Gt,this.set("rows",0),this.set("columns",0),this.bind("label").to(this,"columns",this,"rows",(s,r)=>`${r} × ${s}`),this.setTemplate({tag:"div",attributes:{class:["ck"]},children:[{tag:"div",attributes:{class:["ck-insert-table-dropdown__grid"]},on:{"mouseover@.ck-insert-table-dropdown-grid-box":n.to("boxover")},children:this.items},{tag:"div",attributes:{class:["ck","ck-insert-table-dropdown__label"],"aria-hidden":!0},children:[{text:n.to("label")}]}],on:{mousedown:n.to(s=>{s.preventDefault()}),click:n.to(()=>{this.fire("execute")})}}),this.on("boxover",(s,r)=>{const{row:o,column:a}=r.target.dataset;this.items.get((parseInt(o,10)-1)*10+(parseInt(a,10)-1)).focus()}),this.focusTracker.on("change:focusedElement",(s,r,o)=>{if(!o)return;const{row:a,column:l}=o.dataset;this.set({rows:parseInt(a),columns:parseInt(l)})}),this.on("change:columns",()=>this._highlightGridBoxes()),this.on("change:rows",()=>this._highlightGridBoxes())}render(){super.render(),GE({keystrokeHandler:this.keystrokes,focusTracker:this.focusTracker,gridItems:this.items,numberOfColumns:10,uiLanguageDirection:this.locale&&this.locale.uiLanguageDirection});for(const e of this.items)this.focusTracker.add(e.element);this.keystrokes.listenTo(this.element)}reset(){this.set({rows:1,columns:1})}focus(){this.items.get(0).focus()}focusLast(){this.items.get(0).focus()}_highlightGridBoxes(){const e=this.rows,n=this.columns;this.items.map((s,r)=>{const o=Math.floor(r/10),a=r%10,l=o<e&&a<n;s.set("isOn",l)})}_createGridButton(e,n,s,r){const o=new qe(e);return o.set({label:r,class:"ck-insert-table-dropdown-grid-box"}),o.extendTemplate({attributes:{"data-row":n,"data-column":s}}),o}_createGridCollection(){const e=[];for(let n=0;n<100;n++){const s=Math.floor(n/10),r=n%10,o=`${s+1} × ${r+1}`;e.push(this._createGridButton(this.locale,s+1,r+1,o))}return this.createCollection(e)}}var O0e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1zM2 2v16h16V2H2z" opacity=".6"/><path d="M18 7v1H2V7h16zm0 5v1H2v-1h16z" opacity=".6"/><path d="M14 1v18a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V1a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1zm-2 1H8v4h4V2zm0 6H8v4h4V8zm0 6H8v4h4v-4z"/></svg>',N0e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1zM2 2v16h16V2H2z" opacity=".6"/><path d="M7 2h1v16H7V2zm5 0h1v16h-1V2z" opacity=".6"/><path d="M1 6h18a1 1 0 0 1 1 1v6a1 1 0 0 1-1 1H1a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1zm1 2v4h4V8H2zm6 0v4h4V8H8zm6 0v4h4V8h-4z"/></svg>',M0e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1zM2 2v16h16V2H2z" opacity=".6"/><path d="M7 2h1v16H7V2zm5 0h1v7h-1V2zm6 5v1H2V7h16zM8 12v1H2v-1h6z" opacity=".6"/><path d="M7 7h12a1 1 0 0 1 1 1v11a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V8a1 1 0 0 1 1-1zm1 2v9h10V9H8z"/></svg>';class L0e extends J{static get pluginName(){return"TableUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=this.editor.t,s=t.locale.contentLanguageDirection==="ltr";t.ui.componentFactory.add("insertTable",r=>{const o=t.commands.get("insertTable"),a=ti(r);a.bind("isEnabled").to(o),a.buttonView.set({icon:ve.table,label:e("Insert table"),tooltip:!0});let l;return a.on("change:isOpen",()=>{l||(l=new I5(r),a.panelView.children.add(l),l.delegate("execute").to(a),a.on("execute",()=>{t.execute("insertTable",{rows:l.rows,columns:l.columns}),t.editing.view.focus()}))}),a}),t.ui.componentFactory.add("menuBar:insertTable",r=>{const o=t.commands.get("insertTable"),a=new Yi(r),l=new I5(r);return l.delegate("execute").to(a),a.on("change:isOpen",(u,h,f)=>{f||l.reset()}),l.on("execute",()=>{t.execute("insertTable",{rows:l.rows,columns:l.columns}),t.editing.view.focus()}),a.buttonView.set({label:e("Table"),icon:ve.table}),a.panelView.children.add(l),a.bind("isEnabled").to(o),a}),t.ui.componentFactory.add("tableColumn",r=>{const o=[{type:"switchbutton",model:{commandName:"setTableColumnHeader",label:e("Header column"),bindIsOn:!0}},{type:"separator"},{type:"button",model:{commandName:s?"insertTableColumnLeft":"insertTableColumnRight",label:e("Insert column left")}},{type:"button",model:{commandName:s?"insertTableColumnRight":"insertTableColumnLeft",label:e("Insert column right")}},{type:"button",model:{commandName:"removeTableColumn",label:e("Delete column")}},{type:"button",model:{commandName:"selectTableColumn",label:e("Select column")}}];return this._prepareDropdown(e("Column"),O0e,o,r)}),t.ui.componentFactory.add("tableRow",r=>{const o=[{type:"switchbutton",model:{commandName:"setTableRowHeader",label:e("Header row"),bindIsOn:!0}},{type:"separator"},{type:"button",model:{commandName:"insertTableRowAbove",label:e("Insert row above")}},{type:"button",model:{commandName:"insertTableRowBelow",label:e("Insert row below")}},{type:"button",model:{commandName:"removeTableRow",label:e("Delete row")}},{type:"button",model:{commandName:"selectTableRow",label:e("Select row")}}];return this._prepareDropdown(e("Row"),N0e,o,r)}),t.ui.componentFactory.add("mergeTableCells",r=>{const o=[{type:"button",model:{commandName:"mergeTableCellUp",label:e("Merge cell up")}},{type:"button",model:{commandName:s?"mergeTableCellRight":"mergeTableCellLeft",label:e("Merge cell right")}},{type:"button",model:{commandName:"mergeTableCellDown",label:e("Merge cell down")}},{type:"button",model:{commandName:s?"mergeTableCellLeft":"mergeTableCellRight",label:e("Merge cell left")}},{type:"separator"},{type:"button",model:{commandName:"splitTableCellVertically",label:e("Split cell vertically")}},{type:"button",model:{commandName:"splitTableCellHorizontally",label:e("Split cell horizontally")}}];return this._prepareMergeSplitButtonDropdown(e("Merge cells"),M0e,o,r)})}_prepareDropdown(t,e,n,s){const r=this.editor,o=ti(s),a=this._fillDropdownWithListOptions(o,n);return o.buttonView.set({label:t,icon:e,tooltip:!0}),o.bind("isEnabled").toMany(a,"isEnabled",(...l)=>l.some(u=>u)),this.listenTo(o,"execute",l=>{r.execute(l.source.commandName),l.source instanceof pf||r.editing.view.focus()}),o}_prepareMergeSplitButtonDropdown(t,e,n,s){const r=this.editor,o=ti(s,bf),a="mergeTableCells",l=r.commands.get(a),u=this._fillDropdownWithListOptions(o,n);return o.buttonView.set({label:t,icon:e,tooltip:!0,isEnabled:!0}),o.bind("isEnabled").toMany([l,...u],"isEnabled",(...h)=>h.some(f=>f)),this.listenTo(o.buttonView,"execute",()=>{r.execute(a),r.editing.view.focus()}),this.listenTo(o,"execute",h=>{r.execute(h.source.commandName),r.editing.view.focus()}),o}_fillDropdownWithListOptions(t,e){const n=this.editor,s=[],r=new Hn;for(const o of e)V0e(o,n,s,r);return Ll(t,r),s}}function V0e(i,t,e,n){if(i.type==="button"||i.type==="switchbutton"){const s=i.model=new xl(i.model),{commandName:r,bindIsOn:o}=i.model,a=t.commands.get(r);e.push(a),s.set({commandName:r}),s.bind("isEnabled").to(a),o&&s.bind("isOn").to(a,"value"),s.set({withText:!0})}n.add(i)}class ml extends J{static get pluginName(){return"TableSelection"}static get isOfficialPlugin(){return!0}static get requires(){return[On,On]}init(){const t=this.editor,e=t.model,n=t.editing.view;this.listenTo(e,"deleteContent",(s,r)=>this._handleDeleteContent(s,r),{priority:"high"}),this.listenTo(n.document,"insertText",(s,r)=>this._handleInsertTextEvent(s,r),{priority:"high"}),this._defineSelectionConverter(),this._enablePluginDisabling()}getSelectedTableCells(){const t=this.editor.plugins.get(On),e=this.editor.model.document.selection,n=t.getSelectedTableCells(e);return n.length==0?null:n}getSelectionAsFragment(){const t=this.editor.plugins.get(On),e=this.getSelectedTableCells();return e?this.editor.model.change(n=>{const s=n.createDocumentFragment(),{first:r,last:o}=t.getColumnIndexes(e),{first:a,last:l}=t.getRowIndexes(e),u=e[0].findAncestor("table");let h=l,f=o;if(t.isSelectionRectangular(e)){const y={firstColumn:r,lastColumn:o,firstRow:a,lastRow:l};h=DV(u,y),f=BV(u,y)}const p=RV(u,{startRow:a,startColumn:r,endRow:h,endColumn:f},n);return n.insert(p,s,0),s}):null}setCellSelection(t,e){const n=this._getCellsToSelect(t,e);this.editor.model.change(s=>{s.setSelection(n.cells.map(r=>s.createRangeOn(r)),{backward:n.backward})})}getFocusCell(){const n=[...this.editor.model.document.selection.getRanges()].pop().getContainedElement();return n&&n.is("element","tableCell")?n:null}getAnchorCell(){const t=this.editor.model.document.selection,n=ln(t.getRanges()).getContainedElement();return n&&n.is("element","tableCell")?n:null}_defineSelectionConverter(){const t=this.editor,e=new Set;t.conversion.for("editingDowncast").add(s=>s.on("selection",(r,o,a)=>{const l=a.writer;n(l);const u=this.getSelectedTableCells();if(!u)return;for(const f of u){const g=a.mapper.toViewElement(f);l.addClass("ck-editor__editable_selected",g),e.add(g)}const h=a.mapper.toViewElement(u[u.length-1]);l.setSelection(h,0)},{priority:"lowest"}));function n(s){for(const r of e)s.removeClass("ck-editor__editable_selected",r);e.clear()}}_enablePluginDisabling(){const t=this.editor;this.on("change:isEnabled",()=>{if(!this.isEnabled){const e=this.getSelectedTableCells();if(!e)return;t.model.change(n=>{const s=n.createPositionAt(e[0],0),r=t.model.schema.getNearestSelectionRange(s);n.setSelection(r)})}})}_handleDeleteContent(t,e){const n=this.editor.plugins.get(On),s=e[0],r=e[1],o=this.editor.model,a=!r||r.direction=="backward",l=n.getSelectedTableCells(s);l.length&&(t.stop(),o.change(u=>{const h=l[a?l.length-1:0];o.change(g=>{for(const p of l)o.deleteContent(g.createSelection(p,"in"))});const f=o.schema.getNearestSelectionRange(u.createPositionAt(h,0));s.is("documentSelection")?u.setSelection(f):s.setTo(f)}))}_handleInsertTextEvent(t,e){const n=this.editor,s=this.getSelectedTableCells();if(!s)return;const r=n.editing.view,o=n.editing.mapper,a=s.map(l=>r.createRangeOn(o.toViewElement(l)));e.selection=r.createSelection(a)}_getCellsToSelect(t,e){const n=this.editor.plugins.get("TableUtils"),s=n.getCellLocation(t),r=n.getCellLocation(e),o=Math.min(s.row,r.row),a=Math.max(s.row,r.row),l=Math.min(s.column,r.column),u=Math.max(s.column,r.column),h=new Array(a-o+1).fill(null).map(()=>[]),f={startRow:o,endRow:a,startColumn:l,endColumn:u};for(const{row:y,cell:E}of new Et(t.findAncestor("table"),f))h[y-o].push(E);const g=r.row<s.row,p=r.column<s.column;return g&&h.reverse(),p&&h.forEach(y=>y.reverse()),{cells:h.flat(),backward:g||p}}}class D0e extends J{static get pluginName(){return"TableClipboard"}static get isOfficialPlugin(){return!0}static get requires(){return[gh,Ts,ml,On]}init(){const t=this.editor,e=t.editing.view.document;this.listenTo(e,"copy",(n,s)=>this._onCopyCut(n,s)),this.listenTo(e,"cut",(n,s)=>this._onCopyCut(n,s)),this.listenTo(t.model,"insertContent",(n,[s,r])=>this._onInsertContent(n,s,r),{priority:"high"}),this.decorate("_replaceTableSlotCell")}_onCopyCut(t,e){const n=this.editor.editing.view,s=this.editor.plugins.get(ml),r=this.editor.plugins.get(gh);s.getSelectedTableCells()&&(t.name=="cut"&&!this.editor.model.canEditAt(this.editor.model.document.selection)||(e.preventDefault(),t.stop(),this.editor.model.enqueueChange({isUndoable:t.name==="cut"},()=>{const o=r._copySelectedFragmentWithMarkers(t.name,this.editor.model.document.selection,()=>s.getSelectionAsFragment());n.document.fire("clipboardOutput",{dataTransfer:e.dataTransfer,content:this.editor.data.toView(o),method:t.name})})))}_onInsertContent(t,e,n){if(n&&!n.is("documentSelection"))return;const s=this.editor.model,r=this.editor.plugins.get(On),o=this.editor.plugins.get(gh),a=this.getTableIfOnlyTableInContent(e,s);if(!a)return;const l=r.getSelectionAffectedTableCells(s.document.selection);if(!l.length){bC(a,r);return}t.stop(),e.is("documentFragment")?o._pasteMarkersIntoTransformedElement(e.markers,u=>this._replaceSelectedCells(a,l,u)):this.editor.model.change(u=>{this._replaceSelectedCells(a,l,u)})}_replaceSelectedCells(t,e,n){const s=this.editor.plugins.get(On),r={width:s.getColumns(t),height:s.getRows(t)},o=B0e(e,r,n,s),a=o.lastRow-o.firstRow+1,l=o.lastColumn-o.firstColumn+1,u={startRow:0,startColumn:0,endRow:Math.min(a,r.height)-1,endColumn:Math.min(l,r.width)-1};t=RV(t,u,n);const h=e[0].findAncestor("table"),f=this._replaceSelectedCellsWithPasted(t,r,h,o,n);if(this.editor.plugins.get("TableSelection").isEnabled){const g=s.sortRanges(f.map(p=>n.createRangeOn(p)));n.setSelection(g)}else n.setSelection(f[0],0);return h}_replaceSelectedCellsWithPasted(t,e,n,s,r){const{width:o,height:a}=e,l=$0e(t,o,a),u=[...new Et(n,{startRow:s.firstRow,endRow:s.lastRow,startColumn:s.firstColumn,endColumn:s.lastColumn,includeAllSlots:!0})],h=[];let f;for(const C of u){const{row:k,column:T}=C;T===s.firstColumn&&(f=C.getPositionBefore());const P=k-s.firstRow,S=T-s.firstColumn,O=l[P%a][S%o],A=O?r.cloneElement(O):null,N=this._replaceTableSlotCell(C,A,f,r);N&&(VV(N,k,T,s.lastRow,s.lastColumn,r),h.push(N),f=r.createPositionAfter(N))}const g=parseInt(n.getAttribute("headingRows")||"0"),p=parseInt(n.getAttribute("headingColumns")||"0"),y=s.firstRow<g&&g<=s.lastRow,E=s.firstColumn<p&&p<=s.lastColumn;if(y){const C={first:s.firstColumn,last:s.lastColumn},k=o_(n,g,C,r,s.firstRow);h.push(...k)}if(E){const C={first:s.firstRow,last:s.lastRow},k=a_(n,p,C,r);h.push(...k)}return h}_replaceTableSlotCell(t,e,n,s){const{cell:r,isAnchor:o}=t;return o&&s.remove(r),e?(s.insert(e,n),e):null}getTableIfOnlyTableInContent(t,e){if(!t.is("documentFragment")&&!t.is("element"))return null;if(t.is("element","table"))return t;if(t.childCount==1&&t.getChild(0).is("element","table"))return t.getChild(0);const n=e.createRangeIn(t);for(const s of n.getItems())if(s.is("element","table")){const r=e.createRange(n.start,e.createPositionBefore(s));if(e.hasContent(r,{ignoreWhitespaces:!0}))return null;const o=e.createRange(e.createPositionAfter(s),n.end);return e.hasContent(o,{ignoreWhitespaces:!0})?null:s}return null}}function B0e(i,t,e,n){const s=i[0].findAncestor("table"),r=n.getColumnIndexes(i),o=n.getRowIndexes(i),a={firstColumn:r.first,lastColumn:r.last,firstRow:o.first,lastRow:o.last},l=i.length===1;return l&&(a.lastRow+=t.height-1,a.lastColumn+=t.width-1,F0e(s,a.lastRow+1,a.lastColumn+1,n)),l||!n.isSelectionRectangular(i)?z0e(s,a,e):(a.lastRow=DV(s,a),a.lastColumn=BV(s,a)),a}function F0e(i,t,e,n){const s=n.getColumns(i),r=n.getRows(i);e>s&&n.insertColumns(i,{at:s,columns:e-s}),t>r&&n.insertRows(i,{at:r,rows:t-r})}function $0e(i,t,e){const n=new Array(e).fill(null).map(()=>new Array(t).fill(null));for(const{column:s,row:r,cell:o}of new Et(i))n[r][s]=o;return n}function z0e(i,t,e){const{firstRow:n,lastRow:s,firstColumn:r,lastColumn:o}=t,a={first:n,last:s},l={first:r,last:o};a_(i,r,a,e),a_(i,o+1,a,e),o_(i,n,l,e),o_(i,s+1,l,e,n)}function o_(i,t,e,n,s=0){return t<1?void 0:OV(i,t,s).filter(({column:a,cellWidth:l})=>jV(a,l,e)).map(({cell:a})=>NV(a,t,n))}function a_(i,t,e,n){return t<1?void 0:MV(i,t).filter(({row:o,cellHeight:a})=>jV(o,a,e)).map(({cell:o,column:a})=>LV(o,a,t,n))}function jV(i,t,e){const n=i+t-1,{first:s,last:r}=e,o=i>=s&&i<=r,a=i<s&&n>=s;return o||a}class j0e extends J{static get pluginName(){return"TableKeyboard"}static get isOfficialPlugin(){return!0}static get requires(){return[ml,On]}init(){const t=this.editor,n=t.editing.view.document,s=t.t;this.listenTo(n,"arrowKey",(...r)=>this._onArrowKey(...r),{context:"table"}),this.listenTo(n,"tab",(...r)=>this._handleTabOnSelectedTable(...r),{context:"figure"}),this.listenTo(n,"tab",(...r)=>this._handleTab(...r),{context:["th","td"]}),t.accessibility.addKeystrokeInfoGroup({id:"table",label:s("Keystrokes that can be used in a table cell"),keystrokes:[{label:s("Move the selection to the next cell"),keystroke:"Tab"},{label:s("Move the selection to the previous cell"),keystroke:"Shift+Tab"},{label:s("Insert a new table row (when in the last cell of a table)"),keystroke:"Tab"},{label:s("Navigate through the table"),keystroke:[["arrowup"],["arrowright"],["arrowdown"],["arrowleft"]]}]})}_handleTabOnSelectedTable(t,e){const n=this.editor,r=n.model.document.selection.getSelectedElement();!r||!r.is("element","table")||(e.preventDefault(),e.stopPropagation(),t.stop(),n.model.change(o=>{o.setSelection(o.createRangeIn(r.getChild(0).getChild(0)))}))}_handleTab(t,e){const n=this.editor,s=this.editor.plugins.get(On),r=this.editor.plugins.get("TableSelection"),o=n.model.document.selection,a=!e.shiftKey;let l=s.getTableCellsContainingSelection(o)[0];if(l||(l=r.getFocusCell()),!l)return;e.preventDefault(),e.stopPropagation(),t.stop();const u=l.parent,h=u.parent,f=h.getChildIndex(u),g=u.getChildIndex(l),p=g===0;if(!a&&p&&f===0){n.model.change(k=>{k.setSelection(k.createRangeOn(h))});return}const y=g===u.childCount-1,E=f===s.getRows(h)-1;if(a&&E&&y&&(n.execute("insertTableRowBelow"),f===s.getRows(h)-1)){n.model.change(k=>{k.setSelection(k.createRangeOn(h))});return}let C;if(a&&y)C=h.getChild(f+1).getChild(0);else if(!a&&p){const k=h.getChild(f-1);C=k.getChild(k.childCount-1)}else C=u.getChild(g+(a?1:-1));n.model.change(k=>{k.setSelection(k.createRangeIn(C))})}_onArrowKey(t,e){const n=this.editor,s=e.keyCode,r=Ib(s,n.locale.contentLanguageDirection);this._handleArrowKeys(r,e.shiftKey)&&(e.preventDefault(),e.stopPropagation(),t.stop())}_handleArrowKeys(t,e){const n=this.editor.plugins.get(On),s=this.editor.plugins.get("TableSelection"),r=this.editor.model,o=r.document.selection,a=["right","down"].includes(t),l=n.getSelectedTableCells(o);if(l.length){let h;return e?h=s.getFocusCell():h=a?l[l.length-1]:l[0],this._navigateFromCellInDirection(h,t,e),!0}const u=o.focus.findAncestor("tableCell");/* istanbul ignore if: paranoid check -- @preserve */if(!u)return!1;if(!o.isCollapsed)if(e){if(o.isBackward==a&&!o.containsEntireContent(u))return!1}else{const h=o.getSelectedElement();if(!h||!r.schema.isObject(h))return!1}return this._isSelectionAtCellEdge(o,u,a)?(this._navigateFromCellInDirection(u,t,e),!0):!1}_isSelectionAtCellEdge(t,e,n){const s=this.editor.model,r=this.editor.model.schema,o=n?t.getLastPosition():t.getFirstPosition();if(!r.getLimitElement(o).is("element","tableCell"))return s.createPositionAt(e,n?"end":0).isTouching(o);const a=s.createSelection(o);return s.modifySelection(a,{direction:n?"forward":"backward"}),o.isEqual(a.focus)}_navigateFromCellInDirection(t,e,n=!1){const s=this.editor.model,r=t.findAncestor("table"),o=[...new Et(r,{includeAllSlots:!0})],{row:a,column:l}=o[o.length-1],u=o.find(({cell:T})=>T==t);let{row:h,column:f}=u;switch(e){case"left":f--;break;case"up":h--;break;case"right":f+=u.cellWidth;break;case"down":h+=u.cellHeight;break}const g=h<0||h>a,p=f<0&&h<=0,y=f>l&&h>=a;if(g||p||y){s.change(T=>{T.setSelection(T.createRangeOn(r))});return}f<0?(f=n?0:l,h--):f>l&&(f=n?l:0,h++);const E=o.find(T=>T.row==h&&T.column==f).cell,C=["right","down"].includes(e),k=this.editor.plugins.get("TableSelection");if(n&&k.isEnabled){const T=k.getAnchorCell()||t;k.setCellSelection(T,E)}else{const T=s.createPositionAt(E,C?0:"end");s.change(P=>{P.setSelection(T)})}}}class HV extends Nr{constructor(){super(...arguments);b(this,"domEventType",["mousemove","mouseleave"])}onDomEvent(e){this.fire(e.type,e)}}class H0e extends J{static get pluginName(){return"TableMouse"}static get isOfficialPlugin(){return!0}static get requires(){return[ml,On]}init(){this.editor.editing.view.addObserver(HV),this._enableShiftClickSelection(),this._enableMouseDragSelection()}_enableShiftClickSelection(){const t=this.editor,e=t.plugins.get(On);let n=!1;const s=t.plugins.get(ml);this.listenTo(t.editing.view.document,"mousedown",(r,o)=>{const a=t.model.document.selection;if(!this.isEnabled||!s.isEnabled||!o.domEvent.shiftKey)return;const l=s.getAnchorCell()||e.getTableCellsContainingSelection(a)[0];if(!l)return;const u=this._getModelTableCellFromDomEvent(o);u&&R5(l,u)&&(n=!0,s.setCellSelection(l,u),o.preventDefault())}),this.listenTo(t.editing.view.document,"mouseup",()=>{n=!1}),this.listenTo(t.editing.view.document,"selectionChange",r=>{n&&r.stop()},{priority:"highest"})}_enableMouseDragSelection(){const t=this.editor;let e,n,s=!1,r=!1;const o=t.plugins.get(ml);this.listenTo(t.editing.view.document,"mousedown",(a,l)=>{!this.isEnabled||!o.isEnabled||l.domEvent.shiftKey||l.domEvent.ctrlKey||l.domEvent.altKey||(e=this._getModelTableCellFromDomEvent(l))}),this.listenTo(t.editing.view.document,"mousemove",(a,l)=>{if(!l.domEvent.buttons||!e)return;const u=this._getModelTableCellFromDomEvent(l);u&&R5(e,u)&&(n=u,!s&&n!=e&&(s=!0)),s&&(r=!0,o.setCellSelection(e,n),l.preventDefault())}),this.listenTo(t.editing.view.document,"mouseup",()=>{s=!1,r=!1,e=null,n=null}),this.listenTo(t.editing.view.document,"selectionChange",a=>{r&&a.stop()},{priority:"highest"})}_getModelTableCellFromDomEvent(t){const e=t.target,n=this.editor.editing.view.createPositionAt(e,0);return this.editor.editing.mapper.toModelPosition(n).parent.findAncestor("tableCell",{includeSelf:!0})}}function R5(i,t){return i.parent.parent==t.parent.parent}class U0e extends J{static get requires(){return[Cf,L0e,ml,H0e,j0e,D0e,wf]}static get pluginName(){return"Table"}static get isOfficialPlugin(){return!0}}function UV(i){const t=WV(i);return t||Zb(i)}function WV(i){const t=i.getSelectedElement();return t&&qV(t)?t:null}function Zb(i){const t=i.getFirstPosition();if(!t)return null;let e=t.parent;for(;e;){if(e.is("element")&&qV(e))return e;e=e.parent}return null}function qV(i){return!!i.getCustomProperty("table")&&rn(i)}class W0e extends J{static get requires(){return[Pp]}static get pluginName(){return"TableToolbar"}static get isOfficialPlugin(){return!0}afterInit(){const t=this.editor,e=t.t,n=t.plugins.get(Pp),s=t.config.get("table.contentToolbar"),r=t.config.get("table.tableToolbar");s&&n.register("tableContent",{ariaLabel:e("Table toolbar"),items:s,getRelatedElement:Zb}),r&&n.register("table",{ariaLabel:e("Table toolbar"),items:r,getRelatedElement:WV})}}class q0e extends xe{constructor(e,n){super(e);b(this,"options");b(this,"focusTracker");b(this,"focusCycler");b(this,"_focusables");b(this,"dropdownView");b(this,"inputView");b(this,"keystrokes");b(this,"_stillTyping");this.set("value",""),this.set("isReadOnly",!1),this.set("isFocused",!1),this.set("isEmpty",!0),this.options=n,this.focusTracker=new Gt,this._focusables=new Un,this.dropdownView=this._createDropdownView(),this.inputView=this._createInputTextView(),this.keystrokes=new tn,this._stillTyping=!1,this.focusCycler=new fi({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-input-color"]},children:[this.dropdownView,this.inputView]}),this.on("change:value",(s,r,o)=>this._setInputValue(o))}render(){super.render(),[this.inputView,this.dropdownView.buttonView].forEach(e=>{this.focusTracker.add(e.element),this._focusables.add(e)}),this.keystrokes.listenTo(this.element)}focus(e){e===-1?this.focusCycler.focusLast():this.focusCycler.focusFirst()}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}_createDropdownView(){const e=this.locale,n=e.t,s=this.bindTemplate,r=this._createColorSelector(e),o=ti(e),a=new xe;return a.setTemplate({tag:"span",attributes:{class:["ck","ck-input-color__button__preview"],style:{backgroundColor:s.to("value")}},children:[{tag:"span",attributes:{class:["ck","ck-input-color__button__preview__no-color-indicator",s.if("value","ck-hidden",l=>l!="")]}}]}),o.buttonView.extendTemplate({attributes:{class:"ck-input-color__button"}}),o.buttonView.children.add(a),o.buttonView.label=n("Color picker"),o.buttonView.tooltip=!0,o.panelPosition=e.uiLanguageDirection==="rtl"?"se":"sw",o.panelView.children.add(r),o.bind("isEnabled").to(this,"isReadOnly",l=>!l),o.on("change:isOpen",(l,u,h)=>{h&&(r.updateSelectedColors(),r.showColorGridsFragment())}),o}_createInputTextView(){const e=this.locale,n=new ZM(e);return n.extendTemplate({on:{blur:n.bindTemplate.to("blur")}}),n.value=this.value,n.bind("isReadOnly","hasError").to(this),this.bind("isFocused","isEmpty").to(n),n.on("input",()=>{const s=n.element.value,r=this.options.colorDefinitions.find(o=>s===o.label);this._stillTyping=!0,this.value=r&&r.color||s}),n.on("blur",()=>{this._stillTyping=!1,this._setInputValue(n.element.value)}),n.delegate("input").to(this),n}_createColorSelector(e){const n=e.t,s=this.options.defaultColorValue||"",r=n(s?"Restore default":"Remove color"),o=new ZE(e,{colors:this.options.colorDefinitions,columns:this.options.columns,removeButtonLabel:r,colorPickerLabel:n("Color picker"),colorPickerViewConfig:this.options.colorPickerConfig===!1?!1:{...this.options.colorPickerConfig,hideInput:!0}});o.appendUI(),o.on("execute",(l,u)=>{if(u.source==="colorPickerSaveButton"){this.dropdownView.isOpen=!1;return}this.value=u.value||s,this.fire("input"),u.source!=="colorPicker"&&(this.dropdownView.isOpen=!1)});let a=this.value;return o.on("colorPicker:cancel",()=>{this.value=a,this.fire("input"),this.dropdownView.isOpen=!1}),o.colorGridsFragmentView.colorPickerButtonView.on("execute",()=>{a=this.value}),o.bind("selectedColor").to(this,"value"),o}_setInputValue(e){if(!this._stillTyping){const n=O5(e),s=this.options.colorDefinitions.find(r=>n===O5(r.color));s?this.inputView.value=s.label:this.inputView.value=e||""}}}function O5(i){return i.replace(/([(,])\s+/g,"$1").replace(/^\s+|\s+(?=[),\s]|$)/g,"").replace(/,|\s/g," ")}const vC=i=>i==="";function yC(i){return{none:i("None"),solid:i("Solid"),dotted:i("Dotted"),dashed:i("Dashed"),double:i("Double"),groove:i("Groove"),ridge:i("Ridge"),inset:i("Inset"),outset:i("Outset")}}function GV(i){return i('The color is invalid. Try "#FF0000" or "rgb(255,0,0)" or "red".')}function KV(i){return i('The value is invalid. Try "10px" or "2em" or simply "2".')}function Vp(i){return i=i.trim().toLowerCase(),vC(i)||EM(i)}function bh(i){return i=i.trim(),vC(i)||XV(i)||Vb(i)||CM(i)}function YV(i){return i=i.trim(),vC(i)||XV(i)||Vb(i)}function ZV(i,t){const e=new Hn,n=yC(i.t);for(const s in n){const r={type:"button",model:new xl({_borderStyleValue:s,label:n[s],role:"menuitemradio",withText:!0})};s==="none"?r.model.bind("isOn").to(i,"borderStyle",o=>t==="none"?!o:o===s):r.model.bind("isOn").to(i,"borderStyle",o=>o===s),e.add(r)}return e}function l_(i){const{view:t,icons:e,toolbar:n,labels:s,propertyName:r,nameToValue:o,defaultValue:a}=i;for(const l in s){const u=new qe(t.locale);u.set({role:"radio",isToggleable:!0,label:s[l],icon:e[l],tooltip:s[l]});const h=o?o(l):l;u.bind("isOn").to(t,r,f=>{let g=f;return f===""&&a&&(g=a),h===g}),u.on("execute",()=>{t[r]=h}),n.items.add(u)}}const Dp=[{color:"hsl(0, 0%, 0%)",label:"Black"},{color:"hsl(0, 0%, 30%)",label:"Dim grey"},{color:"hsl(0, 0%, 60%)",label:"Grey"},{color:"hsl(0, 0%, 90%)",label:"Light grey"},{color:"hsl(0, 0%, 100%)",label:"White",hasBorder:!0},{color:"hsl(0, 75%, 60%)",label:"Red"},{color:"hsl(30, 75%, 60%)",label:"Orange"},{color:"hsl(60, 75%, 60%)",label:"Yellow"},{color:"hsl(90, 75%, 60%)",label:"Light green"},{color:"hsl(120, 75%, 60%)",label:"Green"},{color:"hsl(150, 75%, 60%)",label:"Aquamarine"},{color:"hsl(180, 75%, 60%)",label:"Turquoise"},{color:"hsl(210, 75%, 60%)",label:"Light blue"},{color:"hsl(240, 75%, 60%)",label:"Blue"},{color:"hsl(270, 75%, 60%)",label:"Purple"}];function Bp(i){return(t,e,n)=>{const s=new q0e(t.locale,{colorDefinitions:G0e(i.colorConfig),columns:i.columns,defaultColorValue:i.defaultColorValue,colorPickerConfig:i.colorPickerConfig});return s.inputView.set({id:e,ariaDescribedById:n}),s.bind("isReadOnly").to(t,"isEnabled",r=>!r),s.bind("hasError").to(t,"errorText",r=>!!r),s.on("input",()=>{t.errorText=null}),t.bind("isEmpty","isFocused").to(s),s}}function XV(i){const t=parseFloat(i);return!Number.isNaN(t)&&i===String(t)}function G0e(i){return i.map(t=>({color:t.model,label:t.label,options:{hasBorder:t.hasBorder}}))}class ji extends xe{constructor(e,n={}){super(e);b(this,"children");const s=this.bindTemplate;this.set("class",n.class||null),this.children=this.createCollection(),n.children&&n.children.forEach(r=>this.children.add(r)),this.set("_role",null),this.set("_ariaLabelledBy",null),n.labelView&&this.set({_role:"group",_ariaLabelledBy:n.labelView.id}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-form__row",s.to("class")],role:s.to("_role"),"aria-labelledby":s.to("_ariaLabelledBy")},children:this.children})}}class K0e extends xe{constructor(e,n){super(e);b(this,"options");b(this,"focusTracker");b(this,"keystrokes");b(this,"children");b(this,"borderStyleDropdown");b(this,"borderWidthInput");b(this,"borderColorInput");b(this,"backgroundInput");b(this,"paddingInput");b(this,"widthInput");b(this,"heightInput");b(this,"horizontalAlignmentToolbar");b(this,"verticalAlignmentToolbar");b(this,"saveButtonView");b(this,"cancelButtonView");b(this,"_focusables");b(this,"_focusCycler");this.set({borderStyle:"",borderWidth:"",borderColor:"",padding:"",backgroundColor:"",width:"",height:"",horizontalAlignment:"",verticalAlignment:""}),this.options=n;const{borderStyleDropdown:s,borderWidthInput:r,borderColorInput:o,borderRowLabel:a}=this._createBorderFields(),{backgroundRowLabel:l,backgroundInput:u}=this._createBackgroundFields(),{widthInput:h,operatorLabel:f,heightInput:g,dimensionsLabel:p}=this._createDimensionFields(),{horizontalAlignmentToolbar:y,verticalAlignmentToolbar:E,alignmentLabel:C}=this._createAlignmentFields();this.focusTracker=new Gt,this.keystrokes=new tn,this.children=this.createCollection(),this.borderStyleDropdown=s,this.borderWidthInput=r,this.borderColorInput=o,this.backgroundInput=u,this.paddingInput=this._createPaddingField(),this.widthInput=h,this.heightInput=g,this.horizontalAlignmentToolbar=y,this.verticalAlignmentToolbar=E;const{saveButtonView:k,cancelButtonView:T}=this._createActionButtons();this.saveButtonView=k,this.cancelButtonView=T,this._focusables=new Un,this._focusCycler=new fi({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.children.add(new KE(e,{label:this.t("Cell properties")})),this.children.add(new ji(e,{labelView:a,children:[a,s,o,r],class:"ck-table-form__border-row"})),this.children.add(new ji(e,{labelView:l,children:[l,u],class:"ck-table-form__background-row"})),this.children.add(new ji(e,{children:[new ji(e,{labelView:p,children:[p,h,f,g],class:"ck-table-form__dimensions-row"}),new ji(e,{children:[this.paddingInput],class:"ck-table-cell-properties-form__padding-row"})]})),this.children.add(new ji(e,{labelView:C,children:[C,y,E],class:"ck-table-cell-properties-form__alignment-row"})),this.children.add(new ji(e,{children:[this.saveButtonView,this.cancelButtonView],class:"ck-table-form__action-row"})),this.setTemplate({tag:"form",attributes:{class:["ck","ck-form","ck-table-form","ck-table-cell-properties-form"],tabindex:"-1"},children:this.children})}render(){super.render(),Sa({view:this}),[this.borderColorInput,this.backgroundInput].forEach(e=>{this._focusCycler.chain(e.fieldView.focusCycler)}),[this.borderStyleDropdown,this.borderColorInput,this.borderWidthInput,this.backgroundInput,this.widthInput,this.heightInput,this.paddingInput,this.horizontalAlignmentToolbar,this.verticalAlignmentToolbar,this.saveButtonView,this.cancelButtonView].forEach(e=>{this._focusables.add(e),this.focusTracker.add(e.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}_createBorderFields(){const e=this.options.defaultTableCellProperties,n={style:e.borderStyle,width:e.borderWidth,color:e.borderColor},s=Bp({colorConfig:this.options.borderColors,columns:5,defaultColorValue:n.color,colorPickerConfig:this.options.colorPickerConfig}),r=this.locale,o=this.t,a=o("Style"),l=new ws(r);l.text=o("Border");const u=yC(o),h=new bn(r,iL);h.set({label:a,class:"ck-table-form__border-style"}),h.fieldView.buttonView.set({ariaLabel:a,ariaLabelledBy:void 0,isOn:!1,withText:!0,tooltip:a}),h.fieldView.buttonView.bind("label").to(this,"borderStyle",p=>u[p||"none"]),h.fieldView.on("execute",p=>{this.borderStyle=p.source._borderStyleValue}),h.bind("isEmpty").to(this,"borderStyle",p=>!p),Ll(h.fieldView,ZV(this,n.style),{role:"menu",ariaLabel:a});const f=new bn(r,vs);f.set({label:o("Width"),class:"ck-table-form__border-width"}),f.fieldView.bind("value").to(this,"borderWidth"),f.bind("isEnabled").to(this,"borderStyle",mg),f.fieldView.on("input",()=>{this.borderWidth=f.fieldView.element.value});const g=new bn(r,s);return g.set({label:o("Color"),class:"ck-table-form__border-color"}),g.fieldView.bind("value").to(this,"borderColor"),g.bind("isEnabled").to(this,"borderStyle",mg),g.fieldView.on("input",()=>{this.borderColor=g.fieldView.value}),this.on("change:borderStyle",(p,y,E,C)=>{mg(E)||(this.borderColor="",this.borderWidth=""),mg(C)||(this.borderColor=n.color,this.borderWidth=n.width)}),{borderRowLabel:l,borderStyleDropdown:h,borderColorInput:g,borderWidthInput:f}}_createBackgroundFields(){const e=this.locale,n=this.t,s=new ws(e);s.text=n("Background");const r=Bp({colorConfig:this.options.backgroundColors,columns:5,defaultColorValue:this.options.defaultTableCellProperties.backgroundColor,colorPickerConfig:this.options.colorPickerConfig}),o=new bn(e,r);return o.set({label:n("Color"),class:"ck-table-cell-properties-form__background"}),o.fieldView.bind("value").to(this,"backgroundColor"),o.fieldView.on("input",()=>{this.backgroundColor=o.fieldView.value}),{backgroundRowLabel:s,backgroundInput:o}}_createDimensionFields(){const e=this.locale,n=this.t,s=new ws(e);s.text=n("Dimensions");const r=new bn(e,vs);r.set({label:n("Width"),class:"ck-table-form__dimensions-row__width"}),r.fieldView.bind("value").to(this,"width"),r.fieldView.on("input",()=>{this.width=r.fieldView.element.value});const o=new xe(e);o.setTemplate({tag:"span",attributes:{class:["ck-table-form__dimension-operator"]},children:[{text:"×"}]});const a=new bn(e,vs);return a.set({label:n("Height"),class:"ck-table-form__dimensions-row__height"}),a.fieldView.bind("value").to(this,"height"),a.fieldView.on("input",()=>{this.height=a.fieldView.element.value}),{dimensionsLabel:s,widthInput:r,operatorLabel:o,heightInput:a}}_createPaddingField(){const e=this.locale,n=this.t,s=new bn(e,vs);return s.set({label:n("Padding"),class:"ck-table-cell-properties-form__padding"}),s.fieldView.bind("value").to(this,"padding"),s.fieldView.on("input",()=>{this.padding=s.fieldView.element.value}),s}_createAlignmentFields(){const e=this.locale,n=this.t,s=new ws(e),r={left:ve.alignLeft,center:ve.alignCenter,right:ve.alignRight,justify:ve.alignJustify,top:ve.alignTop,middle:ve.alignMiddle,bottom:ve.alignBottom};s.text=n("Table cell text alignment");const o=new bu(e),a=e.contentLanguageDirection==="rtl";o.set({isCompact:!0,role:"radiogroup",ariaLabel:n("Horizontal text alignment toolbar")}),l_({view:this,icons:r,toolbar:o,labels:this._horizontalAlignmentLabels,propertyName:"horizontalAlignment",nameToValue:u=>{if(a){if(u==="left")return"right";if(u==="right")return"left"}return u},defaultValue:this.options.defaultTableCellProperties.horizontalAlignment});const l=new bu(e);return l.set({isCompact:!0,role:"radiogroup",ariaLabel:n("Vertical text alignment toolbar")}),l_({view:this,icons:r,toolbar:l,labels:this._verticalAlignmentLabels,propertyName:"verticalAlignment",defaultValue:this.options.defaultTableCellProperties.verticalAlignment}),{horizontalAlignmentToolbar:o,verticalAlignmentToolbar:l,alignmentLabel:s}}_createActionButtons(){const e=this.locale,n=this.t,s=new qe(e),r=new qe(e),o=[this.borderWidthInput,this.borderColorInput,this.backgroundInput,this.paddingInput];return s.set({label:n("Save"),icon:ve.check,class:"ck-button-save",type:"submit",withText:!0}),s.bind("isEnabled").toMany(o,"errorText",(...a)=>a.every(l=>!l)),r.set({label:n("Cancel"),icon:ve.cancel,class:"ck-button-cancel",withText:!0}),r.delegate("execute").to(this,"cancel"),{saveButtonView:s,cancelButtonView:r}}get _horizontalAlignmentLabels(){const e=this.locale,n=this.t,s=n("Align cell text to the left"),r=n("Align cell text to the center"),o=n("Align cell text to the right"),a=n("Justify cell text");return e.uiLanguageDirection==="rtl"?{right:o,center:r,left:s,justify:a}:{left:s,center:r,right:o,justify:a}}get _verticalAlignmentLabels(){const e=this.t;return{top:e("Align cell text to the top"),middle:e("Align cell text to the middle"),bottom:e("Align cell text to the bottom")}}}function mg(i){return i!=="none"}const c_=[oi.defaultPositions.northArrowSouth,oi.defaultPositions.northArrowSouthWest,oi.defaultPositions.northArrowSouthEast,oi.defaultPositions.southArrowNorth,oi.defaultPositions.southArrowNorthWest,oi.defaultPositions.southArrowNorthEast,oi.defaultPositions.viewportStickyNorth];function JV(i,t){const e=i.plugins.get("ContextualBalloon"),n=i.editing.view.document.selection;let s;t==="cell"?Zb(n)&&(s=eD(i)):UV(n)&&(s=QV(i)),s&&e.updatePosition(s)}function QV(i){const t=i.model.document.selection,e=fl(t),n=i.editing.mapper.toViewElement(e);return{target:i.editing.view.domConverter.mapViewToDom(n),positions:c_}}function eD(i){const t=i.editing.mapper,e=i.editing.view.domConverter,n=i.model.document.selection;if(n.rangeCount>1)return{target:()=>Y0e(n.getRanges(),i),positions:c_};const s=tD(n.getFirstPosition()),r=t.toViewElement(s);return{target:e.mapViewToDom(r),positions:c_}}function tD(i){return i.nodeAfter&&i.nodeAfter.is("element","tableCell")?i.nodeAfter:i.findAncestor("tableCell")}function Y0e(i,t){const e=t.editing.mapper,n=t.editing.view.domConverter,s=Array.from(i).map(r=>{const o=tD(r.start),a=e.toViewElement(o);return new Ye(n.mapViewToDom(a))});return Ye.getBoundingRect(s)}var Z0e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.105 18-.17 1H2.5A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1h15A1.5 1.5 0 0 1 19 2.5v9.975l-.85-.124-.15-.302V8h-5v4h.021l-.172.351-1.916.28-.151.027c-.287.063-.54.182-.755.341L8 13v5h3.105zM2 12h5V8H2v4zm10-4H8v4h4V8zM2 2v5h5V2H2zm0 16h5v-5H2v5zM13 7h5V2h-5v5zM8 2v5h4V2H8z" opacity=".6"/><path d="m15.5 11.5 1.323 2.68 2.957.43-2.14 2.085.505 2.946L15.5 18.25l-2.645 1.39.505-2.945-2.14-2.086 2.957-.43L15.5 11.5zM13 6a1 1 0 0 1 1 1v3.172a2.047 2.047 0 0 0-.293.443l-.858 1.736-1.916.28-.151.027A1.976 1.976 0 0 0 9.315 14H7a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h6zm-1 2H8v4h4V8z"/></svg>';function Fl(i){if(!i||!Ot(i))return i;const{top:t,right:e,bottom:n,left:s}=i;if(t==e&&e==n&&n==s)return t}function $l(i,t){const e=parseFloat(i);return Number.isNaN(e)||String(e)!==String(i)?i:`${e}${t}`}function nD(i,t={}){const e={borderStyle:"none",borderWidth:"",borderColor:"",backgroundColor:"",width:"",height:"",...i};return t.includeAlignmentProperty&&!e.alignment&&(e.alignment="center"),t.includePaddingProperty&&!e.padding&&(e.padding=""),t.includeVerticalAlignmentProperty&&!e.verticalAlignment&&(e.verticalAlignment="middle"),t.includeHorizontalAlignmentProperty&&!e.horizontalAlignment&&(e.horizontalAlignment=t.isRightToLeftContent?"right":"left"),e}function iD(i,t){return nD({borderStyle:"double",borderColor:"hsl(0, 0%, 70%)",borderWidth:"1px",...i},t)}function _C(i,t){return nD({borderStyle:"solid",borderColor:"hsl(0, 0%, 75%)",borderWidth:"1px",...i},t)}const X0e=500,N5={borderStyle:"tableCellBorderStyle",borderColor:"tableCellBorderColor",borderWidth:"tableCellBorderWidth",height:"tableCellHeight",width:"tableCellWidth",padding:"tableCellPadding",backgroundColor:"tableCellBackgroundColor",horizontalAlignment:"tableCellHorizontalAlignment",verticalAlignment:"tableCellVerticalAlignment"};class J0e extends J{constructor(e){super(e);b(this,"_defaultTableCellProperties");b(this,"_balloon");b(this,"view");b(this,"_undoStepBatch");b(this,"_isReady");e.config.define("table.tableCellProperties",{borderColors:Dp,backgroundColors:Dp})}static get requires(){return[nr]}static get pluginName(){return"TableCellPropertiesUI"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,n=e.t;this._defaultTableCellProperties=_C(e.config.get("table.tableCellProperties.defaultProperties"),{includeVerticalAlignmentProperty:!0,includeHorizontalAlignmentProperty:!0,includePaddingProperty:!0,isRightToLeftContent:e.locale.contentLanguageDirection==="rtl"}),this._balloon=e.plugins.get(nr),this.view=null,this._isReady=!1,e.ui.componentFactory.add("tableCellProperties",s=>{const r=new qe(s);r.set({label:n("Cell properties"),icon:Z0e,tooltip:!0}),this.listenTo(r,"execute",()=>this._showView());const o=Object.values(N5).map(a=>e.commands.get(a));return r.bind("isEnabled").toMany(o,"isEnabled",(...a)=>a.some(l=>l)),r})}destroy(){super.destroy(),this.view&&this.view.destroy()}_createPropertiesView(){const e=this.editor,n=e.config.get("table.tableCellProperties"),s=jh(n.borderColors),r=zh(e.locale,s),o=jh(n.backgroundColors),a=zh(e.locale,o),l=n.colorPicker!==!1,u=new K0e(e.locale,{borderColors:r,backgroundColors:a,defaultTableCellProperties:this._defaultTableCellProperties,colorPickerConfig:l?n.colorPicker||{}:!1}),h=e.t;u.render(),this.listenTo(u,"submit",()=>{this._hideView()}),this.listenTo(u,"cancel",()=>{this._undoStepBatch.operations.length&&e.execute("undo",this._undoStepBatch),this._hideView()}),u.keystrokes.set("Esc",(p,y)=>{this._hideView(),y()}),Ta({emitter:u,activator:()=>this._isViewInBalloon,contextElements:[this._balloon.view.element],callback:()=>this._hideView()});const f=GV(h),g=KV(h);return u.on("change:borderStyle",this._getPropertyChangeCallback("tableCellBorderStyle")),u.on("change:borderColor",this._getValidatedPropertyChangeCallback({viewField:u.borderColorInput,commandName:"tableCellBorderColor",errorText:f,validator:Vp})),u.on("change:borderWidth",this._getValidatedPropertyChangeCallback({viewField:u.borderWidthInput,commandName:"tableCellBorderWidth",errorText:g,validator:YV})),u.on("change:padding",this._getValidatedPropertyChangeCallback({viewField:u.paddingInput,commandName:"tableCellPadding",errorText:g,validator:bh})),u.on("change:width",this._getValidatedPropertyChangeCallback({viewField:u.widthInput,commandName:"tableCellWidth",errorText:g,validator:bh})),u.on("change:height",this._getValidatedPropertyChangeCallback({viewField:u.heightInput,commandName:"tableCellHeight",errorText:g,validator:bh})),u.on("change:backgroundColor",this._getValidatedPropertyChangeCallback({viewField:u.backgroundInput,commandName:"tableCellBackgroundColor",errorText:f,validator:Vp})),u.on("change:horizontalAlignment",this._getPropertyChangeCallback("tableCellHorizontalAlignment")),u.on("change:verticalAlignment",this._getPropertyChangeCallback("tableCellVerticalAlignment")),u}_fillViewFormFromCommandValues(){const e=this.editor.commands,n=e.get("tableCellBorderStyle");Object.entries(N5).map(([s,r])=>{const o=this._defaultTableCellProperties[s]||"";return[s,e.get(r).value||o]}).forEach(([s,r])=>{(s==="borderColor"||s==="borderWidth")&&n.value==="none"||this.view.set(s,r)}),this._isReady=!0}_showView(){const e=this.editor;this.view||(this.view=this._createPropertiesView()),this.listenTo(e.ui,"update",()=>{this._updateView()}),this._fillViewFormFromCommandValues(),this._balloon.add({view:this.view,position:eD(e)}),this._undoStepBatch=e.model.createBatch(),this.view.focus()}_hideView(){const e=this.editor;this.stopListening(e.ui,"update"),this._isReady=!1,this.view.saveButtonView.focus(),this._balloon.remove(this.view),this.editor.editing.view.focus()}_updateView(){const e=this.editor,n=e.editing.view.document;Zb(n.selection)?this._isViewVisible&&JV(e,"cell"):this._hideView()}get _isViewVisible(){return!!this.view&&this._balloon.visibleView===this.view}get _isViewInBalloon(){return!!this.view&&this._balloon.hasView(this.view)}_getPropertyChangeCallback(e){return(n,s,r)=>{this._isReady&&this.editor.execute(e,{value:r,batch:this._undoStepBatch})}}_getValidatedPropertyChangeCallback(e){const{commandName:n,viewField:s,validator:r,errorText:o}=e,a=ks(()=>{s.errorText=o},X0e);return(l,u,h)=>{a.cancel(),this._isReady&&(r(h)?(this.editor.execute(n,{value:h,batch:this._undoStepBatch}),s.errorText=null):a())}}}class Eo extends Ze{constructor(e,n,s){super(e);b(this,"attributeName");b(this,"_defaultValue");this.attributeName=n,this._defaultValue=s}refresh(){const e=this.editor,s=this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(e.model.document.selection);this.isEnabled=!!s.length,this.value=this._getSingleValue(s)}execute(e={}){const{value:n,batch:s}=e,r=this.editor.model,a=this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(r.document.selection),l=this._getValueToSet(n);r.enqueueChange(s,u=>{l?a.forEach(h=>u.setAttribute(this.attributeName,l,h)):a.forEach(h=>u.removeAttribute(this.attributeName,h))})}_getAttribute(e){if(!e)return;const n=e.getAttribute(this.attributeName);if(n!==this._defaultValue)return n}_getValueToSet(e){if(e!==this._defaultValue)return e}_getSingleValue(e){const n=this._getAttribute(e[0]);return e.every(r=>this._getAttribute(r)===n)?n:void 0}}class Q0e extends Eo{constructor(t,e){super(t,"tableCellWidth",e)}_getValueToSet(t){if(t=$l(t,"px"),t!==this._defaultValue)return t}}class sD extends J{static get pluginName(){return"TableCellWidthEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[Cf]}init(){const t=this.editor,e=_C(t.config.get("table.tableCellProperties.defaultProperties"));zg(t.model.schema,t.conversion,{modelAttribute:"tableCellWidth",styleName:"width",defaultValue:e.width}),t.commands.add("tableCellWidth",new Q0e(t,e.width))}}class e1e extends Eo{constructor(t,e){super(t,"tableCellPadding",e)}_getAttribute(t){if(!t)return;const e=Fl(t.getAttribute(this.attributeName));if(e!==this._defaultValue)return e}_getValueToSet(t){const e=$l(t,"px");if(e!==this._defaultValue)return e}}class t1e extends Eo{constructor(t,e){super(t,"tableCellHeight",e)}_getValueToSet(t){const e=$l(t,"px");if(e!==this._defaultValue)return e}}class n1e extends Eo{constructor(t,e){super(t,"tableCellBackgroundColor",e)}}class i1e extends Eo{constructor(t,e){super(t,"tableCellVerticalAlignment",e)}}class s1e extends Eo{constructor(t,e){super(t,"tableCellHorizontalAlignment",e)}}class r1e extends Eo{constructor(t,e){super(t,"tableCellBorderStyle",e)}_getAttribute(t){if(!t)return;const e=Fl(t.getAttribute(this.attributeName));if(e!==this._defaultValue)return e}}class o1e extends Eo{constructor(t,e){super(t,"tableCellBorderColor",e)}_getAttribute(t){if(!t)return;const e=Fl(t.getAttribute(this.attributeName));if(e!==this._defaultValue)return e}}class a1e extends Eo{constructor(t,e){super(t,"tableCellBorderWidth",e)}_getAttribute(t){if(!t)return;const e=Fl(t.getAttribute(this.attributeName));if(e!==this._defaultValue)return e}_getValueToSet(t){const e=$l(t,"px");if(e!==this._defaultValue)return e}}const M5=/^(top|middle|bottom)$/,L5=/^(left|center|right|justify)$/;class l1e extends J{static get pluginName(){return"TableCellPropertiesEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[Cf,sD]}init(){const t=this.editor,e=t.model.schema,n=t.conversion;t.config.define("table.tableCellProperties.defaultProperties",{});const s=_C(t.config.get("table.tableCellProperties.defaultProperties"),{includeVerticalAlignmentProperty:!0,includeHorizontalAlignmentProperty:!0,includePaddingProperty:!0,isRightToLeftContent:t.locale.contentLanguageDirection==="rtl"});t.data.addStyleProcessorRules(kM),c1e(e,n,{color:s.borderColor,style:s.borderStyle,width:s.borderWidth}),t.commands.add("tableCellBorderStyle",new r1e(t,s.borderStyle)),t.commands.add("tableCellBorderColor",new o1e(t,s.borderColor)),t.commands.add("tableCellBorderWidth",new a1e(t,s.borderWidth)),zg(e,n,{modelAttribute:"tableCellHeight",styleName:"height",defaultValue:s.height}),t.commands.add("tableCellHeight",new t1e(t,s.height)),t.data.addStyleProcessorRules(ale),zg(e,n,{modelAttribute:"tableCellPadding",styleName:"padding",reduceBoxSides:!0,defaultValue:s.padding}),t.commands.add("tableCellPadding",new e1e(t,s.padding)),t.data.addStyleProcessorRules(HE),zg(e,n,{modelAttribute:"tableCellBackgroundColor",styleName:"background-color",defaultValue:s.backgroundColor}),t.commands.add("tableCellBackgroundColor",new n1e(t,s.backgroundColor)),u1e(e,n,s.horizontalAlignment),t.commands.add("tableCellHorizontalAlignment",new s1e(t,s.horizontalAlignment)),d1e(e,n,s.verticalAlignment),t.commands.add("tableCellVerticalAlignment",new i1e(t,s.verticalAlignment))}}function c1e(i,t,e){const n={width:"tableCellBorderWidth",color:"tableCellBorderColor",style:"tableCellBorderStyle"};i.extend("tableCell",{allowAttributes:Object.values(n)}),Qy(t,"td",n,e),Qy(t,"th",n,e),ph(t,{modelElement:"tableCell",modelAttribute:n.style,styleName:"border-style"}),ph(t,{modelElement:"tableCell",modelAttribute:n.color,styleName:"border-color"}),ph(t,{modelElement:"tableCell",modelAttribute:n.width,styleName:"border-width"})}function u1e(i,t,e){i.extend("tableCell",{allowAttributes:["tableCellHorizontalAlignment"]}),t.for("downcast").attributeToAttribute({model:{name:"tableCell",key:"tableCellHorizontalAlignment"},view:n=>({key:"style",value:{"text-align":n}})}),t.for("upcast").attributeToAttribute({view:{name:/^(td|th)$/,styles:{"text-align":L5}},model:{key:"tableCellHorizontalAlignment",value:n=>{const s=n.getStyle("text-align");return s===e?null:s}}}).attributeToAttribute({view:{name:/^(td|th)$/,attributes:{align:L5}},model:{key:"tableCellHorizontalAlignment",value:n=>{const s=n.getAttribute("align");return s===e?null:s}}})}function d1e(i,t,e){i.extend("tableCell",{allowAttributes:["tableCellVerticalAlignment"]}),t.for("downcast").attributeToAttribute({model:{name:"tableCell",key:"tableCellVerticalAlignment"},view:n=>({key:"style",value:{"vertical-align":n}})}),t.for("upcast").attributeToAttribute({view:{name:/^(td|th)$/,styles:{"vertical-align":M5}},model:{key:"tableCellVerticalAlignment",value:n=>{const s=n.getStyle("vertical-align");return s===e?null:s}}}).attributeToAttribute({view:{name:/^(td|th)$/,attributes:{valign:M5}},model:{key:"tableCellVerticalAlignment",value:n=>{const s=n.getAttribute("valign");return s===e?null:s}}})}class h1e extends J{static get pluginName(){return"TableCellProperties"}static get isOfficialPlugin(){return!0}static get requires(){return[l1e,J0e]}}class zl extends Ze{constructor(e,n,s){super(e);b(this,"attributeName");b(this,"_defaultValue");this.attributeName=n,this._defaultValue=s}refresh(){const n=this.editor.model.document.selection,s=fl(n);this.isEnabled=!!s,this.value=this._getValue(s)}execute(e={}){const n=this.editor.model,s=n.document.selection,{value:r,batch:o}=e,a=fl(s),l=this._getValueToSet(r);n.enqueueChange(o,u=>{l?u.setAttribute(this.attributeName,l,a):u.removeAttribute(this.attributeName,a)})}_getValue(e){if(!e)return;const n=e.getAttribute(this.attributeName);if(n!==this._defaultValue)return n}_getValueToSet(e){if(e!==this._defaultValue)return e}}class f1e extends zl{constructor(t,e){super(t,"tableBackgroundColor",e)}}class m1e extends zl{constructor(t,e){super(t,"tableBorderColor",e)}_getValue(t){if(!t)return;const e=Fl(t.getAttribute(this.attributeName));if(e!==this._defaultValue)return e}}class g1e extends zl{constructor(t,e){super(t,"tableBorderStyle",e)}_getValue(t){if(!t)return;const e=Fl(t.getAttribute(this.attributeName));if(e!==this._defaultValue)return e}}class p1e extends zl{constructor(t,e){super(t,"tableBorderWidth",e)}_getValue(t){if(!t)return;const e=Fl(t.getAttribute(this.attributeName));if(e!==this._defaultValue)return e}_getValueToSet(t){const e=$l(t,"px");if(e!==this._defaultValue)return e}}class b1e extends zl{constructor(t,e){super(t,"tableWidth",e)}_getValueToSet(t){if(t=$l(t,"px"),t!==this._defaultValue)return t}}class w1e extends zl{constructor(t,e){super(t,"tableHeight",e)}_getValueToSet(t){if(t=$l(t,"px"),t!==this._defaultValue)return t}}class v1e extends zl{constructor(t,e){super(t,"tableAlignment",e)}}const y1e=/^(left|center|right)$/,_1e=/^(left|none|right)$/;class E1e extends J{static get pluginName(){return"TablePropertiesEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[Cf]}init(){const t=this.editor,e=t.model.schema,n=t.conversion;t.config.define("table.tableProperties.defaultProperties",{});const s=iD(t.config.get("table.tableProperties.defaultProperties"),{includeAlignmentProperty:!0});t.data.addStyleProcessorRules(kM),C1e(e,n,{color:s.borderColor,style:s.borderStyle,width:s.borderWidth}),t.commands.add("tableBorderColor",new m1e(t,s.borderColor)),t.commands.add("tableBorderStyle",new g1e(t,s.borderStyle)),t.commands.add("tableBorderWidth",new p1e(t,s.borderWidth)),x1e(e,n,s.alignment),t.commands.add("tableAlignment",new v1e(t,s.alignment)),V5(e,n,{modelAttribute:"tableWidth",styleName:"width",defaultValue:s.width}),t.commands.add("tableWidth",new b1e(t,s.width)),V5(e,n,{modelAttribute:"tableHeight",styleName:"height",defaultValue:s.height}),t.commands.add("tableHeight",new w1e(t,s.height)),t.data.addStyleProcessorRules(HE),k1e(e,n,{modelAttribute:"tableBackgroundColor",styleName:"background-color",defaultValue:s.backgroundColor}),t.commands.add("tableBackgroundColor",new f1e(t,s.backgroundColor))}}function C1e(i,t,e){const n={width:"tableBorderWidth",color:"tableBorderColor",style:"tableBorderStyle"};i.extend("table",{allowAttributes:Object.values(n)}),Qy(t,"table",n,e),Fg(t,{modelAttribute:n.color,styleName:"border-color"}),Fg(t,{modelAttribute:n.style,styleName:"border-style"}),Fg(t,{modelAttribute:n.width,styleName:"border-width"})}function x1e(i,t,e){i.extend("table",{allowAttributes:["tableAlignment"]}),t.for("downcast").attributeToAttribute({model:{name:"table",key:"tableAlignment"},view:n=>({key:"style",value:{float:n==="center"?"none":n}}),converterPriority:"high"}),t.for("upcast").attributeToAttribute({view:{name:/^(table|figure)$/,styles:{float:_1e}},model:{key:"tableAlignment",value:n=>{let s=n.getStyle("float");return s==="none"&&(s="center"),s===e?null:s}}}).attributeToAttribute({view:{attributes:{align:y1e}},model:{name:"table",key:"tableAlignment",value:n=>{const s=n.getAttribute("align");return s===e?null:s}}})}function k1e(i,t,e){const{modelAttribute:n}=e;i.extend("table",{allowAttributes:[n]}),pC(t,{viewElement:"table",...e}),Fg(t,e)}function V5(i,t,e){const{modelAttribute:n}=e;i.extend("table",{allowAttributes:[n]}),pC(t,{viewElement:/^(table|figure)$/,shouldUpcast:s=>!(s.name=="table"&&s.parent.name=="figure"),...e}),ph(t,{modelElement:"table",...e})}class T1e extends xe{constructor(e,n){super(e);b(this,"options");b(this,"focusTracker");b(this,"keystrokes");b(this,"children");b(this,"borderStyleDropdown");b(this,"borderWidthInput");b(this,"borderColorInput");b(this,"backgroundInput");b(this,"widthInput");b(this,"heightInput");b(this,"alignmentToolbar");b(this,"saveButtonView");b(this,"cancelButtonView");b(this,"_focusables");b(this,"_focusCycler");this.set({borderStyle:"",borderWidth:"",borderColor:"",backgroundColor:"",width:"",height:"",alignment:""}),this.options=n;const{borderStyleDropdown:s,borderWidthInput:r,borderColorInput:o,borderRowLabel:a}=this._createBorderFields(),{backgroundRowLabel:l,backgroundInput:u}=this._createBackgroundFields(),{widthInput:h,operatorLabel:f,heightInput:g,dimensionsLabel:p}=this._createDimensionFields(),{alignmentToolbar:y,alignmentLabel:E}=this._createAlignmentFields();this.focusTracker=new Gt,this.keystrokes=new tn,this.children=this.createCollection(),this.borderStyleDropdown=s,this.borderWidthInput=r,this.borderColorInput=o,this.backgroundInput=u,this.widthInput=h,this.heightInput=g,this.alignmentToolbar=y;const{saveButtonView:C,cancelButtonView:k}=this._createActionButtons();this.saveButtonView=C,this.cancelButtonView=k,this._focusables=new Un,this._focusCycler=new fi({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.children.add(new KE(e,{label:this.t("Table properties")})),this.children.add(new ji(e,{labelView:a,children:[a,s,o,r],class:"ck-table-form__border-row"})),this.children.add(new ji(e,{labelView:l,children:[l,u],class:"ck-table-form__background-row"})),this.children.add(new ji(e,{children:[new ji(e,{labelView:p,children:[p,h,f,g],class:"ck-table-form__dimensions-row"}),new ji(e,{labelView:E,children:[E,y],class:"ck-table-properties-form__alignment-row"})]})),this.children.add(new ji(e,{children:[this.saveButtonView,this.cancelButtonView],class:"ck-table-form__action-row"})),this.setTemplate({tag:"form",attributes:{class:["ck","ck-form","ck-table-form","ck-table-properties-form"],tabindex:"-1"},children:this.children})}render(){super.render(),Sa({view:this}),[this.borderColorInput,this.backgroundInput].forEach(e=>{this._focusCycler.chain(e.fieldView.focusCycler)}),[this.borderStyleDropdown,this.borderColorInput,this.borderWidthInput,this.backgroundInput,this.widthInput,this.heightInput,this.alignmentToolbar,this.saveButtonView,this.cancelButtonView].forEach(e=>{this._focusables.add(e),this.focusTracker.add(e.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}_createBorderFields(){const e=this.options.defaultTableProperties,n={style:e.borderStyle,width:e.borderWidth,color:e.borderColor},s=Bp({colorConfig:this.options.borderColors,columns:5,defaultColorValue:n.color,colorPickerConfig:this.options.colorPickerConfig}),r=this.locale,o=this.t,a=o("Style"),l=new ws(r);l.text=o("Border");const u=yC(o),h=new bn(r,iL);h.set({label:a,class:"ck-table-form__border-style"}),h.fieldView.buttonView.set({ariaLabel:a,ariaLabelledBy:void 0,isOn:!1,withText:!0,tooltip:a}),h.fieldView.buttonView.bind("label").to(this,"borderStyle",p=>u[p||"none"]),h.fieldView.on("execute",p=>{this.borderStyle=p.source._borderStyleValue}),h.bind("isEmpty").to(this,"borderStyle",p=>!p),Ll(h.fieldView,ZV(this,n.style),{role:"menu",ariaLabel:a});const f=new bn(r,vs);f.set({label:o("Width"),class:"ck-table-form__border-width"}),f.fieldView.bind("value").to(this,"borderWidth"),f.bind("isEnabled").to(this,"borderStyle",gg),f.fieldView.on("input",()=>{this.borderWidth=f.fieldView.element.value});const g=new bn(r,s);return g.set({label:o("Color"),class:"ck-table-form__border-color"}),g.fieldView.bind("value").to(this,"borderColor"),g.bind("isEnabled").to(this,"borderStyle",gg),g.fieldView.on("input",()=>{this.borderColor=g.fieldView.value}),this.on("change:borderStyle",(p,y,E,C)=>{gg(E)||(this.borderColor="",this.borderWidth=""),gg(C)||(this.borderColor=n.color,this.borderWidth=n.width)}),{borderRowLabel:l,borderStyleDropdown:h,borderColorInput:g,borderWidthInput:f}}_createBackgroundFields(){const e=this.locale,n=this.t,s=new ws(e);s.text=n("Background");const r=Bp({colorConfig:this.options.backgroundColors,columns:5,defaultColorValue:this.options.defaultTableProperties.backgroundColor,colorPickerConfig:this.options.colorPickerConfig}),o=new bn(e,r);return o.set({label:n("Color"),class:"ck-table-properties-form__background"}),o.fieldView.bind("value").to(this,"backgroundColor"),o.fieldView.on("input",()=>{this.backgroundColor=o.fieldView.value}),{backgroundRowLabel:s,backgroundInput:o}}_createDimensionFields(){const e=this.locale,n=this.t,s=new ws(e);s.text=n("Dimensions");const r=new bn(e,vs);r.set({label:n("Width"),class:"ck-table-form__dimensions-row__width"}),r.fieldView.bind("value").to(this,"width"),r.fieldView.on("input",()=>{this.width=r.fieldView.element.value});const o=new xe(e);o.setTemplate({tag:"span",attributes:{class:["ck-table-form__dimension-operator"]},children:[{text:"×"}]});const a=new bn(e,vs);return a.set({label:n("Height"),class:"ck-table-form__dimensions-row__height"}),a.fieldView.bind("value").to(this,"height"),a.fieldView.on("input",()=>{this.height=a.fieldView.element.value}),{dimensionsLabel:s,widthInput:r,operatorLabel:o,heightInput:a}}_createAlignmentFields(){const e=this.locale,n=this.t,s=new ws(e);s.text=n("Alignment");const r=new bu(e);return r.set({role:"radiogroup",isCompact:!0,ariaLabel:n("Table alignment toolbar")}),l_({view:this,icons:{left:ve.objectLeft,center:ve.objectCenter,right:ve.objectRight},toolbar:r,labels:this._alignmentLabels,propertyName:"alignment",defaultValue:this.options.defaultTableProperties.alignment}),{alignmentLabel:s,alignmentToolbar:r}}_createActionButtons(){const e=this.locale,n=this.t,s=new qe(e),r=new qe(e),o=[this.borderWidthInput,this.borderColorInput,this.backgroundInput,this.widthInput,this.heightInput];return s.set({label:n("Save"),icon:ve.check,class:"ck-button-save",type:"submit",withText:!0}),s.bind("isEnabled").toMany(o,"errorText",(...a)=>a.every(l=>!l)),r.set({label:n("Cancel"),icon:ve.cancel,class:"ck-button-cancel",withText:!0}),r.delegate("execute").to(this,"cancel"),{saveButtonView:s,cancelButtonView:r}}get _alignmentLabels(){const e=this.locale,n=this.t,s=n("Align table to the left"),r=n("Center table"),o=n("Align table to the right");return e.uiLanguageDirection==="rtl"?{right:o,center:r,left:s}:{left:s,center:r,right:o}}}function gg(i){return i!=="none"}var S1e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M8 2v5h4V2h1v5h5v1h-5v4h.021l-.172.351-1.916.28-.151.027c-.287.063-.54.182-.755.341L8 13v5H7v-5H2v-1h5V8H2V7h5V2h1zm4 6H8v4h4V8z" opacity=".6"/><path d="m15.5 11.5 1.323 2.68 2.957.43-2.14 2.085.505 2.946L15.5 18.25l-2.645 1.39.505-2.945-2.14-2.086 2.957-.43L15.5 11.5zM17 1a2 2 0 0 1 2 2v9.475l-.85-.124-.857-1.736a2.048 2.048 0 0 0-.292-.44L17 3H3v14h7.808l.402.392L10.935 19H3a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h14z"/></svg>';const A1e=500,D5={borderStyle:"tableBorderStyle",borderColor:"tableBorderColor",borderWidth:"tableBorderWidth",backgroundColor:"tableBackgroundColor",width:"tableWidth",height:"tableHeight",alignment:"tableAlignment"};class P1e extends J{constructor(e){super(e);b(this,"_defaultTableProperties");b(this,"_balloon");b(this,"view",null);b(this,"_undoStepBatch");b(this,"_isReady");e.config.define("table.tableProperties",{borderColors:Dp,backgroundColors:Dp})}static get requires(){return[nr]}static get pluginName(){return"TablePropertiesUI"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,n=e.t;this._defaultTableProperties=iD(e.config.get("table.tableProperties.defaultProperties"),{includeAlignmentProperty:!0}),this._balloon=e.plugins.get(nr),e.ui.componentFactory.add("tableProperties",s=>{const r=new qe(s);r.set({label:n("Table properties"),icon:S1e,tooltip:!0}),this.listenTo(r,"execute",()=>this._showView());const o=Object.values(D5).map(a=>e.commands.get(a));return r.bind("isEnabled").toMany(o,"isEnabled",(...a)=>a.some(l=>l)),r})}destroy(){super.destroy(),this.view&&this.view.destroy()}_createPropertiesView(){const e=this.editor,n=e.config.get("table.tableProperties"),s=jh(n.borderColors),r=zh(e.locale,s),o=jh(n.backgroundColors),a=zh(e.locale,o),l=n.colorPicker!==!1,u=new T1e(e.locale,{borderColors:r,backgroundColors:a,defaultTableProperties:this._defaultTableProperties,colorPickerConfig:l?n.colorPicker||{}:!1}),h=e.t;u.render(),this.listenTo(u,"submit",()=>{this._hideView()}),this.listenTo(u,"cancel",()=>{this._undoStepBatch.operations.length&&e.execute("undo",this._undoStepBatch),this._hideView()}),u.keystrokes.set("Esc",(p,y)=>{this._hideView(),y()}),Ta({emitter:u,activator:()=>this._isViewInBalloon,contextElements:[this._balloon.view.element],callback:()=>this._hideView()});const f=GV(h),g=KV(h);return u.on("change:borderStyle",this._getPropertyChangeCallback("tableBorderStyle")),u.on("change:borderColor",this._getValidatedPropertyChangeCallback({viewField:u.borderColorInput,commandName:"tableBorderColor",errorText:f,validator:Vp})),u.on("change:borderWidth",this._getValidatedPropertyChangeCallback({viewField:u.borderWidthInput,commandName:"tableBorderWidth",errorText:g,validator:YV})),u.on("change:backgroundColor",this._getValidatedPropertyChangeCallback({viewField:u.backgroundInput,commandName:"tableBackgroundColor",errorText:f,validator:Vp})),u.on("change:width",this._getValidatedPropertyChangeCallback({viewField:u.widthInput,commandName:"tableWidth",errorText:g,validator:bh})),u.on("change:height",this._getValidatedPropertyChangeCallback({viewField:u.heightInput,commandName:"tableHeight",errorText:g,validator:bh})),u.on("change:alignment",this._getPropertyChangeCallback("tableAlignment")),u}_fillViewFormFromCommandValues(){const e=this.editor.commands,n=e.get("tableBorderStyle");Object.entries(D5).map(([s,r])=>{const o=s,a=this._defaultTableProperties[o]||"";return[o,e.get(r).value||a]}).forEach(([s,r])=>{(s==="borderColor"||s==="borderWidth")&&n.value==="none"||this.view.set(s,r)}),this._isReady=!0}_showView(){const e=this.editor;this.view||(this.view=this._createPropertiesView()),this.listenTo(e.ui,"update",()=>{this._updateView()}),this._fillViewFormFromCommandValues(),this._balloon.add({view:this.view,position:QV(e)}),this._undoStepBatch=e.model.createBatch(),this.view.focus()}_hideView(){const e=this.editor;this.stopListening(e.ui,"update"),this._isReady=!1,this.view.saveButtonView.focus(),this._balloon.remove(this.view),this.editor.editing.view.focus()}_updateView(){const e=this.editor,n=e.editing.view.document;UV(n.selection)?this._isViewVisible&&JV(e,"table"):this._hideView()}get _isViewVisible(){return!!this.view&&this._balloon.visibleView===this.view}get _isViewInBalloon(){return!!this.view&&this._balloon.hasView(this.view)}_getPropertyChangeCallback(e){return(n,s,r)=>{this._isReady&&this.editor.execute(e,{value:r,batch:this._undoStepBatch})}}_getValidatedPropertyChangeCallback(e){const{commandName:n,viewField:s,validator:r,errorText:o}=e,a=ks(()=>{s.errorText=o},A1e);return(l,u,h)=>{a.cancel(),this._isReady&&(r(h)?(this.editor.execute(n,{value:h,batch:this._undoStepBatch}),s.errorText=null):a())}}}class I1e extends J{static get pluginName(){return"TableProperties"}static get isOfficialPlugin(){return!0}static get requires(){return[E1e,P1e]}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function R1e(i){i.document.registerPostFixer(t=>O1e(t,i))}function O1e(i,t){const e=t.document.differ.getChanges();let n=!1;for(const s of e){if(s.type!="insert")continue;const r=s.position.parent;if(r.is("element","table")||s.name=="table"){const o=s.name=="table"?s.position.nodeAfter:r,a=Array.from(o.getChildren()).filter(u=>u.is("element","caption")),l=a.shift();if(!l)continue;for(const u of a)i.move(i.createRangeIn(u),l,"end"),i.remove(u);l.nextSibling&&(i.move(i.createRangeOn(l),o,"end"),n=!0),n=!!a.length||n}}return n}function B5(i){return!!i&&i.is("element","table")}function u_(i){for(const t of i.getChildren())if(t.is("element","caption"))return t;return null}function N1e(i){const t=fl(i);return t?u_(t):null}function M1e(i){const t=i.parent;return i.name=="figcaption"&&t&&t.is("element","figure")&&t.hasClass("table")?{name:!0}:i.name=="caption"&&t&&t.is("element","table")?{name:!0}:null}class L1e extends Ze{refresh(){const t=this.editor,e=fl(t.model.document.selection);this.isEnabled=!!e,this.isEnabled?this.value=!!u_(e):this.value=!1}execute({focusCaptionOnShow:t=!1}={}){this.editor.model.change(e=>{this.value?this._hideTableCaption(e):this._showTableCaption(e,t)})}_showTableCaption(t,e){const n=this.editor.model,s=fl(n.document.selection),a=this.editor.plugins.get("TableCaptionEditing")._getSavedCaption(s)||t.createElement("caption");n.insertContent(a,s,"end"),e&&t.setSelection(a,"in")}_hideTableCaption(t){const e=this.editor.model,n=fl(e.document.selection),s=this.editor.plugins.get("TableCaptionEditing"),r=u_(n);s._saveCaption(n,r),e.deleteContent(t.createSelection(r,"on"))}}class V1e extends J{constructor(e){super(e);b(this,"_savedCaptionsMap");this._savedCaptionsMap=new WeakMap}static get pluginName(){return"TableCaptionEditing"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,n=e.model.schema,s=e.editing.view,r=e.t;n.isRegistered("caption")?n.extend("caption",{allowIn:"table"}):n.register("caption",{allowIn:"table",allowContentOf:"$block",isLimit:!0}),e.commands.add("toggleTableCaption",new L1e(this.editor)),e.conversion.for("upcast").elementToElement({view:M1e,model:"caption"}),e.conversion.for("dataDowncast").elementToElement({model:"caption",view:(o,{writer:a})=>B5(o.parent)?a.createContainerElement("figcaption"):null}),e.conversion.for("editingDowncast").elementToElement({model:"caption",view:(o,{writer:a})=>{if(!B5(o.parent))return null;const l=a.createEditableElement("figcaption");return a.setCustomProperty("tableCaption",!0,l),l.placeholder=r("Enter table caption"),OE({view:s,element:l,keepOnFocus:!0}),iC(l,a)}}),R1e(e.model)}_getSavedCaption(e){const n=this._savedCaptionsMap.get(e);return n?Yt.fromJSON(n):null}_saveCaption(e,n){this._savedCaptionsMap.set(e,n.toJSON())}}class D1e extends J{static get pluginName(){return"TableCaptionUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.editing.view,n=t.t;t.ui.componentFactory.add("toggleTableCaption",s=>{const r=t.commands.get("toggleTableCaption"),o=new qe(s);return o.set({icon:ve.caption,tooltip:!0,isToggleable:!0}),o.bind("isOn","isEnabled").to(r,"value","isEnabled"),o.bind("label").to(r,"value",a=>n(a?"Toggle caption off":"Toggle caption on")),this.listenTo(o,"execute",()=>{if(t.execute("toggleTableCaption",{focusCaptionOnShow:!0}),r.value){const a=N1e(t.model.document.selection),l=t.editing.mapper.toViewElement(a);if(!l)return;e.scrollToTheSelection(),e.change(u=>{u.addClass("table__caption_highlighted",l)})}t.editing.view.focus()}),o})}}class B1e extends J{static get pluginName(){return"TableCaption"}static get isOfficialPlugin(){return!0}static get requires(){return[V1e,D1e]}}class F1e extends Ze{refresh(){this.isEnabled=!0}execute(t={}){const{model:e,plugins:n}=this.editor;let{table:s=e.document.selection.getSelectedElement(),columnWidths:r,tableWidth:o}=t;r&&(r=Array.isArray(r)?r:r.split(",")),e.change(a=>{o?a.setAttribute("tableWidth",o,s):a.removeAttribute("tableWidth",s);const l=n.get("TableColumnResizeEditing").getColumnGroupElement(s);if(!r&&!l)return;if(!r)return a.remove(l);const u=wC(r);if(l)Array.from(l.getChildren()).forEach((h,f)=>a.setAttribute("columnWidth",u[f],h));else{const h=a.createElement("tableColumnGroup");u.forEach(f=>a.appendElement("tableColumn",{columnWidth:f},h)),a.append(h,s)}})}}function $1e(i){return t=>t.on("element:colgroup",(e,n,s)=>{const r=n.modelCursor.findAncestor("table"),o=_f(r);if(!o)return;const a=Ef(o),l=i.getColumns(r);let u=o0e(o,s.writer);u=Array.from({length:l},(h,f)=>u[f]||"auto"),(u.length!=a.length||u.includes("auto"))&&$V(a,o,wC(u),s.writer)},{priority:"low"})}function z1e(){return i=>i.on("insert:table",(t,e,n)=>{const s=n.writer,r=e.item,o=n.mapper.toViewElement(r),a=o.is("element","table")?o:Array.from(o.getChildren()).find(u=>u.is("element","table"));_f(r)?s.addClass("ck-table-resized",a):s.removeClass("ck-table-resized",a)},{priority:"low"})}class j1e extends J{constructor(e){super(e);b(this,"_isResizingActive");b(this,"_resizingData");b(this,"_domEmitter");b(this,"_tableUtilsPlugin");this._isResizingActive=!1,this.set("_isResizingAllowed",!0),this._resizingData=null,this._domEmitter=new(hi()),this._tableUtilsPlugin=e.plugins.get("TableUtils"),this.on("change:_isResizingAllowed",(n,s,r)=>{const o=r?"removeClass":"addClass";e.editing.view.change(a=>{for(const l of e.editing.view.document.roots)a[o]("ck-column-resize_disabled",e.editing.view.document.getRoot(l.rootName))})})}static get requires(){return[Cf,On]}static get pluginName(){return"TableColumnResizeEditing"}static get isOfficialPlugin(){return!0}init(){this._extendSchema(),this._registerPostFixer(),this._registerConverters(),this._registerResizingListeners(),this._registerResizerInserter();const e=this.editor,n=e.plugins.get("TableColumnResize");e.plugins.get("TableEditing").registerAdditionalSlot({filter:o=>o.is("element","tableColumnGroup"),positionOffset:0});const r=new F1e(e);e.commands.add("resizeTableWidth",r),e.commands.add("resizeColumnWidths",r),this.bind("_isResizingAllowed").to(e,"isReadOnly",n,"isEnabled",r,"isEnabled",(o,a,l)=>!o&&a&&l)}destroy(){this._domEmitter.stopListening(),super.destroy()}getColumnGroupElement(e){return _f(e)}getTableColumnElements(e){return Ef(e)}getTableColumnsWidths(e){return r0e(e)}_extendSchema(){this.editor.model.schema.extend("table",{allowAttributes:["tableWidth"]}),this.editor.model.schema.register("tableColumnGroup",{allowIn:"table",isLimit:!0}),this.editor.model.schema.register("tableColumn",{allowIn:"tableColumnGroup",allowAttributes:["columnWidth","colSpan"],isLimit:!0})}_registerPostFixer(){const n=this.editor.model;n.document.registerPostFixer(o=>{let a=!1;for(const l of Jve(n)){const u=this.getColumnGroupElement(l),h=this.getTableColumnElements(u),f=this.getTableColumnsWidths(u);let g=wC(f);g=s(g,l,this),!wp(f,g)&&($V(h,u,g,o),a=!0)}return a});function s(o,a,l){const u=l._tableUtilsPlugin.getColumns(a);if(u-o.length===0)return o;const f=o.map(p=>Number(p.replace("%",""))),g=r(l.editor.model.document.differ,a);for(const p of g){const y=u-f.length;if(y===0)continue;const E=y>0,C=l._tableUtilsPlugin.getCellLocation(p).column;if(E){const k=Qve(a,l.editor),T=n0e(y,k);f.splice(C,0,...T)}else{const k=f.splice(C,Math.abs(y));f[C]+=Gh(k)}}return f.map(p=>p+"%")}function r(o,a){const l=new Set;for(const u of o.getChanges())if(u.type=="insert"&&u.position.nodeAfter&&u.position.nodeAfter.name=="tableCell"&&u.position.nodeAfter.getAncestors().includes(a))l.add(u.position.nodeAfter);else if(u.type=="remove"){const h=u.position.nodeBefore||u.position.nodeAfter;h.name=="tableCell"&&h.getAncestors().includes(a)&&l.add(h)}return l}}_registerConverters(){const n=this.editor.conversion;n.for("upcast").attributeToAttribute({view:{name:"figure",key:"style",value:{width:/[\s\S]+/}},model:{name:"table",key:"tableWidth",value:s=>s.getStyle("width")}}),n.for("downcast").attributeToAttribute({model:{name:"table",key:"tableWidth"},view:s=>({name:"figure",key:"style",value:{width:s}})}),n.elementToElement({model:"tableColumnGroup",view:"colgroup"}),n.elementToElement({model:"tableColumn",view:"col"}),n.for("downcast").add(z1e()),n.for("upcast").add($1e(this._tableUtilsPlugin)),n.for("upcast").attributeToAttribute({view:{name:"col",styles:{width:/.*/}},model:{key:"columnWidth",value:s=>{const r=s.getStyle("width");return!r||!r.endsWith("%")&&!r.endsWith("pt")?"auto":r}}}),n.for("upcast").attributeToAttribute({view:{name:"col",key:"span"},model:"colSpan"}),n.for("downcast").attributeToAttribute({model:{name:"tableColumn",key:"columnWidth"},view:s=>({key:"style",value:{width:s}})})}_registerResizingListeners(){const e=this.editor.editing.view;e.addObserver(HV),e.document.on("mousedown",this._onMouseDownHandler.bind(this),{priority:"high"}),this._domEmitter.listenTo(Ce.window.document,"mousemove",fu(this._onMouseMoveHandler.bind(this),50)),this._domEmitter.listenTo(Ce.window.document,"mouseup",this._onMouseUpHandler.bind(this))}_onMouseDownHandler(e,n){const s=n.target;if(!s.hasClass("ck-table-column-resizer")||!this._isResizingAllowed)return;const r=this.editor,o=r.editing.mapper.toModelElement(s.findAncestor("figure"));if(!r.model.canEditAt(o))return;n.preventDefault(),e.stop();const a=h(o,this._tableUtilsPlugin,r),l=s.findAncestor("table"),u=r.editing.view;Array.from(l.getChildren()).find(p=>p.is("element","colgroup"))||u.change(p=>{f(p,a,l)}),this._isResizingActive=!0,this._resizingData=this._getResizingData(n,a),u.change(p=>g(p,l,this._resizingData));function h(p,y,E){const C=Array(y.getColumns(p)),k=new Et(p);for(const T of k){const P=E.editing.mapper.toViewElement(T.cell),S=E.editing.view.domConverter.mapViewToDom(P),O=s0e(S);(!C[T.column]||O<C[T.column])&&(C[T.column]=xi(O))}return C}function f(p,y,E){const C=p.createContainerElement("colgroup");for(let k=0;k<y.length;k++){const T=p.createEmptyElement("col"),P=`${xi(y[k]/Gh(y)*100)}%`;p.setStyle("width",P,T),p.insert(p.createPositionAt(C,"end"),T)}p.insert(p.createPositionAt(E,0),C)}function g(p,y,E){const C=E.widths.viewFigureWidth/E.widths.viewFigureParentWidth;p.addClass("ck-table-resized",y),p.addClass("ck-table-column-resizer__active",E.elements.viewResizer),p.setStyle("width",`${xi(C*100)}%`,y.findAncestor("figure"))}}_onMouseMoveHandler(e,n){if(!this._isResizingActive)return;if(!this._isResizingAllowed){this._onMouseUpHandler();return}const{columnPosition:s,flags:{isRightEdge:r,isTableCentered:o,isLtrContent:a},elements:{viewFigure:l,viewLeftColumn:u,viewRightColumn:h},widths:{viewFigureParentWidth:f,tableWidth:g,leftColumnWidth:p,rightColumnWidth:y}}=this._resizingData,E=-p+i_,C=r?f-g:y-i_,k=(a?1:-1)*(r&&o?2:1),T=t0e((n.clientX-s)*k,Math.min(E,0),Math.max(C,0));T!==0&&this.editor.editing.view.change(P=>{const S=xi((p+T)*100/g);if(P.setStyle("width",`${S}%`,u),r){const O=xi((g+T)*100/f);P.setStyle("width",`${O}%`,l)}else{const O=xi((y-T)*100/g);P.setStyle("width",`${O}%`,h)}})}_onMouseUpHandler(){if(!this._isResizingActive)return;const{viewResizer:e,modelTable:n,viewFigure:s,viewColgroup:r}=this._resizingData.elements,o=this.editor,a=o.editing.view,l=this.getColumnGroupElement(n),u=Array.from(r.getChildren()).filter(C=>C.is("view:element")),h=l?this.getTableColumnsWidths(l):null,f=u.map(C=>C.getStyle("width")),g=!wp(h,f),p=n.getAttribute("tableWidth"),y=s.getStyle("width"),E=p!==y;(g||E)&&(this._isResizingAllowed?o.execute("resizeTableWidth",{table:n,tableWidth:`${xi(y)}%`,columnWidths:f}):a.change(C=>{if(h)for(const k of u)C.setStyle("width",h.shift(),k);else C.remove(r);E&&(p?C.setStyle("width",p,s):C.removeStyle("width",s)),!h&&!p&&C.removeClass("ck-table-resized",[...s.getChildren()].find(k=>k.name==="table"))})),a.change(C=>{C.removeClass("ck-table-column-resizer__active",e)}),this._isResizingActive=!1,this._resizingData=null}_getResizingData(e,n){const s=this.editor,r=e.domEvent.clientX,o=e.target,a=o.findAncestor("td")||o.findAncestor("th"),l=s.editing.mapper.toModelElement(a),u=l.findAncestor("table"),h=e0e(l,this._tableUtilsPlugin).rightEdge,f=this._tableUtilsPlugin.getColumns(u)-1,g=h===f,p=!u.hasAttribute("tableAlignment"),y=s.locale.contentLanguageDirection!=="rtl",E=a.findAncestor("table"),C=E.findAncestor("figure"),k=[...E.getChildren()].find(M=>M.is("element","colgroup")),T=k.getChild(h),P=g?void 0:k.getChild(h+1),S=s_(s.editing.view.domConverter.mapViewToDom(C.parent)),O=s_(s.editing.view.domConverter.mapViewToDom(C)),A=FV(u,s),N=n[h],L=g?void 0:n[h+1];return{columnPosition:r,flags:{isRightEdge:g,isTableCentered:p,isLtrContent:y},elements:{viewResizer:o,modelTable:u,viewFigure:C,viewColgroup:k,viewLeftColumn:T,viewRightColumn:P},widths:{viewFigureParentWidth:S,viewFigureWidth:O,tableWidth:A,leftColumnWidth:N,rightColumnWidth:L}}}_registerResizerInserter(){this.editor.conversion.for("editingDowncast").add(e=>{e.on("insert:tableCell",(n,s,r)=>{const o=s.item,a=r.mapper.toViewElement(o),l=r.writer;l.insert(l.createPositionAt(a,"end"),l.createUIElement("div",{class:"ck-table-column-resizer"}))},{priority:"lowest"})})}}class H1e extends J{static get requires(){return[j1e,sD]}static get pluginName(){return"TableColumnResize"}static get isOfficialPlugin(){return!0}}const U1e="GPL",F5={colors:[{color:"#222",label:"primary"},{color:"#47564a",label:"secondary"},{color:"#cbc6a3",label:"tertiary"},{color:"#42b983",label:"success"},{color:"#e53e3e",label:"danger"},{color:"#fbfcf8",label:"light"},{color:"#757779",label:"dark"},{color:"#308760",label:"info"},{color:"#cccccc",label:"gray"},{color:"#dfdbcf",label:"background"}],columns:5,documentColors:10},W1e=({content:i,setContent:t})=>{const e=R.useRef(null),n=R.useRef(null),[s,r]=R.useState(!1);R.useEffect(()=>(r(!0),()=>r(!1)),[]);const{editorConfig:o}=R.useMemo(()=>s?{editorConfig:{toolbar:{items:["heading","|","fontSize","fontFamily","fontColor","fontBackgroundColor","|","bold","italic","underline","alignment","|","link","mediaEmbed","insertTable","blockQuote","|","bulletedList","numberedList","todoList","outdent","indent","|","toggleImageCaption","imageTextAlternative","|","imageStyle:inline","imageStyle:wrapText","imageStyle:breakText","|","resizeImage"],shouldNotGroupWhenFull:!1},plugins:[the,Che,ige,xhe,Whe,She,Zfe,fme,Hme,Bme,Cme,Nme,Zme,fge,vge,gge,$ge,Xge,lpe,dC,cpe,Dge,fpe,gpe,Rhe,Wpe,Jpe,Cbe,Hbe,mwe,Vwe,Ip,Tve,U0e,B1e,h1e,H1e,I1e,W0e,ghe,ewe,Lhe],fontFamily:{supportAllValues:!0},fontSize:{options:[10,12,14,"default",18,20,22],supportAllValues:!0},heading:{options:[{model:"paragraph",title:"Paragraph",class:"ck-heading_paragraph"},{model:"heading1",view:"h1",title:"Heading 1",class:"ck-heading_heading1"},{model:"heading2",view:"h2",title:"Heading 2",class:"ck-heading_heading2"},{model:"heading3",view:"h3",title:"Heading 3",class:"ck-heading_heading3"},{model:"heading4",view:"h4",title:"Heading 4",class:"ck-heading_heading4"},{model:"heading5",view:"h5",title:"Heading 5",class:"ck-heading_heading5"},{model:"heading6",view:"h6",title:"Heading 6",class:"ck-heading_heading6"}]},image:{toolbar:["toggleImageCaption","imageTextAlternative","|","imageStyle:inline","imageStyle:wrapText","imageStyle:breakText","|","resizeImage"]},initialData:"",licenseKey:U1e,link:{addTargetToExternalLinks:!0,defaultProtocol:"https://",decorators:{toggleDownloadable:{mode:"manual",label:"Downloadable",attributes:{download:"file"}}}},list:{properties:{styles:!0,startIndex:!0,reversed:!0}},placeholder:"請輸入內文",table:{contentToolbar:["tableColumn","tableRow","mergeTableCells","tableProperties","tableCellProperties"]},fontColor:F5,fontBackgroundColor:F5}}:{},[s]);return v.jsx("div",{className:"main-container",children:v.jsx("div",{className:"editor-container editor-container_classic-editor",ref:e,children:v.jsx("div",{className:"editor-container__editor",children:v.jsx("div",{ref:n,children:o&&v.jsx(_N,{editor:Qfe,data:i,config:o,onChange:(a,l)=>t(l.getData())})})})})})},q1e={BASE_URL:"/react-and-bloom/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_BASE:"https://ec-course-api.hexschool.io/v2",VITE_API_PATH:"and-bloom"},{VITE_API_BASE:T1,VITE_API_PATH:S1}=q1e,$5={author:"",description:"",image:"",isPublic:!0,tag:[],title:"",content:"",create_at:""},G1e=R.forwardRef(({selectedArticle:i,getList:t},e)=>{const n=vn(),[s,r]=R.useState(!1),o=R.useRef(null),a=R.useRef(null),[l,u]=R.useState(""),{register:h,handleSubmit:f,watch:g,getValues:p,setValue:y,reset:E,control:C,formState:{errors:k}}=cf({mode:"onTouched",defaultValues:$5});R.useEffect(()=>{o.current&&(a.current=new Js(o.current))},[]);const[T,P,S,O]=oE({control:C,name:["image","isPublic","tag","content"]}),A=async U=>{var me,_e,ge;const q=(me=U.target.files)==null?void 0:me[0],ee=new FormData;if(q){ee.append("file-to-upload",q),U.target.files=new DataTransfer().files;try{r(!0);const pe=document.cookie.replace(/(?:(?:^|.*;\s*)andBloom\s*=\s*([^;]*).*$)|^.*$/,"$1");Le.defaults.headers.common.Authorization=pe;const ae=await Le.post(`${T1}/api/${S1}/admin/upload`,ee,{headers:{"Content-Type":"multipart/form-data"}});y("image",ae.data.imageUrl,{shouldValidate:!0})}catch(pe){pe instanceof St&&(console.log((_e=pe==null?void 0:pe.response)==null?void 0:_e.data.message),n(en({text:(ge=pe==null?void 0:pe.response)==null?void 0:ge.data.message,type:"danger"})))}finally{r(!1)}}},N=async U=>{var q,ee,me;try{n(Xe(!0));const _e=document.cookie.replace(/(?:(?:^|.*;\s*)andBloom\s*=\s*([^;]*).*$)|^.*$/,"$1");Le.defaults.headers.common.Authorization=_e;const ge=await Le[i?"put":"post"](`${T1}/api/${S1}/admin/article${i?`/${i.id}`:""}`,{data:U});t(),(q=a.current)==null||q.hide(),n(en({text:ge==null?void 0:ge.data.message,type:"success"}))}catch(_e){_e instanceof St&&(console.log((ee=_e==null?void 0:_e.response)==null?void 0:ee.data.message),n(en({text:(me=_e==null?void 0:_e.response)==null?void 0:me.data.message,type:"danger"})))}finally{n(Xe(!1))}};R.useEffect(()=>{const U=o.current,q=()=>{E($5)};return U==null||U.addEventListener("hidden.bs.modal",q),()=>U==null?void 0:U.removeEventListener("hidden.bs.modal",q)},[o,E]),R.useEffect(()=>{const U=o.current,q=async()=>{var ee,me;if(i)try{n(Xe(!0));const _e=document.cookie.replace(/(?:(?:^|.*;\s*)andBloom\s*=\s*([^;]*).*$)|^.*$/,"$1");Le.defaults.headers.common.Authorization=_e;const ge=await Le.get(`${T1}/api/${S1}/admin/article/${i.id}`);E({...i,content:(ee=ge.data.article)==null?void 0:ee.content,create_at:uo(i.create_at)})}catch(_e){_e instanceof St&&console.log((me=_e==null?void 0:_e.response)==null?void 0:me.data.message)}finally{n(Xe(!1))}};return U==null||U.addEventListener("shown.bs.modal",q),()=>U==null?void 0:U.removeEventListener("shown.bs.modal",q)},[i,o,E,n]),R.useImperativeHandle(e,()=>({show:()=>{var U;(U=a.current)==null||U.show()},hide:()=>{var U;(U=a.current)==null||U.hide()}}));const L=U=>{const q=[...S];q.splice(U,1),y("tag",q)},M=()=>{y("tag",[...S,l]),u("")},B=U=>{y("content",U)};return v.jsx("div",{className:"modal fade","data-bs-focus":!1,"data-bs-keyboard":!1,"data-bs-backdrop":"static",tabIndex:-1,ref:o,children:v.jsx("div",{className:"modal-dialog modal-lg",children:v.jsxs("div",{className:"modal-content",children:[v.jsxs("div",{className:"modal-header",children:[v.jsx("h2",{className:"modal-title fs-5",children:i?"編輯文章":"新增文章"}),v.jsx("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),v.jsxs("form",{onSubmit:f(N),children:[v.jsx("div",{className:"modal-body",children:v.jsxs("div",{className:"row",children:[v.jsx("div",{className:"mb-3",children:v.jsx(Ti,{id:"title",label:"文章標題",type:"text",placeholder:"請輸入標題",register:h,errors:k,rules:{required:"文章標題必填"}})}),v.jsx("div",{className:"mb-3",children:v.jsx(Ti,{id:"author",label:"作者",type:"text",placeholder:"請輸入作者",register:h,errors:k,rules:{required:"作者必填"}})}),v.jsx("div",{className:"col-lg-6 mb-3",children:v.jsx(Ws,{id:"tag",label:"文章標籤",errors:k,children:v.jsxs("div",{className:`d-block ${k.is_enabled&&"is-invalid"}`,children:[v.jsxs("div",{className:"input-group",children:[v.jsx("input",{type:"text",className:"form-control w-auto",placeholder:"請輸入標籤",value:l,onChange:U=>u(U.target.value)}),v.jsx("button",{className:"btn btn-secondary",type:"button",onClick:M,children:"加入標籤"})]}),S==null?void 0:S.map((U,q)=>v.jsxs("span",{className:"badge rounded-pill bg-primary mt-2 me-2",children:[U,v.jsx("i",{className:"bi bi-x-lg opacity-75 cursor-pointer ps-1",onClick:()=>L(q)})]},`tag-${q}`))]})})}),v.jsx("div",{className:"col-lg-6 mb-3",children:v.jsx(Ti,{id:"create_at",label:"文章日期",type:"date",placeholder:"請輸入文章日期",register:h,errors:k,rules:{required:"文章日期必填",setValueAs:U=>U?new Date(U).getTime()/1e3:null}})}),v.jsx("div",{className:"mb-3",children:v.jsx(Ws,{id:"isPublic",label:"是否公開",errors:k,children:v.jsxs("div",{className:`d-block ${k.isPublic&&"is-invalid"}`,role:"group",children:[v.jsx("input",{type:"checkbox",className:"btn-check",id:"enabled",...h("isPublic")}),v.jsx("label",{className:`btn px-4 ${P?"btn-success":"btn-danger"}`,htmlFor:"enabled",children:P?"公開":"隱藏"})]})})}),v.jsx("div",{className:"col-md-6 mb-3",children:v.jsxs(Ws,{id:"image",label:"文章主圖",isRequired:!0,errors:k,children:[v.jsxs("div",{children:[v.jsx("input",{id:"mainImage",type:"file",className:"form-control d-none",disabled:!!s,onChange:A}),v.jsxs("label",{className:`btn btn-primary ${s&&"opacity-50"}`,htmlFor:"mainImage",children:[s&&v.jsx("span",{className:"spinner-grow spinner-grow-sm me-2"}),"上傳圖片"]})]}),T&&v.jsx("img",{src:T,alt:"主圖",className:"img-fluid mt-3"}),v.jsx("input",{id:"image",className:`form-control-sm form-control-plaintext ${T?"":"d-none"}`,readOnly:!0,...h("image",{required:"請上傳主圖"})})]})}),v.jsx("div",{className:"mb-3",children:v.jsx(jc,{id:"description",label:"文章說明",placeholder:"請輸入文章內容",register:h,errors:k,rules:{required:"文章說明必填"}})}),v.jsx("div",{className:"mb-3",children:v.jsx(Ws,{id:"content",label:"內文",errors:k,isRequired:!0,children:v.jsx(W1e,{content:O,setContent:B})})})]})}),v.jsxs("div",{className:"modal-footer",children:[v.jsx(qt,{btnStyle:"btn btn-outline-secondary px-4","data-bs-dismiss":"modal",children:"取消"}),v.jsx(qt,{type:"submit",btnStyle:"btn btn-secondary px-4",children:"儲存"})]})]})]})})})}),K1e=R.memo(G1e),Y1e={BASE_URL:"/react-and-bloom/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_BASE:"https://ec-course-api.hexschool.io/v2",VITE_API_PATH:"and-bloom"},{VITE_API_BASE:z5,VITE_API_PATH:j5}=Y1e,Z1e=()=>{const i=vn(),[t,e]=R.useState([]),[n,s]=R.useState(1),[r,o]=R.useState(1),[a,l]=R.useState(null),u=R.useRef(null),h=R.useRef(null),f=R.useCallback(async()=>{var C,k,T;try{i(Xe(!0));const P=document.cookie.replace(/(?:(?:^|.*;\s*)andBloom\s*=\s*([^;]*).*$)|^.*$/,"$1");Le.defaults.headers.common.Authorization=P;const S=await Le.get(`${z5}/api/${j5}/admin/articles?page=${n}`);e(S.data.articles),o((C=S.data.pagination)==null?void 0:C.total_pages),s((k=S.data.pagination)==null?void 0:k.current_page)}catch(P){P instanceof St&&console.log((T=P==null?void 0:P.response)==null?void 0:T.data.message)}finally{i(Xe(!1))}},[n,i]);R.useEffect(()=>{f()},[f]);const g=R.useCallback(()=>{var C;(C=u.current)==null||C.show()},[]),p=R.useCallback(()=>{var C;(C=h.current)==null||C.show()},[]),y=R.useCallback(()=>{l(null),g()},[g]),E=R.useCallback(async C=>{var k,T,P;if(C)try{i(Xe(!0));const S=await Le.delete(`${z5}/api/${j5}/admin/article/${C}`);i(en({text:S==null?void 0:S.data.message,type:"success"})),f(),(k=h.current)==null||k.hide()}catch(S){S instanceof St&&(console.log((T=S==null?void 0:S.response)==null?void 0:T.data.message),i(en({text:(P=S==null?void 0:S.response)==null?void 0:P.data.message,type:"danger"})))}finally{i(Xe(!1)),l(null)}},[i,f]);return v.jsxs(v.Fragment,{children:[v.jsxs("div",{className:"d-flex justify-content-between align-items-center pb-3 mb-3 border-bottom",children:[v.jsx("h3",{className:"mb-0",children:"文章列表"}),v.jsx(qt,{btnStyle:"btn-sm btn-secondary",handleClick:y,children:"新增"})]}),t.length?v.jsxs(v.Fragment,{children:[t.map(C=>v.jsx(IZ,{showModal:g,setSelectedArticle:l,showAlertModal:p,article:C},C.id)),v.jsx("div",{className:"d-flex justify-content-center my-5",children:v.jsx(Su,{currentPage:n,totalPages:r,setCurrentPage:s})})]}):v.jsx("p",{className:"text-center",children:"尚無文章，請新增文章"}),v.jsx(K1e,{ref:u,selectedArticle:a,getList:f}),v.jsx(af,{ref:h,nextFn:()=>E((a==null?void 0:a.id)||""),children:v.jsxs("p",{className:"text-center py-4",children:["刪除後無法復原，您確定刪除",v.jsx("strong",{children:a==null?void 0:a.title}),"嗎？"]})})]})},X1e=uj([{path:"",element:v.jsx(JY,{})},{path:"/",element:v.jsx(pq,{}),children:[{path:"products",element:v.jsx(rZ,{})},{path:"product/:id",element:v.jsx(sZ,{})},{path:"cart",element:v.jsx(KK,{})},{path:"checkout/:id",element:v.jsx(_Z,{})},{path:"articles",element:v.jsx(CZ,{})},{path:"article/:id",element:v.jsx(AZ,{})}]},{path:"/login",element:v.jsx(lZ,{})},{path:"/admin",element:v.jsx(uq,{}),children:[{index:!0,loader:async()=>W$("/admin/products")},{path:"products",element:v.jsx(tG,{})},{path:"orders",element:v.jsx(qq,{})},{path:"coupons",element:v.jsx(wZ,{})},{path:"articles",element:v.jsx(Z1e,{})}]},{path:"*",element:v.jsx(cZ,{})}]),J1e=()=>v.jsxs(v.Fragment,{children:[v.jsx(Dz,{router:X1e}),v.jsx(bH,{}),v.jsx(mH,{})]});e$.createRoot(document.getElementById("root")).render(v.jsx(v.Fragment,{children:v.jsx(g$,{store:eq,children:v.jsx(J1e,{})})}))});export default Q1e();
